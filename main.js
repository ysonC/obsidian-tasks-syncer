/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name3 in all)
    __defProp(target, name3, { get: all[name3], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// node_modules/dotenv/package.json
var require_package = __commonJS({
  "node_modules/dotenv/package.json"(exports, module2) {
    module2.exports = {
      name: "dotenv",
      version: "16.4.7",
      description: "Loads environment variables from .env file",
      main: "lib/main.js",
      types: "lib/main.d.ts",
      exports: {
        ".": {
          types: "./lib/main.d.ts",
          require: "./lib/main.js",
          default: "./lib/main.js"
        },
        "./config": "./config.js",
        "./config.js": "./config.js",
        "./lib/env-options": "./lib/env-options.js",
        "./lib/env-options.js": "./lib/env-options.js",
        "./lib/cli-options": "./lib/cli-options.js",
        "./lib/cli-options.js": "./lib/cli-options.js",
        "./package.json": "./package.json"
      },
      scripts: {
        "dts-check": "tsc --project tests/types/tsconfig.json",
        lint: "standard",
        pretest: "npm run lint && npm run dts-check",
        test: "tap run --allow-empty-coverage --disable-coverage --timeout=60000",
        "test:coverage": "tap run --show-full-coverage --timeout=60000 --coverage-report=lcov",
        prerelease: "npm test",
        release: "standard-version"
      },
      repository: {
        type: "git",
        url: "git://github.com/motdotla/dotenv.git"
      },
      funding: "https://dotenvx.com",
      keywords: [
        "dotenv",
        "env",
        ".env",
        "environment",
        "variables",
        "config",
        "settings"
      ],
      readmeFilename: "README.md",
      license: "BSD-2-Clause",
      devDependencies: {
        "@types/node": "^18.11.3",
        decache: "^4.6.2",
        sinon: "^14.0.1",
        standard: "^17.0.0",
        "standard-version": "^9.5.0",
        tap: "^19.2.0",
        typescript: "^4.8.4"
      },
      engines: {
        node: ">=12"
      },
      browser: {
        fs: false
      }
    };
  }
});

// node_modules/dotenv/lib/main.js
var require_main = __commonJS({
  "node_modules/dotenv/lib/main.js"(exports, module2) {
    var fs3 = require("fs");
    var path3 = require("path");
    var os = require("os");
    var crypto4 = require("crypto");
    var packageJson = require_package();
    var version3 = packageJson.version;
    var LINE = /(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;
    function parse(src) {
      const obj = {};
      let lines = src.toString();
      lines = lines.replace(/\r\n?/mg, "\n");
      let match;
      while ((match = LINE.exec(lines)) != null) {
        const key = match[1];
        let value = match[2] || "";
        value = value.trim();
        const maybeQuote = value[0];
        value = value.replace(/^(['"`])([\s\S]*)\1$/mg, "$2");
        if (maybeQuote === '"') {
          value = value.replace(/\\n/g, "\n");
          value = value.replace(/\\r/g, "\r");
        }
        obj[key] = value;
      }
      return obj;
    }
    function _parseVault(options) {
      const vaultPath = _vaultPath(options);
      const result = DotenvModule.configDotenv({ path: vaultPath });
      if (!result.parsed) {
        const err = new Error(`MISSING_DATA: Cannot parse ${vaultPath} for an unknown reason`);
        err.code = "MISSING_DATA";
        throw err;
      }
      const keys = _dotenvKey(options).split(",");
      const length = keys.length;
      let decrypted;
      for (let i = 0; i < length; i++) {
        try {
          const key = keys[i].trim();
          const attrs = _instructions(result, key);
          decrypted = DotenvModule.decrypt(attrs.ciphertext, attrs.key);
          break;
        } catch (error) {
          if (i + 1 >= length) {
            throw error;
          }
        }
      }
      return DotenvModule.parse(decrypted);
    }
    function _log(message) {
      console.log(`[dotenv@${version3}][INFO] ${message}`);
    }
    function _warn(message) {
      console.log(`[dotenv@${version3}][WARN] ${message}`);
    }
    function _debug(message) {
      console.log(`[dotenv@${version3}][DEBUG] ${message}`);
    }
    function _dotenvKey(options) {
      if (options && options.DOTENV_KEY && options.DOTENV_KEY.length > 0) {
        return options.DOTENV_KEY;
      }
      if (process.env.DOTENV_KEY && process.env.DOTENV_KEY.length > 0) {
        return process.env.DOTENV_KEY;
      }
      return "";
    }
    function _instructions(result, dotenvKey) {
      let uri;
      try {
        uri = new URL(dotenvKey);
      } catch (error) {
        if (error.code === "ERR_INVALID_URL") {
          const err = new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");
          err.code = "INVALID_DOTENV_KEY";
          throw err;
        }
        throw error;
      }
      const key = uri.password;
      if (!key) {
        const err = new Error("INVALID_DOTENV_KEY: Missing key part");
        err.code = "INVALID_DOTENV_KEY";
        throw err;
      }
      const environment = uri.searchParams.get("environment");
      if (!environment) {
        const err = new Error("INVALID_DOTENV_KEY: Missing environment part");
        err.code = "INVALID_DOTENV_KEY";
        throw err;
      }
      const environmentKey = `DOTENV_VAULT_${environment.toUpperCase()}`;
      const ciphertext = result.parsed[environmentKey];
      if (!ciphertext) {
        const err = new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${environmentKey} in your .env.vault file.`);
        err.code = "NOT_FOUND_DOTENV_ENVIRONMENT";
        throw err;
      }
      return { ciphertext, key };
    }
    function _vaultPath(options) {
      let possibleVaultPath = null;
      if (options && options.path && options.path.length > 0) {
        if (Array.isArray(options.path)) {
          for (const filepath of options.path) {
            if (fs3.existsSync(filepath)) {
              possibleVaultPath = filepath.endsWith(".vault") ? filepath : `${filepath}.vault`;
            }
          }
        } else {
          possibleVaultPath = options.path.endsWith(".vault") ? options.path : `${options.path}.vault`;
        }
      } else {
        possibleVaultPath = path3.resolve(process.cwd(), ".env.vault");
      }
      if (fs3.existsSync(possibleVaultPath)) {
        return possibleVaultPath;
      }
      return null;
    }
    function _resolveHome(envPath) {
      return envPath[0] === "~" ? path3.join(os.homedir(), envPath.slice(1)) : envPath;
    }
    function _configVault(options) {
      _log("Loading env from encrypted .env.vault");
      const parsed = DotenvModule._parseVault(options);
      let processEnv = process.env;
      if (options && options.processEnv != null) {
        processEnv = options.processEnv;
      }
      DotenvModule.populate(processEnv, parsed, options);
      return { parsed };
    }
    function configDotenv(options) {
      const dotenvPath = path3.resolve(process.cwd(), ".env");
      let encoding = "utf8";
      const debug = Boolean(options && options.debug);
      if (options && options.encoding) {
        encoding = options.encoding;
      } else {
        if (debug) {
          _debug("No encoding is specified. UTF-8 is used by default");
        }
      }
      let optionPaths = [dotenvPath];
      if (options && options.path) {
        if (!Array.isArray(options.path)) {
          optionPaths = [_resolveHome(options.path)];
        } else {
          optionPaths = [];
          for (const filepath of options.path) {
            optionPaths.push(_resolveHome(filepath));
          }
        }
      }
      let lastError;
      const parsedAll = {};
      for (const path4 of optionPaths) {
        try {
          const parsed = DotenvModule.parse(fs3.readFileSync(path4, { encoding }));
          DotenvModule.populate(parsedAll, parsed, options);
        } catch (e) {
          if (debug) {
            _debug(`Failed to load ${path4} ${e.message}`);
          }
          lastError = e;
        }
      }
      let processEnv = process.env;
      if (options && options.processEnv != null) {
        processEnv = options.processEnv;
      }
      DotenvModule.populate(processEnv, parsedAll, options);
      if (lastError) {
        return { parsed: parsedAll, error: lastError };
      } else {
        return { parsed: parsedAll };
      }
    }
    function config2(options) {
      if (_dotenvKey(options).length === 0) {
        return DotenvModule.configDotenv(options);
      }
      const vaultPath = _vaultPath(options);
      if (!vaultPath) {
        _warn(`You set DOTENV_KEY but you are missing a .env.vault file at ${vaultPath}. Did you forget to build it?`);
        return DotenvModule.configDotenv(options);
      }
      return DotenvModule._configVault(options);
    }
    function decrypt(encrypted, keyStr) {
      const key = Buffer.from(keyStr.slice(-64), "hex");
      let ciphertext = Buffer.from(encrypted, "base64");
      const nonce = ciphertext.subarray(0, 12);
      const authTag = ciphertext.subarray(-16);
      ciphertext = ciphertext.subarray(12, -16);
      try {
        const aesgcm = crypto4.createDecipheriv("aes-256-gcm", key, nonce);
        aesgcm.setAuthTag(authTag);
        return `${aesgcm.update(ciphertext)}${aesgcm.final()}`;
      } catch (error) {
        const isRange = error instanceof RangeError;
        const invalidKeyLength = error.message === "Invalid key length";
        const decryptionFailed = error.message === "Unsupported state or unable to authenticate data";
        if (isRange || invalidKeyLength) {
          const err = new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");
          err.code = "INVALID_DOTENV_KEY";
          throw err;
        } else if (decryptionFailed) {
          const err = new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");
          err.code = "DECRYPTION_FAILED";
          throw err;
        } else {
          throw error;
        }
      }
    }
    function populate(processEnv, parsed, options = {}) {
      const debug = Boolean(options && options.debug);
      const override = Boolean(options && options.override);
      if (typeof parsed !== "object") {
        const err = new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");
        err.code = "OBJECT_REQUIRED";
        throw err;
      }
      for (const key of Object.keys(parsed)) {
        if (Object.prototype.hasOwnProperty.call(processEnv, key)) {
          if (override === true) {
            processEnv[key] = parsed[key];
          }
          if (debug) {
            if (override === true) {
              _debug(`"${key}" is already defined and WAS overwritten`);
            } else {
              _debug(`"${key}" is already defined and was NOT overwritten`);
            }
          }
        } else {
          processEnv[key] = parsed[key];
        }
      }
    }
    var DotenvModule = {
      configDotenv,
      _configVault,
      _parseVault,
      config: config2,
      decrypt,
      parse,
      populate
    };
    module2.exports.configDotenv = DotenvModule.configDotenv;
    module2.exports._configVault = DotenvModule._configVault;
    module2.exports._parseVault = DotenvModule._parseVault;
    module2.exports.config = DotenvModule.config;
    module2.exports.decrypt = DotenvModule.decrypt;
    module2.exports.parse = DotenvModule.parse;
    module2.exports.populate = DotenvModule.populate;
    module2.exports = DotenvModule;
  }
});

// node_modules/safe-buffer/index.js
var require_safe_buffer = __commonJS({
  "node_modules/safe-buffer/index.js"(exports, module2) {
    var buffer = require("buffer");
    var Buffer2 = buffer.Buffer;
    function copyProps(src, dst) {
      for (var key in src) {
        dst[key] = src[key];
      }
    }
    if (Buffer2.from && Buffer2.alloc && Buffer2.allocUnsafe && Buffer2.allocUnsafeSlow) {
      module2.exports = buffer;
    } else {
      copyProps(buffer, exports);
      exports.Buffer = SafeBuffer;
    }
    function SafeBuffer(arg, encodingOrOffset, length) {
      return Buffer2(arg, encodingOrOffset, length);
    }
    SafeBuffer.prototype = Object.create(Buffer2.prototype);
    copyProps(Buffer2, SafeBuffer);
    SafeBuffer.from = function(arg, encodingOrOffset, length) {
      if (typeof arg === "number") {
        throw new TypeError("Argument must not be a number");
      }
      return Buffer2(arg, encodingOrOffset, length);
    };
    SafeBuffer.alloc = function(size, fill, encoding) {
      if (typeof size !== "number") {
        throw new TypeError("Argument must be a number");
      }
      var buf = Buffer2(size);
      if (fill !== void 0) {
        if (typeof encoding === "string") {
          buf.fill(fill, encoding);
        } else {
          buf.fill(fill);
        }
      } else {
        buf.fill(0);
      }
      return buf;
    };
    SafeBuffer.allocUnsafe = function(size) {
      if (typeof size !== "number") {
        throw new TypeError("Argument must be a number");
      }
      return Buffer2(size);
    };
    SafeBuffer.allocUnsafeSlow = function(size) {
      if (typeof size !== "number") {
        throw new TypeError("Argument must be a number");
      }
      return buffer.SlowBuffer(size);
    };
  }
});

// node_modules/jws/lib/data-stream.js
var require_data_stream = __commonJS({
  "node_modules/jws/lib/data-stream.js"(exports, module2) {
    var Buffer2 = require_safe_buffer().Buffer;
    var Stream = require("stream");
    var util = require("util");
    function DataStream(data) {
      this.buffer = null;
      this.writable = true;
      this.readable = true;
      if (!data) {
        this.buffer = Buffer2.alloc(0);
        return this;
      }
      if (typeof data.pipe === "function") {
        this.buffer = Buffer2.alloc(0);
        data.pipe(this);
        return this;
      }
      if (data.length || typeof data === "object") {
        this.buffer = data;
        this.writable = false;
        process.nextTick(function() {
          this.emit("end", data);
          this.readable = false;
          this.emit("close");
        }.bind(this));
        return this;
      }
      throw new TypeError("Unexpected data type (" + typeof data + ")");
    }
    util.inherits(DataStream, Stream);
    DataStream.prototype.write = function write(data) {
      this.buffer = Buffer2.concat([this.buffer, Buffer2.from(data)]);
      this.emit("data", data);
    };
    DataStream.prototype.end = function end(data) {
      if (data)
        this.write(data);
      this.emit("end", data);
      this.emit("close");
      this.writable = false;
      this.readable = false;
    };
    module2.exports = DataStream;
  }
});

// node_modules/buffer-equal-constant-time/index.js
var require_buffer_equal_constant_time = __commonJS({
  "node_modules/buffer-equal-constant-time/index.js"(exports, module2) {
    "use strict";
    var Buffer2 = require("buffer").Buffer;
    var SlowBuffer = require("buffer").SlowBuffer;
    module2.exports = bufferEq;
    function bufferEq(a, b) {
      if (!Buffer2.isBuffer(a) || !Buffer2.isBuffer(b)) {
        return false;
      }
      if (a.length !== b.length) {
        return false;
      }
      var c = 0;
      for (var i = 0; i < a.length; i++) {
        c |= a[i] ^ b[i];
      }
      return c === 0;
    }
    bufferEq.install = function() {
      Buffer2.prototype.equal = SlowBuffer.prototype.equal = function equal(that) {
        return bufferEq(this, that);
      };
    };
    var origBufEqual = Buffer2.prototype.equal;
    var origSlowBufEqual = SlowBuffer.prototype.equal;
    bufferEq.restore = function() {
      Buffer2.prototype.equal = origBufEqual;
      SlowBuffer.prototype.equal = origSlowBufEqual;
    };
  }
});

// node_modules/ecdsa-sig-formatter/src/param-bytes-for-alg.js
var require_param_bytes_for_alg = __commonJS({
  "node_modules/ecdsa-sig-formatter/src/param-bytes-for-alg.js"(exports, module2) {
    "use strict";
    function getParamSize(keySize) {
      var result = (keySize / 8 | 0) + (keySize % 8 === 0 ? 0 : 1);
      return result;
    }
    var paramBytesForAlg = {
      ES256: getParamSize(256),
      ES384: getParamSize(384),
      ES512: getParamSize(521)
    };
    function getParamBytesForAlg(alg) {
      var paramBytes = paramBytesForAlg[alg];
      if (paramBytes) {
        return paramBytes;
      }
      throw new Error('Unknown algorithm "' + alg + '"');
    }
    module2.exports = getParamBytesForAlg;
  }
});

// node_modules/ecdsa-sig-formatter/src/ecdsa-sig-formatter.js
var require_ecdsa_sig_formatter = __commonJS({
  "node_modules/ecdsa-sig-formatter/src/ecdsa-sig-formatter.js"(exports, module2) {
    "use strict";
    var Buffer2 = require_safe_buffer().Buffer;
    var getParamBytesForAlg = require_param_bytes_for_alg();
    var MAX_OCTET = 128;
    var CLASS_UNIVERSAL = 0;
    var PRIMITIVE_BIT = 32;
    var TAG_SEQ = 16;
    var TAG_INT = 2;
    var ENCODED_TAG_SEQ = TAG_SEQ | PRIMITIVE_BIT | CLASS_UNIVERSAL << 6;
    var ENCODED_TAG_INT = TAG_INT | CLASS_UNIVERSAL << 6;
    function base64Url(base64) {
      return base64.replace(/=/g, "").replace(/\+/g, "-").replace(/\//g, "_");
    }
    function signatureAsBuffer(signature) {
      if (Buffer2.isBuffer(signature)) {
        return signature;
      } else if ("string" === typeof signature) {
        return Buffer2.from(signature, "base64");
      }
      throw new TypeError("ECDSA signature must be a Base64 string or a Buffer");
    }
    function derToJose(signature, alg) {
      signature = signatureAsBuffer(signature);
      var paramBytes = getParamBytesForAlg(alg);
      var maxEncodedParamLength = paramBytes + 1;
      var inputLength = signature.length;
      var offset = 0;
      if (signature[offset++] !== ENCODED_TAG_SEQ) {
        throw new Error('Could not find expected "seq"');
      }
      var seqLength = signature[offset++];
      if (seqLength === (MAX_OCTET | 1)) {
        seqLength = signature[offset++];
      }
      if (inputLength - offset < seqLength) {
        throw new Error('"seq" specified length of "' + seqLength + '", only "' + (inputLength - offset) + '" remaining');
      }
      if (signature[offset++] !== ENCODED_TAG_INT) {
        throw new Error('Could not find expected "int" for "r"');
      }
      var rLength = signature[offset++];
      if (inputLength - offset - 2 < rLength) {
        throw new Error('"r" specified length of "' + rLength + '", only "' + (inputLength - offset - 2) + '" available');
      }
      if (maxEncodedParamLength < rLength) {
        throw new Error('"r" specified length of "' + rLength + '", max of "' + maxEncodedParamLength + '" is acceptable');
      }
      var rOffset = offset;
      offset += rLength;
      if (signature[offset++] !== ENCODED_TAG_INT) {
        throw new Error('Could not find expected "int" for "s"');
      }
      var sLength = signature[offset++];
      if (inputLength - offset !== sLength) {
        throw new Error('"s" specified length of "' + sLength + '", expected "' + (inputLength - offset) + '"');
      }
      if (maxEncodedParamLength < sLength) {
        throw new Error('"s" specified length of "' + sLength + '", max of "' + maxEncodedParamLength + '" is acceptable');
      }
      var sOffset = offset;
      offset += sLength;
      if (offset !== inputLength) {
        throw new Error('Expected to consume entire buffer, but "' + (inputLength - offset) + '" bytes remain');
      }
      var rPadding = paramBytes - rLength, sPadding = paramBytes - sLength;
      var dst = Buffer2.allocUnsafe(rPadding + rLength + sPadding + sLength);
      for (offset = 0; offset < rPadding; ++offset) {
        dst[offset] = 0;
      }
      signature.copy(dst, offset, rOffset + Math.max(-rPadding, 0), rOffset + rLength);
      offset = paramBytes;
      for (var o = offset; offset < o + sPadding; ++offset) {
        dst[offset] = 0;
      }
      signature.copy(dst, offset, sOffset + Math.max(-sPadding, 0), sOffset + sLength);
      dst = dst.toString("base64");
      dst = base64Url(dst);
      return dst;
    }
    function countPadding(buf, start, stop) {
      var padding = 0;
      while (start + padding < stop && buf[start + padding] === 0) {
        ++padding;
      }
      var needsSign = buf[start + padding] >= MAX_OCTET;
      if (needsSign) {
        --padding;
      }
      return padding;
    }
    function joseToDer(signature, alg) {
      signature = signatureAsBuffer(signature);
      var paramBytes = getParamBytesForAlg(alg);
      var signatureBytes = signature.length;
      if (signatureBytes !== paramBytes * 2) {
        throw new TypeError('"' + alg + '" signatures must be "' + paramBytes * 2 + '" bytes, saw "' + signatureBytes + '"');
      }
      var rPadding = countPadding(signature, 0, paramBytes);
      var sPadding = countPadding(signature, paramBytes, signature.length);
      var rLength = paramBytes - rPadding;
      var sLength = paramBytes - sPadding;
      var rsBytes = 1 + 1 + rLength + 1 + 1 + sLength;
      var shortLength = rsBytes < MAX_OCTET;
      var dst = Buffer2.allocUnsafe((shortLength ? 2 : 3) + rsBytes);
      var offset = 0;
      dst[offset++] = ENCODED_TAG_SEQ;
      if (shortLength) {
        dst[offset++] = rsBytes;
      } else {
        dst[offset++] = MAX_OCTET | 1;
        dst[offset++] = rsBytes & 255;
      }
      dst[offset++] = ENCODED_TAG_INT;
      dst[offset++] = rLength;
      if (rPadding < 0) {
        dst[offset++] = 0;
        offset += signature.copy(dst, offset, 0, paramBytes);
      } else {
        offset += signature.copy(dst, offset, rPadding, paramBytes);
      }
      dst[offset++] = ENCODED_TAG_INT;
      dst[offset++] = sLength;
      if (sPadding < 0) {
        dst[offset++] = 0;
        signature.copy(dst, offset, paramBytes);
      } else {
        signature.copy(dst, offset, paramBytes + sPadding);
      }
      return dst;
    }
    module2.exports = {
      derToJose,
      joseToDer
    };
  }
});

// node_modules/jwa/index.js
var require_jwa = __commonJS({
  "node_modules/jwa/index.js"(exports, module2) {
    var bufferEqual = require_buffer_equal_constant_time();
    var Buffer2 = require_safe_buffer().Buffer;
    var crypto4 = require("crypto");
    var formatEcdsa = require_ecdsa_sig_formatter();
    var util = require("util");
    var MSG_INVALID_ALGORITHM = '"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".';
    var MSG_INVALID_SECRET = "secret must be a string or buffer";
    var MSG_INVALID_VERIFIER_KEY = "key must be a string or a buffer";
    var MSG_INVALID_SIGNER_KEY = "key must be a string, a buffer or an object";
    var supportsKeyObjects = typeof crypto4.createPublicKey === "function";
    if (supportsKeyObjects) {
      MSG_INVALID_VERIFIER_KEY += " or a KeyObject";
      MSG_INVALID_SECRET += "or a KeyObject";
    }
    function checkIsPublicKey(key) {
      if (Buffer2.isBuffer(key)) {
        return;
      }
      if (typeof key === "string") {
        return;
      }
      if (!supportsKeyObjects) {
        throw typeError(MSG_INVALID_VERIFIER_KEY);
      }
      if (typeof key !== "object") {
        throw typeError(MSG_INVALID_VERIFIER_KEY);
      }
      if (typeof key.type !== "string") {
        throw typeError(MSG_INVALID_VERIFIER_KEY);
      }
      if (typeof key.asymmetricKeyType !== "string") {
        throw typeError(MSG_INVALID_VERIFIER_KEY);
      }
      if (typeof key.export !== "function") {
        throw typeError(MSG_INVALID_VERIFIER_KEY);
      }
    }
    function checkIsPrivateKey(key) {
      if (Buffer2.isBuffer(key)) {
        return;
      }
      if (typeof key === "string") {
        return;
      }
      if (typeof key === "object") {
        return;
      }
      throw typeError(MSG_INVALID_SIGNER_KEY);
    }
    function checkIsSecretKey(key) {
      if (Buffer2.isBuffer(key)) {
        return;
      }
      if (typeof key === "string") {
        return key;
      }
      if (!supportsKeyObjects) {
        throw typeError(MSG_INVALID_SECRET);
      }
      if (typeof key !== "object") {
        throw typeError(MSG_INVALID_SECRET);
      }
      if (key.type !== "secret") {
        throw typeError(MSG_INVALID_SECRET);
      }
      if (typeof key.export !== "function") {
        throw typeError(MSG_INVALID_SECRET);
      }
    }
    function fromBase64(base64) {
      return base64.replace(/=/g, "").replace(/\+/g, "-").replace(/\//g, "_");
    }
    function toBase64(base64url) {
      base64url = base64url.toString();
      var padding = 4 - base64url.length % 4;
      if (padding !== 4) {
        for (var i = 0; i < padding; ++i) {
          base64url += "=";
        }
      }
      return base64url.replace(/\-/g, "+").replace(/_/g, "/");
    }
    function typeError(template) {
      var args = [].slice.call(arguments, 1);
      var errMsg = util.format.bind(util, template).apply(null, args);
      return new TypeError(errMsg);
    }
    function bufferOrString(obj) {
      return Buffer2.isBuffer(obj) || typeof obj === "string";
    }
    function normalizeInput(thing) {
      if (!bufferOrString(thing))
        thing = JSON.stringify(thing);
      return thing;
    }
    function createHmacSigner(bits) {
      return function sign(thing, secret) {
        checkIsSecretKey(secret);
        thing = normalizeInput(thing);
        var hmac = crypto4.createHmac("sha" + bits, secret);
        var sig = (hmac.update(thing), hmac.digest("base64"));
        return fromBase64(sig);
      };
    }
    function createHmacVerifier(bits) {
      return function verify(thing, signature, secret) {
        var computedSig = createHmacSigner(bits)(thing, secret);
        return bufferEqual(Buffer2.from(signature), Buffer2.from(computedSig));
      };
    }
    function createKeySigner(bits) {
      return function sign(thing, privateKey) {
        checkIsPrivateKey(privateKey);
        thing = normalizeInput(thing);
        var signer = crypto4.createSign("RSA-SHA" + bits);
        var sig = (signer.update(thing), signer.sign(privateKey, "base64"));
        return fromBase64(sig);
      };
    }
    function createKeyVerifier(bits) {
      return function verify(thing, signature, publicKey) {
        checkIsPublicKey(publicKey);
        thing = normalizeInput(thing);
        signature = toBase64(signature);
        var verifier = crypto4.createVerify("RSA-SHA" + bits);
        verifier.update(thing);
        return verifier.verify(publicKey, signature, "base64");
      };
    }
    function createPSSKeySigner(bits) {
      return function sign(thing, privateKey) {
        checkIsPrivateKey(privateKey);
        thing = normalizeInput(thing);
        var signer = crypto4.createSign("RSA-SHA" + bits);
        var sig = (signer.update(thing), signer.sign({
          key: privateKey,
          padding: crypto4.constants.RSA_PKCS1_PSS_PADDING,
          saltLength: crypto4.constants.RSA_PSS_SALTLEN_DIGEST
        }, "base64"));
        return fromBase64(sig);
      };
    }
    function createPSSKeyVerifier(bits) {
      return function verify(thing, signature, publicKey) {
        checkIsPublicKey(publicKey);
        thing = normalizeInput(thing);
        signature = toBase64(signature);
        var verifier = crypto4.createVerify("RSA-SHA" + bits);
        verifier.update(thing);
        return verifier.verify({
          key: publicKey,
          padding: crypto4.constants.RSA_PKCS1_PSS_PADDING,
          saltLength: crypto4.constants.RSA_PSS_SALTLEN_DIGEST
        }, signature, "base64");
      };
    }
    function createECDSASigner(bits) {
      var inner = createKeySigner(bits);
      return function sign() {
        var signature = inner.apply(null, arguments);
        signature = formatEcdsa.derToJose(signature, "ES" + bits);
        return signature;
      };
    }
    function createECDSAVerifer(bits) {
      var inner = createKeyVerifier(bits);
      return function verify(thing, signature, publicKey) {
        signature = formatEcdsa.joseToDer(signature, "ES" + bits).toString("base64");
        var result = inner(thing, signature, publicKey);
        return result;
      };
    }
    function createNoneSigner() {
      return function sign() {
        return "";
      };
    }
    function createNoneVerifier() {
      return function verify(thing, signature) {
        return signature === "";
      };
    }
    module2.exports = function jwa(algorithm) {
      var signerFactories = {
        hs: createHmacSigner,
        rs: createKeySigner,
        ps: createPSSKeySigner,
        es: createECDSASigner,
        none: createNoneSigner
      };
      var verifierFactories = {
        hs: createHmacVerifier,
        rs: createKeyVerifier,
        ps: createPSSKeyVerifier,
        es: createECDSAVerifer,
        none: createNoneVerifier
      };
      var match = algorithm.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);
      if (!match)
        throw typeError(MSG_INVALID_ALGORITHM, algorithm);
      var algo = (match[1] || match[3]).toLowerCase();
      var bits = match[2];
      return {
        sign: signerFactories[algo](bits),
        verify: verifierFactories[algo](bits)
      };
    };
  }
});

// node_modules/jws/lib/tostring.js
var require_tostring = __commonJS({
  "node_modules/jws/lib/tostring.js"(exports, module2) {
    var Buffer2 = require("buffer").Buffer;
    module2.exports = function toString(obj) {
      if (typeof obj === "string")
        return obj;
      if (typeof obj === "number" || Buffer2.isBuffer(obj))
        return obj.toString();
      return JSON.stringify(obj);
    };
  }
});

// node_modules/jws/lib/sign-stream.js
var require_sign_stream = __commonJS({
  "node_modules/jws/lib/sign-stream.js"(exports, module2) {
    var Buffer2 = require_safe_buffer().Buffer;
    var DataStream = require_data_stream();
    var jwa = require_jwa();
    var Stream = require("stream");
    var toString = require_tostring();
    var util = require("util");
    function base64url(string, encoding) {
      return Buffer2.from(string, encoding).toString("base64").replace(/=/g, "").replace(/\+/g, "-").replace(/\//g, "_");
    }
    function jwsSecuredInput(header, payload, encoding) {
      encoding = encoding || "utf8";
      var encodedHeader = base64url(toString(header), "binary");
      var encodedPayload = base64url(toString(payload), encoding);
      return util.format("%s.%s", encodedHeader, encodedPayload);
    }
    function jwsSign(opts) {
      var header = opts.header;
      var payload = opts.payload;
      var secretOrKey = opts.secret || opts.privateKey;
      var encoding = opts.encoding;
      var algo = jwa(header.alg);
      var securedInput = jwsSecuredInput(header, payload, encoding);
      var signature = algo.sign(securedInput, secretOrKey);
      return util.format("%s.%s", securedInput, signature);
    }
    function SignStream(opts) {
      var secret = opts.secret || opts.privateKey || opts.key;
      var secretStream = new DataStream(secret);
      this.readable = true;
      this.header = opts.header;
      this.encoding = opts.encoding;
      this.secret = this.privateKey = this.key = secretStream;
      this.payload = new DataStream(opts.payload);
      this.secret.once("close", function() {
        if (!this.payload.writable && this.readable)
          this.sign();
      }.bind(this));
      this.payload.once("close", function() {
        if (!this.secret.writable && this.readable)
          this.sign();
      }.bind(this));
    }
    util.inherits(SignStream, Stream);
    SignStream.prototype.sign = function sign() {
      try {
        var signature = jwsSign({
          header: this.header,
          payload: this.payload.buffer,
          secret: this.secret.buffer,
          encoding: this.encoding
        });
        this.emit("done", signature);
        this.emit("data", signature);
        this.emit("end");
        this.readable = false;
        return signature;
      } catch (e) {
        this.readable = false;
        this.emit("error", e);
        this.emit("close");
      }
    };
    SignStream.sign = jwsSign;
    module2.exports = SignStream;
  }
});

// node_modules/jws/lib/verify-stream.js
var require_verify_stream = __commonJS({
  "node_modules/jws/lib/verify-stream.js"(exports, module2) {
    var Buffer2 = require_safe_buffer().Buffer;
    var DataStream = require_data_stream();
    var jwa = require_jwa();
    var Stream = require("stream");
    var toString = require_tostring();
    var util = require("util");
    var JWS_REGEX = /^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;
    function isObject(thing) {
      return Object.prototype.toString.call(thing) === "[object Object]";
    }
    function safeJsonParse(thing) {
      if (isObject(thing))
        return thing;
      try {
        return JSON.parse(thing);
      } catch (e) {
        return void 0;
      }
    }
    function headerFromJWS(jwsSig) {
      var encodedHeader = jwsSig.split(".", 1)[0];
      return safeJsonParse(Buffer2.from(encodedHeader, "base64").toString("binary"));
    }
    function securedInputFromJWS(jwsSig) {
      return jwsSig.split(".", 2).join(".");
    }
    function signatureFromJWS(jwsSig) {
      return jwsSig.split(".")[2];
    }
    function payloadFromJWS(jwsSig, encoding) {
      encoding = encoding || "utf8";
      var payload = jwsSig.split(".")[1];
      return Buffer2.from(payload, "base64").toString(encoding);
    }
    function isValidJws(string) {
      return JWS_REGEX.test(string) && !!headerFromJWS(string);
    }
    function jwsVerify(jwsSig, algorithm, secretOrKey) {
      if (!algorithm) {
        var err = new Error("Missing algorithm parameter for jws.verify");
        err.code = "MISSING_ALGORITHM";
        throw err;
      }
      jwsSig = toString(jwsSig);
      var signature = signatureFromJWS(jwsSig);
      var securedInput = securedInputFromJWS(jwsSig);
      var algo = jwa(algorithm);
      return algo.verify(securedInput, signature, secretOrKey);
    }
    function jwsDecode(jwsSig, opts) {
      opts = opts || {};
      jwsSig = toString(jwsSig);
      if (!isValidJws(jwsSig))
        return null;
      var header = headerFromJWS(jwsSig);
      if (!header)
        return null;
      var payload = payloadFromJWS(jwsSig);
      if (header.typ === "JWT" || opts.json)
        payload = JSON.parse(payload, opts.encoding);
      return {
        header,
        payload,
        signature: signatureFromJWS(jwsSig)
      };
    }
    function VerifyStream(opts) {
      opts = opts || {};
      var secretOrKey = opts.secret || opts.publicKey || opts.key;
      var secretStream = new DataStream(secretOrKey);
      this.readable = true;
      this.algorithm = opts.algorithm;
      this.encoding = opts.encoding;
      this.secret = this.publicKey = this.key = secretStream;
      this.signature = new DataStream(opts.signature);
      this.secret.once("close", function() {
        if (!this.signature.writable && this.readable)
          this.verify();
      }.bind(this));
      this.signature.once("close", function() {
        if (!this.secret.writable && this.readable)
          this.verify();
      }.bind(this));
    }
    util.inherits(VerifyStream, Stream);
    VerifyStream.prototype.verify = function verify() {
      try {
        var valid = jwsVerify(this.signature.buffer, this.algorithm, this.key.buffer);
        var obj = jwsDecode(this.signature.buffer, this.encoding);
        this.emit("done", valid, obj);
        this.emit("data", valid);
        this.emit("end");
        this.readable = false;
        return valid;
      } catch (e) {
        this.readable = false;
        this.emit("error", e);
        this.emit("close");
      }
    };
    VerifyStream.decode = jwsDecode;
    VerifyStream.isValid = isValidJws;
    VerifyStream.verify = jwsVerify;
    module2.exports = VerifyStream;
  }
});

// node_modules/jws/index.js
var require_jws = __commonJS({
  "node_modules/jws/index.js"(exports) {
    var SignStream = require_sign_stream();
    var VerifyStream = require_verify_stream();
    var ALGORITHMS = [
      "HS256",
      "HS384",
      "HS512",
      "RS256",
      "RS384",
      "RS512",
      "PS256",
      "PS384",
      "PS512",
      "ES256",
      "ES384",
      "ES512"
    ];
    exports.ALGORITHMS = ALGORITHMS;
    exports.sign = SignStream.sign;
    exports.verify = VerifyStream.verify;
    exports.decode = VerifyStream.decode;
    exports.isValid = VerifyStream.isValid;
    exports.createSign = function createSign(opts) {
      return new SignStream(opts);
    };
    exports.createVerify = function createVerify(opts) {
      return new VerifyStream(opts);
    };
  }
});

// node_modules/jsonwebtoken/decode.js
var require_decode = __commonJS({
  "node_modules/jsonwebtoken/decode.js"(exports, module2) {
    var jws = require_jws();
    module2.exports = function(jwt2, options) {
      options = options || {};
      var decoded = jws.decode(jwt2, options);
      if (!decoded) {
        return null;
      }
      var payload = decoded.payload;
      if (typeof payload === "string") {
        try {
          var obj = JSON.parse(payload);
          if (obj !== null && typeof obj === "object") {
            payload = obj;
          }
        } catch (e) {
        }
      }
      if (options.complete === true) {
        return {
          header: decoded.header,
          payload,
          signature: decoded.signature
        };
      }
      return payload;
    };
  }
});

// node_modules/jsonwebtoken/lib/JsonWebTokenError.js
var require_JsonWebTokenError = __commonJS({
  "node_modules/jsonwebtoken/lib/JsonWebTokenError.js"(exports, module2) {
    var JsonWebTokenError = function(message, error) {
      Error.call(this, message);
      if (Error.captureStackTrace) {
        Error.captureStackTrace(this, this.constructor);
      }
      this.name = "JsonWebTokenError";
      this.message = message;
      if (error) this.inner = error;
    };
    JsonWebTokenError.prototype = Object.create(Error.prototype);
    JsonWebTokenError.prototype.constructor = JsonWebTokenError;
    module2.exports = JsonWebTokenError;
  }
});

// node_modules/jsonwebtoken/lib/NotBeforeError.js
var require_NotBeforeError = __commonJS({
  "node_modules/jsonwebtoken/lib/NotBeforeError.js"(exports, module2) {
    var JsonWebTokenError = require_JsonWebTokenError();
    var NotBeforeError = function(message, date) {
      JsonWebTokenError.call(this, message);
      this.name = "NotBeforeError";
      this.date = date;
    };
    NotBeforeError.prototype = Object.create(JsonWebTokenError.prototype);
    NotBeforeError.prototype.constructor = NotBeforeError;
    module2.exports = NotBeforeError;
  }
});

// node_modules/jsonwebtoken/lib/TokenExpiredError.js
var require_TokenExpiredError = __commonJS({
  "node_modules/jsonwebtoken/lib/TokenExpiredError.js"(exports, module2) {
    var JsonWebTokenError = require_JsonWebTokenError();
    var TokenExpiredError = function(message, expiredAt) {
      JsonWebTokenError.call(this, message);
      this.name = "TokenExpiredError";
      this.expiredAt = expiredAt;
    };
    TokenExpiredError.prototype = Object.create(JsonWebTokenError.prototype);
    TokenExpiredError.prototype.constructor = TokenExpiredError;
    module2.exports = TokenExpiredError;
  }
});

// node_modules/ms/index.js
var require_ms = __commonJS({
  "node_modules/ms/index.js"(exports, module2) {
    var s = 1e3;
    var m = s * 60;
    var h = m * 60;
    var d = h * 24;
    var w = d * 7;
    var y = d * 365.25;
    module2.exports = function(val, options) {
      options = options || {};
      var type = typeof val;
      if (type === "string" && val.length > 0) {
        return parse(val);
      } else if (type === "number" && isFinite(val)) {
        return options.long ? fmtLong(val) : fmtShort(val);
      }
      throw new Error(
        "val is not a non-empty string or a valid number. val=" + JSON.stringify(val)
      );
    };
    function parse(str) {
      str = String(str);
      if (str.length > 100) {
        return;
      }
      var match = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(
        str
      );
      if (!match) {
        return;
      }
      var n = parseFloat(match[1]);
      var type = (match[2] || "ms").toLowerCase();
      switch (type) {
        case "years":
        case "year":
        case "yrs":
        case "yr":
        case "y":
          return n * y;
        case "weeks":
        case "week":
        case "w":
          return n * w;
        case "days":
        case "day":
        case "d":
          return n * d;
        case "hours":
        case "hour":
        case "hrs":
        case "hr":
        case "h":
          return n * h;
        case "minutes":
        case "minute":
        case "mins":
        case "min":
        case "m":
          return n * m;
        case "seconds":
        case "second":
        case "secs":
        case "sec":
        case "s":
          return n * s;
        case "milliseconds":
        case "millisecond":
        case "msecs":
        case "msec":
        case "ms":
          return n;
        default:
          return void 0;
      }
    }
    function fmtShort(ms) {
      var msAbs = Math.abs(ms);
      if (msAbs >= d) {
        return Math.round(ms / d) + "d";
      }
      if (msAbs >= h) {
        return Math.round(ms / h) + "h";
      }
      if (msAbs >= m) {
        return Math.round(ms / m) + "m";
      }
      if (msAbs >= s) {
        return Math.round(ms / s) + "s";
      }
      return ms + "ms";
    }
    function fmtLong(ms) {
      var msAbs = Math.abs(ms);
      if (msAbs >= d) {
        return plural(ms, msAbs, d, "day");
      }
      if (msAbs >= h) {
        return plural(ms, msAbs, h, "hour");
      }
      if (msAbs >= m) {
        return plural(ms, msAbs, m, "minute");
      }
      if (msAbs >= s) {
        return plural(ms, msAbs, s, "second");
      }
      return ms + " ms";
    }
    function plural(ms, msAbs, n, name3) {
      var isPlural = msAbs >= n * 1.5;
      return Math.round(ms / n) + " " + name3 + (isPlural ? "s" : "");
    }
  }
});

// node_modules/jsonwebtoken/lib/timespan.js
var require_timespan = __commonJS({
  "node_modules/jsonwebtoken/lib/timespan.js"(exports, module2) {
    var ms = require_ms();
    module2.exports = function(time, iat) {
      var timestamp = iat || Math.floor(Date.now() / 1e3);
      if (typeof time === "string") {
        var milliseconds = ms(time);
        if (typeof milliseconds === "undefined") {
          return;
        }
        return Math.floor(timestamp + milliseconds / 1e3);
      } else if (typeof time === "number") {
        return timestamp + time;
      } else {
        return;
      }
    };
  }
});

// node_modules/semver/internal/constants.js
var require_constants = __commonJS({
  "node_modules/semver/internal/constants.js"(exports, module2) {
    var SEMVER_SPEC_VERSION = "2.0.0";
    var MAX_LENGTH = 256;
    var MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER || /* istanbul ignore next */
    9007199254740991;
    var MAX_SAFE_COMPONENT_LENGTH = 16;
    var MAX_SAFE_BUILD_LENGTH = MAX_LENGTH - 6;
    var RELEASE_TYPES = [
      "major",
      "premajor",
      "minor",
      "preminor",
      "patch",
      "prepatch",
      "prerelease"
    ];
    module2.exports = {
      MAX_LENGTH,
      MAX_SAFE_COMPONENT_LENGTH,
      MAX_SAFE_BUILD_LENGTH,
      MAX_SAFE_INTEGER,
      RELEASE_TYPES,
      SEMVER_SPEC_VERSION,
      FLAG_INCLUDE_PRERELEASE: 1,
      FLAG_LOOSE: 2
    };
  }
});

// node_modules/semver/internal/debug.js
var require_debug = __commonJS({
  "node_modules/semver/internal/debug.js"(exports, module2) {
    var debug = typeof process === "object" && process.env && process.env.NODE_DEBUG && /\bsemver\b/i.test(process.env.NODE_DEBUG) ? (...args) => console.error("SEMVER", ...args) : () => {
    };
    module2.exports = debug;
  }
});

// node_modules/semver/internal/re.js
var require_re = __commonJS({
  "node_modules/semver/internal/re.js"(exports, module2) {
    var {
      MAX_SAFE_COMPONENT_LENGTH,
      MAX_SAFE_BUILD_LENGTH,
      MAX_LENGTH
    } = require_constants();
    var debug = require_debug();
    exports = module2.exports = {};
    var re = exports.re = [];
    var safeRe = exports.safeRe = [];
    var src = exports.src = [];
    var safeSrc = exports.safeSrc = [];
    var t = exports.t = {};
    var R = 0;
    var LETTERDASHNUMBER = "[a-zA-Z0-9-]";
    var safeRegexReplacements = [
      ["\\s", 1],
      ["\\d", MAX_LENGTH],
      [LETTERDASHNUMBER, MAX_SAFE_BUILD_LENGTH]
    ];
    var makeSafeRegex = (value) => {
      for (const [token, max] of safeRegexReplacements) {
        value = value.split(`${token}*`).join(`${token}{0,${max}}`).split(`${token}+`).join(`${token}{1,${max}}`);
      }
      return value;
    };
    var createToken = (name3, value, isGlobal) => {
      const safe = makeSafeRegex(value);
      const index = R++;
      debug(name3, index, value);
      t[name3] = index;
      src[index] = value;
      safeSrc[index] = safe;
      re[index] = new RegExp(value, isGlobal ? "g" : void 0);
      safeRe[index] = new RegExp(safe, isGlobal ? "g" : void 0);
    };
    createToken("NUMERICIDENTIFIER", "0|[1-9]\\d*");
    createToken("NUMERICIDENTIFIERLOOSE", "\\d+");
    createToken("NONNUMERICIDENTIFIER", `\\d*[a-zA-Z-]${LETTERDASHNUMBER}*`);
    createToken("MAINVERSION", `(${src[t.NUMERICIDENTIFIER]})\\.(${src[t.NUMERICIDENTIFIER]})\\.(${src[t.NUMERICIDENTIFIER]})`);
    createToken("MAINVERSIONLOOSE", `(${src[t.NUMERICIDENTIFIERLOOSE]})\\.(${src[t.NUMERICIDENTIFIERLOOSE]})\\.(${src[t.NUMERICIDENTIFIERLOOSE]})`);
    createToken("PRERELEASEIDENTIFIER", `(?:${src[t.NUMERICIDENTIFIER]}|${src[t.NONNUMERICIDENTIFIER]})`);
    createToken("PRERELEASEIDENTIFIERLOOSE", `(?:${src[t.NUMERICIDENTIFIERLOOSE]}|${src[t.NONNUMERICIDENTIFIER]})`);
    createToken("PRERELEASE", `(?:-(${src[t.PRERELEASEIDENTIFIER]}(?:\\.${src[t.PRERELEASEIDENTIFIER]})*))`);
    createToken("PRERELEASELOOSE", `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`);
    createToken("BUILDIDENTIFIER", `${LETTERDASHNUMBER}+`);
    createToken("BUILD", `(?:\\+(${src[t.BUILDIDENTIFIER]}(?:\\.${src[t.BUILDIDENTIFIER]})*))`);
    createToken("FULLPLAIN", `v?${src[t.MAINVERSION]}${src[t.PRERELEASE]}?${src[t.BUILD]}?`);
    createToken("FULL", `^${src[t.FULLPLAIN]}$`);
    createToken("LOOSEPLAIN", `[v=\\s]*${src[t.MAINVERSIONLOOSE]}${src[t.PRERELEASELOOSE]}?${src[t.BUILD]}?`);
    createToken("LOOSE", `^${src[t.LOOSEPLAIN]}$`);
    createToken("GTLT", "((?:<|>)?=?)");
    createToken("XRANGEIDENTIFIERLOOSE", `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);
    createToken("XRANGEIDENTIFIER", `${src[t.NUMERICIDENTIFIER]}|x|X|\\*`);
    createToken("XRANGEPLAIN", `[v=\\s]*(${src[t.XRANGEIDENTIFIER]})(?:\\.(${src[t.XRANGEIDENTIFIER]})(?:\\.(${src[t.XRANGEIDENTIFIER]})(?:${src[t.PRERELEASE]})?${src[t.BUILD]}?)?)?`);
    createToken("XRANGEPLAINLOOSE", `[v=\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})(?:\\.(${src[t.XRANGEIDENTIFIERLOOSE]})(?:\\.(${src[t.XRANGEIDENTIFIERLOOSE]})(?:${src[t.PRERELEASELOOSE]})?${src[t.BUILD]}?)?)?`);
    createToken("XRANGE", `^${src[t.GTLT]}\\s*${src[t.XRANGEPLAIN]}$`);
    createToken("XRANGELOOSE", `^${src[t.GTLT]}\\s*${src[t.XRANGEPLAINLOOSE]}$`);
    createToken("COERCEPLAIN", `${"(^|[^\\d])(\\d{1,"}${MAX_SAFE_COMPONENT_LENGTH}})(?:\\.(\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?(?:\\.(\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`);
    createToken("COERCE", `${src[t.COERCEPLAIN]}(?:$|[^\\d])`);
    createToken("COERCEFULL", src[t.COERCEPLAIN] + `(?:${src[t.PRERELEASE]})?(?:${src[t.BUILD]})?(?:$|[^\\d])`);
    createToken("COERCERTL", src[t.COERCE], true);
    createToken("COERCERTLFULL", src[t.COERCEFULL], true);
    createToken("LONETILDE", "(?:~>?)");
    createToken("TILDETRIM", `(\\s*)${src[t.LONETILDE]}\\s+`, true);
    exports.tildeTrimReplace = "$1~";
    createToken("TILDE", `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`);
    createToken("TILDELOOSE", `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`);
    createToken("LONECARET", "(?:\\^)");
    createToken("CARETTRIM", `(\\s*)${src[t.LONECARET]}\\s+`, true);
    exports.caretTrimReplace = "$1^";
    createToken("CARET", `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`);
    createToken("CARETLOOSE", `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`);
    createToken("COMPARATORLOOSE", `^${src[t.GTLT]}\\s*(${src[t.LOOSEPLAIN]})$|^$`);
    createToken("COMPARATOR", `^${src[t.GTLT]}\\s*(${src[t.FULLPLAIN]})$|^$`);
    createToken("COMPARATORTRIM", `(\\s*)${src[t.GTLT]}\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true);
    exports.comparatorTrimReplace = "$1$2$3";
    createToken("HYPHENRANGE", `^\\s*(${src[t.XRANGEPLAIN]})\\s+-\\s+(${src[t.XRANGEPLAIN]})\\s*$`);
    createToken("HYPHENRANGELOOSE", `^\\s*(${src[t.XRANGEPLAINLOOSE]})\\s+-\\s+(${src[t.XRANGEPLAINLOOSE]})\\s*$`);
    createToken("STAR", "(<|>)?=?\\s*\\*");
    createToken("GTE0", "^\\s*>=\\s*0\\.0\\.0\\s*$");
    createToken("GTE0PRE", "^\\s*>=\\s*0\\.0\\.0-0\\s*$");
  }
});

// node_modules/semver/internal/parse-options.js
var require_parse_options = __commonJS({
  "node_modules/semver/internal/parse-options.js"(exports, module2) {
    var looseOption = Object.freeze({ loose: true });
    var emptyOpts = Object.freeze({});
    var parseOptions = (options) => {
      if (!options) {
        return emptyOpts;
      }
      if (typeof options !== "object") {
        return looseOption;
      }
      return options;
    };
    module2.exports = parseOptions;
  }
});

// node_modules/semver/internal/identifiers.js
var require_identifiers = __commonJS({
  "node_modules/semver/internal/identifiers.js"(exports, module2) {
    var numeric = /^[0-9]+$/;
    var compareIdentifiers = (a, b) => {
      const anum = numeric.test(a);
      const bnum = numeric.test(b);
      if (anum && bnum) {
        a = +a;
        b = +b;
      }
      return a === b ? 0 : anum && !bnum ? -1 : bnum && !anum ? 1 : a < b ? -1 : 1;
    };
    var rcompareIdentifiers = (a, b) => compareIdentifiers(b, a);
    module2.exports = {
      compareIdentifiers,
      rcompareIdentifiers
    };
  }
});

// node_modules/semver/classes/semver.js
var require_semver = __commonJS({
  "node_modules/semver/classes/semver.js"(exports, module2) {
    var debug = require_debug();
    var { MAX_LENGTH, MAX_SAFE_INTEGER } = require_constants();
    var { safeRe: re, safeSrc: src, t } = require_re();
    var parseOptions = require_parse_options();
    var { compareIdentifiers } = require_identifiers();
    var SemVer = class _SemVer {
      constructor(version3, options) {
        options = parseOptions(options);
        if (version3 instanceof _SemVer) {
          if (version3.loose === !!options.loose && version3.includePrerelease === !!options.includePrerelease) {
            return version3;
          } else {
            version3 = version3.version;
          }
        } else if (typeof version3 !== "string") {
          throw new TypeError(`Invalid version. Must be a string. Got type "${typeof version3}".`);
        }
        if (version3.length > MAX_LENGTH) {
          throw new TypeError(
            `version is longer than ${MAX_LENGTH} characters`
          );
        }
        debug("SemVer", version3, options);
        this.options = options;
        this.loose = !!options.loose;
        this.includePrerelease = !!options.includePrerelease;
        const m = version3.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL]);
        if (!m) {
          throw new TypeError(`Invalid Version: ${version3}`);
        }
        this.raw = version3;
        this.major = +m[1];
        this.minor = +m[2];
        this.patch = +m[3];
        if (this.major > MAX_SAFE_INTEGER || this.major < 0) {
          throw new TypeError("Invalid major version");
        }
        if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {
          throw new TypeError("Invalid minor version");
        }
        if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {
          throw new TypeError("Invalid patch version");
        }
        if (!m[4]) {
          this.prerelease = [];
        } else {
          this.prerelease = m[4].split(".").map((id) => {
            if (/^[0-9]+$/.test(id)) {
              const num = +id;
              if (num >= 0 && num < MAX_SAFE_INTEGER) {
                return num;
              }
            }
            return id;
          });
        }
        this.build = m[5] ? m[5].split(".") : [];
        this.format();
      }
      format() {
        this.version = `${this.major}.${this.minor}.${this.patch}`;
        if (this.prerelease.length) {
          this.version += `-${this.prerelease.join(".")}`;
        }
        return this.version;
      }
      toString() {
        return this.version;
      }
      compare(other) {
        debug("SemVer.compare", this.version, this.options, other);
        if (!(other instanceof _SemVer)) {
          if (typeof other === "string" && other === this.version) {
            return 0;
          }
          other = new _SemVer(other, this.options);
        }
        if (other.version === this.version) {
          return 0;
        }
        return this.compareMain(other) || this.comparePre(other);
      }
      compareMain(other) {
        if (!(other instanceof _SemVer)) {
          other = new _SemVer(other, this.options);
        }
        return compareIdentifiers(this.major, other.major) || compareIdentifiers(this.minor, other.minor) || compareIdentifiers(this.patch, other.patch);
      }
      comparePre(other) {
        if (!(other instanceof _SemVer)) {
          other = new _SemVer(other, this.options);
        }
        if (this.prerelease.length && !other.prerelease.length) {
          return -1;
        } else if (!this.prerelease.length && other.prerelease.length) {
          return 1;
        } else if (!this.prerelease.length && !other.prerelease.length) {
          return 0;
        }
        let i = 0;
        do {
          const a = this.prerelease[i];
          const b = other.prerelease[i];
          debug("prerelease compare", i, a, b);
          if (a === void 0 && b === void 0) {
            return 0;
          } else if (b === void 0) {
            return 1;
          } else if (a === void 0) {
            return -1;
          } else if (a === b) {
            continue;
          } else {
            return compareIdentifiers(a, b);
          }
        } while (++i);
      }
      compareBuild(other) {
        if (!(other instanceof _SemVer)) {
          other = new _SemVer(other, this.options);
        }
        let i = 0;
        do {
          const a = this.build[i];
          const b = other.build[i];
          debug("build compare", i, a, b);
          if (a === void 0 && b === void 0) {
            return 0;
          } else if (b === void 0) {
            return 1;
          } else if (a === void 0) {
            return -1;
          } else if (a === b) {
            continue;
          } else {
            return compareIdentifiers(a, b);
          }
        } while (++i);
      }
      // preminor will bump the version up to the next minor release, and immediately
      // down to pre-release. premajor and prepatch work the same way.
      inc(release, identifier, identifierBase) {
        if (release.startsWith("pre")) {
          if (!identifier && identifierBase === false) {
            throw new Error("invalid increment argument: identifier is empty");
          }
          if (identifier) {
            const r = new RegExp(`^${this.options.loose ? src[t.PRERELEASELOOSE] : src[t.PRERELEASE]}$`);
            const match = `-${identifier}`.match(r);
            if (!match || match[1] !== identifier) {
              throw new Error(`invalid identifier: ${identifier}`);
            }
          }
        }
        switch (release) {
          case "premajor":
            this.prerelease.length = 0;
            this.patch = 0;
            this.minor = 0;
            this.major++;
            this.inc("pre", identifier, identifierBase);
            break;
          case "preminor":
            this.prerelease.length = 0;
            this.patch = 0;
            this.minor++;
            this.inc("pre", identifier, identifierBase);
            break;
          case "prepatch":
            this.prerelease.length = 0;
            this.inc("patch", identifier, identifierBase);
            this.inc("pre", identifier, identifierBase);
            break;
          // If the input is a non-prerelease version, this acts the same as
          // prepatch.
          case "prerelease":
            if (this.prerelease.length === 0) {
              this.inc("patch", identifier, identifierBase);
            }
            this.inc("pre", identifier, identifierBase);
            break;
          case "release":
            if (this.prerelease.length === 0) {
              throw new Error(`version ${this.raw} is not a prerelease`);
            }
            this.prerelease.length = 0;
            break;
          case "major":
            if (this.minor !== 0 || this.patch !== 0 || this.prerelease.length === 0) {
              this.major++;
            }
            this.minor = 0;
            this.patch = 0;
            this.prerelease = [];
            break;
          case "minor":
            if (this.patch !== 0 || this.prerelease.length === 0) {
              this.minor++;
            }
            this.patch = 0;
            this.prerelease = [];
            break;
          case "patch":
            if (this.prerelease.length === 0) {
              this.patch++;
            }
            this.prerelease = [];
            break;
          // This probably shouldn't be used publicly.
          // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.
          case "pre": {
            const base = Number(identifierBase) ? 1 : 0;
            if (this.prerelease.length === 0) {
              this.prerelease = [base];
            } else {
              let i = this.prerelease.length;
              while (--i >= 0) {
                if (typeof this.prerelease[i] === "number") {
                  this.prerelease[i]++;
                  i = -2;
                }
              }
              if (i === -1) {
                if (identifier === this.prerelease.join(".") && identifierBase === false) {
                  throw new Error("invalid increment argument: identifier already exists");
                }
                this.prerelease.push(base);
              }
            }
            if (identifier) {
              let prerelease = [identifier, base];
              if (identifierBase === false) {
                prerelease = [identifier];
              }
              if (compareIdentifiers(this.prerelease[0], identifier) === 0) {
                if (isNaN(this.prerelease[1])) {
                  this.prerelease = prerelease;
                }
              } else {
                this.prerelease = prerelease;
              }
            }
            break;
          }
          default:
            throw new Error(`invalid increment argument: ${release}`);
        }
        this.raw = this.format();
        if (this.build.length) {
          this.raw += `+${this.build.join(".")}`;
        }
        return this;
      }
    };
    module2.exports = SemVer;
  }
});

// node_modules/semver/functions/parse.js
var require_parse = __commonJS({
  "node_modules/semver/functions/parse.js"(exports, module2) {
    var SemVer = require_semver();
    var parse = (version3, options, throwErrors = false) => {
      if (version3 instanceof SemVer) {
        return version3;
      }
      try {
        return new SemVer(version3, options);
      } catch (er) {
        if (!throwErrors) {
          return null;
        }
        throw er;
      }
    };
    module2.exports = parse;
  }
});

// node_modules/semver/functions/valid.js
var require_valid = __commonJS({
  "node_modules/semver/functions/valid.js"(exports, module2) {
    var parse = require_parse();
    var valid = (version3, options) => {
      const v = parse(version3, options);
      return v ? v.version : null;
    };
    module2.exports = valid;
  }
});

// node_modules/semver/functions/clean.js
var require_clean = __commonJS({
  "node_modules/semver/functions/clean.js"(exports, module2) {
    var parse = require_parse();
    var clean = (version3, options) => {
      const s = parse(version3.trim().replace(/^[=v]+/, ""), options);
      return s ? s.version : null;
    };
    module2.exports = clean;
  }
});

// node_modules/semver/functions/inc.js
var require_inc = __commonJS({
  "node_modules/semver/functions/inc.js"(exports, module2) {
    var SemVer = require_semver();
    var inc = (version3, release, options, identifier, identifierBase) => {
      if (typeof options === "string") {
        identifierBase = identifier;
        identifier = options;
        options = void 0;
      }
      try {
        return new SemVer(
          version3 instanceof SemVer ? version3.version : version3,
          options
        ).inc(release, identifier, identifierBase).version;
      } catch (er) {
        return null;
      }
    };
    module2.exports = inc;
  }
});

// node_modules/semver/functions/diff.js
var require_diff = __commonJS({
  "node_modules/semver/functions/diff.js"(exports, module2) {
    var parse = require_parse();
    var diff = (version1, version22) => {
      const v1 = parse(version1, null, true);
      const v2 = parse(version22, null, true);
      const comparison = v1.compare(v2);
      if (comparison === 0) {
        return null;
      }
      const v1Higher = comparison > 0;
      const highVersion = v1Higher ? v1 : v2;
      const lowVersion = v1Higher ? v2 : v1;
      const highHasPre = !!highVersion.prerelease.length;
      const lowHasPre = !!lowVersion.prerelease.length;
      if (lowHasPre && !highHasPre) {
        if (!lowVersion.patch && !lowVersion.minor) {
          return "major";
        }
        if (lowVersion.compareMain(highVersion) === 0) {
          if (lowVersion.minor && !lowVersion.patch) {
            return "minor";
          }
          return "patch";
        }
      }
      const prefix = highHasPre ? "pre" : "";
      if (v1.major !== v2.major) {
        return prefix + "major";
      }
      if (v1.minor !== v2.minor) {
        return prefix + "minor";
      }
      if (v1.patch !== v2.patch) {
        return prefix + "patch";
      }
      return "prerelease";
    };
    module2.exports = diff;
  }
});

// node_modules/semver/functions/major.js
var require_major = __commonJS({
  "node_modules/semver/functions/major.js"(exports, module2) {
    var SemVer = require_semver();
    var major = (a, loose) => new SemVer(a, loose).major;
    module2.exports = major;
  }
});

// node_modules/semver/functions/minor.js
var require_minor = __commonJS({
  "node_modules/semver/functions/minor.js"(exports, module2) {
    var SemVer = require_semver();
    var minor = (a, loose) => new SemVer(a, loose).minor;
    module2.exports = minor;
  }
});

// node_modules/semver/functions/patch.js
var require_patch = __commonJS({
  "node_modules/semver/functions/patch.js"(exports, module2) {
    var SemVer = require_semver();
    var patch = (a, loose) => new SemVer(a, loose).patch;
    module2.exports = patch;
  }
});

// node_modules/semver/functions/prerelease.js
var require_prerelease = __commonJS({
  "node_modules/semver/functions/prerelease.js"(exports, module2) {
    var parse = require_parse();
    var prerelease = (version3, options) => {
      const parsed = parse(version3, options);
      return parsed && parsed.prerelease.length ? parsed.prerelease : null;
    };
    module2.exports = prerelease;
  }
});

// node_modules/semver/functions/compare.js
var require_compare = __commonJS({
  "node_modules/semver/functions/compare.js"(exports, module2) {
    var SemVer = require_semver();
    var compare = (a, b, loose) => new SemVer(a, loose).compare(new SemVer(b, loose));
    module2.exports = compare;
  }
});

// node_modules/semver/functions/rcompare.js
var require_rcompare = __commonJS({
  "node_modules/semver/functions/rcompare.js"(exports, module2) {
    var compare = require_compare();
    var rcompare = (a, b, loose) => compare(b, a, loose);
    module2.exports = rcompare;
  }
});

// node_modules/semver/functions/compare-loose.js
var require_compare_loose = __commonJS({
  "node_modules/semver/functions/compare-loose.js"(exports, module2) {
    var compare = require_compare();
    var compareLoose = (a, b) => compare(a, b, true);
    module2.exports = compareLoose;
  }
});

// node_modules/semver/functions/compare-build.js
var require_compare_build = __commonJS({
  "node_modules/semver/functions/compare-build.js"(exports, module2) {
    var SemVer = require_semver();
    var compareBuild = (a, b, loose) => {
      const versionA = new SemVer(a, loose);
      const versionB = new SemVer(b, loose);
      return versionA.compare(versionB) || versionA.compareBuild(versionB);
    };
    module2.exports = compareBuild;
  }
});

// node_modules/semver/functions/sort.js
var require_sort = __commonJS({
  "node_modules/semver/functions/sort.js"(exports, module2) {
    var compareBuild = require_compare_build();
    var sort = (list, loose) => list.sort((a, b) => compareBuild(a, b, loose));
    module2.exports = sort;
  }
});

// node_modules/semver/functions/rsort.js
var require_rsort = __commonJS({
  "node_modules/semver/functions/rsort.js"(exports, module2) {
    var compareBuild = require_compare_build();
    var rsort = (list, loose) => list.sort((a, b) => compareBuild(b, a, loose));
    module2.exports = rsort;
  }
});

// node_modules/semver/functions/gt.js
var require_gt = __commonJS({
  "node_modules/semver/functions/gt.js"(exports, module2) {
    var compare = require_compare();
    var gt = (a, b, loose) => compare(a, b, loose) > 0;
    module2.exports = gt;
  }
});

// node_modules/semver/functions/lt.js
var require_lt = __commonJS({
  "node_modules/semver/functions/lt.js"(exports, module2) {
    var compare = require_compare();
    var lt = (a, b, loose) => compare(a, b, loose) < 0;
    module2.exports = lt;
  }
});

// node_modules/semver/functions/eq.js
var require_eq = __commonJS({
  "node_modules/semver/functions/eq.js"(exports, module2) {
    var compare = require_compare();
    var eq = (a, b, loose) => compare(a, b, loose) === 0;
    module2.exports = eq;
  }
});

// node_modules/semver/functions/neq.js
var require_neq = __commonJS({
  "node_modules/semver/functions/neq.js"(exports, module2) {
    var compare = require_compare();
    var neq = (a, b, loose) => compare(a, b, loose) !== 0;
    module2.exports = neq;
  }
});

// node_modules/semver/functions/gte.js
var require_gte = __commonJS({
  "node_modules/semver/functions/gte.js"(exports, module2) {
    var compare = require_compare();
    var gte = (a, b, loose) => compare(a, b, loose) >= 0;
    module2.exports = gte;
  }
});

// node_modules/semver/functions/lte.js
var require_lte = __commonJS({
  "node_modules/semver/functions/lte.js"(exports, module2) {
    var compare = require_compare();
    var lte = (a, b, loose) => compare(a, b, loose) <= 0;
    module2.exports = lte;
  }
});

// node_modules/semver/functions/cmp.js
var require_cmp = __commonJS({
  "node_modules/semver/functions/cmp.js"(exports, module2) {
    var eq = require_eq();
    var neq = require_neq();
    var gt = require_gt();
    var gte = require_gte();
    var lt = require_lt();
    var lte = require_lte();
    var cmp = (a, op, b, loose) => {
      switch (op) {
        case "===":
          if (typeof a === "object") {
            a = a.version;
          }
          if (typeof b === "object") {
            b = b.version;
          }
          return a === b;
        case "!==":
          if (typeof a === "object") {
            a = a.version;
          }
          if (typeof b === "object") {
            b = b.version;
          }
          return a !== b;
        case "":
        case "=":
        case "==":
          return eq(a, b, loose);
        case "!=":
          return neq(a, b, loose);
        case ">":
          return gt(a, b, loose);
        case ">=":
          return gte(a, b, loose);
        case "<":
          return lt(a, b, loose);
        case "<=":
          return lte(a, b, loose);
        default:
          throw new TypeError(`Invalid operator: ${op}`);
      }
    };
    module2.exports = cmp;
  }
});

// node_modules/semver/functions/coerce.js
var require_coerce = __commonJS({
  "node_modules/semver/functions/coerce.js"(exports, module2) {
    var SemVer = require_semver();
    var parse = require_parse();
    var { safeRe: re, t } = require_re();
    var coerce = (version3, options) => {
      if (version3 instanceof SemVer) {
        return version3;
      }
      if (typeof version3 === "number") {
        version3 = String(version3);
      }
      if (typeof version3 !== "string") {
        return null;
      }
      options = options || {};
      let match = null;
      if (!options.rtl) {
        match = version3.match(options.includePrerelease ? re[t.COERCEFULL] : re[t.COERCE]);
      } else {
        const coerceRtlRegex = options.includePrerelease ? re[t.COERCERTLFULL] : re[t.COERCERTL];
        let next;
        while ((next = coerceRtlRegex.exec(version3)) && (!match || match.index + match[0].length !== version3.length)) {
          if (!match || next.index + next[0].length !== match.index + match[0].length) {
            match = next;
          }
          coerceRtlRegex.lastIndex = next.index + next[1].length + next[2].length;
        }
        coerceRtlRegex.lastIndex = -1;
      }
      if (match === null) {
        return null;
      }
      const major = match[2];
      const minor = match[3] || "0";
      const patch = match[4] || "0";
      const prerelease = options.includePrerelease && match[5] ? `-${match[5]}` : "";
      const build = options.includePrerelease && match[6] ? `+${match[6]}` : "";
      return parse(`${major}.${minor}.${patch}${prerelease}${build}`, options);
    };
    module2.exports = coerce;
  }
});

// node_modules/semver/internal/lrucache.js
var require_lrucache = __commonJS({
  "node_modules/semver/internal/lrucache.js"(exports, module2) {
    var LRUCache = class {
      constructor() {
        this.max = 1e3;
        this.map = /* @__PURE__ */ new Map();
      }
      get(key) {
        const value = this.map.get(key);
        if (value === void 0) {
          return void 0;
        } else {
          this.map.delete(key);
          this.map.set(key, value);
          return value;
        }
      }
      delete(key) {
        return this.map.delete(key);
      }
      set(key, value) {
        const deleted = this.delete(key);
        if (!deleted && value !== void 0) {
          if (this.map.size >= this.max) {
            const firstKey = this.map.keys().next().value;
            this.delete(firstKey);
          }
          this.map.set(key, value);
        }
        return this;
      }
    };
    module2.exports = LRUCache;
  }
});

// node_modules/semver/classes/range.js
var require_range = __commonJS({
  "node_modules/semver/classes/range.js"(exports, module2) {
    var SPACE_CHARACTERS = /\s+/g;
    var Range = class _Range {
      constructor(range, options) {
        options = parseOptions(options);
        if (range instanceof _Range) {
          if (range.loose === !!options.loose && range.includePrerelease === !!options.includePrerelease) {
            return range;
          } else {
            return new _Range(range.raw, options);
          }
        }
        if (range instanceof Comparator) {
          this.raw = range.value;
          this.set = [[range]];
          this.formatted = void 0;
          return this;
        }
        this.options = options;
        this.loose = !!options.loose;
        this.includePrerelease = !!options.includePrerelease;
        this.raw = range.trim().replace(SPACE_CHARACTERS, " ");
        this.set = this.raw.split("||").map((r) => this.parseRange(r.trim())).filter((c) => c.length);
        if (!this.set.length) {
          throw new TypeError(`Invalid SemVer Range: ${this.raw}`);
        }
        if (this.set.length > 1) {
          const first = this.set[0];
          this.set = this.set.filter((c) => !isNullSet(c[0]));
          if (this.set.length === 0) {
            this.set = [first];
          } else if (this.set.length > 1) {
            for (const c of this.set) {
              if (c.length === 1 && isAny(c[0])) {
                this.set = [c];
                break;
              }
            }
          }
        }
        this.formatted = void 0;
      }
      get range() {
        if (this.formatted === void 0) {
          this.formatted = "";
          for (let i = 0; i < this.set.length; i++) {
            if (i > 0) {
              this.formatted += "||";
            }
            const comps = this.set[i];
            for (let k = 0; k < comps.length; k++) {
              if (k > 0) {
                this.formatted += " ";
              }
              this.formatted += comps[k].toString().trim();
            }
          }
        }
        return this.formatted;
      }
      format() {
        return this.range;
      }
      toString() {
        return this.range;
      }
      parseRange(range) {
        const memoOpts = (this.options.includePrerelease && FLAG_INCLUDE_PRERELEASE) | (this.options.loose && FLAG_LOOSE);
        const memoKey = memoOpts + ":" + range;
        const cached = cache.get(memoKey);
        if (cached) {
          return cached;
        }
        const loose = this.options.loose;
        const hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE];
        range = range.replace(hr, hyphenReplace(this.options.includePrerelease));
        debug("hyphen replace", range);
        range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace);
        debug("comparator trim", range);
        range = range.replace(re[t.TILDETRIM], tildeTrimReplace);
        debug("tilde trim", range);
        range = range.replace(re[t.CARETTRIM], caretTrimReplace);
        debug("caret trim", range);
        let rangeList = range.split(" ").map((comp) => parseComparator(comp, this.options)).join(" ").split(/\s+/).map((comp) => replaceGTE0(comp, this.options));
        if (loose) {
          rangeList = rangeList.filter((comp) => {
            debug("loose invalid filter", comp, this.options);
            return !!comp.match(re[t.COMPARATORLOOSE]);
          });
        }
        debug("range list", rangeList);
        const rangeMap = /* @__PURE__ */ new Map();
        const comparators = rangeList.map((comp) => new Comparator(comp, this.options));
        for (const comp of comparators) {
          if (isNullSet(comp)) {
            return [comp];
          }
          rangeMap.set(comp.value, comp);
        }
        if (rangeMap.size > 1 && rangeMap.has("")) {
          rangeMap.delete("");
        }
        const result = [...rangeMap.values()];
        cache.set(memoKey, result);
        return result;
      }
      intersects(range, options) {
        if (!(range instanceof _Range)) {
          throw new TypeError("a Range is required");
        }
        return this.set.some((thisComparators) => {
          return isSatisfiable(thisComparators, options) && range.set.some((rangeComparators) => {
            return isSatisfiable(rangeComparators, options) && thisComparators.every((thisComparator) => {
              return rangeComparators.every((rangeComparator) => {
                return thisComparator.intersects(rangeComparator, options);
              });
            });
          });
        });
      }
      // if ANY of the sets match ALL of its comparators, then pass
      test(version3) {
        if (!version3) {
          return false;
        }
        if (typeof version3 === "string") {
          try {
            version3 = new SemVer(version3, this.options);
          } catch (er) {
            return false;
          }
        }
        for (let i = 0; i < this.set.length; i++) {
          if (testSet(this.set[i], version3, this.options)) {
            return true;
          }
        }
        return false;
      }
    };
    module2.exports = Range;
    var LRU = require_lrucache();
    var cache = new LRU();
    var parseOptions = require_parse_options();
    var Comparator = require_comparator();
    var debug = require_debug();
    var SemVer = require_semver();
    var {
      safeRe: re,
      t,
      comparatorTrimReplace,
      tildeTrimReplace,
      caretTrimReplace
    } = require_re();
    var { FLAG_INCLUDE_PRERELEASE, FLAG_LOOSE } = require_constants();
    var isNullSet = (c) => c.value === "<0.0.0-0";
    var isAny = (c) => c.value === "";
    var isSatisfiable = (comparators, options) => {
      let result = true;
      const remainingComparators = comparators.slice();
      let testComparator = remainingComparators.pop();
      while (result && remainingComparators.length) {
        result = remainingComparators.every((otherComparator) => {
          return testComparator.intersects(otherComparator, options);
        });
        testComparator = remainingComparators.pop();
      }
      return result;
    };
    var parseComparator = (comp, options) => {
      debug("comp", comp, options);
      comp = replaceCarets(comp, options);
      debug("caret", comp);
      comp = replaceTildes(comp, options);
      debug("tildes", comp);
      comp = replaceXRanges(comp, options);
      debug("xrange", comp);
      comp = replaceStars(comp, options);
      debug("stars", comp);
      return comp;
    };
    var isX = (id) => !id || id.toLowerCase() === "x" || id === "*";
    var replaceTildes = (comp, options) => {
      return comp.trim().split(/\s+/).map((c) => replaceTilde(c, options)).join(" ");
    };
    var replaceTilde = (comp, options) => {
      const r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE];
      return comp.replace(r, (_, M, m, p, pr) => {
        debug("tilde", comp, _, M, m, p, pr);
        let ret;
        if (isX(M)) {
          ret = "";
        } else if (isX(m)) {
          ret = `>=${M}.0.0 <${+M + 1}.0.0-0`;
        } else if (isX(p)) {
          ret = `>=${M}.${m}.0 <${M}.${+m + 1}.0-0`;
        } else if (pr) {
          debug("replaceTilde pr", pr);
          ret = `>=${M}.${m}.${p}-${pr} <${M}.${+m + 1}.0-0`;
        } else {
          ret = `>=${M}.${m}.${p} <${M}.${+m + 1}.0-0`;
        }
        debug("tilde return", ret);
        return ret;
      });
    };
    var replaceCarets = (comp, options) => {
      return comp.trim().split(/\s+/).map((c) => replaceCaret(c, options)).join(" ");
    };
    var replaceCaret = (comp, options) => {
      debug("caret", comp, options);
      const r = options.loose ? re[t.CARETLOOSE] : re[t.CARET];
      const z = options.includePrerelease ? "-0" : "";
      return comp.replace(r, (_, M, m, p, pr) => {
        debug("caret", comp, _, M, m, p, pr);
        let ret;
        if (isX(M)) {
          ret = "";
        } else if (isX(m)) {
          ret = `>=${M}.0.0${z} <${+M + 1}.0.0-0`;
        } else if (isX(p)) {
          if (M === "0") {
            ret = `>=${M}.${m}.0${z} <${M}.${+m + 1}.0-0`;
          } else {
            ret = `>=${M}.${m}.0${z} <${+M + 1}.0.0-0`;
          }
        } else if (pr) {
          debug("replaceCaret pr", pr);
          if (M === "0") {
            if (m === "0") {
              ret = `>=${M}.${m}.${p}-${pr} <${M}.${m}.${+p + 1}-0`;
            } else {
              ret = `>=${M}.${m}.${p}-${pr} <${M}.${+m + 1}.0-0`;
            }
          } else {
            ret = `>=${M}.${m}.${p}-${pr} <${+M + 1}.0.0-0`;
          }
        } else {
          debug("no pr");
          if (M === "0") {
            if (m === "0") {
              ret = `>=${M}.${m}.${p}${z} <${M}.${m}.${+p + 1}-0`;
            } else {
              ret = `>=${M}.${m}.${p}${z} <${M}.${+m + 1}.0-0`;
            }
          } else {
            ret = `>=${M}.${m}.${p} <${+M + 1}.0.0-0`;
          }
        }
        debug("caret return", ret);
        return ret;
      });
    };
    var replaceXRanges = (comp, options) => {
      debug("replaceXRanges", comp, options);
      return comp.split(/\s+/).map((c) => replaceXRange(c, options)).join(" ");
    };
    var replaceXRange = (comp, options) => {
      comp = comp.trim();
      const r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE];
      return comp.replace(r, (ret, gtlt, M, m, p, pr) => {
        debug("xRange", comp, ret, gtlt, M, m, p, pr);
        const xM = isX(M);
        const xm = xM || isX(m);
        const xp = xm || isX(p);
        const anyX = xp;
        if (gtlt === "=" && anyX) {
          gtlt = "";
        }
        pr = options.includePrerelease ? "-0" : "";
        if (xM) {
          if (gtlt === ">" || gtlt === "<") {
            ret = "<0.0.0-0";
          } else {
            ret = "*";
          }
        } else if (gtlt && anyX) {
          if (xm) {
            m = 0;
          }
          p = 0;
          if (gtlt === ">") {
            gtlt = ">=";
            if (xm) {
              M = +M + 1;
              m = 0;
              p = 0;
            } else {
              m = +m + 1;
              p = 0;
            }
          } else if (gtlt === "<=") {
            gtlt = "<";
            if (xm) {
              M = +M + 1;
            } else {
              m = +m + 1;
            }
          }
          if (gtlt === "<") {
            pr = "-0";
          }
          ret = `${gtlt + M}.${m}.${p}${pr}`;
        } else if (xm) {
          ret = `>=${M}.0.0${pr} <${+M + 1}.0.0-0`;
        } else if (xp) {
          ret = `>=${M}.${m}.0${pr} <${M}.${+m + 1}.0-0`;
        }
        debug("xRange return", ret);
        return ret;
      });
    };
    var replaceStars = (comp, options) => {
      debug("replaceStars", comp, options);
      return comp.trim().replace(re[t.STAR], "");
    };
    var replaceGTE0 = (comp, options) => {
      debug("replaceGTE0", comp, options);
      return comp.trim().replace(re[options.includePrerelease ? t.GTE0PRE : t.GTE0], "");
    };
    var hyphenReplace = (incPr) => ($0, from, fM, fm, fp, fpr, fb, to, tM, tm, tp, tpr) => {
      if (isX(fM)) {
        from = "";
      } else if (isX(fm)) {
        from = `>=${fM}.0.0${incPr ? "-0" : ""}`;
      } else if (isX(fp)) {
        from = `>=${fM}.${fm}.0${incPr ? "-0" : ""}`;
      } else if (fpr) {
        from = `>=${from}`;
      } else {
        from = `>=${from}${incPr ? "-0" : ""}`;
      }
      if (isX(tM)) {
        to = "";
      } else if (isX(tm)) {
        to = `<${+tM + 1}.0.0-0`;
      } else if (isX(tp)) {
        to = `<${tM}.${+tm + 1}.0-0`;
      } else if (tpr) {
        to = `<=${tM}.${tm}.${tp}-${tpr}`;
      } else if (incPr) {
        to = `<${tM}.${tm}.${+tp + 1}-0`;
      } else {
        to = `<=${to}`;
      }
      return `${from} ${to}`.trim();
    };
    var testSet = (set, version3, options) => {
      for (let i = 0; i < set.length; i++) {
        if (!set[i].test(version3)) {
          return false;
        }
      }
      if (version3.prerelease.length && !options.includePrerelease) {
        for (let i = 0; i < set.length; i++) {
          debug(set[i].semver);
          if (set[i].semver === Comparator.ANY) {
            continue;
          }
          if (set[i].semver.prerelease.length > 0) {
            const allowed = set[i].semver;
            if (allowed.major === version3.major && allowed.minor === version3.minor && allowed.patch === version3.patch) {
              return true;
            }
          }
        }
        return false;
      }
      return true;
    };
  }
});

// node_modules/semver/classes/comparator.js
var require_comparator = __commonJS({
  "node_modules/semver/classes/comparator.js"(exports, module2) {
    var ANY = Symbol("SemVer ANY");
    var Comparator = class _Comparator {
      static get ANY() {
        return ANY;
      }
      constructor(comp, options) {
        options = parseOptions(options);
        if (comp instanceof _Comparator) {
          if (comp.loose === !!options.loose) {
            return comp;
          } else {
            comp = comp.value;
          }
        }
        comp = comp.trim().split(/\s+/).join(" ");
        debug("comparator", comp, options);
        this.options = options;
        this.loose = !!options.loose;
        this.parse(comp);
        if (this.semver === ANY) {
          this.value = "";
        } else {
          this.value = this.operator + this.semver.version;
        }
        debug("comp", this);
      }
      parse(comp) {
        const r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR];
        const m = comp.match(r);
        if (!m) {
          throw new TypeError(`Invalid comparator: ${comp}`);
        }
        this.operator = m[1] !== void 0 ? m[1] : "";
        if (this.operator === "=") {
          this.operator = "";
        }
        if (!m[2]) {
          this.semver = ANY;
        } else {
          this.semver = new SemVer(m[2], this.options.loose);
        }
      }
      toString() {
        return this.value;
      }
      test(version3) {
        debug("Comparator.test", version3, this.options.loose);
        if (this.semver === ANY || version3 === ANY) {
          return true;
        }
        if (typeof version3 === "string") {
          try {
            version3 = new SemVer(version3, this.options);
          } catch (er) {
            return false;
          }
        }
        return cmp(version3, this.operator, this.semver, this.options);
      }
      intersects(comp, options) {
        if (!(comp instanceof _Comparator)) {
          throw new TypeError("a Comparator is required");
        }
        if (this.operator === "") {
          if (this.value === "") {
            return true;
          }
          return new Range(comp.value, options).test(this.value);
        } else if (comp.operator === "") {
          if (comp.value === "") {
            return true;
          }
          return new Range(this.value, options).test(comp.semver);
        }
        options = parseOptions(options);
        if (options.includePrerelease && (this.value === "<0.0.0-0" || comp.value === "<0.0.0-0")) {
          return false;
        }
        if (!options.includePrerelease && (this.value.startsWith("<0.0.0") || comp.value.startsWith("<0.0.0"))) {
          return false;
        }
        if (this.operator.startsWith(">") && comp.operator.startsWith(">")) {
          return true;
        }
        if (this.operator.startsWith("<") && comp.operator.startsWith("<")) {
          return true;
        }
        if (this.semver.version === comp.semver.version && this.operator.includes("=") && comp.operator.includes("=")) {
          return true;
        }
        if (cmp(this.semver, "<", comp.semver, options) && this.operator.startsWith(">") && comp.operator.startsWith("<")) {
          return true;
        }
        if (cmp(this.semver, ">", comp.semver, options) && this.operator.startsWith("<") && comp.operator.startsWith(">")) {
          return true;
        }
        return false;
      }
    };
    module2.exports = Comparator;
    var parseOptions = require_parse_options();
    var { safeRe: re, t } = require_re();
    var cmp = require_cmp();
    var debug = require_debug();
    var SemVer = require_semver();
    var Range = require_range();
  }
});

// node_modules/semver/functions/satisfies.js
var require_satisfies = __commonJS({
  "node_modules/semver/functions/satisfies.js"(exports, module2) {
    var Range = require_range();
    var satisfies = (version3, range, options) => {
      try {
        range = new Range(range, options);
      } catch (er) {
        return false;
      }
      return range.test(version3);
    };
    module2.exports = satisfies;
  }
});

// node_modules/semver/ranges/to-comparators.js
var require_to_comparators = __commonJS({
  "node_modules/semver/ranges/to-comparators.js"(exports, module2) {
    var Range = require_range();
    var toComparators = (range, options) => new Range(range, options).set.map((comp) => comp.map((c) => c.value).join(" ").trim().split(" "));
    module2.exports = toComparators;
  }
});

// node_modules/semver/ranges/max-satisfying.js
var require_max_satisfying = __commonJS({
  "node_modules/semver/ranges/max-satisfying.js"(exports, module2) {
    var SemVer = require_semver();
    var Range = require_range();
    var maxSatisfying = (versions, range, options) => {
      let max = null;
      let maxSV = null;
      let rangeObj = null;
      try {
        rangeObj = new Range(range, options);
      } catch (er) {
        return null;
      }
      versions.forEach((v) => {
        if (rangeObj.test(v)) {
          if (!max || maxSV.compare(v) === -1) {
            max = v;
            maxSV = new SemVer(max, options);
          }
        }
      });
      return max;
    };
    module2.exports = maxSatisfying;
  }
});

// node_modules/semver/ranges/min-satisfying.js
var require_min_satisfying = __commonJS({
  "node_modules/semver/ranges/min-satisfying.js"(exports, module2) {
    var SemVer = require_semver();
    var Range = require_range();
    var minSatisfying = (versions, range, options) => {
      let min = null;
      let minSV = null;
      let rangeObj = null;
      try {
        rangeObj = new Range(range, options);
      } catch (er) {
        return null;
      }
      versions.forEach((v) => {
        if (rangeObj.test(v)) {
          if (!min || minSV.compare(v) === 1) {
            min = v;
            minSV = new SemVer(min, options);
          }
        }
      });
      return min;
    };
    module2.exports = minSatisfying;
  }
});

// node_modules/semver/ranges/min-version.js
var require_min_version = __commonJS({
  "node_modules/semver/ranges/min-version.js"(exports, module2) {
    var SemVer = require_semver();
    var Range = require_range();
    var gt = require_gt();
    var minVersion = (range, loose) => {
      range = new Range(range, loose);
      let minver = new SemVer("0.0.0");
      if (range.test(minver)) {
        return minver;
      }
      minver = new SemVer("0.0.0-0");
      if (range.test(minver)) {
        return minver;
      }
      minver = null;
      for (let i = 0; i < range.set.length; ++i) {
        const comparators = range.set[i];
        let setMin = null;
        comparators.forEach((comparator) => {
          const compver = new SemVer(comparator.semver.version);
          switch (comparator.operator) {
            case ">":
              if (compver.prerelease.length === 0) {
                compver.patch++;
              } else {
                compver.prerelease.push(0);
              }
              compver.raw = compver.format();
            /* fallthrough */
            case "":
            case ">=":
              if (!setMin || gt(compver, setMin)) {
                setMin = compver;
              }
              break;
            case "<":
            case "<=":
              break;
            /* istanbul ignore next */
            default:
              throw new Error(`Unexpected operation: ${comparator.operator}`);
          }
        });
        if (setMin && (!minver || gt(minver, setMin))) {
          minver = setMin;
        }
      }
      if (minver && range.test(minver)) {
        return minver;
      }
      return null;
    };
    module2.exports = minVersion;
  }
});

// node_modules/semver/ranges/valid.js
var require_valid2 = __commonJS({
  "node_modules/semver/ranges/valid.js"(exports, module2) {
    var Range = require_range();
    var validRange = (range, options) => {
      try {
        return new Range(range, options).range || "*";
      } catch (er) {
        return null;
      }
    };
    module2.exports = validRange;
  }
});

// node_modules/semver/ranges/outside.js
var require_outside = __commonJS({
  "node_modules/semver/ranges/outside.js"(exports, module2) {
    var SemVer = require_semver();
    var Comparator = require_comparator();
    var { ANY } = Comparator;
    var Range = require_range();
    var satisfies = require_satisfies();
    var gt = require_gt();
    var lt = require_lt();
    var lte = require_lte();
    var gte = require_gte();
    var outside = (version3, range, hilo, options) => {
      version3 = new SemVer(version3, options);
      range = new Range(range, options);
      let gtfn, ltefn, ltfn, comp, ecomp;
      switch (hilo) {
        case ">":
          gtfn = gt;
          ltefn = lte;
          ltfn = lt;
          comp = ">";
          ecomp = ">=";
          break;
        case "<":
          gtfn = lt;
          ltefn = gte;
          ltfn = gt;
          comp = "<";
          ecomp = "<=";
          break;
        default:
          throw new TypeError('Must provide a hilo val of "<" or ">"');
      }
      if (satisfies(version3, range, options)) {
        return false;
      }
      for (let i = 0; i < range.set.length; ++i) {
        const comparators = range.set[i];
        let high = null;
        let low = null;
        comparators.forEach((comparator) => {
          if (comparator.semver === ANY) {
            comparator = new Comparator(">=0.0.0");
          }
          high = high || comparator;
          low = low || comparator;
          if (gtfn(comparator.semver, high.semver, options)) {
            high = comparator;
          } else if (ltfn(comparator.semver, low.semver, options)) {
            low = comparator;
          }
        });
        if (high.operator === comp || high.operator === ecomp) {
          return false;
        }
        if ((!low.operator || low.operator === comp) && ltefn(version3, low.semver)) {
          return false;
        } else if (low.operator === ecomp && ltfn(version3, low.semver)) {
          return false;
        }
      }
      return true;
    };
    module2.exports = outside;
  }
});

// node_modules/semver/ranges/gtr.js
var require_gtr = __commonJS({
  "node_modules/semver/ranges/gtr.js"(exports, module2) {
    var outside = require_outside();
    var gtr = (version3, range, options) => outside(version3, range, ">", options);
    module2.exports = gtr;
  }
});

// node_modules/semver/ranges/ltr.js
var require_ltr = __commonJS({
  "node_modules/semver/ranges/ltr.js"(exports, module2) {
    var outside = require_outside();
    var ltr = (version3, range, options) => outside(version3, range, "<", options);
    module2.exports = ltr;
  }
});

// node_modules/semver/ranges/intersects.js
var require_intersects = __commonJS({
  "node_modules/semver/ranges/intersects.js"(exports, module2) {
    var Range = require_range();
    var intersects = (r1, r2, options) => {
      r1 = new Range(r1, options);
      r2 = new Range(r2, options);
      return r1.intersects(r2, options);
    };
    module2.exports = intersects;
  }
});

// node_modules/semver/ranges/simplify.js
var require_simplify = __commonJS({
  "node_modules/semver/ranges/simplify.js"(exports, module2) {
    var satisfies = require_satisfies();
    var compare = require_compare();
    module2.exports = (versions, range, options) => {
      const set = [];
      let first = null;
      let prev = null;
      const v = versions.sort((a, b) => compare(a, b, options));
      for (const version3 of v) {
        const included = satisfies(version3, range, options);
        if (included) {
          prev = version3;
          if (!first) {
            first = version3;
          }
        } else {
          if (prev) {
            set.push([first, prev]);
          }
          prev = null;
          first = null;
        }
      }
      if (first) {
        set.push([first, null]);
      }
      const ranges = [];
      for (const [min, max] of set) {
        if (min === max) {
          ranges.push(min);
        } else if (!max && min === v[0]) {
          ranges.push("*");
        } else if (!max) {
          ranges.push(`>=${min}`);
        } else if (min === v[0]) {
          ranges.push(`<=${max}`);
        } else {
          ranges.push(`${min} - ${max}`);
        }
      }
      const simplified = ranges.join(" || ");
      const original = typeof range.raw === "string" ? range.raw : String(range);
      return simplified.length < original.length ? simplified : range;
    };
  }
});

// node_modules/semver/ranges/subset.js
var require_subset = __commonJS({
  "node_modules/semver/ranges/subset.js"(exports, module2) {
    var Range = require_range();
    var Comparator = require_comparator();
    var { ANY } = Comparator;
    var satisfies = require_satisfies();
    var compare = require_compare();
    var subset = (sub, dom, options = {}) => {
      if (sub === dom) {
        return true;
      }
      sub = new Range(sub, options);
      dom = new Range(dom, options);
      let sawNonNull = false;
      OUTER: for (const simpleSub of sub.set) {
        for (const simpleDom of dom.set) {
          const isSub = simpleSubset(simpleSub, simpleDom, options);
          sawNonNull = sawNonNull || isSub !== null;
          if (isSub) {
            continue OUTER;
          }
        }
        if (sawNonNull) {
          return false;
        }
      }
      return true;
    };
    var minimumVersionWithPreRelease = [new Comparator(">=0.0.0-0")];
    var minimumVersion = [new Comparator(">=0.0.0")];
    var simpleSubset = (sub, dom, options) => {
      if (sub === dom) {
        return true;
      }
      if (sub.length === 1 && sub[0].semver === ANY) {
        if (dom.length === 1 && dom[0].semver === ANY) {
          return true;
        } else if (options.includePrerelease) {
          sub = minimumVersionWithPreRelease;
        } else {
          sub = minimumVersion;
        }
      }
      if (dom.length === 1 && dom[0].semver === ANY) {
        if (options.includePrerelease) {
          return true;
        } else {
          dom = minimumVersion;
        }
      }
      const eqSet = /* @__PURE__ */ new Set();
      let gt, lt;
      for (const c of sub) {
        if (c.operator === ">" || c.operator === ">=") {
          gt = higherGT(gt, c, options);
        } else if (c.operator === "<" || c.operator === "<=") {
          lt = lowerLT(lt, c, options);
        } else {
          eqSet.add(c.semver);
        }
      }
      if (eqSet.size > 1) {
        return null;
      }
      let gtltComp;
      if (gt && lt) {
        gtltComp = compare(gt.semver, lt.semver, options);
        if (gtltComp > 0) {
          return null;
        } else if (gtltComp === 0 && (gt.operator !== ">=" || lt.operator !== "<=")) {
          return null;
        }
      }
      for (const eq of eqSet) {
        if (gt && !satisfies(eq, String(gt), options)) {
          return null;
        }
        if (lt && !satisfies(eq, String(lt), options)) {
          return null;
        }
        for (const c of dom) {
          if (!satisfies(eq, String(c), options)) {
            return false;
          }
        }
        return true;
      }
      let higher, lower;
      let hasDomLT, hasDomGT;
      let needDomLTPre = lt && !options.includePrerelease && lt.semver.prerelease.length ? lt.semver : false;
      let needDomGTPre = gt && !options.includePrerelease && gt.semver.prerelease.length ? gt.semver : false;
      if (needDomLTPre && needDomLTPre.prerelease.length === 1 && lt.operator === "<" && needDomLTPre.prerelease[0] === 0) {
        needDomLTPre = false;
      }
      for (const c of dom) {
        hasDomGT = hasDomGT || c.operator === ">" || c.operator === ">=";
        hasDomLT = hasDomLT || c.operator === "<" || c.operator === "<=";
        if (gt) {
          if (needDomGTPre) {
            if (c.semver.prerelease && c.semver.prerelease.length && c.semver.major === needDomGTPre.major && c.semver.minor === needDomGTPre.minor && c.semver.patch === needDomGTPre.patch) {
              needDomGTPre = false;
            }
          }
          if (c.operator === ">" || c.operator === ">=") {
            higher = higherGT(gt, c, options);
            if (higher === c && higher !== gt) {
              return false;
            }
          } else if (gt.operator === ">=" && !satisfies(gt.semver, String(c), options)) {
            return false;
          }
        }
        if (lt) {
          if (needDomLTPre) {
            if (c.semver.prerelease && c.semver.prerelease.length && c.semver.major === needDomLTPre.major && c.semver.minor === needDomLTPre.minor && c.semver.patch === needDomLTPre.patch) {
              needDomLTPre = false;
            }
          }
          if (c.operator === "<" || c.operator === "<=") {
            lower = lowerLT(lt, c, options);
            if (lower === c && lower !== lt) {
              return false;
            }
          } else if (lt.operator === "<=" && !satisfies(lt.semver, String(c), options)) {
            return false;
          }
        }
        if (!c.operator && (lt || gt) && gtltComp !== 0) {
          return false;
        }
      }
      if (gt && hasDomLT && !lt && gtltComp !== 0) {
        return false;
      }
      if (lt && hasDomGT && !gt && gtltComp !== 0) {
        return false;
      }
      if (needDomGTPre || needDomLTPre) {
        return false;
      }
      return true;
    };
    var higherGT = (a, b, options) => {
      if (!a) {
        return b;
      }
      const comp = compare(a.semver, b.semver, options);
      return comp > 0 ? a : comp < 0 ? b : b.operator === ">" && a.operator === ">=" ? b : a;
    };
    var lowerLT = (a, b, options) => {
      if (!a) {
        return b;
      }
      const comp = compare(a.semver, b.semver, options);
      return comp < 0 ? a : comp > 0 ? b : b.operator === "<" && a.operator === "<=" ? b : a;
    };
    module2.exports = subset;
  }
});

// node_modules/semver/index.js
var require_semver2 = __commonJS({
  "node_modules/semver/index.js"(exports, module2) {
    var internalRe = require_re();
    var constants2 = require_constants();
    var SemVer = require_semver();
    var identifiers = require_identifiers();
    var parse = require_parse();
    var valid = require_valid();
    var clean = require_clean();
    var inc = require_inc();
    var diff = require_diff();
    var major = require_major();
    var minor = require_minor();
    var patch = require_patch();
    var prerelease = require_prerelease();
    var compare = require_compare();
    var rcompare = require_rcompare();
    var compareLoose = require_compare_loose();
    var compareBuild = require_compare_build();
    var sort = require_sort();
    var rsort = require_rsort();
    var gt = require_gt();
    var lt = require_lt();
    var eq = require_eq();
    var neq = require_neq();
    var gte = require_gte();
    var lte = require_lte();
    var cmp = require_cmp();
    var coerce = require_coerce();
    var Comparator = require_comparator();
    var Range = require_range();
    var satisfies = require_satisfies();
    var toComparators = require_to_comparators();
    var maxSatisfying = require_max_satisfying();
    var minSatisfying = require_min_satisfying();
    var minVersion = require_min_version();
    var validRange = require_valid2();
    var outside = require_outside();
    var gtr = require_gtr();
    var ltr = require_ltr();
    var intersects = require_intersects();
    var simplifyRange = require_simplify();
    var subset = require_subset();
    module2.exports = {
      parse,
      valid,
      clean,
      inc,
      diff,
      major,
      minor,
      patch,
      prerelease,
      compare,
      rcompare,
      compareLoose,
      compareBuild,
      sort,
      rsort,
      gt,
      lt,
      eq,
      neq,
      gte,
      lte,
      cmp,
      coerce,
      Comparator,
      Range,
      satisfies,
      toComparators,
      maxSatisfying,
      minSatisfying,
      minVersion,
      validRange,
      outside,
      gtr,
      ltr,
      intersects,
      simplifyRange,
      subset,
      SemVer,
      re: internalRe.re,
      src: internalRe.src,
      tokens: internalRe.t,
      SEMVER_SPEC_VERSION: constants2.SEMVER_SPEC_VERSION,
      RELEASE_TYPES: constants2.RELEASE_TYPES,
      compareIdentifiers: identifiers.compareIdentifiers,
      rcompareIdentifiers: identifiers.rcompareIdentifiers
    };
  }
});

// node_modules/jsonwebtoken/lib/asymmetricKeyDetailsSupported.js
var require_asymmetricKeyDetailsSupported = __commonJS({
  "node_modules/jsonwebtoken/lib/asymmetricKeyDetailsSupported.js"(exports, module2) {
    var semver = require_semver2();
    module2.exports = semver.satisfies(process.version, ">=15.7.0");
  }
});

// node_modules/jsonwebtoken/lib/rsaPssKeyDetailsSupported.js
var require_rsaPssKeyDetailsSupported = __commonJS({
  "node_modules/jsonwebtoken/lib/rsaPssKeyDetailsSupported.js"(exports, module2) {
    var semver = require_semver2();
    module2.exports = semver.satisfies(process.version, ">=16.9.0");
  }
});

// node_modules/jsonwebtoken/lib/validateAsymmetricKey.js
var require_validateAsymmetricKey = __commonJS({
  "node_modules/jsonwebtoken/lib/validateAsymmetricKey.js"(exports, module2) {
    var ASYMMETRIC_KEY_DETAILS_SUPPORTED = require_asymmetricKeyDetailsSupported();
    var RSA_PSS_KEY_DETAILS_SUPPORTED = require_rsaPssKeyDetailsSupported();
    var allowedAlgorithmsForKeys = {
      "ec": ["ES256", "ES384", "ES512"],
      "rsa": ["RS256", "PS256", "RS384", "PS384", "RS512", "PS512"],
      "rsa-pss": ["PS256", "PS384", "PS512"]
    };
    var allowedCurves = {
      ES256: "prime256v1",
      ES384: "secp384r1",
      ES512: "secp521r1"
    };
    module2.exports = function(algorithm, key) {
      if (!algorithm || !key) return;
      const keyType = key.asymmetricKeyType;
      if (!keyType) return;
      const allowedAlgorithms = allowedAlgorithmsForKeys[keyType];
      if (!allowedAlgorithms) {
        throw new Error(`Unknown key type "${keyType}".`);
      }
      if (!allowedAlgorithms.includes(algorithm)) {
        throw new Error(`"alg" parameter for "${keyType}" key type must be one of: ${allowedAlgorithms.join(", ")}.`);
      }
      if (ASYMMETRIC_KEY_DETAILS_SUPPORTED) {
        switch (keyType) {
          case "ec":
            const keyCurve = key.asymmetricKeyDetails.namedCurve;
            const allowedCurve = allowedCurves[algorithm];
            if (keyCurve !== allowedCurve) {
              throw new Error(`"alg" parameter "${algorithm}" requires curve "${allowedCurve}".`);
            }
            break;
          case "rsa-pss":
            if (RSA_PSS_KEY_DETAILS_SUPPORTED) {
              const length = parseInt(algorithm.slice(-3), 10);
              const { hashAlgorithm, mgf1HashAlgorithm, saltLength } = key.asymmetricKeyDetails;
              if (hashAlgorithm !== `sha${length}` || mgf1HashAlgorithm !== hashAlgorithm) {
                throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${algorithm}.`);
              }
              if (saltLength !== void 0 && saltLength > length >> 3) {
                throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${algorithm}.`);
              }
            }
            break;
        }
      }
    };
  }
});

// node_modules/jsonwebtoken/lib/psSupported.js
var require_psSupported = __commonJS({
  "node_modules/jsonwebtoken/lib/psSupported.js"(exports, module2) {
    var semver = require_semver2();
    module2.exports = semver.satisfies(process.version, "^6.12.0 || >=8.0.0");
  }
});

// node_modules/jsonwebtoken/verify.js
var require_verify = __commonJS({
  "node_modules/jsonwebtoken/verify.js"(exports, module2) {
    var JsonWebTokenError = require_JsonWebTokenError();
    var NotBeforeError = require_NotBeforeError();
    var TokenExpiredError = require_TokenExpiredError();
    var decode = require_decode();
    var timespan = require_timespan();
    var validateAsymmetricKey = require_validateAsymmetricKey();
    var PS_SUPPORTED = require_psSupported();
    var jws = require_jws();
    var { KeyObject, createSecretKey, createPublicKey } = require("crypto");
    var PUB_KEY_ALGS = ["RS256", "RS384", "RS512"];
    var EC_KEY_ALGS = ["ES256", "ES384", "ES512"];
    var RSA_KEY_ALGS = ["RS256", "RS384", "RS512"];
    var HS_ALGS = ["HS256", "HS384", "HS512"];
    if (PS_SUPPORTED) {
      PUB_KEY_ALGS.splice(PUB_KEY_ALGS.length, 0, "PS256", "PS384", "PS512");
      RSA_KEY_ALGS.splice(RSA_KEY_ALGS.length, 0, "PS256", "PS384", "PS512");
    }
    module2.exports = function(jwtString, secretOrPublicKey, options, callback) {
      if (typeof options === "function" && !callback) {
        callback = options;
        options = {};
      }
      if (!options) {
        options = {};
      }
      options = Object.assign({}, options);
      let done;
      if (callback) {
        done = callback;
      } else {
        done = function(err, data) {
          if (err) throw err;
          return data;
        };
      }
      if (options.clockTimestamp && typeof options.clockTimestamp !== "number") {
        return done(new JsonWebTokenError("clockTimestamp must be a number"));
      }
      if (options.nonce !== void 0 && (typeof options.nonce !== "string" || options.nonce.trim() === "")) {
        return done(new JsonWebTokenError("nonce must be a non-empty string"));
      }
      if (options.allowInvalidAsymmetricKeyTypes !== void 0 && typeof options.allowInvalidAsymmetricKeyTypes !== "boolean") {
        return done(new JsonWebTokenError("allowInvalidAsymmetricKeyTypes must be a boolean"));
      }
      const clockTimestamp = options.clockTimestamp || Math.floor(Date.now() / 1e3);
      if (!jwtString) {
        return done(new JsonWebTokenError("jwt must be provided"));
      }
      if (typeof jwtString !== "string") {
        return done(new JsonWebTokenError("jwt must be a string"));
      }
      const parts = jwtString.split(".");
      if (parts.length !== 3) {
        return done(new JsonWebTokenError("jwt malformed"));
      }
      let decodedToken;
      try {
        decodedToken = decode(jwtString, { complete: true });
      } catch (err) {
        return done(err);
      }
      if (!decodedToken) {
        return done(new JsonWebTokenError("invalid token"));
      }
      const header = decodedToken.header;
      let getSecret;
      if (typeof secretOrPublicKey === "function") {
        if (!callback) {
          return done(new JsonWebTokenError("verify must be called asynchronous if secret or public key is provided as a callback"));
        }
        getSecret = secretOrPublicKey;
      } else {
        getSecret = function(header2, secretCallback) {
          return secretCallback(null, secretOrPublicKey);
        };
      }
      return getSecret(header, function(err, secretOrPublicKey2) {
        if (err) {
          return done(new JsonWebTokenError("error in secret or public key callback: " + err.message));
        }
        const hasSignature = parts[2].trim() !== "";
        if (!hasSignature && secretOrPublicKey2) {
          return done(new JsonWebTokenError("jwt signature is required"));
        }
        if (hasSignature && !secretOrPublicKey2) {
          return done(new JsonWebTokenError("secret or public key must be provided"));
        }
        if (!hasSignature && !options.algorithms) {
          return done(new JsonWebTokenError('please specify "none" in "algorithms" to verify unsigned tokens'));
        }
        if (secretOrPublicKey2 != null && !(secretOrPublicKey2 instanceof KeyObject)) {
          try {
            secretOrPublicKey2 = createPublicKey(secretOrPublicKey2);
          } catch (_) {
            try {
              secretOrPublicKey2 = createSecretKey(typeof secretOrPublicKey2 === "string" ? Buffer.from(secretOrPublicKey2) : secretOrPublicKey2);
            } catch (_2) {
              return done(new JsonWebTokenError("secretOrPublicKey is not valid key material"));
            }
          }
        }
        if (!options.algorithms) {
          if (secretOrPublicKey2.type === "secret") {
            options.algorithms = HS_ALGS;
          } else if (["rsa", "rsa-pss"].includes(secretOrPublicKey2.asymmetricKeyType)) {
            options.algorithms = RSA_KEY_ALGS;
          } else if (secretOrPublicKey2.asymmetricKeyType === "ec") {
            options.algorithms = EC_KEY_ALGS;
          } else {
            options.algorithms = PUB_KEY_ALGS;
          }
        }
        if (options.algorithms.indexOf(decodedToken.header.alg) === -1) {
          return done(new JsonWebTokenError("invalid algorithm"));
        }
        if (header.alg.startsWith("HS") && secretOrPublicKey2.type !== "secret") {
          return done(new JsonWebTokenError(`secretOrPublicKey must be a symmetric key when using ${header.alg}`));
        } else if (/^(?:RS|PS|ES)/.test(header.alg) && secretOrPublicKey2.type !== "public") {
          return done(new JsonWebTokenError(`secretOrPublicKey must be an asymmetric key when using ${header.alg}`));
        }
        if (!options.allowInvalidAsymmetricKeyTypes) {
          try {
            validateAsymmetricKey(header.alg, secretOrPublicKey2);
          } catch (e) {
            return done(e);
          }
        }
        let valid;
        try {
          valid = jws.verify(jwtString, decodedToken.header.alg, secretOrPublicKey2);
        } catch (e) {
          return done(e);
        }
        if (!valid) {
          return done(new JsonWebTokenError("invalid signature"));
        }
        const payload = decodedToken.payload;
        if (typeof payload.nbf !== "undefined" && !options.ignoreNotBefore) {
          if (typeof payload.nbf !== "number") {
            return done(new JsonWebTokenError("invalid nbf value"));
          }
          if (payload.nbf > clockTimestamp + (options.clockTolerance || 0)) {
            return done(new NotBeforeError("jwt not active", new Date(payload.nbf * 1e3)));
          }
        }
        if (typeof payload.exp !== "undefined" && !options.ignoreExpiration) {
          if (typeof payload.exp !== "number") {
            return done(new JsonWebTokenError("invalid exp value"));
          }
          if (clockTimestamp >= payload.exp + (options.clockTolerance || 0)) {
            return done(new TokenExpiredError("jwt expired", new Date(payload.exp * 1e3)));
          }
        }
        if (options.audience) {
          const audiences = Array.isArray(options.audience) ? options.audience : [options.audience];
          const target = Array.isArray(payload.aud) ? payload.aud : [payload.aud];
          const match = target.some(function(targetAudience) {
            return audiences.some(function(audience) {
              return audience instanceof RegExp ? audience.test(targetAudience) : audience === targetAudience;
            });
          });
          if (!match) {
            return done(new JsonWebTokenError("jwt audience invalid. expected: " + audiences.join(" or ")));
          }
        }
        if (options.issuer) {
          const invalid_issuer = typeof options.issuer === "string" && payload.iss !== options.issuer || Array.isArray(options.issuer) && options.issuer.indexOf(payload.iss) === -1;
          if (invalid_issuer) {
            return done(new JsonWebTokenError("jwt issuer invalid. expected: " + options.issuer));
          }
        }
        if (options.subject) {
          if (payload.sub !== options.subject) {
            return done(new JsonWebTokenError("jwt subject invalid. expected: " + options.subject));
          }
        }
        if (options.jwtid) {
          if (payload.jti !== options.jwtid) {
            return done(new JsonWebTokenError("jwt jwtid invalid. expected: " + options.jwtid));
          }
        }
        if (options.nonce) {
          if (payload.nonce !== options.nonce) {
            return done(new JsonWebTokenError("jwt nonce invalid. expected: " + options.nonce));
          }
        }
        if (options.maxAge) {
          if (typeof payload.iat !== "number") {
            return done(new JsonWebTokenError("iat required when maxAge is specified"));
          }
          const maxAgeTimestamp = timespan(options.maxAge, payload.iat);
          if (typeof maxAgeTimestamp === "undefined") {
            return done(new JsonWebTokenError('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));
          }
          if (clockTimestamp >= maxAgeTimestamp + (options.clockTolerance || 0)) {
            return done(new TokenExpiredError("maxAge exceeded", new Date(maxAgeTimestamp * 1e3)));
          }
        }
        if (options.complete === true) {
          const signature = decodedToken.signature;
          return done(null, {
            header,
            payload,
            signature
          });
        }
        return done(null, payload);
      });
    };
  }
});

// node_modules/lodash.includes/index.js
var require_lodash = __commonJS({
  "node_modules/lodash.includes/index.js"(exports, module2) {
    var INFINITY = 1 / 0;
    var MAX_SAFE_INTEGER = 9007199254740991;
    var MAX_INTEGER = 17976931348623157e292;
    var NAN = 0 / 0;
    var argsTag = "[object Arguments]";
    var funcTag = "[object Function]";
    var genTag = "[object GeneratorFunction]";
    var stringTag = "[object String]";
    var symbolTag = "[object Symbol]";
    var reTrim = /^\s+|\s+$/g;
    var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;
    var reIsBinary = /^0b[01]+$/i;
    var reIsOctal = /^0o[0-7]+$/i;
    var reIsUint = /^(?:0|[1-9]\d*)$/;
    var freeParseInt = parseInt;
    function arrayMap(array, iteratee) {
      var index = -1, length = array ? array.length : 0, result = Array(length);
      while (++index < length) {
        result[index] = iteratee(array[index], index, array);
      }
      return result;
    }
    function baseFindIndex(array, predicate, fromIndex, fromRight) {
      var length = array.length, index = fromIndex + (fromRight ? 1 : -1);
      while (fromRight ? index-- : ++index < length) {
        if (predicate(array[index], index, array)) {
          return index;
        }
      }
      return -1;
    }
    function baseIndexOf(array, value, fromIndex) {
      if (value !== value) {
        return baseFindIndex(array, baseIsNaN, fromIndex);
      }
      var index = fromIndex - 1, length = array.length;
      while (++index < length) {
        if (array[index] === value) {
          return index;
        }
      }
      return -1;
    }
    function baseIsNaN(value) {
      return value !== value;
    }
    function baseTimes(n, iteratee) {
      var index = -1, result = Array(n);
      while (++index < n) {
        result[index] = iteratee(index);
      }
      return result;
    }
    function baseValues(object, props) {
      return arrayMap(props, function(key) {
        return object[key];
      });
    }
    function overArg(func, transform) {
      return function(arg) {
        return func(transform(arg));
      };
    }
    var objectProto = Object.prototype;
    var hasOwnProperty = objectProto.hasOwnProperty;
    var objectToString = objectProto.toString;
    var propertyIsEnumerable = objectProto.propertyIsEnumerable;
    var nativeKeys = overArg(Object.keys, Object);
    var nativeMax = Math.max;
    function arrayLikeKeys(value, inherited) {
      var result = isArray(value) || isArguments(value) ? baseTimes(value.length, String) : [];
      var length = result.length, skipIndexes = !!length;
      for (var key in value) {
        if ((inherited || hasOwnProperty.call(value, key)) && !(skipIndexes && (key == "length" || isIndex(key, length)))) {
          result.push(key);
        }
      }
      return result;
    }
    function baseKeys(object) {
      if (!isPrototype(object)) {
        return nativeKeys(object);
      }
      var result = [];
      for (var key in Object(object)) {
        if (hasOwnProperty.call(object, key) && key != "constructor") {
          result.push(key);
        }
      }
      return result;
    }
    function isIndex(value, length) {
      length = length == null ? MAX_SAFE_INTEGER : length;
      return !!length && (typeof value == "number" || reIsUint.test(value)) && (value > -1 && value % 1 == 0 && value < length);
    }
    function isPrototype(value) {
      var Ctor = value && value.constructor, proto = typeof Ctor == "function" && Ctor.prototype || objectProto;
      return value === proto;
    }
    function includes(collection, value, fromIndex, guard) {
      collection = isArrayLike(collection) ? collection : values(collection);
      fromIndex = fromIndex && !guard ? toInteger(fromIndex) : 0;
      var length = collection.length;
      if (fromIndex < 0) {
        fromIndex = nativeMax(length + fromIndex, 0);
      }
      return isString(collection) ? fromIndex <= length && collection.indexOf(value, fromIndex) > -1 : !!length && baseIndexOf(collection, value, fromIndex) > -1;
    }
    function isArguments(value) {
      return isArrayLikeObject(value) && hasOwnProperty.call(value, "callee") && (!propertyIsEnumerable.call(value, "callee") || objectToString.call(value) == argsTag);
    }
    var isArray = Array.isArray;
    function isArrayLike(value) {
      return value != null && isLength(value.length) && !isFunction(value);
    }
    function isArrayLikeObject(value) {
      return isObjectLike(value) && isArrayLike(value);
    }
    function isFunction(value) {
      var tag = isObject(value) ? objectToString.call(value) : "";
      return tag == funcTag || tag == genTag;
    }
    function isLength(value) {
      return typeof value == "number" && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;
    }
    function isObject(value) {
      var type = typeof value;
      return !!value && (type == "object" || type == "function");
    }
    function isObjectLike(value) {
      return !!value && typeof value == "object";
    }
    function isString(value) {
      return typeof value == "string" || !isArray(value) && isObjectLike(value) && objectToString.call(value) == stringTag;
    }
    function isSymbol(value) {
      return typeof value == "symbol" || isObjectLike(value) && objectToString.call(value) == symbolTag;
    }
    function toFinite(value) {
      if (!value) {
        return value === 0 ? value : 0;
      }
      value = toNumber(value);
      if (value === INFINITY || value === -INFINITY) {
        var sign = value < 0 ? -1 : 1;
        return sign * MAX_INTEGER;
      }
      return value === value ? value : 0;
    }
    function toInteger(value) {
      var result = toFinite(value), remainder = result % 1;
      return result === result ? remainder ? result - remainder : result : 0;
    }
    function toNumber(value) {
      if (typeof value == "number") {
        return value;
      }
      if (isSymbol(value)) {
        return NAN;
      }
      if (isObject(value)) {
        var other = typeof value.valueOf == "function" ? value.valueOf() : value;
        value = isObject(other) ? other + "" : other;
      }
      if (typeof value != "string") {
        return value === 0 ? value : +value;
      }
      value = value.replace(reTrim, "");
      var isBinary = reIsBinary.test(value);
      return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;
    }
    function keys(object) {
      return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);
    }
    function values(object) {
      return object ? baseValues(object, keys(object)) : [];
    }
    module2.exports = includes;
  }
});

// node_modules/lodash.isboolean/index.js
var require_lodash2 = __commonJS({
  "node_modules/lodash.isboolean/index.js"(exports, module2) {
    var boolTag = "[object Boolean]";
    var objectProto = Object.prototype;
    var objectToString = objectProto.toString;
    function isBoolean(value) {
      return value === true || value === false || isObjectLike(value) && objectToString.call(value) == boolTag;
    }
    function isObjectLike(value) {
      return !!value && typeof value == "object";
    }
    module2.exports = isBoolean;
  }
});

// node_modules/lodash.isinteger/index.js
var require_lodash3 = __commonJS({
  "node_modules/lodash.isinteger/index.js"(exports, module2) {
    var INFINITY = 1 / 0;
    var MAX_INTEGER = 17976931348623157e292;
    var NAN = 0 / 0;
    var symbolTag = "[object Symbol]";
    var reTrim = /^\s+|\s+$/g;
    var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;
    var reIsBinary = /^0b[01]+$/i;
    var reIsOctal = /^0o[0-7]+$/i;
    var freeParseInt = parseInt;
    var objectProto = Object.prototype;
    var objectToString = objectProto.toString;
    function isInteger(value) {
      return typeof value == "number" && value == toInteger(value);
    }
    function isObject(value) {
      var type = typeof value;
      return !!value && (type == "object" || type == "function");
    }
    function isObjectLike(value) {
      return !!value && typeof value == "object";
    }
    function isSymbol(value) {
      return typeof value == "symbol" || isObjectLike(value) && objectToString.call(value) == symbolTag;
    }
    function toFinite(value) {
      if (!value) {
        return value === 0 ? value : 0;
      }
      value = toNumber(value);
      if (value === INFINITY || value === -INFINITY) {
        var sign = value < 0 ? -1 : 1;
        return sign * MAX_INTEGER;
      }
      return value === value ? value : 0;
    }
    function toInteger(value) {
      var result = toFinite(value), remainder = result % 1;
      return result === result ? remainder ? result - remainder : result : 0;
    }
    function toNumber(value) {
      if (typeof value == "number") {
        return value;
      }
      if (isSymbol(value)) {
        return NAN;
      }
      if (isObject(value)) {
        var other = typeof value.valueOf == "function" ? value.valueOf() : value;
        value = isObject(other) ? other + "" : other;
      }
      if (typeof value != "string") {
        return value === 0 ? value : +value;
      }
      value = value.replace(reTrim, "");
      var isBinary = reIsBinary.test(value);
      return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;
    }
    module2.exports = isInteger;
  }
});

// node_modules/lodash.isnumber/index.js
var require_lodash4 = __commonJS({
  "node_modules/lodash.isnumber/index.js"(exports, module2) {
    var numberTag = "[object Number]";
    var objectProto = Object.prototype;
    var objectToString = objectProto.toString;
    function isObjectLike(value) {
      return !!value && typeof value == "object";
    }
    function isNumber(value) {
      return typeof value == "number" || isObjectLike(value) && objectToString.call(value) == numberTag;
    }
    module2.exports = isNumber;
  }
});

// node_modules/lodash.isplainobject/index.js
var require_lodash5 = __commonJS({
  "node_modules/lodash.isplainobject/index.js"(exports, module2) {
    var objectTag = "[object Object]";
    function isHostObject(value) {
      var result = false;
      if (value != null && typeof value.toString != "function") {
        try {
          result = !!(value + "");
        } catch (e) {
        }
      }
      return result;
    }
    function overArg(func, transform) {
      return function(arg) {
        return func(transform(arg));
      };
    }
    var funcProto = Function.prototype;
    var objectProto = Object.prototype;
    var funcToString = funcProto.toString;
    var hasOwnProperty = objectProto.hasOwnProperty;
    var objectCtorString = funcToString.call(Object);
    var objectToString = objectProto.toString;
    var getPrototype = overArg(Object.getPrototypeOf, Object);
    function isObjectLike(value) {
      return !!value && typeof value == "object";
    }
    function isPlainObject(value) {
      if (!isObjectLike(value) || objectToString.call(value) != objectTag || isHostObject(value)) {
        return false;
      }
      var proto = getPrototype(value);
      if (proto === null) {
        return true;
      }
      var Ctor = hasOwnProperty.call(proto, "constructor") && proto.constructor;
      return typeof Ctor == "function" && Ctor instanceof Ctor && funcToString.call(Ctor) == objectCtorString;
    }
    module2.exports = isPlainObject;
  }
});

// node_modules/lodash.isstring/index.js
var require_lodash6 = __commonJS({
  "node_modules/lodash.isstring/index.js"(exports, module2) {
    var stringTag = "[object String]";
    var objectProto = Object.prototype;
    var objectToString = objectProto.toString;
    var isArray = Array.isArray;
    function isObjectLike(value) {
      return !!value && typeof value == "object";
    }
    function isString(value) {
      return typeof value == "string" || !isArray(value) && isObjectLike(value) && objectToString.call(value) == stringTag;
    }
    module2.exports = isString;
  }
});

// node_modules/lodash.once/index.js
var require_lodash7 = __commonJS({
  "node_modules/lodash.once/index.js"(exports, module2) {
    var FUNC_ERROR_TEXT = "Expected a function";
    var INFINITY = 1 / 0;
    var MAX_INTEGER = 17976931348623157e292;
    var NAN = 0 / 0;
    var symbolTag = "[object Symbol]";
    var reTrim = /^\s+|\s+$/g;
    var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;
    var reIsBinary = /^0b[01]+$/i;
    var reIsOctal = /^0o[0-7]+$/i;
    var freeParseInt = parseInt;
    var objectProto = Object.prototype;
    var objectToString = objectProto.toString;
    function before(n, func) {
      var result;
      if (typeof func != "function") {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      n = toInteger(n);
      return function() {
        if (--n > 0) {
          result = func.apply(this, arguments);
        }
        if (n <= 1) {
          func = void 0;
        }
        return result;
      };
    }
    function once(func) {
      return before(2, func);
    }
    function isObject(value) {
      var type = typeof value;
      return !!value && (type == "object" || type == "function");
    }
    function isObjectLike(value) {
      return !!value && typeof value == "object";
    }
    function isSymbol(value) {
      return typeof value == "symbol" || isObjectLike(value) && objectToString.call(value) == symbolTag;
    }
    function toFinite(value) {
      if (!value) {
        return value === 0 ? value : 0;
      }
      value = toNumber(value);
      if (value === INFINITY || value === -INFINITY) {
        var sign = value < 0 ? -1 : 1;
        return sign * MAX_INTEGER;
      }
      return value === value ? value : 0;
    }
    function toInteger(value) {
      var result = toFinite(value), remainder = result % 1;
      return result === result ? remainder ? result - remainder : result : 0;
    }
    function toNumber(value) {
      if (typeof value == "number") {
        return value;
      }
      if (isSymbol(value)) {
        return NAN;
      }
      if (isObject(value)) {
        var other = typeof value.valueOf == "function" ? value.valueOf() : value;
        value = isObject(other) ? other + "" : other;
      }
      if (typeof value != "string") {
        return value === 0 ? value : +value;
      }
      value = value.replace(reTrim, "");
      var isBinary = reIsBinary.test(value);
      return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;
    }
    module2.exports = once;
  }
});

// node_modules/jsonwebtoken/sign.js
var require_sign = __commonJS({
  "node_modules/jsonwebtoken/sign.js"(exports, module2) {
    var timespan = require_timespan();
    var PS_SUPPORTED = require_psSupported();
    var validateAsymmetricKey = require_validateAsymmetricKey();
    var jws = require_jws();
    var includes = require_lodash();
    var isBoolean = require_lodash2();
    var isInteger = require_lodash3();
    var isNumber = require_lodash4();
    var isPlainObject = require_lodash5();
    var isString = require_lodash6();
    var once = require_lodash7();
    var { KeyObject, createSecretKey, createPrivateKey } = require("crypto");
    var SUPPORTED_ALGS = ["RS256", "RS384", "RS512", "ES256", "ES384", "ES512", "HS256", "HS384", "HS512", "none"];
    if (PS_SUPPORTED) {
      SUPPORTED_ALGS.splice(3, 0, "PS256", "PS384", "PS512");
    }
    var sign_options_schema = {
      expiresIn: { isValid: function(value) {
        return isInteger(value) || isString(value) && value;
      }, message: '"expiresIn" should be a number of seconds or string representing a timespan' },
      notBefore: { isValid: function(value) {
        return isInteger(value) || isString(value) && value;
      }, message: '"notBefore" should be a number of seconds or string representing a timespan' },
      audience: { isValid: function(value) {
        return isString(value) || Array.isArray(value);
      }, message: '"audience" must be a string or array' },
      algorithm: { isValid: includes.bind(null, SUPPORTED_ALGS), message: '"algorithm" must be a valid string enum value' },
      header: { isValid: isPlainObject, message: '"header" must be an object' },
      encoding: { isValid: isString, message: '"encoding" must be a string' },
      issuer: { isValid: isString, message: '"issuer" must be a string' },
      subject: { isValid: isString, message: '"subject" must be a string' },
      jwtid: { isValid: isString, message: '"jwtid" must be a string' },
      noTimestamp: { isValid: isBoolean, message: '"noTimestamp" must be a boolean' },
      keyid: { isValid: isString, message: '"keyid" must be a string' },
      mutatePayload: { isValid: isBoolean, message: '"mutatePayload" must be a boolean' },
      allowInsecureKeySizes: { isValid: isBoolean, message: '"allowInsecureKeySizes" must be a boolean' },
      allowInvalidAsymmetricKeyTypes: { isValid: isBoolean, message: '"allowInvalidAsymmetricKeyTypes" must be a boolean' }
    };
    var registered_claims_schema = {
      iat: { isValid: isNumber, message: '"iat" should be a number of seconds' },
      exp: { isValid: isNumber, message: '"exp" should be a number of seconds' },
      nbf: { isValid: isNumber, message: '"nbf" should be a number of seconds' }
    };
    function validate2(schema, allowUnknown, object, parameterName) {
      if (!isPlainObject(object)) {
        throw new Error('Expected "' + parameterName + '" to be a plain object.');
      }
      Object.keys(object).forEach(function(key) {
        const validator = schema[key];
        if (!validator) {
          if (!allowUnknown) {
            throw new Error('"' + key + '" is not allowed in "' + parameterName + '"');
          }
          return;
        }
        if (!validator.isValid(object[key])) {
          throw new Error(validator.message);
        }
      });
    }
    function validateOptions(options) {
      return validate2(sign_options_schema, false, options, "options");
    }
    function validatePayload(payload) {
      return validate2(registered_claims_schema, true, payload, "payload");
    }
    var options_to_payload = {
      "audience": "aud",
      "issuer": "iss",
      "subject": "sub",
      "jwtid": "jti"
    };
    var options_for_objects = [
      "expiresIn",
      "notBefore",
      "noTimestamp",
      "audience",
      "issuer",
      "subject",
      "jwtid"
    ];
    module2.exports = function(payload, secretOrPrivateKey, options, callback) {
      if (typeof options === "function") {
        callback = options;
        options = {};
      } else {
        options = options || {};
      }
      const isObjectPayload = typeof payload === "object" && !Buffer.isBuffer(payload);
      const header = Object.assign({
        alg: options.algorithm || "HS256",
        typ: isObjectPayload ? "JWT" : void 0,
        kid: options.keyid
      }, options.header);
      function failure(err) {
        if (callback) {
          return callback(err);
        }
        throw err;
      }
      if (!secretOrPrivateKey && options.algorithm !== "none") {
        return failure(new Error("secretOrPrivateKey must have a value"));
      }
      if (secretOrPrivateKey != null && !(secretOrPrivateKey instanceof KeyObject)) {
        try {
          secretOrPrivateKey = createPrivateKey(secretOrPrivateKey);
        } catch (_) {
          try {
            secretOrPrivateKey = createSecretKey(typeof secretOrPrivateKey === "string" ? Buffer.from(secretOrPrivateKey) : secretOrPrivateKey);
          } catch (_2) {
            return failure(new Error("secretOrPrivateKey is not valid key material"));
          }
        }
      }
      if (header.alg.startsWith("HS") && secretOrPrivateKey.type !== "secret") {
        return failure(new Error(`secretOrPrivateKey must be a symmetric key when using ${header.alg}`));
      } else if (/^(?:RS|PS|ES)/.test(header.alg)) {
        if (secretOrPrivateKey.type !== "private") {
          return failure(new Error(`secretOrPrivateKey must be an asymmetric key when using ${header.alg}`));
        }
        if (!options.allowInsecureKeySizes && !header.alg.startsWith("ES") && secretOrPrivateKey.asymmetricKeyDetails !== void 0 && //KeyObject.asymmetricKeyDetails is supported in Node 15+
        secretOrPrivateKey.asymmetricKeyDetails.modulusLength < 2048) {
          return failure(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${header.alg}`));
        }
      }
      if (typeof payload === "undefined") {
        return failure(new Error("payload is required"));
      } else if (isObjectPayload) {
        try {
          validatePayload(payload);
        } catch (error) {
          return failure(error);
        }
        if (!options.mutatePayload) {
          payload = Object.assign({}, payload);
        }
      } else {
        const invalid_options = options_for_objects.filter(function(opt) {
          return typeof options[opt] !== "undefined";
        });
        if (invalid_options.length > 0) {
          return failure(new Error("invalid " + invalid_options.join(",") + " option for " + typeof payload + " payload"));
        }
      }
      if (typeof payload.exp !== "undefined" && typeof options.expiresIn !== "undefined") {
        return failure(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));
      }
      if (typeof payload.nbf !== "undefined" && typeof options.notBefore !== "undefined") {
        return failure(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));
      }
      try {
        validateOptions(options);
      } catch (error) {
        return failure(error);
      }
      if (!options.allowInvalidAsymmetricKeyTypes) {
        try {
          validateAsymmetricKey(header.alg, secretOrPrivateKey);
        } catch (error) {
          return failure(error);
        }
      }
      const timestamp = payload.iat || Math.floor(Date.now() / 1e3);
      if (options.noTimestamp) {
        delete payload.iat;
      } else if (isObjectPayload) {
        payload.iat = timestamp;
      }
      if (typeof options.notBefore !== "undefined") {
        try {
          payload.nbf = timespan(options.notBefore, timestamp);
        } catch (err) {
          return failure(err);
        }
        if (typeof payload.nbf === "undefined") {
          return failure(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));
        }
      }
      if (typeof options.expiresIn !== "undefined" && typeof payload === "object") {
        try {
          payload.exp = timespan(options.expiresIn, timestamp);
        } catch (err) {
          return failure(err);
        }
        if (typeof payload.exp === "undefined") {
          return failure(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));
        }
      }
      Object.keys(options_to_payload).forEach(function(key) {
        const claim = options_to_payload[key];
        if (typeof options[key] !== "undefined") {
          if (typeof payload[claim] !== "undefined") {
            return failure(new Error('Bad "options.' + key + '" option. The payload already has an "' + claim + '" property.'));
          }
          payload[claim] = options[key];
        }
      });
      const encoding = options.encoding || "utf8";
      if (typeof callback === "function") {
        callback = callback && once(callback);
        jws.createSign({
          header,
          privateKey: secretOrPrivateKey,
          payload,
          encoding
        }).once("error", callback).once("done", function(signature) {
          if (!options.allowInsecureKeySizes && /^(?:RS|PS)/.test(header.alg) && signature.length < 256) {
            return callback(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${header.alg}`));
          }
          callback(null, signature);
        });
      } else {
        let signature = jws.sign({ header, payload, secret: secretOrPrivateKey, encoding });
        if (!options.allowInsecureKeySizes && /^(?:RS|PS)/.test(header.alg) && signature.length < 256) {
          throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${header.alg}`);
        }
        return signature;
      }
    };
  }
});

// node_modules/jsonwebtoken/index.js
var require_jsonwebtoken = __commonJS({
  "node_modules/jsonwebtoken/index.js"(exports, module2) {
    module2.exports = {
      decode: require_decode(),
      verify: require_verify(),
      sign: require_sign(),
      JsonWebTokenError: require_JsonWebTokenError(),
      NotBeforeError: require_NotBeforeError(),
      TokenExpiredError: require_TokenExpiredError()
    };
  }
});

// node_modules/@electron/remote/dist/src/renderer/callbacks-registry.js
var require_callbacks_registry = __commonJS({
  "node_modules/@electron/remote/dist/src/renderer/callbacks-registry.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.CallbacksRegistry = void 0;
    var CallbacksRegistry = class {
      constructor() {
        this.nextId = 0;
        this.callbacks = {};
        this.callbackIds = /* @__PURE__ */ new WeakMap();
        this.locationInfo = /* @__PURE__ */ new WeakMap();
      }
      add(callback) {
        let id = this.callbackIds.get(callback);
        if (id != null)
          return id;
        id = this.nextId += 1;
        this.callbacks[id] = callback;
        this.callbackIds.set(callback, id);
        const regexp = /at (.*)/gi;
        const stackString = new Error().stack;
        if (!stackString)
          return id;
        let filenameAndLine;
        let match;
        while ((match = regexp.exec(stackString)) !== null) {
          const location = match[1];
          if (location.includes("(native)"))
            continue;
          if (location.includes("(<anonymous>)"))
            continue;
          if (location.includes("callbacks-registry.js"))
            continue;
          if (location.includes("remote.js"))
            continue;
          if (location.includes("@electron/remote/dist"))
            continue;
          const ref = /([^/^)]*)\)?$/gi.exec(location);
          if (ref)
            filenameAndLine = ref[1];
          break;
        }
        this.locationInfo.set(callback, filenameAndLine);
        return id;
      }
      get(id) {
        return this.callbacks[id] || function() {
        };
      }
      getLocation(callback) {
        return this.locationInfo.get(callback);
      }
      apply(id, ...args) {
        return this.get(id).apply(global, ...args);
      }
      remove(id) {
        const callback = this.callbacks[id];
        if (callback) {
          this.callbackIds.delete(callback);
          delete this.callbacks[id];
        }
      }
    };
    exports.CallbacksRegistry = CallbacksRegistry;
  }
});

// node_modules/@electron/remote/dist/src/common/type-utils.js
var require_type_utils = __commonJS({
  "node_modules/@electron/remote/dist/src/common/type-utils.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.deserialize = exports.serialize = exports.isSerializableObject = exports.isPromise = void 0;
    var electron_1 = require("electron");
    function isPromise(val) {
      return val && val.then && val.then instanceof Function && val.constructor && val.constructor.reject && val.constructor.reject instanceof Function && val.constructor.resolve && val.constructor.resolve instanceof Function;
    }
    exports.isPromise = isPromise;
    var serializableTypes = [
      Boolean,
      Number,
      String,
      Date,
      Error,
      RegExp,
      ArrayBuffer
    ];
    function isSerializableObject(value) {
      return value === null || ArrayBuffer.isView(value) || serializableTypes.some((type) => value instanceof type);
    }
    exports.isSerializableObject = isSerializableObject;
    var objectMap = function(source, mapper) {
      const sourceEntries = Object.entries(source);
      const targetEntries = sourceEntries.map(([key, val]) => [key, mapper(val)]);
      return Object.fromEntries(targetEntries);
    };
    function serializeNativeImage(image) {
      const representations = [];
      const scaleFactors = image.getScaleFactors();
      if (scaleFactors.length === 1) {
        const scaleFactor = scaleFactors[0];
        const size = image.getSize(scaleFactor);
        const buffer = image.toBitmap({ scaleFactor });
        representations.push({ scaleFactor, size, buffer });
      } else {
        for (const scaleFactor of scaleFactors) {
          const size = image.getSize(scaleFactor);
          const dataURL = image.toDataURL({ scaleFactor });
          representations.push({ scaleFactor, size, dataURL });
        }
      }
      return { __ELECTRON_SERIALIZED_NativeImage__: true, representations };
    }
    function deserializeNativeImage(value) {
      const image = electron_1.nativeImage.createEmpty();
      if (value.representations.length === 1) {
        const { buffer, size, scaleFactor } = value.representations[0];
        const { width, height } = size;
        image.addRepresentation({ buffer, scaleFactor, width, height });
      } else {
        for (const rep of value.representations) {
          const { dataURL, size, scaleFactor } = rep;
          const { width, height } = size;
          image.addRepresentation({ dataURL, scaleFactor, width, height });
        }
      }
      return image;
    }
    function serialize(value) {
      if (value && value.constructor && value.constructor.name === "NativeImage") {
        return serializeNativeImage(value);
      }
      if (Array.isArray(value)) {
        return value.map(serialize);
      } else if (isSerializableObject(value)) {
        return value;
      } else if (value instanceof Object) {
        return objectMap(value, serialize);
      } else {
        return value;
      }
    }
    exports.serialize = serialize;
    function deserialize(value) {
      if (value && value.__ELECTRON_SERIALIZED_NativeImage__) {
        return deserializeNativeImage(value);
      } else if (Array.isArray(value)) {
        return value.map(deserialize);
      } else if (isSerializableObject(value)) {
        return value;
      } else if (value instanceof Object) {
        return objectMap(value, deserialize);
      } else {
        return value;
      }
    }
    exports.deserialize = deserialize;
  }
});

// node_modules/@electron/remote/dist/src/common/get-electron-binding.js
var require_get_electron_binding = __commonJS({
  "node_modules/@electron/remote/dist/src/common/get-electron-binding.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.getElectronBinding = void 0;
    var getElectronBinding = (name3) => {
      if (process._linkedBinding) {
        return process._linkedBinding("electron_common_" + name3);
      } else if (process.electronBinding) {
        return process.electronBinding(name3);
      } else {
        return null;
      }
    };
    exports.getElectronBinding = getElectronBinding;
  }
});

// node_modules/@electron/remote/dist/src/common/module-names.js
var require_module_names = __commonJS({
  "node_modules/@electron/remote/dist/src/common/module-names.js"(exports) {
    "use strict";
    var _a;
    var _b;
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.browserModuleNames = exports.commonModuleNames = void 0;
    var get_electron_binding_1 = require_get_electron_binding();
    exports.commonModuleNames = [
      "clipboard",
      "nativeImage",
      "shell"
    ];
    exports.browserModuleNames = [
      "app",
      "autoUpdater",
      "BaseWindow",
      "BrowserView",
      "BrowserWindow",
      "contentTracing",
      "crashReporter",
      "dialog",
      "globalShortcut",
      "ipcMain",
      "inAppPurchase",
      "Menu",
      "MenuItem",
      "nativeTheme",
      "net",
      "netLog",
      "MessageChannelMain",
      "Notification",
      "powerMonitor",
      "powerSaveBlocker",
      "protocol",
      "pushNotifications",
      "safeStorage",
      "screen",
      "session",
      "ShareMenu",
      "systemPreferences",
      "TopLevelWindow",
      "TouchBar",
      "Tray",
      "utilityProcess",
      "View",
      "webContents",
      "WebContentsView",
      "webFrameMain"
    ].concat(exports.commonModuleNames);
    var features = get_electron_binding_1.getElectronBinding("features");
    if (((_a = features === null || features === void 0 ? void 0 : features.isDesktopCapturerEnabled) === null || _a === void 0 ? void 0 : _a.call(features)) !== false) {
      exports.browserModuleNames.push("desktopCapturer");
    }
    if (((_b = features === null || features === void 0 ? void 0 : features.isViewApiEnabled) === null || _b === void 0 ? void 0 : _b.call(features)) !== false) {
      exports.browserModuleNames.push("ImageView");
    }
  }
});

// node_modules/@electron/remote/dist/src/renderer/remote.js
var require_remote = __commonJS({
  "node_modules/@electron/remote/dist/src/renderer/remote.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.createFunctionWithReturnValue = exports.getGlobal = exports.getCurrentWebContents = exports.getCurrentWindow = exports.getBuiltin = void 0;
    var callbacks_registry_1 = require_callbacks_registry();
    var type_utils_1 = require_type_utils();
    var electron_1 = require("electron");
    var module_names_1 = require_module_names();
    var get_electron_binding_1 = require_get_electron_binding();
    var { Promise: Promise2 } = global;
    var callbacksRegistry = new callbacks_registry_1.CallbacksRegistry();
    var remoteObjectCache = /* @__PURE__ */ new Map();
    var finalizationRegistry = new FinalizationRegistry((id) => {
      const ref = remoteObjectCache.get(id);
      if (ref !== void 0 && ref.deref() === void 0) {
        remoteObjectCache.delete(id);
        electron_1.ipcRenderer.send("REMOTE_BROWSER_DEREFERENCE", contextId, id, 0);
      }
    });
    var electronIds = /* @__PURE__ */ new WeakMap();
    var isReturnValue = /* @__PURE__ */ new WeakSet();
    function getCachedRemoteObject(id) {
      const ref = remoteObjectCache.get(id);
      if (ref !== void 0) {
        const deref = ref.deref();
        if (deref !== void 0)
          return deref;
      }
    }
    function setCachedRemoteObject(id, value) {
      const wr = new WeakRef(value);
      remoteObjectCache.set(id, wr);
      finalizationRegistry.register(value, id);
      return value;
    }
    function getContextId() {
      const v8Util = get_electron_binding_1.getElectronBinding("v8_util");
      if (v8Util) {
        return v8Util.getHiddenValue(global, "contextId");
      } else {
        throw new Error("Electron >=v13.0.0-beta.6 required to support sandboxed renderers");
      }
    }
    var contextId = process.contextId || getContextId();
    process.on("exit", () => {
      const command = "REMOTE_BROWSER_CONTEXT_RELEASE";
      electron_1.ipcRenderer.send(command, contextId);
    });
    var IS_REMOTE_PROXY = Symbol("is-remote-proxy");
    function wrapArgs(args, visited = /* @__PURE__ */ new Set()) {
      const valueToMeta = (value) => {
        if (visited.has(value)) {
          return {
            type: "value",
            value: null
          };
        }
        if (value && value.constructor && value.constructor.name === "NativeImage") {
          return { type: "nativeimage", value: type_utils_1.serialize(value) };
        } else if (Array.isArray(value)) {
          visited.add(value);
          const meta = {
            type: "array",
            value: wrapArgs(value, visited)
          };
          visited.delete(value);
          return meta;
        } else if (value instanceof Buffer) {
          return {
            type: "buffer",
            value
          };
        } else if (type_utils_1.isSerializableObject(value)) {
          return {
            type: "value",
            value
          };
        } else if (typeof value === "object") {
          if (type_utils_1.isPromise(value)) {
            return {
              type: "promise",
              then: valueToMeta(function(onFulfilled, onRejected) {
                value.then(onFulfilled, onRejected);
              })
            };
          } else if (electronIds.has(value)) {
            return {
              type: "remote-object",
              id: electronIds.get(value)
            };
          }
          const meta = {
            type: "object",
            name: value.constructor ? value.constructor.name : "",
            members: []
          };
          visited.add(value);
          for (const prop in value) {
            meta.members.push({
              name: prop,
              value: valueToMeta(value[prop])
            });
          }
          visited.delete(value);
          return meta;
        } else if (typeof value === "function" && isReturnValue.has(value)) {
          return {
            type: "function-with-return-value",
            value: valueToMeta(value())
          };
        } else if (typeof value === "function") {
          return {
            type: "function",
            id: callbacksRegistry.add(value),
            location: callbacksRegistry.getLocation(value),
            length: value.length
          };
        } else {
          return {
            type: "value",
            value
          };
        }
      };
      return args.map(valueToMeta);
    }
    function setObjectMembers(ref, object, metaId, members) {
      if (!Array.isArray(members))
        return;
      for (const member of members) {
        if (Object.prototype.hasOwnProperty.call(object, member.name))
          continue;
        const descriptor = { enumerable: member.enumerable };
        if (member.type === "method") {
          const remoteMemberFunction = function(...args) {
            let command;
            if (this && this.constructor === remoteMemberFunction) {
              command = "REMOTE_BROWSER_MEMBER_CONSTRUCTOR";
            } else {
              command = "REMOTE_BROWSER_MEMBER_CALL";
            }
            const ret = electron_1.ipcRenderer.sendSync(command, contextId, metaId, member.name, wrapArgs(args));
            return metaToValue(ret);
          };
          let descriptorFunction = proxyFunctionProperties(remoteMemberFunction, metaId, member.name);
          descriptor.get = () => {
            descriptorFunction.ref = ref;
            return descriptorFunction;
          };
          descriptor.set = (value) => {
            descriptorFunction = value;
            return value;
          };
          descriptor.configurable = true;
        } else if (member.type === "get") {
          descriptor.get = () => {
            const command = "REMOTE_BROWSER_MEMBER_GET";
            const meta = electron_1.ipcRenderer.sendSync(command, contextId, metaId, member.name);
            return metaToValue(meta);
          };
          if (member.writable) {
            descriptor.set = (value) => {
              const args = wrapArgs([value]);
              const command = "REMOTE_BROWSER_MEMBER_SET";
              const meta = electron_1.ipcRenderer.sendSync(command, contextId, metaId, member.name, args);
              if (meta != null)
                metaToValue(meta);
              return value;
            };
          }
        }
        Object.defineProperty(object, member.name, descriptor);
      }
    }
    function setObjectPrototype(ref, object, metaId, descriptor) {
      if (descriptor === null)
        return;
      const proto = {};
      setObjectMembers(ref, proto, metaId, descriptor.members);
      setObjectPrototype(ref, proto, metaId, descriptor.proto);
      Object.setPrototypeOf(object, proto);
    }
    function proxyFunctionProperties(remoteMemberFunction, metaId, name3) {
      let loaded = false;
      const loadRemoteProperties = () => {
        if (loaded)
          return;
        loaded = true;
        const command = "REMOTE_BROWSER_MEMBER_GET";
        const meta = electron_1.ipcRenderer.sendSync(command, contextId, metaId, name3);
        setObjectMembers(remoteMemberFunction, remoteMemberFunction, meta.id, meta.members);
      };
      return new Proxy(remoteMemberFunction, {
        set: (target, property, value) => {
          if (property !== "ref")
            loadRemoteProperties();
          target[property] = value;
          return true;
        },
        get: (target, property) => {
          if (property === IS_REMOTE_PROXY)
            return true;
          if (!Object.prototype.hasOwnProperty.call(target, property))
            loadRemoteProperties();
          const value = target[property];
          if (property === "toString" && typeof value === "function") {
            return value.bind(target);
          }
          return value;
        },
        ownKeys: (target) => {
          loadRemoteProperties();
          return Object.getOwnPropertyNames(target);
        },
        getOwnPropertyDescriptor: (target, property) => {
          const descriptor = Object.getOwnPropertyDescriptor(target, property);
          if (descriptor)
            return descriptor;
          loadRemoteProperties();
          return Object.getOwnPropertyDescriptor(target, property);
        }
      });
    }
    function metaToValue(meta) {
      if (!meta)
        return {};
      if (meta.type === "value") {
        return meta.value;
      } else if (meta.type === "array") {
        return meta.members.map((member) => metaToValue(member));
      } else if (meta.type === "nativeimage") {
        return type_utils_1.deserialize(meta.value);
      } else if (meta.type === "buffer") {
        return Buffer.from(meta.value.buffer, meta.value.byteOffset, meta.value.byteLength);
      } else if (meta.type === "promise") {
        return Promise2.resolve({ then: metaToValue(meta.then) });
      } else if (meta.type === "error") {
        return metaToError(meta);
      } else if (meta.type === "exception") {
        if (meta.value.type === "error") {
          throw metaToError(meta.value);
        } else {
          throw new Error(`Unexpected value type in exception: ${meta.value.type}`);
        }
      } else {
        let ret;
        if ("id" in meta) {
          const cached = getCachedRemoteObject(meta.id);
          if (cached !== void 0) {
            return cached;
          }
        }
        if (meta.type === "function") {
          const remoteFunction = function(...args) {
            let command;
            if (this && this.constructor === remoteFunction) {
              command = "REMOTE_BROWSER_CONSTRUCTOR";
            } else {
              command = "REMOTE_BROWSER_FUNCTION_CALL";
            }
            const obj = electron_1.ipcRenderer.sendSync(command, contextId, meta.id, wrapArgs(args));
            return metaToValue(obj);
          };
          ret = remoteFunction;
        } else {
          ret = {};
        }
        setObjectMembers(ret, ret, meta.id, meta.members);
        setObjectPrototype(ret, ret, meta.id, meta.proto);
        if (ret.constructor && ret.constructor[IS_REMOTE_PROXY]) {
          Object.defineProperty(ret.constructor, "name", { value: meta.name });
        }
        electronIds.set(ret, meta.id);
        setCachedRemoteObject(meta.id, ret);
        return ret;
      }
    }
    function metaToError(meta) {
      const obj = meta.value;
      for (const { name: name3, value } of meta.members) {
        obj[name3] = metaToValue(value);
      }
      return obj;
    }
    function hasSenderId(input) {
      return typeof input.senderId === "number";
    }
    function handleMessage(channel, handler) {
      electron_1.ipcRenderer.on(channel, (event, passedContextId, id, ...args) => {
        if (hasSenderId(event)) {
          if (event.senderId !== 0 && event.senderId !== void 0) {
            console.error(`Message ${channel} sent by unexpected WebContents (${event.senderId})`);
            return;
          }
        }
        if (passedContextId === contextId) {
          handler(id, ...args);
        } else {
          electron_1.ipcRenderer.send("REMOTE_BROWSER_WRONG_CONTEXT_ERROR", contextId, passedContextId, id);
        }
      });
    }
    var enableStacks = process.argv.includes("--enable-api-filtering-logging");
    function getCurrentStack() {
      const target = { stack: void 0 };
      if (enableStacks) {
        Error.captureStackTrace(target, getCurrentStack);
      }
      return target.stack;
    }
    handleMessage("REMOTE_RENDERER_CALLBACK", (id, args) => {
      callbacksRegistry.apply(id, metaToValue(args));
    });
    handleMessage("REMOTE_RENDERER_RELEASE_CALLBACK", (id) => {
      callbacksRegistry.remove(id);
    });
    exports.require = (module3) => {
      const command = "REMOTE_BROWSER_REQUIRE";
      const meta = electron_1.ipcRenderer.sendSync(command, contextId, module3, getCurrentStack());
      return metaToValue(meta);
    };
    function getBuiltin(module3) {
      const command = "REMOTE_BROWSER_GET_BUILTIN";
      const meta = electron_1.ipcRenderer.sendSync(command, contextId, module3, getCurrentStack());
      return metaToValue(meta);
    }
    exports.getBuiltin = getBuiltin;
    function getCurrentWindow() {
      const command = "REMOTE_BROWSER_GET_CURRENT_WINDOW";
      const meta = electron_1.ipcRenderer.sendSync(command, contextId, getCurrentStack());
      return metaToValue(meta);
    }
    exports.getCurrentWindow = getCurrentWindow;
    function getCurrentWebContents() {
      const command = "REMOTE_BROWSER_GET_CURRENT_WEB_CONTENTS";
      const meta = electron_1.ipcRenderer.sendSync(command, contextId, getCurrentStack());
      return metaToValue(meta);
    }
    exports.getCurrentWebContents = getCurrentWebContents;
    function getGlobal(name3) {
      const command = "REMOTE_BROWSER_GET_GLOBAL";
      const meta = electron_1.ipcRenderer.sendSync(command, contextId, name3, getCurrentStack());
      return metaToValue(meta);
    }
    exports.getGlobal = getGlobal;
    Object.defineProperty(exports, "process", {
      enumerable: true,
      get: () => exports.getGlobal("process")
    });
    function createFunctionWithReturnValue(returnValue) {
      const func = () => returnValue;
      isReturnValue.add(func);
      return func;
    }
    exports.createFunctionWithReturnValue = createFunctionWithReturnValue;
    var addBuiltinProperty = (name3) => {
      Object.defineProperty(exports, name3, {
        enumerable: true,
        get: () => exports.getBuiltin(name3)
      });
    };
    module_names_1.browserModuleNames.forEach(addBuiltinProperty);
  }
});

// node_modules/@electron/remote/dist/src/renderer/index.js
var require_renderer = __commonJS({
  "node_modules/@electron/remote/dist/src/renderer/index.js"(exports) {
    "use strict";
    var __createBinding = exports && exports.__createBinding || (Object.create ? function(o, m, k, k2) {
      if (k2 === void 0) k2 = k;
      Object.defineProperty(o, k2, { enumerable: true, get: function() {
        return m[k];
      } });
    } : function(o, m, k, k2) {
      if (k2 === void 0) k2 = k;
      o[k2] = m[k];
    });
    var __exportStar = exports && exports.__exportStar || function(m, exports2) {
      for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports2, p)) __createBinding(exports2, m, p);
    };
    Object.defineProperty(exports, "__esModule", { value: true });
    if (process.type === "browser")
      throw new Error(`"@electron/remote" cannot be required in the browser process. Instead require("@electron/remote/main").`);
    __exportStar(require_remote(), exports);
  }
});

// node_modules/@electron/remote/renderer/index.js
var require_renderer2 = __commonJS({
  "node_modules/@electron/remote/renderer/index.js"(exports, module2) {
    module2.exports = require_renderer();
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => TaskSyncerPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian7 = require("obsidian");
var fs2 = __toESM(require("fs"));
var dotenv = __toESM(require_main());
var path2 = __toESM(require("path"));

// src/setting.ts
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  selectedTaskListId: "",
  taskLists: [],
  clientId: "",
  clientSecret: "",
  redirectUrl: "http://localhost:5000"
};
var MyTodoSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
    this.settings = plugin.settings;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Microsoft To\u2011Do Settings" });
    new import_obsidian.Setting(containerEl).setName("Client Details").setDesc(
      "Enter the client ID and client secret of your Azure AD app."
    ).addText(
      (text) => text.setPlaceholder("Client ID").setValue(this.plugin.settings.clientId).onChange(async (value) => {
        this.plugin.settings.clientId = value;
        await this.plugin.saveSettings();
      })
    ).addText(
      (text) => text.setPlaceholder("Client Secret").setValue(this.plugin.settings.clientSecret).onChange(async (value) => {
        this.plugin.settings.clientSecret = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Redirect URL").setDesc("Enter the URL to redirect to after authentication.").addText(
      (text) => text.setPlaceholder("http://localhost:5000").setValue(this.plugin.settings.redirectUrl).onChange(async (value) => {
        this.plugin.settings.redirectUrl = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Get Task Lists").setDesc("Click to get the list of available task lists.").addButton((button) => {
      button.setButtonText("Get Task Lists").onClick(async () => {
        await this.plugin.loadAvailableTaskLists();
        this.display();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Task List").setDesc(
      "Select the Microsoft To\u2011Do list to store your Obsidian tasks."
    ).addDropdown((drop) => {
      drop.addOption("", "Select a task list");
      if (this.settings.taskLists.length > 0) {
        this.settings.taskLists.forEach((list) => {
          drop.addOption(list.id, list.title);
        });
      } else {
        drop.addOption("none", "No task lists available");
      }
      drop.setValue(this.settings.selectedTaskListId);
      drop.onChange(async (value) => {
        this.settings.selectedTaskListId = value;
        await this.plugin.saveSettings();
      });
    });
  }
};

// src/right-sidebar-view.ts
var import_obsidian3 = require("obsidian");

// src/utils.ts
var import_obsidian2 = require("obsidian");
function notify(message, type = "info") {
  let prefix = "";
  switch (type) {
    case "error":
      prefix = "\u274C ";
      break;
    case "warning":
      prefix = "\u26A0\uFE0F ";
      break;
    case "success":
      prefix = "\u2705 ";
      break;
  }
  new import_obsidian2.Notice(`${prefix}${message}`);
}

// src/right-sidebar-view.ts
var VIEW_TYPE_TODO_SIDEBAR = "tasks-syncer-sidebar";
var TaskSidebarView = class extends import_obsidian3.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.plugin = plugin;
  }
  getViewType() {
    return VIEW_TYPE_TODO_SIDEBAR;
  }
  getDisplayText() {
    return "To-Do Tasks";
  }
  getIcon() {
    return "list-todo";
  }
  async onOpen() {
    this.injectStyles();
    this.render(null);
    this.plugin.getTasksFromSelectedList().then((tasks) => this.render(tasks)).catch((error) => {
      console.error("Error loading tasks in sidebar:", error);
      notify("Error loading tasks in sidebar", error);
    });
  }
  /**
   * Setup button for refreshing sidebar tasks.
   * @param Container for button
   */
  async setupRefreshButton(container) {
    const button = container.createEl("button", { text: "Refresh Tasks" });
    button.onclick = async () => {
      this.render(null);
      try {
        const tasks = await this.plugin.refreshTaskCache();
        this.render(tasks);
      } catch (error) {
        console.log("Error refreshing tasks:", error);
        notify("Failed to refresh tasks", "error");
      }
    };
  }
  async render(tasks) {
    const container = this.containerEl.children[1];
    container.empty();
    this.setupRefreshButton(container);
    container.createEl("h3", { text: "Tasks" });
    if (tasks === null) {
      const spinnerWrapper = container.createDiv({
        cls: "spinner-wrapper"
      });
      spinnerWrapper.createDiv({ cls: "loading-spinner" });
      spinnerWrapper.createEl("p", { text: "Loading tasks..." });
      return;
    }
    if (tasks.size === 0) {
      container.createEl("p", {
        text: "No tasks found"
      });
      return;
    }
    Array.from(tasks.values()).sort((a, b) => {
      if (a.status === "completed" && b.status !== "completed")
        return 1;
      if (a.status !== "completed" && b.status === "completed")
        return -1;
      return 0;
    }).forEach((task) => {
      const line = container.createEl("div", {
        cls: "task-line"
      });
      const checkbox = line.createEl("input", {
        type: "checkbox"
      });
      checkbox.checked = task.status === "completed";
      checkbox.disabled = true;
      line.createEl("span", {
        text: task.title
      });
    });
  }
  async onClose() {
  }
  injectStyles() {
    const style = document.createElement("style");
    style.textContent = `
	.spinner-wrapper {
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		padding: 1em;
	}

	.loading-spinner {
		width: 24px;
		height: 24px;
		border: 3px solid var(--background-modifier-border);
		border-top: 3px solid var(--text-accent);
		border-radius: 50%;
		animation: spin 1s linear infinite;
		margin-bottom: 0.5em;
	}

	@keyframes spin {
		0% { transform: rotate(0deg); }
		100% { transform: rotate(360deg); }
	}
	`;
    document.head.appendChild(style);
  }
};

// src/api.ts
var import_obsidian4 = require("obsidian");
async function fetchTasks(settings, accessToken) {
  const tasks = /* @__PURE__ */ new Map();
  const response = await (0, import_obsidian4.requestUrl)({
    url: `https://graph.microsoft.com/v1.0/me/todo/lists/${settings.selectedTaskListId}/tasks`,
    method: "GET",
    headers: { Authorization: `Bearer ${accessToken}` }
  });
  if (response.status !== 200) {
    throw new Error("Failed to fetch tasks: " + response.text);
  }
  const data = response.json;
  if (data.value && Array.isArray(data.value)) {
    for (const task of data.value) {
      const title = task.title.trim();
      tasks.set(title, { title, status: task.status, id: task.id });
    }
  }
  return tasks;
}
async function createTask(settings, accessToken, taskTitle, status = "notStarted") {
  const response = await (0, import_obsidian4.requestUrl)({
    url: `https://graph.microsoft.com/v1.0/me/todo/lists/${settings.selectedTaskListId}/tasks`,
    method: "POST",
    headers: {
      Authorization: `Bearer ${accessToken}`,
      "Content-Type": "application/json"
    },
    body: JSON.stringify({
      title: taskTitle,
      status
    })
  });
  if (response.status !== 201) {
    throw new Error(`Failed to create task: ${response.text}`);
  }
}
async function updateTask(settings, accessToken, taskId, complete) {
  const newStatus = complete ? "completed" : "notStarted";
  const response = await (0, import_obsidian4.requestUrl)({
    url: `https://graph.microsoft.com/v1.0/me/todo/lists/${settings.selectedTaskListId}/tasks/${taskId}`,
    method: "PATCH",
    headers: {
      Authorization: `Bearer ${accessToken}`,
      "Content-Type": "application/json"
    },
    body: JSON.stringify({ status: newStatus })
  });
  if (response.status !== 200) {
    throw new Error(`Failed to update task: ${response.text}`);
  }
}
async function fetchTaskLists(accessToken) {
  const response = await (0, import_obsidian4.requestUrl)({
    url: "https://graph.microsoft.com/v1.0/me/todo/lists",
    method: "GET",
    headers: { Authorization: `Bearer ${accessToken}` }
  });
  if (response.status !== 200) {
    throw new Error("Failed to fetch task lists: " + response.text);
  }
  const data = response.json;
  const taskLists = new Array();
  console.log("Task lists data:", data);
  if (data.value && Array.isArray(data.value)) {
    for (const list of data.value) {
      taskLists.push({ title: list.displayName, id: list.id });
    }
  }
  return taskLists;
}
async function deleteTask(settings, accessToken, taskId) {
  const response = await (0, import_obsidian4.requestUrl)({
    url: `https://graph.microsoft.com/v1.0/me/todo/lists/${settings.selectedTaskListId}/tasks/${taskId}`,
    method: "DELETE",
    headers: {
      Authorization: `Bearer ${accessToken}`,
      "Content-Type": "application/json"
    }
  });
  if (response.status !== 204) {
    throw new Error(`Failed to delete task: ${response.text}`);
  }
}

// node_modules/@azure/msal-node/dist/cache/serializer/Serializer.mjs
var Serializer = class {
  /**
   * serialize the JSON blob
   * @param data - JSON blob cache
   */
  static serializeJSONBlob(data) {
    return JSON.stringify(data);
  }
  /**
   * Serialize Accounts
   * @param accCache - cache of accounts
   */
  static serializeAccounts(accCache) {
    const accounts = {};
    Object.keys(accCache).map(function(key) {
      var _a;
      const accountEntity = accCache[key];
      accounts[key] = {
        home_account_id: accountEntity.homeAccountId,
        environment: accountEntity.environment,
        realm: accountEntity.realm,
        local_account_id: accountEntity.localAccountId,
        username: accountEntity.username,
        authority_type: accountEntity.authorityType,
        name: accountEntity.name,
        client_info: accountEntity.clientInfo,
        last_modification_time: accountEntity.lastModificationTime,
        last_modification_app: accountEntity.lastModificationApp,
        tenantProfiles: (_a = accountEntity.tenantProfiles) == null ? void 0 : _a.map((tenantProfile) => {
          return JSON.stringify(tenantProfile);
        })
      };
    });
    return accounts;
  }
  /**
   * Serialize IdTokens
   * @param idTCache - cache of ID tokens
   */
  static serializeIdTokens(idTCache) {
    const idTokens = {};
    Object.keys(idTCache).map(function(key) {
      const idTEntity = idTCache[key];
      idTokens[key] = {
        home_account_id: idTEntity.homeAccountId,
        environment: idTEntity.environment,
        credential_type: idTEntity.credentialType,
        client_id: idTEntity.clientId,
        secret: idTEntity.secret,
        realm: idTEntity.realm
      };
    });
    return idTokens;
  }
  /**
   * Serializes AccessTokens
   * @param atCache - cache of access tokens
   */
  static serializeAccessTokens(atCache) {
    const accessTokens = {};
    Object.keys(atCache).map(function(key) {
      const atEntity = atCache[key];
      accessTokens[key] = {
        home_account_id: atEntity.homeAccountId,
        environment: atEntity.environment,
        credential_type: atEntity.credentialType,
        client_id: atEntity.clientId,
        secret: atEntity.secret,
        realm: atEntity.realm,
        target: atEntity.target,
        cached_at: atEntity.cachedAt,
        expires_on: atEntity.expiresOn,
        extended_expires_on: atEntity.extendedExpiresOn,
        refresh_on: atEntity.refreshOn,
        key_id: atEntity.keyId,
        token_type: atEntity.tokenType,
        requestedClaims: atEntity.requestedClaims,
        requestedClaimsHash: atEntity.requestedClaimsHash,
        userAssertionHash: atEntity.userAssertionHash
      };
    });
    return accessTokens;
  }
  /**
   * Serialize refreshTokens
   * @param rtCache - cache of refresh tokens
   */
  static serializeRefreshTokens(rtCache) {
    const refreshTokens = {};
    Object.keys(rtCache).map(function(key) {
      const rtEntity = rtCache[key];
      refreshTokens[key] = {
        home_account_id: rtEntity.homeAccountId,
        environment: rtEntity.environment,
        credential_type: rtEntity.credentialType,
        client_id: rtEntity.clientId,
        secret: rtEntity.secret,
        family_id: rtEntity.familyId,
        target: rtEntity.target,
        realm: rtEntity.realm
      };
    });
    return refreshTokens;
  }
  /**
   * Serialize amdtCache
   * @param amdtCache - cache of app metadata
   */
  static serializeAppMetadata(amdtCache) {
    const appMetadata = {};
    Object.keys(amdtCache).map(function(key) {
      const amdtEntity = amdtCache[key];
      appMetadata[key] = {
        client_id: amdtEntity.clientId,
        environment: amdtEntity.environment,
        family_id: amdtEntity.familyId
      };
    });
    return appMetadata;
  }
  /**
   * Serialize the cache
   * @param inMemCache - itemised cache read from the JSON
   */
  static serializeAllCache(inMemCache) {
    return {
      Account: this.serializeAccounts(inMemCache.accounts),
      IdToken: this.serializeIdTokens(inMemCache.idTokens),
      AccessToken: this.serializeAccessTokens(inMemCache.accessTokens),
      RefreshToken: this.serializeRefreshTokens(inMemCache.refreshTokens),
      AppMetadata: this.serializeAppMetadata(inMemCache.appMetadata)
    };
  }
};

// node_modules/@azure/msal-common/dist/utils/Constants.mjs
var Constants = {
  LIBRARY_NAME: "MSAL.JS",
  SKU: "msal.js.common",
  // Prefix for all library cache entries
  CACHE_PREFIX: "msal",
  // default authority
  DEFAULT_AUTHORITY: "https://login.microsoftonline.com/common/",
  DEFAULT_AUTHORITY_HOST: "login.microsoftonline.com",
  DEFAULT_COMMON_TENANT: "common",
  // ADFS String
  ADFS: "adfs",
  DSTS: "dstsv2",
  // Default AAD Instance Discovery Endpoint
  AAD_INSTANCE_DISCOVERY_ENDPT: "https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",
  // CIAM URL
  CIAM_AUTH_URL: ".ciamlogin.com",
  AAD_TENANT_DOMAIN_SUFFIX: ".onmicrosoft.com",
  // Resource delimiter - used for certain cache entries
  RESOURCE_DELIM: "|",
  // Placeholder for non-existent account ids/objects
  NO_ACCOUNT: "NO_ACCOUNT",
  // Claims
  CLAIMS: "claims",
  // Consumer UTID
  CONSUMER_UTID: "9188040d-6c67-4c5b-b112-36a304b66dad",
  // Default scopes
  OPENID_SCOPE: "openid",
  PROFILE_SCOPE: "profile",
  OFFLINE_ACCESS_SCOPE: "offline_access",
  EMAIL_SCOPE: "email",
  CODE_GRANT_TYPE: "authorization_code",
  RT_GRANT_TYPE: "refresh_token",
  S256_CODE_CHALLENGE_METHOD: "S256",
  URL_FORM_CONTENT_TYPE: "application/x-www-form-urlencoded;charset=utf-8",
  AUTHORIZATION_PENDING: "authorization_pending",
  NOT_DEFINED: "not_defined",
  EMPTY_STRING: "",
  NOT_APPLICABLE: "N/A",
  NOT_AVAILABLE: "Not Available",
  FORWARD_SLASH: "/",
  IMDS_ENDPOINT: "http://169.254.169.254/metadata/instance/compute/location",
  IMDS_VERSION: "2020-06-01",
  IMDS_TIMEOUT: 2e3,
  AZURE_REGION_AUTO_DISCOVER_FLAG: "TryAutoDetect",
  REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX: "login.microsoft.com",
  KNOWN_PUBLIC_CLOUDS: [
    "login.microsoftonline.com",
    "login.windows.net",
    "login.microsoft.com",
    "sts.windows.net"
  ],
  SHR_NONCE_VALIDITY: 240,
  INVALID_INSTANCE: "invalid_instance"
};
var HttpStatus = {
  SUCCESS: 200,
  SUCCESS_RANGE_START: 200,
  SUCCESS_RANGE_END: 299,
  REDIRECT: 302,
  CLIENT_ERROR: 400,
  CLIENT_ERROR_RANGE_START: 400,
  BAD_REQUEST: 400,
  UNAUTHORIZED: 401,
  NOT_FOUND: 404,
  REQUEST_TIMEOUT: 408,
  TOO_MANY_REQUESTS: 429,
  CLIENT_ERROR_RANGE_END: 499,
  SERVER_ERROR: 500,
  SERVER_ERROR_RANGE_START: 500,
  SERVICE_UNAVAILABLE: 503,
  GATEWAY_TIMEOUT: 504,
  SERVER_ERROR_RANGE_END: 599,
  MULTI_SIDED_ERROR: 600
};
var OIDC_DEFAULT_SCOPES = [
  Constants.OPENID_SCOPE,
  Constants.PROFILE_SCOPE,
  Constants.OFFLINE_ACCESS_SCOPE
];
var OIDC_SCOPES = [...OIDC_DEFAULT_SCOPES, Constants.EMAIL_SCOPE];
var HeaderNames = {
  CONTENT_TYPE: "Content-Type",
  CONTENT_LENGTH: "Content-Length",
  RETRY_AFTER: "Retry-After",
  CCS_HEADER: "X-AnchorMailbox",
  WWWAuthenticate: "WWW-Authenticate",
  AuthenticationInfo: "Authentication-Info",
  X_MS_REQUEST_ID: "x-ms-request-id",
  X_MS_HTTP_VERSION: "x-ms-httpver"
};
var AADAuthorityConstants = {
  COMMON: "common",
  ORGANIZATIONS: "organizations",
  CONSUMERS: "consumers"
};
var ClaimsRequestKeys = {
  ACCESS_TOKEN: "access_token",
  XMS_CC: "xms_cc"
};
var PromptValue = {
  LOGIN: "login",
  SELECT_ACCOUNT: "select_account",
  CONSENT: "consent",
  NONE: "none",
  CREATE: "create",
  NO_SESSION: "no_session"
};
var CodeChallengeMethodValues = {
  PLAIN: "plain",
  S256: "S256"
};
var OAuthResponseType = {
  CODE: "code",
  IDTOKEN_TOKEN: "id_token token",
  IDTOKEN_TOKEN_REFRESHTOKEN: "id_token token refresh_token"
};
var ResponseMode = {
  QUERY: "query",
  FRAGMENT: "fragment",
  FORM_POST: "form_post"
};
var GrantType = {
  IMPLICIT_GRANT: "implicit",
  AUTHORIZATION_CODE_GRANT: "authorization_code",
  CLIENT_CREDENTIALS_GRANT: "client_credentials",
  RESOURCE_OWNER_PASSWORD_GRANT: "password",
  REFRESH_TOKEN_GRANT: "refresh_token",
  DEVICE_CODE_GRANT: "device_code",
  JWT_BEARER: "urn:ietf:params:oauth:grant-type:jwt-bearer"
};
var CacheAccountType = {
  MSSTS_ACCOUNT_TYPE: "MSSTS",
  ADFS_ACCOUNT_TYPE: "ADFS",
  MSAV1_ACCOUNT_TYPE: "MSA",
  GENERIC_ACCOUNT_TYPE: "Generic"
  // NTLM, Kerberos, FBA, Basic etc
};
var Separators = {
  CACHE_KEY_SEPARATOR: "-",
  CLIENT_INFO_SEPARATOR: "."
};
var CredentialType = {
  ID_TOKEN: "IdToken",
  ACCESS_TOKEN: "AccessToken",
  ACCESS_TOKEN_WITH_AUTH_SCHEME: "AccessToken_With_AuthScheme",
  REFRESH_TOKEN: "RefreshToken"
};
var APP_METADATA = "appmetadata";
var CLIENT_INFO = "client_info";
var THE_FAMILY_ID = "1";
var AUTHORITY_METADATA_CONSTANTS = {
  CACHE_KEY: "authority-metadata",
  REFRESH_TIME_SECONDS: 3600 * 24
  // 24 Hours
};
var AuthorityMetadataSource = {
  CONFIG: "config",
  CACHE: "cache",
  NETWORK: "network",
  HARDCODED_VALUES: "hardcoded_values"
};
var SERVER_TELEM_CONSTANTS = {
  SCHEMA_VERSION: 5,
  MAX_CUR_HEADER_BYTES: 80,
  MAX_LAST_HEADER_BYTES: 330,
  MAX_CACHED_ERRORS: 50,
  CACHE_KEY: "server-telemetry",
  CATEGORY_SEPARATOR: "|",
  VALUE_SEPARATOR: ",",
  OVERFLOW_TRUE: "1",
  OVERFLOW_FALSE: "0",
  UNKNOWN_ERROR: "unknown_error"
};
var AuthenticationScheme = {
  BEARER: "Bearer",
  POP: "pop",
  SSH: "ssh-cert"
};
var ThrottlingConstants = {
  // Default time to throttle RequestThumbprint in seconds
  DEFAULT_THROTTLE_TIME_SECONDS: 60,
  // Default maximum time to throttle in seconds, overrides what the server sends back
  DEFAULT_MAX_THROTTLE_TIME_SECONDS: 3600,
  // Prefix for storing throttling entries
  THROTTLING_PREFIX: "throttling",
  // Value assigned to the x-ms-lib-capability header to indicate to the server the library supports throttling
  X_MS_LIB_CAPABILITY_VALUE: "retry-after, h429"
};
var Errors = {
  INVALID_GRANT_ERROR: "invalid_grant",
  CLIENT_MISMATCH_ERROR: "client_mismatch"
};
var PasswordGrantConstants = {
  username: "username",
  password: "password"
};
var ResponseCodes = {
  httpSuccess: 200,
  httpBadRequest: 400
};
var RegionDiscoverySources = {
  FAILED_AUTO_DETECTION: "1",
  INTERNAL_CACHE: "2",
  ENVIRONMENT_VARIABLE: "3",
  IMDS: "4"
};
var RegionDiscoveryOutcomes = {
  CONFIGURED_MATCHES_DETECTED: "1",
  CONFIGURED_NO_AUTO_DETECTION: "2",
  CONFIGURED_NOT_DETECTED: "3",
  AUTO_DETECTION_REQUESTED_SUCCESSFUL: "4",
  AUTO_DETECTION_REQUESTED_FAILED: "5"
};
var CacheOutcome = {
  // When a token is found in the cache or the cache is not supposed to be hit when making the request
  NOT_APPLICABLE: "0",
  // When the token request goes to the identity provider because force_refresh was set to true. Also occurs if claims were requested
  FORCE_REFRESH_OR_CLAIMS: "1",
  // When the token request goes to the identity provider because no cached access token exists
  NO_CACHED_ACCESS_TOKEN: "2",
  // When the token request goes to the identity provider because cached access token expired
  CACHED_ACCESS_TOKEN_EXPIRED: "3",
  // When the token request goes to the identity provider because refresh_in was used and the existing token needs to be refreshed
  PROACTIVELY_REFRESHED: "4"
};
var DEFAULT_TOKEN_RENEWAL_OFFSET_SEC = 300;

// node_modules/@azure/msal-common/dist/error/AuthErrorCodes.mjs
var unexpectedError = "unexpected_error";
var postRequestFailed = "post_request_failed";

// node_modules/@azure/msal-common/dist/error/AuthError.mjs
var AuthErrorMessages = {
  [unexpectedError]: "Unexpected error in authentication.",
  [postRequestFailed]: "Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."
};
var AuthErrorMessage = {
  unexpectedError: {
    code: unexpectedError,
    desc: AuthErrorMessages[unexpectedError]
  },
  postRequestFailed: {
    code: postRequestFailed,
    desc: AuthErrorMessages[postRequestFailed]
  }
};
var AuthError = class _AuthError extends Error {
  constructor(errorCode, errorMessage, suberror) {
    const errorString = errorMessage ? `${errorCode}: ${errorMessage}` : errorCode;
    super(errorString);
    Object.setPrototypeOf(this, _AuthError.prototype);
    this.errorCode = errorCode || Constants.EMPTY_STRING;
    this.errorMessage = errorMessage || Constants.EMPTY_STRING;
    this.subError = suberror || Constants.EMPTY_STRING;
    this.name = "AuthError";
  }
  setCorrelationId(correlationId) {
    this.correlationId = correlationId;
  }
};

// node_modules/@azure/msal-common/dist/error/ClientAuthErrorCodes.mjs
var ClientAuthErrorCodes_exports = {};
__export(ClientAuthErrorCodes_exports, {
  authTimeNotFound: () => authTimeNotFound,
  authorizationCodeMissingFromServerResponse: () => authorizationCodeMissingFromServerResponse,
  bindingKeyNotRemoved: () => bindingKeyNotRemoved,
  cannotAppendScopeSet: () => cannotAppendScopeSet,
  cannotRemoveEmptyScope: () => cannotRemoveEmptyScope,
  clientInfoDecodingError: () => clientInfoDecodingError,
  clientInfoEmptyError: () => clientInfoEmptyError,
  deviceCodeExpired: () => deviceCodeExpired,
  deviceCodePollingCancelled: () => deviceCodePollingCancelled,
  deviceCodeUnknownError: () => deviceCodeUnknownError,
  emptyInputScopeSet: () => emptyInputScopeSet,
  endSessionEndpointNotSupported: () => endSessionEndpointNotSupported,
  endpointResolutionError: () => endpointResolutionError,
  hashNotDeserialized: () => hashNotDeserialized,
  invalidAssertion: () => invalidAssertion,
  invalidCacheEnvironment: () => invalidCacheEnvironment,
  invalidCacheRecord: () => invalidCacheRecord,
  invalidClientCredential: () => invalidClientCredential,
  invalidState: () => invalidState,
  keyIdMissing: () => keyIdMissing,
  maxAgeTranspired: () => maxAgeTranspired,
  methodNotImplemented: () => methodNotImplemented,
  missingTenantIdError: () => missingTenantIdError,
  multipleMatchingAccounts: () => multipleMatchingAccounts,
  multipleMatchingAppMetadata: () => multipleMatchingAppMetadata,
  multipleMatchingTokens: () => multipleMatchingTokens,
  nestedAppAuthBridgeDisabled: () => nestedAppAuthBridgeDisabled,
  networkError: () => networkError,
  noAccountFound: () => noAccountFound,
  noAccountInSilentRequest: () => noAccountInSilentRequest,
  noCryptoObject: () => noCryptoObject,
  noNetworkConnectivity: () => noNetworkConnectivity,
  nonceMismatch: () => nonceMismatch,
  nullOrEmptyToken: () => nullOrEmptyToken,
  openIdConfigError: () => openIdConfigError,
  requestCannotBeMade: () => requestCannotBeMade,
  stateMismatch: () => stateMismatch,
  stateNotFound: () => stateNotFound,
  tokenClaimsCnfRequiredForSignedJwt: () => tokenClaimsCnfRequiredForSignedJwt,
  tokenParsingError: () => tokenParsingError,
  tokenRefreshRequired: () => tokenRefreshRequired,
  unexpectedCredentialType: () => unexpectedCredentialType,
  userCanceled: () => userCanceled,
  userTimeoutReached: () => userTimeoutReached
});
var clientInfoDecodingError = "client_info_decoding_error";
var clientInfoEmptyError = "client_info_empty_error";
var tokenParsingError = "token_parsing_error";
var nullOrEmptyToken = "null_or_empty_token";
var endpointResolutionError = "endpoints_resolution_error";
var networkError = "network_error";
var openIdConfigError = "openid_config_error";
var hashNotDeserialized = "hash_not_deserialized";
var invalidState = "invalid_state";
var stateMismatch = "state_mismatch";
var stateNotFound = "state_not_found";
var nonceMismatch = "nonce_mismatch";
var authTimeNotFound = "auth_time_not_found";
var maxAgeTranspired = "max_age_transpired";
var multipleMatchingTokens = "multiple_matching_tokens";
var multipleMatchingAccounts = "multiple_matching_accounts";
var multipleMatchingAppMetadata = "multiple_matching_appMetadata";
var requestCannotBeMade = "request_cannot_be_made";
var cannotRemoveEmptyScope = "cannot_remove_empty_scope";
var cannotAppendScopeSet = "cannot_append_scopeset";
var emptyInputScopeSet = "empty_input_scopeset";
var deviceCodePollingCancelled = "device_code_polling_cancelled";
var deviceCodeExpired = "device_code_expired";
var deviceCodeUnknownError = "device_code_unknown_error";
var noAccountInSilentRequest = "no_account_in_silent_request";
var invalidCacheRecord = "invalid_cache_record";
var invalidCacheEnvironment = "invalid_cache_environment";
var noAccountFound = "no_account_found";
var noCryptoObject = "no_crypto_object";
var unexpectedCredentialType = "unexpected_credential_type";
var invalidAssertion = "invalid_assertion";
var invalidClientCredential = "invalid_client_credential";
var tokenRefreshRequired = "token_refresh_required";
var userTimeoutReached = "user_timeout_reached";
var tokenClaimsCnfRequiredForSignedJwt = "token_claims_cnf_required_for_signedjwt";
var authorizationCodeMissingFromServerResponse = "authorization_code_missing_from_server_response";
var bindingKeyNotRemoved = "binding_key_not_removed";
var endSessionEndpointNotSupported = "end_session_endpoint_not_supported";
var keyIdMissing = "key_id_missing";
var noNetworkConnectivity = "no_network_connectivity";
var userCanceled = "user_canceled";
var missingTenantIdError = "missing_tenant_id_error";
var methodNotImplemented = "method_not_implemented";
var nestedAppAuthBridgeDisabled = "nested_app_auth_bridge_disabled";

// node_modules/@azure/msal-common/dist/error/ClientAuthError.mjs
var ClientAuthErrorMessages = {
  [clientInfoDecodingError]: "The client info could not be parsed/decoded correctly",
  [clientInfoEmptyError]: "The client info was empty",
  [tokenParsingError]: "Token cannot be parsed",
  [nullOrEmptyToken]: "The token is null or empty",
  [endpointResolutionError]: "Endpoints cannot be resolved",
  [networkError]: "Network request failed",
  [openIdConfigError]: "Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",
  [hashNotDeserialized]: "The hash parameters could not be deserialized",
  [invalidState]: "State was not the expected format",
  [stateMismatch]: "State mismatch error",
  [stateNotFound]: "State not found",
  [nonceMismatch]: "Nonce mismatch error",
  [authTimeNotFound]: "Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",
  [maxAgeTranspired]: "Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",
  [multipleMatchingTokens]: "The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",
  [multipleMatchingAccounts]: "The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",
  [multipleMatchingAppMetadata]: "The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",
  [requestCannotBeMade]: "Token request cannot be made without authorization code or refresh token.",
  [cannotRemoveEmptyScope]: "Cannot remove null or empty scope from ScopeSet",
  [cannotAppendScopeSet]: "Cannot append ScopeSet",
  [emptyInputScopeSet]: "Empty input ScopeSet cannot be processed",
  [deviceCodePollingCancelled]: "Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",
  [deviceCodeExpired]: "Device code is expired.",
  [deviceCodeUnknownError]: "Device code stopped polling for unknown reasons.",
  [noAccountInSilentRequest]: "Please pass an account object, silent flow is not supported without account information",
  [invalidCacheRecord]: "Cache record object was null or undefined.",
  [invalidCacheEnvironment]: "Invalid environment when attempting to create cache entry",
  [noAccountFound]: "No account found in cache for given key.",
  [noCryptoObject]: "No crypto object detected.",
  [unexpectedCredentialType]: "Unexpected credential type.",
  [invalidAssertion]: "Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",
  [invalidClientCredential]: "Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",
  [tokenRefreshRequired]: "Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",
  [userTimeoutReached]: "User defined timeout for device code polling reached",
  [tokenClaimsCnfRequiredForSignedJwt]: "Cannot generate a POP jwt if the token_claims are not populated",
  [authorizationCodeMissingFromServerResponse]: "Server response does not contain an authorization code to proceed",
  [bindingKeyNotRemoved]: "Could not remove the credential's binding key from storage.",
  [endSessionEndpointNotSupported]: "The provided authority does not support logout",
  [keyIdMissing]: "A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",
  [noNetworkConnectivity]: "No network connectivity. Check your internet connection.",
  [userCanceled]: "User cancelled the flow.",
  [missingTenantIdError]: "A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",
  [methodNotImplemented]: "This method has not been implemented",
  [nestedAppAuthBridgeDisabled]: "The nested app auth bridge is disabled"
};
var ClientAuthErrorMessage = {
  clientInfoDecodingError: {
    code: clientInfoDecodingError,
    desc: ClientAuthErrorMessages[clientInfoDecodingError]
  },
  clientInfoEmptyError: {
    code: clientInfoEmptyError,
    desc: ClientAuthErrorMessages[clientInfoEmptyError]
  },
  tokenParsingError: {
    code: tokenParsingError,
    desc: ClientAuthErrorMessages[tokenParsingError]
  },
  nullOrEmptyToken: {
    code: nullOrEmptyToken,
    desc: ClientAuthErrorMessages[nullOrEmptyToken]
  },
  endpointResolutionError: {
    code: endpointResolutionError,
    desc: ClientAuthErrorMessages[endpointResolutionError]
  },
  networkError: {
    code: networkError,
    desc: ClientAuthErrorMessages[networkError]
  },
  unableToGetOpenidConfigError: {
    code: openIdConfigError,
    desc: ClientAuthErrorMessages[openIdConfigError]
  },
  hashNotDeserialized: {
    code: hashNotDeserialized,
    desc: ClientAuthErrorMessages[hashNotDeserialized]
  },
  invalidStateError: {
    code: invalidState,
    desc: ClientAuthErrorMessages[invalidState]
  },
  stateMismatchError: {
    code: stateMismatch,
    desc: ClientAuthErrorMessages[stateMismatch]
  },
  stateNotFoundError: {
    code: stateNotFound,
    desc: ClientAuthErrorMessages[stateNotFound]
  },
  nonceMismatchError: {
    code: nonceMismatch,
    desc: ClientAuthErrorMessages[nonceMismatch]
  },
  authTimeNotFoundError: {
    code: authTimeNotFound,
    desc: ClientAuthErrorMessages[authTimeNotFound]
  },
  maxAgeTranspired: {
    code: maxAgeTranspired,
    desc: ClientAuthErrorMessages[maxAgeTranspired]
  },
  multipleMatchingTokens: {
    code: multipleMatchingTokens,
    desc: ClientAuthErrorMessages[multipleMatchingTokens]
  },
  multipleMatchingAccounts: {
    code: multipleMatchingAccounts,
    desc: ClientAuthErrorMessages[multipleMatchingAccounts]
  },
  multipleMatchingAppMetadata: {
    code: multipleMatchingAppMetadata,
    desc: ClientAuthErrorMessages[multipleMatchingAppMetadata]
  },
  tokenRequestCannotBeMade: {
    code: requestCannotBeMade,
    desc: ClientAuthErrorMessages[requestCannotBeMade]
  },
  removeEmptyScopeError: {
    code: cannotRemoveEmptyScope,
    desc: ClientAuthErrorMessages[cannotRemoveEmptyScope]
  },
  appendScopeSetError: {
    code: cannotAppendScopeSet,
    desc: ClientAuthErrorMessages[cannotAppendScopeSet]
  },
  emptyInputScopeSetError: {
    code: emptyInputScopeSet,
    desc: ClientAuthErrorMessages[emptyInputScopeSet]
  },
  DeviceCodePollingCancelled: {
    code: deviceCodePollingCancelled,
    desc: ClientAuthErrorMessages[deviceCodePollingCancelled]
  },
  DeviceCodeExpired: {
    code: deviceCodeExpired,
    desc: ClientAuthErrorMessages[deviceCodeExpired]
  },
  DeviceCodeUnknownError: {
    code: deviceCodeUnknownError,
    desc: ClientAuthErrorMessages[deviceCodeUnknownError]
  },
  NoAccountInSilentRequest: {
    code: noAccountInSilentRequest,
    desc: ClientAuthErrorMessages[noAccountInSilentRequest]
  },
  invalidCacheRecord: {
    code: invalidCacheRecord,
    desc: ClientAuthErrorMessages[invalidCacheRecord]
  },
  invalidCacheEnvironment: {
    code: invalidCacheEnvironment,
    desc: ClientAuthErrorMessages[invalidCacheEnvironment]
  },
  noAccountFound: {
    code: noAccountFound,
    desc: ClientAuthErrorMessages[noAccountFound]
  },
  noCryptoObj: {
    code: noCryptoObject,
    desc: ClientAuthErrorMessages[noCryptoObject]
  },
  unexpectedCredentialType: {
    code: unexpectedCredentialType,
    desc: ClientAuthErrorMessages[unexpectedCredentialType]
  },
  invalidAssertion: {
    code: invalidAssertion,
    desc: ClientAuthErrorMessages[invalidAssertion]
  },
  invalidClientCredential: {
    code: invalidClientCredential,
    desc: ClientAuthErrorMessages[invalidClientCredential]
  },
  tokenRefreshRequired: {
    code: tokenRefreshRequired,
    desc: ClientAuthErrorMessages[tokenRefreshRequired]
  },
  userTimeoutReached: {
    code: userTimeoutReached,
    desc: ClientAuthErrorMessages[userTimeoutReached]
  },
  tokenClaimsRequired: {
    code: tokenClaimsCnfRequiredForSignedJwt,
    desc: ClientAuthErrorMessages[tokenClaimsCnfRequiredForSignedJwt]
  },
  noAuthorizationCodeFromServer: {
    code: authorizationCodeMissingFromServerResponse,
    desc: ClientAuthErrorMessages[authorizationCodeMissingFromServerResponse]
  },
  bindingKeyNotRemovedError: {
    code: bindingKeyNotRemoved,
    desc: ClientAuthErrorMessages[bindingKeyNotRemoved]
  },
  logoutNotSupported: {
    code: endSessionEndpointNotSupported,
    desc: ClientAuthErrorMessages[endSessionEndpointNotSupported]
  },
  keyIdMissing: {
    code: keyIdMissing,
    desc: ClientAuthErrorMessages[keyIdMissing]
  },
  noNetworkConnectivity: {
    code: noNetworkConnectivity,
    desc: ClientAuthErrorMessages[noNetworkConnectivity]
  },
  userCanceledError: {
    code: userCanceled,
    desc: ClientAuthErrorMessages[userCanceled]
  },
  missingTenantIdError: {
    code: missingTenantIdError,
    desc: ClientAuthErrorMessages[missingTenantIdError]
  },
  nestedAppAuthBridgeDisabled: {
    code: nestedAppAuthBridgeDisabled,
    desc: ClientAuthErrorMessages[nestedAppAuthBridgeDisabled]
  }
};
var ClientAuthError = class _ClientAuthError extends AuthError {
  constructor(errorCode, additionalMessage) {
    super(errorCode, additionalMessage ? `${ClientAuthErrorMessages[errorCode]}: ${additionalMessage}` : ClientAuthErrorMessages[errorCode]);
    this.name = "ClientAuthError";
    Object.setPrototypeOf(this, _ClientAuthError.prototype);
  }
};
function createClientAuthError(errorCode, additionalMessage) {
  return new ClientAuthError(errorCode, additionalMessage);
}

// node_modules/@azure/msal-common/dist/crypto/ICrypto.mjs
var DEFAULT_CRYPTO_IMPLEMENTATION = {
  createNewGuid: () => {
    throw createClientAuthError(methodNotImplemented);
  },
  base64Decode: () => {
    throw createClientAuthError(methodNotImplemented);
  },
  base64Encode: () => {
    throw createClientAuthError(methodNotImplemented);
  },
  base64UrlEncode: () => {
    throw createClientAuthError(methodNotImplemented);
  },
  encodeKid: () => {
    throw createClientAuthError(methodNotImplemented);
  },
  async getPublicKeyThumbprint() {
    throw createClientAuthError(methodNotImplemented);
  },
  async removeTokenBindingKey() {
    throw createClientAuthError(methodNotImplemented);
  },
  async clearKeystore() {
    throw createClientAuthError(methodNotImplemented);
  },
  async signJwt() {
    throw createClientAuthError(methodNotImplemented);
  },
  async hashString() {
    throw createClientAuthError(methodNotImplemented);
  }
};

// node_modules/@azure/msal-common/dist/logger/Logger.mjs
var LogLevel;
(function(LogLevel2) {
  LogLevel2[LogLevel2["Error"] = 0] = "Error";
  LogLevel2[LogLevel2["Warning"] = 1] = "Warning";
  LogLevel2[LogLevel2["Info"] = 2] = "Info";
  LogLevel2[LogLevel2["Verbose"] = 3] = "Verbose";
  LogLevel2[LogLevel2["Trace"] = 4] = "Trace";
})(LogLevel || (LogLevel = {}));
var Logger = class _Logger {
  constructor(loggerOptions, packageName, packageVersion) {
    this.level = LogLevel.Info;
    const defaultLoggerCallback = () => {
      return;
    };
    const setLoggerOptions = loggerOptions || _Logger.createDefaultLoggerOptions();
    this.localCallback = setLoggerOptions.loggerCallback || defaultLoggerCallback;
    this.piiLoggingEnabled = setLoggerOptions.piiLoggingEnabled || false;
    this.level = typeof setLoggerOptions.logLevel === "number" ? setLoggerOptions.logLevel : LogLevel.Info;
    this.correlationId = setLoggerOptions.correlationId || Constants.EMPTY_STRING;
    this.packageName = packageName || Constants.EMPTY_STRING;
    this.packageVersion = packageVersion || Constants.EMPTY_STRING;
  }
  static createDefaultLoggerOptions() {
    return {
      loggerCallback: () => {
      },
      piiLoggingEnabled: false,
      logLevel: LogLevel.Info
    };
  }
  /**
   * Create new Logger with existing configurations.
   */
  clone(packageName, packageVersion, correlationId) {
    return new _Logger({
      loggerCallback: this.localCallback,
      piiLoggingEnabled: this.piiLoggingEnabled,
      logLevel: this.level,
      correlationId: correlationId || this.correlationId
    }, packageName, packageVersion);
  }
  /**
   * Log message with required options.
   */
  logMessage(logMessage, options) {
    if (options.logLevel > this.level || !this.piiLoggingEnabled && options.containsPii) {
      return;
    }
    const timestamp = (/* @__PURE__ */ new Date()).toUTCString();
    const logHeader = `[${timestamp}] : [${options.correlationId || this.correlationId || ""}]`;
    const log = `${logHeader} : ${this.packageName}@${this.packageVersion} : ${LogLevel[options.logLevel]} - ${logMessage}`;
    this.executeCallback(options.logLevel, log, options.containsPii || false);
  }
  /**
   * Execute callback with message.
   */
  executeCallback(level, message, containsPii) {
    if (this.localCallback) {
      this.localCallback(level, message, containsPii);
    }
  }
  /**
   * Logs error messages.
   */
  error(message, correlationId) {
    this.logMessage(message, {
      logLevel: LogLevel.Error,
      containsPii: false,
      correlationId: correlationId || Constants.EMPTY_STRING
    });
  }
  /**
   * Logs error messages with PII.
   */
  errorPii(message, correlationId) {
    this.logMessage(message, {
      logLevel: LogLevel.Error,
      containsPii: true,
      correlationId: correlationId || Constants.EMPTY_STRING
    });
  }
  /**
   * Logs warning messages.
   */
  warning(message, correlationId) {
    this.logMessage(message, {
      logLevel: LogLevel.Warning,
      containsPii: false,
      correlationId: correlationId || Constants.EMPTY_STRING
    });
  }
  /**
   * Logs warning messages with PII.
   */
  warningPii(message, correlationId) {
    this.logMessage(message, {
      logLevel: LogLevel.Warning,
      containsPii: true,
      correlationId: correlationId || Constants.EMPTY_STRING
    });
  }
  /**
   * Logs info messages.
   */
  info(message, correlationId) {
    this.logMessage(message, {
      logLevel: LogLevel.Info,
      containsPii: false,
      correlationId: correlationId || Constants.EMPTY_STRING
    });
  }
  /**
   * Logs info messages with PII.
   */
  infoPii(message, correlationId) {
    this.logMessage(message, {
      logLevel: LogLevel.Info,
      containsPii: true,
      correlationId: correlationId || Constants.EMPTY_STRING
    });
  }
  /**
   * Logs verbose messages.
   */
  verbose(message, correlationId) {
    this.logMessage(message, {
      logLevel: LogLevel.Verbose,
      containsPii: false,
      correlationId: correlationId || Constants.EMPTY_STRING
    });
  }
  /**
   * Logs verbose messages with PII.
   */
  verbosePii(message, correlationId) {
    this.logMessage(message, {
      logLevel: LogLevel.Verbose,
      containsPii: true,
      correlationId: correlationId || Constants.EMPTY_STRING
    });
  }
  /**
   * Logs trace messages.
   */
  trace(message, correlationId) {
    this.logMessage(message, {
      logLevel: LogLevel.Trace,
      containsPii: false,
      correlationId: correlationId || Constants.EMPTY_STRING
    });
  }
  /**
   * Logs trace messages with PII.
   */
  tracePii(message, correlationId) {
    this.logMessage(message, {
      logLevel: LogLevel.Trace,
      containsPii: true,
      correlationId: correlationId || Constants.EMPTY_STRING
    });
  }
  /**
   * Returns whether PII Logging is enabled or not.
   */
  isPiiLoggingEnabled() {
    return this.piiLoggingEnabled || false;
  }
};

// node_modules/@azure/msal-common/dist/packageMetadata.mjs
var name = "@azure/msal-common";
var version = "15.4.0";

// node_modules/@azure/msal-common/dist/authority/AuthorityOptions.mjs
var AzureCloudInstance = {
  // AzureCloudInstance is not specified.
  None: "none",
  // Microsoft Azure public cloud
  AzurePublic: "https://login.microsoftonline.com",
  // Microsoft PPE
  AzurePpe: "https://login.windows-ppe.net",
  // Microsoft Chinese national/regional cloud
  AzureChina: "https://login.chinacloudapi.cn",
  // Microsoft German national/regional cloud ("Black Forest")
  AzureGermany: "https://login.microsoftonline.de",
  // US Government cloud
  AzureUsGovernment: "https://login.microsoftonline.us"
};

// node_modules/@azure/msal-common/dist/cache/utils/CacheHelpers.mjs
var CacheHelpers_exports = {};
__export(CacheHelpers_exports, {
  createAccessTokenEntity: () => createAccessTokenEntity,
  createIdTokenEntity: () => createIdTokenEntity,
  createRefreshTokenEntity: () => createRefreshTokenEntity,
  generateAppMetadataKey: () => generateAppMetadataKey,
  generateAuthorityMetadataExpiresAt: () => generateAuthorityMetadataExpiresAt,
  generateCredentialKey: () => generateCredentialKey,
  isAccessTokenEntity: () => isAccessTokenEntity,
  isAppMetadataEntity: () => isAppMetadataEntity,
  isAuthorityMetadataEntity: () => isAuthorityMetadataEntity,
  isAuthorityMetadataExpired: () => isAuthorityMetadataExpired,
  isCredentialEntity: () => isCredentialEntity,
  isIdTokenEntity: () => isIdTokenEntity,
  isRefreshTokenEntity: () => isRefreshTokenEntity,
  isServerTelemetryEntity: () => isServerTelemetryEntity,
  isThrottlingEntity: () => isThrottlingEntity,
  updateAuthorityEndpointMetadata: () => updateAuthorityEndpointMetadata,
  updateCloudDiscoveryMetadata: () => updateCloudDiscoveryMetadata
});

// node_modules/@azure/msal-common/dist/account/AuthToken.mjs
var AuthToken_exports = {};
__export(AuthToken_exports, {
  checkMaxAge: () => checkMaxAge,
  extractTokenClaims: () => extractTokenClaims,
  getJWSPayload: () => getJWSPayload
});
function extractTokenClaims(encodedToken, base64Decode) {
  const jswPayload = getJWSPayload(encodedToken);
  try {
    const base64Decoded = base64Decode(jswPayload);
    return JSON.parse(base64Decoded);
  } catch (err) {
    throw createClientAuthError(tokenParsingError);
  }
}
function getJWSPayload(authToken) {
  if (!authToken) {
    throw createClientAuthError(nullOrEmptyToken);
  }
  const tokenPartsRegex = /^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/;
  const matches = tokenPartsRegex.exec(authToken);
  if (!matches || matches.length < 4) {
    throw createClientAuthError(tokenParsingError);
  }
  return matches[2];
}
function checkMaxAge(authTime, maxAge) {
  const fiveMinuteSkew = 3e5;
  if (maxAge === 0 || Date.now() - fiveMinuteSkew > authTime + maxAge) {
    throw createClientAuthError(maxAgeTranspired);
  }
}

// node_modules/@azure/msal-common/dist/utils/TimeUtils.mjs
var TimeUtils_exports = {};
__export(TimeUtils_exports, {
  delay: () => delay,
  isTokenExpired: () => isTokenExpired,
  nowSeconds: () => nowSeconds,
  toDateFromSeconds: () => toDateFromSeconds,
  toSecondsFromDate: () => toSecondsFromDate,
  wasClockTurnedBack: () => wasClockTurnedBack
});
function nowSeconds() {
  return Math.round((/* @__PURE__ */ new Date()).getTime() / 1e3);
}
function toSecondsFromDate(date) {
  return date.getTime() / 1e3;
}
function toDateFromSeconds(seconds) {
  if (seconds) {
    return new Date(Number(seconds) * 1e3);
  }
  return /* @__PURE__ */ new Date();
}
function isTokenExpired(expiresOn, offset) {
  const expirationSec = Number(expiresOn) || 0;
  const offsetCurrentTimeSec = nowSeconds() + offset;
  return offsetCurrentTimeSec > expirationSec;
}
function wasClockTurnedBack(cachedAt) {
  const cachedAtSec = Number(cachedAt);
  return cachedAtSec > nowSeconds();
}
function delay(t, value) {
  return new Promise((resolve) => setTimeout(() => resolve(value), t));
}

// node_modules/@azure/msal-common/dist/cache/utils/CacheHelpers.mjs
function generateCredentialKey(credentialEntity) {
  const credentialKey = [
    generateAccountId(credentialEntity),
    generateCredentialId(credentialEntity),
    generateTarget(credentialEntity),
    generateClaimsHash(credentialEntity),
    generateScheme(credentialEntity)
  ];
  return credentialKey.join(Separators.CACHE_KEY_SEPARATOR).toLowerCase();
}
function createIdTokenEntity(homeAccountId, environment, idToken, clientId, tenantId) {
  const idTokenEntity = {
    credentialType: CredentialType.ID_TOKEN,
    homeAccountId,
    environment,
    clientId,
    secret: idToken,
    realm: tenantId
  };
  return idTokenEntity;
}
function createAccessTokenEntity(homeAccountId, environment, accessToken, clientId, tenantId, scopes, expiresOn, extExpiresOn, base64Decode, refreshOn, tokenType, userAssertionHash, keyId, requestedClaims, requestedClaimsHash) {
  var _a, _b;
  const atEntity = {
    homeAccountId,
    credentialType: CredentialType.ACCESS_TOKEN,
    secret: accessToken,
    cachedAt: nowSeconds().toString(),
    expiresOn: expiresOn.toString(),
    extendedExpiresOn: extExpiresOn.toString(),
    environment,
    clientId,
    realm: tenantId,
    target: scopes,
    tokenType: tokenType || AuthenticationScheme.BEARER
  };
  if (userAssertionHash) {
    atEntity.userAssertionHash = userAssertionHash;
  }
  if (refreshOn) {
    atEntity.refreshOn = refreshOn.toString();
  }
  if (requestedClaims) {
    atEntity.requestedClaims = requestedClaims;
    atEntity.requestedClaimsHash = requestedClaimsHash;
  }
  if (((_a = atEntity.tokenType) == null ? void 0 : _a.toLowerCase()) !== AuthenticationScheme.BEARER.toLowerCase()) {
    atEntity.credentialType = CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME;
    switch (atEntity.tokenType) {
      case AuthenticationScheme.POP:
        const tokenClaims = extractTokenClaims(accessToken, base64Decode);
        if (!((_b = tokenClaims == null ? void 0 : tokenClaims.cnf) == null ? void 0 : _b.kid)) {
          throw createClientAuthError(tokenClaimsCnfRequiredForSignedJwt);
        }
        atEntity.keyId = tokenClaims.cnf.kid;
        break;
      case AuthenticationScheme.SSH:
        atEntity.keyId = keyId;
    }
  }
  return atEntity;
}
function createRefreshTokenEntity(homeAccountId, environment, refreshToken, clientId, familyId, userAssertionHash, expiresOn) {
  const rtEntity = {
    credentialType: CredentialType.REFRESH_TOKEN,
    homeAccountId,
    environment,
    clientId,
    secret: refreshToken
  };
  if (userAssertionHash) {
    rtEntity.userAssertionHash = userAssertionHash;
  }
  if (familyId) {
    rtEntity.familyId = familyId;
  }
  if (expiresOn) {
    rtEntity.expiresOn = expiresOn.toString();
  }
  return rtEntity;
}
function isCredentialEntity(entity) {
  return entity.hasOwnProperty("homeAccountId") && entity.hasOwnProperty("environment") && entity.hasOwnProperty("credentialType") && entity.hasOwnProperty("clientId") && entity.hasOwnProperty("secret");
}
function isAccessTokenEntity(entity) {
  if (!entity) {
    return false;
  }
  return isCredentialEntity(entity) && entity.hasOwnProperty("realm") && entity.hasOwnProperty("target") && (entity["credentialType"] === CredentialType.ACCESS_TOKEN || entity["credentialType"] === CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME);
}
function isIdTokenEntity(entity) {
  if (!entity) {
    return false;
  }
  return isCredentialEntity(entity) && entity.hasOwnProperty("realm") && entity["credentialType"] === CredentialType.ID_TOKEN;
}
function isRefreshTokenEntity(entity) {
  if (!entity) {
    return false;
  }
  return isCredentialEntity(entity) && entity["credentialType"] === CredentialType.REFRESH_TOKEN;
}
function generateAccountId(credentialEntity) {
  const accountId = [
    credentialEntity.homeAccountId,
    credentialEntity.environment
  ];
  return accountId.join(Separators.CACHE_KEY_SEPARATOR).toLowerCase();
}
function generateCredentialId(credentialEntity) {
  const clientOrFamilyId = credentialEntity.credentialType === CredentialType.REFRESH_TOKEN ? credentialEntity.familyId || credentialEntity.clientId : credentialEntity.clientId;
  const credentialId = [
    credentialEntity.credentialType,
    clientOrFamilyId,
    credentialEntity.realm || ""
  ];
  return credentialId.join(Separators.CACHE_KEY_SEPARATOR).toLowerCase();
}
function generateTarget(credentialEntity) {
  return (credentialEntity.target || "").toLowerCase();
}
function generateClaimsHash(credentialEntity) {
  return (credentialEntity.requestedClaimsHash || "").toLowerCase();
}
function generateScheme(credentialEntity) {
  return credentialEntity.tokenType && credentialEntity.tokenType.toLowerCase() !== AuthenticationScheme.BEARER.toLowerCase() ? credentialEntity.tokenType.toLowerCase() : "";
}
function isServerTelemetryEntity(key, entity) {
  const validateKey = key.indexOf(SERVER_TELEM_CONSTANTS.CACHE_KEY) === 0;
  let validateEntity = true;
  if (entity) {
    validateEntity = entity.hasOwnProperty("failedRequests") && entity.hasOwnProperty("errors") && entity.hasOwnProperty("cacheHits");
  }
  return validateKey && validateEntity;
}
function isThrottlingEntity(key, entity) {
  let validateKey = false;
  if (key) {
    validateKey = key.indexOf(ThrottlingConstants.THROTTLING_PREFIX) === 0;
  }
  let validateEntity = true;
  if (entity) {
    validateEntity = entity.hasOwnProperty("throttleTime");
  }
  return validateKey && validateEntity;
}
function generateAppMetadataKey({ environment, clientId }) {
  const appMetaDataKeyArray = [
    APP_METADATA,
    environment,
    clientId
  ];
  return appMetaDataKeyArray.join(Separators.CACHE_KEY_SEPARATOR).toLowerCase();
}
function isAppMetadataEntity(key, entity) {
  if (!entity) {
    return false;
  }
  return key.indexOf(APP_METADATA) === 0 && entity.hasOwnProperty("clientId") && entity.hasOwnProperty("environment");
}
function isAuthorityMetadataEntity(key, entity) {
  if (!entity) {
    return false;
  }
  return key.indexOf(AUTHORITY_METADATA_CONSTANTS.CACHE_KEY) === 0 && entity.hasOwnProperty("aliases") && entity.hasOwnProperty("preferred_cache") && entity.hasOwnProperty("preferred_network") && entity.hasOwnProperty("canonical_authority") && entity.hasOwnProperty("authorization_endpoint") && entity.hasOwnProperty("token_endpoint") && entity.hasOwnProperty("issuer") && entity.hasOwnProperty("aliasesFromNetwork") && entity.hasOwnProperty("endpointsFromNetwork") && entity.hasOwnProperty("expiresAt") && entity.hasOwnProperty("jwks_uri");
}
function generateAuthorityMetadataExpiresAt() {
  return nowSeconds() + AUTHORITY_METADATA_CONSTANTS.REFRESH_TIME_SECONDS;
}
function updateAuthorityEndpointMetadata(authorityMetadata, updatedValues, fromNetwork) {
  authorityMetadata.authorization_endpoint = updatedValues.authorization_endpoint;
  authorityMetadata.token_endpoint = updatedValues.token_endpoint;
  authorityMetadata.end_session_endpoint = updatedValues.end_session_endpoint;
  authorityMetadata.issuer = updatedValues.issuer;
  authorityMetadata.endpointsFromNetwork = fromNetwork;
  authorityMetadata.jwks_uri = updatedValues.jwks_uri;
}
function updateCloudDiscoveryMetadata(authorityMetadata, updatedValues, fromNetwork) {
  authorityMetadata.aliases = updatedValues.aliases;
  authorityMetadata.preferred_cache = updatedValues.preferred_cache;
  authorityMetadata.preferred_network = updatedValues.preferred_network;
  authorityMetadata.aliasesFromNetwork = fromNetwork;
}
function isAuthorityMetadataExpired(metadata) {
  return metadata.expiresAt <= nowSeconds();
}

// node_modules/@azure/msal-common/dist/error/ClientConfigurationErrorCodes.mjs
var redirectUriEmpty = "redirect_uri_empty";
var claimsRequestParsingError = "claims_request_parsing_error";
var authorityUriInsecure = "authority_uri_insecure";
var urlParseError = "url_parse_error";
var urlEmptyError = "empty_url_error";
var emptyInputScopesError = "empty_input_scopes_error";
var invalidPromptValue = "invalid_prompt_value";
var invalidClaims = "invalid_claims";
var tokenRequestEmpty = "token_request_empty";
var logoutRequestEmpty = "logout_request_empty";
var invalidCodeChallengeMethod = "invalid_code_challenge_method";
var pkceParamsMissing = "pkce_params_missing";
var invalidCloudDiscoveryMetadata = "invalid_cloud_discovery_metadata";
var invalidAuthorityMetadata = "invalid_authority_metadata";
var untrustedAuthority = "untrusted_authority";
var missingSshJwk = "missing_ssh_jwk";
var missingSshKid = "missing_ssh_kid";
var missingNonceAuthenticationHeader = "missing_nonce_authentication_header";
var invalidAuthenticationHeader = "invalid_authentication_header";
var cannotSetOIDCOptions = "cannot_set_OIDCOptions";
var cannotAllowPlatformBroker = "cannot_allow_platform_broker";
var authorityMismatch = "authority_mismatch";

// node_modules/@azure/msal-common/dist/error/ClientConfigurationError.mjs
var ClientConfigurationErrorMessages = {
  [redirectUriEmpty]: "A redirect URI is required for all calls, and none has been set.",
  [claimsRequestParsingError]: "Could not parse the given claims request object.",
  [authorityUriInsecure]: "Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",
  [urlParseError]: "URL could not be parsed into appropriate segments.",
  [urlEmptyError]: "URL was empty or null.",
  [emptyInputScopesError]: "Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",
  [invalidPromptValue]: "Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",
  [invalidClaims]: "Given claims parameter must be a stringified JSON object.",
  [tokenRequestEmpty]: "Token request was empty and not found in cache.",
  [logoutRequestEmpty]: "The logout request was null or undefined.",
  [invalidCodeChallengeMethod]: 'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',
  [pkceParamsMissing]: "Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",
  [invalidCloudDiscoveryMetadata]: "Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",
  [invalidAuthorityMetadata]: "Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",
  [untrustedAuthority]: "The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",
  [missingSshJwk]: "Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",
  [missingSshKid]: "Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",
  [missingNonceAuthenticationHeader]: "Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",
  [invalidAuthenticationHeader]: "Invalid authentication header provided",
  [cannotSetOIDCOptions]: "Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",
  [cannotAllowPlatformBroker]: "Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",
  [authorityMismatch]: "Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."
};
var ClientConfigurationErrorMessage = {
  redirectUriNotSet: {
    code: redirectUriEmpty,
    desc: ClientConfigurationErrorMessages[redirectUriEmpty]
  },
  claimsRequestParsingError: {
    code: claimsRequestParsingError,
    desc: ClientConfigurationErrorMessages[claimsRequestParsingError]
  },
  authorityUriInsecure: {
    code: authorityUriInsecure,
    desc: ClientConfigurationErrorMessages[authorityUriInsecure]
  },
  urlParseError: {
    code: urlParseError,
    desc: ClientConfigurationErrorMessages[urlParseError]
  },
  urlEmptyError: {
    code: urlEmptyError,
    desc: ClientConfigurationErrorMessages[urlEmptyError]
  },
  emptyScopesError: {
    code: emptyInputScopesError,
    desc: ClientConfigurationErrorMessages[emptyInputScopesError]
  },
  invalidPrompt: {
    code: invalidPromptValue,
    desc: ClientConfigurationErrorMessages[invalidPromptValue]
  },
  invalidClaimsRequest: {
    code: invalidClaims,
    desc: ClientConfigurationErrorMessages[invalidClaims]
  },
  tokenRequestEmptyError: {
    code: tokenRequestEmpty,
    desc: ClientConfigurationErrorMessages[tokenRequestEmpty]
  },
  logoutRequestEmptyError: {
    code: logoutRequestEmpty,
    desc: ClientConfigurationErrorMessages[logoutRequestEmpty]
  },
  invalidCodeChallengeMethod: {
    code: invalidCodeChallengeMethod,
    desc: ClientConfigurationErrorMessages[invalidCodeChallengeMethod]
  },
  invalidCodeChallengeParams: {
    code: pkceParamsMissing,
    desc: ClientConfigurationErrorMessages[pkceParamsMissing]
  },
  invalidCloudDiscoveryMetadata: {
    code: invalidCloudDiscoveryMetadata,
    desc: ClientConfigurationErrorMessages[invalidCloudDiscoveryMetadata]
  },
  invalidAuthorityMetadata: {
    code: invalidAuthorityMetadata,
    desc: ClientConfigurationErrorMessages[invalidAuthorityMetadata]
  },
  untrustedAuthority: {
    code: untrustedAuthority,
    desc: ClientConfigurationErrorMessages[untrustedAuthority]
  },
  missingSshJwk: {
    code: missingSshJwk,
    desc: ClientConfigurationErrorMessages[missingSshJwk]
  },
  missingSshKid: {
    code: missingSshKid,
    desc: ClientConfigurationErrorMessages[missingSshKid]
  },
  missingNonceAuthenticationHeader: {
    code: missingNonceAuthenticationHeader,
    desc: ClientConfigurationErrorMessages[missingNonceAuthenticationHeader]
  },
  invalidAuthenticationHeader: {
    code: invalidAuthenticationHeader,
    desc: ClientConfigurationErrorMessages[invalidAuthenticationHeader]
  },
  cannotSetOIDCOptions: {
    code: cannotSetOIDCOptions,
    desc: ClientConfigurationErrorMessages[cannotSetOIDCOptions]
  },
  cannotAllowPlatformBroker: {
    code: cannotAllowPlatformBroker,
    desc: ClientConfigurationErrorMessages[cannotAllowPlatformBroker]
  },
  authorityMismatch: {
    code: authorityMismatch,
    desc: ClientConfigurationErrorMessages[authorityMismatch]
  }
};
var ClientConfigurationError = class _ClientConfigurationError extends AuthError {
  constructor(errorCode) {
    super(errorCode, ClientConfigurationErrorMessages[errorCode]);
    this.name = "ClientConfigurationError";
    Object.setPrototypeOf(this, _ClientConfigurationError.prototype);
  }
};
function createClientConfigurationError(errorCode) {
  return new ClientConfigurationError(errorCode);
}

// node_modules/@azure/msal-common/dist/utils/StringUtils.mjs
var StringUtils = class {
  /**
   * Check if stringified object is empty
   * @param strObj
   */
  static isEmptyObj(strObj) {
    if (strObj) {
      try {
        const obj = JSON.parse(strObj);
        return Object.keys(obj).length === 0;
      } catch (e) {
      }
    }
    return true;
  }
  static startsWith(str, search) {
    return str.indexOf(search) === 0;
  }
  static endsWith(str, search) {
    return str.length >= search.length && str.lastIndexOf(search) === str.length - search.length;
  }
  /**
   * Parses string into an object.
   *
   * @param query
   */
  static queryStringToObject(query) {
    const obj = {};
    const params = query.split("&");
    const decode = (s) => decodeURIComponent(s.replace(/\+/g, " "));
    params.forEach((pair) => {
      if (pair.trim()) {
        const [key, value] = pair.split(/=(.+)/g, 2);
        if (key && value) {
          obj[decode(key)] = decode(value);
        }
      }
    });
    return obj;
  }
  /**
   * Trims entries in an array.
   *
   * @param arr
   */
  static trimArrayEntries(arr) {
    return arr.map((entry) => entry.trim());
  }
  /**
   * Removes empty strings from array
   * @param arr
   */
  static removeEmptyStringsFromArray(arr) {
    return arr.filter((entry) => {
      return !!entry;
    });
  }
  /**
   * Attempts to parse a string into JSON
   * @param str
   */
  static jsonParseHelper(str) {
    try {
      return JSON.parse(str);
    } catch (e) {
      return null;
    }
  }
  /**
   * Tests if a given string matches a given pattern, with support for wildcards and queries.
   * @param pattern Wildcard pattern to string match. Supports "*" for wildcards and "?" for queries
   * @param input String to match against
   */
  static matchPattern(pattern, input) {
    const regex = new RegExp(pattern.replace(/\\/g, "\\\\").replace(/\*/g, "[^ ]*").replace(/\?/g, "\\?"));
    return regex.test(input);
  }
};

// node_modules/@azure/msal-common/dist/request/ScopeSet.mjs
var ScopeSet = class _ScopeSet {
  constructor(inputScopes) {
    const scopeArr = inputScopes ? StringUtils.trimArrayEntries([...inputScopes]) : [];
    const filteredInput = scopeArr ? StringUtils.removeEmptyStringsFromArray(scopeArr) : [];
    if (!filteredInput || !filteredInput.length) {
      throw createClientConfigurationError(emptyInputScopesError);
    }
    this.scopes = /* @__PURE__ */ new Set();
    filteredInput.forEach((scope) => this.scopes.add(scope));
  }
  /**
   * Factory method to create ScopeSet from space-delimited string
   * @param inputScopeString
   * @param appClientId
   * @param scopesRequired
   */
  static fromString(inputScopeString) {
    const scopeString = inputScopeString || Constants.EMPTY_STRING;
    const inputScopes = scopeString.split(" ");
    return new _ScopeSet(inputScopes);
  }
  /**
   * Creates the set of scopes to search for in cache lookups
   * @param inputScopeString
   * @returns
   */
  static createSearchScopes(inputScopeString) {
    const scopeSet = new _ScopeSet(inputScopeString);
    if (!scopeSet.containsOnlyOIDCScopes()) {
      scopeSet.removeOIDCScopes();
    } else {
      scopeSet.removeScope(Constants.OFFLINE_ACCESS_SCOPE);
    }
    return scopeSet;
  }
  /**
   * Check if a given scope is present in this set of scopes.
   * @param scope
   */
  containsScope(scope) {
    const lowerCaseScopes = this.printScopesLowerCase().split(" ");
    const lowerCaseScopesSet = new _ScopeSet(lowerCaseScopes);
    return scope ? lowerCaseScopesSet.scopes.has(scope.toLowerCase()) : false;
  }
  /**
   * Check if a set of scopes is present in this set of scopes.
   * @param scopeSet
   */
  containsScopeSet(scopeSet) {
    if (!scopeSet || scopeSet.scopes.size <= 0) {
      return false;
    }
    return this.scopes.size >= scopeSet.scopes.size && scopeSet.asArray().every((scope) => this.containsScope(scope));
  }
  /**
   * Check if set of scopes contains only the defaults
   */
  containsOnlyOIDCScopes() {
    let defaultScopeCount = 0;
    OIDC_SCOPES.forEach((defaultScope) => {
      if (this.containsScope(defaultScope)) {
        defaultScopeCount += 1;
      }
    });
    return this.scopes.size === defaultScopeCount;
  }
  /**
   * Appends single scope if passed
   * @param newScope
   */
  appendScope(newScope) {
    if (newScope) {
      this.scopes.add(newScope.trim());
    }
  }
  /**
   * Appends multiple scopes if passed
   * @param newScopes
   */
  appendScopes(newScopes) {
    try {
      newScopes.forEach((newScope) => this.appendScope(newScope));
    } catch (e) {
      throw createClientAuthError(cannotAppendScopeSet);
    }
  }
  /**
   * Removes element from set of scopes.
   * @param scope
   */
  removeScope(scope) {
    if (!scope) {
      throw createClientAuthError(cannotRemoveEmptyScope);
    }
    this.scopes.delete(scope.trim());
  }
  /**
   * Removes default scopes from set of scopes
   * Primarily used to prevent cache misses if the default scopes are not returned from the server
   */
  removeOIDCScopes() {
    OIDC_SCOPES.forEach((defaultScope) => {
      this.scopes.delete(defaultScope);
    });
  }
  /**
   * Combines an array of scopes with the current set of scopes.
   * @param otherScopes
   */
  unionScopeSets(otherScopes) {
    if (!otherScopes) {
      throw createClientAuthError(emptyInputScopeSet);
    }
    const unionScopes = /* @__PURE__ */ new Set();
    otherScopes.scopes.forEach((scope) => unionScopes.add(scope.toLowerCase()));
    this.scopes.forEach((scope) => unionScopes.add(scope.toLowerCase()));
    return unionScopes;
  }
  /**
   * Check if scopes intersect between this set and another.
   * @param otherScopes
   */
  intersectingScopeSets(otherScopes) {
    if (!otherScopes) {
      throw createClientAuthError(emptyInputScopeSet);
    }
    if (!otherScopes.containsOnlyOIDCScopes()) {
      otherScopes.removeOIDCScopes();
    }
    const unionScopes = this.unionScopeSets(otherScopes);
    const sizeOtherScopes = otherScopes.getScopeCount();
    const sizeThisScopes = this.getScopeCount();
    const sizeUnionScopes = unionScopes.size;
    return sizeUnionScopes < sizeThisScopes + sizeOtherScopes;
  }
  /**
   * Returns size of set of scopes.
   */
  getScopeCount() {
    return this.scopes.size;
  }
  /**
   * Returns the scopes as an array of string values
   */
  asArray() {
    const array = [];
    this.scopes.forEach((val) => array.push(val));
    return array;
  }
  /**
   * Prints scopes into a space-delimited string
   */
  printScopes() {
    if (this.scopes) {
      const scopeArr = this.asArray();
      return scopeArr.join(" ");
    }
    return Constants.EMPTY_STRING;
  }
  /**
   * Prints scopes into a space-delimited lower-case string (used for caching)
   */
  printScopesLowerCase() {
    return this.printScopes().toLowerCase();
  }
};

// node_modules/@azure/msal-common/dist/account/ClientInfo.mjs
function buildClientInfo(rawClientInfo, base64Decode) {
  if (!rawClientInfo) {
    throw createClientAuthError(clientInfoEmptyError);
  }
  try {
    const decodedClientInfo = base64Decode(rawClientInfo);
    return JSON.parse(decodedClientInfo);
  } catch (e) {
    throw createClientAuthError(clientInfoDecodingError);
  }
}
function buildClientInfoFromHomeAccountId(homeAccountId) {
  if (!homeAccountId) {
    throw createClientAuthError(clientInfoDecodingError);
  }
  const clientInfoParts = homeAccountId.split(Separators.CLIENT_INFO_SEPARATOR, 2);
  return {
    uid: clientInfoParts[0],
    utid: clientInfoParts.length < 2 ? Constants.EMPTY_STRING : clientInfoParts[1]
  };
}

// node_modules/@azure/msal-common/dist/account/AccountInfo.mjs
function tenantIdMatchesHomeTenant(tenantId, homeAccountId) {
  return !!tenantId && !!homeAccountId && tenantId === homeAccountId.split(".")[1];
}
function buildTenantProfile(homeAccountId, localAccountId, tenantId, idTokenClaims) {
  if (idTokenClaims) {
    const { oid, sub, tid, name: name3, tfp, acr } = idTokenClaims;
    const tenantId2 = tid || tfp || acr || "";
    return {
      tenantId: tenantId2,
      localAccountId: oid || sub || "",
      name: name3,
      isHomeTenant: tenantIdMatchesHomeTenant(tenantId2, homeAccountId)
    };
  } else {
    return {
      tenantId,
      localAccountId,
      isHomeTenant: tenantIdMatchesHomeTenant(tenantId, homeAccountId)
    };
  }
}
function updateAccountTenantProfileData(baseAccountInfo, tenantProfile, idTokenClaims, idTokenSecret) {
  let updatedAccountInfo = baseAccountInfo;
  if (tenantProfile) {
    const { isHomeTenant, ...tenantProfileOverride } = tenantProfile;
    updatedAccountInfo = { ...baseAccountInfo, ...tenantProfileOverride };
  }
  if (idTokenClaims) {
    const { isHomeTenant, ...claimsSourcedTenantProfile } = buildTenantProfile(baseAccountInfo.homeAccountId, baseAccountInfo.localAccountId, baseAccountInfo.tenantId, idTokenClaims);
    updatedAccountInfo = {
      ...updatedAccountInfo,
      ...claimsSourcedTenantProfile,
      idTokenClaims,
      idToken: idTokenSecret
    };
    return updatedAccountInfo;
  }
  return updatedAccountInfo;
}

// node_modules/@azure/msal-common/dist/authority/AuthorityType.mjs
var AuthorityType = {
  Default: 0,
  Adfs: 1,
  Dsts: 2,
  Ciam: 3
};

// node_modules/@azure/msal-common/dist/account/TokenClaims.mjs
function getTenantIdFromIdTokenClaims(idTokenClaims) {
  if (idTokenClaims) {
    const tenantId = idTokenClaims.tid || idTokenClaims.tfp || idTokenClaims.acr;
    return tenantId || null;
  }
  return null;
}

// node_modules/@azure/msal-common/dist/authority/ProtocolMode.mjs
var ProtocolMode = {
  /**
   * Auth Code + PKCE with Entra ID (formerly AAD) specific optimizations and features
   */
  AAD: "AAD",
  /**
   * Auth Code + PKCE without Entra ID specific optimizations and features. For use only with non-Microsoft owned authorities.
   * Support is limited for this mode.
   */
  OIDC: "OIDC",
  /**
   * Encrypted Authorize Response (EAR) with Entra ID specific optimizations and features
   */
  EAR: "EAR"
};

// node_modules/@azure/msal-common/dist/cache/entities/AccountEntity.mjs
var AccountEntity = class _AccountEntity {
  /**
   * Generate Account Id key component as per the schema: <home_account_id>-<environment>
   */
  generateAccountId() {
    const accountId = [this.homeAccountId, this.environment];
    return accountId.join(Separators.CACHE_KEY_SEPARATOR).toLowerCase();
  }
  /**
   * Generate Account Cache Key as per the schema: <home_account_id>-<environment>-<realm*>
   */
  generateAccountKey() {
    return _AccountEntity.generateAccountCacheKey({
      homeAccountId: this.homeAccountId,
      environment: this.environment,
      tenantId: this.realm,
      username: this.username,
      localAccountId: this.localAccountId
    });
  }
  /**
   * Returns the AccountInfo interface for this account.
   */
  getAccountInfo() {
    return {
      homeAccountId: this.homeAccountId,
      environment: this.environment,
      tenantId: this.realm,
      username: this.username,
      localAccountId: this.localAccountId,
      name: this.name,
      nativeAccountId: this.nativeAccountId,
      authorityType: this.authorityType,
      // Deserialize tenant profiles array into a Map
      tenantProfiles: new Map((this.tenantProfiles || []).map((tenantProfile) => {
        return [tenantProfile.tenantId, tenantProfile];
      }))
    };
  }
  /**
   * Returns true if the account entity is in single tenant format (outdated), false otherwise
   */
  isSingleTenant() {
    return !this.tenantProfiles;
  }
  /**
   * Generates account key from interface
   * @param accountInterface
   */
  static generateAccountCacheKey(accountInterface) {
    const homeTenantId = accountInterface.homeAccountId.split(".")[1];
    const accountKey = [
      accountInterface.homeAccountId,
      accountInterface.environment || "",
      homeTenantId || accountInterface.tenantId || ""
    ];
    return accountKey.join(Separators.CACHE_KEY_SEPARATOR).toLowerCase();
  }
  /**
   * Build Account cache from IdToken, clientInfo and authority/policy. Associated with AAD.
   * @param accountDetails
   */
  static createAccount(accountDetails, authority, base64Decode) {
    var _a, _b, _c, _d, _e, _f;
    const account = new _AccountEntity();
    if (authority.authorityType === AuthorityType.Adfs) {
      account.authorityType = CacheAccountType.ADFS_ACCOUNT_TYPE;
    } else if (authority.protocolMode === ProtocolMode.OIDC) {
      account.authorityType = CacheAccountType.GENERIC_ACCOUNT_TYPE;
    } else {
      account.authorityType = CacheAccountType.MSSTS_ACCOUNT_TYPE;
    }
    let clientInfo;
    if (accountDetails.clientInfo && base64Decode) {
      clientInfo = buildClientInfo(accountDetails.clientInfo, base64Decode);
    }
    account.clientInfo = accountDetails.clientInfo;
    account.homeAccountId = accountDetails.homeAccountId;
    account.nativeAccountId = accountDetails.nativeAccountId;
    const env = accountDetails.environment || authority && authority.getPreferredCache();
    if (!env) {
      throw createClientAuthError(invalidCacheEnvironment);
    }
    account.environment = env;
    account.realm = (clientInfo == null ? void 0 : clientInfo.utid) || getTenantIdFromIdTokenClaims(accountDetails.idTokenClaims) || "";
    account.localAccountId = (clientInfo == null ? void 0 : clientInfo.uid) || ((_a = accountDetails.idTokenClaims) == null ? void 0 : _a.oid) || ((_b = accountDetails.idTokenClaims) == null ? void 0 : _b.sub) || "";
    const preferredUsername = ((_c = accountDetails.idTokenClaims) == null ? void 0 : _c.preferred_username) || ((_d = accountDetails.idTokenClaims) == null ? void 0 : _d.upn);
    const email = ((_e = accountDetails.idTokenClaims) == null ? void 0 : _e.emails) ? accountDetails.idTokenClaims.emails[0] : null;
    account.username = preferredUsername || email || "";
    account.name = ((_f = accountDetails.idTokenClaims) == null ? void 0 : _f.name) || "";
    account.cloudGraphHostName = accountDetails.cloudGraphHostName;
    account.msGraphHost = accountDetails.msGraphHost;
    if (accountDetails.tenantProfiles) {
      account.tenantProfiles = accountDetails.tenantProfiles;
    } else {
      const tenantProfile = buildTenantProfile(accountDetails.homeAccountId, account.localAccountId, account.realm, accountDetails.idTokenClaims);
      account.tenantProfiles = [tenantProfile];
    }
    return account;
  }
  /**
   * Creates an AccountEntity object from AccountInfo
   * @param accountInfo
   * @param cloudGraphHostName
   * @param msGraphHost
   * @returns
   */
  static createFromAccountInfo(accountInfo, cloudGraphHostName, msGraphHost) {
    var _a;
    const account = new _AccountEntity();
    account.authorityType = accountInfo.authorityType || CacheAccountType.GENERIC_ACCOUNT_TYPE;
    account.homeAccountId = accountInfo.homeAccountId;
    account.localAccountId = accountInfo.localAccountId;
    account.nativeAccountId = accountInfo.nativeAccountId;
    account.realm = accountInfo.tenantId;
    account.environment = accountInfo.environment;
    account.username = accountInfo.username;
    account.name = accountInfo.name;
    account.cloudGraphHostName = cloudGraphHostName;
    account.msGraphHost = msGraphHost;
    account.tenantProfiles = Array.from(((_a = accountInfo.tenantProfiles) == null ? void 0 : _a.values()) || []);
    return account;
  }
  /**
   * Generate HomeAccountId from server response
   * @param serverClientInfo
   * @param authType
   */
  static generateHomeAccountId(serverClientInfo, authType, logger, cryptoObj, idTokenClaims) {
    if (!(authType === AuthorityType.Adfs || authType === AuthorityType.Dsts)) {
      if (serverClientInfo) {
        try {
          const clientInfo = buildClientInfo(serverClientInfo, cryptoObj.base64Decode);
          if (clientInfo.uid && clientInfo.utid) {
            return `${clientInfo.uid}.${clientInfo.utid}`;
          }
        } catch (e) {
        }
      }
      logger.warning("No client info in response");
    }
    return (idTokenClaims == null ? void 0 : idTokenClaims.sub) || "";
  }
  /**
   * Validates an entity: checks for all expected params
   * @param entity
   */
  static isAccountEntity(entity) {
    if (!entity) {
      return false;
    }
    return entity.hasOwnProperty("homeAccountId") && entity.hasOwnProperty("environment") && entity.hasOwnProperty("realm") && entity.hasOwnProperty("localAccountId") && entity.hasOwnProperty("username") && entity.hasOwnProperty("authorityType");
  }
  /**
   * Helper function to determine whether 2 accountInfo objects represent the same account
   * @param accountA
   * @param accountB
   * @param compareClaims - If set to true idTokenClaims will also be compared to determine account equality
   */
  static accountInfoIsEqual(accountA, accountB, compareClaims) {
    if (!accountA || !accountB) {
      return false;
    }
    let claimsMatch = true;
    if (compareClaims) {
      const accountAClaims = accountA.idTokenClaims || {};
      const accountBClaims = accountB.idTokenClaims || {};
      claimsMatch = accountAClaims.iat === accountBClaims.iat && accountAClaims.nonce === accountBClaims.nonce;
    }
    return accountA.homeAccountId === accountB.homeAccountId && accountA.localAccountId === accountB.localAccountId && accountA.username === accountB.username && accountA.tenantId === accountB.tenantId && accountA.environment === accountB.environment && accountA.nativeAccountId === accountB.nativeAccountId && claimsMatch;
  }
};

// node_modules/@azure/msal-common/dist/utils/UrlUtils.mjs
var UrlUtils_exports = {};
__export(UrlUtils_exports, {
  getDeserializedResponse: () => getDeserializedResponse,
  mapToQueryString: () => mapToQueryString,
  stripLeadingHashOrQuery: () => stripLeadingHashOrQuery
});
function stripLeadingHashOrQuery(responseString) {
  if (responseString.startsWith("#/")) {
    return responseString.substring(2);
  } else if (responseString.startsWith("#") || responseString.startsWith("?")) {
    return responseString.substring(1);
  }
  return responseString;
}
function getDeserializedResponse(responseString) {
  if (!responseString || responseString.indexOf("=") < 0) {
    return null;
  }
  try {
    const normalizedResponse = stripLeadingHashOrQuery(responseString);
    const deserializedHash = Object.fromEntries(new URLSearchParams(normalizedResponse));
    if (deserializedHash.code || deserializedHash.ear_jwe || deserializedHash.error || deserializedHash.error_description || deserializedHash.state) {
      return deserializedHash;
    }
  } catch (e) {
    throw createClientAuthError(hashNotDeserialized);
  }
  return null;
}
function mapToQueryString(parameters) {
  const queryParameterArray = new Array();
  parameters.forEach((value, key) => {
    queryParameterArray.push(`${key}=${encodeURIComponent(value)}`);
  });
  return queryParameterArray.join("&");
}

// node_modules/@azure/msal-common/dist/url/UrlString.mjs
var UrlString = class _UrlString {
  get urlString() {
    return this._urlString;
  }
  constructor(url) {
    this._urlString = url;
    if (!this._urlString) {
      throw createClientConfigurationError(urlEmptyError);
    }
    if (!url.includes("#")) {
      this._urlString = _UrlString.canonicalizeUri(url);
    }
  }
  /**
   * Ensure urls are lower case and end with a / character.
   * @param url
   */
  static canonicalizeUri(url) {
    if (url) {
      let lowerCaseUrl = url.toLowerCase();
      if (StringUtils.endsWith(lowerCaseUrl, "?")) {
        lowerCaseUrl = lowerCaseUrl.slice(0, -1);
      } else if (StringUtils.endsWith(lowerCaseUrl, "?/")) {
        lowerCaseUrl = lowerCaseUrl.slice(0, -2);
      }
      if (!StringUtils.endsWith(lowerCaseUrl, "/")) {
        lowerCaseUrl += "/";
      }
      return lowerCaseUrl;
    }
    return url;
  }
  /**
   * Throws if urlString passed is not a valid authority URI string.
   */
  validateAsUri() {
    let components;
    try {
      components = this.getUrlComponents();
    } catch (e) {
      throw createClientConfigurationError(urlParseError);
    }
    if (!components.HostNameAndPort || !components.PathSegments) {
      throw createClientConfigurationError(urlParseError);
    }
    if (!components.Protocol || components.Protocol.toLowerCase() !== "https:") {
      throw createClientConfigurationError(authorityUriInsecure);
    }
  }
  /**
   * Given a url and a query string return the url with provided query string appended
   * @param url
   * @param queryString
   */
  static appendQueryString(url, queryString) {
    if (!queryString) {
      return url;
    }
    return url.indexOf("?") < 0 ? `${url}?${queryString}` : `${url}&${queryString}`;
  }
  /**
   * Returns a url with the hash removed
   * @param url
   */
  static removeHashFromUrl(url) {
    return _UrlString.canonicalizeUri(url.split("#")[0]);
  }
  /**
   * Given a url like https://a:b/common/d?e=f#g, and a tenantId, returns https://a:b/tenantId/d
   * @param href The url
   * @param tenantId The tenant id to replace
   */
  replaceTenantPath(tenantId) {
    const urlObject = this.getUrlComponents();
    const pathArray = urlObject.PathSegments;
    if (tenantId && pathArray.length !== 0 && (pathArray[0] === AADAuthorityConstants.COMMON || pathArray[0] === AADAuthorityConstants.ORGANIZATIONS)) {
      pathArray[0] = tenantId;
    }
    return _UrlString.constructAuthorityUriFromObject(urlObject);
  }
  /**
   * Parses out the components from a url string.
   * @returns An object with the various components. Please cache this value insted of calling this multiple times on the same url.
   */
  getUrlComponents() {
    const regEx = RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?");
    const match = this.urlString.match(regEx);
    if (!match) {
      throw createClientConfigurationError(urlParseError);
    }
    const urlComponents = {
      Protocol: match[1],
      HostNameAndPort: match[4],
      AbsolutePath: match[5],
      QueryString: match[7]
    };
    let pathSegments = urlComponents.AbsolutePath.split("/");
    pathSegments = pathSegments.filter((val) => val && val.length > 0);
    urlComponents.PathSegments = pathSegments;
    if (urlComponents.QueryString && urlComponents.QueryString.endsWith("/")) {
      urlComponents.QueryString = urlComponents.QueryString.substring(0, urlComponents.QueryString.length - 1);
    }
    return urlComponents;
  }
  static getDomainFromUrl(url) {
    const regEx = RegExp("^([^:/?#]+://)?([^/?#]*)");
    const match = url.match(regEx);
    if (!match) {
      throw createClientConfigurationError(urlParseError);
    }
    return match[2];
  }
  static getAbsoluteUrl(relativeUrl, baseUrl) {
    if (relativeUrl[0] === Constants.FORWARD_SLASH) {
      const url = new _UrlString(baseUrl);
      const baseComponents = url.getUrlComponents();
      return baseComponents.Protocol + "//" + baseComponents.HostNameAndPort + relativeUrl;
    }
    return relativeUrl;
  }
  static constructAuthorityUriFromObject(urlObject) {
    return new _UrlString(urlObject.Protocol + "//" + urlObject.HostNameAndPort + "/" + urlObject.PathSegments.join("/"));
  }
  /**
   * Check if the hash of the URL string contains known properties
   * @deprecated This API will be removed in a future version
   */
  static hashContainsKnownProperties(response) {
    return !!getDeserializedResponse(response);
  }
};

// node_modules/@azure/msal-common/dist/authority/AuthorityMetadata.mjs
var rawMetdataJSON = {
  endpointMetadata: {
    "login.microsoftonline.com": {
      token_endpoint: "https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",
      jwks_uri: "https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",
      issuer: "https://login.microsoftonline.com/{tenantid}/v2.0",
      authorization_endpoint: "https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",
      end_session_endpoint: "https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"
    },
    "login.chinacloudapi.cn": {
      token_endpoint: "https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",
      jwks_uri: "https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",
      issuer: "https://login.partner.microsoftonline.cn/{tenantid}/v2.0",
      authorization_endpoint: "https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",
      end_session_endpoint: "https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"
    },
    "login.microsoftonline.us": {
      token_endpoint: "https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",
      jwks_uri: "https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",
      issuer: "https://login.microsoftonline.us/{tenantid}/v2.0",
      authorization_endpoint: "https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",
      end_session_endpoint: "https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"
    }
  },
  instanceDiscoveryMetadata: {
    tenant_discovery_endpoint: "https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",
    metadata: [
      {
        preferred_network: "login.microsoftonline.com",
        preferred_cache: "login.windows.net",
        aliases: [
          "login.microsoftonline.com",
          "login.windows.net",
          "login.microsoft.com",
          "sts.windows.net"
        ]
      },
      {
        preferred_network: "login.partner.microsoftonline.cn",
        preferred_cache: "login.partner.microsoftonline.cn",
        aliases: [
          "login.partner.microsoftonline.cn",
          "login.chinacloudapi.cn"
        ]
      },
      {
        preferred_network: "login.microsoftonline.de",
        preferred_cache: "login.microsoftonline.de",
        aliases: ["login.microsoftonline.de"]
      },
      {
        preferred_network: "login.microsoftonline.us",
        preferred_cache: "login.microsoftonline.us",
        aliases: [
          "login.microsoftonline.us",
          "login.usgovcloudapi.net"
        ]
      },
      {
        preferred_network: "login-us.microsoftonline.com",
        preferred_cache: "login-us.microsoftonline.com",
        aliases: ["login-us.microsoftonline.com"]
      }
    ]
  }
};
var EndpointMetadata = rawMetdataJSON.endpointMetadata;
var InstanceDiscoveryMetadata = rawMetdataJSON.instanceDiscoveryMetadata;
var InstanceDiscoveryMetadataAliases = /* @__PURE__ */ new Set();
InstanceDiscoveryMetadata.metadata.forEach((metadataEntry) => {
  metadataEntry.aliases.forEach((alias) => {
    InstanceDiscoveryMetadataAliases.add(alias);
  });
});
function getAliasesFromStaticSources(staticAuthorityOptions, logger) {
  var _a;
  let staticAliases;
  const canonicalAuthority = staticAuthorityOptions.canonicalAuthority;
  if (canonicalAuthority) {
    const authorityHost = new UrlString(canonicalAuthority).getUrlComponents().HostNameAndPort;
    staticAliases = getAliasesFromMetadata(authorityHost, (_a = staticAuthorityOptions.cloudDiscoveryMetadata) == null ? void 0 : _a.metadata, AuthorityMetadataSource.CONFIG, logger) || getAliasesFromMetadata(authorityHost, InstanceDiscoveryMetadata.metadata, AuthorityMetadataSource.HARDCODED_VALUES, logger) || staticAuthorityOptions.knownAuthorities;
  }
  return staticAliases || [];
}
function getAliasesFromMetadata(authorityHost, cloudDiscoveryMetadata, source, logger) {
  logger == null ? void 0 : logger.trace(`getAliasesFromMetadata called with source: ${source}`);
  if (authorityHost && cloudDiscoveryMetadata) {
    const metadata = getCloudDiscoveryMetadataFromNetworkResponse(cloudDiscoveryMetadata, authorityHost);
    if (metadata) {
      logger == null ? void 0 : logger.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${source}, returning aliases`);
      return metadata.aliases;
    } else {
      logger == null ? void 0 : logger.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${source}`);
    }
  }
  return null;
}
function getCloudDiscoveryMetadataFromHardcodedValues(authorityHost) {
  const metadata = getCloudDiscoveryMetadataFromNetworkResponse(InstanceDiscoveryMetadata.metadata, authorityHost);
  return metadata;
}
function getCloudDiscoveryMetadataFromNetworkResponse(response, authorityHost) {
  for (let i = 0; i < response.length; i++) {
    const metadata = response[i];
    if (metadata.aliases.includes(authorityHost)) {
      return metadata;
    }
  }
  return null;
}

// node_modules/@azure/msal-common/dist/error/CacheErrorCodes.mjs
var cacheQuotaExceededErrorCode = "cache_quota_exceeded";
var cacheUnknownErrorCode = "cache_error_unknown";

// node_modules/@azure/msal-common/dist/error/CacheError.mjs
var CacheErrorMessages = {
  [cacheQuotaExceededErrorCode]: "Exceeded cache storage capacity.",
  [cacheUnknownErrorCode]: "Unexpected error occurred when using cache storage."
};
var CacheError = class _CacheError extends Error {
  constructor(errorCode, errorMessage) {
    const message = errorMessage || (CacheErrorMessages[errorCode] ? CacheErrorMessages[errorCode] : CacheErrorMessages[cacheUnknownErrorCode]);
    super(`${errorCode}: ${message}`);
    Object.setPrototypeOf(this, _CacheError.prototype);
    this.name = "CacheError";
    this.errorCode = errorCode;
    this.errorMessage = message;
  }
};

// node_modules/@azure/msal-common/dist/cache/CacheManager.mjs
var CacheManager = class {
  constructor(clientId, cryptoImpl, logger, staticAuthorityOptions) {
    this.clientId = clientId;
    this.cryptoImpl = cryptoImpl;
    this.commonLogger = logger.clone(name, version);
    this.staticAuthorityOptions = staticAuthorityOptions;
  }
  /**
   * Returns all the accounts in the cache that match the optional filter. If no filter is provided, all accounts are returned.
   * @param accountFilter - (Optional) filter to narrow down the accounts returned
   * @returns Array of AccountInfo objects in cache
   */
  getAllAccounts(accountFilter) {
    return this.buildTenantProfiles(this.getAccountsFilteredBy(accountFilter || {}), accountFilter);
  }
  /**
   * Gets first tenanted AccountInfo object found based on provided filters
   */
  getAccountInfoFilteredBy(accountFilter) {
    const allAccounts = this.getAllAccounts(accountFilter);
    if (allAccounts.length > 1) {
      const sortedAccounts = allAccounts.sort((account) => {
        return account.idTokenClaims ? -1 : 1;
      });
      return sortedAccounts[0];
    } else if (allAccounts.length === 1) {
      return allAccounts[0];
    } else {
      return null;
    }
  }
  /**
   * Returns a single matching
   * @param accountFilter
   * @returns
   */
  getBaseAccountInfo(accountFilter) {
    const accountEntities = this.getAccountsFilteredBy(accountFilter);
    if (accountEntities.length > 0) {
      return accountEntities[0].getAccountInfo();
    } else {
      return null;
    }
  }
  /**
   * Matches filtered account entities with cached ID tokens that match the tenant profile-specific account filters
   * and builds the account info objects from the matching ID token's claims
   * @param cachedAccounts
   * @param accountFilter
   * @returns Array of AccountInfo objects that match account and tenant profile filters
   */
  buildTenantProfiles(cachedAccounts, accountFilter) {
    return cachedAccounts.flatMap((accountEntity) => {
      return this.getTenantProfilesFromAccountEntity(accountEntity, accountFilter == null ? void 0 : accountFilter.tenantId, accountFilter);
    });
  }
  getTenantedAccountInfoByFilter(accountInfo, tokenKeys, tenantProfile, tenantProfileFilter) {
    let tenantedAccountInfo = null;
    let idTokenClaims;
    if (tenantProfileFilter) {
      if (!this.tenantProfileMatchesFilter(tenantProfile, tenantProfileFilter)) {
        return null;
      }
    }
    const idToken = this.getIdToken(accountInfo, tokenKeys, tenantProfile.tenantId);
    if (idToken) {
      idTokenClaims = extractTokenClaims(idToken.secret, this.cryptoImpl.base64Decode);
      if (!this.idTokenClaimsMatchTenantProfileFilter(idTokenClaims, tenantProfileFilter)) {
        return null;
      }
    }
    tenantedAccountInfo = updateAccountTenantProfileData(accountInfo, tenantProfile, idTokenClaims, idToken == null ? void 0 : idToken.secret);
    return tenantedAccountInfo;
  }
  getTenantProfilesFromAccountEntity(accountEntity, targetTenantId, tenantProfileFilter) {
    const accountInfo = accountEntity.getAccountInfo();
    let searchTenantProfiles = accountInfo.tenantProfiles || /* @__PURE__ */ new Map();
    const tokenKeys = this.getTokenKeys();
    if (targetTenantId) {
      const tenantProfile = searchTenantProfiles.get(targetTenantId);
      if (tenantProfile) {
        searchTenantProfiles = /* @__PURE__ */ new Map([
          [targetTenantId, tenantProfile]
        ]);
      } else {
        return [];
      }
    }
    const matchingTenantProfiles = [];
    searchTenantProfiles.forEach((tenantProfile) => {
      const tenantedAccountInfo = this.getTenantedAccountInfoByFilter(accountInfo, tokenKeys, tenantProfile, tenantProfileFilter);
      if (tenantedAccountInfo) {
        matchingTenantProfiles.push(tenantedAccountInfo);
      }
    });
    return matchingTenantProfiles;
  }
  tenantProfileMatchesFilter(tenantProfile, tenantProfileFilter) {
    if (!!tenantProfileFilter.localAccountId && !this.matchLocalAccountIdFromTenantProfile(tenantProfile, tenantProfileFilter.localAccountId)) {
      return false;
    }
    if (!!tenantProfileFilter.name && !(tenantProfile.name === tenantProfileFilter.name)) {
      return false;
    }
    if (tenantProfileFilter.isHomeTenant !== void 0 && !(tenantProfile.isHomeTenant === tenantProfileFilter.isHomeTenant)) {
      return false;
    }
    return true;
  }
  idTokenClaimsMatchTenantProfileFilter(idTokenClaims, tenantProfileFilter) {
    if (tenantProfileFilter) {
      if (!!tenantProfileFilter.localAccountId && !this.matchLocalAccountIdFromTokenClaims(idTokenClaims, tenantProfileFilter.localAccountId)) {
        return false;
      }
      if (!!tenantProfileFilter.loginHint && !this.matchLoginHintFromTokenClaims(idTokenClaims, tenantProfileFilter.loginHint)) {
        return false;
      }
      if (!!tenantProfileFilter.username && !this.matchUsername(idTokenClaims.preferred_username, tenantProfileFilter.username)) {
        return false;
      }
      if (!!tenantProfileFilter.name && !this.matchName(idTokenClaims, tenantProfileFilter.name)) {
        return false;
      }
      if (!!tenantProfileFilter.sid && !this.matchSid(idTokenClaims, tenantProfileFilter.sid)) {
        return false;
      }
    }
    return true;
  }
  /**
   * saves a cache record
   * @param cacheRecord {CacheRecord}
   * @param storeInCache {?StoreInCache}
   * @param correlationId {?string} correlation id
   */
  async saveCacheRecord(cacheRecord, correlationId, storeInCache) {
    var _a, _b, _c, _d;
    if (!cacheRecord) {
      throw createClientAuthError(invalidCacheRecord);
    }
    try {
      if (!!cacheRecord.account) {
        await this.setAccount(cacheRecord.account, correlationId);
      }
      if (!!cacheRecord.idToken && (storeInCache == null ? void 0 : storeInCache.idToken) !== false) {
        await this.setIdTokenCredential(cacheRecord.idToken, correlationId);
      }
      if (!!cacheRecord.accessToken && (storeInCache == null ? void 0 : storeInCache.accessToken) !== false) {
        await this.saveAccessToken(cacheRecord.accessToken, correlationId);
      }
      if (!!cacheRecord.refreshToken && (storeInCache == null ? void 0 : storeInCache.refreshToken) !== false) {
        await this.setRefreshTokenCredential(cacheRecord.refreshToken, correlationId);
      }
      if (!!cacheRecord.appMetadata) {
        this.setAppMetadata(cacheRecord.appMetadata);
      }
    } catch (e) {
      (_a = this.commonLogger) == null ? void 0 : _a.error(`CacheManager.saveCacheRecord: failed`);
      if (e instanceof Error) {
        (_b = this.commonLogger) == null ? void 0 : _b.errorPii(`CacheManager.saveCacheRecord: ${e.message}`, correlationId);
        if (e.name === "QuotaExceededError" || e.name === "NS_ERROR_DOM_QUOTA_REACHED" || e.message.includes("exceeded the quota")) {
          (_c = this.commonLogger) == null ? void 0 : _c.error(`CacheManager.saveCacheRecord: exceeded storage quota`, correlationId);
          throw new CacheError(cacheQuotaExceededErrorCode);
        } else {
          throw new CacheError(e.name, e.message);
        }
      } else {
        (_d = this.commonLogger) == null ? void 0 : _d.errorPii(`CacheManager.saveCacheRecord: ${e}`, correlationId);
        throw new CacheError(cacheUnknownErrorCode);
      }
    }
  }
  /**
   * saves access token credential
   * @param credential
   */
  async saveAccessToken(credential, correlationId) {
    const accessTokenFilter = {
      clientId: credential.clientId,
      credentialType: credential.credentialType,
      environment: credential.environment,
      homeAccountId: credential.homeAccountId,
      realm: credential.realm,
      tokenType: credential.tokenType,
      requestedClaimsHash: credential.requestedClaimsHash
    };
    const tokenKeys = this.getTokenKeys();
    const currentScopes = ScopeSet.fromString(credential.target);
    const removedAccessTokens = [];
    tokenKeys.accessToken.forEach((key) => {
      if (!this.accessTokenKeyMatchesFilter(key, accessTokenFilter, false)) {
        return;
      }
      const tokenEntity = this.getAccessTokenCredential(key);
      if (tokenEntity && this.credentialMatchesFilter(tokenEntity, accessTokenFilter)) {
        const tokenScopeSet = ScopeSet.fromString(tokenEntity.target);
        if (tokenScopeSet.intersectingScopeSets(currentScopes)) {
          removedAccessTokens.push(this.removeAccessToken(key));
        }
      }
    });
    await Promise.all(removedAccessTokens);
    await this.setAccessTokenCredential(credential, correlationId);
  }
  /**
   * Retrieve account entities matching all provided tenant-agnostic filters; if no filter is set, get all account entities in the cache
   * Not checking for casing as keys are all generated in lower case, remember to convert to lower case if object properties are compared
   * @param accountFilter - An object containing Account properties to filter by
   */
  getAccountsFilteredBy(accountFilter) {
    const allAccountKeys = this.getAccountKeys();
    const matchingAccounts = [];
    allAccountKeys.forEach((cacheKey) => {
      var _a;
      if (!this.isAccountKey(cacheKey, accountFilter.homeAccountId)) {
        return;
      }
      const entity = this.getAccount(cacheKey, this.commonLogger);
      if (!entity) {
        return;
      }
      if (!!accountFilter.homeAccountId && !this.matchHomeAccountId(entity, accountFilter.homeAccountId)) {
        return;
      }
      if (!!accountFilter.username && !this.matchUsername(entity.username, accountFilter.username)) {
        return;
      }
      if (!!accountFilter.environment && !this.matchEnvironment(entity, accountFilter.environment)) {
        return;
      }
      if (!!accountFilter.realm && !this.matchRealm(entity, accountFilter.realm)) {
        return;
      }
      if (!!accountFilter.nativeAccountId && !this.matchNativeAccountId(entity, accountFilter.nativeAccountId)) {
        return;
      }
      if (!!accountFilter.authorityType && !this.matchAuthorityType(entity, accountFilter.authorityType)) {
        return;
      }
      const tenantProfileFilter = {
        localAccountId: accountFilter == null ? void 0 : accountFilter.localAccountId,
        name: accountFilter == null ? void 0 : accountFilter.name
      };
      const matchingTenantProfiles = (_a = entity.tenantProfiles) == null ? void 0 : _a.filter((tenantProfile) => {
        return this.tenantProfileMatchesFilter(tenantProfile, tenantProfileFilter);
      });
      if (matchingTenantProfiles && matchingTenantProfiles.length === 0) {
        return;
      }
      matchingAccounts.push(entity);
    });
    return matchingAccounts;
  }
  /**
   * Returns true if the given key matches our account key schema. Also matches homeAccountId and/or tenantId if provided
   * @param key
   * @param homeAccountId
   * @param tenantId
   * @returns
   */
  isAccountKey(key, homeAccountId, tenantId) {
    if (key.split(Separators.CACHE_KEY_SEPARATOR).length < 3) {
      return false;
    }
    if (homeAccountId && !key.toLowerCase().includes(homeAccountId.toLowerCase())) {
      return false;
    }
    if (tenantId && !key.toLowerCase().includes(tenantId.toLowerCase())) {
      return false;
    }
    return true;
  }
  /**
   * Returns true if the given key matches our credential key schema.
   * @param key
   */
  isCredentialKey(key) {
    if (key.split(Separators.CACHE_KEY_SEPARATOR).length < 6) {
      return false;
    }
    const lowerCaseKey = key.toLowerCase();
    if (lowerCaseKey.indexOf(CredentialType.ID_TOKEN.toLowerCase()) === -1 && lowerCaseKey.indexOf(CredentialType.ACCESS_TOKEN.toLowerCase()) === -1 && lowerCaseKey.indexOf(CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()) === -1 && lowerCaseKey.indexOf(CredentialType.REFRESH_TOKEN.toLowerCase()) === -1) {
      return false;
    }
    if (lowerCaseKey.indexOf(CredentialType.REFRESH_TOKEN.toLowerCase()) > -1) {
      const clientIdValidation = `${CredentialType.REFRESH_TOKEN}${Separators.CACHE_KEY_SEPARATOR}${this.clientId}${Separators.CACHE_KEY_SEPARATOR}`;
      const familyIdValidation = `${CredentialType.REFRESH_TOKEN}${Separators.CACHE_KEY_SEPARATOR}${THE_FAMILY_ID}${Separators.CACHE_KEY_SEPARATOR}`;
      if (lowerCaseKey.indexOf(clientIdValidation.toLowerCase()) === -1 && lowerCaseKey.indexOf(familyIdValidation.toLowerCase()) === -1) {
        return false;
      }
    } else if (lowerCaseKey.indexOf(this.clientId.toLowerCase()) === -1) {
      return false;
    }
    return true;
  }
  /**
   * Returns whether or not the given credential entity matches the filter
   * @param entity
   * @param filter
   * @returns
   */
  credentialMatchesFilter(entity, filter) {
    if (!!filter.clientId && !this.matchClientId(entity, filter.clientId)) {
      return false;
    }
    if (!!filter.userAssertionHash && !this.matchUserAssertionHash(entity, filter.userAssertionHash)) {
      return false;
    }
    if (typeof filter.homeAccountId === "string" && !this.matchHomeAccountId(entity, filter.homeAccountId)) {
      return false;
    }
    if (!!filter.environment && !this.matchEnvironment(entity, filter.environment)) {
      return false;
    }
    if (!!filter.realm && !this.matchRealm(entity, filter.realm)) {
      return false;
    }
    if (!!filter.credentialType && !this.matchCredentialType(entity, filter.credentialType)) {
      return false;
    }
    if (!!filter.familyId && !this.matchFamilyId(entity, filter.familyId)) {
      return false;
    }
    if (!!filter.target && !this.matchTarget(entity, filter.target)) {
      return false;
    }
    if (filter.requestedClaimsHash || entity.requestedClaimsHash) {
      if (entity.requestedClaimsHash !== filter.requestedClaimsHash) {
        return false;
      }
    }
    if (entity.credentialType === CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME) {
      if (!!filter.tokenType && !this.matchTokenType(entity, filter.tokenType)) {
        return false;
      }
      if (filter.tokenType === AuthenticationScheme.SSH) {
        if (filter.keyId && !this.matchKeyId(entity, filter.keyId)) {
          return false;
        }
      }
    }
    return true;
  }
  /**
   * retrieve appMetadata matching all provided filters; if no filter is set, get all appMetadata
   * @param filter
   */
  getAppMetadataFilteredBy(filter) {
    const allCacheKeys = this.getKeys();
    const matchingAppMetadata = {};
    allCacheKeys.forEach((cacheKey) => {
      if (!this.isAppMetadata(cacheKey)) {
        return;
      }
      const entity = this.getAppMetadata(cacheKey);
      if (!entity) {
        return;
      }
      if (!!filter.environment && !this.matchEnvironment(entity, filter.environment)) {
        return;
      }
      if (!!filter.clientId && !this.matchClientId(entity, filter.clientId)) {
        return;
      }
      matchingAppMetadata[cacheKey] = entity;
    });
    return matchingAppMetadata;
  }
  /**
   * retrieve authorityMetadata that contains a matching alias
   * @param filter
   */
  getAuthorityMetadataByAlias(host) {
    const allCacheKeys = this.getAuthorityMetadataKeys();
    let matchedEntity = null;
    allCacheKeys.forEach((cacheKey) => {
      if (!this.isAuthorityMetadata(cacheKey) || cacheKey.indexOf(this.clientId) === -1) {
        return;
      }
      const entity = this.getAuthorityMetadata(cacheKey);
      if (!entity) {
        return;
      }
      if (entity.aliases.indexOf(host) === -1) {
        return;
      }
      matchedEntity = entity;
    });
    return matchedEntity;
  }
  /**
   * Removes all accounts and related tokens from cache.
   */
  async removeAllAccounts() {
    const allAccountKeys = this.getAccountKeys();
    const removedAccounts = [];
    allAccountKeys.forEach((cacheKey) => {
      removedAccounts.push(this.removeAccount(cacheKey));
    });
    await Promise.all(removedAccounts);
  }
  /**
   * Removes the account and related tokens for a given account key
   * @param account
   */
  async removeAccount(accountKey) {
    const account = this.getAccount(accountKey, this.commonLogger);
    if (!account) {
      return;
    }
    await this.removeAccountContext(account);
    this.removeItem(accountKey);
  }
  /**
   * Removes credentials associated with the provided account
   * @param account
   */
  async removeAccountContext(account) {
    const allTokenKeys = this.getTokenKeys();
    const accountId = account.generateAccountId();
    const removedCredentials = [];
    allTokenKeys.idToken.forEach((key) => {
      if (key.indexOf(accountId) === 0) {
        this.removeIdToken(key);
      }
    });
    allTokenKeys.accessToken.forEach((key) => {
      if (key.indexOf(accountId) === 0) {
        removedCredentials.push(this.removeAccessToken(key));
      }
    });
    allTokenKeys.refreshToken.forEach((key) => {
      if (key.indexOf(accountId) === 0) {
        this.removeRefreshToken(key);
      }
    });
    await Promise.all(removedCredentials);
  }
  /**
   * returns a boolean if the given credential is removed
   * @param credential
   */
  async removeAccessToken(key) {
    const credential = this.getAccessTokenCredential(key);
    if (!credential) {
      return;
    }
    if (credential.credentialType.toLowerCase() === CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()) {
      if (credential.tokenType === AuthenticationScheme.POP) {
        const accessTokenWithAuthSchemeEntity = credential;
        const kid = accessTokenWithAuthSchemeEntity.keyId;
        if (kid) {
          try {
            await this.cryptoImpl.removeTokenBindingKey(kid);
          } catch (error) {
            throw createClientAuthError(bindingKeyNotRemoved);
          }
        }
      }
    }
    return this.removeItem(key);
  }
  /**
   * Removes all app metadata objects from cache.
   */
  removeAppMetadata() {
    const allCacheKeys = this.getKeys();
    allCacheKeys.forEach((cacheKey) => {
      if (this.isAppMetadata(cacheKey)) {
        this.removeItem(cacheKey);
      }
    });
    return true;
  }
  /**
   * Retrieve AccountEntity from cache
   * @param account
   */
  readAccountFromCache(account) {
    const accountKey = AccountEntity.generateAccountCacheKey(account);
    return this.getAccount(accountKey, this.commonLogger);
  }
  /**
   * Retrieve IdTokenEntity from cache
   * @param account {AccountInfo}
   * @param tokenKeys {?TokenKeys}
   * @param targetRealm {?string}
   * @param performanceClient {?IPerformanceClient}
   * @param correlationId {?string}
   */
  getIdToken(account, tokenKeys, targetRealm, performanceClient, correlationId) {
    this.commonLogger.trace("CacheManager - getIdToken called");
    const idTokenFilter = {
      homeAccountId: account.homeAccountId,
      environment: account.environment,
      credentialType: CredentialType.ID_TOKEN,
      clientId: this.clientId,
      realm: targetRealm
    };
    const idTokenMap = this.getIdTokensByFilter(idTokenFilter, tokenKeys);
    const numIdTokens = idTokenMap.size;
    if (numIdTokens < 1) {
      this.commonLogger.info("CacheManager:getIdToken - No token found");
      return null;
    } else if (numIdTokens > 1) {
      let tokensToBeRemoved = idTokenMap;
      if (!targetRealm) {
        const homeIdTokenMap = /* @__PURE__ */ new Map();
        idTokenMap.forEach((idToken, key) => {
          if (idToken.realm === account.tenantId) {
            homeIdTokenMap.set(key, idToken);
          }
        });
        const numHomeIdTokens = homeIdTokenMap.size;
        if (numHomeIdTokens < 1) {
          this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result");
          return idTokenMap.values().next().value;
        } else if (numHomeIdTokens === 1) {
          this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile");
          return homeIdTokenMap.values().next().value;
        } else {
          tokensToBeRemoved = homeIdTokenMap;
        }
      }
      this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them");
      tokensToBeRemoved.forEach((idToken, key) => {
        this.removeIdToken(key);
      });
      if (performanceClient && correlationId) {
        performanceClient.addFields({ multiMatchedID: idTokenMap.size }, correlationId);
      }
      return null;
    }
    this.commonLogger.info("CacheManager:getIdToken - Returning ID token");
    return idTokenMap.values().next().value;
  }
  /**
   * Gets all idTokens matching the given filter
   * @param filter
   * @returns
   */
  getIdTokensByFilter(filter, tokenKeys) {
    const idTokenKeys = tokenKeys && tokenKeys.idToken || this.getTokenKeys().idToken;
    const idTokens = /* @__PURE__ */ new Map();
    idTokenKeys.forEach((key) => {
      if (!this.idTokenKeyMatchesFilter(key, {
        clientId: this.clientId,
        ...filter
      })) {
        return;
      }
      const idToken = this.getIdTokenCredential(key);
      if (idToken && this.credentialMatchesFilter(idToken, filter)) {
        idTokens.set(key, idToken);
      }
    });
    return idTokens;
  }
  /**
   * Validate the cache key against filter before retrieving and parsing cache value
   * @param key
   * @param filter
   * @returns
   */
  idTokenKeyMatchesFilter(inputKey, filter) {
    const key = inputKey.toLowerCase();
    if (filter.clientId && key.indexOf(filter.clientId.toLowerCase()) === -1) {
      return false;
    }
    if (filter.homeAccountId && key.indexOf(filter.homeAccountId.toLowerCase()) === -1) {
      return false;
    }
    return true;
  }
  /**
   * Removes idToken from the cache
   * @param key
   */
  removeIdToken(key) {
    this.removeItem(key);
  }
  /**
   * Removes refresh token from the cache
   * @param key
   */
  removeRefreshToken(key) {
    this.removeItem(key);
  }
  /**
   * Retrieve AccessTokenEntity from cache
   * @param account {AccountInfo}
   * @param request {BaseAuthRequest}
   * @param tokenKeys {?TokenKeys}
   * @param performanceClient {?IPerformanceClient}
   * @param correlationId {?string}
   */
  getAccessToken(account, request, tokenKeys, targetRealm, performanceClient, correlationId) {
    this.commonLogger.trace("CacheManager - getAccessToken called");
    const scopes = ScopeSet.createSearchScopes(request.scopes);
    const authScheme = request.authenticationScheme || AuthenticationScheme.BEARER;
    const credentialType = authScheme && authScheme.toLowerCase() !== AuthenticationScheme.BEARER.toLowerCase() ? CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME : CredentialType.ACCESS_TOKEN;
    const accessTokenFilter = {
      homeAccountId: account.homeAccountId,
      environment: account.environment,
      credentialType,
      clientId: this.clientId,
      realm: targetRealm || account.tenantId,
      target: scopes,
      tokenType: authScheme,
      keyId: request.sshKid,
      requestedClaimsHash: request.requestedClaimsHash
    };
    const accessTokenKeys = tokenKeys && tokenKeys.accessToken || this.getTokenKeys().accessToken;
    const accessTokens = [];
    accessTokenKeys.forEach((key) => {
      if (this.accessTokenKeyMatchesFilter(key, accessTokenFilter, true)) {
        const accessToken = this.getAccessTokenCredential(key);
        if (accessToken && this.credentialMatchesFilter(accessToken, accessTokenFilter)) {
          accessTokens.push(accessToken);
        }
      }
    });
    const numAccessTokens = accessTokens.length;
    if (numAccessTokens < 1) {
      this.commonLogger.info("CacheManager:getAccessToken - No token found");
      return null;
    } else if (numAccessTokens > 1) {
      this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them");
      accessTokens.forEach((accessToken) => {
        void this.removeAccessToken(generateCredentialKey(accessToken));
      });
      if (performanceClient && correlationId) {
        performanceClient.addFields({ multiMatchedAT: accessTokens.length }, correlationId);
      }
      return null;
    }
    this.commonLogger.info("CacheManager:getAccessToken - Returning access token");
    return accessTokens[0];
  }
  /**
   * Validate the cache key against filter before retrieving and parsing cache value
   * @param key
   * @param filter
   * @param keyMustContainAllScopes
   * @returns
   */
  accessTokenKeyMatchesFilter(inputKey, filter, keyMustContainAllScopes) {
    const key = inputKey.toLowerCase();
    if (filter.clientId && key.indexOf(filter.clientId.toLowerCase()) === -1) {
      return false;
    }
    if (filter.homeAccountId && key.indexOf(filter.homeAccountId.toLowerCase()) === -1) {
      return false;
    }
    if (filter.realm && key.indexOf(filter.realm.toLowerCase()) === -1) {
      return false;
    }
    if (filter.requestedClaimsHash && key.indexOf(filter.requestedClaimsHash.toLowerCase()) === -1) {
      return false;
    }
    if (filter.target) {
      const scopes = filter.target.asArray();
      for (let i = 0; i < scopes.length; i++) {
        if (keyMustContainAllScopes && !key.includes(scopes[i].toLowerCase())) {
          return false;
        } else if (!keyMustContainAllScopes && key.includes(scopes[i].toLowerCase())) {
          return true;
        }
      }
    }
    return true;
  }
  /**
   * Gets all access tokens matching the filter
   * @param filter
   * @returns
   */
  getAccessTokensByFilter(filter) {
    const tokenKeys = this.getTokenKeys();
    const accessTokens = [];
    tokenKeys.accessToken.forEach((key) => {
      if (!this.accessTokenKeyMatchesFilter(key, filter, true)) {
        return;
      }
      const accessToken = this.getAccessTokenCredential(key);
      if (accessToken && this.credentialMatchesFilter(accessToken, filter)) {
        accessTokens.push(accessToken);
      }
    });
    return accessTokens;
  }
  /**
   * Helper to retrieve the appropriate refresh token from cache
   * @param account {AccountInfo}
   * @param familyRT {boolean}
   * @param tokenKeys {?TokenKeys}
   * @param performanceClient {?IPerformanceClient}
   * @param correlationId {?string}
   */
  getRefreshToken(account, familyRT, tokenKeys, performanceClient, correlationId) {
    this.commonLogger.trace("CacheManager - getRefreshToken called");
    const id = familyRT ? THE_FAMILY_ID : void 0;
    const refreshTokenFilter = {
      homeAccountId: account.homeAccountId,
      environment: account.environment,
      credentialType: CredentialType.REFRESH_TOKEN,
      clientId: this.clientId,
      familyId: id
    };
    const refreshTokenKeys = tokenKeys && tokenKeys.refreshToken || this.getTokenKeys().refreshToken;
    const refreshTokens = [];
    refreshTokenKeys.forEach((key) => {
      if (this.refreshTokenKeyMatchesFilter(key, refreshTokenFilter)) {
        const refreshToken = this.getRefreshTokenCredential(key);
        if (refreshToken && this.credentialMatchesFilter(refreshToken, refreshTokenFilter)) {
          refreshTokens.push(refreshToken);
        }
      }
    });
    const numRefreshTokens = refreshTokens.length;
    if (numRefreshTokens < 1) {
      this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found.");
      return null;
    }
    if (numRefreshTokens > 1 && performanceClient && correlationId) {
      performanceClient.addFields({ multiMatchedRT: numRefreshTokens }, correlationId);
    }
    this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token");
    return refreshTokens[0];
  }
  /**
   * Validate the cache key against filter before retrieving and parsing cache value
   * @param key
   * @param filter
   */
  refreshTokenKeyMatchesFilter(inputKey, filter) {
    const key = inputKey.toLowerCase();
    if (filter.familyId && key.indexOf(filter.familyId.toLowerCase()) === -1) {
      return false;
    }
    if (!filter.familyId && filter.clientId && key.indexOf(filter.clientId.toLowerCase()) === -1) {
      return false;
    }
    if (filter.homeAccountId && key.indexOf(filter.homeAccountId.toLowerCase()) === -1) {
      return false;
    }
    return true;
  }
  /**
   * Retrieve AppMetadataEntity from cache
   */
  readAppMetadataFromCache(environment) {
    const appMetadataFilter = {
      environment,
      clientId: this.clientId
    };
    const appMetadata = this.getAppMetadataFilteredBy(appMetadataFilter);
    const appMetadataEntries = Object.keys(appMetadata).map((key) => appMetadata[key]);
    const numAppMetadata = appMetadataEntries.length;
    if (numAppMetadata < 1) {
      return null;
    } else if (numAppMetadata > 1) {
      throw createClientAuthError(multipleMatchingAppMetadata);
    }
    return appMetadataEntries[0];
  }
  /**
   * Return the family_id value associated  with FOCI
   * @param environment
   * @param clientId
   */
  isAppMetadataFOCI(environment) {
    const appMetadata = this.readAppMetadataFromCache(environment);
    return !!(appMetadata && appMetadata.familyId === THE_FAMILY_ID);
  }
  /**
   * helper to match account ids
   * @param value
   * @param homeAccountId
   */
  matchHomeAccountId(entity, homeAccountId) {
    return !!(typeof entity.homeAccountId === "string" && homeAccountId === entity.homeAccountId);
  }
  /**
   * helper to match account ids
   * @param entity
   * @param localAccountId
   * @returns
   */
  matchLocalAccountIdFromTokenClaims(tokenClaims, localAccountId) {
    const idTokenLocalAccountId = tokenClaims.oid || tokenClaims.sub;
    return localAccountId === idTokenLocalAccountId;
  }
  matchLocalAccountIdFromTenantProfile(tenantProfile, localAccountId) {
    return tenantProfile.localAccountId === localAccountId;
  }
  /**
   * helper to match names
   * @param entity
   * @param name
   * @returns true if the downcased name properties are present and match in the filter and the entity
   */
  matchName(claims, name3) {
    var _a;
    return !!(name3.toLowerCase() === ((_a = claims.name) == null ? void 0 : _a.toLowerCase()));
  }
  /**
   * helper to match usernames
   * @param entity
   * @param username
   * @returns
   */
  matchUsername(cachedUsername, filterUsername) {
    return !!(cachedUsername && typeof cachedUsername === "string" && (filterUsername == null ? void 0 : filterUsername.toLowerCase()) === cachedUsername.toLowerCase());
  }
  /**
   * helper to match assertion
   * @param value
   * @param oboAssertion
   */
  matchUserAssertionHash(entity, userAssertionHash) {
    return !!(entity.userAssertionHash && userAssertionHash === entity.userAssertionHash);
  }
  /**
   * helper to match environment
   * @param value
   * @param environment
   */
  matchEnvironment(entity, environment) {
    if (this.staticAuthorityOptions) {
      const staticAliases = getAliasesFromStaticSources(this.staticAuthorityOptions, this.commonLogger);
      if (staticAliases.includes(environment) && staticAliases.includes(entity.environment)) {
        return true;
      }
    }
    const cloudMetadata = this.getAuthorityMetadataByAlias(environment);
    if (cloudMetadata && cloudMetadata.aliases.indexOf(entity.environment) > -1) {
      return true;
    }
    return false;
  }
  /**
   * helper to match credential type
   * @param entity
   * @param credentialType
   */
  matchCredentialType(entity, credentialType) {
    return entity.credentialType && credentialType.toLowerCase() === entity.credentialType.toLowerCase();
  }
  /**
   * helper to match client ids
   * @param entity
   * @param clientId
   */
  matchClientId(entity, clientId) {
    return !!(entity.clientId && clientId === entity.clientId);
  }
  /**
   * helper to match family ids
   * @param entity
   * @param familyId
   */
  matchFamilyId(entity, familyId) {
    return !!(entity.familyId && familyId === entity.familyId);
  }
  /**
   * helper to match realm
   * @param entity
   * @param realm
   */
  matchRealm(entity, realm) {
    var _a;
    return !!(((_a = entity.realm) == null ? void 0 : _a.toLowerCase()) === realm.toLowerCase());
  }
  /**
   * helper to match nativeAccountId
   * @param entity
   * @param nativeAccountId
   * @returns boolean indicating the match result
   */
  matchNativeAccountId(entity, nativeAccountId) {
    return !!(entity.nativeAccountId && nativeAccountId === entity.nativeAccountId);
  }
  /**
   * helper to match loginHint which can be either:
   * 1. login_hint ID token claim
   * 2. username in cached account object
   * 3. upn in ID token claims
   * @param entity
   * @param loginHint
   * @returns
   */
  matchLoginHintFromTokenClaims(tokenClaims, loginHint) {
    if (tokenClaims.login_hint === loginHint) {
      return true;
    }
    if (tokenClaims.preferred_username === loginHint) {
      return true;
    }
    if (tokenClaims.upn === loginHint) {
      return true;
    }
    return false;
  }
  /**
   * Helper to match sid
   * @param entity
   * @param sid
   * @returns true if the sid claim is present and matches the filter
   */
  matchSid(idTokenClaims, sid) {
    return idTokenClaims.sid === sid;
  }
  matchAuthorityType(entity, authorityType) {
    return !!(entity.authorityType && authorityType.toLowerCase() === entity.authorityType.toLowerCase());
  }
  /**
   * Returns true if the target scopes are a subset of the current entity's scopes, false otherwise.
   * @param entity
   * @param target
   */
  matchTarget(entity, target) {
    const isNotAccessTokenCredential = entity.credentialType !== CredentialType.ACCESS_TOKEN && entity.credentialType !== CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME;
    if (isNotAccessTokenCredential || !entity.target) {
      return false;
    }
    const entityScopeSet = ScopeSet.fromString(entity.target);
    return entityScopeSet.containsScopeSet(target);
  }
  /**
   * Returns true if the credential's tokenType or Authentication Scheme matches the one in the request, false otherwise
   * @param entity
   * @param tokenType
   */
  matchTokenType(entity, tokenType) {
    return !!(entity.tokenType && entity.tokenType === tokenType);
  }
  /**
   * Returns true if the credential's keyId matches the one in the request, false otherwise
   * @param entity
   * @param keyId
   */
  matchKeyId(entity, keyId) {
    return !!(entity.keyId && entity.keyId === keyId);
  }
  /**
   * returns if a given cache entity is of the type appmetadata
   * @param key
   */
  isAppMetadata(key) {
    return key.indexOf(APP_METADATA) !== -1;
  }
  /**
   * returns if a given cache entity is of the type authoritymetadata
   * @param key
   */
  isAuthorityMetadata(key) {
    return key.indexOf(AUTHORITY_METADATA_CONSTANTS.CACHE_KEY) !== -1;
  }
  /**
   * returns cache key used for cloud instance metadata
   */
  generateAuthorityMetadataCacheKey(authority) {
    return `${AUTHORITY_METADATA_CONSTANTS.CACHE_KEY}-${this.clientId}-${authority}`;
  }
  /**
   * Helper to convert serialized data to object
   * @param obj
   * @param json
   */
  static toObject(obj, json) {
    for (const propertyName in json) {
      obj[propertyName] = json[propertyName];
    }
    return obj;
  }
};
var DefaultStorageClass = class extends CacheManager {
  async setAccount() {
    throw createClientAuthError(methodNotImplemented);
  }
  getAccount() {
    throw createClientAuthError(methodNotImplemented);
  }
  async setIdTokenCredential() {
    throw createClientAuthError(methodNotImplemented);
  }
  getIdTokenCredential() {
    throw createClientAuthError(methodNotImplemented);
  }
  async setAccessTokenCredential() {
    throw createClientAuthError(methodNotImplemented);
  }
  getAccessTokenCredential() {
    throw createClientAuthError(methodNotImplemented);
  }
  async setRefreshTokenCredential() {
    throw createClientAuthError(methodNotImplemented);
  }
  getRefreshTokenCredential() {
    throw createClientAuthError(methodNotImplemented);
  }
  setAppMetadata() {
    throw createClientAuthError(methodNotImplemented);
  }
  getAppMetadata() {
    throw createClientAuthError(methodNotImplemented);
  }
  setServerTelemetry() {
    throw createClientAuthError(methodNotImplemented);
  }
  getServerTelemetry() {
    throw createClientAuthError(methodNotImplemented);
  }
  setAuthorityMetadata() {
    throw createClientAuthError(methodNotImplemented);
  }
  getAuthorityMetadata() {
    throw createClientAuthError(methodNotImplemented);
  }
  getAuthorityMetadataKeys() {
    throw createClientAuthError(methodNotImplemented);
  }
  setThrottlingCache() {
    throw createClientAuthError(methodNotImplemented);
  }
  getThrottlingCache() {
    throw createClientAuthError(methodNotImplemented);
  }
  removeItem() {
    throw createClientAuthError(methodNotImplemented);
  }
  getKeys() {
    throw createClientAuthError(methodNotImplemented);
  }
  getAccountKeys() {
    throw createClientAuthError(methodNotImplemented);
  }
  getTokenKeys() {
    throw createClientAuthError(methodNotImplemented);
  }
};

// node_modules/@azure/msal-common/dist/config/ClientConfiguration.mjs
var DEFAULT_SYSTEM_OPTIONS = {
  tokenRenewalOffsetSeconds: DEFAULT_TOKEN_RENEWAL_OFFSET_SEC,
  preventCorsPreflight: false
};
var DEFAULT_LOGGER_IMPLEMENTATION = {
  loggerCallback: () => {
  },
  piiLoggingEnabled: false,
  logLevel: LogLevel.Info,
  correlationId: Constants.EMPTY_STRING
};
var DEFAULT_CACHE_OPTIONS = {
  claimsBasedCachingEnabled: false
};
var DEFAULT_NETWORK_IMPLEMENTATION = {
  async sendGetRequestAsync() {
    throw createClientAuthError(methodNotImplemented);
  },
  async sendPostRequestAsync() {
    throw createClientAuthError(methodNotImplemented);
  }
};
var DEFAULT_LIBRARY_INFO = {
  sku: Constants.SKU,
  version,
  cpu: Constants.EMPTY_STRING,
  os: Constants.EMPTY_STRING
};
var DEFAULT_CLIENT_CREDENTIALS = {
  clientSecret: Constants.EMPTY_STRING,
  clientAssertion: void 0
};
var DEFAULT_AZURE_CLOUD_OPTIONS = {
  azureCloudInstance: AzureCloudInstance.None,
  tenant: `${Constants.DEFAULT_COMMON_TENANT}`
};
var DEFAULT_TELEMETRY_OPTIONS = {
  application: {
    appName: "",
    appVersion: ""
  }
};
function buildClientConfiguration({ authOptions: userAuthOptions, systemOptions: userSystemOptions, loggerOptions: userLoggerOption, cacheOptions: userCacheOptions, storageInterface: storageImplementation, networkInterface: networkImplementation, cryptoInterface: cryptoImplementation, clientCredentials, libraryInfo, telemetry, serverTelemetryManager, persistencePlugin, serializableCache }) {
  const loggerOptions = {
    ...DEFAULT_LOGGER_IMPLEMENTATION,
    ...userLoggerOption
  };
  return {
    authOptions: buildAuthOptions(userAuthOptions),
    systemOptions: { ...DEFAULT_SYSTEM_OPTIONS, ...userSystemOptions },
    loggerOptions,
    cacheOptions: { ...DEFAULT_CACHE_OPTIONS, ...userCacheOptions },
    storageInterface: storageImplementation || new DefaultStorageClass(userAuthOptions.clientId, DEFAULT_CRYPTO_IMPLEMENTATION, new Logger(loggerOptions)),
    networkInterface: networkImplementation || DEFAULT_NETWORK_IMPLEMENTATION,
    cryptoInterface: cryptoImplementation || DEFAULT_CRYPTO_IMPLEMENTATION,
    clientCredentials: clientCredentials || DEFAULT_CLIENT_CREDENTIALS,
    libraryInfo: { ...DEFAULT_LIBRARY_INFO, ...libraryInfo },
    telemetry: { ...DEFAULT_TELEMETRY_OPTIONS, ...telemetry },
    serverTelemetryManager: serverTelemetryManager || null,
    persistencePlugin: persistencePlugin || null,
    serializableCache: serializableCache || null
  };
}
function buildAuthOptions(authOptions) {
  return {
    clientCapabilities: [],
    azureCloudOptions: DEFAULT_AZURE_CLOUD_OPTIONS,
    skipAuthorityMetadataCache: false,
    instanceAware: false,
    ...authOptions
  };
}
function isOidcProtocolMode(config2) {
  return config2.authOptions.authority.options.protocolMode === ProtocolMode.OIDC;
}

// node_modules/@azure/msal-common/dist/account/CcsCredential.mjs
var CcsCredentialType = {
  HOME_ACCOUNT_ID: "home_account_id",
  UPN: "UPN"
};

// node_modules/@azure/msal-common/dist/request/RequestParameterBuilder.mjs
var RequestParameterBuilder_exports = {};
__export(RequestParameterBuilder_exports, {
  addApplicationTelemetry: () => addApplicationTelemetry,
  addAuthorizationCode: () => addAuthorizationCode,
  addBrokerParameters: () => addBrokerParameters,
  addCcsOid: () => addCcsOid,
  addCcsUpn: () => addCcsUpn,
  addClaims: () => addClaims,
  addClientAssertion: () => addClientAssertion,
  addClientAssertionType: () => addClientAssertionType,
  addClientCapabilitiesToClaims: () => addClientCapabilitiesToClaims,
  addClientId: () => addClientId,
  addClientInfo: () => addClientInfo,
  addClientSecret: () => addClientSecret,
  addCodeChallengeParams: () => addCodeChallengeParams,
  addCodeVerifier: () => addCodeVerifier,
  addCorrelationId: () => addCorrelationId,
  addDeviceCode: () => addDeviceCode,
  addDomainHint: () => addDomainHint,
  addEARParameters: () => addEARParameters,
  addExtraQueryParameters: () => addExtraQueryParameters,
  addGrantType: () => addGrantType,
  addIdTokenHint: () => addIdTokenHint,
  addInstanceAware: () => addInstanceAware,
  addLibraryInfo: () => addLibraryInfo,
  addLoginHint: () => addLoginHint,
  addLogoutHint: () => addLogoutHint,
  addNativeBroker: () => addNativeBroker,
  addNonce: () => addNonce,
  addOboAssertion: () => addOboAssertion,
  addPassword: () => addPassword,
  addPopToken: () => addPopToken,
  addPostLogoutRedirectUri: () => addPostLogoutRedirectUri,
  addPrompt: () => addPrompt,
  addRedirectUri: () => addRedirectUri,
  addRefreshToken: () => addRefreshToken,
  addRequestTokenUse: () => addRequestTokenUse,
  addResponseMode: () => addResponseMode,
  addResponseType: () => addResponseType,
  addScopes: () => addScopes,
  addServerTelemetry: () => addServerTelemetry,
  addSid: () => addSid,
  addSshJwk: () => addSshJwk,
  addState: () => addState,
  addThrottling: () => addThrottling,
  addUsername: () => addUsername,
  instrumentBrokerParams: () => instrumentBrokerParams
});

// node_modules/@azure/msal-common/dist/constants/AADServerParamKeys.mjs
var AADServerParamKeys_exports = {};
__export(AADServerParamKeys_exports, {
  ACCESS_TOKEN: () => ACCESS_TOKEN,
  BROKER_CLIENT_ID: () => BROKER_CLIENT_ID,
  BROKER_REDIRECT_URI: () => BROKER_REDIRECT_URI,
  CCS_HEADER: () => CCS_HEADER,
  CLAIMS: () => CLAIMS,
  CLIENT_ASSERTION: () => CLIENT_ASSERTION,
  CLIENT_ASSERTION_TYPE: () => CLIENT_ASSERTION_TYPE,
  CLIENT_ID: () => CLIENT_ID,
  CLIENT_INFO: () => CLIENT_INFO2,
  CLIENT_REQUEST_ID: () => CLIENT_REQUEST_ID,
  CLIENT_SECRET: () => CLIENT_SECRET,
  CODE: () => CODE,
  CODE_CHALLENGE: () => CODE_CHALLENGE,
  CODE_CHALLENGE_METHOD: () => CODE_CHALLENGE_METHOD,
  CODE_VERIFIER: () => CODE_VERIFIER,
  DEVICE_CODE: () => DEVICE_CODE,
  DOMAIN_HINT: () => DOMAIN_HINT,
  EAR_JWE_CRYPTO: () => EAR_JWE_CRYPTO,
  EAR_JWK: () => EAR_JWK,
  ERROR: () => ERROR,
  ERROR_DESCRIPTION: () => ERROR_DESCRIPTION,
  EXPIRES_IN: () => EXPIRES_IN,
  FOCI: () => FOCI,
  GRANT_TYPE: () => GRANT_TYPE,
  ID_TOKEN: () => ID_TOKEN,
  ID_TOKEN_HINT: () => ID_TOKEN_HINT,
  INSTANCE_AWARE: () => INSTANCE_AWARE,
  LOGIN_HINT: () => LOGIN_HINT,
  LOGOUT_HINT: () => LOGOUT_HINT,
  NATIVE_BROKER: () => NATIVE_BROKER,
  NONCE: () => NONCE,
  OBO_ASSERTION: () => OBO_ASSERTION,
  ON_BEHALF_OF: () => ON_BEHALF_OF,
  POST_LOGOUT_URI: () => POST_LOGOUT_URI,
  PROMPT: () => PROMPT,
  REDIRECT_URI: () => REDIRECT_URI,
  REFRESH_TOKEN: () => REFRESH_TOKEN,
  REFRESH_TOKEN_EXPIRES_IN: () => REFRESH_TOKEN_EXPIRES_IN,
  REQUESTED_TOKEN_USE: () => REQUESTED_TOKEN_USE,
  REQ_CNF: () => REQ_CNF,
  RESPONSE_MODE: () => RESPONSE_MODE,
  RESPONSE_TYPE: () => RESPONSE_TYPE,
  RETURN_SPA_CODE: () => RETURN_SPA_CODE,
  SCOPE: () => SCOPE,
  SESSION_STATE: () => SESSION_STATE,
  SID: () => SID,
  STATE: () => STATE,
  TOKEN_TYPE: () => TOKEN_TYPE,
  X_APP_NAME: () => X_APP_NAME,
  X_APP_VER: () => X_APP_VER,
  X_CLIENT_CPU: () => X_CLIENT_CPU,
  X_CLIENT_CURR_TELEM: () => X_CLIENT_CURR_TELEM,
  X_CLIENT_EXTRA_SKU: () => X_CLIENT_EXTRA_SKU,
  X_CLIENT_LAST_TELEM: () => X_CLIENT_LAST_TELEM,
  X_CLIENT_OS: () => X_CLIENT_OS,
  X_CLIENT_SKU: () => X_CLIENT_SKU,
  X_CLIENT_VER: () => X_CLIENT_VER,
  X_MS_LIB_CAPABILITY: () => X_MS_LIB_CAPABILITY
});
var CLIENT_ID = "client_id";
var REDIRECT_URI = "redirect_uri";
var RESPONSE_TYPE = "response_type";
var RESPONSE_MODE = "response_mode";
var GRANT_TYPE = "grant_type";
var CLAIMS = "claims";
var SCOPE = "scope";
var ERROR = "error";
var ERROR_DESCRIPTION = "error_description";
var ACCESS_TOKEN = "access_token";
var ID_TOKEN = "id_token";
var REFRESH_TOKEN = "refresh_token";
var EXPIRES_IN = "expires_in";
var REFRESH_TOKEN_EXPIRES_IN = "refresh_token_expires_in";
var STATE = "state";
var NONCE = "nonce";
var PROMPT = "prompt";
var SESSION_STATE = "session_state";
var CLIENT_INFO2 = "client_info";
var CODE = "code";
var CODE_CHALLENGE = "code_challenge";
var CODE_CHALLENGE_METHOD = "code_challenge_method";
var CODE_VERIFIER = "code_verifier";
var CLIENT_REQUEST_ID = "client-request-id";
var X_CLIENT_SKU = "x-client-SKU";
var X_CLIENT_VER = "x-client-VER";
var X_CLIENT_OS = "x-client-OS";
var X_CLIENT_CPU = "x-client-CPU";
var X_CLIENT_CURR_TELEM = "x-client-current-telemetry";
var X_CLIENT_LAST_TELEM = "x-client-last-telemetry";
var X_MS_LIB_CAPABILITY = "x-ms-lib-capability";
var X_APP_NAME = "x-app-name";
var X_APP_VER = "x-app-ver";
var POST_LOGOUT_URI = "post_logout_redirect_uri";
var ID_TOKEN_HINT = "id_token_hint";
var DEVICE_CODE = "device_code";
var CLIENT_SECRET = "client_secret";
var CLIENT_ASSERTION = "client_assertion";
var CLIENT_ASSERTION_TYPE = "client_assertion_type";
var TOKEN_TYPE = "token_type";
var REQ_CNF = "req_cnf";
var OBO_ASSERTION = "assertion";
var REQUESTED_TOKEN_USE = "requested_token_use";
var ON_BEHALF_OF = "on_behalf_of";
var FOCI = "foci";
var CCS_HEADER = "X-AnchorMailbox";
var RETURN_SPA_CODE = "return_spa_code";
var NATIVE_BROKER = "nativebroker";
var LOGOUT_HINT = "logout_hint";
var SID = "sid";
var LOGIN_HINT = "login_hint";
var DOMAIN_HINT = "domain_hint";
var X_CLIENT_EXTRA_SKU = "x-client-xtra-sku";
var BROKER_CLIENT_ID = "brk_client_id";
var BROKER_REDIRECT_URI = "brk_redirect_uri";
var INSTANCE_AWARE = "instance_aware";
var EAR_JWK = "ear_jwk";
var EAR_JWE_CRYPTO = "ear_jwe_crypto";

// node_modules/@azure/msal-common/dist/request/RequestParameterBuilder.mjs
function instrumentBrokerParams(parameters, correlationId, performanceClient) {
  if (!correlationId) {
    return;
  }
  const clientId = parameters.get(CLIENT_ID);
  if (clientId && parameters.has(BROKER_CLIENT_ID)) {
    performanceClient == null ? void 0 : performanceClient.addFields({
      embeddedClientId: clientId,
      embeddedRedirectUri: parameters.get(REDIRECT_URI)
    }, correlationId);
  }
}
function addResponseType(parameters, responseType) {
  parameters.set(RESPONSE_TYPE, responseType);
}
function addResponseMode(parameters, responseMode) {
  parameters.set(RESPONSE_MODE, responseMode ? responseMode : ResponseMode.QUERY);
}
function addNativeBroker(parameters) {
  parameters.set(NATIVE_BROKER, "1");
}
function addScopes(parameters, scopes, addOidcScopes = true, defaultScopes = OIDC_DEFAULT_SCOPES) {
  if (addOidcScopes && !defaultScopes.includes("openid") && !scopes.includes("openid")) {
    defaultScopes.push("openid");
  }
  const requestScopes = addOidcScopes ? [...scopes || [], ...defaultScopes] : scopes || [];
  const scopeSet = new ScopeSet(requestScopes);
  parameters.set(SCOPE, scopeSet.printScopes());
}
function addClientId(parameters, clientId) {
  parameters.set(CLIENT_ID, clientId);
}
function addRedirectUri(parameters, redirectUri) {
  parameters.set(REDIRECT_URI, redirectUri);
}
function addPostLogoutRedirectUri(parameters, redirectUri) {
  parameters.set(POST_LOGOUT_URI, redirectUri);
}
function addIdTokenHint(parameters, idTokenHint) {
  parameters.set(ID_TOKEN_HINT, idTokenHint);
}
function addDomainHint(parameters, domainHint) {
  parameters.set(DOMAIN_HINT, domainHint);
}
function addLoginHint(parameters, loginHint) {
  parameters.set(LOGIN_HINT, loginHint);
}
function addCcsUpn(parameters, loginHint) {
  parameters.set(HeaderNames.CCS_HEADER, `UPN:${loginHint}`);
}
function addCcsOid(parameters, clientInfo) {
  parameters.set(HeaderNames.CCS_HEADER, `Oid:${clientInfo.uid}@${clientInfo.utid}`);
}
function addSid(parameters, sid) {
  parameters.set(SID, sid);
}
function addClaims(parameters, claims, clientCapabilities) {
  const mergedClaims = addClientCapabilitiesToClaims(claims, clientCapabilities);
  try {
    JSON.parse(mergedClaims);
  } catch (e) {
    throw createClientConfigurationError(invalidClaims);
  }
  parameters.set(CLAIMS, mergedClaims);
}
function addCorrelationId(parameters, correlationId) {
  parameters.set(CLIENT_REQUEST_ID, correlationId);
}
function addLibraryInfo(parameters, libraryInfo) {
  parameters.set(X_CLIENT_SKU, libraryInfo.sku);
  parameters.set(X_CLIENT_VER, libraryInfo.version);
  if (libraryInfo.os) {
    parameters.set(X_CLIENT_OS, libraryInfo.os);
  }
  if (libraryInfo.cpu) {
    parameters.set(X_CLIENT_CPU, libraryInfo.cpu);
  }
}
function addApplicationTelemetry(parameters, appTelemetry) {
  if (appTelemetry == null ? void 0 : appTelemetry.appName) {
    parameters.set(X_APP_NAME, appTelemetry.appName);
  }
  if (appTelemetry == null ? void 0 : appTelemetry.appVersion) {
    parameters.set(X_APP_VER, appTelemetry.appVersion);
  }
}
function addPrompt(parameters, prompt) {
  parameters.set(PROMPT, prompt);
}
function addState(parameters, state) {
  if (state) {
    parameters.set(STATE, state);
  }
}
function addNonce(parameters, nonce) {
  parameters.set(NONCE, nonce);
}
function addCodeChallengeParams(parameters, codeChallenge, codeChallengeMethod) {
  if (codeChallenge && codeChallengeMethod) {
    parameters.set(CODE_CHALLENGE, codeChallenge);
    parameters.set(CODE_CHALLENGE_METHOD, codeChallengeMethod);
  } else {
    throw createClientConfigurationError(pkceParamsMissing);
  }
}
function addAuthorizationCode(parameters, code) {
  parameters.set(CODE, code);
}
function addDeviceCode(parameters, code) {
  parameters.set(DEVICE_CODE, code);
}
function addRefreshToken(parameters, refreshToken) {
  parameters.set(REFRESH_TOKEN, refreshToken);
}
function addCodeVerifier(parameters, codeVerifier) {
  parameters.set(CODE_VERIFIER, codeVerifier);
}
function addClientSecret(parameters, clientSecret) {
  parameters.set(CLIENT_SECRET, clientSecret);
}
function addClientAssertion(parameters, clientAssertion) {
  if (clientAssertion) {
    parameters.set(CLIENT_ASSERTION, clientAssertion);
  }
}
function addClientAssertionType(parameters, clientAssertionType) {
  if (clientAssertionType) {
    parameters.set(CLIENT_ASSERTION_TYPE, clientAssertionType);
  }
}
function addOboAssertion(parameters, oboAssertion) {
  parameters.set(OBO_ASSERTION, oboAssertion);
}
function addRequestTokenUse(parameters, tokenUse) {
  parameters.set(REQUESTED_TOKEN_USE, tokenUse);
}
function addGrantType(parameters, grantType) {
  parameters.set(GRANT_TYPE, grantType);
}
function addClientInfo(parameters) {
  parameters.set(CLIENT_INFO, "1");
}
function addInstanceAware(parameters) {
  if (!parameters.has(INSTANCE_AWARE)) {
    parameters.set(INSTANCE_AWARE, "true");
  }
}
function addExtraQueryParameters(parameters, eQParams) {
  Object.entries(eQParams).forEach(([key, value]) => {
    if (!parameters.has(key) && value) {
      parameters.set(key, value);
    }
  });
}
function addClientCapabilitiesToClaims(claims, clientCapabilities) {
  let mergedClaims;
  if (!claims) {
    mergedClaims = {};
  } else {
    try {
      mergedClaims = JSON.parse(claims);
    } catch (e) {
      throw createClientConfigurationError(invalidClaims);
    }
  }
  if (clientCapabilities && clientCapabilities.length > 0) {
    if (!mergedClaims.hasOwnProperty(ClaimsRequestKeys.ACCESS_TOKEN)) {
      mergedClaims[ClaimsRequestKeys.ACCESS_TOKEN] = {};
    }
    mergedClaims[ClaimsRequestKeys.ACCESS_TOKEN][ClaimsRequestKeys.XMS_CC] = {
      values: clientCapabilities
    };
  }
  return JSON.stringify(mergedClaims);
}
function addUsername(parameters, username) {
  parameters.set(PasswordGrantConstants.username, username);
}
function addPassword(parameters, password) {
  parameters.set(PasswordGrantConstants.password, password);
}
function addPopToken(parameters, cnfString) {
  if (cnfString) {
    parameters.set(TOKEN_TYPE, AuthenticationScheme.POP);
    parameters.set(REQ_CNF, cnfString);
  }
}
function addSshJwk(parameters, sshJwkString) {
  if (sshJwkString) {
    parameters.set(TOKEN_TYPE, AuthenticationScheme.SSH);
    parameters.set(REQ_CNF, sshJwkString);
  }
}
function addServerTelemetry(parameters, serverTelemetryManager) {
  parameters.set(X_CLIENT_CURR_TELEM, serverTelemetryManager.generateCurrentRequestHeaderValue());
  parameters.set(X_CLIENT_LAST_TELEM, serverTelemetryManager.generateLastRequestHeaderValue());
}
function addThrottling(parameters) {
  parameters.set(X_MS_LIB_CAPABILITY, ThrottlingConstants.X_MS_LIB_CAPABILITY_VALUE);
}
function addLogoutHint(parameters, logoutHint) {
  parameters.set(LOGOUT_HINT, logoutHint);
}
function addBrokerParameters(parameters, brokerClientId, brokerRedirectUri) {
  if (!parameters.has(BROKER_CLIENT_ID)) {
    parameters.set(BROKER_CLIENT_ID, brokerClientId);
  }
  if (!parameters.has(BROKER_REDIRECT_URI)) {
    parameters.set(BROKER_REDIRECT_URI, brokerRedirectUri);
  }
}
function addEARParameters(parameters, jwk) {
  parameters.set(EAR_JWK, encodeURIComponent(jwk));
  const jweCryptoB64Encoded = "eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0";
  parameters.set(EAR_JWE_CRYPTO, jweCryptoB64Encoded);
}

// node_modules/@azure/msal-common/dist/authority/AuthorityFactory.mjs
var AuthorityFactory_exports = {};
__export(AuthorityFactory_exports, {
  createDiscoveredInstance: () => createDiscoveredInstance
});

// node_modules/@azure/msal-common/dist/authority/OpenIdConfigResponse.mjs
function isOpenIdConfigResponse(response) {
  return response.hasOwnProperty("authorization_endpoint") && response.hasOwnProperty("token_endpoint") && response.hasOwnProperty("issuer") && response.hasOwnProperty("jwks_uri");
}

// node_modules/@azure/msal-common/dist/authority/CloudInstanceDiscoveryResponse.mjs
function isCloudInstanceDiscoveryResponse(response) {
  return response.hasOwnProperty("tenant_discovery_endpoint") && response.hasOwnProperty("metadata");
}

// node_modules/@azure/msal-common/dist/authority/CloudInstanceDiscoveryErrorResponse.mjs
function isCloudInstanceDiscoveryErrorResponse(response) {
  return response.hasOwnProperty("error") && response.hasOwnProperty("error_description");
}

// node_modules/@azure/msal-common/dist/telemetry/performance/PerformanceEvent.mjs
var PerformanceEvents = {
  /**
   * acquireTokenByCode API (msal-browser and msal-node).
   * Used to acquire tokens by trading an authorization code against the token endpoint.
   */
  AcquireTokenByCode: "acquireTokenByCode",
  /**
   * acquireTokenByRefreshToken API (msal-browser and msal-node).
   * Used to renew an access token using a refresh token against the token endpoint.
   */
  AcquireTokenByRefreshToken: "acquireTokenByRefreshToken",
  /**
   * acquireTokenSilent API (msal-browser and msal-node).
   * Used to silently acquire a new access token (from the cache or the network).
   */
  AcquireTokenSilent: "acquireTokenSilent",
  /**
   * acquireTokenSilentAsync (msal-browser).
   * Internal API for acquireTokenSilent.
   */
  AcquireTokenSilentAsync: "acquireTokenSilentAsync",
  /**
   * acquireTokenPopup (msal-browser).
   * Used to acquire a new access token interactively through pop ups
   */
  AcquireTokenPopup: "acquireTokenPopup",
  /**
   * acquireTokenPreRedirect (msal-browser).
   * First part of the redirect flow.
   * Used to acquire a new access token interactively through redirects.
   */
  AcquireTokenPreRedirect: "acquireTokenPreRedirect",
  /**
   * acquireTokenRedirect (msal-browser).
   * Second part of the redirect flow.
   * Used to acquire a new access token interactively through redirects.
   */
  AcquireTokenRedirect: "acquireTokenRedirect",
  /**
   * getPublicKeyThumbprint API in CryptoOpts class (msal-browser).
   * Used to generate a public/private keypair and generate a public key thumbprint for pop requests.
   */
  CryptoOptsGetPublicKeyThumbprint: "cryptoOptsGetPublicKeyThumbprint",
  /**
   * signJwt API in CryptoOpts class (msal-browser).
   * Used to signed a pop token.
   */
  CryptoOptsSignJwt: "cryptoOptsSignJwt",
  /**
   * acquireToken API in the SilentCacheClient class (msal-browser).
   * Used to read access tokens from the cache.
   */
  SilentCacheClientAcquireToken: "silentCacheClientAcquireToken",
  /**
   * acquireToken API in the SilentIframeClient class (msal-browser).
   * Used to acquire a new set of tokens from the authorize endpoint in a hidden iframe.
   */
  SilentIframeClientAcquireToken: "silentIframeClientAcquireToken",
  AwaitConcurrentIframe: "awaitConcurrentIframe",
  /**
   * acquireToken API in SilentRereshClient (msal-browser).
   * Used to acquire a new set of tokens from the token endpoint using a refresh token.
   */
  SilentRefreshClientAcquireToken: "silentRefreshClientAcquireToken",
  /**
   * ssoSilent API (msal-browser).
   * Used to silently acquire an authorization code and set of tokens using a hidden iframe.
   */
  SsoSilent: "ssoSilent",
  /**
   * getDiscoveredAuthority API in StandardInteractionClient class (msal-browser).
   * Used to load authority metadata for a request.
   */
  StandardInteractionClientGetDiscoveredAuthority: "standardInteractionClientGetDiscoveredAuthority",
  /**
   * acquireToken APIs in msal-browser.
   * Used to make an /authorize endpoint call with native brokering enabled.
   */
  FetchAccountIdWithNativeBroker: "fetchAccountIdWithNativeBroker",
  /**
   * acquireToken API in NativeInteractionClient class (msal-browser).
   * Used to acquire a token from Native component when native brokering is enabled.
   */
  NativeInteractionClientAcquireToken: "nativeInteractionClientAcquireToken",
  /**
   * Time spent creating default headers for requests to token endpoint
   */
  BaseClientCreateTokenRequestHeaders: "baseClientCreateTokenRequestHeaders",
  /**
   * Time spent sending/waiting for the response of a request to the token endpoint
   */
  NetworkClientSendPostRequestAsync: "networkClientSendPostRequestAsync",
  RefreshTokenClientExecutePostToTokenEndpoint: "refreshTokenClientExecutePostToTokenEndpoint",
  AuthorizationCodeClientExecutePostToTokenEndpoint: "authorizationCodeClientExecutePostToTokenEndpoint",
  /**
   * Used to measure the time taken for completing embedded-broker handshake (PW-Broker).
   */
  BrokerHandhshake: "brokerHandshake",
  /**
   * acquireTokenByRefreshToken API in BrokerClientApplication (PW-Broker) .
   */
  AcquireTokenByRefreshTokenInBroker: "acquireTokenByRefreshTokenInBroker",
  /**
   * Time taken for token acquisition by broker
   */
  AcquireTokenByBroker: "acquireTokenByBroker",
  /**
   * Time spent on the network for refresh token acquisition
   */
  RefreshTokenClientExecuteTokenRequest: "refreshTokenClientExecuteTokenRequest",
  /**
   * Time taken for acquiring refresh token , records RT size
   */
  RefreshTokenClientAcquireToken: "refreshTokenClientAcquireToken",
  /**
   * Time taken for acquiring cached refresh token
   */
  RefreshTokenClientAcquireTokenWithCachedRefreshToken: "refreshTokenClientAcquireTokenWithCachedRefreshToken",
  /**
   * acquireTokenByRefreshToken API in RefreshTokenClient (msal-common).
   */
  RefreshTokenClientAcquireTokenByRefreshToken: "refreshTokenClientAcquireTokenByRefreshToken",
  /**
   * Helper function to create token request body in RefreshTokenClient (msal-common).
   */
  RefreshTokenClientCreateTokenRequestBody: "refreshTokenClientCreateTokenRequestBody",
  /**
   * acquireTokenFromCache (msal-browser).
   * Internal API for acquiring token from cache
   */
  AcquireTokenFromCache: "acquireTokenFromCache",
  SilentFlowClientAcquireCachedToken: "silentFlowClientAcquireCachedToken",
  SilentFlowClientGenerateResultFromCacheRecord: "silentFlowClientGenerateResultFromCacheRecord",
  /**
   * acquireTokenBySilentIframe (msal-browser).
   * Internal API for acquiring token by silent Iframe
   */
  AcquireTokenBySilentIframe: "acquireTokenBySilentIframe",
  /**
   * Internal API for initializing base request in BaseInteractionClient (msal-browser)
   */
  InitializeBaseRequest: "initializeBaseRequest",
  /**
   * Internal API for initializing silent request in SilentCacheClient (msal-browser)
   */
  InitializeSilentRequest: "initializeSilentRequest",
  InitializeClientApplication: "initializeClientApplication",
  InitializeCache: "initializeCache",
  /**
   * Helper function in SilentIframeClient class (msal-browser).
   */
  SilentIframeClientTokenHelper: "silentIframeClientTokenHelper",
  /**
   * SilentHandler
   */
  SilentHandlerInitiateAuthRequest: "silentHandlerInitiateAuthRequest",
  SilentHandlerMonitorIframeForHash: "silentHandlerMonitorIframeForHash",
  SilentHandlerLoadFrame: "silentHandlerLoadFrame",
  SilentHandlerLoadFrameSync: "silentHandlerLoadFrameSync",
  /**
   * Helper functions in StandardInteractionClient class (msal-browser)
   */
  StandardInteractionClientCreateAuthCodeClient: "standardInteractionClientCreateAuthCodeClient",
  StandardInteractionClientGetClientConfiguration: "standardInteractionClientGetClientConfiguration",
  StandardInteractionClientInitializeAuthorizationRequest: "standardInteractionClientInitializeAuthorizationRequest",
  /**
   * getAuthCodeUrl API (msal-browser and msal-node).
   */
  GetAuthCodeUrl: "getAuthCodeUrl",
  GetStandardParams: "getStandardParams",
  /**
   * Functions from InteractionHandler (msal-browser)
   */
  HandleCodeResponseFromServer: "handleCodeResponseFromServer",
  HandleCodeResponse: "handleCodeResponse",
  HandleResponseEar: "handleResponseEar",
  HandleResponsePlatformBroker: "handleResponsePlatformBroker",
  HandleResponseCode: "handleResponseCode",
  UpdateTokenEndpointAuthority: "updateTokenEndpointAuthority",
  /**
   * APIs in Authorization Code Client (msal-common)
   */
  AuthClientAcquireToken: "authClientAcquireToken",
  AuthClientExecuteTokenRequest: "authClientExecuteTokenRequest",
  AuthClientCreateTokenRequestBody: "authClientCreateTokenRequestBody",
  /**
   * Generate functions in PopTokenGenerator (msal-common)
   */
  PopTokenGenerateCnf: "popTokenGenerateCnf",
  PopTokenGenerateKid: "popTokenGenerateKid",
  /**
   * handleServerTokenResponse API in ResponseHandler (msal-common)
   */
  HandleServerTokenResponse: "handleServerTokenResponse",
  DeserializeResponse: "deserializeResponse",
  /**
   * Authority functions
   */
  AuthorityFactoryCreateDiscoveredInstance: "authorityFactoryCreateDiscoveredInstance",
  AuthorityResolveEndpointsAsync: "authorityResolveEndpointsAsync",
  AuthorityResolveEndpointsFromLocalSources: "authorityResolveEndpointsFromLocalSources",
  AuthorityGetCloudDiscoveryMetadataFromNetwork: "authorityGetCloudDiscoveryMetadataFromNetwork",
  AuthorityUpdateCloudDiscoveryMetadata: "authorityUpdateCloudDiscoveryMetadata",
  AuthorityGetEndpointMetadataFromNetwork: "authorityGetEndpointMetadataFromNetwork",
  AuthorityUpdateEndpointMetadata: "authorityUpdateEndpointMetadata",
  AuthorityUpdateMetadataWithRegionalInformation: "authorityUpdateMetadataWithRegionalInformation",
  /**
   * Region Discovery functions
   */
  RegionDiscoveryDetectRegion: "regionDiscoveryDetectRegion",
  RegionDiscoveryGetRegionFromIMDS: "regionDiscoveryGetRegionFromIMDS",
  RegionDiscoveryGetCurrentVersion: "regionDiscoveryGetCurrentVersion",
  AcquireTokenByCodeAsync: "acquireTokenByCodeAsync",
  GetEndpointMetadataFromNetwork: "getEndpointMetadataFromNetwork",
  GetCloudDiscoveryMetadataFromNetworkMeasurement: "getCloudDiscoveryMetadataFromNetworkMeasurement",
  HandleRedirectPromiseMeasurement: "handleRedirectPromise",
  HandleNativeRedirectPromiseMeasurement: "handleNativeRedirectPromise",
  UpdateCloudDiscoveryMetadataMeasurement: "updateCloudDiscoveryMetadataMeasurement",
  UsernamePasswordClientAcquireToken: "usernamePasswordClientAcquireToken",
  NativeMessageHandlerHandshake: "nativeMessageHandlerHandshake",
  NativeGenerateAuthResult: "nativeGenerateAuthResult",
  RemoveHiddenIframe: "removeHiddenIframe",
  /**
   * Cache operations
   */
  ClearTokensAndKeysWithClaims: "clearTokensAndKeysWithClaims",
  CacheManagerGetRefreshToken: "cacheManagerGetRefreshToken",
  ImportExistingCache: "importExistingCache",
  SetUserData: "setUserData",
  LocalStorageUpdated: "localStorageUpdated",
  /**
   * Crypto Operations
   */
  GeneratePkceCodes: "generatePkceCodes",
  GenerateCodeVerifier: "generateCodeVerifier",
  GenerateCodeChallengeFromVerifier: "generateCodeChallengeFromVerifier",
  Sha256Digest: "sha256Digest",
  GetRandomValues: "getRandomValues",
  GenerateHKDF: "generateHKDF",
  GenerateBaseKey: "generateBaseKey",
  Base64Decode: "base64Decode",
  UrlEncodeArr: "urlEncodeArr",
  Encrypt: "encrypt",
  Decrypt: "decrypt",
  GenerateEarKey: "generateEarKey",
  DecryptEarResponse: "decryptEarResponse"
};
var PerformanceEventAbbreviations = /* @__PURE__ */ new Map([
  [PerformanceEvents.AcquireTokenByCode, "ATByCode"],
  [PerformanceEvents.AcquireTokenByRefreshToken, "ATByRT"],
  [PerformanceEvents.AcquireTokenSilent, "ATS"],
  [PerformanceEvents.AcquireTokenSilentAsync, "ATSAsync"],
  [PerformanceEvents.AcquireTokenPopup, "ATPopup"],
  [PerformanceEvents.AcquireTokenRedirect, "ATRedirect"],
  [
    PerformanceEvents.CryptoOptsGetPublicKeyThumbprint,
    "CryptoGetPKThumb"
  ],
  [PerformanceEvents.CryptoOptsSignJwt, "CryptoSignJwt"],
  [PerformanceEvents.SilentCacheClientAcquireToken, "SltCacheClientAT"],
  [PerformanceEvents.SilentIframeClientAcquireToken, "SltIframeClientAT"],
  [PerformanceEvents.SilentRefreshClientAcquireToken, "SltRClientAT"],
  [PerformanceEvents.SsoSilent, "SsoSlt"],
  [
    PerformanceEvents.StandardInteractionClientGetDiscoveredAuthority,
    "StdIntClientGetDiscAuth"
  ],
  [
    PerformanceEvents.FetchAccountIdWithNativeBroker,
    "FetchAccIdWithNtvBroker"
  ],
  [
    PerformanceEvents.NativeInteractionClientAcquireToken,
    "NtvIntClientAT"
  ],
  [
    PerformanceEvents.BaseClientCreateTokenRequestHeaders,
    "BaseClientCreateTReqHead"
  ],
  [
    PerformanceEvents.NetworkClientSendPostRequestAsync,
    "NetClientSendPost"
  ],
  [
    PerformanceEvents.RefreshTokenClientExecutePostToTokenEndpoint,
    "RTClientExecPost"
  ],
  [
    PerformanceEvents.AuthorizationCodeClientExecutePostToTokenEndpoint,
    "AuthCodeClientExecPost"
  ],
  [PerformanceEvents.BrokerHandhshake, "BrokerHandshake"],
  [
    PerformanceEvents.AcquireTokenByRefreshTokenInBroker,
    "ATByRTInBroker"
  ],
  [PerformanceEvents.AcquireTokenByBroker, "ATByBroker"],
  [
    PerformanceEvents.RefreshTokenClientExecuteTokenRequest,
    "RTClientExecTReq"
  ],
  [PerformanceEvents.RefreshTokenClientAcquireToken, "RTClientAT"],
  [
    PerformanceEvents.RefreshTokenClientAcquireTokenWithCachedRefreshToken,
    "RTClientATWithCachedRT"
  ],
  [
    PerformanceEvents.RefreshTokenClientAcquireTokenByRefreshToken,
    "RTClientATByRT"
  ],
  [
    PerformanceEvents.RefreshTokenClientCreateTokenRequestBody,
    "RTClientCreateTReqBody"
  ],
  [PerformanceEvents.AcquireTokenFromCache, "ATFromCache"],
  [
    PerformanceEvents.SilentFlowClientAcquireCachedToken,
    "SltFlowClientATCached"
  ],
  [
    PerformanceEvents.SilentFlowClientGenerateResultFromCacheRecord,
    "SltFlowClientGenResFromCache"
  ],
  [PerformanceEvents.AcquireTokenBySilentIframe, "ATBySltIframe"],
  [PerformanceEvents.InitializeBaseRequest, "InitBaseReq"],
  [PerformanceEvents.InitializeSilentRequest, "InitSltReq"],
  [
    PerformanceEvents.InitializeClientApplication,
    "InitClientApplication"
  ],
  [PerformanceEvents.InitializeCache, "InitCache"],
  [PerformanceEvents.ImportExistingCache, "importCache"],
  [PerformanceEvents.SetUserData, "setUserData"],
  [PerformanceEvents.LocalStorageUpdated, "localStorageUpdated"],
  [PerformanceEvents.SilentIframeClientTokenHelper, "SIClientTHelper"],
  [
    PerformanceEvents.SilentHandlerInitiateAuthRequest,
    "SHandlerInitAuthReq"
  ],
  [
    PerformanceEvents.SilentHandlerMonitorIframeForHash,
    "SltHandlerMonitorIframeForHash"
  ],
  [PerformanceEvents.SilentHandlerLoadFrame, "SHandlerLoadFrame"],
  [PerformanceEvents.SilentHandlerLoadFrameSync, "SHandlerLoadFrameSync"],
  [
    PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,
    "StdIntClientCreateAuthCodeClient"
  ],
  [
    PerformanceEvents.StandardInteractionClientGetClientConfiguration,
    "StdIntClientGetClientConf"
  ],
  [
    PerformanceEvents.StandardInteractionClientInitializeAuthorizationRequest,
    "StdIntClientInitAuthReq"
  ],
  [PerformanceEvents.GetAuthCodeUrl, "GetAuthCodeUrl"],
  [
    PerformanceEvents.HandleCodeResponseFromServer,
    "HandleCodeResFromServer"
  ],
  [PerformanceEvents.HandleCodeResponse, "HandleCodeResp"],
  [PerformanceEvents.HandleResponseEar, "HandleRespEar"],
  [PerformanceEvents.HandleResponseCode, "HandleRespCode"],
  [
    PerformanceEvents.HandleResponsePlatformBroker,
    "HandleRespPlatBroker"
  ],
  [PerformanceEvents.UpdateTokenEndpointAuthority, "UpdTEndpointAuth"],
  [PerformanceEvents.AuthClientAcquireToken, "AuthClientAT"],
  [PerformanceEvents.AuthClientExecuteTokenRequest, "AuthClientExecTReq"],
  [
    PerformanceEvents.AuthClientCreateTokenRequestBody,
    "AuthClientCreateTReqBody"
  ],
  [PerformanceEvents.PopTokenGenerateCnf, "PopTGenCnf"],
  [PerformanceEvents.PopTokenGenerateKid, "PopTGenKid"],
  [PerformanceEvents.HandleServerTokenResponse, "HandleServerTRes"],
  [PerformanceEvents.DeserializeResponse, "DeserializeRes"],
  [
    PerformanceEvents.AuthorityFactoryCreateDiscoveredInstance,
    "AuthFactCreateDiscInst"
  ],
  [
    PerformanceEvents.AuthorityResolveEndpointsAsync,
    "AuthResolveEndpointsAsync"
  ],
  [
    PerformanceEvents.AuthorityResolveEndpointsFromLocalSources,
    "AuthResolveEndpointsFromLocal"
  ],
  [
    PerformanceEvents.AuthorityGetCloudDiscoveryMetadataFromNetwork,
    "AuthGetCDMetaFromNet"
  ],
  [
    PerformanceEvents.AuthorityUpdateCloudDiscoveryMetadata,
    "AuthUpdCDMeta"
  ],
  [
    PerformanceEvents.AuthorityGetEndpointMetadataFromNetwork,
    "AuthUpdCDMetaFromNet"
  ],
  [
    PerformanceEvents.AuthorityUpdateEndpointMetadata,
    "AuthUpdEndpointMeta"
  ],
  [
    PerformanceEvents.AuthorityUpdateMetadataWithRegionalInformation,
    "AuthUpdMetaWithRegInfo"
  ],
  [PerformanceEvents.RegionDiscoveryDetectRegion, "RegDiscDetectReg"],
  [
    PerformanceEvents.RegionDiscoveryGetRegionFromIMDS,
    "RegDiscGetRegFromIMDS"
  ],
  [
    PerformanceEvents.RegionDiscoveryGetCurrentVersion,
    "RegDiscGetCurrentVer"
  ],
  [PerformanceEvents.AcquireTokenByCodeAsync, "ATByCodeAsync"],
  [
    PerformanceEvents.GetEndpointMetadataFromNetwork,
    "GetEndpointMetaFromNet"
  ],
  [
    PerformanceEvents.GetCloudDiscoveryMetadataFromNetworkMeasurement,
    "GetCDMetaFromNet"
  ],
  [
    PerformanceEvents.HandleRedirectPromiseMeasurement,
    "HandleRedirectPromise"
  ],
  [
    PerformanceEvents.HandleNativeRedirectPromiseMeasurement,
    "HandleNtvRedirectPromise"
  ],
  [
    PerformanceEvents.UpdateCloudDiscoveryMetadataMeasurement,
    "UpdateCDMeta"
  ],
  [
    PerformanceEvents.UsernamePasswordClientAcquireToken,
    "UserPassClientAT"
  ],
  [
    PerformanceEvents.NativeMessageHandlerHandshake,
    "NtvMsgHandlerHandshake"
  ],
  [PerformanceEvents.NativeGenerateAuthResult, "NtvGenAuthRes"],
  [PerformanceEvents.RemoveHiddenIframe, "RemoveHiddenIframe"],
  [
    PerformanceEvents.ClearTokensAndKeysWithClaims,
    "ClearTAndKeysWithClaims"
  ],
  [PerformanceEvents.CacheManagerGetRefreshToken, "CacheManagerGetRT"],
  [PerformanceEvents.GeneratePkceCodes, "GenPkceCodes"],
  [PerformanceEvents.GenerateCodeVerifier, "GenCodeVerifier"],
  [
    PerformanceEvents.GenerateCodeChallengeFromVerifier,
    "GenCodeChallengeFromVerifier"
  ],
  [PerformanceEvents.Sha256Digest, "Sha256Digest"],
  [PerformanceEvents.GetRandomValues, "GetRandomValues"],
  [PerformanceEvents.GenerateHKDF, "genHKDF"],
  [PerformanceEvents.GenerateBaseKey, "genBaseKey"],
  [PerformanceEvents.Base64Decode, "b64Decode"],
  [PerformanceEvents.UrlEncodeArr, "urlEncArr"],
  [PerformanceEvents.Encrypt, "encrypt"],
  [PerformanceEvents.Decrypt, "decrypt"],
  [PerformanceEvents.GenerateEarKey, "genEarKey"],
  [PerformanceEvents.DecryptEarResponse, "decryptEarResp"]
]);

// node_modules/@azure/msal-common/dist/utils/FunctionWrappers.mjs
var invoke = (callback, eventName, logger, telemetryClient, correlationId) => {
  return (...args) => {
    logger.trace(`Executing function ${eventName}`);
    const inProgressEvent = telemetryClient == null ? void 0 : telemetryClient.startMeasurement(eventName, correlationId);
    if (correlationId) {
      const eventCount = eventName + "CallCount";
      telemetryClient == null ? void 0 : telemetryClient.incrementFields({ [eventCount]: 1 }, correlationId);
    }
    try {
      const result = callback(...args);
      inProgressEvent == null ? void 0 : inProgressEvent.end({
        success: true
      });
      logger.trace(`Returning result from ${eventName}`);
      return result;
    } catch (e) {
      logger.trace(`Error occurred in ${eventName}`);
      try {
        logger.trace(JSON.stringify(e));
      } catch (e2) {
        logger.trace("Unable to print error message.");
      }
      inProgressEvent == null ? void 0 : inProgressEvent.end({
        success: false
      }, e);
      throw e;
    }
  };
};
var invokeAsync = (callback, eventName, logger, telemetryClient, correlationId) => {
  return (...args) => {
    logger.trace(`Executing function ${eventName}`);
    const inProgressEvent = telemetryClient == null ? void 0 : telemetryClient.startMeasurement(eventName, correlationId);
    if (correlationId) {
      const eventCount = eventName + "CallCount";
      telemetryClient == null ? void 0 : telemetryClient.incrementFields({ [eventCount]: 1 }, correlationId);
    }
    telemetryClient == null ? void 0 : telemetryClient.setPreQueueTime(eventName, correlationId);
    return callback(...args).then((response) => {
      logger.trace(`Returning result from ${eventName}`);
      inProgressEvent == null ? void 0 : inProgressEvent.end({
        success: true
      });
      return response;
    }).catch((e) => {
      logger.trace(`Error occurred in ${eventName}`);
      try {
        logger.trace(JSON.stringify(e));
      } catch (e2) {
        logger.trace("Unable to print error message.");
      }
      inProgressEvent == null ? void 0 : inProgressEvent.end({
        success: false
      }, e);
      throw e;
    });
  };
};

// node_modules/@azure/msal-common/dist/authority/RegionDiscovery.mjs
var RegionDiscovery = class _RegionDiscovery {
  constructor(networkInterface, logger, performanceClient, correlationId) {
    this.networkInterface = networkInterface;
    this.logger = logger;
    this.performanceClient = performanceClient;
    this.correlationId = correlationId;
  }
  /**
   * Detect the region from the application's environment.
   *
   * @returns Promise<string | null>
   */
  async detectRegion(environmentRegion, regionDiscoveryMetadata) {
    var _a;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.RegionDiscoveryDetectRegion, this.correlationId);
    let autodetectedRegionName = environmentRegion;
    if (!autodetectedRegionName) {
      const options = _RegionDiscovery.IMDS_OPTIONS;
      try {
        const localIMDSVersionResponse = await invokeAsync(this.getRegionFromIMDS.bind(this), PerformanceEvents.RegionDiscoveryGetRegionFromIMDS, this.logger, this.performanceClient, this.correlationId)(Constants.IMDS_VERSION, options);
        if (localIMDSVersionResponse.status === ResponseCodes.httpSuccess) {
          autodetectedRegionName = localIMDSVersionResponse.body;
          regionDiscoveryMetadata.region_source = RegionDiscoverySources.IMDS;
        }
        if (localIMDSVersionResponse.status === ResponseCodes.httpBadRequest) {
          const currentIMDSVersion = await invokeAsync(this.getCurrentVersion.bind(this), PerformanceEvents.RegionDiscoveryGetCurrentVersion, this.logger, this.performanceClient, this.correlationId)(options);
          if (!currentIMDSVersion) {
            regionDiscoveryMetadata.region_source = RegionDiscoverySources.FAILED_AUTO_DETECTION;
            return null;
          }
          const currentIMDSVersionResponse = await invokeAsync(this.getRegionFromIMDS.bind(this), PerformanceEvents.RegionDiscoveryGetRegionFromIMDS, this.logger, this.performanceClient, this.correlationId)(currentIMDSVersion, options);
          if (currentIMDSVersionResponse.status === ResponseCodes.httpSuccess) {
            autodetectedRegionName = currentIMDSVersionResponse.body;
            regionDiscoveryMetadata.region_source = RegionDiscoverySources.IMDS;
          }
        }
      } catch (e) {
        regionDiscoveryMetadata.region_source = RegionDiscoverySources.FAILED_AUTO_DETECTION;
        return null;
      }
    } else {
      regionDiscoveryMetadata.region_source = RegionDiscoverySources.ENVIRONMENT_VARIABLE;
    }
    if (!autodetectedRegionName) {
      regionDiscoveryMetadata.region_source = RegionDiscoverySources.FAILED_AUTO_DETECTION;
    }
    return autodetectedRegionName || null;
  }
  /**
   * Make the call to the IMDS endpoint
   *
   * @param imdsEndpointUrl
   * @returns Promise<NetworkResponse<string>>
   */
  async getRegionFromIMDS(version3, options) {
    var _a;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.RegionDiscoveryGetRegionFromIMDS, this.correlationId);
    return this.networkInterface.sendGetRequestAsync(`${Constants.IMDS_ENDPOINT}?api-version=${version3}&format=text`, options, Constants.IMDS_TIMEOUT);
  }
  /**
   * Get the most recent version of the IMDS endpoint available
   *
   * @returns Promise<string | null>
   */
  async getCurrentVersion(options) {
    var _a;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.RegionDiscoveryGetCurrentVersion, this.correlationId);
    try {
      const response = await this.networkInterface.sendGetRequestAsync(`${Constants.IMDS_ENDPOINT}?format=json`, options);
      if (response.status === ResponseCodes.httpBadRequest && response.body && response.body["newest-versions"] && response.body["newest-versions"].length > 0) {
        return response.body["newest-versions"][0];
      }
      return null;
    } catch (e) {
      return null;
    }
  }
};
RegionDiscovery.IMDS_OPTIONS = {
  headers: {
    Metadata: "true"
  }
};

// node_modules/@azure/msal-common/dist/authority/Authority.mjs
var Authority = class _Authority {
  constructor(authority, networkInterface, cacheManager, authorityOptions, logger, correlationId, performanceClient, managedIdentity) {
    this.canonicalAuthority = authority;
    this._canonicalAuthority.validateAsUri();
    this.networkInterface = networkInterface;
    this.cacheManager = cacheManager;
    this.authorityOptions = authorityOptions;
    this.regionDiscoveryMetadata = {
      region_used: void 0,
      region_source: void 0,
      region_outcome: void 0
    };
    this.logger = logger;
    this.performanceClient = performanceClient;
    this.correlationId = correlationId;
    this.managedIdentity = managedIdentity || false;
    this.regionDiscovery = new RegionDiscovery(networkInterface, this.logger, this.performanceClient, this.correlationId);
  }
  /**
   * Get {@link AuthorityType}
   * @param authorityUri {@link IUri}
   * @private
   */
  getAuthorityType(authorityUri) {
    if (authorityUri.HostNameAndPort.endsWith(Constants.CIAM_AUTH_URL)) {
      return AuthorityType.Ciam;
    }
    const pathSegments = authorityUri.PathSegments;
    if (pathSegments.length) {
      switch (pathSegments[0].toLowerCase()) {
        case Constants.ADFS:
          return AuthorityType.Adfs;
        case Constants.DSTS:
          return AuthorityType.Dsts;
      }
    }
    return AuthorityType.Default;
  }
  // See above for AuthorityType
  get authorityType() {
    return this.getAuthorityType(this.canonicalAuthorityUrlComponents);
  }
  /**
   * ProtocolMode enum representing the way endpoints are constructed.
   */
  get protocolMode() {
    return this.authorityOptions.protocolMode;
  }
  /**
   * Returns authorityOptions which can be used to reinstantiate a new authority instance
   */
  get options() {
    return this.authorityOptions;
  }
  /**
   * A URL that is the authority set by the developer
   */
  get canonicalAuthority() {
    return this._canonicalAuthority.urlString;
  }
  /**
   * Sets canonical authority.
   */
  set canonicalAuthority(url) {
    this._canonicalAuthority = new UrlString(url);
    this._canonicalAuthority.validateAsUri();
    this._canonicalAuthorityUrlComponents = null;
  }
  /**
   * Get authority components.
   */
  get canonicalAuthorityUrlComponents() {
    if (!this._canonicalAuthorityUrlComponents) {
      this._canonicalAuthorityUrlComponents = this._canonicalAuthority.getUrlComponents();
    }
    return this._canonicalAuthorityUrlComponents;
  }
  /**
   * Get hostname and port i.e. login.microsoftonline.com
   */
  get hostnameAndPort() {
    return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase();
  }
  /**
   * Get tenant for authority.
   */
  get tenant() {
    return this.canonicalAuthorityUrlComponents.PathSegments[0];
  }
  /**
   * OAuth /authorize endpoint for requests
   */
  get authorizationEndpoint() {
    if (this.discoveryComplete()) {
      return this.replacePath(this.metadata.authorization_endpoint);
    } else {
      throw createClientAuthError(endpointResolutionError);
    }
  }
  /**
   * OAuth /token endpoint for requests
   */
  get tokenEndpoint() {
    if (this.discoveryComplete()) {
      return this.replacePath(this.metadata.token_endpoint);
    } else {
      throw createClientAuthError(endpointResolutionError);
    }
  }
  get deviceCodeEndpoint() {
    if (this.discoveryComplete()) {
      return this.replacePath(this.metadata.token_endpoint.replace("/token", "/devicecode"));
    } else {
      throw createClientAuthError(endpointResolutionError);
    }
  }
  /**
   * OAuth logout endpoint for requests
   */
  get endSessionEndpoint() {
    if (this.discoveryComplete()) {
      if (!this.metadata.end_session_endpoint) {
        throw createClientAuthError(endSessionEndpointNotSupported);
      }
      return this.replacePath(this.metadata.end_session_endpoint);
    } else {
      throw createClientAuthError(endpointResolutionError);
    }
  }
  /**
   * OAuth issuer for requests
   */
  get selfSignedJwtAudience() {
    if (this.discoveryComplete()) {
      return this.replacePath(this.metadata.issuer);
    } else {
      throw createClientAuthError(endpointResolutionError);
    }
  }
  /**
   * Jwks_uri for token signing keys
   */
  get jwksUri() {
    if (this.discoveryComplete()) {
      return this.replacePath(this.metadata.jwks_uri);
    } else {
      throw createClientAuthError(endpointResolutionError);
    }
  }
  /**
   * Returns a flag indicating that tenant name can be replaced in authority {@link IUri}
   * @param authorityUri {@link IUri}
   * @private
   */
  canReplaceTenant(authorityUri) {
    return authorityUri.PathSegments.length === 1 && !_Authority.reservedTenantDomains.has(authorityUri.PathSegments[0]) && this.getAuthorityType(authorityUri) === AuthorityType.Default && this.protocolMode !== ProtocolMode.OIDC;
  }
  /**
   * Replaces tenant in url path with current tenant. Defaults to common.
   * @param urlString
   */
  replaceTenant(urlString) {
    return urlString.replace(/{tenant}|{tenantid}/g, this.tenant);
  }
  /**
   * Replaces path such as tenant or policy with the current tenant or policy.
   * @param urlString
   */
  replacePath(urlString) {
    let endpoint = urlString;
    const cachedAuthorityUrl = new UrlString(this.metadata.canonical_authority);
    const cachedAuthorityUrlComponents = cachedAuthorityUrl.getUrlComponents();
    const cachedAuthorityParts = cachedAuthorityUrlComponents.PathSegments;
    const currentAuthorityParts = this.canonicalAuthorityUrlComponents.PathSegments;
    currentAuthorityParts.forEach((currentPart, index) => {
      let cachedPart = cachedAuthorityParts[index];
      if (index === 0 && this.canReplaceTenant(cachedAuthorityUrlComponents)) {
        const tenantId = new UrlString(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];
        if (cachedPart !== tenantId) {
          this.logger.verbose(`Replacing tenant domain name ${cachedPart} with id ${tenantId}`);
          cachedPart = tenantId;
        }
      }
      if (currentPart !== cachedPart) {
        endpoint = endpoint.replace(`/${cachedPart}/`, `/${currentPart}/`);
      }
    });
    return this.replaceTenant(endpoint);
  }
  /**
   * The default open id configuration endpoint for any canonical authority.
   */
  get defaultOpenIdConfigurationEndpoint() {
    const canonicalAuthorityHost = this.hostnameAndPort;
    if (this.canonicalAuthority.endsWith("v2.0/") || this.authorityType === AuthorityType.Adfs || this.protocolMode === ProtocolMode.OIDC && !this.isAliasOfKnownMicrosoftAuthority(canonicalAuthorityHost)) {
      return `${this.canonicalAuthority}.well-known/openid-configuration`;
    }
    return `${this.canonicalAuthority}v2.0/.well-known/openid-configuration`;
  }
  /**
   * Boolean that returns whether or not tenant discovery has been completed.
   */
  discoveryComplete() {
    return !!this.metadata;
  }
  /**
   * Perform endpoint discovery to discover aliases, preferred_cache, preferred_network
   * and the /authorize, /token and logout endpoints.
   */
  async resolveEndpointsAsync() {
    var _a, _b;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.AuthorityResolveEndpointsAsync, this.correlationId);
    const metadataEntity = this.getCurrentMetadataEntity();
    const cloudDiscoverySource = await invokeAsync(this.updateCloudDiscoveryMetadata.bind(this), PerformanceEvents.AuthorityUpdateCloudDiscoveryMetadata, this.logger, this.performanceClient, this.correlationId)(metadataEntity);
    this.canonicalAuthority = this.canonicalAuthority.replace(this.hostnameAndPort, metadataEntity.preferred_network);
    const endpointSource = await invokeAsync(this.updateEndpointMetadata.bind(this), PerformanceEvents.AuthorityUpdateEndpointMetadata, this.logger, this.performanceClient, this.correlationId)(metadataEntity);
    this.updateCachedMetadata(metadataEntity, cloudDiscoverySource, {
      source: endpointSource
    });
    (_b = this.performanceClient) == null ? void 0 : _b.addFields({
      cloudDiscoverySource,
      authorityEndpointSource: endpointSource
    }, this.correlationId);
  }
  /**
   * Returns metadata entity from cache if it exists, otherwiser returns a new metadata entity built
   * from the configured canonical authority
   * @returns
   */
  getCurrentMetadataEntity() {
    let metadataEntity = this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);
    if (!metadataEntity) {
      metadataEntity = {
        aliases: [],
        preferred_cache: this.hostnameAndPort,
        preferred_network: this.hostnameAndPort,
        canonical_authority: this.canonicalAuthority,
        authorization_endpoint: "",
        token_endpoint: "",
        end_session_endpoint: "",
        issuer: "",
        aliasesFromNetwork: false,
        endpointsFromNetwork: false,
        expiresAt: generateAuthorityMetadataExpiresAt(),
        jwks_uri: ""
      };
    }
    return metadataEntity;
  }
  /**
   * Updates cached metadata based on metadata source and sets the instance's metadata
   * property to the same value
   * @param metadataEntity
   * @param cloudDiscoverySource
   * @param endpointMetadataResult
   */
  updateCachedMetadata(metadataEntity, cloudDiscoverySource, endpointMetadataResult) {
    if (cloudDiscoverySource !== AuthorityMetadataSource.CACHE && (endpointMetadataResult == null ? void 0 : endpointMetadataResult.source) !== AuthorityMetadataSource.CACHE) {
      metadataEntity.expiresAt = generateAuthorityMetadataExpiresAt();
      metadataEntity.canonical_authority = this.canonicalAuthority;
    }
    const cacheKey = this.cacheManager.generateAuthorityMetadataCacheKey(metadataEntity.preferred_cache);
    this.cacheManager.setAuthorityMetadata(cacheKey, metadataEntity);
    this.metadata = metadataEntity;
  }
  /**
   * Update AuthorityMetadataEntity with new endpoints and return where the information came from
   * @param metadataEntity
   */
  async updateEndpointMetadata(metadataEntity) {
    var _a, _b, _c;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.AuthorityUpdateEndpointMetadata, this.correlationId);
    const localMetadata = this.updateEndpointMetadataFromLocalSources(metadataEntity);
    if (localMetadata) {
      if (localMetadata.source === AuthorityMetadataSource.HARDCODED_VALUES) {
        if ((_b = this.authorityOptions.azureRegionConfiguration) == null ? void 0 : _b.azureRegion) {
          if (localMetadata.metadata) {
            const hardcodedMetadata = await invokeAsync(this.updateMetadataWithRegionalInformation.bind(this), PerformanceEvents.AuthorityUpdateMetadataWithRegionalInformation, this.logger, this.performanceClient, this.correlationId)(localMetadata.metadata);
            updateAuthorityEndpointMetadata(metadataEntity, hardcodedMetadata, false);
            metadataEntity.canonical_authority = this.canonicalAuthority;
          }
        }
      }
      return localMetadata.source;
    }
    let metadata = await invokeAsync(this.getEndpointMetadataFromNetwork.bind(this), PerformanceEvents.AuthorityGetEndpointMetadataFromNetwork, this.logger, this.performanceClient, this.correlationId)();
    if (metadata) {
      if ((_c = this.authorityOptions.azureRegionConfiguration) == null ? void 0 : _c.azureRegion) {
        metadata = await invokeAsync(this.updateMetadataWithRegionalInformation.bind(this), PerformanceEvents.AuthorityUpdateMetadataWithRegionalInformation, this.logger, this.performanceClient, this.correlationId)(metadata);
      }
      updateAuthorityEndpointMetadata(metadataEntity, metadata, true);
      return AuthorityMetadataSource.NETWORK;
    } else {
      throw createClientAuthError(openIdConfigError, this.defaultOpenIdConfigurationEndpoint);
    }
  }
  /**
   * Updates endpoint metadata from local sources and returns where the information was retrieved from and the metadata config
   * response if the source is hardcoded metadata
   * @param metadataEntity
   * @returns
   */
  updateEndpointMetadataFromLocalSources(metadataEntity) {
    this.logger.verbose("Attempting to get endpoint metadata from authority configuration");
    const configMetadata = this.getEndpointMetadataFromConfig();
    if (configMetadata) {
      this.logger.verbose("Found endpoint metadata in authority configuration");
      updateAuthorityEndpointMetadata(metadataEntity, configMetadata, false);
      return {
        source: AuthorityMetadataSource.CONFIG
      };
    }
    this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values.");
    if (this.authorityOptions.skipAuthorityMetadataCache) {
      this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");
    } else {
      const hardcodedMetadata = this.getEndpointMetadataFromHardcodedValues();
      if (hardcodedMetadata) {
        updateAuthorityEndpointMetadata(metadataEntity, hardcodedMetadata, false);
        return {
          source: AuthorityMetadataSource.HARDCODED_VALUES,
          metadata: hardcodedMetadata
        };
      } else {
        this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.");
      }
    }
    const metadataEntityExpired = isAuthorityMetadataExpired(metadataEntity);
    if (this.isAuthoritySameType(metadataEntity) && metadataEntity.endpointsFromNetwork && !metadataEntityExpired) {
      this.logger.verbose("Found endpoint metadata in the cache.");
      return { source: AuthorityMetadataSource.CACHE };
    } else if (metadataEntityExpired) {
      this.logger.verbose("The metadata entity is expired.");
    }
    return null;
  }
  /**
   * Compares the number of url components after the domain to determine if the cached
   * authority metadata can be used for the requested authority. Protects against same domain different
   * authority such as login.microsoftonline.com/tenant and login.microsoftonline.com/tfp/tenant/policy
   * @param metadataEntity
   */
  isAuthoritySameType(metadataEntity) {
    const cachedAuthorityUrl = new UrlString(metadataEntity.canonical_authority);
    const cachedParts = cachedAuthorityUrl.getUrlComponents().PathSegments;
    return cachedParts.length === this.canonicalAuthorityUrlComponents.PathSegments.length;
  }
  /**
   * Parse authorityMetadata config option
   */
  getEndpointMetadataFromConfig() {
    if (this.authorityOptions.authorityMetadata) {
      try {
        return JSON.parse(this.authorityOptions.authorityMetadata);
      } catch (e) {
        throw createClientConfigurationError(invalidAuthorityMetadata);
      }
    }
    return null;
  }
  /**
   * Gets OAuth endpoints from the given OpenID configuration endpoint.
   *
   * @param hasHardcodedMetadata boolean
   */
  async getEndpointMetadataFromNetwork() {
    var _a;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.AuthorityGetEndpointMetadataFromNetwork, this.correlationId);
    const options = {};
    const openIdConfigurationEndpoint = this.defaultOpenIdConfigurationEndpoint;
    this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${openIdConfigurationEndpoint}`);
    try {
      const response = await this.networkInterface.sendGetRequestAsync(openIdConfigurationEndpoint, options);
      const isValidResponse = isOpenIdConfigResponse(response.body);
      if (isValidResponse) {
        return response.body;
      } else {
        this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration`);
        return null;
      }
    } catch (e) {
      this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${e}`);
      return null;
    }
  }
  /**
   * Get OAuth endpoints for common authorities.
   */
  getEndpointMetadataFromHardcodedValues() {
    if (this.hostnameAndPort in EndpointMetadata) {
      return EndpointMetadata[this.hostnameAndPort];
    }
    return null;
  }
  /**
   * Update the retrieved metadata with regional information.
   * User selected Azure region will be used if configured.
   */
  async updateMetadataWithRegionalInformation(metadata) {
    var _a, _b, _c;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.AuthorityUpdateMetadataWithRegionalInformation, this.correlationId);
    const userConfiguredAzureRegion = (_b = this.authorityOptions.azureRegionConfiguration) == null ? void 0 : _b.azureRegion;
    if (userConfiguredAzureRegion) {
      if (userConfiguredAzureRegion !== Constants.AZURE_REGION_AUTO_DISCOVER_FLAG) {
        this.regionDiscoveryMetadata.region_outcome = RegionDiscoveryOutcomes.CONFIGURED_NO_AUTO_DETECTION;
        this.regionDiscoveryMetadata.region_used = userConfiguredAzureRegion;
        return _Authority.replaceWithRegionalInformation(metadata, userConfiguredAzureRegion);
      }
      const autodetectedRegionName = await invokeAsync(this.regionDiscovery.detectRegion.bind(this.regionDiscovery), PerformanceEvents.RegionDiscoveryDetectRegion, this.logger, this.performanceClient, this.correlationId)((_c = this.authorityOptions.azureRegionConfiguration) == null ? void 0 : _c.environmentRegion, this.regionDiscoveryMetadata);
      if (autodetectedRegionName) {
        this.regionDiscoveryMetadata.region_outcome = RegionDiscoveryOutcomes.AUTO_DETECTION_REQUESTED_SUCCESSFUL;
        this.regionDiscoveryMetadata.region_used = autodetectedRegionName;
        return _Authority.replaceWithRegionalInformation(metadata, autodetectedRegionName);
      }
      this.regionDiscoveryMetadata.region_outcome = RegionDiscoveryOutcomes.AUTO_DETECTION_REQUESTED_FAILED;
    }
    return metadata;
  }
  /**
   * Updates the AuthorityMetadataEntity with new aliases, preferred_network and preferred_cache
   * and returns where the information was retrieved from
   * @param metadataEntity
   * @returns AuthorityMetadataSource
   */
  async updateCloudDiscoveryMetadata(metadataEntity) {
    var _a;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.AuthorityUpdateCloudDiscoveryMetadata, this.correlationId);
    const localMetadataSource = this.updateCloudDiscoveryMetadataFromLocalSources(metadataEntity);
    if (localMetadataSource) {
      return localMetadataSource;
    }
    const metadata = await invokeAsync(this.getCloudDiscoveryMetadataFromNetwork.bind(this), PerformanceEvents.AuthorityGetCloudDiscoveryMetadataFromNetwork, this.logger, this.performanceClient, this.correlationId)();
    if (metadata) {
      updateCloudDiscoveryMetadata(metadataEntity, metadata, true);
      return AuthorityMetadataSource.NETWORK;
    }
    throw createClientConfigurationError(untrustedAuthority);
  }
  updateCloudDiscoveryMetadataFromLocalSources(metadataEntity) {
    this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration");
    this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities || Constants.NOT_APPLICABLE}`);
    this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata || Constants.NOT_APPLICABLE}`);
    this.logger.verbosePii(`Canonical Authority: ${metadataEntity.canonical_authority || Constants.NOT_APPLICABLE}`);
    const metadata = this.getCloudDiscoveryMetadataFromConfig();
    if (metadata) {
      this.logger.verbose("Found cloud discovery metadata in authority configuration");
      updateCloudDiscoveryMetadata(metadataEntity, metadata, false);
      return AuthorityMetadataSource.CONFIG;
    }
    this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values.");
    if (this.options.skipAuthorityMetadataCache) {
      this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");
    } else {
      const hardcodedMetadata = getCloudDiscoveryMetadataFromHardcodedValues(this.hostnameAndPort);
      if (hardcodedMetadata) {
        this.logger.verbose("Found cloud discovery metadata from hardcoded values.");
        updateCloudDiscoveryMetadata(metadataEntity, hardcodedMetadata, false);
        return AuthorityMetadataSource.HARDCODED_VALUES;
      }
      this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.");
    }
    const metadataEntityExpired = isAuthorityMetadataExpired(metadataEntity);
    if (this.isAuthoritySameType(metadataEntity) && metadataEntity.aliasesFromNetwork && !metadataEntityExpired) {
      this.logger.verbose("Found cloud discovery metadata in the cache.");
      return AuthorityMetadataSource.CACHE;
    } else if (metadataEntityExpired) {
      this.logger.verbose("The metadata entity is expired.");
    }
    return null;
  }
  /**
   * Parse cloudDiscoveryMetadata config or check knownAuthorities
   */
  getCloudDiscoveryMetadataFromConfig() {
    if (this.authorityType === AuthorityType.Ciam) {
      this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host.");
      return _Authority.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);
    }
    if (this.authorityOptions.cloudDiscoveryMetadata) {
      this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");
      try {
        this.logger.verbose("Attempting to parse the cloud discovery metadata.");
        const parsedResponse = JSON.parse(this.authorityOptions.cloudDiscoveryMetadata);
        const metadata = getCloudDiscoveryMetadataFromNetworkResponse(parsedResponse.metadata, this.hostnameAndPort);
        this.logger.verbose("Parsed the cloud discovery metadata.");
        if (metadata) {
          this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata.");
          return metadata;
        } else {
          this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.");
        }
      } catch (e) {
        this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error.");
        throw createClientConfigurationError(invalidCloudDiscoveryMetadata);
      }
    }
    if (this.isInKnownAuthorities()) {
      this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host.");
      return _Authority.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);
    }
    return null;
  }
  /**
   * Called to get metadata from network if CloudDiscoveryMetadata was not populated by config
   *
   * @param hasHardcodedMetadata boolean
   */
  async getCloudDiscoveryMetadataFromNetwork() {
    var _a;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.AuthorityGetCloudDiscoveryMetadataFromNetwork, this.correlationId);
    const instanceDiscoveryEndpoint = `${Constants.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`;
    const options = {};
    let match = null;
    try {
      const response = await this.networkInterface.sendGetRequestAsync(instanceDiscoveryEndpoint, options);
      let typedResponseBody;
      let metadata;
      if (isCloudInstanceDiscoveryResponse(response.body)) {
        typedResponseBody = response.body;
        metadata = typedResponseBody.metadata;
        this.logger.verbosePii(`tenant_discovery_endpoint is: ${typedResponseBody.tenant_discovery_endpoint}`);
      } else if (isCloudInstanceDiscoveryErrorResponse(response.body)) {
        this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${response.status}`);
        typedResponseBody = response.body;
        if (typedResponseBody.error === Constants.INVALID_INSTANCE) {
          this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance.");
          return null;
        }
        this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${typedResponseBody.error}`);
        this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${typedResponseBody.error_description}`);
        this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []");
        metadata = [];
      } else {
        this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse");
        return null;
      }
      this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request.");
      match = getCloudDiscoveryMetadataFromNetworkResponse(metadata, this.hostnameAndPort);
    } catch (error) {
      if (error instanceof AuthError) {
        this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${error.errorCode}
Error Description: ${error.errorMessage}`);
      } else {
        const typedError = error;
        this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${typedError.name}
Error Description: ${typedError.message}`);
      }
      return null;
    }
    if (!match) {
      this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request.");
      this.logger.verbose("Creating custom Authority for custom domain scenario.");
      match = _Authority.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);
    }
    return match;
  }
  /**
   * Helper function to determine if this host is included in the knownAuthorities config option
   */
  isInKnownAuthorities() {
    const matches = this.authorityOptions.knownAuthorities.filter((authority) => {
      return authority && UrlString.getDomainFromUrl(authority).toLowerCase() === this.hostnameAndPort;
    });
    return matches.length > 0;
  }
  /**
   * helper function to populate the authority based on azureCloudOptions
   * @param authorityString
   * @param azureCloudOptions
   */
  static generateAuthority(authorityString, azureCloudOptions) {
    let authorityAzureCloudInstance;
    if (azureCloudOptions && azureCloudOptions.azureCloudInstance !== AzureCloudInstance.None) {
      const tenant = azureCloudOptions.tenant ? azureCloudOptions.tenant : Constants.DEFAULT_COMMON_TENANT;
      authorityAzureCloudInstance = `${azureCloudOptions.azureCloudInstance}/${tenant}/`;
    }
    return authorityAzureCloudInstance ? authorityAzureCloudInstance : authorityString;
  }
  /**
   * Creates cloud discovery metadata object from a given host
   * @param host
   */
  static createCloudDiscoveryMetadataFromHost(host) {
    return {
      preferred_network: host,
      preferred_cache: host,
      aliases: [host]
    };
  }
  /**
   * helper function to generate environment from authority object
   */
  getPreferredCache() {
    if (this.managedIdentity) {
      return Constants.DEFAULT_AUTHORITY_HOST;
    } else if (this.discoveryComplete()) {
      return this.metadata.preferred_cache;
    } else {
      throw createClientAuthError(endpointResolutionError);
    }
  }
  /**
   * Returns whether or not the provided host is an alias of this authority instance
   * @param host
   */
  isAlias(host) {
    return this.metadata.aliases.indexOf(host) > -1;
  }
  /**
   * Returns whether or not the provided host is an alias of a known Microsoft authority for purposes of endpoint discovery
   * @param host
   */
  isAliasOfKnownMicrosoftAuthority(host) {
    return InstanceDiscoveryMetadataAliases.has(host);
  }
  /**
   * Checks whether the provided host is that of a public cloud authority
   *
   * @param authority string
   * @returns bool
   */
  static isPublicCloudAuthority(host) {
    return Constants.KNOWN_PUBLIC_CLOUDS.indexOf(host) >= 0;
  }
  /**
   * Rebuild the authority string with the region
   *
   * @param host string
   * @param region string
   */
  static buildRegionalAuthorityString(host, region, queryString) {
    const authorityUrlInstance = new UrlString(host);
    authorityUrlInstance.validateAsUri();
    const authorityUrlParts = authorityUrlInstance.getUrlComponents();
    let hostNameAndPort = `${region}.${authorityUrlParts.HostNameAndPort}`;
    if (this.isPublicCloudAuthority(authorityUrlParts.HostNameAndPort)) {
      hostNameAndPort = `${region}.${Constants.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`;
    }
    const url = UrlString.constructAuthorityUriFromObject({
      ...authorityUrlInstance.getUrlComponents(),
      HostNameAndPort: hostNameAndPort
    }).urlString;
    if (queryString)
      return `${url}?${queryString}`;
    return url;
  }
  /**
   * Replace the endpoints in the metadata object with their regional equivalents.
   *
   * @param metadata OpenIdConfigResponse
   * @param azureRegion string
   */
  static replaceWithRegionalInformation(metadata, azureRegion) {
    const regionalMetadata = { ...metadata };
    regionalMetadata.authorization_endpoint = _Authority.buildRegionalAuthorityString(regionalMetadata.authorization_endpoint, azureRegion);
    regionalMetadata.token_endpoint = _Authority.buildRegionalAuthorityString(regionalMetadata.token_endpoint, azureRegion);
    if (regionalMetadata.end_session_endpoint) {
      regionalMetadata.end_session_endpoint = _Authority.buildRegionalAuthorityString(regionalMetadata.end_session_endpoint, azureRegion);
    }
    return regionalMetadata;
  }
  /**
   * Transform CIAM_AUTHORIY as per the below rules:
   * If no path segments found and it is a CIAM authority (hostname ends with .ciamlogin.com), then transform it
   *
   * NOTE: The transformation path should go away once STS supports CIAM with the format: `tenantIdorDomain.ciamlogin.com`
   * `ciamlogin.com` can also change in the future and we should accommodate the same
   *
   * @param authority
   */
  static transformCIAMAuthority(authority) {
    let ciamAuthority = authority;
    const authorityUrl = new UrlString(authority);
    const authorityUrlComponents = authorityUrl.getUrlComponents();
    if (authorityUrlComponents.PathSegments.length === 0 && authorityUrlComponents.HostNameAndPort.endsWith(Constants.CIAM_AUTH_URL)) {
      const tenantIdOrDomain = authorityUrlComponents.HostNameAndPort.split(".")[0];
      ciamAuthority = `${ciamAuthority}${tenantIdOrDomain}${Constants.AAD_TENANT_DOMAIN_SUFFIX}`;
    }
    return ciamAuthority;
  }
};
Authority.reservedTenantDomains = /* @__PURE__ */ new Set([
  "{tenant}",
  "{tenantid}",
  AADAuthorityConstants.COMMON,
  AADAuthorityConstants.CONSUMERS,
  AADAuthorityConstants.ORGANIZATIONS
]);
function getTenantFromAuthorityString(authority) {
  var _a;
  const authorityUrl = new UrlString(authority);
  const authorityUrlComponents = authorityUrl.getUrlComponents();
  const tenantId = (_a = authorityUrlComponents.PathSegments.slice(-1)[0]) == null ? void 0 : _a.toLowerCase();
  switch (tenantId) {
    case AADAuthorityConstants.COMMON:
    case AADAuthorityConstants.ORGANIZATIONS:
    case AADAuthorityConstants.CONSUMERS:
      return void 0;
    default:
      return tenantId;
  }
}
function formatAuthorityUri(authorityUri) {
  return authorityUri.endsWith(Constants.FORWARD_SLASH) ? authorityUri : `${authorityUri}${Constants.FORWARD_SLASH}`;
}
function buildStaticAuthorityOptions(authOptions) {
  const rawCloudDiscoveryMetadata = authOptions.cloudDiscoveryMetadata;
  let cloudDiscoveryMetadata = void 0;
  if (rawCloudDiscoveryMetadata) {
    try {
      cloudDiscoveryMetadata = JSON.parse(rawCloudDiscoveryMetadata);
    } catch (e) {
      throw createClientConfigurationError(invalidCloudDiscoveryMetadata);
    }
  }
  return {
    canonicalAuthority: authOptions.authority ? formatAuthorityUri(authOptions.authority) : void 0,
    knownAuthorities: authOptions.knownAuthorities,
    cloudDiscoveryMetadata
  };
}

// node_modules/@azure/msal-common/dist/authority/AuthorityFactory.mjs
async function createDiscoveredInstance(authorityUri, networkClient, cacheManager, authorityOptions, logger, correlationId, performanceClient) {
  performanceClient == null ? void 0 : performanceClient.addQueueMeasurement(PerformanceEvents.AuthorityFactoryCreateDiscoveredInstance, correlationId);
  const authorityUriFinal = Authority.transformCIAMAuthority(formatAuthorityUri(authorityUri));
  const acquireTokenAuthority = new Authority(authorityUriFinal, networkClient, cacheManager, authorityOptions, logger, correlationId, performanceClient);
  try {
    await invokeAsync(acquireTokenAuthority.resolveEndpointsAsync.bind(acquireTokenAuthority), PerformanceEvents.AuthorityResolveEndpointsAsync, logger, performanceClient, correlationId)();
    return acquireTokenAuthority;
  } catch (e) {
    throw createClientAuthError(endpointResolutionError);
  }
}

// node_modules/@azure/msal-common/dist/error/ServerError.mjs
var ServerError = class _ServerError extends AuthError {
  constructor(errorCode, errorMessage, subError, errorNo, status) {
    super(errorCode, errorMessage, subError);
    this.name = "ServerError";
    this.errorNo = errorNo;
    this.status = status;
    Object.setPrototypeOf(this, _ServerError.prototype);
  }
};

// node_modules/@azure/msal-common/dist/network/RequestThumbprint.mjs
function getRequestThumbprint(clientId, request, homeAccountId) {
  var _a;
  return {
    clientId,
    authority: request.authority,
    scopes: request.scopes,
    homeAccountIdentifier: homeAccountId,
    claims: request.claims,
    authenticationScheme: request.authenticationScheme,
    resourceRequestMethod: request.resourceRequestMethod,
    resourceRequestUri: request.resourceRequestUri,
    shrClaims: request.shrClaims,
    sshKid: request.sshKid,
    embeddedClientId: request.embeddedClientId || ((_a = request.tokenBodyParameters) == null ? void 0 : _a.clientId)
  };
}

// node_modules/@azure/msal-common/dist/network/ThrottlingUtils.mjs
var ThrottlingUtils = class _ThrottlingUtils {
  /**
   * Prepares a RequestThumbprint to be stored as a key.
   * @param thumbprint
   */
  static generateThrottlingStorageKey(thumbprint) {
    return `${ThrottlingConstants.THROTTLING_PREFIX}.${JSON.stringify(thumbprint)}`;
  }
  /**
   * Performs necessary throttling checks before a network request.
   * @param cacheManager
   * @param thumbprint
   */
  static preProcess(cacheManager, thumbprint) {
    var _a;
    const key = _ThrottlingUtils.generateThrottlingStorageKey(thumbprint);
    const value = cacheManager.getThrottlingCache(key);
    if (value) {
      if (value.throttleTime < Date.now()) {
        cacheManager.removeItem(key);
        return;
      }
      throw new ServerError(((_a = value.errorCodes) == null ? void 0 : _a.join(" ")) || Constants.EMPTY_STRING, value.errorMessage, value.subError);
    }
  }
  /**
   * Performs necessary throttling checks after a network request.
   * @param cacheManager
   * @param thumbprint
   * @param response
   */
  static postProcess(cacheManager, thumbprint, response) {
    if (_ThrottlingUtils.checkResponseStatus(response) || _ThrottlingUtils.checkResponseForRetryAfter(response)) {
      const thumbprintValue = {
        throttleTime: _ThrottlingUtils.calculateThrottleTime(parseInt(response.headers[HeaderNames.RETRY_AFTER])),
        error: response.body.error,
        errorCodes: response.body.error_codes,
        errorMessage: response.body.error_description,
        subError: response.body.suberror
      };
      cacheManager.setThrottlingCache(_ThrottlingUtils.generateThrottlingStorageKey(thumbprint), thumbprintValue);
    }
  }
  /**
   * Checks a NetworkResponse object's status codes against 429 or 5xx
   * @param response
   */
  static checkResponseStatus(response) {
    return response.status === 429 || response.status >= 500 && response.status < 600;
  }
  /**
   * Checks a NetworkResponse object's RetryAfter header
   * @param response
   */
  static checkResponseForRetryAfter(response) {
    if (response.headers) {
      return response.headers.hasOwnProperty(HeaderNames.RETRY_AFTER) && (response.status < 200 || response.status >= 300);
    }
    return false;
  }
  /**
   * Calculates the Unix-time value for a throttle to expire given throttleTime in seconds.
   * @param throttleTime
   */
  static calculateThrottleTime(throttleTime) {
    const time = throttleTime <= 0 ? 0 : throttleTime;
    const currentSeconds = Date.now() / 1e3;
    return Math.floor(Math.min(currentSeconds + (time || ThrottlingConstants.DEFAULT_THROTTLE_TIME_SECONDS), currentSeconds + ThrottlingConstants.DEFAULT_MAX_THROTTLE_TIME_SECONDS) * 1e3);
  }
  static removeThrottle(cacheManager, clientId, request, homeAccountIdentifier) {
    const thumbprint = getRequestThumbprint(clientId, request, homeAccountIdentifier);
    const key = this.generateThrottlingStorageKey(thumbprint);
    cacheManager.removeItem(key);
  }
};

// node_modules/@azure/msal-common/dist/error/NetworkError.mjs
var NetworkError = class _NetworkError extends AuthError {
  constructor(error, httpStatus, responseHeaders) {
    super(error.errorCode, error.errorMessage, error.subError);
    Object.setPrototypeOf(this, _NetworkError.prototype);
    this.name = "NetworkError";
    this.error = error;
    this.httpStatus = httpStatus;
    this.responseHeaders = responseHeaders;
  }
};

// node_modules/@azure/msal-common/dist/client/BaseClient.mjs
var BaseClient = class {
  constructor(configuration, performanceClient) {
    this.config = buildClientConfiguration(configuration);
    this.logger = new Logger(this.config.loggerOptions, name, version);
    this.cryptoUtils = this.config.cryptoInterface;
    this.cacheManager = this.config.storageInterface;
    this.networkClient = this.config.networkInterface;
    this.serverTelemetryManager = this.config.serverTelemetryManager;
    this.authority = this.config.authOptions.authority;
    this.performanceClient = performanceClient;
  }
  /**
   * Creates default headers for requests to token endpoint
   */
  createTokenRequestHeaders(ccsCred) {
    const headers = {};
    headers[HeaderNames.CONTENT_TYPE] = Constants.URL_FORM_CONTENT_TYPE;
    if (!this.config.systemOptions.preventCorsPreflight && ccsCred) {
      switch (ccsCred.type) {
        case CcsCredentialType.HOME_ACCOUNT_ID:
          try {
            const clientInfo = buildClientInfoFromHomeAccountId(ccsCred.credential);
            headers[HeaderNames.CCS_HEADER] = `Oid:${clientInfo.uid}@${clientInfo.utid}`;
          } catch (e) {
            this.logger.verbose("Could not parse home account ID for CCS Header: " + e);
          }
          break;
        case CcsCredentialType.UPN:
          headers[HeaderNames.CCS_HEADER] = `UPN: ${ccsCred.credential}`;
          break;
      }
    }
    return headers;
  }
  /**
   * Http post to token endpoint
   * @param tokenEndpoint
   * @param queryString
   * @param headers
   * @param thumbprint
   */
  async executePostToTokenEndpoint(tokenEndpoint, queryString, headers, thumbprint, correlationId, queuedEvent) {
    var _a;
    if (queuedEvent) {
      (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(queuedEvent, correlationId);
    }
    const response = await this.sendPostRequest(thumbprint, tokenEndpoint, { body: queryString, headers }, correlationId);
    if (this.config.serverTelemetryManager && response.status < 500 && response.status !== 429) {
      this.config.serverTelemetryManager.clearTelemetryCache();
    }
    return response;
  }
  /**
   * Wraps sendPostRequestAsync with necessary preflight and postflight logic
   * @param thumbprint - Request thumbprint for throttling
   * @param tokenEndpoint - Endpoint to make the POST to
   * @param options - Body and Headers to include on the POST request
   * @param correlationId - CorrelationId for telemetry
   */
  async sendPostRequest(thumbprint, tokenEndpoint, options, correlationId) {
    var _a, _b, _c;
    ThrottlingUtils.preProcess(this.cacheManager, thumbprint);
    let response;
    try {
      response = await invokeAsync(this.networkClient.sendPostRequestAsync.bind(this.networkClient), PerformanceEvents.NetworkClientSendPostRequestAsync, this.logger, this.performanceClient, correlationId)(tokenEndpoint, options);
      const responseHeaders = response.headers || {};
      (_b = this.performanceClient) == null ? void 0 : _b.addFields({
        refreshTokenSize: ((_a = response.body.refresh_token) == null ? void 0 : _a.length) || 0,
        httpVerToken: responseHeaders[HeaderNames.X_MS_HTTP_VERSION] || "",
        requestId: responseHeaders[HeaderNames.X_MS_REQUEST_ID] || ""
      }, correlationId);
    } catch (e) {
      if (e instanceof NetworkError) {
        const responseHeaders = e.responseHeaders;
        if (responseHeaders) {
          (_c = this.performanceClient) == null ? void 0 : _c.addFields({
            httpVerToken: responseHeaders[HeaderNames.X_MS_HTTP_VERSION] || "",
            requestId: responseHeaders[HeaderNames.X_MS_REQUEST_ID] || "",
            contentTypeHeader: responseHeaders[HeaderNames.CONTENT_TYPE] || void 0,
            contentLengthHeader: responseHeaders[HeaderNames.CONTENT_LENGTH] || void 0,
            httpStatus: e.httpStatus
          }, correlationId);
        }
        throw e.error;
      }
      if (e instanceof AuthError) {
        throw e;
      } else {
        throw createClientAuthError(networkError);
      }
    }
    ThrottlingUtils.postProcess(this.cacheManager, thumbprint, response);
    return response;
  }
  /**
   * Updates the authority object of the client. Endpoint discovery must be completed.
   * @param updatedAuthority
   */
  async updateAuthority(cloudInstanceHostname, correlationId) {
    var _a;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.UpdateTokenEndpointAuthority, correlationId);
    const cloudInstanceAuthorityUri = `https://${cloudInstanceHostname}/${this.authority.tenant}/`;
    const cloudInstanceAuthority = await createDiscoveredInstance(cloudInstanceAuthorityUri, this.networkClient, this.cacheManager, this.authority.options, this.logger, correlationId, this.performanceClient);
    this.authority = cloudInstanceAuthority;
  }
  /**
   * Creates query string for the /token request
   * @param request
   */
  createTokenQueryParameters(request) {
    const parameters = /* @__PURE__ */ new Map();
    if (request.embeddedClientId) {
      addBrokerParameters(parameters, this.config.authOptions.clientId, this.config.authOptions.redirectUri);
    }
    if (request.tokenQueryParameters) {
      addExtraQueryParameters(parameters, request.tokenQueryParameters);
    }
    addCorrelationId(parameters, request.correlationId);
    instrumentBrokerParams(parameters, request.correlationId, this.performanceClient);
    return mapToQueryString(parameters);
  }
};

// node_modules/@azure/msal-common/dist/error/InteractionRequiredAuthErrorCodes.mjs
var noTokensFound = "no_tokens_found";
var nativeAccountUnavailable = "native_account_unavailable";
var refreshTokenExpired = "refresh_token_expired";
var interactionRequired = "interaction_required";
var consentRequired = "consent_required";
var loginRequired = "login_required";
var badToken = "bad_token";

// node_modules/@azure/msal-common/dist/error/InteractionRequiredAuthError.mjs
var InteractionRequiredServerErrorMessage = [
  interactionRequired,
  consentRequired,
  loginRequired,
  badToken
];
var InteractionRequiredAuthSubErrorMessage = [
  "message_only",
  "additional_action",
  "basic_action",
  "user_password_expired",
  "consent_required",
  "bad_token"
];
var InteractionRequiredAuthErrorMessages = {
  [noTokensFound]: "No refresh token found in the cache. Please sign-in.",
  [nativeAccountUnavailable]: "The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",
  [refreshTokenExpired]: "Refresh token has expired.",
  [badToken]: "Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."
};
var InteractionRequiredAuthErrorMessage = {
  noTokensFoundError: {
    code: noTokensFound,
    desc: InteractionRequiredAuthErrorMessages[noTokensFound]
  },
  native_account_unavailable: {
    code: nativeAccountUnavailable,
    desc: InteractionRequiredAuthErrorMessages[nativeAccountUnavailable]
  },
  bad_token: {
    code: badToken,
    desc: InteractionRequiredAuthErrorMessages[badToken]
  }
};
var InteractionRequiredAuthError = class _InteractionRequiredAuthError extends AuthError {
  constructor(errorCode, errorMessage, subError, timestamp, traceId, correlationId, claims, errorNo) {
    super(errorCode, errorMessage, subError);
    Object.setPrototypeOf(this, _InteractionRequiredAuthError.prototype);
    this.timestamp = timestamp || Constants.EMPTY_STRING;
    this.traceId = traceId || Constants.EMPTY_STRING;
    this.correlationId = correlationId || Constants.EMPTY_STRING;
    this.claims = claims || Constants.EMPTY_STRING;
    this.name = "InteractionRequiredAuthError";
    this.errorNo = errorNo;
  }
};
function isInteractionRequiredError(errorCode, errorString, subError) {
  const isInteractionRequiredErrorCode = !!errorCode && InteractionRequiredServerErrorMessage.indexOf(errorCode) > -1;
  const isInteractionRequiredSubError = !!subError && InteractionRequiredAuthSubErrorMessage.indexOf(subError) > -1;
  const isInteractionRequiredErrorDesc = !!errorString && InteractionRequiredServerErrorMessage.some((irErrorCode) => {
    return errorString.indexOf(irErrorCode) > -1;
  });
  return isInteractionRequiredErrorCode || isInteractionRequiredErrorDesc || isInteractionRequiredSubError;
}
function createInteractionRequiredAuthError(errorCode) {
  return new InteractionRequiredAuthError(errorCode, InteractionRequiredAuthErrorMessages[errorCode]);
}

// node_modules/@azure/msal-common/dist/utils/ProtocolUtils.mjs
var ProtocolUtils = class _ProtocolUtils {
  /**
   * Appends user state with random guid, or returns random guid.
   * @param userState
   * @param randomGuid
   */
  static setRequestState(cryptoObj, userState, meta) {
    const libraryState = _ProtocolUtils.generateLibraryState(cryptoObj, meta);
    return userState ? `${libraryState}${Constants.RESOURCE_DELIM}${userState}` : libraryState;
  }
  /**
   * Generates the state value used by the common library.
   * @param randomGuid
   * @param cryptoObj
   */
  static generateLibraryState(cryptoObj, meta) {
    if (!cryptoObj) {
      throw createClientAuthError(noCryptoObject);
    }
    const stateObj = {
      id: cryptoObj.createNewGuid()
    };
    if (meta) {
      stateObj.meta = meta;
    }
    const stateString = JSON.stringify(stateObj);
    return cryptoObj.base64Encode(stateString);
  }
  /**
   * Parses the state into the RequestStateObject, which contains the LibraryState info and the state passed by the user.
   * @param state
   * @param cryptoObj
   */
  static parseRequestState(cryptoObj, state) {
    if (!cryptoObj) {
      throw createClientAuthError(noCryptoObject);
    }
    if (!state) {
      throw createClientAuthError(invalidState);
    }
    try {
      const splitState = state.split(Constants.RESOURCE_DELIM);
      const libraryState = splitState[0];
      const userState = splitState.length > 1 ? splitState.slice(1).join(Constants.RESOURCE_DELIM) : Constants.EMPTY_STRING;
      const libraryStateString = cryptoObj.base64Decode(libraryState);
      const libraryStateObj = JSON.parse(libraryStateString);
      return {
        userRequestState: userState || Constants.EMPTY_STRING,
        libraryState: libraryStateObj
      };
    } catch (e) {
      throw createClientAuthError(invalidState);
    }
  }
};

// node_modules/@azure/msal-common/dist/crypto/PopTokenGenerator.mjs
var KeyLocation = {
  SW: "sw",
  UHW: "uhw"
};
var PopTokenGenerator = class {
  constructor(cryptoUtils, performanceClient) {
    this.cryptoUtils = cryptoUtils;
    this.performanceClient = performanceClient;
  }
  /**
   * Generates the req_cnf validated at the RP in the POP protocol for SHR parameters
   * and returns an object containing the keyid, the full req_cnf string and the req_cnf string hash
   * @param request
   * @returns
   */
  async generateCnf(request, logger) {
    var _a;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.PopTokenGenerateCnf, request.correlationId);
    const reqCnf = await invokeAsync(this.generateKid.bind(this), PerformanceEvents.PopTokenGenerateCnf, logger, this.performanceClient, request.correlationId)(request);
    const reqCnfString = this.cryptoUtils.base64UrlEncode(JSON.stringify(reqCnf));
    return {
      kid: reqCnf.kid,
      reqCnfString
    };
  }
  /**
   * Generates key_id for a SHR token request
   * @param request
   * @returns
   */
  async generateKid(request) {
    var _a;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.PopTokenGenerateKid, request.correlationId);
    const kidThumbprint = await this.cryptoUtils.getPublicKeyThumbprint(request);
    return {
      kid: kidThumbprint,
      xms_ksl: KeyLocation.SW
    };
  }
  /**
   * Signs the POP access_token with the local generated key-pair
   * @param accessToken
   * @param request
   * @returns
   */
  async signPopToken(accessToken, keyId, request) {
    return this.signPayload(accessToken, keyId, request);
  }
  /**
   * Utility function to generate the signed JWT for an access_token
   * @param payload
   * @param kid
   * @param request
   * @param claims
   * @returns
   */
  async signPayload(payload, keyId, request, claims) {
    const { resourceRequestMethod, resourceRequestUri, shrClaims, shrNonce, shrOptions } = request;
    const resourceUrlString = resourceRequestUri ? new UrlString(resourceRequestUri) : void 0;
    const resourceUrlComponents = resourceUrlString == null ? void 0 : resourceUrlString.getUrlComponents();
    return this.cryptoUtils.signJwt({
      at: payload,
      ts: nowSeconds(),
      m: resourceRequestMethod == null ? void 0 : resourceRequestMethod.toUpperCase(),
      u: resourceUrlComponents == null ? void 0 : resourceUrlComponents.HostNameAndPort,
      nonce: shrNonce || this.cryptoUtils.createNewGuid(),
      p: resourceUrlComponents == null ? void 0 : resourceUrlComponents.AbsolutePath,
      q: (resourceUrlComponents == null ? void 0 : resourceUrlComponents.QueryString) ? [[], resourceUrlComponents.QueryString] : void 0,
      client_claims: shrClaims || void 0,
      ...claims
    }, keyId, shrOptions, request.correlationId);
  }
};

// node_modules/@azure/msal-common/dist/cache/persistence/TokenCacheContext.mjs
var TokenCacheContext = class {
  constructor(tokenCache, hasChanged) {
    this.cache = tokenCache;
    this.hasChanged = hasChanged;
  }
  /**
   * boolean which indicates the changes in cache
   */
  get cacheHasChanged() {
    return this.hasChanged;
  }
  /**
   * function to retrieve the token cache
   */
  get tokenCache() {
    return this.cache;
  }
};

// node_modules/@azure/msal-common/dist/response/ResponseHandler.mjs
var ResponseHandler = class _ResponseHandler {
  constructor(clientId, cacheStorage, cryptoObj, logger, serializableCache, persistencePlugin, performanceClient) {
    this.clientId = clientId;
    this.cacheStorage = cacheStorage;
    this.cryptoObj = cryptoObj;
    this.logger = logger;
    this.serializableCache = serializableCache;
    this.persistencePlugin = persistencePlugin;
    this.performanceClient = performanceClient;
  }
  /**
   * Function which validates server authorization token response.
   * @param serverResponse
   * @param refreshAccessToken
   */
  validateTokenResponse(serverResponse, refreshAccessToken) {
    var _a;
    if (serverResponse.error || serverResponse.error_description || serverResponse.suberror) {
      const errString = `Error(s): ${serverResponse.error_codes || Constants.NOT_AVAILABLE} - Timestamp: ${serverResponse.timestamp || Constants.NOT_AVAILABLE} - Description: ${serverResponse.error_description || Constants.NOT_AVAILABLE} - Correlation ID: ${serverResponse.correlation_id || Constants.NOT_AVAILABLE} - Trace ID: ${serverResponse.trace_id || Constants.NOT_AVAILABLE}`;
      const serverErrorNo = ((_a = serverResponse.error_codes) == null ? void 0 : _a.length) ? serverResponse.error_codes[0] : void 0;
      const serverError = new ServerError(serverResponse.error, errString, serverResponse.suberror, serverErrorNo, serverResponse.status);
      if (refreshAccessToken && serverResponse.status && serverResponse.status >= HttpStatus.SERVER_ERROR_RANGE_START && serverResponse.status <= HttpStatus.SERVER_ERROR_RANGE_END) {
        this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${serverError}`);
        return;
      } else if (refreshAccessToken && serverResponse.status && serverResponse.status >= HttpStatus.CLIENT_ERROR_RANGE_START && serverResponse.status <= HttpStatus.CLIENT_ERROR_RANGE_END) {
        this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${serverError}`);
        return;
      }
      if (isInteractionRequiredError(serverResponse.error, serverResponse.error_description, serverResponse.suberror)) {
        throw new InteractionRequiredAuthError(serverResponse.error, serverResponse.error_description, serverResponse.suberror, serverResponse.timestamp || Constants.EMPTY_STRING, serverResponse.trace_id || Constants.EMPTY_STRING, serverResponse.correlation_id || Constants.EMPTY_STRING, serverResponse.claims || Constants.EMPTY_STRING, serverErrorNo);
      }
      throw serverError;
    }
  }
  /**
   * Returns a constructed token response based on given string. Also manages the cache updates and cleanups.
   * @param serverTokenResponse
   * @param authority
   */
  async handleServerTokenResponse(serverTokenResponse, authority, reqTimestamp, request, authCodePayload, userAssertionHash, handlingRefreshTokenResponse, forceCacheRefreshTokenResponse, serverRequestId) {
    var _a;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.HandleServerTokenResponse, serverTokenResponse.correlation_id);
    let idTokenClaims;
    if (serverTokenResponse.id_token) {
      idTokenClaims = extractTokenClaims(serverTokenResponse.id_token || Constants.EMPTY_STRING, this.cryptoObj.base64Decode);
      if (authCodePayload && authCodePayload.nonce) {
        if (idTokenClaims.nonce !== authCodePayload.nonce) {
          throw createClientAuthError(nonceMismatch);
        }
      }
      if (request.maxAge || request.maxAge === 0) {
        const authTime = idTokenClaims.auth_time;
        if (!authTime) {
          throw createClientAuthError(authTimeNotFound);
        }
        checkMaxAge(authTime, request.maxAge);
      }
    }
    this.homeAccountIdentifier = AccountEntity.generateHomeAccountId(serverTokenResponse.client_info || Constants.EMPTY_STRING, authority.authorityType, this.logger, this.cryptoObj, idTokenClaims);
    let requestStateObj;
    if (!!authCodePayload && !!authCodePayload.state) {
      requestStateObj = ProtocolUtils.parseRequestState(this.cryptoObj, authCodePayload.state);
    }
    serverTokenResponse.key_id = serverTokenResponse.key_id || request.sshKid || void 0;
    const cacheRecord = this.generateCacheRecord(serverTokenResponse, authority, reqTimestamp, request, idTokenClaims, userAssertionHash, authCodePayload);
    let cacheContext;
    try {
      if (this.persistencePlugin && this.serializableCache) {
        this.logger.verbose("Persistence enabled, calling beforeCacheAccess");
        cacheContext = new TokenCacheContext(this.serializableCache, true);
        await this.persistencePlugin.beforeCacheAccess(cacheContext);
      }
      if (handlingRefreshTokenResponse && !forceCacheRefreshTokenResponse && cacheRecord.account) {
        const key = cacheRecord.account.generateAccountKey();
        const account = this.cacheStorage.getAccount(key);
        if (!account) {
          this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache");
          return await _ResponseHandler.generateAuthenticationResult(this.cryptoObj, authority, cacheRecord, false, request, idTokenClaims, requestStateObj, void 0, serverRequestId);
        }
      }
      await this.cacheStorage.saveCacheRecord(cacheRecord, request.correlationId, request.storeInCache);
    } finally {
      if (this.persistencePlugin && this.serializableCache && cacheContext) {
        this.logger.verbose("Persistence enabled, calling afterCacheAccess");
        await this.persistencePlugin.afterCacheAccess(cacheContext);
      }
    }
    return _ResponseHandler.generateAuthenticationResult(this.cryptoObj, authority, cacheRecord, false, request, idTokenClaims, requestStateObj, serverTokenResponse, serverRequestId);
  }
  /**
   * Generates CacheRecord
   * @param serverTokenResponse
   * @param idTokenObj
   * @param authority
   */
  generateCacheRecord(serverTokenResponse, authority, reqTimestamp, request, idTokenClaims, userAssertionHash, authCodePayload) {
    const env = authority.getPreferredCache();
    if (!env) {
      throw createClientAuthError(invalidCacheEnvironment);
    }
    const claimsTenantId = getTenantIdFromIdTokenClaims(idTokenClaims);
    let cachedIdToken;
    let cachedAccount;
    if (serverTokenResponse.id_token && !!idTokenClaims) {
      cachedIdToken = createIdTokenEntity(this.homeAccountIdentifier, env, serverTokenResponse.id_token, this.clientId, claimsTenantId || "");
      cachedAccount = buildAccountToCache(
        this.cacheStorage,
        authority,
        this.homeAccountIdentifier,
        this.cryptoObj.base64Decode,
        idTokenClaims,
        serverTokenResponse.client_info,
        env,
        claimsTenantId,
        authCodePayload,
        void 0,
        // nativeAccountId
        this.logger
      );
    }
    let cachedAccessToken = null;
    if (serverTokenResponse.access_token) {
      const responseScopes = serverTokenResponse.scope ? ScopeSet.fromString(serverTokenResponse.scope) : new ScopeSet(request.scopes || []);
      const expiresIn = (typeof serverTokenResponse.expires_in === "string" ? parseInt(serverTokenResponse.expires_in, 10) : serverTokenResponse.expires_in) || 0;
      const extExpiresIn = (typeof serverTokenResponse.ext_expires_in === "string" ? parseInt(serverTokenResponse.ext_expires_in, 10) : serverTokenResponse.ext_expires_in) || 0;
      const refreshIn = (typeof serverTokenResponse.refresh_in === "string" ? parseInt(serverTokenResponse.refresh_in, 10) : serverTokenResponse.refresh_in) || void 0;
      const tokenExpirationSeconds = reqTimestamp + expiresIn;
      const extendedTokenExpirationSeconds = tokenExpirationSeconds + extExpiresIn;
      const refreshOnSeconds = refreshIn && refreshIn > 0 ? reqTimestamp + refreshIn : void 0;
      cachedAccessToken = createAccessTokenEntity(this.homeAccountIdentifier, env, serverTokenResponse.access_token, this.clientId, claimsTenantId || authority.tenant || "", responseScopes.printScopes(), tokenExpirationSeconds, extendedTokenExpirationSeconds, this.cryptoObj.base64Decode, refreshOnSeconds, serverTokenResponse.token_type, userAssertionHash, serverTokenResponse.key_id, request.claims, request.requestedClaimsHash);
    }
    let cachedRefreshToken = null;
    if (serverTokenResponse.refresh_token) {
      let rtExpiresOn;
      if (serverTokenResponse.refresh_token_expires_in) {
        const rtExpiresIn = typeof serverTokenResponse.refresh_token_expires_in === "string" ? parseInt(serverTokenResponse.refresh_token_expires_in, 10) : serverTokenResponse.refresh_token_expires_in;
        rtExpiresOn = reqTimestamp + rtExpiresIn;
      }
      cachedRefreshToken = createRefreshTokenEntity(this.homeAccountIdentifier, env, serverTokenResponse.refresh_token, this.clientId, serverTokenResponse.foci, userAssertionHash, rtExpiresOn);
    }
    let cachedAppMetadata = null;
    if (serverTokenResponse.foci) {
      cachedAppMetadata = {
        clientId: this.clientId,
        environment: env,
        familyId: serverTokenResponse.foci
      };
    }
    return {
      account: cachedAccount,
      idToken: cachedIdToken,
      accessToken: cachedAccessToken,
      refreshToken: cachedRefreshToken,
      appMetadata: cachedAppMetadata
    };
  }
  /**
   * Creates an @AuthenticationResult from @CacheRecord , @IdToken , and a boolean that states whether or not the result is from cache.
   *
   * Optionally takes a state string that is set as-is in the response.
   *
   * @param cacheRecord
   * @param idTokenObj
   * @param fromTokenCache
   * @param stateString
   */
  static async generateAuthenticationResult(cryptoObj, authority, cacheRecord, fromTokenCache, request, idTokenClaims, requestState, serverTokenResponse, requestId) {
    var _a, _b, _c, _d, _e;
    let accessToken = Constants.EMPTY_STRING;
    let responseScopes = [];
    let expiresOn = null;
    let extExpiresOn;
    let refreshOn;
    let familyId = Constants.EMPTY_STRING;
    if (cacheRecord.accessToken) {
      if (cacheRecord.accessToken.tokenType === AuthenticationScheme.POP && !request.popKid) {
        const popTokenGenerator = new PopTokenGenerator(cryptoObj);
        const { secret, keyId } = cacheRecord.accessToken;
        if (!keyId) {
          throw createClientAuthError(keyIdMissing);
        }
        accessToken = await popTokenGenerator.signPopToken(secret, keyId, request);
      } else {
        accessToken = cacheRecord.accessToken.secret;
      }
      responseScopes = ScopeSet.fromString(cacheRecord.accessToken.target).asArray();
      expiresOn = toDateFromSeconds(cacheRecord.accessToken.expiresOn);
      extExpiresOn = toDateFromSeconds(cacheRecord.accessToken.extendedExpiresOn);
      if (cacheRecord.accessToken.refreshOn) {
        refreshOn = toDateFromSeconds(cacheRecord.accessToken.refreshOn);
      }
    }
    if (cacheRecord.appMetadata) {
      familyId = cacheRecord.appMetadata.familyId === THE_FAMILY_ID ? THE_FAMILY_ID : "";
    }
    const uid = (idTokenClaims == null ? void 0 : idTokenClaims.oid) || (idTokenClaims == null ? void 0 : idTokenClaims.sub) || "";
    const tid = (idTokenClaims == null ? void 0 : idTokenClaims.tid) || "";
    if ((serverTokenResponse == null ? void 0 : serverTokenResponse.spa_accountid) && !!cacheRecord.account) {
      cacheRecord.account.nativeAccountId = serverTokenResponse == null ? void 0 : serverTokenResponse.spa_accountid;
    }
    const accountInfo = cacheRecord.account ? updateAccountTenantProfileData(
      cacheRecord.account.getAccountInfo(),
      void 0,
      // tenantProfile optional
      idTokenClaims,
      (_a = cacheRecord.idToken) == null ? void 0 : _a.secret
    ) : null;
    return {
      authority: authority.canonicalAuthority,
      uniqueId: uid,
      tenantId: tid,
      scopes: responseScopes,
      account: accountInfo,
      idToken: ((_b = cacheRecord == null ? void 0 : cacheRecord.idToken) == null ? void 0 : _b.secret) || "",
      idTokenClaims: idTokenClaims || {},
      accessToken,
      fromCache: fromTokenCache,
      expiresOn,
      extExpiresOn,
      refreshOn,
      correlationId: request.correlationId,
      requestId: requestId || Constants.EMPTY_STRING,
      familyId,
      tokenType: ((_c = cacheRecord.accessToken) == null ? void 0 : _c.tokenType) || Constants.EMPTY_STRING,
      state: requestState ? requestState.userRequestState : Constants.EMPTY_STRING,
      cloudGraphHostName: ((_d = cacheRecord.account) == null ? void 0 : _d.cloudGraphHostName) || Constants.EMPTY_STRING,
      msGraphHost: ((_e = cacheRecord.account) == null ? void 0 : _e.msGraphHost) || Constants.EMPTY_STRING,
      code: serverTokenResponse == null ? void 0 : serverTokenResponse.spa_code,
      fromNativeBroker: false
    };
  }
};
function buildAccountToCache(cacheStorage, authority, homeAccountId, base64Decode, idTokenClaims, clientInfo, environment, claimsTenantId, authCodePayload, nativeAccountId, logger) {
  logger == null ? void 0 : logger.verbose("setCachedAccount called");
  const accountKeys = cacheStorage.getAccountKeys();
  const baseAccountKey = accountKeys.find((accountKey) => {
    return accountKey.startsWith(homeAccountId);
  });
  let cachedAccount = null;
  if (baseAccountKey) {
    cachedAccount = cacheStorage.getAccount(baseAccountKey);
  }
  const baseAccount = cachedAccount || AccountEntity.createAccount({
    homeAccountId,
    idTokenClaims,
    clientInfo,
    environment,
    cloudGraphHostName: authCodePayload == null ? void 0 : authCodePayload.cloud_graph_host_name,
    msGraphHost: authCodePayload == null ? void 0 : authCodePayload.msgraph_host,
    nativeAccountId
  }, authority, base64Decode);
  const tenantProfiles = baseAccount.tenantProfiles || [];
  const tenantId = claimsTenantId || baseAccount.realm;
  if (tenantId && !tenantProfiles.find((tenantProfile) => {
    return tenantProfile.tenantId === tenantId;
  })) {
    const newTenantProfile = buildTenantProfile(homeAccountId, baseAccount.localAccountId, tenantId, idTokenClaims);
    tenantProfiles.push(newTenantProfile);
  }
  baseAccount.tenantProfiles = tenantProfiles;
  return baseAccount;
}

// node_modules/@azure/msal-common/dist/request/RequestValidator.mjs
var RequestValidator = class {
  /**
   * Utility to check if the `redirectUri` in the request is a non-null value
   * @param redirectUri
   */
  static validateRedirectUri(redirectUri) {
    if (!redirectUri) {
      throw createClientConfigurationError(redirectUriEmpty);
    }
  }
  /**
   * Utility to validate prompt sent by the user in the request
   * @param prompt
   */
  static validatePrompt(prompt) {
    const promptValues = [];
    for (const value in PromptValue) {
      promptValues.push(PromptValue[value]);
    }
    if (promptValues.indexOf(prompt) < 0) {
      throw createClientConfigurationError(invalidPromptValue);
    }
  }
  static validateClaims(claims) {
    try {
      JSON.parse(claims);
    } catch (e) {
      throw createClientConfigurationError(invalidClaims);
    }
  }
  /**
   * Utility to validate code_challenge and code_challenge_method
   * @param codeChallenge
   * @param codeChallengeMethod
   */
  static validateCodeChallengeParams(codeChallenge, codeChallengeMethod) {
    if (!codeChallenge || !codeChallengeMethod) {
      throw createClientConfigurationError(pkceParamsMissing);
    } else {
      this.validateCodeChallengeMethod(codeChallengeMethod);
    }
  }
  /**
   * Utility to validate code_challenge_method
   * @param codeChallengeMethod
   */
  static validateCodeChallengeMethod(codeChallengeMethod) {
    if ([
      CodeChallengeMethodValues.PLAIN,
      CodeChallengeMethodValues.S256
    ].indexOf(codeChallengeMethod) < 0) {
      throw createClientConfigurationError(invalidCodeChallengeMethod);
    }
  }
};

// node_modules/@azure/msal-common/dist/utils/ClientAssertionUtils.mjs
async function getClientAssertion(clientAssertion, clientId, tokenEndpoint) {
  if (typeof clientAssertion === "string") {
    return clientAssertion;
  } else {
    const config2 = {
      clientId,
      tokenEndpoint
    };
    return clientAssertion(config2);
  }
}

// node_modules/@azure/msal-common/dist/client/AuthorizationCodeClient.mjs
var AuthorizationCodeClient = class extends BaseClient {
  constructor(configuration, performanceClient) {
    var _a;
    super(configuration, performanceClient);
    this.includeRedirectUri = true;
    this.oidcDefaultScopes = (_a = this.config.authOptions.authority.options.OIDCOptions) == null ? void 0 : _a.defaultScopes;
  }
  /**
   * API to acquire a token in exchange of 'authorization_code` acquired by the user in the first leg of the
   * authorization_code_grant
   * @param request
   */
  async acquireToken(request, authCodePayload) {
    var _a, _b;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.AuthClientAcquireToken, request.correlationId);
    if (!request.code) {
      throw createClientAuthError(requestCannotBeMade);
    }
    const reqTimestamp = nowSeconds();
    const response = await invokeAsync(this.executeTokenRequest.bind(this), PerformanceEvents.AuthClientExecuteTokenRequest, this.logger, this.performanceClient, request.correlationId)(this.authority, request);
    const requestId = (_b = response.headers) == null ? void 0 : _b[HeaderNames.X_MS_REQUEST_ID];
    const responseHandler = new ResponseHandler(this.config.authOptions.clientId, this.cacheManager, this.cryptoUtils, this.logger, this.config.serializableCache, this.config.persistencePlugin, this.performanceClient);
    responseHandler.validateTokenResponse(response.body);
    return invokeAsync(responseHandler.handleServerTokenResponse.bind(responseHandler), PerformanceEvents.HandleServerTokenResponse, this.logger, this.performanceClient, request.correlationId)(response.body, this.authority, reqTimestamp, request, authCodePayload, void 0, void 0, void 0, requestId);
  }
  /**
   * Used to log out the current user, and redirect the user to the postLogoutRedirectUri.
   * Default behaviour is to redirect the user to `window.location.href`.
   * @param authorityUri
   */
  getLogoutUri(logoutRequest) {
    if (!logoutRequest) {
      throw createClientConfigurationError(logoutRequestEmpty);
    }
    const queryString = this.createLogoutUrlQueryString(logoutRequest);
    return UrlString.appendQueryString(this.authority.endSessionEndpoint, queryString);
  }
  /**
   * Executes POST request to token endpoint
   * @param authority
   * @param request
   */
  async executeTokenRequest(authority, request) {
    var _a;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.AuthClientExecuteTokenRequest, request.correlationId);
    const queryParametersString = this.createTokenQueryParameters(request);
    const endpoint = UrlString.appendQueryString(authority.tokenEndpoint, queryParametersString);
    const requestBody = await invokeAsync(this.createTokenRequestBody.bind(this), PerformanceEvents.AuthClientCreateTokenRequestBody, this.logger, this.performanceClient, request.correlationId)(request);
    let ccsCredential = void 0;
    if (request.clientInfo) {
      try {
        const clientInfo = buildClientInfo(request.clientInfo, this.cryptoUtils.base64Decode);
        ccsCredential = {
          credential: `${clientInfo.uid}${Separators.CLIENT_INFO_SEPARATOR}${clientInfo.utid}`,
          type: CcsCredentialType.HOME_ACCOUNT_ID
        };
      } catch (e) {
        this.logger.verbose("Could not parse client info for CCS Header: " + e);
      }
    }
    const headers = this.createTokenRequestHeaders(ccsCredential || request.ccsCredential);
    const thumbprint = getRequestThumbprint(this.config.authOptions.clientId, request);
    return invokeAsync(this.executePostToTokenEndpoint.bind(this), PerformanceEvents.AuthorizationCodeClientExecutePostToTokenEndpoint, this.logger, this.performanceClient, request.correlationId)(endpoint, requestBody, headers, thumbprint, request.correlationId, PerformanceEvents.AuthorizationCodeClientExecutePostToTokenEndpoint);
  }
  /**
   * Generates a map for all the params to be sent to the service
   * @param request
   */
  async createTokenRequestBody(request) {
    var _a, _b;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.AuthClientCreateTokenRequestBody, request.correlationId);
    const parameters = /* @__PURE__ */ new Map();
    addClientId(parameters, request.embeddedClientId || ((_b = request.tokenBodyParameters) == null ? void 0 : _b[CLIENT_ID]) || this.config.authOptions.clientId);
    if (!this.includeRedirectUri) {
      RequestValidator.validateRedirectUri(request.redirectUri);
    } else {
      addRedirectUri(parameters, request.redirectUri);
    }
    addScopes(parameters, request.scopes, true, this.oidcDefaultScopes);
    addAuthorizationCode(parameters, request.code);
    addLibraryInfo(parameters, this.config.libraryInfo);
    addApplicationTelemetry(parameters, this.config.telemetry.application);
    addThrottling(parameters);
    if (this.serverTelemetryManager && !isOidcProtocolMode(this.config)) {
      addServerTelemetry(parameters, this.serverTelemetryManager);
    }
    if (request.codeVerifier) {
      addCodeVerifier(parameters, request.codeVerifier);
    }
    if (this.config.clientCredentials.clientSecret) {
      addClientSecret(parameters, this.config.clientCredentials.clientSecret);
    }
    if (this.config.clientCredentials.clientAssertion) {
      const clientAssertion = this.config.clientCredentials.clientAssertion;
      addClientAssertion(parameters, await getClientAssertion(clientAssertion.assertion, this.config.authOptions.clientId, request.resourceRequestUri));
      addClientAssertionType(parameters, clientAssertion.assertionType);
    }
    addGrantType(parameters, GrantType.AUTHORIZATION_CODE_GRANT);
    addClientInfo(parameters);
    if (request.authenticationScheme === AuthenticationScheme.POP) {
      const popTokenGenerator = new PopTokenGenerator(this.cryptoUtils, this.performanceClient);
      let reqCnfData;
      if (!request.popKid) {
        const generatedReqCnfData = await invokeAsync(popTokenGenerator.generateCnf.bind(popTokenGenerator), PerformanceEvents.PopTokenGenerateCnf, this.logger, this.performanceClient, request.correlationId)(request, this.logger);
        reqCnfData = generatedReqCnfData.reqCnfString;
      } else {
        reqCnfData = this.cryptoUtils.encodeKid(request.popKid);
      }
      addPopToken(parameters, reqCnfData);
    } else if (request.authenticationScheme === AuthenticationScheme.SSH) {
      if (request.sshJwk) {
        addSshJwk(parameters, request.sshJwk);
      } else {
        throw createClientConfigurationError(missingSshJwk);
      }
    }
    if (!StringUtils.isEmptyObj(request.claims) || this.config.authOptions.clientCapabilities && this.config.authOptions.clientCapabilities.length > 0) {
      addClaims(parameters, request.claims, this.config.authOptions.clientCapabilities);
    }
    let ccsCred = void 0;
    if (request.clientInfo) {
      try {
        const clientInfo = buildClientInfo(request.clientInfo, this.cryptoUtils.base64Decode);
        ccsCred = {
          credential: `${clientInfo.uid}${Separators.CLIENT_INFO_SEPARATOR}${clientInfo.utid}`,
          type: CcsCredentialType.HOME_ACCOUNT_ID
        };
      } catch (e) {
        this.logger.verbose("Could not parse client info for CCS Header: " + e);
      }
    } else {
      ccsCred = request.ccsCredential;
    }
    if (this.config.systemOptions.preventCorsPreflight && ccsCred) {
      switch (ccsCred.type) {
        case CcsCredentialType.HOME_ACCOUNT_ID:
          try {
            const clientInfo = buildClientInfoFromHomeAccountId(ccsCred.credential);
            addCcsOid(parameters, clientInfo);
          } catch (e) {
            this.logger.verbose("Could not parse home account ID for CCS Header: " + e);
          }
          break;
        case CcsCredentialType.UPN:
          addCcsUpn(parameters, ccsCred.credential);
          break;
      }
    }
    if (request.embeddedClientId) {
      addBrokerParameters(parameters, this.config.authOptions.clientId, this.config.authOptions.redirectUri);
    }
    if (request.tokenBodyParameters) {
      addExtraQueryParameters(parameters, request.tokenBodyParameters);
    }
    if (request.enableSpaAuthorizationCode && (!request.tokenBodyParameters || !request.tokenBodyParameters[RETURN_SPA_CODE])) {
      addExtraQueryParameters(parameters, {
        [RETURN_SPA_CODE]: "1"
      });
    }
    instrumentBrokerParams(parameters, request.correlationId, this.performanceClient);
    return mapToQueryString(parameters);
  }
  /**
   * This API validates the `EndSessionRequest` and creates a URL
   * @param request
   */
  createLogoutUrlQueryString(request) {
    const parameters = /* @__PURE__ */ new Map();
    if (request.postLogoutRedirectUri) {
      addPostLogoutRedirectUri(parameters, request.postLogoutRedirectUri);
    }
    if (request.correlationId) {
      addCorrelationId(parameters, request.correlationId);
    }
    if (request.idTokenHint) {
      addIdTokenHint(parameters, request.idTokenHint);
    }
    if (request.state) {
      addState(parameters, request.state);
    }
    if (request.logoutHint) {
      addLogoutHint(parameters, request.logoutHint);
    }
    if (request.extraQueryParameters) {
      addExtraQueryParameters(parameters, request.extraQueryParameters);
    }
    if (this.config.authOptions.instanceAware) {
      addInstanceAware(parameters);
    }
    return mapToQueryString(parameters);
  }
};

// node_modules/@azure/msal-common/dist/client/RefreshTokenClient.mjs
var DEFAULT_REFRESH_TOKEN_EXPIRATION_OFFSET_SECONDS = 300;
var RefreshTokenClient = class extends BaseClient {
  constructor(configuration, performanceClient) {
    super(configuration, performanceClient);
  }
  async acquireToken(request) {
    var _a, _b;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.RefreshTokenClientAcquireToken, request.correlationId);
    const reqTimestamp = nowSeconds();
    const response = await invokeAsync(this.executeTokenRequest.bind(this), PerformanceEvents.RefreshTokenClientExecuteTokenRequest, this.logger, this.performanceClient, request.correlationId)(request, this.authority);
    const requestId = (_b = response.headers) == null ? void 0 : _b[HeaderNames.X_MS_REQUEST_ID];
    const responseHandler = new ResponseHandler(this.config.authOptions.clientId, this.cacheManager, this.cryptoUtils, this.logger, this.config.serializableCache, this.config.persistencePlugin);
    responseHandler.validateTokenResponse(response.body);
    return invokeAsync(responseHandler.handleServerTokenResponse.bind(responseHandler), PerformanceEvents.HandleServerTokenResponse, this.logger, this.performanceClient, request.correlationId)(response.body, this.authority, reqTimestamp, request, void 0, void 0, true, request.forceCache, requestId);
  }
  /**
   * Gets cached refresh token and attaches to request, then calls acquireToken API
   * @param request
   */
  async acquireTokenByRefreshToken(request) {
    var _a;
    if (!request) {
      throw createClientConfigurationError(tokenRequestEmpty);
    }
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.RefreshTokenClientAcquireTokenByRefreshToken, request.correlationId);
    if (!request.account) {
      throw createClientAuthError(noAccountInSilentRequest);
    }
    const isFOCI = this.cacheManager.isAppMetadataFOCI(request.account.environment);
    if (isFOCI) {
      try {
        return await invokeAsync(this.acquireTokenWithCachedRefreshToken.bind(this), PerformanceEvents.RefreshTokenClientAcquireTokenWithCachedRefreshToken, this.logger, this.performanceClient, request.correlationId)(request, true);
      } catch (e) {
        const noFamilyRTInCache = e instanceof InteractionRequiredAuthError && e.errorCode === noTokensFound;
        const clientMismatchErrorWithFamilyRT = e instanceof ServerError && e.errorCode === Errors.INVALID_GRANT_ERROR && e.subError === Errors.CLIENT_MISMATCH_ERROR;
        if (noFamilyRTInCache || clientMismatchErrorWithFamilyRT) {
          return invokeAsync(this.acquireTokenWithCachedRefreshToken.bind(this), PerformanceEvents.RefreshTokenClientAcquireTokenWithCachedRefreshToken, this.logger, this.performanceClient, request.correlationId)(request, false);
        } else {
          throw e;
        }
      }
    }
    return invokeAsync(this.acquireTokenWithCachedRefreshToken.bind(this), PerformanceEvents.RefreshTokenClientAcquireTokenWithCachedRefreshToken, this.logger, this.performanceClient, request.correlationId)(request, false);
  }
  /**
   * makes a network call to acquire tokens by exchanging RefreshToken available in userCache; throws if refresh token is not cached
   * @param request
   */
  async acquireTokenWithCachedRefreshToken(request, foci) {
    var _a, _b, _c;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.RefreshTokenClientAcquireTokenWithCachedRefreshToken, request.correlationId);
    const refreshToken = invoke(this.cacheManager.getRefreshToken.bind(this.cacheManager), PerformanceEvents.CacheManagerGetRefreshToken, this.logger, this.performanceClient, request.correlationId)(request.account, foci, void 0, this.performanceClient, request.correlationId);
    if (!refreshToken) {
      throw createInteractionRequiredAuthError(noTokensFound);
    }
    if (refreshToken.expiresOn && isTokenExpired(refreshToken.expiresOn, request.refreshTokenExpirationOffsetSeconds || DEFAULT_REFRESH_TOKEN_EXPIRATION_OFFSET_SECONDS)) {
      (_b = this.performanceClient) == null ? void 0 : _b.addFields({ rtExpiresOnMs: Number(refreshToken.expiresOn) }, request.correlationId);
      throw createInteractionRequiredAuthError(refreshTokenExpired);
    }
    const refreshTokenRequest = {
      ...request,
      refreshToken: refreshToken.secret,
      authenticationScheme: request.authenticationScheme || AuthenticationScheme.BEARER,
      ccsCredential: {
        credential: request.account.homeAccountId,
        type: CcsCredentialType.HOME_ACCOUNT_ID
      }
    };
    try {
      return await invokeAsync(this.acquireToken.bind(this), PerformanceEvents.RefreshTokenClientAcquireToken, this.logger, this.performanceClient, request.correlationId)(refreshTokenRequest);
    } catch (e) {
      if (e instanceof InteractionRequiredAuthError) {
        (_c = this.performanceClient) == null ? void 0 : _c.addFields({ rtExpiresOnMs: Number(refreshToken.expiresOn) }, request.correlationId);
        if (e.subError === badToken) {
          this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");
          const badRefreshTokenKey = generateCredentialKey(refreshToken);
          this.cacheManager.removeRefreshToken(badRefreshTokenKey);
        }
      }
      throw e;
    }
  }
  /**
   * Constructs the network message and makes a NW call to the underlying secure token service
   * @param request
   * @param authority
   */
  async executeTokenRequest(request, authority) {
    var _a;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.RefreshTokenClientExecuteTokenRequest, request.correlationId);
    const queryParametersString = this.createTokenQueryParameters(request);
    const endpoint = UrlString.appendQueryString(authority.tokenEndpoint, queryParametersString);
    const requestBody = await invokeAsync(this.createTokenRequestBody.bind(this), PerformanceEvents.RefreshTokenClientCreateTokenRequestBody, this.logger, this.performanceClient, request.correlationId)(request);
    const headers = this.createTokenRequestHeaders(request.ccsCredential);
    const thumbprint = getRequestThumbprint(this.config.authOptions.clientId, request);
    return invokeAsync(this.executePostToTokenEndpoint.bind(this), PerformanceEvents.RefreshTokenClientExecutePostToTokenEndpoint, this.logger, this.performanceClient, request.correlationId)(endpoint, requestBody, headers, thumbprint, request.correlationId, PerformanceEvents.RefreshTokenClientExecutePostToTokenEndpoint);
  }
  /**
   * Helper function to create the token request body
   * @param request
   */
  async createTokenRequestBody(request) {
    var _a, _b, _c;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.RefreshTokenClientCreateTokenRequestBody, request.correlationId);
    const parameters = /* @__PURE__ */ new Map();
    addClientId(parameters, request.embeddedClientId || ((_b = request.tokenBodyParameters) == null ? void 0 : _b[CLIENT_ID]) || this.config.authOptions.clientId);
    if (request.redirectUri) {
      addRedirectUri(parameters, request.redirectUri);
    }
    addScopes(parameters, request.scopes, true, (_c = this.config.authOptions.authority.options.OIDCOptions) == null ? void 0 : _c.defaultScopes);
    addGrantType(parameters, GrantType.REFRESH_TOKEN_GRANT);
    addClientInfo(parameters);
    addLibraryInfo(parameters, this.config.libraryInfo);
    addApplicationTelemetry(parameters, this.config.telemetry.application);
    addThrottling(parameters);
    if (this.serverTelemetryManager && !isOidcProtocolMode(this.config)) {
      addServerTelemetry(parameters, this.serverTelemetryManager);
    }
    addRefreshToken(parameters, request.refreshToken);
    if (this.config.clientCredentials.clientSecret) {
      addClientSecret(parameters, this.config.clientCredentials.clientSecret);
    }
    if (this.config.clientCredentials.clientAssertion) {
      const clientAssertion = this.config.clientCredentials.clientAssertion;
      addClientAssertion(parameters, await getClientAssertion(clientAssertion.assertion, this.config.authOptions.clientId, request.resourceRequestUri));
      addClientAssertionType(parameters, clientAssertion.assertionType);
    }
    if (request.authenticationScheme === AuthenticationScheme.POP) {
      const popTokenGenerator = new PopTokenGenerator(this.cryptoUtils, this.performanceClient);
      let reqCnfData;
      if (!request.popKid) {
        const generatedReqCnfData = await invokeAsync(popTokenGenerator.generateCnf.bind(popTokenGenerator), PerformanceEvents.PopTokenGenerateCnf, this.logger, this.performanceClient, request.correlationId)(request, this.logger);
        reqCnfData = generatedReqCnfData.reqCnfString;
      } else {
        reqCnfData = this.cryptoUtils.encodeKid(request.popKid);
      }
      addPopToken(parameters, reqCnfData);
    } else if (request.authenticationScheme === AuthenticationScheme.SSH) {
      if (request.sshJwk) {
        addSshJwk(parameters, request.sshJwk);
      } else {
        throw createClientConfigurationError(missingSshJwk);
      }
    }
    if (!StringUtils.isEmptyObj(request.claims) || this.config.authOptions.clientCapabilities && this.config.authOptions.clientCapabilities.length > 0) {
      addClaims(parameters, request.claims, this.config.authOptions.clientCapabilities);
    }
    if (this.config.systemOptions.preventCorsPreflight && request.ccsCredential) {
      switch (request.ccsCredential.type) {
        case CcsCredentialType.HOME_ACCOUNT_ID:
          try {
            const clientInfo = buildClientInfoFromHomeAccountId(request.ccsCredential.credential);
            addCcsOid(parameters, clientInfo);
          } catch (e) {
            this.logger.verbose("Could not parse home account ID for CCS Header: " + e);
          }
          break;
        case CcsCredentialType.UPN:
          addCcsUpn(parameters, request.ccsCredential.credential);
          break;
      }
    }
    if (request.embeddedClientId) {
      addBrokerParameters(parameters, this.config.authOptions.clientId, this.config.authOptions.redirectUri);
    }
    if (request.tokenBodyParameters) {
      addExtraQueryParameters(parameters, request.tokenBodyParameters);
    }
    instrumentBrokerParams(parameters, request.correlationId, this.performanceClient);
    return mapToQueryString(parameters);
  }
};

// node_modules/@azure/msal-common/dist/client/SilentFlowClient.mjs
var SilentFlowClient = class extends BaseClient {
  constructor(configuration, performanceClient) {
    super(configuration, performanceClient);
  }
  /**
   * Retrieves token from cache or throws an error if it must be refreshed.
   * @param request
   */
  async acquireCachedToken(request) {
    var _a;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.SilentFlowClientAcquireCachedToken, request.correlationId);
    let lastCacheOutcome = CacheOutcome.NOT_APPLICABLE;
    if (request.forceRefresh || !this.config.cacheOptions.claimsBasedCachingEnabled && !StringUtils.isEmptyObj(request.claims)) {
      this.setCacheOutcome(CacheOutcome.FORCE_REFRESH_OR_CLAIMS, request.correlationId);
      throw createClientAuthError(tokenRefreshRequired);
    }
    if (!request.account) {
      throw createClientAuthError(noAccountInSilentRequest);
    }
    const requestTenantId = request.account.tenantId || getTenantFromAuthorityString(request.authority);
    const tokenKeys = this.cacheManager.getTokenKeys();
    const cachedAccessToken = this.cacheManager.getAccessToken(request.account, request, tokenKeys, requestTenantId, this.performanceClient, request.correlationId);
    if (!cachedAccessToken) {
      this.setCacheOutcome(CacheOutcome.NO_CACHED_ACCESS_TOKEN, request.correlationId);
      throw createClientAuthError(tokenRefreshRequired);
    } else if (wasClockTurnedBack(cachedAccessToken.cachedAt) || isTokenExpired(cachedAccessToken.expiresOn, this.config.systemOptions.tokenRenewalOffsetSeconds)) {
      this.setCacheOutcome(CacheOutcome.CACHED_ACCESS_TOKEN_EXPIRED, request.correlationId);
      throw createClientAuthError(tokenRefreshRequired);
    } else if (cachedAccessToken.refreshOn && isTokenExpired(cachedAccessToken.refreshOn, 0)) {
      lastCacheOutcome = CacheOutcome.PROACTIVELY_REFRESHED;
    }
    const environment = request.authority || this.authority.getPreferredCache();
    const cacheRecord = {
      account: this.cacheManager.readAccountFromCache(request.account),
      accessToken: cachedAccessToken,
      idToken: this.cacheManager.getIdToken(request.account, tokenKeys, requestTenantId, this.performanceClient, request.correlationId),
      refreshToken: null,
      appMetadata: this.cacheManager.readAppMetadataFromCache(environment)
    };
    this.setCacheOutcome(lastCacheOutcome, request.correlationId);
    if (this.config.serverTelemetryManager) {
      this.config.serverTelemetryManager.incrementCacheHits();
    }
    return [
      await invokeAsync(this.generateResultFromCacheRecord.bind(this), PerformanceEvents.SilentFlowClientGenerateResultFromCacheRecord, this.logger, this.performanceClient, request.correlationId)(cacheRecord, request),
      lastCacheOutcome
    ];
  }
  setCacheOutcome(cacheOutcome, correlationId) {
    var _a, _b;
    (_a = this.serverTelemetryManager) == null ? void 0 : _a.setCacheOutcome(cacheOutcome);
    (_b = this.performanceClient) == null ? void 0 : _b.addFields({
      cacheOutcome
    }, correlationId);
    if (cacheOutcome !== CacheOutcome.NOT_APPLICABLE) {
      this.logger.info(`Token refresh is required due to cache outcome: ${cacheOutcome}`);
    }
  }
  /**
   * Helper function to build response object from the CacheRecord
   * @param cacheRecord
   */
  async generateResultFromCacheRecord(cacheRecord, request) {
    var _a;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.SilentFlowClientGenerateResultFromCacheRecord, request.correlationId);
    let idTokenClaims;
    if (cacheRecord.idToken) {
      idTokenClaims = extractTokenClaims(cacheRecord.idToken.secret, this.config.cryptoInterface.base64Decode);
    }
    if (request.maxAge || request.maxAge === 0) {
      const authTime = idTokenClaims == null ? void 0 : idTokenClaims.auth_time;
      if (!authTime) {
        throw createClientAuthError(authTimeNotFound);
      }
      checkMaxAge(authTime, request.maxAge);
    }
    return ResponseHandler.generateAuthenticationResult(this.cryptoUtils, this.authority, cacheRecord, true, request, idTokenClaims);
  }
};

// node_modules/@azure/msal-common/dist/protocol/Authorize.mjs
var Authorize_exports = {};
__export(Authorize_exports, {
  getAuthorizationCodePayload: () => getAuthorizationCodePayload,
  getAuthorizeUrl: () => getAuthorizeUrl,
  getStandardAuthorizeRequestParameters: () => getStandardAuthorizeRequestParameters,
  validateAuthorizationResponse: () => validateAuthorizationResponse
});
function getStandardAuthorizeRequestParameters(authOptions, request, logger, performanceClient) {
  var _a, _b;
  const correlationId = request.correlationId;
  const parameters = /* @__PURE__ */ new Map();
  addClientId(parameters, request.embeddedClientId || ((_a = request.extraQueryParameters) == null ? void 0 : _a[CLIENT_ID]) || authOptions.clientId);
  const requestScopes = [
    ...request.scopes || [],
    ...request.extraScopesToConsent || []
  ];
  addScopes(parameters, requestScopes, true, (_b = authOptions.authority.options.OIDCOptions) == null ? void 0 : _b.defaultScopes);
  addRedirectUri(parameters, request.redirectUri);
  addCorrelationId(parameters, correlationId);
  addResponseMode(parameters, request.responseMode);
  addClientInfo(parameters);
  if (request.prompt) {
    addPrompt(parameters, request.prompt);
    performanceClient == null ? void 0 : performanceClient.addFields({ prompt: request.prompt }, correlationId);
  }
  if (request.domainHint) {
    addDomainHint(parameters, request.domainHint);
    performanceClient == null ? void 0 : performanceClient.addFields({ domainHintFromRequest: true }, correlationId);
  }
  if (request.prompt !== PromptValue.SELECT_ACCOUNT) {
    if (request.sid && request.prompt === PromptValue.NONE) {
      logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request");
      addSid(parameters, request.sid);
      performanceClient == null ? void 0 : performanceClient.addFields({ sidFromRequest: true }, correlationId);
    } else if (request.account) {
      const accountSid = extractAccountSid(request.account);
      let accountLoginHintClaim = extractLoginHint(request.account);
      if (accountLoginHintClaim && request.domainHint) {
        logger.warning(`AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint`);
        accountLoginHintClaim = null;
      }
      if (accountLoginHintClaim) {
        logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account");
        addLoginHint(parameters, accountLoginHintClaim);
        performanceClient == null ? void 0 : performanceClient.addFields({ loginHintFromClaim: true }, correlationId);
        try {
          const clientInfo = buildClientInfoFromHomeAccountId(request.account.homeAccountId);
          addCcsOid(parameters, clientInfo);
        } catch (e) {
          logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header");
        }
      } else if (accountSid && request.prompt === PromptValue.NONE) {
        logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account");
        addSid(parameters, accountSid);
        performanceClient == null ? void 0 : performanceClient.addFields({ sidFromClaim: true }, correlationId);
        try {
          const clientInfo = buildClientInfoFromHomeAccountId(request.account.homeAccountId);
          addCcsOid(parameters, clientInfo);
        } catch (e) {
          logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header");
        }
      } else if (request.loginHint) {
        logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request");
        addLoginHint(parameters, request.loginHint);
        addCcsUpn(parameters, request.loginHint);
        performanceClient == null ? void 0 : performanceClient.addFields({ loginHintFromRequest: true }, correlationId);
      } else if (request.account.username) {
        logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account");
        addLoginHint(parameters, request.account.username);
        performanceClient == null ? void 0 : performanceClient.addFields({ loginHintFromUpn: true }, correlationId);
        try {
          const clientInfo = buildClientInfoFromHomeAccountId(request.account.homeAccountId);
          addCcsOid(parameters, clientInfo);
        } catch (e) {
          logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header");
        }
      }
    } else if (request.loginHint) {
      logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request");
      addLoginHint(parameters, request.loginHint);
      addCcsUpn(parameters, request.loginHint);
      performanceClient == null ? void 0 : performanceClient.addFields({ loginHintFromRequest: true }, correlationId);
    }
  } else {
    logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");
  }
  if (request.nonce) {
    addNonce(parameters, request.nonce);
  }
  if (request.state) {
    addState(parameters, request.state);
  }
  if (request.claims || authOptions.clientCapabilities && authOptions.clientCapabilities.length > 0) {
    addClaims(parameters, request.claims, authOptions.clientCapabilities);
  }
  if (request.embeddedClientId) {
    addBrokerParameters(parameters, authOptions.clientId, authOptions.redirectUri);
  }
  if (authOptions.instanceAware && (!request.extraQueryParameters || !Object.keys(request.extraQueryParameters).includes(INSTANCE_AWARE))) {
    addInstanceAware(parameters);
  }
  return parameters;
}
function getAuthorizeUrl(authority, requestParameters) {
  const queryString = mapToQueryString(requestParameters);
  return UrlString.appendQueryString(authority.authorizationEndpoint, queryString);
}
function getAuthorizationCodePayload(serverParams, cachedState) {
  validateAuthorizationResponse(serverParams, cachedState);
  if (!serverParams.code) {
    throw createClientAuthError(authorizationCodeMissingFromServerResponse);
  }
  return serverParams;
}
function validateAuthorizationResponse(serverResponse, requestState) {
  if (!serverResponse.state || !requestState) {
    throw serverResponse.state ? createClientAuthError(stateNotFound, "Cached State") : createClientAuthError(stateNotFound, "Server State");
  }
  let decodedServerResponseState;
  let decodedRequestState;
  try {
    decodedServerResponseState = decodeURIComponent(serverResponse.state);
  } catch (e) {
    throw createClientAuthError(invalidState, serverResponse.state);
  }
  try {
    decodedRequestState = decodeURIComponent(requestState);
  } catch (e) {
    throw createClientAuthError(invalidState, serverResponse.state);
  }
  if (decodedServerResponseState !== decodedRequestState) {
    throw createClientAuthError(stateMismatch);
  }
  if (serverResponse.error || serverResponse.error_description || serverResponse.suberror) {
    const serverErrorNo = parseServerErrorNo(serverResponse);
    if (isInteractionRequiredError(serverResponse.error, serverResponse.error_description, serverResponse.suberror)) {
      throw new InteractionRequiredAuthError(serverResponse.error || "", serverResponse.error_description, serverResponse.suberror, serverResponse.timestamp || "", serverResponse.trace_id || "", serverResponse.correlation_id || "", serverResponse.claims || "", serverErrorNo);
    }
    throw new ServerError(serverResponse.error || "", serverResponse.error_description, serverResponse.suberror, serverErrorNo);
  }
}
function parseServerErrorNo(serverResponse) {
  var _a, _b;
  const errorCodePrefix = "code=";
  const errorCodePrefixIndex = (_a = serverResponse.error_uri) == null ? void 0 : _a.lastIndexOf(errorCodePrefix);
  return errorCodePrefixIndex && errorCodePrefixIndex >= 0 ? (_b = serverResponse.error_uri) == null ? void 0 : _b.substring(errorCodePrefixIndex + errorCodePrefix.length) : void 0;
}
function extractAccountSid(account) {
  var _a;
  return ((_a = account.idTokenClaims) == null ? void 0 : _a.sid) || null;
}
function extractLoginHint(account) {
  var _a;
  return ((_a = account.idTokenClaims) == null ? void 0 : _a.login_hint) || null;
}

// node_modules/@azure/msal-common/dist/telemetry/server/ServerTelemetryManager.mjs
var skuGroupSeparator = ",";
var skuValueSeparator = "|";
function makeExtraSkuString(params) {
  const { skus, libraryName, libraryVersion, extensionName, extensionVersion } = params;
  const skuMap = /* @__PURE__ */ new Map([
    [0, [libraryName, libraryVersion]],
    [2, [extensionName, extensionVersion]]
  ]);
  let skuArr = [];
  if (skus == null ? void 0 : skus.length) {
    skuArr = skus.split(skuGroupSeparator);
    if (skuArr.length < 4) {
      return skus;
    }
  } else {
    skuArr = Array.from({ length: 4 }, () => skuValueSeparator);
  }
  skuMap.forEach((value, key) => {
    var _a, _b;
    if (value.length === 2 && ((_a = value[0]) == null ? void 0 : _a.length) && ((_b = value[1]) == null ? void 0 : _b.length)) {
      setSku({
        skuArr,
        index: key,
        skuName: value[0],
        skuVersion: value[1]
      });
    }
  });
  return skuArr.join(skuGroupSeparator);
}
function setSku(params) {
  const { skuArr, index, skuName, skuVersion } = params;
  if (index >= skuArr.length) {
    return;
  }
  skuArr[index] = [skuName, skuVersion].join(skuValueSeparator);
}
var ServerTelemetryManager = class _ServerTelemetryManager {
  constructor(telemetryRequest, cacheManager) {
    this.cacheOutcome = CacheOutcome.NOT_APPLICABLE;
    this.cacheManager = cacheManager;
    this.apiId = telemetryRequest.apiId;
    this.correlationId = telemetryRequest.correlationId;
    this.wrapperSKU = telemetryRequest.wrapperSKU || Constants.EMPTY_STRING;
    this.wrapperVer = telemetryRequest.wrapperVer || Constants.EMPTY_STRING;
    this.telemetryCacheKey = SERVER_TELEM_CONSTANTS.CACHE_KEY + Separators.CACHE_KEY_SEPARATOR + telemetryRequest.clientId;
  }
  /**
   * API to add MSER Telemetry to request
   */
  generateCurrentRequestHeaderValue() {
    const request = `${this.apiId}${SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR}${this.cacheOutcome}`;
    const platformFieldsArr = [this.wrapperSKU, this.wrapperVer];
    const nativeBrokerErrorCode = this.getNativeBrokerErrorCode();
    if (nativeBrokerErrorCode == null ? void 0 : nativeBrokerErrorCode.length) {
      platformFieldsArr.push(`broker_error=${nativeBrokerErrorCode}`);
    }
    const platformFields = platformFieldsArr.join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR);
    const regionDiscoveryFields = this.getRegionDiscoveryFields();
    const requestWithRegionDiscoveryFields = [
      request,
      regionDiscoveryFields
    ].join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR);
    return [
      SERVER_TELEM_CONSTANTS.SCHEMA_VERSION,
      requestWithRegionDiscoveryFields,
      platformFields
    ].join(SERVER_TELEM_CONSTANTS.CATEGORY_SEPARATOR);
  }
  /**
   * API to add MSER Telemetry for the last failed request
   */
  generateLastRequestHeaderValue() {
    const lastRequests = this.getLastRequests();
    const maxErrors = _ServerTelemetryManager.maxErrorsToSend(lastRequests);
    const failedRequests = lastRequests.failedRequests.slice(0, 2 * maxErrors).join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR);
    const errors = lastRequests.errors.slice(0, maxErrors).join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR);
    const errorCount = lastRequests.errors.length;
    const overflow = maxErrors < errorCount ? SERVER_TELEM_CONSTANTS.OVERFLOW_TRUE : SERVER_TELEM_CONSTANTS.OVERFLOW_FALSE;
    const platformFields = [errorCount, overflow].join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR);
    return [
      SERVER_TELEM_CONSTANTS.SCHEMA_VERSION,
      lastRequests.cacheHits,
      failedRequests,
      errors,
      platformFields
    ].join(SERVER_TELEM_CONSTANTS.CATEGORY_SEPARATOR);
  }
  /**
   * API to cache token failures for MSER data capture
   * @param error
   */
  cacheFailedRequest(error) {
    const lastRequests = this.getLastRequests();
    if (lastRequests.errors.length >= SERVER_TELEM_CONSTANTS.MAX_CACHED_ERRORS) {
      lastRequests.failedRequests.shift();
      lastRequests.failedRequests.shift();
      lastRequests.errors.shift();
    }
    lastRequests.failedRequests.push(this.apiId, this.correlationId);
    if (error instanceof Error && !!error && error.toString()) {
      if (error instanceof AuthError) {
        if (error.subError) {
          lastRequests.errors.push(error.subError);
        } else if (error.errorCode) {
          lastRequests.errors.push(error.errorCode);
        } else {
          lastRequests.errors.push(error.toString());
        }
      } else {
        lastRequests.errors.push(error.toString());
      }
    } else {
      lastRequests.errors.push(SERVER_TELEM_CONSTANTS.UNKNOWN_ERROR);
    }
    this.cacheManager.setServerTelemetry(this.telemetryCacheKey, lastRequests);
    return;
  }
  /**
   * Update server telemetry cache entry by incrementing cache hit counter
   */
  incrementCacheHits() {
    const lastRequests = this.getLastRequests();
    lastRequests.cacheHits += 1;
    this.cacheManager.setServerTelemetry(this.telemetryCacheKey, lastRequests);
    return lastRequests.cacheHits;
  }
  /**
   * Get the server telemetry entity from cache or initialize a new one
   */
  getLastRequests() {
    const initialValue = {
      failedRequests: [],
      errors: [],
      cacheHits: 0
    };
    const lastRequests = this.cacheManager.getServerTelemetry(this.telemetryCacheKey);
    return lastRequests || initialValue;
  }
  /**
   * Remove server telemetry cache entry
   */
  clearTelemetryCache() {
    const lastRequests = this.getLastRequests();
    const numErrorsFlushed = _ServerTelemetryManager.maxErrorsToSend(lastRequests);
    const errorCount = lastRequests.errors.length;
    if (numErrorsFlushed === errorCount) {
      this.cacheManager.removeItem(this.telemetryCacheKey);
    } else {
      const serverTelemEntity = {
        failedRequests: lastRequests.failedRequests.slice(numErrorsFlushed * 2),
        errors: lastRequests.errors.slice(numErrorsFlushed),
        cacheHits: 0
      };
      this.cacheManager.setServerTelemetry(this.telemetryCacheKey, serverTelemEntity);
    }
  }
  /**
   * Returns the maximum number of errors that can be flushed to the server in the next network request
   * @param serverTelemetryEntity
   */
  static maxErrorsToSend(serverTelemetryEntity) {
    let i;
    let maxErrors = 0;
    let dataSize = 0;
    const errorCount = serverTelemetryEntity.errors.length;
    for (i = 0; i < errorCount; i++) {
      const apiId = serverTelemetryEntity.failedRequests[2 * i] || Constants.EMPTY_STRING;
      const correlationId = serverTelemetryEntity.failedRequests[2 * i + 1] || Constants.EMPTY_STRING;
      const errorCode = serverTelemetryEntity.errors[i] || Constants.EMPTY_STRING;
      dataSize += apiId.toString().length + correlationId.toString().length + errorCode.length + 3;
      if (dataSize < SERVER_TELEM_CONSTANTS.MAX_LAST_HEADER_BYTES) {
        maxErrors += 1;
      } else {
        break;
      }
    }
    return maxErrors;
  }
  /**
   * Get the region discovery fields
   *
   * @returns string
   */
  getRegionDiscoveryFields() {
    const regionDiscoveryFields = [];
    regionDiscoveryFields.push(this.regionUsed || Constants.EMPTY_STRING);
    regionDiscoveryFields.push(this.regionSource || Constants.EMPTY_STRING);
    regionDiscoveryFields.push(this.regionOutcome || Constants.EMPTY_STRING);
    return regionDiscoveryFields.join(",");
  }
  /**
   * Update the region discovery metadata
   *
   * @param regionDiscoveryMetadata
   * @returns void
   */
  updateRegionDiscoveryMetadata(regionDiscoveryMetadata) {
    this.regionUsed = regionDiscoveryMetadata.region_used;
    this.regionSource = regionDiscoveryMetadata.region_source;
    this.regionOutcome = regionDiscoveryMetadata.region_outcome;
  }
  /**
   * Set cache outcome
   */
  setCacheOutcome(cacheOutcome) {
    this.cacheOutcome = cacheOutcome;
  }
  setNativeBrokerErrorCode(errorCode) {
    const lastRequests = this.getLastRequests();
    lastRequests.nativeBrokerErrorCode = errorCode;
    this.cacheManager.setServerTelemetry(this.telemetryCacheKey, lastRequests);
  }
  getNativeBrokerErrorCode() {
    return this.getLastRequests().nativeBrokerErrorCode;
  }
  clearNativeBrokerErrorCode() {
    const lastRequests = this.getLastRequests();
    delete lastRequests.nativeBrokerErrorCode;
    this.cacheManager.setServerTelemetry(this.telemetryCacheKey, lastRequests);
  }
  static makeExtraSkuString(params) {
    return makeExtraSkuString(params);
  }
};

// node_modules/@azure/msal-node/dist/cache/serializer/Deserializer.mjs
var Deserializer = class {
  /**
   * Parse the JSON blob in memory and deserialize the content
   * @param cachedJson - JSON blob cache
   */
  static deserializeJSONBlob(jsonFile) {
    const deserializedCache = !jsonFile ? {} : JSON.parse(jsonFile);
    return deserializedCache;
  }
  /**
   * Deserializes accounts to AccountEntity objects
   * @param accounts - accounts of type SerializedAccountEntity
   */
  static deserializeAccounts(accounts) {
    const accountObjects = {};
    if (accounts) {
      Object.keys(accounts).map(function(key) {
        var _a;
        const serializedAcc = accounts[key];
        const mappedAcc = {
          homeAccountId: serializedAcc.home_account_id,
          environment: serializedAcc.environment,
          realm: serializedAcc.realm,
          localAccountId: serializedAcc.local_account_id,
          username: serializedAcc.username,
          authorityType: serializedAcc.authority_type,
          name: serializedAcc.name,
          clientInfo: serializedAcc.client_info,
          lastModificationTime: serializedAcc.last_modification_time,
          lastModificationApp: serializedAcc.last_modification_app,
          tenantProfiles: (_a = serializedAcc.tenantProfiles) == null ? void 0 : _a.map((serializedTenantProfile) => {
            return JSON.parse(serializedTenantProfile);
          })
        };
        const account = new AccountEntity();
        CacheManager.toObject(account, mappedAcc);
        accountObjects[key] = account;
      });
    }
    return accountObjects;
  }
  /**
   * Deserializes id tokens to IdTokenEntity objects
   * @param idTokens - credentials of type SerializedIdTokenEntity
   */
  static deserializeIdTokens(idTokens) {
    const idObjects = {};
    if (idTokens) {
      Object.keys(idTokens).map(function(key) {
        const serializedIdT = idTokens[key];
        const idToken = {
          homeAccountId: serializedIdT.home_account_id,
          environment: serializedIdT.environment,
          credentialType: serializedIdT.credential_type,
          clientId: serializedIdT.client_id,
          secret: serializedIdT.secret,
          realm: serializedIdT.realm
        };
        idObjects[key] = idToken;
      });
    }
    return idObjects;
  }
  /**
   * Deserializes access tokens to AccessTokenEntity objects
   * @param accessTokens - access tokens of type SerializedAccessTokenEntity
   */
  static deserializeAccessTokens(accessTokens) {
    const atObjects = {};
    if (accessTokens) {
      Object.keys(accessTokens).map(function(key) {
        const serializedAT = accessTokens[key];
        const accessToken = {
          homeAccountId: serializedAT.home_account_id,
          environment: serializedAT.environment,
          credentialType: serializedAT.credential_type,
          clientId: serializedAT.client_id,
          secret: serializedAT.secret,
          realm: serializedAT.realm,
          target: serializedAT.target,
          cachedAt: serializedAT.cached_at,
          expiresOn: serializedAT.expires_on,
          extendedExpiresOn: serializedAT.extended_expires_on,
          refreshOn: serializedAT.refresh_on,
          keyId: serializedAT.key_id,
          tokenType: serializedAT.token_type,
          requestedClaims: serializedAT.requestedClaims,
          requestedClaimsHash: serializedAT.requestedClaimsHash,
          userAssertionHash: serializedAT.userAssertionHash
        };
        atObjects[key] = accessToken;
      });
    }
    return atObjects;
  }
  /**
   * Deserializes refresh tokens to RefreshTokenEntity objects
   * @param refreshTokens - refresh tokens of type SerializedRefreshTokenEntity
   */
  static deserializeRefreshTokens(refreshTokens) {
    const rtObjects = {};
    if (refreshTokens) {
      Object.keys(refreshTokens).map(function(key) {
        const serializedRT = refreshTokens[key];
        const refreshToken = {
          homeAccountId: serializedRT.home_account_id,
          environment: serializedRT.environment,
          credentialType: serializedRT.credential_type,
          clientId: serializedRT.client_id,
          secret: serializedRT.secret,
          familyId: serializedRT.family_id,
          target: serializedRT.target,
          realm: serializedRT.realm
        };
        rtObjects[key] = refreshToken;
      });
    }
    return rtObjects;
  }
  /**
   * Deserializes appMetadata to AppMetaData objects
   * @param appMetadata - app metadata of type SerializedAppMetadataEntity
   */
  static deserializeAppMetadata(appMetadata) {
    const appMetadataObjects = {};
    if (appMetadata) {
      Object.keys(appMetadata).map(function(key) {
        const serializedAmdt = appMetadata[key];
        appMetadataObjects[key] = {
          clientId: serializedAmdt.client_id,
          environment: serializedAmdt.environment,
          familyId: serializedAmdt.family_id
        };
      });
    }
    return appMetadataObjects;
  }
  /**
   * Deserialize an inMemory Cache
   * @param jsonCache - JSON blob cache
   */
  static deserializeAllCache(jsonCache) {
    return {
      accounts: jsonCache.Account ? this.deserializeAccounts(jsonCache.Account) : {},
      idTokens: jsonCache.IdToken ? this.deserializeIdTokens(jsonCache.IdToken) : {},
      accessTokens: jsonCache.AccessToken ? this.deserializeAccessTokens(jsonCache.AccessToken) : {},
      refreshTokens: jsonCache.RefreshToken ? this.deserializeRefreshTokens(jsonCache.RefreshToken) : {},
      appMetadata: jsonCache.AppMetadata ? this.deserializeAppMetadata(jsonCache.AppMetadata) : {}
    };
  }
};

// node_modules/@azure/msal-node/dist/utils/Constants.mjs
var MANAGED_IDENTITY_DEFAULT_TENANT = "managed_identity";
var DEFAULT_AUTHORITY_FOR_MANAGED_IDENTITY = `https://login.microsoftonline.com/${MANAGED_IDENTITY_DEFAULT_TENANT}/`;
var ManagedIdentityEnvironmentVariableNames = {
  AZURE_POD_IDENTITY_AUTHORITY_HOST: "AZURE_POD_IDENTITY_AUTHORITY_HOST",
  IDENTITY_ENDPOINT: "IDENTITY_ENDPOINT",
  IDENTITY_HEADER: "IDENTITY_HEADER",
  IDENTITY_SERVER_THUMBPRINT: "IDENTITY_SERVER_THUMBPRINT",
  IMDS_ENDPOINT: "IMDS_ENDPOINT",
  MSI_ENDPOINT: "MSI_ENDPOINT",
  MSI_SECRET: "MSI_SECRET"
};
var ManagedIdentityIdType = {
  SYSTEM_ASSIGNED: "system-assigned",
  USER_ASSIGNED_CLIENT_ID: "user-assigned-client-id",
  USER_ASSIGNED_RESOURCE_ID: "user-assigned-resource-id",
  USER_ASSIGNED_OBJECT_ID: "user-assigned-object-id"
};
var HttpMethod = {
  GET: "get",
  POST: "post"
};
var ProxyStatus = {
  SUCCESS: HttpStatus.SUCCESS,
  SUCCESS_RANGE_START: HttpStatus.SUCCESS_RANGE_START,
  SUCCESS_RANGE_END: HttpStatus.SUCCESS_RANGE_END,
  SERVER_ERROR: HttpStatus.SERVER_ERROR
};
var REGION_ENVIRONMENT_VARIABLE = "REGION_NAME";
var MSAL_FORCE_REGION = "MSAL_FORCE_REGION";
var RANDOM_OCTET_SIZE = 32;
var Hash = {
  SHA256: "sha256"
};
var CharSet = {
  CV_CHARSET: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~"
};
var Constants2 = {
  MSAL_SKU: "msal.js.node",
  JWT_BEARER_ASSERTION_TYPE: "urn:ietf:params:oauth:client-assertion-type:jwt-bearer",
  AUTHORIZATION_PENDING: "authorization_pending",
  HTTP_PROTOCOL: "http://",
  LOCALHOST: "localhost"
};
var ApiId = {
  acquireTokenSilent: 62,
  acquireTokenByUsernamePassword: 371,
  acquireTokenByDeviceCode: 671,
  acquireTokenByClientCredential: 771,
  acquireTokenByCode: 871,
  acquireTokenByRefreshToken: 872
};
var JwtConstants = {
  ALGORITHM: "alg",
  RSA_256: "RS256",
  PSS_256: "PS256",
  X5T_256: "x5t#S256",
  X5T: "x5t",
  X5C: "x5c",
  AUDIENCE: "aud",
  EXPIRATION_TIME: "exp",
  ISSUER: "iss",
  SUBJECT: "sub",
  NOT_BEFORE: "nbf",
  JWT_ID: "jti"
};
var MANAGED_IDENTITY_HTTP_STATUS_CODES_TO_RETRY_ON = [
  HttpStatus.NOT_FOUND,
  HttpStatus.REQUEST_TIMEOUT,
  HttpStatus.TOO_MANY_REQUESTS,
  HttpStatus.SERVER_ERROR,
  HttpStatus.SERVICE_UNAVAILABLE,
  HttpStatus.GATEWAY_TIMEOUT
];

// node_modules/@azure/msal-node/dist/utils/NetworkUtils.mjs
var NetworkUtils = class {
  static getNetworkResponse(headers, body, statusCode) {
    return {
      headers,
      body,
      status: statusCode
    };
  }
  /*
   * Utility function that converts a URL object into an ordinary options object as expected by the
   * http.request and https.request APIs.
   * https://github.com/nodejs/node/blob/main/lib/internal/url.js#L1090
   */
  static urlToHttpOptions(url) {
    const options = {
      protocol: url.protocol,
      hostname: url.hostname && url.hostname.startsWith("[") ? url.hostname.slice(1, -1) : url.hostname,
      hash: url.hash,
      search: url.search,
      pathname: url.pathname,
      path: `${url.pathname || ""}${url.search || ""}`,
      href: url.href
    };
    if (url.port !== "") {
      options.port = Number(url.port);
    }
    if (url.username || url.password) {
      options.auth = `${decodeURIComponent(url.username)}:${decodeURIComponent(url.password)}`;
    }
    return options;
  }
};

// node_modules/@azure/msal-node/dist/network/HttpClient.mjs
var import_http = __toESM(require("http"), 1);
var import_https = __toESM(require("https"), 1);
var HttpClient = class {
  constructor(proxyUrl, customAgentOptions) {
    this.proxyUrl = proxyUrl || "";
    this.customAgentOptions = customAgentOptions || {};
  }
  /**
   * Http Get request
   * @param url
   * @param options
   */
  async sendGetRequestAsync(url, options, timeout) {
    if (this.proxyUrl) {
      return networkRequestViaProxy(url, this.proxyUrl, HttpMethod.GET, options, this.customAgentOptions, timeout);
    } else {
      return networkRequestViaHttps(url, HttpMethod.GET, options, this.customAgentOptions, timeout);
    }
  }
  /**
   * Http Post request
   * @param url
   * @param options
   */
  async sendPostRequestAsync(url, options) {
    if (this.proxyUrl) {
      return networkRequestViaProxy(url, this.proxyUrl, HttpMethod.POST, options, this.customAgentOptions);
    } else {
      return networkRequestViaHttps(url, HttpMethod.POST, options, this.customAgentOptions);
    }
  }
};
var networkRequestViaProxy = (destinationUrlString, proxyUrlString, httpMethod, options, agentOptions, timeout) => {
  const destinationUrl = new URL(destinationUrlString);
  const proxyUrl = new URL(proxyUrlString);
  const headers = (options == null ? void 0 : options.headers) || {};
  const tunnelRequestOptions = {
    host: proxyUrl.hostname,
    port: proxyUrl.port,
    method: "CONNECT",
    path: destinationUrl.hostname,
    headers
  };
  if (agentOptions && Object.keys(agentOptions).length) {
    tunnelRequestOptions.agent = new import_http.default.Agent(agentOptions);
  }
  let postRequestStringContent = "";
  if (httpMethod === HttpMethod.POST) {
    const body = (options == null ? void 0 : options.body) || "";
    postRequestStringContent = `Content-Type: application/x-www-form-urlencoded\r
Content-Length: ${body.length}\r
\r
${body}`;
  } else {
    if (timeout) {
      tunnelRequestOptions.timeout = timeout;
    }
  }
  const outgoingRequestString = `${httpMethod.toUpperCase()} ${destinationUrl.href} HTTP/1.1\r
Host: ${destinationUrl.host}\r
Connection: close\r
` + postRequestStringContent + "\r\n";
  return new Promise((resolve, reject) => {
    const request = import_http.default.request(tunnelRequestOptions);
    if (timeout) {
      request.on("timeout", () => {
        request.destroy();
        reject(new Error("Request time out"));
      });
    }
    request.end();
    request.on("connect", (response, socket) => {
      const proxyStatusCode = (response == null ? void 0 : response.statusCode) || ProxyStatus.SERVER_ERROR;
      if (proxyStatusCode < ProxyStatus.SUCCESS_RANGE_START || proxyStatusCode > ProxyStatus.SUCCESS_RANGE_END) {
        request.destroy();
        socket.destroy();
        reject(new Error(`Error connecting to proxy. Http status code: ${response.statusCode}. Http status message: ${(response == null ? void 0 : response.statusMessage) || "Unknown"}`));
      }
      socket.write(outgoingRequestString);
      const data = [];
      socket.on("data", (chunk) => {
        data.push(chunk);
      });
      socket.on("end", () => {
        const dataString = Buffer.concat([...data]).toString();
        const dataStringArray = dataString.split("\r\n");
        const httpStatusCode = parseInt(dataStringArray[0].split(" ")[1]);
        const statusMessage = dataStringArray[0].split(" ").slice(2).join(" ");
        const body = dataStringArray[dataStringArray.length - 1];
        const headersArray = dataStringArray.slice(1, dataStringArray.length - 2);
        const entries = /* @__PURE__ */ new Map();
        headersArray.forEach((header) => {
          const headerKeyValue = header.split(new RegExp(/:\s(.*)/s));
          const headerKey = headerKeyValue[0];
          let headerValue = headerKeyValue[1];
          try {
            const object = JSON.parse(headerValue);
            if (object && typeof object === "object") {
              headerValue = object;
            }
          } catch (e) {
          }
          entries.set(headerKey, headerValue);
        });
        const headers2 = Object.fromEntries(entries);
        const parsedHeaders = headers2;
        const networkResponse = NetworkUtils.getNetworkResponse(parsedHeaders, parseBody(httpStatusCode, statusMessage, parsedHeaders, body), httpStatusCode);
        if ((httpStatusCode < HttpStatus.SUCCESS_RANGE_START || httpStatusCode > HttpStatus.SUCCESS_RANGE_END) && // do not destroy the request for the device code flow
        networkResponse.body["error"] !== Constants2.AUTHORIZATION_PENDING) {
          request.destroy();
        }
        resolve(networkResponse);
      });
      socket.on("error", (chunk) => {
        request.destroy();
        socket.destroy();
        reject(new Error(chunk.toString()));
      });
    });
    request.on("error", (chunk) => {
      request.destroy();
      reject(new Error(chunk.toString()));
    });
  });
};
var networkRequestViaHttps = (urlString, httpMethod, options, agentOptions, timeout) => {
  const isPostRequest = httpMethod === HttpMethod.POST;
  const body = (options == null ? void 0 : options.body) || "";
  const url = new URL(urlString);
  const headers = (options == null ? void 0 : options.headers) || {};
  const customOptions = {
    method: httpMethod,
    headers,
    ...NetworkUtils.urlToHttpOptions(url)
  };
  if (agentOptions && Object.keys(agentOptions).length) {
    customOptions.agent = new import_https.default.Agent(agentOptions);
  }
  if (isPostRequest) {
    customOptions.headers = {
      ...customOptions.headers,
      "Content-Length": body.length
    };
  } else {
    if (timeout) {
      customOptions.timeout = timeout;
    }
  }
  return new Promise((resolve, reject) => {
    let request;
    if (customOptions.protocol === "http:") {
      request = import_http.default.request(customOptions);
    } else {
      request = import_https.default.request(customOptions);
    }
    if (isPostRequest) {
      request.write(body);
    }
    if (timeout) {
      request.on("timeout", () => {
        request.destroy();
        reject(new Error("Request time out"));
      });
    }
    request.end();
    request.on("response", (response) => {
      const headers2 = response.headers;
      const statusCode = response.statusCode;
      const statusMessage = response.statusMessage;
      const data = [];
      response.on("data", (chunk) => {
        data.push(chunk);
      });
      response.on("end", () => {
        const body2 = Buffer.concat([...data]).toString();
        const parsedHeaders = headers2;
        const networkResponse = NetworkUtils.getNetworkResponse(parsedHeaders, parseBody(statusCode, statusMessage, parsedHeaders, body2), statusCode);
        if ((statusCode < HttpStatus.SUCCESS_RANGE_START || statusCode > HttpStatus.SUCCESS_RANGE_END) && // do not destroy the request for the device code flow
        networkResponse.body["error"] !== Constants2.AUTHORIZATION_PENDING) {
          request.destroy();
        }
        resolve(networkResponse);
      });
    });
    request.on("error", (chunk) => {
      request.destroy();
      reject(new Error(chunk.toString()));
    });
  });
};
var parseBody = (statusCode, statusMessage, headers, body) => {
  let parsedBody;
  try {
    parsedBody = JSON.parse(body);
  } catch (error) {
    let errorType;
    let errorDescriptionHelper;
    if (statusCode >= HttpStatus.CLIENT_ERROR_RANGE_START && statusCode <= HttpStatus.CLIENT_ERROR_RANGE_END) {
      errorType = "client_error";
      errorDescriptionHelper = "A client";
    } else if (statusCode >= HttpStatus.SERVER_ERROR_RANGE_START && statusCode <= HttpStatus.SERVER_ERROR_RANGE_END) {
      errorType = "server_error";
      errorDescriptionHelper = "A server";
    } else {
      errorType = "unknown_error";
      errorDescriptionHelper = "An unknown";
    }
    parsedBody = {
      error: errorType,
      error_description: `${errorDescriptionHelper} error occured.
Http status code: ${statusCode}
Http status message: ${statusMessage || "Unknown"}
Headers: ${JSON.stringify(headers)}`
    };
  }
  return parsedBody;
};

// node_modules/@azure/msal-node/dist/error/ManagedIdentityErrorCodes.mjs
var invalidFileExtension = "invalid_file_extension";
var invalidFilePath = "invalid_file_path";
var invalidManagedIdentityIdType = "invalid_managed_identity_id_type";
var invalidSecret = "invalid_secret";
var missingId = "missing_client_id";
var networkUnavailable = "network_unavailable";
var platformNotSupported = "platform_not_supported";
var unableToCreateAzureArc = "unable_to_create_azure_arc";
var unableToCreateCloudShell = "unable_to_create_cloud_shell";
var unableToCreateSource = "unable_to_create_source";
var unableToReadSecretFile = "unable_to_read_secret_file";
var userAssignedNotAvailableAtRuntime = "user_assigned_not_available_at_runtime";
var wwwAuthenticateHeaderMissing = "www_authenticate_header_missing";
var wwwAuthenticateHeaderUnsupportedFormat = "www_authenticate_header_unsupported_format";
var MsiEnvironmentVariableUrlMalformedErrorCodes = {
  [ManagedIdentityEnvironmentVariableNames.AZURE_POD_IDENTITY_AUTHORITY_HOST]: "azure_pod_identity_authority_host_url_malformed",
  [ManagedIdentityEnvironmentVariableNames.IDENTITY_ENDPOINT]: "identity_endpoint_url_malformed",
  [ManagedIdentityEnvironmentVariableNames.IMDS_ENDPOINT]: "imds_endpoint_url_malformed",
  [ManagedIdentityEnvironmentVariableNames.MSI_ENDPOINT]: "msi_endpoint_url_malformed"
};

// node_modules/@azure/msal-node/dist/error/ManagedIdentityError.mjs
var ManagedIdentityErrorMessages = {
  [invalidFileExtension]: "The file path in the WWW-Authenticate header does not contain a .key file.",
  [invalidFilePath]: "The file path in the WWW-Authenticate header is not in a valid Windows or Linux Format.",
  [invalidManagedIdentityIdType]: "More than one ManagedIdentityIdType was provided.",
  [invalidSecret]: "The secret in the file on the file path in the WWW-Authenticate header is greater than 4096 bytes.",
  [platformNotSupported]: "The platform is not supported by Azure Arc. Azure Arc only supports Windows and Linux.",
  [missingId]: "A ManagedIdentityId id was not provided.",
  [MsiEnvironmentVariableUrlMalformedErrorCodes.AZURE_POD_IDENTITY_AUTHORITY_HOST]: `The Managed Identity's '${ManagedIdentityEnvironmentVariableNames.AZURE_POD_IDENTITY_AUTHORITY_HOST}' environment variable is malformed.`,
  [MsiEnvironmentVariableUrlMalformedErrorCodes.IDENTITY_ENDPOINT]: `The Managed Identity's '${ManagedIdentityEnvironmentVariableNames.IDENTITY_ENDPOINT}' environment variable is malformed.`,
  [MsiEnvironmentVariableUrlMalformedErrorCodes.IMDS_ENDPOINT]: `The Managed Identity's '${ManagedIdentityEnvironmentVariableNames.IMDS_ENDPOINT}' environment variable is malformed.`,
  [MsiEnvironmentVariableUrlMalformedErrorCodes.MSI_ENDPOINT]: `The Managed Identity's '${ManagedIdentityEnvironmentVariableNames.MSI_ENDPOINT}' environment variable is malformed.`,
  [networkUnavailable]: "Authentication unavailable. The request to the managed identity endpoint timed out.",
  [unableToCreateAzureArc]: "Azure Arc Managed Identities can only be system assigned.",
  [unableToCreateCloudShell]: "Cloud Shell Managed Identities can only be system assigned.",
  [unableToCreateSource]: "Unable to create a Managed Identity source based on environment variables.",
  [unableToReadSecretFile]: "Unable to read the secret file.",
  [userAssignedNotAvailableAtRuntime]: "Service Fabric user assigned managed identity ClientId or ResourceId is not configurable at runtime.",
  [wwwAuthenticateHeaderMissing]: "A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is missing.",
  [wwwAuthenticateHeaderUnsupportedFormat]: "A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is in an unsupported format."
};
var ManagedIdentityError = class _ManagedIdentityError extends AuthError {
  constructor(errorCode) {
    super(errorCode, ManagedIdentityErrorMessages[errorCode]);
    this.name = "ManagedIdentityError";
    Object.setPrototypeOf(this, _ManagedIdentityError.prototype);
  }
};
function createManagedIdentityError(errorCode) {
  return new ManagedIdentityError(errorCode);
}

// node_modules/@azure/msal-node/dist/error/NodeAuthError.mjs
var NodeAuthErrorMessage = {
  invalidLoopbackAddressType: {
    code: "invalid_loopback_server_address_type",
    desc: "Loopback server address is not type string. This is unexpected."
  },
  unableToLoadRedirectUri: {
    code: "unable_to_load_redirectUrl",
    desc: "Loopback server callback was invoked without a url. This is unexpected."
  },
  noAuthCodeInResponse: {
    code: "no_auth_code_in_response",
    desc: "No auth code found in the server response. Please check your network trace to determine what happened."
  },
  noLoopbackServerExists: {
    code: "no_loopback_server_exists",
    desc: "No loopback server exists yet."
  },
  loopbackServerAlreadyExists: {
    code: "loopback_server_already_exists",
    desc: "Loopback server already exists. Cannot create another."
  },
  loopbackServerTimeout: {
    code: "loopback_server_timeout",
    desc: "Timed out waiting for auth code listener to be registered."
  },
  stateNotFoundError: {
    code: "state_not_found",
    desc: "State not found. Please verify that the request originated from msal."
  },
  thumbprintMissing: {
    code: "thumbprint_missing_from_client_certificate",
    desc: "Client certificate does not contain a SHA-1 or SHA-256 thumbprint."
  }
};
var NodeAuthError = class _NodeAuthError extends AuthError {
  constructor(errorCode, errorMessage) {
    super(errorCode, errorMessage);
    this.name = "NodeAuthError";
  }
  /**
   * Creates an error thrown if loopback server address is of type string.
   */
  static createInvalidLoopbackAddressTypeError() {
    return new _NodeAuthError(NodeAuthErrorMessage.invalidLoopbackAddressType.code, `${NodeAuthErrorMessage.invalidLoopbackAddressType.desc}`);
  }
  /**
   * Creates an error thrown if the loopback server is unable to get a url.
   */
  static createUnableToLoadRedirectUrlError() {
    return new _NodeAuthError(NodeAuthErrorMessage.unableToLoadRedirectUri.code, `${NodeAuthErrorMessage.unableToLoadRedirectUri.desc}`);
  }
  /**
   * Creates an error thrown if the server response does not contain an auth code.
   */
  static createNoAuthCodeInResponseError() {
    return new _NodeAuthError(NodeAuthErrorMessage.noAuthCodeInResponse.code, `${NodeAuthErrorMessage.noAuthCodeInResponse.desc}`);
  }
  /**
   * Creates an error thrown if the loopback server has not been spun up yet.
   */
  static createNoLoopbackServerExistsError() {
    return new _NodeAuthError(NodeAuthErrorMessage.noLoopbackServerExists.code, `${NodeAuthErrorMessage.noLoopbackServerExists.desc}`);
  }
  /**
   * Creates an error thrown if a loopback server already exists when attempting to create another one.
   */
  static createLoopbackServerAlreadyExistsError() {
    return new _NodeAuthError(NodeAuthErrorMessage.loopbackServerAlreadyExists.code, `${NodeAuthErrorMessage.loopbackServerAlreadyExists.desc}`);
  }
  /**
   * Creates an error thrown if the loopback server times out registering the auth code listener.
   */
  static createLoopbackServerTimeoutError() {
    return new _NodeAuthError(NodeAuthErrorMessage.loopbackServerTimeout.code, `${NodeAuthErrorMessage.loopbackServerTimeout.desc}`);
  }
  /**
   * Creates an error thrown when the state is not present.
   */
  static createStateNotFoundError() {
    return new _NodeAuthError(NodeAuthErrorMessage.stateNotFoundError.code, NodeAuthErrorMessage.stateNotFoundError.desc);
  }
  /**
   * Creates an error thrown when client certificate was provided, but neither the SHA-1 or SHA-256 thumbprints were provided
   */
  static createThumbprintMissingError() {
    return new _NodeAuthError(NodeAuthErrorMessage.thumbprintMissing.code, NodeAuthErrorMessage.thumbprintMissing.desc);
  }
};

// node_modules/@azure/msal-node/dist/config/Configuration.mjs
var DEFAULT_AUTH_OPTIONS = {
  clientId: Constants.EMPTY_STRING,
  authority: Constants.DEFAULT_AUTHORITY,
  clientSecret: Constants.EMPTY_STRING,
  clientAssertion: Constants.EMPTY_STRING,
  clientCertificate: {
    thumbprint: Constants.EMPTY_STRING,
    thumbprintSha256: Constants.EMPTY_STRING,
    privateKey: Constants.EMPTY_STRING,
    x5c: Constants.EMPTY_STRING
  },
  knownAuthorities: [],
  cloudDiscoveryMetadata: Constants.EMPTY_STRING,
  authorityMetadata: Constants.EMPTY_STRING,
  clientCapabilities: [],
  protocolMode: ProtocolMode.AAD,
  azureCloudOptions: {
    azureCloudInstance: AzureCloudInstance.None,
    tenant: Constants.EMPTY_STRING
  },
  skipAuthorityMetadataCache: false
};
var DEFAULT_CACHE_OPTIONS2 = {
  claimsBasedCachingEnabled: false
};
var DEFAULT_LOGGER_OPTIONS = {
  loggerCallback: () => {
  },
  piiLoggingEnabled: false,
  logLevel: LogLevel.Info
};
var DEFAULT_SYSTEM_OPTIONS2 = {
  loggerOptions: DEFAULT_LOGGER_OPTIONS,
  networkClient: new HttpClient(),
  proxyUrl: Constants.EMPTY_STRING,
  customAgentOptions: {},
  disableInternalRetries: false
};
var DEFAULT_TELEMETRY_OPTIONS2 = {
  application: {
    appName: Constants.EMPTY_STRING,
    appVersion: Constants.EMPTY_STRING
  }
};
function buildAppConfiguration({ auth, broker, cache, system, telemetry }) {
  const systemOptions = {
    ...DEFAULT_SYSTEM_OPTIONS2,
    networkClient: new HttpClient(system == null ? void 0 : system.proxyUrl, system == null ? void 0 : system.customAgentOptions),
    loggerOptions: (system == null ? void 0 : system.loggerOptions) || DEFAULT_LOGGER_OPTIONS,
    disableInternalRetries: (system == null ? void 0 : system.disableInternalRetries) || false
  };
  if (!!auth.clientCertificate && !!!auth.clientCertificate.thumbprint && !!!auth.clientCertificate.thumbprintSha256) {
    throw NodeAuthError.createStateNotFoundError();
  }
  return {
    auth: { ...DEFAULT_AUTH_OPTIONS, ...auth },
    broker: { ...broker },
    cache: { ...DEFAULT_CACHE_OPTIONS2, ...cache },
    system: { ...systemOptions, ...system },
    telemetry: { ...DEFAULT_TELEMETRY_OPTIONS2, ...telemetry }
  };
}

// node_modules/uuid/dist/esm-browser/rng.js
var getRandomValues;
var rnds8 = new Uint8Array(16);
function rng() {
  if (!getRandomValues) {
    getRandomValues = typeof crypto !== "undefined" && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== "undefined" && typeof msCrypto.getRandomValues === "function" && msCrypto.getRandomValues.bind(msCrypto);
    if (!getRandomValues) {
      throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");
    }
  }
  return getRandomValues(rnds8);
}

// node_modules/uuid/dist/esm-browser/regex.js
var regex_default = /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;

// node_modules/uuid/dist/esm-browser/validate.js
function validate(uuid) {
  return typeof uuid === "string" && regex_default.test(uuid);
}
var validate_default = validate;

// node_modules/uuid/dist/esm-browser/stringify.js
var byteToHex = [];
for (i = 0; i < 256; ++i) {
  byteToHex.push((i + 256).toString(16).substr(1));
}
var i;
function stringify(arr) {
  var offset = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + "-" + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + "-" + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + "-" + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + "-" + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();
  if (!validate_default(uuid)) {
    throw TypeError("Stringified UUID is invalid");
  }
  return uuid;
}
var stringify_default = stringify;

// node_modules/uuid/dist/esm-browser/v4.js
function v4(options, buf, offset) {
  options = options || {};
  var rnds = options.random || (options.rng || rng)();
  rnds[6] = rnds[6] & 15 | 64;
  rnds[8] = rnds[8] & 63 | 128;
  if (buf) {
    offset = offset || 0;
    for (var i = 0; i < 16; ++i) {
      buf[offset + i] = rnds[i];
    }
    return buf;
  }
  return stringify_default(rnds);
}
var v4_default = v4;

// node_modules/@azure/msal-node/dist/crypto/GuidGenerator.mjs
var GuidGenerator = class {
  /**
   *
   * RFC4122: The version 4 UUID is meant for generating UUIDs from truly-random or pseudo-random numbers.
   * uuidv4 generates guids from cryprtographically-string random
   */
  generateGuid() {
    return v4_default();
  }
  /**
   * verifies if a string is  GUID
   * @param guid
   */
  isGuid(guid) {
    const regexGuid = /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;
    return regexGuid.test(guid);
  }
};

// node_modules/@azure/msal-node/dist/utils/EncodingUtils.mjs
var EncodingUtils = class _EncodingUtils {
  /**
   * 'utf8': Multibyte encoded Unicode characters. Many web pages and other document formats use UTF-8.
   * 'base64': Base64 encoding.
   *
   * @param str text
   */
  static base64Encode(str, encoding) {
    return Buffer.from(str, encoding).toString("base64");
  }
  /**
   * encode a URL
   * @param str
   */
  static base64EncodeUrl(str, encoding) {
    return _EncodingUtils.base64Encode(str, encoding).replace(/=/g, Constants.EMPTY_STRING).replace(/\+/g, "-").replace(/\//g, "_");
  }
  /**
   * 'utf8': Multibyte encoded Unicode characters. Many web pages and other document formats use UTF-8.
   * 'base64': Base64 encoding.
   *
   * @param base64Str Base64 encoded text
   */
  static base64Decode(base64Str) {
    return Buffer.from(base64Str, "base64").toString("utf8");
  }
  /**
   * @param base64Str Base64 encoded Url
   */
  static base64DecodeUrl(base64Str) {
    let str = base64Str.replace(/-/g, "+").replace(/_/g, "/");
    while (str.length % 4) {
      str += "=";
    }
    return _EncodingUtils.base64Decode(str);
  }
};

// node_modules/@azure/msal-node/dist/crypto/HashUtils.mjs
var import_crypto = __toESM(require("crypto"), 1);
var HashUtils = class {
  /**
   * generate 'SHA256' hash
   * @param buffer
   */
  sha256(buffer) {
    return import_crypto.default.createHash(Hash.SHA256).update(buffer).digest();
  }
};

// node_modules/@azure/msal-node/dist/crypto/PkceGenerator.mjs
var import_crypto2 = __toESM(require("crypto"), 1);
var PkceGenerator = class {
  constructor() {
    this.hashUtils = new HashUtils();
  }
  /**
   * generates the codeVerfier and the challenge from the codeVerfier
   * reference: https://tools.ietf.org/html/rfc7636#section-4.1 and https://tools.ietf.org/html/rfc7636#section-4.2
   */
  async generatePkceCodes() {
    const verifier = this.generateCodeVerifier();
    const challenge = this.generateCodeChallengeFromVerifier(verifier);
    return { verifier, challenge };
  }
  /**
   * generates the codeVerfier; reference: https://tools.ietf.org/html/rfc7636#section-4.1
   */
  generateCodeVerifier() {
    const charArr = [];
    const maxNumber = 256 - 256 % CharSet.CV_CHARSET.length;
    while (charArr.length <= RANDOM_OCTET_SIZE) {
      const byte = import_crypto2.default.randomBytes(1)[0];
      if (byte >= maxNumber) {
        continue;
      }
      const index = byte % CharSet.CV_CHARSET.length;
      charArr.push(CharSet.CV_CHARSET[index]);
    }
    const verifier = charArr.join(Constants.EMPTY_STRING);
    return EncodingUtils.base64EncodeUrl(verifier);
  }
  /**
   * generate the challenge from the codeVerfier; reference: https://tools.ietf.org/html/rfc7636#section-4.2
   * @param codeVerifier
   */
  generateCodeChallengeFromVerifier(codeVerifier) {
    return EncodingUtils.base64EncodeUrl(this.hashUtils.sha256(codeVerifier).toString("base64"), "base64");
  }
};

// node_modules/@azure/msal-node/dist/crypto/CryptoProvider.mjs
var CryptoProvider = class {
  constructor() {
    this.pkceGenerator = new PkceGenerator();
    this.guidGenerator = new GuidGenerator();
    this.hashUtils = new HashUtils();
  }
  /**
   * base64 URL safe encoded string
   */
  base64UrlEncode() {
    throw new Error("Method not implemented.");
  }
  /**
   * Stringifies and base64Url encodes input public key
   * @param inputKid - public key id
   * @returns Base64Url encoded public key
   */
  encodeKid() {
    throw new Error("Method not implemented.");
  }
  /**
   * Creates a new random GUID - used to populate state and nonce.
   * @returns string (GUID)
   */
  createNewGuid() {
    return this.guidGenerator.generateGuid();
  }
  /**
   * Encodes input string to base64.
   * @param input - string to be encoded
   */
  base64Encode(input) {
    return EncodingUtils.base64Encode(input);
  }
  /**
   * Decodes input string from base64.
   * @param input - string to be decoded
   */
  base64Decode(input) {
    return EncodingUtils.base64Decode(input);
  }
  /**
   * Generates PKCE codes used in Authorization Code Flow.
   */
  generatePkceCodes() {
    return this.pkceGenerator.generatePkceCodes();
  }
  /**
   * Generates a keypair, stores it and returns a thumbprint - not yet implemented for node
   */
  getPublicKeyThumbprint() {
    throw new Error("Method not implemented.");
  }
  /**
   * Removes cryptographic keypair from key store matching the keyId passed in
   * @param kid - public key id
   */
  removeTokenBindingKey() {
    throw new Error("Method not implemented.");
  }
  /**
   * Removes all cryptographic keys from Keystore
   */
  clearKeystore() {
    throw new Error("Method not implemented.");
  }
  /**
   * Signs the given object as a jwt payload with private key retrieved by given kid - currently not implemented for node
   */
  signJwt() {
    throw new Error("Method not implemented.");
  }
  /**
   * Returns the SHA-256 hash of an input string
   */
  async hashString(plainText) {
    return EncodingUtils.base64EncodeUrl(this.hashUtils.sha256(plainText).toString("base64"), "base64");
  }
};

// node_modules/@azure/msal-node/dist/cache/NodeStorage.mjs
var NodeStorage = class extends CacheManager {
  constructor(logger, clientId, cryptoImpl, staticAuthorityOptions) {
    super(clientId, cryptoImpl, logger, staticAuthorityOptions);
    this.cache = {};
    this.changeEmitters = [];
    this.logger = logger;
  }
  /**
   * Queue up callbacks
   * @param func - a callback function for cache change indication
   */
  registerChangeEmitter(func) {
    this.changeEmitters.push(func);
  }
  /**
   * Invoke the callback when cache changes
   */
  emitChange() {
    this.changeEmitters.forEach((func) => func.call(null));
  }
  /**
   * Converts cacheKVStore to InMemoryCache
   * @param cache - key value store
   */
  cacheToInMemoryCache(cache) {
    const inMemoryCache = {
      accounts: {},
      idTokens: {},
      accessTokens: {},
      refreshTokens: {},
      appMetadata: {}
    };
    for (const key in cache) {
      const value = cache[key];
      if (typeof value !== "object") {
        continue;
      }
      if (value instanceof AccountEntity) {
        inMemoryCache.accounts[key] = value;
      } else if (CacheHelpers_exports.isIdTokenEntity(value)) {
        inMemoryCache.idTokens[key] = value;
      } else if (CacheHelpers_exports.isAccessTokenEntity(value)) {
        inMemoryCache.accessTokens[key] = value;
      } else if (CacheHelpers_exports.isRefreshTokenEntity(value)) {
        inMemoryCache.refreshTokens[key] = value;
      } else if (CacheHelpers_exports.isAppMetadataEntity(key, value)) {
        inMemoryCache.appMetadata[key] = value;
      } else {
        continue;
      }
    }
    return inMemoryCache;
  }
  /**
   * converts inMemoryCache to CacheKVStore
   * @param inMemoryCache - kvstore map for inmemory
   */
  inMemoryCacheToCache(inMemoryCache) {
    let cache = this.getCache();
    cache = {
      ...cache,
      ...inMemoryCache.accounts,
      ...inMemoryCache.idTokens,
      ...inMemoryCache.accessTokens,
      ...inMemoryCache.refreshTokens,
      ...inMemoryCache.appMetadata
    };
    return cache;
  }
  /**
   * gets the current in memory cache for the client
   */
  getInMemoryCache() {
    this.logger.trace("Getting in-memory cache");
    const inMemoryCache = this.cacheToInMemoryCache(this.getCache());
    return inMemoryCache;
  }
  /**
   * sets the current in memory cache for the client
   * @param inMemoryCache - key value map in memory
   */
  setInMemoryCache(inMemoryCache) {
    this.logger.trace("Setting in-memory cache");
    const cache = this.inMemoryCacheToCache(inMemoryCache);
    this.setCache(cache);
    this.emitChange();
  }
  /**
   * get the current cache key-value store
   */
  getCache() {
    this.logger.trace("Getting cache key-value store");
    return this.cache;
  }
  /**
   * sets the current cache (key value store)
   * @param cacheMap - key value map
   */
  setCache(cache) {
    this.logger.trace("Setting cache key value store");
    this.cache = cache;
    this.emitChange();
  }
  /**
   * Gets cache item with given key.
   * @param key - lookup key for the cache entry
   */
  getItem(key) {
    this.logger.tracePii(`Item key: ${key}`);
    const cache = this.getCache();
    return cache[key];
  }
  /**
   * Gets cache item with given key-value
   * @param key - lookup key for the cache entry
   * @param value - value of the cache entry
   */
  setItem(key, value) {
    this.logger.tracePii(`Item key: ${key}`);
    const cache = this.getCache();
    cache[key] = value;
    this.setCache(cache);
  }
  getAccountKeys() {
    const inMemoryCache = this.getInMemoryCache();
    const accountKeys = Object.keys(inMemoryCache.accounts);
    return accountKeys;
  }
  getTokenKeys() {
    const inMemoryCache = this.getInMemoryCache();
    const tokenKeys = {
      idToken: Object.keys(inMemoryCache.idTokens),
      accessToken: Object.keys(inMemoryCache.accessTokens),
      refreshToken: Object.keys(inMemoryCache.refreshTokens)
    };
    return tokenKeys;
  }
  /**
   * Reads account from cache, builds it into an account entity and returns it.
   * @param accountKey - lookup key to fetch cache type AccountEntity
   * @returns
   */
  getAccount(accountKey) {
    const cachedAccount = this.getItem(accountKey);
    return cachedAccount ? Object.assign(new AccountEntity(), this.getItem(accountKey)) : null;
  }
  /**
   * set account entity
   * @param account - cache value to be set of type AccountEntity
   */
  async setAccount(account) {
    const accountKey = account.generateAccountKey();
    this.setItem(accountKey, account);
  }
  /**
   * fetch the idToken credential
   * @param idTokenKey - lookup key to fetch cache type IdTokenEntity
   */
  getIdTokenCredential(idTokenKey) {
    const idToken = this.getItem(idTokenKey);
    if (CacheHelpers_exports.isIdTokenEntity(idToken)) {
      return idToken;
    }
    return null;
  }
  /**
   * set idToken credential
   * @param idToken - cache value to be set of type IdTokenEntity
   */
  async setIdTokenCredential(idToken) {
    const idTokenKey = CacheHelpers_exports.generateCredentialKey(idToken);
    this.setItem(idTokenKey, idToken);
  }
  /**
   * fetch the accessToken credential
   * @param accessTokenKey - lookup key to fetch cache type AccessTokenEntity
   */
  getAccessTokenCredential(accessTokenKey) {
    const accessToken = this.getItem(accessTokenKey);
    if (CacheHelpers_exports.isAccessTokenEntity(accessToken)) {
      return accessToken;
    }
    return null;
  }
  /**
   * set accessToken credential
   * @param accessToken -  cache value to be set of type AccessTokenEntity
   */
  async setAccessTokenCredential(accessToken) {
    const accessTokenKey = CacheHelpers_exports.generateCredentialKey(accessToken);
    this.setItem(accessTokenKey, accessToken);
  }
  /**
   * fetch the refreshToken credential
   * @param refreshTokenKey - lookup key to fetch cache type RefreshTokenEntity
   */
  getRefreshTokenCredential(refreshTokenKey) {
    const refreshToken = this.getItem(refreshTokenKey);
    if (CacheHelpers_exports.isRefreshTokenEntity(refreshToken)) {
      return refreshToken;
    }
    return null;
  }
  /**
   * set refreshToken credential
   * @param refreshToken - cache value to be set of type RefreshTokenEntity
   */
  async setRefreshTokenCredential(refreshToken) {
    const refreshTokenKey = CacheHelpers_exports.generateCredentialKey(refreshToken);
    this.setItem(refreshTokenKey, refreshToken);
  }
  /**
   * fetch appMetadata entity from the platform cache
   * @param appMetadataKey - lookup key to fetch cache type AppMetadataEntity
   */
  getAppMetadata(appMetadataKey) {
    const appMetadata = this.getItem(appMetadataKey);
    if (CacheHelpers_exports.isAppMetadataEntity(appMetadataKey, appMetadata)) {
      return appMetadata;
    }
    return null;
  }
  /**
   * set appMetadata entity to the platform cache
   * @param appMetadata - cache value to be set of type AppMetadataEntity
   */
  setAppMetadata(appMetadata) {
    const appMetadataKey = CacheHelpers_exports.generateAppMetadataKey(appMetadata);
    this.setItem(appMetadataKey, appMetadata);
  }
  /**
   * fetch server telemetry entity from the platform cache
   * @param serverTelemetrykey - lookup key to fetch cache type ServerTelemetryEntity
   */
  getServerTelemetry(serverTelemetrykey) {
    const serverTelemetryEntity = this.getItem(serverTelemetrykey);
    if (serverTelemetryEntity && CacheHelpers_exports.isServerTelemetryEntity(serverTelemetrykey, serverTelemetryEntity)) {
      return serverTelemetryEntity;
    }
    return null;
  }
  /**
   * set server telemetry entity to the platform cache
   * @param serverTelemetryKey - lookup key to fetch cache type ServerTelemetryEntity
   * @param serverTelemetry - cache value to be set of type ServerTelemetryEntity
   */
  setServerTelemetry(serverTelemetryKey, serverTelemetry) {
    this.setItem(serverTelemetryKey, serverTelemetry);
  }
  /**
   * fetch authority metadata entity from the platform cache
   * @param key - lookup key to fetch cache type AuthorityMetadataEntity
   */
  getAuthorityMetadata(key) {
    const authorityMetadataEntity = this.getItem(key);
    if (authorityMetadataEntity && CacheHelpers_exports.isAuthorityMetadataEntity(key, authorityMetadataEntity)) {
      return authorityMetadataEntity;
    }
    return null;
  }
  /**
   * Get all authority metadata keys
   */
  getAuthorityMetadataKeys() {
    return this.getKeys().filter((key) => {
      return this.isAuthorityMetadata(key);
    });
  }
  /**
   * set authority metadata entity to the platform cache
   * @param key - lookup key to fetch cache type AuthorityMetadataEntity
   * @param metadata - cache value to be set of type AuthorityMetadataEntity
   */
  setAuthorityMetadata(key, metadata) {
    this.setItem(key, metadata);
  }
  /**
   * fetch throttling entity from the platform cache
   * @param throttlingCacheKey - lookup key to fetch cache type ThrottlingEntity
   */
  getThrottlingCache(throttlingCacheKey) {
    const throttlingCache = this.getItem(throttlingCacheKey);
    if (throttlingCache && CacheHelpers_exports.isThrottlingEntity(throttlingCacheKey, throttlingCache)) {
      return throttlingCache;
    }
    return null;
  }
  /**
   * set throttling entity to the platform cache
   * @param throttlingCacheKey - lookup key to fetch cache type ThrottlingEntity
   * @param throttlingCache - cache value to be set of type ThrottlingEntity
   */
  setThrottlingCache(throttlingCacheKey, throttlingCache) {
    this.setItem(throttlingCacheKey, throttlingCache);
  }
  /**
   * Removes the cache item from memory with the given key.
   * @param key - lookup key to remove a cache entity
   * @param inMemory - key value map of the cache
   */
  removeItem(key) {
    this.logger.tracePii(`Item key: ${key}`);
    let result = false;
    const cache = this.getCache();
    if (!!cache[key]) {
      delete cache[key];
      result = true;
    }
    if (result) {
      this.setCache(cache);
      this.emitChange();
    }
    return result;
  }
  /**
   * Remove account entity from the platform cache if it's outdated
   * @param accountKey - lookup key to fetch cache type AccountEntity
   */
  removeOutdatedAccount(accountKey) {
    this.removeItem(accountKey);
  }
  /**
   * Checks whether key is in cache.
   * @param key - look up key for a cache entity
   */
  containsKey(key) {
    return this.getKeys().includes(key);
  }
  /**
   * Gets all keys in window.
   */
  getKeys() {
    this.logger.trace("Retrieving all cache keys");
    const cache = this.getCache();
    return [...Object.keys(cache)];
  }
  /**
   * Clears all cache entries created by MSAL (except tokens).
   */
  clear() {
    this.logger.trace("Clearing cache entries created by MSAL");
    const cacheKeys = this.getKeys();
    cacheKeys.forEach((key) => {
      this.removeItem(key);
    });
    this.emitChange();
  }
  /**
   * Initialize in memory cache from an exisiting cache vault
   * @param cache - blob formatted cache (JSON)
   */
  static generateInMemoryCache(cache) {
    return Deserializer.deserializeAllCache(Deserializer.deserializeJSONBlob(cache));
  }
  /**
   * retrieves the final JSON
   * @param inMemoryCache - itemised cache read from the JSON
   */
  static generateJsonCache(inMemoryCache) {
    return Serializer.serializeAllCache(inMemoryCache);
  }
  /**
   * Updates a credential's cache key if the current cache key is outdated
   */
  updateCredentialCacheKey(currentCacheKey, credential) {
    const updatedCacheKey = CacheHelpers_exports.generateCredentialKey(credential);
    if (currentCacheKey !== updatedCacheKey) {
      const cacheItem = this.getItem(currentCacheKey);
      if (cacheItem) {
        this.removeItem(currentCacheKey);
        this.setItem(updatedCacheKey, cacheItem);
        this.logger.verbose(`Updated an outdated ${credential.credentialType} cache key`);
        return updatedCacheKey;
      } else {
        this.logger.error(`Attempted to update an outdated ${credential.credentialType} cache key but no item matching the outdated key was found in storage`);
      }
    }
    return currentCacheKey;
  }
};

// node_modules/@azure/msal-node/dist/cache/TokenCache.mjs
var defaultSerializedCache = {
  Account: {},
  IdToken: {},
  AccessToken: {},
  RefreshToken: {},
  AppMetadata: {}
};
var TokenCache = class {
  constructor(storage, logger, cachePlugin) {
    this.cacheHasChanged = false;
    this.storage = storage;
    this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this));
    if (cachePlugin) {
      this.persistence = cachePlugin;
    }
    this.logger = logger;
  }
  /**
   * Set to true if cache state has changed since last time serialize or writeToPersistence was called
   */
  hasChanged() {
    return this.cacheHasChanged;
  }
  /**
   * Serializes in memory cache to JSON
   */
  serialize() {
    this.logger.trace("Serializing in-memory cache");
    let finalState = Serializer.serializeAllCache(this.storage.getInMemoryCache());
    if (this.cacheSnapshot) {
      this.logger.trace("Reading cache snapshot from disk");
      finalState = this.mergeState(JSON.parse(this.cacheSnapshot), finalState);
    } else {
      this.logger.trace("No cache snapshot to merge");
    }
    this.cacheHasChanged = false;
    return JSON.stringify(finalState);
  }
  /**
   * Deserializes JSON to in-memory cache. JSON should be in MSAL cache schema format
   * @param cache - blob formatted cache
   */
  deserialize(cache) {
    this.logger.trace("Deserializing JSON to in-memory cache");
    this.cacheSnapshot = cache;
    if (this.cacheSnapshot) {
      this.logger.trace("Reading cache snapshot from disk");
      const deserializedCache = Deserializer.deserializeAllCache(this.overlayDefaults(JSON.parse(this.cacheSnapshot)));
      this.storage.setInMemoryCache(deserializedCache);
    } else {
      this.logger.trace("No cache snapshot to deserialize");
    }
  }
  /**
   * Fetches the cache key-value map
   */
  getKVStore() {
    return this.storage.getCache();
  }
  /**
   * Gets cache snapshot in CacheKVStore format
   */
  getCacheSnapshot() {
    const deserializedPersistentStorage = NodeStorage.generateInMemoryCache(this.cacheSnapshot);
    return this.storage.inMemoryCacheToCache(deserializedPersistentStorage);
  }
  /**
   * API that retrieves all accounts currently in cache to the user
   */
  async getAllAccounts() {
    this.logger.trace("getAllAccounts called");
    let cacheContext;
    try {
      if (this.persistence) {
        cacheContext = new TokenCacheContext(this, false);
        await this.persistence.beforeCacheAccess(cacheContext);
      }
      return this.storage.getAllAccounts();
    } finally {
      if (this.persistence && cacheContext) {
        await this.persistence.afterCacheAccess(cacheContext);
      }
    }
  }
  /**
   * Returns the signed in account matching homeAccountId.
   * (the account object is created at the time of successful login)
   * or null when no matching account is found
   * @param homeAccountId - unique identifier for an account (uid.utid)
   */
  async getAccountByHomeId(homeAccountId) {
    const allAccounts = await this.getAllAccounts();
    if (homeAccountId && allAccounts && allAccounts.length) {
      return allAccounts.filter((accountObj) => accountObj.homeAccountId === homeAccountId)[0] || null;
    } else {
      return null;
    }
  }
  /**
   * Returns the signed in account matching localAccountId.
   * (the account object is created at the time of successful login)
   * or null when no matching account is found
   * @param localAccountId - unique identifier of an account (sub/obj when homeAccountId cannot be populated)
   */
  async getAccountByLocalId(localAccountId) {
    const allAccounts = await this.getAllAccounts();
    if (localAccountId && allAccounts && allAccounts.length) {
      return allAccounts.filter((accountObj) => accountObj.localAccountId === localAccountId)[0] || null;
    } else {
      return null;
    }
  }
  /**
   * API to remove a specific account and the relevant data from cache
   * @param account - AccountInfo passed by the user
   */
  async removeAccount(account) {
    this.logger.trace("removeAccount called");
    let cacheContext;
    try {
      if (this.persistence) {
        cacheContext = new TokenCacheContext(this, true);
        await this.persistence.beforeCacheAccess(cacheContext);
      }
      await this.storage.removeAccount(AccountEntity.generateAccountCacheKey(account));
    } finally {
      if (this.persistence && cacheContext) {
        await this.persistence.afterCacheAccess(cacheContext);
      }
    }
  }
  /**
   * Overwrites in-memory cache with persistent cache
   */
  async overwriteCache() {
    if (!this.persistence) {
      this.logger.info("No persistence layer specified, cache cannot be overwritten");
      return;
    }
    this.logger.info("Overwriting in-memory cache with persistent cache");
    this.storage.clear();
    const cacheContext = new TokenCacheContext(this, false);
    await this.persistence.beforeCacheAccess(cacheContext);
    const cacheSnapshot = this.getCacheSnapshot();
    this.storage.setCache(cacheSnapshot);
    await this.persistence.afterCacheAccess(cacheContext);
  }
  /**
   * Called when the cache has changed state.
   */
  handleChangeEvent() {
    this.cacheHasChanged = true;
  }
  /**
   * Merge in memory cache with the cache snapshot.
   * @param oldState - cache before changes
   * @param currentState - current cache state in the library
   */
  mergeState(oldState, currentState) {
    this.logger.trace("Merging in-memory cache with cache snapshot");
    const stateAfterRemoval = this.mergeRemovals(oldState, currentState);
    return this.mergeUpdates(stateAfterRemoval, currentState);
  }
  /**
   * Deep update of oldState based on newState values
   * @param oldState - cache before changes
   * @param newState - updated cache
   */
  mergeUpdates(oldState, newState) {
    Object.keys(newState).forEach((newKey) => {
      const newValue = newState[newKey];
      if (!oldState.hasOwnProperty(newKey)) {
        if (newValue !== null) {
          oldState[newKey] = newValue;
        }
      } else {
        const newValueNotNull = newValue !== null;
        const newValueIsObject = typeof newValue === "object";
        const newValueIsNotArray = !Array.isArray(newValue);
        const oldStateNotUndefinedOrNull = typeof oldState[newKey] !== "undefined" && oldState[newKey] !== null;
        if (newValueNotNull && newValueIsObject && newValueIsNotArray && oldStateNotUndefinedOrNull) {
          this.mergeUpdates(oldState[newKey], newValue);
        } else {
          oldState[newKey] = newValue;
        }
      }
    });
    return oldState;
  }
  /**
   * Removes entities in oldState that the were removed from newState. If there are any unknown values in root of
   * oldState that are not recognized, they are left untouched.
   * @param oldState - cache before changes
   * @param newState - updated cache
   */
  mergeRemovals(oldState, newState) {
    this.logger.trace("Remove updated entries in cache");
    const accounts = oldState.Account ? this.mergeRemovalsDict(oldState.Account, newState.Account) : oldState.Account;
    const accessTokens = oldState.AccessToken ? this.mergeRemovalsDict(oldState.AccessToken, newState.AccessToken) : oldState.AccessToken;
    const refreshTokens = oldState.RefreshToken ? this.mergeRemovalsDict(oldState.RefreshToken, newState.RefreshToken) : oldState.RefreshToken;
    const idTokens = oldState.IdToken ? this.mergeRemovalsDict(oldState.IdToken, newState.IdToken) : oldState.IdToken;
    const appMetadata = oldState.AppMetadata ? this.mergeRemovalsDict(oldState.AppMetadata, newState.AppMetadata) : oldState.AppMetadata;
    return {
      ...oldState,
      Account: accounts,
      AccessToken: accessTokens,
      RefreshToken: refreshTokens,
      IdToken: idTokens,
      AppMetadata: appMetadata
    };
  }
  /**
   * Helper to merge new cache with the old one
   * @param oldState - cache before changes
   * @param newState - updated cache
   */
  mergeRemovalsDict(oldState, newState) {
    const finalState = { ...oldState };
    Object.keys(oldState).forEach((oldKey) => {
      if (!newState || !newState.hasOwnProperty(oldKey)) {
        delete finalState[oldKey];
      }
    });
    return finalState;
  }
  /**
   * Helper to overlay as a part of cache merge
   * @param passedInCache - cache read from the blob
   */
  overlayDefaults(passedInCache) {
    this.logger.trace("Overlaying input cache with the default cache");
    return {
      Account: {
        ...defaultSerializedCache.Account,
        ...passedInCache.Account
      },
      IdToken: {
        ...defaultSerializedCache.IdToken,
        ...passedInCache.IdToken
      },
      AccessToken: {
        ...defaultSerializedCache.AccessToken,
        ...passedInCache.AccessToken
      },
      RefreshToken: {
        ...defaultSerializedCache.RefreshToken,
        ...passedInCache.RefreshToken
      },
      AppMetadata: {
        ...defaultSerializedCache.AppMetadata,
        ...passedInCache.AppMetadata
      }
    };
  }
};

// node_modules/@azure/msal-node/dist/client/ClientAssertion.mjs
var import_jsonwebtoken = __toESM(require_jsonwebtoken(), 1);
var ClientAssertion = class _ClientAssertion {
  /**
   * Initialize the ClientAssertion class from the clientAssertion passed by the user
   * @param assertion - refer https://tools.ietf.org/html/rfc7521
   */
  static fromAssertion(assertion) {
    const clientAssertion = new _ClientAssertion();
    clientAssertion.jwt = assertion;
    return clientAssertion;
  }
  /**
   * @deprecated Use fromCertificateWithSha256Thumbprint instead, with a SHA-256 thumprint
   * Initialize the ClientAssertion class from the certificate passed by the user
   * @param thumbprint - identifier of a certificate
   * @param privateKey - secret key
   * @param publicCertificate - electronic document provided to prove the ownership of the public key
   */
  static fromCertificate(thumbprint, privateKey, publicCertificate) {
    const clientAssertion = new _ClientAssertion();
    clientAssertion.privateKey = privateKey;
    clientAssertion.thumbprint = thumbprint;
    clientAssertion.useSha256 = false;
    if (publicCertificate) {
      clientAssertion.publicCertificate = this.parseCertificate(publicCertificate);
    }
    return clientAssertion;
  }
  /**
   * Initialize the ClientAssertion class from the certificate passed by the user
   * @param thumbprint - identifier of a certificate
   * @param privateKey - secret key
   * @param publicCertificate - electronic document provided to prove the ownership of the public key
   */
  static fromCertificateWithSha256Thumbprint(thumbprint, privateKey, publicCertificate) {
    const clientAssertion = new _ClientAssertion();
    clientAssertion.privateKey = privateKey;
    clientAssertion.thumbprint = thumbprint;
    clientAssertion.useSha256 = true;
    if (publicCertificate) {
      clientAssertion.publicCertificate = this.parseCertificate(publicCertificate);
    }
    return clientAssertion;
  }
  /**
   * Update JWT for certificate based clientAssertion, if passed by the user, uses it as is
   * @param cryptoProvider - library's crypto helper
   * @param issuer - iss claim
   * @param jwtAudience - aud claim
   */
  getJwt(cryptoProvider, issuer, jwtAudience) {
    if (this.privateKey && this.thumbprint) {
      if (this.jwt && !this.isExpired() && issuer === this.issuer && jwtAudience === this.jwtAudience) {
        return this.jwt;
      }
      return this.createJwt(cryptoProvider, issuer, jwtAudience);
    }
    if (this.jwt) {
      return this.jwt;
    }
    throw createClientAuthError(ClientAuthErrorCodes_exports.invalidAssertion);
  }
  /**
   * JWT format and required claims specified: https://tools.ietf.org/html/rfc7523#section-3
   */
  createJwt(cryptoProvider, issuer, jwtAudience) {
    this.issuer = issuer;
    this.jwtAudience = jwtAudience;
    const issuedAt = TimeUtils_exports.nowSeconds();
    this.expirationTime = issuedAt + 600;
    const algorithm = this.useSha256 ? JwtConstants.PSS_256 : JwtConstants.RSA_256;
    const header = {
      alg: algorithm
    };
    const thumbprintHeader = this.useSha256 ? JwtConstants.X5T_256 : JwtConstants.X5T;
    Object.assign(header, {
      [thumbprintHeader]: EncodingUtils.base64EncodeUrl(this.thumbprint, "hex")
    });
    if (this.publicCertificate) {
      Object.assign(header, {
        [JwtConstants.X5C]: this.publicCertificate
      });
    }
    const payload = {
      [JwtConstants.AUDIENCE]: this.jwtAudience,
      [JwtConstants.EXPIRATION_TIME]: this.expirationTime,
      [JwtConstants.ISSUER]: this.issuer,
      [JwtConstants.SUBJECT]: this.issuer,
      [JwtConstants.NOT_BEFORE]: issuedAt,
      [JwtConstants.JWT_ID]: cryptoProvider.createNewGuid()
    };
    this.jwt = import_jsonwebtoken.default.sign(payload, this.privateKey, { header });
    return this.jwt;
  }
  /**
   * Utility API to check expiration
   */
  isExpired() {
    return this.expirationTime < TimeUtils_exports.nowSeconds();
  }
  /**
   * Extracts the raw certs from a given certificate string and returns them in an array.
   * @param publicCertificate - electronic document provided to prove the ownership of the public key
   */
  static parseCertificate(publicCertificate) {
    const regexToFindCerts = /-----BEGIN CERTIFICATE-----\r*\n(.+?)\r*\n-----END CERTIFICATE-----/gs;
    const certs = [];
    let matches;
    while ((matches = regexToFindCerts.exec(publicCertificate)) !== null) {
      certs.push(matches[1].replace(/\r*\n/g, Constants.EMPTY_STRING));
    }
    return certs;
  }
};

// node_modules/@azure/msal-node/dist/packageMetadata.mjs
var name2 = "@azure/msal-node";
var version2 = "3.4.1";

// node_modules/@azure/msal-node/dist/client/UsernamePasswordClient.mjs
var UsernamePasswordClient = class extends BaseClient {
  constructor(configuration) {
    super(configuration);
  }
  /**
   * API to acquire a token by passing the username and password to the service in exchage of credentials
   * password_grant
   * @param request - CommonUsernamePasswordRequest
   */
  async acquireToken(request) {
    this.logger.info("in acquireToken call in username-password client");
    const reqTimestamp = TimeUtils_exports.nowSeconds();
    const response = await this.executeTokenRequest(this.authority, request);
    const responseHandler = new ResponseHandler(this.config.authOptions.clientId, this.cacheManager, this.cryptoUtils, this.logger, this.config.serializableCache, this.config.persistencePlugin);
    responseHandler.validateTokenResponse(response.body);
    const tokenResponse = responseHandler.handleServerTokenResponse(response.body, this.authority, reqTimestamp, request);
    return tokenResponse;
  }
  /**
   * Executes POST request to token endpoint
   * @param authority - authority object
   * @param request - CommonUsernamePasswordRequest provided by the developer
   */
  async executeTokenRequest(authority, request) {
    const queryParametersString = this.createTokenQueryParameters(request);
    const endpoint = UrlString.appendQueryString(authority.tokenEndpoint, queryParametersString);
    const requestBody = await this.createTokenRequestBody(request);
    const headers = this.createTokenRequestHeaders({
      credential: request.username,
      type: CcsCredentialType.UPN
    });
    const thumbprint = {
      clientId: this.config.authOptions.clientId,
      authority: authority.canonicalAuthority,
      scopes: request.scopes,
      claims: request.claims,
      authenticationScheme: request.authenticationScheme,
      resourceRequestMethod: request.resourceRequestMethod,
      resourceRequestUri: request.resourceRequestUri,
      shrClaims: request.shrClaims,
      sshKid: request.sshKid
    };
    return this.executePostToTokenEndpoint(endpoint, requestBody, headers, thumbprint, request.correlationId);
  }
  /**
   * Generates a map for all the params to be sent to the service
   * @param request - CommonUsernamePasswordRequest provided by the developer
   */
  async createTokenRequestBody(request) {
    const parameters = /* @__PURE__ */ new Map();
    RequestParameterBuilder_exports.addClientId(parameters, this.config.authOptions.clientId);
    RequestParameterBuilder_exports.addUsername(parameters, request.username);
    RequestParameterBuilder_exports.addPassword(parameters, request.password);
    RequestParameterBuilder_exports.addScopes(parameters, request.scopes);
    RequestParameterBuilder_exports.addResponseType(parameters, OAuthResponseType.IDTOKEN_TOKEN);
    RequestParameterBuilder_exports.addGrantType(parameters, GrantType.RESOURCE_OWNER_PASSWORD_GRANT);
    RequestParameterBuilder_exports.addClientInfo(parameters);
    RequestParameterBuilder_exports.addLibraryInfo(parameters, this.config.libraryInfo);
    RequestParameterBuilder_exports.addApplicationTelemetry(parameters, this.config.telemetry.application);
    RequestParameterBuilder_exports.addThrottling(parameters);
    if (this.serverTelemetryManager) {
      RequestParameterBuilder_exports.addServerTelemetry(parameters, this.serverTelemetryManager);
    }
    const correlationId = request.correlationId || this.config.cryptoInterface.createNewGuid();
    RequestParameterBuilder_exports.addCorrelationId(parameters, correlationId);
    if (this.config.clientCredentials.clientSecret) {
      RequestParameterBuilder_exports.addClientSecret(parameters, this.config.clientCredentials.clientSecret);
    }
    const clientAssertion = this.config.clientCredentials.clientAssertion;
    if (clientAssertion) {
      RequestParameterBuilder_exports.addClientAssertion(parameters, await getClientAssertion(clientAssertion.assertion, this.config.authOptions.clientId, request.resourceRequestUri));
      RequestParameterBuilder_exports.addClientAssertionType(parameters, clientAssertion.assertionType);
    }
    if (!StringUtils.isEmptyObj(request.claims) || this.config.authOptions.clientCapabilities && this.config.authOptions.clientCapabilities.length > 0) {
      RequestParameterBuilder_exports.addClaims(parameters, request.claims, this.config.authOptions.clientCapabilities);
    }
    if (this.config.systemOptions.preventCorsPreflight && request.username) {
      RequestParameterBuilder_exports.addCcsUpn(parameters, request.username);
    }
    return UrlUtils_exports.mapToQueryString(parameters);
  }
};

// node_modules/@azure/msal-node/dist/protocol/Authorize.mjs
function getAuthCodeRequestUrl(config2, authority, request, logger) {
  const parameters = Authorize_exports.getStandardAuthorizeRequestParameters({
    ...config2.auth,
    authority,
    redirectUri: request.redirectUri || ""
  }, request, logger);
  RequestParameterBuilder_exports.addLibraryInfo(parameters, {
    sku: Constants2.MSAL_SKU,
    version: version2,
    cpu: process.arch || "",
    os: process.platform || ""
  });
  if (config2.auth.protocolMode !== ProtocolMode.OIDC) {
    RequestParameterBuilder_exports.addApplicationTelemetry(parameters, config2.telemetry.application);
  }
  RequestParameterBuilder_exports.addResponseType(parameters, OAuthResponseType.CODE);
  if (request.codeChallenge && request.codeChallengeMethod) {
    RequestParameterBuilder_exports.addCodeChallengeParams(parameters, request.codeChallenge, request.codeChallengeMethod);
  }
  RequestParameterBuilder_exports.addExtraQueryParameters(parameters, request.extraQueryParameters || {});
  return Authorize_exports.getAuthorizeUrl(authority, parameters);
}

// node_modules/@azure/msal-node/dist/client/ClientApplication.mjs
var ClientApplication = class {
  /**
   * Constructor for the ClientApplication
   */
  constructor(configuration) {
    this.config = buildAppConfiguration(configuration);
    this.cryptoProvider = new CryptoProvider();
    this.logger = new Logger(this.config.system.loggerOptions, name2, version2);
    this.storage = new NodeStorage(this.logger, this.config.auth.clientId, this.cryptoProvider, buildStaticAuthorityOptions(this.config.auth));
    this.tokenCache = new TokenCache(this.storage, this.logger, this.config.cache.cachePlugin);
  }
  /**
   * Creates the URL of the authorization request, letting the user input credentials and consent to the
   * application. The URL targets the /authorize endpoint of the authority configured in the
   * application object.
   *
   * Once the user inputs their credentials and consents, the authority will send a response to the redirect URI
   * sent in the request and should contain an authorization code, which can then be used to acquire tokens via
   * `acquireTokenByCode(AuthorizationCodeRequest)`.
   */
  async getAuthCodeUrl(request) {
    this.logger.info("getAuthCodeUrl called", request.correlationId);
    const validRequest = {
      ...request,
      ...await this.initializeBaseRequest(request),
      responseMode: request.responseMode || ResponseMode.QUERY,
      authenticationScheme: AuthenticationScheme.BEARER,
      state: request.state || "",
      nonce: request.nonce || ""
    };
    const discoveredAuthority = await this.createAuthority(validRequest.authority, validRequest.correlationId, void 0, request.azureCloudOptions);
    return getAuthCodeRequestUrl(this.config, discoveredAuthority, validRequest, this.logger);
  }
  /**
   * Acquires a token by exchanging the Authorization Code received from the first step of OAuth2.0
   * Authorization Code flow.
   *
   * `getAuthCodeUrl(AuthorizationCodeUrlRequest)` can be used to create the URL for the first step of OAuth2.0
   * Authorization Code flow. Ensure that values for redirectUri and scopes in AuthorizationCodeUrlRequest and
   * AuthorizationCodeRequest are the same.
   */
  async acquireTokenByCode(request, authCodePayLoad) {
    this.logger.info("acquireTokenByCode called");
    if (request.state && authCodePayLoad) {
      this.logger.info("acquireTokenByCode - validating state");
      this.validateState(request.state, authCodePayLoad.state || "");
      authCodePayLoad = { ...authCodePayLoad, state: "" };
    }
    const validRequest = {
      ...request,
      ...await this.initializeBaseRequest(request),
      authenticationScheme: AuthenticationScheme.BEARER
    };
    const serverTelemetryManager = this.initializeServerTelemetryManager(ApiId.acquireTokenByCode, validRequest.correlationId);
    try {
      const discoveredAuthority = await this.createAuthority(validRequest.authority, validRequest.correlationId, void 0, request.azureCloudOptions);
      const authClientConfig = await this.buildOauthClientConfiguration(discoveredAuthority, validRequest.correlationId, validRequest.redirectUri, serverTelemetryManager);
      const authorizationCodeClient = new AuthorizationCodeClient(authClientConfig);
      this.logger.verbose("Auth code client created", validRequest.correlationId);
      return await authorizationCodeClient.acquireToken(validRequest, authCodePayLoad);
    } catch (e) {
      if (e instanceof AuthError) {
        e.setCorrelationId(validRequest.correlationId);
      }
      serverTelemetryManager.cacheFailedRequest(e);
      throw e;
    }
  }
  /**
   * Acquires a token by exchanging the refresh token provided for a new set of tokens.
   *
   * This API is provided only for scenarios where you would like to migrate from ADAL to MSAL. Otherwise, it is
   * recommended that you use `acquireTokenSilent()` for silent scenarios. When using `acquireTokenSilent()`, MSAL will
   * handle the caching and refreshing of tokens automatically.
   */
  async acquireTokenByRefreshToken(request) {
    this.logger.info("acquireTokenByRefreshToken called", request.correlationId);
    const validRequest = {
      ...request,
      ...await this.initializeBaseRequest(request),
      authenticationScheme: AuthenticationScheme.BEARER
    };
    const serverTelemetryManager = this.initializeServerTelemetryManager(ApiId.acquireTokenByRefreshToken, validRequest.correlationId);
    try {
      const discoveredAuthority = await this.createAuthority(validRequest.authority, validRequest.correlationId, void 0, request.azureCloudOptions);
      const refreshTokenClientConfig = await this.buildOauthClientConfiguration(discoveredAuthority, validRequest.correlationId, validRequest.redirectUri || "", serverTelemetryManager);
      const refreshTokenClient = new RefreshTokenClient(refreshTokenClientConfig);
      this.logger.verbose("Refresh token client created", validRequest.correlationId);
      return await refreshTokenClient.acquireToken(validRequest);
    } catch (e) {
      if (e instanceof AuthError) {
        e.setCorrelationId(validRequest.correlationId);
      }
      serverTelemetryManager.cacheFailedRequest(e);
      throw e;
    }
  }
  /**
   * Acquires a token silently when a user specifies the account the token is requested for.
   *
   * This API expects the user to provide an account object and looks into the cache to retrieve the token if present.
   * There is also an optional "forceRefresh" boolean the user can send to bypass the cache for access_token and id_token.
   * In case the refresh_token is expired or not found, an error is thrown
   * and the guidance is for the user to call any interactive token acquisition API (eg: `acquireTokenByCode()`).
   */
  async acquireTokenSilent(request) {
    const validRequest = {
      ...request,
      ...await this.initializeBaseRequest(request),
      forceRefresh: request.forceRefresh || false
    };
    const serverTelemetryManager = this.initializeServerTelemetryManager(ApiId.acquireTokenSilent, validRequest.correlationId, validRequest.forceRefresh);
    try {
      const discoveredAuthority = await this.createAuthority(validRequest.authority, validRequest.correlationId, void 0, request.azureCloudOptions);
      const clientConfiguration = await this.buildOauthClientConfiguration(discoveredAuthority, validRequest.correlationId, validRequest.redirectUri || "", serverTelemetryManager);
      const silentFlowClient = new SilentFlowClient(clientConfiguration);
      this.logger.verbose("Silent flow client created", validRequest.correlationId);
      try {
        await this.tokenCache.overwriteCache();
        return await this.acquireCachedTokenSilent(validRequest, silentFlowClient, clientConfiguration);
      } catch (error) {
        if (error instanceof ClientAuthError && error.errorCode === ClientAuthErrorCodes_exports.tokenRefreshRequired) {
          const refreshTokenClient = new RefreshTokenClient(clientConfiguration);
          return refreshTokenClient.acquireTokenByRefreshToken(validRequest);
        }
        throw error;
      }
    } catch (error) {
      if (error instanceof AuthError) {
        error.setCorrelationId(validRequest.correlationId);
      }
      serverTelemetryManager.cacheFailedRequest(error);
      throw error;
    }
  }
  async acquireCachedTokenSilent(validRequest, silentFlowClient, clientConfiguration) {
    var _a;
    const [authResponse, cacheOutcome] = await silentFlowClient.acquireCachedToken({
      ...validRequest,
      scopes: ((_a = validRequest.scopes) == null ? void 0 : _a.length) ? validRequest.scopes : [...OIDC_DEFAULT_SCOPES]
    });
    if (cacheOutcome === CacheOutcome.PROACTIVELY_REFRESHED) {
      this.logger.info("ClientApplication:acquireCachedTokenSilent - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");
      const refreshTokenClient = new RefreshTokenClient(clientConfiguration);
      try {
        await refreshTokenClient.acquireTokenByRefreshToken(validRequest);
      } catch (e) {
      }
    }
    return authResponse;
  }
  /**
   * Acquires tokens with password grant by exchanging client applications username and password for credentials
   *
   * The latest OAuth 2.0 Security Best Current Practice disallows the password grant entirely.
   * More details on this recommendation at https://tools.ietf.org/html/draft-ietf-oauth-security-topics-13#section-3.4
   * Microsoft's documentation and recommendations are at:
   * https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-authentication-flows#usernamepassword
   *
   * @param request - UsenamePasswordRequest
   * @deprecated - Use a more secure flow instead
   */
  async acquireTokenByUsernamePassword(request) {
    this.logger.info("acquireTokenByUsernamePassword called", request.correlationId);
    const validRequest = {
      ...request,
      ...await this.initializeBaseRequest(request)
    };
    const serverTelemetryManager = this.initializeServerTelemetryManager(ApiId.acquireTokenByUsernamePassword, validRequest.correlationId);
    try {
      const discoveredAuthority = await this.createAuthority(validRequest.authority, validRequest.correlationId, void 0, request.azureCloudOptions);
      const usernamePasswordClientConfig = await this.buildOauthClientConfiguration(discoveredAuthority, validRequest.correlationId, "", serverTelemetryManager);
      const usernamePasswordClient = new UsernamePasswordClient(usernamePasswordClientConfig);
      this.logger.verbose("Username password client created", validRequest.correlationId);
      return await usernamePasswordClient.acquireToken(validRequest);
    } catch (e) {
      if (e instanceof AuthError) {
        e.setCorrelationId(validRequest.correlationId);
      }
      serverTelemetryManager.cacheFailedRequest(e);
      throw e;
    }
  }
  /**
   * Gets the token cache for the application.
   */
  getTokenCache() {
    this.logger.info("getTokenCache called");
    return this.tokenCache;
  }
  /**
   * Validates OIDC state by comparing the user cached state with the state received from the server.
   *
   * This API is provided for scenarios where you would use OAuth2.0 state parameter to mitigate against
   * CSRF attacks.
   * For more information about state, visit https://datatracker.ietf.org/doc/html/rfc6819#section-3.6.
   * @param state - Unique GUID generated by the user that is cached by the user and sent to the server during the first leg of the flow
   * @param cachedState - This string is sent back by the server with the authorization code
   */
  validateState(state, cachedState) {
    if (!state) {
      throw NodeAuthError.createStateNotFoundError();
    }
    if (state !== cachedState) {
      throw createClientAuthError(ClientAuthErrorCodes_exports.stateMismatch);
    }
  }
  /**
   * Returns the logger instance
   */
  getLogger() {
    return this.logger;
  }
  /**
   * Replaces the default logger set in configurations with new Logger with new configurations
   * @param logger - Logger instance
   */
  setLogger(logger) {
    this.logger = logger;
  }
  /**
   * Builds the common configuration to be passed to the common component based on the platform configurarion
   * @param authority - user passed authority in configuration
   * @param serverTelemetryManager - initializes servertelemetry if passed
   */
  async buildOauthClientConfiguration(discoveredAuthority, requestCorrelationId, redirectUri, serverTelemetryManager) {
    this.logger.verbose("buildOauthClientConfiguration called", requestCorrelationId);
    this.logger.info(`Building oauth client configuration with the following authority: ${discoveredAuthority.tokenEndpoint}.`, requestCorrelationId);
    serverTelemetryManager == null ? void 0 : serverTelemetryManager.updateRegionDiscoveryMetadata(discoveredAuthority.regionDiscoveryMetadata);
    const clientConfiguration = {
      authOptions: {
        clientId: this.config.auth.clientId,
        authority: discoveredAuthority,
        clientCapabilities: this.config.auth.clientCapabilities,
        redirectUri
      },
      loggerOptions: {
        logLevel: this.config.system.loggerOptions.logLevel,
        loggerCallback: this.config.system.loggerOptions.loggerCallback,
        piiLoggingEnabled: this.config.system.loggerOptions.piiLoggingEnabled,
        correlationId: requestCorrelationId
      },
      cacheOptions: {
        claimsBasedCachingEnabled: this.config.cache.claimsBasedCachingEnabled
      },
      cryptoInterface: this.cryptoProvider,
      networkInterface: this.config.system.networkClient,
      storageInterface: this.storage,
      serverTelemetryManager,
      clientCredentials: {
        clientSecret: this.clientSecret,
        clientAssertion: await this.getClientAssertion(discoveredAuthority)
      },
      libraryInfo: {
        sku: Constants2.MSAL_SKU,
        version: version2,
        cpu: process.arch || Constants.EMPTY_STRING,
        os: process.platform || Constants.EMPTY_STRING
      },
      telemetry: this.config.telemetry,
      persistencePlugin: this.config.cache.cachePlugin,
      serializableCache: this.tokenCache
    };
    return clientConfiguration;
  }
  async getClientAssertion(authority) {
    if (this.developerProvidedClientAssertion) {
      this.clientAssertion = ClientAssertion.fromAssertion(await getClientAssertion(this.developerProvidedClientAssertion, this.config.auth.clientId, authority.tokenEndpoint));
    }
    return this.clientAssertion && {
      assertion: this.clientAssertion.getJwt(this.cryptoProvider, this.config.auth.clientId, authority.tokenEndpoint),
      assertionType: Constants2.JWT_BEARER_ASSERTION_TYPE
    };
  }
  /**
   * Generates a request with the default scopes & generates a correlationId.
   * @param authRequest - BaseAuthRequest for initialization
   */
  async initializeBaseRequest(authRequest) {
    this.logger.verbose("initializeRequestScopes called", authRequest.correlationId);
    if (authRequest.authenticationScheme && authRequest.authenticationScheme === AuthenticationScheme.POP) {
      this.logger.verbose("Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request", authRequest.correlationId);
    }
    authRequest.authenticationScheme = AuthenticationScheme.BEARER;
    if (this.config.cache.claimsBasedCachingEnabled && authRequest.claims && // Checks for empty stringified object "{}" which doesn't qualify as requested claims
    !StringUtils.isEmptyObj(authRequest.claims)) {
      authRequest.requestedClaimsHash = await this.cryptoProvider.hashString(authRequest.claims);
    }
    return {
      ...authRequest,
      scopes: [
        ...authRequest && authRequest.scopes || [],
        ...OIDC_DEFAULT_SCOPES
      ],
      correlationId: authRequest && authRequest.correlationId || this.cryptoProvider.createNewGuid(),
      authority: authRequest.authority || this.config.auth.authority
    };
  }
  /**
   * Initializes the server telemetry payload
   * @param apiId - Id for a specific request
   * @param correlationId - GUID
   * @param forceRefresh - boolean to indicate network call
   */
  initializeServerTelemetryManager(apiId, correlationId, forceRefresh) {
    const telemetryPayload = {
      clientId: this.config.auth.clientId,
      correlationId,
      apiId,
      forceRefresh: forceRefresh || false
    };
    return new ServerTelemetryManager(telemetryPayload, this.storage);
  }
  /**
   * Create authority instance. If authority not passed in request, default to authority set on the application
   * object. If no authority set in application object, then default to common authority.
   * @param authorityString - authority from user configuration
   */
  async createAuthority(authorityString, requestCorrelationId, azureRegionConfiguration, azureCloudOptions) {
    this.logger.verbose("createAuthority called", requestCorrelationId);
    const authorityUrl = Authority.generateAuthority(authorityString, azureCloudOptions || this.config.auth.azureCloudOptions);
    const authorityOptions = {
      protocolMode: this.config.auth.protocolMode,
      knownAuthorities: this.config.auth.knownAuthorities,
      cloudDiscoveryMetadata: this.config.auth.cloudDiscoveryMetadata,
      authorityMetadata: this.config.auth.authorityMetadata,
      azureRegionConfiguration,
      skipAuthorityMetadataCache: this.config.auth.skipAuthorityMetadataCache
    };
    return AuthorityFactory_exports.createDiscoveredInstance(authorityUrl, this.config.system.networkClient, this.storage, authorityOptions, this.logger, requestCorrelationId);
  }
  /**
   * Clear the cache
   */
  clearCache() {
    this.storage.clear();
  }
};

// node_modules/@azure/msal-node/dist/network/LoopbackClient.mjs
var import_http2 = __toESM(require("http"), 1);

// node_modules/@azure/msal-node/dist/client/ClientCredentialClient.mjs
var ClientCredentialClient = class extends BaseClient {
  constructor(configuration, appTokenProvider) {
    super(configuration);
    this.appTokenProvider = appTokenProvider;
  }
  /**
   * Public API to acquire a token with ClientCredential Flow for Confidential clients
   * @param request - CommonClientCredentialRequest provided by the developer
   */
  async acquireToken(request) {
    if (request.skipCache || request.claims) {
      return this.executeTokenRequest(request, this.authority);
    }
    const [cachedAuthenticationResult, lastCacheOutcome] = await this.getCachedAuthenticationResult(request, this.config, this.cryptoUtils, this.authority, this.cacheManager, this.serverTelemetryManager);
    if (cachedAuthenticationResult) {
      if (lastCacheOutcome === CacheOutcome.PROACTIVELY_REFRESHED) {
        this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");
        const refreshAccessToken = true;
        await this.executeTokenRequest(request, this.authority, refreshAccessToken);
      }
      return cachedAuthenticationResult;
    } else {
      return this.executeTokenRequest(request, this.authority);
    }
  }
  /**
   * looks up cache if the tokens are cached already
   */
  async getCachedAuthenticationResult(request, config2, cryptoUtils, authority, cacheManager, serverTelemetryManager) {
    var _a, _b;
    const clientConfiguration = config2;
    const managedIdentityConfiguration = config2;
    let lastCacheOutcome = CacheOutcome.NOT_APPLICABLE;
    let cacheContext;
    if (clientConfiguration.serializableCache && clientConfiguration.persistencePlugin) {
      cacheContext = new TokenCacheContext(clientConfiguration.serializableCache, false);
      await clientConfiguration.persistencePlugin.beforeCacheAccess(cacheContext);
    }
    const cachedAccessToken = this.readAccessTokenFromCache(authority, ((_a = managedIdentityConfiguration.managedIdentityId) == null ? void 0 : _a.id) || clientConfiguration.authOptions.clientId, new ScopeSet(request.scopes || []), cacheManager);
    if (clientConfiguration.serializableCache && clientConfiguration.persistencePlugin && cacheContext) {
      await clientConfiguration.persistencePlugin.afterCacheAccess(cacheContext);
    }
    if (!cachedAccessToken) {
      serverTelemetryManager == null ? void 0 : serverTelemetryManager.setCacheOutcome(CacheOutcome.NO_CACHED_ACCESS_TOKEN);
      return [null, CacheOutcome.NO_CACHED_ACCESS_TOKEN];
    }
    if (TimeUtils_exports.isTokenExpired(cachedAccessToken.expiresOn, ((_b = clientConfiguration.systemOptions) == null ? void 0 : _b.tokenRenewalOffsetSeconds) || DEFAULT_TOKEN_RENEWAL_OFFSET_SEC)) {
      serverTelemetryManager == null ? void 0 : serverTelemetryManager.setCacheOutcome(CacheOutcome.CACHED_ACCESS_TOKEN_EXPIRED);
      return [null, CacheOutcome.CACHED_ACCESS_TOKEN_EXPIRED];
    }
    if (cachedAccessToken.refreshOn && TimeUtils_exports.isTokenExpired(cachedAccessToken.refreshOn.toString(), 0)) {
      lastCacheOutcome = CacheOutcome.PROACTIVELY_REFRESHED;
      serverTelemetryManager == null ? void 0 : serverTelemetryManager.setCacheOutcome(CacheOutcome.PROACTIVELY_REFRESHED);
    }
    return [
      await ResponseHandler.generateAuthenticationResult(cryptoUtils, authority, {
        account: null,
        idToken: null,
        accessToken: cachedAccessToken,
        refreshToken: null,
        appMetadata: null
      }, true, request),
      lastCacheOutcome
    ];
  }
  /**
   * Reads access token from the cache
   */
  readAccessTokenFromCache(authority, id, scopeSet, cacheManager) {
    const accessTokenFilter = {
      homeAccountId: Constants.EMPTY_STRING,
      environment: authority.canonicalAuthorityUrlComponents.HostNameAndPort,
      credentialType: CredentialType.ACCESS_TOKEN,
      clientId: id,
      realm: authority.tenant,
      target: ScopeSet.createSearchScopes(scopeSet.asArray())
    };
    const accessTokens = cacheManager.getAccessTokensByFilter(accessTokenFilter);
    if (accessTokens.length < 1) {
      return null;
    } else if (accessTokens.length > 1) {
      throw createClientAuthError(ClientAuthErrorCodes_exports.multipleMatchingTokens);
    }
    return accessTokens[0];
  }
  /**
   * Makes a network call to request the token from the service
   * @param request - CommonClientCredentialRequest provided by the developer
   * @param authority - authority object
   */
  async executeTokenRequest(request, authority, refreshAccessToken) {
    let serverTokenResponse;
    let reqTimestamp;
    if (this.appTokenProvider) {
      this.logger.info("Using appTokenProvider extensibility.");
      const appTokenPropviderParameters = {
        correlationId: request.correlationId,
        tenantId: this.config.authOptions.authority.tenant,
        scopes: request.scopes,
        claims: request.claims
      };
      reqTimestamp = TimeUtils_exports.nowSeconds();
      const appTokenProviderResult = await this.appTokenProvider(appTokenPropviderParameters);
      serverTokenResponse = {
        access_token: appTokenProviderResult.accessToken,
        expires_in: appTokenProviderResult.expiresInSeconds,
        refresh_in: appTokenProviderResult.refreshInSeconds,
        token_type: AuthenticationScheme.BEARER
      };
    } else {
      const queryParametersString = this.createTokenQueryParameters(request);
      const endpoint = UrlString.appendQueryString(authority.tokenEndpoint, queryParametersString);
      const requestBody = await this.createTokenRequestBody(request);
      const headers = this.createTokenRequestHeaders();
      const thumbprint = {
        clientId: this.config.authOptions.clientId,
        authority: request.authority,
        scopes: request.scopes,
        claims: request.claims,
        authenticationScheme: request.authenticationScheme,
        resourceRequestMethod: request.resourceRequestMethod,
        resourceRequestUri: request.resourceRequestUri,
        shrClaims: request.shrClaims,
        sshKid: request.sshKid
      };
      this.logger.info("Sending token request to endpoint: " + authority.tokenEndpoint);
      reqTimestamp = TimeUtils_exports.nowSeconds();
      const response = await this.executePostToTokenEndpoint(endpoint, requestBody, headers, thumbprint, request.correlationId);
      serverTokenResponse = response.body;
      serverTokenResponse.status = response.status;
    }
    const responseHandler = new ResponseHandler(this.config.authOptions.clientId, this.cacheManager, this.cryptoUtils, this.logger, this.config.serializableCache, this.config.persistencePlugin);
    responseHandler.validateTokenResponse(serverTokenResponse, refreshAccessToken);
    const tokenResponse = await responseHandler.handleServerTokenResponse(serverTokenResponse, this.authority, reqTimestamp, request);
    return tokenResponse;
  }
  /**
   * generate the request to the server in the acceptable format
   * @param request - CommonClientCredentialRequest provided by the developer
   */
  async createTokenRequestBody(request) {
    const parameters = /* @__PURE__ */ new Map();
    RequestParameterBuilder_exports.addClientId(parameters, this.config.authOptions.clientId);
    RequestParameterBuilder_exports.addScopes(parameters, request.scopes, false);
    RequestParameterBuilder_exports.addGrantType(parameters, GrantType.CLIENT_CREDENTIALS_GRANT);
    RequestParameterBuilder_exports.addLibraryInfo(parameters, this.config.libraryInfo);
    RequestParameterBuilder_exports.addApplicationTelemetry(parameters, this.config.telemetry.application);
    RequestParameterBuilder_exports.addThrottling(parameters);
    if (this.serverTelemetryManager) {
      RequestParameterBuilder_exports.addServerTelemetry(parameters, this.serverTelemetryManager);
    }
    const correlationId = request.correlationId || this.config.cryptoInterface.createNewGuid();
    RequestParameterBuilder_exports.addCorrelationId(parameters, correlationId);
    if (this.config.clientCredentials.clientSecret) {
      RequestParameterBuilder_exports.addClientSecret(parameters, this.config.clientCredentials.clientSecret);
    }
    const clientAssertion = request.clientAssertion || this.config.clientCredentials.clientAssertion;
    if (clientAssertion) {
      RequestParameterBuilder_exports.addClientAssertion(parameters, await getClientAssertion(clientAssertion.assertion, this.config.authOptions.clientId, request.resourceRequestUri));
      RequestParameterBuilder_exports.addClientAssertionType(parameters, clientAssertion.assertionType);
    }
    if (!StringUtils.isEmptyObj(request.claims) || this.config.authOptions.clientCapabilities && this.config.authOptions.clientCapabilities.length > 0) {
      RequestParameterBuilder_exports.addClaims(parameters, request.claims, this.config.authOptions.clientCapabilities);
    }
    return UrlUtils_exports.mapToQueryString(parameters);
  }
};

// node_modules/@azure/msal-node/dist/client/OnBehalfOfClient.mjs
var OnBehalfOfClient = class extends BaseClient {
  constructor(configuration) {
    super(configuration);
  }
  /**
   * Public API to acquire tokens with on behalf of flow
   * @param request - developer provided CommonOnBehalfOfRequest
   */
  async acquireToken(request) {
    this.scopeSet = new ScopeSet(request.scopes || []);
    this.userAssertionHash = await this.cryptoUtils.hashString(request.oboAssertion);
    if (request.skipCache || request.claims) {
      return this.executeTokenRequest(request, this.authority, this.userAssertionHash);
    }
    try {
      return await this.getCachedAuthenticationResult(request);
    } catch (e) {
      return await this.executeTokenRequest(request, this.authority, this.userAssertionHash);
    }
  }
  /**
   * look up cache for tokens
   * Find idtoken in the cache
   * Find accessToken based on user assertion and account info in the cache
   * Please note we are not yet supported OBO tokens refreshed with long lived RT. User will have to send a new assertion if the current access token expires
   * This is to prevent security issues when the assertion changes over time, however, longlived RT helps retaining the session
   * @param request - developer provided CommonOnBehalfOfRequest
   */
  async getCachedAuthenticationResult(request) {
    var _a, _b;
    const cachedAccessToken = this.readAccessTokenFromCacheForOBO(this.config.authOptions.clientId, request);
    if (!cachedAccessToken) {
      (_a = this.serverTelemetryManager) == null ? void 0 : _a.setCacheOutcome(CacheOutcome.NO_CACHED_ACCESS_TOKEN);
      this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties.");
      throw createClientAuthError(ClientAuthErrorCodes_exports.tokenRefreshRequired);
    } else if (TimeUtils_exports.isTokenExpired(cachedAccessToken.expiresOn, this.config.systemOptions.tokenRenewalOffsetSeconds)) {
      (_b = this.serverTelemetryManager) == null ? void 0 : _b.setCacheOutcome(CacheOutcome.CACHED_ACCESS_TOKEN_EXPIRED);
      this.logger.info(`OnbehalfofFlow:getCachedAuthenticationResult - Cached access token is expired or will expire within ${this.config.systemOptions.tokenRenewalOffsetSeconds} seconds.`);
      throw createClientAuthError(ClientAuthErrorCodes_exports.tokenRefreshRequired);
    }
    const cachedIdToken = this.readIdTokenFromCacheForOBO(cachedAccessToken.homeAccountId);
    let idTokenClaims;
    let cachedAccount = null;
    if (cachedIdToken) {
      idTokenClaims = AuthToken_exports.extractTokenClaims(cachedIdToken.secret, EncodingUtils.base64Decode);
      const localAccountId = idTokenClaims.oid || idTokenClaims.sub;
      const accountInfo = {
        homeAccountId: cachedIdToken.homeAccountId,
        environment: cachedIdToken.environment,
        tenantId: cachedIdToken.realm,
        username: Constants.EMPTY_STRING,
        localAccountId: localAccountId || Constants.EMPTY_STRING
      };
      cachedAccount = this.cacheManager.readAccountFromCache(accountInfo);
    }
    if (this.config.serverTelemetryManager) {
      this.config.serverTelemetryManager.incrementCacheHits();
    }
    return ResponseHandler.generateAuthenticationResult(this.cryptoUtils, this.authority, {
      account: cachedAccount,
      accessToken: cachedAccessToken,
      idToken: cachedIdToken,
      refreshToken: null,
      appMetadata: null
    }, true, request, idTokenClaims);
  }
  /**
   * read idtoken from cache, this is a specific implementation for OBO as the requirements differ from a generic lookup in the cacheManager
   * Certain use cases of OBO flow do not expect an idToken in the cache/or from the service
   * @param atHomeAccountId - account id
   */
  readIdTokenFromCacheForOBO(atHomeAccountId) {
    const idTokenFilter = {
      homeAccountId: atHomeAccountId,
      environment: this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,
      credentialType: CredentialType.ID_TOKEN,
      clientId: this.config.authOptions.clientId,
      realm: this.authority.tenant
    };
    const idTokenMap = this.cacheManager.getIdTokensByFilter(idTokenFilter);
    if (Object.values(idTokenMap).length < 1) {
      return null;
    }
    return Object.values(idTokenMap)[0];
  }
  /**
   * Fetches the cached access token based on incoming assertion
   * @param clientId - client id
   * @param request - developer provided CommonOnBehalfOfRequest
   */
  readAccessTokenFromCacheForOBO(clientId, request) {
    const authScheme = request.authenticationScheme || AuthenticationScheme.BEARER;
    const credentialType = authScheme && authScheme.toLowerCase() !== AuthenticationScheme.BEARER.toLowerCase() ? CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME : CredentialType.ACCESS_TOKEN;
    const accessTokenFilter = {
      credentialType,
      clientId,
      target: ScopeSet.createSearchScopes(this.scopeSet.asArray()),
      tokenType: authScheme,
      keyId: request.sshKid,
      requestedClaimsHash: request.requestedClaimsHash,
      userAssertionHash: this.userAssertionHash
    };
    const accessTokens = this.cacheManager.getAccessTokensByFilter(accessTokenFilter);
    const numAccessTokens = accessTokens.length;
    if (numAccessTokens < 1) {
      return null;
    } else if (numAccessTokens > 1) {
      throw createClientAuthError(ClientAuthErrorCodes_exports.multipleMatchingTokens);
    }
    return accessTokens[0];
  }
  /**
   * Make a network call to the server requesting credentials
   * @param request - developer provided CommonOnBehalfOfRequest
   * @param authority - authority object
   */
  async executeTokenRequest(request, authority, userAssertionHash) {
    const queryParametersString = this.createTokenQueryParameters(request);
    const endpoint = UrlString.appendQueryString(authority.tokenEndpoint, queryParametersString);
    const requestBody = await this.createTokenRequestBody(request);
    const headers = this.createTokenRequestHeaders();
    const thumbprint = {
      clientId: this.config.authOptions.clientId,
      authority: request.authority,
      scopes: request.scopes,
      claims: request.claims,
      authenticationScheme: request.authenticationScheme,
      resourceRequestMethod: request.resourceRequestMethod,
      resourceRequestUri: request.resourceRequestUri,
      shrClaims: request.shrClaims,
      sshKid: request.sshKid
    };
    const reqTimestamp = TimeUtils_exports.nowSeconds();
    const response = await this.executePostToTokenEndpoint(endpoint, requestBody, headers, thumbprint, request.correlationId);
    const responseHandler = new ResponseHandler(this.config.authOptions.clientId, this.cacheManager, this.cryptoUtils, this.logger, this.config.serializableCache, this.config.persistencePlugin);
    responseHandler.validateTokenResponse(response.body);
    const tokenResponse = await responseHandler.handleServerTokenResponse(response.body, this.authority, reqTimestamp, request, void 0, userAssertionHash);
    return tokenResponse;
  }
  /**
   * generate a server request in accepable format
   * @param request - developer provided CommonOnBehalfOfRequest
   */
  async createTokenRequestBody(request) {
    const parameters = /* @__PURE__ */ new Map();
    RequestParameterBuilder_exports.addClientId(parameters, this.config.authOptions.clientId);
    RequestParameterBuilder_exports.addScopes(parameters, request.scopes);
    RequestParameterBuilder_exports.addGrantType(parameters, GrantType.JWT_BEARER);
    RequestParameterBuilder_exports.addClientInfo(parameters);
    RequestParameterBuilder_exports.addLibraryInfo(parameters, this.config.libraryInfo);
    RequestParameterBuilder_exports.addApplicationTelemetry(parameters, this.config.telemetry.application);
    RequestParameterBuilder_exports.addThrottling(parameters);
    if (this.serverTelemetryManager) {
      RequestParameterBuilder_exports.addServerTelemetry(parameters, this.serverTelemetryManager);
    }
    const correlationId = request.correlationId || this.config.cryptoInterface.createNewGuid();
    RequestParameterBuilder_exports.addCorrelationId(parameters, correlationId);
    RequestParameterBuilder_exports.addRequestTokenUse(parameters, AADServerParamKeys_exports.ON_BEHALF_OF);
    RequestParameterBuilder_exports.addOboAssertion(parameters, request.oboAssertion);
    if (this.config.clientCredentials.clientSecret) {
      RequestParameterBuilder_exports.addClientSecret(parameters, this.config.clientCredentials.clientSecret);
    }
    const clientAssertion = this.config.clientCredentials.clientAssertion;
    if (clientAssertion) {
      RequestParameterBuilder_exports.addClientAssertion(parameters, await getClientAssertion(clientAssertion.assertion, this.config.authOptions.clientId, request.resourceRequestUri));
      RequestParameterBuilder_exports.addClientAssertionType(parameters, clientAssertion.assertionType);
    }
    if (request.claims || this.config.authOptions.clientCapabilities && this.config.authOptions.clientCapabilities.length > 0) {
      RequestParameterBuilder_exports.addClaims(parameters, request.claims, this.config.authOptions.clientCapabilities);
    }
    return UrlUtils_exports.mapToQueryString(parameters);
  }
};

// node_modules/@azure/msal-node/dist/client/ConfidentialClientApplication.mjs
var ConfidentialClientApplication = class extends ClientApplication {
  /**
   * Constructor for the ConfidentialClientApplication
   *
   * Required attributes in the Configuration object are:
   * - clientID: the application ID of your application. You can obtain one by registering your application with our application registration portal
   * - authority: the authority URL for your application.
   * - client credential: Must set either client secret, certificate, or assertion for confidential clients. You can obtain a client secret from the application registration portal.
   *
   * In Azure AD, authority is a URL indicating of the form https://login.microsoftonline.com/\{Enter_the_Tenant_Info_Here\}.
   * If your application supports Accounts in one organizational directory, replace "Enter_the_Tenant_Info_Here" value with the Tenant Id or Tenant name (for example, contoso.microsoft.com).
   * If your application supports Accounts in any organizational directory, replace "Enter_the_Tenant_Info_Here" value with organizations.
   * If your application supports Accounts in any organizational directory and personal Microsoft accounts, replace "Enter_the_Tenant_Info_Here" value with common.
   * To restrict support to Personal Microsoft accounts only, replace "Enter_the_Tenant_Info_Here" value with consumers.
   *
   * In Azure B2C, authority is of the form https://\{instance\}/tfp/\{tenant\}/\{policyName\}/
   * Full B2C functionality will be available in this library in future versions.
   *
   * @param Configuration - configuration object for the MSAL ConfidentialClientApplication instance
   */
  constructor(configuration) {
    var _a, _b, _c;
    super(configuration);
    const clientSecretNotEmpty = !!this.config.auth.clientSecret;
    const clientAssertionNotEmpty = !!this.config.auth.clientAssertion;
    const certificateNotEmpty = (!!((_a = this.config.auth.clientCertificate) == null ? void 0 : _a.thumbprint) || !!((_b = this.config.auth.clientCertificate) == null ? void 0 : _b.thumbprintSha256)) && !!((_c = this.config.auth.clientCertificate) == null ? void 0 : _c.privateKey);
    if (this.appTokenProvider) {
      return;
    }
    if (clientSecretNotEmpty && clientAssertionNotEmpty || clientAssertionNotEmpty && certificateNotEmpty || clientSecretNotEmpty && certificateNotEmpty) {
      throw createClientAuthError(ClientAuthErrorCodes_exports.invalidClientCredential);
    }
    if (this.config.auth.clientSecret) {
      this.clientSecret = this.config.auth.clientSecret;
      return;
    }
    if (this.config.auth.clientAssertion) {
      this.developerProvidedClientAssertion = this.config.auth.clientAssertion;
      return;
    }
    if (!certificateNotEmpty) {
      throw createClientAuthError(ClientAuthErrorCodes_exports.invalidClientCredential);
    } else {
      this.clientAssertion = !!this.config.auth.clientCertificate.thumbprintSha256 ? ClientAssertion.fromCertificateWithSha256Thumbprint(this.config.auth.clientCertificate.thumbprintSha256, this.config.auth.clientCertificate.privateKey, this.config.auth.clientCertificate.x5c) : ClientAssertion.fromCertificate(
        // guaranteed to be a string, due to prior error checking in this function
        this.config.auth.clientCertificate.thumbprint,
        this.config.auth.clientCertificate.privateKey,
        this.config.auth.clientCertificate.x5c
      );
    }
    this.appTokenProvider = void 0;
  }
  /**
   * This extensibility point only works for the client_credential flow, i.e. acquireTokenByClientCredential and
   * is meant for Azure SDK to enhance Managed Identity support.
   *
   * @param IAppTokenProvider  - Extensibility interface, which allows the app developer to return a token from a custom source.
   */
  SetAppTokenProvider(provider) {
    this.appTokenProvider = provider;
  }
  /**
   * Acquires tokens from the authority for the application (not for an end user).
   */
  async acquireTokenByClientCredential(request) {
    this.logger.info("acquireTokenByClientCredential called", request.correlationId);
    let clientAssertion;
    if (request.clientAssertion) {
      clientAssertion = {
        assertion: await getClientAssertion(
          request.clientAssertion,
          this.config.auth.clientId
          // tokenEndpoint will be undefined. resourceRequestUri is omitted in ClientCredentialRequest
        ),
        assertionType: Constants2.JWT_BEARER_ASSERTION_TYPE
      };
    }
    const baseRequest = await this.initializeBaseRequest(request);
    const validBaseRequest = {
      ...baseRequest,
      scopes: baseRequest.scopes.filter((scope) => !OIDC_DEFAULT_SCOPES.includes(scope))
    };
    const validRequest = {
      ...request,
      ...validBaseRequest,
      clientAssertion
    };
    const authority = new UrlString(validRequest.authority);
    const tenantId = authority.getUrlComponents().PathSegments[0];
    if (Object.values(AADAuthorityConstants).includes(tenantId)) {
      throw createClientAuthError(ClientAuthErrorCodes_exports.missingTenantIdError);
    }
    const ENV_MSAL_FORCE_REGION = process.env[MSAL_FORCE_REGION];
    let region;
    if (validRequest.azureRegion !== "DisableMsalForceRegion") {
      if (!validRequest.azureRegion && ENV_MSAL_FORCE_REGION) {
        region = ENV_MSAL_FORCE_REGION;
      } else {
        region = validRequest.azureRegion;
      }
    }
    const azureRegionConfiguration = {
      azureRegion: region,
      environmentRegion: process.env[REGION_ENVIRONMENT_VARIABLE]
    };
    const serverTelemetryManager = this.initializeServerTelemetryManager(ApiId.acquireTokenByClientCredential, validRequest.correlationId, validRequest.skipCache);
    try {
      const discoveredAuthority = await this.createAuthority(validRequest.authority, validRequest.correlationId, azureRegionConfiguration, request.azureCloudOptions);
      const clientCredentialConfig = await this.buildOauthClientConfiguration(discoveredAuthority, validRequest.correlationId, "", serverTelemetryManager);
      const clientCredentialClient = new ClientCredentialClient(clientCredentialConfig, this.appTokenProvider);
      this.logger.verbose("Client credential client created", validRequest.correlationId);
      return await clientCredentialClient.acquireToken(validRequest);
    } catch (e) {
      if (e instanceof AuthError) {
        e.setCorrelationId(validRequest.correlationId);
      }
      serverTelemetryManager.cacheFailedRequest(e);
      throw e;
    }
  }
  /**
   * Acquires tokens from the authority for the application.
   *
   * Used in scenarios where the current app is a middle-tier service which was called with a token
   * representing an end user. The current app can use the token (oboAssertion) to request another
   * token to access downstream web API, on behalf of that user.
   *
   * The current middle-tier app has no user interaction to obtain consent.
   * See how to gain consent upfront for your middle-tier app from this article.
   * https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-on-behalf-of-flow#gaining-consent-for-the-middle-tier-application
   */
  async acquireTokenOnBehalfOf(request) {
    this.logger.info("acquireTokenOnBehalfOf called", request.correlationId);
    const validRequest = {
      ...request,
      ...await this.initializeBaseRequest(request)
    };
    try {
      const discoveredAuthority = await this.createAuthority(validRequest.authority, validRequest.correlationId, void 0, request.azureCloudOptions);
      const onBehalfOfConfig = await this.buildOauthClientConfiguration(discoveredAuthority, validRequest.correlationId, "", void 0);
      const oboClient = new OnBehalfOfClient(onBehalfOfConfig);
      this.logger.verbose("On behalf of client created", validRequest.correlationId);
      return await oboClient.acquireToken(validRequest);
    } catch (e) {
      if (e instanceof AuthError) {
        e.setCorrelationId(validRequest.correlationId);
      }
      throw e;
    }
  }
};

// node_modules/@azure/msal-node/dist/utils/TimeUtils.mjs
function isIso8601(dateString) {
  if (typeof dateString !== "string") {
    return false;
  }
  const date = new Date(dateString);
  return !isNaN(date.getTime()) && date.toISOString() === dateString;
}

// node_modules/@azure/msal-node/dist/network/HttpClientWithRetries.mjs
var HttpClientWithRetries = class {
  constructor(httpClientNoRetries, retryPolicy) {
    this.httpClientNoRetries = httpClientNoRetries;
    this.retryPolicy = retryPolicy;
  }
  async sendNetworkRequestAsyncHelper(httpMethod, url, options) {
    if (httpMethod === HttpMethod.GET) {
      return this.httpClientNoRetries.sendGetRequestAsync(url, options);
    } else {
      return this.httpClientNoRetries.sendPostRequestAsync(url, options);
    }
  }
  async sendNetworkRequestAsync(httpMethod, url, options) {
    let response = await this.sendNetworkRequestAsyncHelper(httpMethod, url, options);
    let currentRetry = 0;
    while (await this.retryPolicy.pauseForRetry(response.status, currentRetry, response.headers[HeaderNames.RETRY_AFTER])) {
      response = await this.sendNetworkRequestAsyncHelper(httpMethod, url, options);
      currentRetry++;
    }
    return response;
  }
  async sendGetRequestAsync(url, options) {
    return this.sendNetworkRequestAsync(HttpMethod.GET, url, options);
  }
  async sendPostRequestAsync(url, options) {
    return this.sendNetworkRequestAsync(HttpMethod.POST, url, options);
  }
};

// node_modules/@azure/msal-node/dist/client/ManagedIdentitySources/BaseManagedIdentitySource.mjs
var ManagedIdentityUserAssignedIdQueryParameterNames = {
  MANAGED_IDENTITY_CLIENT_ID: "client_id",
  MANAGED_IDENTITY_OBJECT_ID: "object_id",
  MANAGED_IDENTITY_RESOURCE_ID_IMDS: "msi_res_id",
  MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS: "mi_res_id"
};
var BaseManagedIdentitySource = class {
  constructor(logger, nodeStorage, networkClient, cryptoProvider, disableInternalRetries) {
    this.logger = logger;
    this.nodeStorage = nodeStorage;
    this.networkClient = networkClient;
    this.cryptoProvider = cryptoProvider;
    this.disableInternalRetries = disableInternalRetries;
  }
  async getServerTokenResponseAsync(response, _networkClient, _networkRequest, _networkRequestOptions) {
    return this.getServerTokenResponse(response);
  }
  getServerTokenResponse(response) {
    var _a, _b;
    let refreshIn, expiresIn;
    if (response.body.expires_on) {
      if (isIso8601(response.body.expires_on)) {
        response.body.expires_on = new Date(response.body.expires_on).getTime() / 1e3;
      }
      expiresIn = response.body.expires_on - TimeUtils_exports.nowSeconds();
      if (expiresIn > 2 * 3600) {
        refreshIn = expiresIn / 2;
      }
    }
    const serverTokenResponse = {
      status: response.status,
      // success
      access_token: response.body.access_token,
      expires_in: expiresIn,
      scope: response.body.resource,
      token_type: response.body.token_type,
      refresh_in: refreshIn,
      // error
      correlation_id: response.body.correlation_id || response.body.correlationId,
      error: typeof response.body.error === "string" ? response.body.error : (_a = response.body.error) == null ? void 0 : _a.code,
      error_description: response.body.message || (typeof response.body.error === "string" ? response.body.error_description : (_b = response.body.error) == null ? void 0 : _b.message),
      error_codes: response.body.error_codes,
      timestamp: response.body.timestamp,
      trace_id: response.body.trace_id
    };
    return serverTokenResponse;
  }
  async acquireTokenWithManagedIdentity(managedIdentityRequest, managedIdentityId, fakeAuthority, refreshAccessToken) {
    const networkRequest = this.createRequest(managedIdentityRequest.resource, managedIdentityId);
    const headers = networkRequest.headers;
    headers[HeaderNames.CONTENT_TYPE] = Constants.URL_FORM_CONTENT_TYPE;
    const networkRequestOptions = { headers };
    if (Object.keys(networkRequest.bodyParameters).length) {
      networkRequestOptions.body = networkRequest.computeParametersBodyString();
    }
    const networkClientHelper = this.disableInternalRetries ? this.networkClient : new HttpClientWithRetries(this.networkClient, networkRequest.retryPolicy);
    const reqTimestamp = TimeUtils_exports.nowSeconds();
    let response;
    try {
      if (networkRequest.httpMethod === HttpMethod.POST) {
        response = await networkClientHelper.sendPostRequestAsync(networkRequest.computeUri(), networkRequestOptions);
      } else {
        response = await networkClientHelper.sendGetRequestAsync(networkRequest.computeUri(), networkRequestOptions);
      }
    } catch (error) {
      if (error instanceof AuthError) {
        throw error;
      } else {
        throw createClientAuthError(ClientAuthErrorCodes_exports.networkError);
      }
    }
    const responseHandler = new ResponseHandler(managedIdentityId.id, this.nodeStorage, this.cryptoProvider, this.logger, null, null);
    const serverTokenResponse = await this.getServerTokenResponseAsync(response, networkClientHelper, networkRequest, networkRequestOptions);
    responseHandler.validateTokenResponse(serverTokenResponse, refreshAccessToken);
    return responseHandler.handleServerTokenResponse(serverTokenResponse, fakeAuthority, reqTimestamp, managedIdentityRequest);
  }
  getManagedIdentityUserAssignedIdQueryParameterKey(managedIdentityIdType, imds) {
    switch (managedIdentityIdType) {
      case ManagedIdentityIdType.USER_ASSIGNED_CLIENT_ID:
        this.logger.info("[Managed Identity] Adding user assigned client id to the request.");
        return ManagedIdentityUserAssignedIdQueryParameterNames.MANAGED_IDENTITY_CLIENT_ID;
      case ManagedIdentityIdType.USER_ASSIGNED_RESOURCE_ID:
        this.logger.info("[Managed Identity] Adding user assigned resource id to the request.");
        return imds ? ManagedIdentityUserAssignedIdQueryParameterNames.MANAGED_IDENTITY_RESOURCE_ID_IMDS : ManagedIdentityUserAssignedIdQueryParameterNames.MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS;
      case ManagedIdentityIdType.USER_ASSIGNED_OBJECT_ID:
        this.logger.info("[Managed Identity] Adding user assigned object id to the request.");
        return ManagedIdentityUserAssignedIdQueryParameterNames.MANAGED_IDENTITY_OBJECT_ID;
      default:
        throw createManagedIdentityError(invalidManagedIdentityIdType);
    }
  }
};
BaseManagedIdentitySource.getValidatedEnvVariableUrlString = (envVariableStringName, envVariable, sourceName, logger) => {
  try {
    return new UrlString(envVariable).urlString;
  } catch (error) {
    logger.info(`[Managed Identity] ${sourceName} managed identity is unavailable because the '${envVariableStringName}' environment variable is malformed.`);
    throw createManagedIdentityError(MsiEnvironmentVariableUrlMalformedErrorCodes[envVariableStringName]);
  }
};

// node_modules/@azure/msal-node/dist/client/ManagedIdentitySources/AzureArc.mjs
var import_fs = require("fs");
var import_path = __toESM(require("path"), 1);
var SUPPORTED_AZURE_ARC_PLATFORMS = {
  win32: `${process.env["ProgramData"]}\\AzureConnectedMachineAgent\\Tokens\\`,
  linux: "/var/opt/azcmagent/tokens/"
};
var AZURE_ARC_FILE_DETECTION = {
  win32: `${process.env["ProgramFiles"]}\\AzureConnectedMachineAgent\\himds.exe`,
  linux: "/opt/azcmagent/bin/himds"
};

// node_modules/@azure/msal-node/dist/client/ManagedIdentitySources/Imds.mjs
var IMDS_TOKEN_PATH = "/metadata/identity/oauth2/token";
var DEFAULT_IMDS_ENDPOINT = `http://169.254.169.254${IMDS_TOKEN_PATH}`;

// src/auth.ts
var import_remote = __toESM(require_renderer2());
var fs = __toESM(require("fs"));
var AUTHORITY = "https://login.microsoftonline.com/consumers";
var REDIRECT_URI2 = "http://localhost:5000";
var SCOPES = ["Tasks.ReadWrite", "offline_access"];
var AuthManager = class {
  /**
   * Creates an instance of AuthManager.
   * @param clientId - The client ID of your Azure AD application.
   * @param clientSecret - The client secret of your Azure AD application.
   * @param redirectUrl - The redirect URL registered in your Azure AD app.
   * @param tokenFilePath - Path to the file where the token cache will be stored.
   */
  constructor(clientId, clientSecret, redirectUrl, tokenFilePath) {
    this.clientId = clientId;
    this.clientSecret = clientSecret;
    this.redirectUrl = redirectUrl;
    this.tokenFilePath = tokenFilePath;
    this.initClient();
  }
  /**
   * Initializes the MSAL client with the given configuration.
   */
  initClient() {
    const config2 = {
      auth: {
        clientId: this.clientId,
        authority: AUTHORITY,
        clientSecret: this.clientSecret
      }
    };
    this.cca = new ConfidentialClientApplication(config2);
  }
  /**
   * Saves the current token cache to disk.
   */
  saveTokenCache() {
    const tokenCacheSerialized = this.cca.getTokenCache().serialize();
    fs.writeFileSync(this.tokenFilePath, tokenCacheSerialized);
  }
  /**
   * Performs an interactive login to acquire an access token.
   * Opens a BrowserWindow to let the user sign in.
   * @returns A promise that resolves with an object containing a valid access token.
   */
  async getAccessToken() {
    return new Promise((resolve, reject) => {
      const authUrl = `${AUTHORITY}/oauth2/v2.0/authorize?client_id=${this.clientId}&response_type=code&redirect_uri=${encodeURIComponent(REDIRECT_URI2)}&response_mode=query&scope=${encodeURIComponent(SCOPES.join(" "))}&prompt=consent`;
      const authWindow = new import_remote.BrowserWindow({
        width: 600,
        height: 700,
        webPreferences: {
          nodeIntegration: false,
          contextIsolation: true
        }
      });
      authWindow.loadURL(authUrl);
      authWindow.webContents.on("will-redirect", async (event, url) => {
        try {
          const redirectURL = new URL(url);
          const error = redirectURL.searchParams.get("error");
          if (error) throw new Error("OAuth error: " + error);
          const authCode = redirectURL.searchParams.get("code");
          if (!authCode) return;
          event.preventDefault();
          authWindow.close();
          const tokenRequest = {
            code: authCode,
            scopes: SCOPES,
            redirectUri: REDIRECT_URI2
          };
          const tokenResponse = await this.cca.acquireTokenByCode(tokenRequest);
          if (!tokenResponse)
            throw new Error("No token response received.");
          this.saveTokenCache();
          resolve({ accessToken: tokenResponse.accessToken });
        } catch (err) {
          if (!authWindow.isDestroyed()) authWindow.close();
          reject(err);
        }
      });
    });
  }
  /**
   * Refreshes the access token using the refresh token stored in the token cache.
   * @returns A promise that resolves with an object containing a new access token.
   */
  async refreshAccessTokenWithCCA() {
    if (!fs.existsSync(this.tokenFilePath)) {
      throw new Error("No token cache found. Please login first.");
    }
    const cacheData = fs.readFileSync(this.tokenFilePath, "utf8");
    this.cca.getTokenCache().deserialize(cacheData);
    const tokenCacheSerialized = this.cca.getTokenCache().serialize();
    const parsedCache = JSON.parse(tokenCacheSerialized);
    if (!parsedCache.RefreshToken) {
      throw new Error("No refresh token found in the cache.");
    }
    const refreshTokenObject = parsedCache.RefreshToken;
    const refreshTokenKey = Object.keys(refreshTokenObject)[0];
    const refreshToken = refreshTokenObject[refreshTokenKey].secret;
    const tokenRequest = {
      refreshToken,
      scopes: SCOPES,
      redirectUri: REDIRECT_URI2
    };
    try {
      const tokenResponse = await this.cca.acquireTokenByRefreshToken(tokenRequest);
      if (!tokenResponse)
        throw new Error("No token response received from refresh.");
      this.saveTokenCache();
      return { accessToken: tokenResponse.accessToken };
    } catch (error) {
      throw error;
    }
  }
  /**
   * Returns a valid access token by checking the token cache.
   * If a token is available, it refreshes it; otherwise, it performs an interactive login.
   * @returns A promise that resolves with an object containing a valid access token.
   */
  async getToken() {
    if (fs.existsSync(this.tokenFilePath)) {
      return this.refreshAccessTokenWithCCA();
    } else {
      return this.getAccessToken();
    }
  }
};

// src/task-title-modal.ts
var import_obsidian5 = require("obsidian");
var TaskTitleModal = class extends import_obsidian5.Modal {
  /**
   * Constructs the modal.
   * @param app - The Obsidian app instance.
   * @param onSubmit - A callback that receives the entered task title.
   */
  constructor(app, onSubmit) {
    super(app);
    this.onSubmit = onSubmit;
  }
  /**
   * Called when the modal is opened. Renders the input UI and centers it.
   */
  onOpen() {
    const { contentEl } = this;
    contentEl.style.display = "flex";
    contentEl.style.flexDirection = "column";
    contentEl.style.alignItems = "center";
    contentEl.style.justifyContent = "center";
    contentEl.style.gap = "10px";
    contentEl.style.minHeight = "100px";
    contentEl.createEl("h2", { text: "Enter Task Title" });
    const inputEl = contentEl.createEl("input", {
      type: "text",
      placeholder: "Task Title"
    });
    inputEl.style.width = "100%";
    inputEl.focus();
    inputEl.onkeydown = (e) => {
      if (e.key === "Enter") {
        this.result = inputEl.value;
        this.close();
        this.onSubmit(this.result);
      }
    };
  }
  /**
   * Called when the modal is closed. Clears the content.
   */
  onClose() {
    this.contentEl.empty();
  }
};

// src/select-modal.ts
var import_obsidian6 = require("obsidian");
var GenericSelectModal = class extends import_obsidian6.FuzzySuggestModal {
  constructor(app, items, getText, onSelect) {
    super(app);
    this.items = items;
    this.getText = getText;
    this.onSelect = onSelect;
  }
  getItems() {
    return this.items;
  }
  getItemText(item) {
    return this.getText(item);
  }
  async onChooseItem(item) {
    await this.onSelect(item);
  }
};

// src/main.ts
var TaskSyncerPlugin = class extends import_obsidian7.Plugin {
  constructor() {
    super(...arguments);
    this.sidebarView = null;
    this.taskCache = null;
  }
  /**
   * Called when the plugin is activated.
   * Loads environment variables, settings, registers views and commands, and initializes authentication.
   */
  async onload() {
    const basePath = this.app.vault.adapter.basePath;
    const pluginPath = path2.join(
      basePath,
      ".obsidian/plugins/sync-obsidian-todo-plugin"
    );
    dotenv.config({ path: path2.join(pluginPath, ".env"), override: true });
    await this.loadSettings();
    this.addSettingTab(new MyTodoSettingTab(this.app, this));
    this.registerView(VIEW_TYPE_TODO_SIDEBAR, (leaf) => {
      const view = new TaskSidebarView(leaf, this);
      this.sidebarView = view;
      return view;
    });
    this.initializeCommand();
    this.tokenFilePath = `${pluginPath}/token_cache.json`;
    if (this.settings.clientId && this.settings.clientSecret) {
      this.authManager = new AuthManager(
        this.settings.clientId,
        this.settings.clientSecret,
        this.settings.redirectUrl,
        this.tokenFilePath
      );
    }
    if (fs2.existsSync(this.tokenFilePath)) {
      const cacheData = fs2.readFileSync(this.tokenFilePath, "utf8");
      this.authManager.cca.getTokenCache().deserialize(cacheData);
      console.log("Token cache loaded from file.");
    }
    this.injectStyles();
  }
  /**
   * Initializes the MSAL client and registers commands/ribbon icons.
   */
  initializeCommand() {
    this.addCommand({
      id: "open-microsoft-todo-sidebar",
      name: "Open Microsoft To-Do Sidebar",
      callback: async () => {
        this.activateSidebar();
      }
    });
    this.addCommand({
      id: "login-microsoft-todo",
      name: "Login to Microsoft To-Do (Interactive)",
      callback: async () => {
        try {
          notify("Logging in...");
          await this.authManager.getAccessToken();
          notify("Logged in successfully!", "success");
        } catch (error) {
          console.error("Authentication error:", error);
          notify(
            "Error logining in! Check the console for details.",
            "error"
          );
        }
      }
    });
    this.addCommand({
      id: "refresh-microsoft-todo-token",
      name: "Refresh Microsoft To-Do Token",
      callback: async () => {
        try {
          const tokenData = await this.authManager.refreshAccessTokenWithCCA();
          notify("Token refreshed successfully!", "success");
          console.log("New Access Token:", tokenData.accessToken);
        } catch (error) {
          console.error("Error refreshing token:", error);
          notify(
            "Error refreshing token. Check the console for details.",
            "error"
          );
        }
      }
    });
    this.addCommand({
      id: "get-tasks-from-selected-list",
      name: "Get Tasks from Selected List",
      callback: async () => {
        try {
          notify("Fetching tasks...");
          await this.getTasksFromSelectedList();
          notify("Tasks fetched successfully!", "success");
        } catch (error) {
          console.error(
            "Error fetching tasks from selected list:",
            error
          );
          notify(
            "Error fetching tasks. Check the console for details.",
            "error"
          );
        }
      }
    });
    this.addCommand({
      id: "push-all-tasks-from-note",
      name: "Push All Tasks from Note to Microsoft To-Do",
      callback: async () => {
        try {
          notify("Syncing tasks to Microsoft To-Do...");
          const tasksCount = await this.pushTasksFromNote();
          notify(
            `Tasks synced successfully! ${tasksCount} new tasks added.`,
            "success"
          );
          await this.refreshViewAndCache();
        } catch (error) {
          console.error("Error pushing tasks:", error);
          notify(
            "Error pushing tasks. Check the console for details.",
            "error"
          );
        }
      }
    });
    this.addCommand({
      id: "push-one-task",
      name: "Create and push Task",
      callback: async () => {
        new TaskTitleModal(this.app, async (taskTitle) => {
          try {
            notify("Pushing tasks to Microsoft To-Do...");
            await this.pushOneTask(taskTitle);
            notify(`Tasks pushed successfully!`, "success");
          } catch (error) {
            console.error("Error pushing tasks:", error);
            notify(
              "Error pushing tasks. Check the console for details.",
              "error"
            );
          }
        }).open();
      }
    });
    this.addCommand({
      id: "show-not-started-tasks",
      name: "Show Tasks List",
      callback: async () => {
        try {
          await this.openTaskCompleteModal();
        } catch (error) {
          console.error("Error completing task:", error);
          notify(
            "Error completing task. Check the console for details.",
            "error"
          );
        }
      }
    });
    this.addCommand({
      id: "select-task-list",
      name: "Select Task List",
      callback: async () => {
        try {
          notify("Selecting task list...");
          await this.openTaskListsModal();
          notify("Task list selected successfully!", "success");
        } catch (error) {
          console.error("Error selecting task list:", error);
          notify(
            "Error selecting task list. Check the console for details.",
            "error"
          );
        }
      }
    });
    this.addCommand({
      id: "organize-tasks",
      name: "Organize Tasks from All Notes",
      callback: async () => {
        try {
          await this.gatherTasks();
          notify("Tasks organized successfully!", "success");
        } catch (error) {
          console.error("Error organizing tasks:", error);
          notify(
            "Error organizing tasks. Check the console for details.",
            "error"
          );
        }
      }
    });
    this.addCommand({
      id: "delete-completed-tasks",
      name: "Delete Completed Tasks",
      callback: async () => {
        try {
          notify("Deleting completed tasks...");
          const deletedCount = await this.deleteAllCompletedTasks();
          notify(
            `${deletedCount} completed tasks deleted successfully!`,
            "success"
          );
        } catch (error) {
          console.error("Error deleting completed tasks:", error);
          notify(
            "Error deleting tasks. Check the console for details.",
            "error"
          );
        }
      }
    });
    this.addCommand({
      id: "testing",
      name: "Testing",
      callback: async () => {
        try {
          console.log("Testing");
          notify("Testing...", "success");
        } catch (error) {
          console.error("Error testing:", error);
        }
      }
    });
  }
  /**
   * Injects custom CSS styles into the document.
   */
  injectStyles() {
    const style = document.createElement("style");
    style.textContent = `
		.task-line {
			display: flex;
			align-items: center;
			gap: 8px;
			padding: 2px 0;
		}

		.task-line input[type="checkbox"] {
			margin: 0;
			transform: scale(1.1);
		}

		.task-line span {
			font-size: 14px;
		}
	`;
    document.head.appendChild(style);
  }
  /**
   * Activates the sidebar view.
   */
  async activateSidebar() {
    const rightLeaf = this.app.workspace.getRightLeaf(false);
    if (!rightLeaf) {
      console.warn("No right leaf available.");
      return;
    }
    await rightLeaf.setViewState({
      type: VIEW_TYPE_TODO_SIDEBAR,
      active: true
    });
    this.app.workspace.revealLeaf(rightLeaf);
  }
  /**
   * Loads plugin settings from the Obsidian vault.
   */
  async loadSettings() {
    this.settings = Object.assign(
      {},
      DEFAULT_SETTINGS,
      await this.loadData()
    );
  }
  /**
   * Saves plugin settings to the Obsidian vault.
   */
  async saveSettings() {
    await this.saveData(this.settings);
  }
  async getAccessToken() {
    try {
      const tokenData = await this.authManager.getToken();
      return tokenData.accessToken;
    } catch (error) {
      console.error("Error fetching access token:", error);
      throw error;
    }
  }
  /**
   * Fetches available Microsoft To-Do task lists and updates the plugin settings.
   */
  async loadAvailableTaskLists() {
    notify("Loading task lists...");
    try {
      const accessToken = await this.getAccessToken();
      const listArray = await fetchTaskLists(accessToken);
      console.log("Fetched Task Lists:", listArray);
      this.settings.taskLists = listArray.map((list) => ({
        id: list.id,
        title: list.title
      }));
      notify("Task lists loaded successfully!", "success");
    } catch (err) {
      console.error("Error loading task lists:", err);
      notify(
        "Error loading task lists. Check the console for details.",
        "error"
      );
    }
  }
  /**
   * Get task lists using access token with fetchTaskLists api function.
   * @returns A TaskList interface with fetched task lists.
   * */
  async getTaskLists() {
    try {
      const accessToken = await this.getAccessToken();
      const taskLists = await fetchTaskLists(accessToken);
      return taskLists;
    } catch (error) {
      console.error("Error fetching task lists:", error);
      throw error;
    }
  }
  /**
   * Fetches tasks from the selected Microsoft To‑Do list.
   * @returns A map of task title to an object containing task details.
   */
  async getTasksFromSelectedList() {
    if (!this.settings.selectedTaskListId) {
      throw new Error(
        "No task list selected. Please choose one in settings."
      );
    }
    if (this.taskCache && this.taskCache.tasks) {
      console.log("Using cached tasks:", this.taskCache.tasks);
      return new Map(this.taskCache.tasks);
    }
    try {
      console.log("No cached tasks found, refreshing task cache.");
      return await this.refreshTaskCache();
    } catch (error) {
      console.error("Error fetching tasks:", error);
      throw error;
    }
  }
  /**
   * Pushes tasks from the active note to Microsoft To‑Do.
   * @returns The number of new tasks created.
   */
  async pushTasksFromNote() {
    if (!this.settings.selectedTaskListId) {
      throw new Error(
        "No task list selected. Please choose one in settings."
      );
    }
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) {
      throw new Error("No active file found.");
    }
    const fileContent = await this.app.vault.read(activeFile);
    const taskRegex = /^-\s*\[( |x)\]\s+(.+)$/gm;
    const noteTasks = [];
    let match;
    while ((match = taskRegex.exec(fileContent)) !== null) {
      const complete = match[1] === "x";
      const title = match[2].trim();
      noteTasks.push({ title, complete });
    }
    if (noteTasks.length === 0) {
      throw new Error("No tasks found in the active note.");
    }
    try {
      const accessToken = await this.getAccessToken();
      const existingTasks = await fetchTasks(this.settings, accessToken);
      let newTasksCount = 0;
      for (const task of noteTasks) {
        const existingTask = existingTasks.get(task.title);
        if (existingTask) {
          if (task.complete && existingTask.status !== "completed") {
            await updateTask(
              this.settings,
              accessToken,
              existingTask.id,
              true
            );
          } else {
            console.log(`Task already exists: ${task.title}`);
          }
          continue;
        }
        const initialStatus = task.complete ? "completed" : "notStarted";
        await createTask(
          this.settings,
          accessToken,
          task.title,
          initialStatus
        );
        newTasksCount++;
      }
      console.log("Synced Tasks:", noteTasks);
      return newTasksCount;
    } catch (error) {
      console.error("Error syncing tasks:", error);
      throw error;
    }
  }
  /**
   * Pushes a single task to selected list in Microsoft To‑Do.
   * @param task - The task title text to push.
   */
  async pushOneTask(task) {
    if (!this.settings.selectedTaskListId) {
      throw new Error(
        "No task list selected. Please choose one in settings."
      );
    }
    try {
      const accessToken = await this.getAccessToken();
      const existingTasks = await fetchTasks(this.settings, accessToken);
      const existingTask = existingTasks.get(task);
      if (existingTask) {
        console.log(`Task already exists: ${task}`);
      }
      await createTask(this.settings, accessToken, task);
      await this.refreshViewAndCache();
      console.log("Synced Tasks:", task);
    } catch (error) {
      console.error("Error syncing tasks:", error);
      throw error;
    }
  }
  /**
   * Gathers tasks from all markdown files in the vault and updates (or creates) a consolidated note.
   * @returns A map of task text to its current state.
   */
  async gatherTasks() {
    const noteName = "Tasks List.md";
    const markdownFiles = this.app.vault.getMarkdownFiles();
    const tasksMap = /* @__PURE__ */ new Map();
    const taskRegex = /^\s*-\s*\[( |x)\]\s+(.*)$/gm;
    for (const file of markdownFiles) {
      const content = await this.app.vault.read(file);
      let match;
      while ((match = taskRegex.exec(content)) !== null) {
        const currentState = match[1] === "x" ? "[x]" : "[ ]";
        const taskText = match[2].trim();
        if (tasksMap.has(taskText)) {
          if (currentState === "[x]") {
            tasksMap.set(taskText, "[x]");
          }
        } else {
          tasksMap.set(taskText, currentState);
        }
      }
    }
    const finalTasks = Array.from(tasksMap.entries()).map(
      ([taskText, state]) => `- ${state} ${taskText}`
    );
    const newContent = finalTasks.join("\n");
    const targetFile = this.app.vault.getAbstractFileByPath(noteName);
    if (!targetFile) {
      await this.app.vault.create(noteName, newContent);
    } else if (targetFile instanceof import_obsidian7.TFile) {
      await this.app.vault.modify(targetFile, newContent);
    } else {
      throw new Error("Unexpected file type for Tasks List");
    }
    return tasksMap;
  }
  /**
   * Open a interactive window for the user to interact and select a target task list.
   */
  async openTaskListsModal() {
    const tasksLists = this.settings.taskLists;
    console.log("Task Lists:", tasksLists);
    new GenericSelectModal(
      this.app,
      tasksLists,
      (taskList) => taskList.title,
      async (taskList) => {
        this.settings.selectedTaskListId = taskList.id;
        await this.saveSettings();
        await this.refreshViewAndCache();
      }
    ).open();
  }
  /**
   * Open a interactive window for the user to interact and select to complete task items.
   */
  async openTaskCompleteModal() {
    const tasksMap = await this.getTasksFromSelectedList();
    const notStartedTasks = Array.from(tasksMap.values()).filter(
      (task) => task.status !== "completed"
    );
    new GenericSelectModal(
      this.app,
      notStartedTasks,
      (task) => task.status !== "completed" ? task.title : "",
      async (task) => {
        const accessToken = await this.getAccessToken();
        await updateTask(this.settings, accessToken, task.id, true);
        notify(
          `Task "${task.title}" marked as complete and synced.`,
          "success"
        );
        await this.refreshViewAndCache();
      }
    ).open();
  }
  /**
   * Fetch task using api function and store in the cache for quick access.
   */
  async refreshTaskCache() {
    if (!this.settings.selectedTaskListId) {
      throw new Error(
        "No task list selected. Please choose one in settings."
      );
    }
    try {
      const accessToken = await this.getAccessToken();
      const tasks = await fetchTasks(this.settings, accessToken);
      console.log("Fetched Tasks:", tasks);
      const currentData = await this.loadData() || {};
      currentData.tasks = Array.from(tasks.entries());
      this.taskCache = currentData;
      await this.saveData(currentData);
      return tasks;
    } catch (error) {
      console.error("Error fetching tasks:", error);
      throw error;
    }
  }
  /**
   * Use the deleteTask api function to delete all completed task in the targeted task list.
   * @returns Amount of deleted tasks.
   */
  async deleteAllCompletedTasks() {
    if (!this.settings.selectedTaskListId) {
      throw new Error(
        "No task list selected. Please choose one in settings."
      );
    }
    let deletedTasksCount = 0;
    try {
      const accessToken = await this.getAccessToken();
      const tasks = await this.getTasksFromSelectedList();
      const completedTasks = Array.from(tasks.values()).filter(
        (task) => task.status === "completed"
      );
      for (const task of completedTasks) {
        console.log("Deleting Task:", task);
        await deleteTask(this.settings, accessToken, task.id);
        deletedTasksCount++;
      }
      this.refreshViewAndCache();
      return deletedTasksCount;
    } catch (error) {
      console.error("Error deleting tasks:", error);
      return deletedTasksCount;
    }
  }
  /**
   * Refreshes the sidebar view and task cache to display the latest tasks.
   */
  async refreshViewAndCache() {
    const tasks = await this.refreshTaskCache();
    if (this.sidebarView) {
      await this.sidebarView.render(tasks);
    } else {
      console.warn("Sidebar view is not active.");
    }
  }
};
/*! Bundled license information:

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@azure/msal-node/dist/cache/serializer/Serializer.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-common/dist/utils/Constants.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/error/AuthErrorCodes.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/error/AuthError.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/error/ClientAuthErrorCodes.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/error/ClientAuthError.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/crypto/ICrypto.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/logger/Logger.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/packageMetadata.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/authority/AuthorityOptions.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/account/AuthToken.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/utils/TimeUtils.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/cache/utils/CacheHelpers.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/error/ClientConfigurationErrorCodes.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/error/ClientConfigurationError.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/utils/StringUtils.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/request/ScopeSet.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/account/ClientInfo.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/account/AccountInfo.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/authority/AuthorityType.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/account/TokenClaims.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/authority/ProtocolMode.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/cache/entities/AccountEntity.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/utils/UrlUtils.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/url/UrlString.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/authority/AuthorityMetadata.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/error/CacheErrorCodes.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/error/CacheError.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/cache/CacheManager.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/config/ClientConfiguration.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/account/CcsCredential.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/constants/AADServerParamKeys.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/request/RequestParameterBuilder.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/authority/OpenIdConfigResponse.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/authority/CloudInstanceDiscoveryResponse.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/authority/CloudInstanceDiscoveryErrorResponse.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/telemetry/performance/PerformanceEvent.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/utils/FunctionWrappers.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/authority/RegionDiscovery.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/authority/Authority.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/authority/AuthorityFactory.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/error/ServerError.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/network/RequestThumbprint.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/network/ThrottlingUtils.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/error/NetworkError.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/client/BaseClient.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/error/InteractionRequiredAuthErrorCodes.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/error/InteractionRequiredAuthError.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/utils/ProtocolUtils.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/crypto/PopTokenGenerator.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/cache/persistence/TokenCacheContext.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/response/ResponseHandler.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/request/RequestValidator.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/utils/ClientAssertionUtils.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/client/AuthorizationCodeClient.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/client/RefreshTokenClient.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/client/SilentFlowClient.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/protocol/Authorize.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/telemetry/server/ServerTelemetryManager.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/index-node.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-node/dist/cache/serializer/Deserializer.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/internals.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/utils/Constants.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/utils/NetworkUtils.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/network/HttpClient.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/error/ManagedIdentityErrorCodes.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/error/ManagedIdentityError.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/config/ManagedIdentityId.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/error/NodeAuthError.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/config/Configuration.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/crypto/GuidGenerator.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/utils/EncodingUtils.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/crypto/HashUtils.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/crypto/PkceGenerator.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/crypto/CryptoProvider.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/cache/NodeStorage.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/cache/TokenCache.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/ClientAssertion.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/packageMetadata.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/UsernamePasswordClient.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/protocol/Authorize.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/ClientApplication.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/network/LoopbackClient.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/DeviceCodeClient.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/PublicClientApplication.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/ClientCredentialClient.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/OnBehalfOfClient.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/ConfidentialClientApplication.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/utils/TimeUtils.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/network/HttpClientWithRetries.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/ManagedIdentitySources/BaseManagedIdentitySource.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/retry/LinearRetryPolicy.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/config/ManagedIdentityRequestParameters.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/ManagedIdentitySources/AppService.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/ManagedIdentitySources/AzureArc.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/ManagedIdentitySources/CloudShell.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/ManagedIdentitySources/Imds.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/ManagedIdentitySources/ServiceFabric.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/ManagedIdentitySources/MachineLearning.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/ManagedIdentityClient.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/ManagedIdentityApplication.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/cache/distributed/DistributedCachePlugin.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/index.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)
*/
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL2RvdGVudi9wYWNrYWdlLmpzb24iLCAibm9kZV9tb2R1bGVzL2RvdGVudi9saWIvbWFpbi5qcyIsICJub2RlX21vZHVsZXMvc2FmZS1idWZmZXIvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL2p3cy9saWIvZGF0YS1zdHJlYW0uanMiLCAibm9kZV9tb2R1bGVzL2J1ZmZlci1lcXVhbC1jb25zdGFudC10aW1lL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9lY2RzYS1zaWctZm9ybWF0dGVyL3NyYy9wYXJhbS1ieXRlcy1mb3ItYWxnLmpzIiwgIm5vZGVfbW9kdWxlcy9lY2RzYS1zaWctZm9ybWF0dGVyL3NyYy9lY2RzYS1zaWctZm9ybWF0dGVyLmpzIiwgIm5vZGVfbW9kdWxlcy9qd2EvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL2p3cy9saWIvdG9zdHJpbmcuanMiLCAibm9kZV9tb2R1bGVzL2p3cy9saWIvc2lnbi1zdHJlYW0uanMiLCAibm9kZV9tb2R1bGVzL2p3cy9saWIvdmVyaWZ5LXN0cmVhbS5qcyIsICJub2RlX21vZHVsZXMvandzL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9qc29ud2VidG9rZW4vZGVjb2RlLmpzIiwgIm5vZGVfbW9kdWxlcy9qc29ud2VidG9rZW4vbGliL0pzb25XZWJUb2tlbkVycm9yLmpzIiwgIm5vZGVfbW9kdWxlcy9qc29ud2VidG9rZW4vbGliL05vdEJlZm9yZUVycm9yLmpzIiwgIm5vZGVfbW9kdWxlcy9qc29ud2VidG9rZW4vbGliL1Rva2VuRXhwaXJlZEVycm9yLmpzIiwgIm5vZGVfbW9kdWxlcy9tcy9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvanNvbndlYnRva2VuL2xpYi90aW1lc3Bhbi5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL2ludGVybmFsL2NvbnN0YW50cy5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL2ludGVybmFsL2RlYnVnLmpzIiwgIm5vZGVfbW9kdWxlcy9zZW12ZXIvaW50ZXJuYWwvcmUuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9pbnRlcm5hbC9wYXJzZS1vcHRpb25zLmpzIiwgIm5vZGVfbW9kdWxlcy9zZW12ZXIvaW50ZXJuYWwvaWRlbnRpZmllcnMuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9jbGFzc2VzL3NlbXZlci5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL2Z1bmN0aW9ucy9wYXJzZS5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL2Z1bmN0aW9ucy92YWxpZC5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL2Z1bmN0aW9ucy9jbGVhbi5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL2Z1bmN0aW9ucy9pbmMuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9mdW5jdGlvbnMvZGlmZi5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL2Z1bmN0aW9ucy9tYWpvci5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL2Z1bmN0aW9ucy9taW5vci5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL2Z1bmN0aW9ucy9wYXRjaC5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL2Z1bmN0aW9ucy9wcmVyZWxlYXNlLmpzIiwgIm5vZGVfbW9kdWxlcy9zZW12ZXIvZnVuY3Rpb25zL2NvbXBhcmUuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9mdW5jdGlvbnMvcmNvbXBhcmUuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9mdW5jdGlvbnMvY29tcGFyZS1sb29zZS5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL2Z1bmN0aW9ucy9jb21wYXJlLWJ1aWxkLmpzIiwgIm5vZGVfbW9kdWxlcy9zZW12ZXIvZnVuY3Rpb25zL3NvcnQuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9mdW5jdGlvbnMvcnNvcnQuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9mdW5jdGlvbnMvZ3QuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9mdW5jdGlvbnMvbHQuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9mdW5jdGlvbnMvZXEuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9mdW5jdGlvbnMvbmVxLmpzIiwgIm5vZGVfbW9kdWxlcy9zZW12ZXIvZnVuY3Rpb25zL2d0ZS5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL2Z1bmN0aW9ucy9sdGUuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9mdW5jdGlvbnMvY21wLmpzIiwgIm5vZGVfbW9kdWxlcy9zZW12ZXIvZnVuY3Rpb25zL2NvZXJjZS5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL2ludGVybmFsL2xydWNhY2hlLmpzIiwgIm5vZGVfbW9kdWxlcy9zZW12ZXIvY2xhc3Nlcy9yYW5nZS5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL2NsYXNzZXMvY29tcGFyYXRvci5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL2Z1bmN0aW9ucy9zYXRpc2ZpZXMuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9yYW5nZXMvdG8tY29tcGFyYXRvcnMuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9yYW5nZXMvbWF4LXNhdGlzZnlpbmcuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9yYW5nZXMvbWluLXNhdGlzZnlpbmcuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9yYW5nZXMvbWluLXZlcnNpb24uanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9yYW5nZXMvdmFsaWQuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9yYW5nZXMvb3V0c2lkZS5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL3Jhbmdlcy9ndHIuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9yYW5nZXMvbHRyLmpzIiwgIm5vZGVfbW9kdWxlcy9zZW12ZXIvcmFuZ2VzL2ludGVyc2VjdHMuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9yYW5nZXMvc2ltcGxpZnkuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9yYW5nZXMvc3Vic2V0LmpzIiwgIm5vZGVfbW9kdWxlcy9zZW12ZXIvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL2pzb253ZWJ0b2tlbi9saWIvYXN5bW1ldHJpY0tleURldGFpbHNTdXBwb3J0ZWQuanMiLCAibm9kZV9tb2R1bGVzL2pzb253ZWJ0b2tlbi9saWIvcnNhUHNzS2V5RGV0YWlsc1N1cHBvcnRlZC5qcyIsICJub2RlX21vZHVsZXMvanNvbndlYnRva2VuL2xpYi92YWxpZGF0ZUFzeW1tZXRyaWNLZXkuanMiLCAibm9kZV9tb2R1bGVzL2pzb253ZWJ0b2tlbi9saWIvcHNTdXBwb3J0ZWQuanMiLCAibm9kZV9tb2R1bGVzL2pzb253ZWJ0b2tlbi92ZXJpZnkuanMiLCAibm9kZV9tb2R1bGVzL2xvZGFzaC5pbmNsdWRlcy9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvbG9kYXNoLmlzYm9vbGVhbi9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvbG9kYXNoLmlzaW50ZWdlci9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvbG9kYXNoLmlzbnVtYmVyL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9sb2Rhc2guaXNwbGFpbm9iamVjdC9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvbG9kYXNoLmlzc3RyaW5nL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9sb2Rhc2gub25jZS9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvanNvbndlYnRva2VuL3NpZ24uanMiLCAibm9kZV9tb2R1bGVzL2pzb253ZWJ0b2tlbi9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvQGVsZWN0cm9uL3JlbW90ZS9kaXN0L3NyYy9yZW5kZXJlci9jYWxsYmFja3MtcmVnaXN0cnkuanMiLCAibm9kZV9tb2R1bGVzL0BlbGVjdHJvbi9yZW1vdGUvZGlzdC9zcmMvY29tbW9uL3R5cGUtdXRpbHMuanMiLCAibm9kZV9tb2R1bGVzL0BlbGVjdHJvbi9yZW1vdGUvZGlzdC9zcmMvY29tbW9uL2dldC1lbGVjdHJvbi1iaW5kaW5nLmpzIiwgIm5vZGVfbW9kdWxlcy9AZWxlY3Ryb24vcmVtb3RlL2Rpc3Qvc3JjL2NvbW1vbi9tb2R1bGUtbmFtZXMuanMiLCAibm9kZV9tb2R1bGVzL0BlbGVjdHJvbi9yZW1vdGUvZGlzdC9zcmMvcmVuZGVyZXIvcmVtb3RlLmpzIiwgIm5vZGVfbW9kdWxlcy9AZWxlY3Ryb24vcmVtb3RlL2Rpc3Qvc3JjL3JlbmRlcmVyL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9AZWxlY3Ryb24vcmVtb3RlL3JlbmRlcmVyL2luZGV4LmpzIiwgInNyYy9tYWluLnRzIiwgInNyYy9zZXR0aW5nLnRzIiwgInNyYy9yaWdodC1zaWRlYmFyLXZpZXcudHMiLCAic3JjL3V0aWxzLnRzIiwgInNyYy9hcGkudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLW5vZGUvc3JjL2NhY2hlL3NlcmlhbGl6ZXIvU2VyaWFsaXplci50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy91dGlscy9Db25zdGFudHMudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLWNvbW1vbi9zcmMvZXJyb3IvQXV0aEVycm9yQ29kZXMudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLWNvbW1vbi9zcmMvZXJyb3IvQXV0aEVycm9yLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2Vycm9yL0NsaWVudEF1dGhFcnJvckNvZGVzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2Vycm9yL0NsaWVudEF1dGhFcnJvci50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy9jcnlwdG8vSUNyeXB0by50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy9sb2dnZXIvTG9nZ2VyLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL3BhY2thZ2VNZXRhZGF0YS50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy9hdXRob3JpdHkvQXV0aG9yaXR5T3B0aW9ucy50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy9hY2NvdW50L0F1dGhUb2tlbi50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy91dGlscy9UaW1lVXRpbHMudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLWNvbW1vbi9zcmMvY2FjaGUvdXRpbHMvQ2FjaGVIZWxwZXJzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2Vycm9yL0NsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2Vycm9yL0NsaWVudENvbmZpZ3VyYXRpb25FcnJvci50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy91dGlscy9TdHJpbmdVdGlscy50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy9yZXF1ZXN0L1Njb3BlU2V0LnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2FjY291bnQvQ2xpZW50SW5mby50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy9hY2NvdW50L0FjY291bnRJbmZvLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2F1dGhvcml0eS9BdXRob3JpdHlUeXBlLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2FjY291bnQvVG9rZW5DbGFpbXMudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLWNvbW1vbi9zcmMvYXV0aG9yaXR5L1Byb3RvY29sTW9kZS50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy9jYWNoZS9lbnRpdGllcy9BY2NvdW50RW50aXR5LnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL3V0aWxzL1VybFV0aWxzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL3VybC9VcmxTdHJpbmcudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLWNvbW1vbi9zcmMvYXV0aG9yaXR5L0F1dGhvcml0eU1ldGFkYXRhLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2Vycm9yL0NhY2hlRXJyb3JDb2Rlcy50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy9lcnJvci9DYWNoZUVycm9yLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2NhY2hlL0NhY2hlTWFuYWdlci50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy9jb25maWcvQ2xpZW50Q29uZmlndXJhdGlvbi50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy9hY2NvdW50L0Njc0NyZWRlbnRpYWwudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLWNvbW1vbi9zcmMvY29uc3RhbnRzL0FBRFNlcnZlclBhcmFtS2V5cy50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy9yZXF1ZXN0L1JlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2F1dGhvcml0eS9PcGVuSWRDb25maWdSZXNwb25zZS50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy9hdXRob3JpdHkvQ2xvdWRJbnN0YW5jZURpc2NvdmVyeVJlc3BvbnNlLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2F1dGhvcml0eS9DbG91ZEluc3RhbmNlRGlzY292ZXJ5RXJyb3JSZXNwb25zZS50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy90ZWxlbWV0cnkvcGVyZm9ybWFuY2UvUGVyZm9ybWFuY2VFdmVudC50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy91dGlscy9GdW5jdGlvbldyYXBwZXJzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2F1dGhvcml0eS9SZWdpb25EaXNjb3ZlcnkudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLWNvbW1vbi9zcmMvYXV0aG9yaXR5L0F1dGhvcml0eS50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy9hdXRob3JpdHkvQXV0aG9yaXR5RmFjdG9yeS50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy9lcnJvci9TZXJ2ZXJFcnJvci50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy9uZXR3b3JrL1JlcXVlc3RUaHVtYnByaW50LnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL25ldHdvcmsvVGhyb3R0bGluZ1V0aWxzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2Vycm9yL05ldHdvcmtFcnJvci50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy9jbGllbnQvQmFzZUNsaWVudC50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy9lcnJvci9JbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yQ29kZXMudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLWNvbW1vbi9zcmMvZXJyb3IvSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvci50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy91dGlscy9Qcm90b2NvbFV0aWxzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2NyeXB0by9Qb3BUb2tlbkdlbmVyYXRvci50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy9jYWNoZS9wZXJzaXN0ZW5jZS9Ub2tlbkNhY2hlQ29udGV4dC50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy9yZXNwb25zZS9SZXNwb25zZUhhbmRsZXIudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLWNvbW1vbi9zcmMvcmVxdWVzdC9SZXF1ZXN0VmFsaWRhdG9yLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL3V0aWxzL0NsaWVudEFzc2VydGlvblV0aWxzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2NsaWVudC9BdXRob3JpemF0aW9uQ29kZUNsaWVudC50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy9jbGllbnQvUmVmcmVzaFRva2VuQ2xpZW50LnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2NsaWVudC9TaWxlbnRGbG93Q2xpZW50LnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL3Byb3RvY29sL0F1dGhvcml6ZS50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy90ZWxlbWV0cnkvc2VydmVyL1NlcnZlclRlbGVtZXRyeU1hbmFnZXIudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLW5vZGUvc3JjL2NhY2hlL3NlcmlhbGl6ZXIvRGVzZXJpYWxpemVyLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1ub2RlL3NyYy91dGlscy9Db25zdGFudHMudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLW5vZGUvc3JjL3V0aWxzL05ldHdvcmtVdGlscy50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtbm9kZS9zcmMvbmV0d29yay9IdHRwQ2xpZW50LnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1ub2RlL3NyYy9lcnJvci9NYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1ub2RlL3NyYy9lcnJvci9NYW5hZ2VkSWRlbnRpdHlFcnJvci50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtbm9kZS9zcmMvZXJyb3IvTm9kZUF1dGhFcnJvci50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtbm9kZS9zcmMvY29uZmlnL0NvbmZpZ3VyYXRpb24udHMiLCAibm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9ybmcuanMiLCAibm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9yZWdleC5qcyIsICJub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3ZhbGlkYXRlLmpzIiwgIm5vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvc3RyaW5naWZ5LmpzIiwgIm5vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvdjQuanMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLW5vZGUvc3JjL2NyeXB0by9HdWlkR2VuZXJhdG9yLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1ub2RlL3NyYy91dGlscy9FbmNvZGluZ1V0aWxzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1ub2RlL3NyYy9jcnlwdG8vSGFzaFV0aWxzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1ub2RlL3NyYy9jcnlwdG8vUGtjZUdlbmVyYXRvci50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtbm9kZS9zcmMvY3J5cHRvL0NyeXB0b1Byb3ZpZGVyLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1ub2RlL3NyYy9jYWNoZS9Ob2RlU3RvcmFnZS50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtbm9kZS9zcmMvY2FjaGUvVG9rZW5DYWNoZS50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtbm9kZS9zcmMvY2xpZW50L0NsaWVudEFzc2VydGlvbi50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtbm9kZS9zcmMvcGFja2FnZU1ldGFkYXRhLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1ub2RlL3NyYy9jbGllbnQvVXNlcm5hbWVQYXNzd29yZENsaWVudC50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtbm9kZS9zcmMvcHJvdG9jb2wvQXV0aG9yaXplLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1ub2RlL3NyYy9jbGllbnQvQ2xpZW50QXBwbGljYXRpb24udHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLW5vZGUvc3JjL2NsaWVudC9DbGllbnRDcmVkZW50aWFsQ2xpZW50LnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1ub2RlL3NyYy9jbGllbnQvT25CZWhhbGZPZkNsaWVudC50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtbm9kZS9zcmMvY2xpZW50L0NvbmZpZGVudGlhbENsaWVudEFwcGxpY2F0aW9uLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1ub2RlL3NyYy91dGlscy9UaW1lVXRpbHMudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLW5vZGUvc3JjL25ldHdvcmsvSHR0cENsaWVudFdpdGhSZXRyaWVzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1ub2RlL3NyYy9jbGllbnQvTWFuYWdlZElkZW50aXR5U291cmNlcy9CYXNlTWFuYWdlZElkZW50aXR5U291cmNlLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1ub2RlL3NyYy9jbGllbnQvTWFuYWdlZElkZW50aXR5U291cmNlcy9BenVyZUFyYy50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtbm9kZS9zcmMvY2xpZW50L01hbmFnZWRJZGVudGl0eVNvdXJjZXMvSW1kcy50cyIsICJzcmMvYXV0aC50cyIsICJzcmMvdGFzay10aXRsZS1tb2RhbC50cyIsICJzcmMvc2VsZWN0LW1vZGFsLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJ7XG4gIFwibmFtZVwiOiBcImRvdGVudlwiLFxuICBcInZlcnNpb25cIjogXCIxNi40LjdcIixcbiAgXCJkZXNjcmlwdGlvblwiOiBcIkxvYWRzIGVudmlyb25tZW50IHZhcmlhYmxlcyBmcm9tIC5lbnYgZmlsZVwiLFxuICBcIm1haW5cIjogXCJsaWIvbWFpbi5qc1wiLFxuICBcInR5cGVzXCI6IFwibGliL21haW4uZC50c1wiLFxuICBcImV4cG9ydHNcIjoge1xuICAgIFwiLlwiOiB7XG4gICAgICBcInR5cGVzXCI6IFwiLi9saWIvbWFpbi5kLnRzXCIsXG4gICAgICBcInJlcXVpcmVcIjogXCIuL2xpYi9tYWluLmpzXCIsXG4gICAgICBcImRlZmF1bHRcIjogXCIuL2xpYi9tYWluLmpzXCJcbiAgICB9LFxuICAgIFwiLi9jb25maWdcIjogXCIuL2NvbmZpZy5qc1wiLFxuICAgIFwiLi9jb25maWcuanNcIjogXCIuL2NvbmZpZy5qc1wiLFxuICAgIFwiLi9saWIvZW52LW9wdGlvbnNcIjogXCIuL2xpYi9lbnYtb3B0aW9ucy5qc1wiLFxuICAgIFwiLi9saWIvZW52LW9wdGlvbnMuanNcIjogXCIuL2xpYi9lbnYtb3B0aW9ucy5qc1wiLFxuICAgIFwiLi9saWIvY2xpLW9wdGlvbnNcIjogXCIuL2xpYi9jbGktb3B0aW9ucy5qc1wiLFxuICAgIFwiLi9saWIvY2xpLW9wdGlvbnMuanNcIjogXCIuL2xpYi9jbGktb3B0aW9ucy5qc1wiLFxuICAgIFwiLi9wYWNrYWdlLmpzb25cIjogXCIuL3BhY2thZ2UuanNvblwiXG4gIH0sXG4gIFwic2NyaXB0c1wiOiB7XG4gICAgXCJkdHMtY2hlY2tcIjogXCJ0c2MgLS1wcm9qZWN0IHRlc3RzL3R5cGVzL3RzY29uZmlnLmpzb25cIixcbiAgICBcImxpbnRcIjogXCJzdGFuZGFyZFwiLFxuICAgIFwicHJldGVzdFwiOiBcIm5wbSBydW4gbGludCAmJiBucG0gcnVuIGR0cy1jaGVja1wiLFxuICAgIFwidGVzdFwiOiBcInRhcCBydW4gLS1hbGxvdy1lbXB0eS1jb3ZlcmFnZSAtLWRpc2FibGUtY292ZXJhZ2UgLS10aW1lb3V0PTYwMDAwXCIsXG4gICAgXCJ0ZXN0OmNvdmVyYWdlXCI6IFwidGFwIHJ1biAtLXNob3ctZnVsbC1jb3ZlcmFnZSAtLXRpbWVvdXQ9NjAwMDAgLS1jb3ZlcmFnZS1yZXBvcnQ9bGNvdlwiLFxuICAgIFwicHJlcmVsZWFzZVwiOiBcIm5wbSB0ZXN0XCIsXG4gICAgXCJyZWxlYXNlXCI6IFwic3RhbmRhcmQtdmVyc2lvblwiXG4gIH0sXG4gIFwicmVwb3NpdG9yeVwiOiB7XG4gICAgXCJ0eXBlXCI6IFwiZ2l0XCIsXG4gICAgXCJ1cmxcIjogXCJnaXQ6Ly9naXRodWIuY29tL21vdGRvdGxhL2RvdGVudi5naXRcIlxuICB9LFxuICBcImZ1bmRpbmdcIjogXCJodHRwczovL2RvdGVudnguY29tXCIsXG4gIFwia2V5d29yZHNcIjogW1xuICAgIFwiZG90ZW52XCIsXG4gICAgXCJlbnZcIixcbiAgICBcIi5lbnZcIixcbiAgICBcImVudmlyb25tZW50XCIsXG4gICAgXCJ2YXJpYWJsZXNcIixcbiAgICBcImNvbmZpZ1wiLFxuICAgIFwic2V0dGluZ3NcIlxuICBdLFxuICBcInJlYWRtZUZpbGVuYW1lXCI6IFwiUkVBRE1FLm1kXCIsXG4gIFwibGljZW5zZVwiOiBcIkJTRC0yLUNsYXVzZVwiLFxuICBcImRldkRlcGVuZGVuY2llc1wiOiB7XG4gICAgXCJAdHlwZXMvbm9kZVwiOiBcIl4xOC4xMS4zXCIsXG4gICAgXCJkZWNhY2hlXCI6IFwiXjQuNi4yXCIsXG4gICAgXCJzaW5vblwiOiBcIl4xNC4wLjFcIixcbiAgICBcInN0YW5kYXJkXCI6IFwiXjE3LjAuMFwiLFxuICAgIFwic3RhbmRhcmQtdmVyc2lvblwiOiBcIl45LjUuMFwiLFxuICAgIFwidGFwXCI6IFwiXjE5LjIuMFwiLFxuICAgIFwidHlwZXNjcmlwdFwiOiBcIl40LjguNFwiXG4gIH0sXG4gIFwiZW5naW5lc1wiOiB7XG4gICAgXCJub2RlXCI6IFwiPj0xMlwiXG4gIH0sXG4gIFwiYnJvd3NlclwiOiB7XG4gICAgXCJmc1wiOiBmYWxzZVxuICB9XG59XG4iLCAiY29uc3QgZnMgPSByZXF1aXJlKCdmcycpXG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpXG5jb25zdCBvcyA9IHJlcXVpcmUoJ29zJylcbmNvbnN0IGNyeXB0byA9IHJlcXVpcmUoJ2NyeXB0bycpXG5jb25zdCBwYWNrYWdlSnNvbiA9IHJlcXVpcmUoJy4uL3BhY2thZ2UuanNvbicpXG5cbmNvbnN0IHZlcnNpb24gPSBwYWNrYWdlSnNvbi52ZXJzaW9uXG5cbmNvbnN0IExJTkUgPSAvKD86XnxeKVxccyooPzpleHBvcnRcXHMrKT8oW1xcdy4tXSspKD86XFxzKj1cXHMqP3w6XFxzKz8pKFxccyonKD86XFxcXCd8W14nXSkqJ3xcXHMqXCIoPzpcXFxcXCJ8W15cIl0pKlwifFxccypgKD86XFxcXGB8W15gXSkqYHxbXiNcXHJcXG5dKyk/XFxzKig/OiMuKik/KD86JHwkKS9tZ1xuXG4vLyBQYXJzZSBzcmMgaW50byBhbiBPYmplY3RcbmZ1bmN0aW9uIHBhcnNlIChzcmMpIHtcbiAgY29uc3Qgb2JqID0ge31cblxuICAvLyBDb252ZXJ0IGJ1ZmZlciB0byBzdHJpbmdcbiAgbGV0IGxpbmVzID0gc3JjLnRvU3RyaW5nKClcblxuICAvLyBDb252ZXJ0IGxpbmUgYnJlYWtzIHRvIHNhbWUgZm9ybWF0XG4gIGxpbmVzID0gbGluZXMucmVwbGFjZSgvXFxyXFxuPy9tZywgJ1xcbicpXG5cbiAgbGV0IG1hdGNoXG4gIHdoaWxlICgobWF0Y2ggPSBMSU5FLmV4ZWMobGluZXMpKSAhPSBudWxsKSB7XG4gICAgY29uc3Qga2V5ID0gbWF0Y2hbMV1cblxuICAgIC8vIERlZmF1bHQgdW5kZWZpbmVkIG9yIG51bGwgdG8gZW1wdHkgc3RyaW5nXG4gICAgbGV0IHZhbHVlID0gKG1hdGNoWzJdIHx8ICcnKVxuXG4gICAgLy8gUmVtb3ZlIHdoaXRlc3BhY2VcbiAgICB2YWx1ZSA9IHZhbHVlLnRyaW0oKVxuXG4gICAgLy8gQ2hlY2sgaWYgZG91YmxlIHF1b3RlZFxuICAgIGNvbnN0IG1heWJlUXVvdGUgPSB2YWx1ZVswXVxuXG4gICAgLy8gUmVtb3ZlIHN1cnJvdW5kaW5nIHF1b3Rlc1xuICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXihbJ1wiYF0pKFtcXHNcXFNdKilcXDEkL21nLCAnJDInKVxuXG4gICAgLy8gRXhwYW5kIG5ld2xpbmVzIGlmIGRvdWJsZSBxdW90ZWRcbiAgICBpZiAobWF5YmVRdW90ZSA9PT0gJ1wiJykge1xuICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9cXFxcbi9nLCAnXFxuJylcbiAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXFxcXHIvZywgJ1xccicpXG4gICAgfVxuXG4gICAgLy8gQWRkIHRvIG9iamVjdFxuICAgIG9ialtrZXldID0gdmFsdWVcbiAgfVxuXG4gIHJldHVybiBvYmpcbn1cblxuZnVuY3Rpb24gX3BhcnNlVmF1bHQgKG9wdGlvbnMpIHtcbiAgY29uc3QgdmF1bHRQYXRoID0gX3ZhdWx0UGF0aChvcHRpb25zKVxuXG4gIC8vIFBhcnNlIC5lbnYudmF1bHRcbiAgY29uc3QgcmVzdWx0ID0gRG90ZW52TW9kdWxlLmNvbmZpZ0RvdGVudih7IHBhdGg6IHZhdWx0UGF0aCB9KVxuICBpZiAoIXJlc3VsdC5wYXJzZWQpIHtcbiAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoYE1JU1NJTkdfREFUQTogQ2Fubm90IHBhcnNlICR7dmF1bHRQYXRofSBmb3IgYW4gdW5rbm93biByZWFzb25gKVxuICAgIGVyci5jb2RlID0gJ01JU1NJTkdfREFUQSdcbiAgICB0aHJvdyBlcnJcbiAgfVxuXG4gIC8vIGhhbmRsZSBzY2VuYXJpbyBmb3IgY29tbWEgc2VwYXJhdGVkIGtleXMgLSBmb3IgdXNlIHdpdGgga2V5IHJvdGF0aW9uXG4gIC8vIGV4YW1wbGU6IERPVEVOVl9LRVk9XCJkb3RlbnY6Ly86a2V5XzEyMzRAZG90ZW52eC5jb20vdmF1bHQvLmVudi52YXVsdD9lbnZpcm9ubWVudD1wcm9kLGRvdGVudjovLzprZXlfNzg5MEBkb3RlbnZ4LmNvbS92YXVsdC8uZW52LnZhdWx0P2Vudmlyb25tZW50PXByb2RcIlxuICBjb25zdCBrZXlzID0gX2RvdGVudktleShvcHRpb25zKS5zcGxpdCgnLCcpXG4gIGNvbnN0IGxlbmd0aCA9IGtleXMubGVuZ3RoXG5cbiAgbGV0IGRlY3J5cHRlZFxuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCBmdWxsIGtleVxuICAgICAgY29uc3Qga2V5ID0ga2V5c1tpXS50cmltKClcblxuICAgICAgLy8gR2V0IGluc3RydWN0aW9ucyBmb3IgZGVjcnlwdFxuICAgICAgY29uc3QgYXR0cnMgPSBfaW5zdHJ1Y3Rpb25zKHJlc3VsdCwga2V5KVxuXG4gICAgICAvLyBEZWNyeXB0XG4gICAgICBkZWNyeXB0ZWQgPSBEb3RlbnZNb2R1bGUuZGVjcnlwdChhdHRycy5jaXBoZXJ0ZXh0LCBhdHRycy5rZXkpXG5cbiAgICAgIGJyZWFrXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIGxhc3Qga2V5XG4gICAgICBpZiAoaSArIDEgPj0gbGVuZ3RoKSB7XG4gICAgICAgIHRocm93IGVycm9yXG4gICAgICB9XG4gICAgICAvLyB0cnkgbmV4dCBrZXlcbiAgICB9XG4gIH1cblxuICAvLyBQYXJzZSBkZWNyeXB0ZWQgLmVudiBzdHJpbmdcbiAgcmV0dXJuIERvdGVudk1vZHVsZS5wYXJzZShkZWNyeXB0ZWQpXG59XG5cbmZ1bmN0aW9uIF9sb2cgKG1lc3NhZ2UpIHtcbiAgY29uc29sZS5sb2coYFtkb3RlbnZAJHt2ZXJzaW9ufV1bSU5GT10gJHttZXNzYWdlfWApXG59XG5cbmZ1bmN0aW9uIF93YXJuIChtZXNzYWdlKSB7XG4gIGNvbnNvbGUubG9nKGBbZG90ZW52QCR7dmVyc2lvbn1dW1dBUk5dICR7bWVzc2FnZX1gKVxufVxuXG5mdW5jdGlvbiBfZGVidWcgKG1lc3NhZ2UpIHtcbiAgY29uc29sZS5sb2coYFtkb3RlbnZAJHt2ZXJzaW9ufV1bREVCVUddICR7bWVzc2FnZX1gKVxufVxuXG5mdW5jdGlvbiBfZG90ZW52S2V5IChvcHRpb25zKSB7XG4gIC8vIHByaW9yaXRpemUgZGV2ZWxvcGVyIGRpcmVjdGx5IHNldHRpbmcgb3B0aW9ucy5ET1RFTlZfS0VZXG4gIGlmIChvcHRpb25zICYmIG9wdGlvbnMuRE9URU5WX0tFWSAmJiBvcHRpb25zLkRPVEVOVl9LRVkubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBvcHRpb25zLkRPVEVOVl9LRVlcbiAgfVxuXG4gIC8vIHNlY29uZGFyeSBpbmZyYSBhbHJlYWR5IGNvbnRhaW5zIGEgRE9URU5WX0tFWSBlbnZpcm9ubWVudCB2YXJpYWJsZVxuICBpZiAocHJvY2Vzcy5lbnYuRE9URU5WX0tFWSAmJiBwcm9jZXNzLmVudi5ET1RFTlZfS0VZLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gcHJvY2Vzcy5lbnYuRE9URU5WX0tFWVxuICB9XG5cbiAgLy8gZmFsbGJhY2sgdG8gZW1wdHkgc3RyaW5nXG4gIHJldHVybiAnJ1xufVxuXG5mdW5jdGlvbiBfaW5zdHJ1Y3Rpb25zIChyZXN1bHQsIGRvdGVudktleSkge1xuICAvLyBQYXJzZSBET1RFTlZfS0VZLiBGb3JtYXQgaXMgYSBVUklcbiAgbGV0IHVyaVxuICB0cnkge1xuICAgIHVyaSA9IG5ldyBVUkwoZG90ZW52S2V5KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvci5jb2RlID09PSAnRVJSX0lOVkFMSURfVVJMJykge1xuICAgICAgY29uc3QgZXJyID0gbmV3IEVycm9yKCdJTlZBTElEX0RPVEVOVl9LRVk6IFdyb25nIGZvcm1hdC4gTXVzdCBiZSBpbiB2YWxpZCB1cmkgZm9ybWF0IGxpa2UgZG90ZW52Oi8vOmtleV8xMjM0QGRvdGVudnguY29tL3ZhdWx0Ly5lbnYudmF1bHQ/ZW52aXJvbm1lbnQ9ZGV2ZWxvcG1lbnQnKVxuICAgICAgZXJyLmNvZGUgPSAnSU5WQUxJRF9ET1RFTlZfS0VZJ1xuICAgICAgdGhyb3cgZXJyXG4gICAgfVxuXG4gICAgdGhyb3cgZXJyb3JcbiAgfVxuXG4gIC8vIEdldCBkZWNyeXB0IGtleVxuICBjb25zdCBrZXkgPSB1cmkucGFzc3dvcmRcbiAgaWYgKCFrZXkpIHtcbiAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoJ0lOVkFMSURfRE9URU5WX0tFWTogTWlzc2luZyBrZXkgcGFydCcpXG4gICAgZXJyLmNvZGUgPSAnSU5WQUxJRF9ET1RFTlZfS0VZJ1xuICAgIHRocm93IGVyclxuICB9XG5cbiAgLy8gR2V0IGVudmlyb25tZW50XG4gIGNvbnN0IGVudmlyb25tZW50ID0gdXJpLnNlYXJjaFBhcmFtcy5nZXQoJ2Vudmlyb25tZW50JylcbiAgaWYgKCFlbnZpcm9ubWVudCkge1xuICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcignSU5WQUxJRF9ET1RFTlZfS0VZOiBNaXNzaW5nIGVudmlyb25tZW50IHBhcnQnKVxuICAgIGVyci5jb2RlID0gJ0lOVkFMSURfRE9URU5WX0tFWSdcbiAgICB0aHJvdyBlcnJcbiAgfVxuXG4gIC8vIEdldCBjaXBoZXJ0ZXh0IHBheWxvYWRcbiAgY29uc3QgZW52aXJvbm1lbnRLZXkgPSBgRE9URU5WX1ZBVUxUXyR7ZW52aXJvbm1lbnQudG9VcHBlckNhc2UoKX1gXG4gIGNvbnN0IGNpcGhlcnRleHQgPSByZXN1bHQucGFyc2VkW2Vudmlyb25tZW50S2V5XSAvLyBET1RFTlZfVkFVTFRfUFJPRFVDVElPTlxuICBpZiAoIWNpcGhlcnRleHQpIHtcbiAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoYE5PVF9GT1VORF9ET1RFTlZfRU5WSVJPTk1FTlQ6IENhbm5vdCBsb2NhdGUgZW52aXJvbm1lbnQgJHtlbnZpcm9ubWVudEtleX0gaW4geW91ciAuZW52LnZhdWx0IGZpbGUuYClcbiAgICBlcnIuY29kZSA9ICdOT1RfRk9VTkRfRE9URU5WX0VOVklST05NRU5UJ1xuICAgIHRocm93IGVyclxuICB9XG5cbiAgcmV0dXJuIHsgY2lwaGVydGV4dCwga2V5IH1cbn1cblxuZnVuY3Rpb24gX3ZhdWx0UGF0aCAob3B0aW9ucykge1xuICBsZXQgcG9zc2libGVWYXVsdFBhdGggPSBudWxsXG5cbiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5wYXRoICYmIG9wdGlvbnMucGF0aC5sZW5ndGggPiAwKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucy5wYXRoKSkge1xuICAgICAgZm9yIChjb25zdCBmaWxlcGF0aCBvZiBvcHRpb25zLnBhdGgpIHtcbiAgICAgICAgaWYgKGZzLmV4aXN0c1N5bmMoZmlsZXBhdGgpKSB7XG4gICAgICAgICAgcG9zc2libGVWYXVsdFBhdGggPSBmaWxlcGF0aC5lbmRzV2l0aCgnLnZhdWx0JykgPyBmaWxlcGF0aCA6IGAke2ZpbGVwYXRofS52YXVsdGBcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBwb3NzaWJsZVZhdWx0UGF0aCA9IG9wdGlvbnMucGF0aC5lbmRzV2l0aCgnLnZhdWx0JykgPyBvcHRpb25zLnBhdGggOiBgJHtvcHRpb25zLnBhdGh9LnZhdWx0YFxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBwb3NzaWJsZVZhdWx0UGF0aCA9IHBhdGgucmVzb2x2ZShwcm9jZXNzLmN3ZCgpLCAnLmVudi52YXVsdCcpXG4gIH1cblxuICBpZiAoZnMuZXhpc3RzU3luYyhwb3NzaWJsZVZhdWx0UGF0aCkpIHtcbiAgICByZXR1cm4gcG9zc2libGVWYXVsdFBhdGhcbiAgfVxuXG4gIHJldHVybiBudWxsXG59XG5cbmZ1bmN0aW9uIF9yZXNvbHZlSG9tZSAoZW52UGF0aCkge1xuICByZXR1cm4gZW52UGF0aFswXSA9PT0gJ34nID8gcGF0aC5qb2luKG9zLmhvbWVkaXIoKSwgZW52UGF0aC5zbGljZSgxKSkgOiBlbnZQYXRoXG59XG5cbmZ1bmN0aW9uIF9jb25maWdWYXVsdCAob3B0aW9ucykge1xuICBfbG9nKCdMb2FkaW5nIGVudiBmcm9tIGVuY3J5cHRlZCAuZW52LnZhdWx0JylcblxuICBjb25zdCBwYXJzZWQgPSBEb3RlbnZNb2R1bGUuX3BhcnNlVmF1bHQob3B0aW9ucylcblxuICBsZXQgcHJvY2Vzc0VudiA9IHByb2Nlc3MuZW52XG4gIGlmIChvcHRpb25zICYmIG9wdGlvbnMucHJvY2Vzc0VudiAhPSBudWxsKSB7XG4gICAgcHJvY2Vzc0VudiA9IG9wdGlvbnMucHJvY2Vzc0VudlxuICB9XG5cbiAgRG90ZW52TW9kdWxlLnBvcHVsYXRlKHByb2Nlc3NFbnYsIHBhcnNlZCwgb3B0aW9ucylcblxuICByZXR1cm4geyBwYXJzZWQgfVxufVxuXG5mdW5jdGlvbiBjb25maWdEb3RlbnYgKG9wdGlvbnMpIHtcbiAgY29uc3QgZG90ZW52UGF0aCA9IHBhdGgucmVzb2x2ZShwcm9jZXNzLmN3ZCgpLCAnLmVudicpXG4gIGxldCBlbmNvZGluZyA9ICd1dGY4J1xuICBjb25zdCBkZWJ1ZyA9IEJvb2xlYW4ob3B0aW9ucyAmJiBvcHRpb25zLmRlYnVnKVxuXG4gIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZW5jb2RpbmcpIHtcbiAgICBlbmNvZGluZyA9IG9wdGlvbnMuZW5jb2RpbmdcbiAgfSBlbHNlIHtcbiAgICBpZiAoZGVidWcpIHtcbiAgICAgIF9kZWJ1ZygnTm8gZW5jb2RpbmcgaXMgc3BlY2lmaWVkLiBVVEYtOCBpcyB1c2VkIGJ5IGRlZmF1bHQnKVxuICAgIH1cbiAgfVxuXG4gIGxldCBvcHRpb25QYXRocyA9IFtkb3RlbnZQYXRoXSAvLyBkZWZhdWx0LCBsb29rIGZvciAuZW52XG4gIGlmIChvcHRpb25zICYmIG9wdGlvbnMucGF0aCkge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShvcHRpb25zLnBhdGgpKSB7XG4gICAgICBvcHRpb25QYXRocyA9IFtfcmVzb2x2ZUhvbWUob3B0aW9ucy5wYXRoKV1cbiAgICB9IGVsc2Uge1xuICAgICAgb3B0aW9uUGF0aHMgPSBbXSAvLyByZXNldCBkZWZhdWx0XG4gICAgICBmb3IgKGNvbnN0IGZpbGVwYXRoIG9mIG9wdGlvbnMucGF0aCkge1xuICAgICAgICBvcHRpb25QYXRocy5wdXNoKF9yZXNvbHZlSG9tZShmaWxlcGF0aCkpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gQnVpbGQgdGhlIHBhcnNlZCBkYXRhIGluIGEgdGVtcG9yYXJ5IG9iamVjdCAoYmVjYXVzZSB3ZSBuZWVkIHRvIHJldHVybiBpdCkuICBPbmNlIHdlIGhhdmUgdGhlIGZpbmFsXG4gIC8vIHBhcnNlZCBkYXRhLCB3ZSB3aWxsIGNvbWJpbmUgaXQgd2l0aCBwcm9jZXNzLmVudiAob3Igb3B0aW9ucy5wcm9jZXNzRW52IGlmIHByb3ZpZGVkKS5cbiAgbGV0IGxhc3RFcnJvclxuICBjb25zdCBwYXJzZWRBbGwgPSB7fVxuICBmb3IgKGNvbnN0IHBhdGggb2Ygb3B0aW9uUGF0aHMpIHtcbiAgICB0cnkge1xuICAgICAgLy8gU3BlY2lmeWluZyBhbiBlbmNvZGluZyByZXR1cm5zIGEgc3RyaW5nIGluc3RlYWQgb2YgYSBidWZmZXJcbiAgICAgIGNvbnN0IHBhcnNlZCA9IERvdGVudk1vZHVsZS5wYXJzZShmcy5yZWFkRmlsZVN5bmMocGF0aCwgeyBlbmNvZGluZyB9KSlcblxuICAgICAgRG90ZW52TW9kdWxlLnBvcHVsYXRlKHBhcnNlZEFsbCwgcGFyc2VkLCBvcHRpb25zKVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmIChkZWJ1Zykge1xuICAgICAgICBfZGVidWcoYEZhaWxlZCB0byBsb2FkICR7cGF0aH0gJHtlLm1lc3NhZ2V9YClcbiAgICAgIH1cbiAgICAgIGxhc3RFcnJvciA9IGVcbiAgICB9XG4gIH1cblxuICBsZXQgcHJvY2Vzc0VudiA9IHByb2Nlc3MuZW52XG4gIGlmIChvcHRpb25zICYmIG9wdGlvbnMucHJvY2Vzc0VudiAhPSBudWxsKSB7XG4gICAgcHJvY2Vzc0VudiA9IG9wdGlvbnMucHJvY2Vzc0VudlxuICB9XG5cbiAgRG90ZW52TW9kdWxlLnBvcHVsYXRlKHByb2Nlc3NFbnYsIHBhcnNlZEFsbCwgb3B0aW9ucylcblxuICBpZiAobGFzdEVycm9yKSB7XG4gICAgcmV0dXJuIHsgcGFyc2VkOiBwYXJzZWRBbGwsIGVycm9yOiBsYXN0RXJyb3IgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybiB7IHBhcnNlZDogcGFyc2VkQWxsIH1cbiAgfVxufVxuXG4vLyBQb3B1bGF0ZXMgcHJvY2Vzcy5lbnYgZnJvbSAuZW52IGZpbGVcbmZ1bmN0aW9uIGNvbmZpZyAob3B0aW9ucykge1xuICAvLyBmYWxsYmFjayB0byBvcmlnaW5hbCBkb3RlbnYgaWYgRE9URU5WX0tFWSBpcyBub3Qgc2V0XG4gIGlmIChfZG90ZW52S2V5KG9wdGlvbnMpLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBEb3RlbnZNb2R1bGUuY29uZmlnRG90ZW52KG9wdGlvbnMpXG4gIH1cblxuICBjb25zdCB2YXVsdFBhdGggPSBfdmF1bHRQYXRoKG9wdGlvbnMpXG5cbiAgLy8gZG90ZW52S2V5IGV4aXN0cyBidXQgLmVudi52YXVsdCBmaWxlIGRvZXMgbm90IGV4aXN0XG4gIGlmICghdmF1bHRQYXRoKSB7XG4gICAgX3dhcm4oYFlvdSBzZXQgRE9URU5WX0tFWSBidXQgeW91IGFyZSBtaXNzaW5nIGEgLmVudi52YXVsdCBmaWxlIGF0ICR7dmF1bHRQYXRofS4gRGlkIHlvdSBmb3JnZXQgdG8gYnVpbGQgaXQ/YClcblxuICAgIHJldHVybiBEb3RlbnZNb2R1bGUuY29uZmlnRG90ZW52KG9wdGlvbnMpXG4gIH1cblxuICByZXR1cm4gRG90ZW52TW9kdWxlLl9jb25maWdWYXVsdChvcHRpb25zKVxufVxuXG5mdW5jdGlvbiBkZWNyeXB0IChlbmNyeXB0ZWQsIGtleVN0cikge1xuICBjb25zdCBrZXkgPSBCdWZmZXIuZnJvbShrZXlTdHIuc2xpY2UoLTY0KSwgJ2hleCcpXG4gIGxldCBjaXBoZXJ0ZXh0ID0gQnVmZmVyLmZyb20oZW5jcnlwdGVkLCAnYmFzZTY0JylcblxuICBjb25zdCBub25jZSA9IGNpcGhlcnRleHQuc3ViYXJyYXkoMCwgMTIpXG4gIGNvbnN0IGF1dGhUYWcgPSBjaXBoZXJ0ZXh0LnN1YmFycmF5KC0xNilcbiAgY2lwaGVydGV4dCA9IGNpcGhlcnRleHQuc3ViYXJyYXkoMTIsIC0xNilcblxuICB0cnkge1xuICAgIGNvbnN0IGFlc2djbSA9IGNyeXB0by5jcmVhdGVEZWNpcGhlcml2KCdhZXMtMjU2LWdjbScsIGtleSwgbm9uY2UpXG4gICAgYWVzZ2NtLnNldEF1dGhUYWcoYXV0aFRhZylcbiAgICByZXR1cm4gYCR7YWVzZ2NtLnVwZGF0ZShjaXBoZXJ0ZXh0KX0ke2Flc2djbS5maW5hbCgpfWBcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zdCBpc1JhbmdlID0gZXJyb3IgaW5zdGFuY2VvZiBSYW5nZUVycm9yXG4gICAgY29uc3QgaW52YWxpZEtleUxlbmd0aCA9IGVycm9yLm1lc3NhZ2UgPT09ICdJbnZhbGlkIGtleSBsZW5ndGgnXG4gICAgY29uc3QgZGVjcnlwdGlvbkZhaWxlZCA9IGVycm9yLm1lc3NhZ2UgPT09ICdVbnN1cHBvcnRlZCBzdGF0ZSBvciB1bmFibGUgdG8gYXV0aGVudGljYXRlIGRhdGEnXG5cbiAgICBpZiAoaXNSYW5nZSB8fCBpbnZhbGlkS2V5TGVuZ3RoKSB7XG4gICAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoJ0lOVkFMSURfRE9URU5WX0tFWTogSXQgbXVzdCBiZSA2NCBjaGFyYWN0ZXJzIGxvbmcgKG9yIG1vcmUpJylcbiAgICAgIGVyci5jb2RlID0gJ0lOVkFMSURfRE9URU5WX0tFWSdcbiAgICAgIHRocm93IGVyclxuICAgIH0gZWxzZSBpZiAoZGVjcnlwdGlvbkZhaWxlZCkge1xuICAgICAgY29uc3QgZXJyID0gbmV3IEVycm9yKCdERUNSWVBUSU9OX0ZBSUxFRDogUGxlYXNlIGNoZWNrIHlvdXIgRE9URU5WX0tFWScpXG4gICAgICBlcnIuY29kZSA9ICdERUNSWVBUSU9OX0ZBSUxFRCdcbiAgICAgIHRocm93IGVyclxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxufVxuXG4vLyBQb3B1bGF0ZSBwcm9jZXNzLmVudiB3aXRoIHBhcnNlZCB2YWx1ZXNcbmZ1bmN0aW9uIHBvcHVsYXRlIChwcm9jZXNzRW52LCBwYXJzZWQsIG9wdGlvbnMgPSB7fSkge1xuICBjb25zdCBkZWJ1ZyA9IEJvb2xlYW4ob3B0aW9ucyAmJiBvcHRpb25zLmRlYnVnKVxuICBjb25zdCBvdmVycmlkZSA9IEJvb2xlYW4ob3B0aW9ucyAmJiBvcHRpb25zLm92ZXJyaWRlKVxuXG4gIGlmICh0eXBlb2YgcGFyc2VkICE9PSAnb2JqZWN0Jykge1xuICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcignT0JKRUNUX1JFUVVJUkVEOiBQbGVhc2UgY2hlY2sgdGhlIHByb2Nlc3NFbnYgYXJndW1lbnQgYmVpbmcgcGFzc2VkIHRvIHBvcHVsYXRlJylcbiAgICBlcnIuY29kZSA9ICdPQkpFQ1RfUkVRVUlSRUQnXG4gICAgdGhyb3cgZXJyXG4gIH1cblxuICAvLyBTZXQgcHJvY2Vzcy5lbnZcbiAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMocGFyc2VkKSkge1xuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocHJvY2Vzc0Vudiwga2V5KSkge1xuICAgICAgaWYgKG92ZXJyaWRlID09PSB0cnVlKSB7XG4gICAgICAgIHByb2Nlc3NFbnZba2V5XSA9IHBhcnNlZFtrZXldXG4gICAgICB9XG5cbiAgICAgIGlmIChkZWJ1Zykge1xuICAgICAgICBpZiAob3ZlcnJpZGUgPT09IHRydWUpIHtcbiAgICAgICAgICBfZGVidWcoYFwiJHtrZXl9XCIgaXMgYWxyZWFkeSBkZWZpbmVkIGFuZCBXQVMgb3ZlcndyaXR0ZW5gKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF9kZWJ1ZyhgXCIke2tleX1cIiBpcyBhbHJlYWR5IGRlZmluZWQgYW5kIHdhcyBOT1Qgb3ZlcndyaXR0ZW5gKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHByb2Nlc3NFbnZba2V5XSA9IHBhcnNlZFtrZXldXG4gICAgfVxuICB9XG59XG5cbmNvbnN0IERvdGVudk1vZHVsZSA9IHtcbiAgY29uZmlnRG90ZW52LFxuICBfY29uZmlnVmF1bHQsXG4gIF9wYXJzZVZhdWx0LFxuICBjb25maWcsXG4gIGRlY3J5cHQsXG4gIHBhcnNlLFxuICBwb3B1bGF0ZVxufVxuXG5tb2R1bGUuZXhwb3J0cy5jb25maWdEb3RlbnYgPSBEb3RlbnZNb2R1bGUuY29uZmlnRG90ZW52XG5tb2R1bGUuZXhwb3J0cy5fY29uZmlnVmF1bHQgPSBEb3RlbnZNb2R1bGUuX2NvbmZpZ1ZhdWx0XG5tb2R1bGUuZXhwb3J0cy5fcGFyc2VWYXVsdCA9IERvdGVudk1vZHVsZS5fcGFyc2VWYXVsdFxubW9kdWxlLmV4cG9ydHMuY29uZmlnID0gRG90ZW52TW9kdWxlLmNvbmZpZ1xubW9kdWxlLmV4cG9ydHMuZGVjcnlwdCA9IERvdGVudk1vZHVsZS5kZWNyeXB0XG5tb2R1bGUuZXhwb3J0cy5wYXJzZSA9IERvdGVudk1vZHVsZS5wYXJzZVxubW9kdWxlLmV4cG9ydHMucG9wdWxhdGUgPSBEb3RlbnZNb2R1bGUucG9wdWxhdGVcblxubW9kdWxlLmV4cG9ydHMgPSBEb3RlbnZNb2R1bGVcbiIsICIvKiEgc2FmZS1idWZmZXIuIE1JVCBMaWNlbnNlLiBGZXJvc3MgQWJvdWtoYWRpamVoIDxodHRwczovL2Zlcm9zcy5vcmcvb3BlbnNvdXJjZT4gKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vZGUvbm8tZGVwcmVjYXRlZC1hcGkgKi9cbnZhciBidWZmZXIgPSByZXF1aXJlKCdidWZmZXInKVxudmFyIEJ1ZmZlciA9IGJ1ZmZlci5CdWZmZXJcblxuLy8gYWx0ZXJuYXRpdmUgdG8gdXNpbmcgT2JqZWN0LmtleXMgZm9yIG9sZCBicm93c2Vyc1xuZnVuY3Rpb24gY29weVByb3BzIChzcmMsIGRzdCkge1xuICBmb3IgKHZhciBrZXkgaW4gc3JjKSB7XG4gICAgZHN0W2tleV0gPSBzcmNba2V5XVxuICB9XG59XG5pZiAoQnVmZmVyLmZyb20gJiYgQnVmZmVyLmFsbG9jICYmIEJ1ZmZlci5hbGxvY1Vuc2FmZSAmJiBCdWZmZXIuYWxsb2NVbnNhZmVTbG93KSB7XG4gIG1vZHVsZS5leHBvcnRzID0gYnVmZmVyXG59IGVsc2Uge1xuICAvLyBDb3B5IHByb3BlcnRpZXMgZnJvbSByZXF1aXJlKCdidWZmZXInKVxuICBjb3B5UHJvcHMoYnVmZmVyLCBleHBvcnRzKVxuICBleHBvcnRzLkJ1ZmZlciA9IFNhZmVCdWZmZXJcbn1cblxuZnVuY3Rpb24gU2FmZUJ1ZmZlciAoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIEJ1ZmZlcihhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbn1cblxuU2FmZUJ1ZmZlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEJ1ZmZlci5wcm90b3R5cGUpXG5cbi8vIENvcHkgc3RhdGljIG1ldGhvZHMgZnJvbSBCdWZmZXJcbmNvcHlQcm9wcyhCdWZmZXIsIFNhZmVCdWZmZXIpXG5cblNhZmVCdWZmZXIuZnJvbSA9IGZ1bmN0aW9uIChhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IG5vdCBiZSBhIG51bWJlcicpXG4gIH1cbiAgcmV0dXJuIEJ1ZmZlcihhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbn1cblxuU2FmZUJ1ZmZlci5hbGxvYyA9IGZ1bmN0aW9uIChzaXplLCBmaWxsLCBlbmNvZGluZykge1xuICBpZiAodHlwZW9mIHNpemUgIT09ICdudW1iZXInKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIG51bWJlcicpXG4gIH1cbiAgdmFyIGJ1ZiA9IEJ1ZmZlcihzaXplKVxuICBpZiAoZmlsbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGJ1Zi5maWxsKGZpbGwsIGVuY29kaW5nKVxuICAgIH0gZWxzZSB7XG4gICAgICBidWYuZmlsbChmaWxsKVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBidWYuZmlsbCgwKVxuICB9XG4gIHJldHVybiBidWZcbn1cblxuU2FmZUJ1ZmZlci5hbGxvY1Vuc2FmZSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIGlmICh0eXBlb2Ygc2l6ZSAhPT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyJylcbiAgfVxuICByZXR1cm4gQnVmZmVyKHNpemUpXG59XG5cblNhZmVCdWZmZXIuYWxsb2NVbnNhZmVTbG93ID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBudW1iZXInKVxuICB9XG4gIHJldHVybiBidWZmZXIuU2xvd0J1ZmZlcihzaXplKVxufVxuIiwgIi8qZ2xvYmFsIG1vZHVsZSwgcHJvY2VzcyovXG52YXIgQnVmZmVyID0gcmVxdWlyZSgnc2FmZS1idWZmZXInKS5CdWZmZXI7XG52YXIgU3RyZWFtID0gcmVxdWlyZSgnc3RyZWFtJyk7XG52YXIgdXRpbCA9IHJlcXVpcmUoJ3V0aWwnKTtcblxuZnVuY3Rpb24gRGF0YVN0cmVhbShkYXRhKSB7XG4gIHRoaXMuYnVmZmVyID0gbnVsbDtcbiAgdGhpcy53cml0YWJsZSA9IHRydWU7XG4gIHRoaXMucmVhZGFibGUgPSB0cnVlO1xuXG4gIC8vIE5vIGlucHV0XG4gIGlmICghZGF0YSkge1xuICAgIHRoaXMuYnVmZmVyID0gQnVmZmVyLmFsbG9jKDApO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gU3RyZWFtXG4gIGlmICh0eXBlb2YgZGF0YS5waXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhpcy5idWZmZXIgPSBCdWZmZXIuYWxsb2MoMCk7XG4gICAgZGF0YS5waXBlKHRoaXMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gQnVmZmVyIG9yIFN0cmluZ1xuICAvLyBvciBPYmplY3QgKGFzc3VtZWRseSBhIHBhc3N3b3JkZWQga2V5KVxuICBpZiAoZGF0YS5sZW5ndGggfHwgdHlwZW9mIGRhdGEgPT09ICdvYmplY3QnKSB7XG4gICAgdGhpcy5idWZmZXIgPSBkYXRhO1xuICAgIHRoaXMud3JpdGFibGUgPSBmYWxzZTtcbiAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuZW1pdCgnZW5kJywgZGF0YSk7XG4gICAgICB0aGlzLnJlYWRhYmxlID0gZmFsc2U7XG4gICAgICB0aGlzLmVtaXQoJ2Nsb3NlJyk7XG4gICAgfS5iaW5kKHRoaXMpKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VuZXhwZWN0ZWQgZGF0YSB0eXBlICgnKyB0eXBlb2YgZGF0YSArICcpJyk7XG59XG51dGlsLmluaGVyaXRzKERhdGFTdHJlYW0sIFN0cmVhbSk7XG5cbkRhdGFTdHJlYW0ucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gd3JpdGUoZGF0YSkge1xuICB0aGlzLmJ1ZmZlciA9IEJ1ZmZlci5jb25jYXQoW3RoaXMuYnVmZmVyLCBCdWZmZXIuZnJvbShkYXRhKV0pO1xuICB0aGlzLmVtaXQoJ2RhdGEnLCBkYXRhKTtcbn07XG5cbkRhdGFTdHJlYW0ucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uIGVuZChkYXRhKSB7XG4gIGlmIChkYXRhKVxuICAgIHRoaXMud3JpdGUoZGF0YSk7XG4gIHRoaXMuZW1pdCgnZW5kJywgZGF0YSk7XG4gIHRoaXMuZW1pdCgnY2xvc2UnKTtcbiAgdGhpcy53cml0YWJsZSA9IGZhbHNlO1xuICB0aGlzLnJlYWRhYmxlID0gZmFsc2U7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IERhdGFTdHJlYW07XG4iLCAiLypqc2hpbnQgbm9kZTp0cnVlICovXG4ndXNlIHN0cmljdCc7XG52YXIgQnVmZmVyID0gcmVxdWlyZSgnYnVmZmVyJykuQnVmZmVyOyAvLyBicm93c2VyaWZ5XG52YXIgU2xvd0J1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpLlNsb3dCdWZmZXI7XG5cbm1vZHVsZS5leHBvcnRzID0gYnVmZmVyRXE7XG5cbmZ1bmN0aW9uIGJ1ZmZlckVxKGEsIGIpIHtcblxuICAvLyBzaG9ydGN1dHRpbmcgb24gdHlwZSBpcyBuZWNlc3NhcnkgZm9yIGNvcnJlY3RuZXNzXG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGEpIHx8ICFCdWZmZXIuaXNCdWZmZXIoYikpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBidWZmZXIgc2l6ZXMgc2hvdWxkIGJlIHdlbGwta25vd24gaW5mb3JtYXRpb24sIHNvIGRlc3BpdGUgdGhpc1xuICAvLyBzaG9ydGN1dHRpbmcsIGl0IGRvZXNuJ3QgbGVhayBhbnkgaW5mb3JtYXRpb24gYWJvdXQgdGhlICpjb250ZW50cyogb2YgdGhlXG4gIC8vIGJ1ZmZlcnMuXG4gIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB2YXIgYyA9IDA7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgIC8qanNoaW50IGJpdHdpc2U6ZmFsc2UgKi9cbiAgICBjIHw9IGFbaV0gXiBiW2ldOyAvLyBYT1JcbiAgfVxuICByZXR1cm4gYyA9PT0gMDtcbn1cblxuYnVmZmVyRXEuaW5zdGFsbCA9IGZ1bmN0aW9uKCkge1xuICBCdWZmZXIucHJvdG90eXBlLmVxdWFsID0gU2xvd0J1ZmZlci5wcm90b3R5cGUuZXF1YWwgPSBmdW5jdGlvbiBlcXVhbCh0aGF0KSB7XG4gICAgcmV0dXJuIGJ1ZmZlckVxKHRoaXMsIHRoYXQpO1xuICB9O1xufTtcblxudmFyIG9yaWdCdWZFcXVhbCA9IEJ1ZmZlci5wcm90b3R5cGUuZXF1YWw7XG52YXIgb3JpZ1Nsb3dCdWZFcXVhbCA9IFNsb3dCdWZmZXIucHJvdG90eXBlLmVxdWFsO1xuYnVmZmVyRXEucmVzdG9yZSA9IGZ1bmN0aW9uKCkge1xuICBCdWZmZXIucHJvdG90eXBlLmVxdWFsID0gb3JpZ0J1ZkVxdWFsO1xuICBTbG93QnVmZmVyLnByb3RvdHlwZS5lcXVhbCA9IG9yaWdTbG93QnVmRXF1YWw7XG59O1xuIiwgIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gZ2V0UGFyYW1TaXplKGtleVNpemUpIHtcblx0dmFyIHJlc3VsdCA9ICgoa2V5U2l6ZSAvIDgpIHwgMCkgKyAoa2V5U2l6ZSAlIDggPT09IDAgPyAwIDogMSk7XG5cdHJldHVybiByZXN1bHQ7XG59XG5cbnZhciBwYXJhbUJ5dGVzRm9yQWxnID0ge1xuXHRFUzI1NjogZ2V0UGFyYW1TaXplKDI1NiksXG5cdEVTMzg0OiBnZXRQYXJhbVNpemUoMzg0KSxcblx0RVM1MTI6IGdldFBhcmFtU2l6ZSg1MjEpXG59O1xuXG5mdW5jdGlvbiBnZXRQYXJhbUJ5dGVzRm9yQWxnKGFsZykge1xuXHR2YXIgcGFyYW1CeXRlcyA9IHBhcmFtQnl0ZXNGb3JBbGdbYWxnXTtcblx0aWYgKHBhcmFtQnl0ZXMpIHtcblx0XHRyZXR1cm4gcGFyYW1CeXRlcztcblx0fVxuXG5cdHRocm93IG5ldyBFcnJvcignVW5rbm93biBhbGdvcml0aG0gXCInICsgYWxnICsgJ1wiJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0UGFyYW1CeXRlc0ZvckFsZztcbiIsICIndXNlIHN0cmljdCc7XG5cbnZhciBCdWZmZXIgPSByZXF1aXJlKCdzYWZlLWJ1ZmZlcicpLkJ1ZmZlcjtcblxudmFyIGdldFBhcmFtQnl0ZXNGb3JBbGcgPSByZXF1aXJlKCcuL3BhcmFtLWJ5dGVzLWZvci1hbGcnKTtcblxudmFyIE1BWF9PQ1RFVCA9IDB4ODAsXG5cdENMQVNTX1VOSVZFUlNBTCA9IDAsXG5cdFBSSU1JVElWRV9CSVQgPSAweDIwLFxuXHRUQUdfU0VRID0gMHgxMCxcblx0VEFHX0lOVCA9IDB4MDIsXG5cdEVOQ09ERURfVEFHX1NFUSA9IChUQUdfU0VRIHwgUFJJTUlUSVZFX0JJVCkgfCAoQ0xBU1NfVU5JVkVSU0FMIDw8IDYpLFxuXHRFTkNPREVEX1RBR19JTlQgPSBUQUdfSU5UIHwgKENMQVNTX1VOSVZFUlNBTCA8PCA2KTtcblxuZnVuY3Rpb24gYmFzZTY0VXJsKGJhc2U2NCkge1xuXHRyZXR1cm4gYmFzZTY0XG5cdFx0LnJlcGxhY2UoLz0vZywgJycpXG5cdFx0LnJlcGxhY2UoL1xcKy9nLCAnLScpXG5cdFx0LnJlcGxhY2UoL1xcLy9nLCAnXycpO1xufVxuXG5mdW5jdGlvbiBzaWduYXR1cmVBc0J1ZmZlcihzaWduYXR1cmUpIHtcblx0aWYgKEJ1ZmZlci5pc0J1ZmZlcihzaWduYXR1cmUpKSB7XG5cdFx0cmV0dXJuIHNpZ25hdHVyZTtcblx0fSBlbHNlIGlmICgnc3RyaW5nJyA9PT0gdHlwZW9mIHNpZ25hdHVyZSkge1xuXHRcdHJldHVybiBCdWZmZXIuZnJvbShzaWduYXR1cmUsICdiYXNlNjQnKTtcblx0fVxuXG5cdHRocm93IG5ldyBUeXBlRXJyb3IoJ0VDRFNBIHNpZ25hdHVyZSBtdXN0IGJlIGEgQmFzZTY0IHN0cmluZyBvciBhIEJ1ZmZlcicpO1xufVxuXG5mdW5jdGlvbiBkZXJUb0pvc2Uoc2lnbmF0dXJlLCBhbGcpIHtcblx0c2lnbmF0dXJlID0gc2lnbmF0dXJlQXNCdWZmZXIoc2lnbmF0dXJlKTtcblx0dmFyIHBhcmFtQnl0ZXMgPSBnZXRQYXJhbUJ5dGVzRm9yQWxnKGFsZyk7XG5cblx0Ly8gdGhlIERFUiBlbmNvZGVkIHBhcmFtIHNob3VsZCBhdCBtb3N0IGJlIHRoZSBwYXJhbSBzaXplLCBwbHVzIGEgcGFkZGluZ1xuXHQvLyB6ZXJvLCBzaW5jZSBkdWUgdG8gYmVpbmcgYSBzaWduZWQgaW50ZWdlclxuXHR2YXIgbWF4RW5jb2RlZFBhcmFtTGVuZ3RoID0gcGFyYW1CeXRlcyArIDE7XG5cblx0dmFyIGlucHV0TGVuZ3RoID0gc2lnbmF0dXJlLmxlbmd0aDtcblxuXHR2YXIgb2Zmc2V0ID0gMDtcblx0aWYgKHNpZ25hdHVyZVtvZmZzZXQrK10gIT09IEVOQ09ERURfVEFHX1NFUSkge1xuXHRcdHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGZpbmQgZXhwZWN0ZWQgXCJzZXFcIicpO1xuXHR9XG5cblx0dmFyIHNlcUxlbmd0aCA9IHNpZ25hdHVyZVtvZmZzZXQrK107XG5cdGlmIChzZXFMZW5ndGggPT09IChNQVhfT0NURVQgfCAxKSkge1xuXHRcdHNlcUxlbmd0aCA9IHNpZ25hdHVyZVtvZmZzZXQrK107XG5cdH1cblxuXHRpZiAoaW5wdXRMZW5ndGggLSBvZmZzZXQgPCBzZXFMZW5ndGgpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoJ1wic2VxXCIgc3BlY2lmaWVkIGxlbmd0aCBvZiBcIicgKyBzZXFMZW5ndGggKyAnXCIsIG9ubHkgXCInICsgKGlucHV0TGVuZ3RoIC0gb2Zmc2V0KSArICdcIiByZW1haW5pbmcnKTtcblx0fVxuXG5cdGlmIChzaWduYXR1cmVbb2Zmc2V0KytdICE9PSBFTkNPREVEX1RBR19JTlQpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBmaW5kIGV4cGVjdGVkIFwiaW50XCIgZm9yIFwiclwiJyk7XG5cdH1cblxuXHR2YXIgckxlbmd0aCA9IHNpZ25hdHVyZVtvZmZzZXQrK107XG5cblx0aWYgKGlucHV0TGVuZ3RoIC0gb2Zmc2V0IC0gMiA8IHJMZW5ndGgpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoJ1wiclwiIHNwZWNpZmllZCBsZW5ndGggb2YgXCInICsgckxlbmd0aCArICdcIiwgb25seSBcIicgKyAoaW5wdXRMZW5ndGggLSBvZmZzZXQgLSAyKSArICdcIiBhdmFpbGFibGUnKTtcblx0fVxuXG5cdGlmIChtYXhFbmNvZGVkUGFyYW1MZW5ndGggPCByTGVuZ3RoKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCdcInJcIiBzcGVjaWZpZWQgbGVuZ3RoIG9mIFwiJyArIHJMZW5ndGggKyAnXCIsIG1heCBvZiBcIicgKyBtYXhFbmNvZGVkUGFyYW1MZW5ndGggKyAnXCIgaXMgYWNjZXB0YWJsZScpO1xuXHR9XG5cblx0dmFyIHJPZmZzZXQgPSBvZmZzZXQ7XG5cdG9mZnNldCArPSByTGVuZ3RoO1xuXG5cdGlmIChzaWduYXR1cmVbb2Zmc2V0KytdICE9PSBFTkNPREVEX1RBR19JTlQpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBmaW5kIGV4cGVjdGVkIFwiaW50XCIgZm9yIFwic1wiJyk7XG5cdH1cblxuXHR2YXIgc0xlbmd0aCA9IHNpZ25hdHVyZVtvZmZzZXQrK107XG5cblx0aWYgKGlucHV0TGVuZ3RoIC0gb2Zmc2V0ICE9PSBzTGVuZ3RoKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCdcInNcIiBzcGVjaWZpZWQgbGVuZ3RoIG9mIFwiJyArIHNMZW5ndGggKyAnXCIsIGV4cGVjdGVkIFwiJyArIChpbnB1dExlbmd0aCAtIG9mZnNldCkgKyAnXCInKTtcblx0fVxuXG5cdGlmIChtYXhFbmNvZGVkUGFyYW1MZW5ndGggPCBzTGVuZ3RoKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCdcInNcIiBzcGVjaWZpZWQgbGVuZ3RoIG9mIFwiJyArIHNMZW5ndGggKyAnXCIsIG1heCBvZiBcIicgKyBtYXhFbmNvZGVkUGFyYW1MZW5ndGggKyAnXCIgaXMgYWNjZXB0YWJsZScpO1xuXHR9XG5cblx0dmFyIHNPZmZzZXQgPSBvZmZzZXQ7XG5cdG9mZnNldCArPSBzTGVuZ3RoO1xuXG5cdGlmIChvZmZzZXQgIT09IGlucHV0TGVuZ3RoKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCB0byBjb25zdW1lIGVudGlyZSBidWZmZXIsIGJ1dCBcIicgKyAoaW5wdXRMZW5ndGggLSBvZmZzZXQpICsgJ1wiIGJ5dGVzIHJlbWFpbicpO1xuXHR9XG5cblx0dmFyIHJQYWRkaW5nID0gcGFyYW1CeXRlcyAtIHJMZW5ndGgsXG5cdFx0c1BhZGRpbmcgPSBwYXJhbUJ5dGVzIC0gc0xlbmd0aDtcblxuXHR2YXIgZHN0ID0gQnVmZmVyLmFsbG9jVW5zYWZlKHJQYWRkaW5nICsgckxlbmd0aCArIHNQYWRkaW5nICsgc0xlbmd0aCk7XG5cblx0Zm9yIChvZmZzZXQgPSAwOyBvZmZzZXQgPCByUGFkZGluZzsgKytvZmZzZXQpIHtcblx0XHRkc3Rbb2Zmc2V0XSA9IDA7XG5cdH1cblx0c2lnbmF0dXJlLmNvcHkoZHN0LCBvZmZzZXQsIHJPZmZzZXQgKyBNYXRoLm1heCgtclBhZGRpbmcsIDApLCByT2Zmc2V0ICsgckxlbmd0aCk7XG5cblx0b2Zmc2V0ID0gcGFyYW1CeXRlcztcblxuXHRmb3IgKHZhciBvID0gb2Zmc2V0OyBvZmZzZXQgPCBvICsgc1BhZGRpbmc7ICsrb2Zmc2V0KSB7XG5cdFx0ZHN0W29mZnNldF0gPSAwO1xuXHR9XG5cdHNpZ25hdHVyZS5jb3B5KGRzdCwgb2Zmc2V0LCBzT2Zmc2V0ICsgTWF0aC5tYXgoLXNQYWRkaW5nLCAwKSwgc09mZnNldCArIHNMZW5ndGgpO1xuXG5cdGRzdCA9IGRzdC50b1N0cmluZygnYmFzZTY0Jyk7XG5cdGRzdCA9IGJhc2U2NFVybChkc3QpO1xuXG5cdHJldHVybiBkc3Q7XG59XG5cbmZ1bmN0aW9uIGNvdW50UGFkZGluZyhidWYsIHN0YXJ0LCBzdG9wKSB7XG5cdHZhciBwYWRkaW5nID0gMDtcblx0d2hpbGUgKHN0YXJ0ICsgcGFkZGluZyA8IHN0b3AgJiYgYnVmW3N0YXJ0ICsgcGFkZGluZ10gPT09IDApIHtcblx0XHQrK3BhZGRpbmc7XG5cdH1cblxuXHR2YXIgbmVlZHNTaWduID0gYnVmW3N0YXJ0ICsgcGFkZGluZ10gPj0gTUFYX09DVEVUO1xuXHRpZiAobmVlZHNTaWduKSB7XG5cdFx0LS1wYWRkaW5nO1xuXHR9XG5cblx0cmV0dXJuIHBhZGRpbmc7XG59XG5cbmZ1bmN0aW9uIGpvc2VUb0RlcihzaWduYXR1cmUsIGFsZykge1xuXHRzaWduYXR1cmUgPSBzaWduYXR1cmVBc0J1ZmZlcihzaWduYXR1cmUpO1xuXHR2YXIgcGFyYW1CeXRlcyA9IGdldFBhcmFtQnl0ZXNGb3JBbGcoYWxnKTtcblxuXHR2YXIgc2lnbmF0dXJlQnl0ZXMgPSBzaWduYXR1cmUubGVuZ3RoO1xuXHRpZiAoc2lnbmF0dXJlQnl0ZXMgIT09IHBhcmFtQnl0ZXMgKiAyKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignXCInICsgYWxnICsgJ1wiIHNpZ25hdHVyZXMgbXVzdCBiZSBcIicgKyBwYXJhbUJ5dGVzICogMiArICdcIiBieXRlcywgc2F3IFwiJyArIHNpZ25hdHVyZUJ5dGVzICsgJ1wiJyk7XG5cdH1cblxuXHR2YXIgclBhZGRpbmcgPSBjb3VudFBhZGRpbmcoc2lnbmF0dXJlLCAwLCBwYXJhbUJ5dGVzKTtcblx0dmFyIHNQYWRkaW5nID0gY291bnRQYWRkaW5nKHNpZ25hdHVyZSwgcGFyYW1CeXRlcywgc2lnbmF0dXJlLmxlbmd0aCk7XG5cdHZhciByTGVuZ3RoID0gcGFyYW1CeXRlcyAtIHJQYWRkaW5nO1xuXHR2YXIgc0xlbmd0aCA9IHBhcmFtQnl0ZXMgLSBzUGFkZGluZztcblxuXHR2YXIgcnNCeXRlcyA9IDEgKyAxICsgckxlbmd0aCArIDEgKyAxICsgc0xlbmd0aDtcblxuXHR2YXIgc2hvcnRMZW5ndGggPSByc0J5dGVzIDwgTUFYX09DVEVUO1xuXG5cdHZhciBkc3QgPSBCdWZmZXIuYWxsb2NVbnNhZmUoKHNob3J0TGVuZ3RoID8gMiA6IDMpICsgcnNCeXRlcyk7XG5cblx0dmFyIG9mZnNldCA9IDA7XG5cdGRzdFtvZmZzZXQrK10gPSBFTkNPREVEX1RBR19TRVE7XG5cdGlmIChzaG9ydExlbmd0aCkge1xuXHRcdC8vIEJpdCA4IGhhcyB2YWx1ZSBcIjBcIlxuXHRcdC8vIGJpdHMgNy0xIGdpdmUgdGhlIGxlbmd0aC5cblx0XHRkc3Rbb2Zmc2V0KytdID0gcnNCeXRlcztcblx0fSBlbHNlIHtcblx0XHQvLyBCaXQgOCBvZiBmaXJzdCBvY3RldCBoYXMgdmFsdWUgXCIxXCJcblx0XHQvLyBiaXRzIDctMSBnaXZlIHRoZSBudW1iZXIgb2YgYWRkaXRpb25hbCBsZW5ndGggb2N0ZXRzLlxuXHRcdGRzdFtvZmZzZXQrK10gPSBNQVhfT0NURVRcdHwgMTtcblx0XHQvLyBsZW5ndGgsIGJhc2UgMjU2XG5cdFx0ZHN0W29mZnNldCsrXSA9IHJzQnl0ZXMgJiAweGZmO1xuXHR9XG5cdGRzdFtvZmZzZXQrK10gPSBFTkNPREVEX1RBR19JTlQ7XG5cdGRzdFtvZmZzZXQrK10gPSByTGVuZ3RoO1xuXHRpZiAoclBhZGRpbmcgPCAwKSB7XG5cdFx0ZHN0W29mZnNldCsrXSA9IDA7XG5cdFx0b2Zmc2V0ICs9IHNpZ25hdHVyZS5jb3B5KGRzdCwgb2Zmc2V0LCAwLCBwYXJhbUJ5dGVzKTtcblx0fSBlbHNlIHtcblx0XHRvZmZzZXQgKz0gc2lnbmF0dXJlLmNvcHkoZHN0LCBvZmZzZXQsIHJQYWRkaW5nLCBwYXJhbUJ5dGVzKTtcblx0fVxuXHRkc3Rbb2Zmc2V0KytdID0gRU5DT0RFRF9UQUdfSU5UO1xuXHRkc3Rbb2Zmc2V0KytdID0gc0xlbmd0aDtcblx0aWYgKHNQYWRkaW5nIDwgMCkge1xuXHRcdGRzdFtvZmZzZXQrK10gPSAwO1xuXHRcdHNpZ25hdHVyZS5jb3B5KGRzdCwgb2Zmc2V0LCBwYXJhbUJ5dGVzKTtcblx0fSBlbHNlIHtcblx0XHRzaWduYXR1cmUuY29weShkc3QsIG9mZnNldCwgcGFyYW1CeXRlcyArIHNQYWRkaW5nKTtcblx0fVxuXG5cdHJldHVybiBkc3Q7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXHRkZXJUb0pvc2U6IGRlclRvSm9zZSxcblx0am9zZVRvRGVyOiBqb3NlVG9EZXJcbn07XG4iLCAidmFyIGJ1ZmZlckVxdWFsID0gcmVxdWlyZSgnYnVmZmVyLWVxdWFsLWNvbnN0YW50LXRpbWUnKTtcbnZhciBCdWZmZXIgPSByZXF1aXJlKCdzYWZlLWJ1ZmZlcicpLkJ1ZmZlcjtcbnZhciBjcnlwdG8gPSByZXF1aXJlKCdjcnlwdG8nKTtcbnZhciBmb3JtYXRFY2RzYSA9IHJlcXVpcmUoJ2VjZHNhLXNpZy1mb3JtYXR0ZXInKTtcbnZhciB1dGlsID0gcmVxdWlyZSgndXRpbCcpO1xuXG52YXIgTVNHX0lOVkFMSURfQUxHT1JJVEhNID0gJ1wiJXNcIiBpcyBub3QgYSB2YWxpZCBhbGdvcml0aG0uXFxuICBTdXBwb3J0ZWQgYWxnb3JpdGhtcyBhcmU6XFxuICBcIkhTMjU2XCIsIFwiSFMzODRcIiwgXCJIUzUxMlwiLCBcIlJTMjU2XCIsIFwiUlMzODRcIiwgXCJSUzUxMlwiLCBcIlBTMjU2XCIsIFwiUFMzODRcIiwgXCJQUzUxMlwiLCBcIkVTMjU2XCIsIFwiRVMzODRcIiwgXCJFUzUxMlwiIGFuZCBcIm5vbmVcIi4nXG52YXIgTVNHX0lOVkFMSURfU0VDUkVUID0gJ3NlY3JldCBtdXN0IGJlIGEgc3RyaW5nIG9yIGJ1ZmZlcic7XG52YXIgTVNHX0lOVkFMSURfVkVSSUZJRVJfS0VZID0gJ2tleSBtdXN0IGJlIGEgc3RyaW5nIG9yIGEgYnVmZmVyJztcbnZhciBNU0dfSU5WQUxJRF9TSUdORVJfS0VZID0gJ2tleSBtdXN0IGJlIGEgc3RyaW5nLCBhIGJ1ZmZlciBvciBhbiBvYmplY3QnO1xuXG52YXIgc3VwcG9ydHNLZXlPYmplY3RzID0gdHlwZW9mIGNyeXB0by5jcmVhdGVQdWJsaWNLZXkgPT09ICdmdW5jdGlvbic7XG5pZiAoc3VwcG9ydHNLZXlPYmplY3RzKSB7XG4gIE1TR19JTlZBTElEX1ZFUklGSUVSX0tFWSArPSAnIG9yIGEgS2V5T2JqZWN0JztcbiAgTVNHX0lOVkFMSURfU0VDUkVUICs9ICdvciBhIEtleU9iamVjdCc7XG59XG5cbmZ1bmN0aW9uIGNoZWNrSXNQdWJsaWNLZXkoa2V5KSB7XG4gIGlmIChCdWZmZXIuaXNCdWZmZXIoa2V5KSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICghc3VwcG9ydHNLZXlPYmplY3RzKSB7XG4gICAgdGhyb3cgdHlwZUVycm9yKE1TR19JTlZBTElEX1ZFUklGSUVSX0tFWSk7XG4gIH1cblxuICBpZiAodHlwZW9mIGtleSAhPT0gJ29iamVjdCcpIHtcbiAgICB0aHJvdyB0eXBlRXJyb3IoTVNHX0lOVkFMSURfVkVSSUZJRVJfS0VZKTtcbiAgfVxuXG4gIGlmICh0eXBlb2Yga2V5LnR5cGUgIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgdHlwZUVycm9yKE1TR19JTlZBTElEX1ZFUklGSUVSX0tFWSk7XG4gIH1cblxuICBpZiAodHlwZW9mIGtleS5hc3ltbWV0cmljS2V5VHlwZSAhPT0gJ3N0cmluZycpIHtcbiAgICB0aHJvdyB0eXBlRXJyb3IoTVNHX0lOVkFMSURfVkVSSUZJRVJfS0VZKTtcbiAgfVxuXG4gIGlmICh0eXBlb2Yga2V5LmV4cG9ydCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IHR5cGVFcnJvcihNU0dfSU5WQUxJRF9WRVJJRklFUl9LRVkpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBjaGVja0lzUHJpdmF0ZUtleShrZXkpIHtcbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihrZXkpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBrZXkgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBrZXkgPT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdGhyb3cgdHlwZUVycm9yKE1TR19JTlZBTElEX1NJR05FUl9LRVkpO1xufTtcblxuZnVuY3Rpb24gY2hlY2tJc1NlY3JldEtleShrZXkpIHtcbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihrZXkpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBrZXkgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGtleTtcbiAgfVxuXG4gIGlmICghc3VwcG9ydHNLZXlPYmplY3RzKSB7XG4gICAgdGhyb3cgdHlwZUVycm9yKE1TR19JTlZBTElEX1NFQ1JFVCk7XG4gIH1cblxuICBpZiAodHlwZW9mIGtleSAhPT0gJ29iamVjdCcpIHtcbiAgICB0aHJvdyB0eXBlRXJyb3IoTVNHX0lOVkFMSURfU0VDUkVUKTtcbiAgfVxuXG4gIGlmIChrZXkudHlwZSAhPT0gJ3NlY3JldCcpIHtcbiAgICB0aHJvdyB0eXBlRXJyb3IoTVNHX0lOVkFMSURfU0VDUkVUKTtcbiAgfVxuXG4gIGlmICh0eXBlb2Yga2V5LmV4cG9ydCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IHR5cGVFcnJvcihNU0dfSU5WQUxJRF9TRUNSRVQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZyb21CYXNlNjQoYmFzZTY0KSB7XG4gIHJldHVybiBiYXNlNjRcbiAgICAucmVwbGFjZSgvPS9nLCAnJylcbiAgICAucmVwbGFjZSgvXFwrL2csICctJylcbiAgICAucmVwbGFjZSgvXFwvL2csICdfJyk7XG59XG5cbmZ1bmN0aW9uIHRvQmFzZTY0KGJhc2U2NHVybCkge1xuICBiYXNlNjR1cmwgPSBiYXNlNjR1cmwudG9TdHJpbmcoKTtcblxuICB2YXIgcGFkZGluZyA9IDQgLSBiYXNlNjR1cmwubGVuZ3RoICUgNDtcbiAgaWYgKHBhZGRpbmcgIT09IDQpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhZGRpbmc7ICsraSkge1xuICAgICAgYmFzZTY0dXJsICs9ICc9JztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYmFzZTY0dXJsXG4gICAgLnJlcGxhY2UoL1xcLS9nLCAnKycpXG4gICAgLnJlcGxhY2UoL18vZywgJy8nKTtcbn1cblxuZnVuY3Rpb24gdHlwZUVycm9yKHRlbXBsYXRlKSB7XG4gIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICB2YXIgZXJyTXNnID0gdXRpbC5mb3JtYXQuYmluZCh1dGlsLCB0ZW1wbGF0ZSkuYXBwbHkobnVsbCwgYXJncyk7XG4gIHJldHVybiBuZXcgVHlwZUVycm9yKGVyck1zZyk7XG59XG5cbmZ1bmN0aW9uIGJ1ZmZlck9yU3RyaW5nKG9iaikge1xuICByZXR1cm4gQnVmZmVyLmlzQnVmZmVyKG9iaikgfHwgdHlwZW9mIG9iaiA9PT0gJ3N0cmluZyc7XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZUlucHV0KHRoaW5nKSB7XG4gIGlmICghYnVmZmVyT3JTdHJpbmcodGhpbmcpKVxuICAgIHRoaW5nID0gSlNPTi5zdHJpbmdpZnkodGhpbmcpO1xuICByZXR1cm4gdGhpbmc7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUhtYWNTaWduZXIoYml0cykge1xuICByZXR1cm4gZnVuY3Rpb24gc2lnbih0aGluZywgc2VjcmV0KSB7XG4gICAgY2hlY2tJc1NlY3JldEtleShzZWNyZXQpO1xuICAgIHRoaW5nID0gbm9ybWFsaXplSW5wdXQodGhpbmcpO1xuICAgIHZhciBobWFjID0gY3J5cHRvLmNyZWF0ZUhtYWMoJ3NoYScgKyBiaXRzLCBzZWNyZXQpO1xuICAgIHZhciBzaWcgPSAoaG1hYy51cGRhdGUodGhpbmcpLCBobWFjLmRpZ2VzdCgnYmFzZTY0JykpXG4gICAgcmV0dXJuIGZyb21CYXNlNjQoc2lnKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVIbWFjVmVyaWZpZXIoYml0cykge1xuICByZXR1cm4gZnVuY3Rpb24gdmVyaWZ5KHRoaW5nLCBzaWduYXR1cmUsIHNlY3JldCkge1xuICAgIHZhciBjb21wdXRlZFNpZyA9IGNyZWF0ZUhtYWNTaWduZXIoYml0cykodGhpbmcsIHNlY3JldCk7XG4gICAgcmV0dXJuIGJ1ZmZlckVxdWFsKEJ1ZmZlci5mcm9tKHNpZ25hdHVyZSksIEJ1ZmZlci5mcm9tKGNvbXB1dGVkU2lnKSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlS2V5U2lnbmVyKGJpdHMpIHtcbiByZXR1cm4gZnVuY3Rpb24gc2lnbih0aGluZywgcHJpdmF0ZUtleSkge1xuICAgIGNoZWNrSXNQcml2YXRlS2V5KHByaXZhdGVLZXkpO1xuICAgIHRoaW5nID0gbm9ybWFsaXplSW5wdXQodGhpbmcpO1xuICAgIC8vIEV2ZW4gdGhvdWdoIHdlIGFyZSBzcGVjaWZ5aW5nIFwiUlNBXCIgaGVyZSwgdGhpcyB3b3JrcyB3aXRoIEVDRFNBXG4gICAgLy8ga2V5cyBhcyB3ZWxsLlxuICAgIHZhciBzaWduZXIgPSBjcnlwdG8uY3JlYXRlU2lnbignUlNBLVNIQScgKyBiaXRzKTtcbiAgICB2YXIgc2lnID0gKHNpZ25lci51cGRhdGUodGhpbmcpLCBzaWduZXIuc2lnbihwcml2YXRlS2V5LCAnYmFzZTY0JykpO1xuICAgIHJldHVybiBmcm9tQmFzZTY0KHNpZyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlS2V5VmVyaWZpZXIoYml0cykge1xuICByZXR1cm4gZnVuY3Rpb24gdmVyaWZ5KHRoaW5nLCBzaWduYXR1cmUsIHB1YmxpY0tleSkge1xuICAgIGNoZWNrSXNQdWJsaWNLZXkocHVibGljS2V5KTtcbiAgICB0aGluZyA9IG5vcm1hbGl6ZUlucHV0KHRoaW5nKTtcbiAgICBzaWduYXR1cmUgPSB0b0Jhc2U2NChzaWduYXR1cmUpO1xuICAgIHZhciB2ZXJpZmllciA9IGNyeXB0by5jcmVhdGVWZXJpZnkoJ1JTQS1TSEEnICsgYml0cyk7XG4gICAgdmVyaWZpZXIudXBkYXRlKHRoaW5nKTtcbiAgICByZXR1cm4gdmVyaWZpZXIudmVyaWZ5KHB1YmxpY0tleSwgc2lnbmF0dXJlLCAnYmFzZTY0Jyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlUFNTS2V5U2lnbmVyKGJpdHMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHNpZ24odGhpbmcsIHByaXZhdGVLZXkpIHtcbiAgICBjaGVja0lzUHJpdmF0ZUtleShwcml2YXRlS2V5KTtcbiAgICB0aGluZyA9IG5vcm1hbGl6ZUlucHV0KHRoaW5nKTtcbiAgICB2YXIgc2lnbmVyID0gY3J5cHRvLmNyZWF0ZVNpZ24oJ1JTQS1TSEEnICsgYml0cyk7XG4gICAgdmFyIHNpZyA9IChzaWduZXIudXBkYXRlKHRoaW5nKSwgc2lnbmVyLnNpZ24oe1xuICAgICAga2V5OiBwcml2YXRlS2V5LFxuICAgICAgcGFkZGluZzogY3J5cHRvLmNvbnN0YW50cy5SU0FfUEtDUzFfUFNTX1BBRERJTkcsXG4gICAgICBzYWx0TGVuZ3RoOiBjcnlwdG8uY29uc3RhbnRzLlJTQV9QU1NfU0FMVExFTl9ESUdFU1RcbiAgICB9LCAnYmFzZTY0JykpO1xuICAgIHJldHVybiBmcm9tQmFzZTY0KHNpZyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlUFNTS2V5VmVyaWZpZXIoYml0cykge1xuICByZXR1cm4gZnVuY3Rpb24gdmVyaWZ5KHRoaW5nLCBzaWduYXR1cmUsIHB1YmxpY0tleSkge1xuICAgIGNoZWNrSXNQdWJsaWNLZXkocHVibGljS2V5KTtcbiAgICB0aGluZyA9IG5vcm1hbGl6ZUlucHV0KHRoaW5nKTtcbiAgICBzaWduYXR1cmUgPSB0b0Jhc2U2NChzaWduYXR1cmUpO1xuICAgIHZhciB2ZXJpZmllciA9IGNyeXB0by5jcmVhdGVWZXJpZnkoJ1JTQS1TSEEnICsgYml0cyk7XG4gICAgdmVyaWZpZXIudXBkYXRlKHRoaW5nKTtcbiAgICByZXR1cm4gdmVyaWZpZXIudmVyaWZ5KHtcbiAgICAgIGtleTogcHVibGljS2V5LFxuICAgICAgcGFkZGluZzogY3J5cHRvLmNvbnN0YW50cy5SU0FfUEtDUzFfUFNTX1BBRERJTkcsXG4gICAgICBzYWx0TGVuZ3RoOiBjcnlwdG8uY29uc3RhbnRzLlJTQV9QU1NfU0FMVExFTl9ESUdFU1RcbiAgICB9LCBzaWduYXR1cmUsICdiYXNlNjQnKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVFQ0RTQVNpZ25lcihiaXRzKSB7XG4gIHZhciBpbm5lciA9IGNyZWF0ZUtleVNpZ25lcihiaXRzKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHNpZ24oKSB7XG4gICAgdmFyIHNpZ25hdHVyZSA9IGlubmVyLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgc2lnbmF0dXJlID0gZm9ybWF0RWNkc2EuZGVyVG9Kb3NlKHNpZ25hdHVyZSwgJ0VTJyArIGJpdHMpO1xuICAgIHJldHVybiBzaWduYXR1cmU7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUVDRFNBVmVyaWZlcihiaXRzKSB7XG4gIHZhciBpbm5lciA9IGNyZWF0ZUtleVZlcmlmaWVyKGJpdHMpO1xuICByZXR1cm4gZnVuY3Rpb24gdmVyaWZ5KHRoaW5nLCBzaWduYXR1cmUsIHB1YmxpY0tleSkge1xuICAgIHNpZ25hdHVyZSA9IGZvcm1hdEVjZHNhLmpvc2VUb0RlcihzaWduYXR1cmUsICdFUycgKyBiaXRzKS50b1N0cmluZygnYmFzZTY0Jyk7XG4gICAgdmFyIHJlc3VsdCA9IGlubmVyKHRoaW5nLCBzaWduYXR1cmUsIHB1YmxpY0tleSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTm9uZVNpZ25lcigpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHNpZ24oKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZU5vbmVWZXJpZmllcigpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHZlcmlmeSh0aGluZywgc2lnbmF0dXJlKSB7XG4gICAgcmV0dXJuIHNpZ25hdHVyZSA9PT0gJyc7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBqd2EoYWxnb3JpdGhtKSB7XG4gIHZhciBzaWduZXJGYWN0b3JpZXMgPSB7XG4gICAgaHM6IGNyZWF0ZUhtYWNTaWduZXIsXG4gICAgcnM6IGNyZWF0ZUtleVNpZ25lcixcbiAgICBwczogY3JlYXRlUFNTS2V5U2lnbmVyLFxuICAgIGVzOiBjcmVhdGVFQ0RTQVNpZ25lcixcbiAgICBub25lOiBjcmVhdGVOb25lU2lnbmVyLFxuICB9XG4gIHZhciB2ZXJpZmllckZhY3RvcmllcyA9IHtcbiAgICBoczogY3JlYXRlSG1hY1ZlcmlmaWVyLFxuICAgIHJzOiBjcmVhdGVLZXlWZXJpZmllcixcbiAgICBwczogY3JlYXRlUFNTS2V5VmVyaWZpZXIsXG4gICAgZXM6IGNyZWF0ZUVDRFNBVmVyaWZlcixcbiAgICBub25lOiBjcmVhdGVOb25lVmVyaWZpZXIsXG4gIH1cbiAgdmFyIG1hdGNoID0gYWxnb3JpdGhtLm1hdGNoKC9eKFJTfFBTfEVTfEhTKSgyNTZ8Mzg0fDUxMikkfF4obm9uZSkkL2kpO1xuICBpZiAoIW1hdGNoKVxuICAgIHRocm93IHR5cGVFcnJvcihNU0dfSU5WQUxJRF9BTEdPUklUSE0sIGFsZ29yaXRobSk7XG4gIHZhciBhbGdvID0gKG1hdGNoWzFdIHx8IG1hdGNoWzNdKS50b0xvd2VyQ2FzZSgpO1xuICB2YXIgYml0cyA9IG1hdGNoWzJdO1xuXG4gIHJldHVybiB7XG4gICAgc2lnbjogc2lnbmVyRmFjdG9yaWVzW2FsZ29dKGJpdHMpLFxuICAgIHZlcmlmeTogdmVyaWZpZXJGYWN0b3JpZXNbYWxnb10oYml0cyksXG4gIH1cbn07XG4iLCAiLypnbG9iYWwgbW9kdWxlKi9cbnZhciBCdWZmZXIgPSByZXF1aXJlKCdidWZmZXInKS5CdWZmZXI7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdG9TdHJpbmcob2JqKSB7XG4gIGlmICh0eXBlb2Ygb2JqID09PSAnc3RyaW5nJylcbiAgICByZXR1cm4gb2JqO1xuICBpZiAodHlwZW9mIG9iaiA9PT0gJ251bWJlcicgfHwgQnVmZmVyLmlzQnVmZmVyKG9iaikpXG4gICAgcmV0dXJuIG9iai50b1N0cmluZygpO1xuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqKTtcbn07XG4iLCAiLypnbG9iYWwgbW9kdWxlKi9cbnZhciBCdWZmZXIgPSByZXF1aXJlKCdzYWZlLWJ1ZmZlcicpLkJ1ZmZlcjtcbnZhciBEYXRhU3RyZWFtID0gcmVxdWlyZSgnLi9kYXRhLXN0cmVhbScpO1xudmFyIGp3YSA9IHJlcXVpcmUoJ2p3YScpO1xudmFyIFN0cmVhbSA9IHJlcXVpcmUoJ3N0cmVhbScpO1xudmFyIHRvU3RyaW5nID0gcmVxdWlyZSgnLi90b3N0cmluZycpO1xudmFyIHV0aWwgPSByZXF1aXJlKCd1dGlsJyk7XG5cbmZ1bmN0aW9uIGJhc2U2NHVybChzdHJpbmcsIGVuY29kaW5nKSB7XG4gIHJldHVybiBCdWZmZXJcbiAgICAuZnJvbShzdHJpbmcsIGVuY29kaW5nKVxuICAgIC50b1N0cmluZygnYmFzZTY0JylcbiAgICAucmVwbGFjZSgvPS9nLCAnJylcbiAgICAucmVwbGFjZSgvXFwrL2csICctJylcbiAgICAucmVwbGFjZSgvXFwvL2csICdfJyk7XG59XG5cbmZ1bmN0aW9uIGp3c1NlY3VyZWRJbnB1dChoZWFkZXIsIHBheWxvYWQsIGVuY29kaW5nKSB7XG4gIGVuY29kaW5nID0gZW5jb2RpbmcgfHwgJ3V0ZjgnO1xuICB2YXIgZW5jb2RlZEhlYWRlciA9IGJhc2U2NHVybCh0b1N0cmluZyhoZWFkZXIpLCAnYmluYXJ5Jyk7XG4gIHZhciBlbmNvZGVkUGF5bG9hZCA9IGJhc2U2NHVybCh0b1N0cmluZyhwYXlsb2FkKSwgZW5jb2RpbmcpO1xuICByZXR1cm4gdXRpbC5mb3JtYXQoJyVzLiVzJywgZW5jb2RlZEhlYWRlciwgZW5jb2RlZFBheWxvYWQpO1xufVxuXG5mdW5jdGlvbiBqd3NTaWduKG9wdHMpIHtcbiAgdmFyIGhlYWRlciA9IG9wdHMuaGVhZGVyO1xuICB2YXIgcGF5bG9hZCA9IG9wdHMucGF5bG9hZDtcbiAgdmFyIHNlY3JldE9yS2V5ID0gb3B0cy5zZWNyZXQgfHwgb3B0cy5wcml2YXRlS2V5O1xuICB2YXIgZW5jb2RpbmcgPSBvcHRzLmVuY29kaW5nO1xuICB2YXIgYWxnbyA9IGp3YShoZWFkZXIuYWxnKTtcbiAgdmFyIHNlY3VyZWRJbnB1dCA9IGp3c1NlY3VyZWRJbnB1dChoZWFkZXIsIHBheWxvYWQsIGVuY29kaW5nKTtcbiAgdmFyIHNpZ25hdHVyZSA9IGFsZ28uc2lnbihzZWN1cmVkSW5wdXQsIHNlY3JldE9yS2V5KTtcbiAgcmV0dXJuIHV0aWwuZm9ybWF0KCclcy4lcycsIHNlY3VyZWRJbnB1dCwgc2lnbmF0dXJlKTtcbn1cblxuZnVuY3Rpb24gU2lnblN0cmVhbShvcHRzKSB7XG4gIHZhciBzZWNyZXQgPSBvcHRzLnNlY3JldHx8b3B0cy5wcml2YXRlS2V5fHxvcHRzLmtleTtcbiAgdmFyIHNlY3JldFN0cmVhbSA9IG5ldyBEYXRhU3RyZWFtKHNlY3JldCk7XG4gIHRoaXMucmVhZGFibGUgPSB0cnVlO1xuICB0aGlzLmhlYWRlciA9IG9wdHMuaGVhZGVyO1xuICB0aGlzLmVuY29kaW5nID0gb3B0cy5lbmNvZGluZztcbiAgdGhpcy5zZWNyZXQgPSB0aGlzLnByaXZhdGVLZXkgPSB0aGlzLmtleSA9IHNlY3JldFN0cmVhbTtcbiAgdGhpcy5wYXlsb2FkID0gbmV3IERhdGFTdHJlYW0ob3B0cy5wYXlsb2FkKTtcbiAgdGhpcy5zZWNyZXQub25jZSgnY2xvc2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLnBheWxvYWQud3JpdGFibGUgJiYgdGhpcy5yZWFkYWJsZSlcbiAgICAgIHRoaXMuc2lnbigpO1xuICB9LmJpbmQodGhpcykpO1xuXG4gIHRoaXMucGF5bG9hZC5vbmNlKCdjbG9zZScsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuc2VjcmV0LndyaXRhYmxlICYmIHRoaXMucmVhZGFibGUpXG4gICAgICB0aGlzLnNpZ24oKTtcbiAgfS5iaW5kKHRoaXMpKTtcbn1cbnV0aWwuaW5oZXJpdHMoU2lnblN0cmVhbSwgU3RyZWFtKTtcblxuU2lnblN0cmVhbS5wcm90b3R5cGUuc2lnbiA9IGZ1bmN0aW9uIHNpZ24oKSB7XG4gIHRyeSB7XG4gICAgdmFyIHNpZ25hdHVyZSA9IGp3c1NpZ24oe1xuICAgICAgaGVhZGVyOiB0aGlzLmhlYWRlcixcbiAgICAgIHBheWxvYWQ6IHRoaXMucGF5bG9hZC5idWZmZXIsXG4gICAgICBzZWNyZXQ6IHRoaXMuc2VjcmV0LmJ1ZmZlcixcbiAgICAgIGVuY29kaW5nOiB0aGlzLmVuY29kaW5nXG4gICAgfSk7XG4gICAgdGhpcy5lbWl0KCdkb25lJywgc2lnbmF0dXJlKTtcbiAgICB0aGlzLmVtaXQoJ2RhdGEnLCBzaWduYXR1cmUpO1xuICAgIHRoaXMuZW1pdCgnZW5kJyk7XG4gICAgdGhpcy5yZWFkYWJsZSA9IGZhbHNlO1xuICAgIHJldHVybiBzaWduYXR1cmU7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aGlzLnJlYWRhYmxlID0gZmFsc2U7XG4gICAgdGhpcy5lbWl0KCdlcnJvcicsIGUpO1xuICAgIHRoaXMuZW1pdCgnY2xvc2UnKTtcbiAgfVxufTtcblxuU2lnblN0cmVhbS5zaWduID0gandzU2lnbjtcblxubW9kdWxlLmV4cG9ydHMgPSBTaWduU3RyZWFtO1xuIiwgIi8qZ2xvYmFsIG1vZHVsZSovXG52YXIgQnVmZmVyID0gcmVxdWlyZSgnc2FmZS1idWZmZXInKS5CdWZmZXI7XG52YXIgRGF0YVN0cmVhbSA9IHJlcXVpcmUoJy4vZGF0YS1zdHJlYW0nKTtcbnZhciBqd2EgPSByZXF1aXJlKCdqd2EnKTtcbnZhciBTdHJlYW0gPSByZXF1aXJlKCdzdHJlYW0nKTtcbnZhciB0b1N0cmluZyA9IHJlcXVpcmUoJy4vdG9zdHJpbmcnKTtcbnZhciB1dGlsID0gcmVxdWlyZSgndXRpbCcpO1xudmFyIEpXU19SRUdFWCA9IC9eW2EtekEtWjAtOVxcLV9dKz9cXC5bYS16QS1aMC05XFwtX10rP1xcLihbYS16QS1aMC05XFwtX10rKT8kLztcblxuZnVuY3Rpb24gaXNPYmplY3QodGhpbmcpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0aGluZykgPT09ICdbb2JqZWN0IE9iamVjdF0nO1xufVxuXG5mdW5jdGlvbiBzYWZlSnNvblBhcnNlKHRoaW5nKSB7XG4gIGlmIChpc09iamVjdCh0aGluZykpXG4gICAgcmV0dXJuIHRoaW5nO1xuICB0cnkgeyByZXR1cm4gSlNPTi5wYXJzZSh0aGluZyk7IH1cbiAgY2F0Y2ggKGUpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfVxufVxuXG5mdW5jdGlvbiBoZWFkZXJGcm9tSldTKGp3c1NpZykge1xuICB2YXIgZW5jb2RlZEhlYWRlciA9IGp3c1NpZy5zcGxpdCgnLicsIDEpWzBdO1xuICByZXR1cm4gc2FmZUpzb25QYXJzZShCdWZmZXIuZnJvbShlbmNvZGVkSGVhZGVyLCAnYmFzZTY0JykudG9TdHJpbmcoJ2JpbmFyeScpKTtcbn1cblxuZnVuY3Rpb24gc2VjdXJlZElucHV0RnJvbUpXUyhqd3NTaWcpIHtcbiAgcmV0dXJuIGp3c1NpZy5zcGxpdCgnLicsIDIpLmpvaW4oJy4nKTtcbn1cblxuZnVuY3Rpb24gc2lnbmF0dXJlRnJvbUpXUyhqd3NTaWcpIHtcbiAgcmV0dXJuIGp3c1NpZy5zcGxpdCgnLicpWzJdO1xufVxuXG5mdW5jdGlvbiBwYXlsb2FkRnJvbUpXUyhqd3NTaWcsIGVuY29kaW5nKSB7XG4gIGVuY29kaW5nID0gZW5jb2RpbmcgfHwgJ3V0ZjgnO1xuICB2YXIgcGF5bG9hZCA9IGp3c1NpZy5zcGxpdCgnLicpWzFdO1xuICByZXR1cm4gQnVmZmVyLmZyb20ocGF5bG9hZCwgJ2Jhc2U2NCcpLnRvU3RyaW5nKGVuY29kaW5nKTtcbn1cblxuZnVuY3Rpb24gaXNWYWxpZEp3cyhzdHJpbmcpIHtcbiAgcmV0dXJuIEpXU19SRUdFWC50ZXN0KHN0cmluZykgJiYgISFoZWFkZXJGcm9tSldTKHN0cmluZyk7XG59XG5cbmZ1bmN0aW9uIGp3c1ZlcmlmeShqd3NTaWcsIGFsZ29yaXRobSwgc2VjcmV0T3JLZXkpIHtcbiAgaWYgKCFhbGdvcml0aG0pIHtcbiAgICB2YXIgZXJyID0gbmV3IEVycm9yKFwiTWlzc2luZyBhbGdvcml0aG0gcGFyYW1ldGVyIGZvciBqd3MudmVyaWZ5XCIpO1xuICAgIGVyci5jb2RlID0gXCJNSVNTSU5HX0FMR09SSVRITVwiO1xuICAgIHRocm93IGVycjtcbiAgfVxuICBqd3NTaWcgPSB0b1N0cmluZyhqd3NTaWcpO1xuICB2YXIgc2lnbmF0dXJlID0gc2lnbmF0dXJlRnJvbUpXUyhqd3NTaWcpO1xuICB2YXIgc2VjdXJlZElucHV0ID0gc2VjdXJlZElucHV0RnJvbUpXUyhqd3NTaWcpO1xuICB2YXIgYWxnbyA9IGp3YShhbGdvcml0aG0pO1xuICByZXR1cm4gYWxnby52ZXJpZnkoc2VjdXJlZElucHV0LCBzaWduYXR1cmUsIHNlY3JldE9yS2V5KTtcbn1cblxuZnVuY3Rpb24gandzRGVjb2RlKGp3c1NpZywgb3B0cykge1xuICBvcHRzID0gb3B0cyB8fCB7fTtcbiAgandzU2lnID0gdG9TdHJpbmcoandzU2lnKTtcblxuICBpZiAoIWlzVmFsaWRKd3MoandzU2lnKSlcbiAgICByZXR1cm4gbnVsbDtcblxuICB2YXIgaGVhZGVyID0gaGVhZGVyRnJvbUpXUyhqd3NTaWcpO1xuXG4gIGlmICghaGVhZGVyKVxuICAgIHJldHVybiBudWxsO1xuXG4gIHZhciBwYXlsb2FkID0gcGF5bG9hZEZyb21KV1MoandzU2lnKTtcbiAgaWYgKGhlYWRlci50eXAgPT09ICdKV1QnIHx8IG9wdHMuanNvbilcbiAgICBwYXlsb2FkID0gSlNPTi5wYXJzZShwYXlsb2FkLCBvcHRzLmVuY29kaW5nKTtcblxuICByZXR1cm4ge1xuICAgIGhlYWRlcjogaGVhZGVyLFxuICAgIHBheWxvYWQ6IHBheWxvYWQsXG4gICAgc2lnbmF0dXJlOiBzaWduYXR1cmVGcm9tSldTKGp3c1NpZylcbiAgfTtcbn1cblxuZnVuY3Rpb24gVmVyaWZ5U3RyZWFtKG9wdHMpIHtcbiAgb3B0cyA9IG9wdHMgfHwge307XG4gIHZhciBzZWNyZXRPcktleSA9IG9wdHMuc2VjcmV0fHxvcHRzLnB1YmxpY0tleXx8b3B0cy5rZXk7XG4gIHZhciBzZWNyZXRTdHJlYW0gPSBuZXcgRGF0YVN0cmVhbShzZWNyZXRPcktleSk7XG4gIHRoaXMucmVhZGFibGUgPSB0cnVlO1xuICB0aGlzLmFsZ29yaXRobSA9IG9wdHMuYWxnb3JpdGhtO1xuICB0aGlzLmVuY29kaW5nID0gb3B0cy5lbmNvZGluZztcbiAgdGhpcy5zZWNyZXQgPSB0aGlzLnB1YmxpY0tleSA9IHRoaXMua2V5ID0gc2VjcmV0U3RyZWFtO1xuICB0aGlzLnNpZ25hdHVyZSA9IG5ldyBEYXRhU3RyZWFtKG9wdHMuc2lnbmF0dXJlKTtcbiAgdGhpcy5zZWNyZXQub25jZSgnY2xvc2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLnNpZ25hdHVyZS53cml0YWJsZSAmJiB0aGlzLnJlYWRhYmxlKVxuICAgICAgdGhpcy52ZXJpZnkoKTtcbiAgfS5iaW5kKHRoaXMpKTtcblxuICB0aGlzLnNpZ25hdHVyZS5vbmNlKCdjbG9zZScsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuc2VjcmV0LndyaXRhYmxlICYmIHRoaXMucmVhZGFibGUpXG4gICAgICB0aGlzLnZlcmlmeSgpO1xuICB9LmJpbmQodGhpcykpO1xufVxudXRpbC5pbmhlcml0cyhWZXJpZnlTdHJlYW0sIFN0cmVhbSk7XG5WZXJpZnlTdHJlYW0ucHJvdG90eXBlLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeSgpIHtcbiAgdHJ5IHtcbiAgICB2YXIgdmFsaWQgPSBqd3NWZXJpZnkodGhpcy5zaWduYXR1cmUuYnVmZmVyLCB0aGlzLmFsZ29yaXRobSwgdGhpcy5rZXkuYnVmZmVyKTtcbiAgICB2YXIgb2JqID0gandzRGVjb2RlKHRoaXMuc2lnbmF0dXJlLmJ1ZmZlciwgdGhpcy5lbmNvZGluZyk7XG4gICAgdGhpcy5lbWl0KCdkb25lJywgdmFsaWQsIG9iaik7XG4gICAgdGhpcy5lbWl0KCdkYXRhJywgdmFsaWQpO1xuICAgIHRoaXMuZW1pdCgnZW5kJyk7XG4gICAgdGhpcy5yZWFkYWJsZSA9IGZhbHNlO1xuICAgIHJldHVybiB2YWxpZDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRoaXMucmVhZGFibGUgPSBmYWxzZTtcbiAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZSk7XG4gICAgdGhpcy5lbWl0KCdjbG9zZScpO1xuICB9XG59O1xuXG5WZXJpZnlTdHJlYW0uZGVjb2RlID0gandzRGVjb2RlO1xuVmVyaWZ5U3RyZWFtLmlzVmFsaWQgPSBpc1ZhbGlkSndzO1xuVmVyaWZ5U3RyZWFtLnZlcmlmeSA9IGp3c1ZlcmlmeTtcblxubW9kdWxlLmV4cG9ydHMgPSBWZXJpZnlTdHJlYW07XG4iLCAiLypnbG9iYWwgZXhwb3J0cyovXG52YXIgU2lnblN0cmVhbSA9IHJlcXVpcmUoJy4vbGliL3NpZ24tc3RyZWFtJyk7XG52YXIgVmVyaWZ5U3RyZWFtID0gcmVxdWlyZSgnLi9saWIvdmVyaWZ5LXN0cmVhbScpO1xuXG52YXIgQUxHT1JJVEhNUyA9IFtcbiAgJ0hTMjU2JywgJ0hTMzg0JywgJ0hTNTEyJyxcbiAgJ1JTMjU2JywgJ1JTMzg0JywgJ1JTNTEyJyxcbiAgJ1BTMjU2JywgJ1BTMzg0JywgJ1BTNTEyJyxcbiAgJ0VTMjU2JywgJ0VTMzg0JywgJ0VTNTEyJ1xuXTtcblxuZXhwb3J0cy5BTEdPUklUSE1TID0gQUxHT1JJVEhNUztcbmV4cG9ydHMuc2lnbiA9IFNpZ25TdHJlYW0uc2lnbjtcbmV4cG9ydHMudmVyaWZ5ID0gVmVyaWZ5U3RyZWFtLnZlcmlmeTtcbmV4cG9ydHMuZGVjb2RlID0gVmVyaWZ5U3RyZWFtLmRlY29kZTtcbmV4cG9ydHMuaXNWYWxpZCA9IFZlcmlmeVN0cmVhbS5pc1ZhbGlkO1xuZXhwb3J0cy5jcmVhdGVTaWduID0gZnVuY3Rpb24gY3JlYXRlU2lnbihvcHRzKSB7XG4gIHJldHVybiBuZXcgU2lnblN0cmVhbShvcHRzKTtcbn07XG5leHBvcnRzLmNyZWF0ZVZlcmlmeSA9IGZ1bmN0aW9uIGNyZWF0ZVZlcmlmeShvcHRzKSB7XG4gIHJldHVybiBuZXcgVmVyaWZ5U3RyZWFtKG9wdHMpO1xufTtcbiIsICJ2YXIgandzID0gcmVxdWlyZSgnandzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGp3dCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIGRlY29kZWQgPSBqd3MuZGVjb2RlKGp3dCwgb3B0aW9ucyk7XG4gIGlmICghZGVjb2RlZCkgeyByZXR1cm4gbnVsbDsgfVxuICB2YXIgcGF5bG9hZCA9IGRlY29kZWQucGF5bG9hZDtcblxuICAvL3RyeSBwYXJzZSB0aGUgcGF5bG9hZFxuICBpZih0eXBlb2YgcGF5bG9hZCA9PT0gJ3N0cmluZycpIHtcbiAgICB0cnkge1xuICAgICAgdmFyIG9iaiA9IEpTT04ucGFyc2UocGF5bG9hZCk7XG4gICAgICBpZihvYmogIT09IG51bGwgJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgcGF5bG9hZCA9IG9iajtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7IH1cbiAgfVxuXG4gIC8vcmV0dXJuIGhlYWRlciBpZiBgY29tcGxldGVgIG9wdGlvbiBpcyBlbmFibGVkLiAgaGVhZGVyIGluY2x1ZGVzIGNsYWltc1xuICAvL3N1Y2ggYXMgYGtpZGAgYW5kIGBhbGdgIHVzZWQgdG8gc2VsZWN0IHRoZSBrZXkgd2l0aGluIGEgSldLUyBuZWVkZWQgdG9cbiAgLy92ZXJpZnkgdGhlIHNpZ25hdHVyZVxuICBpZiAob3B0aW9ucy5jb21wbGV0ZSA9PT0gdHJ1ZSkge1xuICAgIHJldHVybiB7XG4gICAgICBoZWFkZXI6IGRlY29kZWQuaGVhZGVyLFxuICAgICAgcGF5bG9hZDogcGF5bG9hZCxcbiAgICAgIHNpZ25hdHVyZTogZGVjb2RlZC5zaWduYXR1cmVcbiAgICB9O1xuICB9XG4gIHJldHVybiBwYXlsb2FkO1xufTtcbiIsICJ2YXIgSnNvbldlYlRva2VuRXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSwgZXJyb3IpIHtcbiAgRXJyb3IuY2FsbCh0aGlzLCBtZXNzYWdlKTtcbiAgaWYoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcbiAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCB0aGlzLmNvbnN0cnVjdG9yKTtcbiAgfVxuICB0aGlzLm5hbWUgPSAnSnNvbldlYlRva2VuRXJyb3InO1xuICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICBpZiAoZXJyb3IpIHRoaXMuaW5uZXIgPSBlcnJvcjtcbn07XG5cbkpzb25XZWJUb2tlbkVycm9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTtcbkpzb25XZWJUb2tlbkVycm9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEpzb25XZWJUb2tlbkVycm9yO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEpzb25XZWJUb2tlbkVycm9yO1xuIiwgInZhciBKc29uV2ViVG9rZW5FcnJvciA9IHJlcXVpcmUoJy4vSnNvbldlYlRva2VuRXJyb3InKTtcblxudmFyIE5vdEJlZm9yZUVycm9yID0gZnVuY3Rpb24gKG1lc3NhZ2UsIGRhdGUpIHtcbiAgSnNvbldlYlRva2VuRXJyb3IuY2FsbCh0aGlzLCBtZXNzYWdlKTtcbiAgdGhpcy5uYW1lID0gJ05vdEJlZm9yZUVycm9yJztcbiAgdGhpcy5kYXRlID0gZGF0ZTtcbn07XG5cbk5vdEJlZm9yZUVycm9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoSnNvbldlYlRva2VuRXJyb3IucHJvdG90eXBlKTtcblxuTm90QmVmb3JlRXJyb3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTm90QmVmb3JlRXJyb3I7XG5cbm1vZHVsZS5leHBvcnRzID0gTm90QmVmb3JlRXJyb3I7IiwgInZhciBKc29uV2ViVG9rZW5FcnJvciA9IHJlcXVpcmUoJy4vSnNvbldlYlRva2VuRXJyb3InKTtcblxudmFyIFRva2VuRXhwaXJlZEVycm9yID0gZnVuY3Rpb24gKG1lc3NhZ2UsIGV4cGlyZWRBdCkge1xuICBKc29uV2ViVG9rZW5FcnJvci5jYWxsKHRoaXMsIG1lc3NhZ2UpO1xuICB0aGlzLm5hbWUgPSAnVG9rZW5FeHBpcmVkRXJyb3InO1xuICB0aGlzLmV4cGlyZWRBdCA9IGV4cGlyZWRBdDtcbn07XG5cblRva2VuRXhwaXJlZEVycm9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoSnNvbldlYlRva2VuRXJyb3IucHJvdG90eXBlKTtcblxuVG9rZW5FeHBpcmVkRXJyb3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVG9rZW5FeHBpcmVkRXJyb3I7XG5cbm1vZHVsZS5leHBvcnRzID0gVG9rZW5FeHBpcmVkRXJyb3I7IiwgIi8qKlxuICogSGVscGVycy5cbiAqL1xuXG52YXIgcyA9IDEwMDA7XG52YXIgbSA9IHMgKiA2MDtcbnZhciBoID0gbSAqIDYwO1xudmFyIGQgPSBoICogMjQ7XG52YXIgdyA9IGQgKiA3O1xudmFyIHkgPSBkICogMzY1LjI1O1xuXG4vKipcbiAqIFBhcnNlIG9yIGZvcm1hdCB0aGUgZ2l2ZW4gYHZhbGAuXG4gKlxuICogT3B0aW9uczpcbiAqXG4gKiAgLSBgbG9uZ2AgdmVyYm9zZSBmb3JtYXR0aW5nIFtmYWxzZV1cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IHZhbFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHRocm93cyB7RXJyb3J9IHRocm93IGFuIGVycm9yIGlmIHZhbCBpcyBub3QgYSBub24tZW1wdHkgc3RyaW5nIG9yIGEgbnVtYmVyXG4gKiBAcmV0dXJuIHtTdHJpbmd8TnVtYmVyfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh2YWwsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbDtcbiAgaWYgKHR5cGUgPT09ICdzdHJpbmcnICYmIHZhbC5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIHBhcnNlKHZhbCk7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gJ251bWJlcicgJiYgaXNGaW5pdGUodmFsKSkge1xuICAgIHJldHVybiBvcHRpb25zLmxvbmcgPyBmbXRMb25nKHZhbCkgOiBmbXRTaG9ydCh2YWwpO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICAndmFsIGlzIG5vdCBhIG5vbi1lbXB0eSBzdHJpbmcgb3IgYSB2YWxpZCBudW1iZXIuIHZhbD0nICtcbiAgICAgIEpTT04uc3RyaW5naWZ5KHZhbClcbiAgKTtcbn07XG5cbi8qKlxuICogUGFyc2UgdGhlIGdpdmVuIGBzdHJgIGFuZCByZXR1cm4gbWlsbGlzZWNvbmRzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge051bWJlcn1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlKHN0cikge1xuICBzdHIgPSBTdHJpbmcoc3RyKTtcbiAgaWYgKHN0ci5sZW5ndGggPiAxMDApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIG1hdGNoID0gL14oLT8oPzpcXGQrKT9cXC4/XFxkKykgKihtaWxsaXNlY29uZHM/fG1zZWNzP3xtc3xzZWNvbmRzP3xzZWNzP3xzfG1pbnV0ZXM/fG1pbnM/fG18aG91cnM/fGhycz98aHxkYXlzP3xkfHdlZWtzP3x3fHllYXJzP3x5cnM/fHkpPyQvaS5leGVjKFxuICAgIHN0clxuICApO1xuICBpZiAoIW1hdGNoKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBuID0gcGFyc2VGbG9hdChtYXRjaFsxXSk7XG4gIHZhciB0eXBlID0gKG1hdGNoWzJdIHx8ICdtcycpLnRvTG93ZXJDYXNlKCk7XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgJ3llYXJzJzpcbiAgICBjYXNlICd5ZWFyJzpcbiAgICBjYXNlICd5cnMnOlxuICAgIGNhc2UgJ3lyJzpcbiAgICBjYXNlICd5JzpcbiAgICAgIHJldHVybiBuICogeTtcbiAgICBjYXNlICd3ZWVrcyc6XG4gICAgY2FzZSAnd2Vlayc6XG4gICAgY2FzZSAndyc6XG4gICAgICByZXR1cm4gbiAqIHc7XG4gICAgY2FzZSAnZGF5cyc6XG4gICAgY2FzZSAnZGF5JzpcbiAgICBjYXNlICdkJzpcbiAgICAgIHJldHVybiBuICogZDtcbiAgICBjYXNlICdob3Vycyc6XG4gICAgY2FzZSAnaG91cic6XG4gICAgY2FzZSAnaHJzJzpcbiAgICBjYXNlICdocic6XG4gICAgY2FzZSAnaCc6XG4gICAgICByZXR1cm4gbiAqIGg7XG4gICAgY2FzZSAnbWludXRlcyc6XG4gICAgY2FzZSAnbWludXRlJzpcbiAgICBjYXNlICdtaW5zJzpcbiAgICBjYXNlICdtaW4nOlxuICAgIGNhc2UgJ20nOlxuICAgICAgcmV0dXJuIG4gKiBtO1xuICAgIGNhc2UgJ3NlY29uZHMnOlxuICAgIGNhc2UgJ3NlY29uZCc6XG4gICAgY2FzZSAnc2Vjcyc6XG4gICAgY2FzZSAnc2VjJzpcbiAgICBjYXNlICdzJzpcbiAgICAgIHJldHVybiBuICogcztcbiAgICBjYXNlICdtaWxsaXNlY29uZHMnOlxuICAgIGNhc2UgJ21pbGxpc2Vjb25kJzpcbiAgICBjYXNlICdtc2Vjcyc6XG4gICAgY2FzZSAnbXNlYyc6XG4gICAgY2FzZSAnbXMnOlxuICAgICAgcmV0dXJuIG47XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuLyoqXG4gKiBTaG9ydCBmb3JtYXQgZm9yIGBtc2AuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG1zXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBmbXRTaG9ydChtcykge1xuICB2YXIgbXNBYnMgPSBNYXRoLmFicyhtcyk7XG4gIGlmIChtc0FicyA+PSBkKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBkKSArICdkJztcbiAgfVxuICBpZiAobXNBYnMgPj0gaCkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gaCkgKyAnaCc7XG4gIH1cbiAgaWYgKG1zQWJzID49IG0pIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIG0pICsgJ20nO1xuICB9XG4gIGlmIChtc0FicyA+PSBzKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBzKSArICdzJztcbiAgfVxuICByZXR1cm4gbXMgKyAnbXMnO1xufVxuXG4vKipcbiAqIExvbmcgZm9ybWF0IGZvciBgbXNgLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBtc1xuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gZm10TG9uZyhtcykge1xuICB2YXIgbXNBYnMgPSBNYXRoLmFicyhtcyk7XG4gIGlmIChtc0FicyA+PSBkKSB7XG4gICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIGQsICdkYXknKTtcbiAgfVxuICBpZiAobXNBYnMgPj0gaCkge1xuICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBoLCAnaG91cicpO1xuICB9XG4gIGlmIChtc0FicyA+PSBtKSB7XG4gICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIG0sICdtaW51dGUnKTtcbiAgfVxuICBpZiAobXNBYnMgPj0gcykge1xuICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBzLCAnc2Vjb25kJyk7XG4gIH1cbiAgcmV0dXJuIG1zICsgJyBtcyc7XG59XG5cbi8qKlxuICogUGx1cmFsaXphdGlvbiBoZWxwZXIuXG4gKi9cblxuZnVuY3Rpb24gcGx1cmFsKG1zLCBtc0FicywgbiwgbmFtZSkge1xuICB2YXIgaXNQbHVyYWwgPSBtc0FicyA+PSBuICogMS41O1xuICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIG4pICsgJyAnICsgbmFtZSArIChpc1BsdXJhbCA/ICdzJyA6ICcnKTtcbn1cbiIsICJ2YXIgbXMgPSByZXF1aXJlKCdtcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh0aW1lLCBpYXQpIHtcbiAgdmFyIHRpbWVzdGFtcCA9IGlhdCB8fCBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwKTtcblxuICBpZiAodHlwZW9mIHRpbWUgPT09ICdzdHJpbmcnKSB7XG4gICAgdmFyIG1pbGxpc2Vjb25kcyA9IG1zKHRpbWUpO1xuICAgIGlmICh0eXBlb2YgbWlsbGlzZWNvbmRzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXR1cm4gTWF0aC5mbG9vcih0aW1lc3RhbXAgKyBtaWxsaXNlY29uZHMgLyAxMDAwKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgdGltZSA9PT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gdGltZXN0YW1wICsgdGltZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm47XG4gIH1cblxufTsiLCAiLy8gTm90ZTogdGhpcyBpcyB0aGUgc2VtdmVyLm9yZyB2ZXJzaW9uIG9mIHRoZSBzcGVjIHRoYXQgaXQgaW1wbGVtZW50c1xuLy8gTm90IG5lY2Vzc2FyaWx5IHRoZSBwYWNrYWdlIHZlcnNpb24gb2YgdGhpcyBjb2RlLlxuY29uc3QgU0VNVkVSX1NQRUNfVkVSU0lPTiA9ICcyLjAuMCdcblxuY29uc3QgTUFYX0xFTkdUSCA9IDI1NlxuY29uc3QgTUFYX1NBRkVfSU5URUdFUiA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSIHx8XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyA5MDA3MTk5MjU0NzQwOTkxXG5cbi8vIE1heCBzYWZlIHNlZ21lbnQgbGVuZ3RoIGZvciBjb2VyY2lvbi5cbmNvbnN0IE1BWF9TQUZFX0NPTVBPTkVOVF9MRU5HVEggPSAxNlxuXG4vLyBNYXggc2FmZSBsZW5ndGggZm9yIGEgYnVpbGQgaWRlbnRpZmllci4gVGhlIG1heCBsZW5ndGggbWludXMgNiBjaGFyYWN0ZXJzIGZvclxuLy8gdGhlIHNob3J0ZXN0IHZlcnNpb24gd2l0aCBhIGJ1aWxkIDAuMC4wK0JVSUxELlxuY29uc3QgTUFYX1NBRkVfQlVJTERfTEVOR1RIID0gTUFYX0xFTkdUSCAtIDZcblxuY29uc3QgUkVMRUFTRV9UWVBFUyA9IFtcbiAgJ21ham9yJyxcbiAgJ3ByZW1ham9yJyxcbiAgJ21pbm9yJyxcbiAgJ3ByZW1pbm9yJyxcbiAgJ3BhdGNoJyxcbiAgJ3ByZXBhdGNoJyxcbiAgJ3ByZXJlbGVhc2UnLFxuXVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgTUFYX0xFTkdUSCxcbiAgTUFYX1NBRkVfQ09NUE9ORU5UX0xFTkdUSCxcbiAgTUFYX1NBRkVfQlVJTERfTEVOR1RILFxuICBNQVhfU0FGRV9JTlRFR0VSLFxuICBSRUxFQVNFX1RZUEVTLFxuICBTRU1WRVJfU1BFQ19WRVJTSU9OLFxuICBGTEFHX0lOQ0xVREVfUFJFUkVMRUFTRTogMGIwMDEsXG4gIEZMQUdfTE9PU0U6IDBiMDEwLFxufVxuIiwgImNvbnN0IGRlYnVnID0gKFxuICB0eXBlb2YgcHJvY2VzcyA9PT0gJ29iamVjdCcgJiZcbiAgcHJvY2Vzcy5lbnYgJiZcbiAgcHJvY2Vzcy5lbnYuTk9ERV9ERUJVRyAmJlxuICAvXFxic2VtdmVyXFxiL2kudGVzdChwcm9jZXNzLmVudi5OT0RFX0RFQlVHKVxuKSA/ICguLi5hcmdzKSA9PiBjb25zb2xlLmVycm9yKCdTRU1WRVInLCAuLi5hcmdzKVxuICA6ICgpID0+IHt9XG5cbm1vZHVsZS5leHBvcnRzID0gZGVidWdcbiIsICJjb25zdCB7XG4gIE1BWF9TQUZFX0NPTVBPTkVOVF9MRU5HVEgsXG4gIE1BWF9TQUZFX0JVSUxEX0xFTkdUSCxcbiAgTUFYX0xFTkdUSCxcbn0gPSByZXF1aXJlKCcuL2NvbnN0YW50cycpXG5jb25zdCBkZWJ1ZyA9IHJlcXVpcmUoJy4vZGVidWcnKVxuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0ge31cblxuLy8gVGhlIGFjdHVhbCByZWdleHBzIGdvIG9uIGV4cG9ydHMucmVcbmNvbnN0IHJlID0gZXhwb3J0cy5yZSA9IFtdXG5jb25zdCBzYWZlUmUgPSBleHBvcnRzLnNhZmVSZSA9IFtdXG5jb25zdCBzcmMgPSBleHBvcnRzLnNyYyA9IFtdXG5jb25zdCBzYWZlU3JjID0gZXhwb3J0cy5zYWZlU3JjID0gW11cbmNvbnN0IHQgPSBleHBvcnRzLnQgPSB7fVxubGV0IFIgPSAwXG5cbmNvbnN0IExFVFRFUkRBU0hOVU1CRVIgPSAnW2EtekEtWjAtOS1dJ1xuXG4vLyBSZXBsYWNlIHNvbWUgZ3JlZWR5IHJlZ2V4IHRva2VucyB0byBwcmV2ZW50IHJlZ2V4IGRvcyBpc3N1ZXMuIFRoZXNlIHJlZ2V4IGFyZVxuLy8gdXNlZCBpbnRlcm5hbGx5IHZpYSB0aGUgc2FmZVJlIG9iamVjdCBzaW5jZSBhbGwgaW5wdXRzIGluIHRoaXMgbGlicmFyeSBnZXRcbi8vIG5vcm1hbGl6ZWQgZmlyc3QgdG8gdHJpbSBhbmQgY29sbGFwc2UgYWxsIGV4dHJhIHdoaXRlc3BhY2UuIFRoZSBvcmlnaW5hbFxuLy8gcmVnZXhlcyBhcmUgZXhwb3J0ZWQgZm9yIHVzZXJsYW5kIGNvbnN1bXB0aW9uIGFuZCBsb3dlciBsZXZlbCB1c2FnZS4gQVxuLy8gZnV0dXJlIGJyZWFraW5nIGNoYW5nZSBjb3VsZCBleHBvcnQgdGhlIHNhZmVyIHJlZ2V4IG9ubHkgd2l0aCBhIG5vdGUgdGhhdFxuLy8gYWxsIGlucHV0IHNob3VsZCBoYXZlIGV4dHJhIHdoaXRlc3BhY2UgcmVtb3ZlZC5cbmNvbnN0IHNhZmVSZWdleFJlcGxhY2VtZW50cyA9IFtcbiAgWydcXFxccycsIDFdLFxuICBbJ1xcXFxkJywgTUFYX0xFTkdUSF0sXG4gIFtMRVRURVJEQVNITlVNQkVSLCBNQVhfU0FGRV9CVUlMRF9MRU5HVEhdLFxuXVxuXG5jb25zdCBtYWtlU2FmZVJlZ2V4ID0gKHZhbHVlKSA9PiB7XG4gIGZvciAoY29uc3QgW3Rva2VuLCBtYXhdIG9mIHNhZmVSZWdleFJlcGxhY2VtZW50cykge1xuICAgIHZhbHVlID0gdmFsdWVcbiAgICAgIC5zcGxpdChgJHt0b2tlbn0qYCkuam9pbihgJHt0b2tlbn17MCwke21heH19YClcbiAgICAgIC5zcGxpdChgJHt0b2tlbn0rYCkuam9pbihgJHt0b2tlbn17MSwke21heH19YClcbiAgfVxuICByZXR1cm4gdmFsdWVcbn1cblxuY29uc3QgY3JlYXRlVG9rZW4gPSAobmFtZSwgdmFsdWUsIGlzR2xvYmFsKSA9PiB7XG4gIGNvbnN0IHNhZmUgPSBtYWtlU2FmZVJlZ2V4KHZhbHVlKVxuICBjb25zdCBpbmRleCA9IFIrK1xuICBkZWJ1ZyhuYW1lLCBpbmRleCwgdmFsdWUpXG4gIHRbbmFtZV0gPSBpbmRleFxuICBzcmNbaW5kZXhdID0gdmFsdWVcbiAgc2FmZVNyY1tpbmRleF0gPSBzYWZlXG4gIHJlW2luZGV4XSA9IG5ldyBSZWdFeHAodmFsdWUsIGlzR2xvYmFsID8gJ2cnIDogdW5kZWZpbmVkKVxuICBzYWZlUmVbaW5kZXhdID0gbmV3IFJlZ0V4cChzYWZlLCBpc0dsb2JhbCA/ICdnJyA6IHVuZGVmaW5lZClcbn1cblxuLy8gVGhlIGZvbGxvd2luZyBSZWd1bGFyIEV4cHJlc3Npb25zIGNhbiBiZSB1c2VkIGZvciB0b2tlbml6aW5nLFxuLy8gdmFsaWRhdGluZywgYW5kIHBhcnNpbmcgU2VtVmVyIHZlcnNpb24gc3RyaW5ncy5cblxuLy8gIyMgTnVtZXJpYyBJZGVudGlmaWVyXG4vLyBBIHNpbmdsZSBgMGAsIG9yIGEgbm9uLXplcm8gZGlnaXQgZm9sbG93ZWQgYnkgemVybyBvciBtb3JlIGRpZ2l0cy5cblxuY3JlYXRlVG9rZW4oJ05VTUVSSUNJREVOVElGSUVSJywgJzB8WzEtOV1cXFxcZConKVxuY3JlYXRlVG9rZW4oJ05VTUVSSUNJREVOVElGSUVSTE9PU0UnLCAnXFxcXGQrJylcblxuLy8gIyMgTm9uLW51bWVyaWMgSWRlbnRpZmllclxuLy8gWmVybyBvciBtb3JlIGRpZ2l0cywgZm9sbG93ZWQgYnkgYSBsZXR0ZXIgb3IgaHlwaGVuLCBhbmQgdGhlbiB6ZXJvIG9yXG4vLyBtb3JlIGxldHRlcnMsIGRpZ2l0cywgb3IgaHlwaGVucy5cblxuY3JlYXRlVG9rZW4oJ05PTk5VTUVSSUNJREVOVElGSUVSJywgYFxcXFxkKlthLXpBLVotXSR7TEVUVEVSREFTSE5VTUJFUn0qYClcblxuLy8gIyMgTWFpbiBWZXJzaW9uXG4vLyBUaHJlZSBkb3Qtc2VwYXJhdGVkIG51bWVyaWMgaWRlbnRpZmllcnMuXG5cbmNyZWF0ZVRva2VuKCdNQUlOVkVSU0lPTicsIGAoJHtzcmNbdC5OVU1FUklDSURFTlRJRklFUl19KVxcXFwuYCArXG4gICAgICAgICAgICAgICAgICAgYCgke3NyY1t0Lk5VTUVSSUNJREVOVElGSUVSXX0pXFxcXC5gICtcbiAgICAgICAgICAgICAgICAgICBgKCR7c3JjW3QuTlVNRVJJQ0lERU5USUZJRVJdfSlgKVxuXG5jcmVhdGVUb2tlbignTUFJTlZFUlNJT05MT09TRScsIGAoJHtzcmNbdC5OVU1FUklDSURFTlRJRklFUkxPT1NFXX0pXFxcXC5gICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGAoJHtzcmNbdC5OVU1FUklDSURFTlRJRklFUkxPT1NFXX0pXFxcXC5gICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGAoJHtzcmNbdC5OVU1FUklDSURFTlRJRklFUkxPT1NFXX0pYClcblxuLy8gIyMgUHJlLXJlbGVhc2UgVmVyc2lvbiBJZGVudGlmaWVyXG4vLyBBIG51bWVyaWMgaWRlbnRpZmllciwgb3IgYSBub24tbnVtZXJpYyBpZGVudGlmaWVyLlxuXG5jcmVhdGVUb2tlbignUFJFUkVMRUFTRUlERU5USUZJRVInLCBgKD86JHtzcmNbdC5OVU1FUklDSURFTlRJRklFUl1cbn18JHtzcmNbdC5OT05OVU1FUklDSURFTlRJRklFUl19KWApXG5cbmNyZWF0ZVRva2VuKCdQUkVSRUxFQVNFSURFTlRJRklFUkxPT1NFJywgYCg/OiR7c3JjW3QuTlVNRVJJQ0lERU5USUZJRVJMT09TRV1cbn18JHtzcmNbdC5OT05OVU1FUklDSURFTlRJRklFUl19KWApXG5cbi8vICMjIFByZS1yZWxlYXNlIFZlcnNpb25cbi8vIEh5cGhlbiwgZm9sbG93ZWQgYnkgb25lIG9yIG1vcmUgZG90LXNlcGFyYXRlZCBwcmUtcmVsZWFzZSB2ZXJzaW9uXG4vLyBpZGVudGlmaWVycy5cblxuY3JlYXRlVG9rZW4oJ1BSRVJFTEVBU0UnLCBgKD86LSgke3NyY1t0LlBSRVJFTEVBU0VJREVOVElGSUVSXVxufSg/OlxcXFwuJHtzcmNbdC5QUkVSRUxFQVNFSURFTlRJRklFUl19KSopKWApXG5cbmNyZWF0ZVRva2VuKCdQUkVSRUxFQVNFTE9PU0UnLCBgKD86LT8oJHtzcmNbdC5QUkVSRUxFQVNFSURFTlRJRklFUkxPT1NFXVxufSg/OlxcXFwuJHtzcmNbdC5QUkVSRUxFQVNFSURFTlRJRklFUkxPT1NFXX0pKikpYClcblxuLy8gIyMgQnVpbGQgTWV0YWRhdGEgSWRlbnRpZmllclxuLy8gQW55IGNvbWJpbmF0aW9uIG9mIGRpZ2l0cywgbGV0dGVycywgb3IgaHlwaGVucy5cblxuY3JlYXRlVG9rZW4oJ0JVSUxESURFTlRJRklFUicsIGAke0xFVFRFUkRBU0hOVU1CRVJ9K2ApXG5cbi8vICMjIEJ1aWxkIE1ldGFkYXRhXG4vLyBQbHVzIHNpZ24sIGZvbGxvd2VkIGJ5IG9uZSBvciBtb3JlIHBlcmlvZC1zZXBhcmF0ZWQgYnVpbGQgbWV0YWRhdGFcbi8vIGlkZW50aWZpZXJzLlxuXG5jcmVhdGVUb2tlbignQlVJTEQnLCBgKD86XFxcXCsoJHtzcmNbdC5CVUlMRElERU5USUZJRVJdXG59KD86XFxcXC4ke3NyY1t0LkJVSUxESURFTlRJRklFUl19KSopKWApXG5cbi8vICMjIEZ1bGwgVmVyc2lvbiBTdHJpbmdcbi8vIEEgbWFpbiB2ZXJzaW9uLCBmb2xsb3dlZCBvcHRpb25hbGx5IGJ5IGEgcHJlLXJlbGVhc2UgdmVyc2lvbiBhbmRcbi8vIGJ1aWxkIG1ldGFkYXRhLlxuXG4vLyBOb3RlIHRoYXQgdGhlIG9ubHkgbWFqb3IsIG1pbm9yLCBwYXRjaCwgYW5kIHByZS1yZWxlYXNlIHNlY3Rpb25zIG9mXG4vLyB0aGUgdmVyc2lvbiBzdHJpbmcgYXJlIGNhcHR1cmluZyBncm91cHMuICBUaGUgYnVpbGQgbWV0YWRhdGEgaXMgbm90IGFcbi8vIGNhcHR1cmluZyBncm91cCwgYmVjYXVzZSBpdCBzaG91bGQgbm90IGV2ZXIgYmUgdXNlZCBpbiB2ZXJzaW9uXG4vLyBjb21wYXJpc29uLlxuXG5jcmVhdGVUb2tlbignRlVMTFBMQUlOJywgYHY/JHtzcmNbdC5NQUlOVkVSU0lPTl1cbn0ke3NyY1t0LlBSRVJFTEVBU0VdfT8ke1xuICBzcmNbdC5CVUlMRF19P2ApXG5cbmNyZWF0ZVRva2VuKCdGVUxMJywgYF4ke3NyY1t0LkZVTExQTEFJTl19JGApXG5cbi8vIGxpa2UgZnVsbCwgYnV0IGFsbG93cyB2MS4yLjMgYW5kID0xLjIuMywgd2hpY2ggcGVvcGxlIGRvIHNvbWV0aW1lcy5cbi8vIGFsc28sIDEuMC4wYWxwaGExIChwcmVyZWxlYXNlIHdpdGhvdXQgdGhlIGh5cGhlbikgd2hpY2ggaXMgcHJldHR5XG4vLyBjb21tb24gaW4gdGhlIG5wbSByZWdpc3RyeS5cbmNyZWF0ZVRva2VuKCdMT09TRVBMQUlOJywgYFt2PVxcXFxzXSoke3NyY1t0Lk1BSU5WRVJTSU9OTE9PU0VdXG59JHtzcmNbdC5QUkVSRUxFQVNFTE9PU0VdfT8ke1xuICBzcmNbdC5CVUlMRF19P2ApXG5cbmNyZWF0ZVRva2VuKCdMT09TRScsIGBeJHtzcmNbdC5MT09TRVBMQUlOXX0kYClcblxuY3JlYXRlVG9rZW4oJ0dUTFQnLCAnKCg/Ojx8Pik/PT8pJylcblxuLy8gU29tZXRoaW5nIGxpa2UgXCIyLipcIiBvciBcIjEuMi54XCIuXG4vLyBOb3RlIHRoYXQgXCJ4LnhcIiBpcyBhIHZhbGlkIHhSYW5nZSBpZGVudGlmZXIsIG1lYW5pbmcgXCJhbnkgdmVyc2lvblwiXG4vLyBPbmx5IHRoZSBmaXJzdCBpdGVtIGlzIHN0cmljdGx5IHJlcXVpcmVkLlxuY3JlYXRlVG9rZW4oJ1hSQU5HRUlERU5USUZJRVJMT09TRScsIGAke3NyY1t0Lk5VTUVSSUNJREVOVElGSUVSTE9PU0VdfXx4fFh8XFxcXCpgKVxuY3JlYXRlVG9rZW4oJ1hSQU5HRUlERU5USUZJRVInLCBgJHtzcmNbdC5OVU1FUklDSURFTlRJRklFUl19fHh8WHxcXFxcKmApXG5cbmNyZWF0ZVRva2VuKCdYUkFOR0VQTEFJTicsIGBbdj1cXFxcc10qKCR7c3JjW3QuWFJBTkdFSURFTlRJRklFUl19KWAgK1xuICAgICAgICAgICAgICAgICAgIGAoPzpcXFxcLigke3NyY1t0LlhSQU5HRUlERU5USUZJRVJdfSlgICtcbiAgICAgICAgICAgICAgICAgICBgKD86XFxcXC4oJHtzcmNbdC5YUkFOR0VJREVOVElGSUVSXX0pYCArXG4gICAgICAgICAgICAgICAgICAgYCg/OiR7c3JjW3QuUFJFUkVMRUFTRV19KT8ke1xuICAgICAgICAgICAgICAgICAgICAgc3JjW3QuQlVJTERdfT9gICtcbiAgICAgICAgICAgICAgICAgICBgKT8pP2ApXG5cbmNyZWF0ZVRva2VuKCdYUkFOR0VQTEFJTkxPT1NFJywgYFt2PVxcXFxzXSooJHtzcmNbdC5YUkFOR0VJREVOVElGSUVSTE9PU0VdfSlgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGAoPzpcXFxcLigke3NyY1t0LlhSQU5HRUlERU5USUZJRVJMT09TRV19KWAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYCg/OlxcXFwuKCR7c3JjW3QuWFJBTkdFSURFTlRJRklFUkxPT1NFXX0pYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgKD86JHtzcmNbdC5QUkVSRUxFQVNFTE9PU0VdfSk/JHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjW3QuQlVJTERdfT9gICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGApPyk/YClcblxuY3JlYXRlVG9rZW4oJ1hSQU5HRScsIGBeJHtzcmNbdC5HVExUXX1cXFxccyoke3NyY1t0LlhSQU5HRVBMQUlOXX0kYClcbmNyZWF0ZVRva2VuKCdYUkFOR0VMT09TRScsIGBeJHtzcmNbdC5HVExUXX1cXFxccyoke3NyY1t0LlhSQU5HRVBMQUlOTE9PU0VdfSRgKVxuXG4vLyBDb2VyY2lvbi5cbi8vIEV4dHJhY3QgYW55dGhpbmcgdGhhdCBjb3VsZCBjb25jZWl2YWJseSBiZSBhIHBhcnQgb2YgYSB2YWxpZCBzZW12ZXJcbmNyZWF0ZVRva2VuKCdDT0VSQ0VQTEFJTicsIGAkeycoXnxbXlxcXFxkXSknICtcbiAgICAgICAgICAgICAgJyhcXFxcZHsxLCd9JHtNQVhfU0FGRV9DT01QT05FTlRfTEVOR1RIfX0pYCArXG4gICAgICAgICAgICAgIGAoPzpcXFxcLihcXFxcZHsxLCR7TUFYX1NBRkVfQ09NUE9ORU5UX0xFTkdUSH19KSk/YCArXG4gICAgICAgICAgICAgIGAoPzpcXFxcLihcXFxcZHsxLCR7TUFYX1NBRkVfQ09NUE9ORU5UX0xFTkdUSH19KSk/YClcbmNyZWF0ZVRva2VuKCdDT0VSQ0UnLCBgJHtzcmNbdC5DT0VSQ0VQTEFJTl19KD86JHxbXlxcXFxkXSlgKVxuY3JlYXRlVG9rZW4oJ0NPRVJDRUZVTEwnLCBzcmNbdC5DT0VSQ0VQTEFJTl0gK1xuICAgICAgICAgICAgICBgKD86JHtzcmNbdC5QUkVSRUxFQVNFXX0pP2AgK1xuICAgICAgICAgICAgICBgKD86JHtzcmNbdC5CVUlMRF19KT9gICtcbiAgICAgICAgICAgICAgYCg/OiR8W15cXFxcZF0pYClcbmNyZWF0ZVRva2VuKCdDT0VSQ0VSVEwnLCBzcmNbdC5DT0VSQ0VdLCB0cnVlKVxuY3JlYXRlVG9rZW4oJ0NPRVJDRVJUTEZVTEwnLCBzcmNbdC5DT0VSQ0VGVUxMXSwgdHJ1ZSlcblxuLy8gVGlsZGUgcmFuZ2VzLlxuLy8gTWVhbmluZyBpcyBcInJlYXNvbmFibHkgYXQgb3IgZ3JlYXRlciB0aGFuXCJcbmNyZWF0ZVRva2VuKCdMT05FVElMREUnLCAnKD86fj4/KScpXG5cbmNyZWF0ZVRva2VuKCdUSUxERVRSSU0nLCBgKFxcXFxzKikke3NyY1t0LkxPTkVUSUxERV19XFxcXHMrYCwgdHJ1ZSlcbmV4cG9ydHMudGlsZGVUcmltUmVwbGFjZSA9ICckMX4nXG5cbmNyZWF0ZVRva2VuKCdUSUxERScsIGBeJHtzcmNbdC5MT05FVElMREVdfSR7c3JjW3QuWFJBTkdFUExBSU5dfSRgKVxuY3JlYXRlVG9rZW4oJ1RJTERFTE9PU0UnLCBgXiR7c3JjW3QuTE9ORVRJTERFXX0ke3NyY1t0LlhSQU5HRVBMQUlOTE9PU0VdfSRgKVxuXG4vLyBDYXJldCByYW5nZXMuXG4vLyBNZWFuaW5nIGlzIFwiYXQgbGVhc3QgYW5kIGJhY2t3YXJkcyBjb21wYXRpYmxlIHdpdGhcIlxuY3JlYXRlVG9rZW4oJ0xPTkVDQVJFVCcsICcoPzpcXFxcXiknKVxuXG5jcmVhdGVUb2tlbignQ0FSRVRUUklNJywgYChcXFxccyopJHtzcmNbdC5MT05FQ0FSRVRdfVxcXFxzK2AsIHRydWUpXG5leHBvcnRzLmNhcmV0VHJpbVJlcGxhY2UgPSAnJDFeJ1xuXG5jcmVhdGVUb2tlbignQ0FSRVQnLCBgXiR7c3JjW3QuTE9ORUNBUkVUXX0ke3NyY1t0LlhSQU5HRVBMQUlOXX0kYClcbmNyZWF0ZVRva2VuKCdDQVJFVExPT1NFJywgYF4ke3NyY1t0LkxPTkVDQVJFVF19JHtzcmNbdC5YUkFOR0VQTEFJTkxPT1NFXX0kYClcblxuLy8gQSBzaW1wbGUgZ3QvbHQvZXEgdGhpbmcsIG9yIGp1c3QgXCJcIiB0byBpbmRpY2F0ZSBcImFueSB2ZXJzaW9uXCJcbmNyZWF0ZVRva2VuKCdDT01QQVJBVE9STE9PU0UnLCBgXiR7c3JjW3QuR1RMVF19XFxcXHMqKCR7c3JjW3QuTE9PU0VQTEFJTl19KSR8XiRgKVxuY3JlYXRlVG9rZW4oJ0NPTVBBUkFUT1InLCBgXiR7c3JjW3QuR1RMVF19XFxcXHMqKCR7c3JjW3QuRlVMTFBMQUlOXX0pJHxeJGApXG5cbi8vIEFuIGV4cHJlc3Npb24gdG8gc3RyaXAgYW55IHdoaXRlc3BhY2UgYmV0d2VlbiB0aGUgZ3RsdCBhbmQgdGhlIHRoaW5nXG4vLyBpdCBtb2RpZmllcywgc28gdGhhdCBgPiAxLjIuM2AgPT0+IGA+MS4yLjNgXG5jcmVhdGVUb2tlbignQ09NUEFSQVRPUlRSSU0nLCBgKFxcXFxzKikke3NyY1t0LkdUTFRdXG59XFxcXHMqKCR7c3JjW3QuTE9PU0VQTEFJTl19fCR7c3JjW3QuWFJBTkdFUExBSU5dfSlgLCB0cnVlKVxuZXhwb3J0cy5jb21wYXJhdG9yVHJpbVJlcGxhY2UgPSAnJDEkMiQzJ1xuXG4vLyBTb21ldGhpbmcgbGlrZSBgMS4yLjMgLSAxLjIuNGBcbi8vIE5vdGUgdGhhdCB0aGVzZSBhbGwgdXNlIHRoZSBsb29zZSBmb3JtLCBiZWNhdXNlIHRoZXknbGwgYmVcbi8vIGNoZWNrZWQgYWdhaW5zdCBlaXRoZXIgdGhlIHN0cmljdCBvciBsb29zZSBjb21wYXJhdG9yIGZvcm1cbi8vIGxhdGVyLlxuY3JlYXRlVG9rZW4oJ0hZUEhFTlJBTkdFJywgYF5cXFxccyooJHtzcmNbdC5YUkFOR0VQTEFJTl19KWAgK1xuICAgICAgICAgICAgICAgICAgIGBcXFxccystXFxcXHMrYCArXG4gICAgICAgICAgICAgICAgICAgYCgke3NyY1t0LlhSQU5HRVBMQUlOXX0pYCArXG4gICAgICAgICAgICAgICAgICAgYFxcXFxzKiRgKVxuXG5jcmVhdGVUb2tlbignSFlQSEVOUkFOR0VMT09TRScsIGBeXFxcXHMqKCR7c3JjW3QuWFJBTkdFUExBSU5MT09TRV19KWAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYFxcXFxzKy1cXFxccytgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGAoJHtzcmNbdC5YUkFOR0VQTEFJTkxPT1NFXX0pYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgXFxcXHMqJGApXG5cbi8vIFN0YXIgcmFuZ2VzIGJhc2ljYWxseSBqdXN0IGFsbG93IGFueXRoaW5nIGF0IGFsbC5cbmNyZWF0ZVRva2VuKCdTVEFSJywgJyg8fD4pPz0/XFxcXHMqXFxcXConKVxuLy8gPj0wLjAuMCBpcyBsaWtlIGEgc3RhclxuY3JlYXRlVG9rZW4oJ0dURTAnLCAnXlxcXFxzKj49XFxcXHMqMFxcXFwuMFxcXFwuMFxcXFxzKiQnKVxuY3JlYXRlVG9rZW4oJ0dURTBQUkUnLCAnXlxcXFxzKj49XFxcXHMqMFxcXFwuMFxcXFwuMC0wXFxcXHMqJCcpXG4iLCAiLy8gcGFyc2Ugb3V0IGp1c3QgdGhlIG9wdGlvbnMgd2UgY2FyZSBhYm91dFxuY29uc3QgbG9vc2VPcHRpb24gPSBPYmplY3QuZnJlZXplKHsgbG9vc2U6IHRydWUgfSlcbmNvbnN0IGVtcHR5T3B0cyA9IE9iamVjdC5mcmVlemUoeyB9KVxuY29uc3QgcGFyc2VPcHRpb25zID0gb3B0aW9ucyA9PiB7XG4gIGlmICghb3B0aW9ucykge1xuICAgIHJldHVybiBlbXB0eU9wdHNcbiAgfVxuXG4gIGlmICh0eXBlb2Ygb3B0aW9ucyAhPT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gbG9vc2VPcHRpb25cbiAgfVxuXG4gIHJldHVybiBvcHRpb25zXG59XG5tb2R1bGUuZXhwb3J0cyA9IHBhcnNlT3B0aW9uc1xuIiwgImNvbnN0IG51bWVyaWMgPSAvXlswLTldKyQvXG5jb25zdCBjb21wYXJlSWRlbnRpZmllcnMgPSAoYSwgYikgPT4ge1xuICBjb25zdCBhbnVtID0gbnVtZXJpYy50ZXN0KGEpXG4gIGNvbnN0IGJudW0gPSBudW1lcmljLnRlc3QoYilcblxuICBpZiAoYW51bSAmJiBibnVtKSB7XG4gICAgYSA9ICthXG4gICAgYiA9ICtiXG4gIH1cblxuICByZXR1cm4gYSA9PT0gYiA/IDBcbiAgICA6IChhbnVtICYmICFibnVtKSA/IC0xXG4gICAgOiAoYm51bSAmJiAhYW51bSkgPyAxXG4gICAgOiBhIDwgYiA/IC0xXG4gICAgOiAxXG59XG5cbmNvbnN0IHJjb21wYXJlSWRlbnRpZmllcnMgPSAoYSwgYikgPT4gY29tcGFyZUlkZW50aWZpZXJzKGIsIGEpXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjb21wYXJlSWRlbnRpZmllcnMsXG4gIHJjb21wYXJlSWRlbnRpZmllcnMsXG59XG4iLCAiY29uc3QgZGVidWcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9kZWJ1ZycpXG5jb25zdCB7IE1BWF9MRU5HVEgsIE1BWF9TQUZFX0lOVEVHRVIgfSA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2NvbnN0YW50cycpXG5jb25zdCB7IHNhZmVSZTogcmUsIHNhZmVTcmM6IHNyYywgdCB9ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvcmUnKVxuXG5jb25zdCBwYXJzZU9wdGlvbnMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9wYXJzZS1vcHRpb25zJylcbmNvbnN0IHsgY29tcGFyZUlkZW50aWZpZXJzIH0gPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9pZGVudGlmaWVycycpXG5jbGFzcyBTZW1WZXIge1xuICBjb25zdHJ1Y3RvciAodmVyc2lvbiwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBwYXJzZU9wdGlvbnMob3B0aW9ucylcblxuICAgIGlmICh2ZXJzaW9uIGluc3RhbmNlb2YgU2VtVmVyKSB7XG4gICAgICBpZiAodmVyc2lvbi5sb29zZSA9PT0gISFvcHRpb25zLmxvb3NlICYmXG4gICAgICAgIHZlcnNpb24uaW5jbHVkZVByZXJlbGVhc2UgPT09ICEhb3B0aW9ucy5pbmNsdWRlUHJlcmVsZWFzZSkge1xuICAgICAgICByZXR1cm4gdmVyc2lvblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmVyc2lvbiA9IHZlcnNpb24udmVyc2lvblxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHZlcnNpb24gIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIHZlcnNpb24uIE11c3QgYmUgYSBzdHJpbmcuIEdvdCB0eXBlIFwiJHt0eXBlb2YgdmVyc2lvbn1cIi5gKVxuICAgIH1cblxuICAgIGlmICh2ZXJzaW9uLmxlbmd0aCA+IE1BWF9MRU5HVEgpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgIGB2ZXJzaW9uIGlzIGxvbmdlciB0aGFuICR7TUFYX0xFTkdUSH0gY2hhcmFjdGVyc2BcbiAgICAgIClcbiAgICB9XG5cbiAgICBkZWJ1ZygnU2VtVmVyJywgdmVyc2lvbiwgb3B0aW9ucylcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zXG4gICAgdGhpcy5sb29zZSA9ICEhb3B0aW9ucy5sb29zZVxuICAgIC8vIHRoaXMgaXNuJ3QgYWN0dWFsbHkgcmVsZXZhbnQgZm9yIHZlcnNpb25zLCBidXQga2VlcCBpdCBzbyB0aGF0IHdlXG4gICAgLy8gZG9uJ3QgcnVuIGludG8gdHJvdWJsZSBwYXNzaW5nIHRoaXMub3B0aW9ucyBhcm91bmQuXG4gICAgdGhpcy5pbmNsdWRlUHJlcmVsZWFzZSA9ICEhb3B0aW9ucy5pbmNsdWRlUHJlcmVsZWFzZVxuXG4gICAgY29uc3QgbSA9IHZlcnNpb24udHJpbSgpLm1hdGNoKG9wdGlvbnMubG9vc2UgPyByZVt0LkxPT1NFXSA6IHJlW3QuRlVMTF0pXG5cbiAgICBpZiAoIW0pIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgVmVyc2lvbjogJHt2ZXJzaW9ufWApXG4gICAgfVxuXG4gICAgdGhpcy5yYXcgPSB2ZXJzaW9uXG5cbiAgICAvLyB0aGVzZSBhcmUgYWN0dWFsbHkgbnVtYmVyc1xuICAgIHRoaXMubWFqb3IgPSArbVsxXVxuICAgIHRoaXMubWlub3IgPSArbVsyXVxuICAgIHRoaXMucGF0Y2ggPSArbVszXVxuXG4gICAgaWYgKHRoaXMubWFqb3IgPiBNQVhfU0FGRV9JTlRFR0VSIHx8IHRoaXMubWFqb3IgPCAwKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIG1ham9yIHZlcnNpb24nKVxuICAgIH1cblxuICAgIGlmICh0aGlzLm1pbm9yID4gTUFYX1NBRkVfSU5URUdFUiB8fCB0aGlzLm1pbm9yIDwgMCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBtaW5vciB2ZXJzaW9uJylcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wYXRjaCA+IE1BWF9TQUZFX0lOVEVHRVIgfHwgdGhpcy5wYXRjaCA8IDApIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgcGF0Y2ggdmVyc2lvbicpXG4gICAgfVxuXG4gICAgLy8gbnVtYmVyaWZ5IGFueSBwcmVyZWxlYXNlIG51bWVyaWMgaWRzXG4gICAgaWYgKCFtWzRdKSB7XG4gICAgICB0aGlzLnByZXJlbGVhc2UgPSBbXVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnByZXJlbGVhc2UgPSBtWzRdLnNwbGl0KCcuJykubWFwKChpZCkgPT4ge1xuICAgICAgICBpZiAoL15bMC05XSskLy50ZXN0KGlkKSkge1xuICAgICAgICAgIGNvbnN0IG51bSA9ICtpZFxuICAgICAgICAgIGlmIChudW0gPj0gMCAmJiBudW0gPCBNQVhfU0FGRV9JTlRFR0VSKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVtXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpZFxuICAgICAgfSlcbiAgICB9XG5cbiAgICB0aGlzLmJ1aWxkID0gbVs1XSA/IG1bNV0uc3BsaXQoJy4nKSA6IFtdXG4gICAgdGhpcy5mb3JtYXQoKVxuICB9XG5cbiAgZm9ybWF0ICgpIHtcbiAgICB0aGlzLnZlcnNpb24gPSBgJHt0aGlzLm1ham9yfS4ke3RoaXMubWlub3J9LiR7dGhpcy5wYXRjaH1gXG4gICAgaWYgKHRoaXMucHJlcmVsZWFzZS5sZW5ndGgpIHtcbiAgICAgIHRoaXMudmVyc2lvbiArPSBgLSR7dGhpcy5wcmVyZWxlYXNlLmpvaW4oJy4nKX1gXG4gICAgfVxuICAgIHJldHVybiB0aGlzLnZlcnNpb25cbiAgfVxuXG4gIHRvU3RyaW5nICgpIHtcbiAgICByZXR1cm4gdGhpcy52ZXJzaW9uXG4gIH1cblxuICBjb21wYXJlIChvdGhlcikge1xuICAgIGRlYnVnKCdTZW1WZXIuY29tcGFyZScsIHRoaXMudmVyc2lvbiwgdGhpcy5vcHRpb25zLCBvdGhlcilcbiAgICBpZiAoIShvdGhlciBpbnN0YW5jZW9mIFNlbVZlcikpIHtcbiAgICAgIGlmICh0eXBlb2Ygb3RoZXIgPT09ICdzdHJpbmcnICYmIG90aGVyID09PSB0aGlzLnZlcnNpb24pIHtcbiAgICAgICAgcmV0dXJuIDBcbiAgICAgIH1cbiAgICAgIG90aGVyID0gbmV3IFNlbVZlcihvdGhlciwgdGhpcy5vcHRpb25zKVxuICAgIH1cblxuICAgIGlmIChvdGhlci52ZXJzaW9uID09PSB0aGlzLnZlcnNpb24pIHtcbiAgICAgIHJldHVybiAwXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuY29tcGFyZU1haW4ob3RoZXIpIHx8IHRoaXMuY29tcGFyZVByZShvdGhlcilcbiAgfVxuXG4gIGNvbXBhcmVNYWluIChvdGhlcikge1xuICAgIGlmICghKG90aGVyIGluc3RhbmNlb2YgU2VtVmVyKSkge1xuICAgICAgb3RoZXIgPSBuZXcgU2VtVmVyKG90aGVyLCB0aGlzLm9wdGlvbnMpXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIGNvbXBhcmVJZGVudGlmaWVycyh0aGlzLm1ham9yLCBvdGhlci5tYWpvcikgfHxcbiAgICAgIGNvbXBhcmVJZGVudGlmaWVycyh0aGlzLm1pbm9yLCBvdGhlci5taW5vcikgfHxcbiAgICAgIGNvbXBhcmVJZGVudGlmaWVycyh0aGlzLnBhdGNoLCBvdGhlci5wYXRjaClcbiAgICApXG4gIH1cblxuICBjb21wYXJlUHJlIChvdGhlcikge1xuICAgIGlmICghKG90aGVyIGluc3RhbmNlb2YgU2VtVmVyKSkge1xuICAgICAgb3RoZXIgPSBuZXcgU2VtVmVyKG90aGVyLCB0aGlzLm9wdGlvbnMpXG4gICAgfVxuXG4gICAgLy8gTk9UIGhhdmluZyBhIHByZXJlbGVhc2UgaXMgPiBoYXZpbmcgb25lXG4gICAgaWYgKHRoaXMucHJlcmVsZWFzZS5sZW5ndGggJiYgIW90aGVyLnByZXJlbGVhc2UubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gLTFcbiAgICB9IGVsc2UgaWYgKCF0aGlzLnByZXJlbGVhc2UubGVuZ3RoICYmIG90aGVyLnByZXJlbGVhc2UubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gMVxuICAgIH0gZWxzZSBpZiAoIXRoaXMucHJlcmVsZWFzZS5sZW5ndGggJiYgIW90aGVyLnByZXJlbGVhc2UubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gMFxuICAgIH1cblxuICAgIGxldCBpID0gMFxuICAgIGRvIHtcbiAgICAgIGNvbnN0IGEgPSB0aGlzLnByZXJlbGVhc2VbaV1cbiAgICAgIGNvbnN0IGIgPSBvdGhlci5wcmVyZWxlYXNlW2ldXG4gICAgICBkZWJ1ZygncHJlcmVsZWFzZSBjb21wYXJlJywgaSwgYSwgYilcbiAgICAgIGlmIChhID09PSB1bmRlZmluZWQgJiYgYiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiAwXG4gICAgICB9IGVsc2UgaWYgKGIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gMVxuICAgICAgfSBlbHNlIGlmIChhID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIC0xXG4gICAgICB9IGVsc2UgaWYgKGEgPT09IGIpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBjb21wYXJlSWRlbnRpZmllcnMoYSwgYilcbiAgICAgIH1cbiAgICB9IHdoaWxlICgrK2kpXG4gIH1cblxuICBjb21wYXJlQnVpbGQgKG90aGVyKSB7XG4gICAgaWYgKCEob3RoZXIgaW5zdGFuY2VvZiBTZW1WZXIpKSB7XG4gICAgICBvdGhlciA9IG5ldyBTZW1WZXIob3RoZXIsIHRoaXMub3B0aW9ucylcbiAgICB9XG5cbiAgICBsZXQgaSA9IDBcbiAgICBkbyB7XG4gICAgICBjb25zdCBhID0gdGhpcy5idWlsZFtpXVxuICAgICAgY29uc3QgYiA9IG90aGVyLmJ1aWxkW2ldXG4gICAgICBkZWJ1ZygnYnVpbGQgY29tcGFyZScsIGksIGEsIGIpXG4gICAgICBpZiAoYSA9PT0gdW5kZWZpbmVkICYmIGIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gMFxuICAgICAgfSBlbHNlIGlmIChiID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIDFcbiAgICAgIH0gZWxzZSBpZiAoYSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiAtMVxuICAgICAgfSBlbHNlIGlmIChhID09PSBiKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gY29tcGFyZUlkZW50aWZpZXJzKGEsIGIpXG4gICAgICB9XG4gICAgfSB3aGlsZSAoKytpKVxuICB9XG5cbiAgLy8gcHJlbWlub3Igd2lsbCBidW1wIHRoZSB2ZXJzaW9uIHVwIHRvIHRoZSBuZXh0IG1pbm9yIHJlbGVhc2UsIGFuZCBpbW1lZGlhdGVseVxuICAvLyBkb3duIHRvIHByZS1yZWxlYXNlLiBwcmVtYWpvciBhbmQgcHJlcGF0Y2ggd29yayB0aGUgc2FtZSB3YXkuXG4gIGluYyAocmVsZWFzZSwgaWRlbnRpZmllciwgaWRlbnRpZmllckJhc2UpIHtcbiAgICBpZiAocmVsZWFzZS5zdGFydHNXaXRoKCdwcmUnKSkge1xuICAgICAgaWYgKCFpZGVudGlmaWVyICYmIGlkZW50aWZpZXJCYXNlID09PSBmYWxzZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgaW5jcmVtZW50IGFyZ3VtZW50OiBpZGVudGlmaWVyIGlzIGVtcHR5JylcbiAgICAgIH1cbiAgICAgIC8vIEF2b2lkIGFuIGludmFsaWQgc2VtdmVyIHJlc3VsdHNcbiAgICAgIGlmIChpZGVudGlmaWVyKSB7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgUmVnRXhwKGBeJHt0aGlzLm9wdGlvbnMubG9vc2UgPyBzcmNbdC5QUkVSRUxFQVNFTE9PU0VdIDogc3JjW3QuUFJFUkVMRUFTRV19JGApXG4gICAgICAgIGNvbnN0IG1hdGNoID0gYC0ke2lkZW50aWZpZXJ9YC5tYXRjaChyKVxuICAgICAgICBpZiAoIW1hdGNoIHx8IG1hdGNoWzFdICE9PSBpZGVudGlmaWVyKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIGlkZW50aWZpZXI6ICR7aWRlbnRpZmllcn1gKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgc3dpdGNoIChyZWxlYXNlKSB7XG4gICAgICBjYXNlICdwcmVtYWpvcic6XG4gICAgICAgIHRoaXMucHJlcmVsZWFzZS5sZW5ndGggPSAwXG4gICAgICAgIHRoaXMucGF0Y2ggPSAwXG4gICAgICAgIHRoaXMubWlub3IgPSAwXG4gICAgICAgIHRoaXMubWFqb3IrK1xuICAgICAgICB0aGlzLmluYygncHJlJywgaWRlbnRpZmllciwgaWRlbnRpZmllckJhc2UpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdwcmVtaW5vcic6XG4gICAgICAgIHRoaXMucHJlcmVsZWFzZS5sZW5ndGggPSAwXG4gICAgICAgIHRoaXMucGF0Y2ggPSAwXG4gICAgICAgIHRoaXMubWlub3IrK1xuICAgICAgICB0aGlzLmluYygncHJlJywgaWRlbnRpZmllciwgaWRlbnRpZmllckJhc2UpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdwcmVwYXRjaCc6XG4gICAgICAgIC8vIElmIHRoaXMgaXMgYWxyZWFkeSBhIHByZXJlbGVhc2UsIGl0IHdpbGwgYnVtcCB0byB0aGUgbmV4dCB2ZXJzaW9uXG4gICAgICAgIC8vIGRyb3AgYW55IHByZXJlbGVhc2VzIHRoYXQgbWlnaHQgYWxyZWFkeSBleGlzdCwgc2luY2UgdGhleSBhcmUgbm90XG4gICAgICAgIC8vIHJlbGV2YW50IGF0IHRoaXMgcG9pbnQuXG4gICAgICAgIHRoaXMucHJlcmVsZWFzZS5sZW5ndGggPSAwXG4gICAgICAgIHRoaXMuaW5jKCdwYXRjaCcsIGlkZW50aWZpZXIsIGlkZW50aWZpZXJCYXNlKVxuICAgICAgICB0aGlzLmluYygncHJlJywgaWRlbnRpZmllciwgaWRlbnRpZmllckJhc2UpXG4gICAgICAgIGJyZWFrXG4gICAgICAvLyBJZiB0aGUgaW5wdXQgaXMgYSBub24tcHJlcmVsZWFzZSB2ZXJzaW9uLCB0aGlzIGFjdHMgdGhlIHNhbWUgYXNcbiAgICAgIC8vIHByZXBhdGNoLlxuICAgICAgY2FzZSAncHJlcmVsZWFzZSc6XG4gICAgICAgIGlmICh0aGlzLnByZXJlbGVhc2UubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhpcy5pbmMoJ3BhdGNoJywgaWRlbnRpZmllciwgaWRlbnRpZmllckJhc2UpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbmMoJ3ByZScsIGlkZW50aWZpZXIsIGlkZW50aWZpZXJCYXNlKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAncmVsZWFzZSc6XG4gICAgICAgIGlmICh0aGlzLnByZXJlbGVhc2UubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGB2ZXJzaW9uICR7dGhpcy5yYXd9IGlzIG5vdCBhIHByZXJlbGVhc2VgKVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJlcmVsZWFzZS5sZW5ndGggPSAwXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ21ham9yJzpcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBhIHByZS1tYWpvciB2ZXJzaW9uLCBidW1wIHVwIHRvIHRoZSBzYW1lIG1ham9yIHZlcnNpb24uXG4gICAgICAgIC8vIE90aGVyd2lzZSBpbmNyZW1lbnQgbWFqb3IuXG4gICAgICAgIC8vIDEuMC4wLTUgYnVtcHMgdG8gMS4wLjBcbiAgICAgICAgLy8gMS4xLjAgYnVtcHMgdG8gMi4wLjBcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHRoaXMubWlub3IgIT09IDAgfHxcbiAgICAgICAgICB0aGlzLnBhdGNoICE9PSAwIHx8XG4gICAgICAgICAgdGhpcy5wcmVyZWxlYXNlLmxlbmd0aCA9PT0gMFxuICAgICAgICApIHtcbiAgICAgICAgICB0aGlzLm1ham9yKytcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1pbm9yID0gMFxuICAgICAgICB0aGlzLnBhdGNoID0gMFxuICAgICAgICB0aGlzLnByZXJlbGVhc2UgPSBbXVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnbWlub3InOlxuICAgICAgICAvLyBJZiB0aGlzIGlzIGEgcHJlLW1pbm9yIHZlcnNpb24sIGJ1bXAgdXAgdG8gdGhlIHNhbWUgbWlub3IgdmVyc2lvbi5cbiAgICAgICAgLy8gT3RoZXJ3aXNlIGluY3JlbWVudCBtaW5vci5cbiAgICAgICAgLy8gMS4yLjAtNSBidW1wcyB0byAxLjIuMFxuICAgICAgICAvLyAxLjIuMSBidW1wcyB0byAxLjMuMFxuICAgICAgICBpZiAodGhpcy5wYXRjaCAhPT0gMCB8fCB0aGlzLnByZXJlbGVhc2UubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhpcy5taW5vcisrXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXRjaCA9IDBcbiAgICAgICAgdGhpcy5wcmVyZWxlYXNlID0gW11cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3BhdGNoJzpcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBub3QgYSBwcmUtcmVsZWFzZSB2ZXJzaW9uLCBpdCB3aWxsIGluY3JlbWVudCB0aGUgcGF0Y2guXG4gICAgICAgIC8vIElmIGl0IGlzIGEgcHJlLXJlbGVhc2UgaXQgd2lsbCBidW1wIHVwIHRvIHRoZSBzYW1lIHBhdGNoIHZlcnNpb24uXG4gICAgICAgIC8vIDEuMi4wLTUgcGF0Y2hlcyB0byAxLjIuMFxuICAgICAgICAvLyAxLjIuMCBwYXRjaGVzIHRvIDEuMi4xXG4gICAgICAgIGlmICh0aGlzLnByZXJlbGVhc2UubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhpcy5wYXRjaCsrXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcmVyZWxlYXNlID0gW11cbiAgICAgICAgYnJlYWtcbiAgICAgIC8vIFRoaXMgcHJvYmFibHkgc2hvdWxkbid0IGJlIHVzZWQgcHVibGljbHkuXG4gICAgICAvLyAxLjAuMCAncHJlJyB3b3VsZCBiZWNvbWUgMS4wLjAtMCB3aGljaCBpcyB0aGUgd3JvbmcgZGlyZWN0aW9uLlxuICAgICAgY2FzZSAncHJlJzoge1xuICAgICAgICBjb25zdCBiYXNlID0gTnVtYmVyKGlkZW50aWZpZXJCYXNlKSA/IDEgOiAwXG5cbiAgICAgICAgaWYgKHRoaXMucHJlcmVsZWFzZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aGlzLnByZXJlbGVhc2UgPSBbYmFzZV1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsZXQgaSA9IHRoaXMucHJlcmVsZWFzZS5sZW5ndGhcbiAgICAgICAgICB3aGlsZSAoLS1pID49IDApIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5wcmVyZWxlYXNlW2ldID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICB0aGlzLnByZXJlbGVhc2VbaV0rK1xuICAgICAgICAgICAgICBpID0gLTJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGkgPT09IC0xKSB7XG4gICAgICAgICAgICAvLyBkaWRuJ3QgaW5jcmVtZW50IGFueXRoaW5nXG4gICAgICAgICAgICBpZiAoaWRlbnRpZmllciA9PT0gdGhpcy5wcmVyZWxlYXNlLmpvaW4oJy4nKSAmJiBpZGVudGlmaWVyQmFzZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGluY3JlbWVudCBhcmd1bWVudDogaWRlbnRpZmllciBhbHJlYWR5IGV4aXN0cycpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByZXJlbGVhc2UucHVzaChiYXNlKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaWRlbnRpZmllcikge1xuICAgICAgICAgIC8vIDEuMi4wLWJldGEuMSBidW1wcyB0byAxLjIuMC1iZXRhLjIsXG4gICAgICAgICAgLy8gMS4yLjAtYmV0YS5mb29ibHogb3IgMS4yLjAtYmV0YSBidW1wcyB0byAxLjIuMC1iZXRhLjBcbiAgICAgICAgICBsZXQgcHJlcmVsZWFzZSA9IFtpZGVudGlmaWVyLCBiYXNlXVxuICAgICAgICAgIGlmIChpZGVudGlmaWVyQmFzZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHByZXJlbGVhc2UgPSBbaWRlbnRpZmllcl1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNvbXBhcmVJZGVudGlmaWVycyh0aGlzLnByZXJlbGVhc2VbMF0sIGlkZW50aWZpZXIpID09PSAwKSB7XG4gICAgICAgICAgICBpZiAoaXNOYU4odGhpcy5wcmVyZWxlYXNlWzFdKSkge1xuICAgICAgICAgICAgICB0aGlzLnByZXJlbGVhc2UgPSBwcmVyZWxlYXNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucHJlcmVsZWFzZSA9IHByZXJlbGVhc2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgaW52YWxpZCBpbmNyZW1lbnQgYXJndW1lbnQ6ICR7cmVsZWFzZX1gKVxuICAgIH1cbiAgICB0aGlzLnJhdyA9IHRoaXMuZm9ybWF0KClcbiAgICBpZiAodGhpcy5idWlsZC5sZW5ndGgpIHtcbiAgICAgIHRoaXMucmF3ICs9IGArJHt0aGlzLmJ1aWxkLmpvaW4oJy4nKX1gXG4gICAgfVxuICAgIHJldHVybiB0aGlzXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBTZW1WZXJcbiIsICJjb25zdCBTZW1WZXIgPSByZXF1aXJlKCcuLi9jbGFzc2VzL3NlbXZlcicpXG5jb25zdCBwYXJzZSA9ICh2ZXJzaW9uLCBvcHRpb25zLCB0aHJvd0Vycm9ycyA9IGZhbHNlKSA9PiB7XG4gIGlmICh2ZXJzaW9uIGluc3RhbmNlb2YgU2VtVmVyKSB7XG4gICAgcmV0dXJuIHZlcnNpb25cbiAgfVxuICB0cnkge1xuICAgIHJldHVybiBuZXcgU2VtVmVyKHZlcnNpb24sIG9wdGlvbnMpXG4gIH0gY2F0Y2ggKGVyKSB7XG4gICAgaWYgKCF0aHJvd0Vycm9ycykge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgdGhyb3cgZXJcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHBhcnNlXG4iLCAiY29uc3QgcGFyc2UgPSByZXF1aXJlKCcuL3BhcnNlJylcbmNvbnN0IHZhbGlkID0gKHZlcnNpb24sIG9wdGlvbnMpID0+IHtcbiAgY29uc3QgdiA9IHBhcnNlKHZlcnNpb24sIG9wdGlvbnMpXG4gIHJldHVybiB2ID8gdi52ZXJzaW9uIDogbnVsbFxufVxubW9kdWxlLmV4cG9ydHMgPSB2YWxpZFxuIiwgImNvbnN0IHBhcnNlID0gcmVxdWlyZSgnLi9wYXJzZScpXG5jb25zdCBjbGVhbiA9ICh2ZXJzaW9uLCBvcHRpb25zKSA9PiB7XG4gIGNvbnN0IHMgPSBwYXJzZSh2ZXJzaW9uLnRyaW0oKS5yZXBsYWNlKC9eWz12XSsvLCAnJyksIG9wdGlvbnMpXG4gIHJldHVybiBzID8gcy52ZXJzaW9uIDogbnVsbFxufVxubW9kdWxlLmV4cG9ydHMgPSBjbGVhblxuIiwgImNvbnN0IFNlbVZlciA9IHJlcXVpcmUoJy4uL2NsYXNzZXMvc2VtdmVyJylcblxuY29uc3QgaW5jID0gKHZlcnNpb24sIHJlbGVhc2UsIG9wdGlvbnMsIGlkZW50aWZpZXIsIGlkZW50aWZpZXJCYXNlKSA9PiB7XG4gIGlmICh0eXBlb2YgKG9wdGlvbnMpID09PSAnc3RyaW5nJykge1xuICAgIGlkZW50aWZpZXJCYXNlID0gaWRlbnRpZmllclxuICAgIGlkZW50aWZpZXIgPSBvcHRpb25zXG4gICAgb3B0aW9ucyA9IHVuZGVmaW5lZFxuICB9XG5cbiAgdHJ5IHtcbiAgICByZXR1cm4gbmV3IFNlbVZlcihcbiAgICAgIHZlcnNpb24gaW5zdGFuY2VvZiBTZW1WZXIgPyB2ZXJzaW9uLnZlcnNpb24gOiB2ZXJzaW9uLFxuICAgICAgb3B0aW9uc1xuICAgICkuaW5jKHJlbGVhc2UsIGlkZW50aWZpZXIsIGlkZW50aWZpZXJCYXNlKS52ZXJzaW9uXG4gIH0gY2F0Y2ggKGVyKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSBpbmNcbiIsICJjb25zdCBwYXJzZSA9IHJlcXVpcmUoJy4vcGFyc2UuanMnKVxuXG5jb25zdCBkaWZmID0gKHZlcnNpb24xLCB2ZXJzaW9uMikgPT4ge1xuICBjb25zdCB2MSA9IHBhcnNlKHZlcnNpb24xLCBudWxsLCB0cnVlKVxuICBjb25zdCB2MiA9IHBhcnNlKHZlcnNpb24yLCBudWxsLCB0cnVlKVxuICBjb25zdCBjb21wYXJpc29uID0gdjEuY29tcGFyZSh2MilcblxuICBpZiAoY29tcGFyaXNvbiA9PT0gMCkge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBjb25zdCB2MUhpZ2hlciA9IGNvbXBhcmlzb24gPiAwXG4gIGNvbnN0IGhpZ2hWZXJzaW9uID0gdjFIaWdoZXIgPyB2MSA6IHYyXG4gIGNvbnN0IGxvd1ZlcnNpb24gPSB2MUhpZ2hlciA/IHYyIDogdjFcbiAgY29uc3QgaGlnaEhhc1ByZSA9ICEhaGlnaFZlcnNpb24ucHJlcmVsZWFzZS5sZW5ndGhcbiAgY29uc3QgbG93SGFzUHJlID0gISFsb3dWZXJzaW9uLnByZXJlbGVhc2UubGVuZ3RoXG5cbiAgaWYgKGxvd0hhc1ByZSAmJiAhaGlnaEhhc1ByZSkge1xuICAgIC8vIEdvaW5nIGZyb20gcHJlcmVsZWFzZSAtPiBubyBwcmVyZWxlYXNlIHJlcXVpcmVzIHNvbWUgc3BlY2lhbCBjYXNpbmdcblxuICAgIC8vIElmIHRoZSBsb3cgdmVyc2lvbiBoYXMgb25seSBhIG1ham9yLCB0aGVuIGl0IHdpbGwgYWx3YXlzIGJlIGEgbWFqb3JcbiAgICAvLyBTb21lIGV4YW1wbGVzOlxuICAgIC8vIDEuMC4wLTEgLT4gMS4wLjBcbiAgICAvLyAxLjAuMC0xIC0+IDEuMS4xXG4gICAgLy8gMS4wLjAtMSAtPiAyLjAuMFxuICAgIGlmICghbG93VmVyc2lvbi5wYXRjaCAmJiAhbG93VmVyc2lvbi5taW5vcikge1xuICAgICAgcmV0dXJuICdtYWpvcidcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgbWFpbiBwYXJ0IGhhcyBubyBkaWZmZXJlbmNlXG4gICAgaWYgKGxvd1ZlcnNpb24uY29tcGFyZU1haW4oaGlnaFZlcnNpb24pID09PSAwKSB7XG4gICAgICBpZiAobG93VmVyc2lvbi5taW5vciAmJiAhbG93VmVyc2lvbi5wYXRjaCkge1xuICAgICAgICByZXR1cm4gJ21pbm9yJ1xuICAgICAgfVxuICAgICAgcmV0dXJuICdwYXRjaCdcbiAgICB9XG4gIH1cblxuICAvLyBhZGQgdGhlIGBwcmVgIHByZWZpeCBpZiB3ZSBhcmUgZ29pbmcgdG8gYSBwcmVyZWxlYXNlIHZlcnNpb25cbiAgY29uc3QgcHJlZml4ID0gaGlnaEhhc1ByZSA/ICdwcmUnIDogJydcblxuICBpZiAodjEubWFqb3IgIT09IHYyLm1ham9yKSB7XG4gICAgcmV0dXJuIHByZWZpeCArICdtYWpvcidcbiAgfVxuXG4gIGlmICh2MS5taW5vciAhPT0gdjIubWlub3IpIHtcbiAgICByZXR1cm4gcHJlZml4ICsgJ21pbm9yJ1xuICB9XG5cbiAgaWYgKHYxLnBhdGNoICE9PSB2Mi5wYXRjaCkge1xuICAgIHJldHVybiBwcmVmaXggKyAncGF0Y2gnXG4gIH1cblxuICAvLyBoaWdoIGFuZCBsb3cgYXJlIHByZWxlYXNlc1xuICByZXR1cm4gJ3ByZXJlbGVhc2UnXG59XG5cbm1vZHVsZS5leHBvcnRzID0gZGlmZlxuIiwgImNvbnN0IFNlbVZlciA9IHJlcXVpcmUoJy4uL2NsYXNzZXMvc2VtdmVyJylcbmNvbnN0IG1ham9yID0gKGEsIGxvb3NlKSA9PiBuZXcgU2VtVmVyKGEsIGxvb3NlKS5tYWpvclxubW9kdWxlLmV4cG9ydHMgPSBtYWpvclxuIiwgImNvbnN0IFNlbVZlciA9IHJlcXVpcmUoJy4uL2NsYXNzZXMvc2VtdmVyJylcbmNvbnN0IG1pbm9yID0gKGEsIGxvb3NlKSA9PiBuZXcgU2VtVmVyKGEsIGxvb3NlKS5taW5vclxubW9kdWxlLmV4cG9ydHMgPSBtaW5vclxuIiwgImNvbnN0IFNlbVZlciA9IHJlcXVpcmUoJy4uL2NsYXNzZXMvc2VtdmVyJylcbmNvbnN0IHBhdGNoID0gKGEsIGxvb3NlKSA9PiBuZXcgU2VtVmVyKGEsIGxvb3NlKS5wYXRjaFxubW9kdWxlLmV4cG9ydHMgPSBwYXRjaFxuIiwgImNvbnN0IHBhcnNlID0gcmVxdWlyZSgnLi9wYXJzZScpXG5jb25zdCBwcmVyZWxlYXNlID0gKHZlcnNpb24sIG9wdGlvbnMpID0+IHtcbiAgY29uc3QgcGFyc2VkID0gcGFyc2UodmVyc2lvbiwgb3B0aW9ucylcbiAgcmV0dXJuIChwYXJzZWQgJiYgcGFyc2VkLnByZXJlbGVhc2UubGVuZ3RoKSA/IHBhcnNlZC5wcmVyZWxlYXNlIDogbnVsbFxufVxubW9kdWxlLmV4cG9ydHMgPSBwcmVyZWxlYXNlXG4iLCAiY29uc3QgU2VtVmVyID0gcmVxdWlyZSgnLi4vY2xhc3Nlcy9zZW12ZXInKVxuY29uc3QgY29tcGFyZSA9IChhLCBiLCBsb29zZSkgPT5cbiAgbmV3IFNlbVZlcihhLCBsb29zZSkuY29tcGFyZShuZXcgU2VtVmVyKGIsIGxvb3NlKSlcblxubW9kdWxlLmV4cG9ydHMgPSBjb21wYXJlXG4iLCAiY29uc3QgY29tcGFyZSA9IHJlcXVpcmUoJy4vY29tcGFyZScpXG5jb25zdCByY29tcGFyZSA9IChhLCBiLCBsb29zZSkgPT4gY29tcGFyZShiLCBhLCBsb29zZSlcbm1vZHVsZS5leHBvcnRzID0gcmNvbXBhcmVcbiIsICJjb25zdCBjb21wYXJlID0gcmVxdWlyZSgnLi9jb21wYXJlJylcbmNvbnN0IGNvbXBhcmVMb29zZSA9IChhLCBiKSA9PiBjb21wYXJlKGEsIGIsIHRydWUpXG5tb2R1bGUuZXhwb3J0cyA9IGNvbXBhcmVMb29zZVxuIiwgImNvbnN0IFNlbVZlciA9IHJlcXVpcmUoJy4uL2NsYXNzZXMvc2VtdmVyJylcbmNvbnN0IGNvbXBhcmVCdWlsZCA9IChhLCBiLCBsb29zZSkgPT4ge1xuICBjb25zdCB2ZXJzaW9uQSA9IG5ldyBTZW1WZXIoYSwgbG9vc2UpXG4gIGNvbnN0IHZlcnNpb25CID0gbmV3IFNlbVZlcihiLCBsb29zZSlcbiAgcmV0dXJuIHZlcnNpb25BLmNvbXBhcmUodmVyc2lvbkIpIHx8IHZlcnNpb25BLmNvbXBhcmVCdWlsZCh2ZXJzaW9uQilcbn1cbm1vZHVsZS5leHBvcnRzID0gY29tcGFyZUJ1aWxkXG4iLCAiY29uc3QgY29tcGFyZUJ1aWxkID0gcmVxdWlyZSgnLi9jb21wYXJlLWJ1aWxkJylcbmNvbnN0IHNvcnQgPSAobGlzdCwgbG9vc2UpID0+IGxpc3Quc29ydCgoYSwgYikgPT4gY29tcGFyZUJ1aWxkKGEsIGIsIGxvb3NlKSlcbm1vZHVsZS5leHBvcnRzID0gc29ydFxuIiwgImNvbnN0IGNvbXBhcmVCdWlsZCA9IHJlcXVpcmUoJy4vY29tcGFyZS1idWlsZCcpXG5jb25zdCByc29ydCA9IChsaXN0LCBsb29zZSkgPT4gbGlzdC5zb3J0KChhLCBiKSA9PiBjb21wYXJlQnVpbGQoYiwgYSwgbG9vc2UpKVxubW9kdWxlLmV4cG9ydHMgPSByc29ydFxuIiwgImNvbnN0IGNvbXBhcmUgPSByZXF1aXJlKCcuL2NvbXBhcmUnKVxuY29uc3QgZ3QgPSAoYSwgYiwgbG9vc2UpID0+IGNvbXBhcmUoYSwgYiwgbG9vc2UpID4gMFxubW9kdWxlLmV4cG9ydHMgPSBndFxuIiwgImNvbnN0IGNvbXBhcmUgPSByZXF1aXJlKCcuL2NvbXBhcmUnKVxuY29uc3QgbHQgPSAoYSwgYiwgbG9vc2UpID0+IGNvbXBhcmUoYSwgYiwgbG9vc2UpIDwgMFxubW9kdWxlLmV4cG9ydHMgPSBsdFxuIiwgImNvbnN0IGNvbXBhcmUgPSByZXF1aXJlKCcuL2NvbXBhcmUnKVxuY29uc3QgZXEgPSAoYSwgYiwgbG9vc2UpID0+IGNvbXBhcmUoYSwgYiwgbG9vc2UpID09PSAwXG5tb2R1bGUuZXhwb3J0cyA9IGVxXG4iLCAiY29uc3QgY29tcGFyZSA9IHJlcXVpcmUoJy4vY29tcGFyZScpXG5jb25zdCBuZXEgPSAoYSwgYiwgbG9vc2UpID0+IGNvbXBhcmUoYSwgYiwgbG9vc2UpICE9PSAwXG5tb2R1bGUuZXhwb3J0cyA9IG5lcVxuIiwgImNvbnN0IGNvbXBhcmUgPSByZXF1aXJlKCcuL2NvbXBhcmUnKVxuY29uc3QgZ3RlID0gKGEsIGIsIGxvb3NlKSA9PiBjb21wYXJlKGEsIGIsIGxvb3NlKSA+PSAwXG5tb2R1bGUuZXhwb3J0cyA9IGd0ZVxuIiwgImNvbnN0IGNvbXBhcmUgPSByZXF1aXJlKCcuL2NvbXBhcmUnKVxuY29uc3QgbHRlID0gKGEsIGIsIGxvb3NlKSA9PiBjb21wYXJlKGEsIGIsIGxvb3NlKSA8PSAwXG5tb2R1bGUuZXhwb3J0cyA9IGx0ZVxuIiwgImNvbnN0IGVxID0gcmVxdWlyZSgnLi9lcScpXG5jb25zdCBuZXEgPSByZXF1aXJlKCcuL25lcScpXG5jb25zdCBndCA9IHJlcXVpcmUoJy4vZ3QnKVxuY29uc3QgZ3RlID0gcmVxdWlyZSgnLi9ndGUnKVxuY29uc3QgbHQgPSByZXF1aXJlKCcuL2x0JylcbmNvbnN0IGx0ZSA9IHJlcXVpcmUoJy4vbHRlJylcblxuY29uc3QgY21wID0gKGEsIG9wLCBiLCBsb29zZSkgPT4ge1xuICBzd2l0Y2ggKG9wKSB7XG4gICAgY2FzZSAnPT09JzpcbiAgICAgIGlmICh0eXBlb2YgYSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgYSA9IGEudmVyc2lvblxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBiID09PSAnb2JqZWN0Jykge1xuICAgICAgICBiID0gYi52ZXJzaW9uXG4gICAgICB9XG4gICAgICByZXR1cm4gYSA9PT0gYlxuXG4gICAgY2FzZSAnIT09JzpcbiAgICAgIGlmICh0eXBlb2YgYSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgYSA9IGEudmVyc2lvblxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBiID09PSAnb2JqZWN0Jykge1xuICAgICAgICBiID0gYi52ZXJzaW9uXG4gICAgICB9XG4gICAgICByZXR1cm4gYSAhPT0gYlxuXG4gICAgY2FzZSAnJzpcbiAgICBjYXNlICc9JzpcbiAgICBjYXNlICc9PSc6XG4gICAgICByZXR1cm4gZXEoYSwgYiwgbG9vc2UpXG5cbiAgICBjYXNlICchPSc6XG4gICAgICByZXR1cm4gbmVxKGEsIGIsIGxvb3NlKVxuXG4gICAgY2FzZSAnPic6XG4gICAgICByZXR1cm4gZ3QoYSwgYiwgbG9vc2UpXG5cbiAgICBjYXNlICc+PSc6XG4gICAgICByZXR1cm4gZ3RlKGEsIGIsIGxvb3NlKVxuXG4gICAgY2FzZSAnPCc6XG4gICAgICByZXR1cm4gbHQoYSwgYiwgbG9vc2UpXG5cbiAgICBjYXNlICc8PSc6XG4gICAgICByZXR1cm4gbHRlKGEsIGIsIGxvb3NlKVxuXG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgb3BlcmF0b3I6ICR7b3B9YClcbiAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSBjbXBcbiIsICJjb25zdCBTZW1WZXIgPSByZXF1aXJlKCcuLi9jbGFzc2VzL3NlbXZlcicpXG5jb25zdCBwYXJzZSA9IHJlcXVpcmUoJy4vcGFyc2UnKVxuY29uc3QgeyBzYWZlUmU6IHJlLCB0IH0gPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9yZScpXG5cbmNvbnN0IGNvZXJjZSA9ICh2ZXJzaW9uLCBvcHRpb25zKSA9PiB7XG4gIGlmICh2ZXJzaW9uIGluc3RhbmNlb2YgU2VtVmVyKSB7XG4gICAgcmV0dXJuIHZlcnNpb25cbiAgfVxuXG4gIGlmICh0eXBlb2YgdmVyc2lvbiA9PT0gJ251bWJlcicpIHtcbiAgICB2ZXJzaW9uID0gU3RyaW5nKHZlcnNpb24pXG4gIH1cblxuICBpZiAodHlwZW9mIHZlcnNpb24gIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9XG5cbiAgbGV0IG1hdGNoID0gbnVsbFxuICBpZiAoIW9wdGlvbnMucnRsKSB7XG4gICAgbWF0Y2ggPSB2ZXJzaW9uLm1hdGNoKG9wdGlvbnMuaW5jbHVkZVByZXJlbGVhc2UgPyByZVt0LkNPRVJDRUZVTExdIDogcmVbdC5DT0VSQ0VdKVxuICB9IGVsc2Uge1xuICAgIC8vIEZpbmQgdGhlIHJpZ2h0LW1vc3QgY29lcmNpYmxlIHN0cmluZyB0aGF0IGRvZXMgbm90IHNoYXJlXG4gICAgLy8gYSB0ZXJtaW51cyB3aXRoIGEgbW9yZSBsZWZ0LXdhcmQgY29lcmNpYmxlIHN0cmluZy5cbiAgICAvLyBFZywgJzEuMi4zLjQnIHdhbnRzIHRvIGNvZXJjZSAnMi4zLjQnLCBub3QgJzMuNCcgb3IgJzQnXG4gICAgLy8gV2l0aCBpbmNsdWRlUHJlcmVsZWFzZSBvcHRpb24gc2V0LCAnMS4yLjMuNC1yYycgd2FudHMgdG8gY29lcmNlICcyLjMuNC1yYycsIG5vdCAnMi4zLjQnXG4gICAgLy9cbiAgICAvLyBXYWxrIHRocm91Z2ggdGhlIHN0cmluZyBjaGVja2luZyB3aXRoIGEgL2cgcmVnZXhwXG4gICAgLy8gTWFudWFsbHkgc2V0IHRoZSBpbmRleCBzbyBhcyB0byBwaWNrIHVwIG92ZXJsYXBwaW5nIG1hdGNoZXMuXG4gICAgLy8gU3RvcCB3aGVuIHdlIGdldCBhIG1hdGNoIHRoYXQgZW5kcyBhdCB0aGUgc3RyaW5nIGVuZCwgc2luY2Ugbm9cbiAgICAvLyBjb2VyY2libGUgc3RyaW5nIGNhbiBiZSBtb3JlIHJpZ2h0LXdhcmQgd2l0aG91dCB0aGUgc2FtZSB0ZXJtaW51cy5cbiAgICBjb25zdCBjb2VyY2VSdGxSZWdleCA9IG9wdGlvbnMuaW5jbHVkZVByZXJlbGVhc2UgPyByZVt0LkNPRVJDRVJUTEZVTExdIDogcmVbdC5DT0VSQ0VSVExdXG4gICAgbGV0IG5leHRcbiAgICB3aGlsZSAoKG5leHQgPSBjb2VyY2VSdGxSZWdleC5leGVjKHZlcnNpb24pKSAmJlxuICAgICAgICAoIW1hdGNoIHx8IG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoICE9PSB2ZXJzaW9uLmxlbmd0aClcbiAgICApIHtcbiAgICAgIGlmICghbWF0Y2ggfHxcbiAgICAgICAgICAgIG5leHQuaW5kZXggKyBuZXh0WzBdLmxlbmd0aCAhPT0gbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGgpIHtcbiAgICAgICAgbWF0Y2ggPSBuZXh0XG4gICAgICB9XG4gICAgICBjb2VyY2VSdGxSZWdleC5sYXN0SW5kZXggPSBuZXh0LmluZGV4ICsgbmV4dFsxXS5sZW5ndGggKyBuZXh0WzJdLmxlbmd0aFxuICAgIH1cbiAgICAvLyBsZWF2ZSBpdCBpbiBhIGNsZWFuIHN0YXRlXG4gICAgY29lcmNlUnRsUmVnZXgubGFzdEluZGV4ID0gLTFcbiAgfVxuXG4gIGlmIChtYXRjaCA9PT0gbnVsbCkge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBjb25zdCBtYWpvciA9IG1hdGNoWzJdXG4gIGNvbnN0IG1pbm9yID0gbWF0Y2hbM10gfHwgJzAnXG4gIGNvbnN0IHBhdGNoID0gbWF0Y2hbNF0gfHwgJzAnXG4gIGNvbnN0IHByZXJlbGVhc2UgPSBvcHRpb25zLmluY2x1ZGVQcmVyZWxlYXNlICYmIG1hdGNoWzVdID8gYC0ke21hdGNoWzVdfWAgOiAnJ1xuICBjb25zdCBidWlsZCA9IG9wdGlvbnMuaW5jbHVkZVByZXJlbGVhc2UgJiYgbWF0Y2hbNl0gPyBgKyR7bWF0Y2hbNl19YCA6ICcnXG5cbiAgcmV0dXJuIHBhcnNlKGAke21ham9yfS4ke21pbm9yfS4ke3BhdGNofSR7cHJlcmVsZWFzZX0ke2J1aWxkfWAsIG9wdGlvbnMpXG59XG5tb2R1bGUuZXhwb3J0cyA9IGNvZXJjZVxuIiwgImNsYXNzIExSVUNhY2hlIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMubWF4ID0gMTAwMFxuICAgIHRoaXMubWFwID0gbmV3IE1hcCgpXG4gIH1cblxuICBnZXQgKGtleSkge1xuICAgIGNvbnN0IHZhbHVlID0gdGhpcy5tYXAuZ2V0KGtleSlcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBSZW1vdmUgdGhlIGtleSBmcm9tIHRoZSBtYXAgYW5kIGFkZCBpdCB0byB0aGUgZW5kXG4gICAgICB0aGlzLm1hcC5kZWxldGUoa2V5KVxuICAgICAgdGhpcy5tYXAuc2V0KGtleSwgdmFsdWUpXG4gICAgICByZXR1cm4gdmFsdWVcbiAgICB9XG4gIH1cblxuICBkZWxldGUgKGtleSkge1xuICAgIHJldHVybiB0aGlzLm1hcC5kZWxldGUoa2V5KVxuICB9XG5cbiAgc2V0IChrZXksIHZhbHVlKSB7XG4gICAgY29uc3QgZGVsZXRlZCA9IHRoaXMuZGVsZXRlKGtleSlcblxuICAgIGlmICghZGVsZXRlZCAmJiB2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBJZiBjYWNoZSBpcyBmdWxsLCBkZWxldGUgdGhlIGxlYXN0IHJlY2VudGx5IHVzZWQgaXRlbVxuICAgICAgaWYgKHRoaXMubWFwLnNpemUgPj0gdGhpcy5tYXgpIHtcbiAgICAgICAgY29uc3QgZmlyc3RLZXkgPSB0aGlzLm1hcC5rZXlzKCkubmV4dCgpLnZhbHVlXG4gICAgICAgIHRoaXMuZGVsZXRlKGZpcnN0S2V5KVxuICAgICAgfVxuXG4gICAgICB0aGlzLm1hcC5zZXQoa2V5LCB2YWx1ZSlcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpc1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gTFJVQ2FjaGVcbiIsICJjb25zdCBTUEFDRV9DSEFSQUNURVJTID0gL1xccysvZ1xuXG4vLyBob2lzdGVkIGNsYXNzIGZvciBjeWNsaWMgZGVwZW5kZW5jeVxuY2xhc3MgUmFuZ2Uge1xuICBjb25zdHJ1Y3RvciAocmFuZ2UsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gcGFyc2VPcHRpb25zKG9wdGlvbnMpXG5cbiAgICBpZiAocmFuZ2UgaW5zdGFuY2VvZiBSYW5nZSkge1xuICAgICAgaWYgKFxuICAgICAgICByYW5nZS5sb29zZSA9PT0gISFvcHRpb25zLmxvb3NlICYmXG4gICAgICAgIHJhbmdlLmluY2x1ZGVQcmVyZWxlYXNlID09PSAhIW9wdGlvbnMuaW5jbHVkZVByZXJlbGVhc2VcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gcmFuZ2VcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXcgUmFuZ2UocmFuZ2UucmF3LCBvcHRpb25zKVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChyYW5nZSBpbnN0YW5jZW9mIENvbXBhcmF0b3IpIHtcbiAgICAgIC8vIGp1c3QgcHV0IGl0IGluIHRoZSBzZXQgYW5kIHJldHVyblxuICAgICAgdGhpcy5yYXcgPSByYW5nZS52YWx1ZVxuICAgICAgdGhpcy5zZXQgPSBbW3JhbmdlXV1cbiAgICAgIHRoaXMuZm9ybWF0dGVkID0gdW5kZWZpbmVkXG4gICAgICByZXR1cm4gdGhpc1xuICAgIH1cblxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnNcbiAgICB0aGlzLmxvb3NlID0gISFvcHRpb25zLmxvb3NlXG4gICAgdGhpcy5pbmNsdWRlUHJlcmVsZWFzZSA9ICEhb3B0aW9ucy5pbmNsdWRlUHJlcmVsZWFzZVxuXG4gICAgLy8gRmlyc3QgcmVkdWNlIGFsbCB3aGl0ZXNwYWNlIGFzIG11Y2ggYXMgcG9zc2libGUgc28gd2UgZG8gbm90IGhhdmUgdG8gcmVseVxuICAgIC8vIG9uIHBvdGVudGlhbGx5IHNsb3cgcmVnZXhlcyBsaWtlIFxccyouIFRoaXMgaXMgdGhlbiBzdG9yZWQgYW5kIHVzZWQgZm9yXG4gICAgLy8gZnV0dXJlIGVycm9yIG1lc3NhZ2VzIGFzIHdlbGwuXG4gICAgdGhpcy5yYXcgPSByYW5nZS50cmltKCkucmVwbGFjZShTUEFDRV9DSEFSQUNURVJTLCAnICcpXG5cbiAgICAvLyBGaXJzdCwgc3BsaXQgb24gfHxcbiAgICB0aGlzLnNldCA9IHRoaXMucmF3XG4gICAgICAuc3BsaXQoJ3x8JylcbiAgICAgIC8vIG1hcCB0aGUgcmFuZ2UgdG8gYSAyZCBhcnJheSBvZiBjb21wYXJhdG9yc1xuICAgICAgLm1hcChyID0+IHRoaXMucGFyc2VSYW5nZShyLnRyaW0oKSkpXG4gICAgICAvLyB0aHJvdyBvdXQgYW55IGNvbXBhcmF0b3IgbGlzdHMgdGhhdCBhcmUgZW1wdHlcbiAgICAgIC8vIHRoaXMgZ2VuZXJhbGx5IG1lYW5zIHRoYXQgaXQgd2FzIG5vdCBhIHZhbGlkIHJhbmdlLCB3aGljaCBpcyBhbGxvd2VkXG4gICAgICAvLyBpbiBsb29zZSBtb2RlLCBidXQgd2lsbCBzdGlsbCB0aHJvdyBpZiB0aGUgV0hPTEUgcmFuZ2UgaXMgaW52YWxpZC5cbiAgICAgIC5maWx0ZXIoYyA9PiBjLmxlbmd0aClcblxuICAgIGlmICghdGhpcy5zZXQubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIFNlbVZlciBSYW5nZTogJHt0aGlzLnJhd31gKVxuICAgIH1cblxuICAgIC8vIGlmIHdlIGhhdmUgYW55IHRoYXQgYXJlIG5vdCB0aGUgbnVsbCBzZXQsIHRocm93IG91dCBudWxsIHNldHMuXG4gICAgaWYgKHRoaXMuc2V0Lmxlbmd0aCA+IDEpIHtcbiAgICAgIC8vIGtlZXAgdGhlIGZpcnN0IG9uZSwgaW4gY2FzZSB0aGV5J3JlIGFsbCBudWxsIHNldHNcbiAgICAgIGNvbnN0IGZpcnN0ID0gdGhpcy5zZXRbMF1cbiAgICAgIHRoaXMuc2V0ID0gdGhpcy5zZXQuZmlsdGVyKGMgPT4gIWlzTnVsbFNldChjWzBdKSlcbiAgICAgIGlmICh0aGlzLnNldC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhpcy5zZXQgPSBbZmlyc3RdXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuc2V0Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgLy8gaWYgd2UgaGF2ZSBhbnkgdGhhdCBhcmUgKiwgdGhlbiB0aGUgcmFuZ2UgaXMganVzdCAqXG4gICAgICAgIGZvciAoY29uc3QgYyBvZiB0aGlzLnNldCkge1xuICAgICAgICAgIGlmIChjLmxlbmd0aCA9PT0gMSAmJiBpc0FueShjWzBdKSkge1xuICAgICAgICAgICAgdGhpcy5zZXQgPSBbY11cbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5mb3JtYXR0ZWQgPSB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCByYW5nZSAoKSB7XG4gICAgaWYgKHRoaXMuZm9ybWF0dGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuZm9ybWF0dGVkID0gJydcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zZXQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGkgPiAwKSB7XG4gICAgICAgICAgdGhpcy5mb3JtYXR0ZWQgKz0gJ3x8J1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbXBzID0gdGhpcy5zZXRbaV1cbiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBjb21wcy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgIGlmIChrID4gMCkge1xuICAgICAgICAgICAgdGhpcy5mb3JtYXR0ZWQgKz0gJyAnXG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuZm9ybWF0dGVkICs9IGNvbXBzW2tdLnRvU3RyaW5nKCkudHJpbSgpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZm9ybWF0dGVkXG4gIH1cblxuICBmb3JtYXQgKCkge1xuICAgIHJldHVybiB0aGlzLnJhbmdlXG4gIH1cblxuICB0b1N0cmluZyAoKSB7XG4gICAgcmV0dXJuIHRoaXMucmFuZ2VcbiAgfVxuXG4gIHBhcnNlUmFuZ2UgKHJhbmdlKSB7XG4gICAgLy8gbWVtb2l6ZSByYW5nZSBwYXJzaW5nIGZvciBwZXJmb3JtYW5jZS5cbiAgICAvLyB0aGlzIGlzIGEgdmVyeSBob3QgcGF0aCwgYW5kIGZ1bGx5IGRldGVybWluaXN0aWMuXG4gICAgY29uc3QgbWVtb09wdHMgPVxuICAgICAgKHRoaXMub3B0aW9ucy5pbmNsdWRlUHJlcmVsZWFzZSAmJiBGTEFHX0lOQ0xVREVfUFJFUkVMRUFTRSkgfFxuICAgICAgKHRoaXMub3B0aW9ucy5sb29zZSAmJiBGTEFHX0xPT1NFKVxuICAgIGNvbnN0IG1lbW9LZXkgPSBtZW1vT3B0cyArICc6JyArIHJhbmdlXG4gICAgY29uc3QgY2FjaGVkID0gY2FjaGUuZ2V0KG1lbW9LZXkpXG4gICAgaWYgKGNhY2hlZCkge1xuICAgICAgcmV0dXJuIGNhY2hlZFxuICAgIH1cblxuICAgIGNvbnN0IGxvb3NlID0gdGhpcy5vcHRpb25zLmxvb3NlXG4gICAgLy8gYDEuMi4zIC0gMS4yLjRgID0+IGA+PTEuMi4zIDw9MS4yLjRgXG4gICAgY29uc3QgaHIgPSBsb29zZSA/IHJlW3QuSFlQSEVOUkFOR0VMT09TRV0gOiByZVt0LkhZUEhFTlJBTkdFXVxuICAgIHJhbmdlID0gcmFuZ2UucmVwbGFjZShociwgaHlwaGVuUmVwbGFjZSh0aGlzLm9wdGlvbnMuaW5jbHVkZVByZXJlbGVhc2UpKVxuICAgIGRlYnVnKCdoeXBoZW4gcmVwbGFjZScsIHJhbmdlKVxuXG4gICAgLy8gYD4gMS4yLjMgPCAxLjIuNWAgPT4gYD4xLjIuMyA8MS4yLjVgXG4gICAgcmFuZ2UgPSByYW5nZS5yZXBsYWNlKHJlW3QuQ09NUEFSQVRPUlRSSU1dLCBjb21wYXJhdG9yVHJpbVJlcGxhY2UpXG4gICAgZGVidWcoJ2NvbXBhcmF0b3IgdHJpbScsIHJhbmdlKVxuXG4gICAgLy8gYH4gMS4yLjNgID0+IGB+MS4yLjNgXG4gICAgcmFuZ2UgPSByYW5nZS5yZXBsYWNlKHJlW3QuVElMREVUUklNXSwgdGlsZGVUcmltUmVwbGFjZSlcbiAgICBkZWJ1ZygndGlsZGUgdHJpbScsIHJhbmdlKVxuXG4gICAgLy8gYF4gMS4yLjNgID0+IGBeMS4yLjNgXG4gICAgcmFuZ2UgPSByYW5nZS5yZXBsYWNlKHJlW3QuQ0FSRVRUUklNXSwgY2FyZXRUcmltUmVwbGFjZSlcbiAgICBkZWJ1ZygnY2FyZXQgdHJpbScsIHJhbmdlKVxuXG4gICAgLy8gQXQgdGhpcyBwb2ludCwgdGhlIHJhbmdlIGlzIGNvbXBsZXRlbHkgdHJpbW1lZCBhbmRcbiAgICAvLyByZWFkeSB0byBiZSBzcGxpdCBpbnRvIGNvbXBhcmF0b3JzLlxuXG4gICAgbGV0IHJhbmdlTGlzdCA9IHJhbmdlXG4gICAgICAuc3BsaXQoJyAnKVxuICAgICAgLm1hcChjb21wID0+IHBhcnNlQ29tcGFyYXRvcihjb21wLCB0aGlzLm9wdGlvbnMpKVxuICAgICAgLmpvaW4oJyAnKVxuICAgICAgLnNwbGl0KC9cXHMrLylcbiAgICAgIC8vID49MC4wLjAgaXMgZXF1aXZhbGVudCB0byAqXG4gICAgICAubWFwKGNvbXAgPT4gcmVwbGFjZUdURTAoY29tcCwgdGhpcy5vcHRpb25zKSlcblxuICAgIGlmIChsb29zZSkge1xuICAgICAgLy8gaW4gbG9vc2UgbW9kZSwgdGhyb3cgb3V0IGFueSB0aGF0IGFyZSBub3QgdmFsaWQgY29tcGFyYXRvcnNcbiAgICAgIHJhbmdlTGlzdCA9IHJhbmdlTGlzdC5maWx0ZXIoY29tcCA9PiB7XG4gICAgICAgIGRlYnVnKCdsb29zZSBpbnZhbGlkIGZpbHRlcicsIGNvbXAsIHRoaXMub3B0aW9ucylcbiAgICAgICAgcmV0dXJuICEhY29tcC5tYXRjaChyZVt0LkNPTVBBUkFUT1JMT09TRV0pXG4gICAgICB9KVxuICAgIH1cbiAgICBkZWJ1ZygncmFuZ2UgbGlzdCcsIHJhbmdlTGlzdClcblxuICAgIC8vIGlmIGFueSBjb21wYXJhdG9ycyBhcmUgdGhlIG51bGwgc2V0LCB0aGVuIHJlcGxhY2Ugd2l0aCBKVVNUIG51bGwgc2V0XG4gICAgLy8gaWYgbW9yZSB0aGFuIG9uZSBjb21wYXJhdG9yLCByZW1vdmUgYW55ICogY29tcGFyYXRvcnNcbiAgICAvLyBhbHNvLCBkb24ndCBpbmNsdWRlIHRoZSBzYW1lIGNvbXBhcmF0b3IgbW9yZSB0aGFuIG9uY2VcbiAgICBjb25zdCByYW5nZU1hcCA9IG5ldyBNYXAoKVxuICAgIGNvbnN0IGNvbXBhcmF0b3JzID0gcmFuZ2VMaXN0Lm1hcChjb21wID0+IG5ldyBDb21wYXJhdG9yKGNvbXAsIHRoaXMub3B0aW9ucykpXG4gICAgZm9yIChjb25zdCBjb21wIG9mIGNvbXBhcmF0b3JzKSB7XG4gICAgICBpZiAoaXNOdWxsU2V0KGNvbXApKSB7XG4gICAgICAgIHJldHVybiBbY29tcF1cbiAgICAgIH1cbiAgICAgIHJhbmdlTWFwLnNldChjb21wLnZhbHVlLCBjb21wKVxuICAgIH1cbiAgICBpZiAocmFuZ2VNYXAuc2l6ZSA+IDEgJiYgcmFuZ2VNYXAuaGFzKCcnKSkge1xuICAgICAgcmFuZ2VNYXAuZGVsZXRlKCcnKVxuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdCA9IFsuLi5yYW5nZU1hcC52YWx1ZXMoKV1cbiAgICBjYWNoZS5zZXQobWVtb0tleSwgcmVzdWx0KVxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuXG4gIGludGVyc2VjdHMgKHJhbmdlLCBvcHRpb25zKSB7XG4gICAgaWYgKCEocmFuZ2UgaW5zdGFuY2VvZiBSYW5nZSkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2EgUmFuZ2UgaXMgcmVxdWlyZWQnKVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnNldC5zb21lKCh0aGlzQ29tcGFyYXRvcnMpID0+IHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIGlzU2F0aXNmaWFibGUodGhpc0NvbXBhcmF0b3JzLCBvcHRpb25zKSAmJlxuICAgICAgICByYW5nZS5zZXQuc29tZSgocmFuZ2VDb21wYXJhdG9ycykgPT4ge1xuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICBpc1NhdGlzZmlhYmxlKHJhbmdlQ29tcGFyYXRvcnMsIG9wdGlvbnMpICYmXG4gICAgICAgICAgICB0aGlzQ29tcGFyYXRvcnMuZXZlcnkoKHRoaXNDb21wYXJhdG9yKSA9PiB7XG4gICAgICAgICAgICAgIHJldHVybiByYW5nZUNvbXBhcmF0b3JzLmV2ZXJ5KChyYW5nZUNvbXBhcmF0b3IpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpc0NvbXBhcmF0b3IuaW50ZXJzZWN0cyhyYW5nZUNvbXBhcmF0b3IsIG9wdGlvbnMpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIClcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICB9KVxuICB9XG5cbiAgLy8gaWYgQU5ZIG9mIHRoZSBzZXRzIG1hdGNoIEFMTCBvZiBpdHMgY29tcGFyYXRvcnMsIHRoZW4gcGFzc1xuICB0ZXN0ICh2ZXJzaW9uKSB7XG4gICAgaWYgKCF2ZXJzaW9uKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHZlcnNpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICB0cnkge1xuICAgICAgICB2ZXJzaW9uID0gbmV3IFNlbVZlcih2ZXJzaW9uLCB0aGlzLm9wdGlvbnMpXG4gICAgICB9IGNhdGNoIChlcikge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2V0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGVzdFNldCh0aGlzLnNldFtpXSwgdmVyc2lvbiwgdGhpcy5vcHRpb25zKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJhbmdlXG5cbmNvbnN0IExSVSA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2xydWNhY2hlJylcbmNvbnN0IGNhY2hlID0gbmV3IExSVSgpXG5cbmNvbnN0IHBhcnNlT3B0aW9ucyA9IHJlcXVpcmUoJy4uL2ludGVybmFsL3BhcnNlLW9wdGlvbnMnKVxuY29uc3QgQ29tcGFyYXRvciA9IHJlcXVpcmUoJy4vY29tcGFyYXRvcicpXG5jb25zdCBkZWJ1ZyA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2RlYnVnJylcbmNvbnN0IFNlbVZlciA9IHJlcXVpcmUoJy4vc2VtdmVyJylcbmNvbnN0IHtcbiAgc2FmZVJlOiByZSxcbiAgdCxcbiAgY29tcGFyYXRvclRyaW1SZXBsYWNlLFxuICB0aWxkZVRyaW1SZXBsYWNlLFxuICBjYXJldFRyaW1SZXBsYWNlLFxufSA9IHJlcXVpcmUoJy4uL2ludGVybmFsL3JlJylcbmNvbnN0IHsgRkxBR19JTkNMVURFX1BSRVJFTEVBU0UsIEZMQUdfTE9PU0UgfSA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2NvbnN0YW50cycpXG5cbmNvbnN0IGlzTnVsbFNldCA9IGMgPT4gYy52YWx1ZSA9PT0gJzwwLjAuMC0wJ1xuY29uc3QgaXNBbnkgPSBjID0+IGMudmFsdWUgPT09ICcnXG5cbi8vIHRha2UgYSBzZXQgb2YgY29tcGFyYXRvcnMgYW5kIGRldGVybWluZSB3aGV0aGVyIHRoZXJlXG4vLyBleGlzdHMgYSB2ZXJzaW9uIHdoaWNoIGNhbiBzYXRpc2Z5IGl0XG5jb25zdCBpc1NhdGlzZmlhYmxlID0gKGNvbXBhcmF0b3JzLCBvcHRpb25zKSA9PiB7XG4gIGxldCByZXN1bHQgPSB0cnVlXG4gIGNvbnN0IHJlbWFpbmluZ0NvbXBhcmF0b3JzID0gY29tcGFyYXRvcnMuc2xpY2UoKVxuICBsZXQgdGVzdENvbXBhcmF0b3IgPSByZW1haW5pbmdDb21wYXJhdG9ycy5wb3AoKVxuXG4gIHdoaWxlIChyZXN1bHQgJiYgcmVtYWluaW5nQ29tcGFyYXRvcnMubGVuZ3RoKSB7XG4gICAgcmVzdWx0ID0gcmVtYWluaW5nQ29tcGFyYXRvcnMuZXZlcnkoKG90aGVyQ29tcGFyYXRvcikgPT4ge1xuICAgICAgcmV0dXJuIHRlc3RDb21wYXJhdG9yLmludGVyc2VjdHMob3RoZXJDb21wYXJhdG9yLCBvcHRpb25zKVxuICAgIH0pXG5cbiAgICB0ZXN0Q29tcGFyYXRvciA9IHJlbWFpbmluZ0NvbXBhcmF0b3JzLnBvcCgpXG4gIH1cblxuICByZXR1cm4gcmVzdWx0XG59XG5cbi8vIGNvbXByaXNlZCBvZiB4cmFuZ2VzLCB0aWxkZXMsIHN0YXJzLCBhbmQgZ3RsdCdzIGF0IHRoaXMgcG9pbnQuXG4vLyBhbHJlYWR5IHJlcGxhY2VkIHRoZSBoeXBoZW4gcmFuZ2VzXG4vLyB0dXJuIGludG8gYSBzZXQgb2YgSlVTVCBjb21wYXJhdG9ycy5cbmNvbnN0IHBhcnNlQ29tcGFyYXRvciA9IChjb21wLCBvcHRpb25zKSA9PiB7XG4gIGRlYnVnKCdjb21wJywgY29tcCwgb3B0aW9ucylcbiAgY29tcCA9IHJlcGxhY2VDYXJldHMoY29tcCwgb3B0aW9ucylcbiAgZGVidWcoJ2NhcmV0JywgY29tcClcbiAgY29tcCA9IHJlcGxhY2VUaWxkZXMoY29tcCwgb3B0aW9ucylcbiAgZGVidWcoJ3RpbGRlcycsIGNvbXApXG4gIGNvbXAgPSByZXBsYWNlWFJhbmdlcyhjb21wLCBvcHRpb25zKVxuICBkZWJ1ZygneHJhbmdlJywgY29tcClcbiAgY29tcCA9IHJlcGxhY2VTdGFycyhjb21wLCBvcHRpb25zKVxuICBkZWJ1Zygnc3RhcnMnLCBjb21wKVxuICByZXR1cm4gY29tcFxufVxuXG5jb25zdCBpc1ggPSBpZCA9PiAhaWQgfHwgaWQudG9Mb3dlckNhc2UoKSA9PT0gJ3gnIHx8IGlkID09PSAnKidcblxuLy8gfiwgfj4gLS0+ICogKGFueSwga2luZGEgc2lsbHkpXG4vLyB+MiwgfjIueCwgfjIueC54LCB+PjIsIH4+Mi54IH4+Mi54LnggLS0+ID49Mi4wLjAgPDMuMC4wLTBcbi8vIH4yLjAsIH4yLjAueCwgfj4yLjAsIH4+Mi4wLnggLS0+ID49Mi4wLjAgPDIuMS4wLTBcbi8vIH4xLjIsIH4xLjIueCwgfj4xLjIsIH4+MS4yLnggLS0+ID49MS4yLjAgPDEuMy4wLTBcbi8vIH4xLjIuMywgfj4xLjIuMyAtLT4gPj0xLjIuMyA8MS4zLjAtMFxuLy8gfjEuMi4wLCB+PjEuMi4wIC0tPiA+PTEuMi4wIDwxLjMuMC0wXG4vLyB+MC4wLjEgLS0+ID49MC4wLjEgPDAuMS4wLTBcbmNvbnN0IHJlcGxhY2VUaWxkZXMgPSAoY29tcCwgb3B0aW9ucykgPT4ge1xuICByZXR1cm4gY29tcFxuICAgIC50cmltKClcbiAgICAuc3BsaXQoL1xccysvKVxuICAgIC5tYXAoKGMpID0+IHJlcGxhY2VUaWxkZShjLCBvcHRpb25zKSlcbiAgICAuam9pbignICcpXG59XG5cbmNvbnN0IHJlcGxhY2VUaWxkZSA9IChjb21wLCBvcHRpb25zKSA9PiB7XG4gIGNvbnN0IHIgPSBvcHRpb25zLmxvb3NlID8gcmVbdC5USUxERUxPT1NFXSA6IHJlW3QuVElMREVdXG4gIHJldHVybiBjb21wLnJlcGxhY2UociwgKF8sIE0sIG0sIHAsIHByKSA9PiB7XG4gICAgZGVidWcoJ3RpbGRlJywgY29tcCwgXywgTSwgbSwgcCwgcHIpXG4gICAgbGV0IHJldFxuXG4gICAgaWYgKGlzWChNKSkge1xuICAgICAgcmV0ID0gJydcbiAgICB9IGVsc2UgaWYgKGlzWChtKSkge1xuICAgICAgcmV0ID0gYD49JHtNfS4wLjAgPCR7K00gKyAxfS4wLjAtMGBcbiAgICB9IGVsc2UgaWYgKGlzWChwKSkge1xuICAgICAgLy8gfjEuMiA9PSA+PTEuMi4wIDwxLjMuMC0wXG4gICAgICByZXQgPSBgPj0ke019LiR7bX0uMCA8JHtNfS4keyttICsgMX0uMC0wYFxuICAgIH0gZWxzZSBpZiAocHIpIHtcbiAgICAgIGRlYnVnKCdyZXBsYWNlVGlsZGUgcHInLCBwcilcbiAgICAgIHJldCA9IGA+PSR7TX0uJHttfS4ke3B9LSR7cHJcbiAgICAgIH0gPCR7TX0uJHsrbSArIDF9LjAtMGBcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gfjEuMi4zID09ID49MS4yLjMgPDEuMy4wLTBcbiAgICAgIHJldCA9IGA+PSR7TX0uJHttfS4ke3BcbiAgICAgIH0gPCR7TX0uJHsrbSArIDF9LjAtMGBcbiAgICB9XG5cbiAgICBkZWJ1ZygndGlsZGUgcmV0dXJuJywgcmV0KVxuICAgIHJldHVybiByZXRcbiAgfSlcbn1cblxuLy8gXiAtLT4gKiAoYW55LCBraW5kYSBzaWxseSlcbi8vIF4yLCBeMi54LCBeMi54LnggLS0+ID49Mi4wLjAgPDMuMC4wLTBcbi8vIF4yLjAsIF4yLjAueCAtLT4gPj0yLjAuMCA8My4wLjAtMFxuLy8gXjEuMiwgXjEuMi54IC0tPiA+PTEuMi4wIDwyLjAuMC0wXG4vLyBeMS4yLjMgLS0+ID49MS4yLjMgPDIuMC4wLTBcbi8vIF4xLjIuMCAtLT4gPj0xLjIuMCA8Mi4wLjAtMFxuLy8gXjAuMC4xIC0tPiA+PTAuMC4xIDwwLjAuMi0wXG4vLyBeMC4xLjAgLS0+ID49MC4xLjAgPDAuMi4wLTBcbmNvbnN0IHJlcGxhY2VDYXJldHMgPSAoY29tcCwgb3B0aW9ucykgPT4ge1xuICByZXR1cm4gY29tcFxuICAgIC50cmltKClcbiAgICAuc3BsaXQoL1xccysvKVxuICAgIC5tYXAoKGMpID0+IHJlcGxhY2VDYXJldChjLCBvcHRpb25zKSlcbiAgICAuam9pbignICcpXG59XG5cbmNvbnN0IHJlcGxhY2VDYXJldCA9IChjb21wLCBvcHRpb25zKSA9PiB7XG4gIGRlYnVnKCdjYXJldCcsIGNvbXAsIG9wdGlvbnMpXG4gIGNvbnN0IHIgPSBvcHRpb25zLmxvb3NlID8gcmVbdC5DQVJFVExPT1NFXSA6IHJlW3QuQ0FSRVRdXG4gIGNvbnN0IHogPSBvcHRpb25zLmluY2x1ZGVQcmVyZWxlYXNlID8gJy0wJyA6ICcnXG4gIHJldHVybiBjb21wLnJlcGxhY2UociwgKF8sIE0sIG0sIHAsIHByKSA9PiB7XG4gICAgZGVidWcoJ2NhcmV0JywgY29tcCwgXywgTSwgbSwgcCwgcHIpXG4gICAgbGV0IHJldFxuXG4gICAgaWYgKGlzWChNKSkge1xuICAgICAgcmV0ID0gJydcbiAgICB9IGVsc2UgaWYgKGlzWChtKSkge1xuICAgICAgcmV0ID0gYD49JHtNfS4wLjAke3p9IDwkeytNICsgMX0uMC4wLTBgXG4gICAgfSBlbHNlIGlmIChpc1gocCkpIHtcbiAgICAgIGlmIChNID09PSAnMCcpIHtcbiAgICAgICAgcmV0ID0gYD49JHtNfS4ke219LjAke3p9IDwke019LiR7K20gKyAxfS4wLTBgXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXQgPSBgPj0ke019LiR7bX0uMCR7en0gPCR7K00gKyAxfS4wLjAtMGBcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHByKSB7XG4gICAgICBkZWJ1ZygncmVwbGFjZUNhcmV0IHByJywgcHIpXG4gICAgICBpZiAoTSA9PT0gJzAnKSB7XG4gICAgICAgIGlmIChtID09PSAnMCcpIHtcbiAgICAgICAgICByZXQgPSBgPj0ke019LiR7bX0uJHtwfS0ke3ByXG4gICAgICAgICAgfSA8JHtNfS4ke219LiR7K3AgKyAxfS0wYFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldCA9IGA+PSR7TX0uJHttfS4ke3B9LSR7cHJcbiAgICAgICAgICB9IDwke019LiR7K20gKyAxfS4wLTBgXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldCA9IGA+PSR7TX0uJHttfS4ke3B9LSR7cHJcbiAgICAgICAgfSA8JHsrTSArIDF9LjAuMC0wYFxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Zygnbm8gcHInKVxuICAgICAgaWYgKE0gPT09ICcwJykge1xuICAgICAgICBpZiAobSA9PT0gJzAnKSB7XG4gICAgICAgICAgcmV0ID0gYD49JHtNfS4ke219LiR7cFxuICAgICAgICAgIH0ke3p9IDwke019LiR7bX0uJHsrcCArIDF9LTBgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0ID0gYD49JHtNfS4ke219LiR7cFxuICAgICAgICAgIH0ke3p9IDwke019LiR7K20gKyAxfS4wLTBgXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldCA9IGA+PSR7TX0uJHttfS4ke3BcbiAgICAgICAgfSA8JHsrTSArIDF9LjAuMC0wYFxuICAgICAgfVxuICAgIH1cblxuICAgIGRlYnVnKCdjYXJldCByZXR1cm4nLCByZXQpXG4gICAgcmV0dXJuIHJldFxuICB9KVxufVxuXG5jb25zdCByZXBsYWNlWFJhbmdlcyA9IChjb21wLCBvcHRpb25zKSA9PiB7XG4gIGRlYnVnKCdyZXBsYWNlWFJhbmdlcycsIGNvbXAsIG9wdGlvbnMpXG4gIHJldHVybiBjb21wXG4gICAgLnNwbGl0KC9cXHMrLylcbiAgICAubWFwKChjKSA9PiByZXBsYWNlWFJhbmdlKGMsIG9wdGlvbnMpKVxuICAgIC5qb2luKCcgJylcbn1cblxuY29uc3QgcmVwbGFjZVhSYW5nZSA9IChjb21wLCBvcHRpb25zKSA9PiB7XG4gIGNvbXAgPSBjb21wLnRyaW0oKVxuICBjb25zdCByID0gb3B0aW9ucy5sb29zZSA/IHJlW3QuWFJBTkdFTE9PU0VdIDogcmVbdC5YUkFOR0VdXG4gIHJldHVybiBjb21wLnJlcGxhY2UociwgKHJldCwgZ3RsdCwgTSwgbSwgcCwgcHIpID0+IHtcbiAgICBkZWJ1ZygneFJhbmdlJywgY29tcCwgcmV0LCBndGx0LCBNLCBtLCBwLCBwcilcbiAgICBjb25zdCB4TSA9IGlzWChNKVxuICAgIGNvbnN0IHhtID0geE0gfHwgaXNYKG0pXG4gICAgY29uc3QgeHAgPSB4bSB8fCBpc1gocClcbiAgICBjb25zdCBhbnlYID0geHBcblxuICAgIGlmIChndGx0ID09PSAnPScgJiYgYW55WCkge1xuICAgICAgZ3RsdCA9ICcnXG4gICAgfVxuXG4gICAgLy8gaWYgd2UncmUgaW5jbHVkaW5nIHByZXJlbGVhc2VzIGluIHRoZSBtYXRjaCwgdGhlbiB3ZSBuZWVkXG4gICAgLy8gdG8gZml4IHRoaXMgdG8gLTAsIHRoZSBsb3dlc3QgcG9zc2libGUgcHJlcmVsZWFzZSB2YWx1ZVxuICAgIHByID0gb3B0aW9ucy5pbmNsdWRlUHJlcmVsZWFzZSA/ICctMCcgOiAnJ1xuXG4gICAgaWYgKHhNKSB7XG4gICAgICBpZiAoZ3RsdCA9PT0gJz4nIHx8IGd0bHQgPT09ICc8Jykge1xuICAgICAgICAvLyBub3RoaW5nIGlzIGFsbG93ZWRcbiAgICAgICAgcmV0ID0gJzwwLjAuMC0wJ1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbm90aGluZyBpcyBmb3JiaWRkZW5cbiAgICAgICAgcmV0ID0gJyonXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChndGx0ICYmIGFueVgpIHtcbiAgICAgIC8vIHdlIGtub3cgcGF0Y2ggaXMgYW4geCwgYmVjYXVzZSB3ZSBoYXZlIGFueSB4IGF0IGFsbC5cbiAgICAgIC8vIHJlcGxhY2UgWCB3aXRoIDBcbiAgICAgIGlmICh4bSkge1xuICAgICAgICBtID0gMFxuICAgICAgfVxuICAgICAgcCA9IDBcblxuICAgICAgaWYgKGd0bHQgPT09ICc+Jykge1xuICAgICAgICAvLyA+MSA9PiA+PTIuMC4wXG4gICAgICAgIC8vID4xLjIgPT4gPj0xLjMuMFxuICAgICAgICBndGx0ID0gJz49J1xuICAgICAgICBpZiAoeG0pIHtcbiAgICAgICAgICBNID0gK00gKyAxXG4gICAgICAgICAgbSA9IDBcbiAgICAgICAgICBwID0gMFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG0gPSArbSArIDFcbiAgICAgICAgICBwID0gMFxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGd0bHQgPT09ICc8PScpIHtcbiAgICAgICAgLy8gPD0wLjcueCBpcyBhY3R1YWxseSA8MC44LjAsIHNpbmNlIGFueSAwLjcueCBzaG91bGRcbiAgICAgICAgLy8gcGFzcy4gIFNpbWlsYXJseSwgPD03LnggaXMgYWN0dWFsbHkgPDguMC4wLCBldGMuXG4gICAgICAgIGd0bHQgPSAnPCdcbiAgICAgICAgaWYgKHhtKSB7XG4gICAgICAgICAgTSA9ICtNICsgMVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG0gPSArbSArIDFcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZ3RsdCA9PT0gJzwnKSB7XG4gICAgICAgIHByID0gJy0wJ1xuICAgICAgfVxuXG4gICAgICByZXQgPSBgJHtndGx0ICsgTX0uJHttfS4ke3B9JHtwcn1gXG4gICAgfSBlbHNlIGlmICh4bSkge1xuICAgICAgcmV0ID0gYD49JHtNfS4wLjAke3ByfSA8JHsrTSArIDF9LjAuMC0wYFxuICAgIH0gZWxzZSBpZiAoeHApIHtcbiAgICAgIHJldCA9IGA+PSR7TX0uJHttfS4wJHtwclxuICAgICAgfSA8JHtNfS4keyttICsgMX0uMC0wYFxuICAgIH1cblxuICAgIGRlYnVnKCd4UmFuZ2UgcmV0dXJuJywgcmV0KVxuXG4gICAgcmV0dXJuIHJldFxuICB9KVxufVxuXG4vLyBCZWNhdXNlICogaXMgQU5ELWVkIHdpdGggZXZlcnl0aGluZyBlbHNlIGluIHRoZSBjb21wYXJhdG9yLFxuLy8gYW5kICcnIG1lYW5zIFwiYW55IHZlcnNpb25cIiwganVzdCByZW1vdmUgdGhlICpzIGVudGlyZWx5LlxuY29uc3QgcmVwbGFjZVN0YXJzID0gKGNvbXAsIG9wdGlvbnMpID0+IHtcbiAgZGVidWcoJ3JlcGxhY2VTdGFycycsIGNvbXAsIG9wdGlvbnMpXG4gIC8vIExvb3NlbmVzcyBpcyBpZ25vcmVkIGhlcmUuICBzdGFyIGlzIGFsd2F5cyBhcyBsb29zZSBhcyBpdCBnZXRzIVxuICByZXR1cm4gY29tcFxuICAgIC50cmltKClcbiAgICAucmVwbGFjZShyZVt0LlNUQVJdLCAnJylcbn1cblxuY29uc3QgcmVwbGFjZUdURTAgPSAoY29tcCwgb3B0aW9ucykgPT4ge1xuICBkZWJ1ZygncmVwbGFjZUdURTAnLCBjb21wLCBvcHRpb25zKVxuICByZXR1cm4gY29tcFxuICAgIC50cmltKClcbiAgICAucmVwbGFjZShyZVtvcHRpb25zLmluY2x1ZGVQcmVyZWxlYXNlID8gdC5HVEUwUFJFIDogdC5HVEUwXSwgJycpXG59XG5cbi8vIFRoaXMgZnVuY3Rpb24gaXMgcGFzc2VkIHRvIHN0cmluZy5yZXBsYWNlKHJlW3QuSFlQSEVOUkFOR0VdKVxuLy8gTSwgbSwgcGF0Y2gsIHByZXJlbGVhc2UsIGJ1aWxkXG4vLyAxLjIgLSAzLjQuNSA9PiA+PTEuMi4wIDw9My40LjVcbi8vIDEuMi4zIC0gMy40ID0+ID49MS4yLjAgPDMuNS4wLTAgQW55IDMuNC54IHdpbGwgZG9cbi8vIDEuMiAtIDMuNCA9PiA+PTEuMi4wIDwzLjUuMC0wXG4vLyBUT0RPIGJ1aWxkP1xuY29uc3QgaHlwaGVuUmVwbGFjZSA9IGluY1ByID0+ICgkMCxcbiAgZnJvbSwgZk0sIGZtLCBmcCwgZnByLCBmYixcbiAgdG8sIHRNLCB0bSwgdHAsIHRwcikgPT4ge1xuICBpZiAoaXNYKGZNKSkge1xuICAgIGZyb20gPSAnJ1xuICB9IGVsc2UgaWYgKGlzWChmbSkpIHtcbiAgICBmcm9tID0gYD49JHtmTX0uMC4wJHtpbmNQciA/ICctMCcgOiAnJ31gXG4gIH0gZWxzZSBpZiAoaXNYKGZwKSkge1xuICAgIGZyb20gPSBgPj0ke2ZNfS4ke2ZtfS4wJHtpbmNQciA/ICctMCcgOiAnJ31gXG4gIH0gZWxzZSBpZiAoZnByKSB7XG4gICAgZnJvbSA9IGA+PSR7ZnJvbX1gXG4gIH0gZWxzZSB7XG4gICAgZnJvbSA9IGA+PSR7ZnJvbX0ke2luY1ByID8gJy0wJyA6ICcnfWBcbiAgfVxuXG4gIGlmIChpc1godE0pKSB7XG4gICAgdG8gPSAnJ1xuICB9IGVsc2UgaWYgKGlzWCh0bSkpIHtcbiAgICB0byA9IGA8JHsrdE0gKyAxfS4wLjAtMGBcbiAgfSBlbHNlIGlmIChpc1godHApKSB7XG4gICAgdG8gPSBgPCR7dE19LiR7K3RtICsgMX0uMC0wYFxuICB9IGVsc2UgaWYgKHRwcikge1xuICAgIHRvID0gYDw9JHt0TX0uJHt0bX0uJHt0cH0tJHt0cHJ9YFxuICB9IGVsc2UgaWYgKGluY1ByKSB7XG4gICAgdG8gPSBgPCR7dE19LiR7dG19LiR7K3RwICsgMX0tMGBcbiAgfSBlbHNlIHtcbiAgICB0byA9IGA8PSR7dG99YFxuICB9XG5cbiAgcmV0dXJuIGAke2Zyb219ICR7dG99YC50cmltKClcbn1cblxuY29uc3QgdGVzdFNldCA9IChzZXQsIHZlcnNpb24sIG9wdGlvbnMpID0+IHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZXQubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoIXNldFtpXS50ZXN0KHZlcnNpb24pKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICBpZiAodmVyc2lvbi5wcmVyZWxlYXNlLmxlbmd0aCAmJiAhb3B0aW9ucy5pbmNsdWRlUHJlcmVsZWFzZSkge1xuICAgIC8vIEZpbmQgdGhlIHNldCBvZiB2ZXJzaW9ucyB0aGF0IGFyZSBhbGxvd2VkIHRvIGhhdmUgcHJlcmVsZWFzZXNcbiAgICAvLyBGb3IgZXhhbXBsZSwgXjEuMi4zLXByLjEgZGVzdWdhcnMgdG8gPj0xLjIuMy1wci4xIDwyLjAuMFxuICAgIC8vIFRoYXQgc2hvdWxkIGFsbG93IGAxLjIuMy1wci4yYCB0byBwYXNzLlxuICAgIC8vIEhvd2V2ZXIsIGAxLjIuNC1hbHBoYS5ub3RyZWFkeWAgc2hvdWxkIE5PVCBiZSBhbGxvd2VkLFxuICAgIC8vIGV2ZW4gdGhvdWdoIGl0J3Mgd2l0aGluIHRoZSByYW5nZSBzZXQgYnkgdGhlIGNvbXBhcmF0b3JzLlxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2V0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBkZWJ1ZyhzZXRbaV0uc2VtdmVyKVxuICAgICAgaWYgKHNldFtpXS5zZW12ZXIgPT09IENvbXBhcmF0b3IuQU5ZKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIGlmIChzZXRbaV0uc2VtdmVyLnByZXJlbGVhc2UubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBhbGxvd2VkID0gc2V0W2ldLnNlbXZlclxuICAgICAgICBpZiAoYWxsb3dlZC5tYWpvciA9PT0gdmVyc2lvbi5tYWpvciAmJlxuICAgICAgICAgICAgYWxsb3dlZC5taW5vciA9PT0gdmVyc2lvbi5taW5vciAmJlxuICAgICAgICAgICAgYWxsb3dlZC5wYXRjaCA9PT0gdmVyc2lvbi5wYXRjaCkge1xuICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBWZXJzaW9uIGhhcyBhIC1wcmUsIGJ1dCBpdCdzIG5vdCBvbmUgb2YgdGhlIG9uZXMgd2UgbGlrZS5cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHJldHVybiB0cnVlXG59XG4iLCAiY29uc3QgQU5ZID0gU3ltYm9sKCdTZW1WZXIgQU5ZJylcbi8vIGhvaXN0ZWQgY2xhc3MgZm9yIGN5Y2xpYyBkZXBlbmRlbmN5XG5jbGFzcyBDb21wYXJhdG9yIHtcbiAgc3RhdGljIGdldCBBTlkgKCkge1xuICAgIHJldHVybiBBTllcbiAgfVxuXG4gIGNvbnN0cnVjdG9yIChjb21wLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IHBhcnNlT3B0aW9ucyhvcHRpb25zKVxuXG4gICAgaWYgKGNvbXAgaW5zdGFuY2VvZiBDb21wYXJhdG9yKSB7XG4gICAgICBpZiAoY29tcC5sb29zZSA9PT0gISFvcHRpb25zLmxvb3NlKSB7XG4gICAgICAgIHJldHVybiBjb21wXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb21wID0gY29tcC52YWx1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbXAgPSBjb21wLnRyaW0oKS5zcGxpdCgvXFxzKy8pLmpvaW4oJyAnKVxuICAgIGRlYnVnKCdjb21wYXJhdG9yJywgY29tcCwgb3B0aW9ucylcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zXG4gICAgdGhpcy5sb29zZSA9ICEhb3B0aW9ucy5sb29zZVxuICAgIHRoaXMucGFyc2UoY29tcClcblxuICAgIGlmICh0aGlzLnNlbXZlciA9PT0gQU5ZKSB7XG4gICAgICB0aGlzLnZhbHVlID0gJydcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy52YWx1ZSA9IHRoaXMub3BlcmF0b3IgKyB0aGlzLnNlbXZlci52ZXJzaW9uXG4gICAgfVxuXG4gICAgZGVidWcoJ2NvbXAnLCB0aGlzKVxuICB9XG5cbiAgcGFyc2UgKGNvbXApIHtcbiAgICBjb25zdCByID0gdGhpcy5vcHRpb25zLmxvb3NlID8gcmVbdC5DT01QQVJBVE9STE9PU0VdIDogcmVbdC5DT01QQVJBVE9SXVxuICAgIGNvbnN0IG0gPSBjb21wLm1hdGNoKHIpXG5cbiAgICBpZiAoIW0pIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgY29tcGFyYXRvcjogJHtjb21wfWApXG4gICAgfVxuXG4gICAgdGhpcy5vcGVyYXRvciA9IG1bMV0gIT09IHVuZGVmaW5lZCA/IG1bMV0gOiAnJ1xuICAgIGlmICh0aGlzLm9wZXJhdG9yID09PSAnPScpIHtcbiAgICAgIHRoaXMub3BlcmF0b3IgPSAnJ1xuICAgIH1cblxuICAgIC8vIGlmIGl0IGxpdGVyYWxseSBpcyBqdXN0ICc+JyBvciAnJyB0aGVuIGFsbG93IGFueXRoaW5nLlxuICAgIGlmICghbVsyXSkge1xuICAgICAgdGhpcy5zZW12ZXIgPSBBTllcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZW12ZXIgPSBuZXcgU2VtVmVyKG1bMl0sIHRoaXMub3B0aW9ucy5sb29zZSlcbiAgICB9XG4gIH1cblxuICB0b1N0cmluZyAoKSB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWVcbiAgfVxuXG4gIHRlc3QgKHZlcnNpb24pIHtcbiAgICBkZWJ1ZygnQ29tcGFyYXRvci50ZXN0JywgdmVyc2lvbiwgdGhpcy5vcHRpb25zLmxvb3NlKVxuXG4gICAgaWYgKHRoaXMuc2VtdmVyID09PSBBTlkgfHwgdmVyc2lvbiA9PT0gQU5ZKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdmVyc2lvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZlcnNpb24gPSBuZXcgU2VtVmVyKHZlcnNpb24sIHRoaXMub3B0aW9ucylcbiAgICAgIH0gY2F0Y2ggKGVyKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjbXAodmVyc2lvbiwgdGhpcy5vcGVyYXRvciwgdGhpcy5zZW12ZXIsIHRoaXMub3B0aW9ucylcbiAgfVxuXG4gIGludGVyc2VjdHMgKGNvbXAsIG9wdGlvbnMpIHtcbiAgICBpZiAoIShjb21wIGluc3RhbmNlb2YgQ29tcGFyYXRvcikpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2EgQ29tcGFyYXRvciBpcyByZXF1aXJlZCcpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMub3BlcmF0b3IgPT09ICcnKSB7XG4gICAgICBpZiAodGhpcy52YWx1ZSA9PT0gJycpIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgUmFuZ2UoY29tcC52YWx1ZSwgb3B0aW9ucykudGVzdCh0aGlzLnZhbHVlKVxuICAgIH0gZWxzZSBpZiAoY29tcC5vcGVyYXRvciA9PT0gJycpIHtcbiAgICAgIGlmIChjb21wLnZhbHVlID09PSAnJykge1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBSYW5nZSh0aGlzLnZhbHVlLCBvcHRpb25zKS50ZXN0KGNvbXAuc2VtdmVyKVxuICAgIH1cblxuICAgIG9wdGlvbnMgPSBwYXJzZU9wdGlvbnMob3B0aW9ucylcblxuICAgIC8vIFNwZWNpYWwgY2FzZXMgd2hlcmUgbm90aGluZyBjYW4gcG9zc2libHkgYmUgbG93ZXJcbiAgICBpZiAob3B0aW9ucy5pbmNsdWRlUHJlcmVsZWFzZSAmJlxuICAgICAgKHRoaXMudmFsdWUgPT09ICc8MC4wLjAtMCcgfHwgY29tcC52YWx1ZSA9PT0gJzwwLjAuMC0wJykpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBpZiAoIW9wdGlvbnMuaW5jbHVkZVByZXJlbGVhc2UgJiZcbiAgICAgICh0aGlzLnZhbHVlLnN0YXJ0c1dpdGgoJzwwLjAuMCcpIHx8IGNvbXAudmFsdWUuc3RhcnRzV2l0aCgnPDAuMC4wJykpKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICAvLyBTYW1lIGRpcmVjdGlvbiBpbmNyZWFzaW5nICg+IG9yID49KVxuICAgIGlmICh0aGlzLm9wZXJhdG9yLnN0YXJ0c1dpdGgoJz4nKSAmJiBjb21wLm9wZXJhdG9yLnN0YXJ0c1dpdGgoJz4nKSkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgLy8gU2FtZSBkaXJlY3Rpb24gZGVjcmVhc2luZyAoPCBvciA8PSlcbiAgICBpZiAodGhpcy5vcGVyYXRvci5zdGFydHNXaXRoKCc8JykgJiYgY29tcC5vcGVyYXRvci5zdGFydHNXaXRoKCc8JykpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIC8vIHNhbWUgU2VtVmVyIGFuZCBib3RoIHNpZGVzIGFyZSBpbmNsdXNpdmUgKDw9IG9yID49KVxuICAgIGlmIChcbiAgICAgICh0aGlzLnNlbXZlci52ZXJzaW9uID09PSBjb21wLnNlbXZlci52ZXJzaW9uKSAmJlxuICAgICAgdGhpcy5vcGVyYXRvci5pbmNsdWRlcygnPScpICYmIGNvbXAub3BlcmF0b3IuaW5jbHVkZXMoJz0nKSkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgLy8gb3Bwb3NpdGUgZGlyZWN0aW9ucyBsZXNzIHRoYW5cbiAgICBpZiAoY21wKHRoaXMuc2VtdmVyLCAnPCcsIGNvbXAuc2VtdmVyLCBvcHRpb25zKSAmJlxuICAgICAgdGhpcy5vcGVyYXRvci5zdGFydHNXaXRoKCc+JykgJiYgY29tcC5vcGVyYXRvci5zdGFydHNXaXRoKCc8JykpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIC8vIG9wcG9zaXRlIGRpcmVjdGlvbnMgZ3JlYXRlciB0aGFuXG4gICAgaWYgKGNtcCh0aGlzLnNlbXZlciwgJz4nLCBjb21wLnNlbXZlciwgb3B0aW9ucykgJiZcbiAgICAgIHRoaXMub3BlcmF0b3Iuc3RhcnRzV2l0aCgnPCcpICYmIGNvbXAub3BlcmF0b3Iuc3RhcnRzV2l0aCgnPicpKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IENvbXBhcmF0b3JcblxuY29uc3QgcGFyc2VPcHRpb25zID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvcGFyc2Utb3B0aW9ucycpXG5jb25zdCB7IHNhZmVSZTogcmUsIHQgfSA9IHJlcXVpcmUoJy4uL2ludGVybmFsL3JlJylcbmNvbnN0IGNtcCA9IHJlcXVpcmUoJy4uL2Z1bmN0aW9ucy9jbXAnKVxuY29uc3QgZGVidWcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9kZWJ1ZycpXG5jb25zdCBTZW1WZXIgPSByZXF1aXJlKCcuL3NlbXZlcicpXG5jb25zdCBSYW5nZSA9IHJlcXVpcmUoJy4vcmFuZ2UnKVxuIiwgImNvbnN0IFJhbmdlID0gcmVxdWlyZSgnLi4vY2xhc3Nlcy9yYW5nZScpXG5jb25zdCBzYXRpc2ZpZXMgPSAodmVyc2lvbiwgcmFuZ2UsIG9wdGlvbnMpID0+IHtcbiAgdHJ5IHtcbiAgICByYW5nZSA9IG5ldyBSYW5nZShyYW5nZSwgb3B0aW9ucylcbiAgfSBjYXRjaCAoZXIpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICByZXR1cm4gcmFuZ2UudGVzdCh2ZXJzaW9uKVxufVxubW9kdWxlLmV4cG9ydHMgPSBzYXRpc2ZpZXNcbiIsICJjb25zdCBSYW5nZSA9IHJlcXVpcmUoJy4uL2NsYXNzZXMvcmFuZ2UnKVxuXG4vLyBNb3N0bHkganVzdCBmb3IgdGVzdGluZyBhbmQgbGVnYWN5IEFQSSByZWFzb25zXG5jb25zdCB0b0NvbXBhcmF0b3JzID0gKHJhbmdlLCBvcHRpb25zKSA9PlxuICBuZXcgUmFuZ2UocmFuZ2UsIG9wdGlvbnMpLnNldFxuICAgIC5tYXAoY29tcCA9PiBjb21wLm1hcChjID0+IGMudmFsdWUpLmpvaW4oJyAnKS50cmltKCkuc3BsaXQoJyAnKSlcblxubW9kdWxlLmV4cG9ydHMgPSB0b0NvbXBhcmF0b3JzXG4iLCAiY29uc3QgU2VtVmVyID0gcmVxdWlyZSgnLi4vY2xhc3Nlcy9zZW12ZXInKVxuY29uc3QgUmFuZ2UgPSByZXF1aXJlKCcuLi9jbGFzc2VzL3JhbmdlJylcblxuY29uc3QgbWF4U2F0aXNmeWluZyA9ICh2ZXJzaW9ucywgcmFuZ2UsIG9wdGlvbnMpID0+IHtcbiAgbGV0IG1heCA9IG51bGxcbiAgbGV0IG1heFNWID0gbnVsbFxuICBsZXQgcmFuZ2VPYmogPSBudWxsXG4gIHRyeSB7XG4gICAgcmFuZ2VPYmogPSBuZXcgUmFuZ2UocmFuZ2UsIG9wdGlvbnMpXG4gIH0gY2F0Y2ggKGVyKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICB2ZXJzaW9ucy5mb3JFYWNoKCh2KSA9PiB7XG4gICAgaWYgKHJhbmdlT2JqLnRlc3QodikpIHtcbiAgICAgIC8vIHNhdGlzZmllcyh2LCByYW5nZSwgb3B0aW9ucylcbiAgICAgIGlmICghbWF4IHx8IG1heFNWLmNvbXBhcmUodikgPT09IC0xKSB7XG4gICAgICAgIC8vIGNvbXBhcmUobWF4LCB2LCB0cnVlKVxuICAgICAgICBtYXggPSB2XG4gICAgICAgIG1heFNWID0gbmV3IFNlbVZlcihtYXgsIG9wdGlvbnMpXG4gICAgICB9XG4gICAgfVxuICB9KVxuICByZXR1cm4gbWF4XG59XG5tb2R1bGUuZXhwb3J0cyA9IG1heFNhdGlzZnlpbmdcbiIsICJjb25zdCBTZW1WZXIgPSByZXF1aXJlKCcuLi9jbGFzc2VzL3NlbXZlcicpXG5jb25zdCBSYW5nZSA9IHJlcXVpcmUoJy4uL2NsYXNzZXMvcmFuZ2UnKVxuY29uc3QgbWluU2F0aXNmeWluZyA9ICh2ZXJzaW9ucywgcmFuZ2UsIG9wdGlvbnMpID0+IHtcbiAgbGV0IG1pbiA9IG51bGxcbiAgbGV0IG1pblNWID0gbnVsbFxuICBsZXQgcmFuZ2VPYmogPSBudWxsXG4gIHRyeSB7XG4gICAgcmFuZ2VPYmogPSBuZXcgUmFuZ2UocmFuZ2UsIG9wdGlvbnMpXG4gIH0gY2F0Y2ggKGVyKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICB2ZXJzaW9ucy5mb3JFYWNoKCh2KSA9PiB7XG4gICAgaWYgKHJhbmdlT2JqLnRlc3QodikpIHtcbiAgICAgIC8vIHNhdGlzZmllcyh2LCByYW5nZSwgb3B0aW9ucylcbiAgICAgIGlmICghbWluIHx8IG1pblNWLmNvbXBhcmUodikgPT09IDEpIHtcbiAgICAgICAgLy8gY29tcGFyZShtaW4sIHYsIHRydWUpXG4gICAgICAgIG1pbiA9IHZcbiAgICAgICAgbWluU1YgPSBuZXcgU2VtVmVyKG1pbiwgb3B0aW9ucylcbiAgICAgIH1cbiAgICB9XG4gIH0pXG4gIHJldHVybiBtaW5cbn1cbm1vZHVsZS5leHBvcnRzID0gbWluU2F0aXNmeWluZ1xuIiwgImNvbnN0IFNlbVZlciA9IHJlcXVpcmUoJy4uL2NsYXNzZXMvc2VtdmVyJylcbmNvbnN0IFJhbmdlID0gcmVxdWlyZSgnLi4vY2xhc3Nlcy9yYW5nZScpXG5jb25zdCBndCA9IHJlcXVpcmUoJy4uL2Z1bmN0aW9ucy9ndCcpXG5cbmNvbnN0IG1pblZlcnNpb24gPSAocmFuZ2UsIGxvb3NlKSA9PiB7XG4gIHJhbmdlID0gbmV3IFJhbmdlKHJhbmdlLCBsb29zZSlcblxuICBsZXQgbWludmVyID0gbmV3IFNlbVZlcignMC4wLjAnKVxuICBpZiAocmFuZ2UudGVzdChtaW52ZXIpKSB7XG4gICAgcmV0dXJuIG1pbnZlclxuICB9XG5cbiAgbWludmVyID0gbmV3IFNlbVZlcignMC4wLjAtMCcpXG4gIGlmIChyYW5nZS50ZXN0KG1pbnZlcikpIHtcbiAgICByZXR1cm4gbWludmVyXG4gIH1cblxuICBtaW52ZXIgPSBudWxsXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcmFuZ2Uuc2V0Lmxlbmd0aDsgKytpKSB7XG4gICAgY29uc3QgY29tcGFyYXRvcnMgPSByYW5nZS5zZXRbaV1cblxuICAgIGxldCBzZXRNaW4gPSBudWxsXG4gICAgY29tcGFyYXRvcnMuZm9yRWFjaCgoY29tcGFyYXRvcikgPT4ge1xuICAgICAgLy8gQ2xvbmUgdG8gYXZvaWQgbWFuaXB1bGF0aW5nIHRoZSBjb21wYXJhdG9yJ3Mgc2VtdmVyIG9iamVjdC5cbiAgICAgIGNvbnN0IGNvbXB2ZXIgPSBuZXcgU2VtVmVyKGNvbXBhcmF0b3Iuc2VtdmVyLnZlcnNpb24pXG4gICAgICBzd2l0Y2ggKGNvbXBhcmF0b3Iub3BlcmF0b3IpIHtcbiAgICAgICAgY2FzZSAnPic6XG4gICAgICAgICAgaWYgKGNvbXB2ZXIucHJlcmVsZWFzZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGNvbXB2ZXIucGF0Y2grK1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb21wdmVyLnByZXJlbGVhc2UucHVzaCgwKVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb21wdmVyLnJhdyA9IGNvbXB2ZXIuZm9ybWF0KClcbiAgICAgICAgICAvKiBmYWxsdGhyb3VnaCAqL1xuICAgICAgICBjYXNlICcnOlxuICAgICAgICBjYXNlICc+PSc6XG4gICAgICAgICAgaWYgKCFzZXRNaW4gfHwgZ3QoY29tcHZlciwgc2V0TWluKSkge1xuICAgICAgICAgICAgc2V0TWluID0gY29tcHZlclxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICc8JzpcbiAgICAgICAgY2FzZSAnPD0nOlxuICAgICAgICAgIC8qIElnbm9yZSBtYXhpbXVtIHZlcnNpb25zICovXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuZXhwZWN0ZWQgb3BlcmF0aW9uOiAke2NvbXBhcmF0b3Iub3BlcmF0b3J9YClcbiAgICAgIH1cbiAgICB9KVxuICAgIGlmIChzZXRNaW4gJiYgKCFtaW52ZXIgfHwgZ3QobWludmVyLCBzZXRNaW4pKSkge1xuICAgICAgbWludmVyID0gc2V0TWluXG4gICAgfVxuICB9XG5cbiAgaWYgKG1pbnZlciAmJiByYW5nZS50ZXN0KG1pbnZlcikpIHtcbiAgICByZXR1cm4gbWludmVyXG4gIH1cblxuICByZXR1cm4gbnVsbFxufVxubW9kdWxlLmV4cG9ydHMgPSBtaW5WZXJzaW9uXG4iLCAiY29uc3QgUmFuZ2UgPSByZXF1aXJlKCcuLi9jbGFzc2VzL3JhbmdlJylcbmNvbnN0IHZhbGlkUmFuZ2UgPSAocmFuZ2UsIG9wdGlvbnMpID0+IHtcbiAgdHJ5IHtcbiAgICAvLyBSZXR1cm4gJyonIGluc3RlYWQgb2YgJycgc28gdGhhdCB0cnV0aGluZXNzIHdvcmtzLlxuICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBpZiBpdCdzIGludmFsaWQgYW55d2F5XG4gICAgcmV0dXJuIG5ldyBSYW5nZShyYW5nZSwgb3B0aW9ucykucmFuZ2UgfHwgJyonXG4gIH0gY2F0Y2ggKGVyKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSB2YWxpZFJhbmdlXG4iLCAiY29uc3QgU2VtVmVyID0gcmVxdWlyZSgnLi4vY2xhc3Nlcy9zZW12ZXInKVxuY29uc3QgQ29tcGFyYXRvciA9IHJlcXVpcmUoJy4uL2NsYXNzZXMvY29tcGFyYXRvcicpXG5jb25zdCB7IEFOWSB9ID0gQ29tcGFyYXRvclxuY29uc3QgUmFuZ2UgPSByZXF1aXJlKCcuLi9jbGFzc2VzL3JhbmdlJylcbmNvbnN0IHNhdGlzZmllcyA9IHJlcXVpcmUoJy4uL2Z1bmN0aW9ucy9zYXRpc2ZpZXMnKVxuY29uc3QgZ3QgPSByZXF1aXJlKCcuLi9mdW5jdGlvbnMvZ3QnKVxuY29uc3QgbHQgPSByZXF1aXJlKCcuLi9mdW5jdGlvbnMvbHQnKVxuY29uc3QgbHRlID0gcmVxdWlyZSgnLi4vZnVuY3Rpb25zL2x0ZScpXG5jb25zdCBndGUgPSByZXF1aXJlKCcuLi9mdW5jdGlvbnMvZ3RlJylcblxuY29uc3Qgb3V0c2lkZSA9ICh2ZXJzaW9uLCByYW5nZSwgaGlsbywgb3B0aW9ucykgPT4ge1xuICB2ZXJzaW9uID0gbmV3IFNlbVZlcih2ZXJzaW9uLCBvcHRpb25zKVxuICByYW5nZSA9IG5ldyBSYW5nZShyYW5nZSwgb3B0aW9ucylcblxuICBsZXQgZ3RmbiwgbHRlZm4sIGx0Zm4sIGNvbXAsIGVjb21wXG4gIHN3aXRjaCAoaGlsbykge1xuICAgIGNhc2UgJz4nOlxuICAgICAgZ3RmbiA9IGd0XG4gICAgICBsdGVmbiA9IGx0ZVxuICAgICAgbHRmbiA9IGx0XG4gICAgICBjb21wID0gJz4nXG4gICAgICBlY29tcCA9ICc+PSdcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnPCc6XG4gICAgICBndGZuID0gbHRcbiAgICAgIGx0ZWZuID0gZ3RlXG4gICAgICBsdGZuID0gZ3RcbiAgICAgIGNvbXAgPSAnPCdcbiAgICAgIGVjb21wID0gJzw9J1xuICAgICAgYnJlYWtcbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignTXVzdCBwcm92aWRlIGEgaGlsbyB2YWwgb2YgXCI8XCIgb3IgXCI+XCInKVxuICB9XG5cbiAgLy8gSWYgaXQgc2F0aXNmaWVzIHRoZSByYW5nZSBpdCBpcyBub3Qgb3V0c2lkZVxuICBpZiAoc2F0aXNmaWVzKHZlcnNpb24sIHJhbmdlLCBvcHRpb25zKSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgLy8gRnJvbSBub3cgb24sIHZhcmlhYmxlIHRlcm1zIGFyZSBhcyBpZiB3ZSdyZSBpbiBcImd0clwiIG1vZGUuXG4gIC8vIGJ1dCBub3RlIHRoYXQgZXZlcnl0aGluZyBpcyBmbGlwcGVkIGZvciB0aGUgXCJsdHJcIiBmdW5jdGlvbi5cblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHJhbmdlLnNldC5sZW5ndGg7ICsraSkge1xuICAgIGNvbnN0IGNvbXBhcmF0b3JzID0gcmFuZ2Uuc2V0W2ldXG5cbiAgICBsZXQgaGlnaCA9IG51bGxcbiAgICBsZXQgbG93ID0gbnVsbFxuXG4gICAgY29tcGFyYXRvcnMuZm9yRWFjaCgoY29tcGFyYXRvcikgPT4ge1xuICAgICAgaWYgKGNvbXBhcmF0b3Iuc2VtdmVyID09PSBBTlkpIHtcbiAgICAgICAgY29tcGFyYXRvciA9IG5ldyBDb21wYXJhdG9yKCc+PTAuMC4wJylcbiAgICAgIH1cbiAgICAgIGhpZ2ggPSBoaWdoIHx8IGNvbXBhcmF0b3JcbiAgICAgIGxvdyA9IGxvdyB8fCBjb21wYXJhdG9yXG4gICAgICBpZiAoZ3Rmbihjb21wYXJhdG9yLnNlbXZlciwgaGlnaC5zZW12ZXIsIG9wdGlvbnMpKSB7XG4gICAgICAgIGhpZ2ggPSBjb21wYXJhdG9yXG4gICAgICB9IGVsc2UgaWYgKGx0Zm4oY29tcGFyYXRvci5zZW12ZXIsIGxvdy5zZW12ZXIsIG9wdGlvbnMpKSB7XG4gICAgICAgIGxvdyA9IGNvbXBhcmF0b3JcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gSWYgdGhlIGVkZ2UgdmVyc2lvbiBjb21wYXJhdG9yIGhhcyBhIG9wZXJhdG9yIHRoZW4gb3VyIHZlcnNpb25cbiAgICAvLyBpc24ndCBvdXRzaWRlIGl0XG4gICAgaWYgKGhpZ2gub3BlcmF0b3IgPT09IGNvbXAgfHwgaGlnaC5vcGVyYXRvciA9PT0gZWNvbXApIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIC8vIElmIHRoZSBsb3dlc3QgdmVyc2lvbiBjb21wYXJhdG9yIGhhcyBhbiBvcGVyYXRvciBhbmQgb3VyIHZlcnNpb25cbiAgICAvLyBpcyBsZXNzIHRoYW4gaXQgdGhlbiBpdCBpc24ndCBoaWdoZXIgdGhhbiB0aGUgcmFuZ2VcbiAgICBpZiAoKCFsb3cub3BlcmF0b3IgfHwgbG93Lm9wZXJhdG9yID09PSBjb21wKSAmJlxuICAgICAgICBsdGVmbih2ZXJzaW9uLCBsb3cuc2VtdmVyKSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfSBlbHNlIGlmIChsb3cub3BlcmF0b3IgPT09IGVjb21wICYmIGx0Zm4odmVyc2lvbiwgbG93LnNlbXZlcikpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG91dHNpZGVcbiIsICIvLyBEZXRlcm1pbmUgaWYgdmVyc2lvbiBpcyBncmVhdGVyIHRoYW4gYWxsIHRoZSB2ZXJzaW9ucyBwb3NzaWJsZSBpbiB0aGUgcmFuZ2UuXG5jb25zdCBvdXRzaWRlID0gcmVxdWlyZSgnLi9vdXRzaWRlJylcbmNvbnN0IGd0ciA9ICh2ZXJzaW9uLCByYW5nZSwgb3B0aW9ucykgPT4gb3V0c2lkZSh2ZXJzaW9uLCByYW5nZSwgJz4nLCBvcHRpb25zKVxubW9kdWxlLmV4cG9ydHMgPSBndHJcbiIsICJjb25zdCBvdXRzaWRlID0gcmVxdWlyZSgnLi9vdXRzaWRlJylcbi8vIERldGVybWluZSBpZiB2ZXJzaW9uIGlzIGxlc3MgdGhhbiBhbGwgdGhlIHZlcnNpb25zIHBvc3NpYmxlIGluIHRoZSByYW5nZVxuY29uc3QgbHRyID0gKHZlcnNpb24sIHJhbmdlLCBvcHRpb25zKSA9PiBvdXRzaWRlKHZlcnNpb24sIHJhbmdlLCAnPCcsIG9wdGlvbnMpXG5tb2R1bGUuZXhwb3J0cyA9IGx0clxuIiwgImNvbnN0IFJhbmdlID0gcmVxdWlyZSgnLi4vY2xhc3Nlcy9yYW5nZScpXG5jb25zdCBpbnRlcnNlY3RzID0gKHIxLCByMiwgb3B0aW9ucykgPT4ge1xuICByMSA9IG5ldyBSYW5nZShyMSwgb3B0aW9ucylcbiAgcjIgPSBuZXcgUmFuZ2UocjIsIG9wdGlvbnMpXG4gIHJldHVybiByMS5pbnRlcnNlY3RzKHIyLCBvcHRpb25zKVxufVxubW9kdWxlLmV4cG9ydHMgPSBpbnRlcnNlY3RzXG4iLCAiLy8gZ2l2ZW4gYSBzZXQgb2YgdmVyc2lvbnMgYW5kIGEgcmFuZ2UsIGNyZWF0ZSBhIFwic2ltcGxpZmllZFwiIHJhbmdlXG4vLyB0aGF0IGluY2x1ZGVzIHRoZSBzYW1lIHZlcnNpb25zIHRoYXQgdGhlIG9yaWdpbmFsIHJhbmdlIGRvZXNcbi8vIElmIHRoZSBvcmlnaW5hbCByYW5nZSBpcyBzaG9ydGVyIHRoYW4gdGhlIHNpbXBsaWZpZWQgb25lLCByZXR1cm4gdGhhdC5cbmNvbnN0IHNhdGlzZmllcyA9IHJlcXVpcmUoJy4uL2Z1bmN0aW9ucy9zYXRpc2ZpZXMuanMnKVxuY29uc3QgY29tcGFyZSA9IHJlcXVpcmUoJy4uL2Z1bmN0aW9ucy9jb21wYXJlLmpzJylcbm1vZHVsZS5leHBvcnRzID0gKHZlcnNpb25zLCByYW5nZSwgb3B0aW9ucykgPT4ge1xuICBjb25zdCBzZXQgPSBbXVxuICBsZXQgZmlyc3QgPSBudWxsXG4gIGxldCBwcmV2ID0gbnVsbFxuICBjb25zdCB2ID0gdmVyc2lvbnMuc29ydCgoYSwgYikgPT4gY29tcGFyZShhLCBiLCBvcHRpb25zKSlcbiAgZm9yIChjb25zdCB2ZXJzaW9uIG9mIHYpIHtcbiAgICBjb25zdCBpbmNsdWRlZCA9IHNhdGlzZmllcyh2ZXJzaW9uLCByYW5nZSwgb3B0aW9ucylcbiAgICBpZiAoaW5jbHVkZWQpIHtcbiAgICAgIHByZXYgPSB2ZXJzaW9uXG4gICAgICBpZiAoIWZpcnN0KSB7XG4gICAgICAgIGZpcnN0ID0gdmVyc2lvblxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAocHJldikge1xuICAgICAgICBzZXQucHVzaChbZmlyc3QsIHByZXZdKVxuICAgICAgfVxuICAgICAgcHJldiA9IG51bGxcbiAgICAgIGZpcnN0ID0gbnVsbFxuICAgIH1cbiAgfVxuICBpZiAoZmlyc3QpIHtcbiAgICBzZXQucHVzaChbZmlyc3QsIG51bGxdKVxuICB9XG5cbiAgY29uc3QgcmFuZ2VzID0gW11cbiAgZm9yIChjb25zdCBbbWluLCBtYXhdIG9mIHNldCkge1xuICAgIGlmIChtaW4gPT09IG1heCkge1xuICAgICAgcmFuZ2VzLnB1c2gobWluKVxuICAgIH0gZWxzZSBpZiAoIW1heCAmJiBtaW4gPT09IHZbMF0pIHtcbiAgICAgIHJhbmdlcy5wdXNoKCcqJylcbiAgICB9IGVsc2UgaWYgKCFtYXgpIHtcbiAgICAgIHJhbmdlcy5wdXNoKGA+PSR7bWlufWApXG4gICAgfSBlbHNlIGlmIChtaW4gPT09IHZbMF0pIHtcbiAgICAgIHJhbmdlcy5wdXNoKGA8PSR7bWF4fWApXG4gICAgfSBlbHNlIHtcbiAgICAgIHJhbmdlcy5wdXNoKGAke21pbn0gLSAke21heH1gKVxuICAgIH1cbiAgfVxuICBjb25zdCBzaW1wbGlmaWVkID0gcmFuZ2VzLmpvaW4oJyB8fCAnKVxuICBjb25zdCBvcmlnaW5hbCA9IHR5cGVvZiByYW5nZS5yYXcgPT09ICdzdHJpbmcnID8gcmFuZ2UucmF3IDogU3RyaW5nKHJhbmdlKVxuICByZXR1cm4gc2ltcGxpZmllZC5sZW5ndGggPCBvcmlnaW5hbC5sZW5ndGggPyBzaW1wbGlmaWVkIDogcmFuZ2Vcbn1cbiIsICJjb25zdCBSYW5nZSA9IHJlcXVpcmUoJy4uL2NsYXNzZXMvcmFuZ2UuanMnKVxuY29uc3QgQ29tcGFyYXRvciA9IHJlcXVpcmUoJy4uL2NsYXNzZXMvY29tcGFyYXRvci5qcycpXG5jb25zdCB7IEFOWSB9ID0gQ29tcGFyYXRvclxuY29uc3Qgc2F0aXNmaWVzID0gcmVxdWlyZSgnLi4vZnVuY3Rpb25zL3NhdGlzZmllcy5qcycpXG5jb25zdCBjb21wYXJlID0gcmVxdWlyZSgnLi4vZnVuY3Rpb25zL2NvbXBhcmUuanMnKVxuXG4vLyBDb21wbGV4IHJhbmdlIGByMSB8fCByMiB8fCAuLi5gIGlzIGEgc3Vic2V0IG9mIGBSMSB8fCBSMiB8fCAuLi5gIGlmZjpcbi8vIC0gRXZlcnkgc2ltcGxlIHJhbmdlIGByMSwgcjIsIC4uLmAgaXMgYSBudWxsIHNldCwgT1Jcbi8vIC0gRXZlcnkgc2ltcGxlIHJhbmdlIGByMSwgcjIsIC4uLmAgd2hpY2ggaXMgbm90IGEgbnVsbCBzZXQgaXMgYSBzdWJzZXQgb2Zcbi8vICAgc29tZSBgUjEsIFIyLCAuLi5gXG4vL1xuLy8gU2ltcGxlIHJhbmdlIGBjMSBjMiAuLi5gIGlzIGEgc3Vic2V0IG9mIHNpbXBsZSByYW5nZSBgQzEgQzIgLi4uYCBpZmY6XG4vLyAtIElmIGMgaXMgb25seSB0aGUgQU5ZIGNvbXBhcmF0b3Jcbi8vICAgLSBJZiBDIGlzIG9ubHkgdGhlIEFOWSBjb21wYXJhdG9yLCByZXR1cm4gdHJ1ZVxuLy8gICAtIEVsc2UgaWYgaW4gcHJlcmVsZWFzZSBtb2RlLCByZXR1cm4gZmFsc2Vcbi8vICAgLSBlbHNlIHJlcGxhY2UgYyB3aXRoIGBbPj0wLjAuMF1gXG4vLyAtIElmIEMgaXMgb25seSB0aGUgQU5ZIGNvbXBhcmF0b3Jcbi8vICAgLSBpZiBpbiBwcmVyZWxlYXNlIG1vZGUsIHJldHVybiB0cnVlXG4vLyAgIC0gZWxzZSByZXBsYWNlIEMgd2l0aCBgWz49MC4wLjBdYFxuLy8gLSBMZXQgRVEgYmUgdGhlIHNldCBvZiA9IGNvbXBhcmF0b3JzIGluIGNcbi8vIC0gSWYgRVEgaXMgbW9yZSB0aGFuIG9uZSwgcmV0dXJuIHRydWUgKG51bGwgc2V0KVxuLy8gLSBMZXQgR1QgYmUgdGhlIGhpZ2hlc3QgPiBvciA+PSBjb21wYXJhdG9yIGluIGNcbi8vIC0gTGV0IExUIGJlIHRoZSBsb3dlc3QgPCBvciA8PSBjb21wYXJhdG9yIGluIGNcbi8vIC0gSWYgR1QgYW5kIExULCBhbmQgR1Quc2VtdmVyID4gTFQuc2VtdmVyLCByZXR1cm4gdHJ1ZSAobnVsbCBzZXQpXG4vLyAtIElmIGFueSBDIGlzIGEgPSByYW5nZSwgYW5kIEdUIG9yIExUIGFyZSBzZXQsIHJldHVybiBmYWxzZVxuLy8gLSBJZiBFUVxuLy8gICAtIElmIEdULCBhbmQgRVEgZG9lcyBub3Qgc2F0aXNmeSBHVCwgcmV0dXJuIHRydWUgKG51bGwgc2V0KVxuLy8gICAtIElmIExULCBhbmQgRVEgZG9lcyBub3Qgc2F0aXNmeSBMVCwgcmV0dXJuIHRydWUgKG51bGwgc2V0KVxuLy8gICAtIElmIEVRIHNhdGlzZmllcyBldmVyeSBDLCByZXR1cm4gdHJ1ZVxuLy8gICAtIEVsc2UgcmV0dXJuIGZhbHNlXG4vLyAtIElmIEdUXG4vLyAgIC0gSWYgR1Quc2VtdmVyIGlzIGxvd2VyIHRoYW4gYW55ID4gb3IgPj0gY29tcCBpbiBDLCByZXR1cm4gZmFsc2Vcbi8vICAgLSBJZiBHVCBpcyA+PSwgYW5kIEdULnNlbXZlciBkb2VzIG5vdCBzYXRpc2Z5IGV2ZXJ5IEMsIHJldHVybiBmYWxzZVxuLy8gICAtIElmIEdULnNlbXZlciBoYXMgYSBwcmVyZWxlYXNlLCBhbmQgbm90IGluIHByZXJlbGVhc2UgbW9kZVxuLy8gICAgIC0gSWYgbm8gQyBoYXMgYSBwcmVyZWxlYXNlIGFuZCB0aGUgR1Quc2VtdmVyIHR1cGxlLCByZXR1cm4gZmFsc2Vcbi8vIC0gSWYgTFRcbi8vICAgLSBJZiBMVC5zZW12ZXIgaXMgZ3JlYXRlciB0aGFuIGFueSA8IG9yIDw9IGNvbXAgaW4gQywgcmV0dXJuIGZhbHNlXG4vLyAgIC0gSWYgTFQgaXMgPD0sIGFuZCBMVC5zZW12ZXIgZG9lcyBub3Qgc2F0aXNmeSBldmVyeSBDLCByZXR1cm4gZmFsc2Vcbi8vICAgLSBJZiBHVC5zZW12ZXIgaGFzIGEgcHJlcmVsZWFzZSwgYW5kIG5vdCBpbiBwcmVyZWxlYXNlIG1vZGVcbi8vICAgICAtIElmIG5vIEMgaGFzIGEgcHJlcmVsZWFzZSBhbmQgdGhlIExULnNlbXZlciB0dXBsZSwgcmV0dXJuIGZhbHNlXG4vLyAtIEVsc2UgcmV0dXJuIHRydWVcblxuY29uc3Qgc3Vic2V0ID0gKHN1YiwgZG9tLCBvcHRpb25zID0ge30pID0+IHtcbiAgaWYgKHN1YiA9PT0gZG9tKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIHN1YiA9IG5ldyBSYW5nZShzdWIsIG9wdGlvbnMpXG4gIGRvbSA9IG5ldyBSYW5nZShkb20sIG9wdGlvbnMpXG4gIGxldCBzYXdOb25OdWxsID0gZmFsc2VcblxuICBPVVRFUjogZm9yIChjb25zdCBzaW1wbGVTdWIgb2Ygc3ViLnNldCkge1xuICAgIGZvciAoY29uc3Qgc2ltcGxlRG9tIG9mIGRvbS5zZXQpIHtcbiAgICAgIGNvbnN0IGlzU3ViID0gc2ltcGxlU3Vic2V0KHNpbXBsZVN1Yiwgc2ltcGxlRG9tLCBvcHRpb25zKVxuICAgICAgc2F3Tm9uTnVsbCA9IHNhd05vbk51bGwgfHwgaXNTdWIgIT09IG51bGxcbiAgICAgIGlmIChpc1N1Yikge1xuICAgICAgICBjb250aW51ZSBPVVRFUlxuICAgICAgfVxuICAgIH1cbiAgICAvLyB0aGUgbnVsbCBzZXQgaXMgYSBzdWJzZXQgb2YgZXZlcnl0aGluZywgYnV0IG51bGwgc2ltcGxlIHJhbmdlcyBpblxuICAgIC8vIGEgY29tcGxleCByYW5nZSBzaG91bGQgYmUgaWdub3JlZC4gIHNvIGlmIHdlIHNhdyBhIG5vbi1udWxsIHJhbmdlLFxuICAgIC8vIHRoZW4gd2Uga25vdyB0aGlzIGlzbid0IGEgc3Vic2V0LCBidXQgaWYgRVZFUlkgc2ltcGxlIHJhbmdlIHdhcyBudWxsLFxuICAgIC8vIHRoZW4gaXQgaXMgYSBzdWJzZXQuXG4gICAgaWYgKHNhd05vbk51bGwpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZVxufVxuXG5jb25zdCBtaW5pbXVtVmVyc2lvbldpdGhQcmVSZWxlYXNlID0gW25ldyBDb21wYXJhdG9yKCc+PTAuMC4wLTAnKV1cbmNvbnN0IG1pbmltdW1WZXJzaW9uID0gW25ldyBDb21wYXJhdG9yKCc+PTAuMC4wJyldXG5cbmNvbnN0IHNpbXBsZVN1YnNldCA9IChzdWIsIGRvbSwgb3B0aW9ucykgPT4ge1xuICBpZiAoc3ViID09PSBkb20pIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgaWYgKHN1Yi5sZW5ndGggPT09IDEgJiYgc3ViWzBdLnNlbXZlciA9PT0gQU5ZKSB7XG4gICAgaWYgKGRvbS5sZW5ndGggPT09IDEgJiYgZG9tWzBdLnNlbXZlciA9PT0gQU5ZKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH0gZWxzZSBpZiAob3B0aW9ucy5pbmNsdWRlUHJlcmVsZWFzZSkge1xuICAgICAgc3ViID0gbWluaW11bVZlcnNpb25XaXRoUHJlUmVsZWFzZVxuICAgIH0gZWxzZSB7XG4gICAgICBzdWIgPSBtaW5pbXVtVmVyc2lvblxuICAgIH1cbiAgfVxuXG4gIGlmIChkb20ubGVuZ3RoID09PSAxICYmIGRvbVswXS5zZW12ZXIgPT09IEFOWSkge1xuICAgIGlmIChvcHRpb25zLmluY2x1ZGVQcmVyZWxlYXNlKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH0gZWxzZSB7XG4gICAgICBkb20gPSBtaW5pbXVtVmVyc2lvblxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGVxU2V0ID0gbmV3IFNldCgpXG4gIGxldCBndCwgbHRcbiAgZm9yIChjb25zdCBjIG9mIHN1Yikge1xuICAgIGlmIChjLm9wZXJhdG9yID09PSAnPicgfHwgYy5vcGVyYXRvciA9PT0gJz49Jykge1xuICAgICAgZ3QgPSBoaWdoZXJHVChndCwgYywgb3B0aW9ucylcbiAgICB9IGVsc2UgaWYgKGMub3BlcmF0b3IgPT09ICc8JyB8fCBjLm9wZXJhdG9yID09PSAnPD0nKSB7XG4gICAgICBsdCA9IGxvd2VyTFQobHQsIGMsIG9wdGlvbnMpXG4gICAgfSBlbHNlIHtcbiAgICAgIGVxU2V0LmFkZChjLnNlbXZlcilcbiAgICB9XG4gIH1cblxuICBpZiAoZXFTZXQuc2l6ZSA+IDEpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgbGV0IGd0bHRDb21wXG4gIGlmIChndCAmJiBsdCkge1xuICAgIGd0bHRDb21wID0gY29tcGFyZShndC5zZW12ZXIsIGx0LnNlbXZlciwgb3B0aW9ucylcbiAgICBpZiAoZ3RsdENvbXAgPiAwKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH0gZWxzZSBpZiAoZ3RsdENvbXAgPT09IDAgJiYgKGd0Lm9wZXJhdG9yICE9PSAnPj0nIHx8IGx0Lm9wZXJhdG9yICE9PSAnPD0nKSkge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gIH1cblxuICAvLyB3aWxsIGl0ZXJhdGUgb25lIG9yIHplcm8gdGltZXNcbiAgZm9yIChjb25zdCBlcSBvZiBlcVNldCkge1xuICAgIGlmIChndCAmJiAhc2F0aXNmaWVzKGVxLCBTdHJpbmcoZ3QpLCBvcHRpb25zKSkge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICBpZiAobHQgJiYgIXNhdGlzZmllcyhlcSwgU3RyaW5nKGx0KSwgb3B0aW9ucykpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBjIG9mIGRvbSkge1xuICAgICAgaWYgKCFzYXRpc2ZpZXMoZXEsIFN0cmluZyhjKSwgb3B0aW9ucykpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGxldCBoaWdoZXIsIGxvd2VyXG4gIGxldCBoYXNEb21MVCwgaGFzRG9tR1RcbiAgLy8gaWYgdGhlIHN1YnNldCBoYXMgYSBwcmVyZWxlYXNlLCB3ZSBuZWVkIGEgY29tcGFyYXRvciBpbiB0aGUgc3VwZXJzZXRcbiAgLy8gd2l0aCB0aGUgc2FtZSB0dXBsZSBhbmQgYSBwcmVyZWxlYXNlLCBvciBpdCdzIG5vdCBhIHN1YnNldFxuICBsZXQgbmVlZERvbUxUUHJlID0gbHQgJiZcbiAgICAhb3B0aW9ucy5pbmNsdWRlUHJlcmVsZWFzZSAmJlxuICAgIGx0LnNlbXZlci5wcmVyZWxlYXNlLmxlbmd0aCA/IGx0LnNlbXZlciA6IGZhbHNlXG4gIGxldCBuZWVkRG9tR1RQcmUgPSBndCAmJlxuICAgICFvcHRpb25zLmluY2x1ZGVQcmVyZWxlYXNlICYmXG4gICAgZ3Quc2VtdmVyLnByZXJlbGVhc2UubGVuZ3RoID8gZ3Quc2VtdmVyIDogZmFsc2VcbiAgLy8gZXhjZXB0aW9uOiA8MS4yLjMtMCBpcyB0aGUgc2FtZSBhcyA8MS4yLjNcbiAgaWYgKG5lZWREb21MVFByZSAmJiBuZWVkRG9tTFRQcmUucHJlcmVsZWFzZS5sZW5ndGggPT09IDEgJiZcbiAgICAgIGx0Lm9wZXJhdG9yID09PSAnPCcgJiYgbmVlZERvbUxUUHJlLnByZXJlbGVhc2VbMF0gPT09IDApIHtcbiAgICBuZWVkRG9tTFRQcmUgPSBmYWxzZVxuICB9XG5cbiAgZm9yIChjb25zdCBjIG9mIGRvbSkge1xuICAgIGhhc0RvbUdUID0gaGFzRG9tR1QgfHwgYy5vcGVyYXRvciA9PT0gJz4nIHx8IGMub3BlcmF0b3IgPT09ICc+PSdcbiAgICBoYXNEb21MVCA9IGhhc0RvbUxUIHx8IGMub3BlcmF0b3IgPT09ICc8JyB8fCBjLm9wZXJhdG9yID09PSAnPD0nXG4gICAgaWYgKGd0KSB7XG4gICAgICBpZiAobmVlZERvbUdUUHJlKSB7XG4gICAgICAgIGlmIChjLnNlbXZlci5wcmVyZWxlYXNlICYmIGMuc2VtdmVyLnByZXJlbGVhc2UubGVuZ3RoICYmXG4gICAgICAgICAgICBjLnNlbXZlci5tYWpvciA9PT0gbmVlZERvbUdUUHJlLm1ham9yICYmXG4gICAgICAgICAgICBjLnNlbXZlci5taW5vciA9PT0gbmVlZERvbUdUUHJlLm1pbm9yICYmXG4gICAgICAgICAgICBjLnNlbXZlci5wYXRjaCA9PT0gbmVlZERvbUdUUHJlLnBhdGNoKSB7XG4gICAgICAgICAgbmVlZERvbUdUUHJlID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGMub3BlcmF0b3IgPT09ICc+JyB8fCBjLm9wZXJhdG9yID09PSAnPj0nKSB7XG4gICAgICAgIGhpZ2hlciA9IGhpZ2hlckdUKGd0LCBjLCBvcHRpb25zKVxuICAgICAgICBpZiAoaGlnaGVyID09PSBjICYmIGhpZ2hlciAhPT0gZ3QpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChndC5vcGVyYXRvciA9PT0gJz49JyAmJiAhc2F0aXNmaWVzKGd0LnNlbXZlciwgU3RyaW5nKGMpLCBvcHRpb25zKSkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGx0KSB7XG4gICAgICBpZiAobmVlZERvbUxUUHJlKSB7XG4gICAgICAgIGlmIChjLnNlbXZlci5wcmVyZWxlYXNlICYmIGMuc2VtdmVyLnByZXJlbGVhc2UubGVuZ3RoICYmXG4gICAgICAgICAgICBjLnNlbXZlci5tYWpvciA9PT0gbmVlZERvbUxUUHJlLm1ham9yICYmXG4gICAgICAgICAgICBjLnNlbXZlci5taW5vciA9PT0gbmVlZERvbUxUUHJlLm1pbm9yICYmXG4gICAgICAgICAgICBjLnNlbXZlci5wYXRjaCA9PT0gbmVlZERvbUxUUHJlLnBhdGNoKSB7XG4gICAgICAgICAgbmVlZERvbUxUUHJlID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGMub3BlcmF0b3IgPT09ICc8JyB8fCBjLm9wZXJhdG9yID09PSAnPD0nKSB7XG4gICAgICAgIGxvd2VyID0gbG93ZXJMVChsdCwgYywgb3B0aW9ucylcbiAgICAgICAgaWYgKGxvd2VyID09PSBjICYmIGxvd2VyICE9PSBsdCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGx0Lm9wZXJhdG9yID09PSAnPD0nICYmICFzYXRpc2ZpZXMobHQuc2VtdmVyLCBTdHJpbmcoYyksIG9wdGlvbnMpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWMub3BlcmF0b3IgJiYgKGx0IHx8IGd0KSAmJiBndGx0Q29tcCAhPT0gMCkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG5cbiAgLy8gaWYgdGhlcmUgd2FzIGEgPCBvciA+LCBhbmQgbm90aGluZyBpbiB0aGUgZG9tLCB0aGVuIG11c3QgYmUgZmFsc2VcbiAgLy8gVU5MRVNTIGl0IHdhcyBsaW1pdGVkIGJ5IGFub3RoZXIgcmFuZ2UgaW4gdGhlIG90aGVyIGRpcmVjdGlvbi5cbiAgLy8gRWcsID4xLjAuMCA8MS4wLjEgaXMgc3RpbGwgYSBzdWJzZXQgb2YgPDIuMC4wXG4gIGlmIChndCAmJiBoYXNEb21MVCAmJiAhbHQgJiYgZ3RsdENvbXAgIT09IDApIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGlmIChsdCAmJiBoYXNEb21HVCAmJiAhZ3QgJiYgZ3RsdENvbXAgIT09IDApIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIC8vIHdlIG5lZWRlZCBhIHByZXJlbGVhc2UgcmFuZ2UgaW4gYSBzcGVjaWZpYyB0dXBsZSwgYnV0IGRpZG4ndCBnZXQgb25lXG4gIC8vIHRoZW4gdGhpcyBpc24ndCBhIHN1YnNldC4gIGVnID49MS4yLjMtcHJlIGlzIG5vdCBhIHN1YnNldCBvZiA+PTEuMC4wLFxuICAvLyBiZWNhdXNlIGl0IGluY2x1ZGVzIHByZXJlbGVhc2VzIGluIHRoZSAxLjIuMyB0dXBsZVxuICBpZiAobmVlZERvbUdUUHJlIHx8IG5lZWREb21MVFByZSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgcmV0dXJuIHRydWVcbn1cblxuLy8gPj0xLjIuMyBpcyBsb3dlciB0aGFuID4xLjIuM1xuY29uc3QgaGlnaGVyR1QgPSAoYSwgYiwgb3B0aW9ucykgPT4ge1xuICBpZiAoIWEpIHtcbiAgICByZXR1cm4gYlxuICB9XG4gIGNvbnN0IGNvbXAgPSBjb21wYXJlKGEuc2VtdmVyLCBiLnNlbXZlciwgb3B0aW9ucylcbiAgcmV0dXJuIGNvbXAgPiAwID8gYVxuICAgIDogY29tcCA8IDAgPyBiXG4gICAgOiBiLm9wZXJhdG9yID09PSAnPicgJiYgYS5vcGVyYXRvciA9PT0gJz49JyA/IGJcbiAgICA6IGFcbn1cblxuLy8gPD0xLjIuMyBpcyBoaWdoZXIgdGhhbiA8MS4yLjNcbmNvbnN0IGxvd2VyTFQgPSAoYSwgYiwgb3B0aW9ucykgPT4ge1xuICBpZiAoIWEpIHtcbiAgICByZXR1cm4gYlxuICB9XG4gIGNvbnN0IGNvbXAgPSBjb21wYXJlKGEuc2VtdmVyLCBiLnNlbXZlciwgb3B0aW9ucylcbiAgcmV0dXJuIGNvbXAgPCAwID8gYVxuICAgIDogY29tcCA+IDAgPyBiXG4gICAgOiBiLm9wZXJhdG9yID09PSAnPCcgJiYgYS5vcGVyYXRvciA9PT0gJzw9JyA/IGJcbiAgICA6IGFcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzdWJzZXRcbiIsICIvLyBqdXN0IHByZS1sb2FkIGFsbCB0aGUgc3R1ZmYgdGhhdCBpbmRleC5qcyBsYXppbHkgZXhwb3J0c1xuY29uc3QgaW50ZXJuYWxSZSA9IHJlcXVpcmUoJy4vaW50ZXJuYWwvcmUnKVxuY29uc3QgY29uc3RhbnRzID0gcmVxdWlyZSgnLi9pbnRlcm5hbC9jb25zdGFudHMnKVxuY29uc3QgU2VtVmVyID0gcmVxdWlyZSgnLi9jbGFzc2VzL3NlbXZlcicpXG5jb25zdCBpZGVudGlmaWVycyA9IHJlcXVpcmUoJy4vaW50ZXJuYWwvaWRlbnRpZmllcnMnKVxuY29uc3QgcGFyc2UgPSByZXF1aXJlKCcuL2Z1bmN0aW9ucy9wYXJzZScpXG5jb25zdCB2YWxpZCA9IHJlcXVpcmUoJy4vZnVuY3Rpb25zL3ZhbGlkJylcbmNvbnN0IGNsZWFuID0gcmVxdWlyZSgnLi9mdW5jdGlvbnMvY2xlYW4nKVxuY29uc3QgaW5jID0gcmVxdWlyZSgnLi9mdW5jdGlvbnMvaW5jJylcbmNvbnN0IGRpZmYgPSByZXF1aXJlKCcuL2Z1bmN0aW9ucy9kaWZmJylcbmNvbnN0IG1ham9yID0gcmVxdWlyZSgnLi9mdW5jdGlvbnMvbWFqb3InKVxuY29uc3QgbWlub3IgPSByZXF1aXJlKCcuL2Z1bmN0aW9ucy9taW5vcicpXG5jb25zdCBwYXRjaCA9IHJlcXVpcmUoJy4vZnVuY3Rpb25zL3BhdGNoJylcbmNvbnN0IHByZXJlbGVhc2UgPSByZXF1aXJlKCcuL2Z1bmN0aW9ucy9wcmVyZWxlYXNlJylcbmNvbnN0IGNvbXBhcmUgPSByZXF1aXJlKCcuL2Z1bmN0aW9ucy9jb21wYXJlJylcbmNvbnN0IHJjb21wYXJlID0gcmVxdWlyZSgnLi9mdW5jdGlvbnMvcmNvbXBhcmUnKVxuY29uc3QgY29tcGFyZUxvb3NlID0gcmVxdWlyZSgnLi9mdW5jdGlvbnMvY29tcGFyZS1sb29zZScpXG5jb25zdCBjb21wYXJlQnVpbGQgPSByZXF1aXJlKCcuL2Z1bmN0aW9ucy9jb21wYXJlLWJ1aWxkJylcbmNvbnN0IHNvcnQgPSByZXF1aXJlKCcuL2Z1bmN0aW9ucy9zb3J0JylcbmNvbnN0IHJzb3J0ID0gcmVxdWlyZSgnLi9mdW5jdGlvbnMvcnNvcnQnKVxuY29uc3QgZ3QgPSByZXF1aXJlKCcuL2Z1bmN0aW9ucy9ndCcpXG5jb25zdCBsdCA9IHJlcXVpcmUoJy4vZnVuY3Rpb25zL2x0JylcbmNvbnN0IGVxID0gcmVxdWlyZSgnLi9mdW5jdGlvbnMvZXEnKVxuY29uc3QgbmVxID0gcmVxdWlyZSgnLi9mdW5jdGlvbnMvbmVxJylcbmNvbnN0IGd0ZSA9IHJlcXVpcmUoJy4vZnVuY3Rpb25zL2d0ZScpXG5jb25zdCBsdGUgPSByZXF1aXJlKCcuL2Z1bmN0aW9ucy9sdGUnKVxuY29uc3QgY21wID0gcmVxdWlyZSgnLi9mdW5jdGlvbnMvY21wJylcbmNvbnN0IGNvZXJjZSA9IHJlcXVpcmUoJy4vZnVuY3Rpb25zL2NvZXJjZScpXG5jb25zdCBDb21wYXJhdG9yID0gcmVxdWlyZSgnLi9jbGFzc2VzL2NvbXBhcmF0b3InKVxuY29uc3QgUmFuZ2UgPSByZXF1aXJlKCcuL2NsYXNzZXMvcmFuZ2UnKVxuY29uc3Qgc2F0aXNmaWVzID0gcmVxdWlyZSgnLi9mdW5jdGlvbnMvc2F0aXNmaWVzJylcbmNvbnN0IHRvQ29tcGFyYXRvcnMgPSByZXF1aXJlKCcuL3Jhbmdlcy90by1jb21wYXJhdG9ycycpXG5jb25zdCBtYXhTYXRpc2Z5aW5nID0gcmVxdWlyZSgnLi9yYW5nZXMvbWF4LXNhdGlzZnlpbmcnKVxuY29uc3QgbWluU2F0aXNmeWluZyA9IHJlcXVpcmUoJy4vcmFuZ2VzL21pbi1zYXRpc2Z5aW5nJylcbmNvbnN0IG1pblZlcnNpb24gPSByZXF1aXJlKCcuL3Jhbmdlcy9taW4tdmVyc2lvbicpXG5jb25zdCB2YWxpZFJhbmdlID0gcmVxdWlyZSgnLi9yYW5nZXMvdmFsaWQnKVxuY29uc3Qgb3V0c2lkZSA9IHJlcXVpcmUoJy4vcmFuZ2VzL291dHNpZGUnKVxuY29uc3QgZ3RyID0gcmVxdWlyZSgnLi9yYW5nZXMvZ3RyJylcbmNvbnN0IGx0ciA9IHJlcXVpcmUoJy4vcmFuZ2VzL2x0cicpXG5jb25zdCBpbnRlcnNlY3RzID0gcmVxdWlyZSgnLi9yYW5nZXMvaW50ZXJzZWN0cycpXG5jb25zdCBzaW1wbGlmeVJhbmdlID0gcmVxdWlyZSgnLi9yYW5nZXMvc2ltcGxpZnknKVxuY29uc3Qgc3Vic2V0ID0gcmVxdWlyZSgnLi9yYW5nZXMvc3Vic2V0Jylcbm1vZHVsZS5leHBvcnRzID0ge1xuICBwYXJzZSxcbiAgdmFsaWQsXG4gIGNsZWFuLFxuICBpbmMsXG4gIGRpZmYsXG4gIG1ham9yLFxuICBtaW5vcixcbiAgcGF0Y2gsXG4gIHByZXJlbGVhc2UsXG4gIGNvbXBhcmUsXG4gIHJjb21wYXJlLFxuICBjb21wYXJlTG9vc2UsXG4gIGNvbXBhcmVCdWlsZCxcbiAgc29ydCxcbiAgcnNvcnQsXG4gIGd0LFxuICBsdCxcbiAgZXEsXG4gIG5lcSxcbiAgZ3RlLFxuICBsdGUsXG4gIGNtcCxcbiAgY29lcmNlLFxuICBDb21wYXJhdG9yLFxuICBSYW5nZSxcbiAgc2F0aXNmaWVzLFxuICB0b0NvbXBhcmF0b3JzLFxuICBtYXhTYXRpc2Z5aW5nLFxuICBtaW5TYXRpc2Z5aW5nLFxuICBtaW5WZXJzaW9uLFxuICB2YWxpZFJhbmdlLFxuICBvdXRzaWRlLFxuICBndHIsXG4gIGx0cixcbiAgaW50ZXJzZWN0cyxcbiAgc2ltcGxpZnlSYW5nZSxcbiAgc3Vic2V0LFxuICBTZW1WZXIsXG4gIHJlOiBpbnRlcm5hbFJlLnJlLFxuICBzcmM6IGludGVybmFsUmUuc3JjLFxuICB0b2tlbnM6IGludGVybmFsUmUudCxcbiAgU0VNVkVSX1NQRUNfVkVSU0lPTjogY29uc3RhbnRzLlNFTVZFUl9TUEVDX1ZFUlNJT04sXG4gIFJFTEVBU0VfVFlQRVM6IGNvbnN0YW50cy5SRUxFQVNFX1RZUEVTLFxuICBjb21wYXJlSWRlbnRpZmllcnM6IGlkZW50aWZpZXJzLmNvbXBhcmVJZGVudGlmaWVycyxcbiAgcmNvbXBhcmVJZGVudGlmaWVyczogaWRlbnRpZmllcnMucmNvbXBhcmVJZGVudGlmaWVycyxcbn1cbiIsICJjb25zdCBzZW12ZXIgPSByZXF1aXJlKCdzZW12ZXInKTtcblxubW9kdWxlLmV4cG9ydHMgPSBzZW12ZXIuc2F0aXNmaWVzKHByb2Nlc3MudmVyc2lvbiwgJz49MTUuNy4wJyk7XG4iLCAiY29uc3Qgc2VtdmVyID0gcmVxdWlyZSgnc2VtdmVyJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gc2VtdmVyLnNhdGlzZmllcyhwcm9jZXNzLnZlcnNpb24sICc+PTE2LjkuMCcpO1xuIiwgImNvbnN0IEFTWU1NRVRSSUNfS0VZX0RFVEFJTFNfU1VQUE9SVEVEID0gcmVxdWlyZSgnLi9hc3ltbWV0cmljS2V5RGV0YWlsc1N1cHBvcnRlZCcpO1xuY29uc3QgUlNBX1BTU19LRVlfREVUQUlMU19TVVBQT1JURUQgPSByZXF1aXJlKCcuL3JzYVBzc0tleURldGFpbHNTdXBwb3J0ZWQnKTtcblxuY29uc3QgYWxsb3dlZEFsZ29yaXRobXNGb3JLZXlzID0ge1xuICAnZWMnOiBbJ0VTMjU2JywgJ0VTMzg0JywgJ0VTNTEyJ10sXG4gICdyc2EnOiBbJ1JTMjU2JywgJ1BTMjU2JywgJ1JTMzg0JywgJ1BTMzg0JywgJ1JTNTEyJywgJ1BTNTEyJ10sXG4gICdyc2EtcHNzJzogWydQUzI1NicsICdQUzM4NCcsICdQUzUxMiddXG59O1xuXG5jb25zdCBhbGxvd2VkQ3VydmVzID0ge1xuICBFUzI1NjogJ3ByaW1lMjU2djEnLFxuICBFUzM4NDogJ3NlY3AzODRyMScsXG4gIEVTNTEyOiAnc2VjcDUyMXIxJyxcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYWxnb3JpdGhtLCBrZXkpIHtcbiAgaWYgKCFhbGdvcml0aG0gfHwgIWtleSkgcmV0dXJuO1xuXG4gIGNvbnN0IGtleVR5cGUgPSBrZXkuYXN5bW1ldHJpY0tleVR5cGU7XG4gIGlmICgha2V5VHlwZSkgcmV0dXJuO1xuXG4gIGNvbnN0IGFsbG93ZWRBbGdvcml0aG1zID0gYWxsb3dlZEFsZ29yaXRobXNGb3JLZXlzW2tleVR5cGVdO1xuXG4gIGlmICghYWxsb3dlZEFsZ29yaXRobXMpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24ga2V5IHR5cGUgXCIke2tleVR5cGV9XCIuYCk7XG4gIH1cblxuICBpZiAoIWFsbG93ZWRBbGdvcml0aG1zLmluY2x1ZGVzKGFsZ29yaXRobSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFwiYWxnXCIgcGFyYW1ldGVyIGZvciBcIiR7a2V5VHlwZX1cIiBrZXkgdHlwZSBtdXN0IGJlIG9uZSBvZjogJHthbGxvd2VkQWxnb3JpdGhtcy5qb2luKCcsICcpfS5gKVxuICB9XG5cbiAgLypcbiAgICogSWdub3JlIHRoZSBuZXh0IGJsb2NrIGZyb20gdGVzdCBjb3ZlcmFnZSBiZWNhdXNlIGl0IGdldHMgZXhlY3V0ZWRcbiAgICogY29uZGl0aW9uYWxseSBkZXBlbmRpbmcgb24gdGhlIE5vZGUgdmVyc2lvbi4gTm90IGlnbm9yaW5nIGl0IHdvdWxkXG4gICAqIHByZXZlbnQgdXMgZnJvbSByZWFjaGluZyB0aGUgdGFyZ2V0ICUgb2YgY292ZXJhZ2UgZm9yIHZlcnNpb25zIG9mXG4gICAqIE5vZGUgdW5kZXIgMTUuNy4wLlxuICAgKi9cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgaWYgKEFTWU1NRVRSSUNfS0VZX0RFVEFJTFNfU1VQUE9SVEVEKSB7XG4gICAgc3dpdGNoIChrZXlUeXBlKSB7XG4gICAgY2FzZSAnZWMnOlxuICAgICAgY29uc3Qga2V5Q3VydmUgPSBrZXkuYXN5bW1ldHJpY0tleURldGFpbHMubmFtZWRDdXJ2ZTtcbiAgICAgIGNvbnN0IGFsbG93ZWRDdXJ2ZSA9IGFsbG93ZWRDdXJ2ZXNbYWxnb3JpdGhtXTtcblxuICAgICAgaWYgKGtleUN1cnZlICE9PSBhbGxvd2VkQ3VydmUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcImFsZ1wiIHBhcmFtZXRlciBcIiR7YWxnb3JpdGhtfVwiIHJlcXVpcmVzIGN1cnZlIFwiJHthbGxvd2VkQ3VydmV9XCIuYCk7XG4gICAgICB9XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ3JzYS1wc3MnOlxuICAgICAgaWYgKFJTQV9QU1NfS0VZX0RFVEFJTFNfU1VQUE9SVEVEKSB7XG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IHBhcnNlSW50KGFsZ29yaXRobS5zbGljZSgtMyksIDEwKTtcbiAgICAgICAgY29uc3QgeyBoYXNoQWxnb3JpdGhtLCBtZ2YxSGFzaEFsZ29yaXRobSwgc2FsdExlbmd0aCB9ID0ga2V5LmFzeW1tZXRyaWNLZXlEZXRhaWxzO1xuXG4gICAgICAgIGlmIChoYXNoQWxnb3JpdGhtICE9PSBgc2hhJHtsZW5ndGh9YCB8fCBtZ2YxSGFzaEFsZ29yaXRobSAhPT0gaGFzaEFsZ29yaXRobSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBrZXkgZm9yIHRoaXMgb3BlcmF0aW9uLCBpdHMgUlNBLVBTUyBwYXJhbWV0ZXJzIGRvIG5vdCBtZWV0IHRoZSByZXF1aXJlbWVudHMgb2YgXCJhbGdcIiAke2FsZ29yaXRobX0uYCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2FsdExlbmd0aCAhPT0gdW5kZWZpbmVkICYmIHNhbHRMZW5ndGggPiBsZW5ndGggPj4gMykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBrZXkgZm9yIHRoaXMgb3BlcmF0aW9uLCBpdHMgUlNBLVBTUyBwYXJhbWV0ZXIgc2FsdExlbmd0aCBkb2VzIG5vdCBtZWV0IHRoZSByZXF1aXJlbWVudHMgb2YgXCJhbGdcIiAke2FsZ29yaXRobX0uYClcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG59XG4iLCAidmFyIHNlbXZlciA9IHJlcXVpcmUoJ3NlbXZlcicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHNlbXZlci5zYXRpc2ZpZXMocHJvY2Vzcy52ZXJzaW9uLCAnXjYuMTIuMCB8fCA+PTguMC4wJyk7XG4iLCAiY29uc3QgSnNvbldlYlRva2VuRXJyb3IgPSByZXF1aXJlKCcuL2xpYi9Kc29uV2ViVG9rZW5FcnJvcicpO1xuY29uc3QgTm90QmVmb3JlRXJyb3IgPSByZXF1aXJlKCcuL2xpYi9Ob3RCZWZvcmVFcnJvcicpO1xuY29uc3QgVG9rZW5FeHBpcmVkRXJyb3IgPSByZXF1aXJlKCcuL2xpYi9Ub2tlbkV4cGlyZWRFcnJvcicpO1xuY29uc3QgZGVjb2RlID0gcmVxdWlyZSgnLi9kZWNvZGUnKTtcbmNvbnN0IHRpbWVzcGFuID0gcmVxdWlyZSgnLi9saWIvdGltZXNwYW4nKTtcbmNvbnN0IHZhbGlkYXRlQXN5bW1ldHJpY0tleSA9IHJlcXVpcmUoJy4vbGliL3ZhbGlkYXRlQXN5bW1ldHJpY0tleScpO1xuY29uc3QgUFNfU1VQUE9SVEVEID0gcmVxdWlyZSgnLi9saWIvcHNTdXBwb3J0ZWQnKTtcbmNvbnN0IGp3cyA9IHJlcXVpcmUoJ2p3cycpO1xuY29uc3Qge0tleU9iamVjdCwgY3JlYXRlU2VjcmV0S2V5LCBjcmVhdGVQdWJsaWNLZXl9ID0gcmVxdWlyZShcImNyeXB0b1wiKTtcblxuY29uc3QgUFVCX0tFWV9BTEdTID0gWydSUzI1NicsICdSUzM4NCcsICdSUzUxMiddO1xuY29uc3QgRUNfS0VZX0FMR1MgPSBbJ0VTMjU2JywgJ0VTMzg0JywgJ0VTNTEyJ107XG5jb25zdCBSU0FfS0VZX0FMR1MgPSBbJ1JTMjU2JywgJ1JTMzg0JywgJ1JTNTEyJ107XG5jb25zdCBIU19BTEdTID0gWydIUzI1NicsICdIUzM4NCcsICdIUzUxMiddO1xuXG5pZiAoUFNfU1VQUE9SVEVEKSB7XG4gIFBVQl9LRVlfQUxHUy5zcGxpY2UoUFVCX0tFWV9BTEdTLmxlbmd0aCwgMCwgJ1BTMjU2JywgJ1BTMzg0JywgJ1BTNTEyJyk7XG4gIFJTQV9LRVlfQUxHUy5zcGxpY2UoUlNBX0tFWV9BTEdTLmxlbmd0aCwgMCwgJ1BTMjU2JywgJ1BTMzg0JywgJ1BTNTEyJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGp3dFN0cmluZywgc2VjcmV0T3JQdWJsaWNLZXksIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIGlmICgodHlwZW9mIG9wdGlvbnMgPT09ICdmdW5jdGlvbicpICYmICFjYWxsYmFjaykge1xuICAgIGNhbGxiYWNrID0gb3B0aW9ucztcbiAgICBvcHRpb25zID0ge307XG4gIH1cblxuICBpZiAoIW9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0ge307XG4gIH1cblxuICAvL2Nsb25lIHRoaXMgb2JqZWN0IHNpbmNlIHdlIGFyZSBnb2luZyB0byBtdXRhdGUgaXQuXG4gIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zKTtcblxuICBsZXQgZG9uZTtcblxuICBpZiAoY2FsbGJhY2spIHtcbiAgICBkb25lID0gY2FsbGJhY2s7XG4gIH0gZWxzZSB7XG4gICAgZG9uZSA9IGZ1bmN0aW9uKGVyciwgZGF0YSkge1xuICAgICAgaWYgKGVycikgdGhyb3cgZXJyO1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfTtcbiAgfVxuXG4gIGlmIChvcHRpb25zLmNsb2NrVGltZXN0YW1wICYmIHR5cGVvZiBvcHRpb25zLmNsb2NrVGltZXN0YW1wICE9PSAnbnVtYmVyJykge1xuICAgIHJldHVybiBkb25lKG5ldyBKc29uV2ViVG9rZW5FcnJvcignY2xvY2tUaW1lc3RhbXAgbXVzdCBiZSBhIG51bWJlcicpKTtcbiAgfVxuXG4gIGlmIChvcHRpb25zLm5vbmNlICE9PSB1bmRlZmluZWQgJiYgKHR5cGVvZiBvcHRpb25zLm5vbmNlICE9PSAnc3RyaW5nJyB8fCBvcHRpb25zLm5vbmNlLnRyaW0oKSA9PT0gJycpKSB7XG4gICAgcmV0dXJuIGRvbmUobmV3IEpzb25XZWJUb2tlbkVycm9yKCdub25jZSBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZycpKTtcbiAgfVxuXG4gIGlmIChvcHRpb25zLmFsbG93SW52YWxpZEFzeW1tZXRyaWNLZXlUeXBlcyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvcHRpb25zLmFsbG93SW52YWxpZEFzeW1tZXRyaWNLZXlUeXBlcyAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgcmV0dXJuIGRvbmUobmV3IEpzb25XZWJUb2tlbkVycm9yKCdhbGxvd0ludmFsaWRBc3ltbWV0cmljS2V5VHlwZXMgbXVzdCBiZSBhIGJvb2xlYW4nKSk7XG4gIH1cblxuICBjb25zdCBjbG9ja1RpbWVzdGFtcCA9IG9wdGlvbnMuY2xvY2tUaW1lc3RhbXAgfHwgTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCk7XG5cbiAgaWYgKCFqd3RTdHJpbmcpe1xuICAgIHJldHVybiBkb25lKG5ldyBKc29uV2ViVG9rZW5FcnJvcignand0IG11c3QgYmUgcHJvdmlkZWQnKSk7XG4gIH1cblxuICBpZiAodHlwZW9mIGp3dFN0cmluZyAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZG9uZShuZXcgSnNvbldlYlRva2VuRXJyb3IoJ2p3dCBtdXN0IGJlIGEgc3RyaW5nJykpO1xuICB9XG5cbiAgY29uc3QgcGFydHMgPSBqd3RTdHJpbmcuc3BsaXQoJy4nKTtcblxuICBpZiAocGFydHMubGVuZ3RoICE9PSAzKXtcbiAgICByZXR1cm4gZG9uZShuZXcgSnNvbldlYlRva2VuRXJyb3IoJ2p3dCBtYWxmb3JtZWQnKSk7XG4gIH1cblxuICBsZXQgZGVjb2RlZFRva2VuO1xuXG4gIHRyeSB7XG4gICAgZGVjb2RlZFRva2VuID0gZGVjb2RlKGp3dFN0cmluZywgeyBjb21wbGV0ZTogdHJ1ZSB9KTtcbiAgfSBjYXRjaChlcnIpIHtcbiAgICByZXR1cm4gZG9uZShlcnIpO1xuICB9XG5cbiAgaWYgKCFkZWNvZGVkVG9rZW4pIHtcbiAgICByZXR1cm4gZG9uZShuZXcgSnNvbldlYlRva2VuRXJyb3IoJ2ludmFsaWQgdG9rZW4nKSk7XG4gIH1cblxuICBjb25zdCBoZWFkZXIgPSBkZWNvZGVkVG9rZW4uaGVhZGVyO1xuICBsZXQgZ2V0U2VjcmV0O1xuXG4gIGlmKHR5cGVvZiBzZWNyZXRPclB1YmxpY0tleSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGlmKCFjYWxsYmFjaykge1xuICAgICAgcmV0dXJuIGRvbmUobmV3IEpzb25XZWJUb2tlbkVycm9yKCd2ZXJpZnkgbXVzdCBiZSBjYWxsZWQgYXN5bmNocm9ub3VzIGlmIHNlY3JldCBvciBwdWJsaWMga2V5IGlzIHByb3ZpZGVkIGFzIGEgY2FsbGJhY2snKSk7XG4gICAgfVxuXG4gICAgZ2V0U2VjcmV0ID0gc2VjcmV0T3JQdWJsaWNLZXk7XG4gIH1cbiAgZWxzZSB7XG4gICAgZ2V0U2VjcmV0ID0gZnVuY3Rpb24oaGVhZGVyLCBzZWNyZXRDYWxsYmFjaykge1xuICAgICAgcmV0dXJuIHNlY3JldENhbGxiYWNrKG51bGwsIHNlY3JldE9yUHVibGljS2V5KTtcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIGdldFNlY3JldChoZWFkZXIsIGZ1bmN0aW9uKGVyciwgc2VjcmV0T3JQdWJsaWNLZXkpIHtcbiAgICBpZihlcnIpIHtcbiAgICAgIHJldHVybiBkb25lKG5ldyBKc29uV2ViVG9rZW5FcnJvcignZXJyb3IgaW4gc2VjcmV0IG9yIHB1YmxpYyBrZXkgY2FsbGJhY2s6ICcgKyBlcnIubWVzc2FnZSkpO1xuICAgIH1cblxuICAgIGNvbnN0IGhhc1NpZ25hdHVyZSA9IHBhcnRzWzJdLnRyaW0oKSAhPT0gJyc7XG5cbiAgICBpZiAoIWhhc1NpZ25hdHVyZSAmJiBzZWNyZXRPclB1YmxpY0tleSl7XG4gICAgICByZXR1cm4gZG9uZShuZXcgSnNvbldlYlRva2VuRXJyb3IoJ2p3dCBzaWduYXR1cmUgaXMgcmVxdWlyZWQnKSk7XG4gICAgfVxuXG4gICAgaWYgKGhhc1NpZ25hdHVyZSAmJiAhc2VjcmV0T3JQdWJsaWNLZXkpIHtcbiAgICAgIHJldHVybiBkb25lKG5ldyBKc29uV2ViVG9rZW5FcnJvcignc2VjcmV0IG9yIHB1YmxpYyBrZXkgbXVzdCBiZSBwcm92aWRlZCcpKTtcbiAgICB9XG5cbiAgICBpZiAoIWhhc1NpZ25hdHVyZSAmJiAhb3B0aW9ucy5hbGdvcml0aG1zKSB7XG4gICAgICByZXR1cm4gZG9uZShuZXcgSnNvbldlYlRva2VuRXJyb3IoJ3BsZWFzZSBzcGVjaWZ5IFwibm9uZVwiIGluIFwiYWxnb3JpdGhtc1wiIHRvIHZlcmlmeSB1bnNpZ25lZCB0b2tlbnMnKSk7XG4gICAgfVxuXG4gICAgaWYgKHNlY3JldE9yUHVibGljS2V5ICE9IG51bGwgJiYgIShzZWNyZXRPclB1YmxpY0tleSBpbnN0YW5jZW9mIEtleU9iamVjdCkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHNlY3JldE9yUHVibGljS2V5ID0gY3JlYXRlUHVibGljS2V5KHNlY3JldE9yUHVibGljS2V5KTtcbiAgICAgIH0gY2F0Y2ggKF8pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBzZWNyZXRPclB1YmxpY0tleSA9IGNyZWF0ZVNlY3JldEtleSh0eXBlb2Ygc2VjcmV0T3JQdWJsaWNLZXkgPT09ICdzdHJpbmcnID8gQnVmZmVyLmZyb20oc2VjcmV0T3JQdWJsaWNLZXkpIDogc2VjcmV0T3JQdWJsaWNLZXkpO1xuICAgICAgICB9IGNhdGNoIChfKSB7XG4gICAgICAgICAgcmV0dXJuIGRvbmUobmV3IEpzb25XZWJUb2tlbkVycm9yKCdzZWNyZXRPclB1YmxpY0tleSBpcyBub3QgdmFsaWQga2V5IG1hdGVyaWFsJykpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIW9wdGlvbnMuYWxnb3JpdGhtcykge1xuICAgICAgaWYgKHNlY3JldE9yUHVibGljS2V5LnR5cGUgPT09ICdzZWNyZXQnKSB7XG4gICAgICAgIG9wdGlvbnMuYWxnb3JpdGhtcyA9IEhTX0FMR1M7XG4gICAgICB9IGVsc2UgaWYgKFsncnNhJywgJ3JzYS1wc3MnXS5pbmNsdWRlcyhzZWNyZXRPclB1YmxpY0tleS5hc3ltbWV0cmljS2V5VHlwZSkpIHtcbiAgICAgICAgb3B0aW9ucy5hbGdvcml0aG1zID0gUlNBX0tFWV9BTEdTXG4gICAgICB9IGVsc2UgaWYgKHNlY3JldE9yUHVibGljS2V5LmFzeW1tZXRyaWNLZXlUeXBlID09PSAnZWMnKSB7XG4gICAgICAgIG9wdGlvbnMuYWxnb3JpdGhtcyA9IEVDX0tFWV9BTEdTXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcHRpb25zLmFsZ29yaXRobXMgPSBQVUJfS0VZX0FMR1NcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5hbGdvcml0aG1zLmluZGV4T2YoZGVjb2RlZFRva2VuLmhlYWRlci5hbGcpID09PSAtMSkge1xuICAgICAgcmV0dXJuIGRvbmUobmV3IEpzb25XZWJUb2tlbkVycm9yKCdpbnZhbGlkIGFsZ29yaXRobScpKTtcbiAgICB9XG5cbiAgICBpZiAoaGVhZGVyLmFsZy5zdGFydHNXaXRoKCdIUycpICYmIHNlY3JldE9yUHVibGljS2V5LnR5cGUgIT09ICdzZWNyZXQnKSB7XG4gICAgICByZXR1cm4gZG9uZShuZXcgSnNvbldlYlRva2VuRXJyb3IoKGBzZWNyZXRPclB1YmxpY0tleSBtdXN0IGJlIGEgc3ltbWV0cmljIGtleSB3aGVuIHVzaW5nICR7aGVhZGVyLmFsZ31gKSkpXG4gICAgfSBlbHNlIGlmICgvXig/OlJTfFBTfEVTKS8udGVzdChoZWFkZXIuYWxnKSAmJiBzZWNyZXRPclB1YmxpY0tleS50eXBlICE9PSAncHVibGljJykge1xuICAgICAgcmV0dXJuIGRvbmUobmV3IEpzb25XZWJUb2tlbkVycm9yKChgc2VjcmV0T3JQdWJsaWNLZXkgbXVzdCBiZSBhbiBhc3ltbWV0cmljIGtleSB3aGVuIHVzaW5nICR7aGVhZGVyLmFsZ31gKSkpXG4gICAgfVxuXG4gICAgaWYgKCFvcHRpb25zLmFsbG93SW52YWxpZEFzeW1tZXRyaWNLZXlUeXBlcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFsaWRhdGVBc3ltbWV0cmljS2V5KGhlYWRlci5hbGcsIHNlY3JldE9yUHVibGljS2V5KTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGRvbmUoZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHZhbGlkO1xuXG4gICAgdHJ5IHtcbiAgICAgIHZhbGlkID0gandzLnZlcmlmeShqd3RTdHJpbmcsIGRlY29kZWRUb2tlbi5oZWFkZXIuYWxnLCBzZWNyZXRPclB1YmxpY0tleSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGRvbmUoZSk7XG4gICAgfVxuXG4gICAgaWYgKCF2YWxpZCkge1xuICAgICAgcmV0dXJuIGRvbmUobmV3IEpzb25XZWJUb2tlbkVycm9yKCdpbnZhbGlkIHNpZ25hdHVyZScpKTtcbiAgICB9XG5cbiAgICBjb25zdCBwYXlsb2FkID0gZGVjb2RlZFRva2VuLnBheWxvYWQ7XG5cbiAgICBpZiAodHlwZW9mIHBheWxvYWQubmJmICE9PSAndW5kZWZpbmVkJyAmJiAhb3B0aW9ucy5pZ25vcmVOb3RCZWZvcmUpIHtcbiAgICAgIGlmICh0eXBlb2YgcGF5bG9hZC5uYmYgIT09ICdudW1iZXInKSB7XG4gICAgICAgIHJldHVybiBkb25lKG5ldyBKc29uV2ViVG9rZW5FcnJvcignaW52YWxpZCBuYmYgdmFsdWUnKSk7XG4gICAgICB9XG4gICAgICBpZiAocGF5bG9hZC5uYmYgPiBjbG9ja1RpbWVzdGFtcCArIChvcHRpb25zLmNsb2NrVG9sZXJhbmNlIHx8IDApKSB7XG4gICAgICAgIHJldHVybiBkb25lKG5ldyBOb3RCZWZvcmVFcnJvcignand0IG5vdCBhY3RpdmUnLCBuZXcgRGF0ZShwYXlsb2FkLm5iZiAqIDEwMDApKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBwYXlsb2FkLmV4cCAhPT0gJ3VuZGVmaW5lZCcgJiYgIW9wdGlvbnMuaWdub3JlRXhwaXJhdGlvbikge1xuICAgICAgaWYgKHR5cGVvZiBwYXlsb2FkLmV4cCAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgcmV0dXJuIGRvbmUobmV3IEpzb25XZWJUb2tlbkVycm9yKCdpbnZhbGlkIGV4cCB2YWx1ZScpKTtcbiAgICAgIH1cbiAgICAgIGlmIChjbG9ja1RpbWVzdGFtcCA+PSBwYXlsb2FkLmV4cCArIChvcHRpb25zLmNsb2NrVG9sZXJhbmNlIHx8IDApKSB7XG4gICAgICAgIHJldHVybiBkb25lKG5ldyBUb2tlbkV4cGlyZWRFcnJvcignand0IGV4cGlyZWQnLCBuZXcgRGF0ZShwYXlsb2FkLmV4cCAqIDEwMDApKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuYXVkaWVuY2UpIHtcbiAgICAgIGNvbnN0IGF1ZGllbmNlcyA9IEFycmF5LmlzQXJyYXkob3B0aW9ucy5hdWRpZW5jZSkgPyBvcHRpb25zLmF1ZGllbmNlIDogW29wdGlvbnMuYXVkaWVuY2VdO1xuICAgICAgY29uc3QgdGFyZ2V0ID0gQXJyYXkuaXNBcnJheShwYXlsb2FkLmF1ZCkgPyBwYXlsb2FkLmF1ZCA6IFtwYXlsb2FkLmF1ZF07XG5cbiAgICAgIGNvbnN0IG1hdGNoID0gdGFyZ2V0LnNvbWUoZnVuY3Rpb24gKHRhcmdldEF1ZGllbmNlKSB7XG4gICAgICAgIHJldHVybiBhdWRpZW5jZXMuc29tZShmdW5jdGlvbiAoYXVkaWVuY2UpIHtcbiAgICAgICAgICByZXR1cm4gYXVkaWVuY2UgaW5zdGFuY2VvZiBSZWdFeHAgPyBhdWRpZW5jZS50ZXN0KHRhcmdldEF1ZGllbmNlKSA6IGF1ZGllbmNlID09PSB0YXJnZXRBdWRpZW5jZTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKCFtYXRjaCkge1xuICAgICAgICByZXR1cm4gZG9uZShuZXcgSnNvbldlYlRva2VuRXJyb3IoJ2p3dCBhdWRpZW5jZSBpbnZhbGlkLiBleHBlY3RlZDogJyArIGF1ZGllbmNlcy5qb2luKCcgb3IgJykpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5pc3N1ZXIpIHtcbiAgICAgIGNvbnN0IGludmFsaWRfaXNzdWVyID1cbiAgICAgICAgICAgICAgKHR5cGVvZiBvcHRpb25zLmlzc3VlciA9PT0gJ3N0cmluZycgJiYgcGF5bG9hZC5pc3MgIT09IG9wdGlvbnMuaXNzdWVyKSB8fFxuICAgICAgICAgICAgICAoQXJyYXkuaXNBcnJheShvcHRpb25zLmlzc3VlcikgJiYgb3B0aW9ucy5pc3N1ZXIuaW5kZXhPZihwYXlsb2FkLmlzcykgPT09IC0xKTtcblxuICAgICAgaWYgKGludmFsaWRfaXNzdWVyKSB7XG4gICAgICAgIHJldHVybiBkb25lKG5ldyBKc29uV2ViVG9rZW5FcnJvcignand0IGlzc3VlciBpbnZhbGlkLiBleHBlY3RlZDogJyArIG9wdGlvbnMuaXNzdWVyKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuc3ViamVjdCkge1xuICAgICAgaWYgKHBheWxvYWQuc3ViICE9PSBvcHRpb25zLnN1YmplY3QpIHtcbiAgICAgICAgcmV0dXJuIGRvbmUobmV3IEpzb25XZWJUb2tlbkVycm9yKCdqd3Qgc3ViamVjdCBpbnZhbGlkLiBleHBlY3RlZDogJyArIG9wdGlvbnMuc3ViamVjdCkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmp3dGlkKSB7XG4gICAgICBpZiAocGF5bG9hZC5qdGkgIT09IG9wdGlvbnMuand0aWQpIHtcbiAgICAgICAgcmV0dXJuIGRvbmUobmV3IEpzb25XZWJUb2tlbkVycm9yKCdqd3Qgand0aWQgaW52YWxpZC4gZXhwZWN0ZWQ6ICcgKyBvcHRpb25zLmp3dGlkKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMubm9uY2UpIHtcbiAgICAgIGlmIChwYXlsb2FkLm5vbmNlICE9PSBvcHRpb25zLm5vbmNlKSB7XG4gICAgICAgIHJldHVybiBkb25lKG5ldyBKc29uV2ViVG9rZW5FcnJvcignand0IG5vbmNlIGludmFsaWQuIGV4cGVjdGVkOiAnICsgb3B0aW9ucy5ub25jZSkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChvcHRpb25zLm1heEFnZSkge1xuICAgICAgaWYgKHR5cGVvZiBwYXlsb2FkLmlhdCAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgcmV0dXJuIGRvbmUobmV3IEpzb25XZWJUb2tlbkVycm9yKCdpYXQgcmVxdWlyZWQgd2hlbiBtYXhBZ2UgaXMgc3BlY2lmaWVkJykpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBtYXhBZ2VUaW1lc3RhbXAgPSB0aW1lc3BhbihvcHRpb25zLm1heEFnZSwgcGF5bG9hZC5pYXQpO1xuICAgICAgaWYgKHR5cGVvZiBtYXhBZ2VUaW1lc3RhbXAgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBkb25lKG5ldyBKc29uV2ViVG9rZW5FcnJvcignXCJtYXhBZ2VcIiBzaG91bGQgYmUgYSBudW1iZXIgb2Ygc2Vjb25kcyBvciBzdHJpbmcgcmVwcmVzZW50aW5nIGEgdGltZXNwYW4gZWc6IFwiMWRcIiwgXCIyMGhcIiwgNjAnKSk7XG4gICAgICB9XG4gICAgICBpZiAoY2xvY2tUaW1lc3RhbXAgPj0gbWF4QWdlVGltZXN0YW1wICsgKG9wdGlvbnMuY2xvY2tUb2xlcmFuY2UgfHwgMCkpIHtcbiAgICAgICAgcmV0dXJuIGRvbmUobmV3IFRva2VuRXhwaXJlZEVycm9yKCdtYXhBZ2UgZXhjZWVkZWQnLCBuZXcgRGF0ZShtYXhBZ2VUaW1lc3RhbXAgKiAxMDAwKSkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmNvbXBsZXRlID09PSB0cnVlKSB7XG4gICAgICBjb25zdCBzaWduYXR1cmUgPSBkZWNvZGVkVG9rZW4uc2lnbmF0dXJlO1xuXG4gICAgICByZXR1cm4gZG9uZShudWxsLCB7XG4gICAgICAgIGhlYWRlcjogaGVhZGVyLFxuICAgICAgICBwYXlsb2FkOiBwYXlsb2FkLFxuICAgICAgICBzaWduYXR1cmU6IHNpZ25hdHVyZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRvbmUobnVsbCwgcGF5bG9hZCk7XG4gIH0pO1xufTtcbiIsICIvKipcbiAqIGxvZGFzaCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMgPGh0dHBzOi8vanF1ZXJ5Lm9yZy8+XG4gKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKi9cblxuLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG52YXIgSU5GSU5JVFkgPSAxIC8gMCxcbiAgICBNQVhfU0FGRV9JTlRFR0VSID0gOTAwNzE5OTI1NDc0MDk5MSxcbiAgICBNQVhfSU5URUdFUiA9IDEuNzk3NjkzMTM0ODYyMzE1N2UrMzA4LFxuICAgIE5BTiA9IDAgLyAwO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgYXJnc1RhZyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nLFxuICAgIGZ1bmNUYWcgPSAnW29iamVjdCBGdW5jdGlvbl0nLFxuICAgIGdlblRhZyA9ICdbb2JqZWN0IEdlbmVyYXRvckZ1bmN0aW9uXScsXG4gICAgc3RyaW5nVGFnID0gJ1tvYmplY3QgU3RyaW5nXScsXG4gICAgc3ltYm9sVGFnID0gJ1tvYmplY3QgU3ltYm9sXSc7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UuICovXG52YXIgcmVUcmltID0gL15cXHMrfFxccyskL2c7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBiYWQgc2lnbmVkIGhleGFkZWNpbWFsIHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc0JhZEhleCA9IC9eWy0rXTB4WzAtOWEtZl0rJC9pO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgYmluYXJ5IHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc0JpbmFyeSA9IC9eMGJbMDFdKyQvaTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IG9jdGFsIHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc09jdGFsID0gL14wb1swLTddKyQvaTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IHVuc2lnbmVkIGludGVnZXIgdmFsdWVzLiAqL1xudmFyIHJlSXNVaW50ID0gL14oPzowfFsxLTldXFxkKikkLztcblxuLyoqIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHdpdGhvdXQgYSBkZXBlbmRlbmN5IG9uIGByb290YC4gKi9cbnZhciBmcmVlUGFyc2VJbnQgPSBwYXJzZUludDtcblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8ubWFwYCBmb3IgYXJyYXlzIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWVcbiAqIHNob3J0aGFuZHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXl9IFthcnJheV0gVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBtYXBwZWQgYXJyYXkuXG4gKi9cbmZ1bmN0aW9uIGFycmF5TWFwKGFycmF5LCBpdGVyYXRlZSkge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMCxcbiAgICAgIHJlc3VsdCA9IEFycmF5KGxlbmd0aCk7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICByZXN1bHRbaW5kZXhdID0gaXRlcmF0ZWUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZmluZEluZGV4YCBhbmQgYF8uZmluZExhc3RJbmRleGAgd2l0aG91dFxuICogc3VwcG9ydCBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGluc3BlY3QuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBmcm9tSW5kZXggVGhlIGluZGV4IHRvIHNlYXJjaCBmcm9tLlxuICogQHBhcmFtIHtib29sZWFufSBbZnJvbVJpZ2h0XSBTcGVjaWZ5IGl0ZXJhdGluZyBmcm9tIHJpZ2h0IHRvIGxlZnQuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbWF0Y2hlZCB2YWx1ZSwgZWxzZSBgLTFgLlxuICovXG5mdW5jdGlvbiBiYXNlRmluZEluZGV4KGFycmF5LCBwcmVkaWNhdGUsIGZyb21JbmRleCwgZnJvbVJpZ2h0KSB7XG4gIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGgsXG4gICAgICBpbmRleCA9IGZyb21JbmRleCArIChmcm9tUmlnaHQgPyAxIDogLTEpO1xuXG4gIHdoaWxlICgoZnJvbVJpZ2h0ID8gaW5kZXgtLSA6ICsraW5kZXggPCBsZW5ndGgpKSB7XG4gICAgaWYgKHByZWRpY2F0ZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHtcbiAgICAgIHJldHVybiBpbmRleDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC0xO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmluZGV4T2ZgIHdpdGhvdXQgYGZyb21JbmRleGAgYm91bmRzIGNoZWNrcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGluc3BlY3QuXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZWFyY2ggZm9yLlxuICogQHBhcmFtIHtudW1iZXJ9IGZyb21JbmRleCBUaGUgaW5kZXggdG8gc2VhcmNoIGZyb20uXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbWF0Y2hlZCB2YWx1ZSwgZWxzZSBgLTFgLlxuICovXG5mdW5jdGlvbiBiYXNlSW5kZXhPZihhcnJheSwgdmFsdWUsIGZyb21JbmRleCkge1xuICBpZiAodmFsdWUgIT09IHZhbHVlKSB7XG4gICAgcmV0dXJuIGJhc2VGaW5kSW5kZXgoYXJyYXksIGJhc2VJc05hTiwgZnJvbUluZGV4KTtcbiAgfVxuICB2YXIgaW5kZXggPSBmcm9tSW5kZXggLSAxLFxuICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgaWYgKGFycmF5W2luZGV4XSA9PT0gdmFsdWUpIHtcbiAgICAgIHJldHVybiBpbmRleDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC0xO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzTmFOYCB3aXRob3V0IHN1cHBvcnQgZm9yIG51bWJlciBvYmplY3RzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGBOYU5gLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VJc05hTih2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT09IHZhbHVlO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnRpbWVzYCB3aXRob3V0IHN1cHBvcnQgZm9yIGl0ZXJhdGVlIHNob3J0aGFuZHNcbiAqIG9yIG1heCBhcnJheSBsZW5ndGggY2hlY2tzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgbnVtYmVyIG9mIHRpbWVzIHRvIGludm9rZSBgaXRlcmF0ZWVgLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcmVzdWx0cy5cbiAqL1xuZnVuY3Rpb24gYmFzZVRpbWVzKG4sIGl0ZXJhdGVlKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgcmVzdWx0ID0gQXJyYXkobik7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBuKSB7XG4gICAgcmVzdWx0W2luZGV4XSA9IGl0ZXJhdGVlKGluZGV4KTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnZhbHVlc2AgYW5kIGBfLnZhbHVlc0luYCB3aGljaCBjcmVhdGVzIGFuXG4gKiBhcnJheSBvZiBgb2JqZWN0YCBwcm9wZXJ0eSB2YWx1ZXMgY29ycmVzcG9uZGluZyB0byB0aGUgcHJvcGVydHkgbmFtZXNcbiAqIG9mIGBwcm9wc2AuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7QXJyYXl9IHByb3BzIFRoZSBwcm9wZXJ0eSBuYW1lcyB0byBnZXQgdmFsdWVzIGZvci5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IHZhbHVlcy5cbiAqL1xuZnVuY3Rpb24gYmFzZVZhbHVlcyhvYmplY3QsIHByb3BzKSB7XG4gIHJldHVybiBhcnJheU1hcChwcm9wcywgZnVuY3Rpb24oa2V5KSB7XG4gICAgcmV0dXJuIG9iamVjdFtrZXldO1xuICB9KTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgdW5hcnkgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGBmdW5jYCB3aXRoIGl0cyBhcmd1bWVudCB0cmFuc2Zvcm1lZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gd3JhcC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHRyYW5zZm9ybSBUaGUgYXJndW1lbnQgdHJhbnNmb3JtLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIG92ZXJBcmcoZnVuYywgdHJhbnNmb3JtKSB7XG4gIHJldHVybiBmdW5jdGlvbihhcmcpIHtcbiAgICByZXR1cm4gZnVuYyh0cmFuc2Zvcm0oYXJnKSk7XG4gIH07XG59XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZVxuICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi9cbnZhciBwcm9wZXJ0eUlzRW51bWVyYWJsZSA9IG9iamVjdFByb3RvLnByb3BlcnR5SXNFbnVtZXJhYmxlO1xuXG4vKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlS2V5cyA9IG92ZXJBcmcoT2JqZWN0LmtleXMsIE9iamVjdCksXG4gICAgbmF0aXZlTWF4ID0gTWF0aC5tYXg7XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBhcnJheSBvZiB0aGUgZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiB0aGUgYXJyYXktbGlrZSBgdmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaW5oZXJpdGVkIFNwZWNpZnkgcmV0dXJuaW5nIGluaGVyaXRlZCBwcm9wZXJ0eSBuYW1lcy5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG4gKi9cbmZ1bmN0aW9uIGFycmF5TGlrZUtleXModmFsdWUsIGluaGVyaXRlZCkge1xuICAvLyBTYWZhcmkgOC4xIG1ha2VzIGBhcmd1bWVudHMuY2FsbGVlYCBlbnVtZXJhYmxlIGluIHN0cmljdCBtb2RlLlxuICAvLyBTYWZhcmkgOSBtYWtlcyBgYXJndW1lbnRzLmxlbmd0aGAgZW51bWVyYWJsZSBpbiBzdHJpY3QgbW9kZS5cbiAgdmFyIHJlc3VsdCA9IChpc0FycmF5KHZhbHVlKSB8fCBpc0FyZ3VtZW50cyh2YWx1ZSkpXG4gICAgPyBiYXNlVGltZXModmFsdWUubGVuZ3RoLCBTdHJpbmcpXG4gICAgOiBbXTtcblxuICB2YXIgbGVuZ3RoID0gcmVzdWx0Lmxlbmd0aCxcbiAgICAgIHNraXBJbmRleGVzID0gISFsZW5ndGg7XG5cbiAgZm9yICh2YXIga2V5IGluIHZhbHVlKSB7XG4gICAgaWYgKChpbmhlcml0ZWQgfHwgaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwga2V5KSkgJiZcbiAgICAgICAgIShza2lwSW5kZXhlcyAmJiAoa2V5ID09ICdsZW5ndGgnIHx8IGlzSW5kZXgoa2V5LCBsZW5ndGgpKSkpIHtcbiAgICAgIHJlc3VsdC5wdXNoKGtleSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ua2V5c2Agd2hpY2ggZG9lc24ndCB0cmVhdCBzcGFyc2UgYXJyYXlzIGFzIGRlbnNlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuICovXG5mdW5jdGlvbiBiYXNlS2V5cyhvYmplY3QpIHtcbiAgaWYgKCFpc1Byb3RvdHlwZShvYmplY3QpKSB7XG4gICAgcmV0dXJuIG5hdGl2ZUtleXMob2JqZWN0KTtcbiAgfVxuICB2YXIgcmVzdWx0ID0gW107XG4gIGZvciAodmFyIGtleSBpbiBPYmplY3Qob2JqZWN0KSkge1xuICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSAmJiBrZXkgIT0gJ2NvbnN0cnVjdG9yJykge1xuICAgICAgcmVzdWx0LnB1c2goa2V5KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgaW5kZXguXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGg9TUFYX1NBRkVfSU5URUdFUl0gVGhlIHVwcGVyIGJvdW5kcyBvZiBhIHZhbGlkIGluZGV4LlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBpbmRleCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0luZGV4KHZhbHVlLCBsZW5ndGgpIHtcbiAgbGVuZ3RoID0gbGVuZ3RoID09IG51bGwgPyBNQVhfU0FGRV9JTlRFR0VSIDogbGVuZ3RoO1xuICByZXR1cm4gISFsZW5ndGggJiZcbiAgICAodHlwZW9mIHZhbHVlID09ICdudW1iZXInIHx8IHJlSXNVaW50LnRlc3QodmFsdWUpKSAmJlxuICAgICh2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDwgbGVuZ3RoKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBsaWtlbHkgYSBwcm90b3R5cGUgb2JqZWN0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcHJvdG90eXBlLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzUHJvdG90eXBlKHZhbHVlKSB7XG4gIHZhciBDdG9yID0gdmFsdWUgJiYgdmFsdWUuY29uc3RydWN0b3IsXG4gICAgICBwcm90byA9ICh0eXBlb2YgQ3RvciA9PSAnZnVuY3Rpb24nICYmIEN0b3IucHJvdG90eXBlKSB8fCBvYmplY3RQcm90bztcblxuICByZXR1cm4gdmFsdWUgPT09IHByb3RvO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGluIGBjb2xsZWN0aW9uYC4gSWYgYGNvbGxlY3Rpb25gIGlzIGEgc3RyaW5nLCBpdCdzXG4gKiBjaGVja2VkIGZvciBhIHN1YnN0cmluZyBvZiBgdmFsdWVgLCBvdGhlcndpc2VcbiAqIFtgU2FtZVZhbHVlWmVyb2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXNhbWV2YWx1ZXplcm8pXG4gKiBpcyB1c2VkIGZvciBlcXVhbGl0eSBjb21wYXJpc29ucy4gSWYgYGZyb21JbmRleGAgaXMgbmVnYXRpdmUsIGl0J3MgdXNlZCBhc1xuICogdGhlIG9mZnNldCBmcm9tIHRoZSBlbmQgb2YgYGNvbGxlY3Rpb25gLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaW5zcGVjdC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNlYXJjaCBmb3IuXG4gKiBAcGFyYW0ge251bWJlcn0gW2Zyb21JbmRleD0wXSBUaGUgaW5kZXggdG8gc2VhcmNoIGZyb20uXG4gKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gRW5hYmxlcyB1c2UgYXMgYW4gaXRlcmF0ZWUgZm9yIG1ldGhvZHMgbGlrZSBgXy5yZWR1Y2VgLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgZm91bmQsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pbmNsdWRlcyhbMSwgMiwgM10sIDEpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaW5jbHVkZXMoWzEsIDIsIDNdLCAxLCAyKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pbmNsdWRlcyh7ICdhJzogMSwgJ2InOiAyIH0sIDEpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaW5jbHVkZXMoJ2FiY2QnLCAnYmMnKTtcbiAqIC8vID0+IHRydWVcbiAqL1xuZnVuY3Rpb24gaW5jbHVkZXMoY29sbGVjdGlvbiwgdmFsdWUsIGZyb21JbmRleCwgZ3VhcmQpIHtcbiAgY29sbGVjdGlvbiA9IGlzQXJyYXlMaWtlKGNvbGxlY3Rpb24pID8gY29sbGVjdGlvbiA6IHZhbHVlcyhjb2xsZWN0aW9uKTtcbiAgZnJvbUluZGV4ID0gKGZyb21JbmRleCAmJiAhZ3VhcmQpID8gdG9JbnRlZ2VyKGZyb21JbmRleCkgOiAwO1xuXG4gIHZhciBsZW5ndGggPSBjb2xsZWN0aW9uLmxlbmd0aDtcbiAgaWYgKGZyb21JbmRleCA8IDApIHtcbiAgICBmcm9tSW5kZXggPSBuYXRpdmVNYXgobGVuZ3RoICsgZnJvbUluZGV4LCAwKTtcbiAgfVxuICByZXR1cm4gaXNTdHJpbmcoY29sbGVjdGlvbilcbiAgICA/IChmcm9tSW5kZXggPD0gbGVuZ3RoICYmIGNvbGxlY3Rpb24uaW5kZXhPZih2YWx1ZSwgZnJvbUluZGV4KSA+IC0xKVxuICAgIDogKCEhbGVuZ3RoICYmIGJhc2VJbmRleE9mKGNvbGxlY3Rpb24sIHZhbHVlLCBmcm9tSW5kZXgpID4gLTEpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGxpa2VseSBhbiBgYXJndW1lbnRzYCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gYGFyZ3VtZW50c2Agb2JqZWN0LFxuICogIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0FyZ3VtZW50cyhmdW5jdGlvbigpIHsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJndW1lbnRzKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FyZ3VtZW50cyh2YWx1ZSkge1xuICAvLyBTYWZhcmkgOC4xIG1ha2VzIGBhcmd1bWVudHMuY2FsbGVlYCBlbnVtZXJhYmxlIGluIHN0cmljdCBtb2RlLlxuICByZXR1cm4gaXNBcnJheUxpa2VPYmplY3QodmFsdWUpICYmIGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsICdjYWxsZWUnKSAmJlxuICAgICghcHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh2YWx1ZSwgJ2NhbGxlZScpIHx8IG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IGFyZ3NUYWcpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYW4gYEFycmF5YCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gYXJyYXksIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0FycmF5KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5KGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzQXJyYXkoJ2FiYycpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzQXJyYXkoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLiBBIHZhbHVlIGlzIGNvbnNpZGVyZWQgYXJyYXktbGlrZSBpZiBpdCdzXG4gKiBub3QgYSBmdW5jdGlvbiBhbmQgaGFzIGEgYHZhbHVlLmxlbmd0aGAgdGhhdCdzIGFuIGludGVnZXIgZ3JlYXRlciB0aGFuIG9yXG4gKiBlcXVhbCB0byBgMGAgYW5kIGxlc3MgdGhhbiBvciBlcXVhbCB0byBgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0FycmF5TGlrZShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheUxpa2UoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5TGlrZSgnYWJjJyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheUxpa2UodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgaXNMZW5ndGgodmFsdWUubGVuZ3RoKSAmJiAhaXNGdW5jdGlvbih2YWx1ZSk7XG59XG5cbi8qKlxuICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5pc0FycmF5TGlrZWAgZXhjZXB0IHRoYXQgaXQgYWxzbyBjaGVja3MgaWYgYHZhbHVlYFxuICogaXMgYW4gb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIGFycmF5LWxpa2Ugb2JqZWN0LFxuICogIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0FycmF5TGlrZU9iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheUxpa2VPYmplY3QoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5TGlrZU9iamVjdCgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNBcnJheUxpa2VPYmplY3QoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXlMaWtlT2JqZWN0KHZhbHVlKSB7XG4gIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGlzQXJyYXlMaWtlKHZhbHVlKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYEZ1bmN0aW9uYCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBmdW5jdGlvbiwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzRnVuY3Rpb24oXyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0Z1bmN0aW9uKC9hYmMvKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHtcbiAgLy8gVGhlIHVzZSBvZiBgT2JqZWN0I3RvU3RyaW5nYCBhdm9pZHMgaXNzdWVzIHdpdGggdGhlIGB0eXBlb2ZgIG9wZXJhdG9yXG4gIC8vIGluIFNhZmFyaSA4LTkgd2hpY2ggcmV0dXJucyAnb2JqZWN0JyBmb3IgdHlwZWQgYXJyYXkgYW5kIG90aGVyIGNvbnN0cnVjdG9ycy5cbiAgdmFyIHRhZyA9IGlzT2JqZWN0KHZhbHVlKSA/IG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpIDogJyc7XG4gIHJldHVybiB0YWcgPT0gZnVuY1RhZyB8fCB0YWcgPT0gZ2VuVGFnO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBsZW5ndGguXG4gKlxuICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIGxvb3NlbHkgYmFzZWQgb25cbiAqIFtgVG9MZW5ndGhgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy10b2xlbmd0aCkuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBsZW5ndGgsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0xlbmd0aCgzKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzTGVuZ3RoKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzTGVuZ3RoKEluZmluaXR5KTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc0xlbmd0aCgnMycpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNMZW5ndGgodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyAmJlxuICAgIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGVcbiAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcylcbiAqIG9mIGBPYmplY3RgLiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdCh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoXy5ub29wKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgXG4gKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdExpa2Uoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc09iamVjdExpa2UobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgU3RyaW5nYCBwcmltaXRpdmUgb3Igb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBzaW5jZSAwLjEuMFxuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgc3RyaW5nLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNTdHJpbmcoJ2FiYycpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNTdHJpbmcoMSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N0cmluZyh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzdHJpbmcnIHx8XG4gICAgKCFpc0FycmF5KHZhbHVlKSAmJiBpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN0cmluZ1RhZyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTeW1ib2xgIHByaW1pdGl2ZSBvciBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBzeW1ib2wsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc1N5bWJvbChTeW1ib2wuaXRlcmF0b3IpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNTeW1ib2woJ2FiYycpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTeW1ib2wodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnc3ltYm9sJyB8fFxuICAgIChpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN5bWJvbFRhZyk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIGZpbml0ZSBudW1iZXIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjEyLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb252ZXJ0LlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgY29udmVydGVkIG51bWJlci5cbiAqIEBleGFtcGxlXG4gKlxuICogXy50b0Zpbml0ZSgzLjIpO1xuICogLy8gPT4gMy4yXG4gKlxuICogXy50b0Zpbml0ZShOdW1iZXIuTUlOX1ZBTFVFKTtcbiAqIC8vID0+IDVlLTMyNFxuICpcbiAqIF8udG9GaW5pdGUoSW5maW5pdHkpO1xuICogLy8gPT4gMS43OTc2OTMxMzQ4NjIzMTU3ZSszMDhcbiAqXG4gKiBfLnRvRmluaXRlKCczLjInKTtcbiAqIC8vID0+IDMuMlxuICovXG5mdW5jdGlvbiB0b0Zpbml0ZSh2YWx1ZSkge1xuICBpZiAoIXZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSAwID8gdmFsdWUgOiAwO1xuICB9XG4gIHZhbHVlID0gdG9OdW1iZXIodmFsdWUpO1xuICBpZiAodmFsdWUgPT09IElORklOSVRZIHx8IHZhbHVlID09PSAtSU5GSU5JVFkpIHtcbiAgICB2YXIgc2lnbiA9ICh2YWx1ZSA8IDAgPyAtMSA6IDEpO1xuICAgIHJldHVybiBzaWduICogTUFYX0lOVEVHRVI7XG4gIH1cbiAgcmV0dXJuIHZhbHVlID09PSB2YWx1ZSA/IHZhbHVlIDogMDtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGFuIGludGVnZXIuXG4gKlxuICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIGxvb3NlbHkgYmFzZWQgb25cbiAqIFtgVG9JbnRlZ2VyYF0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXRvaW50ZWdlcikuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgaW50ZWdlci5cbiAqIEBleGFtcGxlXG4gKlxuICogXy50b0ludGVnZXIoMy4yKTtcbiAqIC8vID0+IDNcbiAqXG4gKiBfLnRvSW50ZWdlcihOdW1iZXIuTUlOX1ZBTFVFKTtcbiAqIC8vID0+IDBcbiAqXG4gKiBfLnRvSW50ZWdlcihJbmZpbml0eSk7XG4gKiAvLyA9PiAxLjc5NzY5MzEzNDg2MjMxNTdlKzMwOFxuICpcbiAqIF8udG9JbnRlZ2VyKCczLjInKTtcbiAqIC8vID0+IDNcbiAqL1xuZnVuY3Rpb24gdG9JbnRlZ2VyKHZhbHVlKSB7XG4gIHZhciByZXN1bHQgPSB0b0Zpbml0ZSh2YWx1ZSksXG4gICAgICByZW1haW5kZXIgPSByZXN1bHQgJSAxO1xuXG4gIHJldHVybiByZXN1bHQgPT09IHJlc3VsdCA/IChyZW1haW5kZXIgPyByZXN1bHQgLSByZW1haW5kZXIgOiByZXN1bHQpIDogMDtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgbnVtYmVyLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgbnVtYmVyLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRvTnVtYmVyKDMuMik7XG4gKiAvLyA9PiAzLjJcbiAqXG4gKiBfLnRvTnVtYmVyKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gNWUtMzI0XG4gKlxuICogXy50b051bWJlcihJbmZpbml0eSk7XG4gKiAvLyA9PiBJbmZpbml0eVxuICpcbiAqIF8udG9OdW1iZXIoJzMuMicpO1xuICogLy8gPT4gMy4yXG4gKi9cbmZ1bmN0aW9uIHRvTnVtYmVyKHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKGlzU3ltYm9sKHZhbHVlKSkge1xuICAgIHJldHVybiBOQU47XG4gIH1cbiAgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgIHZhciBvdGhlciA9IHR5cGVvZiB2YWx1ZS52YWx1ZU9mID09ICdmdW5jdGlvbicgPyB2YWx1ZS52YWx1ZU9mKCkgOiB2YWx1ZTtcbiAgICB2YWx1ZSA9IGlzT2JqZWN0KG90aGVyKSA/IChvdGhlciArICcnKSA6IG90aGVyO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IDAgPyB2YWx1ZSA6ICt2YWx1ZTtcbiAgfVxuICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UocmVUcmltLCAnJyk7XG4gIHZhciBpc0JpbmFyeSA9IHJlSXNCaW5hcnkudGVzdCh2YWx1ZSk7XG4gIHJldHVybiAoaXNCaW5hcnkgfHwgcmVJc09jdGFsLnRlc3QodmFsdWUpKVxuICAgID8gZnJlZVBhcnNlSW50KHZhbHVlLnNsaWNlKDIpLCBpc0JpbmFyeSA/IDIgOiA4KVxuICAgIDogKHJlSXNCYWRIZXgudGVzdCh2YWx1ZSkgPyBOQU4gOiArdmFsdWUpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdGhlIG93biBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIGBvYmplY3RgLlxuICpcbiAqICoqTm90ZToqKiBOb24tb2JqZWN0IHZhbHVlcyBhcmUgY29lcmNlZCB0byBvYmplY3RzLiBTZWUgdGhlXG4gKiBbRVMgc3BlY10oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LmtleXMpXG4gKiBmb3IgbW9yZSBkZXRhaWxzLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBzaW5jZSAwLjEuMFxuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBPYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG4gKiBAZXhhbXBsZVxuICpcbiAqIGZ1bmN0aW9uIEZvbygpIHtcbiAqICAgdGhpcy5hID0gMTtcbiAqICAgdGhpcy5iID0gMjtcbiAqIH1cbiAqXG4gKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuICpcbiAqIF8ua2V5cyhuZXcgRm9vKTtcbiAqIC8vID0+IFsnYScsICdiJ10gKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcbiAqXG4gKiBfLmtleXMoJ2hpJyk7XG4gKiAvLyA9PiBbJzAnLCAnMSddXG4gKi9cbmZ1bmN0aW9uIGtleXMob2JqZWN0KSB7XG4gIHJldHVybiBpc0FycmF5TGlrZShvYmplY3QpID8gYXJyYXlMaWtlS2V5cyhvYmplY3QpIDogYmFzZUtleXMob2JqZWN0KTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBvd24gZW51bWVyYWJsZSBzdHJpbmcga2V5ZWQgcHJvcGVydHkgdmFsdWVzIG9mIGBvYmplY3RgLlxuICpcbiAqICoqTm90ZToqKiBOb24tb2JqZWN0IHZhbHVlcyBhcmUgY29lcmNlZCB0byBvYmplY3RzLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBzaW5jZSAwLjEuMFxuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBPYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgdmFsdWVzLlxuICogQGV4YW1wbGVcbiAqXG4gKiBmdW5jdGlvbiBGb28oKSB7XG4gKiAgIHRoaXMuYSA9IDE7XG4gKiAgIHRoaXMuYiA9IDI7XG4gKiB9XG4gKlxuICogRm9vLnByb3RvdHlwZS5jID0gMztcbiAqXG4gKiBfLnZhbHVlcyhuZXcgRm9vKTtcbiAqIC8vID0+IFsxLCAyXSAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuICpcbiAqIF8udmFsdWVzKCdoaScpO1xuICogLy8gPT4gWydoJywgJ2knXVxuICovXG5mdW5jdGlvbiB2YWx1ZXMob2JqZWN0KSB7XG4gIHJldHVybiBvYmplY3QgPyBiYXNlVmFsdWVzKG9iamVjdCwga2V5cyhvYmplY3QpKSA6IFtdO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGluY2x1ZGVzO1xuIiwgIi8qKlxuICogbG9kYXNoIDMuMC4zIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgMjAxMi0yMDE2IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCAyMDA5LTIwMTYgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKi9cblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIGJvb2xUYWcgPSAnW29iamVjdCBCb29sZWFuXSc7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZSBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGJvb2xlYW4gcHJpbWl0aXZlIG9yIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0Jvb2xlYW4oZmFsc2UpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNCb29sZWFuKG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNCb29sZWFuKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA9PT0gdHJ1ZSB8fCB2YWx1ZSA9PT0gZmFsc2UgfHxcbiAgICAoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBib29sVGFnKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGBcbiAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdExpa2Uoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc09iamVjdExpa2UobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzQm9vbGVhbjtcbiIsICIvKipcbiAqIGxvZGFzaCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMgPGh0dHBzOi8vanF1ZXJ5Lm9yZy8+XG4gKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKi9cblxuLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG52YXIgSU5GSU5JVFkgPSAxIC8gMCxcbiAgICBNQVhfSU5URUdFUiA9IDEuNzk3NjkzMTM0ODYyMzE1N2UrMzA4LFxuICAgIE5BTiA9IDAgLyAwO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgc3ltYm9sVGFnID0gJ1tvYmplY3QgU3ltYm9sXSc7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UuICovXG52YXIgcmVUcmltID0gL15cXHMrfFxccyskL2c7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBiYWQgc2lnbmVkIGhleGFkZWNpbWFsIHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc0JhZEhleCA9IC9eWy0rXTB4WzAtOWEtZl0rJC9pO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgYmluYXJ5IHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc0JpbmFyeSA9IC9eMGJbMDFdKyQvaTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IG9jdGFsIHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc09jdGFsID0gL14wb1swLTddKyQvaTtcblxuLyoqIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHdpdGhvdXQgYSBkZXBlbmRlbmN5IG9uIGByb290YC4gKi9cbnZhciBmcmVlUGFyc2VJbnQgPSBwYXJzZUludDtcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYW4gaW50ZWdlci5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgYmFzZWQgb25cbiAqIFtgTnVtYmVyLmlzSW50ZWdlcmBdKGh0dHBzOi8vbWRuLmlvL051bWJlci9pc0ludGVnZXIpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIGludGVnZXIsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0ludGVnZXIoMyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0ludGVnZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNJbnRlZ2VyKEluZmluaXR5KTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc0ludGVnZXIoJzMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzSW50ZWdlcih2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdudW1iZXInICYmIHZhbHVlID09IHRvSW50ZWdlcih2YWx1ZSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlXG4gKiBbbGFuZ3VhZ2UgdHlwZV0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLWVjbWFzY3JpcHQtbGFuZ3VhZ2UtdHlwZXMpXG4gKiBvZiBgT2JqZWN0YC4gKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3Qoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KF8ubm9vcCk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFN5bWJvbGAgcHJpbWl0aXZlIG9yIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHN5bWJvbCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzU3ltYm9sKFN5bWJvbC5pdGVyYXRvcik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1N5bWJvbCgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N5bWJvbCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzeW1ib2wnIHx8XG4gICAgKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3ltYm9sVGFnKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgZmluaXRlIG51bWJlci5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMTIuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgbnVtYmVyLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRvRmluaXRlKDMuMik7XG4gKiAvLyA9PiAzLjJcbiAqXG4gKiBfLnRvRmluaXRlKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gNWUtMzI0XG4gKlxuICogXy50b0Zpbml0ZShJbmZpbml0eSk7XG4gKiAvLyA9PiAxLjc5NzY5MzEzNDg2MjMxNTdlKzMwOFxuICpcbiAqIF8udG9GaW5pdGUoJzMuMicpO1xuICogLy8gPT4gMy4yXG4gKi9cbmZ1bmN0aW9uIHRvRmluaXRlKHZhbHVlKSB7XG4gIGlmICghdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IDAgPyB2YWx1ZSA6IDA7XG4gIH1cbiAgdmFsdWUgPSB0b051bWJlcih2YWx1ZSk7XG4gIGlmICh2YWx1ZSA9PT0gSU5GSU5JVFkgfHwgdmFsdWUgPT09IC1JTkZJTklUWSkge1xuICAgIHZhciBzaWduID0gKHZhbHVlIDwgMCA/IC0xIDogMSk7XG4gICAgcmV0dXJuIHNpZ24gKiBNQVhfSU5URUdFUjtcbiAgfVxuICByZXR1cm4gdmFsdWUgPT09IHZhbHVlID8gdmFsdWUgOiAwO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYW4gaW50ZWdlci5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgbG9vc2VseSBiYXNlZCBvblxuICogW2BUb0ludGVnZXJgXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtdG9pbnRlZ2VyKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBpbnRlZ2VyLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRvSW50ZWdlcigzLjIpO1xuICogLy8gPT4gM1xuICpcbiAqIF8udG9JbnRlZ2VyKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gMFxuICpcbiAqIF8udG9JbnRlZ2VyKEluZmluaXR5KTtcbiAqIC8vID0+IDEuNzk3NjkzMTM0ODYyMzE1N2UrMzA4XG4gKlxuICogXy50b0ludGVnZXIoJzMuMicpO1xuICogLy8gPT4gM1xuICovXG5mdW5jdGlvbiB0b0ludGVnZXIodmFsdWUpIHtcbiAgdmFyIHJlc3VsdCA9IHRvRmluaXRlKHZhbHVlKSxcbiAgICAgIHJlbWFpbmRlciA9IHJlc3VsdCAlIDE7XG5cbiAgcmV0dXJuIHJlc3VsdCA9PT0gcmVzdWx0ID8gKHJlbWFpbmRlciA/IHJlc3VsdCAtIHJlbWFpbmRlciA6IHJlc3VsdCkgOiAwO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBudW1iZXIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBudW1iZXIuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udG9OdW1iZXIoMy4yKTtcbiAqIC8vID0+IDMuMlxuICpcbiAqIF8udG9OdW1iZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiA1ZS0zMjRcbiAqXG4gKiBfLnRvTnVtYmVyKEluZmluaXR5KTtcbiAqIC8vID0+IEluZmluaXR5XG4gKlxuICogXy50b051bWJlcignMy4yJyk7XG4gKiAvLyA9PiAzLjJcbiAqL1xuZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgcmV0dXJuIE5BTjtcbiAgfVxuICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgdmFyIG90aGVyID0gdHlwZW9mIHZhbHVlLnZhbHVlT2YgPT0gJ2Z1bmN0aW9uJyA/IHZhbHVlLnZhbHVlT2YoKSA6IHZhbHVlO1xuICAgIHZhbHVlID0gaXNPYmplY3Qob3RoZXIpID8gKG90aGVyICsgJycpIDogb3RoZXI7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogK3ZhbHVlO1xuICB9XG4gIHZhbHVlID0gdmFsdWUucmVwbGFjZShyZVRyaW0sICcnKTtcbiAgdmFyIGlzQmluYXJ5ID0gcmVJc0JpbmFyeS50ZXN0KHZhbHVlKTtcbiAgcmV0dXJuIChpc0JpbmFyeSB8fCByZUlzT2N0YWwudGVzdCh2YWx1ZSkpXG4gICAgPyBmcmVlUGFyc2VJbnQodmFsdWUuc2xpY2UoMiksIGlzQmluYXJ5ID8gMiA6IDgpXG4gICAgOiAocmVJc0JhZEhleC50ZXN0KHZhbHVlKSA/IE5BTiA6ICt2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNJbnRlZ2VyO1xuIiwgIi8qKlxuICogbG9kYXNoIDMuMC4zIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgMjAxMi0yMDE2IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCAyMDA5LTIwMTYgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKi9cblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIG51bWJlclRhZyA9ICdbb2JqZWN0IE51bWJlcl0nO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBOdW1iZXJgIHByaW1pdGl2ZSBvciBvYmplY3QuXG4gKlxuICogKipOb3RlOioqIFRvIGV4Y2x1ZGUgYEluZmluaXR5YCwgYC1JbmZpbml0eWAsIGFuZCBgTmFOYCwgd2hpY2ggYXJlIGNsYXNzaWZpZWRcbiAqIGFzIG51bWJlcnMsIHVzZSB0aGUgYF8uaXNGaW5pdGVgIG1ldGhvZC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc051bWJlcigzKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzTnVtYmVyKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNOdW1iZXIoSW5maW5pdHkpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNOdW1iZXIoJzMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzTnVtYmVyKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgfHxcbiAgICAoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBudW1iZXJUYWcpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzTnVtYmVyO1xuIiwgIi8qKlxuICogbG9kYXNoIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyA8aHR0cHM6Ly9qcXVlcnkub3JnLz5cbiAqIFJlbGVhc2VkIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqL1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0VGFnID0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBob3N0IG9iamVjdCBpbiBJRSA8IDkuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBob3N0IG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0hvc3RPYmplY3QodmFsdWUpIHtcbiAgLy8gTWFueSBob3N0IG9iamVjdHMgYXJlIGBPYmplY3RgIG9iamVjdHMgdGhhdCBjYW4gY29lcmNlIHRvIHN0cmluZ3NcbiAgLy8gZGVzcGl0ZSBoYXZpbmcgaW1wcm9wZXJseSBkZWZpbmVkIGB0b1N0cmluZ2AgbWV0aG9kcy5cbiAgdmFyIHJlc3VsdCA9IGZhbHNlO1xuICBpZiAodmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUudG9TdHJpbmcgIT0gJ2Z1bmN0aW9uJykge1xuICAgIHRyeSB7XG4gICAgICByZXN1bHQgPSAhISh2YWx1ZSArICcnKTtcbiAgICB9IGNhdGNoIChlKSB7fVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHVuYXJ5IGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBgZnVuY2Agd2l0aCBpdHMgYXJndW1lbnQgdHJhbnNmb3JtZWQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHdyYXAuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSB0cmFuc2Zvcm0gVGhlIGFyZ3VtZW50IHRyYW5zZm9ybS5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBvdmVyQXJnKGZ1bmMsIHRyYW5zZm9ybSkge1xuICByZXR1cm4gZnVuY3Rpb24oYXJnKSB7XG4gICAgcmV0dXJuIGZ1bmModHJhbnNmb3JtKGFyZykpO1xuICB9O1xufVxuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgZnVuY1Byb3RvID0gRnVuY3Rpb24ucHJvdG90eXBlLFxuICAgIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgZGVjb21waWxlZCBzb3VyY2Ugb2YgZnVuY3Rpb25zLiAqL1xudmFyIGZ1bmNUb1N0cmluZyA9IGZ1bmNQcm90by50b1N0cmluZztcblxuLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqIFVzZWQgdG8gaW5mZXIgdGhlIGBPYmplY3RgIGNvbnN0cnVjdG9yLiAqL1xudmFyIG9iamVjdEN0b3JTdHJpbmcgPSBmdW5jVG9TdHJpbmcuY2FsbChPYmplY3QpO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG52YXIgZ2V0UHJvdG90eXBlID0gb3ZlckFyZyhPYmplY3QuZ2V0UHJvdG90eXBlT2YsIE9iamVjdCk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgXG4gKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdExpa2Uoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc09iamVjdExpa2UobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgcGxhaW4gb2JqZWN0LCB0aGF0IGlzLCBhbiBvYmplY3QgY3JlYXRlZCBieSB0aGVcbiAqIGBPYmplY3RgIGNvbnN0cnVjdG9yIG9yIG9uZSB3aXRoIGEgYFtbUHJvdG90eXBlXV1gIG9mIGBudWxsYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuOC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHBsYWluIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBmdW5jdGlvbiBGb28oKSB7XG4gKiAgIHRoaXMuYSA9IDE7XG4gKiB9XG4gKlxuICogXy5pc1BsYWluT2JqZWN0KG5ldyBGb28pO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzUGxhaW5PYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc1BsYWluT2JqZWN0KHsgJ3gnOiAwLCAneSc6IDAgfSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1BsYWluT2JqZWN0KE9iamVjdC5jcmVhdGUobnVsbCkpO1xuICogLy8gPT4gdHJ1ZVxuICovXG5mdW5jdGlvbiBpc1BsYWluT2JqZWN0KHZhbHVlKSB7XG4gIGlmICghaXNPYmplY3RMaWtlKHZhbHVlKSB8fFxuICAgICAgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgIT0gb2JqZWN0VGFnIHx8IGlzSG9zdE9iamVjdCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIHByb3RvID0gZ2V0UHJvdG90eXBlKHZhbHVlKTtcbiAgaWYgKHByb3RvID09PSBudWxsKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgdmFyIEN0b3IgPSBoYXNPd25Qcm9wZXJ0eS5jYWxsKHByb3RvLCAnY29uc3RydWN0b3InKSAmJiBwcm90by5jb25zdHJ1Y3RvcjtcbiAgcmV0dXJuICh0eXBlb2YgQ3RvciA9PSAnZnVuY3Rpb24nICYmXG4gICAgQ3RvciBpbnN0YW5jZW9mIEN0b3IgJiYgZnVuY1RvU3RyaW5nLmNhbGwoQ3RvcikgPT0gb2JqZWN0Q3RvclN0cmluZyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNQbGFpbk9iamVjdDtcbiIsICIvKipcbiAqIGxvZGFzaCA0LjAuMSAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IDIwMTItMjAxNiBUaGUgRG9qbyBGb3VuZGF0aW9uIDxodHRwOi8vZG9qb2ZvdW5kYXRpb24ub3JnLz5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgMjAwOS0yMDE2IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKiBBdmFpbGFibGUgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICovXG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBzdHJpbmdUYWcgPSAnW29iamVjdCBTdHJpbmddJztcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGFuIGBBcnJheWAgb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAdHlwZSBGdW5jdGlvblxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0FycmF5KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5KGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzQXJyYXkoJ2FiYycpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzQXJyYXkoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGBcbiAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdExpa2Uoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc09iamVjdExpa2UobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgU3RyaW5nYCBwcmltaXRpdmUgb3Igb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzU3RyaW5nKCdhYmMnKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzU3RyaW5nKDEpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTdHJpbmcodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJyB8fFxuICAgICghaXNBcnJheSh2YWx1ZSkgJiYgaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzdHJpbmdUYWcpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzU3RyaW5nO1xuIiwgIi8qKlxuICogbG9kYXNoIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyA8aHR0cHM6Ly9qcXVlcnkub3JnLz5cbiAqIFJlbGVhc2VkIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqL1xuXG4vKiogVXNlZCBhcyB0aGUgYFR5cGVFcnJvcmAgbWVzc2FnZSBmb3IgXCJGdW5jdGlvbnNcIiBtZXRob2RzLiAqL1xudmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblxuLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG52YXIgSU5GSU5JVFkgPSAxIC8gMCxcbiAgICBNQVhfSU5URUdFUiA9IDEuNzk3NjkzMTM0ODYyMzE1N2UrMzA4LFxuICAgIE5BTiA9IDAgLyAwO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgc3ltYm9sVGFnID0gJ1tvYmplY3QgU3ltYm9sXSc7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UuICovXG52YXIgcmVUcmltID0gL15cXHMrfFxccyskL2c7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBiYWQgc2lnbmVkIGhleGFkZWNpbWFsIHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc0JhZEhleCA9IC9eWy0rXTB4WzAtOWEtZl0rJC9pO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgYmluYXJ5IHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc0JpbmFyeSA9IC9eMGJbMDFdKyQvaTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IG9jdGFsIHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc09jdGFsID0gL14wb1swLTddKyQvaTtcblxuLyoqIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHdpdGhvdXQgYSBkZXBlbmRlbmN5IG9uIGByb290YC4gKi9cbnZhciBmcmVlUGFyc2VJbnQgPSBwYXJzZUludDtcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBgZnVuY2AsIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIGFuZCBhcmd1bWVudHNcbiAqIG9mIHRoZSBjcmVhdGVkIGZ1bmN0aW9uLCB3aGlsZSBpdCdzIGNhbGxlZCBsZXNzIHRoYW4gYG5gIHRpbWVzLiBTdWJzZXF1ZW50XG4gKiBjYWxscyB0byB0aGUgY3JlYXRlZCBmdW5jdGlvbiByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2AgaW52b2NhdGlvbi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDMuMC4wXG4gKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBudW1iZXIgb2YgY2FsbHMgYXQgd2hpY2ggYGZ1bmNgIGlzIG5vIGxvbmdlciBpbnZva2VkLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gcmVzdHJpY3QuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyByZXN0cmljdGVkIGZ1bmN0aW9uLlxuICogQGV4YW1wbGVcbiAqXG4gKiBqUXVlcnkoZWxlbWVudCkub24oJ2NsaWNrJywgXy5iZWZvcmUoNSwgYWRkQ29udGFjdFRvTGlzdCkpO1xuICogLy8gPT4gQWxsb3dzIGFkZGluZyB1cCB0byA0IGNvbnRhY3RzIHRvIHRoZSBsaXN0LlxuICovXG5mdW5jdGlvbiBiZWZvcmUobiwgZnVuYykge1xuICB2YXIgcmVzdWx0O1xuICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgfVxuICBuID0gdG9JbnRlZ2VyKG4pO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgaWYgKC0tbiA+IDApIHtcbiAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgaWYgKG4gPD0gMSkge1xuICAgICAgZnVuYyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpcyByZXN0cmljdGVkIHRvIGludm9raW5nIGBmdW5jYCBvbmNlLiBSZXBlYXQgY2FsbHNcbiAqIHRvIHRoZSBmdW5jdGlvbiByZXR1cm4gdGhlIHZhbHVlIG9mIHRoZSBmaXJzdCBpbnZvY2F0aW9uLiBUaGUgYGZ1bmNgIGlzXG4gKiBpbnZva2VkIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIGFuZCBhcmd1bWVudHMgb2YgdGhlIGNyZWF0ZWQgZnVuY3Rpb24uXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byByZXN0cmljdC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHJlc3RyaWN0ZWQgZnVuY3Rpb24uXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBpbml0aWFsaXplID0gXy5vbmNlKGNyZWF0ZUFwcGxpY2F0aW9uKTtcbiAqIGluaXRpYWxpemUoKTtcbiAqIGluaXRpYWxpemUoKTtcbiAqIC8vID0+IGBjcmVhdGVBcHBsaWNhdGlvbmAgaXMgaW52b2tlZCBvbmNlXG4gKi9cbmZ1bmN0aW9uIG9uY2UoZnVuYykge1xuICByZXR1cm4gYmVmb3JlKDIsIGZ1bmMpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZVxuICogW2xhbmd1YWdlIHR5cGVdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1lY21hc2NyaXB0LWxhbmd1YWdlLXR5cGVzKVxuICogb2YgYE9iamVjdGAuIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0KHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChfLm5vb3ApO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGBcbiAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTeW1ib2xgIHByaW1pdGl2ZSBvciBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBzeW1ib2wsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc1N5bWJvbChTeW1ib2wuaXRlcmF0b3IpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNTeW1ib2woJ2FiYycpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTeW1ib2wodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnc3ltYm9sJyB8fFxuICAgIChpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN5bWJvbFRhZyk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIGZpbml0ZSBudW1iZXIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjEyLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb252ZXJ0LlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgY29udmVydGVkIG51bWJlci5cbiAqIEBleGFtcGxlXG4gKlxuICogXy50b0Zpbml0ZSgzLjIpO1xuICogLy8gPT4gMy4yXG4gKlxuICogXy50b0Zpbml0ZShOdW1iZXIuTUlOX1ZBTFVFKTtcbiAqIC8vID0+IDVlLTMyNFxuICpcbiAqIF8udG9GaW5pdGUoSW5maW5pdHkpO1xuICogLy8gPT4gMS43OTc2OTMxMzQ4NjIzMTU3ZSszMDhcbiAqXG4gKiBfLnRvRmluaXRlKCczLjInKTtcbiAqIC8vID0+IDMuMlxuICovXG5mdW5jdGlvbiB0b0Zpbml0ZSh2YWx1ZSkge1xuICBpZiAoIXZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSAwID8gdmFsdWUgOiAwO1xuICB9XG4gIHZhbHVlID0gdG9OdW1iZXIodmFsdWUpO1xuICBpZiAodmFsdWUgPT09IElORklOSVRZIHx8IHZhbHVlID09PSAtSU5GSU5JVFkpIHtcbiAgICB2YXIgc2lnbiA9ICh2YWx1ZSA8IDAgPyAtMSA6IDEpO1xuICAgIHJldHVybiBzaWduICogTUFYX0lOVEVHRVI7XG4gIH1cbiAgcmV0dXJuIHZhbHVlID09PSB2YWx1ZSA/IHZhbHVlIDogMDtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGFuIGludGVnZXIuXG4gKlxuICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIGxvb3NlbHkgYmFzZWQgb25cbiAqIFtgVG9JbnRlZ2VyYF0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXRvaW50ZWdlcikuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgaW50ZWdlci5cbiAqIEBleGFtcGxlXG4gKlxuICogXy50b0ludGVnZXIoMy4yKTtcbiAqIC8vID0+IDNcbiAqXG4gKiBfLnRvSW50ZWdlcihOdW1iZXIuTUlOX1ZBTFVFKTtcbiAqIC8vID0+IDBcbiAqXG4gKiBfLnRvSW50ZWdlcihJbmZpbml0eSk7XG4gKiAvLyA9PiAxLjc5NzY5MzEzNDg2MjMxNTdlKzMwOFxuICpcbiAqIF8udG9JbnRlZ2VyKCczLjInKTtcbiAqIC8vID0+IDNcbiAqL1xuZnVuY3Rpb24gdG9JbnRlZ2VyKHZhbHVlKSB7XG4gIHZhciByZXN1bHQgPSB0b0Zpbml0ZSh2YWx1ZSksXG4gICAgICByZW1haW5kZXIgPSByZXN1bHQgJSAxO1xuXG4gIHJldHVybiByZXN1bHQgPT09IHJlc3VsdCA/IChyZW1haW5kZXIgPyByZXN1bHQgLSByZW1haW5kZXIgOiByZXN1bHQpIDogMDtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgbnVtYmVyLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgbnVtYmVyLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRvTnVtYmVyKDMuMik7XG4gKiAvLyA9PiAzLjJcbiAqXG4gKiBfLnRvTnVtYmVyKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gNWUtMzI0XG4gKlxuICogXy50b051bWJlcihJbmZpbml0eSk7XG4gKiAvLyA9PiBJbmZpbml0eVxuICpcbiAqIF8udG9OdW1iZXIoJzMuMicpO1xuICogLy8gPT4gMy4yXG4gKi9cbmZ1bmN0aW9uIHRvTnVtYmVyKHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKGlzU3ltYm9sKHZhbHVlKSkge1xuICAgIHJldHVybiBOQU47XG4gIH1cbiAgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgIHZhciBvdGhlciA9IHR5cGVvZiB2YWx1ZS52YWx1ZU9mID09ICdmdW5jdGlvbicgPyB2YWx1ZS52YWx1ZU9mKCkgOiB2YWx1ZTtcbiAgICB2YWx1ZSA9IGlzT2JqZWN0KG90aGVyKSA/IChvdGhlciArICcnKSA6IG90aGVyO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IDAgPyB2YWx1ZSA6ICt2YWx1ZTtcbiAgfVxuICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UocmVUcmltLCAnJyk7XG4gIHZhciBpc0JpbmFyeSA9IHJlSXNCaW5hcnkudGVzdCh2YWx1ZSk7XG4gIHJldHVybiAoaXNCaW5hcnkgfHwgcmVJc09jdGFsLnRlc3QodmFsdWUpKVxuICAgID8gZnJlZVBhcnNlSW50KHZhbHVlLnNsaWNlKDIpLCBpc0JpbmFyeSA/IDIgOiA4KVxuICAgIDogKHJlSXNCYWRIZXgudGVzdCh2YWx1ZSkgPyBOQU4gOiArdmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG9uY2U7XG4iLCAiY29uc3QgdGltZXNwYW4gPSByZXF1aXJlKCcuL2xpYi90aW1lc3BhbicpO1xuY29uc3QgUFNfU1VQUE9SVEVEID0gcmVxdWlyZSgnLi9saWIvcHNTdXBwb3J0ZWQnKTtcbmNvbnN0IHZhbGlkYXRlQXN5bW1ldHJpY0tleSA9IHJlcXVpcmUoJy4vbGliL3ZhbGlkYXRlQXN5bW1ldHJpY0tleScpO1xuY29uc3QgandzID0gcmVxdWlyZSgnandzJyk7XG5jb25zdCBpbmNsdWRlcyA9IHJlcXVpcmUoJ2xvZGFzaC5pbmNsdWRlcycpO1xuY29uc3QgaXNCb29sZWFuID0gcmVxdWlyZSgnbG9kYXNoLmlzYm9vbGVhbicpO1xuY29uc3QgaXNJbnRlZ2VyID0gcmVxdWlyZSgnbG9kYXNoLmlzaW50ZWdlcicpO1xuY29uc3QgaXNOdW1iZXIgPSByZXF1aXJlKCdsb2Rhc2guaXNudW1iZXInKTtcbmNvbnN0IGlzUGxhaW5PYmplY3QgPSByZXF1aXJlKCdsb2Rhc2guaXNwbGFpbm9iamVjdCcpO1xuY29uc3QgaXNTdHJpbmcgPSByZXF1aXJlKCdsb2Rhc2guaXNzdHJpbmcnKTtcbmNvbnN0IG9uY2UgPSByZXF1aXJlKCdsb2Rhc2gub25jZScpO1xuY29uc3QgeyBLZXlPYmplY3QsIGNyZWF0ZVNlY3JldEtleSwgY3JlYXRlUHJpdmF0ZUtleSB9ID0gcmVxdWlyZSgnY3J5cHRvJylcblxuY29uc3QgU1VQUE9SVEVEX0FMR1MgPSBbJ1JTMjU2JywgJ1JTMzg0JywgJ1JTNTEyJywgJ0VTMjU2JywgJ0VTMzg0JywgJ0VTNTEyJywgJ0hTMjU2JywgJ0hTMzg0JywgJ0hTNTEyJywgJ25vbmUnXTtcbmlmIChQU19TVVBQT1JURUQpIHtcbiAgU1VQUE9SVEVEX0FMR1Muc3BsaWNlKDMsIDAsICdQUzI1NicsICdQUzM4NCcsICdQUzUxMicpO1xufVxuXG5jb25zdCBzaWduX29wdGlvbnNfc2NoZW1hID0ge1xuICBleHBpcmVzSW46IHsgaXNWYWxpZDogZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIGlzSW50ZWdlcih2YWx1ZSkgfHwgKGlzU3RyaW5nKHZhbHVlKSAmJiB2YWx1ZSk7IH0sIG1lc3NhZ2U6ICdcImV4cGlyZXNJblwiIHNob3VsZCBiZSBhIG51bWJlciBvZiBzZWNvbmRzIG9yIHN0cmluZyByZXByZXNlbnRpbmcgYSB0aW1lc3BhbicgfSxcbiAgbm90QmVmb3JlOiB7IGlzVmFsaWQ6IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiBpc0ludGVnZXIodmFsdWUpIHx8IChpc1N0cmluZyh2YWx1ZSkgJiYgdmFsdWUpOyB9LCBtZXNzYWdlOiAnXCJub3RCZWZvcmVcIiBzaG91bGQgYmUgYSBudW1iZXIgb2Ygc2Vjb25kcyBvciBzdHJpbmcgcmVwcmVzZW50aW5nIGEgdGltZXNwYW4nIH0sXG4gIGF1ZGllbmNlOiB7IGlzVmFsaWQ6IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiBpc1N0cmluZyh2YWx1ZSkgfHwgQXJyYXkuaXNBcnJheSh2YWx1ZSk7IH0sIG1lc3NhZ2U6ICdcImF1ZGllbmNlXCIgbXVzdCBiZSBhIHN0cmluZyBvciBhcnJheScgfSxcbiAgYWxnb3JpdGhtOiB7IGlzVmFsaWQ6IGluY2x1ZGVzLmJpbmQobnVsbCwgU1VQUE9SVEVEX0FMR1MpLCBtZXNzYWdlOiAnXCJhbGdvcml0aG1cIiBtdXN0IGJlIGEgdmFsaWQgc3RyaW5nIGVudW0gdmFsdWUnIH0sXG4gIGhlYWRlcjogeyBpc1ZhbGlkOiBpc1BsYWluT2JqZWN0LCBtZXNzYWdlOiAnXCJoZWFkZXJcIiBtdXN0IGJlIGFuIG9iamVjdCcgfSxcbiAgZW5jb2Rpbmc6IHsgaXNWYWxpZDogaXNTdHJpbmcsIG1lc3NhZ2U6ICdcImVuY29kaW5nXCIgbXVzdCBiZSBhIHN0cmluZycgfSxcbiAgaXNzdWVyOiB7IGlzVmFsaWQ6IGlzU3RyaW5nLCBtZXNzYWdlOiAnXCJpc3N1ZXJcIiBtdXN0IGJlIGEgc3RyaW5nJyB9LFxuICBzdWJqZWN0OiB7IGlzVmFsaWQ6IGlzU3RyaW5nLCBtZXNzYWdlOiAnXCJzdWJqZWN0XCIgbXVzdCBiZSBhIHN0cmluZycgfSxcbiAgand0aWQ6IHsgaXNWYWxpZDogaXNTdHJpbmcsIG1lc3NhZ2U6ICdcImp3dGlkXCIgbXVzdCBiZSBhIHN0cmluZycgfSxcbiAgbm9UaW1lc3RhbXA6IHsgaXNWYWxpZDogaXNCb29sZWFuLCBtZXNzYWdlOiAnXCJub1RpbWVzdGFtcFwiIG11c3QgYmUgYSBib29sZWFuJyB9LFxuICBrZXlpZDogeyBpc1ZhbGlkOiBpc1N0cmluZywgbWVzc2FnZTogJ1wia2V5aWRcIiBtdXN0IGJlIGEgc3RyaW5nJyB9LFxuICBtdXRhdGVQYXlsb2FkOiB7IGlzVmFsaWQ6IGlzQm9vbGVhbiwgbWVzc2FnZTogJ1wibXV0YXRlUGF5bG9hZFwiIG11c3QgYmUgYSBib29sZWFuJyB9LFxuICBhbGxvd0luc2VjdXJlS2V5U2l6ZXM6IHsgaXNWYWxpZDogaXNCb29sZWFuLCBtZXNzYWdlOiAnXCJhbGxvd0luc2VjdXJlS2V5U2l6ZXNcIiBtdXN0IGJlIGEgYm9vbGVhbid9LFxuICBhbGxvd0ludmFsaWRBc3ltbWV0cmljS2V5VHlwZXM6IHsgaXNWYWxpZDogaXNCb29sZWFuLCBtZXNzYWdlOiAnXCJhbGxvd0ludmFsaWRBc3ltbWV0cmljS2V5VHlwZXNcIiBtdXN0IGJlIGEgYm9vbGVhbid9XG59O1xuXG5jb25zdCByZWdpc3RlcmVkX2NsYWltc19zY2hlbWEgPSB7XG4gIGlhdDogeyBpc1ZhbGlkOiBpc051bWJlciwgbWVzc2FnZTogJ1wiaWF0XCIgc2hvdWxkIGJlIGEgbnVtYmVyIG9mIHNlY29uZHMnIH0sXG4gIGV4cDogeyBpc1ZhbGlkOiBpc051bWJlciwgbWVzc2FnZTogJ1wiZXhwXCIgc2hvdWxkIGJlIGEgbnVtYmVyIG9mIHNlY29uZHMnIH0sXG4gIG5iZjogeyBpc1ZhbGlkOiBpc051bWJlciwgbWVzc2FnZTogJ1wibmJmXCIgc2hvdWxkIGJlIGEgbnVtYmVyIG9mIHNlY29uZHMnIH1cbn07XG5cbmZ1bmN0aW9uIHZhbGlkYXRlKHNjaGVtYSwgYWxsb3dVbmtub3duLCBvYmplY3QsIHBhcmFtZXRlck5hbWUpIHtcbiAgaWYgKCFpc1BsYWluT2JqZWN0KG9iamVjdCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIFwiJyArIHBhcmFtZXRlck5hbWUgKyAnXCIgdG8gYmUgYSBwbGFpbiBvYmplY3QuJyk7XG4gIH1cbiAgT2JqZWN0LmtleXMob2JqZWN0KVxuICAgIC5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgICAgY29uc3QgdmFsaWRhdG9yID0gc2NoZW1hW2tleV07XG4gICAgICBpZiAoIXZhbGlkYXRvcikge1xuICAgICAgICBpZiAoIWFsbG93VW5rbm93bikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignXCInICsga2V5ICsgJ1wiIGlzIG5vdCBhbGxvd2VkIGluIFwiJyArIHBhcmFtZXRlck5hbWUgKyAnXCInKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoIXZhbGlkYXRvci5pc1ZhbGlkKG9iamVjdFtrZXldKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IodmFsaWRhdG9yLm1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZU9wdGlvbnMob3B0aW9ucykge1xuICByZXR1cm4gdmFsaWRhdGUoc2lnbl9vcHRpb25zX3NjaGVtYSwgZmFsc2UsIG9wdGlvbnMsICdvcHRpb25zJyk7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlUGF5bG9hZChwYXlsb2FkKSB7XG4gIHJldHVybiB2YWxpZGF0ZShyZWdpc3RlcmVkX2NsYWltc19zY2hlbWEsIHRydWUsIHBheWxvYWQsICdwYXlsb2FkJyk7XG59XG5cbmNvbnN0IG9wdGlvbnNfdG9fcGF5bG9hZCA9IHtcbiAgJ2F1ZGllbmNlJzogJ2F1ZCcsXG4gICdpc3N1ZXInOiAnaXNzJyxcbiAgJ3N1YmplY3QnOiAnc3ViJyxcbiAgJ2p3dGlkJzogJ2p0aSdcbn07XG5cbmNvbnN0IG9wdGlvbnNfZm9yX29iamVjdHMgPSBbXG4gICdleHBpcmVzSW4nLFxuICAnbm90QmVmb3JlJyxcbiAgJ25vVGltZXN0YW1wJyxcbiAgJ2F1ZGllbmNlJyxcbiAgJ2lzc3VlcicsXG4gICdzdWJqZWN0JyxcbiAgJ2p3dGlkJyxcbl07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHBheWxvYWQsIHNlY3JldE9yUHJpdmF0ZUtleSwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfSBlbHNlIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgfVxuXG4gIGNvbnN0IGlzT2JqZWN0UGF5bG9hZCA9IHR5cGVvZiBwYXlsb2FkID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgIUJ1ZmZlci5pc0J1ZmZlcihwYXlsb2FkKTtcblxuICBjb25zdCBoZWFkZXIgPSBPYmplY3QuYXNzaWduKHtcbiAgICBhbGc6IG9wdGlvbnMuYWxnb3JpdGhtIHx8ICdIUzI1NicsXG4gICAgdHlwOiBpc09iamVjdFBheWxvYWQgPyAnSldUJyA6IHVuZGVmaW5lZCxcbiAgICBraWQ6IG9wdGlvbnMua2V5aWRcbiAgfSwgb3B0aW9ucy5oZWFkZXIpO1xuXG4gIGZ1bmN0aW9uIGZhaWx1cmUoZXJyKSB7XG4gICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2soZXJyKTtcbiAgICB9XG4gICAgdGhyb3cgZXJyO1xuICB9XG5cbiAgaWYgKCFzZWNyZXRPclByaXZhdGVLZXkgJiYgb3B0aW9ucy5hbGdvcml0aG0gIT09ICdub25lJykge1xuICAgIHJldHVybiBmYWlsdXJlKG5ldyBFcnJvcignc2VjcmV0T3JQcml2YXRlS2V5IG11c3QgaGF2ZSBhIHZhbHVlJykpO1xuICB9XG5cbiAgaWYgKHNlY3JldE9yUHJpdmF0ZUtleSAhPSBudWxsICYmICEoc2VjcmV0T3JQcml2YXRlS2V5IGluc3RhbmNlb2YgS2V5T2JqZWN0KSkge1xuICAgIHRyeSB7XG4gICAgICBzZWNyZXRPclByaXZhdGVLZXkgPSBjcmVhdGVQcml2YXRlS2V5KHNlY3JldE9yUHJpdmF0ZUtleSlcbiAgICB9IGNhdGNoIChfKSB7XG4gICAgICB0cnkge1xuICAgICAgICBzZWNyZXRPclByaXZhdGVLZXkgPSBjcmVhdGVTZWNyZXRLZXkodHlwZW9mIHNlY3JldE9yUHJpdmF0ZUtleSA9PT0gJ3N0cmluZycgPyBCdWZmZXIuZnJvbShzZWNyZXRPclByaXZhdGVLZXkpIDogc2VjcmV0T3JQcml2YXRlS2V5KVxuICAgICAgfSBjYXRjaCAoXykge1xuICAgICAgICByZXR1cm4gZmFpbHVyZShuZXcgRXJyb3IoJ3NlY3JldE9yUHJpdmF0ZUtleSBpcyBub3QgdmFsaWQga2V5IG1hdGVyaWFsJykpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChoZWFkZXIuYWxnLnN0YXJ0c1dpdGgoJ0hTJykgJiYgc2VjcmV0T3JQcml2YXRlS2V5LnR5cGUgIT09ICdzZWNyZXQnKSB7XG4gICAgcmV0dXJuIGZhaWx1cmUobmV3IEVycm9yKChgc2VjcmV0T3JQcml2YXRlS2V5IG11c3QgYmUgYSBzeW1tZXRyaWMga2V5IHdoZW4gdXNpbmcgJHtoZWFkZXIuYWxnfWApKSlcbiAgfSBlbHNlIGlmICgvXig/OlJTfFBTfEVTKS8udGVzdChoZWFkZXIuYWxnKSkge1xuICAgIGlmIChzZWNyZXRPclByaXZhdGVLZXkudHlwZSAhPT0gJ3ByaXZhdGUnKSB7XG4gICAgICByZXR1cm4gZmFpbHVyZShuZXcgRXJyb3IoKGBzZWNyZXRPclByaXZhdGVLZXkgbXVzdCBiZSBhbiBhc3ltbWV0cmljIGtleSB3aGVuIHVzaW5nICR7aGVhZGVyLmFsZ31gKSkpXG4gICAgfVxuICAgIGlmICghb3B0aW9ucy5hbGxvd0luc2VjdXJlS2V5U2l6ZXMgJiZcbiAgICAgICFoZWFkZXIuYWxnLnN0YXJ0c1dpdGgoJ0VTJykgJiZcbiAgICAgIHNlY3JldE9yUHJpdmF0ZUtleS5hc3ltbWV0cmljS2V5RGV0YWlscyAhPT0gdW5kZWZpbmVkICYmIC8vS2V5T2JqZWN0LmFzeW1tZXRyaWNLZXlEZXRhaWxzIGlzIHN1cHBvcnRlZCBpbiBOb2RlIDE1K1xuICAgICAgc2VjcmV0T3JQcml2YXRlS2V5LmFzeW1tZXRyaWNLZXlEZXRhaWxzLm1vZHVsdXNMZW5ndGggPCAyMDQ4KSB7XG4gICAgICByZXR1cm4gZmFpbHVyZShuZXcgRXJyb3IoYHNlY3JldE9yUHJpdmF0ZUtleSBoYXMgYSBtaW5pbXVtIGtleSBzaXplIG9mIDIwNDggYml0cyBmb3IgJHtoZWFkZXIuYWxnfWApKTtcbiAgICB9XG4gIH1cblxuICBpZiAodHlwZW9mIHBheWxvYWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIGZhaWx1cmUobmV3IEVycm9yKCdwYXlsb2FkIGlzIHJlcXVpcmVkJykpO1xuICB9IGVsc2UgaWYgKGlzT2JqZWN0UGF5bG9hZCkge1xuICAgIHRyeSB7XG4gICAgICB2YWxpZGF0ZVBheWxvYWQocGF5bG9hZCk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIGZhaWx1cmUoZXJyb3IpO1xuICAgIH1cbiAgICBpZiAoIW9wdGlvbnMubXV0YXRlUGF5bG9hZCkge1xuICAgICAgcGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oe30scGF5bG9hZCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGNvbnN0IGludmFsaWRfb3B0aW9ucyA9IG9wdGlvbnNfZm9yX29iamVjdHMuZmlsdGVyKGZ1bmN0aW9uIChvcHQpIHtcbiAgICAgIHJldHVybiB0eXBlb2Ygb3B0aW9uc1tvcHRdICE9PSAndW5kZWZpbmVkJztcbiAgICB9KTtcblxuICAgIGlmIChpbnZhbGlkX29wdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIGZhaWx1cmUobmV3IEVycm9yKCdpbnZhbGlkICcgKyBpbnZhbGlkX29wdGlvbnMuam9pbignLCcpICsgJyBvcHRpb24gZm9yICcgKyAodHlwZW9mIHBheWxvYWQgKSArICcgcGF5bG9hZCcpKTtcbiAgICB9XG4gIH1cblxuICBpZiAodHlwZW9mIHBheWxvYWQuZXhwICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygb3B0aW9ucy5leHBpcmVzSW4gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIGZhaWx1cmUobmV3IEVycm9yKCdCYWQgXCJvcHRpb25zLmV4cGlyZXNJblwiIG9wdGlvbiB0aGUgcGF5bG9hZCBhbHJlYWR5IGhhcyBhbiBcImV4cFwiIHByb3BlcnR5LicpKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgcGF5bG9hZC5uYmYgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBvcHRpb25zLm5vdEJlZm9yZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gZmFpbHVyZShuZXcgRXJyb3IoJ0JhZCBcIm9wdGlvbnMubm90QmVmb3JlXCIgb3B0aW9uIHRoZSBwYXlsb2FkIGFscmVhZHkgaGFzIGFuIFwibmJmXCIgcHJvcGVydHkuJykpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICB2YWxpZGF0ZU9wdGlvbnMob3B0aW9ucyk7XG4gIH1cbiAgY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIGZhaWx1cmUoZXJyb3IpO1xuICB9XG5cbiAgaWYgKCFvcHRpb25zLmFsbG93SW52YWxpZEFzeW1tZXRyaWNLZXlUeXBlcykge1xuICAgIHRyeSB7XG4gICAgICB2YWxpZGF0ZUFzeW1tZXRyaWNLZXkoaGVhZGVyLmFsZywgc2VjcmV0T3JQcml2YXRlS2V5KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIGZhaWx1cmUoZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHRpbWVzdGFtcCA9IHBheWxvYWQuaWF0IHx8IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApO1xuXG4gIGlmIChvcHRpb25zLm5vVGltZXN0YW1wKSB7XG4gICAgZGVsZXRlIHBheWxvYWQuaWF0O1xuICB9IGVsc2UgaWYgKGlzT2JqZWN0UGF5bG9hZCkge1xuICAgIHBheWxvYWQuaWF0ID0gdGltZXN0YW1wO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBvcHRpb25zLm5vdEJlZm9yZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB0cnkge1xuICAgICAgcGF5bG9hZC5uYmYgPSB0aW1lc3BhbihvcHRpb25zLm5vdEJlZm9yZSwgdGltZXN0YW1wKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgcmV0dXJuIGZhaWx1cmUoZXJyKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBwYXlsb2FkLm5iZiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVybiBmYWlsdXJlKG5ldyBFcnJvcignXCJub3RCZWZvcmVcIiBzaG91bGQgYmUgYSBudW1iZXIgb2Ygc2Vjb25kcyBvciBzdHJpbmcgcmVwcmVzZW50aW5nIGEgdGltZXNwYW4gZWc6IFwiMWRcIiwgXCIyMGhcIiwgNjAnKSk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHR5cGVvZiBvcHRpb25zLmV4cGlyZXNJbiAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHBheWxvYWQgPT09ICdvYmplY3QnKSB7XG4gICAgdHJ5IHtcbiAgICAgIHBheWxvYWQuZXhwID0gdGltZXNwYW4ob3B0aW9ucy5leHBpcmVzSW4sIHRpbWVzdGFtcCk7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiBmYWlsdXJlKGVycik7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcGF5bG9hZC5leHAgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZXR1cm4gZmFpbHVyZShuZXcgRXJyb3IoJ1wiZXhwaXJlc0luXCIgc2hvdWxkIGJlIGEgbnVtYmVyIG9mIHNlY29uZHMgb3Igc3RyaW5nIHJlcHJlc2VudGluZyBhIHRpbWVzcGFuIGVnOiBcIjFkXCIsIFwiMjBoXCIsIDYwJykpO1xuICAgIH1cbiAgfVxuXG4gIE9iamVjdC5rZXlzKG9wdGlvbnNfdG9fcGF5bG9hZCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgY29uc3QgY2xhaW0gPSBvcHRpb25zX3RvX3BheWxvYWRba2V5XTtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnNba2V5XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmICh0eXBlb2YgcGF5bG9hZFtjbGFpbV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBmYWlsdXJlKG5ldyBFcnJvcignQmFkIFwib3B0aW9ucy4nICsga2V5ICsgJ1wiIG9wdGlvbi4gVGhlIHBheWxvYWQgYWxyZWFkeSBoYXMgYW4gXCInICsgY2xhaW0gKyAnXCIgcHJvcGVydHkuJykpO1xuICAgICAgfVxuICAgICAgcGF5bG9hZFtjbGFpbV0gPSBvcHRpb25zW2tleV07XG4gICAgfVxuICB9KTtcblxuICBjb25zdCBlbmNvZGluZyA9IG9wdGlvbnMuZW5jb2RpbmcgfHwgJ3V0ZjgnO1xuXG4gIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYWxsYmFjayA9IGNhbGxiYWNrICYmIG9uY2UoY2FsbGJhY2spO1xuXG4gICAgandzLmNyZWF0ZVNpZ24oe1xuICAgICAgaGVhZGVyOiBoZWFkZXIsXG4gICAgICBwcml2YXRlS2V5OiBzZWNyZXRPclByaXZhdGVLZXksXG4gICAgICBwYXlsb2FkOiBwYXlsb2FkLFxuICAgICAgZW5jb2Rpbmc6IGVuY29kaW5nXG4gICAgfSkub25jZSgnZXJyb3InLCBjYWxsYmFjaylcbiAgICAgIC5vbmNlKCdkb25lJywgZnVuY3Rpb24gKHNpZ25hdHVyZSkge1xuICAgICAgICAvLyBUT0RPOiBSZW1vdmUgaW4gZmF2b3Igb2YgdGhlIG1vZHVsdXMgbGVuZ3RoIGNoZWNrIGJlZm9yZSBzaWduaW5nIG9uY2Ugbm9kZSAxNSsgaXMgdGhlIG1pbmltdW0gc3VwcG9ydGVkIHZlcnNpb25cbiAgICAgICAgaWYoIW9wdGlvbnMuYWxsb3dJbnNlY3VyZUtleVNpemVzICYmIC9eKD86UlN8UFMpLy50ZXN0KGhlYWRlci5hbGcpICYmIHNpZ25hdHVyZS5sZW5ndGggPCAyNTYpIHtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKGBzZWNyZXRPclByaXZhdGVLZXkgaGFzIGEgbWluaW11bSBrZXkgc2l6ZSBvZiAyMDQ4IGJpdHMgZm9yICR7aGVhZGVyLmFsZ31gKSlcbiAgICAgICAgfVxuICAgICAgICBjYWxsYmFjayhudWxsLCBzaWduYXR1cmUpO1xuICAgICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgbGV0IHNpZ25hdHVyZSA9IGp3cy5zaWduKHtoZWFkZXI6IGhlYWRlciwgcGF5bG9hZDogcGF5bG9hZCwgc2VjcmV0OiBzZWNyZXRPclByaXZhdGVLZXksIGVuY29kaW5nOiBlbmNvZGluZ30pO1xuICAgIC8vIFRPRE86IFJlbW92ZSBpbiBmYXZvciBvZiB0aGUgbW9kdWx1cyBsZW5ndGggY2hlY2sgYmVmb3JlIHNpZ25pbmcgb25jZSBub2RlIDE1KyBpcyB0aGUgbWluaW11bSBzdXBwb3J0ZWQgdmVyc2lvblxuICAgIGlmKCFvcHRpb25zLmFsbG93SW5zZWN1cmVLZXlTaXplcyAmJiAvXig/OlJTfFBTKS8udGVzdChoZWFkZXIuYWxnKSAmJiBzaWduYXR1cmUubGVuZ3RoIDwgMjU2KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYHNlY3JldE9yUHJpdmF0ZUtleSBoYXMgYSBtaW5pbXVtIGtleSBzaXplIG9mIDIwNDggYml0cyBmb3IgJHtoZWFkZXIuYWxnfWApXG4gICAgfVxuICAgIHJldHVybiBzaWduYXR1cmVcbiAgfVxufTtcbiIsICJtb2R1bGUuZXhwb3J0cyA9IHtcbiAgZGVjb2RlOiByZXF1aXJlKCcuL2RlY29kZScpLFxuICB2ZXJpZnk6IHJlcXVpcmUoJy4vdmVyaWZ5JyksXG4gIHNpZ246IHJlcXVpcmUoJy4vc2lnbicpLFxuICBKc29uV2ViVG9rZW5FcnJvcjogcmVxdWlyZSgnLi9saWIvSnNvbldlYlRva2VuRXJyb3InKSxcbiAgTm90QmVmb3JlRXJyb3I6IHJlcXVpcmUoJy4vbGliL05vdEJlZm9yZUVycm9yJyksXG4gIFRva2VuRXhwaXJlZEVycm9yOiByZXF1aXJlKCcuL2xpYi9Ub2tlbkV4cGlyZWRFcnJvcicpLFxufTtcbiIsICJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQ2FsbGJhY2tzUmVnaXN0cnkgPSB2b2lkIDA7XG5jbGFzcyBDYWxsYmFja3NSZWdpc3RyeSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubmV4dElkID0gMDtcbiAgICAgICAgdGhpcy5jYWxsYmFja3MgPSB7fTtcbiAgICAgICAgdGhpcy5jYWxsYmFja0lkcyA9IG5ldyBXZWFrTWFwKCk7XG4gICAgICAgIHRoaXMubG9jYXRpb25JbmZvID0gbmV3IFdlYWtNYXAoKTtcbiAgICB9XG4gICAgYWRkKGNhbGxiYWNrKSB7XG4gICAgICAgIC8vIFRoZSBjYWxsYmFjayBpcyBhbHJlYWR5IGFkZGVkLlxuICAgICAgICBsZXQgaWQgPSB0aGlzLmNhbGxiYWNrSWRzLmdldChjYWxsYmFjayk7XG4gICAgICAgIGlmIChpZCAhPSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIGlkO1xuICAgICAgICBpZCA9IHRoaXMubmV4dElkICs9IDE7XG4gICAgICAgIHRoaXMuY2FsbGJhY2tzW2lkXSA9IGNhbGxiYWNrO1xuICAgICAgICB0aGlzLmNhbGxiYWNrSWRzLnNldChjYWxsYmFjaywgaWQpO1xuICAgICAgICAvLyBDYXB0dXJlIHRoZSBsb2NhdGlvbiBvZiB0aGUgZnVuY3Rpb24gYW5kIHB1dCBpdCBpbiB0aGUgSUQgc3RyaW5nLFxuICAgICAgICAvLyBzbyB0aGF0IHJlbGVhc2UgZXJyb3JzIGNhbiBiZSB0cmFja2VkIGRvd24gZWFzaWx5LlxuICAgICAgICBjb25zdCByZWdleHAgPSAvYXQgKC4qKS9naTtcbiAgICAgICAgY29uc3Qgc3RhY2tTdHJpbmcgPSAobmV3IEVycm9yKCkpLnN0YWNrO1xuICAgICAgICBpZiAoIXN0YWNrU3RyaW5nKVxuICAgICAgICAgICAgcmV0dXJuIGlkO1xuICAgICAgICBsZXQgZmlsZW5hbWVBbmRMaW5lO1xuICAgICAgICBsZXQgbWF0Y2g7XG4gICAgICAgIHdoaWxlICgobWF0Y2ggPSByZWdleHAuZXhlYyhzdGFja1N0cmluZykpICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCBsb2NhdGlvbiA9IG1hdGNoWzFdO1xuICAgICAgICAgICAgaWYgKGxvY2F0aW9uLmluY2x1ZGVzKCcobmF0aXZlKScpKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKGxvY2F0aW9uLmluY2x1ZGVzKCcoPGFub255bW91cz4pJykpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBpZiAobG9jYXRpb24uaW5jbHVkZXMoJ2NhbGxiYWNrcy1yZWdpc3RyeS5qcycpKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKGxvY2F0aW9uLmluY2x1ZGVzKCdyZW1vdGUuanMnKSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGlmIChsb2NhdGlvbi5pbmNsdWRlcygnQGVsZWN0cm9uL3JlbW90ZS9kaXN0JykpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBjb25zdCByZWYgPSAvKFteL14pXSopXFwpPyQvZ2kuZXhlYyhsb2NhdGlvbik7XG4gICAgICAgICAgICBpZiAocmVmKVxuICAgICAgICAgICAgICAgIGZpbGVuYW1lQW5kTGluZSA9IHJlZlsxXTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubG9jYXRpb25JbmZvLnNldChjYWxsYmFjaywgZmlsZW5hbWVBbmRMaW5lKTtcbiAgICAgICAgcmV0dXJuIGlkO1xuICAgIH1cbiAgICBnZXQoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbGJhY2tzW2lkXSB8fCBmdW5jdGlvbiAoKSB7IH07XG4gICAgfVxuICAgIGdldExvY2F0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2F0aW9uSW5mby5nZXQoY2FsbGJhY2spO1xuICAgIH1cbiAgICBhcHBseShpZCwgLi4uYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoaWQpLmFwcGx5KGdsb2JhbCwgLi4uYXJncyk7XG4gICAgfVxuICAgIHJlbW92ZShpZCkge1xuICAgICAgICBjb25zdCBjYWxsYmFjayA9IHRoaXMuY2FsbGJhY2tzW2lkXTtcbiAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICB0aGlzLmNhbGxiYWNrSWRzLmRlbGV0ZShjYWxsYmFjayk7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5jYWxsYmFja3NbaWRdO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5DYWxsYmFja3NSZWdpc3RyeSA9IENhbGxiYWNrc1JlZ2lzdHJ5O1xuIiwgIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5kZXNlcmlhbGl6ZSA9IGV4cG9ydHMuc2VyaWFsaXplID0gZXhwb3J0cy5pc1NlcmlhbGl6YWJsZU9iamVjdCA9IGV4cG9ydHMuaXNQcm9taXNlID0gdm9pZCAwO1xuY29uc3QgZWxlY3Ryb25fMSA9IHJlcXVpcmUoXCJlbGVjdHJvblwiKTtcbmZ1bmN0aW9uIGlzUHJvbWlzZSh2YWwpIHtcbiAgICByZXR1cm4gKHZhbCAmJlxuICAgICAgICB2YWwudGhlbiAmJlxuICAgICAgICB2YWwudGhlbiBpbnN0YW5jZW9mIEZ1bmN0aW9uICYmXG4gICAgICAgIHZhbC5jb25zdHJ1Y3RvciAmJlxuICAgICAgICB2YWwuY29uc3RydWN0b3IucmVqZWN0ICYmXG4gICAgICAgIHZhbC5jb25zdHJ1Y3Rvci5yZWplY3QgaW5zdGFuY2VvZiBGdW5jdGlvbiAmJlxuICAgICAgICB2YWwuY29uc3RydWN0b3IucmVzb2x2ZSAmJlxuICAgICAgICB2YWwuY29uc3RydWN0b3IucmVzb2x2ZSBpbnN0YW5jZW9mIEZ1bmN0aW9uKTtcbn1cbmV4cG9ydHMuaXNQcm9taXNlID0gaXNQcm9taXNlO1xuY29uc3Qgc2VyaWFsaXphYmxlVHlwZXMgPSBbXG4gICAgQm9vbGVhbixcbiAgICBOdW1iZXIsXG4gICAgU3RyaW5nLFxuICAgIERhdGUsXG4gICAgRXJyb3IsXG4gICAgUmVnRXhwLFxuICAgIEFycmF5QnVmZmVyXG5dO1xuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dlYl9Xb3JrZXJzX0FQSS9TdHJ1Y3R1cmVkX2Nsb25lX2FsZ29yaXRobSNTdXBwb3J0ZWRfdHlwZXNcbmZ1bmN0aW9uIGlzU2VyaWFsaXphYmxlT2JqZWN0KHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSBudWxsIHx8IEFycmF5QnVmZmVyLmlzVmlldyh2YWx1ZSkgfHwgc2VyaWFsaXphYmxlVHlwZXMuc29tZSh0eXBlID0+IHZhbHVlIGluc3RhbmNlb2YgdHlwZSk7XG59XG5leHBvcnRzLmlzU2VyaWFsaXphYmxlT2JqZWN0ID0gaXNTZXJpYWxpemFibGVPYmplY3Q7XG5jb25zdCBvYmplY3RNYXAgPSBmdW5jdGlvbiAoc291cmNlLCBtYXBwZXIpIHtcbiAgICBjb25zdCBzb3VyY2VFbnRyaWVzID0gT2JqZWN0LmVudHJpZXMoc291cmNlKTtcbiAgICBjb25zdCB0YXJnZXRFbnRyaWVzID0gc291cmNlRW50cmllcy5tYXAoKFtrZXksIHZhbF0pID0+IFtrZXksIG1hcHBlcih2YWwpXSk7XG4gICAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyh0YXJnZXRFbnRyaWVzKTtcbn07XG5mdW5jdGlvbiBzZXJpYWxpemVOYXRpdmVJbWFnZShpbWFnZSkge1xuICAgIGNvbnN0IHJlcHJlc2VudGF0aW9ucyA9IFtdO1xuICAgIGNvbnN0IHNjYWxlRmFjdG9ycyA9IGltYWdlLmdldFNjYWxlRmFjdG9ycygpO1xuICAgIC8vIFVzZSBCdWZmZXIgd2hlbiB0aGVyZSdzIG9ubHkgb25lIHJlcHJlc2VudGF0aW9uIGZvciBiZXR0ZXIgcGVyZi5cbiAgICAvLyBUaGlzIGF2b2lkcyBjb21wcmVzc2luZyB0by9mcm9tIFBORyB3aGVyZSBpdCdzIG5vdCBuZWNlc3NhcnkgdG9cbiAgICAvLyBlbnN1cmUgdW5pcXVlbmVzcyBvZiBkYXRhVVJMcyAoc2luY2UgdGhlcmUncyBvbmx5IG9uZSkuXG4gICAgaWYgKHNjYWxlRmFjdG9ycy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgY29uc3Qgc2NhbGVGYWN0b3IgPSBzY2FsZUZhY3RvcnNbMF07XG4gICAgICAgIGNvbnN0IHNpemUgPSBpbWFnZS5nZXRTaXplKHNjYWxlRmFjdG9yKTtcbiAgICAgICAgY29uc3QgYnVmZmVyID0gaW1hZ2UudG9CaXRtYXAoeyBzY2FsZUZhY3RvciB9KTtcbiAgICAgICAgcmVwcmVzZW50YXRpb25zLnB1c2goeyBzY2FsZUZhY3Rvciwgc2l6ZSwgYnVmZmVyIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gQ29uc3RydWN0IGZyb20gZGF0YVVSTHMgdG8gZW5zdXJlIHRoYXQgdGhleSBhcmUgbm90IGxvc3QgaW4gY3JlYXRpb24uXG4gICAgICAgIGZvciAoY29uc3Qgc2NhbGVGYWN0b3Igb2Ygc2NhbGVGYWN0b3JzKSB7XG4gICAgICAgICAgICBjb25zdCBzaXplID0gaW1hZ2UuZ2V0U2l6ZShzY2FsZUZhY3Rvcik7XG4gICAgICAgICAgICBjb25zdCBkYXRhVVJMID0gaW1hZ2UudG9EYXRhVVJMKHsgc2NhbGVGYWN0b3IgfSk7XG4gICAgICAgICAgICByZXByZXNlbnRhdGlvbnMucHVzaCh7IHNjYWxlRmFjdG9yLCBzaXplLCBkYXRhVVJMIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7IF9fRUxFQ1RST05fU0VSSUFMSVpFRF9OYXRpdmVJbWFnZV9fOiB0cnVlLCByZXByZXNlbnRhdGlvbnMgfTtcbn1cbmZ1bmN0aW9uIGRlc2VyaWFsaXplTmF0aXZlSW1hZ2UodmFsdWUpIHtcbiAgICBjb25zdCBpbWFnZSA9IGVsZWN0cm9uXzEubmF0aXZlSW1hZ2UuY3JlYXRlRW1wdHkoKTtcbiAgICAvLyBVc2UgQnVmZmVyIHdoZW4gdGhlcmUncyBvbmx5IG9uZSByZXByZXNlbnRhdGlvbiBmb3IgYmV0dGVyIHBlcmYuXG4gICAgLy8gVGhpcyBhdm9pZHMgY29tcHJlc3NpbmcgdG8vZnJvbSBQTkcgd2hlcmUgaXQncyBub3QgbmVjZXNzYXJ5IHRvXG4gICAgLy8gZW5zdXJlIHVuaXF1ZW5lc3Mgb2YgZGF0YVVSTHMgKHNpbmNlIHRoZXJlJ3Mgb25seSBvbmUpLlxuICAgIGlmICh2YWx1ZS5yZXByZXNlbnRhdGlvbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGNvbnN0IHsgYnVmZmVyLCBzaXplLCBzY2FsZUZhY3RvciB9ID0gdmFsdWUucmVwcmVzZW50YXRpb25zWzBdO1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHNpemU7XG4gICAgICAgIGltYWdlLmFkZFJlcHJlc2VudGF0aW9uKHsgYnVmZmVyLCBzY2FsZUZhY3Rvciwgd2lkdGgsIGhlaWdodCB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIENvbnN0cnVjdCBmcm9tIGRhdGFVUkxzIHRvIGVuc3VyZSB0aGF0IHRoZXkgYXJlIG5vdCBsb3N0IGluIGNyZWF0aW9uLlxuICAgICAgICBmb3IgKGNvbnN0IHJlcCBvZiB2YWx1ZS5yZXByZXNlbnRhdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YVVSTCwgc2l6ZSwgc2NhbGVGYWN0b3IgfSA9IHJlcDtcbiAgICAgICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gc2l6ZTtcbiAgICAgICAgICAgIGltYWdlLmFkZFJlcHJlc2VudGF0aW9uKHsgZGF0YVVSTCwgc2NhbGVGYWN0b3IsIHdpZHRoLCBoZWlnaHQgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGltYWdlO1xufVxuZnVuY3Rpb24gc2VyaWFsaXplKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlICYmIHZhbHVlLmNvbnN0cnVjdG9yICYmIHZhbHVlLmNvbnN0cnVjdG9yLm5hbWUgPT09ICdOYXRpdmVJbWFnZScpIHtcbiAgICAgICAgcmV0dXJuIHNlcmlhbGl6ZU5hdGl2ZUltYWdlKHZhbHVlKTtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZS5tYXAoc2VyaWFsaXplKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNTZXJpYWxpemFibGVPYmplY3QodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBPYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIG9iamVjdE1hcCh2YWx1ZSwgc2VyaWFsaXplKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG59XG5leHBvcnRzLnNlcmlhbGl6ZSA9IHNlcmlhbGl6ZTtcbmZ1bmN0aW9uIGRlc2VyaWFsaXplKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlICYmIHZhbHVlLl9fRUxFQ1RST05fU0VSSUFMSVpFRF9OYXRpdmVJbWFnZV9fKSB7XG4gICAgICAgIHJldHVybiBkZXNlcmlhbGl6ZU5hdGl2ZUltYWdlKHZhbHVlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlLm1hcChkZXNlcmlhbGl6ZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzU2VyaWFsaXphYmxlT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgT2JqZWN0KSB7XG4gICAgICAgIHJldHVybiBvYmplY3RNYXAodmFsdWUsIGRlc2VyaWFsaXplKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG59XG5leHBvcnRzLmRlc2VyaWFsaXplID0gZGVzZXJpYWxpemU7XG4iLCAiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmdldEVsZWN0cm9uQmluZGluZyA9IHZvaWQgMDtcbmNvbnN0IGdldEVsZWN0cm9uQmluZGluZyA9IChuYW1lKSA9PiB7XG4gICAgaWYgKHByb2Nlc3MuX2xpbmtlZEJpbmRpbmcpIHtcbiAgICAgICAgcmV0dXJuIHByb2Nlc3MuX2xpbmtlZEJpbmRpbmcoJ2VsZWN0cm9uX2NvbW1vbl8nICsgbmFtZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHByb2Nlc3MuZWxlY3Ryb25CaW5kaW5nKSB7XG4gICAgICAgIHJldHVybiBwcm9jZXNzLmVsZWN0cm9uQmluZGluZyhuYW1lKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn07XG5leHBvcnRzLmdldEVsZWN0cm9uQmluZGluZyA9IGdldEVsZWN0cm9uQmluZGluZztcbiIsICJcInVzZSBzdHJpY3RcIjtcbnZhciBfYSwgX2I7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmJyb3dzZXJNb2R1bGVOYW1lcyA9IGV4cG9ydHMuY29tbW9uTW9kdWxlTmFtZXMgPSB2b2lkIDA7XG5jb25zdCBnZXRfZWxlY3Ryb25fYmluZGluZ18xID0gcmVxdWlyZShcIi4vZ2V0LWVsZWN0cm9uLWJpbmRpbmdcIik7XG5leHBvcnRzLmNvbW1vbk1vZHVsZU5hbWVzID0gW1xuICAgICdjbGlwYm9hcmQnLFxuICAgICduYXRpdmVJbWFnZScsXG4gICAgJ3NoZWxsJyxcbl07XG5leHBvcnRzLmJyb3dzZXJNb2R1bGVOYW1lcyA9IFtcbiAgICAnYXBwJyxcbiAgICAnYXV0b1VwZGF0ZXInLFxuICAgICdCYXNlV2luZG93JyxcbiAgICAnQnJvd3NlclZpZXcnLFxuICAgICdCcm93c2VyV2luZG93JyxcbiAgICAnY29udGVudFRyYWNpbmcnLFxuICAgICdjcmFzaFJlcG9ydGVyJyxcbiAgICAnZGlhbG9nJyxcbiAgICAnZ2xvYmFsU2hvcnRjdXQnLFxuICAgICdpcGNNYWluJyxcbiAgICAnaW5BcHBQdXJjaGFzZScsXG4gICAgJ01lbnUnLFxuICAgICdNZW51SXRlbScsXG4gICAgJ25hdGl2ZVRoZW1lJyxcbiAgICAnbmV0JyxcbiAgICAnbmV0TG9nJyxcbiAgICAnTWVzc2FnZUNoYW5uZWxNYWluJyxcbiAgICAnTm90aWZpY2F0aW9uJyxcbiAgICAncG93ZXJNb25pdG9yJyxcbiAgICAncG93ZXJTYXZlQmxvY2tlcicsXG4gICAgJ3Byb3RvY29sJyxcbiAgICAncHVzaE5vdGlmaWNhdGlvbnMnLFxuICAgICdzYWZlU3RvcmFnZScsXG4gICAgJ3NjcmVlbicsXG4gICAgJ3Nlc3Npb24nLFxuICAgICdTaGFyZU1lbnUnLFxuICAgICdzeXN0ZW1QcmVmZXJlbmNlcycsXG4gICAgJ1RvcExldmVsV2luZG93JyxcbiAgICAnVG91Y2hCYXInLFxuICAgICdUcmF5JyxcbiAgICAndXRpbGl0eVByb2Nlc3MnLFxuICAgICdWaWV3JyxcbiAgICAnd2ViQ29udGVudHMnLFxuICAgICdXZWJDb250ZW50c1ZpZXcnLFxuICAgICd3ZWJGcmFtZU1haW4nLFxuXS5jb25jYXQoZXhwb3J0cy5jb21tb25Nb2R1bGVOYW1lcyk7XG5jb25zdCBmZWF0dXJlcyA9IGdldF9lbGVjdHJvbl9iaW5kaW5nXzEuZ2V0RWxlY3Ryb25CaW5kaW5nKCdmZWF0dXJlcycpO1xuaWYgKCgoX2EgPSBmZWF0dXJlcyA9PT0gbnVsbCB8fCBmZWF0dXJlcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZmVhdHVyZXMuaXNEZXNrdG9wQ2FwdHVyZXJFbmFibGVkKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2FsbChmZWF0dXJlcykpICE9PSBmYWxzZSkge1xuICAgIGV4cG9ydHMuYnJvd3Nlck1vZHVsZU5hbWVzLnB1c2goJ2Rlc2t0b3BDYXB0dXJlcicpO1xufVxuaWYgKCgoX2IgPSBmZWF0dXJlcyA9PT0gbnVsbCB8fCBmZWF0dXJlcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZmVhdHVyZXMuaXNWaWV3QXBpRW5hYmxlZCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNhbGwoZmVhdHVyZXMpKSAhPT0gZmFsc2UpIHtcbiAgICBleHBvcnRzLmJyb3dzZXJNb2R1bGVOYW1lcy5wdXNoKCdJbWFnZVZpZXcnKTtcbn1cbiIsICJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuY3JlYXRlRnVuY3Rpb25XaXRoUmV0dXJuVmFsdWUgPSBleHBvcnRzLmdldEdsb2JhbCA9IGV4cG9ydHMuZ2V0Q3VycmVudFdlYkNvbnRlbnRzID0gZXhwb3J0cy5nZXRDdXJyZW50V2luZG93ID0gZXhwb3J0cy5nZXRCdWlsdGluID0gdm9pZCAwO1xuY29uc3QgY2FsbGJhY2tzX3JlZ2lzdHJ5XzEgPSByZXF1aXJlKFwiLi9jYWxsYmFja3MtcmVnaXN0cnlcIik7XG5jb25zdCB0eXBlX3V0aWxzXzEgPSByZXF1aXJlKFwiLi4vY29tbW9uL3R5cGUtdXRpbHNcIik7XG5jb25zdCBlbGVjdHJvbl8xID0gcmVxdWlyZShcImVsZWN0cm9uXCIpO1xuY29uc3QgbW9kdWxlX25hbWVzXzEgPSByZXF1aXJlKFwiLi4vY29tbW9uL21vZHVsZS1uYW1lc1wiKTtcbmNvbnN0IGdldF9lbGVjdHJvbl9iaW5kaW5nXzEgPSByZXF1aXJlKFwiLi4vY29tbW9uL2dldC1lbGVjdHJvbi1iaW5kaW5nXCIpO1xuY29uc3QgeyBQcm9taXNlIH0gPSBnbG9iYWw7XG5jb25zdCBjYWxsYmFja3NSZWdpc3RyeSA9IG5ldyBjYWxsYmFja3NfcmVnaXN0cnlfMS5DYWxsYmFja3NSZWdpc3RyeSgpO1xuY29uc3QgcmVtb3RlT2JqZWN0Q2FjaGUgPSBuZXcgTWFwKCk7XG5jb25zdCBmaW5hbGl6YXRpb25SZWdpc3RyeSA9IG5ldyBGaW5hbGl6YXRpb25SZWdpc3RyeSgoaWQpID0+IHtcbiAgICBjb25zdCByZWYgPSByZW1vdGVPYmplY3RDYWNoZS5nZXQoaWQpO1xuICAgIGlmIChyZWYgIT09IHVuZGVmaW5lZCAmJiByZWYuZGVyZWYoKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJlbW90ZU9iamVjdENhY2hlLmRlbGV0ZShpZCk7XG4gICAgICAgIGVsZWN0cm9uXzEuaXBjUmVuZGVyZXIuc2VuZChcIlJFTU9URV9CUk9XU0VSX0RFUkVGRVJFTkNFXCIgLyogQlJPV1NFUl9ERVJFRkVSRU5DRSAqLywgY29udGV4dElkLCBpZCwgMCk7XG4gICAgfVxufSk7XG5jb25zdCBlbGVjdHJvbklkcyA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCBpc1JldHVyblZhbHVlID0gbmV3IFdlYWtTZXQoKTtcbmZ1bmN0aW9uIGdldENhY2hlZFJlbW90ZU9iamVjdChpZCkge1xuICAgIGNvbnN0IHJlZiA9IHJlbW90ZU9iamVjdENhY2hlLmdldChpZCk7XG4gICAgaWYgKHJlZiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IGRlcmVmID0gcmVmLmRlcmVmKCk7XG4gICAgICAgIGlmIChkZXJlZiAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuIGRlcmVmO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNldENhY2hlZFJlbW90ZU9iamVjdChpZCwgdmFsdWUpIHtcbiAgICBjb25zdCB3ciA9IG5ldyBXZWFrUmVmKHZhbHVlKTtcbiAgICByZW1vdGVPYmplY3RDYWNoZS5zZXQoaWQsIHdyKTtcbiAgICBmaW5hbGl6YXRpb25SZWdpc3RyeS5yZWdpc3Rlcih2YWx1ZSwgaWQpO1xuICAgIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIGdldENvbnRleHRJZCgpIHtcbiAgICBjb25zdCB2OFV0aWwgPSBnZXRfZWxlY3Ryb25fYmluZGluZ18xLmdldEVsZWN0cm9uQmluZGluZygndjhfdXRpbCcpO1xuICAgIGlmICh2OFV0aWwpIHtcbiAgICAgICAgcmV0dXJuIHY4VXRpbC5nZXRIaWRkZW5WYWx1ZShnbG9iYWwsICdjb250ZXh0SWQnKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRWxlY3Ryb24gPj12MTMuMC4wLWJldGEuNiByZXF1aXJlZCB0byBzdXBwb3J0IHNhbmRib3hlZCByZW5kZXJlcnMnKTtcbiAgICB9XG59XG4vLyBBbiB1bmlxdWUgSUQgdGhhdCBjYW4gcmVwcmVzZW50IGN1cnJlbnQgY29udGV4dC5cbmNvbnN0IGNvbnRleHRJZCA9IHByb2Nlc3MuY29udGV4dElkIHx8IGdldENvbnRleHRJZCgpO1xuLy8gTm90aWZ5IHRoZSBtYWluIHByb2Nlc3Mgd2hlbiBjdXJyZW50IGNvbnRleHQgaXMgZ29pbmcgdG8gYmUgcmVsZWFzZWQuXG4vLyBOb3RlIHRoYXQgd2hlbiB0aGUgcmVuZGVyZXIgcHJvY2VzcyBpcyBkZXN0cm95ZWQsIHRoZSBtZXNzYWdlIG1heSBub3QgYmVcbi8vIHNlbnQsIHdlIGFsc28gbGlzdGVuIHRvIHRoZSBcInJlbmRlci12aWV3LWRlbGV0ZWRcIiBldmVudCBpbiB0aGUgbWFpbiBwcm9jZXNzXG4vLyB0byBndWFyZCB0aGF0IHNpdHVhdGlvbi5cbnByb2Nlc3Mub24oJ2V4aXQnLCAoKSA9PiB7XG4gICAgY29uc3QgY29tbWFuZCA9IFwiUkVNT1RFX0JST1dTRVJfQ09OVEVYVF9SRUxFQVNFXCIgLyogQlJPV1NFUl9DT05URVhUX1JFTEVBU0UgKi87XG4gICAgZWxlY3Ryb25fMS5pcGNSZW5kZXJlci5zZW5kKGNvbW1hbmQsIGNvbnRleHRJZCk7XG59KTtcbmNvbnN0IElTX1JFTU9URV9QUk9YWSA9IFN5bWJvbCgnaXMtcmVtb3RlLXByb3h5Jyk7XG4vLyBDb252ZXJ0IHRoZSBhcmd1bWVudHMgb2JqZWN0IGludG8gYW4gYXJyYXkgb2YgbWV0YSBkYXRhLlxuZnVuY3Rpb24gd3JhcEFyZ3MoYXJncywgdmlzaXRlZCA9IG5ldyBTZXQoKSkge1xuICAgIGNvbnN0IHZhbHVlVG9NZXRhID0gKHZhbHVlKSA9PiB7XG4gICAgICAgIC8vIENoZWNrIGZvciBjaXJjdWxhciByZWZlcmVuY2UuXG4gICAgICAgIGlmICh2aXNpdGVkLmhhcyh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3ZhbHVlJyxcbiAgICAgICAgICAgICAgICB2YWx1ZTogbnVsbFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUgJiYgdmFsdWUuY29uc3RydWN0b3IgJiYgdmFsdWUuY29uc3RydWN0b3IubmFtZSA9PT0gJ05hdGl2ZUltYWdlJykge1xuICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogJ25hdGl2ZWltYWdlJywgdmFsdWU6IHR5cGVfdXRpbHNfMS5zZXJpYWxpemUodmFsdWUpIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHZpc2l0ZWQuYWRkKHZhbHVlKTtcbiAgICAgICAgICAgIGNvbnN0IG1ldGEgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICAgICAgICB2YWx1ZTogd3JhcEFyZ3ModmFsdWUsIHZpc2l0ZWQpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmlzaXRlZC5kZWxldGUodmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIG1ldGE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBCdWZmZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2J1ZmZlcicsXG4gICAgICAgICAgICAgICAgdmFsdWVcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZV91dGlsc18xLmlzU2VyaWFsaXphYmxlT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAndmFsdWUnLFxuICAgICAgICAgICAgICAgIHZhbHVlXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGlmICh0eXBlX3V0aWxzXzEuaXNQcm9taXNlKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdwcm9taXNlJyxcbiAgICAgICAgICAgICAgICAgICAgdGhlbjogdmFsdWVUb01ldGEoZnVuY3Rpb24gKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS50aGVuKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZWxlY3Ryb25JZHMuaGFzKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdyZW1vdGUtb2JqZWN0JyxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZWN0cm9uSWRzLmdldCh2YWx1ZSlcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbWV0YSA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICAgICAgICBuYW1lOiB2YWx1ZS5jb25zdHJ1Y3RvciA/IHZhbHVlLmNvbnN0cnVjdG9yLm5hbWUgOiAnJyxcbiAgICAgICAgICAgICAgICBtZW1iZXJzOiBbXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZpc2l0ZWQuYWRkKHZhbHVlKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcHJvcCBpbiB2YWx1ZSkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGd1YXJkLWZvci1pblxuICAgICAgICAgICAgICAgIG1ldGEubWVtYmVycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogcHJvcCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlVG9NZXRhKHZhbHVlW3Byb3BdKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmlzaXRlZC5kZWxldGUodmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIG1ldGE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nICYmIGlzUmV0dXJuVmFsdWUuaGFzKHZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb24td2l0aC1yZXR1cm4tdmFsdWUnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVRvTWV0YSh2YWx1ZSgpKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgICAgICAgICAgICBpZDogY2FsbGJhY2tzUmVnaXN0cnkuYWRkKHZhbHVlKSxcbiAgICAgICAgICAgICAgICBsb2NhdGlvbjogY2FsbGJhY2tzUmVnaXN0cnkuZ2V0TG9jYXRpb24odmFsdWUpLFxuICAgICAgICAgICAgICAgIGxlbmd0aDogdmFsdWUubGVuZ3RoXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAndmFsdWUnLFxuICAgICAgICAgICAgICAgIHZhbHVlXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gYXJncy5tYXAodmFsdWVUb01ldGEpO1xufVxuLy8gUG9wdWxhdGUgb2JqZWN0J3MgbWVtYmVycyBmcm9tIGRlc2NyaXB0b3JzLlxuLy8gVGhlIHxyZWZ8IHdpbGwgYmUga2VwdCByZWZlcmVuY2VkIGJ5IHxtZW1iZXJzfC5cbi8vIFRoaXMgbWF0Y2hlcyB8Z2V0T2JqZWN0TWVtZWJlcnN8IGluIHJwYy1zZXJ2ZXIuXG5mdW5jdGlvbiBzZXRPYmplY3RNZW1iZXJzKHJlZiwgb2JqZWN0LCBtZXRhSWQsIG1lbWJlcnMpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkobWVtYmVycykpXG4gICAgICAgIHJldHVybjtcbiAgICBmb3IgKGNvbnN0IG1lbWJlciBvZiBtZW1iZXJzKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBtZW1iZXIubmFtZSkpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRvciA9IHsgZW51bWVyYWJsZTogbWVtYmVyLmVudW1lcmFibGUgfTtcbiAgICAgICAgaWYgKG1lbWJlci50eXBlID09PSAnbWV0aG9kJykge1xuICAgICAgICAgICAgY29uc3QgcmVtb3RlTWVtYmVyRnVuY3Rpb24gPSBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAgICAgICAgIGxldCBjb21tYW5kO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzICYmIHRoaXMuY29uc3RydWN0b3IgPT09IHJlbW90ZU1lbWJlckZ1bmN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbW1hbmQgPSBcIlJFTU9URV9CUk9XU0VSX01FTUJFUl9DT05TVFJVQ1RPUlwiIC8qIEJST1dTRVJfTUVNQkVSX0NPTlNUUlVDVE9SICovO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29tbWFuZCA9IFwiUkVNT1RFX0JST1dTRVJfTUVNQkVSX0NBTExcIiAvKiBCUk9XU0VSX01FTUJFUl9DQUxMICovO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByZXQgPSBlbGVjdHJvbl8xLmlwY1JlbmRlcmVyLnNlbmRTeW5jKGNvbW1hbmQsIGNvbnRleHRJZCwgbWV0YUlkLCBtZW1iZXIubmFtZSwgd3JhcEFyZ3MoYXJncykpO1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXRhVG9WYWx1ZShyZXQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGxldCBkZXNjcmlwdG9yRnVuY3Rpb24gPSBwcm94eUZ1bmN0aW9uUHJvcGVydGllcyhyZW1vdGVNZW1iZXJGdW5jdGlvbiwgbWV0YUlkLCBtZW1iZXIubmFtZSk7XG4gICAgICAgICAgICBkZXNjcmlwdG9yLmdldCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBkZXNjcmlwdG9yRnVuY3Rpb24ucmVmID0gcmVmOyAvLyBUaGUgbWVtYmVyIHNob3VsZCByZWZlcmVuY2UgaXRzIG9iamVjdC5cbiAgICAgICAgICAgICAgICByZXR1cm4gZGVzY3JpcHRvckZ1bmN0aW9uO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIEVuYWJsZSBtb25rZXktcGF0Y2ggdGhlIG1ldGhvZFxuICAgICAgICAgICAgZGVzY3JpcHRvci5zZXQgPSAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICBkZXNjcmlwdG9yRnVuY3Rpb24gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG1lbWJlci50eXBlID09PSAnZ2V0Jykge1xuICAgICAgICAgICAgZGVzY3JpcHRvci5nZXQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29tbWFuZCA9IFwiUkVNT1RFX0JST1dTRVJfTUVNQkVSX0dFVFwiIC8qIEJST1dTRVJfTUVNQkVSX0dFVCAqLztcbiAgICAgICAgICAgICAgICBjb25zdCBtZXRhID0gZWxlY3Ryb25fMS5pcGNSZW5kZXJlci5zZW5kU3luYyhjb21tYW5kLCBjb250ZXh0SWQsIG1ldGFJZCwgbWVtYmVyLm5hbWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXRhVG9WYWx1ZShtZXRhKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAobWVtYmVyLndyaXRhYmxlKSB7XG4gICAgICAgICAgICAgICAgZGVzY3JpcHRvci5zZXQgPSAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJncyA9IHdyYXBBcmdzKFt2YWx1ZV0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21tYW5kID0gXCJSRU1PVEVfQlJPV1NFUl9NRU1CRVJfU0VUXCIgLyogQlJPV1NFUl9NRU1CRVJfU0VUICovO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXRhID0gZWxlY3Ryb25fMS5pcGNSZW5kZXJlci5zZW5kU3luYyhjb21tYW5kLCBjb250ZXh0SWQsIG1ldGFJZCwgbWVtYmVyLm5hbWUsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWV0YSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0YVRvVmFsdWUobWV0YSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmplY3QsIG1lbWJlci5uYW1lLCBkZXNjcmlwdG9yKTtcbiAgICB9XG59XG4vLyBQb3B1bGF0ZSBvYmplY3QncyBwcm90b3R5cGUgZnJvbSBkZXNjcmlwdG9yLlxuLy8gVGhpcyBtYXRjaGVzIHxnZXRPYmplY3RQcm90b3R5cGV8IGluIHJwYy1zZXJ2ZXIuXG5mdW5jdGlvbiBzZXRPYmplY3RQcm90b3R5cGUocmVmLCBvYmplY3QsIG1ldGFJZCwgZGVzY3JpcHRvcikge1xuICAgIGlmIChkZXNjcmlwdG9yID09PSBudWxsKVxuICAgICAgICByZXR1cm47XG4gICAgY29uc3QgcHJvdG8gPSB7fTtcbiAgICBzZXRPYmplY3RNZW1iZXJzKHJlZiwgcHJvdG8sIG1ldGFJZCwgZGVzY3JpcHRvci5tZW1iZXJzKTtcbiAgICBzZXRPYmplY3RQcm90b3R5cGUocmVmLCBwcm90bywgbWV0YUlkLCBkZXNjcmlwdG9yLnByb3RvKTtcbiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2Yob2JqZWN0LCBwcm90byk7XG59XG4vLyBXcmFwIGZ1bmN0aW9uIGluIFByb3h5IGZvciBhY2Nlc3NpbmcgcmVtb3RlIHByb3BlcnRpZXNcbmZ1bmN0aW9uIHByb3h5RnVuY3Rpb25Qcm9wZXJ0aWVzKHJlbW90ZU1lbWJlckZ1bmN0aW9uLCBtZXRhSWQsIG5hbWUpIHtcbiAgICBsZXQgbG9hZGVkID0gZmFsc2U7XG4gICAgLy8gTGF6aWx5IGxvYWQgZnVuY3Rpb24gcHJvcGVydGllc1xuICAgIGNvbnN0IGxvYWRSZW1vdGVQcm9wZXJ0aWVzID0gKCkgPT4ge1xuICAgICAgICBpZiAobG9hZGVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsb2FkZWQgPSB0cnVlO1xuICAgICAgICBjb25zdCBjb21tYW5kID0gXCJSRU1PVEVfQlJPV1NFUl9NRU1CRVJfR0VUXCIgLyogQlJPV1NFUl9NRU1CRVJfR0VUICovO1xuICAgICAgICBjb25zdCBtZXRhID0gZWxlY3Ryb25fMS5pcGNSZW5kZXJlci5zZW5kU3luYyhjb21tYW5kLCBjb250ZXh0SWQsIG1ldGFJZCwgbmFtZSk7XG4gICAgICAgIHNldE9iamVjdE1lbWJlcnMocmVtb3RlTWVtYmVyRnVuY3Rpb24sIHJlbW90ZU1lbWJlckZ1bmN0aW9uLCBtZXRhLmlkLCBtZXRhLm1lbWJlcnMpO1xuICAgIH07XG4gICAgcmV0dXJuIG5ldyBQcm94eShyZW1vdGVNZW1iZXJGdW5jdGlvbiwge1xuICAgICAgICBzZXQ6ICh0YXJnZXQsIHByb3BlcnR5LCB2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHByb3BlcnR5ICE9PSAncmVmJylcbiAgICAgICAgICAgICAgICBsb2FkUmVtb3RlUHJvcGVydGllcygpO1xuICAgICAgICAgICAgdGFyZ2V0W3Byb3BlcnR5XSA9IHZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0sXG4gICAgICAgIGdldDogKHRhcmdldCwgcHJvcGVydHkpID0+IHtcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0eSA9PT0gSVNfUkVNT1RFX1BST1hZKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGFyZ2V0LCBwcm9wZXJ0eSkpXG4gICAgICAgICAgICAgICAgbG9hZFJlbW90ZVByb3BlcnRpZXMoKTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdGFyZ2V0W3Byb3BlcnR5XTtcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0eSA9PT0gJ3RvU3RyaW5nJyAmJiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUuYmluZCh0YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBvd25LZXlzOiAodGFyZ2V0KSA9PiB7XG4gICAgICAgICAgICBsb2FkUmVtb3RlUHJvcGVydGllcygpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRhcmdldCk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldE93blByb3BlcnR5RGVzY3JpcHRvcjogKHRhcmdldCwgcHJvcGVydHkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwgcHJvcGVydHkpO1xuICAgICAgICAgICAgaWYgKGRlc2NyaXB0b3IpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlc2NyaXB0b3I7XG4gICAgICAgICAgICBsb2FkUmVtb3RlUHJvcGVydGllcygpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBwcm9wZXJ0eSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbi8vIENvbnZlcnQgbWV0YSBkYXRhIGZyb20gYnJvd3NlciBpbnRvIHJlYWwgdmFsdWUuXG5mdW5jdGlvbiBtZXRhVG9WYWx1ZShtZXRhKSB7XG4gICAgaWYgKCFtZXRhKVxuICAgICAgICByZXR1cm4ge307XG4gICAgaWYgKG1ldGEudHlwZSA9PT0gJ3ZhbHVlJykge1xuICAgICAgICByZXR1cm4gbWV0YS52YWx1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAobWV0YS50eXBlID09PSAnYXJyYXknKSB7XG4gICAgICAgIHJldHVybiBtZXRhLm1lbWJlcnMubWFwKChtZW1iZXIpID0+IG1ldGFUb1ZhbHVlKG1lbWJlcikpO1xuICAgIH1cbiAgICBlbHNlIGlmIChtZXRhLnR5cGUgPT09ICduYXRpdmVpbWFnZScpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVfdXRpbHNfMS5kZXNlcmlhbGl6ZShtZXRhLnZhbHVlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAobWV0YS50eXBlID09PSAnYnVmZmVyJykge1xuICAgICAgICByZXR1cm4gQnVmZmVyLmZyb20obWV0YS52YWx1ZS5idWZmZXIsIG1ldGEudmFsdWUuYnl0ZU9mZnNldCwgbWV0YS52YWx1ZS5ieXRlTGVuZ3RoKTtcbiAgICB9XG4gICAgZWxzZSBpZiAobWV0YS50eXBlID09PSAncHJvbWlzZScpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7IHRoZW46IG1ldGFUb1ZhbHVlKG1ldGEudGhlbikgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKG1ldGEudHlwZSA9PT0gJ2Vycm9yJykge1xuICAgICAgICByZXR1cm4gbWV0YVRvRXJyb3IobWV0YSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKG1ldGEudHlwZSA9PT0gJ2V4Y2VwdGlvbicpIHtcbiAgICAgICAgaWYgKG1ldGEudmFsdWUudHlwZSA9PT0gJ2Vycm9yJykge1xuICAgICAgICAgICAgdGhyb3cgbWV0YVRvRXJyb3IobWV0YS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuZXhwZWN0ZWQgdmFsdWUgdHlwZSBpbiBleGNlcHRpb246ICR7bWV0YS52YWx1ZS50eXBlfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsZXQgcmV0O1xuICAgICAgICBpZiAoJ2lkJyBpbiBtZXRhKSB7XG4gICAgICAgICAgICBjb25zdCBjYWNoZWQgPSBnZXRDYWNoZWRSZW1vdGVPYmplY3QobWV0YS5pZCk7XG4gICAgICAgICAgICBpZiAoY2FjaGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEEgc2hhZG93IGNsYXNzIHRvIHJlcHJlc2VudCB0aGUgcmVtb3RlIGZ1bmN0aW9uIG9iamVjdC5cbiAgICAgICAgaWYgKG1ldGEudHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY29uc3QgcmVtb3RlRnVuY3Rpb24gPSBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAgICAgICAgIGxldCBjb21tYW5kO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzICYmIHRoaXMuY29uc3RydWN0b3IgPT09IHJlbW90ZUZ1bmN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbW1hbmQgPSBcIlJFTU9URV9CUk9XU0VSX0NPTlNUUlVDVE9SXCIgLyogQlJPV1NFUl9DT05TVFJVQ1RPUiAqLztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbW1hbmQgPSBcIlJFTU9URV9CUk9XU0VSX0ZVTkNUSU9OX0NBTExcIiAvKiBCUk9XU0VSX0ZVTkNUSU9OX0NBTEwgKi87XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG9iaiA9IGVsZWN0cm9uXzEuaXBjUmVuZGVyZXIuc2VuZFN5bmMoY29tbWFuZCwgY29udGV4dElkLCBtZXRhLmlkLCB3cmFwQXJncyhhcmdzKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1ldGFUb1ZhbHVlKG9iaik7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0ID0gcmVtb3RlRnVuY3Rpb247XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXQgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBzZXRPYmplY3RNZW1iZXJzKHJldCwgcmV0LCBtZXRhLmlkLCBtZXRhLm1lbWJlcnMpO1xuICAgICAgICBzZXRPYmplY3RQcm90b3R5cGUocmV0LCByZXQsIG1ldGEuaWQsIG1ldGEucHJvdG8pO1xuICAgICAgICBpZiAocmV0LmNvbnN0cnVjdG9yICYmIHJldC5jb25zdHJ1Y3RvcltJU19SRU1PVEVfUFJPWFldKSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocmV0LmNvbnN0cnVjdG9yLCAnbmFtZScsIHsgdmFsdWU6IG1ldGEubmFtZSB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUcmFjayBkZWxlZ2F0ZSBvYmoncyBsaWZldGltZSAmIHRlbGwgYnJvd3NlciB0byBjbGVhbiB1cCB3aGVuIG9iamVjdCBpcyBHQ2VkLlxuICAgICAgICBlbGVjdHJvbklkcy5zZXQocmV0LCBtZXRhLmlkKTtcbiAgICAgICAgc2V0Q2FjaGVkUmVtb3RlT2JqZWN0KG1ldGEuaWQsIHJldCk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxufVxuZnVuY3Rpb24gbWV0YVRvRXJyb3IobWV0YSkge1xuICAgIGNvbnN0IG9iaiA9IG1ldGEudmFsdWU7XG4gICAgZm9yIChjb25zdCB7IG5hbWUsIHZhbHVlIH0gb2YgbWV0YS5tZW1iZXJzKSB7XG4gICAgICAgIG9ialtuYW1lXSA9IG1ldGFUb1ZhbHVlKHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbn1cbmZ1bmN0aW9uIGhhc1NlbmRlcklkKGlucHV0KSB7XG4gICAgcmV0dXJuIHR5cGVvZiBpbnB1dC5zZW5kZXJJZCA9PT0gXCJudW1iZXJcIjtcbn1cbmZ1bmN0aW9uIGhhbmRsZU1lc3NhZ2UoY2hhbm5lbCwgaGFuZGxlcikge1xuICAgIGVsZWN0cm9uXzEuaXBjUmVuZGVyZXIub24oY2hhbm5lbCwgKGV2ZW50LCBwYXNzZWRDb250ZXh0SWQsIGlkLCAuLi5hcmdzKSA9PiB7XG4gICAgICAgIGlmIChoYXNTZW5kZXJJZChldmVudCkpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5zZW5kZXJJZCAhPT0gMCAmJiBldmVudC5zZW5kZXJJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgTWVzc2FnZSAke2NoYW5uZWx9IHNlbnQgYnkgdW5leHBlY3RlZCBXZWJDb250ZW50cyAoJHtldmVudC5zZW5kZXJJZH0pYCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwYXNzZWRDb250ZXh0SWQgPT09IGNvbnRleHRJZCkge1xuICAgICAgICAgICAgaGFuZGxlcihpZCwgLi4uYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBNZXNzYWdlIHNlbnQgdG8gYW4gdW4tZXhpc3QgY29udGV4dCwgbm90aWZ5IHRoZSBlcnJvciB0byBtYWluIHByb2Nlc3MuXG4gICAgICAgICAgICBlbGVjdHJvbl8xLmlwY1JlbmRlcmVyLnNlbmQoXCJSRU1PVEVfQlJPV1NFUl9XUk9OR19DT05URVhUX0VSUk9SXCIgLyogQlJPV1NFUl9XUk9OR19DT05URVhUX0VSUk9SICovLCBjb250ZXh0SWQsIHBhc3NlZENvbnRleHRJZCwgaWQpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5jb25zdCBlbmFibGVTdGFja3MgPSBwcm9jZXNzLmFyZ3YuaW5jbHVkZXMoJy0tZW5hYmxlLWFwaS1maWx0ZXJpbmctbG9nZ2luZycpO1xuZnVuY3Rpb24gZ2V0Q3VycmVudFN0YWNrKCkge1xuICAgIGNvbnN0IHRhcmdldCA9IHsgc3RhY2s6IHVuZGVmaW5lZCB9O1xuICAgIGlmIChlbmFibGVTdGFja3MpIHtcbiAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGFyZ2V0LCBnZXRDdXJyZW50U3RhY2spO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0LnN0YWNrO1xufVxuLy8gQnJvd3NlciBjYWxscyBhIGNhbGxiYWNrIGluIHJlbmRlcmVyLlxuaGFuZGxlTWVzc2FnZShcIlJFTU9URV9SRU5ERVJFUl9DQUxMQkFDS1wiIC8qIFJFTkRFUkVSX0NBTExCQUNLICovLCAoaWQsIGFyZ3MpID0+IHtcbiAgICBjYWxsYmFja3NSZWdpc3RyeS5hcHBseShpZCwgbWV0YVRvVmFsdWUoYXJncykpO1xufSk7XG4vLyBBIGNhbGxiYWNrIGluIGJyb3dzZXIgaXMgcmVsZWFzZWQuXG5oYW5kbGVNZXNzYWdlKFwiUkVNT1RFX1JFTkRFUkVSX1JFTEVBU0VfQ0FMTEJBQ0tcIiAvKiBSRU5ERVJFUl9SRUxFQVNFX0NBTExCQUNLICovLCAoaWQpID0+IHtcbiAgICBjYWxsYmFja3NSZWdpc3RyeS5yZW1vdmUoaWQpO1xufSk7XG5leHBvcnRzLnJlcXVpcmUgPSAobW9kdWxlKSA9PiB7XG4gICAgY29uc3QgY29tbWFuZCA9IFwiUkVNT1RFX0JST1dTRVJfUkVRVUlSRVwiIC8qIEJST1dTRVJfUkVRVUlSRSAqLztcbiAgICBjb25zdCBtZXRhID0gZWxlY3Ryb25fMS5pcGNSZW5kZXJlci5zZW5kU3luYyhjb21tYW5kLCBjb250ZXh0SWQsIG1vZHVsZSwgZ2V0Q3VycmVudFN0YWNrKCkpO1xuICAgIHJldHVybiBtZXRhVG9WYWx1ZShtZXRhKTtcbn07XG4vLyBBbGlhcyB0byByZW1vdGUucmVxdWlyZSgnZWxlY3Ryb24nKS54eHguXG5mdW5jdGlvbiBnZXRCdWlsdGluKG1vZHVsZSkge1xuICAgIGNvbnN0IGNvbW1hbmQgPSBcIlJFTU9URV9CUk9XU0VSX0dFVF9CVUlMVElOXCIgLyogQlJPV1NFUl9HRVRfQlVJTFRJTiAqLztcbiAgICBjb25zdCBtZXRhID0gZWxlY3Ryb25fMS5pcGNSZW5kZXJlci5zZW5kU3luYyhjb21tYW5kLCBjb250ZXh0SWQsIG1vZHVsZSwgZ2V0Q3VycmVudFN0YWNrKCkpO1xuICAgIHJldHVybiBtZXRhVG9WYWx1ZShtZXRhKTtcbn1cbmV4cG9ydHMuZ2V0QnVpbHRpbiA9IGdldEJ1aWx0aW47XG5mdW5jdGlvbiBnZXRDdXJyZW50V2luZG93KCkge1xuICAgIGNvbnN0IGNvbW1hbmQgPSBcIlJFTU9URV9CUk9XU0VSX0dFVF9DVVJSRU5UX1dJTkRPV1wiIC8qIEJST1dTRVJfR0VUX0NVUlJFTlRfV0lORE9XICovO1xuICAgIGNvbnN0IG1ldGEgPSBlbGVjdHJvbl8xLmlwY1JlbmRlcmVyLnNlbmRTeW5jKGNvbW1hbmQsIGNvbnRleHRJZCwgZ2V0Q3VycmVudFN0YWNrKCkpO1xuICAgIHJldHVybiBtZXRhVG9WYWx1ZShtZXRhKTtcbn1cbmV4cG9ydHMuZ2V0Q3VycmVudFdpbmRvdyA9IGdldEN1cnJlbnRXaW5kb3c7XG4vLyBHZXQgY3VycmVudCBXZWJDb250ZW50cyBvYmplY3QuXG5mdW5jdGlvbiBnZXRDdXJyZW50V2ViQ29udGVudHMoKSB7XG4gICAgY29uc3QgY29tbWFuZCA9IFwiUkVNT1RFX0JST1dTRVJfR0VUX0NVUlJFTlRfV0VCX0NPTlRFTlRTXCIgLyogQlJPV1NFUl9HRVRfQ1VSUkVOVF9XRUJfQ09OVEVOVFMgKi87XG4gICAgY29uc3QgbWV0YSA9IGVsZWN0cm9uXzEuaXBjUmVuZGVyZXIuc2VuZFN5bmMoY29tbWFuZCwgY29udGV4dElkLCBnZXRDdXJyZW50U3RhY2soKSk7XG4gICAgcmV0dXJuIG1ldGFUb1ZhbHVlKG1ldGEpO1xufVxuZXhwb3J0cy5nZXRDdXJyZW50V2ViQ29udGVudHMgPSBnZXRDdXJyZW50V2ViQ29udGVudHM7XG4vLyBHZXQgYSBnbG9iYWwgb2JqZWN0IGluIGJyb3dzZXIuXG5mdW5jdGlvbiBnZXRHbG9iYWwobmFtZSkge1xuICAgIGNvbnN0IGNvbW1hbmQgPSBcIlJFTU9URV9CUk9XU0VSX0dFVF9HTE9CQUxcIiAvKiBCUk9XU0VSX0dFVF9HTE9CQUwgKi87XG4gICAgY29uc3QgbWV0YSA9IGVsZWN0cm9uXzEuaXBjUmVuZGVyZXIuc2VuZFN5bmMoY29tbWFuZCwgY29udGV4dElkLCBuYW1lLCBnZXRDdXJyZW50U3RhY2soKSk7XG4gICAgcmV0dXJuIG1ldGFUb1ZhbHVlKG1ldGEpO1xufVxuZXhwb3J0cy5nZXRHbG9iYWwgPSBnZXRHbG9iYWw7XG4vLyBHZXQgdGhlIHByb2Nlc3Mgb2JqZWN0IGluIGJyb3dzZXIuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ3Byb2Nlc3MnLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6ICgpID0+IGV4cG9ydHMuZ2V0R2xvYmFsKCdwcm9jZXNzJylcbn0pO1xuLy8gQ3JlYXRlIGEgZnVuY3Rpb24gdGhhdCB3aWxsIHJldHVybiB0aGUgc3BlY2lmaWVkIHZhbHVlIHdoZW4gY2FsbGVkIGluIGJyb3dzZXIuXG5mdW5jdGlvbiBjcmVhdGVGdW5jdGlvbldpdGhSZXR1cm5WYWx1ZShyZXR1cm5WYWx1ZSkge1xuICAgIGNvbnN0IGZ1bmMgPSAoKSA9PiByZXR1cm5WYWx1ZTtcbiAgICBpc1JldHVyblZhbHVlLmFkZChmdW5jKTtcbiAgICByZXR1cm4gZnVuYztcbn1cbmV4cG9ydHMuY3JlYXRlRnVuY3Rpb25XaXRoUmV0dXJuVmFsdWUgPSBjcmVhdGVGdW5jdGlvbldpdGhSZXR1cm5WYWx1ZTtcbmNvbnN0IGFkZEJ1aWx0aW5Qcm9wZXJ0eSA9IChuYW1lKSA9PiB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgZ2V0OiAoKSA9PiBleHBvcnRzLmdldEJ1aWx0aW4obmFtZSlcbiAgICB9KTtcbn07XG5tb2R1bGVfbmFtZXNfMS5icm93c2VyTW9kdWxlTmFtZXNcbiAgICAuZm9yRWFjaChhZGRCdWlsdGluUHJvcGVydHkpO1xuIiwgIlwidXNlIHN0cmljdFwiO1xudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH0pO1xufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIG9bazJdID0gbVtrXTtcbn0pKTtcbnZhciBfX2V4cG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9fZXhwb3J0U3RhcikgfHwgZnVuY3Rpb24obSwgZXhwb3J0cykge1xuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZXhwb3J0cywgcCkpIF9fY3JlYXRlQmluZGluZyhleHBvcnRzLCBtLCBwKTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5pZiAocHJvY2Vzcy50eXBlID09PSAnYnJvd3NlcicpXG4gICAgdGhyb3cgbmV3IEVycm9yKGBcIkBlbGVjdHJvbi9yZW1vdGVcIiBjYW5ub3QgYmUgcmVxdWlyZWQgaW4gdGhlIGJyb3dzZXIgcHJvY2Vzcy4gSW5zdGVhZCByZXF1aXJlKFwiQGVsZWN0cm9uL3JlbW90ZS9tYWluXCIpLmApO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3JlbW90ZVwiKSwgZXhwb3J0cyk7XG4iLCAibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuLi9kaXN0L3NyYy9yZW5kZXJlcicpXG4iLCAiaW1wb3J0IHsgUGx1Z2luLCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0ICogYXMgZnMgZnJvbSBcImZzXCI7XG5pbXBvcnQgKiBhcyBkb3RlbnYgZnJvbSBcImRvdGVudlwiO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHtcblx0TXlUb2RvU2V0dGluZ1RhYixcblx0REVGQVVMVF9TRVRUSU5HUyxcblx0TXlUb2RvU2V0dGluZ3MsXG59IGZyb20gXCJzcmMvc2V0dGluZ1wiO1xuaW1wb3J0IHtcblx0VklFV19UWVBFX1RPRE9fU0lERUJBUixcblx0VGFza1NpZGViYXJWaWV3LFxufSBmcm9tIFwic3JjL3JpZ2h0LXNpZGViYXItdmlld1wiO1xuaW1wb3J0IHtcblx0ZmV0Y2hUYXNrcyxcblx0Y3JlYXRlVGFzayxcblx0dXBkYXRlVGFzayxcblx0ZmV0Y2hUYXNrTGlzdHMsXG5cdGRlbGV0ZVRhc2ssXG59IGZyb20gXCJzcmMvYXBpXCI7XG5pbXBvcnQgeyBBdXRoTWFuYWdlciB9IGZyb20gXCJzcmMvYXV0aFwiO1xuaW1wb3J0IHsgVGFza1RpdGxlTW9kYWwgfSBmcm9tIFwic3JjL3Rhc2stdGl0bGUtbW9kYWxcIjtcbmltcG9ydCB7IEdlbmVyaWNTZWxlY3RNb2RhbCB9IGZyb20gXCJzcmMvc2VsZWN0LW1vZGFsXCI7XG5pbXBvcnQgeyBub3RpZnkgfSBmcm9tIFwiLi91dGlsc1wiO1xuXG4vKipcbiAqIEludGVyZmFjZSBmb3IgdGhlIHRhc2sgY2FjaGUuXG4gKi9cbmludGVyZmFjZSBUYXNrQ2FjaGUge1xuXHR0YXNrczogQXJyYXk8W3N0cmluZywgeyB0aXRsZTogc3RyaW5nOyBzdGF0dXM6IHN0cmluZzsgaWQ6IHN0cmluZyB9XT47XG5cdGxhc3RVcGRhdGVkOiBudW1iZXI7XG59XG5cbi8qKlxuICogSW50ZXJmYWNlIGZvciB0YXNrIGl0ZW0uXG4gKi9cbmludGVyZmFjZSBUYXNrSXRlbSB7XG5cdHRpdGxlOiBzdHJpbmc7XG5cdHN0YXR1czogc3RyaW5nO1xuXHRpZDogc3RyaW5nO1xufVxuXG4vKipcbiAqICBJbnRlcmZhY2UgZm9yIHRhc2sgbGlzdHMuXG4gKi9cbmludGVyZmFjZSBUYXNrTGlzdCB7XG5cdHRpdGxlOiBzdHJpbmc7XG5cdGlkOiBzdHJpbmc7XG59XG5cbi8qKlxuICogTWFpbiBwbHVnaW4gY2xhc3MgZm9yIHN5bmNpbmcgdGFza3MgYmV0d2VlbiBPYnNpZGlhbiBhbmQgTWljcm9zb2Z0IFRvXHUyMDExRG8uXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRhc2tTeW5jZXJQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuXHRzZXR0aW5nczogTXlUb2RvU2V0dGluZ3M7XG5cdHNpZGViYXJWaWV3OiBUYXNrU2lkZWJhclZpZXcgfCBudWxsID0gbnVsbDtcblx0dG9rZW5GaWxlUGF0aDogc3RyaW5nO1xuXHRhdXRoTWFuYWdlcjogQXV0aE1hbmFnZXI7XG5cdHRhc2tDYWNoZTogVGFza0NhY2hlIHwgbnVsbCA9IG51bGw7XG5cblx0LyoqXG5cdCAqIENhbGxlZCB3aGVuIHRoZSBwbHVnaW4gaXMgYWN0aXZhdGVkLlxuXHQgKiBMb2FkcyBlbnZpcm9ubWVudCB2YXJpYWJsZXMsIHNldHRpbmdzLCByZWdpc3RlcnMgdmlld3MgYW5kIGNvbW1hbmRzLCBhbmQgaW5pdGlhbGl6ZXMgYXV0aGVudGljYXRpb24uXG5cdCAqL1xuXHRhc3luYyBvbmxvYWQoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Ly8gMC4gTG9hZCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgZnJvbSB0aGUgcGx1Z2luJ3MgLmVudiBmaWxlLlxuXHRcdGNvbnN0IGJhc2VQYXRoID0gKHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIgYXMgYW55KS5iYXNlUGF0aDtcblx0XHRjb25zdCBwbHVnaW5QYXRoID0gcGF0aC5qb2luKFxuXHRcdFx0YmFzZVBhdGgsXG5cdFx0XHRcIi5vYnNpZGlhbi9wbHVnaW5zL3N5bmMtb2JzaWRpYW4tdG9kby1wbHVnaW5cIixcblx0XHQpO1xuXHRcdGRvdGVudi5jb25maWcoeyBwYXRoOiBwYXRoLmpvaW4ocGx1Z2luUGF0aCwgXCIuZW52XCIpLCBvdmVycmlkZTogdHJ1ZSB9KTtcblxuXHRcdC8vIDEuIExvYWQgc3RvcmVkIHNldHRpbmdzIChvciBkZWZhdWx0IHNldHRpbmdzIGlmIG5vbmUgZXhpc3QpLlxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cblx0XHQvLyAyLiBBZGQgdGhlIHNldHRpbmdzIHRhYi5cblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IE15VG9kb1NldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuXHRcdC8vIDMuIFJlZ2lzdGVyIHRoZSBzaWRlYmFyIHZpZXcuXG5cdFx0dGhpcy5yZWdpc3RlclZpZXcoVklFV19UWVBFX1RPRE9fU0lERUJBUiwgKGxlYWYpID0+IHtcblx0XHRcdGNvbnN0IHZpZXcgPSBuZXcgVGFza1NpZGViYXJWaWV3KGxlYWYsIHRoaXMpO1xuXHRcdFx0dGhpcy5zaWRlYmFyVmlldyA9IHZpZXc7XG5cdFx0XHRyZXR1cm4gdmlldztcblx0XHR9KTtcblxuXHRcdC8vIDQuIEluaXRpYWxpemUgY29yZSBjb21wb25lbnRzIChNU0FMIGNsaWVudCwgY29tbWFuZHMsIGV0Yy4pLlxuXHRcdHRoaXMuaW5pdGlhbGl6ZUNvbW1hbmQoKTtcblxuXHRcdC8vIDUuIEluaXRpYWxpemUgdGhlIE1TQUwgY2xpZW50XG5cdFx0dGhpcy50b2tlbkZpbGVQYXRoID0gYCR7cGx1Z2luUGF0aH0vdG9rZW5fY2FjaGUuanNvbmA7XG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MuY2xpZW50SWQgJiYgdGhpcy5zZXR0aW5ncy5jbGllbnRTZWNyZXQpIHtcblx0XHRcdHRoaXMuYXV0aE1hbmFnZXIgPSBuZXcgQXV0aE1hbmFnZXIoXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuY2xpZW50SWQsXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuY2xpZW50U2VjcmV0LFxuXHRcdFx0XHR0aGlzLnNldHRpbmdzLnJlZGlyZWN0VXJsLFxuXHRcdFx0XHR0aGlzLnRva2VuRmlsZVBhdGgsXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdC8vIDYuIFNldCB1cCB0aGUgdG9rZW4gY2FjaGUuXG5cdFx0aWYgKGZzLmV4aXN0c1N5bmModGhpcy50b2tlbkZpbGVQYXRoKSkge1xuXHRcdFx0Y29uc3QgY2FjaGVEYXRhID0gZnMucmVhZEZpbGVTeW5jKHRoaXMudG9rZW5GaWxlUGF0aCwgXCJ1dGY4XCIpO1xuXHRcdFx0dGhpcy5hdXRoTWFuYWdlci5jY2EuZ2V0VG9rZW5DYWNoZSgpLmRlc2VyaWFsaXplKGNhY2hlRGF0YSk7XG5cdFx0XHRjb25zb2xlLmxvZyhcIlRva2VuIGNhY2hlIGxvYWRlZCBmcm9tIGZpbGUuXCIpO1xuXHRcdH1cblxuXHRcdC8vIDcuIFJlZ2lzdGVyIHN0eWxlc1xuXHRcdC8vIHRoaXMucmVnaXN0ZXJTdHlsZXMocGx1Z2luUGF0aCk7XG5cdFx0dGhpcy5pbmplY3RTdHlsZXMoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBJbml0aWFsaXplcyB0aGUgTVNBTCBjbGllbnQgYW5kIHJlZ2lzdGVycyBjb21tYW5kcy9yaWJib24gaWNvbnMuXG5cdCAqL1xuXHRpbml0aWFsaXplQ29tbWFuZCgpOiB2b2lkIHtcblx0XHQvLyBSZWdpc3RlciBjb21tYW5kIHRvIG9wZW4gdGhlIHNpZGViYXIuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcIm9wZW4tbWljcm9zb2Z0LXRvZG8tc2lkZWJhclwiLFxuXHRcdFx0bmFtZTogXCJPcGVuIE1pY3Jvc29mdCBUby1EbyBTaWRlYmFyXCIsXG5cdFx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHR0aGlzLmFjdGl2YXRlU2lkZWJhcigpO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdC8vIFJlZ2lzdGVyIGludGVyYWN0aXZlIGxvZ2luIGNvbW1hbmQuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcImxvZ2luLW1pY3Jvc29mdC10b2RvXCIsXG5cdFx0XHRuYW1lOiBcIkxvZ2luIHRvIE1pY3Jvc29mdCBUby1EbyAoSW50ZXJhY3RpdmUpXCIsXG5cdFx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdG5vdGlmeShcIkxvZ2dpbmcgaW4uLi5cIik7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5hdXRoTWFuYWdlci5nZXRBY2Nlc3NUb2tlbigpO1xuXHRcdFx0XHRcdG5vdGlmeShcIkxvZ2dlZCBpbiBzdWNjZXNzZnVsbHkhXCIsIFwic3VjY2Vzc1wiKTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiQXV0aGVudGljYXRpb24gZXJyb3I6XCIsIGVycm9yKTtcblx0XHRcdFx0XHRub3RpZnkoXG5cdFx0XHRcdFx0XHRcIkVycm9yIGxvZ2luaW5nIGluISBDaGVjayB0aGUgY29uc29sZSBmb3IgZGV0YWlscy5cIixcblx0XHRcdFx0XHRcdFwiZXJyb3JcIixcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0Ly8gUmVnaXN0ZXIgdG9rZW4gcmVmcmVzaCBjb21tYW5kLlxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogXCJyZWZyZXNoLW1pY3Jvc29mdC10b2RvLXRva2VuXCIsXG5cdFx0XHRuYW1lOiBcIlJlZnJlc2ggTWljcm9zb2Z0IFRvLURvIFRva2VuXCIsXG5cdFx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGNvbnN0IHRva2VuRGF0YSA9XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmF1dGhNYW5hZ2VyLnJlZnJlc2hBY2Nlc3NUb2tlbldpdGhDQ0EoKTtcblx0XHRcdFx0XHRub3RpZnkoXCJUb2tlbiByZWZyZXNoZWQgc3VjY2Vzc2Z1bGx5IVwiLCBcInN1Y2Nlc3NcIik7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJOZXcgQWNjZXNzIFRva2VuOlwiLCB0b2tlbkRhdGEuYWNjZXNzVG9rZW4pO1xuXHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciByZWZyZXNoaW5nIHRva2VuOlwiLCBlcnJvcik7XG5cdFx0XHRcdFx0bm90aWZ5KFxuXHRcdFx0XHRcdFx0XCJFcnJvciByZWZyZXNoaW5nIHRva2VuLiBDaGVjayB0aGUgY29uc29sZSBmb3IgZGV0YWlscy5cIixcblx0XHRcdFx0XHRcdFwiZXJyb3JcIixcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0Ly8gUmVnaXN0ZXIgY29tbWFuZCB0byBmZXRjaCB0YXNrIGZyb20gc2VsZWN0ZWQgbGlzdC5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwiZ2V0LXRhc2tzLWZyb20tc2VsZWN0ZWQtbGlzdFwiLFxuXHRcdFx0bmFtZTogXCJHZXQgVGFza3MgZnJvbSBTZWxlY3RlZCBMaXN0XCIsXG5cdFx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdG5vdGlmeShcIkZldGNoaW5nIHRhc2tzLi4uXCIpO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMuZ2V0VGFza3NGcm9tU2VsZWN0ZWRMaXN0KCk7XG5cdFx0XHRcdFx0bm90aWZ5KFwiVGFza3MgZmV0Y2hlZCBzdWNjZXNzZnVsbHkhXCIsIFwic3VjY2Vzc1wiKTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFxuXHRcdFx0XHRcdFx0XCJFcnJvciBmZXRjaGluZyB0YXNrcyBmcm9tIHNlbGVjdGVkIGxpc3Q6XCIsXG5cdFx0XHRcdFx0XHRlcnJvcixcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdG5vdGlmeShcblx0XHRcdFx0XHRcdFwiRXJyb3IgZmV0Y2hpbmcgdGFza3MuIENoZWNrIHRoZSBjb25zb2xlIGZvciBkZXRhaWxzLlwiLFxuXHRcdFx0XHRcdFx0XCJlcnJvclwiLFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHQvLyBSZWdpc3RlciBjb21tYW5kIHRvIHN5bmMgdGFzayBsaXN0cyBmb3IgdGhlIGN1cnJlbnQgbm90ZS5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwicHVzaC1hbGwtdGFza3MtZnJvbS1ub3RlXCIsXG5cdFx0XHRuYW1lOiBcIlB1c2ggQWxsIFRhc2tzIGZyb20gTm90ZSB0byBNaWNyb3NvZnQgVG8tRG9cIixcblx0XHRcdGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0bm90aWZ5KFwiU3luY2luZyB0YXNrcyB0byBNaWNyb3NvZnQgVG8tRG8uLi5cIik7XG5cdFx0XHRcdFx0Y29uc3QgdGFza3NDb3VudCA9IGF3YWl0IHRoaXMucHVzaFRhc2tzRnJvbU5vdGUoKTtcblx0XHRcdFx0XHRub3RpZnkoXG5cdFx0XHRcdFx0XHRgVGFza3Mgc3luY2VkIHN1Y2Nlc3NmdWxseSEgJHt0YXNrc0NvdW50fSBuZXcgdGFza3MgYWRkZWQuYCxcblx0XHRcdFx0XHRcdFwic3VjY2Vzc1wiLFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5yZWZyZXNoVmlld0FuZENhY2hlKCk7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIHB1c2hpbmcgdGFza3M6XCIsIGVycm9yKTtcblx0XHRcdFx0XHRub3RpZnkoXG5cdFx0XHRcdFx0XHRcIkVycm9yIHB1c2hpbmcgdGFza3MuIENoZWNrIHRoZSBjb25zb2xlIGZvciBkZXRhaWxzLlwiLFxuXHRcdFx0XHRcdFx0XCJlcnJvclwiLFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwicHVzaC1vbmUtdGFza1wiLFxuXHRcdFx0bmFtZTogXCJDcmVhdGUgYW5kIHB1c2ggVGFza1wiLFxuXHRcdFx0Y2FsbGJhY2s6IGFzeW5jICgpID0+IHtcblx0XHRcdFx0bmV3IFRhc2tUaXRsZU1vZGFsKHRoaXMuYXBwLCBhc3luYyAodGFza1RpdGxlOiBzdHJpbmcpID0+IHtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0bm90aWZ5KFwiUHVzaGluZyB0YXNrcyB0byBNaWNyb3NvZnQgVG8tRG8uLi5cIik7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnB1c2hPbmVUYXNrKHRhc2tUaXRsZSk7XG5cdFx0XHRcdFx0XHRub3RpZnkoYFRhc2tzIHB1c2hlZCBzdWNjZXNzZnVsbHkhYCwgXCJzdWNjZXNzXCIpO1xuXHRcdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3IgcHVzaGluZyB0YXNrczpcIiwgZXJyb3IpO1xuXHRcdFx0XHRcdFx0bm90aWZ5KFxuXHRcdFx0XHRcdFx0XHRcIkVycm9yIHB1c2hpbmcgdGFza3MuIENoZWNrIHRoZSBjb25zb2xlIGZvciBkZXRhaWxzLlwiLFxuXHRcdFx0XHRcdFx0XHRcImVycm9yXCIsXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSkub3BlbigpO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogXCJzaG93LW5vdC1zdGFydGVkLXRhc2tzXCIsXG5cdFx0XHRuYW1lOiBcIlNob3cgVGFza3MgTGlzdFwiLFxuXHRcdFx0Y2FsbGJhY2s6IGFzeW5jICgpID0+IHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLm9wZW5UYXNrQ29tcGxldGVNb2RhbCgpO1xuXHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjb21wbGV0aW5nIHRhc2s6XCIsIGVycm9yKTtcblx0XHRcdFx0XHRub3RpZnkoXG5cdFx0XHRcdFx0XHRcIkVycm9yIGNvbXBsZXRpbmcgdGFzay4gQ2hlY2sgdGhlIGNvbnNvbGUgZm9yIGRldGFpbHMuXCIsXG5cdFx0XHRcdFx0XHRcImVycm9yXCIsXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogXCJzZWxlY3QtdGFzay1saXN0XCIsXG5cdFx0XHRuYW1lOiBcIlNlbGVjdCBUYXNrIExpc3RcIixcblx0XHRcdGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0bm90aWZ5KFwiU2VsZWN0aW5nIHRhc2sgbGlzdC4uLlwiKTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLm9wZW5UYXNrTGlzdHNNb2RhbCgpO1xuXHRcdFx0XHRcdG5vdGlmeShcIlRhc2sgbGlzdCBzZWxlY3RlZCBzdWNjZXNzZnVsbHkhXCIsIFwic3VjY2Vzc1wiKTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3Igc2VsZWN0aW5nIHRhc2sgbGlzdDpcIiwgZXJyb3IpO1xuXHRcdFx0XHRcdG5vdGlmeShcblx0XHRcdFx0XHRcdFwiRXJyb3Igc2VsZWN0aW5nIHRhc2sgbGlzdC4gQ2hlY2sgdGhlIGNvbnNvbGUgZm9yIGRldGFpbHMuXCIsXG5cdFx0XHRcdFx0XHRcImVycm9yXCIsXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogXCJvcmdhbml6ZS10YXNrc1wiLFxuXHRcdFx0bmFtZTogXCJPcmdhbml6ZSBUYXNrcyBmcm9tIEFsbCBOb3Rlc1wiLFxuXHRcdFx0Y2FsbGJhY2s6IGFzeW5jICgpID0+IHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmdhdGhlclRhc2tzKCk7XG5cdFx0XHRcdFx0bm90aWZ5KFwiVGFza3Mgb3JnYW5pemVkIHN1Y2Nlc3NmdWxseSFcIiwgXCJzdWNjZXNzXCIpO1xuXHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciBvcmdhbml6aW5nIHRhc2tzOlwiLCBlcnJvcik7XG5cdFx0XHRcdFx0bm90aWZ5KFxuXHRcdFx0XHRcdFx0XCJFcnJvciBvcmdhbml6aW5nIHRhc2tzLiBDaGVjayB0aGUgY29uc29sZSBmb3IgZGV0YWlscy5cIixcblx0XHRcdFx0XHRcdFwiZXJyb3JcIixcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcImRlbGV0ZS1jb21wbGV0ZWQtdGFza3NcIixcblx0XHRcdG5hbWU6IFwiRGVsZXRlIENvbXBsZXRlZCBUYXNrc1wiLFxuXHRcdFx0Y2FsbGJhY2s6IGFzeW5jICgpID0+IHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRub3RpZnkoXCJEZWxldGluZyBjb21wbGV0ZWQgdGFza3MuLi5cIik7XG5cdFx0XHRcdFx0Y29uc3QgZGVsZXRlZENvdW50ID0gYXdhaXQgdGhpcy5kZWxldGVBbGxDb21wbGV0ZWRUYXNrcygpO1xuXHRcdFx0XHRcdG5vdGlmeShcblx0XHRcdFx0XHRcdGAke2RlbGV0ZWRDb3VudH0gY29tcGxldGVkIHRhc2tzIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5IWAsXG5cdFx0XHRcdFx0XHRcInN1Y2Nlc3NcIixcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkZWxldGluZyBjb21wbGV0ZWQgdGFza3M6XCIsIGVycm9yKTtcblx0XHRcdFx0XHRub3RpZnkoXG5cdFx0XHRcdFx0XHRcIkVycm9yIGRlbGV0aW5nIHRhc2tzLiBDaGVjayB0aGUgY29uc29sZSBmb3IgZGV0YWlscy5cIixcblx0XHRcdFx0XHRcdFwiZXJyb3JcIixcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcInRlc3RpbmdcIixcblx0XHRcdG5hbWU6IFwiVGVzdGluZ1wiLFxuXHRcdFx0Y2FsbGJhY2s6IGFzeW5jICgpID0+IHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIlRlc3RpbmdcIik7XG5cdFx0XHRcdFx0bm90aWZ5KFwiVGVzdGluZy4uLlwiLCBcInN1Y2Nlc3NcIik7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIHRlc3Rpbmc6XCIsIGVycm9yKTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBJbmplY3RzIGN1c3RvbSBDU1Mgc3R5bGVzIGludG8gdGhlIGRvY3VtZW50LlxuXHQgKi9cblx0aW5qZWN0U3R5bGVzKCkge1xuXHRcdGNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuXHRcdHN0eWxlLnRleHRDb250ZW50ID0gYFxuXHRcdC50YXNrLWxpbmUge1xuXHRcdFx0ZGlzcGxheTogZmxleDtcblx0XHRcdGFsaWduLWl0ZW1zOiBjZW50ZXI7XG5cdFx0XHRnYXA6IDhweDtcblx0XHRcdHBhZGRpbmc6IDJweCAwO1xuXHRcdH1cblxuXHRcdC50YXNrLWxpbmUgaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdIHtcblx0XHRcdG1hcmdpbjogMDtcblx0XHRcdHRyYW5zZm9ybTogc2NhbGUoMS4xKTtcblx0XHR9XG5cblx0XHQudGFzay1saW5lIHNwYW4ge1xuXHRcdFx0Zm9udC1zaXplOiAxNHB4O1xuXHRcdH1cblx0YDtcblx0XHRkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBBY3RpdmF0ZXMgdGhlIHNpZGViYXIgdmlldy5cblx0ICovXG5cdGFzeW5jIGFjdGl2YXRlU2lkZWJhcigpIHtcblx0XHRjb25zdCByaWdodExlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKTtcblx0XHRpZiAoIXJpZ2h0TGVhZikge1xuXHRcdFx0Y29uc29sZS53YXJuKFwiTm8gcmlnaHQgbGVhZiBhdmFpbGFibGUuXCIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGF3YWl0IHJpZ2h0TGVhZi5zZXRWaWV3U3RhdGUoe1xuXHRcdFx0dHlwZTogVklFV19UWVBFX1RPRE9fU0lERUJBUixcblx0XHRcdGFjdGl2ZTogdHJ1ZSxcblx0XHR9KTtcblxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKHJpZ2h0TGVhZik7XG5cdH1cblx0LyoqXG5cdCAqIExvYWRzIHBsdWdpbiBzZXR0aW5ncyBmcm9tIHRoZSBPYnNpZGlhbiB2YXVsdC5cblx0ICovXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbihcblx0XHRcdHt9LFxuXHRcdFx0REVGQVVMVF9TRVRUSU5HUyxcblx0XHRcdGF3YWl0IHRoaXMubG9hZERhdGEoKSxcblx0XHQpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFNhdmVzIHBsdWdpbiBzZXR0aW5ncyB0byB0aGUgT2JzaWRpYW4gdmF1bHQuXG5cdCAqL1xuXHRhc3luYyBzYXZlU2V0dGluZ3MoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0fVxuXG5cdGFzeW5jIGdldEFjY2Vzc1Rva2VuKCk6IFByb21pc2U8c3RyaW5nPiB7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHRva2VuRGF0YSA9IGF3YWl0IHRoaXMuYXV0aE1hbmFnZXIuZ2V0VG9rZW4oKTtcblx0XHRcdHJldHVybiB0b2tlbkRhdGEuYWNjZXNzVG9rZW47XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBhY2Nlc3MgdG9rZW46XCIsIGVycm9yKTtcblx0XHRcdHRocm93IGVycm9yO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBGZXRjaGVzIGF2YWlsYWJsZSBNaWNyb3NvZnQgVG8tRG8gdGFzayBsaXN0cyBhbmQgdXBkYXRlcyB0aGUgcGx1Z2luIHNldHRpbmdzLlxuXHQgKi9cblx0YXN5bmMgbG9hZEF2YWlsYWJsZVRhc2tMaXN0cygpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRub3RpZnkoXCJMb2FkaW5nIHRhc2sgbGlzdHMuLi5cIik7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGFjY2Vzc1Rva2VuID0gYXdhaXQgdGhpcy5nZXRBY2Nlc3NUb2tlbigpO1xuXHRcdFx0Y29uc3QgbGlzdEFycmF5ID0gYXdhaXQgZmV0Y2hUYXNrTGlzdHMoYWNjZXNzVG9rZW4pO1xuXHRcdFx0Y29uc29sZS5sb2coXCJGZXRjaGVkIFRhc2sgTGlzdHM6XCIsIGxpc3RBcnJheSk7XG5cblx0XHRcdHRoaXMuc2V0dGluZ3MudGFza0xpc3RzID0gbGlzdEFycmF5Lm1hcCgobGlzdCkgPT4gKHtcblx0XHRcdFx0aWQ6IGxpc3QuaWQsXG5cdFx0XHRcdHRpdGxlOiBsaXN0LnRpdGxlLFxuXHRcdFx0fSkpO1xuXG5cdFx0XHRub3RpZnkoXCJUYXNrIGxpc3RzIGxvYWRlZCBzdWNjZXNzZnVsbHkhXCIsIFwic3VjY2Vzc1wiKTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciBsb2FkaW5nIHRhc2sgbGlzdHM6XCIsIGVycik7XG5cdFx0XHRub3RpZnkoXG5cdFx0XHRcdFwiRXJyb3IgbG9hZGluZyB0YXNrIGxpc3RzLiBDaGVjayB0aGUgY29uc29sZSBmb3IgZGV0YWlscy5cIixcblx0XHRcdFx0XCJlcnJvclwiLFxuXHRcdFx0KTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogR2V0IHRhc2sgbGlzdHMgdXNpbmcgYWNjZXNzIHRva2VuIHdpdGggZmV0Y2hUYXNrTGlzdHMgYXBpIGZ1bmN0aW9uLlxuXHQgKiBAcmV0dXJucyBBIFRhc2tMaXN0IGludGVyZmFjZSB3aXRoIGZldGNoZWQgdGFzayBsaXN0cy5cblx0ICogKi9cblx0YXN5bmMgZ2V0VGFza0xpc3RzKCk6IFByb21pc2U8VGFza0xpc3RbXT4ge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBhY2Nlc3NUb2tlbiA9IGF3YWl0IHRoaXMuZ2V0QWNjZXNzVG9rZW4oKTtcblx0XHRcdGNvbnN0IHRhc2tMaXN0cyA9IGF3YWl0IGZldGNoVGFza0xpc3RzKGFjY2Vzc1Rva2VuKTtcblx0XHRcdHJldHVybiB0YXNrTGlzdHM7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyB0YXNrIGxpc3RzOlwiLCBlcnJvcik7XG5cdFx0XHR0aHJvdyBlcnJvcjtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogRmV0Y2hlcyB0YXNrcyBmcm9tIHRoZSBzZWxlY3RlZCBNaWNyb3NvZnQgVG9cdTIwMTFEbyBsaXN0LlxuXHQgKiBAcmV0dXJucyBBIG1hcCBvZiB0YXNrIHRpdGxlIHRvIGFuIG9iamVjdCBjb250YWluaW5nIHRhc2sgZGV0YWlscy5cblx0ICovXG5cdGFzeW5jIGdldFRhc2tzRnJvbVNlbGVjdGVkTGlzdCgpOiBQcm9taXNlPFxuXHRcdE1hcDxzdHJpbmcsIHsgdGl0bGU6IHN0cmluZzsgc3RhdHVzOiBzdHJpbmc7IGlkOiBzdHJpbmcgfT5cblx0PiB7XG5cdFx0aWYgKCF0aGlzLnNldHRpbmdzLnNlbGVjdGVkVGFza0xpc3RJZCkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFxuXHRcdFx0XHRcIk5vIHRhc2sgbGlzdCBzZWxlY3RlZC4gUGxlYXNlIGNob29zZSBvbmUgaW4gc2V0dGluZ3MuXCIsXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLnRhc2tDYWNoZSAmJiB0aGlzLnRhc2tDYWNoZS50YXNrcykge1xuXHRcdFx0Y29uc29sZS5sb2coXCJVc2luZyBjYWNoZWQgdGFza3M6XCIsIHRoaXMudGFza0NhY2hlLnRhc2tzKTtcblx0XHRcdHJldHVybiBuZXcgTWFwKHRoaXMudGFza0NhY2hlLnRhc2tzKTtcblx0XHR9XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnNvbGUubG9nKFwiTm8gY2FjaGVkIHRhc2tzIGZvdW5kLCByZWZyZXNoaW5nIHRhc2sgY2FjaGUuXCIpO1xuXHRcdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVmcmVzaFRhc2tDYWNoZSgpO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgdGFza3M6XCIsIGVycm9yKTtcblx0XHRcdHRocm93IGVycm9yO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBQdXNoZXMgdGFza3MgZnJvbSB0aGUgYWN0aXZlIG5vdGUgdG8gTWljcm9zb2Z0IFRvXHUyMDExRG8uXG5cdCAqIEByZXR1cm5zIFRoZSBudW1iZXIgb2YgbmV3IHRhc2tzIGNyZWF0ZWQuXG5cdCAqL1xuXHRhc3luYyBwdXNoVGFza3NGcm9tTm90ZSgpOiBQcm9taXNlPG51bWJlcj4ge1xuXHRcdC8vIEVuc3VyZSBhIHRhc2sgbGlzdCBpcyBzZWxlY3RlZC5cblx0XHRpZiAoIXRoaXMuc2V0dGluZ3Muc2VsZWN0ZWRUYXNrTGlzdElkKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXG5cdFx0XHRcdFwiTm8gdGFzayBsaXN0IHNlbGVjdGVkLiBQbGVhc2UgY2hvb3NlIG9uZSBpbiBzZXR0aW5ncy5cIixcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0Ly8gR2V0IHRoZSBhY3RpdmUgbm90ZS5cblx0XHRjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcblx0XHRpZiAoIWFjdGl2ZUZpbGUpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIk5vIGFjdGl2ZSBmaWxlIGZvdW5kLlwiKTtcblx0XHR9XG5cblx0XHQvLyBSZWFkIG5vdGUgY29udGVudCBhbmQgZXh0cmFjdCB0YXNrcyB1c2luZyBhIHJlZ2V4LlxuXHRcdGNvbnN0IGZpbGVDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChhY3RpdmVGaWxlKTtcblx0XHRjb25zdCB0YXNrUmVnZXggPSAvXi1cXHMqXFxbKCB8eClcXF1cXHMrKC4rKSQvZ207XG5cdFx0Y29uc3Qgbm90ZVRhc2tzOiBBcnJheTx7IHRpdGxlOiBzdHJpbmc7IGNvbXBsZXRlOiBib29sZWFuIH0+ID0gW107XG5cdFx0bGV0IG1hdGNoO1xuXHRcdHdoaWxlICgobWF0Y2ggPSB0YXNrUmVnZXguZXhlYyhmaWxlQ29udGVudCkpICE9PSBudWxsKSB7XG5cdFx0XHRjb25zdCBjb21wbGV0ZSA9IG1hdGNoWzFdID09PSBcInhcIjtcblx0XHRcdGNvbnN0IHRpdGxlID0gbWF0Y2hbMl0udHJpbSgpO1xuXHRcdFx0bm90ZVRhc2tzLnB1c2goeyB0aXRsZSwgY29tcGxldGUgfSk7XG5cdFx0fVxuXHRcdGlmIChub3RlVGFza3MubGVuZ3RoID09PSAwKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJObyB0YXNrcyBmb3VuZCBpbiB0aGUgYWN0aXZlIG5vdGUuXCIpO1xuXHRcdH1cblxuXHRcdHRyeSB7XG5cdFx0XHQvLyBHZXQgYSBmcmVzaCBhY2Nlc3MgdG9rZW4uXG5cdFx0XHRjb25zdCBhY2Nlc3NUb2tlbiA9IGF3YWl0IHRoaXMuZ2V0QWNjZXNzVG9rZW4oKTtcblx0XHRcdC8vIEZldGNoIGV4aXN0aW5nIHRhc2tzIGZyb20gTWljcm9zb2Z0IFRvXHUyMDExRG8gdmlhIEFQSS5cblx0XHRcdGNvbnN0IGV4aXN0aW5nVGFza3MgPSBhd2FpdCBmZXRjaFRhc2tzKHRoaXMuc2V0dGluZ3MsIGFjY2Vzc1Rva2VuKTtcblx0XHRcdGxldCBuZXdUYXNrc0NvdW50ID0gMDtcblxuXHRcdFx0Ly8gTG9vcCBvdmVyIGVhY2ggbm90ZSB0YXNrLlxuXHRcdFx0Zm9yIChjb25zdCB0YXNrIG9mIG5vdGVUYXNrcykge1xuXHRcdFx0XHRjb25zdCBleGlzdGluZ1Rhc2sgPSBleGlzdGluZ1Rhc2tzLmdldCh0YXNrLnRpdGxlKTtcblx0XHRcdFx0aWYgKGV4aXN0aW5nVGFzaykge1xuXHRcdFx0XHRcdC8vIElmIHRoZSB0YXNrIGV4aXN0cyBhbmQgdGhlIG5vdGUgbWFya3MgaXQgYXMgY29tcGxldGUgd2hpbGUgaXRzIHN0YXR1cyBpcyBub3QgY29tcGxldGUsIHVwZGF0ZSBpdC5cblx0XHRcdFx0XHRpZiAodGFzay5jb21wbGV0ZSAmJiBleGlzdGluZ1Rhc2suc3RhdHVzICE9PSBcImNvbXBsZXRlZFwiKSB7XG5cdFx0XHRcdFx0XHRhd2FpdCB1cGRhdGVUYXNrKFxuXHRcdFx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLFxuXHRcdFx0XHRcdFx0XHRhY2Nlc3NUb2tlbixcblx0XHRcdFx0XHRcdFx0ZXhpc3RpbmdUYXNrLmlkLFxuXHRcdFx0XHRcdFx0XHR0cnVlLFxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coYFRhc2sgYWxyZWFkeSBleGlzdHM6ICR7dGFzay50aXRsZX1gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBJZiB0aGUgdGFzayBkb2Vzbid0IGV4aXN0LCBjcmVhdGUgaXQgd2l0aCB0aGUgYXBwcm9wcmlhdGUgc3RhdHVzLlxuXHRcdFx0XHRjb25zdCBpbml0aWFsU3RhdHVzID0gdGFzay5jb21wbGV0ZVxuXHRcdFx0XHRcdD8gXCJjb21wbGV0ZWRcIlxuXHRcdFx0XHRcdDogXCJub3RTdGFydGVkXCI7XG5cdFx0XHRcdGF3YWl0IGNyZWF0ZVRhc2soXG5cdFx0XHRcdFx0dGhpcy5zZXR0aW5ncyxcblx0XHRcdFx0XHRhY2Nlc3NUb2tlbixcblx0XHRcdFx0XHR0YXNrLnRpdGxlLFxuXHRcdFx0XHRcdGluaXRpYWxTdGF0dXMsXG5cdFx0XHRcdCk7XG5cdFx0XHRcdG5ld1Rhc2tzQ291bnQrKztcblx0XHRcdH1cblx0XHRcdGNvbnNvbGUubG9nKFwiU3luY2VkIFRhc2tzOlwiLCBub3RlVGFza3MpO1xuXHRcdFx0cmV0dXJuIG5ld1Rhc2tzQ291bnQ7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciBzeW5jaW5nIHRhc2tzOlwiLCBlcnJvcik7XG5cdFx0XHR0aHJvdyBlcnJvcjtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogUHVzaGVzIGEgc2luZ2xlIHRhc2sgdG8gc2VsZWN0ZWQgbGlzdCBpbiBNaWNyb3NvZnQgVG9cdTIwMTFEby5cblx0ICogQHBhcmFtIHRhc2sgLSBUaGUgdGFzayB0aXRsZSB0ZXh0IHRvIHB1c2guXG5cdCAqL1xuXHRhc3luYyBwdXNoT25lVGFzayh0YXNrOiBzdHJpbmcpIHtcblx0XHRpZiAoIXRoaXMuc2V0dGluZ3Muc2VsZWN0ZWRUYXNrTGlzdElkKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXG5cdFx0XHRcdFwiTm8gdGFzayBsaXN0IHNlbGVjdGVkLiBQbGVhc2UgY2hvb3NlIG9uZSBpbiBzZXR0aW5ncy5cIixcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGFjY2Vzc1Rva2VuID0gYXdhaXQgdGhpcy5nZXRBY2Nlc3NUb2tlbigpO1xuXHRcdFx0Y29uc3QgZXhpc3RpbmdUYXNrcyA9IGF3YWl0IGZldGNoVGFza3ModGhpcy5zZXR0aW5ncywgYWNjZXNzVG9rZW4pO1xuXHRcdFx0Y29uc3QgZXhpc3RpbmdUYXNrID0gZXhpc3RpbmdUYXNrcy5nZXQodGFzayk7XG5cblx0XHRcdGlmIChleGlzdGluZ1Rhc2spIHtcblx0XHRcdFx0Y29uc29sZS5sb2coYFRhc2sgYWxyZWFkeSBleGlzdHM6ICR7dGFza31gKTtcblx0XHRcdH1cblxuXHRcdFx0YXdhaXQgY3JlYXRlVGFzayh0aGlzLnNldHRpbmdzLCBhY2Nlc3NUb2tlbiwgdGFzayk7XG5cdFx0XHRhd2FpdCB0aGlzLnJlZnJlc2hWaWV3QW5kQ2FjaGUoKTtcblx0XHRcdGNvbnNvbGUubG9nKFwiU3luY2VkIFRhc2tzOlwiLCB0YXNrKTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIHN5bmNpbmcgdGFza3M6XCIsIGVycm9yKTtcblx0XHRcdHRocm93IGVycm9yO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBHYXRoZXJzIHRhc2tzIGZyb20gYWxsIG1hcmtkb3duIGZpbGVzIGluIHRoZSB2YXVsdCBhbmQgdXBkYXRlcyAob3IgY3JlYXRlcykgYSBjb25zb2xpZGF0ZWQgbm90ZS5cblx0ICogQHJldHVybnMgQSBtYXAgb2YgdGFzayB0ZXh0IHRvIGl0cyBjdXJyZW50IHN0YXRlLlxuXHQgKi9cblx0YXN5bmMgZ2F0aGVyVGFza3MoKTogUHJvbWlzZTxNYXA8c3RyaW5nLCBzdHJpbmc+PiB7XG5cdFx0Y29uc3Qgbm90ZU5hbWUgPSBcIlRhc2tzIExpc3QubWRcIjtcblx0XHRjb25zdCBtYXJrZG93bkZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuXHRcdGNvbnN0IHRhc2tzTWFwID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZz4oKTtcblxuXHRcdC8vIFJlZ2V4IHRvIG1hdGNoIGJvdGggdW5kb25lICgtIFsgXSkgYW5kIGRvbmUgKC0gW3hdKSB0YXNrcywgYWxsb3dpbmcgb3B0aW9uYWwgbGVhZGluZyBzcGFjZXMuXG5cdFx0Y29uc3QgdGFza1JlZ2V4ID0gL15cXHMqLVxccypcXFsoIHx4KVxcXVxccysoLiopJC9nbTtcblxuXHRcdC8vIExvb3AgdGhyb3VnaCBldmVyeSBmaWxlIGluIHRoZSB2YXVsdC5cblx0XHRmb3IgKGNvbnN0IGZpbGUgb2YgbWFya2Rvd25GaWxlcykge1xuXHRcdFx0Y29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG5cdFx0XHRsZXQgbWF0Y2g7XG5cdFx0XHR3aGlsZSAoKG1hdGNoID0gdGFza1JlZ2V4LmV4ZWMoY29udGVudCkpICE9PSBudWxsKSB7XG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKFwiTWF0Y2g6XCIsIG1hdGNoKTtcblx0XHRcdFx0Ly8gbWF0Y2hbMV0gaXMgZWl0aGVyIFwiIFwiICh1bmRvbmUpIG9yIFwieFwiIChkb25lKVxuXHRcdFx0XHQvLyBtYXRjaFsyXSBpcyB0aGUgdGFzayB0ZXh0XG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRTdGF0ZSA9IG1hdGNoWzFdID09PSBcInhcIiA/IFwiW3hdXCIgOiBcIlsgXVwiO1xuXHRcdFx0XHRjb25zdCB0YXNrVGV4dCA9IG1hdGNoWzJdLnRyaW0oKTtcblxuXHRcdFx0XHQvLyBJZiB0aGUgdGFzayBhbHJlYWR5IGV4aXN0cyBhbmQgYW55IG9jY3VycmVuY2UgaXMgZG9uZSwgbWFyayBpdCBhcyBkb25lLlxuXHRcdFx0XHRpZiAodGFza3NNYXAuaGFzKHRhc2tUZXh0KSkge1xuXHRcdFx0XHRcdGlmIChjdXJyZW50U3RhdGUgPT09IFwiW3hdXCIpIHtcblx0XHRcdFx0XHRcdHRhc2tzTWFwLnNldCh0YXNrVGV4dCwgXCJbeF1cIik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRhc2tzTWFwLnNldCh0YXNrVGV4dCwgY3VycmVudFN0YXRlKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEJ1aWxkIHRoZSBuZXcgY29uc29saWRhdGVkIGNvbnRlbnQuXG5cdFx0Y29uc3QgZmluYWxUYXNrcyA9IEFycmF5LmZyb20odGFza3NNYXAuZW50cmllcygpKS5tYXAoXG5cdFx0XHQoW3Rhc2tUZXh0LCBzdGF0ZV0pID0+IGAtICR7c3RhdGV9ICR7dGFza1RleHR9YCxcblx0XHQpO1xuXHRcdGNvbnN0IG5ld0NvbnRlbnQgPSBmaW5hbFRhc2tzLmpvaW4oXCJcXG5cIik7XG5cblx0XHQvLyBVcGRhdGUgb3IgY3JlYXRlIHRoZSBjb25zb2xpZGF0ZWQgbm90ZS5cblx0XHRjb25zdCB0YXJnZXRGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5vdGVOYW1lKTtcblx0XHRpZiAoIXRhcmdldEZpbGUpIHtcblx0XHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShub3RlTmFtZSwgbmV3Q29udGVudCk7XG5cdFx0fSBlbHNlIGlmICh0YXJnZXRGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcblx0XHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeSh0YXJnZXRGaWxlLCBuZXdDb250ZW50KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBmaWxlIHR5cGUgZm9yIFRhc2tzIExpc3RcIik7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRhc2tzTWFwO1xuXHR9XG5cblx0LyoqXG5cdCAqIE9wZW4gYSBpbnRlcmFjdGl2ZSB3aW5kb3cgZm9yIHRoZSB1c2VyIHRvIGludGVyYWN0IGFuZCBzZWxlY3QgYSB0YXJnZXQgdGFzayBsaXN0LlxuXHQgKi9cblx0YXN5bmMgb3BlblRhc2tMaXN0c01vZGFsKCkge1xuXHRcdGNvbnN0IHRhc2tzTGlzdHMgPSB0aGlzLnNldHRpbmdzLnRhc2tMaXN0cztcblxuXHRcdGNvbnNvbGUubG9nKFwiVGFzayBMaXN0czpcIiwgdGFza3NMaXN0cyk7XG5cdFx0bmV3IEdlbmVyaWNTZWxlY3RNb2RhbDxUYXNrTGlzdD4oXG5cdFx0XHR0aGlzLmFwcCxcblx0XHRcdHRhc2tzTGlzdHMsXG5cdFx0XHQodGFza0xpc3QpID0+IHRhc2tMaXN0LnRpdGxlLFxuXHRcdFx0YXN5bmMgKHRhc2tMaXN0OiBUYXNrTGlzdCkgPT4ge1xuXHRcdFx0XHR0aGlzLnNldHRpbmdzLnNlbGVjdGVkVGFza0xpc3RJZCA9IHRhc2tMaXN0LmlkO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnJlZnJlc2hWaWV3QW5kQ2FjaGUoKTtcblx0XHRcdH0sXG5cdFx0KS5vcGVuKCk7XG5cdH1cblxuXHQvKipcblx0ICogT3BlbiBhIGludGVyYWN0aXZlIHdpbmRvdyBmb3IgdGhlIHVzZXIgdG8gaW50ZXJhY3QgYW5kIHNlbGVjdCB0byBjb21wbGV0ZSB0YXNrIGl0ZW1zLlxuXHQgKi9cblx0YXN5bmMgb3BlblRhc2tDb21wbGV0ZU1vZGFsKCkge1xuXHRcdGNvbnN0IHRhc2tzTWFwID0gYXdhaXQgdGhpcy5nZXRUYXNrc0Zyb21TZWxlY3RlZExpc3QoKTtcblx0XHRjb25zdCBub3RTdGFydGVkVGFza3MgPSBBcnJheS5mcm9tKHRhc2tzTWFwLnZhbHVlcygpKS5maWx0ZXIoXG5cdFx0XHQodGFzaykgPT4gdGFzay5zdGF0dXMgIT09IFwiY29tcGxldGVkXCIsXG5cdFx0KTtcblxuXHRcdG5ldyBHZW5lcmljU2VsZWN0TW9kYWw8VGFza0l0ZW0+KFxuXHRcdFx0dGhpcy5hcHAsXG5cdFx0XHRub3RTdGFydGVkVGFza3MsXG5cdFx0XHQodGFzaykgPT4gKHRhc2suc3RhdHVzICE9PSBcImNvbXBsZXRlZFwiID8gdGFzay50aXRsZSA6IFwiXCIpLFxuXHRcdFx0YXN5bmMgKHRhc2s6IHsgdGl0bGU6IHN0cmluZzsgc3RhdHVzOiBzdHJpbmc7IGlkOiBzdHJpbmcgfSkgPT4ge1xuXHRcdFx0XHRjb25zdCBhY2Nlc3NUb2tlbiA9IGF3YWl0IHRoaXMuZ2V0QWNjZXNzVG9rZW4oKTtcblxuXHRcdFx0XHRhd2FpdCB1cGRhdGVUYXNrKHRoaXMuc2V0dGluZ3MsIGFjY2Vzc1Rva2VuLCB0YXNrLmlkLCB0cnVlKTtcblx0XHRcdFx0bm90aWZ5KFxuXHRcdFx0XHRcdGBUYXNrIFwiJHt0YXNrLnRpdGxlfVwiIG1hcmtlZCBhcyBjb21wbGV0ZSBhbmQgc3luY2VkLmAsXG5cdFx0XHRcdFx0XCJzdWNjZXNzXCIsXG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0YXdhaXQgdGhpcy5yZWZyZXNoVmlld0FuZENhY2hlKCk7XG5cdFx0XHR9LFxuXHRcdCkub3BlbigpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEZldGNoIHRhc2sgdXNpbmcgYXBpIGZ1bmN0aW9uIGFuZCBzdG9yZSBpbiB0aGUgY2FjaGUgZm9yIHF1aWNrIGFjY2Vzcy5cblx0ICovXG5cdGFzeW5jIHJlZnJlc2hUYXNrQ2FjaGUoKTogUHJvbWlzZTxcblx0XHRNYXA8c3RyaW5nLCB7IHRpdGxlOiBzdHJpbmc7IHN0YXR1czogc3RyaW5nOyBpZDogc3RyaW5nIH0+XG5cdD4ge1xuXHRcdGlmICghdGhpcy5zZXR0aW5ncy5zZWxlY3RlZFRhc2tMaXN0SWQpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcblx0XHRcdFx0XCJObyB0YXNrIGxpc3Qgc2VsZWN0ZWQuIFBsZWFzZSBjaG9vc2Ugb25lIGluIHNldHRpbmdzLlwiLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgYWNjZXNzVG9rZW4gPSBhd2FpdCB0aGlzLmdldEFjY2Vzc1Rva2VuKCk7XG5cdFx0XHRjb25zdCB0YXNrcyA9IGF3YWl0IGZldGNoVGFza3ModGhpcy5zZXR0aW5ncywgYWNjZXNzVG9rZW4pO1xuXHRcdFx0Y29uc29sZS5sb2coXCJGZXRjaGVkIFRhc2tzOlwiLCB0YXNrcyk7XG5cblx0XHRcdGNvbnN0IGN1cnJlbnREYXRhID0gKGF3YWl0IHRoaXMubG9hZERhdGEoKSkgfHwge307XG5cdFx0XHRjdXJyZW50RGF0YS50YXNrcyA9IEFycmF5LmZyb20odGFza3MuZW50cmllcygpKTtcblxuXHRcdFx0dGhpcy50YXNrQ2FjaGUgPSBjdXJyZW50RGF0YTtcblx0XHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEoY3VycmVudERhdGEpO1xuXG5cdFx0XHRyZXR1cm4gdGFza3M7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyB0YXNrczpcIiwgZXJyb3IpO1xuXHRcdFx0dGhyb3cgZXJyb3I7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFVzZSB0aGUgZGVsZXRlVGFzayBhcGkgZnVuY3Rpb24gdG8gZGVsZXRlIGFsbCBjb21wbGV0ZWQgdGFzayBpbiB0aGUgdGFyZ2V0ZWQgdGFzayBsaXN0LlxuXHQgKiBAcmV0dXJucyBBbW91bnQgb2YgZGVsZXRlZCB0YXNrcy5cblx0ICovXG5cdGFzeW5jIGRlbGV0ZUFsbENvbXBsZXRlZFRhc2tzKCk6IFByb21pc2U8bnVtYmVyPiB7XG5cdFx0aWYgKCF0aGlzLnNldHRpbmdzLnNlbGVjdGVkVGFza0xpc3RJZCkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFxuXHRcdFx0XHRcIk5vIHRhc2sgbGlzdCBzZWxlY3RlZC4gUGxlYXNlIGNob29zZSBvbmUgaW4gc2V0dGluZ3MuXCIsXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdGxldCBkZWxldGVkVGFza3NDb3VudCA9IDA7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGFjY2Vzc1Rva2VuID0gYXdhaXQgdGhpcy5nZXRBY2Nlc3NUb2tlbigpO1xuXHRcdFx0Y29uc3QgdGFza3MgPSBhd2FpdCB0aGlzLmdldFRhc2tzRnJvbVNlbGVjdGVkTGlzdCgpO1xuXHRcdFx0Y29uc3QgY29tcGxldGVkVGFza3MgPSBBcnJheS5mcm9tKHRhc2tzLnZhbHVlcygpKS5maWx0ZXIoXG5cdFx0XHRcdCh0YXNrKSA9PiB0YXNrLnN0YXR1cyA9PT0gXCJjb21wbGV0ZWRcIixcblx0XHRcdCk7XG5cblx0XHRcdGZvciAoY29uc3QgdGFzayBvZiBjb21wbGV0ZWRUYXNrcykge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIkRlbGV0aW5nIFRhc2s6XCIsIHRhc2spO1xuXHRcdFx0XHRhd2FpdCBkZWxldGVUYXNrKHRoaXMuc2V0dGluZ3MsIGFjY2Vzc1Rva2VuLCB0YXNrLmlkKTtcblx0XHRcdFx0ZGVsZXRlZFRhc2tzQ291bnQrKztcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5yZWZyZXNoVmlld0FuZENhY2hlKCk7XG5cdFx0XHRyZXR1cm4gZGVsZXRlZFRhc2tzQ291bnQ7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkZWxldGluZyB0YXNrczpcIiwgZXJyb3IpO1xuXHRcdFx0cmV0dXJuIGRlbGV0ZWRUYXNrc0NvdW50O1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBSZWZyZXNoZXMgdGhlIHNpZGViYXIgdmlldyBhbmQgdGFzayBjYWNoZSB0byBkaXNwbGF5IHRoZSBsYXRlc3QgdGFza3MuXG5cdCAqL1xuXHRhc3luYyByZWZyZXNoVmlld0FuZENhY2hlKCkge1xuXHRcdGNvbnN0IHRhc2tzID0gYXdhaXQgdGhpcy5yZWZyZXNoVGFza0NhY2hlKCk7XG5cdFx0aWYgKHRoaXMuc2lkZWJhclZpZXcpIHtcblx0XHRcdGF3YWl0IHRoaXMuc2lkZWJhclZpZXcucmVuZGVyKHRhc2tzKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc29sZS53YXJuKFwiU2lkZWJhciB2aWV3IGlzIG5vdCBhY3RpdmUuXCIpO1xuXHRcdH1cblx0fVxufVxuIiwgImltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IFRhc2tTeW5jZXJQbHVnaW4gZnJvbSBcInNyYy9tYWluXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTXlUb2RvU2V0dGluZ3Mge1xuXHRzZWxlY3RlZFRhc2tMaXN0SWQ6IHN0cmluZztcblx0Ly8gQSBsaXN0IG9mIGF2YWlsYWJsZSB0YXNrIGxpc3RzLCBlYWNoIHdpdGggYW4gaWQgYW5kIGRpc3BsYXkgbmFtZS5cblx0dGFza0xpc3RzOiBBcnJheTx7IGlkOiBzdHJpbmc7IHRpdGxlOiBzdHJpbmcgfT47XG5cdGNsaWVudElkOiBzdHJpbmc7XG5cdGNsaWVudFNlY3JldDogc3RyaW5nO1xuXHRyZWRpcmVjdFVybDogc3RyaW5nO1xufVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogTXlUb2RvU2V0dGluZ3MgPSB7XG5cdHNlbGVjdGVkVGFza0xpc3RJZDogXCJcIixcblx0dGFza0xpc3RzOiBbXSxcblx0Y2xpZW50SWQ6IFwiXCIsXG5cdGNsaWVudFNlY3JldDogXCJcIixcblx0cmVkaXJlY3RVcmw6IFwiaHR0cDovL2xvY2FsaG9zdDo1MDAwXCIsXG59O1xuXG5leHBvcnQgY2xhc3MgTXlUb2RvU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRwbHVnaW46IFRhc2tTeW5jZXJQbHVnaW47XG5cdHNldHRpbmdzOiBNeVRvZG9TZXR0aW5ncztcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBUYXNrU3luY2VyUGx1Z2luKSB7XG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBwbHVnaW4uc2V0dGluZ3M7XG5cdH1cblxuXHRkaXNwbGF5KCk6IHZvaWQge1xuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJNaWNyb3NvZnQgVG9cdTIwMTFEbyBTZXR0aW5nc1wiIH0pO1xuXG5cdFx0Ly8gQWRkIGEgc2VjdGlvbiBmb3IgZW50ZXJpbmcgY2xpZW50IElEIGFuZCBzZWNyZXQuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIkNsaWVudCBEZXRhaWxzXCIpXG5cdFx0XHQuc2V0RGVzYyhcblx0XHRcdFx0XCJFbnRlciB0aGUgY2xpZW50IElEIGFuZCBjbGllbnQgc2VjcmV0IG9mIHlvdXIgQXp1cmUgQUQgYXBwLlwiLFxuXHRcdFx0KVxuXHRcdFx0LmFkZFRleHQoKHRleHQpID0+XG5cdFx0XHRcdHRleHRcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCJDbGllbnQgSURcIilcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2xpZW50SWQpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY2xpZW50SWQgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdH0pLFxuXHRcdFx0KVxuXHRcdFx0LmFkZFRleHQoKHRleHQpID0+XG5cdFx0XHRcdHRleHRcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCJDbGllbnQgU2VjcmV0XCIpXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNsaWVudFNlY3JldClcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jbGllbnRTZWNyZXQgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdH0pLFxuXHRcdFx0KTtcblxuXHRcdC8vIEFkZCBhIHNlY3Rpb24gZm9yIFVSTCB0byByZWRpcmVjdCB0byBhZnRlciBhdXRoZW50aWNhdGlvbi5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiUmVkaXJlY3QgVVJMXCIpXG5cdFx0XHQuc2V0RGVzYyhcIkVudGVyIHRoZSBVUkwgdG8gcmVkaXJlY3QgdG8gYWZ0ZXIgYXV0aGVudGljYXRpb24uXCIpXG5cdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcImh0dHA6Ly9sb2NhbGhvc3Q6NTAwMFwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZWRpcmVjdFVybClcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZWRpcmVjdFVybCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0fSksXG5cdFx0XHQpO1xuXG5cdFx0Ly8gQWRkIGEgYnV0dG9uIHRvIGdldCB0aGUgdGFzayBsaXN0cy5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiR2V0IFRhc2sgTGlzdHNcIilcblx0XHRcdC5zZXREZXNjKFwiQ2xpY2sgdG8gZ2V0IHRoZSBsaXN0IG9mIGF2YWlsYWJsZSB0YXNrIGxpc3RzLlwiKVxuXHRcdFx0LmFkZEJ1dHRvbigoYnV0dG9uKSA9PiB7XG5cdFx0XHRcdGJ1dHRvbi5zZXRCdXR0b25UZXh0KFwiR2V0IFRhc2sgTGlzdHNcIikub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4ubG9hZEF2YWlsYWJsZVRhc2tMaXN0cygpO1xuXHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0Ly8gQWRkIGEgZHJvcGRvd24gdG8gc2VsZWN0IHRoZSB0YXNrXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIlRhc2sgTGlzdFwiKVxuXHRcdFx0LnNldERlc2MoXG5cdFx0XHRcdFwiU2VsZWN0IHRoZSBNaWNyb3NvZnQgVG9cdTIwMTFEbyBsaXN0IHRvIHN0b3JlIHlvdXIgT2JzaWRpYW4gdGFza3MuXCIsXG5cdFx0XHQpXG5cdFx0XHQuYWRkRHJvcGRvd24oKGRyb3ApID0+IHtcblx0XHRcdFx0Ly8gQWRkIGEgZGVmYXVsdCBvcHRpb24uXG5cdFx0XHRcdGRyb3AuYWRkT3B0aW9uKFwiXCIsIFwiU2VsZWN0IGEgdGFzayBsaXN0XCIpO1xuXG5cdFx0XHRcdC8vIFBvcHVsYXRlIGRyb3Bkb3duIHdpdGggYXZhaWxhYmxlIHRhc2sgbGlzdHMuXG5cdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLnRhc2tMaXN0cy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy50YXNrTGlzdHMuZm9yRWFjaCgobGlzdCkgPT4ge1xuXHRcdFx0XHRcdFx0ZHJvcC5hZGRPcHRpb24obGlzdC5pZCwgbGlzdC50aXRsZSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gT3B0aW9uYWxseSwgaW5mb3JtIHRoZSB1c2VyIG5vIHRhc2sgbGlzdHMgYXJlIGF2YWlsYWJsZS5cblx0XHRcdFx0XHRkcm9wLmFkZE9wdGlvbihcIm5vbmVcIiwgXCJObyB0YXNrIGxpc3RzIGF2YWlsYWJsZVwiKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFNldCB0aGUgY3VycmVudCB2YWx1ZS5cblx0XHRcdFx0ZHJvcC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzLnNlbGVjdGVkVGFza0xpc3RJZCk7XG5cdFx0XHRcdGRyb3Aub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcblx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLnNlbGVjdGVkVGFza0xpc3RJZCA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHR9XG59XG4iLCAiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB0eXBlIFRhc2tTeW5jZXJQbHVnaW4gZnJvbSBcInNyYy9tYWluXCI7XG5pbXBvcnQgeyBub3RpZnkgfSBmcm9tIFwiLi91dGlsc1wiO1xuXG5leHBvcnQgY29uc3QgVklFV19UWVBFX1RPRE9fU0lERUJBUiA9IFwidGFza3Mtc3luY2VyLXNpZGViYXJcIjtcblxuZXhwb3J0IGNsYXNzIFRhc2tTaWRlYmFyVmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcblx0cGx1Z2luOiBUYXNrU3luY2VyUGx1Z2luO1xuXG5cdGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogVGFza1N5bmNlclBsdWdpbikge1xuXHRcdHN1cGVyKGxlYWYpO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0Z2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gVklFV19UWVBFX1RPRE9fU0lERUJBUjtcblx0fVxuXG5cdGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIFwiVG8tRG8gVGFza3NcIjtcblx0fVxuXG5cdGdldEljb24oKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gXCJsaXN0LXRvZG9cIjtcblx0fVxuXG5cdGFzeW5jIG9uT3BlbigpIHtcblx0XHR0aGlzLmluamVjdFN0eWxlcygpO1xuXHRcdHRoaXMucmVuZGVyKG51bGwpO1xuXHRcdHRoaXMucGx1Z2luXG5cdFx0XHQuZ2V0VGFza3NGcm9tU2VsZWN0ZWRMaXN0KClcblx0XHRcdC50aGVuKCh0YXNrcykgPT4gdGhpcy5yZW5kZXIodGFza3MpKVxuXHRcdFx0LmNhdGNoKChlcnJvcikgPT4ge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3IgbG9hZGluZyB0YXNrcyBpbiBzaWRlYmFyOlwiLCBlcnJvcik7XG5cdFx0XHRcdG5vdGlmeShcIkVycm9yIGxvYWRpbmcgdGFza3MgaW4gc2lkZWJhclwiLCBlcnJvcik7XG5cdFx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBTZXR1cCBidXR0b24gZm9yIHJlZnJlc2hpbmcgc2lkZWJhciB0YXNrcy5cblx0ICogQHBhcmFtIENvbnRhaW5lciBmb3IgYnV0dG9uXG5cdCAqL1xuXHRwcml2YXRlIGFzeW5jIHNldHVwUmVmcmVzaEJ1dHRvbihjb250YWluZXI6IEVsZW1lbnQpIHtcblx0XHRjb25zdCBidXR0b24gPSBjb250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIlJlZnJlc2ggVGFza3NcIiB9KTtcblx0XHRidXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdHRoaXMucmVuZGVyKG51bGwpO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Y29uc3QgdGFza3MgPSBhd2FpdCB0aGlzLnBsdWdpbi5yZWZyZXNoVGFza0NhY2hlKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyKHRhc2tzKTtcblx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiRXJyb3IgcmVmcmVzaGluZyB0YXNrczpcIiwgZXJyb3IpO1xuXHRcdFx0XHRub3RpZnkoXCJGYWlsZWQgdG8gcmVmcmVzaCB0YXNrc1wiLCBcImVycm9yXCIpO1xuXHRcdFx0fVxuXHRcdH07XG5cdH1cblxuXHRhc3luYyByZW5kZXIoXG5cdFx0dGFza3M6IE1hcDxcblx0XHRcdHN0cmluZyxcblx0XHRcdHsgdGl0bGU6IHN0cmluZzsgc3RhdHVzOiBzdHJpbmc7IGlkOiBzdHJpbmcgfVxuXHRcdD4gfCBudWxsLFxuXHQpIHtcblx0XHRjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdO1xuXHRcdGNvbnRhaW5lci5lbXB0eSgpO1xuXG5cdFx0dGhpcy5zZXR1cFJlZnJlc2hCdXR0b24oY29udGFpbmVyKTtcblxuXHRcdGNvbnRhaW5lci5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJUYXNrc1wiIH0pO1xuXG5cdFx0aWYgKHRhc2tzID09PSBudWxsKSB7XG5cdFx0XHRjb25zdCBzcGlubmVyV3JhcHBlciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoe1xuXHRcdFx0XHRjbHM6IFwic3Bpbm5lci13cmFwcGVyXCIsXG5cdFx0XHR9KTtcblx0XHRcdHNwaW5uZXJXcmFwcGVyLmNyZWF0ZURpdih7IGNsczogXCJsb2FkaW5nLXNwaW5uZXJcIiB9KTtcblx0XHRcdHNwaW5uZXJXcmFwcGVyLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiTG9hZGluZyB0YXNrcy4uLlwiIH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICh0YXNrcy5zaXplID09PSAwKSB7XG5cdFx0XHRjb250YWluZXIuY3JlYXRlRWwoXCJwXCIsIHtcblx0XHRcdFx0dGV4dDogXCJObyB0YXNrcyBmb3VuZFwiLFxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0QXJyYXkuZnJvbSh0YXNrcy52YWx1ZXMoKSlcblx0XHRcdC5zb3J0KChhLCBiKSA9PiB7XG5cdFx0XHRcdC8vIE1vdmUgY29tcGxldGVkIHRhc2tzIHRvIHRoZSBib3R0b21cblx0XHRcdFx0aWYgKGEuc3RhdHVzID09PSBcImNvbXBsZXRlZFwiICYmIGIuc3RhdHVzICE9PSBcImNvbXBsZXRlZFwiKVxuXHRcdFx0XHRcdHJldHVybiAxO1xuXHRcdFx0XHRpZiAoYS5zdGF0dXMgIT09IFwiY29tcGxldGVkXCIgJiYgYi5zdGF0dXMgPT09IFwiY29tcGxldGVkXCIpXG5cdFx0XHRcdFx0cmV0dXJuIC0xO1xuXHRcdFx0XHRyZXR1cm4gMDsgLy8gS2VlcCBvcmlnaW5hbCBvcmRlciBvdGhlcndpc2Vcblx0XHRcdH0pXG5cdFx0XHQuZm9yRWFjaCgodGFzaykgPT4ge1xuXHRcdFx0XHRjb25zdCBsaW5lID0gY29udGFpbmVyLmNyZWF0ZUVsKFwiZGl2XCIsIHtcblx0XHRcdFx0XHRjbHM6IFwidGFzay1saW5lXCIsXG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGNvbnN0IGNoZWNrYm94ID0gbGluZS5jcmVhdGVFbChcImlucHV0XCIsIHtcblx0XHRcdFx0XHR0eXBlOiBcImNoZWNrYm94XCIsXG5cdFx0XHRcdH0pIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG5cblx0XHRcdFx0Y2hlY2tib3guY2hlY2tlZCA9IHRhc2suc3RhdHVzID09PSBcImNvbXBsZXRlZFwiO1xuXHRcdFx0XHRjaGVja2JveC5kaXNhYmxlZCA9IHRydWU7XG5cblx0XHRcdFx0bGluZS5jcmVhdGVFbChcInNwYW5cIiwge1xuXHRcdFx0XHRcdHRleHQ6IHRhc2sudGl0bGUsXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdH1cblx0YXN5bmMgb25DbG9zZSgpIHtcblx0XHQvLyBPcHRpb25hbCBjbGVhbnVwXG5cdH1cblxuXHRpbmplY3RTdHlsZXMoKSB7XG5cdFx0Y29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG5cdFx0c3R5bGUudGV4dENvbnRlbnQgPSBgXG5cdC5zcGlubmVyLXdyYXBwZXIge1xuXHRcdGRpc3BsYXk6IGZsZXg7XG5cdFx0ZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcblx0XHRhbGlnbi1pdGVtczogY2VudGVyO1xuXHRcdGp1c3RpZnktY29udGVudDogY2VudGVyO1xuXHRcdHBhZGRpbmc6IDFlbTtcblx0fVxuXG5cdC5sb2FkaW5nLXNwaW5uZXIge1xuXHRcdHdpZHRoOiAyNHB4O1xuXHRcdGhlaWdodDogMjRweDtcblx0XHRib3JkZXI6IDNweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG5cdFx0Ym9yZGVyLXRvcDogM3B4IHNvbGlkIHZhcigtLXRleHQtYWNjZW50KTtcblx0XHRib3JkZXItcmFkaXVzOiA1MCU7XG5cdFx0YW5pbWF0aW9uOiBzcGluIDFzIGxpbmVhciBpbmZpbml0ZTtcblx0XHRtYXJnaW4tYm90dG9tOiAwLjVlbTtcblx0fVxuXG5cdEBrZXlmcmFtZXMgc3BpbiB7XG5cdFx0MCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgfVxuXHRcdDEwMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyB9XG5cdH1cblx0YDtcblx0XHRkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTtcblx0fVxufVxuIiwgImltcG9ydCB7IE5vdGljZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG4vKipcbiAqIERpc3BsYXkgYSBub3RpZmljYXRpb24gaW4gT2JzaWRpYW4gd2l0aCBvcHRpb25hbCB0eXBlLWJhc2VkIHByZWZpeC5cbiAqIEBwYXJhbSBtZXNzYWdlIC0gTWVzc2FnZSB0byBzaG93XG4gKiBAcGFyYW0gdHlwZSAtIE9uZSBvZiBcImVycm9yXCIsIFwid2FybmluZ1wiLCBcInN1Y2Nlc3NcIiwgXCJpbmZvXCJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5vdGlmeShcblx0bWVzc2FnZTogc3RyaW5nLFxuXHR0eXBlOiBcImVycm9yXCIgfCBcIndhcm5pbmdcIiB8IFwic3VjY2Vzc1wiIHwgXCJpbmZvXCIgPSBcImluZm9cIixcbik6IHZvaWQge1xuXHRsZXQgcHJlZml4ID0gXCJcIjtcblx0c3dpdGNoICh0eXBlKSB7XG5cdFx0Y2FzZSBcImVycm9yXCI6XG5cdFx0XHRwcmVmaXggPSBcIlx1Mjc0QyBcIjtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJ3YXJuaW5nXCI6XG5cdFx0XHRwcmVmaXggPSBcIlx1MjZBMFx1RkUwRiBcIjtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJzdWNjZXNzXCI6XG5cdFx0XHRwcmVmaXggPSBcIlx1MjcwNSBcIjtcblx0XHRcdGJyZWFrO1xuXHR9XG5cdG5ldyBOb3RpY2UoYCR7cHJlZml4fSR7bWVzc2FnZX1gKTtcbn1cbiIsICJpbXBvcnQgeyByZXF1ZXN0VXJsIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBNeVRvZG9TZXR0aW5ncyB9IGZyb20gXCJzcmMvc2V0dGluZ1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIE1TVGFzayB7XG5cdHRpdGxlOiBzdHJpbmc7XG5cdHN0YXR1czogc3RyaW5nO1xuXHRpZDogc3RyaW5nO1xufVxuXG4vKipcbiAqIEZldGNoZXMgdGFza3MgZnJvbSB0aGUgc2VsZWN0ZWQgTWljcm9zb2Z0IFRvXHUyMDExRG8gbGlzdC5cbiAqIEBwYXJhbSBzZXR0aW5ncyBQbHVnaW4gc2V0dGluZ3MgdGhhdCBjb250YWluIHRoZSBzZWxlY3RlZCB0YXNrIGxpc3QgSUQuXG4gKiBAcGFyYW0gYWNjZXNzVG9rZW4gQSB2YWxpZCBhY2Nlc3MgdG9rZW4uXG4gKiBAcmV0dXJucyBBIG1hcCBvZiB0YXNrIHRpdGxlIHRvIE1TVGFzay5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoVGFza3MoXG5cdHNldHRpbmdzOiBNeVRvZG9TZXR0aW5ncyxcblx0YWNjZXNzVG9rZW46IHN0cmluZyxcbik6IFByb21pc2U8TWFwPHN0cmluZywgTVNUYXNrPj4ge1xuXHRjb25zdCB0YXNrcyA9IG5ldyBNYXA8c3RyaW5nLCBNU1Rhc2s+KCk7XG5cdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XG5cdFx0dXJsOiBgaHR0cHM6Ly9ncmFwaC5taWNyb3NvZnQuY29tL3YxLjAvbWUvdG9kby9saXN0cy8ke3NldHRpbmdzLnNlbGVjdGVkVGFza0xpc3RJZH0vdGFza3NgLFxuXHRcdG1ldGhvZDogXCJHRVRcIixcblx0XHRoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthY2Nlc3NUb2tlbn1gIH0sXG5cdH0pO1xuXG5cdGlmIChyZXNwb25zZS5zdGF0dXMgIT09IDIwMCkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBmZXRjaCB0YXNrczogXCIgKyByZXNwb25zZS50ZXh0KTtcblx0fVxuXG5cdGNvbnN0IGRhdGEgPSByZXNwb25zZS5qc29uO1xuXHRpZiAoZGF0YS52YWx1ZSAmJiBBcnJheS5pc0FycmF5KGRhdGEudmFsdWUpKSB7XG5cdFx0Zm9yIChjb25zdCB0YXNrIG9mIGRhdGEudmFsdWUpIHtcblx0XHRcdGNvbnN0IHRpdGxlID0gdGFzay50aXRsZS50cmltKCk7XG5cdFx0XHR0YXNrcy5zZXQodGl0bGUsIHsgdGl0bGUsIHN0YXR1czogdGFzay5zdGF0dXMsIGlkOiB0YXNrLmlkIH0pO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiB0YXNrcztcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHRhc2sgaW4gTWljcm9zb2Z0IFRvXHUyMDExRG8uXG4gKiBAcGFyYW0gc2V0dGluZ3MgUGx1Z2luIHNldHRpbmdzIGNvbnRhaW5pbmcgdGhlIHNlbGVjdGVkIHRhc2sgbGlzdCBJRC5cbiAqIEBwYXJhbSBhY2Nlc3NUb2tlbiBBIHZhbGlkIGFjY2VzcyB0b2tlbi5cbiAqIEBwYXJhbSB0YXNrVGl0bGUgVGhlIHRpdGxlIG9mIHRoZSB0YXNrIHRvIGNyZWF0ZS5cbiAqIEBwYXJhbSBzdGF0dXMgT3B0aW9uYWwgaW5pdGlhbCBzdGF0dXMgKFwiY29tcGxldGVkXCIgb3IgXCJub3RTdGFydGVkXCIpLiBEZWZhdWx0cyB0byBcIm5vdFN0YXJ0ZWRcIi5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVRhc2soXG5cdHNldHRpbmdzOiBNeVRvZG9TZXR0aW5ncyxcblx0YWNjZXNzVG9rZW46IHN0cmluZyxcblx0dGFza1RpdGxlOiBzdHJpbmcsXG5cdHN0YXR1czogc3RyaW5nID0gXCJub3RTdGFydGVkXCIsXG4pOiBQcm9taXNlPHZvaWQ+IHtcblx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcblx0XHR1cmw6IGBodHRwczovL2dyYXBoLm1pY3Jvc29mdC5jb20vdjEuMC9tZS90b2RvL2xpc3RzLyR7c2V0dGluZ3Muc2VsZWN0ZWRUYXNrTGlzdElkfS90YXNrc2AsXG5cdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRoZWFkZXJzOiB7XG5cdFx0XHRBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YWNjZXNzVG9rZW59YCxcblx0XHRcdFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuXHRcdH0sXG5cdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkoe1xuXHRcdFx0dGl0bGU6IHRhc2tUaXRsZSxcblx0XHRcdHN0YXR1czogc3RhdHVzLFxuXHRcdH0pLFxuXHR9KTtcblxuXHRpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDEpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgdGFzazogJHtyZXNwb25zZS50ZXh0fWApO1xuXHR9XG59XG5cbi8qKlxuICogVXBkYXRlcyBhbiBleGlzdGluZyB0YXNrJ3Mgc3RhdHVzLlxuICogQHBhcmFtIHNldHRpbmdzIFBsdWdpbiBzZXR0aW5ncyBjb250YWluaW5nIHRoZSBzZWxlY3RlZCB0YXNrIGxpc3QgSUQuXG4gKiBAcGFyYW0gYWNjZXNzVG9rZW4gQSB2YWxpZCBhY2Nlc3MgdG9rZW4uXG4gKiBAcGFyYW0gdGFza0lkIFRoZSBJRCBvZiB0aGUgdGFzayB0byB1cGRhdGUuXG4gKiBAcGFyYW0gY29tcGxldGUgV2hldGhlciB0byBtYXJrIHRoZSB0YXNrIGFzIGNvbXBsZXRlLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVGFzayhcblx0c2V0dGluZ3M6IE15VG9kb1NldHRpbmdzLFxuXHRhY2Nlc3NUb2tlbjogc3RyaW5nLFxuXHR0YXNrSWQ6IHN0cmluZyxcblx0Y29tcGxldGU6IGJvb2xlYW4sXG4pOiBQcm9taXNlPHZvaWQ+IHtcblx0Y29uc3QgbmV3U3RhdHVzID0gY29tcGxldGUgPyBcImNvbXBsZXRlZFwiIDogXCJub3RTdGFydGVkXCI7XG5cdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XG5cdFx0dXJsOiBgaHR0cHM6Ly9ncmFwaC5taWNyb3NvZnQuY29tL3YxLjAvbWUvdG9kby9saXN0cy8ke3NldHRpbmdzLnNlbGVjdGVkVGFza0xpc3RJZH0vdGFza3MvJHt0YXNrSWR9YCxcblx0XHRtZXRob2Q6IFwiUEFUQ0hcIixcblx0XHRoZWFkZXJzOiB7XG5cdFx0XHRBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YWNjZXNzVG9rZW59YCxcblx0XHRcdFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuXHRcdH0sXG5cdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkoeyBzdGF0dXM6IG5ld1N0YXR1cyB9KSxcblx0fSk7XG5cblx0aWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gdXBkYXRlIHRhc2s6ICR7cmVzcG9uc2UudGV4dH1gKTtcblx0fVxufVxuXG4vKipcbiAqIEZldGNoZXMgdGhlIGF2YWlsYWJsZSBNaWNyb3NvZnQgVG9cdTIwMTFEbyB0YXNrIGxpc3RzLlxuICogQHBhcmFtIGFjY2Vzc1Rva2VuIEEgdmFsaWQgYWNjZXNzIHRva2VuLlxuICogQHJldHVybnMgQSBtYXAgd2hlcmUgZWFjaCBrZXkgaXMgdGhlIHRhc2sgbGlzdCB0aXRsZSBhbmQgdGhlIHZhbHVlIGlzIGFuIG9iamVjdCBjb250YWluaW5nIHRpdGxlLCBzdGF0dXMgKGRlZmF1bHQpLCBhbmQgaWQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaFRhc2tMaXN0cyhcblx0YWNjZXNzVG9rZW46IHN0cmluZyxcbik6IFByb21pc2U8QXJyYXk8eyB0aXRsZTogc3RyaW5nOyBpZDogc3RyaW5nIH0+PiB7XG5cdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XG5cdFx0dXJsOiBcImh0dHBzOi8vZ3JhcGgubWljcm9zb2Z0LmNvbS92MS4wL21lL3RvZG8vbGlzdHNcIixcblx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0aGVhZGVyczogeyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YWNjZXNzVG9rZW59YCB9LFxuXHR9KTtcblxuXHRpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggdGFzayBsaXN0czogXCIgKyByZXNwb25zZS50ZXh0KTtcblx0fVxuXG5cdGNvbnN0IGRhdGEgPSByZXNwb25zZS5qc29uO1xuXHRjb25zdCB0YXNrTGlzdHMgPSBuZXcgQXJyYXk8eyB0aXRsZTogc3RyaW5nOyBpZDogc3RyaW5nIH0+KCk7XG5cblx0Y29uc29sZS5sb2coXCJUYXNrIGxpc3RzIGRhdGE6XCIsIGRhdGEpO1xuXHRpZiAoZGF0YS52YWx1ZSAmJiBBcnJheS5pc0FycmF5KGRhdGEudmFsdWUpKSB7XG5cdFx0Zm9yIChjb25zdCBsaXN0IG9mIGRhdGEudmFsdWUpIHtcblx0XHRcdHRhc2tMaXN0cy5wdXNoKHsgdGl0bGU6IGxpc3QuZGlzcGxheU5hbWUsIGlkOiBsaXN0LmlkIH0pO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiB0YXNrTGlzdHM7XG59XG5cbi8qKlxuICogRGVsZXRlcyBhIHRhc2sgZnJvbSBNaWNyb3NvZnQgVG9cdTIwMTFEby5cbiAqIEBwYXJhbSBzZXR0aW5ncyBQbHVnaW4gc2V0dGluZ3MgY29udGFpbmluZyB0aGUgc2VsZWN0ZWQgdGFzayBsaXN0IElELlxuICogQHBhcmFtIGFjY2Vzc1Rva2VuIEEgdmFsaWQgYWNjZXNzIHRva2VuLlxuICogQHBhcmFtIHRhc2tJZCBUaGUgSUQgb2YgdGhlIHRhc2sgdG8gZGVsZXRlLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlVGFzayhcblx0c2V0dGluZ3M6IE15VG9kb1NldHRpbmdzLFxuXHRhY2Nlc3NUb2tlbjogc3RyaW5nLFxuXHR0YXNrSWQ6IHN0cmluZyxcbik6IFByb21pc2U8dm9pZD4ge1xuXHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuXHRcdHVybDogYGh0dHBzOi8vZ3JhcGgubWljcm9zb2Z0LmNvbS92MS4wL21lL3RvZG8vbGlzdHMvJHtzZXR0aW5ncy5zZWxlY3RlZFRhc2tMaXN0SWR9L3Rhc2tzLyR7dGFza0lkfWAsXG5cdFx0bWV0aG9kOiBcIkRFTEVURVwiLFxuXHRcdGhlYWRlcnM6IHtcblx0XHRcdEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthY2Nlc3NUb2tlbn1gLFxuXHRcdFx0XCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG5cdFx0fSxcblx0fSk7XG5cblx0aWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gMjA0KSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZGVsZXRlIHRhc2s6ICR7cmVzcG9uc2UudGV4dH1gKTtcblx0fVxufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICAgIEFjY291bnRDYWNoZSxcbiAgICBJZFRva2VuQ2FjaGUsXG4gICAgQWNjZXNzVG9rZW5DYWNoZSxcbiAgICBSZWZyZXNoVG9rZW5DYWNoZSxcbiAgICBBcHBNZXRhZGF0YUNhY2hlLFxufSBmcm9tIFwiQGF6dXJlL21zYWwtY29tbW9uL25vZGVcIjtcbmltcG9ydCB7XG4gICAgSW5NZW1vcnlDYWNoZSxcbiAgICBKc29uQ2FjaGUsXG4gICAgU2VyaWFsaXplZEFjY291bnRFbnRpdHksXG4gICAgU2VyaWFsaXplZElkVG9rZW5FbnRpdHksXG4gICAgU2VyaWFsaXplZEFjY2Vzc1Rva2VuRW50aXR5LFxuICAgIFNlcmlhbGl6ZWRSZWZyZXNoVG9rZW5FbnRpdHksXG4gICAgU2VyaWFsaXplZEFwcE1ldGFkYXRhRW50aXR5LFxufSBmcm9tIFwiLi9TZXJpYWxpemVyVHlwZXMuanNcIjtcblxuLyoqXG4gKiBUaGlzIGNsYXNzIHNlcmlhbGl6ZXMgY2FjaGUgZW50aXRpZXMgdG8gYmUgc2F2ZWQgaW50byBpbi1tZW1vcnkgb2JqZWN0IHR5cGVzIGRlZmluZWQgaW50ZXJuYWxseVxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBjbGFzcyBTZXJpYWxpemVyIHtcbiAgICAvKipcbiAgICAgKiBzZXJpYWxpemUgdGhlIEpTT04gYmxvYlxuICAgICAqIEBwYXJhbSBkYXRhIC0gSlNPTiBibG9iIGNhY2hlXG4gICAgICovXG4gICAgc3RhdGljIHNlcmlhbGl6ZUpTT05CbG9iKGRhdGE6IEpzb25DYWNoZSk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXJpYWxpemUgQWNjb3VudHNcbiAgICAgKiBAcGFyYW0gYWNjQ2FjaGUgLSBjYWNoZSBvZiBhY2NvdW50c1xuICAgICAqL1xuICAgIHN0YXRpYyBzZXJpYWxpemVBY2NvdW50cyhcbiAgICAgICAgYWNjQ2FjaGU6IEFjY291bnRDYWNoZVxuICAgICk6IFJlY29yZDxzdHJpbmcsIFNlcmlhbGl6ZWRBY2NvdW50RW50aXR5PiB7XG4gICAgICAgIGNvbnN0IGFjY291bnRzOiBSZWNvcmQ8c3RyaW5nLCBTZXJpYWxpemVkQWNjb3VudEVudGl0eT4gPSB7fTtcbiAgICAgICAgT2JqZWN0LmtleXMoYWNjQ2FjaGUpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICBjb25zdCBhY2NvdW50RW50aXR5ID0gYWNjQ2FjaGVba2V5XTtcbiAgICAgICAgICAgIGFjY291bnRzW2tleV0gPSB7XG4gICAgICAgICAgICAgICAgaG9tZV9hY2NvdW50X2lkOiBhY2NvdW50RW50aXR5LmhvbWVBY2NvdW50SWQsXG4gICAgICAgICAgICAgICAgZW52aXJvbm1lbnQ6IGFjY291bnRFbnRpdHkuZW52aXJvbm1lbnQsXG4gICAgICAgICAgICAgICAgcmVhbG06IGFjY291bnRFbnRpdHkucmVhbG0sXG4gICAgICAgICAgICAgICAgbG9jYWxfYWNjb3VudF9pZDogYWNjb3VudEVudGl0eS5sb2NhbEFjY291bnRJZCxcbiAgICAgICAgICAgICAgICB1c2VybmFtZTogYWNjb3VudEVudGl0eS51c2VybmFtZSxcbiAgICAgICAgICAgICAgICBhdXRob3JpdHlfdHlwZTogYWNjb3VudEVudGl0eS5hdXRob3JpdHlUeXBlLFxuICAgICAgICAgICAgICAgIG5hbWU6IGFjY291bnRFbnRpdHkubmFtZSxcbiAgICAgICAgICAgICAgICBjbGllbnRfaW5mbzogYWNjb3VudEVudGl0eS5jbGllbnRJbmZvLFxuICAgICAgICAgICAgICAgIGxhc3RfbW9kaWZpY2F0aW9uX3RpbWU6IGFjY291bnRFbnRpdHkubGFzdE1vZGlmaWNhdGlvblRpbWUsXG4gICAgICAgICAgICAgICAgbGFzdF9tb2RpZmljYXRpb25fYXBwOiBhY2NvdW50RW50aXR5Lmxhc3RNb2RpZmljYXRpb25BcHAsXG4gICAgICAgICAgICAgICAgdGVuYW50UHJvZmlsZXM6IGFjY291bnRFbnRpdHkudGVuYW50UHJvZmlsZXM/Lm1hcChcbiAgICAgICAgICAgICAgICAgICAgKHRlbmFudFByb2ZpbGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0ZW5hbnRQcm9maWxlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gYWNjb3VudHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2VyaWFsaXplIElkVG9rZW5zXG4gICAgICogQHBhcmFtIGlkVENhY2hlIC0gY2FjaGUgb2YgSUQgdG9rZW5zXG4gICAgICovXG4gICAgc3RhdGljIHNlcmlhbGl6ZUlkVG9rZW5zKFxuICAgICAgICBpZFRDYWNoZTogSWRUb2tlbkNhY2hlXG4gICAgKTogUmVjb3JkPHN0cmluZywgU2VyaWFsaXplZElkVG9rZW5FbnRpdHk+IHtcbiAgICAgICAgY29uc3QgaWRUb2tlbnM6IFJlY29yZDxzdHJpbmcsIFNlcmlhbGl6ZWRJZFRva2VuRW50aXR5PiA9IHt9O1xuICAgICAgICBPYmplY3Qua2V5cyhpZFRDYWNoZSkubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIGNvbnN0IGlkVEVudGl0eSA9IGlkVENhY2hlW2tleV07XG4gICAgICAgICAgICBpZFRva2Vuc1trZXldID0ge1xuICAgICAgICAgICAgICAgIGhvbWVfYWNjb3VudF9pZDogaWRURW50aXR5LmhvbWVBY2NvdW50SWQsXG4gICAgICAgICAgICAgICAgZW52aXJvbm1lbnQ6IGlkVEVudGl0eS5lbnZpcm9ubWVudCxcbiAgICAgICAgICAgICAgICBjcmVkZW50aWFsX3R5cGU6IGlkVEVudGl0eS5jcmVkZW50aWFsVHlwZSxcbiAgICAgICAgICAgICAgICBjbGllbnRfaWQ6IGlkVEVudGl0eS5jbGllbnRJZCxcbiAgICAgICAgICAgICAgICBzZWNyZXQ6IGlkVEVudGl0eS5zZWNyZXQsXG4gICAgICAgICAgICAgICAgcmVhbG06IGlkVEVudGl0eS5yZWFsbSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBpZFRva2VucztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXJpYWxpemVzIEFjY2Vzc1Rva2Vuc1xuICAgICAqIEBwYXJhbSBhdENhY2hlIC0gY2FjaGUgb2YgYWNjZXNzIHRva2Vuc1xuICAgICAqL1xuICAgIHN0YXRpYyBzZXJpYWxpemVBY2Nlc3NUb2tlbnMoXG4gICAgICAgIGF0Q2FjaGU6IEFjY2Vzc1Rva2VuQ2FjaGVcbiAgICApOiBSZWNvcmQ8c3RyaW5nLCBTZXJpYWxpemVkQWNjZXNzVG9rZW5FbnRpdHk+IHtcbiAgICAgICAgY29uc3QgYWNjZXNzVG9rZW5zOiBSZWNvcmQ8c3RyaW5nLCBTZXJpYWxpemVkQWNjZXNzVG9rZW5FbnRpdHk+ID0ge307XG4gICAgICAgIE9iamVjdC5rZXlzKGF0Q2FjaGUpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICBjb25zdCBhdEVudGl0eSA9IGF0Q2FjaGVba2V5XTtcbiAgICAgICAgICAgIGFjY2Vzc1Rva2Vuc1trZXldID0ge1xuICAgICAgICAgICAgICAgIGhvbWVfYWNjb3VudF9pZDogYXRFbnRpdHkuaG9tZUFjY291bnRJZCxcbiAgICAgICAgICAgICAgICBlbnZpcm9ubWVudDogYXRFbnRpdHkuZW52aXJvbm1lbnQsXG4gICAgICAgICAgICAgICAgY3JlZGVudGlhbF90eXBlOiBhdEVudGl0eS5jcmVkZW50aWFsVHlwZSxcbiAgICAgICAgICAgICAgICBjbGllbnRfaWQ6IGF0RW50aXR5LmNsaWVudElkLFxuICAgICAgICAgICAgICAgIHNlY3JldDogYXRFbnRpdHkuc2VjcmV0LFxuICAgICAgICAgICAgICAgIHJlYWxtOiBhdEVudGl0eS5yZWFsbSxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IGF0RW50aXR5LnRhcmdldCxcbiAgICAgICAgICAgICAgICBjYWNoZWRfYXQ6IGF0RW50aXR5LmNhY2hlZEF0LFxuICAgICAgICAgICAgICAgIGV4cGlyZXNfb246IGF0RW50aXR5LmV4cGlyZXNPbixcbiAgICAgICAgICAgICAgICBleHRlbmRlZF9leHBpcmVzX29uOiBhdEVudGl0eS5leHRlbmRlZEV4cGlyZXNPbixcbiAgICAgICAgICAgICAgICByZWZyZXNoX29uOiBhdEVudGl0eS5yZWZyZXNoT24sXG4gICAgICAgICAgICAgICAga2V5X2lkOiBhdEVudGl0eS5rZXlJZCxcbiAgICAgICAgICAgICAgICB0b2tlbl90eXBlOiBhdEVudGl0eS50b2tlblR5cGUsXG4gICAgICAgICAgICAgICAgcmVxdWVzdGVkQ2xhaW1zOiBhdEVudGl0eS5yZXF1ZXN0ZWRDbGFpbXMsXG4gICAgICAgICAgICAgICAgcmVxdWVzdGVkQ2xhaW1zSGFzaDogYXRFbnRpdHkucmVxdWVzdGVkQ2xhaW1zSGFzaCxcbiAgICAgICAgICAgICAgICB1c2VyQXNzZXJ0aW9uSGFzaDogYXRFbnRpdHkudXNlckFzc2VydGlvbkhhc2gsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gYWNjZXNzVG9rZW5zO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNlcmlhbGl6ZSByZWZyZXNoVG9rZW5zXG4gICAgICogQHBhcmFtIHJ0Q2FjaGUgLSBjYWNoZSBvZiByZWZyZXNoIHRva2Vuc1xuICAgICAqL1xuICAgIHN0YXRpYyBzZXJpYWxpemVSZWZyZXNoVG9rZW5zKFxuICAgICAgICBydENhY2hlOiBSZWZyZXNoVG9rZW5DYWNoZVxuICAgICk6IFJlY29yZDxzdHJpbmcsIFNlcmlhbGl6ZWRSZWZyZXNoVG9rZW5FbnRpdHk+IHtcbiAgICAgICAgY29uc3QgcmVmcmVzaFRva2VuczogUmVjb3JkPHN0cmluZywgU2VyaWFsaXplZFJlZnJlc2hUb2tlbkVudGl0eT4gPSB7fTtcbiAgICAgICAgT2JqZWN0LmtleXMocnRDYWNoZSkubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIGNvbnN0IHJ0RW50aXR5ID0gcnRDYWNoZVtrZXldO1xuICAgICAgICAgICAgcmVmcmVzaFRva2Vuc1trZXldID0ge1xuICAgICAgICAgICAgICAgIGhvbWVfYWNjb3VudF9pZDogcnRFbnRpdHkuaG9tZUFjY291bnRJZCxcbiAgICAgICAgICAgICAgICBlbnZpcm9ubWVudDogcnRFbnRpdHkuZW52aXJvbm1lbnQsXG4gICAgICAgICAgICAgICAgY3JlZGVudGlhbF90eXBlOiBydEVudGl0eS5jcmVkZW50aWFsVHlwZSxcbiAgICAgICAgICAgICAgICBjbGllbnRfaWQ6IHJ0RW50aXR5LmNsaWVudElkLFxuICAgICAgICAgICAgICAgIHNlY3JldDogcnRFbnRpdHkuc2VjcmV0LFxuICAgICAgICAgICAgICAgIGZhbWlseV9pZDogcnRFbnRpdHkuZmFtaWx5SWQsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBydEVudGl0eS50YXJnZXQsXG4gICAgICAgICAgICAgICAgcmVhbG06IHJ0RW50aXR5LnJlYWxtLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlZnJlc2hUb2tlbnM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2VyaWFsaXplIGFtZHRDYWNoZVxuICAgICAqIEBwYXJhbSBhbWR0Q2FjaGUgLSBjYWNoZSBvZiBhcHAgbWV0YWRhdGFcbiAgICAgKi9cbiAgICBzdGF0aWMgc2VyaWFsaXplQXBwTWV0YWRhdGEoXG4gICAgICAgIGFtZHRDYWNoZTogQXBwTWV0YWRhdGFDYWNoZVxuICAgICk6IFJlY29yZDxzdHJpbmcsIFNlcmlhbGl6ZWRBcHBNZXRhZGF0YUVudGl0eT4ge1xuICAgICAgICBjb25zdCBhcHBNZXRhZGF0YTogUmVjb3JkPHN0cmluZywgU2VyaWFsaXplZEFwcE1ldGFkYXRhRW50aXR5PiA9IHt9O1xuICAgICAgICBPYmplY3Qua2V5cyhhbWR0Q2FjaGUpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICBjb25zdCBhbWR0RW50aXR5ID0gYW1kdENhY2hlW2tleV07XG4gICAgICAgICAgICBhcHBNZXRhZGF0YVtrZXldID0ge1xuICAgICAgICAgICAgICAgIGNsaWVudF9pZDogYW1kdEVudGl0eS5jbGllbnRJZCxcbiAgICAgICAgICAgICAgICBlbnZpcm9ubWVudDogYW1kdEVudGl0eS5lbnZpcm9ubWVudCxcbiAgICAgICAgICAgICAgICBmYW1pbHlfaWQ6IGFtZHRFbnRpdHkuZmFtaWx5SWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gYXBwTWV0YWRhdGE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2VyaWFsaXplIHRoZSBjYWNoZVxuICAgICAqIEBwYXJhbSBpbk1lbUNhY2hlIC0gaXRlbWlzZWQgY2FjaGUgcmVhZCBmcm9tIHRoZSBKU09OXG4gICAgICovXG4gICAgc3RhdGljIHNlcmlhbGl6ZUFsbENhY2hlKGluTWVtQ2FjaGU6IEluTWVtb3J5Q2FjaGUpOiBKc29uQ2FjaGUge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgQWNjb3VudDogdGhpcy5zZXJpYWxpemVBY2NvdW50cyhpbk1lbUNhY2hlLmFjY291bnRzKSxcbiAgICAgICAgICAgIElkVG9rZW46IHRoaXMuc2VyaWFsaXplSWRUb2tlbnMoaW5NZW1DYWNoZS5pZFRva2VucyksXG4gICAgICAgICAgICBBY2Nlc3NUb2tlbjogdGhpcy5zZXJpYWxpemVBY2Nlc3NUb2tlbnMoaW5NZW1DYWNoZS5hY2Nlc3NUb2tlbnMpLFxuICAgICAgICAgICAgUmVmcmVzaFRva2VuOiB0aGlzLnNlcmlhbGl6ZVJlZnJlc2hUb2tlbnMoaW5NZW1DYWNoZS5yZWZyZXNoVG9rZW5zKSxcbiAgICAgICAgICAgIEFwcE1ldGFkYXRhOiB0aGlzLnNlcmlhbGl6ZUFwcE1ldGFkYXRhKGluTWVtQ2FjaGUuYXBwTWV0YWRhdGEpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuZXhwb3J0IGNvbnN0IENvbnN0YW50cyA9IHtcbiAgICBMSUJSQVJZX05BTUU6IFwiTVNBTC5KU1wiLFxuICAgIFNLVTogXCJtc2FsLmpzLmNvbW1vblwiLFxuICAgIC8vIFByZWZpeCBmb3IgYWxsIGxpYnJhcnkgY2FjaGUgZW50cmllc1xuICAgIENBQ0hFX1BSRUZJWDogXCJtc2FsXCIsXG4gICAgLy8gZGVmYXVsdCBhdXRob3JpdHlcbiAgICBERUZBVUxUX0FVVEhPUklUWTogXCJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vY29tbW9uL1wiLFxuICAgIERFRkFVTFRfQVVUSE9SSVRZX0hPU1Q6IFwibG9naW4ubWljcm9zb2Z0b25saW5lLmNvbVwiLFxuICAgIERFRkFVTFRfQ09NTU9OX1RFTkFOVDogXCJjb21tb25cIixcbiAgICAvLyBBREZTIFN0cmluZ1xuICAgIEFERlM6IFwiYWRmc1wiLFxuICAgIERTVFM6IFwiZHN0c3YyXCIsXG4gICAgLy8gRGVmYXVsdCBBQUQgSW5zdGFuY2UgRGlzY292ZXJ5IEVuZHBvaW50XG4gICAgQUFEX0lOU1RBTkNFX0RJU0NPVkVSWV9FTkRQVDpcbiAgICAgICAgXCJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vY29tbW9uL2Rpc2NvdmVyeS9pbnN0YW5jZT9hcGktdmVyc2lvbj0xLjEmYXV0aG9yaXphdGlvbl9lbmRwb2ludD1cIixcbiAgICAvLyBDSUFNIFVSTFxuICAgIENJQU1fQVVUSF9VUkw6IFwiLmNpYW1sb2dpbi5jb21cIixcbiAgICBBQURfVEVOQU5UX0RPTUFJTl9TVUZGSVg6IFwiLm9ubWljcm9zb2Z0LmNvbVwiLFxuICAgIC8vIFJlc291cmNlIGRlbGltaXRlciAtIHVzZWQgZm9yIGNlcnRhaW4gY2FjaGUgZW50cmllc1xuICAgIFJFU09VUkNFX0RFTElNOiBcInxcIixcbiAgICAvLyBQbGFjZWhvbGRlciBmb3Igbm9uLWV4aXN0ZW50IGFjY291bnQgaWRzL29iamVjdHNcbiAgICBOT19BQ0NPVU5UOiBcIk5PX0FDQ09VTlRcIixcbiAgICAvLyBDbGFpbXNcbiAgICBDTEFJTVM6IFwiY2xhaW1zXCIsXG4gICAgLy8gQ29uc3VtZXIgVVRJRFxuICAgIENPTlNVTUVSX1VUSUQ6IFwiOTE4ODA0MGQtNmM2Ny00YzViLWIxMTItMzZhMzA0YjY2ZGFkXCIsXG4gICAgLy8gRGVmYXVsdCBzY29wZXNcbiAgICBPUEVOSURfU0NPUEU6IFwib3BlbmlkXCIsXG4gICAgUFJPRklMRV9TQ09QRTogXCJwcm9maWxlXCIsXG4gICAgT0ZGTElORV9BQ0NFU1NfU0NPUEU6IFwib2ZmbGluZV9hY2Nlc3NcIixcbiAgICBFTUFJTF9TQ09QRTogXCJlbWFpbFwiLFxuICAgIENPREVfR1JBTlRfVFlQRTogXCJhdXRob3JpemF0aW9uX2NvZGVcIixcbiAgICBSVF9HUkFOVF9UWVBFOiBcInJlZnJlc2hfdG9rZW5cIixcbiAgICBTMjU2X0NPREVfQ0hBTExFTkdFX01FVEhPRDogXCJTMjU2XCIsXG4gICAgVVJMX0ZPUk1fQ09OVEVOVF9UWVBFOiBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PXV0Zi04XCIsXG4gICAgQVVUSE9SSVpBVElPTl9QRU5ESU5HOiBcImF1dGhvcml6YXRpb25fcGVuZGluZ1wiLFxuICAgIE5PVF9ERUZJTkVEOiBcIm5vdF9kZWZpbmVkXCIsXG4gICAgRU1QVFlfU1RSSU5HOiBcIlwiLFxuICAgIE5PVF9BUFBMSUNBQkxFOiBcIk4vQVwiLFxuICAgIE5PVF9BVkFJTEFCTEU6IFwiTm90IEF2YWlsYWJsZVwiLFxuICAgIEZPUldBUkRfU0xBU0g6IFwiL1wiLFxuICAgIElNRFNfRU5EUE9JTlQ6IFwiaHR0cDovLzE2OS4yNTQuMTY5LjI1NC9tZXRhZGF0YS9pbnN0YW5jZS9jb21wdXRlL2xvY2F0aW9uXCIsXG4gICAgSU1EU19WRVJTSU9OOiBcIjIwMjAtMDYtMDFcIixcbiAgICBJTURTX1RJTUVPVVQ6IDIwMDAsXG4gICAgQVpVUkVfUkVHSU9OX0FVVE9fRElTQ09WRVJfRkxBRzogXCJUcnlBdXRvRGV0ZWN0XCIsXG4gICAgUkVHSU9OQUxfQVVUSF9QVUJMSUNfQ0xPVURfU1VGRklYOiBcImxvZ2luLm1pY3Jvc29mdC5jb21cIixcbiAgICBLTk9XTl9QVUJMSUNfQ0xPVURTOiBbXG4gICAgICAgIFwibG9naW4ubWljcm9zb2Z0b25saW5lLmNvbVwiLFxuICAgICAgICBcImxvZ2luLndpbmRvd3MubmV0XCIsXG4gICAgICAgIFwibG9naW4ubWljcm9zb2Z0LmNvbVwiLFxuICAgICAgICBcInN0cy53aW5kb3dzLm5ldFwiLFxuICAgIF0sXG4gICAgU0hSX05PTkNFX1ZBTElESVRZOiAyNDAsXG4gICAgSU5WQUxJRF9JTlNUQU5DRTogXCJpbnZhbGlkX2luc3RhbmNlXCIsXG59O1xuXG5leHBvcnQgY29uc3QgSHR0cFN0YXR1cyA9IHtcbiAgICBTVUNDRVNTOiAyMDAsXG4gICAgU1VDQ0VTU19SQU5HRV9TVEFSVDogMjAwLFxuICAgIFNVQ0NFU1NfUkFOR0VfRU5EOiAyOTksXG4gICAgUkVESVJFQ1Q6IDMwMixcbiAgICBDTElFTlRfRVJST1I6IDQwMCxcbiAgICBDTElFTlRfRVJST1JfUkFOR0VfU1RBUlQ6IDQwMCxcbiAgICBCQURfUkVRVUVTVDogNDAwLFxuICAgIFVOQVVUSE9SSVpFRDogNDAxLFxuICAgIE5PVF9GT1VORDogNDA0LFxuICAgIFJFUVVFU1RfVElNRU9VVDogNDA4LFxuICAgIFRPT19NQU5ZX1JFUVVFU1RTOiA0MjksXG4gICAgQ0xJRU5UX0VSUk9SX1JBTkdFX0VORDogNDk5LFxuICAgIFNFUlZFUl9FUlJPUjogNTAwLFxuICAgIFNFUlZFUl9FUlJPUl9SQU5HRV9TVEFSVDogNTAwLFxuICAgIFNFUlZJQ0VfVU5BVkFJTEFCTEU6IDUwMyxcbiAgICBHQVRFV0FZX1RJTUVPVVQ6IDUwNCxcbiAgICBTRVJWRVJfRVJST1JfUkFOR0VfRU5EOiA1OTksXG4gICAgTVVMVElfU0lERURfRVJST1I6IDYwMCxcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBIdHRwU3RhdHVzID0gKHR5cGVvZiBIdHRwU3RhdHVzKVtrZXlvZiB0eXBlb2YgSHR0cFN0YXR1c107XG5cbmV4cG9ydCBjb25zdCBPSURDX0RFRkFVTFRfU0NPUEVTID0gW1xuICAgIENvbnN0YW50cy5PUEVOSURfU0NPUEUsXG4gICAgQ29uc3RhbnRzLlBST0ZJTEVfU0NPUEUsXG4gICAgQ29uc3RhbnRzLk9GRkxJTkVfQUNDRVNTX1NDT1BFLFxuXTtcblxuZXhwb3J0IGNvbnN0IE9JRENfU0NPUEVTID0gWy4uLk9JRENfREVGQVVMVF9TQ09QRVMsIENvbnN0YW50cy5FTUFJTF9TQ09QRV07XG5cbi8qKlxuICogUmVxdWVzdCBoZWFkZXIgbmFtZXNcbiAqL1xuZXhwb3J0IGNvbnN0IEhlYWRlck5hbWVzID0ge1xuICAgIENPTlRFTlRfVFlQRTogXCJDb250ZW50LVR5cGVcIixcbiAgICBDT05URU5UX0xFTkdUSDogXCJDb250ZW50LUxlbmd0aFwiLFxuICAgIFJFVFJZX0FGVEVSOiBcIlJldHJ5LUFmdGVyXCIsXG4gICAgQ0NTX0hFQURFUjogXCJYLUFuY2hvck1haWxib3hcIixcbiAgICBXV1dBdXRoZW50aWNhdGU6IFwiV1dXLUF1dGhlbnRpY2F0ZVwiLFxuICAgIEF1dGhlbnRpY2F0aW9uSW5mbzogXCJBdXRoZW50aWNhdGlvbi1JbmZvXCIsXG4gICAgWF9NU19SRVFVRVNUX0lEOiBcIngtbXMtcmVxdWVzdC1pZFwiLFxuICAgIFhfTVNfSFRUUF9WRVJTSU9OOiBcIngtbXMtaHR0cHZlclwiLFxufSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIEhlYWRlck5hbWVzID0gKHR5cGVvZiBIZWFkZXJOYW1lcylba2V5b2YgdHlwZW9mIEhlYWRlck5hbWVzXTtcblxuLyoqXG4gKiBQZXJzaXN0ZW50IGNhY2hlIGtleXMgTVNBTCB3aGljaCBzdGF5IHdoaWxlIHVzZXIgaXMgbG9nZ2VkIGluLlxuICovXG5leHBvcnQgY29uc3QgUGVyc2lzdGVudENhY2hlS2V5cyA9IHtcbiAgICBBQ1RJVkVfQUNDT1VOVF9GSUxURVJTOiBcImFjdGl2ZS1hY2NvdW50LWZpbHRlcnNcIiwgLy8gbmV3IGNhY2hlIGVudHJ5IGZvciBhY3RpdmVfYWNjb3VudCBmb3IgYSBtb3JlIHJvYnVzdCB2ZXJzaW9uIGZvciBicm93c2VyXG59IGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgUGVyc2lzdGVudENhY2hlS2V5cyA9XG4gICAgKHR5cGVvZiBQZXJzaXN0ZW50Q2FjaGVLZXlzKVtrZXlvZiB0eXBlb2YgUGVyc2lzdGVudENhY2hlS2V5c107XG5cbi8qKlxuICogU3RyaW5nIGNvbnN0YW50cyByZWxhdGVkIHRvIEFBRCBBdXRob3JpdHlcbiAqL1xuZXhwb3J0IGNvbnN0IEFBREF1dGhvcml0eUNvbnN0YW50cyA9IHtcbiAgICBDT01NT046IFwiY29tbW9uXCIsXG4gICAgT1JHQU5JWkFUSU9OUzogXCJvcmdhbml6YXRpb25zXCIsXG4gICAgQ09OU1VNRVJTOiBcImNvbnN1bWVyc1wiLFxufSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIEFBREF1dGhvcml0eUNvbnN0YW50cyA9XG4gICAgKHR5cGVvZiBBQURBdXRob3JpdHlDb25zdGFudHMpW2tleW9mIHR5cGVvZiBBQURBdXRob3JpdHlDb25zdGFudHNdO1xuXG4vKipcbiAqIENsYWltcyByZXF1ZXN0IGtleXNcbiAqL1xuZXhwb3J0IGNvbnN0IENsYWltc1JlcXVlc3RLZXlzID0ge1xuICAgIEFDQ0VTU19UT0tFTjogXCJhY2Nlc3NfdG9rZW5cIixcbiAgICBYTVNfQ0M6IFwieG1zX2NjXCIsXG59IGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgQ2xhaW1zUmVxdWVzdEtleXMgPVxuICAgICh0eXBlb2YgQ2xhaW1zUmVxdWVzdEtleXMpW2tleW9mIHR5cGVvZiBDbGFpbXNSZXF1ZXN0S2V5c107XG5cbi8qKlxuICogd2UgY29uc2lkZXJlZCBtYWtpbmcgdGhpcyBcImVudW1cIiBpbiB0aGUgcmVxdWVzdCBpbnN0ZWFkIG9mIHN0cmluZywgaG93ZXZlciBpdCBsb29rcyBsaWtlIHRoZSBhbGxvd2VkIGxpc3Qgb2ZcbiAqIHByb21wdCB2YWx1ZXMga2VwdCBjaGFuZ2luZyBvdmVyIHBhc3QgY291cGxlIG9mIHllYXJzLiBUaGVyZSBhcmUgc29tZSB1bmRvY3VtZW50ZWQgcHJvbXB0IHZhbHVlcyBmb3Igc29tZVxuICogaW50ZXJuYWwgcGFydG5lcnMgdG9vLCBoZW5jZSB0aGUgY2hvaWNlIG9mIGdlbmVyaWMgXCJzdHJpbmdcIiB0eXBlIGluc3RlYWQgb2YgdGhlIFwiZW51bVwiXG4gKi9cbmV4cG9ydCBjb25zdCBQcm9tcHRWYWx1ZSA9IHtcbiAgICBMT0dJTjogXCJsb2dpblwiLFxuICAgIFNFTEVDVF9BQ0NPVU5UOiBcInNlbGVjdF9hY2NvdW50XCIsXG4gICAgQ09OU0VOVDogXCJjb25zZW50XCIsXG4gICAgTk9ORTogXCJub25lXCIsXG4gICAgQ1JFQVRFOiBcImNyZWF0ZVwiLFxuICAgIE5PX1NFU1NJT046IFwibm9fc2Vzc2lvblwiLFxufTtcblxuLyoqXG4gKiBhbGxvd2VkIHZhbHVlcyBmb3IgY29kZVZlcmlmaWVyXG4gKi9cbmV4cG9ydCBjb25zdCBDb2RlQ2hhbGxlbmdlTWV0aG9kVmFsdWVzID0ge1xuICAgIFBMQUlOOiBcInBsYWluXCIsXG4gICAgUzI1NjogXCJTMjU2XCIsXG59O1xuXG4vKipcbiAqIEFsbG93ZWQgdmFsdWVzIGZvciByZXNwb25zZV90eXBlXG4gKi9cbmV4cG9ydCBjb25zdCBPQXV0aFJlc3BvbnNlVHlwZSA9IHtcbiAgICBDT0RFOiBcImNvZGVcIixcbiAgICBJRFRPS0VOX1RPS0VOOiBcImlkX3Rva2VuIHRva2VuXCIsXG4gICAgSURUT0tFTl9UT0tFTl9SRUZSRVNIVE9LRU46IFwiaWRfdG9rZW4gdG9rZW4gcmVmcmVzaF90b2tlblwiLFxufSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIE9BdXRoUmVzcG9uc2VUeXBlID1cbiAgICAodHlwZW9mIE9BdXRoUmVzcG9uc2VUeXBlKVtrZXlvZiB0eXBlb2YgT0F1dGhSZXNwb25zZVR5cGVdO1xuXG4vKipcbiAqIGFsbG93ZWQgdmFsdWVzIGZvciBzZXJ2ZXIgcmVzcG9uc2UgdHlwZVxuICogQGRlcHJlY2F0ZWQgVXNlIFJlc3BvbnNlTW9kZSBpbnN0ZWFkXG4gKi9cbmV4cG9ydCBjb25zdCBTZXJ2ZXJSZXNwb25zZVR5cGUgPSB7XG4gICAgUVVFUlk6IFwicXVlcnlcIixcbiAgICBGUkFHTUVOVDogXCJmcmFnbWVudFwiLFxufSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIFNlcnZlclJlc3BvbnNlVHlwZSA9XG4gICAgKHR5cGVvZiBTZXJ2ZXJSZXNwb25zZVR5cGUpW2tleW9mIHR5cGVvZiBTZXJ2ZXJSZXNwb25zZVR5cGVdO1xuXG4vKipcbiAqIGFsbG93ZWQgdmFsdWVzIGZvciByZXNwb25zZV9tb2RlXG4gKi9cbmV4cG9ydCBjb25zdCBSZXNwb25zZU1vZGUgPSB7XG4gICAgUVVFUlk6IFwicXVlcnlcIixcbiAgICBGUkFHTUVOVDogXCJmcmFnbWVudFwiLFxuICAgIEZPUk1fUE9TVDogXCJmb3JtX3Bvc3RcIixcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBSZXNwb25zZU1vZGUgPSAodHlwZW9mIFJlc3BvbnNlTW9kZSlba2V5b2YgdHlwZW9mIFJlc3BvbnNlTW9kZV07XG5cbi8qKlxuICogYWxsb3dlZCBncmFudF90eXBlXG4gKi9cbmV4cG9ydCBjb25zdCBHcmFudFR5cGUgPSB7XG4gICAgSU1QTElDSVRfR1JBTlQ6IFwiaW1wbGljaXRcIixcbiAgICBBVVRIT1JJWkFUSU9OX0NPREVfR1JBTlQ6IFwiYXV0aG9yaXphdGlvbl9jb2RlXCIsXG4gICAgQ0xJRU5UX0NSRURFTlRJQUxTX0dSQU5UOiBcImNsaWVudF9jcmVkZW50aWFsc1wiLFxuICAgIFJFU09VUkNFX09XTkVSX1BBU1NXT1JEX0dSQU5UOiBcInBhc3N3b3JkXCIsXG4gICAgUkVGUkVTSF9UT0tFTl9HUkFOVDogXCJyZWZyZXNoX3Rva2VuXCIsXG4gICAgREVWSUNFX0NPREVfR1JBTlQ6IFwiZGV2aWNlX2NvZGVcIixcbiAgICBKV1RfQkVBUkVSOiBcInVybjppZXRmOnBhcmFtczpvYXV0aDpncmFudC10eXBlOmp3dC1iZWFyZXJcIixcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBHcmFudFR5cGUgPSAodHlwZW9mIEdyYW50VHlwZSlba2V5b2YgdHlwZW9mIEdyYW50VHlwZV07XG5cbi8qKlxuICogQWNjb3VudCB0eXBlcyBpbiBDYWNoZVxuICovXG5leHBvcnQgY29uc3QgQ2FjaGVBY2NvdW50VHlwZSA9IHtcbiAgICBNU1NUU19BQ0NPVU5UX1RZUEU6IFwiTVNTVFNcIixcbiAgICBBREZTX0FDQ09VTlRfVFlQRTogXCJBREZTXCIsXG4gICAgTVNBVjFfQUNDT1VOVF9UWVBFOiBcIk1TQVwiLFxuICAgIEdFTkVSSUNfQUNDT1VOVF9UWVBFOiBcIkdlbmVyaWNcIiwgLy8gTlRMTSwgS2VyYmVyb3MsIEZCQSwgQmFzaWMgZXRjXG59IGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgQ2FjaGVBY2NvdW50VHlwZSA9XG4gICAgKHR5cGVvZiBDYWNoZUFjY291bnRUeXBlKVtrZXlvZiB0eXBlb2YgQ2FjaGVBY2NvdW50VHlwZV07XG5cbi8qKlxuICogU2VwYXJhdG9ycyB1c2VkIGluIGNhY2hlXG4gKi9cbmV4cG9ydCBjb25zdCBTZXBhcmF0b3JzID0ge1xuICAgIENBQ0hFX0tFWV9TRVBBUkFUT1I6IFwiLVwiLFxuICAgIENMSUVOVF9JTkZPX1NFUEFSQVRPUjogXCIuXCIsXG59IGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgU2VwYXJhdG9ycyA9ICh0eXBlb2YgU2VwYXJhdG9ycylba2V5b2YgdHlwZW9mIFNlcGFyYXRvcnNdO1xuXG4vKipcbiAqIENyZWRlbnRpYWwgVHlwZSBzdG9yZWQgaW4gdGhlIGNhY2hlXG4gKi9cbmV4cG9ydCBjb25zdCBDcmVkZW50aWFsVHlwZSA9IHtcbiAgICBJRF9UT0tFTjogXCJJZFRva2VuXCIsXG4gICAgQUNDRVNTX1RPS0VOOiBcIkFjY2Vzc1Rva2VuXCIsXG4gICAgQUNDRVNTX1RPS0VOX1dJVEhfQVVUSF9TQ0hFTUU6IFwiQWNjZXNzVG9rZW5fV2l0aF9BdXRoU2NoZW1lXCIsXG4gICAgUkVGUkVTSF9UT0tFTjogXCJSZWZyZXNoVG9rZW5cIixcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBDcmVkZW50aWFsVHlwZSA9XG4gICAgKHR5cGVvZiBDcmVkZW50aWFsVHlwZSlba2V5b2YgdHlwZW9mIENyZWRlbnRpYWxUeXBlXTtcblxuLyoqXG4gKiBDb21iaW5lIGFsbCBjYWNoZSB0eXBlc1xuICovXG5leHBvcnQgY29uc3QgQ2FjaGVUeXBlID0ge1xuICAgIEFERlM6IDEwMDEsXG4gICAgTVNBOiAxMDAyLFxuICAgIE1TU1RTOiAxMDAzLFxuICAgIEdFTkVSSUM6IDEwMDQsXG4gICAgQUNDRVNTX1RPS0VOOiAyMDAxLFxuICAgIFJFRlJFU0hfVE9LRU46IDIwMDIsXG4gICAgSURfVE9LRU46IDIwMDMsXG4gICAgQVBQX01FVEFEQVRBOiAzMDAxLFxuICAgIFVOREVGSU5FRDogOTk5OSxcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBDYWNoZVR5cGUgPSAodHlwZW9mIENhY2hlVHlwZSlba2V5b2YgdHlwZW9mIENhY2hlVHlwZV07XG5cbi8qKlxuICogTW9yZSBDYWNoZSByZWxhdGVkIGNvbnN0YW50c1xuICovXG5leHBvcnQgY29uc3QgQVBQX01FVEFEQVRBID0gXCJhcHBtZXRhZGF0YVwiO1xuZXhwb3J0IGNvbnN0IENMSUVOVF9JTkZPID0gXCJjbGllbnRfaW5mb1wiO1xuZXhwb3J0IGNvbnN0IFRIRV9GQU1JTFlfSUQgPSBcIjFcIjtcblxuZXhwb3J0IGNvbnN0IEFVVEhPUklUWV9NRVRBREFUQV9DT05TVEFOVFMgPSB7XG4gICAgQ0FDSEVfS0VZOiBcImF1dGhvcml0eS1tZXRhZGF0YVwiLFxuICAgIFJFRlJFU0hfVElNRV9TRUNPTkRTOiAzNjAwICogMjQsIC8vIDI0IEhvdXJzXG59O1xuXG5leHBvcnQgY29uc3QgQXV0aG9yaXR5TWV0YWRhdGFTb3VyY2UgPSB7XG4gICAgQ09ORklHOiBcImNvbmZpZ1wiLFxuICAgIENBQ0hFOiBcImNhY2hlXCIsXG4gICAgTkVUV09SSzogXCJuZXR3b3JrXCIsXG4gICAgSEFSRENPREVEX1ZBTFVFUzogXCJoYXJkY29kZWRfdmFsdWVzXCIsXG59IGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgQXV0aG9yaXR5TWV0YWRhdGFTb3VyY2UgPVxuICAgICh0eXBlb2YgQXV0aG9yaXR5TWV0YWRhdGFTb3VyY2UpW2tleW9mIHR5cGVvZiBBdXRob3JpdHlNZXRhZGF0YVNvdXJjZV07XG5cbmV4cG9ydCBjb25zdCBTRVJWRVJfVEVMRU1fQ09OU1RBTlRTID0ge1xuICAgIFNDSEVNQV9WRVJTSU9OOiA1LFxuICAgIE1BWF9DVVJfSEVBREVSX0JZVEVTOiA4MCwgLy8gRVNUUyBsaW1pdCBpcyAxMDBCLCBzZXQgdG8gODAgdG8gcHJvdmlkZSBhIDIwQiBidWZmZXJcbiAgICBNQVhfTEFTVF9IRUFERVJfQllURVM6IDMzMCwgLy8gRVNUUyBsaW1pdCBpcyAzNTBCLCBzZXQgdG8gMzMwIHRvIHByb3ZpZGUgYSAyMEIgYnVmZmVyLFxuICAgIE1BWF9DQUNIRURfRVJST1JTOiA1MCwgLy8gTGltaXQgdGhlIG51bWJlciBvZiBlcnJvcnMgdGhhdCBjYW4gYmUgc3RvcmVkIHRvIHByZXZlbnQgdW5jb250cm9sbGVkIHNpemUgZ2FpbnNcbiAgICBDQUNIRV9LRVk6IFwic2VydmVyLXRlbGVtZXRyeVwiLFxuICAgIENBVEVHT1JZX1NFUEFSQVRPUjogXCJ8XCIsXG4gICAgVkFMVUVfU0VQQVJBVE9SOiBcIixcIixcbiAgICBPVkVSRkxPV19UUlVFOiBcIjFcIixcbiAgICBPVkVSRkxPV19GQUxTRTogXCIwXCIsXG4gICAgVU5LTk9XTl9FUlJPUjogXCJ1bmtub3duX2Vycm9yXCIsXG59O1xuXG4vKipcbiAqIFR5cGUgb2YgdGhlIGF1dGhlbnRpY2F0aW9uIHJlcXVlc3RcbiAqL1xuZXhwb3J0IGNvbnN0IEF1dGhlbnRpY2F0aW9uU2NoZW1lID0ge1xuICAgIEJFQVJFUjogXCJCZWFyZXJcIixcbiAgICBQT1A6IFwicG9wXCIsXG4gICAgU1NIOiBcInNzaC1jZXJ0XCIsXG59IGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgQXV0aGVudGljYXRpb25TY2hlbWUgPVxuICAgICh0eXBlb2YgQXV0aGVudGljYXRpb25TY2hlbWUpW2tleW9mIHR5cGVvZiBBdXRoZW50aWNhdGlvblNjaGVtZV07XG5cbi8qKlxuICogQ29uc3RhbnRzIHJlbGF0ZWQgdG8gdGhyb3R0bGluZ1xuICovXG5leHBvcnQgY29uc3QgVGhyb3R0bGluZ0NvbnN0YW50cyA9IHtcbiAgICAvLyBEZWZhdWx0IHRpbWUgdG8gdGhyb3R0bGUgUmVxdWVzdFRodW1icHJpbnQgaW4gc2Vjb25kc1xuICAgIERFRkFVTFRfVEhST1RUTEVfVElNRV9TRUNPTkRTOiA2MCxcbiAgICAvLyBEZWZhdWx0IG1heGltdW0gdGltZSB0byB0aHJvdHRsZSBpbiBzZWNvbmRzLCBvdmVycmlkZXMgd2hhdCB0aGUgc2VydmVyIHNlbmRzIGJhY2tcbiAgICBERUZBVUxUX01BWF9USFJPVFRMRV9USU1FX1NFQ09ORFM6IDM2MDAsXG4gICAgLy8gUHJlZml4IGZvciBzdG9yaW5nIHRocm90dGxpbmcgZW50cmllc1xuICAgIFRIUk9UVExJTkdfUFJFRklYOiBcInRocm90dGxpbmdcIixcbiAgICAvLyBWYWx1ZSBhc3NpZ25lZCB0byB0aGUgeC1tcy1saWItY2FwYWJpbGl0eSBoZWFkZXIgdG8gaW5kaWNhdGUgdG8gdGhlIHNlcnZlciB0aGUgbGlicmFyeSBzdXBwb3J0cyB0aHJvdHRsaW5nXG4gICAgWF9NU19MSUJfQ0FQQUJJTElUWV9WQUxVRTogXCJyZXRyeS1hZnRlciwgaDQyOVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IEVycm9ycyA9IHtcbiAgICBJTlZBTElEX0dSQU5UX0VSUk9SOiBcImludmFsaWRfZ3JhbnRcIixcbiAgICBDTElFTlRfTUlTTUFUQ0hfRVJST1I6IFwiY2xpZW50X21pc21hdGNoXCIsXG59O1xuXG4vKipcbiAqIFBhc3N3b3JkIGdyYW50IHBhcmFtZXRlcnNcbiAqL1xuZXhwb3J0IGNvbnN0IFBhc3N3b3JkR3JhbnRDb25zdGFudHMgPSB7XG4gICAgdXNlcm5hbWU6IFwidXNlcm5hbWVcIixcbiAgICBwYXNzd29yZDogXCJwYXNzd29yZFwiLFxufSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIFBhc3N3b3JkR3JhbnRDb25zdGFudHMgPVxuICAgICh0eXBlb2YgUGFzc3dvcmRHcmFudENvbnN0YW50cylba2V5b2YgdHlwZW9mIFBhc3N3b3JkR3JhbnRDb25zdGFudHNdO1xuXG4vKipcbiAqIFJlc3BvbnNlIGNvZGVzXG4gKi9cbmV4cG9ydCBjb25zdCBSZXNwb25zZUNvZGVzID0ge1xuICAgIGh0dHBTdWNjZXNzOiAyMDAsXG4gICAgaHR0cEJhZFJlcXVlc3Q6IDQwMCxcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBSZXNwb25zZUNvZGVzID0gKHR5cGVvZiBSZXNwb25zZUNvZGVzKVtrZXlvZiB0eXBlb2YgUmVzcG9uc2VDb2Rlc107XG5cbi8qKlxuICogUmVnaW9uIERpc2NvdmVyeSBTb3VyY2VzXG4gKi9cbmV4cG9ydCBjb25zdCBSZWdpb25EaXNjb3ZlcnlTb3VyY2VzID0ge1xuICAgIEZBSUxFRF9BVVRPX0RFVEVDVElPTjogXCIxXCIsXG4gICAgSU5URVJOQUxfQ0FDSEU6IFwiMlwiLFxuICAgIEVOVklST05NRU5UX1ZBUklBQkxFOiBcIjNcIixcbiAgICBJTURTOiBcIjRcIixcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBSZWdpb25EaXNjb3ZlcnlTb3VyY2VzID1cbiAgICAodHlwZW9mIFJlZ2lvbkRpc2NvdmVyeVNvdXJjZXMpW2tleW9mIHR5cGVvZiBSZWdpb25EaXNjb3ZlcnlTb3VyY2VzXTtcblxuLyoqXG4gKiBSZWdpb24gRGlzY292ZXJ5IE91dGNvbWVzXG4gKi9cbmV4cG9ydCBjb25zdCBSZWdpb25EaXNjb3ZlcnlPdXRjb21lcyA9IHtcbiAgICBDT05GSUdVUkVEX01BVENIRVNfREVURUNURUQ6IFwiMVwiLFxuICAgIENPTkZJR1VSRURfTk9fQVVUT19ERVRFQ1RJT046IFwiMlwiLFxuICAgIENPTkZJR1VSRURfTk9UX0RFVEVDVEVEOiBcIjNcIixcbiAgICBBVVRPX0RFVEVDVElPTl9SRVFVRVNURURfU1VDQ0VTU0ZVTDogXCI0XCIsXG4gICAgQVVUT19ERVRFQ1RJT05fUkVRVUVTVEVEX0ZBSUxFRDogXCI1XCIsXG59IGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgUmVnaW9uRGlzY292ZXJ5T3V0Y29tZXMgPVxuICAgICh0eXBlb2YgUmVnaW9uRGlzY292ZXJ5T3V0Y29tZXMpW2tleW9mIHR5cGVvZiBSZWdpb25EaXNjb3ZlcnlPdXRjb21lc107XG5cbi8qKlxuICogU3BlY2lmaWVzIHRoZSByZWFzb24gZm9yIGZldGNoaW5nIHRoZSBhY2Nlc3MgdG9rZW4gZnJvbSB0aGUgaWRlbnRpdHkgcHJvdmlkZXJcbiAqL1xuZXhwb3J0IGNvbnN0IENhY2hlT3V0Y29tZSA9IHtcbiAgICAvLyBXaGVuIGEgdG9rZW4gaXMgZm91bmQgaW4gdGhlIGNhY2hlIG9yIHRoZSBjYWNoZSBpcyBub3Qgc3VwcG9zZWQgdG8gYmUgaGl0IHdoZW4gbWFraW5nIHRoZSByZXF1ZXN0XG4gICAgTk9UX0FQUExJQ0FCTEU6IFwiMFwiLFxuICAgIC8vIFdoZW4gdGhlIHRva2VuIHJlcXVlc3QgZ29lcyB0byB0aGUgaWRlbnRpdHkgcHJvdmlkZXIgYmVjYXVzZSBmb3JjZV9yZWZyZXNoIHdhcyBzZXQgdG8gdHJ1ZS4gQWxzbyBvY2N1cnMgaWYgY2xhaW1zIHdlcmUgcmVxdWVzdGVkXG4gICAgRk9SQ0VfUkVGUkVTSF9PUl9DTEFJTVM6IFwiMVwiLFxuICAgIC8vIFdoZW4gdGhlIHRva2VuIHJlcXVlc3QgZ29lcyB0byB0aGUgaWRlbnRpdHkgcHJvdmlkZXIgYmVjYXVzZSBubyBjYWNoZWQgYWNjZXNzIHRva2VuIGV4aXN0c1xuICAgIE5PX0NBQ0hFRF9BQ0NFU1NfVE9LRU46IFwiMlwiLFxuICAgIC8vIFdoZW4gdGhlIHRva2VuIHJlcXVlc3QgZ29lcyB0byB0aGUgaWRlbnRpdHkgcHJvdmlkZXIgYmVjYXVzZSBjYWNoZWQgYWNjZXNzIHRva2VuIGV4cGlyZWRcbiAgICBDQUNIRURfQUNDRVNTX1RPS0VOX0VYUElSRUQ6IFwiM1wiLFxuICAgIC8vIFdoZW4gdGhlIHRva2VuIHJlcXVlc3QgZ29lcyB0byB0aGUgaWRlbnRpdHkgcHJvdmlkZXIgYmVjYXVzZSByZWZyZXNoX2luIHdhcyB1c2VkIGFuZCB0aGUgZXhpc3RpbmcgdG9rZW4gbmVlZHMgdG8gYmUgcmVmcmVzaGVkXG4gICAgUFJPQUNUSVZFTFlfUkVGUkVTSEVEOiBcIjRcIixcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBDYWNoZU91dGNvbWUgPSAodHlwZW9mIENhY2hlT3V0Y29tZSlba2V5b2YgdHlwZW9mIENhY2hlT3V0Y29tZV07XG5cbmV4cG9ydCBjb25zdCBKc29uV2ViVG9rZW5UeXBlcyA9IHtcbiAgICBKd3Q6IFwiSldUXCIsXG4gICAgSndrOiBcIkpXS1wiLFxuICAgIFBvcDogXCJwb3BcIixcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBKc29uV2ViVG9rZW5UeXBlcyA9XG4gICAgKHR5cGVvZiBKc29uV2ViVG9rZW5UeXBlcylba2V5b2YgdHlwZW9mIEpzb25XZWJUb2tlblR5cGVzXTtcblxuZXhwb3J0IGNvbnN0IE9ORV9EQVlfSU5fTVMgPSA4NjQwMDAwMDtcblxuLy8gVG9rZW4gcmVuZXdhbCBvZmZzZXQgZGVmYXVsdCBpbiBzZWNvbmRzXG5leHBvcnQgY29uc3QgREVGQVVMVF9UT0tFTl9SRU5FV0FMX09GRlNFVF9TRUMgPSAzMDA7XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQXV0aEVycm9yTWVzc2FnZSBjbGFzcyBjb250YWluaW5nIHN0cmluZyBjb25zdGFudHMgdXNlZCBieSBlcnJvciBjb2RlcyBhbmQgbWVzc2FnZXMuXG4gKi9cbmV4cG9ydCBjb25zdCB1bmV4cGVjdGVkRXJyb3IgPSBcInVuZXhwZWN0ZWRfZXJyb3JcIjtcbmV4cG9ydCBjb25zdCBwb3N0UmVxdWVzdEZhaWxlZCA9IFwicG9zdF9yZXF1ZXN0X2ZhaWxlZFwiO1xuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDb25zdGFudHMgfSBmcm9tIFwiLi4vdXRpbHMvQ29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgKiBhcyBBdXRoRXJyb3JDb2RlcyBmcm9tIFwiLi9BdXRoRXJyb3JDb2Rlcy5qc1wiO1xuZXhwb3J0IHsgQXV0aEVycm9yQ29kZXMgfTtcblxuZXhwb3J0IGNvbnN0IEF1dGhFcnJvck1lc3NhZ2VzID0ge1xuICAgIFtBdXRoRXJyb3JDb2Rlcy51bmV4cGVjdGVkRXJyb3JdOiBcIlVuZXhwZWN0ZWQgZXJyb3IgaW4gYXV0aGVudGljYXRpb24uXCIsXG4gICAgW0F1dGhFcnJvckNvZGVzLnBvc3RSZXF1ZXN0RmFpbGVkXTpcbiAgICAgICAgXCJQb3N0IHJlcXVlc3QgZmFpbGVkIGZyb20gdGhlIG5ldHdvcmssIGNvdWxkIGJlIGEgNHh4LzV4eCBvciBhIG5ldHdvcmsgdW5hdmFpbGFiaWxpdHkuIFBsZWFzZSBjaGVjayB0aGUgZXhhY3QgZXJyb3IgY29kZSBmb3IgZGV0YWlscy5cIixcbn07XG5cbi8qKlxuICogQXV0aEVycm9yTWVzc2FnZSBjbGFzcyBjb250YWluaW5nIHN0cmluZyBjb25zdGFudHMgdXNlZCBieSBlcnJvciBjb2RlcyBhbmQgbWVzc2FnZXMuXG4gKiBAZGVwcmVjYXRlZCBVc2UgQXV0aEVycm9yQ29kZXMgaW5zdGVhZFxuICovXG5leHBvcnQgY29uc3QgQXV0aEVycm9yTWVzc2FnZSA9IHtcbiAgICB1bmV4cGVjdGVkRXJyb3I6IHtcbiAgICAgICAgY29kZTogQXV0aEVycm9yQ29kZXMudW5leHBlY3RlZEVycm9yLFxuICAgICAgICBkZXNjOiBBdXRoRXJyb3JNZXNzYWdlc1tBdXRoRXJyb3JDb2Rlcy51bmV4cGVjdGVkRXJyb3JdLFxuICAgIH0sXG4gICAgcG9zdFJlcXVlc3RGYWlsZWQ6IHtcbiAgICAgICAgY29kZTogQXV0aEVycm9yQ29kZXMucG9zdFJlcXVlc3RGYWlsZWQsXG4gICAgICAgIGRlc2M6IEF1dGhFcnJvck1lc3NhZ2VzW0F1dGhFcnJvckNvZGVzLnBvc3RSZXF1ZXN0RmFpbGVkXSxcbiAgICB9LFxufTtcblxuLyoqXG4gKiBHZW5lcmFsIGVycm9yIGNsYXNzIHRocm93biBieSB0aGUgTVNBTC5qcyBsaWJyYXJ5LlxuICovXG5leHBvcnQgY2xhc3MgQXV0aEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIC8qKlxuICAgICAqIFNob3J0IHN0cmluZyBkZW5vdGluZyBlcnJvclxuICAgICAqL1xuICAgIGVycm9yQ29kZTogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogRGV0YWlsZWQgZGVzY3JpcHRpb24gb2YgZXJyb3JcbiAgICAgKi9cbiAgICBlcnJvck1lc3NhZ2U6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIERlc2NyaWJlcyB0aGUgc3ViY2xhc3Mgb2YgYW4gZXJyb3JcbiAgICAgKi9cbiAgICBzdWJFcnJvcjogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogQ29ycmVsYXRpb25JZCBhc3NvY2lhdGVkIHdpdGggdGhlIGVycm9yXG4gICAgICovXG4gICAgY29ycmVsYXRpb25JZDogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoZXJyb3JDb2RlPzogc3RyaW5nLCBlcnJvck1lc3NhZ2U/OiBzdHJpbmcsIHN1YmVycm9yPzogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IGVycm9yU3RyaW5nID0gZXJyb3JNZXNzYWdlXG4gICAgICAgICAgICA/IGAke2Vycm9yQ29kZX06ICR7ZXJyb3JNZXNzYWdlfWBcbiAgICAgICAgICAgIDogZXJyb3JDb2RlO1xuICAgICAgICBzdXBlcihlcnJvclN0cmluZyk7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBBdXRoRXJyb3IucHJvdG90eXBlKTtcblxuICAgICAgICB0aGlzLmVycm9yQ29kZSA9IGVycm9yQ29kZSB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HO1xuICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9IGVycm9yTWVzc2FnZSB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HO1xuICAgICAgICB0aGlzLnN1YkVycm9yID0gc3ViZXJyb3IgfHwgQ29uc3RhbnRzLkVNUFRZX1NUUklORztcbiAgICAgICAgdGhpcy5uYW1lID0gXCJBdXRoRXJyb3JcIjtcbiAgICB9XG5cbiAgICBzZXRDb3JyZWxhdGlvbklkKGNvcnJlbGF0aW9uSWQ6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLmNvcnJlbGF0aW9uSWQgPSBjb3JyZWxhdGlvbklkO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUF1dGhFcnJvcihcbiAgICBjb2RlOiBzdHJpbmcsXG4gICAgYWRkaXRpb25hbE1lc3NhZ2U/OiBzdHJpbmdcbik6IEF1dGhFcnJvciB7XG4gICAgcmV0dXJuIG5ldyBBdXRoRXJyb3IoXG4gICAgICAgIGNvZGUsXG4gICAgICAgIGFkZGl0aW9uYWxNZXNzYWdlXG4gICAgICAgICAgICA/IGAke0F1dGhFcnJvck1lc3NhZ2VzW2NvZGVdfSAke2FkZGl0aW9uYWxNZXNzYWdlfWBcbiAgICAgICAgICAgIDogQXV0aEVycm9yTWVzc2FnZXNbY29kZV1cbiAgICApO1xufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5leHBvcnQgY29uc3QgY2xpZW50SW5mb0RlY29kaW5nRXJyb3IgPSBcImNsaWVudF9pbmZvX2RlY29kaW5nX2Vycm9yXCI7XG5leHBvcnQgY29uc3QgY2xpZW50SW5mb0VtcHR5RXJyb3IgPSBcImNsaWVudF9pbmZvX2VtcHR5X2Vycm9yXCI7XG5leHBvcnQgY29uc3QgdG9rZW5QYXJzaW5nRXJyb3IgPSBcInRva2VuX3BhcnNpbmdfZXJyb3JcIjtcbmV4cG9ydCBjb25zdCBudWxsT3JFbXB0eVRva2VuID0gXCJudWxsX29yX2VtcHR5X3Rva2VuXCI7XG5leHBvcnQgY29uc3QgZW5kcG9pbnRSZXNvbHV0aW9uRXJyb3IgPSBcImVuZHBvaW50c19yZXNvbHV0aW9uX2Vycm9yXCI7XG5leHBvcnQgY29uc3QgbmV0d29ya0Vycm9yID0gXCJuZXR3b3JrX2Vycm9yXCI7XG5leHBvcnQgY29uc3Qgb3BlbklkQ29uZmlnRXJyb3IgPSBcIm9wZW5pZF9jb25maWdfZXJyb3JcIjtcbmV4cG9ydCBjb25zdCBoYXNoTm90RGVzZXJpYWxpemVkID0gXCJoYXNoX25vdF9kZXNlcmlhbGl6ZWRcIjtcbmV4cG9ydCBjb25zdCBpbnZhbGlkU3RhdGUgPSBcImludmFsaWRfc3RhdGVcIjtcbmV4cG9ydCBjb25zdCBzdGF0ZU1pc21hdGNoID0gXCJzdGF0ZV9taXNtYXRjaFwiO1xuZXhwb3J0IGNvbnN0IHN0YXRlTm90Rm91bmQgPSBcInN0YXRlX25vdF9mb3VuZFwiO1xuZXhwb3J0IGNvbnN0IG5vbmNlTWlzbWF0Y2ggPSBcIm5vbmNlX21pc21hdGNoXCI7XG5leHBvcnQgY29uc3QgYXV0aFRpbWVOb3RGb3VuZCA9IFwiYXV0aF90aW1lX25vdF9mb3VuZFwiO1xuZXhwb3J0IGNvbnN0IG1heEFnZVRyYW5zcGlyZWQgPSBcIm1heF9hZ2VfdHJhbnNwaXJlZFwiO1xuZXhwb3J0IGNvbnN0IG11bHRpcGxlTWF0Y2hpbmdUb2tlbnMgPSBcIm11bHRpcGxlX21hdGNoaW5nX3Rva2Vuc1wiO1xuZXhwb3J0IGNvbnN0IG11bHRpcGxlTWF0Y2hpbmdBY2NvdW50cyA9IFwibXVsdGlwbGVfbWF0Y2hpbmdfYWNjb3VudHNcIjtcbmV4cG9ydCBjb25zdCBtdWx0aXBsZU1hdGNoaW5nQXBwTWV0YWRhdGEgPSBcIm11bHRpcGxlX21hdGNoaW5nX2FwcE1ldGFkYXRhXCI7XG5leHBvcnQgY29uc3QgcmVxdWVzdENhbm5vdEJlTWFkZSA9IFwicmVxdWVzdF9jYW5ub3RfYmVfbWFkZVwiO1xuZXhwb3J0IGNvbnN0IGNhbm5vdFJlbW92ZUVtcHR5U2NvcGUgPSBcImNhbm5vdF9yZW1vdmVfZW1wdHlfc2NvcGVcIjtcbmV4cG9ydCBjb25zdCBjYW5ub3RBcHBlbmRTY29wZVNldCA9IFwiY2Fubm90X2FwcGVuZF9zY29wZXNldFwiO1xuZXhwb3J0IGNvbnN0IGVtcHR5SW5wdXRTY29wZVNldCA9IFwiZW1wdHlfaW5wdXRfc2NvcGVzZXRcIjtcbmV4cG9ydCBjb25zdCBkZXZpY2VDb2RlUG9sbGluZ0NhbmNlbGxlZCA9IFwiZGV2aWNlX2NvZGVfcG9sbGluZ19jYW5jZWxsZWRcIjtcbmV4cG9ydCBjb25zdCBkZXZpY2VDb2RlRXhwaXJlZCA9IFwiZGV2aWNlX2NvZGVfZXhwaXJlZFwiO1xuZXhwb3J0IGNvbnN0IGRldmljZUNvZGVVbmtub3duRXJyb3IgPSBcImRldmljZV9jb2RlX3Vua25vd25fZXJyb3JcIjtcbmV4cG9ydCBjb25zdCBub0FjY291bnRJblNpbGVudFJlcXVlc3QgPSBcIm5vX2FjY291bnRfaW5fc2lsZW50X3JlcXVlc3RcIjtcbmV4cG9ydCBjb25zdCBpbnZhbGlkQ2FjaGVSZWNvcmQgPSBcImludmFsaWRfY2FjaGVfcmVjb3JkXCI7XG5leHBvcnQgY29uc3QgaW52YWxpZENhY2hlRW52aXJvbm1lbnQgPSBcImludmFsaWRfY2FjaGVfZW52aXJvbm1lbnRcIjtcbmV4cG9ydCBjb25zdCBub0FjY291bnRGb3VuZCA9IFwibm9fYWNjb3VudF9mb3VuZFwiO1xuZXhwb3J0IGNvbnN0IG5vQ3J5cHRvT2JqZWN0ID0gXCJub19jcnlwdG9fb2JqZWN0XCI7XG5leHBvcnQgY29uc3QgdW5leHBlY3RlZENyZWRlbnRpYWxUeXBlID0gXCJ1bmV4cGVjdGVkX2NyZWRlbnRpYWxfdHlwZVwiO1xuZXhwb3J0IGNvbnN0IGludmFsaWRBc3NlcnRpb24gPSBcImludmFsaWRfYXNzZXJ0aW9uXCI7XG5leHBvcnQgY29uc3QgaW52YWxpZENsaWVudENyZWRlbnRpYWwgPSBcImludmFsaWRfY2xpZW50X2NyZWRlbnRpYWxcIjtcbmV4cG9ydCBjb25zdCB0b2tlblJlZnJlc2hSZXF1aXJlZCA9IFwidG9rZW5fcmVmcmVzaF9yZXF1aXJlZFwiO1xuZXhwb3J0IGNvbnN0IHVzZXJUaW1lb3V0UmVhY2hlZCA9IFwidXNlcl90aW1lb3V0X3JlYWNoZWRcIjtcbmV4cG9ydCBjb25zdCB0b2tlbkNsYWltc0NuZlJlcXVpcmVkRm9yU2lnbmVkSnd0ID1cbiAgICBcInRva2VuX2NsYWltc19jbmZfcmVxdWlyZWRfZm9yX3NpZ25lZGp3dFwiO1xuZXhwb3J0IGNvbnN0IGF1dGhvcml6YXRpb25Db2RlTWlzc2luZ0Zyb21TZXJ2ZXJSZXNwb25zZSA9XG4gICAgXCJhdXRob3JpemF0aW9uX2NvZGVfbWlzc2luZ19mcm9tX3NlcnZlcl9yZXNwb25zZVwiO1xuZXhwb3J0IGNvbnN0IGJpbmRpbmdLZXlOb3RSZW1vdmVkID0gXCJiaW5kaW5nX2tleV9ub3RfcmVtb3ZlZFwiO1xuZXhwb3J0IGNvbnN0IGVuZFNlc3Npb25FbmRwb2ludE5vdFN1cHBvcnRlZCA9XG4gICAgXCJlbmRfc2Vzc2lvbl9lbmRwb2ludF9ub3Rfc3VwcG9ydGVkXCI7XG5leHBvcnQgY29uc3Qga2V5SWRNaXNzaW5nID0gXCJrZXlfaWRfbWlzc2luZ1wiO1xuZXhwb3J0IGNvbnN0IG5vTmV0d29ya0Nvbm5lY3Rpdml0eSA9IFwibm9fbmV0d29ya19jb25uZWN0aXZpdHlcIjtcbmV4cG9ydCBjb25zdCB1c2VyQ2FuY2VsZWQgPSBcInVzZXJfY2FuY2VsZWRcIjtcbmV4cG9ydCBjb25zdCBtaXNzaW5nVGVuYW50SWRFcnJvciA9IFwibWlzc2luZ190ZW5hbnRfaWRfZXJyb3JcIjtcbmV4cG9ydCBjb25zdCBtZXRob2ROb3RJbXBsZW1lbnRlZCA9IFwibWV0aG9kX25vdF9pbXBsZW1lbnRlZFwiO1xuZXhwb3J0IGNvbnN0IG5lc3RlZEFwcEF1dGhCcmlkZ2VEaXNhYmxlZCA9IFwibmVzdGVkX2FwcF9hdXRoX2JyaWRnZV9kaXNhYmxlZFwiO1xuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBBdXRoRXJyb3IgfSBmcm9tIFwiLi9BdXRoRXJyb3IuanNcIjtcbmltcG9ydCAqIGFzIENsaWVudEF1dGhFcnJvckNvZGVzIGZyb20gXCIuL0NsaWVudEF1dGhFcnJvckNvZGVzLmpzXCI7XG5leHBvcnQgeyBDbGllbnRBdXRoRXJyb3JDb2RlcyB9OyAvLyBBbGxvdyBpbXBvcnRpbmcgYXMgXCJDbGllbnRBdXRoRXJyb3JDb2Rlc1wiO1xuXG4vKipcbiAqIENsaWVudEF1dGhFcnJvck1lc3NhZ2UgY2xhc3MgY29udGFpbmluZyBzdHJpbmcgY29uc3RhbnRzIHVzZWQgYnkgZXJyb3IgY29kZXMgYW5kIG1lc3NhZ2VzLlxuICovXG5cbmV4cG9ydCBjb25zdCBDbGllbnRBdXRoRXJyb3JNZXNzYWdlcyA9IHtcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMuY2xpZW50SW5mb0RlY29kaW5nRXJyb3JdOlxuICAgICAgICBcIlRoZSBjbGllbnQgaW5mbyBjb3VsZCBub3QgYmUgcGFyc2VkL2RlY29kZWQgY29ycmVjdGx5XCIsXG4gICAgW0NsaWVudEF1dGhFcnJvckNvZGVzLmNsaWVudEluZm9FbXB0eUVycm9yXTogXCJUaGUgY2xpZW50IGluZm8gd2FzIGVtcHR5XCIsXG4gICAgW0NsaWVudEF1dGhFcnJvckNvZGVzLnRva2VuUGFyc2luZ0Vycm9yXTogXCJUb2tlbiBjYW5ub3QgYmUgcGFyc2VkXCIsXG4gICAgW0NsaWVudEF1dGhFcnJvckNvZGVzLm51bGxPckVtcHR5VG9rZW5dOiBcIlRoZSB0b2tlbiBpcyBudWxsIG9yIGVtcHR5XCIsXG4gICAgW0NsaWVudEF1dGhFcnJvckNvZGVzLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yXTpcbiAgICAgICAgXCJFbmRwb2ludHMgY2Fubm90IGJlIHJlc29sdmVkXCIsXG4gICAgW0NsaWVudEF1dGhFcnJvckNvZGVzLm5ldHdvcmtFcnJvcl06IFwiTmV0d29yayByZXF1ZXN0IGZhaWxlZFwiLFxuICAgIFtDbGllbnRBdXRoRXJyb3JDb2Rlcy5vcGVuSWRDb25maWdFcnJvcl06XG4gICAgICAgIFwiQ291bGQgbm90IHJldHJpZXZlIGVuZHBvaW50cy4gQ2hlY2sgeW91ciBhdXRob3JpdHkgYW5kIHZlcmlmeSB0aGUgLndlbGwta25vd24vb3BlbmlkLWNvbmZpZ3VyYXRpb24gZW5kcG9pbnQgcmV0dXJucyB0aGUgcmVxdWlyZWQgZW5kcG9pbnRzLlwiLFxuICAgIFtDbGllbnRBdXRoRXJyb3JDb2Rlcy5oYXNoTm90RGVzZXJpYWxpemVkXTpcbiAgICAgICAgXCJUaGUgaGFzaCBwYXJhbWV0ZXJzIGNvdWxkIG5vdCBiZSBkZXNlcmlhbGl6ZWRcIixcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZFN0YXRlXTogXCJTdGF0ZSB3YXMgbm90IHRoZSBleHBlY3RlZCBmb3JtYXRcIixcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMuc3RhdGVNaXNtYXRjaF06IFwiU3RhdGUgbWlzbWF0Y2ggZXJyb3JcIixcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMuc3RhdGVOb3RGb3VuZF06IFwiU3RhdGUgbm90IGZvdW5kXCIsXG4gICAgW0NsaWVudEF1dGhFcnJvckNvZGVzLm5vbmNlTWlzbWF0Y2hdOiBcIk5vbmNlIG1pc21hdGNoIGVycm9yXCIsXG4gICAgW0NsaWVudEF1dGhFcnJvckNvZGVzLmF1dGhUaW1lTm90Rm91bmRdOlxuICAgICAgICBcIk1heCBBZ2Ugd2FzIHJlcXVlc3RlZCBhbmQgdGhlIElEIHRva2VuIGlzIG1pc3NpbmcgdGhlIGF1dGhfdGltZSB2YXJpYWJsZS5cIiArXG4gICAgICAgIFwiIGF1dGhfdGltZSBpcyBhbiBvcHRpb25hbCBjbGFpbSBhbmQgaXMgbm90IGVuYWJsZWQgYnkgZGVmYXVsdCAtIGl0IG11c3QgYmUgZW5hYmxlZC5cIiArXG4gICAgICAgIFwiIFNlZSBodHRwczovL2FrYS5tcy9tc2FsanMvb3B0aW9uYWwtY2xhaW1zIGZvciBtb3JlIGluZm9ybWF0aW9uLlwiLFxuICAgIFtDbGllbnRBdXRoRXJyb3JDb2Rlcy5tYXhBZ2VUcmFuc3BpcmVkXTpcbiAgICAgICAgXCJNYXggQWdlIGlzIHNldCB0byAwLCBvciB0b28gbXVjaCB0aW1lIGhhcyBlbGFwc2VkIHNpbmNlIHRoZSBsYXN0IGVuZC11c2VyIGF1dGhlbnRpY2F0aW9uLlwiLFxuICAgIFtDbGllbnRBdXRoRXJyb3JDb2Rlcy5tdWx0aXBsZU1hdGNoaW5nVG9rZW5zXTpcbiAgICAgICAgXCJUaGUgY2FjaGUgY29udGFpbnMgbXVsdGlwbGUgdG9rZW5zIHNhdGlzZnlpbmcgdGhlIHJlcXVpcmVtZW50cy4gXCIgK1xuICAgICAgICBcIkNhbGwgQWNxdWlyZVRva2VuIGFnYWluIHByb3ZpZGluZyBtb3JlIHJlcXVpcmVtZW50cyBzdWNoIGFzIGF1dGhvcml0eSBvciBhY2NvdW50LlwiLFxuICAgIFtDbGllbnRBdXRoRXJyb3JDb2Rlcy5tdWx0aXBsZU1hdGNoaW5nQWNjb3VudHNdOlxuICAgICAgICBcIlRoZSBjYWNoZSBjb250YWlucyBtdWx0aXBsZSBhY2NvdW50cyBzYXRpc2Z5aW5nIHRoZSBnaXZlbiBwYXJhbWV0ZXJzLiBQbGVhc2UgcGFzcyBtb3JlIGluZm8gdG8gb2J0YWluIHRoZSBjb3JyZWN0IGFjY291bnRcIixcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMubXVsdGlwbGVNYXRjaGluZ0FwcE1ldGFkYXRhXTpcbiAgICAgICAgXCJUaGUgY2FjaGUgY29udGFpbnMgbXVsdGlwbGUgYXBwTWV0YWRhdGEgc2F0aXNmeWluZyB0aGUgZ2l2ZW4gcGFyYW1ldGVycy4gUGxlYXNlIHBhc3MgbW9yZSBpbmZvIHRvIG9idGFpbiB0aGUgY29ycmVjdCBhcHBNZXRhZGF0YVwiLFxuICAgIFtDbGllbnRBdXRoRXJyb3JDb2Rlcy5yZXF1ZXN0Q2Fubm90QmVNYWRlXTpcbiAgICAgICAgXCJUb2tlbiByZXF1ZXN0IGNhbm5vdCBiZSBtYWRlIHdpdGhvdXQgYXV0aG9yaXphdGlvbiBjb2RlIG9yIHJlZnJlc2ggdG9rZW4uXCIsXG4gICAgW0NsaWVudEF1dGhFcnJvckNvZGVzLmNhbm5vdFJlbW92ZUVtcHR5U2NvcGVdOlxuICAgICAgICBcIkNhbm5vdCByZW1vdmUgbnVsbCBvciBlbXB0eSBzY29wZSBmcm9tIFNjb3BlU2V0XCIsXG4gICAgW0NsaWVudEF1dGhFcnJvckNvZGVzLmNhbm5vdEFwcGVuZFNjb3BlU2V0XTogXCJDYW5ub3QgYXBwZW5kIFNjb3BlU2V0XCIsXG4gICAgW0NsaWVudEF1dGhFcnJvckNvZGVzLmVtcHR5SW5wdXRTY29wZVNldF06XG4gICAgICAgIFwiRW1wdHkgaW5wdXQgU2NvcGVTZXQgY2Fubm90IGJlIHByb2Nlc3NlZFwiLFxuICAgIFtDbGllbnRBdXRoRXJyb3JDb2Rlcy5kZXZpY2VDb2RlUG9sbGluZ0NhbmNlbGxlZF06XG4gICAgICAgIFwiQ2FsbGVyIGhhcyBjYW5jZWxsZWQgdG9rZW4gZW5kcG9pbnQgcG9sbGluZyBkdXJpbmcgZGV2aWNlIGNvZGUgZmxvdyBieSBzZXR0aW5nIERldmljZUNvZGVSZXF1ZXN0LmNhbmNlbCA9IHRydWUuXCIsXG4gICAgW0NsaWVudEF1dGhFcnJvckNvZGVzLmRldmljZUNvZGVFeHBpcmVkXTogXCJEZXZpY2UgY29kZSBpcyBleHBpcmVkLlwiLFxuICAgIFtDbGllbnRBdXRoRXJyb3JDb2Rlcy5kZXZpY2VDb2RlVW5rbm93bkVycm9yXTpcbiAgICAgICAgXCJEZXZpY2UgY29kZSBzdG9wcGVkIHBvbGxpbmcgZm9yIHVua25vd24gcmVhc29ucy5cIixcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMubm9BY2NvdW50SW5TaWxlbnRSZXF1ZXN0XTpcbiAgICAgICAgXCJQbGVhc2UgcGFzcyBhbiBhY2NvdW50IG9iamVjdCwgc2lsZW50IGZsb3cgaXMgbm90IHN1cHBvcnRlZCB3aXRob3V0IGFjY291bnQgaW5mb3JtYXRpb25cIixcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZENhY2hlUmVjb3JkXTpcbiAgICAgICAgXCJDYWNoZSByZWNvcmQgb2JqZWN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZC5cIixcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZENhY2hlRW52aXJvbm1lbnRdOlxuICAgICAgICBcIkludmFsaWQgZW52aXJvbm1lbnQgd2hlbiBhdHRlbXB0aW5nIHRvIGNyZWF0ZSBjYWNoZSBlbnRyeVwiLFxuICAgIFtDbGllbnRBdXRoRXJyb3JDb2Rlcy5ub0FjY291bnRGb3VuZF06XG4gICAgICAgIFwiTm8gYWNjb3VudCBmb3VuZCBpbiBjYWNoZSBmb3IgZ2l2ZW4ga2V5LlwiLFxuICAgIFtDbGllbnRBdXRoRXJyb3JDb2Rlcy5ub0NyeXB0b09iamVjdF06IFwiTm8gY3J5cHRvIG9iamVjdCBkZXRlY3RlZC5cIixcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMudW5leHBlY3RlZENyZWRlbnRpYWxUeXBlXTpcbiAgICAgICAgXCJVbmV4cGVjdGVkIGNyZWRlbnRpYWwgdHlwZS5cIixcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZEFzc2VydGlvbl06XG4gICAgICAgIFwiQ2xpZW50IGFzc2VydGlvbiBtdXN0IG1lZXQgcmVxdWlyZW1lbnRzIGRlc2NyaWJlZCBpbiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNzUxNVwiLFxuICAgIFtDbGllbnRBdXRoRXJyb3JDb2Rlcy5pbnZhbGlkQ2xpZW50Q3JlZGVudGlhbF06XG4gICAgICAgIFwiQ2xpZW50IGNyZWRlbnRpYWwgKHNlY3JldCwgY2VydGlmaWNhdGUsIG9yIGFzc2VydGlvbikgbXVzdCBub3QgYmUgZW1wdHkgd2hlbiBjcmVhdGluZyBhIGNvbmZpZGVudGlhbCBjbGllbnQuIEFuIGFwcGxpY2F0aW9uIHNob3VsZCBhdCBtb3N0IGhhdmUgb25lIGNyZWRlbnRpYWxcIixcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMudG9rZW5SZWZyZXNoUmVxdWlyZWRdOlxuICAgICAgICBcIkNhbm5vdCByZXR1cm4gdG9rZW4gZnJvbSBjYWNoZSBiZWNhdXNlIGl0IG11c3QgYmUgcmVmcmVzaGVkLiBUaGlzIG1heSBiZSBkdWUgdG8gb25lIG9mIHRoZSBmb2xsb3dpbmcgcmVhc29uczogZm9yY2VSZWZyZXNoIHBhcmFtZXRlciBpcyBzZXQgdG8gdHJ1ZSwgY2xhaW1zIGhhdmUgYmVlbiByZXF1ZXN0ZWQsIHRoZXJlIGlzIG5vIGNhY2hlZCBhY2Nlc3MgdG9rZW4gb3IgaXQgaXMgZXhwaXJlZC5cIixcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMudXNlclRpbWVvdXRSZWFjaGVkXTpcbiAgICAgICAgXCJVc2VyIGRlZmluZWQgdGltZW91dCBmb3IgZGV2aWNlIGNvZGUgcG9sbGluZyByZWFjaGVkXCIsXG4gICAgW0NsaWVudEF1dGhFcnJvckNvZGVzLnRva2VuQ2xhaW1zQ25mUmVxdWlyZWRGb3JTaWduZWRKd3RdOlxuICAgICAgICBcIkNhbm5vdCBnZW5lcmF0ZSBhIFBPUCBqd3QgaWYgdGhlIHRva2VuX2NsYWltcyBhcmUgbm90IHBvcHVsYXRlZFwiLFxuICAgIFtDbGllbnRBdXRoRXJyb3JDb2Rlcy5hdXRob3JpemF0aW9uQ29kZU1pc3NpbmdGcm9tU2VydmVyUmVzcG9uc2VdOlxuICAgICAgICBcIlNlcnZlciByZXNwb25zZSBkb2VzIG5vdCBjb250YWluIGFuIGF1dGhvcml6YXRpb24gY29kZSB0byBwcm9jZWVkXCIsXG4gICAgW0NsaWVudEF1dGhFcnJvckNvZGVzLmJpbmRpbmdLZXlOb3RSZW1vdmVkXTpcbiAgICAgICAgXCJDb3VsZCBub3QgcmVtb3ZlIHRoZSBjcmVkZW50aWFsJ3MgYmluZGluZyBrZXkgZnJvbSBzdG9yYWdlLlwiLFxuICAgIFtDbGllbnRBdXRoRXJyb3JDb2Rlcy5lbmRTZXNzaW9uRW5kcG9pbnROb3RTdXBwb3J0ZWRdOlxuICAgICAgICBcIlRoZSBwcm92aWRlZCBhdXRob3JpdHkgZG9lcyBub3Qgc3VwcG9ydCBsb2dvdXRcIixcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMua2V5SWRNaXNzaW5nXTpcbiAgICAgICAgXCJBIGtleUlkIHZhbHVlIGlzIG1pc3NpbmcgZnJvbSB0aGUgcmVxdWVzdGVkIGJvdW5kIHRva2VuJ3MgY2FjaGUgcmVjb3JkIGFuZCBpcyByZXF1aXJlZCB0byBtYXRjaCB0aGUgdG9rZW4gdG8gaXQncyBzdG9yZWQgYmluZGluZyBrZXkuXCIsXG4gICAgW0NsaWVudEF1dGhFcnJvckNvZGVzLm5vTmV0d29ya0Nvbm5lY3Rpdml0eV06XG4gICAgICAgIFwiTm8gbmV0d29yayBjb25uZWN0aXZpdHkuIENoZWNrIHlvdXIgaW50ZXJuZXQgY29ubmVjdGlvbi5cIixcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMudXNlckNhbmNlbGVkXTogXCJVc2VyIGNhbmNlbGxlZCB0aGUgZmxvdy5cIixcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMubWlzc2luZ1RlbmFudElkRXJyb3JdOlxuICAgICAgICBcIkEgdGVuYW50IGlkIC0gbm90IGNvbW1vbiwgb3JnYW5pemF0aW9ucywgb3IgY29uc3VtZXJzIC0gbXVzdCBiZSBzcGVjaWZpZWQgd2hlbiB1c2luZyB0aGUgY2xpZW50X2NyZWRlbnRpYWxzIGZsb3cuXCIsXG4gICAgW0NsaWVudEF1dGhFcnJvckNvZGVzLm1ldGhvZE5vdEltcGxlbWVudGVkXTpcbiAgICAgICAgXCJUaGlzIG1ldGhvZCBoYXMgbm90IGJlZW4gaW1wbGVtZW50ZWRcIixcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMubmVzdGVkQXBwQXV0aEJyaWRnZURpc2FibGVkXTpcbiAgICAgICAgXCJUaGUgbmVzdGVkIGFwcCBhdXRoIGJyaWRnZSBpcyBkaXNhYmxlZFwiLFxufTtcblxuLyoqXG4gKiBTdHJpbmcgY29uc3RhbnRzIHVzZWQgYnkgZXJyb3IgY29kZXMgYW5kIG1lc3NhZ2VzLlxuICogQGRlcHJlY2F0ZWQgVXNlIENsaWVudEF1dGhFcnJvckNvZGVzIGluc3RlYWRcbiAqL1xuZXhwb3J0IGNvbnN0IENsaWVudEF1dGhFcnJvck1lc3NhZ2UgPSB7XG4gICAgY2xpZW50SW5mb0RlY29kaW5nRXJyb3I6IHtcbiAgICAgICAgY29kZTogQ2xpZW50QXV0aEVycm9yQ29kZXMuY2xpZW50SW5mb0RlY29kaW5nRXJyb3IsXG4gICAgICAgIGRlc2M6IENsaWVudEF1dGhFcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuY2xpZW50SW5mb0RlY29kaW5nRXJyb3JcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIGNsaWVudEluZm9FbXB0eUVycm9yOiB7XG4gICAgICAgIGNvZGU6IENsaWVudEF1dGhFcnJvckNvZGVzLmNsaWVudEluZm9FbXB0eUVycm9yLFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLmNsaWVudEluZm9FbXB0eUVycm9yXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICB0b2tlblBhcnNpbmdFcnJvcjoge1xuICAgICAgICBjb2RlOiBDbGllbnRBdXRoRXJyb3JDb2Rlcy50b2tlblBhcnNpbmdFcnJvcixcbiAgICAgICAgZGVzYzogQ2xpZW50QXV0aEVycm9yTWVzc2FnZXNbQ2xpZW50QXV0aEVycm9yQ29kZXMudG9rZW5QYXJzaW5nRXJyb3JdLFxuICAgIH0sXG4gICAgbnVsbE9yRW1wdHlUb2tlbjoge1xuICAgICAgICBjb2RlOiBDbGllbnRBdXRoRXJyb3JDb2Rlcy5udWxsT3JFbXB0eVRva2VuLFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tDbGllbnRBdXRoRXJyb3JDb2Rlcy5udWxsT3JFbXB0eVRva2VuXSxcbiAgICB9LFxuICAgIGVuZHBvaW50UmVzb2x1dGlvbkVycm9yOiB7XG4gICAgICAgIGNvZGU6IENsaWVudEF1dGhFcnJvckNvZGVzLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yLFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBuZXR3b3JrRXJyb3I6IHtcbiAgICAgICAgY29kZTogQ2xpZW50QXV0aEVycm9yQ29kZXMubmV0d29ya0Vycm9yLFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tDbGllbnRBdXRoRXJyb3JDb2Rlcy5uZXR3b3JrRXJyb3JdLFxuICAgIH0sXG4gICAgdW5hYmxlVG9HZXRPcGVuaWRDb25maWdFcnJvcjoge1xuICAgICAgICBjb2RlOiBDbGllbnRBdXRoRXJyb3JDb2Rlcy5vcGVuSWRDb25maWdFcnJvcixcbiAgICAgICAgZGVzYzogQ2xpZW50QXV0aEVycm9yTWVzc2FnZXNbQ2xpZW50QXV0aEVycm9yQ29kZXMub3BlbklkQ29uZmlnRXJyb3JdLFxuICAgIH0sXG4gICAgaGFzaE5vdERlc2VyaWFsaXplZDoge1xuICAgICAgICBjb2RlOiBDbGllbnRBdXRoRXJyb3JDb2Rlcy5oYXNoTm90RGVzZXJpYWxpemVkLFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tDbGllbnRBdXRoRXJyb3JDb2Rlcy5oYXNoTm90RGVzZXJpYWxpemVkXSxcbiAgICB9LFxuICAgIGludmFsaWRTdGF0ZUVycm9yOiB7XG4gICAgICAgIGNvZGU6IENsaWVudEF1dGhFcnJvckNvZGVzLmludmFsaWRTdGF0ZSxcbiAgICAgICAgZGVzYzogQ2xpZW50QXV0aEVycm9yTWVzc2FnZXNbQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZFN0YXRlXSxcbiAgICB9LFxuICAgIHN0YXRlTWlzbWF0Y2hFcnJvcjoge1xuICAgICAgICBjb2RlOiBDbGllbnRBdXRoRXJyb3JDb2Rlcy5zdGF0ZU1pc21hdGNoLFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tDbGllbnRBdXRoRXJyb3JDb2Rlcy5zdGF0ZU1pc21hdGNoXSxcbiAgICB9LFxuICAgIHN0YXRlTm90Rm91bmRFcnJvcjoge1xuICAgICAgICBjb2RlOiBDbGllbnRBdXRoRXJyb3JDb2Rlcy5zdGF0ZU5vdEZvdW5kLFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tDbGllbnRBdXRoRXJyb3JDb2Rlcy5zdGF0ZU5vdEZvdW5kXSxcbiAgICB9LFxuICAgIG5vbmNlTWlzbWF0Y2hFcnJvcjoge1xuICAgICAgICBjb2RlOiBDbGllbnRBdXRoRXJyb3JDb2Rlcy5ub25jZU1pc21hdGNoLFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tDbGllbnRBdXRoRXJyb3JDb2Rlcy5ub25jZU1pc21hdGNoXSxcbiAgICB9LFxuICAgIGF1dGhUaW1lTm90Rm91bmRFcnJvcjoge1xuICAgICAgICBjb2RlOiBDbGllbnRBdXRoRXJyb3JDb2Rlcy5hdXRoVGltZU5vdEZvdW5kLFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tDbGllbnRBdXRoRXJyb3JDb2Rlcy5hdXRoVGltZU5vdEZvdW5kXSxcbiAgICB9LFxuICAgIG1heEFnZVRyYW5zcGlyZWQ6IHtcbiAgICAgICAgY29kZTogQ2xpZW50QXV0aEVycm9yQ29kZXMubWF4QWdlVHJhbnNwaXJlZCxcbiAgICAgICAgZGVzYzogQ2xpZW50QXV0aEVycm9yTWVzc2FnZXNbQ2xpZW50QXV0aEVycm9yQ29kZXMubWF4QWdlVHJhbnNwaXJlZF0sXG4gICAgfSxcbiAgICBtdWx0aXBsZU1hdGNoaW5nVG9rZW5zOiB7XG4gICAgICAgIGNvZGU6IENsaWVudEF1dGhFcnJvckNvZGVzLm11bHRpcGxlTWF0Y2hpbmdUb2tlbnMsXG4gICAgICAgIGRlc2M6IENsaWVudEF1dGhFcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMubXVsdGlwbGVNYXRjaGluZ1Rva2Vuc1xuICAgICAgICBdLFxuICAgIH0sXG4gICAgbXVsdGlwbGVNYXRjaGluZ0FjY291bnRzOiB7XG4gICAgICAgIGNvZGU6IENsaWVudEF1dGhFcnJvckNvZGVzLm11bHRpcGxlTWF0Y2hpbmdBY2NvdW50cyxcbiAgICAgICAgZGVzYzogQ2xpZW50QXV0aEVycm9yTWVzc2FnZXNbXG4gICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy5tdWx0aXBsZU1hdGNoaW5nQWNjb3VudHNcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIG11bHRpcGxlTWF0Y2hpbmdBcHBNZXRhZGF0YToge1xuICAgICAgICBjb2RlOiBDbGllbnRBdXRoRXJyb3JDb2Rlcy5tdWx0aXBsZU1hdGNoaW5nQXBwTWV0YWRhdGEsXG4gICAgICAgIGRlc2M6IENsaWVudEF1dGhFcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMubXVsdGlwbGVNYXRjaGluZ0FwcE1ldGFkYXRhXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICB0b2tlblJlcXVlc3RDYW5ub3RCZU1hZGU6IHtcbiAgICAgICAgY29kZTogQ2xpZW50QXV0aEVycm9yQ29kZXMucmVxdWVzdENhbm5vdEJlTWFkZSxcbiAgICAgICAgZGVzYzogQ2xpZW50QXV0aEVycm9yTWVzc2FnZXNbQ2xpZW50QXV0aEVycm9yQ29kZXMucmVxdWVzdENhbm5vdEJlTWFkZV0sXG4gICAgfSxcbiAgICByZW1vdmVFbXB0eVNjb3BlRXJyb3I6IHtcbiAgICAgICAgY29kZTogQ2xpZW50QXV0aEVycm9yQ29kZXMuY2Fubm90UmVtb3ZlRW1wdHlTY29wZSxcbiAgICAgICAgZGVzYzogQ2xpZW50QXV0aEVycm9yTWVzc2FnZXNbXG4gICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy5jYW5ub3RSZW1vdmVFbXB0eVNjb3BlXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBhcHBlbmRTY29wZVNldEVycm9yOiB7XG4gICAgICAgIGNvZGU6IENsaWVudEF1dGhFcnJvckNvZGVzLmNhbm5vdEFwcGVuZFNjb3BlU2V0LFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLmNhbm5vdEFwcGVuZFNjb3BlU2V0XG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBlbXB0eUlucHV0U2NvcGVTZXRFcnJvcjoge1xuICAgICAgICBjb2RlOiBDbGllbnRBdXRoRXJyb3JDb2Rlcy5lbXB0eUlucHV0U2NvcGVTZXQsXG4gICAgICAgIGRlc2M6IENsaWVudEF1dGhFcnJvck1lc3NhZ2VzW0NsaWVudEF1dGhFcnJvckNvZGVzLmVtcHR5SW5wdXRTY29wZVNldF0sXG4gICAgfSxcbiAgICBEZXZpY2VDb2RlUG9sbGluZ0NhbmNlbGxlZDoge1xuICAgICAgICBjb2RlOiBDbGllbnRBdXRoRXJyb3JDb2Rlcy5kZXZpY2VDb2RlUG9sbGluZ0NhbmNlbGxlZCxcbiAgICAgICAgZGVzYzogQ2xpZW50QXV0aEVycm9yTWVzc2FnZXNbXG4gICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy5kZXZpY2VDb2RlUG9sbGluZ0NhbmNlbGxlZFxuICAgICAgICBdLFxuICAgIH0sXG4gICAgRGV2aWNlQ29kZUV4cGlyZWQ6IHtcbiAgICAgICAgY29kZTogQ2xpZW50QXV0aEVycm9yQ29kZXMuZGV2aWNlQ29kZUV4cGlyZWQsXG4gICAgICAgIGRlc2M6IENsaWVudEF1dGhFcnJvck1lc3NhZ2VzW0NsaWVudEF1dGhFcnJvckNvZGVzLmRldmljZUNvZGVFeHBpcmVkXSxcbiAgICB9LFxuICAgIERldmljZUNvZGVVbmtub3duRXJyb3I6IHtcbiAgICAgICAgY29kZTogQ2xpZW50QXV0aEVycm9yQ29kZXMuZGV2aWNlQ29kZVVua25vd25FcnJvcixcbiAgICAgICAgZGVzYzogQ2xpZW50QXV0aEVycm9yTWVzc2FnZXNbXG4gICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy5kZXZpY2VDb2RlVW5rbm93bkVycm9yXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBOb0FjY291bnRJblNpbGVudFJlcXVlc3Q6IHtcbiAgICAgICAgY29kZTogQ2xpZW50QXV0aEVycm9yQ29kZXMubm9BY2NvdW50SW5TaWxlbnRSZXF1ZXN0LFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLm5vQWNjb3VudEluU2lsZW50UmVxdWVzdFxuICAgICAgICBdLFxuICAgIH0sXG4gICAgaW52YWxpZENhY2hlUmVjb3JkOiB7XG4gICAgICAgIGNvZGU6IENsaWVudEF1dGhFcnJvckNvZGVzLmludmFsaWRDYWNoZVJlY29yZCxcbiAgICAgICAgZGVzYzogQ2xpZW50QXV0aEVycm9yTWVzc2FnZXNbQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZENhY2hlUmVjb3JkXSxcbiAgICB9LFxuICAgIGludmFsaWRDYWNoZUVudmlyb25tZW50OiB7XG4gICAgICAgIGNvZGU6IENsaWVudEF1dGhFcnJvckNvZGVzLmludmFsaWRDYWNoZUVudmlyb25tZW50LFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLmludmFsaWRDYWNoZUVudmlyb25tZW50XG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBub0FjY291bnRGb3VuZDoge1xuICAgICAgICBjb2RlOiBDbGllbnRBdXRoRXJyb3JDb2Rlcy5ub0FjY291bnRGb3VuZCxcbiAgICAgICAgZGVzYzogQ2xpZW50QXV0aEVycm9yTWVzc2FnZXNbQ2xpZW50QXV0aEVycm9yQ29kZXMubm9BY2NvdW50Rm91bmRdLFxuICAgIH0sXG4gICAgbm9DcnlwdG9PYmo6IHtcbiAgICAgICAgY29kZTogQ2xpZW50QXV0aEVycm9yQ29kZXMubm9DcnlwdG9PYmplY3QsXG4gICAgICAgIGRlc2M6IENsaWVudEF1dGhFcnJvck1lc3NhZ2VzW0NsaWVudEF1dGhFcnJvckNvZGVzLm5vQ3J5cHRvT2JqZWN0XSxcbiAgICB9LFxuICAgIHVuZXhwZWN0ZWRDcmVkZW50aWFsVHlwZToge1xuICAgICAgICBjb2RlOiBDbGllbnRBdXRoRXJyb3JDb2Rlcy51bmV4cGVjdGVkQ3JlZGVudGlhbFR5cGUsXG4gICAgICAgIGRlc2M6IENsaWVudEF1dGhFcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMudW5leHBlY3RlZENyZWRlbnRpYWxUeXBlXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBpbnZhbGlkQXNzZXJ0aW9uOiB7XG4gICAgICAgIGNvZGU6IENsaWVudEF1dGhFcnJvckNvZGVzLmludmFsaWRBc3NlcnRpb24sXG4gICAgICAgIGRlc2M6IENsaWVudEF1dGhFcnJvck1lc3NhZ2VzW0NsaWVudEF1dGhFcnJvckNvZGVzLmludmFsaWRBc3NlcnRpb25dLFxuICAgIH0sXG4gICAgaW52YWxpZENsaWVudENyZWRlbnRpYWw6IHtcbiAgICAgICAgY29kZTogQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZENsaWVudENyZWRlbnRpYWwsXG4gICAgICAgIGRlc2M6IENsaWVudEF1dGhFcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZENsaWVudENyZWRlbnRpYWxcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIHRva2VuUmVmcmVzaFJlcXVpcmVkOiB7XG4gICAgICAgIGNvZGU6IENsaWVudEF1dGhFcnJvckNvZGVzLnRva2VuUmVmcmVzaFJlcXVpcmVkLFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLnRva2VuUmVmcmVzaFJlcXVpcmVkXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICB1c2VyVGltZW91dFJlYWNoZWQ6IHtcbiAgICAgICAgY29kZTogQ2xpZW50QXV0aEVycm9yQ29kZXMudXNlclRpbWVvdXRSZWFjaGVkLFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tDbGllbnRBdXRoRXJyb3JDb2Rlcy51c2VyVGltZW91dFJlYWNoZWRdLFxuICAgIH0sXG4gICAgdG9rZW5DbGFpbXNSZXF1aXJlZDoge1xuICAgICAgICBjb2RlOiBDbGllbnRBdXRoRXJyb3JDb2Rlcy50b2tlbkNsYWltc0NuZlJlcXVpcmVkRm9yU2lnbmVkSnd0LFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLnRva2VuQ2xhaW1zQ25mUmVxdWlyZWRGb3JTaWduZWRKd3RcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIG5vQXV0aG9yaXphdGlvbkNvZGVGcm9tU2VydmVyOiB7XG4gICAgICAgIGNvZGU6IENsaWVudEF1dGhFcnJvckNvZGVzLmF1dGhvcml6YXRpb25Db2RlTWlzc2luZ0Zyb21TZXJ2ZXJSZXNwb25zZSxcbiAgICAgICAgZGVzYzogQ2xpZW50QXV0aEVycm9yTWVzc2FnZXNbXG4gICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy5hdXRob3JpemF0aW9uQ29kZU1pc3NpbmdGcm9tU2VydmVyUmVzcG9uc2VcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIGJpbmRpbmdLZXlOb3RSZW1vdmVkRXJyb3I6IHtcbiAgICAgICAgY29kZTogQ2xpZW50QXV0aEVycm9yQ29kZXMuYmluZGluZ0tleU5vdFJlbW92ZWQsXG4gICAgICAgIGRlc2M6IENsaWVudEF1dGhFcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuYmluZGluZ0tleU5vdFJlbW92ZWRcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIGxvZ291dE5vdFN1cHBvcnRlZDoge1xuICAgICAgICBjb2RlOiBDbGllbnRBdXRoRXJyb3JDb2Rlcy5lbmRTZXNzaW9uRW5kcG9pbnROb3RTdXBwb3J0ZWQsXG4gICAgICAgIGRlc2M6IENsaWVudEF1dGhFcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuZW5kU2Vzc2lvbkVuZHBvaW50Tm90U3VwcG9ydGVkXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBrZXlJZE1pc3Npbmc6IHtcbiAgICAgICAgY29kZTogQ2xpZW50QXV0aEVycm9yQ29kZXMua2V5SWRNaXNzaW5nLFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tDbGllbnRBdXRoRXJyb3JDb2Rlcy5rZXlJZE1pc3NpbmddLFxuICAgIH0sXG4gICAgbm9OZXR3b3JrQ29ubmVjdGl2aXR5OiB7XG4gICAgICAgIGNvZGU6IENsaWVudEF1dGhFcnJvckNvZGVzLm5vTmV0d29ya0Nvbm5lY3Rpdml0eSxcbiAgICAgICAgZGVzYzogQ2xpZW50QXV0aEVycm9yTWVzc2FnZXNbXG4gICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy5ub05ldHdvcmtDb25uZWN0aXZpdHlcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIHVzZXJDYW5jZWxlZEVycm9yOiB7XG4gICAgICAgIGNvZGU6IENsaWVudEF1dGhFcnJvckNvZGVzLnVzZXJDYW5jZWxlZCxcbiAgICAgICAgZGVzYzogQ2xpZW50QXV0aEVycm9yTWVzc2FnZXNbQ2xpZW50QXV0aEVycm9yQ29kZXMudXNlckNhbmNlbGVkXSxcbiAgICB9LFxuICAgIG1pc3NpbmdUZW5hbnRJZEVycm9yOiB7XG4gICAgICAgIGNvZGU6IENsaWVudEF1dGhFcnJvckNvZGVzLm1pc3NpbmdUZW5hbnRJZEVycm9yLFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLm1pc3NpbmdUZW5hbnRJZEVycm9yXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBuZXN0ZWRBcHBBdXRoQnJpZGdlRGlzYWJsZWQ6IHtcbiAgICAgICAgY29kZTogQ2xpZW50QXV0aEVycm9yQ29kZXMubmVzdGVkQXBwQXV0aEJyaWRnZURpc2FibGVkLFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLm5lc3RlZEFwcEF1dGhCcmlkZ2VEaXNhYmxlZFxuICAgICAgICBdLFxuICAgIH0sXG59O1xuXG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIHRoZXJlIGlzIGFuIGVycm9yIGluIHRoZSBjbGllbnQgY29kZSBydW5uaW5nIG9uIHRoZSBicm93c2VyLlxuICovXG5leHBvcnQgY2xhc3MgQ2xpZW50QXV0aEVycm9yIGV4dGVuZHMgQXV0aEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihlcnJvckNvZGU6IHN0cmluZywgYWRkaXRpb25hbE1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoXG4gICAgICAgICAgICBlcnJvckNvZGUsXG4gICAgICAgICAgICBhZGRpdGlvbmFsTWVzc2FnZVxuICAgICAgICAgICAgICAgID8gYCR7Q2xpZW50QXV0aEVycm9yTWVzc2FnZXNbZXJyb3JDb2RlXX06ICR7YWRkaXRpb25hbE1lc3NhZ2V9YFxuICAgICAgICAgICAgICAgIDogQ2xpZW50QXV0aEVycm9yTWVzc2FnZXNbZXJyb3JDb2RlXVxuICAgICAgICApO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIkNsaWVudEF1dGhFcnJvclwiO1xuXG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBDbGllbnRBdXRoRXJyb3IucHJvdG90eXBlKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgZXJyb3JDb2RlOiBzdHJpbmcsXG4gICAgYWRkaXRpb25hbE1lc3NhZ2U/OiBzdHJpbmdcbik6IENsaWVudEF1dGhFcnJvciB7XG4gICAgcmV0dXJuIG5ldyBDbGllbnRBdXRoRXJyb3IoZXJyb3JDb2RlLCBhZGRpdGlvbmFsTWVzc2FnZSk7XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gICAgQ2xpZW50QXV0aEVycm9yQ29kZXMsXG4gICAgY3JlYXRlQ2xpZW50QXV0aEVycm9yLFxufSBmcm9tIFwiLi4vZXJyb3IvQ2xpZW50QXV0aEVycm9yLmpzXCI7XG5pbXBvcnQgeyBCYXNlQXV0aFJlcXVlc3QgfSBmcm9tIFwiLi4vcmVxdWVzdC9CYXNlQXV0aFJlcXVlc3QuanNcIjtcbmltcG9ydCB7IFNock9wdGlvbnMsIFNpZ25lZEh0dHBSZXF1ZXN0IH0gZnJvbSBcIi4vU2lnbmVkSHR0cFJlcXVlc3QuanNcIjtcblxuLyoqXG4gKiBUaGUgUGtjZUNvZGVzIHR5cGUgZGVzY3JpYmVzIHRoZSBzdHJ1Y3R1cmVcbiAqIG9mIG9iamVjdHMgdGhhdCBjb250YWluIFBLQ0UgY29kZVxuICogY2hhbGxlbmdlIGFuZCB2ZXJpZmllciBwYWlyc1xuICovXG5leHBvcnQgdHlwZSBQa2NlQ29kZXMgPSB7XG4gICAgdmVyaWZpZXI6IHN0cmluZztcbiAgICBjaGFsbGVuZ2U6IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIFNpZ25lZEh0dHBSZXF1ZXN0UGFyYW1ldGVycyA9IFBpY2s8XG4gICAgQmFzZUF1dGhSZXF1ZXN0LFxuICAgIHwgXCJyZXNvdXJjZVJlcXVlc3RNZXRob2RcIlxuICAgIHwgXCJyZXNvdXJjZVJlcXVlc3RVcmlcIlxuICAgIHwgXCJzaHJDbGFpbXNcIlxuICAgIHwgXCJzaHJOb25jZVwiXG4gICAgfCBcInNock9wdGlvbnNcIlxuPiAmIHtcbiAgICBjb3JyZWxhdGlvbklkPzogc3RyaW5nO1xufTtcblxuLyoqXG4gKiBJbnRlcmZhY2UgZm9yIGNyeXB0byBmdW5jdGlvbnMgdXNlZCBieSBsaWJyYXJ5XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUNyeXB0byB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGd1aWQgcmFuZG9tbHkuXG4gICAgICovXG4gICAgY3JlYXRlTmV3R3VpZCgpOiBzdHJpbmc7XG4gICAgLyoqXG4gICAgICogYmFzZTY0IEVuY29kZSBzdHJpbmdcbiAgICAgKiBAcGFyYW0gaW5wdXRcbiAgICAgKi9cbiAgICBiYXNlNjRFbmNvZGUoaW5wdXQ6IHN0cmluZyk6IHN0cmluZztcbiAgICAvKipcbiAgICAgKiBiYXNlNjQgZGVjb2RlIHN0cmluZ1xuICAgICAqIEBwYXJhbSBpbnB1dFxuICAgICAqL1xuICAgIGJhc2U2NERlY29kZShpbnB1dDogc3RyaW5nKTogc3RyaW5nO1xuICAgIC8qKlxuICAgICAqIGJhc2U2NCBVUkwgc2FmZSBlbmNvZGVkIHN0cmluZ1xuICAgICAqL1xuICAgIGJhc2U2NFVybEVuY29kZShpbnB1dDogc3RyaW5nKTogc3RyaW5nO1xuICAgIC8qKlxuICAgICAqIFN0cmluZ2lmaWVzIGFuZCBiYXNlNjRVcmwgZW5jb2RlcyBpbnB1dCBwdWJsaWMga2V5XG4gICAgICogQHBhcmFtIGlucHV0S2lkXG4gICAgICogQHJldHVybnMgQmFzZTY0VXJsIGVuY29kZWQgcHVibGljIGtleVxuICAgICAqL1xuICAgIGVuY29kZUtpZChpbnB1dEtpZDogc3RyaW5nKTogc3RyaW5nO1xuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBhbiBKV0sgUlNBIFMyNTYgVGh1bWJwcmludFxuICAgICAqIEBwYXJhbSByZXF1ZXN0XG4gICAgICovXG4gICAgZ2V0UHVibGljS2V5VGh1bWJwcmludChcbiAgICAgICAgcmVxdWVzdDogU2lnbmVkSHR0cFJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgKTogUHJvbWlzZTxzdHJpbmc+O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgY3J5cHRvZ3JhcGhpYyBrZXlwYWlyIGZyb20ga2V5IHN0b3JlIG1hdGNoaW5nIHRoZSBrZXlJZCBwYXNzZWQgaW5cbiAgICAgKiBAcGFyYW0ga2lkXG4gICAgICovXG4gICAgcmVtb3ZlVG9rZW5CaW5kaW5nS2V5KGtpZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPjtcbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGFsbCBjcnlwdG9ncmFwaGljIGtleXMgZnJvbSBJbmRleGVkREIgc3RvcmFnZVxuICAgICAqL1xuICAgIGNsZWFyS2V5c3RvcmUoKTogUHJvbWlzZTxib29sZWFuPjtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc2lnbmVkIHByb29mLW9mLXBvc3Nlc3Npb24gdG9rZW4gd2l0aCBhIGdpdmVuIGFjY2VzIHRva2VuIHRoYXQgY29udGFpbnMgYSBjbmYgY2xhaW0gd2l0aCB0aGUgcmVxdWlyZWQga2lkLlxuICAgICAqIEBwYXJhbSBhY2Nlc3NUb2tlblxuICAgICAqL1xuICAgIHNpZ25Kd3QoXG4gICAgICAgIHBheWxvYWQ6IFNpZ25lZEh0dHBSZXF1ZXN0LFxuICAgICAgICBraWQ6IHN0cmluZyxcbiAgICAgICAgc2hyT3B0aW9ucz86IFNock9wdGlvbnMsXG4gICAgICAgIGNvcnJlbGF0aW9uSWQ/OiBzdHJpbmdcbiAgICApOiBQcm9taXNlPHN0cmluZz47XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgU0hBLTI1NiBoYXNoIG9mIGFuIGlucHV0IHN0cmluZ1xuICAgICAqIEBwYXJhbSBwbGFpblRleHRcbiAgICAgKi9cbiAgICBoYXNoU3RyaW5nKHBsYWluVGV4dDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+O1xufVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9DUllQVE9fSU1QTEVNRU5UQVRJT046IElDcnlwdG8gPSB7XG4gICAgY3JlYXRlTmV3R3VpZDogKCk6IHN0cmluZyA9PiB7XG4gICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JDb2Rlcy5tZXRob2ROb3RJbXBsZW1lbnRlZCk7XG4gICAgfSxcbiAgICBiYXNlNjREZWNvZGU6ICgpOiBzdHJpbmcgPT4ge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubWV0aG9kTm90SW1wbGVtZW50ZWQpO1xuICAgIH0sXG4gICAgYmFzZTY0RW5jb2RlOiAoKTogc3RyaW5nID0+IHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvckNvZGVzLm1ldGhvZE5vdEltcGxlbWVudGVkKTtcbiAgICB9LFxuICAgIGJhc2U2NFVybEVuY29kZTogKCk6IHN0cmluZyA9PiB7XG4gICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JDb2Rlcy5tZXRob2ROb3RJbXBsZW1lbnRlZCk7XG4gICAgfSxcbiAgICBlbmNvZGVLaWQ6ICgpOiBzdHJpbmcgPT4ge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubWV0aG9kTm90SW1wbGVtZW50ZWQpO1xuICAgIH0sXG4gICAgYXN5bmMgZ2V0UHVibGljS2V5VGh1bWJwcmludCgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubWV0aG9kTm90SW1wbGVtZW50ZWQpO1xuICAgIH0sXG4gICAgYXN5bmMgcmVtb3ZlVG9rZW5CaW5kaW5nS2V5KCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubWV0aG9kTm90SW1wbGVtZW50ZWQpO1xuICAgIH0sXG4gICAgYXN5bmMgY2xlYXJLZXlzdG9yZSgpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvckNvZGVzLm1ldGhvZE5vdEltcGxlbWVudGVkKTtcbiAgICB9LFxuICAgIGFzeW5jIHNpZ25Kd3QoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvckNvZGVzLm1ldGhvZE5vdEltcGxlbWVudGVkKTtcbiAgICB9LFxuICAgIGFzeW5jIGhhc2hTdHJpbmcoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvckNvZGVzLm1ldGhvZE5vdEltcGxlbWVudGVkKTtcbiAgICB9LFxufTtcbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgTG9nZ2VyT3B0aW9ucyB9IGZyb20gXCIuLi9jb25maWcvQ2xpZW50Q29uZmlndXJhdGlvbi5qc1wiO1xuaW1wb3J0IHsgQ29uc3RhbnRzIH0gZnJvbSBcIi4uL3V0aWxzL0NvbnN0YW50cy5qc1wiO1xuXG4vKipcbiAqIE9wdGlvbnMgZm9yIGxvZ2dlciBtZXNzYWdlcy5cbiAqL1xuZXhwb3J0IHR5cGUgTG9nZ2VyTWVzc2FnZU9wdGlvbnMgPSB7XG4gICAgbG9nTGV2ZWw6IExvZ0xldmVsO1xuICAgIGNvbnRhaW5zUGlpPzogYm9vbGVhbjtcbiAgICBjb250ZXh0Pzogc3RyaW5nO1xuICAgIGNvcnJlbGF0aW9uSWQ/OiBzdHJpbmc7XG59O1xuXG4vKipcbiAqIExvZyBtZXNzYWdlIGxldmVsLlxuICovXG5leHBvcnQgZW51bSBMb2dMZXZlbCB7XG4gICAgRXJyb3IsXG4gICAgV2FybmluZyxcbiAgICBJbmZvLFxuICAgIFZlcmJvc2UsXG4gICAgVHJhY2UsXG59XG5cbi8qKlxuICogQ2FsbGJhY2sgdG8gc2VuZCB0aGUgbWVzc2FnZXMgdG8uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUxvZ2dlckNhbGxiYWNrIHtcbiAgICAobGV2ZWw6IExvZ0xldmVsLCBtZXNzYWdlOiBzdHJpbmcsIGNvbnRhaW5zUGlpOiBib29sZWFuKTogdm9pZDtcbn1cblxuLyoqXG4gKiBDbGFzcyB3aGljaCBmYWNpbGl0YXRlcyBsb2dnaW5nIG9mIG1lc3NhZ2VzIHRvIGEgc3BlY2lmaWMgcGxhY2UuXG4gKi9cbmV4cG9ydCBjbGFzcyBMb2dnZXIge1xuICAgIC8vIENvcnJlbGF0aW9uIElEIGZvciByZXF1ZXN0LCB1c3VhbGx5IHNldCBieSB1c2VyLlxuICAgIHByaXZhdGUgY29ycmVsYXRpb25JZDogc3RyaW5nO1xuXG4gICAgLy8gQ3VycmVudCBsb2cgbGV2ZWwsIGRlZmF1bHRzIHRvIGluZm8uXG4gICAgcHJpdmF0ZSBsZXZlbDogTG9nTGV2ZWwgPSBMb2dMZXZlbC5JbmZvO1xuXG4gICAgLy8gQm9vbGVhbiBkZXNjcmliaW5nIHdoZXRoZXIgUElJIGxvZ2dpbmcgaXMgYWxsb3dlZC5cbiAgICBwcml2YXRlIHBpaUxvZ2dpbmdFbmFibGVkOiBib29sZWFuO1xuXG4gICAgLy8gQ2FsbGJhY2sgdG8gc2VuZCBtZXNzYWdlcyB0by5cbiAgICBwcml2YXRlIGxvY2FsQ2FsbGJhY2s6IElMb2dnZXJDYWxsYmFjaztcblxuICAgIC8vIFBhY2thZ2UgbmFtZSBpbXBsZW1lbnRpbmcgdGhpcyBsb2dnZXJcbiAgICBwcml2YXRlIHBhY2thZ2VOYW1lOiBzdHJpbmc7XG5cbiAgICAvLyBQYWNrYWdlIHZlcnNpb24gaW1wbGVtZW50aW5nIHRoaXMgbG9nZ2VyXG4gICAgcHJpdmF0ZSBwYWNrYWdlVmVyc2lvbjogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGxvZ2dlck9wdGlvbnM6IExvZ2dlck9wdGlvbnMsXG4gICAgICAgIHBhY2thZ2VOYW1lPzogc3RyaW5nLFxuICAgICAgICBwYWNrYWdlVmVyc2lvbj86IHN0cmluZ1xuICAgICkge1xuICAgICAgICBjb25zdCBkZWZhdWx0TG9nZ2VyQ2FsbGJhY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHNldExvZ2dlck9wdGlvbnMgPVxuICAgICAgICAgICAgbG9nZ2VyT3B0aW9ucyB8fCBMb2dnZXIuY3JlYXRlRGVmYXVsdExvZ2dlck9wdGlvbnMoKTtcbiAgICAgICAgdGhpcy5sb2NhbENhbGxiYWNrID1cbiAgICAgICAgICAgIHNldExvZ2dlck9wdGlvbnMubG9nZ2VyQ2FsbGJhY2sgfHwgZGVmYXVsdExvZ2dlckNhbGxiYWNrO1xuICAgICAgICB0aGlzLnBpaUxvZ2dpbmdFbmFibGVkID0gc2V0TG9nZ2VyT3B0aW9ucy5waWlMb2dnaW5nRW5hYmxlZCB8fCBmYWxzZTtcbiAgICAgICAgdGhpcy5sZXZlbCA9XG4gICAgICAgICAgICB0eXBlb2Ygc2V0TG9nZ2VyT3B0aW9ucy5sb2dMZXZlbCA9PT0gXCJudW1iZXJcIlxuICAgICAgICAgICAgICAgID8gc2V0TG9nZ2VyT3B0aW9ucy5sb2dMZXZlbFxuICAgICAgICAgICAgICAgIDogTG9nTGV2ZWwuSW5mbztcbiAgICAgICAgdGhpcy5jb3JyZWxhdGlvbklkID1cbiAgICAgICAgICAgIHNldExvZ2dlck9wdGlvbnMuY29ycmVsYXRpb25JZCB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HO1xuICAgICAgICB0aGlzLnBhY2thZ2VOYW1lID0gcGFja2FnZU5hbWUgfHwgQ29uc3RhbnRzLkVNUFRZX1NUUklORztcbiAgICAgICAgdGhpcy5wYWNrYWdlVmVyc2lvbiA9IHBhY2thZ2VWZXJzaW9uIHx8IENvbnN0YW50cy5FTVBUWV9TVFJJTkc7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgY3JlYXRlRGVmYXVsdExvZ2dlck9wdGlvbnMoKTogTG9nZ2VyT3B0aW9ucyB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBsb2dnZXJDYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGFsbG93IHVzZXJzIHRvIG5vdCBzZXQgbG9nZ2VyQ2FsbGJhY2tcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwaWlMb2dnaW5nRW5hYmxlZDogZmFsc2UsXG4gICAgICAgICAgICBsb2dMZXZlbDogTG9nTGV2ZWwuSW5mbyxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgbmV3IExvZ2dlciB3aXRoIGV4aXN0aW5nIGNvbmZpZ3VyYXRpb25zLlxuICAgICAqL1xuICAgIHB1YmxpYyBjbG9uZShcbiAgICAgICAgcGFja2FnZU5hbWU6IHN0cmluZyxcbiAgICAgICAgcGFja2FnZVZlcnNpb246IHN0cmluZyxcbiAgICAgICAgY29ycmVsYXRpb25JZD86IHN0cmluZ1xuICAgICk6IExvZ2dlciB7XG4gICAgICAgIHJldHVybiBuZXcgTG9nZ2VyKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGxvZ2dlckNhbGxiYWNrOiB0aGlzLmxvY2FsQ2FsbGJhY2ssXG4gICAgICAgICAgICAgICAgcGlpTG9nZ2luZ0VuYWJsZWQ6IHRoaXMucGlpTG9nZ2luZ0VuYWJsZWQsXG4gICAgICAgICAgICAgICAgbG9nTGV2ZWw6IHRoaXMubGV2ZWwsXG4gICAgICAgICAgICAgICAgY29ycmVsYXRpb25JZDogY29ycmVsYXRpb25JZCB8fCB0aGlzLmNvcnJlbGF0aW9uSWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGFja2FnZU5hbWUsXG4gICAgICAgICAgICBwYWNrYWdlVmVyc2lvblxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvZyBtZXNzYWdlIHdpdGggcmVxdWlyZWQgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBwcml2YXRlIGxvZ01lc3NhZ2UoXG4gICAgICAgIGxvZ01lc3NhZ2U6IHN0cmluZyxcbiAgICAgICAgb3B0aW9uczogTG9nZ2VyTWVzc2FnZU9wdGlvbnNcbiAgICApOiB2b2lkIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgb3B0aW9ucy5sb2dMZXZlbCA+IHRoaXMubGV2ZWwgfHxcbiAgICAgICAgICAgICghdGhpcy5waWlMb2dnaW5nRW5hYmxlZCAmJiBvcHRpb25zLmNvbnRhaW5zUGlpKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvVVRDU3RyaW5nKCk7XG5cbiAgICAgICAgLy8gQWRkIGNvcnJlbGF0aW9uSWQgdG8gbG9ncyBpZiBzZXQsIGNvcnJlbGF0aW9uSWQgcHJvdmlkZWQgb24gbG9nIG1lc3NhZ2VzIHRha2UgcHJlY2VkZW5jZVxuICAgICAgICBjb25zdCBsb2dIZWFkZXIgPSBgWyR7dGltZXN0YW1wfV0gOiBbJHtcbiAgICAgICAgICAgIG9wdGlvbnMuY29ycmVsYXRpb25JZCB8fCB0aGlzLmNvcnJlbGF0aW9uSWQgfHwgXCJcIlxuICAgICAgICB9XWA7XG5cbiAgICAgICAgY29uc3QgbG9nID0gYCR7bG9nSGVhZGVyfSA6ICR7dGhpcy5wYWNrYWdlTmFtZX1AJHtcbiAgICAgICAgICAgIHRoaXMucGFja2FnZVZlcnNpb25cbiAgICAgICAgfSA6ICR7TG9nTGV2ZWxbb3B0aW9ucy5sb2dMZXZlbF19IC0gJHtsb2dNZXNzYWdlfWA7XG4gICAgICAgIC8vIGRlYnVnKGBtc2FsOiR7TG9nTGV2ZWxbb3B0aW9ucy5sb2dMZXZlbF19JHtvcHRpb25zLmNvbnRhaW5zUGlpID8gXCItUGlpXCI6IENvbnN0YW50cy5FTVBUWV9TVFJJTkd9JHtvcHRpb25zLmNvbnRleHQgPyBgOiR7b3B0aW9ucy5jb250ZXh0fWAgOiBDb25zdGFudHMuRU1QVFlfU1RSSU5HfWApKGxvZ01lc3NhZ2UpO1xuICAgICAgICB0aGlzLmV4ZWN1dGVDYWxsYmFjayhcbiAgICAgICAgICAgIG9wdGlvbnMubG9nTGV2ZWwsXG4gICAgICAgICAgICBsb2csXG4gICAgICAgICAgICBvcHRpb25zLmNvbnRhaW5zUGlpIHx8IGZhbHNlXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXhlY3V0ZSBjYWxsYmFjayB3aXRoIG1lc3NhZ2UuXG4gICAgICovXG4gICAgZXhlY3V0ZUNhbGxiYWNrKFxuICAgICAgICBsZXZlbDogTG9nTGV2ZWwsXG4gICAgICAgIG1lc3NhZ2U6IHN0cmluZyxcbiAgICAgICAgY29udGFpbnNQaWk6IGJvb2xlYW5cbiAgICApOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMubG9jYWxDYWxsYmFjaykge1xuICAgICAgICAgICAgdGhpcy5sb2NhbENhbGxiYWNrKGxldmVsLCBtZXNzYWdlLCBjb250YWluc1BpaSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2dzIGVycm9yIG1lc3NhZ2VzLlxuICAgICAqL1xuICAgIGVycm9yKG1lc3NhZ2U6IHN0cmluZywgY29ycmVsYXRpb25JZD86IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLmxvZ01lc3NhZ2UobWVzc2FnZSwge1xuICAgICAgICAgICAgbG9nTGV2ZWw6IExvZ0xldmVsLkVycm9yLFxuICAgICAgICAgICAgY29udGFpbnNQaWk6IGZhbHNlLFxuICAgICAgICAgICAgY29ycmVsYXRpb25JZDogY29ycmVsYXRpb25JZCB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2dzIGVycm9yIG1lc3NhZ2VzIHdpdGggUElJLlxuICAgICAqL1xuICAgIGVycm9yUGlpKG1lc3NhZ2U6IHN0cmluZywgY29ycmVsYXRpb25JZD86IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLmxvZ01lc3NhZ2UobWVzc2FnZSwge1xuICAgICAgICAgICAgbG9nTGV2ZWw6IExvZ0xldmVsLkVycm9yLFxuICAgICAgICAgICAgY29udGFpbnNQaWk6IHRydWUsXG4gICAgICAgICAgICBjb3JyZWxhdGlvbklkOiBjb3JyZWxhdGlvbklkIHx8IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvZ3Mgd2FybmluZyBtZXNzYWdlcy5cbiAgICAgKi9cbiAgICB3YXJuaW5nKG1lc3NhZ2U6IHN0cmluZywgY29ycmVsYXRpb25JZD86IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLmxvZ01lc3NhZ2UobWVzc2FnZSwge1xuICAgICAgICAgICAgbG9nTGV2ZWw6IExvZ0xldmVsLldhcm5pbmcsXG4gICAgICAgICAgICBjb250YWluc1BpaTogZmFsc2UsXG4gICAgICAgICAgICBjb3JyZWxhdGlvbklkOiBjb3JyZWxhdGlvbklkIHx8IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvZ3Mgd2FybmluZyBtZXNzYWdlcyB3aXRoIFBJSS5cbiAgICAgKi9cbiAgICB3YXJuaW5nUGlpKG1lc3NhZ2U6IHN0cmluZywgY29ycmVsYXRpb25JZD86IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLmxvZ01lc3NhZ2UobWVzc2FnZSwge1xuICAgICAgICAgICAgbG9nTGV2ZWw6IExvZ0xldmVsLldhcm5pbmcsXG4gICAgICAgICAgICBjb250YWluc1BpaTogdHJ1ZSxcbiAgICAgICAgICAgIGNvcnJlbGF0aW9uSWQ6IGNvcnJlbGF0aW9uSWQgfHwgQ29uc3RhbnRzLkVNUFRZX1NUUklORyxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9ncyBpbmZvIG1lc3NhZ2VzLlxuICAgICAqL1xuICAgIGluZm8obWVzc2FnZTogc3RyaW5nLCBjb3JyZWxhdGlvbklkPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMubG9nTWVzc2FnZShtZXNzYWdlLCB7XG4gICAgICAgICAgICBsb2dMZXZlbDogTG9nTGV2ZWwuSW5mbyxcbiAgICAgICAgICAgIGNvbnRhaW5zUGlpOiBmYWxzZSxcbiAgICAgICAgICAgIGNvcnJlbGF0aW9uSWQ6IGNvcnJlbGF0aW9uSWQgfHwgQ29uc3RhbnRzLkVNUFRZX1NUUklORyxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9ncyBpbmZvIG1lc3NhZ2VzIHdpdGggUElJLlxuICAgICAqL1xuICAgIGluZm9QaWkobWVzc2FnZTogc3RyaW5nLCBjb3JyZWxhdGlvbklkPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMubG9nTWVzc2FnZShtZXNzYWdlLCB7XG4gICAgICAgICAgICBsb2dMZXZlbDogTG9nTGV2ZWwuSW5mbyxcbiAgICAgICAgICAgIGNvbnRhaW5zUGlpOiB0cnVlLFxuICAgICAgICAgICAgY29ycmVsYXRpb25JZDogY29ycmVsYXRpb25JZCB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2dzIHZlcmJvc2UgbWVzc2FnZXMuXG4gICAgICovXG4gICAgdmVyYm9zZShtZXNzYWdlOiBzdHJpbmcsIGNvcnJlbGF0aW9uSWQ/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5sb2dNZXNzYWdlKG1lc3NhZ2UsIHtcbiAgICAgICAgICAgIGxvZ0xldmVsOiBMb2dMZXZlbC5WZXJib3NlLFxuICAgICAgICAgICAgY29udGFpbnNQaWk6IGZhbHNlLFxuICAgICAgICAgICAgY29ycmVsYXRpb25JZDogY29ycmVsYXRpb25JZCB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2dzIHZlcmJvc2UgbWVzc2FnZXMgd2l0aCBQSUkuXG4gICAgICovXG4gICAgdmVyYm9zZVBpaShtZXNzYWdlOiBzdHJpbmcsIGNvcnJlbGF0aW9uSWQ/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5sb2dNZXNzYWdlKG1lc3NhZ2UsIHtcbiAgICAgICAgICAgIGxvZ0xldmVsOiBMb2dMZXZlbC5WZXJib3NlLFxuICAgICAgICAgICAgY29udGFpbnNQaWk6IHRydWUsXG4gICAgICAgICAgICBjb3JyZWxhdGlvbklkOiBjb3JyZWxhdGlvbklkIHx8IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvZ3MgdHJhY2UgbWVzc2FnZXMuXG4gICAgICovXG4gICAgdHJhY2UobWVzc2FnZTogc3RyaW5nLCBjb3JyZWxhdGlvbklkPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMubG9nTWVzc2FnZShtZXNzYWdlLCB7XG4gICAgICAgICAgICBsb2dMZXZlbDogTG9nTGV2ZWwuVHJhY2UsXG4gICAgICAgICAgICBjb250YWluc1BpaTogZmFsc2UsXG4gICAgICAgICAgICBjb3JyZWxhdGlvbklkOiBjb3JyZWxhdGlvbklkIHx8IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvZ3MgdHJhY2UgbWVzc2FnZXMgd2l0aCBQSUkuXG4gICAgICovXG4gICAgdHJhY2VQaWkobWVzc2FnZTogc3RyaW5nLCBjb3JyZWxhdGlvbklkPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMubG9nTWVzc2FnZShtZXNzYWdlLCB7XG4gICAgICAgICAgICBsb2dMZXZlbDogTG9nTGV2ZWwuVHJhY2UsXG4gICAgICAgICAgICBjb250YWluc1BpaTogdHJ1ZSxcbiAgICAgICAgICAgIGNvcnJlbGF0aW9uSWQ6IGNvcnJlbGF0aW9uSWQgfHwgQ29uc3RhbnRzLkVNUFRZX1NUUklORyxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIFBJSSBMb2dnaW5nIGlzIGVuYWJsZWQgb3Igbm90LlxuICAgICAqL1xuICAgIGlzUGlpTG9nZ2luZ0VuYWJsZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnBpaUxvZ2dpbmdFbmFibGVkIHx8IGZhbHNlO1xuICAgIH1cbn1cbiIsICIvKiBlc2xpbnQtZGlzYWJsZSBoZWFkZXIvaGVhZGVyICovXG5leHBvcnQgY29uc3QgbmFtZSA9IFwiQGF6dXJlL21zYWwtY29tbW9uXCI7XG5leHBvcnQgY29uc3QgdmVyc2lvbiA9IFwiMTUuNC4wXCI7XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IFByb3RvY29sTW9kZSB9IGZyb20gXCIuL1Byb3RvY29sTW9kZS5qc1wiO1xuaW1wb3J0IHsgT0lEQ09wdGlvbnMgfSBmcm9tIFwiLi9PSURDT3B0aW9ucy5qc1wiO1xuaW1wb3J0IHsgQXp1cmVSZWdpb25Db25maWd1cmF0aW9uIH0gZnJvbSBcIi4vQXp1cmVSZWdpb25Db25maWd1cmF0aW9uLmpzXCI7XG5pbXBvcnQgeyBDbG91ZEluc3RhbmNlRGlzY292ZXJ5UmVzcG9uc2UgfSBmcm9tIFwiLi9DbG91ZEluc3RhbmNlRGlzY292ZXJ5UmVzcG9uc2UuanNcIjtcblxuZXhwb3J0IHR5cGUgQXV0aG9yaXR5T3B0aW9ucyA9IHtcbiAgICBwcm90b2NvbE1vZGU6IFByb3RvY29sTW9kZTtcbiAgICBPSURDT3B0aW9ucz86IE9JRENPcHRpb25zIHwgbnVsbDtcbiAgICBrbm93bkF1dGhvcml0aWVzOiBBcnJheTxzdHJpbmc+O1xuICAgIGNsb3VkRGlzY292ZXJ5TWV0YWRhdGE6IHN0cmluZztcbiAgICBhdXRob3JpdHlNZXRhZGF0YTogc3RyaW5nO1xuICAgIHNraXBBdXRob3JpdHlNZXRhZGF0YUNhY2hlPzogYm9vbGVhbjtcbiAgICBhenVyZVJlZ2lvbkNvbmZpZ3VyYXRpb24/OiBBenVyZVJlZ2lvbkNvbmZpZ3VyYXRpb247XG4gICAgYXV0aG9yaXR5Pzogc3RyaW5nO1xufTtcblxuZXhwb3J0IHR5cGUgU3RhdGljQXV0aG9yaXR5T3B0aW9ucyA9IFBhcnRpYWw8XG4gICAgUGljazxBdXRob3JpdHlPcHRpb25zLCBcImtub3duQXV0aG9yaXRpZXNcIj5cbj4gJiB7XG4gICAgY2Fub25pY2FsQXV0aG9yaXR5Pzogc3RyaW5nO1xuICAgIGNsb3VkRGlzY292ZXJ5TWV0YWRhdGE/OiBDbG91ZEluc3RhbmNlRGlzY292ZXJ5UmVzcG9uc2U7XG59O1xuXG5leHBvcnQgY29uc3QgQXp1cmVDbG91ZEluc3RhbmNlID0ge1xuICAgIC8vIEF6dXJlQ2xvdWRJbnN0YW5jZSBpcyBub3Qgc3BlY2lmaWVkLlxuICAgIE5vbmU6IFwibm9uZVwiLFxuXG4gICAgLy8gTWljcm9zb2Z0IEF6dXJlIHB1YmxpYyBjbG91ZFxuICAgIEF6dXJlUHVibGljOiBcImh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbVwiLFxuXG4gICAgLy8gTWljcm9zb2Z0IFBQRVxuICAgIEF6dXJlUHBlOiBcImh0dHBzOi8vbG9naW4ud2luZG93cy1wcGUubmV0XCIsXG5cbiAgICAvLyBNaWNyb3NvZnQgQ2hpbmVzZSBuYXRpb25hbC9yZWdpb25hbCBjbG91ZFxuICAgIEF6dXJlQ2hpbmE6IFwiaHR0cHM6Ly9sb2dpbi5jaGluYWNsb3VkYXBpLmNuXCIsXG5cbiAgICAvLyBNaWNyb3NvZnQgR2VybWFuIG5hdGlvbmFsL3JlZ2lvbmFsIGNsb3VkIChcIkJsYWNrIEZvcmVzdFwiKVxuICAgIEF6dXJlR2VybWFueTogXCJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5kZVwiLFxuXG4gICAgLy8gVVMgR292ZXJubWVudCBjbG91ZFxuICAgIEF6dXJlVXNHb3Zlcm5tZW50OiBcImh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLnVzXCIsXG59IGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgQXp1cmVDbG91ZEluc3RhbmNlID1cbiAgICAodHlwZW9mIEF6dXJlQ2xvdWRJbnN0YW5jZSlba2V5b2YgdHlwZW9mIEF6dXJlQ2xvdWRJbnN0YW5jZV07XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IFRva2VuQ2xhaW1zIH0gZnJvbSBcIi4vVG9rZW5DbGFpbXMuanNcIjtcbmltcG9ydCB7XG4gICAgY3JlYXRlQ2xpZW50QXV0aEVycm9yLFxuICAgIENsaWVudEF1dGhFcnJvckNvZGVzLFxufSBmcm9tIFwiLi4vZXJyb3IvQ2xpZW50QXV0aEVycm9yLmpzXCI7XG5cbi8qKlxuICogRXh0cmFjdCB0b2tlbiBieSBkZWNvZGluZyB0aGUgcmF3VG9rZW5cbiAqXG4gKiBAcGFyYW0gZW5jb2RlZFRva2VuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0VG9rZW5DbGFpbXMoXG4gICAgZW5jb2RlZFRva2VuOiBzdHJpbmcsXG4gICAgYmFzZTY0RGVjb2RlOiAoaW5wdXQ6IHN0cmluZykgPT4gc3RyaW5nXG4pOiBUb2tlbkNsYWltcyB7XG4gICAgY29uc3QganN3UGF5bG9hZCA9IGdldEpXU1BheWxvYWQoZW5jb2RlZFRva2VuKTtcblxuICAgIC8vIHRva2VuIHdpbGwgYmUgZGVjb2RlZCB0byBnZXQgdGhlIHVzZXJuYW1lXG4gICAgdHJ5IHtcbiAgICAgICAgLy8gYmFzZTY0RGVjb2RlKCkgc2hvdWxkIHRocm93IGFuIGVycm9yIGlmIHRoZXJlIGlzIGFuIGlzc3VlXG4gICAgICAgIGNvbnN0IGJhc2U2NERlY29kZWQgPSBiYXNlNjREZWNvZGUoanN3UGF5bG9hZCk7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGJhc2U2NERlY29kZWQpIGFzIFRva2VuQ2xhaW1zO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMudG9rZW5QYXJzaW5nRXJyb3IpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBkZWNvZGUgYSBKV1RcbiAqXG4gKiBAcGFyYW0gYXV0aFRva2VuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRKV1NQYXlsb2FkKGF1dGhUb2tlbjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoIWF1dGhUb2tlbikge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubnVsbE9yRW1wdHlUb2tlbik7XG4gICAgfVxuICAgIGNvbnN0IHRva2VuUGFydHNSZWdleCA9IC9eKFteXFwuXFxzXSopXFwuKFteXFwuXFxzXSspXFwuKFteXFwuXFxzXSopJC87XG4gICAgY29uc3QgbWF0Y2hlcyA9IHRva2VuUGFydHNSZWdleC5leGVjKGF1dGhUb2tlbik7XG4gICAgaWYgKCFtYXRjaGVzIHx8IG1hdGNoZXMubGVuZ3RoIDwgNCkge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMudG9rZW5QYXJzaW5nRXJyb3IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBjb25zdCBjcmFja2VkVG9rZW4gPSB7XG4gICAgICogIGhlYWRlcjogbWF0Y2hlc1sxXSxcbiAgICAgKiAgSldTUGF5bG9hZDogbWF0Y2hlc1syXSxcbiAgICAgKiAgSldTU2lnOiBtYXRjaGVzWzNdLFxuICAgICAqIH07XG4gICAgICovXG5cbiAgICByZXR1cm4gbWF0Y2hlc1syXTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgdGhlIHRva2VuJ3MgbWF4X2FnZSBoYXMgdHJhbnNwaXJlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tNYXhBZ2UoYXV0aFRpbWU6IG51bWJlciwgbWF4QWdlOiBudW1iZXIpOiB2b2lkIHtcbiAgICAvKlxuICAgICAqIHBlciBodHRwczovL29wZW5pZC5uZXQvc3BlY3Mvb3BlbmlkLWNvbm5lY3QtY29yZS0xXzAuaHRtbCNBdXRoUmVxdWVzdFxuICAgICAqIFRvIGZvcmNlIGFuIGltbWVkaWF0ZSByZS1hdXRoZW50aWNhdGlvbjogSWYgYW4gYXBwIHJlcXVpcmVzIHRoYXQgYSB1c2VyIHJlLWF1dGhlbnRpY2F0ZSBwcmlvciB0byBhY2Nlc3MsXG4gICAgICogcHJvdmlkZSBhIHZhbHVlIG9mIDAgZm9yIHRoZSBtYXhfYWdlIHBhcmFtZXRlciBhbmQgdGhlIEFTIHdpbGwgZm9yY2UgYSBmcmVzaCBsb2dpbi5cbiAgICAgKi9cbiAgICBjb25zdCBmaXZlTWludXRlU2tldyA9IDMwMDAwMDsgLy8gZml2ZSBtaW51dGVzIGluIG1pbGxpc2Vjb25kc1xuICAgIGlmIChtYXhBZ2UgPT09IDAgfHwgRGF0ZS5ub3coKSAtIGZpdmVNaW51dGVTa2V3ID4gYXV0aFRpbWUgKyBtYXhBZ2UpIHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvckNvZGVzLm1heEFnZVRyYW5zcGlyZWQpO1xuICAgIH1cbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBVdGlsaXR5IGZ1bmN0aW9ucyBmb3IgbWFuYWdpbmcgZGF0ZSBhbmQgdGltZSBvcGVyYXRpb25zLlxuICovXG5cbi8qKlxuICogcmV0dXJuIHRoZSBjdXJyZW50IHRpbWUgaW4gVW5peCB0aW1lIChzZWNvbmRzKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5vd1NlY29uZHMoKTogbnVtYmVyIHtcbiAgICAvLyBEYXRlLmdldFRpbWUoKSByZXR1cm5zIGluIG1pbGxpc2Vjb25kcy5cbiAgICByZXR1cm4gTWF0aC5yb3VuZChuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDAuMCk7XG59XG5cbi8qKlxuICogQ29udmVydHMgSlMgRGF0ZSBvYmplY3QgdG8gc2Vjb25kc1xuICogQHBhcmFtIGRhdGUgRGF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9TZWNvbmRzRnJvbURhdGUoZGF0ZTogRGF0ZSk6IG51bWJlciB7XG4gICAgLy8gQ29udmVydCBkYXRlIHRvIHNlY29uZHNcbiAgICByZXR1cm4gZGF0ZS5nZXRUaW1lKCkgLyAxMDAwO1xufVxuXG4vKipcbiAqIENvbnZlcnQgc2Vjb25kcyB0byBKUyBEYXRlIG9iamVjdC4gU2Vjb25kcyBjYW4gYmUgaW4gYSBudW1iZXIgb3Igc3RyaW5nIGZvcm1hdCBvciB1bmRlZmluZWQgKHdpbGwgc3RpbGwgcmV0dXJuIGEgZGF0ZSkuXG4gKiBAcGFyYW0gc2Vjb25kc1xuICovXG5leHBvcnQgZnVuY3Rpb24gdG9EYXRlRnJvbVNlY29uZHMoc2Vjb25kczogbnVtYmVyIHwgc3RyaW5nIHwgdW5kZWZpbmVkKTogRGF0ZSB7XG4gICAgaWYgKHNlY29uZHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKE51bWJlcihzZWNvbmRzKSAqIDEwMDApO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IERhdGUoKTtcbn1cblxuLyoqXG4gKiBjaGVjayBpZiBhIHRva2VuIGlzIGV4cGlyZWQgYmFzZWQgb24gZ2l2ZW4gVVRDIHRpbWUgaW4gc2Vjb25kcy5cbiAqIEBwYXJhbSBleHBpcmVzT25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVG9rZW5FeHBpcmVkKGV4cGlyZXNPbjogc3RyaW5nLCBvZmZzZXQ6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIC8vIGNoZWNrIGZvciBhY2Nlc3MgdG9rZW4gZXhwaXJ5XG4gICAgY29uc3QgZXhwaXJhdGlvblNlYyA9IE51bWJlcihleHBpcmVzT24pIHx8IDA7XG4gICAgY29uc3Qgb2Zmc2V0Q3VycmVudFRpbWVTZWMgPSBub3dTZWNvbmRzKCkgKyBvZmZzZXQ7XG5cbiAgICAvLyBJZiBjdXJyZW50IHRpbWUgKyBvZmZzZXQgaXMgZ3JlYXRlciB0aGFuIHRva2VuIGV4cGlyYXRpb24gdGltZSwgdGhlbiB0b2tlbiBpcyBleHBpcmVkLlxuICAgIHJldHVybiBvZmZzZXRDdXJyZW50VGltZVNlYyA+IGV4cGlyYXRpb25TZWM7XG59XG5cbi8qKlxuICogSWYgdGhlIGN1cnJlbnQgdGltZSBpcyBlYXJsaWVyIHRoYW4gdGhlIHRpbWUgdGhhdCBhIHRva2VuIHdhcyBjYWNoZWQgYXQsIHdlIG11c3QgZGlzY2FyZCB0aGUgdG9rZW5cbiAqIGkuZS4gVGhlIHN5c3RlbSBjbG9jayB3YXMgdHVybmVkIGJhY2sgYWZ0ZXIgYWNxdWlyaW5nIHRoZSBjYWNoZWQgdG9rZW5cbiAqIEBwYXJhbSBjYWNoZWRBdFxuICogQHBhcmFtIG9mZnNldFxuICovXG5leHBvcnQgZnVuY3Rpb24gd2FzQ2xvY2tUdXJuZWRCYWNrKGNhY2hlZEF0OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBjYWNoZWRBdFNlYyA9IE51bWJlcihjYWNoZWRBdCk7XG5cbiAgICByZXR1cm4gY2FjaGVkQXRTZWMgPiBub3dTZWNvbmRzKCk7XG59XG5cbi8qKlxuICogV2FpdHMgZm9yIHQgbnVtYmVyIG9mIG1pbGxpc2Vjb25kc1xuICogQHBhcmFtIHQgbnVtYmVyXG4gKiBAcGFyYW0gdmFsdWUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVsYXk8VD4odDogbnVtYmVyLCB2YWx1ZT86IFQpOiBQcm9taXNlPFQgfCB2b2lkPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KCgpID0+IHJlc29sdmUodmFsdWUpLCB0KSk7XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGV4dHJhY3RUb2tlbkNsYWltcyB9IGZyb20gXCIuLi8uLi9hY2NvdW50L0F1dGhUb2tlbi5qc1wiO1xuaW1wb3J0IHsgVG9rZW5DbGFpbXMgfSBmcm9tIFwiLi4vLi4vYWNjb3VudC9Ub2tlbkNsYWltcy5qc1wiO1xuaW1wb3J0IHsgQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YSB9IGZyb20gXCIuLi8uLi9hdXRob3JpdHkvQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YS5qc1wiO1xuaW1wb3J0IHsgT3BlbklkQ29uZmlnUmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vYXV0aG9yaXR5L09wZW5JZENvbmZpZ1Jlc3BvbnNlLmpzXCI7XG5pbXBvcnQge1xuICAgIENsaWVudEF1dGhFcnJvckNvZGVzLFxuICAgIGNyZWF0ZUNsaWVudEF1dGhFcnJvcixcbn0gZnJvbSBcIi4uLy4uL2Vycm9yL0NsaWVudEF1dGhFcnJvci5qc1wiO1xuaW1wb3J0IHtcbiAgICBBUFBfTUVUQURBVEEsXG4gICAgQVVUSE9SSVRZX01FVEFEQVRBX0NPTlNUQU5UUyxcbiAgICBBdXRoZW50aWNhdGlvblNjaGVtZSxcbiAgICBDcmVkZW50aWFsVHlwZSxcbiAgICBTRVJWRVJfVEVMRU1fQ09OU1RBTlRTLFxuICAgIFNlcGFyYXRvcnMsXG4gICAgVGhyb3R0bGluZ0NvbnN0YW50cyxcbn0gZnJvbSBcIi4uLy4uL3V0aWxzL0NvbnN0YW50cy5qc1wiO1xuaW1wb3J0ICogYXMgVGltZVV0aWxzIGZyb20gXCIuLi8uLi91dGlscy9UaW1lVXRpbHMuanNcIjtcbmltcG9ydCB7IEFjY2Vzc1Rva2VuRW50aXR5IH0gZnJvbSBcIi4uL2VudGl0aWVzL0FjY2Vzc1Rva2VuRW50aXR5LmpzXCI7XG5pbXBvcnQgeyBBcHBNZXRhZGF0YUVudGl0eSB9IGZyb20gXCIuLi9lbnRpdGllcy9BcHBNZXRhZGF0YUVudGl0eS5qc1wiO1xuaW1wb3J0IHsgQXV0aG9yaXR5TWV0YWRhdGFFbnRpdHkgfSBmcm9tIFwiLi4vZW50aXRpZXMvQXV0aG9yaXR5TWV0YWRhdGFFbnRpdHkuanNcIjtcbmltcG9ydCB7IENyZWRlbnRpYWxFbnRpdHkgfSBmcm9tIFwiLi4vZW50aXRpZXMvQ3JlZGVudGlhbEVudGl0eS5qc1wiO1xuaW1wb3J0IHsgSWRUb2tlbkVudGl0eSB9IGZyb20gXCIuLi9lbnRpdGllcy9JZFRva2VuRW50aXR5LmpzXCI7XG5pbXBvcnQgeyBSZWZyZXNoVG9rZW5FbnRpdHkgfSBmcm9tIFwiLi4vZW50aXRpZXMvUmVmcmVzaFRva2VuRW50aXR5LmpzXCI7XG5cbi8qKlxuICogQ2FjaGUgS2V5OiA8aG9tZV9hY2NvdW50X2lkPi08ZW52aXJvbm1lbnQ+LTxjcmVkZW50aWFsX3R5cGU+LTxjbGllbnRfaWQgb3IgZmFtaWx5SWQ+LTxyZWFsbT4tPHNjb3Blcz4tPGNsYWltcyBoYXNoPi08c2NoZW1lPlxuICogSWRUb2tlbiBFeGFtcGxlOiB1aWQudXRpZC1sb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tLWlkdG9rZW4tYXBwX2NsaWVudF9pZC1jb250b3NvLmNvbVxuICogQWNjZXNzVG9rZW4gRXhhbXBsZTogdWlkLnV0aWQtbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbS1hY2Nlc3N0b2tlbi1hcHBfY2xpZW50X2lkLWNvbnRvc28uY29tLXNjb3BlMSBzY29wZTItLXBvcFxuICogUmVmcmVzaFRva2VuIEV4YW1wbGU6IHVpZC51dGlkLWxvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20tcmVmcmVzaHRva2VuLTEtY29udG9zby5jb21cbiAqIEBwYXJhbSBjcmVkZW50aWFsRW50aXR5XG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVDcmVkZW50aWFsS2V5KFxuICAgIGNyZWRlbnRpYWxFbnRpdHk6IENyZWRlbnRpYWxFbnRpdHlcbik6IHN0cmluZyB7XG4gICAgY29uc3QgY3JlZGVudGlhbEtleSA9IFtcbiAgICAgICAgZ2VuZXJhdGVBY2NvdW50SWQoY3JlZGVudGlhbEVudGl0eSksXG4gICAgICAgIGdlbmVyYXRlQ3JlZGVudGlhbElkKGNyZWRlbnRpYWxFbnRpdHkpLFxuICAgICAgICBnZW5lcmF0ZVRhcmdldChjcmVkZW50aWFsRW50aXR5KSxcbiAgICAgICAgZ2VuZXJhdGVDbGFpbXNIYXNoKGNyZWRlbnRpYWxFbnRpdHkpLFxuICAgICAgICBnZW5lcmF0ZVNjaGVtZShjcmVkZW50aWFsRW50aXR5KSxcbiAgICBdO1xuXG4gICAgcmV0dXJuIGNyZWRlbnRpYWxLZXkuam9pbihTZXBhcmF0b3JzLkNBQ0hFX0tFWV9TRVBBUkFUT1IpLnRvTG93ZXJDYXNlKCk7XG59XG5cbi8qKlxuICogQ3JlYXRlIElkVG9rZW5FbnRpdHlcbiAqIEBwYXJhbSBob21lQWNjb3VudElkXG4gKiBAcGFyYW0gYXV0aGVudGljYXRpb25SZXN1bHRcbiAqIEBwYXJhbSBjbGllbnRJZFxuICogQHBhcmFtIGF1dGhvcml0eVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSWRUb2tlbkVudGl0eShcbiAgICBob21lQWNjb3VudElkOiBzdHJpbmcsXG4gICAgZW52aXJvbm1lbnQ6IHN0cmluZyxcbiAgICBpZFRva2VuOiBzdHJpbmcsXG4gICAgY2xpZW50SWQ6IHN0cmluZyxcbiAgICB0ZW5hbnRJZDogc3RyaW5nXG4pOiBJZFRva2VuRW50aXR5IHtcbiAgICBjb25zdCBpZFRva2VuRW50aXR5OiBJZFRva2VuRW50aXR5ID0ge1xuICAgICAgICBjcmVkZW50aWFsVHlwZTogQ3JlZGVudGlhbFR5cGUuSURfVE9LRU4sXG4gICAgICAgIGhvbWVBY2NvdW50SWQ6IGhvbWVBY2NvdW50SWQsXG4gICAgICAgIGVudmlyb25tZW50OiBlbnZpcm9ubWVudCxcbiAgICAgICAgY2xpZW50SWQ6IGNsaWVudElkLFxuICAgICAgICBzZWNyZXQ6IGlkVG9rZW4sXG4gICAgICAgIHJlYWxtOiB0ZW5hbnRJZCxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGlkVG9rZW5FbnRpdHk7XG59XG5cbi8qKlxuICogQ3JlYXRlIEFjY2Vzc1Rva2VuRW50aXR5XG4gKiBAcGFyYW0gaG9tZUFjY291bnRJZFxuICogQHBhcmFtIGVudmlyb25tZW50XG4gKiBAcGFyYW0gYWNjZXNzVG9rZW5cbiAqIEBwYXJhbSBjbGllbnRJZFxuICogQHBhcmFtIHRlbmFudElkXG4gKiBAcGFyYW0gc2NvcGVzXG4gKiBAcGFyYW0gZXhwaXJlc09uXG4gKiBAcGFyYW0gZXh0RXhwaXJlc09uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBY2Nlc3NUb2tlbkVudGl0eShcbiAgICBob21lQWNjb3VudElkOiBzdHJpbmcsXG4gICAgZW52aXJvbm1lbnQ6IHN0cmluZyxcbiAgICBhY2Nlc3NUb2tlbjogc3RyaW5nLFxuICAgIGNsaWVudElkOiBzdHJpbmcsXG4gICAgdGVuYW50SWQ6IHN0cmluZyxcbiAgICBzY29wZXM6IHN0cmluZyxcbiAgICBleHBpcmVzT246IG51bWJlcixcbiAgICBleHRFeHBpcmVzT246IG51bWJlcixcbiAgICBiYXNlNjREZWNvZGU6IChpbnB1dDogc3RyaW5nKSA9PiBzdHJpbmcsXG4gICAgcmVmcmVzaE9uPzogbnVtYmVyLFxuICAgIHRva2VuVHlwZT86IEF1dGhlbnRpY2F0aW9uU2NoZW1lLFxuICAgIHVzZXJBc3NlcnRpb25IYXNoPzogc3RyaW5nLFxuICAgIGtleUlkPzogc3RyaW5nLFxuICAgIHJlcXVlc3RlZENsYWltcz86IHN0cmluZyxcbiAgICByZXF1ZXN0ZWRDbGFpbXNIYXNoPzogc3RyaW5nXG4pOiBBY2Nlc3NUb2tlbkVudGl0eSB7XG4gICAgY29uc3QgYXRFbnRpdHk6IEFjY2Vzc1Rva2VuRW50aXR5ID0ge1xuICAgICAgICBob21lQWNjb3VudElkOiBob21lQWNjb3VudElkLFxuICAgICAgICBjcmVkZW50aWFsVHlwZTogQ3JlZGVudGlhbFR5cGUuQUNDRVNTX1RPS0VOLFxuICAgICAgICBzZWNyZXQ6IGFjY2Vzc1Rva2VuLFxuICAgICAgICBjYWNoZWRBdDogVGltZVV0aWxzLm5vd1NlY29uZHMoKS50b1N0cmluZygpLFxuICAgICAgICBleHBpcmVzT246IGV4cGlyZXNPbi50b1N0cmluZygpLFxuICAgICAgICBleHRlbmRlZEV4cGlyZXNPbjogZXh0RXhwaXJlc09uLnRvU3RyaW5nKCksXG4gICAgICAgIGVudmlyb25tZW50OiBlbnZpcm9ubWVudCxcbiAgICAgICAgY2xpZW50SWQ6IGNsaWVudElkLFxuICAgICAgICByZWFsbTogdGVuYW50SWQsXG4gICAgICAgIHRhcmdldDogc2NvcGVzLFxuICAgICAgICB0b2tlblR5cGU6IHRva2VuVHlwZSB8fCBBdXRoZW50aWNhdGlvblNjaGVtZS5CRUFSRVIsXG4gICAgfTtcblxuICAgIGlmICh1c2VyQXNzZXJ0aW9uSGFzaCkge1xuICAgICAgICBhdEVudGl0eS51c2VyQXNzZXJ0aW9uSGFzaCA9IHVzZXJBc3NlcnRpb25IYXNoO1xuICAgIH1cblxuICAgIGlmIChyZWZyZXNoT24pIHtcbiAgICAgICAgYXRFbnRpdHkucmVmcmVzaE9uID0gcmVmcmVzaE9uLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3RlZENsYWltcykge1xuICAgICAgICBhdEVudGl0eS5yZXF1ZXN0ZWRDbGFpbXMgPSByZXF1ZXN0ZWRDbGFpbXM7XG4gICAgICAgIGF0RW50aXR5LnJlcXVlc3RlZENsYWltc0hhc2ggPSByZXF1ZXN0ZWRDbGFpbXNIYXNoO1xuICAgIH1cblxuICAgIC8qXG4gICAgICogQ3JlYXRlIEFjY2VzcyBUb2tlbiBXaXRoIEF1dGggU2NoZW1lIGluc3RlYWQgb2YgcmVndWxhciBhY2Nlc3MgdG9rZW5cbiAgICAgKiBDYXN0IHRvIGxvd2VyIHRvIGhhbmRsZSBcImJlYXJlclwiIGZyb20gQURGU1xuICAgICAqL1xuICAgIGlmIChcbiAgICAgICAgYXRFbnRpdHkudG9rZW5UeXBlPy50b0xvd2VyQ2FzZSgpICE9PVxuICAgICAgICBBdXRoZW50aWNhdGlvblNjaGVtZS5CRUFSRVIudG9Mb3dlckNhc2UoKVxuICAgICkge1xuICAgICAgICBhdEVudGl0eS5jcmVkZW50aWFsVHlwZSA9IENyZWRlbnRpYWxUeXBlLkFDQ0VTU19UT0tFTl9XSVRIX0FVVEhfU0NIRU1FO1xuICAgICAgICBzd2l0Y2ggKGF0RW50aXR5LnRva2VuVHlwZSkge1xuICAgICAgICAgICAgY2FzZSBBdXRoZW50aWNhdGlvblNjaGVtZS5QT1A6XG4gICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIGtleUlkIGlzIHByZXNlbnQgYW5kIGFkZCBpdCB0byBjcmVkZW50aWFsXG4gICAgICAgICAgICAgICAgY29uc3QgdG9rZW5DbGFpbXM6IFRva2VuQ2xhaW1zIHwgbnVsbCA9IGV4dHJhY3RUb2tlbkNsYWltcyhcbiAgICAgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIGJhc2U2NERlY29kZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgaWYgKCF0b2tlbkNsYWltcz8uY25mPy5raWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMudG9rZW5DbGFpbXNDbmZSZXF1aXJlZEZvclNpZ25lZEp3dFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhdEVudGl0eS5rZXlJZCA9IHRva2VuQ2xhaW1zLmNuZi5raWQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEF1dGhlbnRpY2F0aW9uU2NoZW1lLlNTSDpcbiAgICAgICAgICAgICAgICBhdEVudGl0eS5rZXlJZCA9IGtleUlkO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGF0RW50aXR5O1xufVxuXG4vKipcbiAqIENyZWF0ZSBSZWZyZXNoVG9rZW5FbnRpdHlcbiAqIEBwYXJhbSBob21lQWNjb3VudElkXG4gKiBAcGFyYW0gYXV0aGVudGljYXRpb25SZXN1bHRcbiAqIEBwYXJhbSBjbGllbnRJZFxuICogQHBhcmFtIGF1dGhvcml0eVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmVmcmVzaFRva2VuRW50aXR5KFxuICAgIGhvbWVBY2NvdW50SWQ6IHN0cmluZyxcbiAgICBlbnZpcm9ubWVudDogc3RyaW5nLFxuICAgIHJlZnJlc2hUb2tlbjogc3RyaW5nLFxuICAgIGNsaWVudElkOiBzdHJpbmcsXG4gICAgZmFtaWx5SWQ/OiBzdHJpbmcsXG4gICAgdXNlckFzc2VydGlvbkhhc2g/OiBzdHJpbmcsXG4gICAgZXhwaXJlc09uPzogbnVtYmVyXG4pOiBSZWZyZXNoVG9rZW5FbnRpdHkge1xuICAgIGNvbnN0IHJ0RW50aXR5OiBSZWZyZXNoVG9rZW5FbnRpdHkgPSB7XG4gICAgICAgIGNyZWRlbnRpYWxUeXBlOiBDcmVkZW50aWFsVHlwZS5SRUZSRVNIX1RPS0VOLFxuICAgICAgICBob21lQWNjb3VudElkOiBob21lQWNjb3VudElkLFxuICAgICAgICBlbnZpcm9ubWVudDogZW52aXJvbm1lbnQsXG4gICAgICAgIGNsaWVudElkOiBjbGllbnRJZCxcbiAgICAgICAgc2VjcmV0OiByZWZyZXNoVG9rZW4sXG4gICAgfTtcblxuICAgIGlmICh1c2VyQXNzZXJ0aW9uSGFzaCkge1xuICAgICAgICBydEVudGl0eS51c2VyQXNzZXJ0aW9uSGFzaCA9IHVzZXJBc3NlcnRpb25IYXNoO1xuICAgIH1cblxuICAgIGlmIChmYW1pbHlJZCkge1xuICAgICAgICBydEVudGl0eS5mYW1pbHlJZCA9IGZhbWlseUlkO1xuICAgIH1cblxuICAgIGlmIChleHBpcmVzT24pIHtcbiAgICAgICAgcnRFbnRpdHkuZXhwaXJlc09uID0gZXhwaXJlc09uLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJ0RW50aXR5O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNDcmVkZW50aWFsRW50aXR5KGVudGl0eTogb2JqZWN0KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgZW50aXR5Lmhhc093blByb3BlcnR5KFwiaG9tZUFjY291bnRJZFwiKSAmJlxuICAgICAgICBlbnRpdHkuaGFzT3duUHJvcGVydHkoXCJlbnZpcm9ubWVudFwiKSAmJlxuICAgICAgICBlbnRpdHkuaGFzT3duUHJvcGVydHkoXCJjcmVkZW50aWFsVHlwZVwiKSAmJlxuICAgICAgICBlbnRpdHkuaGFzT3duUHJvcGVydHkoXCJjbGllbnRJZFwiKSAmJlxuICAgICAgICBlbnRpdHkuaGFzT3duUHJvcGVydHkoXCJzZWNyZXRcIilcbiAgICApO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyBhbiBlbnRpdHk6IGNoZWNrcyBmb3IgYWxsIGV4cGVjdGVkIHBhcmFtc1xuICogQHBhcmFtIGVudGl0eVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNBY2Nlc3NUb2tlbkVudGl0eShlbnRpdHk6IG9iamVjdCk6IGJvb2xlYW4ge1xuICAgIGlmICghZW50aXR5KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICBpc0NyZWRlbnRpYWxFbnRpdHkoZW50aXR5KSAmJlxuICAgICAgICBlbnRpdHkuaGFzT3duUHJvcGVydHkoXCJyZWFsbVwiKSAmJlxuICAgICAgICBlbnRpdHkuaGFzT3duUHJvcGVydHkoXCJ0YXJnZXRcIikgJiZcbiAgICAgICAgKGVudGl0eVtcImNyZWRlbnRpYWxUeXBlXCJdID09PSBDcmVkZW50aWFsVHlwZS5BQ0NFU1NfVE9LRU4gfHxcbiAgICAgICAgICAgIGVudGl0eVtcImNyZWRlbnRpYWxUeXBlXCJdID09PVxuICAgICAgICAgICAgICAgIENyZWRlbnRpYWxUeXBlLkFDQ0VTU19UT0tFTl9XSVRIX0FVVEhfU0NIRU1FKVxuICAgICk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIGFuIGVudGl0eTogY2hlY2tzIGZvciBhbGwgZXhwZWN0ZWQgcGFyYW1zXG4gKiBAcGFyYW0gZW50aXR5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0lkVG9rZW5FbnRpdHkoZW50aXR5OiBvYmplY3QpOiBib29sZWFuIHtcbiAgICBpZiAoIWVudGl0eSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgaXNDcmVkZW50aWFsRW50aXR5KGVudGl0eSkgJiZcbiAgICAgICAgZW50aXR5Lmhhc093blByb3BlcnR5KFwicmVhbG1cIikgJiZcbiAgICAgICAgZW50aXR5W1wiY3JlZGVudGlhbFR5cGVcIl0gPT09IENyZWRlbnRpYWxUeXBlLklEX1RPS0VOXG4gICAgKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgYW4gZW50aXR5OiBjaGVja3MgZm9yIGFsbCBleHBlY3RlZCBwYXJhbXNcbiAqIEBwYXJhbSBlbnRpdHlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzUmVmcmVzaFRva2VuRW50aXR5KGVudGl0eTogb2JqZWN0KTogYm9vbGVhbiB7XG4gICAgaWYgKCFlbnRpdHkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgIGlzQ3JlZGVudGlhbEVudGl0eShlbnRpdHkpICYmXG4gICAgICAgIGVudGl0eVtcImNyZWRlbnRpYWxUeXBlXCJdID09PSBDcmVkZW50aWFsVHlwZS5SRUZSRVNIX1RPS0VOXG4gICAgKTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSBBY2NvdW50IElkIGtleSBjb21wb25lbnQgYXMgcGVyIHRoZSBzY2hlbWE6IDxob21lX2FjY291bnRfaWQ+LTxlbnZpcm9ubWVudD5cbiAqL1xuZnVuY3Rpb24gZ2VuZXJhdGVBY2NvdW50SWQoY3JlZGVudGlhbEVudGl0eTogQ3JlZGVudGlhbEVudGl0eSk6IHN0cmluZyB7XG4gICAgY29uc3QgYWNjb3VudElkOiBBcnJheTxzdHJpbmc+ID0gW1xuICAgICAgICBjcmVkZW50aWFsRW50aXR5LmhvbWVBY2NvdW50SWQsXG4gICAgICAgIGNyZWRlbnRpYWxFbnRpdHkuZW52aXJvbm1lbnQsXG4gICAgXTtcbiAgICByZXR1cm4gYWNjb3VudElkLmpvaW4oU2VwYXJhdG9ycy5DQUNIRV9LRVlfU0VQQVJBVE9SKS50b0xvd2VyQ2FzZSgpO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlIENyZWRlbnRpYWwgSWQga2V5IGNvbXBvbmVudCBhcyBwZXIgdGhlIHNjaGVtYTogPGNyZWRlbnRpYWxfdHlwZT4tPGNsaWVudF9pZD4tPHJlYWxtPlxuICovXG5mdW5jdGlvbiBnZW5lcmF0ZUNyZWRlbnRpYWxJZChjcmVkZW50aWFsRW50aXR5OiBDcmVkZW50aWFsRW50aXR5KTogc3RyaW5nIHtcbiAgICBjb25zdCBjbGllbnRPckZhbWlseUlkID1cbiAgICAgICAgY3JlZGVudGlhbEVudGl0eS5jcmVkZW50aWFsVHlwZSA9PT0gQ3JlZGVudGlhbFR5cGUuUkVGUkVTSF9UT0tFTlxuICAgICAgICAgICAgPyBjcmVkZW50aWFsRW50aXR5LmZhbWlseUlkIHx8IGNyZWRlbnRpYWxFbnRpdHkuY2xpZW50SWRcbiAgICAgICAgICAgIDogY3JlZGVudGlhbEVudGl0eS5jbGllbnRJZDtcbiAgICBjb25zdCBjcmVkZW50aWFsSWQ6IEFycmF5PHN0cmluZz4gPSBbXG4gICAgICAgIGNyZWRlbnRpYWxFbnRpdHkuY3JlZGVudGlhbFR5cGUsXG4gICAgICAgIGNsaWVudE9yRmFtaWx5SWQsXG4gICAgICAgIGNyZWRlbnRpYWxFbnRpdHkucmVhbG0gfHwgXCJcIixcbiAgICBdO1xuXG4gICAgcmV0dXJuIGNyZWRlbnRpYWxJZC5qb2luKFNlcGFyYXRvcnMuQ0FDSEVfS0VZX1NFUEFSQVRPUikudG9Mb3dlckNhc2UoKTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSB0YXJnZXQga2V5IGNvbXBvbmVudCBhcyBwZXIgc2NoZW1hOiA8dGFyZ2V0PlxuICovXG5mdW5jdGlvbiBnZW5lcmF0ZVRhcmdldChjcmVkZW50aWFsRW50aXR5OiBDcmVkZW50aWFsRW50aXR5KTogc3RyaW5nIHtcbiAgICByZXR1cm4gKGNyZWRlbnRpYWxFbnRpdHkudGFyZ2V0IHx8IFwiXCIpLnRvTG93ZXJDYXNlKCk7XG59XG5cbi8qKlxuICogR2VuZXJhdGUgcmVxdWVzdGVkIGNsYWltcyBrZXkgY29tcG9uZW50IGFzIHBlciBzY2hlbWE6IDxyZXF1ZXN0ZWRDbGFpbXM+XG4gKi9cbmZ1bmN0aW9uIGdlbmVyYXRlQ2xhaW1zSGFzaChjcmVkZW50aWFsRW50aXR5OiBDcmVkZW50aWFsRW50aXR5KTogc3RyaW5nIHtcbiAgICByZXR1cm4gKGNyZWRlbnRpYWxFbnRpdHkucmVxdWVzdGVkQ2xhaW1zSGFzaCB8fCBcIlwiKS50b0xvd2VyQ2FzZSgpO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlIHNjaGVtZSBrZXkgY29tcG9uZW5ldCBhcyBwZXIgc2NoZW1hOiA8c2NoZW1lPlxuICovXG5mdW5jdGlvbiBnZW5lcmF0ZVNjaGVtZShjcmVkZW50aWFsRW50aXR5OiBDcmVkZW50aWFsRW50aXR5KTogc3RyaW5nIHtcbiAgICAvKlxuICAgICAqIFBvUCBUb2tlbnMgYW5kIFNTSCBjZXJ0cyBpbmNsdWRlIHNjaGVtZSBpbiBjYWNoZSBrZXlcbiAgICAgKiBDYXN0IHRvIGxvd2VyY2FzZSB0byBoYW5kbGUgXCJiZWFyZXJcIiBmcm9tIEFERlNcbiAgICAgKi9cbiAgICByZXR1cm4gY3JlZGVudGlhbEVudGl0eS50b2tlblR5cGUgJiZcbiAgICAgICAgY3JlZGVudGlhbEVudGl0eS50b2tlblR5cGUudG9Mb3dlckNhc2UoKSAhPT1cbiAgICAgICAgICAgIEF1dGhlbnRpY2F0aW9uU2NoZW1lLkJFQVJFUi50b0xvd2VyQ2FzZSgpXG4gICAgICAgID8gY3JlZGVudGlhbEVudGl0eS50b2tlblR5cGUudG9Mb3dlckNhc2UoKVxuICAgICAgICA6IFwiXCI7XG59XG5cbi8qKlxuICogdmFsaWRhdGVzIGlmIGEgZ2l2ZW4gY2FjaGUgZW50cnkgaXMgXCJUZWxlbWV0cnlcIiwgcGFyc2VzIDxrZXksdmFsdWU+XG4gKiBAcGFyYW0ga2V5XG4gKiBAcGFyYW0gZW50aXR5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1NlcnZlclRlbGVtZXRyeUVudGl0eShrZXk6IHN0cmluZywgZW50aXR5Pzogb2JqZWN0KTogYm9vbGVhbiB7XG4gICAgY29uc3QgdmFsaWRhdGVLZXk6IGJvb2xlYW4gPVxuICAgICAgICBrZXkuaW5kZXhPZihTRVJWRVJfVEVMRU1fQ09OU1RBTlRTLkNBQ0hFX0tFWSkgPT09IDA7XG4gICAgbGV0IHZhbGlkYXRlRW50aXR5OiBib29sZWFuID0gdHJ1ZTtcblxuICAgIGlmIChlbnRpdHkpIHtcbiAgICAgICAgdmFsaWRhdGVFbnRpdHkgPVxuICAgICAgICAgICAgZW50aXR5Lmhhc093blByb3BlcnR5KFwiZmFpbGVkUmVxdWVzdHNcIikgJiZcbiAgICAgICAgICAgIGVudGl0eS5oYXNPd25Qcm9wZXJ0eShcImVycm9yc1wiKSAmJlxuICAgICAgICAgICAgZW50aXR5Lmhhc093blByb3BlcnR5KFwiY2FjaGVIaXRzXCIpO1xuICAgIH1cblxuICAgIHJldHVybiB2YWxpZGF0ZUtleSAmJiB2YWxpZGF0ZUVudGl0eTtcbn1cblxuLyoqXG4gKiB2YWxpZGF0ZXMgaWYgYSBnaXZlbiBjYWNoZSBlbnRyeSBpcyBcIlRocm90dGxpbmdcIiwgcGFyc2VzIDxrZXksdmFsdWU+XG4gKiBAcGFyYW0ga2V5XG4gKiBAcGFyYW0gZW50aXR5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1Rocm90dGxpbmdFbnRpdHkoa2V5OiBzdHJpbmcsIGVudGl0eT86IG9iamVjdCk6IGJvb2xlYW4ge1xuICAgIGxldCB2YWxpZGF0ZUtleTogYm9vbGVhbiA9IGZhbHNlO1xuICAgIGlmIChrZXkpIHtcbiAgICAgICAgdmFsaWRhdGVLZXkgPSBrZXkuaW5kZXhPZihUaHJvdHRsaW5nQ29uc3RhbnRzLlRIUk9UVExJTkdfUFJFRklYKSA9PT0gMDtcbiAgICB9XG5cbiAgICBsZXQgdmFsaWRhdGVFbnRpdHk6IGJvb2xlYW4gPSB0cnVlO1xuICAgIGlmIChlbnRpdHkpIHtcbiAgICAgICAgdmFsaWRhdGVFbnRpdHkgPSBlbnRpdHkuaGFzT3duUHJvcGVydHkoXCJ0aHJvdHRsZVRpbWVcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbGlkYXRlS2V5ICYmIHZhbGlkYXRlRW50aXR5O1xufVxuXG4vKipcbiAqIEdlbmVyYXRlIEFwcE1ldGFkYXRhIENhY2hlIEtleSBhcyBwZXIgdGhlIHNjaGVtYTogYXBwbWV0YWRhdGEtPGVudmlyb25tZW50Pi08Y2xpZW50X2lkPlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVBcHBNZXRhZGF0YUtleSh7XG4gICAgZW52aXJvbm1lbnQsXG4gICAgY2xpZW50SWQsXG59OiBBcHBNZXRhZGF0YUVudGl0eSk6IHN0cmluZyB7XG4gICAgY29uc3QgYXBwTWV0YURhdGFLZXlBcnJheTogQXJyYXk8c3RyaW5nPiA9IFtcbiAgICAgICAgQVBQX01FVEFEQVRBLFxuICAgICAgICBlbnZpcm9ubWVudCxcbiAgICAgICAgY2xpZW50SWQsXG4gICAgXTtcbiAgICByZXR1cm4gYXBwTWV0YURhdGFLZXlBcnJheVxuICAgICAgICAuam9pbihTZXBhcmF0b3JzLkNBQ0hFX0tFWV9TRVBBUkFUT1IpXG4gICAgICAgIC50b0xvd2VyQ2FzZSgpO1xufVxuXG4vKlxuICogVmFsaWRhdGVzIGFuIGVudGl0eTogY2hlY2tzIGZvciBhbGwgZXhwZWN0ZWQgcGFyYW1zXG4gKiBAcGFyYW0gZW50aXR5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0FwcE1ldGFkYXRhRW50aXR5KGtleTogc3RyaW5nLCBlbnRpdHk6IG9iamVjdCk6IGJvb2xlYW4ge1xuICAgIGlmICghZW50aXR5KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICBrZXkuaW5kZXhPZihBUFBfTUVUQURBVEEpID09PSAwICYmXG4gICAgICAgIGVudGl0eS5oYXNPd25Qcm9wZXJ0eShcImNsaWVudElkXCIpICYmXG4gICAgICAgIGVudGl0eS5oYXNPd25Qcm9wZXJ0eShcImVudmlyb25tZW50XCIpXG4gICAgKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgYW4gZW50aXR5OiBjaGVja3MgZm9yIGFsbCBleHBlY3RlZCBwYXJhbXNcbiAqIEBwYXJhbSBlbnRpdHlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQXV0aG9yaXR5TWV0YWRhdGFFbnRpdHkoXG4gICAga2V5OiBzdHJpbmcsXG4gICAgZW50aXR5OiBvYmplY3Rcbik6IGJvb2xlYW4ge1xuICAgIGlmICghZW50aXR5KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICBrZXkuaW5kZXhPZihBVVRIT1JJVFlfTUVUQURBVEFfQ09OU1RBTlRTLkNBQ0hFX0tFWSkgPT09IDAgJiZcbiAgICAgICAgZW50aXR5Lmhhc093blByb3BlcnR5KFwiYWxpYXNlc1wiKSAmJlxuICAgICAgICBlbnRpdHkuaGFzT3duUHJvcGVydHkoXCJwcmVmZXJyZWRfY2FjaGVcIikgJiZcbiAgICAgICAgZW50aXR5Lmhhc093blByb3BlcnR5KFwicHJlZmVycmVkX25ldHdvcmtcIikgJiZcbiAgICAgICAgZW50aXR5Lmhhc093blByb3BlcnR5KFwiY2Fub25pY2FsX2F1dGhvcml0eVwiKSAmJlxuICAgICAgICBlbnRpdHkuaGFzT3duUHJvcGVydHkoXCJhdXRob3JpemF0aW9uX2VuZHBvaW50XCIpICYmXG4gICAgICAgIGVudGl0eS5oYXNPd25Qcm9wZXJ0eShcInRva2VuX2VuZHBvaW50XCIpICYmXG4gICAgICAgIGVudGl0eS5oYXNPd25Qcm9wZXJ0eShcImlzc3VlclwiKSAmJlxuICAgICAgICBlbnRpdHkuaGFzT3duUHJvcGVydHkoXCJhbGlhc2VzRnJvbU5ldHdvcmtcIikgJiZcbiAgICAgICAgZW50aXR5Lmhhc093blByb3BlcnR5KFwiZW5kcG9pbnRzRnJvbU5ldHdvcmtcIikgJiZcbiAgICAgICAgZW50aXR5Lmhhc093blByb3BlcnR5KFwiZXhwaXJlc0F0XCIpICYmXG4gICAgICAgIGVudGl0eS5oYXNPd25Qcm9wZXJ0eShcImp3a3NfdXJpXCIpXG4gICAgKTtcbn1cblxuLyoqXG4gKiBSZXNldCB0aGUgZXhpcmVzQXQgdmFsdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlQXV0aG9yaXR5TWV0YWRhdGFFeHBpcmVzQXQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gKFxuICAgICAgICBUaW1lVXRpbHMubm93U2Vjb25kcygpICtcbiAgICAgICAgQVVUSE9SSVRZX01FVEFEQVRBX0NPTlNUQU5UUy5SRUZSRVNIX1RJTUVfU0VDT05EU1xuICAgICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVBdXRob3JpdHlFbmRwb2ludE1ldGFkYXRhKFxuICAgIGF1dGhvcml0eU1ldGFkYXRhOiBBdXRob3JpdHlNZXRhZGF0YUVudGl0eSxcbiAgICB1cGRhdGVkVmFsdWVzOiBPcGVuSWRDb25maWdSZXNwb25zZSxcbiAgICBmcm9tTmV0d29yazogYm9vbGVhblxuKTogdm9pZCB7XG4gICAgYXV0aG9yaXR5TWV0YWRhdGEuYXV0aG9yaXphdGlvbl9lbmRwb2ludCA9XG4gICAgICAgIHVwZGF0ZWRWYWx1ZXMuYXV0aG9yaXphdGlvbl9lbmRwb2ludDtcbiAgICBhdXRob3JpdHlNZXRhZGF0YS50b2tlbl9lbmRwb2ludCA9IHVwZGF0ZWRWYWx1ZXMudG9rZW5fZW5kcG9pbnQ7XG4gICAgYXV0aG9yaXR5TWV0YWRhdGEuZW5kX3Nlc3Npb25fZW5kcG9pbnQgPSB1cGRhdGVkVmFsdWVzLmVuZF9zZXNzaW9uX2VuZHBvaW50O1xuICAgIGF1dGhvcml0eU1ldGFkYXRhLmlzc3VlciA9IHVwZGF0ZWRWYWx1ZXMuaXNzdWVyO1xuICAgIGF1dGhvcml0eU1ldGFkYXRhLmVuZHBvaW50c0Zyb21OZXR3b3JrID0gZnJvbU5ldHdvcms7XG4gICAgYXV0aG9yaXR5TWV0YWRhdGEuandrc191cmkgPSB1cGRhdGVkVmFsdWVzLmp3a3NfdXJpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YShcbiAgICBhdXRob3JpdHlNZXRhZGF0YTogQXV0aG9yaXR5TWV0YWRhdGFFbnRpdHksXG4gICAgdXBkYXRlZFZhbHVlczogQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YSxcbiAgICBmcm9tTmV0d29yazogYm9vbGVhblxuKTogdm9pZCB7XG4gICAgYXV0aG9yaXR5TWV0YWRhdGEuYWxpYXNlcyA9IHVwZGF0ZWRWYWx1ZXMuYWxpYXNlcztcbiAgICBhdXRob3JpdHlNZXRhZGF0YS5wcmVmZXJyZWRfY2FjaGUgPSB1cGRhdGVkVmFsdWVzLnByZWZlcnJlZF9jYWNoZTtcbiAgICBhdXRob3JpdHlNZXRhZGF0YS5wcmVmZXJyZWRfbmV0d29yayA9IHVwZGF0ZWRWYWx1ZXMucHJlZmVycmVkX25ldHdvcms7XG4gICAgYXV0aG9yaXR5TWV0YWRhdGEuYWxpYXNlc0Zyb21OZXR3b3JrID0gZnJvbU5ldHdvcms7XG59XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgZGF0YSBuZWVkcyB0byBiZSByZWZyZXNoZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQXV0aG9yaXR5TWV0YWRhdGFFeHBpcmVkKFxuICAgIG1ldGFkYXRhOiBBdXRob3JpdHlNZXRhZGF0YUVudGl0eVxuKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIG1ldGFkYXRhLmV4cGlyZXNBdCA8PSBUaW1lVXRpbHMubm93U2Vjb25kcygpO1xufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5leHBvcnQgY29uc3QgcmVkaXJlY3RVcmlFbXB0eSA9IFwicmVkaXJlY3RfdXJpX2VtcHR5XCI7XG5leHBvcnQgY29uc3QgY2xhaW1zUmVxdWVzdFBhcnNpbmdFcnJvciA9IFwiY2xhaW1zX3JlcXVlc3RfcGFyc2luZ19lcnJvclwiO1xuZXhwb3J0IGNvbnN0IGF1dGhvcml0eVVyaUluc2VjdXJlID0gXCJhdXRob3JpdHlfdXJpX2luc2VjdXJlXCI7XG5leHBvcnQgY29uc3QgdXJsUGFyc2VFcnJvciA9IFwidXJsX3BhcnNlX2Vycm9yXCI7XG5leHBvcnQgY29uc3QgdXJsRW1wdHlFcnJvciA9IFwiZW1wdHlfdXJsX2Vycm9yXCI7XG5leHBvcnQgY29uc3QgZW1wdHlJbnB1dFNjb3Blc0Vycm9yID0gXCJlbXB0eV9pbnB1dF9zY29wZXNfZXJyb3JcIjtcbmV4cG9ydCBjb25zdCBpbnZhbGlkUHJvbXB0VmFsdWUgPSBcImludmFsaWRfcHJvbXB0X3ZhbHVlXCI7XG5leHBvcnQgY29uc3QgaW52YWxpZENsYWltcyA9IFwiaW52YWxpZF9jbGFpbXNcIjtcbmV4cG9ydCBjb25zdCB0b2tlblJlcXVlc3RFbXB0eSA9IFwidG9rZW5fcmVxdWVzdF9lbXB0eVwiO1xuZXhwb3J0IGNvbnN0IGxvZ291dFJlcXVlc3RFbXB0eSA9IFwibG9nb3V0X3JlcXVlc3RfZW1wdHlcIjtcbmV4cG9ydCBjb25zdCBpbnZhbGlkQ29kZUNoYWxsZW5nZU1ldGhvZCA9IFwiaW52YWxpZF9jb2RlX2NoYWxsZW5nZV9tZXRob2RcIjtcbmV4cG9ydCBjb25zdCBwa2NlUGFyYW1zTWlzc2luZyA9IFwicGtjZV9wYXJhbXNfbWlzc2luZ1wiO1xuZXhwb3J0IGNvbnN0IGludmFsaWRDbG91ZERpc2NvdmVyeU1ldGFkYXRhID0gXCJpbnZhbGlkX2Nsb3VkX2Rpc2NvdmVyeV9tZXRhZGF0YVwiO1xuZXhwb3J0IGNvbnN0IGludmFsaWRBdXRob3JpdHlNZXRhZGF0YSA9IFwiaW52YWxpZF9hdXRob3JpdHlfbWV0YWRhdGFcIjtcbmV4cG9ydCBjb25zdCB1bnRydXN0ZWRBdXRob3JpdHkgPSBcInVudHJ1c3RlZF9hdXRob3JpdHlcIjtcbmV4cG9ydCBjb25zdCBtaXNzaW5nU3NoSndrID0gXCJtaXNzaW5nX3NzaF9qd2tcIjtcbmV4cG9ydCBjb25zdCBtaXNzaW5nU3NoS2lkID0gXCJtaXNzaW5nX3NzaF9raWRcIjtcbmV4cG9ydCBjb25zdCBtaXNzaW5nTm9uY2VBdXRoZW50aWNhdGlvbkhlYWRlciA9XG4gICAgXCJtaXNzaW5nX25vbmNlX2F1dGhlbnRpY2F0aW9uX2hlYWRlclwiO1xuZXhwb3J0IGNvbnN0IGludmFsaWRBdXRoZW50aWNhdGlvbkhlYWRlciA9IFwiaW52YWxpZF9hdXRoZW50aWNhdGlvbl9oZWFkZXJcIjtcbmV4cG9ydCBjb25zdCBjYW5ub3RTZXRPSURDT3B0aW9ucyA9IFwiY2Fubm90X3NldF9PSURDT3B0aW9uc1wiO1xuZXhwb3J0IGNvbnN0IGNhbm5vdEFsbG93UGxhdGZvcm1Ccm9rZXIgPSBcImNhbm5vdF9hbGxvd19wbGF0Zm9ybV9icm9rZXJcIjtcbmV4cG9ydCBjb25zdCBhdXRob3JpdHlNaXNtYXRjaCA9IFwiYXV0aG9yaXR5X21pc21hdGNoXCI7XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEF1dGhFcnJvciB9IGZyb20gXCIuL0F1dGhFcnJvci5qc1wiO1xuaW1wb3J0ICogYXMgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMgZnJvbSBcIi4vQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuanNcIjtcbmV4cG9ydCB7IENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzIH07XG5cbmV4cG9ydCBjb25zdCBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlcyA9IHtcbiAgICBbQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMucmVkaXJlY3RVcmlFbXB0eV06XG4gICAgICAgIFwiQSByZWRpcmVjdCBVUkkgaXMgcmVxdWlyZWQgZm9yIGFsbCBjYWxscywgYW5kIG5vbmUgaGFzIGJlZW4gc2V0LlwiLFxuICAgIFtDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5jbGFpbXNSZXF1ZXN0UGFyc2luZ0Vycm9yXTpcbiAgICAgICAgXCJDb3VsZCBub3QgcGFyc2UgdGhlIGdpdmVuIGNsYWltcyByZXF1ZXN0IG9iamVjdC5cIixcbiAgICBbQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuYXV0aG9yaXR5VXJpSW5zZWN1cmVdOlxuICAgICAgICBcIkF1dGhvcml0eSBVUklzIG11c3QgdXNlIGh0dHBzLiAgUGxlYXNlIHNlZSBoZXJlIGZvciB2YWxpZCBhdXRob3JpdHkgY29uZmlndXJhdGlvbiBvcHRpb25zOiBodHRwczovL2RvY3MubWljcm9zb2Z0LmNvbS9lbi11cy9henVyZS9hY3RpdmUtZGlyZWN0b3J5L2RldmVsb3AvbXNhbC1qcy1pbml0aWFsaXppbmctY2xpZW50LWFwcGxpY2F0aW9ucyNjb25maWd1cmF0aW9uLW9wdGlvbnNcIixcbiAgICBbQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMudXJsUGFyc2VFcnJvcl06XG4gICAgICAgIFwiVVJMIGNvdWxkIG5vdCBiZSBwYXJzZWQgaW50byBhcHByb3ByaWF0ZSBzZWdtZW50cy5cIixcbiAgICBbQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMudXJsRW1wdHlFcnJvcl06IFwiVVJMIHdhcyBlbXB0eSBvciBudWxsLlwiLFxuICAgIFtDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5lbXB0eUlucHV0U2NvcGVzRXJyb3JdOlxuICAgICAgICBcIlNjb3BlcyBjYW5ub3QgYmUgcGFzc2VkIGFzIG51bGwsIHVuZGVmaW5lZCBvciBlbXB0eSBhcnJheSBiZWNhdXNlIHRoZXkgYXJlIHJlcXVpcmVkIHRvIG9idGFpbiBhbiBhY2Nlc3MgdG9rZW4uXCIsXG4gICAgW0NsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmludmFsaWRQcm9tcHRWYWx1ZV06XG4gICAgICAgIFwiUGxlYXNlIHNlZSBoZXJlIGZvciB2YWxpZCBjb25maWd1cmF0aW9uIG9wdGlvbnM6IGh0dHBzOi8vYXp1cmVhZC5naXRodWIuaW8vbWljcm9zb2Z0LWF1dGhlbnRpY2F0aW9uLWxpYnJhcnktZm9yLWpzL3JlZi9tb2R1bGVzL19henVyZV9tc2FsX2NvbW1vbi5odG1sI2NvbW1vbmF1dGhvcml6YXRpb251cmxyZXF1ZXN0XCIsXG4gICAgW0NsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmludmFsaWRDbGFpbXNdOlxuICAgICAgICBcIkdpdmVuIGNsYWltcyBwYXJhbWV0ZXIgbXVzdCBiZSBhIHN0cmluZ2lmaWVkIEpTT04gb2JqZWN0LlwiLFxuICAgIFtDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy50b2tlblJlcXVlc3RFbXB0eV06XG4gICAgICAgIFwiVG9rZW4gcmVxdWVzdCB3YXMgZW1wdHkgYW5kIG5vdCBmb3VuZCBpbiBjYWNoZS5cIixcbiAgICBbQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMubG9nb3V0UmVxdWVzdEVtcHR5XTpcbiAgICAgICAgXCJUaGUgbG9nb3V0IHJlcXVlc3Qgd2FzIG51bGwgb3IgdW5kZWZpbmVkLlwiLFxuICAgIFtDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5pbnZhbGlkQ29kZUNoYWxsZW5nZU1ldGhvZF06XG4gICAgICAgICdjb2RlX2NoYWxsZW5nZV9tZXRob2QgcGFzc2VkIGlzIGludmFsaWQuIFZhbGlkIHZhbHVlcyBhcmUgXCJwbGFpblwiIGFuZCBcIlMyNTZcIi4nLFxuICAgIFtDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5wa2NlUGFyYW1zTWlzc2luZ106XG4gICAgICAgIFwiQm90aCBwYXJhbXM6IGNvZGVfY2hhbGxlbmdlIGFuZCBjb2RlX2NoYWxsZW5nZV9tZXRob2QgYXJlIHRvIGJlIHBhc3NlZCBpZiB0byBiZSBzZW50IGluIHRoZSByZXF1ZXN0XCIsXG4gICAgW0NsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmludmFsaWRDbG91ZERpc2NvdmVyeU1ldGFkYXRhXTpcbiAgICAgICAgXCJJbnZhbGlkIGNsb3VkRGlzY292ZXJ5TWV0YWRhdGEgcHJvdmlkZWQuIE11c3QgYmUgYSBzdHJpbmdpZmllZCBKU09OIG9iamVjdCBjb250YWluaW5nIHRlbmFudF9kaXNjb3ZlcnlfZW5kcG9pbnQgYW5kIG1ldGFkYXRhIGZpZWxkc1wiLFxuICAgIFtDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5pbnZhbGlkQXV0aG9yaXR5TWV0YWRhdGFdOlxuICAgICAgICBcIkludmFsaWQgYXV0aG9yaXR5TWV0YWRhdGEgcHJvdmlkZWQuIE11c3QgYnkgYSBzdHJpbmdpZmllZCBKU09OIG9iamVjdCBjb250YWluaW5nIGF1dGhvcml6YXRpb25fZW5kcG9pbnQsIHRva2VuX2VuZHBvaW50LCBpc3N1ZXIgZmllbGRzLlwiLFxuICAgIFtDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy51bnRydXN0ZWRBdXRob3JpdHldOlxuICAgICAgICBcIlRoZSBwcm92aWRlZCBhdXRob3JpdHkgaXMgbm90IGEgdHJ1c3RlZCBhdXRob3JpdHkuIFBsZWFzZSBpbmNsdWRlIHRoaXMgYXV0aG9yaXR5IGluIHRoZSBrbm93bkF1dGhvcml0aWVzIGNvbmZpZyBwYXJhbWV0ZXIuXCIsXG4gICAgW0NsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLm1pc3NpbmdTc2hKd2tdOlxuICAgICAgICBcIk1pc3Npbmcgc3NoSndrIGluIFNTSCBjZXJ0aWZpY2F0ZSByZXF1ZXN0LiBBIHN0cmluZ2lmaWVkIEpTT04gV2ViIEtleSBpcyByZXF1aXJlZCB3aGVuIHVzaW5nIHRoZSBTU0ggYXV0aGVudGljYXRpb24gc2NoZW1lLlwiLFxuICAgIFtDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5taXNzaW5nU3NoS2lkXTpcbiAgICAgICAgXCJNaXNzaW5nIHNzaEtpZCBpbiBTU0ggY2VydGlmaWNhdGUgcmVxdWVzdC4gQSBzdHJpbmcgdGhhdCB1bmlxdWVseSBpZGVudGlmaWVzIHRoZSBwdWJsaWMgU1NIIGtleSBpcyByZXF1aXJlZCB3aGVuIHVzaW5nIHRoZSBTU0ggYXV0aGVudGljYXRpb24gc2NoZW1lLlwiLFxuICAgIFtDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5taXNzaW5nTm9uY2VBdXRoZW50aWNhdGlvbkhlYWRlcl06XG4gICAgICAgIFwiVW5hYmxlIHRvIGZpbmQgYW4gYXV0aGVudGljYXRpb24gaGVhZGVyIGNvbnRhaW5pbmcgc2VydmVyIG5vbmNlLiBFaXRoZXIgdGhlIEF1dGhlbnRpY2F0aW9uLUluZm8gb3IgV1dXLUF1dGhlbnRpY2F0ZSBoZWFkZXJzIG11c3QgYmUgcHJlc2VudCBpbiBvcmRlciB0byBvYnRhaW4gYSBzZXJ2ZXIgbm9uY2UuXCIsXG4gICAgW0NsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmludmFsaWRBdXRoZW50aWNhdGlvbkhlYWRlcl06XG4gICAgICAgIFwiSW52YWxpZCBhdXRoZW50aWNhdGlvbiBoZWFkZXIgcHJvdmlkZWRcIixcbiAgICBbQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuY2Fubm90U2V0T0lEQ09wdGlvbnNdOlxuICAgICAgICBcIkNhbm5vdCBzZXQgT0lEQ09wdGlvbnMgcGFyYW1ldGVyLiBQbGVhc2UgY2hhbmdlIHRoZSBwcm90b2NvbCBtb2RlIHRvIE9JREMgb3IgdXNlIGEgbm9uLU1pY3Jvc29mdCBhdXRob3JpdHkuXCIsXG4gICAgW0NsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmNhbm5vdEFsbG93UGxhdGZvcm1Ccm9rZXJdOlxuICAgICAgICBcIkNhbm5vdCBzZXQgYWxsb3dQbGF0Zm9ybUJyb2tlciBwYXJhbWV0ZXIgdG8gdHJ1ZSB3aGVuIG5vdCBpbiBBQUQgcHJvdG9jb2wgbW9kZS5cIixcbiAgICBbQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuYXV0aG9yaXR5TWlzbWF0Y2hdOlxuICAgICAgICBcIkF1dGhvcml0eSBtaXNtYXRjaCBlcnJvci4gQXV0aG9yaXR5IHByb3ZpZGVkIGluIGxvZ2luIHJlcXVlc3Qgb3IgUHVibGljQ2xpZW50QXBwbGljYXRpb24gY29uZmlnIGRvZXMgbm90IG1hdGNoIHRoZSBlbnZpcm9ubWVudCBvZiB0aGUgcHJvdmlkZWQgYWNjb3VudC4gUGxlYXNlIHVzZSBhIG1hdGNoaW5nIGFjY291bnQgb3IgbWFrZSBhbiBpbnRlcmFjdGl2ZSByZXF1ZXN0IHRvIGxvZ2luIHRvIHRoaXMgYXV0aG9yaXR5LlwiLFxufTtcblxuLyoqXG4gKiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlIGNsYXNzIGNvbnRhaW5pbmcgc3RyaW5nIGNvbnN0YW50cyB1c2VkIGJ5IGVycm9yIGNvZGVzIGFuZCBtZXNzYWdlcy5cbiAqIEBkZXByZWNhdGVkIFVzZSBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2RlcyBpbnN0ZWFkXG4gKi9cbmV4cG9ydCBjb25zdCBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlID0ge1xuICAgIHJlZGlyZWN0VXJpTm90U2V0OiB7XG4gICAgICAgIGNvZGU6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLnJlZGlyZWN0VXJpRW1wdHksXG4gICAgICAgIGRlc2M6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMucmVkaXJlY3RVcmlFbXB0eVxuICAgICAgICBdLFxuICAgIH0sXG4gICAgY2xhaW1zUmVxdWVzdFBhcnNpbmdFcnJvcjoge1xuICAgICAgICBjb2RlOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5jbGFpbXNSZXF1ZXN0UGFyc2luZ0Vycm9yLFxuICAgICAgICBkZXNjOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmNsYWltc1JlcXVlc3RQYXJzaW5nRXJyb3JcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIGF1dGhvcml0eVVyaUluc2VjdXJlOiB7XG4gICAgICAgIGNvZGU6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmF1dGhvcml0eVVyaUluc2VjdXJlLFxuICAgICAgICBkZXNjOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmF1dGhvcml0eVVyaUluc2VjdXJlXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICB1cmxQYXJzZUVycm9yOiB7XG4gICAgICAgIGNvZGU6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLnVybFBhcnNlRXJyb3IsXG4gICAgICAgIGRlc2M6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMudXJsUGFyc2VFcnJvclxuICAgICAgICBdLFxuICAgIH0sXG4gICAgdXJsRW1wdHlFcnJvcjoge1xuICAgICAgICBjb2RlOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy51cmxFbXB0eUVycm9yLFxuICAgICAgICBkZXNjOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLnVybEVtcHR5RXJyb3JcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIGVtcHR5U2NvcGVzRXJyb3I6IHtcbiAgICAgICAgY29kZTogQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuZW1wdHlJbnB1dFNjb3Blc0Vycm9yLFxuICAgICAgICBkZXNjOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmVtcHR5SW5wdXRTY29wZXNFcnJvclxuICAgICAgICBdLFxuICAgIH0sXG4gICAgaW52YWxpZFByb21wdDoge1xuICAgICAgICBjb2RlOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5pbnZhbGlkUHJvbXB0VmFsdWUsXG4gICAgICAgIGRlc2M6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuaW52YWxpZFByb21wdFZhbHVlXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBpbnZhbGlkQ2xhaW1zUmVxdWVzdDoge1xuICAgICAgICBjb2RlOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5pbnZhbGlkQ2xhaW1zLFxuICAgICAgICBkZXNjOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmludmFsaWRDbGFpbXNcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIHRva2VuUmVxdWVzdEVtcHR5RXJyb3I6IHtcbiAgICAgICAgY29kZTogQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMudG9rZW5SZXF1ZXN0RW1wdHksXG4gICAgICAgIGRlc2M6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMudG9rZW5SZXF1ZXN0RW1wdHlcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIGxvZ291dFJlcXVlc3RFbXB0eUVycm9yOiB7XG4gICAgICAgIGNvZGU6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmxvZ291dFJlcXVlc3RFbXB0eSxcbiAgICAgICAgZGVzYzogQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yTWVzc2FnZXNbXG4gICAgICAgICAgICBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5sb2dvdXRSZXF1ZXN0RW1wdHlcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIGludmFsaWRDb2RlQ2hhbGxlbmdlTWV0aG9kOiB7XG4gICAgICAgIGNvZGU6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmludmFsaWRDb2RlQ2hhbGxlbmdlTWV0aG9kLFxuICAgICAgICBkZXNjOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmludmFsaWRDb2RlQ2hhbGxlbmdlTWV0aG9kXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBpbnZhbGlkQ29kZUNoYWxsZW5nZVBhcmFtczoge1xuICAgICAgICBjb2RlOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5wa2NlUGFyYW1zTWlzc2luZyxcbiAgICAgICAgZGVzYzogQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yTWVzc2FnZXNbXG4gICAgICAgICAgICBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5wa2NlUGFyYW1zTWlzc2luZ1xuICAgICAgICBdLFxuICAgIH0sXG4gICAgaW52YWxpZENsb3VkRGlzY292ZXJ5TWV0YWRhdGE6IHtcbiAgICAgICAgY29kZTogQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuaW52YWxpZENsb3VkRGlzY292ZXJ5TWV0YWRhdGEsXG4gICAgICAgIGRlc2M6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuaW52YWxpZENsb3VkRGlzY292ZXJ5TWV0YWRhdGFcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIGludmFsaWRBdXRob3JpdHlNZXRhZGF0YToge1xuICAgICAgICBjb2RlOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5pbnZhbGlkQXV0aG9yaXR5TWV0YWRhdGEsXG4gICAgICAgIGRlc2M6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuaW52YWxpZEF1dGhvcml0eU1ldGFkYXRhXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICB1bnRydXN0ZWRBdXRob3JpdHk6IHtcbiAgICAgICAgY29kZTogQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMudW50cnVzdGVkQXV0aG9yaXR5LFxuICAgICAgICBkZXNjOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLnVudHJ1c3RlZEF1dGhvcml0eVxuICAgICAgICBdLFxuICAgIH0sXG4gICAgbWlzc2luZ1NzaEp3azoge1xuICAgICAgICBjb2RlOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5taXNzaW5nU3NoSndrLFxuICAgICAgICBkZXNjOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLm1pc3NpbmdTc2hKd2tcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIG1pc3NpbmdTc2hLaWQ6IHtcbiAgICAgICAgY29kZTogQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMubWlzc2luZ1NzaEtpZCxcbiAgICAgICAgZGVzYzogQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yTWVzc2FnZXNbXG4gICAgICAgICAgICBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5taXNzaW5nU3NoS2lkXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBtaXNzaW5nTm9uY2VBdXRoZW50aWNhdGlvbkhlYWRlcjoge1xuICAgICAgICBjb2RlOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5taXNzaW5nTm9uY2VBdXRoZW50aWNhdGlvbkhlYWRlcixcbiAgICAgICAgZGVzYzogQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yTWVzc2FnZXNbXG4gICAgICAgICAgICBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5taXNzaW5nTm9uY2VBdXRoZW50aWNhdGlvbkhlYWRlclxuICAgICAgICBdLFxuICAgIH0sXG4gICAgaW52YWxpZEF1dGhlbnRpY2F0aW9uSGVhZGVyOiB7XG4gICAgICAgIGNvZGU6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmludmFsaWRBdXRoZW50aWNhdGlvbkhlYWRlcixcbiAgICAgICAgZGVzYzogQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yTWVzc2FnZXNbXG4gICAgICAgICAgICBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5pbnZhbGlkQXV0aGVudGljYXRpb25IZWFkZXJcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIGNhbm5vdFNldE9JRENPcHRpb25zOiB7XG4gICAgICAgIGNvZGU6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmNhbm5vdFNldE9JRENPcHRpb25zLFxuICAgICAgICBkZXNjOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmNhbm5vdFNldE9JRENPcHRpb25zXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBjYW5ub3RBbGxvd1BsYXRmb3JtQnJva2VyOiB7XG4gICAgICAgIGNvZGU6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmNhbm5vdEFsbG93UGxhdGZvcm1Ccm9rZXIsXG4gICAgICAgIGRlc2M6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuY2Fubm90QWxsb3dQbGF0Zm9ybUJyb2tlclxuICAgICAgICBdLFxuICAgIH0sXG4gICAgYXV0aG9yaXR5TWlzbWF0Y2g6IHtcbiAgICAgICAgY29kZTogQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuYXV0aG9yaXR5TWlzbWF0Y2gsXG4gICAgICAgIGRlc2M6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuYXV0aG9yaXR5TWlzbWF0Y2hcbiAgICAgICAgXSxcbiAgICB9LFxufTtcblxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiB0aGVyZSBpcyBhbiBlcnJvciBpbiBjb25maWd1cmF0aW9uIG9mIHRoZSBNU0FMLmpzIGxpYnJhcnkuXG4gKi9cbmV4cG9ydCBjbGFzcyBDbGllbnRDb25maWd1cmF0aW9uRXJyb3IgZXh0ZW5kcyBBdXRoRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKGVycm9yQ29kZTogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKGVycm9yQ29kZSwgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yTWVzc2FnZXNbZXJyb3JDb2RlXSk7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yXCI7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBDbGllbnRDb25maWd1cmF0aW9uRXJyb3IucHJvdG90eXBlKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDbGllbnRDb25maWd1cmF0aW9uRXJyb3IoXG4gICAgZXJyb3JDb2RlOiBzdHJpbmdcbik6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvciB7XG4gICAgcmV0dXJuIG5ldyBDbGllbnRDb25maWd1cmF0aW9uRXJyb3IoZXJyb3JDb2RlKTtcbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBTdHJpbmdVdGlscyB7XG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgc3RyaW5naWZpZWQgb2JqZWN0IGlzIGVtcHR5XG4gICAgICogQHBhcmFtIHN0ck9ialxuICAgICAqL1xuICAgIHN0YXRpYyBpc0VtcHR5T2JqKHN0ck9iaj86IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoc3RyT2JqKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9iaiA9IEpTT04ucGFyc2Uoc3RyT2JqKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5sZW5ndGggPT09IDA7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHN0YXRpYyBzdGFydHNXaXRoKHN0cjogc3RyaW5nLCBzZWFyY2g6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gc3RyLmluZGV4T2Yoc2VhcmNoKSA9PT0gMDtcbiAgICB9XG5cbiAgICBzdGF0aWMgZW5kc1dpdGgoc3RyOiBzdHJpbmcsIHNlYXJjaDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICBzdHIubGVuZ3RoID49IHNlYXJjaC5sZW5ndGggJiZcbiAgICAgICAgICAgIHN0ci5sYXN0SW5kZXhPZihzZWFyY2gpID09PSBzdHIubGVuZ3RoIC0gc2VhcmNoLmxlbmd0aFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBzdHJpbmcgaW50byBhbiBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcXVlcnlcbiAgICAgKi9cbiAgICBzdGF0aWMgcXVlcnlTdHJpbmdUb09iamVjdDxUPihxdWVyeTogc3RyaW5nKTogVCB7XG4gICAgICAgIGNvbnN0IG9iajoge30gPSB7fTtcbiAgICAgICAgY29uc3QgcGFyYW1zID0gcXVlcnkuc3BsaXQoXCImXCIpO1xuICAgICAgICBjb25zdCBkZWNvZGUgPSAoczogc3RyaW5nKSA9PiBkZWNvZGVVUklDb21wb25lbnQocy5yZXBsYWNlKC9cXCsvZywgXCIgXCIpKTtcbiAgICAgICAgcGFyYW1zLmZvckVhY2goKHBhaXIpID0+IHtcbiAgICAgICAgICAgIGlmIChwYWlyLnRyaW0oKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IHBhaXIuc3BsaXQoLz0oLispL2csIDIpOyAvLyBTcGxpdCBvbiB0aGUgZmlyc3Qgb2NjdXJlbmNlIG9mIHRoZSAnPScgY2hhcmFjdGVyXG4gICAgICAgICAgICAgICAgaWYgKGtleSAmJiB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBvYmpbZGVjb2RlKGtleSldID0gZGVjb2RlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gb2JqIGFzIFQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpbXMgZW50cmllcyBpbiBhbiBhcnJheS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhcnJcbiAgICAgKi9cbiAgICBzdGF0aWMgdHJpbUFycmF5RW50cmllcyhhcnI6IEFycmF5PHN0cmluZz4pOiBBcnJheTxzdHJpbmc+IHtcbiAgICAgICAgcmV0dXJuIGFyci5tYXAoKGVudHJ5KSA9PiBlbnRyeS50cmltKCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgZW1wdHkgc3RyaW5ncyBmcm9tIGFycmF5XG4gICAgICogQHBhcmFtIGFyclxuICAgICAqL1xuICAgIHN0YXRpYyByZW1vdmVFbXB0eVN0cmluZ3NGcm9tQXJyYXkoYXJyOiBBcnJheTxzdHJpbmc+KTogQXJyYXk8c3RyaW5nPiB7XG4gICAgICAgIHJldHVybiBhcnIuZmlsdGVyKChlbnRyeSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuICEhZW50cnk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEF0dGVtcHRzIHRvIHBhcnNlIGEgc3RyaW5nIGludG8gSlNPTlxuICAgICAqIEBwYXJhbSBzdHJcbiAgICAgKi9cbiAgICBzdGF0aWMganNvblBhcnNlSGVscGVyPFQ+KHN0cjogc3RyaW5nKTogVCB8IG51bGwge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2Uoc3RyKSBhcyBUO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRlc3RzIGlmIGEgZ2l2ZW4gc3RyaW5nIG1hdGNoZXMgYSBnaXZlbiBwYXR0ZXJuLCB3aXRoIHN1cHBvcnQgZm9yIHdpbGRjYXJkcyBhbmQgcXVlcmllcy5cbiAgICAgKiBAcGFyYW0gcGF0dGVybiBXaWxkY2FyZCBwYXR0ZXJuIHRvIHN0cmluZyBtYXRjaC4gU3VwcG9ydHMgXCIqXCIgZm9yIHdpbGRjYXJkcyBhbmQgXCI/XCIgZm9yIHF1ZXJpZXNcbiAgICAgKiBAcGFyYW0gaW5wdXQgU3RyaW5nIHRvIG1hdGNoIGFnYWluc3RcbiAgICAgKi9cbiAgICBzdGF0aWMgbWF0Y2hQYXR0ZXJuKHBhdHRlcm46IHN0cmluZywgaW5wdXQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICAvKipcbiAgICAgICAgICogV2lsZGNhcmQgc3VwcG9ydDogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzMxMTcyNDgvNDg4ODU1OVxuICAgICAgICAgKiBRdWVyaWVzOiByZXBsYWNlcyBcIj9cIiBpbiBzdHJpbmcgd2l0aCBlc2NhcGVkIFwiXFw/XCIgZm9yIHJlZ2V4IHRlc3RcbiAgICAgICAgICovXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBzZWN1cml0eS9kZXRlY3Qtbm9uLWxpdGVyYWwtcmVnZXhwXG4gICAgICAgIGNvbnN0IHJlZ2V4OiBSZWdFeHAgPSBuZXcgUmVnRXhwKFxuICAgICAgICAgICAgcGF0dGVyblxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXFxcL2csIFwiXFxcXFxcXFxcIilcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFwqL2csIFwiW14gXSpcIilcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFw/L2csIFwiXFxcXD9cIilcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gcmVnZXgudGVzdChpbnB1dCk7XG4gICAgfVxufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICAgIGNyZWF0ZUNsaWVudENvbmZpZ3VyYXRpb25FcnJvcixcbiAgICBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcyxcbn0gZnJvbSBcIi4uL2Vycm9yL0NsaWVudENvbmZpZ3VyYXRpb25FcnJvci5qc1wiO1xuaW1wb3J0IHsgU3RyaW5nVXRpbHMgfSBmcm9tIFwiLi4vdXRpbHMvU3RyaW5nVXRpbHMuanNcIjtcbmltcG9ydCB7XG4gICAgQ2xpZW50QXV0aEVycm9yQ29kZXMsXG4gICAgY3JlYXRlQ2xpZW50QXV0aEVycm9yLFxufSBmcm9tIFwiLi4vZXJyb3IvQ2xpZW50QXV0aEVycm9yLmpzXCI7XG5pbXBvcnQgeyBDb25zdGFudHMsIE9JRENfU0NPUEVTIH0gZnJvbSBcIi4uL3V0aWxzL0NvbnN0YW50cy5qc1wiO1xuXG4vKipcbiAqIFRoZSBTY29wZVNldCBjbGFzcyBjcmVhdGVzIGEgc2V0IG9mIHNjb3Blcy4gU2NvcGVzIGFyZSBjYXNlLWluc2Vuc2l0aXZlLCB1bmlxdWUgdmFsdWVzLCBzbyB0aGUgU2V0IG9iamVjdCBpbiBKUyBtYWtlc1xuICogdGhlIG1vc3Qgc2Vuc2UgdG8gaW1wbGVtZW50IGZvciB0aGlzIGNsYXNzLiBBbGwgc2NvcGVzIGFyZSB0cmltbWVkIGFuZCBjb252ZXJ0ZWQgdG8gbG93ZXIgY2FzZSBzdHJpbmdzIGluIGludGVyc2VjdGlvbiBhbmQgdW5pb24gZnVuY3Rpb25zXG4gKiB0byBlbnN1cmUgdW5pcXVlbmVzcyBvZiBzdHJpbmdzLlxuICovXG5leHBvcnQgY2xhc3MgU2NvcGVTZXQge1xuICAgIC8vIFNjb3BlcyBhcyBhIFNldCBvZiBzdHJpbmdzXG4gICAgcHJpdmF0ZSBzY29wZXM6IFNldDxzdHJpbmc+O1xuXG4gICAgY29uc3RydWN0b3IoaW5wdXRTY29wZXM6IEFycmF5PHN0cmluZz4pIHtcbiAgICAgICAgLy8gRmlsdGVyIGVtcHR5IHN0cmluZyBhbmQgbnVsbC91bmRlZmluZWQgYXJyYXkgaXRlbXNcbiAgICAgICAgY29uc3Qgc2NvcGVBcnIgPSBpbnB1dFNjb3Blc1xuICAgICAgICAgICAgPyBTdHJpbmdVdGlscy50cmltQXJyYXlFbnRyaWVzKFsuLi5pbnB1dFNjb3Blc10pXG4gICAgICAgICAgICA6IFtdO1xuICAgICAgICBjb25zdCBmaWx0ZXJlZElucHV0ID0gc2NvcGVBcnJcbiAgICAgICAgICAgID8gU3RyaW5nVXRpbHMucmVtb3ZlRW1wdHlTdHJpbmdzRnJvbUFycmF5KHNjb3BlQXJyKVxuICAgICAgICAgICAgOiBbXTtcblxuICAgICAgICAvLyBDaGVjayBpZiBzY29wZXMgYXJyYXkgaGFzIGF0IGxlYXN0IG9uZSBtZW1iZXJcbiAgICAgICAgaWYgKCFmaWx0ZXJlZElucHV0IHx8ICFmaWx0ZXJlZElucHV0Lmxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yKFxuICAgICAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmVtcHR5SW5wdXRTY29wZXNFcnJvclxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2NvcGVzID0gbmV3IFNldDxzdHJpbmc+KCk7IC8vIEl0ZXJhdG9yIGluIGNvbnN0cnVjdG9yIG5vdCBzdXBwb3J0ZWQgYnkgSUUxMVxuICAgICAgICBmaWx0ZXJlZElucHV0LmZvckVhY2goKHNjb3BlKSA9PiB0aGlzLnNjb3Blcy5hZGQoc2NvcGUpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGYWN0b3J5IG1ldGhvZCB0byBjcmVhdGUgU2NvcGVTZXQgZnJvbSBzcGFjZS1kZWxpbWl0ZWQgc3RyaW5nXG4gICAgICogQHBhcmFtIGlucHV0U2NvcGVTdHJpbmdcbiAgICAgKiBAcGFyYW0gYXBwQ2xpZW50SWRcbiAgICAgKiBAcGFyYW0gc2NvcGVzUmVxdWlyZWRcbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbVN0cmluZyhpbnB1dFNjb3BlU3RyaW5nOiBzdHJpbmcpOiBTY29wZVNldCB7XG4gICAgICAgIGNvbnN0IHNjb3BlU3RyaW5nID0gaW5wdXRTY29wZVN0cmluZyB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HO1xuICAgICAgICBjb25zdCBpbnB1dFNjb3BlczogQXJyYXk8c3RyaW5nPiA9IHNjb3BlU3RyaW5nLnNwbGl0KFwiIFwiKTtcbiAgICAgICAgcmV0dXJuIG5ldyBTY29wZVNldChpbnB1dFNjb3Blcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyB0aGUgc2V0IG9mIHNjb3BlcyB0byBzZWFyY2ggZm9yIGluIGNhY2hlIGxvb2t1cHNcbiAgICAgKiBAcGFyYW0gaW5wdXRTY29wZVN0cmluZ1xuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZVNlYXJjaFNjb3BlcyhpbnB1dFNjb3BlU3RyaW5nOiBBcnJheTxzdHJpbmc+KTogU2NvcGVTZXQge1xuICAgICAgICBjb25zdCBzY29wZVNldCA9IG5ldyBTY29wZVNldChpbnB1dFNjb3BlU3RyaW5nKTtcbiAgICAgICAgaWYgKCFzY29wZVNldC5jb250YWluc09ubHlPSURDU2NvcGVzKCkpIHtcbiAgICAgICAgICAgIHNjb3BlU2V0LnJlbW92ZU9JRENTY29wZXMoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNjb3BlU2V0LnJlbW92ZVNjb3BlKENvbnN0YW50cy5PRkZMSU5FX0FDQ0VTU19TQ09QRSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2NvcGVTZXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgYSBnaXZlbiBzY29wZSBpcyBwcmVzZW50IGluIHRoaXMgc2V0IG9mIHNjb3Blcy5cbiAgICAgKiBAcGFyYW0gc2NvcGVcbiAgICAgKi9cbiAgICBjb250YWluc1Njb3BlKHNjb3BlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgbG93ZXJDYXNlU2NvcGVzID0gdGhpcy5wcmludFNjb3Blc0xvd2VyQ2FzZSgpLnNwbGl0KFwiIFwiKTtcbiAgICAgICAgY29uc3QgbG93ZXJDYXNlU2NvcGVzU2V0ID0gbmV3IFNjb3BlU2V0KGxvd2VyQ2FzZVNjb3Blcyk7XG4gICAgICAgIC8vIGNvbXBhcmUgbG93ZXJjYXNlIHNjb3Blc1xuICAgICAgICByZXR1cm4gc2NvcGVcbiAgICAgICAgICAgID8gbG93ZXJDYXNlU2NvcGVzU2V0LnNjb3Blcy5oYXMoc2NvcGUudG9Mb3dlckNhc2UoKSlcbiAgICAgICAgICAgIDogZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgYSBzZXQgb2Ygc2NvcGVzIGlzIHByZXNlbnQgaW4gdGhpcyBzZXQgb2Ygc2NvcGVzLlxuICAgICAqIEBwYXJhbSBzY29wZVNldFxuICAgICAqL1xuICAgIGNvbnRhaW5zU2NvcGVTZXQoc2NvcGVTZXQ6IFNjb3BlU2V0KTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghc2NvcGVTZXQgfHwgc2NvcGVTZXQuc2NvcGVzLnNpemUgPD0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIHRoaXMuc2NvcGVzLnNpemUgPj0gc2NvcGVTZXQuc2NvcGVzLnNpemUgJiZcbiAgICAgICAgICAgIHNjb3BlU2V0LmFzQXJyYXkoKS5ldmVyeSgoc2NvcGUpID0+IHRoaXMuY29udGFpbnNTY29wZShzY29wZSkpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgc2V0IG9mIHNjb3BlcyBjb250YWlucyBvbmx5IHRoZSBkZWZhdWx0c1xuICAgICAqL1xuICAgIGNvbnRhaW5zT25seU9JRENTY29wZXMoKTogYm9vbGVhbiB7XG4gICAgICAgIGxldCBkZWZhdWx0U2NvcGVDb3VudCA9IDA7XG4gICAgICAgIE9JRENfU0NPUEVTLmZvckVhY2goKGRlZmF1bHRTY29wZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5jb250YWluc1Njb3BlKGRlZmF1bHRTY29wZSkpIHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0U2NvcGVDb3VudCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdGhpcy5zY29wZXMuc2l6ZSA9PT0gZGVmYXVsdFNjb3BlQ291bnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXBwZW5kcyBzaW5nbGUgc2NvcGUgaWYgcGFzc2VkXG4gICAgICogQHBhcmFtIG5ld1Njb3BlXG4gICAgICovXG4gICAgYXBwZW5kU2NvcGUobmV3U2NvcGU6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZiAobmV3U2NvcGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2NvcGVzLmFkZChuZXdTY29wZS50cmltKCkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXBwZW5kcyBtdWx0aXBsZSBzY29wZXMgaWYgcGFzc2VkXG4gICAgICogQHBhcmFtIG5ld1Njb3Blc1xuICAgICAqL1xuICAgIGFwcGVuZFNjb3BlcyhuZXdTY29wZXM6IEFycmF5PHN0cmluZz4pOiB2b2lkIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG5ld1Njb3Blcy5mb3JFYWNoKChuZXdTY29wZSkgPT4gdGhpcy5hcHBlbmRTY29wZShuZXdTY29wZSkpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuY2Fubm90QXBwZW5kU2NvcGVTZXRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGVsZW1lbnQgZnJvbSBzZXQgb2Ygc2NvcGVzLlxuICAgICAqIEBwYXJhbSBzY29wZVxuICAgICAqL1xuICAgIHJlbW92ZVNjb3BlKHNjb3BlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgaWYgKCFzY29wZSkge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKFxuICAgICAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLmNhbm5vdFJlbW92ZUVtcHR5U2NvcGVcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zY29wZXMuZGVsZXRlKHNjb3BlLnRyaW0oKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBkZWZhdWx0IHNjb3BlcyBmcm9tIHNldCBvZiBzY29wZXNcbiAgICAgKiBQcmltYXJpbHkgdXNlZCB0byBwcmV2ZW50IGNhY2hlIG1pc3NlcyBpZiB0aGUgZGVmYXVsdCBzY29wZXMgYXJlIG5vdCByZXR1cm5lZCBmcm9tIHRoZSBzZXJ2ZXJcbiAgICAgKi9cbiAgICByZW1vdmVPSURDU2NvcGVzKCk6IHZvaWQge1xuICAgICAgICBPSURDX1NDT1BFUy5mb3JFYWNoKChkZWZhdWx0U2NvcGU6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgdGhpcy5zY29wZXMuZGVsZXRlKGRlZmF1bHRTY29wZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbWJpbmVzIGFuIGFycmF5IG9mIHNjb3BlcyB3aXRoIHRoZSBjdXJyZW50IHNldCBvZiBzY29wZXMuXG4gICAgICogQHBhcmFtIG90aGVyU2NvcGVzXG4gICAgICovXG4gICAgdW5pb25TY29wZVNldHMob3RoZXJTY29wZXM6IFNjb3BlU2V0KTogU2V0PHN0cmluZz4ge1xuICAgICAgICBpZiAoIW90aGVyU2NvcGVzKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuZW1wdHlJbnB1dFNjb3BlU2V0XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVuaW9uU2NvcGVzID0gbmV3IFNldDxzdHJpbmc+KCk7IC8vIEl0ZXJhdG9yIGluIGNvbnN0cnVjdG9yIG5vdCBzdXBwb3J0ZWQgaW4gSUUxMVxuICAgICAgICBvdGhlclNjb3Blcy5zY29wZXMuZm9yRWFjaCgoc2NvcGUpID0+XG4gICAgICAgICAgICB1bmlvblNjb3Blcy5hZGQoc2NvcGUudG9Mb3dlckNhc2UoKSlcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5zY29wZXMuZm9yRWFjaCgoc2NvcGUpID0+IHVuaW9uU2NvcGVzLmFkZChzY29wZS50b0xvd2VyQ2FzZSgpKSk7XG4gICAgICAgIHJldHVybiB1bmlvblNjb3BlcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBzY29wZXMgaW50ZXJzZWN0IGJldHdlZW4gdGhpcyBzZXQgYW5kIGFub3RoZXIuXG4gICAgICogQHBhcmFtIG90aGVyU2NvcGVzXG4gICAgICovXG4gICAgaW50ZXJzZWN0aW5nU2NvcGVTZXRzKG90aGVyU2NvcGVzOiBTY29wZVNldCk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoIW90aGVyU2NvcGVzKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuZW1wdHlJbnB1dFNjb3BlU2V0XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRG8gbm90IGFsbG93IE9JREMgc2NvcGVzIHRvIGJlIHRoZSBvbmx5IGludGVyc2VjdGluZyBzY29wZXNcbiAgICAgICAgaWYgKCFvdGhlclNjb3Blcy5jb250YWluc09ubHlPSURDU2NvcGVzKCkpIHtcbiAgICAgICAgICAgIG90aGVyU2NvcGVzLnJlbW92ZU9JRENTY29wZXMoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1bmlvblNjb3BlcyA9IHRoaXMudW5pb25TY29wZVNldHMob3RoZXJTY29wZXMpO1xuICAgICAgICBjb25zdCBzaXplT3RoZXJTY29wZXMgPSBvdGhlclNjb3Blcy5nZXRTY29wZUNvdW50KCk7XG4gICAgICAgIGNvbnN0IHNpemVUaGlzU2NvcGVzID0gdGhpcy5nZXRTY29wZUNvdW50KCk7XG4gICAgICAgIGNvbnN0IHNpemVVbmlvblNjb3BlcyA9IHVuaW9uU2NvcGVzLnNpemU7XG4gICAgICAgIHJldHVybiBzaXplVW5pb25TY29wZXMgPCBzaXplVGhpc1Njb3BlcyArIHNpemVPdGhlclNjb3BlcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHNpemUgb2Ygc2V0IG9mIHNjb3Blcy5cbiAgICAgKi9cbiAgICBnZXRTY29wZUNvdW50KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjb3Blcy5zaXplO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHNjb3BlcyBhcyBhbiBhcnJheSBvZiBzdHJpbmcgdmFsdWVzXG4gICAgICovXG4gICAgYXNBcnJheSgpOiBBcnJheTxzdHJpbmc+IHtcbiAgICAgICAgY29uc3QgYXJyYXk6IEFycmF5PHN0cmluZz4gPSBbXTtcbiAgICAgICAgdGhpcy5zY29wZXMuZm9yRWFjaCgodmFsKSA9PiBhcnJheS5wdXNoKHZhbCkpO1xuICAgICAgICByZXR1cm4gYXJyYXk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHJpbnRzIHNjb3BlcyBpbnRvIGEgc3BhY2UtZGVsaW1pdGVkIHN0cmluZ1xuICAgICAqL1xuICAgIHByaW50U2NvcGVzKCk6IHN0cmluZyB7XG4gICAgICAgIGlmICh0aGlzLnNjb3Blcykge1xuICAgICAgICAgICAgY29uc3Qgc2NvcGVBcnIgPSB0aGlzLmFzQXJyYXkoKTtcbiAgICAgICAgICAgIHJldHVybiBzY29wZUFyci5qb2luKFwiIFwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQ29uc3RhbnRzLkVNUFRZX1NUUklORztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcmludHMgc2NvcGVzIGludG8gYSBzcGFjZS1kZWxpbWl0ZWQgbG93ZXItY2FzZSBzdHJpbmcgKHVzZWQgZm9yIGNhY2hpbmcpXG4gICAgICovXG4gICAgcHJpbnRTY29wZXNMb3dlckNhc2UoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpbnRTY29wZXMoKS50b0xvd2VyQ2FzZSgpO1xuICAgIH1cbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgICBjcmVhdGVDbGllbnRBdXRoRXJyb3IsXG4gICAgQ2xpZW50QXV0aEVycm9yQ29kZXMsXG59IGZyb20gXCIuLi9lcnJvci9DbGllbnRBdXRoRXJyb3IuanNcIjtcbmltcG9ydCB7IFNlcGFyYXRvcnMsIENvbnN0YW50cyB9IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcblxuLyoqXG4gKiBDbGllbnQgaW5mbyBvYmplY3Qgd2hpY2ggY29uc2lzdHMgb2YgdHdvIElEcy4gTmVlZCB0byBhZGQgbW9yZSBpbmZvIGhlcmUuXG4gKi9cbmV4cG9ydCB0eXBlIENsaWVudEluZm8gPSB7XG4gICAgdWlkOiBzdHJpbmc7XG4gICAgdXRpZDogc3RyaW5nO1xufTtcblxuLyoqXG4gKiBGdW5jdGlvbiB0byBidWlsZCBhIGNsaWVudCBpbmZvIG9iamVjdCBmcm9tIHNlcnZlciBjbGllbnRJbmZvIHN0cmluZ1xuICogQHBhcmFtIHJhd0NsaWVudEluZm9cbiAqIEBwYXJhbSBjcnlwdG9cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkQ2xpZW50SW5mbyhcbiAgICByYXdDbGllbnRJbmZvOiBzdHJpbmcsXG4gICAgYmFzZTY0RGVjb2RlOiAoaW5wdXQ6IHN0cmluZykgPT4gc3RyaW5nXG4pOiBDbGllbnRJbmZvIHtcbiAgICBpZiAoIXJhd0NsaWVudEluZm8pIHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvckNvZGVzLmNsaWVudEluZm9FbXB0eUVycm9yKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgICBjb25zdCBkZWNvZGVkQ2xpZW50SW5mbzogc3RyaW5nID0gYmFzZTY0RGVjb2RlKHJhd0NsaWVudEluZm8pO1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShkZWNvZGVkQ2xpZW50SW5mbykgYXMgQ2xpZW50SW5mbztcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihcbiAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLmNsaWVudEluZm9EZWNvZGluZ0Vycm9yXG4gICAgICAgICk7XG4gICAgfVxufVxuXG4vKipcbiAqIEZ1bmN0aW9uIHRvIGJ1aWxkIGEgY2xpZW50IGluZm8gb2JqZWN0IGZyb20gY2FjaGVkIGhvbWVBY2NvdW50SWQgc3RyaW5nXG4gKiBAcGFyYW0gaG9tZUFjY291bnRJZFxuICovXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRDbGllbnRJbmZvRnJvbUhvbWVBY2NvdW50SWQoXG4gICAgaG9tZUFjY291bnRJZDogc3RyaW5nXG4pOiBDbGllbnRJbmZvIHtcbiAgICBpZiAoIWhvbWVBY2NvdW50SWQpIHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKFxuICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuY2xpZW50SW5mb0RlY29kaW5nRXJyb3JcbiAgICAgICAgKTtcbiAgICB9XG4gICAgY29uc3QgY2xpZW50SW5mb1BhcnRzOiBzdHJpbmdbXSA9IGhvbWVBY2NvdW50SWQuc3BsaXQoXG4gICAgICAgIFNlcGFyYXRvcnMuQ0xJRU5UX0lORk9fU0VQQVJBVE9SLFxuICAgICAgICAyXG4gICAgKTtcbiAgICByZXR1cm4ge1xuICAgICAgICB1aWQ6IGNsaWVudEluZm9QYXJ0c1swXSxcbiAgICAgICAgdXRpZDpcbiAgICAgICAgICAgIGNsaWVudEluZm9QYXJ0cy5sZW5ndGggPCAyXG4gICAgICAgICAgICAgICAgPyBDb25zdGFudHMuRU1QVFlfU1RSSU5HXG4gICAgICAgICAgICAgICAgOiBjbGllbnRJbmZvUGFydHNbMV0sXG4gICAgfTtcbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgVG9rZW5DbGFpbXMgfSBmcm9tIFwiLi9Ub2tlbkNsYWltcy5qc1wiO1xuLyoqXG4gKiBBY2NvdW50IG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgc2lnbmF0dXJlOlxuICogLSBob21lQWNjb3VudElkICAgICAgICAgIC0gSG9tZSBhY2NvdW50IGlkZW50aWZpZXIgZm9yIHRoaXMgYWNjb3VudCBvYmplY3RcbiAqIC0gZW52aXJvbm1lbnQgICAgICAgICAgICAtIEVudGl0eSB3aGljaCBpc3N1ZWQgdGhlIHRva2VuIHJlcHJlc2VudGVkIGJ5IHRoZSBkb21haW4gb2YgdGhlIGlzc3VlciAoZS5nLiBsb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tKVxuICogLSB0ZW5hbnRJZCAgICAgICAgICAgICAgIC0gRnVsbCB0ZW5hbnQgb3Igb3JnYW5pemF0aW9uYWwgaWQgdGhhdCB0aGlzIGFjY291bnQgYmVsb25ncyB0b1xuICogLSB1c2VybmFtZSAgICAgICAgICAgICAgIC0gcHJlZmVycmVkX3VzZXJuYW1lIGNsYWltIG9mIHRoZSBpZF90b2tlbiB0aGF0IHJlcHJlc2VudHMgdGhpcyBhY2NvdW50XG4gKiAtIGxvY2FsQWNjb3VudElkICAgICAgICAgLSBMb2NhbCwgdGVuYW50LXNwZWNpZmljIGFjY291bnQgaWRlbnRpZmVyIGZvciB0aGlzIGFjY291bnQgb2JqZWN0LCB1c3VhbGx5IHVzZWQgaW4gbGVnYWN5IGNhc2VzXG4gKiAtIG5hbWUgICAgICAgICAgICAgICAgICAgLSBGdWxsIG5hbWUgZm9yIHRoZSBhY2NvdW50LCBpbmNsdWRpbmcgZ2l2ZW4gbmFtZSBhbmQgZmFtaWx5IG5hbWVcbiAqIC0gaWRUb2tlbiAgICAgICAgICAgICAgICAtIHJhdyBJRCB0b2tlblxuICogLSBpZFRva2VuQ2xhaW1zICAgICAgICAgIC0gT2JqZWN0IGNvbnRhaW5zIGNsYWltcyBmcm9tIElEIHRva2VuXG4gKiAtIG5hdGl2ZUFjY291bnRJZCAgICAgICAgLSBUaGUgdXNlcidzIG5hdGl2ZSBhY2NvdW50IElEXG4gKiAtIHRlbmFudFByb2ZpbGVzICAgICAgICAgLSBNYXAgb2YgdGVuYW50IHByb2ZpbGUgb2JqZWN0cyBmb3IgZWFjaCB0ZW5hbnQgdGhhdCB0aGUgYWNjb3VudCBoYXMgYXV0aGVudGljYXRlZCB3aXRoIGluIHRoZSBicm93c2VyXG4gKi9cbmV4cG9ydCB0eXBlIEFjY291bnRJbmZvID0ge1xuICAgIGhvbWVBY2NvdW50SWQ6IHN0cmluZztcbiAgICBlbnZpcm9ubWVudDogc3RyaW5nO1xuICAgIHRlbmFudElkOiBzdHJpbmc7XG4gICAgdXNlcm5hbWU6IHN0cmluZztcbiAgICBsb2NhbEFjY291bnRJZDogc3RyaW5nO1xuICAgIG5hbWU/OiBzdHJpbmc7XG4gICAgaWRUb2tlbj86IHN0cmluZztcbiAgICBpZFRva2VuQ2xhaW1zPzogVG9rZW5DbGFpbXMgJiB7XG4gICAgICAgIFtrZXk6IHN0cmluZ106XG4gICAgICAgICAgICB8IHN0cmluZ1xuICAgICAgICAgICAgfCBudW1iZXJcbiAgICAgICAgICAgIHwgc3RyaW5nW11cbiAgICAgICAgICAgIHwgb2JqZWN0XG4gICAgICAgICAgICB8IHVuZGVmaW5lZFxuICAgICAgICAgICAgfCB1bmtub3duO1xuICAgIH07XG4gICAgbmF0aXZlQWNjb3VudElkPzogc3RyaW5nO1xuICAgIGF1dGhvcml0eVR5cGU/OiBzdHJpbmc7XG4gICAgdGVuYW50UHJvZmlsZXM/OiBNYXA8c3RyaW5nLCBUZW5hbnRQcm9maWxlPjtcbn07XG5cbi8qKlxuICogQWNjb3VudCBkZXRhaWxzIHRoYXQgdmFyeSBhY3Jvc3MgdGVuYW50cyBmb3IgdGhlIHNhbWUgdXNlclxuICovXG5leHBvcnQgdHlwZSBUZW5hbnRQcm9maWxlID0gUGljazxcbiAgICBBY2NvdW50SW5mbyxcbiAgICBcInRlbmFudElkXCIgfCBcImxvY2FsQWNjb3VudElkXCIgfCBcIm5hbWVcIlxuPiAmIHtcbiAgICAvKipcbiAgICAgKiAtIGlzSG9tZVRlbmFudCAgICAgICAgICAgLSBUcnVlIGlmIHRoaXMgaXMgdGhlIGhvbWUgdGVuYW50IHByb2ZpbGUgb2YgdGhlIGFjY291bnQsIGZhbHNlIGlmIGl0J3MgYSBndWVzdCB0ZW5hbnQgcHJvZmlsZVxuICAgICAqL1xuICAgIGlzSG9tZVRlbmFudD86IGJvb2xlYW47XG59O1xuXG5leHBvcnQgdHlwZSBBY3RpdmVBY2NvdW50RmlsdGVycyA9IHtcbiAgICBob21lQWNjb3VudElkOiBzdHJpbmc7XG4gICAgbG9jYWxBY2NvdW50SWQ6IHN0cmluZztcbiAgICB0ZW5hbnRJZD86IHN0cmluZztcbn07XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRlbmFudElkIG1hdGNoZXMgdGhlIHV0aWQgcG9ydGlvbiBvZiBob21lQWNjb3VudElkXG4gKiBAcGFyYW0gdGVuYW50SWRcbiAqIEBwYXJhbSBob21lQWNjb3VudElkXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gdGVuYW50SWRNYXRjaGVzSG9tZVRlbmFudChcbiAgICB0ZW5hbnRJZD86IHN0cmluZyxcbiAgICBob21lQWNjb3VudElkPzogc3RyaW5nXG4pOiBib29sZWFuIHtcbiAgICByZXR1cm4gKFxuICAgICAgICAhIXRlbmFudElkICYmXG4gICAgICAgICEhaG9tZUFjY291bnRJZCAmJlxuICAgICAgICB0ZW5hbnRJZCA9PT0gaG9tZUFjY291bnRJZC5zcGxpdChcIi5cIilbMV1cbiAgICApO1xufVxuXG4vKipcbiAqIEJ1aWxkIHRlbmFudCBwcm9maWxlXG4gKiBAcGFyYW0gaG9tZUFjY291bnRJZCAtIEhvbWUgYWNjb3VudCBpZGVudGlmaWVyIGZvciB0aGlzIGFjY291bnQgb2JqZWN0XG4gKiBAcGFyYW0gbG9jYWxBY2NvdW50SWQgLSBMb2NhbCBhY2NvdW50IGlkZW50aWZlciBmb3IgdGhpcyBhY2NvdW50IG9iamVjdFxuICogQHBhcmFtIHRlbmFudElkIC0gRnVsbCB0ZW5hbnQgb3Igb3JnYW5pemF0aW9uYWwgaWQgdGhhdCB0aGlzIGFjY291bnQgYmVsb25ncyB0b1xuICogQHBhcmFtIGlkVG9rZW5DbGFpbXMgLSBDbGFpbXMgZnJvbSB0aGUgSUQgdG9rZW5cbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBidWlsZFRlbmFudFByb2ZpbGUoXG4gICAgaG9tZUFjY291bnRJZDogc3RyaW5nLFxuICAgIGxvY2FsQWNjb3VudElkOiBzdHJpbmcsXG4gICAgdGVuYW50SWQ6IHN0cmluZyxcbiAgICBpZFRva2VuQ2xhaW1zPzogVG9rZW5DbGFpbXNcbik6IFRlbmFudFByb2ZpbGUge1xuICAgIGlmIChpZFRva2VuQ2xhaW1zKSB7XG4gICAgICAgIGNvbnN0IHsgb2lkLCBzdWIsIHRpZCwgbmFtZSwgdGZwLCBhY3IgfSA9IGlkVG9rZW5DbGFpbXM7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNpbmNlIHRoZXJlIGlzIG5vIHdheSB0byBkZXRlcm1pbmUgaWYgdGhlIGF1dGhvcml0eSBpcyBBQUQgb3IgQjJDLCB3ZSBleGhhdXN0IGFsbCB0aGUgcG9zc2libGUgY2xhaW1zIHRoYXQgY2FuIHNlcnZlIGFzIHRlbmFudCBJRCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJlY2VkZW5jZTpcbiAgICAgICAgICogdGlkIC0gVGVuYW50SUQgY2xhaW0gdGhhdCBpZGVudGlmaWVzIHRoZSB0ZW5hbnQgdGhhdCBpc3N1ZWQgdGhlIHRva2VuIGluIEFBRC4gRXhwZWN0ZWQgaW4gYWxsIEFBRCBJRCB0b2tlbnMsIG5vdCBwcmVzZW50IGluIEIyQyBJRCBUb2tlbnMuXG4gICAgICAgICAqIHRmcCAtIFRydXN0IEZyYW1ld29yayBQb2xpY3kgY2xhaW0gdGhhdCBpZGVudGlmaWVzIHRoZSBwb2xpY3kgdGhhdCB3YXMgdXNlZCB0byBhdXRoZW50aWNhdGUgdGhlIHVzZXIuIEZ1bmN0aW9ucyBhcyB0ZW5hbnQgZm9yIEIyQyBzY2VuYXJpb3MuXG4gICAgICAgICAqIGFjciAtIEF1dGhlbnRpY2F0aW9uIENvbnRleHQgQ2xhc3MgUmVmZXJlbmNlIGNsYWltIHVzZWQgb25seSB3aXRoIG9sZGVyIEIyQyBwb2xpY2llcy4gRmFsbGJhY2sgaW4gY2FzZSB0ZnAgaXMgbm90IHByZXNlbnQsIGJ1dCBsaWtlbHkgd29uJ3QgYmUgcHJlc2VudCBhbnl3YXkuXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCB0ZW5hbnRJZCA9IHRpZCB8fCB0ZnAgfHwgYWNyIHx8IFwiXCI7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRlbmFudElkOiB0ZW5hbnRJZCxcbiAgICAgICAgICAgIGxvY2FsQWNjb3VudElkOiBvaWQgfHwgc3ViIHx8IFwiXCIsXG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgaXNIb21lVGVuYW50OiB0ZW5hbnRJZE1hdGNoZXNIb21lVGVuYW50KHRlbmFudElkLCBob21lQWNjb3VudElkKSxcbiAgICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGVuYW50SWQsXG4gICAgICAgICAgICBsb2NhbEFjY291bnRJZCxcbiAgICAgICAgICAgIGlzSG9tZVRlbmFudDogdGVuYW50SWRNYXRjaGVzSG9tZVRlbmFudCh0ZW5hbnRJZCwgaG9tZUFjY291bnRJZCksXG4gICAgICAgIH07XG4gICAgfVxufVxuXG4vKipcbiAqIFJlcGxhY2VzIGFjY291bnQgaW5mbyB0aGF0IHZhcmllcyBieSB0ZW5hbnQgcHJvZmlsZSBzb3VyY2VkIGZyb20gdGhlIElEIHRva2VuIGNsYWltcyBwYXNzZWQgaW4gd2l0aCB0aGUgdGVuYW50LXNwZWNpZmljIGFjY291bnQgaW5mb1xuICogQHBhcmFtIGJhc2VBY2NvdW50SW5mb1xuICogQHBhcmFtIGlkVG9rZW5DbGFpbXNcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVBY2NvdW50VGVuYW50UHJvZmlsZURhdGEoXG4gICAgYmFzZUFjY291bnRJbmZvOiBBY2NvdW50SW5mbyxcbiAgICB0ZW5hbnRQcm9maWxlPzogVGVuYW50UHJvZmlsZSxcbiAgICBpZFRva2VuQ2xhaW1zPzogVG9rZW5DbGFpbXMsXG4gICAgaWRUb2tlblNlY3JldD86IHN0cmluZ1xuKTogQWNjb3VudEluZm8ge1xuICAgIGxldCB1cGRhdGVkQWNjb3VudEluZm8gPSBiYXNlQWNjb3VudEluZm87XG4gICAgLy8gVGVuYW50IFByb2ZpbGUgb3ZlcnJpZGVzIHBhc3NlZCBpbiBhY2NvdW50IGluZm9cbiAgICBpZiAodGVuYW50UHJvZmlsZSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgICAgIGNvbnN0IHsgaXNIb21lVGVuYW50LCAuLi50ZW5hbnRQcm9maWxlT3ZlcnJpZGUgfSA9IHRlbmFudFByb2ZpbGU7XG4gICAgICAgIHVwZGF0ZWRBY2NvdW50SW5mbyA9IHsgLi4uYmFzZUFjY291bnRJbmZvLCAuLi50ZW5hbnRQcm9maWxlT3ZlcnJpZGUgfTtcbiAgICB9XG5cbiAgICAvLyBJRCB0b2tlbiBjbGFpbXMgb3ZlcnJpZGUgcGFzc2VkIGluIGFjY291bnQgaW5mbyBhbmQgdGVuYW50IHByb2ZpbGVcbiAgICBpZiAoaWRUb2tlbkNsYWltcykge1xuICAgICAgICAvLyBJZ25vcmUgaXNIb21lVGVuYW50LCBsb2dpbkhpbnQsIGFuZCBzaWQgd2hpY2ggYXJlIHBhcnQgb2YgdGVuYW50IHByb2ZpbGUgYnV0IG5vdCBiYXNlIGFjY291bnQgaW5mb1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgICAgIGNvbnN0IHsgaXNIb21lVGVuYW50LCAuLi5jbGFpbXNTb3VyY2VkVGVuYW50UHJvZmlsZSB9ID1cbiAgICAgICAgICAgIGJ1aWxkVGVuYW50UHJvZmlsZShcbiAgICAgICAgICAgICAgICBiYXNlQWNjb3VudEluZm8uaG9tZUFjY291bnRJZCxcbiAgICAgICAgICAgICAgICBiYXNlQWNjb3VudEluZm8ubG9jYWxBY2NvdW50SWQsXG4gICAgICAgICAgICAgICAgYmFzZUFjY291bnRJbmZvLnRlbmFudElkLFxuICAgICAgICAgICAgICAgIGlkVG9rZW5DbGFpbXNcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgdXBkYXRlZEFjY291bnRJbmZvID0ge1xuICAgICAgICAgICAgLi4udXBkYXRlZEFjY291bnRJbmZvLFxuICAgICAgICAgICAgLi4uY2xhaW1zU291cmNlZFRlbmFudFByb2ZpbGUsXG4gICAgICAgICAgICBpZFRva2VuQ2xhaW1zOiBpZFRva2VuQ2xhaW1zLFxuICAgICAgICAgICAgaWRUb2tlbjogaWRUb2tlblNlY3JldCxcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gdXBkYXRlZEFjY291bnRJbmZvO1xuICAgIH1cblxuICAgIHJldHVybiB1cGRhdGVkQWNjb3VudEluZm87XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQXV0aG9yaXR5IHR5cGVzIHN1cHBvcnRlZCBieSBNU0FMLlxuICovXG5leHBvcnQgY29uc3QgQXV0aG9yaXR5VHlwZSA9IHtcbiAgICBEZWZhdWx0OiAwLFxuICAgIEFkZnM6IDEsXG4gICAgRHN0czogMixcbiAgICBDaWFtOiAzLFxufSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIEF1dGhvcml0eVR5cGUgPSAodHlwZW9mIEF1dGhvcml0eVR5cGUpW2tleW9mIHR5cGVvZiBBdXRob3JpdHlUeXBlXTtcbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBUeXBlIHdoaWNoIGRlc2NyaWJlcyBJZCBUb2tlbiBjbGFpbXMga25vd24gYnkgTVNBTC5cbiAqL1xuZXhwb3J0IHR5cGUgVG9rZW5DbGFpbXMgPSB7XG4gICAgLyoqXG4gICAgICogQXVkaWVuY2VcbiAgICAgKi9cbiAgICBhdWQ/OiBzdHJpbmc7XG4gICAgLyoqXG4gICAgICogSXNzdWVyXG4gICAgICovXG4gICAgaXNzPzogc3RyaW5nO1xuICAgIC8qKlxuICAgICAqIElzc3VlZCBhdFxuICAgICAqL1xuICAgIGlhdD86IG51bWJlcjtcbiAgICAvKipcbiAgICAgKiBOb3QgdmFsaWQgYmVmb3JlXG4gICAgICovXG4gICAgbmJmPzogbnVtYmVyO1xuICAgIC8qKlxuICAgICAqIEltbXV0YWJsZSBvYmplY3QgaWRlbnRpZmllciwgdGhpcyBJRCB1bmlxdWVseSBpZGVudGlmaWVzIHRoZSB1c2VyIGFjcm9zcyBhcHBsaWNhdGlvbnNcbiAgICAgKi9cbiAgICBvaWQ/OiBzdHJpbmc7XG4gICAgLyoqXG4gICAgICogSW1tdXRhYmxlIHN1YmplY3QgaWRlbnRpZmllciwgdGhpcyBpcyBhIHBhaXJ3aXNlIGlkZW50aWZpZXIgLSBpdCBpcyB1bmlxdWUgdG8gYSBwYXJ0aWN1bGFyIGFwcGxpY2F0aW9uIElEXG4gICAgICovXG4gICAgc3ViPzogc3RyaW5nO1xuICAgIC8qKlxuICAgICAqIFVzZXJzJyB0ZW5hbnQgb3IgJzkxODgwNDBkLTZjNjctNGM1Yi1iMTEyLTM2YTMwNGI2NmRhZCcgZm9yIHBlcnNvbmFsIGFjY291bnRzLlxuICAgICAqL1xuICAgIHRpZD86IHN0cmluZztcbiAgICAvKipcbiAgICAgKiBUcnVzdGVkIEZyYW1ld29yayBQb2xpY3kgKEIyQykgVGhlIG5hbWUgb2YgdGhlIHBvbGljeSB0aGF0IHdhcyB1c2VkIHRvIGFjcXVpcmUgdGhlIElEIHRva2VuLlxuICAgICAqL1xuICAgIHRmcD86IHN0cmluZztcbiAgICAvKipcbiAgICAgKiBBdXRoZW50aWNhdGlvbiBDb250ZXh0IENsYXNzIFJlZmVyZW5jZSAoQjJDKSBVc2VkIG9ubHkgd2l0aCBvbGRlciBwb2xpY2llcy5cbiAgICAgKi9cbiAgICBhY3I/OiBzdHJpbmc7XG4gICAgdmVyPzogc3RyaW5nO1xuICAgIHVwbj86IHN0cmluZztcbiAgICBwcmVmZXJyZWRfdXNlcm5hbWU/OiBzdHJpbmc7XG4gICAgbG9naW5faGludD86IHN0cmluZztcbiAgICBlbWFpbHM/OiBzdHJpbmdbXTtcbiAgICBuYW1lPzogc3RyaW5nO1xuICAgIG5vbmNlPzogc3RyaW5nO1xuICAgIC8qKlxuICAgICAqIEV4cGlyYXRpb25cbiAgICAgKi9cbiAgICBleHA/OiBudW1iZXI7XG4gICAgaG9tZV9vaWQ/OiBzdHJpbmc7XG4gICAgc2lkPzogc3RyaW5nO1xuICAgIGNsb3VkX2luc3RhbmNlX2hvc3RfbmFtZT86IHN0cmluZztcbiAgICBjbmY/OiB7XG4gICAgICAgIGtpZDogc3RyaW5nO1xuICAgIH07XG4gICAgeDVjX2NhPzogc3RyaW5nW107XG4gICAgdHM/OiBudW1iZXI7XG4gICAgYXQ/OiBzdHJpbmc7XG4gICAgdT86IHN0cmluZztcbiAgICBwPzogc3RyaW5nO1xuICAgIG0/OiBzdHJpbmc7XG4gICAgcm9sZXM/OiBzdHJpbmdbXTtcbiAgICBhbXI/OiBzdHJpbmdbXTtcbiAgICBpZHA/OiBzdHJpbmc7XG4gICAgYXV0aF90aW1lPzogbnVtYmVyO1xuICAgIC8qKlxuICAgICAqIFx0UmVnaW9uIG9mIHRoZSByZXNvdXJjZSB0ZW5hbnRcbiAgICAgKi9cbiAgICB0ZW5hbnRfcmVnaW9uX3Njb3BlPzogc3RyaW5nO1xuICAgIHRlbmFudF9yZWdpb25fc3ViX3Njb3BlPzogc3RyaW5nO1xufTtcblxuLyoqXG4gKiBHZXRzIHRlbmFudElkIGZyb20gYXZhaWxhYmxlIElEIHRva2VuIGNsYWltcyB0byBzZXQgYXMgY3JlZGVudGlhbCByZWFsbSB3aXRoIHRoZSBmb2xsb3dpbmcgcHJlY2VkZW5jZTpcbiAqIDEuIHRpZCAtIGlmIHRoZSB0b2tlbiBpcyBhY3F1aXJlZCBmcm9tIGFuIEF6dXJlIEFEIHRlbmFudCB0aWQgd2lsbCBiZSBwcmVzZW50XG4gKiAyLiB0ZnAgLSBpZiB0aGUgdG9rZW4gaXMgYWNxdWlyZWQgZnJvbSBhIG1vZGVybiBCMkMgdGVuYW50IHRmcCBzaG91bGQgYmUgcHJlc2VudFxuICogMy4gYWNyIC0gaWYgdGhlIHRva2VuIGlzIGFjcXVpcmVkIGZyb20gYSBsZWdhY3kgQjJDIHRlbmFudCBhY3Igc2hvdWxkIGJlIHByZXNlbnRcbiAqIERvd25jYXNlZCB0byBtYXRjaCB0aGUgcmVhbG0gY2FzZS1pbnNlbnNpdGl2ZSBjb21wYXJpc29uIHJlcXVpcmVtZW50c1xuICogQHBhcmFtIGlkVG9rZW5DbGFpbXNcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUZW5hbnRJZEZyb21JZFRva2VuQ2xhaW1zKFxuICAgIGlkVG9rZW5DbGFpbXM/OiBUb2tlbkNsYWltc1xuKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgaWYgKGlkVG9rZW5DbGFpbXMpIHtcbiAgICAgICAgY29uc3QgdGVuYW50SWQgPVxuICAgICAgICAgICAgaWRUb2tlbkNsYWltcy50aWQgfHwgaWRUb2tlbkNsYWltcy50ZnAgfHwgaWRUb2tlbkNsYWltcy5hY3I7XG4gICAgICAgIHJldHVybiB0ZW5hbnRJZCB8fCBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBQcm90b2NvbCBtb2RlcyBzdXBwb3J0ZWQgYnkgTVNBTC5cbiAqL1xuZXhwb3J0IGNvbnN0IFByb3RvY29sTW9kZSA9IHtcbiAgICAvKipcbiAgICAgKiBBdXRoIENvZGUgKyBQS0NFIHdpdGggRW50cmEgSUQgKGZvcm1lcmx5IEFBRCkgc3BlY2lmaWMgb3B0aW1pemF0aW9ucyBhbmQgZmVhdHVyZXNcbiAgICAgKi9cbiAgICBBQUQ6IFwiQUFEXCIsXG4gICAgLyoqXG4gICAgICogQXV0aCBDb2RlICsgUEtDRSB3aXRob3V0IEVudHJhIElEIHNwZWNpZmljIG9wdGltaXphdGlvbnMgYW5kIGZlYXR1cmVzLiBGb3IgdXNlIG9ubHkgd2l0aCBub24tTWljcm9zb2Z0IG93bmVkIGF1dGhvcml0aWVzLlxuICAgICAqIFN1cHBvcnQgaXMgbGltaXRlZCBmb3IgdGhpcyBtb2RlLlxuICAgICAqL1xuICAgIE9JREM6IFwiT0lEQ1wiLFxuICAgIC8qKlxuICAgICAqIEVuY3J5cHRlZCBBdXRob3JpemUgUmVzcG9uc2UgKEVBUikgd2l0aCBFbnRyYSBJRCBzcGVjaWZpYyBvcHRpbWl6YXRpb25zIGFuZCBmZWF0dXJlc1xuICAgICAqL1xuICAgIEVBUjogXCJFQVJcIixcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBQcm90b2NvbE1vZGUgPSAodHlwZW9mIFByb3RvY29sTW9kZSlba2V5b2YgdHlwZW9mIFByb3RvY29sTW9kZV07XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENhY2hlQWNjb3VudFR5cGUsIFNlcGFyYXRvcnMgfSBmcm9tIFwiLi4vLi4vdXRpbHMvQ29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBBdXRob3JpdHkgfSBmcm9tIFwiLi4vLi4vYXV0aG9yaXR5L0F1dGhvcml0eS5qc1wiO1xuaW1wb3J0IHsgSUNyeXB0byB9IGZyb20gXCIuLi8uLi9jcnlwdG8vSUNyeXB0by5qc1wiO1xuaW1wb3J0IHsgQ2xpZW50SW5mbywgYnVpbGRDbGllbnRJbmZvIH0gZnJvbSBcIi4uLy4uL2FjY291bnQvQ2xpZW50SW5mby5qc1wiO1xuaW1wb3J0IHtcbiAgICBBY2NvdW50SW5mbyxcbiAgICBUZW5hbnRQcm9maWxlLFxuICAgIGJ1aWxkVGVuYW50UHJvZmlsZSxcbn0gZnJvbSBcIi4uLy4uL2FjY291bnQvQWNjb3VudEluZm8uanNcIjtcbmltcG9ydCB7XG4gICAgY3JlYXRlQ2xpZW50QXV0aEVycm9yLFxuICAgIENsaWVudEF1dGhFcnJvckNvZGVzLFxufSBmcm9tIFwiLi4vLi4vZXJyb3IvQ2xpZW50QXV0aEVycm9yLmpzXCI7XG5pbXBvcnQgeyBBdXRob3JpdHlUeXBlIH0gZnJvbSBcIi4uLy4uL2F1dGhvcml0eS9BdXRob3JpdHlUeXBlLmpzXCI7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiLi4vLi4vbG9nZ2VyL0xvZ2dlci5qc1wiO1xuaW1wb3J0IHtcbiAgICBUb2tlbkNsYWltcyxcbiAgICBnZXRUZW5hbnRJZEZyb21JZFRva2VuQ2xhaW1zLFxufSBmcm9tIFwiLi4vLi4vYWNjb3VudC9Ub2tlbkNsYWltcy5qc1wiO1xuaW1wb3J0IHsgUHJvdG9jb2xNb2RlIH0gZnJvbSBcIi4uLy4uL2F1dGhvcml0eS9Qcm90b2NvbE1vZGUuanNcIjtcblxuLyoqXG4gKiBUeXBlIHRoYXQgZGVmaW5lcyByZXF1aXJlZCBhbmQgb3B0aW9uYWwgcGFyYW1ldGVycyBmb3IgYW4gQWNjb3VudCBmaWVsZCAoYmFzZWQgb24gdW5pdmVyc2FsIGNhY2hlIHNjaGVtYSBpbXBsZW1lbnRlZCBieSBhbGwgTVNBTHMpLlxuICpcbiAqIEtleSA6IFZhbHVlIFNjaGVtYVxuICpcbiAqIEtleTogPGhvbWVfYWNjb3VudF9pZD4tPGVudmlyb25tZW50Pi08cmVhbG0qPlxuICpcbiAqIFZhbHVlIFNjaGVtYTpcbiAqIHtcbiAqICAgICAgaG9tZUFjY291bnRJZDogaG9tZSBhY2NvdW50IGlkZW50aWZpZXIgZm9yIHRoZSBhdXRoIHNjaGVtZSxcbiAqICAgICAgZW52aXJvbm1lbnQ6IGVudGl0eSB0aGF0IGlzc3VlZCB0aGUgdG9rZW4sIHJlcHJlc2VudGVkIGFzIGEgZnVsbCBob3N0XG4gKiAgICAgIHJlYWxtOiBGdWxsIHRlbmFudCBvciBvcmdhbml6YXRpb25hbCBpZGVudGlmaWVyIHRoYXQgdGhlIGFjY291bnQgYmVsb25ncyB0b1xuICogICAgICBsb2NhbEFjY291bnRJZDogT3JpZ2luYWwgdGVuYW50LXNwZWNpZmljIGFjY291bnRJRCwgdXN1YWxseSB1c2VkIGZvciBsZWdhY3kgY2FzZXNcbiAqICAgICAgdXNlcm5hbWU6IHByaW1hcnkgdXNlcm5hbWUgdGhhdCByZXByZXNlbnRzIHRoZSB1c2VyLCB1c3VhbGx5IGNvcnJlc3BvbmRzIHRvIHByZWZlcnJlZF91c2VybmFtZSBpbiB0aGUgdjIgZW5kcHRcbiAqICAgICAgYXV0aG9yaXR5VHlwZTogQWNjb3VudHMgYXV0aG9yaXR5IHR5cGUgYXMgYSBzdHJpbmdcbiAqICAgICAgbmFtZTogRnVsbCBuYW1lIGZvciB0aGUgYWNjb3VudCwgaW5jbHVkaW5nIGdpdmVuIG5hbWUgYW5kIGZhbWlseSBuYW1lLFxuICogICAgICBsYXN0TW9kaWZpY2F0aW9uVGltZTogbGFzdCB0aW1lIHRoaXMgZW50aXR5IHdhcyBtb2RpZmllZCBpbiB0aGUgY2FjaGVcbiAqICAgICAgbGFzdE1vZGlmaWNhdGlvbkFwcDpcbiAqICAgICAgbmF0aXZlQWNjb3VudElkOiBBY2NvdW50IGlkZW50aWZpZXIgb24gdGhlIG5hdGl2ZSBkZXZpY2VcbiAqICAgICAgdGVuYW50UHJvZmlsZXM6IEFycmF5IG9mIHRlbmFudCBwcm9maWxlIG9iamVjdHMgZm9yIGVhY2ggdGVuYW50IHRoYXQgdGhlIGFjY291bnQgaGFzIGF1dGhlbnRpY2F0ZWQgd2l0aCBpbiB0aGUgYnJvd3NlclxuICogfVxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBjbGFzcyBBY2NvdW50RW50aXR5IHtcbiAgICBob21lQWNjb3VudElkOiBzdHJpbmc7XG4gICAgZW52aXJvbm1lbnQ6IHN0cmluZztcbiAgICByZWFsbTogc3RyaW5nO1xuICAgIGxvY2FsQWNjb3VudElkOiBzdHJpbmc7XG4gICAgdXNlcm5hbWU6IHN0cmluZztcbiAgICBhdXRob3JpdHlUeXBlOiBzdHJpbmc7XG4gICAgY2xpZW50SW5mbz86IHN0cmluZztcbiAgICBuYW1lPzogc3RyaW5nO1xuICAgIGxhc3RNb2RpZmljYXRpb25UaW1lPzogc3RyaW5nO1xuICAgIGxhc3RNb2RpZmljYXRpb25BcHA/OiBzdHJpbmc7XG4gICAgY2xvdWRHcmFwaEhvc3ROYW1lPzogc3RyaW5nO1xuICAgIG1zR3JhcGhIb3N0Pzogc3RyaW5nO1xuICAgIG5hdGl2ZUFjY291bnRJZD86IHN0cmluZztcbiAgICB0ZW5hbnRQcm9maWxlcz86IEFycmF5PFRlbmFudFByb2ZpbGU+O1xuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGUgQWNjb3VudCBJZCBrZXkgY29tcG9uZW50IGFzIHBlciB0aGUgc2NoZW1hOiA8aG9tZV9hY2NvdW50X2lkPi08ZW52aXJvbm1lbnQ+XG4gICAgICovXG4gICAgZ2VuZXJhdGVBY2NvdW50SWQoKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgYWNjb3VudElkOiBBcnJheTxzdHJpbmc+ID0gW3RoaXMuaG9tZUFjY291bnRJZCwgdGhpcy5lbnZpcm9ubWVudF07XG4gICAgICAgIHJldHVybiBhY2NvdW50SWQuam9pbihTZXBhcmF0b3JzLkNBQ0hFX0tFWV9TRVBBUkFUT1IpLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGUgQWNjb3VudCBDYWNoZSBLZXkgYXMgcGVyIHRoZSBzY2hlbWE6IDxob21lX2FjY291bnRfaWQ+LTxlbnZpcm9ubWVudD4tPHJlYWxtKj5cbiAgICAgKi9cbiAgICBnZW5lcmF0ZUFjY291bnRLZXkoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIEFjY291bnRFbnRpdHkuZ2VuZXJhdGVBY2NvdW50Q2FjaGVLZXkoe1xuICAgICAgICAgICAgaG9tZUFjY291bnRJZDogdGhpcy5ob21lQWNjb3VudElkLFxuICAgICAgICAgICAgZW52aXJvbm1lbnQ6IHRoaXMuZW52aXJvbm1lbnQsXG4gICAgICAgICAgICB0ZW5hbnRJZDogdGhpcy5yZWFsbSxcbiAgICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLnVzZXJuYW1lLFxuICAgICAgICAgICAgbG9jYWxBY2NvdW50SWQ6IHRoaXMubG9jYWxBY2NvdW50SWQsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIEFjY291bnRJbmZvIGludGVyZmFjZSBmb3IgdGhpcyBhY2NvdW50LlxuICAgICAqL1xuICAgIGdldEFjY291bnRJbmZvKCk6IEFjY291bnRJbmZvIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGhvbWVBY2NvdW50SWQ6IHRoaXMuaG9tZUFjY291bnRJZCxcbiAgICAgICAgICAgIGVudmlyb25tZW50OiB0aGlzLmVudmlyb25tZW50LFxuICAgICAgICAgICAgdGVuYW50SWQ6IHRoaXMucmVhbG0sXG4gICAgICAgICAgICB1c2VybmFtZTogdGhpcy51c2VybmFtZSxcbiAgICAgICAgICAgIGxvY2FsQWNjb3VudElkOiB0aGlzLmxvY2FsQWNjb3VudElkLFxuICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgbmF0aXZlQWNjb3VudElkOiB0aGlzLm5hdGl2ZUFjY291bnRJZCxcbiAgICAgICAgICAgIGF1dGhvcml0eVR5cGU6IHRoaXMuYXV0aG9yaXR5VHlwZSxcbiAgICAgICAgICAgIC8vIERlc2VyaWFsaXplIHRlbmFudCBwcm9maWxlcyBhcnJheSBpbnRvIGEgTWFwXG4gICAgICAgICAgICB0ZW5hbnRQcm9maWxlczogbmV3IE1hcChcbiAgICAgICAgICAgICAgICAodGhpcy50ZW5hbnRQcm9maWxlcyB8fCBbXSkubWFwKCh0ZW5hbnRQcm9maWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbdGVuYW50UHJvZmlsZS50ZW5hbnRJZCwgdGVuYW50UHJvZmlsZV07XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICksXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBhY2NvdW50IGVudGl0eSBpcyBpbiBzaW5nbGUgdGVuYW50IGZvcm1hdCAob3V0ZGF0ZWQpLCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKi9cbiAgICBpc1NpbmdsZVRlbmFudCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLnRlbmFudFByb2ZpbGVzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBhY2NvdW50IGtleSBmcm9tIGludGVyZmFjZVxuICAgICAqIEBwYXJhbSBhY2NvdW50SW50ZXJmYWNlXG4gICAgICovXG4gICAgc3RhdGljIGdlbmVyYXRlQWNjb3VudENhY2hlS2V5KGFjY291bnRJbnRlcmZhY2U6IEFjY291bnRJbmZvKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgaG9tZVRlbmFudElkID0gYWNjb3VudEludGVyZmFjZS5ob21lQWNjb3VudElkLnNwbGl0KFwiLlwiKVsxXTtcbiAgICAgICAgY29uc3QgYWNjb3VudEtleSA9IFtcbiAgICAgICAgICAgIGFjY291bnRJbnRlcmZhY2UuaG9tZUFjY291bnRJZCxcbiAgICAgICAgICAgIGFjY291bnRJbnRlcmZhY2UuZW52aXJvbm1lbnQgfHwgXCJcIixcbiAgICAgICAgICAgIGhvbWVUZW5hbnRJZCB8fCBhY2NvdW50SW50ZXJmYWNlLnRlbmFudElkIHx8IFwiXCIsXG4gICAgICAgIF07XG5cbiAgICAgICAgcmV0dXJuIGFjY291bnRLZXkuam9pbihTZXBhcmF0b3JzLkNBQ0hFX0tFWV9TRVBBUkFUT1IpLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQnVpbGQgQWNjb3VudCBjYWNoZSBmcm9tIElkVG9rZW4sIGNsaWVudEluZm8gYW5kIGF1dGhvcml0eS9wb2xpY3kuIEFzc29jaWF0ZWQgd2l0aCBBQUQuXG4gICAgICogQHBhcmFtIGFjY291bnREZXRhaWxzXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZUFjY291bnQoXG4gICAgICAgIGFjY291bnREZXRhaWxzOiB7XG4gICAgICAgICAgICBob21lQWNjb3VudElkOiBzdHJpbmc7XG4gICAgICAgICAgICBpZFRva2VuQ2xhaW1zPzogVG9rZW5DbGFpbXM7XG4gICAgICAgICAgICBjbGllbnRJbmZvPzogc3RyaW5nO1xuICAgICAgICAgICAgY2xvdWRHcmFwaEhvc3ROYW1lPzogc3RyaW5nO1xuICAgICAgICAgICAgbXNHcmFwaEhvc3Q/OiBzdHJpbmc7XG4gICAgICAgICAgICBlbnZpcm9ubWVudD86IHN0cmluZztcbiAgICAgICAgICAgIG5hdGl2ZUFjY291bnRJZD86IHN0cmluZztcbiAgICAgICAgICAgIHRlbmFudFByb2ZpbGVzPzogQXJyYXk8VGVuYW50UHJvZmlsZT47XG4gICAgICAgIH0sXG4gICAgICAgIGF1dGhvcml0eTogQXV0aG9yaXR5LFxuICAgICAgICBiYXNlNjREZWNvZGU/OiAoaW5wdXQ6IHN0cmluZykgPT4gc3RyaW5nXG4gICAgKTogQWNjb3VudEVudGl0eSB7XG4gICAgICAgIGNvbnN0IGFjY291bnQ6IEFjY291bnRFbnRpdHkgPSBuZXcgQWNjb3VudEVudGl0eSgpO1xuXG4gICAgICAgIGlmIChhdXRob3JpdHkuYXV0aG9yaXR5VHlwZSA9PT0gQXV0aG9yaXR5VHlwZS5BZGZzKSB7XG4gICAgICAgICAgICBhY2NvdW50LmF1dGhvcml0eVR5cGUgPSBDYWNoZUFjY291bnRUeXBlLkFERlNfQUNDT1VOVF9UWVBFO1xuICAgICAgICB9IGVsc2UgaWYgKGF1dGhvcml0eS5wcm90b2NvbE1vZGUgPT09IFByb3RvY29sTW9kZS5PSURDKSB7XG4gICAgICAgICAgICBhY2NvdW50LmF1dGhvcml0eVR5cGUgPSBDYWNoZUFjY291bnRUeXBlLkdFTkVSSUNfQUNDT1VOVF9UWVBFO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYWNjb3VudC5hdXRob3JpdHlUeXBlID0gQ2FjaGVBY2NvdW50VHlwZS5NU1NUU19BQ0NPVU5UX1RZUEU7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY2xpZW50SW5mbzogQ2xpZW50SW5mbyB8IHVuZGVmaW5lZDtcblxuICAgICAgICBpZiAoYWNjb3VudERldGFpbHMuY2xpZW50SW5mbyAmJiBiYXNlNjREZWNvZGUpIHtcbiAgICAgICAgICAgIGNsaWVudEluZm8gPSBidWlsZENsaWVudEluZm8oXG4gICAgICAgICAgICAgICAgYWNjb3VudERldGFpbHMuY2xpZW50SW5mbyxcbiAgICAgICAgICAgICAgICBiYXNlNjREZWNvZGVcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBhY2NvdW50LmNsaWVudEluZm8gPSBhY2NvdW50RGV0YWlscy5jbGllbnRJbmZvO1xuICAgICAgICBhY2NvdW50LmhvbWVBY2NvdW50SWQgPSBhY2NvdW50RGV0YWlscy5ob21lQWNjb3VudElkO1xuICAgICAgICBhY2NvdW50Lm5hdGl2ZUFjY291bnRJZCA9IGFjY291bnREZXRhaWxzLm5hdGl2ZUFjY291bnRJZDtcblxuICAgICAgICBjb25zdCBlbnYgPVxuICAgICAgICAgICAgYWNjb3VudERldGFpbHMuZW52aXJvbm1lbnQgfHxcbiAgICAgICAgICAgIChhdXRob3JpdHkgJiYgYXV0aG9yaXR5LmdldFByZWZlcnJlZENhY2hlKCkpO1xuXG4gICAgICAgIGlmICghZW52KSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZENhY2hlRW52aXJvbm1lbnRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBhY2NvdW50LmVudmlyb25tZW50ID0gZW52O1xuICAgICAgICAvLyBub24gQUFEIHNjZW5hcmlvcyBjYW4gaGF2ZSBlbXB0eSByZWFsbVxuICAgICAgICBhY2NvdW50LnJlYWxtID1cbiAgICAgICAgICAgIGNsaWVudEluZm8/LnV0aWQgfHxcbiAgICAgICAgICAgIGdldFRlbmFudElkRnJvbUlkVG9rZW5DbGFpbXMoYWNjb3VudERldGFpbHMuaWRUb2tlbkNsYWltcykgfHxcbiAgICAgICAgICAgIFwiXCI7XG5cbiAgICAgICAgLy8gSG93IGRvIHlvdSBhY2NvdW50IGZvciBNU0EgQ0lEIGhlcmU/XG4gICAgICAgIGFjY291bnQubG9jYWxBY2NvdW50SWQgPVxuICAgICAgICAgICAgY2xpZW50SW5mbz8udWlkIHx8XG4gICAgICAgICAgICBhY2NvdW50RGV0YWlscy5pZFRva2VuQ2xhaW1zPy5vaWQgfHxcbiAgICAgICAgICAgIGFjY291bnREZXRhaWxzLmlkVG9rZW5DbGFpbXM/LnN1YiB8fFxuICAgICAgICAgICAgXCJcIjtcblxuICAgICAgICAvKlxuICAgICAgICAgKiBJbiBCMkMgc2NlbmFyaW9zIHRoZSBlbWFpbHMgY2xhaW0gaXMgdXNlZCBpbnN0ZWFkIG9mIHByZWZlcnJlZF91c2VybmFtZSBhbmQgaXQgaXMgYW4gYXJyYXkuXG4gICAgICAgICAqIEluIG1vc3QgY2FzZXMgaXQgd2lsbCBjb250YWluIGEgc2luZ2xlIGVtYWlsLiBUaGlzIGZpZWxkIHNob3VsZCBub3QgYmUgcmVsaWVkIHVwb24gaWYgYSBjdXN0b21cbiAgICAgICAgICogcG9saWN5IGlzIGNvbmZpZ3VyZWQgdG8gcmV0dXJuIG1vcmUgdGhhbiAxIGVtYWlsLlxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3QgcHJlZmVycmVkVXNlcm5hbWUgPVxuICAgICAgICAgICAgYWNjb3VudERldGFpbHMuaWRUb2tlbkNsYWltcz8ucHJlZmVycmVkX3VzZXJuYW1lIHx8XG4gICAgICAgICAgICBhY2NvdW50RGV0YWlscy5pZFRva2VuQ2xhaW1zPy51cG47XG4gICAgICAgIGNvbnN0IGVtYWlsID0gYWNjb3VudERldGFpbHMuaWRUb2tlbkNsYWltcz8uZW1haWxzXG4gICAgICAgICAgICA/IGFjY291bnREZXRhaWxzLmlkVG9rZW5DbGFpbXMuZW1haWxzWzBdXG4gICAgICAgICAgICA6IG51bGw7XG5cbiAgICAgICAgYWNjb3VudC51c2VybmFtZSA9IHByZWZlcnJlZFVzZXJuYW1lIHx8IGVtYWlsIHx8IFwiXCI7XG4gICAgICAgIGFjY291bnQubmFtZSA9IGFjY291bnREZXRhaWxzLmlkVG9rZW5DbGFpbXM/Lm5hbWUgfHwgXCJcIjtcblxuICAgICAgICBhY2NvdW50LmNsb3VkR3JhcGhIb3N0TmFtZSA9IGFjY291bnREZXRhaWxzLmNsb3VkR3JhcGhIb3N0TmFtZTtcbiAgICAgICAgYWNjb3VudC5tc0dyYXBoSG9zdCA9IGFjY291bnREZXRhaWxzLm1zR3JhcGhIb3N0O1xuXG4gICAgICAgIGlmIChhY2NvdW50RGV0YWlscy50ZW5hbnRQcm9maWxlcykge1xuICAgICAgICAgICAgYWNjb3VudC50ZW5hbnRQcm9maWxlcyA9IGFjY291bnREZXRhaWxzLnRlbmFudFByb2ZpbGVzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdGVuYW50UHJvZmlsZSA9IGJ1aWxkVGVuYW50UHJvZmlsZShcbiAgICAgICAgICAgICAgICBhY2NvdW50RGV0YWlscy5ob21lQWNjb3VudElkLFxuICAgICAgICAgICAgICAgIGFjY291bnQubG9jYWxBY2NvdW50SWQsXG4gICAgICAgICAgICAgICAgYWNjb3VudC5yZWFsbSxcbiAgICAgICAgICAgICAgICBhY2NvdW50RGV0YWlscy5pZFRva2VuQ2xhaW1zXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgYWNjb3VudC50ZW5hbnRQcm9maWxlcyA9IFt0ZW5hbnRQcm9maWxlXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhY2NvdW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gQWNjb3VudEVudGl0eSBvYmplY3QgZnJvbSBBY2NvdW50SW5mb1xuICAgICAqIEBwYXJhbSBhY2NvdW50SW5mb1xuICAgICAqIEBwYXJhbSBjbG91ZEdyYXBoSG9zdE5hbWVcbiAgICAgKiBAcGFyYW0gbXNHcmFwaEhvc3RcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVGcm9tQWNjb3VudEluZm8oXG4gICAgICAgIGFjY291bnRJbmZvOiBBY2NvdW50SW5mbyxcbiAgICAgICAgY2xvdWRHcmFwaEhvc3ROYW1lPzogc3RyaW5nLFxuICAgICAgICBtc0dyYXBoSG9zdD86IHN0cmluZ1xuICAgICk6IEFjY291bnRFbnRpdHkge1xuICAgICAgICBjb25zdCBhY2NvdW50OiBBY2NvdW50RW50aXR5ID0gbmV3IEFjY291bnRFbnRpdHkoKTtcblxuICAgICAgICBhY2NvdW50LmF1dGhvcml0eVR5cGUgPVxuICAgICAgICAgICAgYWNjb3VudEluZm8uYXV0aG9yaXR5VHlwZSB8fCBDYWNoZUFjY291bnRUeXBlLkdFTkVSSUNfQUNDT1VOVF9UWVBFO1xuICAgICAgICBhY2NvdW50LmhvbWVBY2NvdW50SWQgPSBhY2NvdW50SW5mby5ob21lQWNjb3VudElkO1xuICAgICAgICBhY2NvdW50LmxvY2FsQWNjb3VudElkID0gYWNjb3VudEluZm8ubG9jYWxBY2NvdW50SWQ7XG4gICAgICAgIGFjY291bnQubmF0aXZlQWNjb3VudElkID0gYWNjb3VudEluZm8ubmF0aXZlQWNjb3VudElkO1xuXG4gICAgICAgIGFjY291bnQucmVhbG0gPSBhY2NvdW50SW5mby50ZW5hbnRJZDtcbiAgICAgICAgYWNjb3VudC5lbnZpcm9ubWVudCA9IGFjY291bnRJbmZvLmVudmlyb25tZW50O1xuXG4gICAgICAgIGFjY291bnQudXNlcm5hbWUgPSBhY2NvdW50SW5mby51c2VybmFtZTtcbiAgICAgICAgYWNjb3VudC5uYW1lID0gYWNjb3VudEluZm8ubmFtZTtcblxuICAgICAgICBhY2NvdW50LmNsb3VkR3JhcGhIb3N0TmFtZSA9IGNsb3VkR3JhcGhIb3N0TmFtZTtcbiAgICAgICAgYWNjb3VudC5tc0dyYXBoSG9zdCA9IG1zR3JhcGhIb3N0O1xuICAgICAgICAvLyBTZXJpYWxpemUgdGVuYW50IHByb2ZpbGVzIG1hcCBpbnRvIGFuIGFycmF5XG4gICAgICAgIGFjY291bnQudGVuYW50UHJvZmlsZXMgPSBBcnJheS5mcm9tKFxuICAgICAgICAgICAgYWNjb3VudEluZm8udGVuYW50UHJvZmlsZXM/LnZhbHVlcygpIHx8IFtdXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIGFjY291bnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGUgSG9tZUFjY291bnRJZCBmcm9tIHNlcnZlciByZXNwb25zZVxuICAgICAqIEBwYXJhbSBzZXJ2ZXJDbGllbnRJbmZvXG4gICAgICogQHBhcmFtIGF1dGhUeXBlXG4gICAgICovXG4gICAgc3RhdGljIGdlbmVyYXRlSG9tZUFjY291bnRJZChcbiAgICAgICAgc2VydmVyQ2xpZW50SW5mbzogc3RyaW5nLFxuICAgICAgICBhdXRoVHlwZTogQXV0aG9yaXR5VHlwZSxcbiAgICAgICAgbG9nZ2VyOiBMb2dnZXIsXG4gICAgICAgIGNyeXB0b09iajogSUNyeXB0byxcbiAgICAgICAgaWRUb2tlbkNsYWltcz86IFRva2VuQ2xhaW1zXG4gICAgKTogc3RyaW5nIHtcbiAgICAgICAgLy8gc2luY2UgQURGUy9EU1RTIGRvIG5vdCBoYXZlIHRpZCBhbmQgZG9lcyBub3Qgc2V0IGNsaWVudF9pbmZvXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICEoXG4gICAgICAgICAgICAgICAgYXV0aFR5cGUgPT09IEF1dGhvcml0eVR5cGUuQWRmcyB8fFxuICAgICAgICAgICAgICAgIGF1dGhUeXBlID09PSBBdXRob3JpdHlUeXBlLkRzdHNcbiAgICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBmb3IgY2FzZXMgd2hlcmUgdGhlcmUgaXMgY2xpZW50SW5mb1xuICAgICAgICAgICAgaWYgKHNlcnZlckNsaWVudEluZm8pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjbGllbnRJbmZvID0gYnVpbGRDbGllbnRJbmZvKFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyQ2xpZW50SW5mbyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyeXB0b09iai5iYXNlNjREZWNvZGVcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNsaWVudEluZm8udWlkICYmIGNsaWVudEluZm8udXRpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGAke2NsaWVudEluZm8udWlkfS4ke2NsaWVudEluZm8udXRpZH1gO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxvZ2dlci53YXJuaW5nKFwiTm8gY2xpZW50IGluZm8gaW4gcmVzcG9uc2VcIik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBkZWZhdWx0IHRvIFwic3ViXCIgY2xhaW1cbiAgICAgICAgcmV0dXJuIGlkVG9rZW5DbGFpbXM/LnN1YiB8fCBcIlwiO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlcyBhbiBlbnRpdHk6IGNoZWNrcyBmb3IgYWxsIGV4cGVjdGVkIHBhcmFtc1xuICAgICAqIEBwYXJhbSBlbnRpdHlcbiAgICAgKi9cbiAgICBzdGF0aWMgaXNBY2NvdW50RW50aXR5KGVudGl0eTogb2JqZWN0KTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghZW50aXR5KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgZW50aXR5Lmhhc093blByb3BlcnR5KFwiaG9tZUFjY291bnRJZFwiKSAmJlxuICAgICAgICAgICAgZW50aXR5Lmhhc093blByb3BlcnR5KFwiZW52aXJvbm1lbnRcIikgJiZcbiAgICAgICAgICAgIGVudGl0eS5oYXNPd25Qcm9wZXJ0eShcInJlYWxtXCIpICYmXG4gICAgICAgICAgICBlbnRpdHkuaGFzT3duUHJvcGVydHkoXCJsb2NhbEFjY291bnRJZFwiKSAmJlxuICAgICAgICAgICAgZW50aXR5Lmhhc093blByb3BlcnR5KFwidXNlcm5hbWVcIikgJiZcbiAgICAgICAgICAgIGVudGl0eS5oYXNPd25Qcm9wZXJ0eShcImF1dGhvcml0eVR5cGVcIilcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIHdoZXRoZXIgMiBhY2NvdW50SW5mbyBvYmplY3RzIHJlcHJlc2VudCB0aGUgc2FtZSBhY2NvdW50XG4gICAgICogQHBhcmFtIGFjY291bnRBXG4gICAgICogQHBhcmFtIGFjY291bnRCXG4gICAgICogQHBhcmFtIGNvbXBhcmVDbGFpbXMgLSBJZiBzZXQgdG8gdHJ1ZSBpZFRva2VuQ2xhaW1zIHdpbGwgYWxzbyBiZSBjb21wYXJlZCB0byBkZXRlcm1pbmUgYWNjb3VudCBlcXVhbGl0eVxuICAgICAqL1xuICAgIHN0YXRpYyBhY2NvdW50SW5mb0lzRXF1YWwoXG4gICAgICAgIGFjY291bnRBOiBBY2NvdW50SW5mbyB8IG51bGwsXG4gICAgICAgIGFjY291bnRCOiBBY2NvdW50SW5mbyB8IG51bGwsXG4gICAgICAgIGNvbXBhcmVDbGFpbXM/OiBib29sZWFuXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghYWNjb3VudEEgfHwgIWFjY291bnRCKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY2xhaW1zTWF0Y2ggPSB0cnVlOyAvLyBkZWZhdWx0IHRvIHRydWUgc28gYXMgdG8gbm90IGZhaWwgY29tcGFyaXNvbiBiZWxvdyBpZiBjb21wYXJlQ2xhaW1zOiBmYWxzZVxuICAgICAgICBpZiAoY29tcGFyZUNsYWltcykge1xuICAgICAgICAgICAgY29uc3QgYWNjb3VudEFDbGFpbXMgPSAoYWNjb3VudEEuaWRUb2tlbkNsYWltcyB8fFxuICAgICAgICAgICAgICAgIHt9KSBhcyBUb2tlbkNsYWltcztcbiAgICAgICAgICAgIGNvbnN0IGFjY291bnRCQ2xhaW1zID0gKGFjY291bnRCLmlkVG9rZW5DbGFpbXMgfHxcbiAgICAgICAgICAgICAgICB7fSkgYXMgVG9rZW5DbGFpbXM7XG5cbiAgICAgICAgICAgIC8vIGlzc3VlZCBhdCB0aW1lc3RhbXAgYW5kIG5vbmNlIGFyZSBleHBlY3RlZCB0byBjaGFuZ2UgZWFjaCB0aW1lIGEgbmV3IGlkIHRva2VuIGlzIGFjcXVpcmVkXG4gICAgICAgICAgICBjbGFpbXNNYXRjaCA9XG4gICAgICAgICAgICAgICAgYWNjb3VudEFDbGFpbXMuaWF0ID09PSBhY2NvdW50QkNsYWltcy5pYXQgJiZcbiAgICAgICAgICAgICAgICBhY2NvdW50QUNsYWltcy5ub25jZSA9PT0gYWNjb3VudEJDbGFpbXMubm9uY2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgYWNjb3VudEEuaG9tZUFjY291bnRJZCA9PT0gYWNjb3VudEIuaG9tZUFjY291bnRJZCAmJlxuICAgICAgICAgICAgYWNjb3VudEEubG9jYWxBY2NvdW50SWQgPT09IGFjY291bnRCLmxvY2FsQWNjb3VudElkICYmXG4gICAgICAgICAgICBhY2NvdW50QS51c2VybmFtZSA9PT0gYWNjb3VudEIudXNlcm5hbWUgJiZcbiAgICAgICAgICAgIGFjY291bnRBLnRlbmFudElkID09PSBhY2NvdW50Qi50ZW5hbnRJZCAmJlxuICAgICAgICAgICAgYWNjb3VudEEuZW52aXJvbm1lbnQgPT09IGFjY291bnRCLmVudmlyb25tZW50ICYmXG4gICAgICAgICAgICBhY2NvdW50QS5uYXRpdmVBY2NvdW50SWQgPT09IGFjY291bnRCLm5hdGl2ZUFjY291bnRJZCAmJlxuICAgICAgICAgICAgY2xhaW1zTWF0Y2hcbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEF1dGhvcml6ZVJlc3BvbnNlIH0gZnJvbSBcIi4uL3Jlc3BvbnNlL0F1dGhvcml6ZVJlc3BvbnNlLmpzXCI7XG5pbXBvcnQge1xuICAgIENsaWVudEF1dGhFcnJvckNvZGVzLFxuICAgIGNyZWF0ZUNsaWVudEF1dGhFcnJvcixcbn0gZnJvbSBcIi4uL2Vycm9yL0NsaWVudEF1dGhFcnJvci5qc1wiO1xuXG4vKipcbiAqIFBhcnNlcyBoYXNoIHN0cmluZyBmcm9tIGdpdmVuIHN0cmluZy4gUmV0dXJucyBlbXB0eSBzdHJpbmcgaWYgbm8gaGFzaCBzeW1ib2wgaXMgZm91bmQuXG4gKiBAcGFyYW0gaGFzaFN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gc3RyaXBMZWFkaW5nSGFzaE9yUXVlcnkocmVzcG9uc2VTdHJpbmc6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKHJlc3BvbnNlU3RyaW5nLnN0YXJ0c1dpdGgoXCIjL1wiKSkge1xuICAgICAgICByZXR1cm4gcmVzcG9uc2VTdHJpbmcuc3Vic3RyaW5nKDIpO1xuICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIHJlc3BvbnNlU3RyaW5nLnN0YXJ0c1dpdGgoXCIjXCIpIHx8XG4gICAgICAgIHJlc3BvbnNlU3RyaW5nLnN0YXJ0c1dpdGgoXCI/XCIpXG4gICAgKSB7XG4gICAgICAgIHJldHVybiByZXNwb25zZVN0cmluZy5zdWJzdHJpbmcoMSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3BvbnNlU3RyaW5nO1xufVxuXG4vKipcbiAqIFJldHVybnMgVVJMIGhhc2ggYXMgc2VydmVyIGF1dGggY29kZSByZXNwb25zZSBvYmplY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREZXNlcmlhbGl6ZWRSZXNwb25zZShcbiAgICByZXNwb25zZVN0cmluZzogc3RyaW5nXG4pOiBBdXRob3JpemVSZXNwb25zZSB8IG51bGwge1xuICAgIC8vIENoZWNrIGlmIGdpdmVuIGhhc2ggaXMgZW1wdHlcbiAgICBpZiAoIXJlc3BvbnNlU3RyaW5nIHx8IHJlc3BvbnNlU3RyaW5nLmluZGV4T2YoXCI9XCIpIDwgMCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gU3RyaXAgdGhlICMgb3IgPyBzeW1ib2wgaWYgcHJlc2VudFxuICAgICAgICBjb25zdCBub3JtYWxpemVkUmVzcG9uc2UgPSBzdHJpcExlYWRpbmdIYXNoT3JRdWVyeShyZXNwb25zZVN0cmluZyk7XG4gICAgICAgIC8vIElmICMgc3ltYm9sIHdhcyBub3QgcHJlc2VudCwgYWJvdmUgd2lsbCByZXR1cm4gZW1wdHkgc3RyaW5nLCBzbyBnaXZlIG9yaWdpbmFsIGhhc2ggdmFsdWVcbiAgICAgICAgY29uc3QgZGVzZXJpYWxpemVkSGFzaDogQXV0aG9yaXplUmVzcG9uc2UgPSBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgICAgICBuZXcgVVJMU2VhcmNoUGFyYW1zKG5vcm1hbGl6ZWRSZXNwb25zZSlcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBDaGVjayBmb3Iga25vd24gcmVzcG9uc2UgcHJvcGVydGllc1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICBkZXNlcmlhbGl6ZWRIYXNoLmNvZGUgfHxcbiAgICAgICAgICAgIGRlc2VyaWFsaXplZEhhc2guZWFyX2p3ZSB8fFxuICAgICAgICAgICAgZGVzZXJpYWxpemVkSGFzaC5lcnJvciB8fFxuICAgICAgICAgICAgZGVzZXJpYWxpemVkSGFzaC5lcnJvcl9kZXNjcmlwdGlvbiB8fFxuICAgICAgICAgICAgZGVzZXJpYWxpemVkSGFzaC5zdGF0ZVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBkZXNlcmlhbGl6ZWRIYXNoO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMuaGFzaE5vdERlc2VyaWFsaXplZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogVXRpbGl0eSB0byBjcmVhdGUgYSBVUkwgZnJvbSB0aGUgcGFyYW1zIG1hcFxuICovXG5leHBvcnQgZnVuY3Rpb24gbWFwVG9RdWVyeVN0cmluZyhwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+KTogc3RyaW5nIHtcbiAgICBjb25zdCBxdWVyeVBhcmFtZXRlckFycmF5OiBBcnJheTxzdHJpbmc+ID0gbmV3IEFycmF5PHN0cmluZz4oKTtcblxuICAgIHBhcmFtZXRlcnMuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuICAgICAgICBxdWVyeVBhcmFtZXRlckFycmF5LnB1c2goYCR7a2V5fT0ke2VuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSl9YCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcXVlcnlQYXJhbWV0ZXJBcnJheS5qb2luKFwiJlwiKTtcbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgICBjcmVhdGVDbGllbnRDb25maWd1cmF0aW9uRXJyb3IsXG4gICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMsXG59IGZyb20gXCIuLi9lcnJvci9DbGllbnRDb25maWd1cmF0aW9uRXJyb3IuanNcIjtcbmltcG9ydCB7IFN0cmluZ1V0aWxzIH0gZnJvbSBcIi4uL3V0aWxzL1N0cmluZ1V0aWxzLmpzXCI7XG5pbXBvcnQgeyBJVXJpIH0gZnJvbSBcIi4vSVVyaS5qc1wiO1xuaW1wb3J0IHsgQUFEQXV0aG9yaXR5Q29uc3RhbnRzLCBDb25zdGFudHMgfSBmcm9tIFwiLi4vdXRpbHMvQ29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgKiBhcyBVcmxVdGlscyBmcm9tIFwiLi4vdXRpbHMvVXJsVXRpbHMuanNcIjtcblxuLyoqXG4gKiBVcmwgb2JqZWN0IGNsYXNzIHdoaWNoIGNhbiBwZXJmb3JtIHZhcmlvdXMgdHJhbnNmb3JtYXRpb25zIG9uIHVybCBzdHJpbmdzLlxuICovXG5leHBvcnQgY2xhc3MgVXJsU3RyaW5nIHtcbiAgICAvLyBpbnRlcm5hbCB1cmwgc3RyaW5nIGZpZWxkXG4gICAgcHJpdmF0ZSBfdXJsU3RyaW5nOiBzdHJpbmc7XG4gICAgcHVibGljIGdldCB1cmxTdHJpbmcoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VybFN0cmluZztcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZykge1xuICAgICAgICB0aGlzLl91cmxTdHJpbmcgPSB1cmw7XG4gICAgICAgIGlmICghdGhpcy5fdXJsU3RyaW5nKSB7XG4gICAgICAgICAgICAvLyBUaHJvd3MgZXJyb3IgaWYgdXJsIGlzIGVtcHR5XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRDb25maWd1cmF0aW9uRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMudXJsRW1wdHlFcnJvclxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdXJsLmluY2x1ZGVzKFwiI1wiKSkge1xuICAgICAgICAgICAgdGhpcy5fdXJsU3RyaW5nID0gVXJsU3RyaW5nLmNhbm9uaWNhbGl6ZVVyaSh1cmwpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW5zdXJlIHVybHMgYXJlIGxvd2VyIGNhc2UgYW5kIGVuZCB3aXRoIGEgLyBjaGFyYWN0ZXIuXG4gICAgICogQHBhcmFtIHVybFxuICAgICAqL1xuICAgIHN0YXRpYyBjYW5vbmljYWxpemVVcmkodXJsOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBpZiAodXJsKSB7XG4gICAgICAgICAgICBsZXQgbG93ZXJDYXNlVXJsID0gdXJsLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgICAgIGlmIChTdHJpbmdVdGlscy5lbmRzV2l0aChsb3dlckNhc2VVcmwsIFwiP1wiKSkge1xuICAgICAgICAgICAgICAgIGxvd2VyQ2FzZVVybCA9IGxvd2VyQ2FzZVVybC5zbGljZSgwLCAtMSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFN0cmluZ1V0aWxzLmVuZHNXaXRoKGxvd2VyQ2FzZVVybCwgXCI/L1wiKSkge1xuICAgICAgICAgICAgICAgIGxvd2VyQ2FzZVVybCA9IGxvd2VyQ2FzZVVybC5zbGljZSgwLCAtMik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghU3RyaW5nVXRpbHMuZW5kc1dpdGgobG93ZXJDYXNlVXJsLCBcIi9cIikpIHtcbiAgICAgICAgICAgICAgICBsb3dlckNhc2VVcmwgKz0gXCIvXCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBsb3dlckNhc2VVcmw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdXJsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRocm93cyBpZiB1cmxTdHJpbmcgcGFzc2VkIGlzIG5vdCBhIHZhbGlkIGF1dGhvcml0eSBVUkkgc3RyaW5nLlxuICAgICAqL1xuICAgIHZhbGlkYXRlQXNVcmkoKTogdm9pZCB7XG4gICAgICAgIC8vIEF0dGVtcHRzIHRvIHBhcnNlIHVybCBmb3IgdXJpIGNvbXBvbmVudHNcbiAgICAgICAgbGV0IGNvbXBvbmVudHM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb21wb25lbnRzID0gdGhpcy5nZXRVcmxDb21wb25lbnRzKCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudENvbmZpZ3VyYXRpb25FcnJvcihcbiAgICAgICAgICAgICAgICBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy51cmxQYXJzZUVycm9yXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVGhyb3cgZXJyb3IgaWYgVVJJIG9yIHBhdGggc2VnbWVudHMgYXJlIG5vdCBwYXJzZWFibGUuXG4gICAgICAgIGlmICghY29tcG9uZW50cy5Ib3N0TmFtZUFuZFBvcnQgfHwgIWNvbXBvbmVudHMuUGF0aFNlZ21lbnRzKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRDb25maWd1cmF0aW9uRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMudXJsUGFyc2VFcnJvclxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRocm93IGVycm9yIGlmIHVyaSBpcyBpbnNlY3VyZS5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIWNvbXBvbmVudHMuUHJvdG9jb2wgfHxcbiAgICAgICAgICAgIGNvbXBvbmVudHMuUHJvdG9jb2wudG9Mb3dlckNhc2UoKSAhPT0gXCJodHRwczpcIlxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudENvbmZpZ3VyYXRpb25FcnJvcihcbiAgICAgICAgICAgICAgICBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5hdXRob3JpdHlVcmlJbnNlY3VyZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdpdmVuIGEgdXJsIGFuZCBhIHF1ZXJ5IHN0cmluZyByZXR1cm4gdGhlIHVybCB3aXRoIHByb3ZpZGVkIHF1ZXJ5IHN0cmluZyBhcHBlbmRlZFxuICAgICAqIEBwYXJhbSB1cmxcbiAgICAgKiBAcGFyYW0gcXVlcnlTdHJpbmdcbiAgICAgKi9cbiAgICBzdGF0aWMgYXBwZW5kUXVlcnlTdHJpbmcodXJsOiBzdHJpbmcsIHF1ZXJ5U3RyaW5nOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBpZiAoIXF1ZXJ5U3RyaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gdXJsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVybC5pbmRleE9mKFwiP1wiKSA8IDBcbiAgICAgICAgICAgID8gYCR7dXJsfT8ke3F1ZXJ5U3RyaW5nfWBcbiAgICAgICAgICAgIDogYCR7dXJsfSYke3F1ZXJ5U3RyaW5nfWA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHVybCB3aXRoIHRoZSBoYXNoIHJlbW92ZWRcbiAgICAgKiBAcGFyYW0gdXJsXG4gICAgICovXG4gICAgc3RhdGljIHJlbW92ZUhhc2hGcm9tVXJsKHVybDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIFVybFN0cmluZy5jYW5vbmljYWxpemVVcmkodXJsLnNwbGl0KFwiI1wiKVswXSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2l2ZW4gYSB1cmwgbGlrZSBodHRwczovL2E6Yi9jb21tb24vZD9lPWYjZywgYW5kIGEgdGVuYW50SWQsIHJldHVybnMgaHR0cHM6Ly9hOmIvdGVuYW50SWQvZFxuICAgICAqIEBwYXJhbSBocmVmIFRoZSB1cmxcbiAgICAgKiBAcGFyYW0gdGVuYW50SWQgVGhlIHRlbmFudCBpZCB0byByZXBsYWNlXG4gICAgICovXG4gICAgcmVwbGFjZVRlbmFudFBhdGgodGVuYW50SWQ6IHN0cmluZyk6IFVybFN0cmluZyB7XG4gICAgICAgIGNvbnN0IHVybE9iamVjdCA9IHRoaXMuZ2V0VXJsQ29tcG9uZW50cygpO1xuICAgICAgICBjb25zdCBwYXRoQXJyYXkgPSB1cmxPYmplY3QuUGF0aFNlZ21lbnRzO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0ZW5hbnRJZCAmJlxuICAgICAgICAgICAgcGF0aEFycmF5Lmxlbmd0aCAhPT0gMCAmJlxuICAgICAgICAgICAgKHBhdGhBcnJheVswXSA9PT0gQUFEQXV0aG9yaXR5Q29uc3RhbnRzLkNPTU1PTiB8fFxuICAgICAgICAgICAgICAgIHBhdGhBcnJheVswXSA9PT0gQUFEQXV0aG9yaXR5Q29uc3RhbnRzLk9SR0FOSVpBVElPTlMpXG4gICAgICAgICkge1xuICAgICAgICAgICAgcGF0aEFycmF5WzBdID0gdGVuYW50SWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFVybFN0cmluZy5jb25zdHJ1Y3RBdXRob3JpdHlVcmlGcm9tT2JqZWN0KHVybE9iamVjdCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyc2VzIG91dCB0aGUgY29tcG9uZW50cyBmcm9tIGEgdXJsIHN0cmluZy5cbiAgICAgKiBAcmV0dXJucyBBbiBvYmplY3Qgd2l0aCB0aGUgdmFyaW91cyBjb21wb25lbnRzLiBQbGVhc2UgY2FjaGUgdGhpcyB2YWx1ZSBpbnN0ZWQgb2YgY2FsbGluZyB0aGlzIG11bHRpcGxlIHRpbWVzIG9uIHRoZSBzYW1lIHVybC5cbiAgICAgKi9cbiAgICBnZXRVcmxDb21wb25lbnRzKCk6IElVcmkge1xuICAgICAgICAvLyBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9jdXJ0aXN6LzExMTM5YjJjZmNhZWY0YTI2MWUwXG4gICAgICAgIGNvbnN0IHJlZ0V4ID0gUmVnRXhwKFxuICAgICAgICAgICAgXCJeKChbXjovPyNdKyk6KT8oLy8oW14vPyNdKikpPyhbXj8jXSopKFxcXFw/KFteI10qKSk/KCMoLiopKT9cIlxuICAgICAgICApO1xuXG4gICAgICAgIC8vIElmIHVybCBzdHJpbmcgZG9lcyBub3QgbWF0Y2ggcmVnRXgsIHdlIHRocm93IGFuIGVycm9yXG4gICAgICAgIGNvbnN0IG1hdGNoID0gdGhpcy51cmxTdHJpbmcubWF0Y2gocmVnRXgpO1xuICAgICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRDb25maWd1cmF0aW9uRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMudXJsUGFyc2VFcnJvclxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVybCBjb21wb25lbnQgb2JqZWN0XG4gICAgICAgIGNvbnN0IHVybENvbXBvbmVudHMgPSB7XG4gICAgICAgICAgICBQcm90b2NvbDogbWF0Y2hbMV0sXG4gICAgICAgICAgICBIb3N0TmFtZUFuZFBvcnQ6IG1hdGNoWzRdLFxuICAgICAgICAgICAgQWJzb2x1dGVQYXRoOiBtYXRjaFs1XSxcbiAgICAgICAgICAgIFF1ZXJ5U3RyaW5nOiBtYXRjaFs3XSxcbiAgICAgICAgfSBhcyBJVXJpO1xuXG4gICAgICAgIGxldCBwYXRoU2VnbWVudHMgPSB1cmxDb21wb25lbnRzLkFic29sdXRlUGF0aC5zcGxpdChcIi9cIik7XG4gICAgICAgIHBhdGhTZWdtZW50cyA9IHBhdGhTZWdtZW50cy5maWx0ZXIoKHZhbCkgPT4gdmFsICYmIHZhbC5sZW5ndGggPiAwKTsgLy8gcmVtb3ZlIGVtcHR5IGVsZW1lbnRzXG4gICAgICAgIHVybENvbXBvbmVudHMuUGF0aFNlZ21lbnRzID0gcGF0aFNlZ21lbnRzO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHVybENvbXBvbmVudHMuUXVlcnlTdHJpbmcgJiZcbiAgICAgICAgICAgIHVybENvbXBvbmVudHMuUXVlcnlTdHJpbmcuZW5kc1dpdGgoXCIvXCIpXG4gICAgICAgICkge1xuICAgICAgICAgICAgdXJsQ29tcG9uZW50cy5RdWVyeVN0cmluZyA9IHVybENvbXBvbmVudHMuUXVlcnlTdHJpbmcuc3Vic3RyaW5nKFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgdXJsQ29tcG9uZW50cy5RdWVyeVN0cmluZy5sZW5ndGggLSAxXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1cmxDb21wb25lbnRzO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXREb21haW5Gcm9tVXJsKHVybDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgcmVnRXggPSBSZWdFeHAoXCJeKFteOi8/I10rOi8vKT8oW14vPyNdKilcIik7XG5cbiAgICAgICAgY29uc3QgbWF0Y2ggPSB1cmwubWF0Y2gocmVnRXgpO1xuXG4gICAgICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudENvbmZpZ3VyYXRpb25FcnJvcihcbiAgICAgICAgICAgICAgICBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy51cmxQYXJzZUVycm9yXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG1hdGNoWzJdO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRBYnNvbHV0ZVVybChyZWxhdGl2ZVVybDogc3RyaW5nLCBiYXNlVXJsOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBpZiAocmVsYXRpdmVVcmxbMF0gPT09IENvbnN0YW50cy5GT1JXQVJEX1NMQVNIKSB7XG4gICAgICAgICAgICBjb25zdCB1cmwgPSBuZXcgVXJsU3RyaW5nKGJhc2VVcmwpO1xuICAgICAgICAgICAgY29uc3QgYmFzZUNvbXBvbmVudHMgPSB1cmwuZ2V0VXJsQ29tcG9uZW50cygpO1xuXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIGJhc2VDb21wb25lbnRzLlByb3RvY29sICtcbiAgICAgICAgICAgICAgICBcIi8vXCIgK1xuICAgICAgICAgICAgICAgIGJhc2VDb21wb25lbnRzLkhvc3ROYW1lQW5kUG9ydCArXG4gICAgICAgICAgICAgICAgcmVsYXRpdmVVcmxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVsYXRpdmVVcmw7XG4gICAgfVxuXG4gICAgc3RhdGljIGNvbnN0cnVjdEF1dGhvcml0eVVyaUZyb21PYmplY3QodXJsT2JqZWN0OiBJVXJpKTogVXJsU3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVcmxTdHJpbmcoXG4gICAgICAgICAgICB1cmxPYmplY3QuUHJvdG9jb2wgK1xuICAgICAgICAgICAgICAgIFwiLy9cIiArXG4gICAgICAgICAgICAgICAgdXJsT2JqZWN0Lkhvc3ROYW1lQW5kUG9ydCArXG4gICAgICAgICAgICAgICAgXCIvXCIgK1xuICAgICAgICAgICAgICAgIHVybE9iamVjdC5QYXRoU2VnbWVudHMuam9pbihcIi9cIilcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiB0aGUgaGFzaCBvZiB0aGUgVVJMIHN0cmluZyBjb250YWlucyBrbm93biBwcm9wZXJ0aWVzXG4gICAgICogQGRlcHJlY2F0ZWQgVGhpcyBBUEkgd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIHZlcnNpb25cbiAgICAgKi9cbiAgICBzdGF0aWMgaGFzaENvbnRhaW5zS25vd25Qcm9wZXJ0aWVzKHJlc3BvbnNlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICEhVXJsVXRpbHMuZ2V0RGVzZXJpYWxpemVkUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgIH1cbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4uL2xvZ2dlci9Mb2dnZXIuanNcIjtcbmltcG9ydCB7IFVybFN0cmluZyB9IGZyb20gXCIuLi91cmwvVXJsU3RyaW5nLmpzXCI7XG5pbXBvcnQgeyBBdXRob3JpdHlNZXRhZGF0YVNvdXJjZSB9IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcbmltcG9ydCB7IFN0YXRpY0F1dGhvcml0eU9wdGlvbnMgfSBmcm9tIFwiLi9BdXRob3JpdHlPcHRpb25zLmpzXCI7XG5pbXBvcnQgeyBDbG91ZERpc2NvdmVyeU1ldGFkYXRhIH0gZnJvbSBcIi4vQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YS5qc1wiO1xuaW1wb3J0IHsgQ2xvdWRJbnN0YW5jZURpc2NvdmVyeVJlc3BvbnNlIH0gZnJvbSBcIi4vQ2xvdWRJbnN0YW5jZURpc2NvdmVyeVJlc3BvbnNlLmpzXCI7XG5pbXBvcnQgeyBPcGVuSWRDb25maWdSZXNwb25zZSB9IGZyb20gXCIuL09wZW5JZENvbmZpZ1Jlc3BvbnNlLmpzXCI7XG5cbnR5cGUgUmF3TWV0YWRhdGEgPSB7XG4gICAgZW5kcG9pbnRNZXRhZGF0YTogeyBba2V5OiBzdHJpbmddOiBPcGVuSWRDb25maWdSZXNwb25zZSB9O1xuICAgIGluc3RhbmNlRGlzY292ZXJ5TWV0YWRhdGE6IENsb3VkSW5zdGFuY2VEaXNjb3ZlcnlSZXNwb25zZTtcbn07XG5cbmV4cG9ydCBjb25zdCByYXdNZXRkYXRhSlNPTjogUmF3TWV0YWRhdGEgPSB7XG4gICAgZW5kcG9pbnRNZXRhZGF0YToge1xuICAgICAgICBcImxvZ2luLm1pY3Jvc29mdG9ubGluZS5jb21cIjoge1xuICAgICAgICAgICAgdG9rZW5fZW5kcG9pbnQ6XG4gICAgICAgICAgICAgICAgXCJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20ve3RlbmFudGlkfS9vYXV0aDIvdjIuMC90b2tlblwiLFxuICAgICAgICAgICAgandrc191cmk6XG4gICAgICAgICAgICAgICAgXCJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20ve3RlbmFudGlkfS9kaXNjb3ZlcnkvdjIuMC9rZXlzXCIsXG4gICAgICAgICAgICBpc3N1ZXI6IFwiaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tL3t0ZW5hbnRpZH0vdjIuMFwiLFxuICAgICAgICAgICAgYXV0aG9yaXphdGlvbl9lbmRwb2ludDpcbiAgICAgICAgICAgICAgICBcImh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbS97dGVuYW50aWR9L29hdXRoMi92Mi4wL2F1dGhvcml6ZVwiLFxuICAgICAgICAgICAgZW5kX3Nlc3Npb25fZW5kcG9pbnQ6XG4gICAgICAgICAgICAgICAgXCJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20ve3RlbmFudGlkfS9vYXV0aDIvdjIuMC9sb2dvdXRcIixcbiAgICAgICAgfSxcbiAgICAgICAgXCJsb2dpbi5jaGluYWNsb3VkYXBpLmNuXCI6IHtcbiAgICAgICAgICAgIHRva2VuX2VuZHBvaW50OlxuICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly9sb2dpbi5jaGluYWNsb3VkYXBpLmNuL3t0ZW5hbnRpZH0vb2F1dGgyL3YyLjAvdG9rZW5cIixcbiAgICAgICAgICAgIGp3a3NfdXJpOlxuICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly9sb2dpbi5jaGluYWNsb3VkYXBpLmNuL3t0ZW5hbnRpZH0vZGlzY292ZXJ5L3YyLjAva2V5c1wiLFxuICAgICAgICAgICAgaXNzdWVyOiBcImh0dHBzOi8vbG9naW4ucGFydG5lci5taWNyb3NvZnRvbmxpbmUuY24ve3RlbmFudGlkfS92Mi4wXCIsXG4gICAgICAgICAgICBhdXRob3JpemF0aW9uX2VuZHBvaW50OlxuICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly9sb2dpbi5jaGluYWNsb3VkYXBpLmNuL3t0ZW5hbnRpZH0vb2F1dGgyL3YyLjAvYXV0aG9yaXplXCIsXG4gICAgICAgICAgICBlbmRfc2Vzc2lvbl9lbmRwb2ludDpcbiAgICAgICAgICAgICAgICBcImh0dHBzOi8vbG9naW4uY2hpbmFjbG91ZGFwaS5jbi97dGVuYW50aWR9L29hdXRoMi92Mi4wL2xvZ291dFwiLFxuICAgICAgICB9LFxuICAgICAgICBcImxvZ2luLm1pY3Jvc29mdG9ubGluZS51c1wiOiB7XG4gICAgICAgICAgICB0b2tlbl9lbmRwb2ludDpcbiAgICAgICAgICAgICAgICBcImh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLnVzL3t0ZW5hbnRpZH0vb2F1dGgyL3YyLjAvdG9rZW5cIixcbiAgICAgICAgICAgIGp3a3NfdXJpOlxuICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUudXMve3RlbmFudGlkfS9kaXNjb3ZlcnkvdjIuMC9rZXlzXCIsXG4gICAgICAgICAgICBpc3N1ZXI6IFwiaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUudXMve3RlbmFudGlkfS92Mi4wXCIsXG4gICAgICAgICAgICBhdXRob3JpemF0aW9uX2VuZHBvaW50OlxuICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUudXMve3RlbmFudGlkfS9vYXV0aDIvdjIuMC9hdXRob3JpemVcIixcbiAgICAgICAgICAgIGVuZF9zZXNzaW9uX2VuZHBvaW50OlxuICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUudXMve3RlbmFudGlkfS9vYXV0aDIvdjIuMC9sb2dvdXRcIixcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIGluc3RhbmNlRGlzY292ZXJ5TWV0YWRhdGE6IHtcbiAgICAgICAgdGVuYW50X2Rpc2NvdmVyeV9lbmRwb2ludDpcbiAgICAgICAgICAgIFwiaHR0cHM6Ly97Y2Fub25pY2FsQXV0aG9yaXR5fS92Mi4wLy53ZWxsLWtub3duL29wZW5pZC1jb25maWd1cmF0aW9uXCIsXG4gICAgICAgIG1ldGFkYXRhOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJlZmVycmVkX25ldHdvcms6IFwibG9naW4ubWljcm9zb2Z0b25saW5lLmNvbVwiLFxuICAgICAgICAgICAgICAgIHByZWZlcnJlZF9jYWNoZTogXCJsb2dpbi53aW5kb3dzLm5ldFwiLFxuICAgICAgICAgICAgICAgIGFsaWFzZXM6IFtcbiAgICAgICAgICAgICAgICAgICAgXCJsb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tXCIsXG4gICAgICAgICAgICAgICAgICAgIFwibG9naW4ud2luZG93cy5uZXRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJsb2dpbi5taWNyb3NvZnQuY29tXCIsXG4gICAgICAgICAgICAgICAgICAgIFwic3RzLndpbmRvd3MubmV0XCIsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJlZmVycmVkX25ldHdvcms6IFwibG9naW4ucGFydG5lci5taWNyb3NvZnRvbmxpbmUuY25cIixcbiAgICAgICAgICAgICAgICBwcmVmZXJyZWRfY2FjaGU6IFwibG9naW4ucGFydG5lci5taWNyb3NvZnRvbmxpbmUuY25cIixcbiAgICAgICAgICAgICAgICBhbGlhc2VzOiBbXG4gICAgICAgICAgICAgICAgICAgIFwibG9naW4ucGFydG5lci5taWNyb3NvZnRvbmxpbmUuY25cIixcbiAgICAgICAgICAgICAgICAgICAgXCJsb2dpbi5jaGluYWNsb3VkYXBpLmNuXCIsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJlZmVycmVkX25ldHdvcms6IFwibG9naW4ubWljcm9zb2Z0b25saW5lLmRlXCIsXG4gICAgICAgICAgICAgICAgcHJlZmVycmVkX2NhY2hlOiBcImxvZ2luLm1pY3Jvc29mdG9ubGluZS5kZVwiLFxuICAgICAgICAgICAgICAgIGFsaWFzZXM6IFtcImxvZ2luLm1pY3Jvc29mdG9ubGluZS5kZVwiXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJlZmVycmVkX25ldHdvcms6IFwibG9naW4ubWljcm9zb2Z0b25saW5lLnVzXCIsXG4gICAgICAgICAgICAgICAgcHJlZmVycmVkX2NhY2hlOiBcImxvZ2luLm1pY3Jvc29mdG9ubGluZS51c1wiLFxuICAgICAgICAgICAgICAgIGFsaWFzZXM6IFtcbiAgICAgICAgICAgICAgICAgICAgXCJsb2dpbi5taWNyb3NvZnRvbmxpbmUudXNcIixcbiAgICAgICAgICAgICAgICAgICAgXCJsb2dpbi51c2dvdmNsb3VkYXBpLm5ldFwiLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHByZWZlcnJlZF9uZXR3b3JrOiBcImxvZ2luLXVzLm1pY3Jvc29mdG9ubGluZS5jb21cIixcbiAgICAgICAgICAgICAgICBwcmVmZXJyZWRfY2FjaGU6IFwibG9naW4tdXMubWljcm9zb2Z0b25saW5lLmNvbVwiLFxuICAgICAgICAgICAgICAgIGFsaWFzZXM6IFtcImxvZ2luLXVzLm1pY3Jvc29mdG9ubGluZS5jb21cIl0sXG4gICAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgIH0sXG59O1xuXG5leHBvcnQgY29uc3QgRW5kcG9pbnRNZXRhZGF0YSA9IHJhd01ldGRhdGFKU09OLmVuZHBvaW50TWV0YWRhdGE7XG5leHBvcnQgY29uc3QgSW5zdGFuY2VEaXNjb3ZlcnlNZXRhZGF0YSA9XG4gICAgcmF3TWV0ZGF0YUpTT04uaW5zdGFuY2VEaXNjb3ZlcnlNZXRhZGF0YTtcblxuZXhwb3J0IGNvbnN0IEluc3RhbmNlRGlzY292ZXJ5TWV0YWRhdGFBbGlhc2VzOiBTZXQ8U3RyaW5nPiA9IG5ldyBTZXQoKTtcbkluc3RhbmNlRGlzY292ZXJ5TWV0YWRhdGEubWV0YWRhdGEuZm9yRWFjaChcbiAgICAobWV0YWRhdGFFbnRyeTogQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YSkgPT4ge1xuICAgICAgICBtZXRhZGF0YUVudHJ5LmFsaWFzZXMuZm9yRWFjaCgoYWxpYXM6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgSW5zdGFuY2VEaXNjb3ZlcnlNZXRhZGF0YUFsaWFzZXMuYWRkKGFsaWFzKTtcbiAgICAgICAgfSk7XG4gICAgfVxuKTtcblxuLyoqXG4gKiBBdHRlbXB0cyB0byBnZXQgYW4gYWxpYXNlcyBhcnJheSBmcm9tIHRoZSBzdGF0aWMgYXV0aG9yaXR5IG1ldGFkYXRhIHNvdXJjZXMgYmFzZWQgb24gdGhlIGNhbm9uaWNhbCBhdXRob3JpdHkgaG9zdFxuICogQHBhcmFtIHN0YXRpY0F1dGhvcml0eU9wdGlvbnNcbiAqIEBwYXJhbSBsb2dnZXJcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBbGlhc2VzRnJvbVN0YXRpY1NvdXJjZXMoXG4gICAgc3RhdGljQXV0aG9yaXR5T3B0aW9uczogU3RhdGljQXV0aG9yaXR5T3B0aW9ucyxcbiAgICBsb2dnZXI/OiBMb2dnZXJcbik6IHN0cmluZ1tdIHtcbiAgICBsZXQgc3RhdGljQWxpYXNlczogc3RyaW5nW10gfCB1bmRlZmluZWQ7XG4gICAgY29uc3QgY2Fub25pY2FsQXV0aG9yaXR5ID0gc3RhdGljQXV0aG9yaXR5T3B0aW9ucy5jYW5vbmljYWxBdXRob3JpdHk7XG4gICAgaWYgKGNhbm9uaWNhbEF1dGhvcml0eSkge1xuICAgICAgICBjb25zdCBhdXRob3JpdHlIb3N0ID0gbmV3IFVybFN0cmluZyhcbiAgICAgICAgICAgIGNhbm9uaWNhbEF1dGhvcml0eVxuICAgICAgICApLmdldFVybENvbXBvbmVudHMoKS5Ib3N0TmFtZUFuZFBvcnQ7XG4gICAgICAgIHN0YXRpY0FsaWFzZXMgPVxuICAgICAgICAgICAgZ2V0QWxpYXNlc0Zyb21NZXRhZGF0YShcbiAgICAgICAgICAgICAgICBhdXRob3JpdHlIb3N0LFxuICAgICAgICAgICAgICAgIHN0YXRpY0F1dGhvcml0eU9wdGlvbnMuY2xvdWREaXNjb3ZlcnlNZXRhZGF0YT8ubWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgQXV0aG9yaXR5TWV0YWRhdGFTb3VyY2UuQ09ORklHLFxuICAgICAgICAgICAgICAgIGxvZ2dlclxuICAgICAgICAgICAgKSB8fFxuICAgICAgICAgICAgZ2V0QWxpYXNlc0Zyb21NZXRhZGF0YShcbiAgICAgICAgICAgICAgICBhdXRob3JpdHlIb3N0LFxuICAgICAgICAgICAgICAgIEluc3RhbmNlRGlzY292ZXJ5TWV0YWRhdGEubWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgQXV0aG9yaXR5TWV0YWRhdGFTb3VyY2UuSEFSRENPREVEX1ZBTFVFUyxcbiAgICAgICAgICAgICAgICBsb2dnZXJcbiAgICAgICAgICAgICkgfHxcbiAgICAgICAgICAgIHN0YXRpY0F1dGhvcml0eU9wdGlvbnMua25vd25BdXRob3JpdGllcztcbiAgICB9XG5cbiAgICByZXR1cm4gc3RhdGljQWxpYXNlcyB8fCBbXTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFsaWFzZXMgZm9yIGZyb20gdGhlIHJhdyBjbG91ZCBkaXNjb3ZlcnkgbWV0YWRhdGEgcGFzc2VkIGluXG4gKiBAcGFyYW0gYXV0aG9yaXR5SG9zdFxuICogQHBhcmFtIHJhd0Nsb3VkRGlzY292ZXJ5TWV0YWRhdGFcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBbGlhc2VzRnJvbU1ldGFkYXRhKFxuICAgIGF1dGhvcml0eUhvc3Q/OiBzdHJpbmcsXG4gICAgY2xvdWREaXNjb3ZlcnlNZXRhZGF0YT86IENsb3VkRGlzY292ZXJ5TWV0YWRhdGFbXSxcbiAgICBzb3VyY2U/OiBBdXRob3JpdHlNZXRhZGF0YVNvdXJjZSxcbiAgICBsb2dnZXI/OiBMb2dnZXJcbik6IHN0cmluZ1tdIHwgbnVsbCB7XG4gICAgbG9nZ2VyPy50cmFjZShgZ2V0QWxpYXNlc0Zyb21NZXRhZGF0YSBjYWxsZWQgd2l0aCBzb3VyY2U6ICR7c291cmNlfWApO1xuICAgIGlmIChhdXRob3JpdHlIb3N0ICYmIGNsb3VkRGlzY292ZXJ5TWV0YWRhdGEpIHtcbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBnZXRDbG91ZERpc2NvdmVyeU1ldGFkYXRhRnJvbU5ldHdvcmtSZXNwb25zZShcbiAgICAgICAgICAgIGNsb3VkRGlzY292ZXJ5TWV0YWRhdGEsXG4gICAgICAgICAgICBhdXRob3JpdHlIb3N0XG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKG1ldGFkYXRhKSB7XG4gICAgICAgICAgICBsb2dnZXI/LnRyYWNlKFxuICAgICAgICAgICAgICAgIGBnZXRBbGlhc2VzRnJvbU1ldGFkYXRhOiBmb3VuZCBjbG91ZCBkaXNjb3ZlcnkgbWV0YWRhdGEgaW4gJHtzb3VyY2V9LCByZXR1cm5pbmcgYWxpYXNlc2BcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm4gbWV0YWRhdGEuYWxpYXNlcztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxvZ2dlcj8udHJhY2UoXG4gICAgICAgICAgICAgICAgYGdldEFsaWFzZXNGcm9tTWV0YWRhdGE6IGRpZCBub3QgZmluZCBjbG91ZCBkaXNjb3ZlcnkgbWV0YWRhdGEgaW4gJHtzb3VyY2V9YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIEdldCBjbG91ZCBkaXNjb3ZlcnkgbWV0YWRhdGEgZm9yIGNvbW1vbiBhdXRob3JpdGllc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2xvdWREaXNjb3ZlcnlNZXRhZGF0YUZyb21IYXJkY29kZWRWYWx1ZXMoXG4gICAgYXV0aG9yaXR5SG9zdDogc3RyaW5nXG4pOiBDbG91ZERpc2NvdmVyeU1ldGFkYXRhIHwgbnVsbCB7XG4gICAgY29uc3QgbWV0YWRhdGEgPSBnZXRDbG91ZERpc2NvdmVyeU1ldGFkYXRhRnJvbU5ldHdvcmtSZXNwb25zZShcbiAgICAgICAgSW5zdGFuY2VEaXNjb3ZlcnlNZXRhZGF0YS5tZXRhZGF0YSxcbiAgICAgICAgYXV0aG9yaXR5SG9zdFxuICAgICk7XG4gICAgcmV0dXJuIG1ldGFkYXRhO1xufVxuXG4vKipcbiAqIFNlYXJjaGVzIGluc3RhbmNlIGRpc2NvdmVyeSBuZXR3b3JrIHJlc3BvbnNlIGZvciB0aGUgZW50cnkgdGhhdCBjb250YWlucyB0aGUgaG9zdCBpbiB0aGUgYWxpYXNlcyBsaXN0XG4gKiBAcGFyYW0gcmVzcG9uc2VcbiAqIEBwYXJhbSBhdXRob3JpdHlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENsb3VkRGlzY292ZXJ5TWV0YWRhdGFGcm9tTmV0d29ya1Jlc3BvbnNlKFxuICAgIHJlc3BvbnNlOiBDbG91ZERpc2NvdmVyeU1ldGFkYXRhW10sXG4gICAgYXV0aG9yaXR5SG9zdDogc3RyaW5nXG4pOiBDbG91ZERpc2NvdmVyeU1ldGFkYXRhIHwgbnVsbCB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXNwb25zZS5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IHJlc3BvbnNlW2ldO1xuICAgICAgICBpZiAobWV0YWRhdGEuYWxpYXNlcy5pbmNsdWRlcyhhdXRob3JpdHlIb3N0KSkge1xuICAgICAgICAgICAgcmV0dXJuIG1ldGFkYXRhO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmV4cG9ydCBjb25zdCBjYWNoZVF1b3RhRXhjZWVkZWRFcnJvckNvZGUgPSBcImNhY2hlX3F1b3RhX2V4Y2VlZGVkXCI7XG5leHBvcnQgY29uc3QgY2FjaGVVbmtub3duRXJyb3JDb2RlID0gXCJjYWNoZV9lcnJvcl91bmtub3duXCI7XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCAqIGFzIENhY2hlRXJyb3JDb2RlcyBmcm9tIFwiLi9DYWNoZUVycm9yQ29kZXMuanNcIjtcbmV4cG9ydCB7IENhY2hlRXJyb3JDb2RlcyB9O1xuXG5leHBvcnQgY29uc3QgQ2FjaGVFcnJvck1lc3NhZ2VzID0ge1xuICAgIFtDYWNoZUVycm9yQ29kZXMuY2FjaGVRdW90YUV4Y2VlZGVkRXJyb3JDb2RlXTpcbiAgICAgICAgXCJFeGNlZWRlZCBjYWNoZSBzdG9yYWdlIGNhcGFjaXR5LlwiLFxuICAgIFtDYWNoZUVycm9yQ29kZXMuY2FjaGVVbmtub3duRXJyb3JDb2RlXTpcbiAgICAgICAgXCJVbmV4cGVjdGVkIGVycm9yIG9jY3VycmVkIHdoZW4gdXNpbmcgY2FjaGUgc3RvcmFnZS5cIixcbn07XG5cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gdGhlcmUgaXMgYW4gZXJyb3Igd2l0aCB0aGUgY2FjaGVcbiAqL1xuZXhwb3J0IGNsYXNzIENhY2hlRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgLyoqXG4gICAgICogU2hvcnQgc3RyaW5nIGRlbm90aW5nIGVycm9yXG4gICAgICovXG4gICAgZXJyb3JDb2RlOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBEZXRhaWxlZCBkZXNjcmlwdGlvbiBvZiBlcnJvclxuICAgICAqL1xuICAgIGVycm9yTWVzc2FnZTogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoZXJyb3JDb2RlOiBzdHJpbmcsIGVycm9yTWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBjb25zdCBtZXNzYWdlID1cbiAgICAgICAgICAgIGVycm9yTWVzc2FnZSB8fFxuICAgICAgICAgICAgKENhY2hlRXJyb3JNZXNzYWdlc1tlcnJvckNvZGVdXG4gICAgICAgICAgICAgICAgPyBDYWNoZUVycm9yTWVzc2FnZXNbZXJyb3JDb2RlXVxuICAgICAgICAgICAgICAgIDogQ2FjaGVFcnJvck1lc3NhZ2VzW0NhY2hlRXJyb3JDb2Rlcy5jYWNoZVVua25vd25FcnJvckNvZGVdKTtcblxuICAgICAgICBzdXBlcihgJHtlcnJvckNvZGV9OiAke21lc3NhZ2V9YCk7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBDYWNoZUVycm9yLnByb3RvdHlwZSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gXCJDYWNoZUVycm9yXCI7XG4gICAgICAgIHRoaXMuZXJyb3JDb2RlID0gZXJyb3JDb2RlO1xuICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgfVxufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICAgIEFjY291bnRGaWx0ZXIsXG4gICAgQ3JlZGVudGlhbEZpbHRlcixcbiAgICBWYWxpZENyZWRlbnRpYWxUeXBlLFxuICAgIEFwcE1ldGFkYXRhRmlsdGVyLFxuICAgIEFwcE1ldGFkYXRhQ2FjaGUsXG4gICAgVG9rZW5LZXlzLFxuICAgIFRlbmFudFByb2ZpbGVGaWx0ZXIsXG59IGZyb20gXCIuL3V0aWxzL0NhY2hlVHlwZXMuanNcIjtcbmltcG9ydCB7IENhY2hlUmVjb3JkIH0gZnJvbSBcIi4vZW50aXRpZXMvQ2FjaGVSZWNvcmQuanNcIjtcbmltcG9ydCB7XG4gICAgQ3JlZGVudGlhbFR5cGUsXG4gICAgQVBQX01FVEFEQVRBLFxuICAgIFRIRV9GQU1JTFlfSUQsXG4gICAgQVVUSE9SSVRZX01FVEFEQVRBX0NPTlNUQU5UUyxcbiAgICBBdXRoZW50aWNhdGlvblNjaGVtZSxcbiAgICBTZXBhcmF0b3JzLFxufSBmcm9tIFwiLi4vdXRpbHMvQ29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBDcmVkZW50aWFsRW50aXR5IH0gZnJvbSBcIi4vZW50aXRpZXMvQ3JlZGVudGlhbEVudGl0eS5qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVDcmVkZW50aWFsS2V5IH0gZnJvbSBcIi4vdXRpbHMvQ2FjaGVIZWxwZXJzLmpzXCI7XG5pbXBvcnQgeyBTY29wZVNldCB9IGZyb20gXCIuLi9yZXF1ZXN0L1Njb3BlU2V0LmpzXCI7XG5pbXBvcnQgeyBBY2NvdW50RW50aXR5IH0gZnJvbSBcIi4vZW50aXRpZXMvQWNjb3VudEVudGl0eS5qc1wiO1xuaW1wb3J0IHsgQWNjZXNzVG9rZW5FbnRpdHkgfSBmcm9tIFwiLi9lbnRpdGllcy9BY2Nlc3NUb2tlbkVudGl0eS5qc1wiO1xuaW1wb3J0IHsgSWRUb2tlbkVudGl0eSB9IGZyb20gXCIuL2VudGl0aWVzL0lkVG9rZW5FbnRpdHkuanNcIjtcbmltcG9ydCB7IFJlZnJlc2hUb2tlbkVudGl0eSB9IGZyb20gXCIuL2VudGl0aWVzL1JlZnJlc2hUb2tlbkVudGl0eS5qc1wiO1xuaW1wb3J0IHsgSUNhY2hlTWFuYWdlciB9IGZyb20gXCIuL2ludGVyZmFjZS9JQ2FjaGVNYW5hZ2VyLmpzXCI7XG5pbXBvcnQge1xuICAgIGNyZWF0ZUNsaWVudEF1dGhFcnJvcixcbiAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcyxcbn0gZnJvbSBcIi4uL2Vycm9yL0NsaWVudEF1dGhFcnJvci5qc1wiO1xuaW1wb3J0IHtcbiAgICBBY2NvdW50SW5mbyxcbiAgICBUZW5hbnRQcm9maWxlLFxuICAgIHVwZGF0ZUFjY291bnRUZW5hbnRQcm9maWxlRGF0YSxcbn0gZnJvbSBcIi4uL2FjY291bnQvQWNjb3VudEluZm8uanNcIjtcbmltcG9ydCB7IEFwcE1ldGFkYXRhRW50aXR5IH0gZnJvbSBcIi4vZW50aXRpZXMvQXBwTWV0YWRhdGFFbnRpdHkuanNcIjtcbmltcG9ydCB7IFNlcnZlclRlbGVtZXRyeUVudGl0eSB9IGZyb20gXCIuL2VudGl0aWVzL1NlcnZlclRlbGVtZXRyeUVudGl0eS5qc1wiO1xuaW1wb3J0IHsgVGhyb3R0bGluZ0VudGl0eSB9IGZyb20gXCIuL2VudGl0aWVzL1Rocm90dGxpbmdFbnRpdHkuanNcIjtcbmltcG9ydCB7IGV4dHJhY3RUb2tlbkNsYWltcyB9IGZyb20gXCIuLi9hY2NvdW50L0F1dGhUb2tlbi5qc1wiO1xuaW1wb3J0IHsgSUNyeXB0byB9IGZyb20gXCIuLi9jcnlwdG8vSUNyeXB0by5qc1wiO1xuaW1wb3J0IHsgQXV0aG9yaXR5TWV0YWRhdGFFbnRpdHkgfSBmcm9tIFwiLi9lbnRpdGllcy9BdXRob3JpdHlNZXRhZGF0YUVudGl0eS5qc1wiO1xuaW1wb3J0IHsgQmFzZUF1dGhSZXF1ZXN0IH0gZnJvbSBcIi4uL3JlcXVlc3QvQmFzZUF1dGhSZXF1ZXN0LmpzXCI7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiLi4vbG9nZ2VyL0xvZ2dlci5qc1wiO1xuaW1wb3J0IHsgbmFtZSwgdmVyc2lvbiB9IGZyb20gXCIuLi9wYWNrYWdlTWV0YWRhdGEuanNcIjtcbmltcG9ydCB7IFN0b3JlSW5DYWNoZSB9IGZyb20gXCIuLi9yZXF1ZXN0L1N0b3JlSW5DYWNoZS5qc1wiO1xuaW1wb3J0IHsgZ2V0QWxpYXNlc0Zyb21TdGF0aWNTb3VyY2VzIH0gZnJvbSBcIi4uL2F1dGhvcml0eS9BdXRob3JpdHlNZXRhZGF0YS5qc1wiO1xuaW1wb3J0IHsgU3RhdGljQXV0aG9yaXR5T3B0aW9ucyB9IGZyb20gXCIuLi9hdXRob3JpdHkvQXV0aG9yaXR5T3B0aW9ucy5qc1wiO1xuaW1wb3J0IHsgVG9rZW5DbGFpbXMgfSBmcm9tIFwiLi4vYWNjb3VudC9Ub2tlbkNsYWltcy5qc1wiO1xuaW1wb3J0IHsgSVBlcmZvcm1hbmNlQ2xpZW50IH0gZnJvbSBcIi4uL3RlbGVtZXRyeS9wZXJmb3JtYW5jZS9JUGVyZm9ybWFuY2VDbGllbnQuanNcIjtcbmltcG9ydCB7IENhY2hlRXJyb3IsIENhY2hlRXJyb3JDb2RlcyB9IGZyb20gXCIuLi9lcnJvci9DYWNoZUVycm9yLmpzXCI7XG5cbi8qKlxuICogSW50ZXJmYWNlIGNsYXNzIHdoaWNoIGltcGxlbWVudCBjYWNoZSBzdG9yYWdlIGZ1bmN0aW9ucyB1c2VkIGJ5IE1TQUwgdG8gcGVyZm9ybSB2YWxpZGl0eSBjaGVja3MsIGFuZCBzdG9yZSB0b2tlbnMuXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIENhY2hlTWFuYWdlciBpbXBsZW1lbnRzIElDYWNoZU1hbmFnZXIge1xuICAgIHByb3RlY3RlZCBjbGllbnRJZDogc3RyaW5nO1xuICAgIHByb3RlY3RlZCBjcnlwdG9JbXBsOiBJQ3J5cHRvO1xuICAgIC8vIEluc3RhbmNlIG9mIGxvZ2dlciBmb3IgZnVuY3Rpb25zIGRlZmluZWQgaW4gdGhlIG1zYWwtY29tbW9uIGxheWVyXG4gICAgcHJpdmF0ZSBjb21tb25Mb2dnZXI6IExvZ2dlcjtcbiAgICBwcml2YXRlIHN0YXRpY0F1dGhvcml0eU9wdGlvbnM/OiBTdGF0aWNBdXRob3JpdHlPcHRpb25zO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGNsaWVudElkOiBzdHJpbmcsXG4gICAgICAgIGNyeXB0b0ltcGw6IElDcnlwdG8sXG4gICAgICAgIGxvZ2dlcjogTG9nZ2VyLFxuICAgICAgICBzdGF0aWNBdXRob3JpdHlPcHRpb25zPzogU3RhdGljQXV0aG9yaXR5T3B0aW9uc1xuICAgICkge1xuICAgICAgICB0aGlzLmNsaWVudElkID0gY2xpZW50SWQ7XG4gICAgICAgIHRoaXMuY3J5cHRvSW1wbCA9IGNyeXB0b0ltcGw7XG4gICAgICAgIHRoaXMuY29tbW9uTG9nZ2VyID0gbG9nZ2VyLmNsb25lKG5hbWUsIHZlcnNpb24pO1xuICAgICAgICB0aGlzLnN0YXRpY0F1dGhvcml0eU9wdGlvbnMgPSBzdGF0aWNBdXRob3JpdHlPcHRpb25zO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGZldGNoIHRoZSBhY2NvdW50IGVudGl0eSBmcm9tIHRoZSBwbGF0Zm9ybSBjYWNoZVxuICAgICAqICBAcGFyYW0gYWNjb3VudEtleVxuICAgICAqL1xuICAgIGFic3RyYWN0IGdldEFjY291bnQoXG4gICAgICAgIGFjY291bnRLZXk6IHN0cmluZyxcbiAgICAgICAgbG9nZ2VyPzogTG9nZ2VyXG4gICAgKTogQWNjb3VudEVudGl0eSB8IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBzZXQgYWNjb3VudCBlbnRpdHkgaW4gdGhlIHBsYXRmb3JtIGNhY2hlXG4gICAgICogQHBhcmFtIGFjY291bnRcbiAgICAgKiBAcGFyYW0gY29ycmVsYXRpb25JZFxuICAgICAqL1xuICAgIGFic3RyYWN0IHNldEFjY291bnQoXG4gICAgICAgIGFjY291bnQ6IEFjY291bnRFbnRpdHksXG4gICAgICAgIGNvcnJlbGF0aW9uSWQ6IHN0cmluZ1xuICAgICk6IFByb21pc2U8dm9pZD47XG5cbiAgICAvKipcbiAgICAgKiBmZXRjaCB0aGUgaWRUb2tlbiBlbnRpdHkgZnJvbSB0aGUgcGxhdGZvcm0gY2FjaGVcbiAgICAgKiBAcGFyYW0gaWRUb2tlbktleVxuICAgICAqL1xuICAgIGFic3RyYWN0IGdldElkVG9rZW5DcmVkZW50aWFsKGlkVG9rZW5LZXk6IHN0cmluZyk6IElkVG9rZW5FbnRpdHkgfCBudWxsO1xuXG4gICAgLyoqXG4gICAgICogc2V0IGlkVG9rZW4gZW50aXR5IHRvIHRoZSBwbGF0Zm9ybSBjYWNoZVxuICAgICAqIEBwYXJhbSBpZFRva2VuXG4gICAgICogQHBhcmFtIGNvcnJlbGF0aW9uSWRcbiAgICAgKi9cbiAgICBhYnN0cmFjdCBzZXRJZFRva2VuQ3JlZGVudGlhbChcbiAgICAgICAgaWRUb2tlbjogSWRUb2tlbkVudGl0eSxcbiAgICAgICAgY29ycmVsYXRpb25JZDogc3RyaW5nXG4gICAgKTogUHJvbWlzZTx2b2lkPjtcblxuICAgIC8qKlxuICAgICAqIGZldGNoIHRoZSBpZFRva2VuIGVudGl0eSBmcm9tIHRoZSBwbGF0Zm9ybSBjYWNoZVxuICAgICAqIEBwYXJhbSBhY2Nlc3NUb2tlbktleVxuICAgICAqL1xuICAgIGFic3RyYWN0IGdldEFjY2Vzc1Rva2VuQ3JlZGVudGlhbChcbiAgICAgICAgYWNjZXNzVG9rZW5LZXk6IHN0cmluZ1xuICAgICk6IEFjY2Vzc1Rva2VuRW50aXR5IHwgbnVsbDtcblxuICAgIC8qKlxuICAgICAqIHNldCBhY2Nlc3NUb2tlbiBlbnRpdHkgdG8gdGhlIHBsYXRmb3JtIGNhY2hlXG4gICAgICogQHBhcmFtIGFjY2Vzc1Rva2VuXG4gICAgICogQHBhcmFtIGNvcnJlbGF0aW9uSWRcbiAgICAgKi9cbiAgICBhYnN0cmFjdCBzZXRBY2Nlc3NUb2tlbkNyZWRlbnRpYWwoXG4gICAgICAgIGFjY2Vzc1Rva2VuOiBBY2Nlc3NUb2tlbkVudGl0eSxcbiAgICAgICAgY29ycmVsYXRpb25JZDogc3RyaW5nXG4gICAgKTogUHJvbWlzZTx2b2lkPjtcblxuICAgIC8qKlxuICAgICAqIGZldGNoIHRoZSBpZFRva2VuIGVudGl0eSBmcm9tIHRoZSBwbGF0Zm9ybSBjYWNoZVxuICAgICAqIEBwYXJhbSByZWZyZXNoVG9rZW5LZXlcbiAgICAgKi9cbiAgICBhYnN0cmFjdCBnZXRSZWZyZXNoVG9rZW5DcmVkZW50aWFsKFxuICAgICAgICByZWZyZXNoVG9rZW5LZXk6IHN0cmluZ1xuICAgICk6IFJlZnJlc2hUb2tlbkVudGl0eSB8IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBzZXQgcmVmcmVzaFRva2VuIGVudGl0eSB0byB0aGUgcGxhdGZvcm0gY2FjaGVcbiAgICAgKiBAcGFyYW0gcmVmcmVzaFRva2VuXG4gICAgICogQHBhcmFtIGNvcnJlbGF0aW9uSWRcbiAgICAgKi9cbiAgICBhYnN0cmFjdCBzZXRSZWZyZXNoVG9rZW5DcmVkZW50aWFsKFxuICAgICAgICByZWZyZXNoVG9rZW46IFJlZnJlc2hUb2tlbkVudGl0eSxcbiAgICAgICAgY29ycmVsYXRpb25JZDogc3RyaW5nXG4gICAgKTogUHJvbWlzZTx2b2lkPjtcblxuICAgIC8qKlxuICAgICAqIGZldGNoIGFwcE1ldGFkYXRhIGVudGl0eSBmcm9tIHRoZSBwbGF0Zm9ybSBjYWNoZVxuICAgICAqIEBwYXJhbSBhcHBNZXRhZGF0YUtleVxuICAgICAqL1xuICAgIGFic3RyYWN0IGdldEFwcE1ldGFkYXRhKGFwcE1ldGFkYXRhS2V5OiBzdHJpbmcpOiBBcHBNZXRhZGF0YUVudGl0eSB8IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBzZXQgYXBwTWV0YWRhdGEgZW50aXR5IHRvIHRoZSBwbGF0Zm9ybSBjYWNoZVxuICAgICAqIEBwYXJhbSBhcHBNZXRhZGF0YVxuICAgICAqL1xuICAgIGFic3RyYWN0IHNldEFwcE1ldGFkYXRhKGFwcE1ldGFkYXRhOiBBcHBNZXRhZGF0YUVudGl0eSk6IHZvaWQ7XG5cbiAgICAvKipcbiAgICAgKiBmZXRjaCBzZXJ2ZXIgdGVsZW1ldHJ5IGVudGl0eSBmcm9tIHRoZSBwbGF0Zm9ybSBjYWNoZVxuICAgICAqIEBwYXJhbSBzZXJ2ZXJUZWxlbWV0cnlLZXlcbiAgICAgKi9cbiAgICBhYnN0cmFjdCBnZXRTZXJ2ZXJUZWxlbWV0cnkoXG4gICAgICAgIHNlcnZlclRlbGVtZXRyeUtleTogc3RyaW5nXG4gICAgKTogU2VydmVyVGVsZW1ldHJ5RW50aXR5IHwgbnVsbDtcblxuICAgIC8qKlxuICAgICAqIHNldCBzZXJ2ZXIgdGVsZW1ldHJ5IGVudGl0eSB0byB0aGUgcGxhdGZvcm0gY2FjaGVcbiAgICAgKiBAcGFyYW0gc2VydmVyVGVsZW1ldHJ5S2V5XG4gICAgICogQHBhcmFtIHNlcnZlclRlbGVtZXRyeVxuICAgICAqL1xuICAgIGFic3RyYWN0IHNldFNlcnZlclRlbGVtZXRyeShcbiAgICAgICAgc2VydmVyVGVsZW1ldHJ5S2V5OiBzdHJpbmcsXG4gICAgICAgIHNlcnZlclRlbGVtZXRyeTogU2VydmVyVGVsZW1ldHJ5RW50aXR5XG4gICAgKTogdm9pZDtcblxuICAgIC8qKlxuICAgICAqIGZldGNoIGNsb3VkIGRpc2NvdmVyeSBtZXRhZGF0YSBlbnRpdHkgZnJvbSB0aGUgcGxhdGZvcm0gY2FjaGVcbiAgICAgKiBAcGFyYW0ga2V5XG4gICAgICovXG4gICAgYWJzdHJhY3QgZ2V0QXV0aG9yaXR5TWV0YWRhdGEoa2V5OiBzdHJpbmcpOiBBdXRob3JpdHlNZXRhZGF0YUVudGl0eSB8IG51bGw7XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIGFic3RyYWN0IGdldEF1dGhvcml0eU1ldGFkYXRhS2V5cygpOiBBcnJheTxzdHJpbmc+O1xuXG4gICAgLyoqXG4gICAgICogc2V0IGNsb3VkIGRpc2NvdmVyeSBtZXRhZGF0YSBlbnRpdHkgdG8gdGhlIHBsYXRmb3JtIGNhY2hlXG4gICAgICogQHBhcmFtIGtleVxuICAgICAqIEBwYXJhbSB2YWx1ZVxuICAgICAqL1xuICAgIGFic3RyYWN0IHNldEF1dGhvcml0eU1ldGFkYXRhKFxuICAgICAgICBrZXk6IHN0cmluZyxcbiAgICAgICAgdmFsdWU6IEF1dGhvcml0eU1ldGFkYXRhRW50aXR5XG4gICAgKTogdm9pZDtcblxuICAgIC8qKlxuICAgICAqIGZldGNoIHRocm90dGxpbmcgZW50aXR5IGZyb20gdGhlIHBsYXRmb3JtIGNhY2hlXG4gICAgICogQHBhcmFtIHRocm90dGxpbmdDYWNoZUtleVxuICAgICAqL1xuICAgIGFic3RyYWN0IGdldFRocm90dGxpbmdDYWNoZShcbiAgICAgICAgdGhyb3R0bGluZ0NhY2hlS2V5OiBzdHJpbmdcbiAgICApOiBUaHJvdHRsaW5nRW50aXR5IHwgbnVsbDtcblxuICAgIC8qKlxuICAgICAqIHNldCB0aHJvdHRsaW5nIGVudGl0eSB0byB0aGUgcGxhdGZvcm0gY2FjaGVcbiAgICAgKiBAcGFyYW0gdGhyb3R0bGluZ0NhY2hlS2V5XG4gICAgICogQHBhcmFtIHRocm90dGxpbmdDYWNoZVxuICAgICAqL1xuICAgIGFic3RyYWN0IHNldFRocm90dGxpbmdDYWNoZShcbiAgICAgICAgdGhyb3R0bGluZ0NhY2hlS2V5OiBzdHJpbmcsXG4gICAgICAgIHRocm90dGxpbmdDYWNoZTogVGhyb3R0bGluZ0VudGl0eVxuICAgICk6IHZvaWQ7XG5cbiAgICAvKipcbiAgICAgKiBGdW5jdGlvbiB0byByZW1vdmUgYW4gaXRlbSBmcm9tIGNhY2hlIGdpdmVuIGl0cyBrZXkuXG4gICAgICogQHBhcmFtIGtleVxuICAgICAqL1xuICAgIGFic3RyYWN0IHJlbW92ZUl0ZW0oa2V5OiBzdHJpbmcpOiB2b2lkO1xuXG4gICAgLyoqXG4gICAgICogRnVuY3Rpb24gd2hpY2ggcmV0cmlldmVzIGFsbCBjdXJyZW50IGtleXMgZnJvbSB0aGUgY2FjaGUuXG4gICAgICovXG4gICAgYWJzdHJhY3QgZ2V0S2V5cygpOiBzdHJpbmdbXTtcblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHdoaWNoIHJldHJpZXZlcyBhbGwgYWNjb3VudCBrZXlzIGZyb20gdGhlIGNhY2hlXG4gICAgICovXG4gICAgYWJzdHJhY3QgZ2V0QWNjb3VudEtleXMoKTogc3RyaW5nW107XG5cbiAgICAvKipcbiAgICAgKiBGdW5jdGlvbiB3aGljaCByZXRyaWV2ZXMgYWxsIHRva2VuIGtleXMgZnJvbSB0aGUgY2FjaGVcbiAgICAgKi9cbiAgICBhYnN0cmFjdCBnZXRUb2tlbktleXMoKTogVG9rZW5LZXlzO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbGwgdGhlIGFjY291bnRzIGluIHRoZSBjYWNoZSB0aGF0IG1hdGNoIHRoZSBvcHRpb25hbCBmaWx0ZXIuIElmIG5vIGZpbHRlciBpcyBwcm92aWRlZCwgYWxsIGFjY291bnRzIGFyZSByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0gYWNjb3VudEZpbHRlciAtIChPcHRpb25hbCkgZmlsdGVyIHRvIG5hcnJvdyBkb3duIHRoZSBhY2NvdW50cyByZXR1cm5lZFxuICAgICAqIEByZXR1cm5zIEFycmF5IG9mIEFjY291bnRJbmZvIG9iamVjdHMgaW4gY2FjaGVcbiAgICAgKi9cbiAgICBnZXRBbGxBY2NvdW50cyhhY2NvdW50RmlsdGVyPzogQWNjb3VudEZpbHRlcik6IEFjY291bnRJbmZvW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5idWlsZFRlbmFudFByb2ZpbGVzKFxuICAgICAgICAgICAgdGhpcy5nZXRBY2NvdW50c0ZpbHRlcmVkQnkoYWNjb3VudEZpbHRlciB8fCB7fSksXG4gICAgICAgICAgICBhY2NvdW50RmlsdGVyXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBmaXJzdCB0ZW5hbnRlZCBBY2NvdW50SW5mbyBvYmplY3QgZm91bmQgYmFzZWQgb24gcHJvdmlkZWQgZmlsdGVyc1xuICAgICAqL1xuICAgIGdldEFjY291bnRJbmZvRmlsdGVyZWRCeShhY2NvdW50RmlsdGVyOiBBY2NvdW50RmlsdGVyKTogQWNjb3VudEluZm8gfCBudWxsIHtcbiAgICAgICAgY29uc3QgYWxsQWNjb3VudHMgPSB0aGlzLmdldEFsbEFjY291bnRzKGFjY291bnRGaWx0ZXIpO1xuICAgICAgICBpZiAoYWxsQWNjb3VudHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgLy8gSWYgb25lIG9yIG1vcmUgYWNjb3VudHMgYXJlIGZvdW5kLCBwcmlvcml0aXplIGFjY291bnRzIHRoYXQgaGF2ZSBhbiBJRCB0b2tlblxuICAgICAgICAgICAgY29uc3Qgc29ydGVkQWNjb3VudHMgPSBhbGxBY2NvdW50cy5zb3J0KChhY2NvdW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjY291bnQuaWRUb2tlbkNsYWltcyA/IC0xIDogMTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHNvcnRlZEFjY291bnRzWzBdO1xuICAgICAgICB9IGVsc2UgaWYgKGFsbEFjY291bnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgLy8gSWYgb25seSBvbmUgYWNjb3VudCBpcyBmb3VuZCwgcmV0dXJuIGl0IHJlZ2FyZGxlc3Mgb2Ygd2hldGhlciBhIG1hdGNoaW5nIElEIHRva2VuIHdhcyBmb3VuZFxuICAgICAgICAgICAgcmV0dXJuIGFsbEFjY291bnRzWzBdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc2luZ2xlIG1hdGNoaW5nXG4gICAgICogQHBhcmFtIGFjY291bnRGaWx0ZXJcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIGdldEJhc2VBY2NvdW50SW5mbyhhY2NvdW50RmlsdGVyOiBBY2NvdW50RmlsdGVyKTogQWNjb3VudEluZm8gfCBudWxsIHtcbiAgICAgICAgY29uc3QgYWNjb3VudEVudGl0aWVzID0gdGhpcy5nZXRBY2NvdW50c0ZpbHRlcmVkQnkoYWNjb3VudEZpbHRlcik7XG4gICAgICAgIGlmIChhY2NvdW50RW50aXRpZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGFjY291bnRFbnRpdGllc1swXS5nZXRBY2NvdW50SW5mbygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYXRjaGVzIGZpbHRlcmVkIGFjY291bnQgZW50aXRpZXMgd2l0aCBjYWNoZWQgSUQgdG9rZW5zIHRoYXQgbWF0Y2ggdGhlIHRlbmFudCBwcm9maWxlLXNwZWNpZmljIGFjY291bnQgZmlsdGVyc1xuICAgICAqIGFuZCBidWlsZHMgdGhlIGFjY291bnQgaW5mbyBvYmplY3RzIGZyb20gdGhlIG1hdGNoaW5nIElEIHRva2VuJ3MgY2xhaW1zXG4gICAgICogQHBhcmFtIGNhY2hlZEFjY291bnRzXG4gICAgICogQHBhcmFtIGFjY291bnRGaWx0ZXJcbiAgICAgKiBAcmV0dXJucyBBcnJheSBvZiBBY2NvdW50SW5mbyBvYmplY3RzIHRoYXQgbWF0Y2ggYWNjb3VudCBhbmQgdGVuYW50IHByb2ZpbGUgZmlsdGVyc1xuICAgICAqL1xuICAgIHByaXZhdGUgYnVpbGRUZW5hbnRQcm9maWxlcyhcbiAgICAgICAgY2FjaGVkQWNjb3VudHM6IEFjY291bnRFbnRpdHlbXSxcbiAgICAgICAgYWNjb3VudEZpbHRlcj86IEFjY291bnRGaWx0ZXJcbiAgICApOiBBY2NvdW50SW5mb1tdIHtcbiAgICAgICAgcmV0dXJuIGNhY2hlZEFjY291bnRzLmZsYXRNYXAoKGFjY291bnRFbnRpdHkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRlbmFudFByb2ZpbGVzRnJvbUFjY291bnRFbnRpdHkoXG4gICAgICAgICAgICAgICAgYWNjb3VudEVudGl0eSxcbiAgICAgICAgICAgICAgICBhY2NvdW50RmlsdGVyPy50ZW5hbnRJZCxcbiAgICAgICAgICAgICAgICBhY2NvdW50RmlsdGVyXG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFRlbmFudGVkQWNjb3VudEluZm9CeUZpbHRlcihcbiAgICAgICAgYWNjb3VudEluZm86IEFjY291bnRJbmZvLFxuICAgICAgICB0b2tlbktleXM6IFRva2VuS2V5cyxcbiAgICAgICAgdGVuYW50UHJvZmlsZTogVGVuYW50UHJvZmlsZSxcbiAgICAgICAgdGVuYW50UHJvZmlsZUZpbHRlcj86IFRlbmFudFByb2ZpbGVGaWx0ZXJcbiAgICApOiBBY2NvdW50SW5mbyB8IG51bGwge1xuICAgICAgICBsZXQgdGVuYW50ZWRBY2NvdW50SW5mbzogQWNjb3VudEluZm8gfCBudWxsID0gbnVsbDtcbiAgICAgICAgbGV0IGlkVG9rZW5DbGFpbXM6IFRva2VuQ2xhaW1zIHwgdW5kZWZpbmVkO1xuXG4gICAgICAgIGlmICh0ZW5hbnRQcm9maWxlRmlsdGVyKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgIXRoaXMudGVuYW50UHJvZmlsZU1hdGNoZXNGaWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgIHRlbmFudFByb2ZpbGUsXG4gICAgICAgICAgICAgICAgICAgIHRlbmFudFByb2ZpbGVGaWx0ZXJcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGlkVG9rZW4gPSB0aGlzLmdldElkVG9rZW4oXG4gICAgICAgICAgICBhY2NvdW50SW5mbyxcbiAgICAgICAgICAgIHRva2VuS2V5cyxcbiAgICAgICAgICAgIHRlbmFudFByb2ZpbGUudGVuYW50SWRcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoaWRUb2tlbikge1xuICAgICAgICAgICAgaWRUb2tlbkNsYWltcyA9IGV4dHJhY3RUb2tlbkNsYWltcyhcbiAgICAgICAgICAgICAgICBpZFRva2VuLnNlY3JldCxcbiAgICAgICAgICAgICAgICB0aGlzLmNyeXB0b0ltcGwuYmFzZTY0RGVjb2RlXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgIXRoaXMuaWRUb2tlbkNsYWltc01hdGNoVGVuYW50UHJvZmlsZUZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgaWRUb2tlbkNsYWltcyxcbiAgICAgICAgICAgICAgICAgICAgdGVuYW50UHJvZmlsZUZpbHRlclxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIC8vIElEIHRva2VuIHNvdXJjZWQgY2xhaW1zIGRvbid0IG1hdGNoIHNvIHRoaXMgdGVuYW50IHByb2ZpbGUgaXMgbm90IGEgbWF0Y2hcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV4cGFuZCB0ZW5hbnQgcHJvZmlsZSBpbnRvIGFjY291bnQgaW5mbyBiYXNlZCBvbiBtYXRjaGluZyB0ZW5hbnQgcHJvZmlsZSBhbmQgaWYgYXZhaWxhYmxlIG1hdGNoaW5nIElEIHRva2VuIGNsYWltc1xuICAgICAgICB0ZW5hbnRlZEFjY291bnRJbmZvID0gdXBkYXRlQWNjb3VudFRlbmFudFByb2ZpbGVEYXRhKFxuICAgICAgICAgICAgYWNjb3VudEluZm8sXG4gICAgICAgICAgICB0ZW5hbnRQcm9maWxlLFxuICAgICAgICAgICAgaWRUb2tlbkNsYWltcyxcbiAgICAgICAgICAgIGlkVG9rZW4/LnNlY3JldFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiB0ZW5hbnRlZEFjY291bnRJbmZvO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0VGVuYW50UHJvZmlsZXNGcm9tQWNjb3VudEVudGl0eShcbiAgICAgICAgYWNjb3VudEVudGl0eTogQWNjb3VudEVudGl0eSxcbiAgICAgICAgdGFyZ2V0VGVuYW50SWQ/OiBzdHJpbmcsXG4gICAgICAgIHRlbmFudFByb2ZpbGVGaWx0ZXI/OiBUZW5hbnRQcm9maWxlRmlsdGVyXG4gICAgKTogQWNjb3VudEluZm9bXSB7XG4gICAgICAgIGNvbnN0IGFjY291bnRJbmZvID0gYWNjb3VudEVudGl0eS5nZXRBY2NvdW50SW5mbygpO1xuICAgICAgICBsZXQgc2VhcmNoVGVuYW50UHJvZmlsZXM6IE1hcDxzdHJpbmcsIFRlbmFudFByb2ZpbGU+ID1cbiAgICAgICAgICAgIGFjY291bnRJbmZvLnRlbmFudFByb2ZpbGVzIHx8IG5ldyBNYXA8c3RyaW5nLCBUZW5hbnRQcm9maWxlPigpO1xuICAgICAgICBjb25zdCB0b2tlbktleXMgPSB0aGlzLmdldFRva2VuS2V5cygpO1xuXG4gICAgICAgIC8vIElmIGEgdGVuYW50IElEIHdhcyBwcm92aWRlZCwgb25seSByZXR1cm4gdGhlIHRlbmFudCBwcm9maWxlIGZvciB0aGF0IHRlbmFudCBJRCBpZiBpdCBleGlzdHNcbiAgICAgICAgaWYgKHRhcmdldFRlbmFudElkKSB7XG4gICAgICAgICAgICBjb25zdCB0ZW5hbnRQcm9maWxlID0gc2VhcmNoVGVuYW50UHJvZmlsZXMuZ2V0KHRhcmdldFRlbmFudElkKTtcbiAgICAgICAgICAgIGlmICh0ZW5hbnRQcm9maWxlKSB7XG4gICAgICAgICAgICAgICAgLy8gUmVkdWNlIHNlYXJjaCBmaWVsZCB0byBqdXN0IHRoaXMgdGVuYW50IHByb2ZpbGVcbiAgICAgICAgICAgICAgICBzZWFyY2hUZW5hbnRQcm9maWxlcyA9IG5ldyBNYXA8c3RyaW5nLCBUZW5hbnRQcm9maWxlPihbXG4gICAgICAgICAgICAgICAgICAgIFt0YXJnZXRUZW5hbnRJZCwgdGVuYW50UHJvZmlsZV0sXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIE5vIHRlbmFudCBwcm9maWxlIGZvciBzZWFyY2ggdGVuYW50IElELCByZXR1cm4gZW1wdHkgYXJyYXlcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBtYXRjaGluZ1RlbmFudFByb2ZpbGVzOiBBY2NvdW50SW5mb1tdID0gW107XG4gICAgICAgIHNlYXJjaFRlbmFudFByb2ZpbGVzLmZvckVhY2goKHRlbmFudFByb2ZpbGU6IFRlbmFudFByb2ZpbGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRlbmFudGVkQWNjb3VudEluZm8gPSB0aGlzLmdldFRlbmFudGVkQWNjb3VudEluZm9CeUZpbHRlcihcbiAgICAgICAgICAgICAgICBhY2NvdW50SW5mbyxcbiAgICAgICAgICAgICAgICB0b2tlbktleXMsXG4gICAgICAgICAgICAgICAgdGVuYW50UHJvZmlsZSxcbiAgICAgICAgICAgICAgICB0ZW5hbnRQcm9maWxlRmlsdGVyXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKHRlbmFudGVkQWNjb3VudEluZm8pIHtcbiAgICAgICAgICAgICAgICBtYXRjaGluZ1RlbmFudFByb2ZpbGVzLnB1c2godGVuYW50ZWRBY2NvdW50SW5mbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBtYXRjaGluZ1RlbmFudFByb2ZpbGVzO1xuICAgIH1cblxuICAgIHByaXZhdGUgdGVuYW50UHJvZmlsZU1hdGNoZXNGaWx0ZXIoXG4gICAgICAgIHRlbmFudFByb2ZpbGU6IFRlbmFudFByb2ZpbGUsXG4gICAgICAgIHRlbmFudFByb2ZpbGVGaWx0ZXI6IFRlbmFudFByb2ZpbGVGaWx0ZXJcbiAgICApOiBib29sZWFuIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgISF0ZW5hbnRQcm9maWxlRmlsdGVyLmxvY2FsQWNjb3VudElkICYmXG4gICAgICAgICAgICAhdGhpcy5tYXRjaExvY2FsQWNjb3VudElkRnJvbVRlbmFudFByb2ZpbGUoXG4gICAgICAgICAgICAgICAgdGVuYW50UHJvZmlsZSxcbiAgICAgICAgICAgICAgICB0ZW5hbnRQcm9maWxlRmlsdGVyLmxvY2FsQWNjb3VudElkXG4gICAgICAgICAgICApXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgISF0ZW5hbnRQcm9maWxlRmlsdGVyLm5hbWUgJiZcbiAgICAgICAgICAgICEodGVuYW50UHJvZmlsZS5uYW1lID09PSB0ZW5hbnRQcm9maWxlRmlsdGVyLm5hbWUpXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGVuYW50UHJvZmlsZUZpbHRlci5pc0hvbWVUZW5hbnQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgISh0ZW5hbnRQcm9maWxlLmlzSG9tZVRlbmFudCA9PT0gdGVuYW50UHJvZmlsZUZpbHRlci5pc0hvbWVUZW5hbnQpXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpZFRva2VuQ2xhaW1zTWF0Y2hUZW5hbnRQcm9maWxlRmlsdGVyKFxuICAgICAgICBpZFRva2VuQ2xhaW1zOiBUb2tlbkNsYWltcyxcbiAgICAgICAgdGVuYW50UHJvZmlsZUZpbHRlcj86IFRlbmFudFByb2ZpbGVGaWx0ZXJcbiAgICApOiBib29sZWFuIHtcbiAgICAgICAgLy8gVGVuYW50IFByb2ZpbGUgZmlsdGVyaW5nXG4gICAgICAgIGlmICh0ZW5hbnRQcm9maWxlRmlsdGVyKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgISF0ZW5hbnRQcm9maWxlRmlsdGVyLmxvY2FsQWNjb3VudElkICYmXG4gICAgICAgICAgICAgICAgIXRoaXMubWF0Y2hMb2NhbEFjY291bnRJZEZyb21Ub2tlbkNsYWltcyhcbiAgICAgICAgICAgICAgICAgICAgaWRUb2tlbkNsYWltcyxcbiAgICAgICAgICAgICAgICAgICAgdGVuYW50UHJvZmlsZUZpbHRlci5sb2NhbEFjY291bnRJZFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICEhdGVuYW50UHJvZmlsZUZpbHRlci5sb2dpbkhpbnQgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5tYXRjaExvZ2luSGludEZyb21Ub2tlbkNsYWltcyhcbiAgICAgICAgICAgICAgICAgICAgaWRUb2tlbkNsYWltcyxcbiAgICAgICAgICAgICAgICAgICAgdGVuYW50UHJvZmlsZUZpbHRlci5sb2dpbkhpbnRcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhIXRlbmFudFByb2ZpbGVGaWx0ZXIudXNlcm5hbWUgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5tYXRjaFVzZXJuYW1lKFxuICAgICAgICAgICAgICAgICAgICBpZFRva2VuQ2xhaW1zLnByZWZlcnJlZF91c2VybmFtZSxcbiAgICAgICAgICAgICAgICAgICAgdGVuYW50UHJvZmlsZUZpbHRlci51c2VybmFtZVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICEhdGVuYW50UHJvZmlsZUZpbHRlci5uYW1lICYmXG4gICAgICAgICAgICAgICAgIXRoaXMubWF0Y2hOYW1lKGlkVG9rZW5DbGFpbXMsIHRlbmFudFByb2ZpbGVGaWx0ZXIubmFtZSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICEhdGVuYW50UHJvZmlsZUZpbHRlci5zaWQgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5tYXRjaFNpZChpZFRva2VuQ2xhaW1zLCB0ZW5hbnRQcm9maWxlRmlsdGVyLnNpZClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHNhdmVzIGEgY2FjaGUgcmVjb3JkXG4gICAgICogQHBhcmFtIGNhY2hlUmVjb3JkIHtDYWNoZVJlY29yZH1cbiAgICAgKiBAcGFyYW0gc3RvcmVJbkNhY2hlIHs/U3RvcmVJbkNhY2hlfVxuICAgICAqIEBwYXJhbSBjb3JyZWxhdGlvbklkIHs/c3RyaW5nfSBjb3JyZWxhdGlvbiBpZFxuICAgICAqL1xuICAgIGFzeW5jIHNhdmVDYWNoZVJlY29yZChcbiAgICAgICAgY2FjaGVSZWNvcmQ6IENhY2hlUmVjb3JkLFxuICAgICAgICBjb3JyZWxhdGlvbklkOiBzdHJpbmcsXG4gICAgICAgIHN0b3JlSW5DYWNoZT86IFN0b3JlSW5DYWNoZVxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoIWNhY2hlUmVjb3JkKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZENhY2hlUmVjb3JkXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICghIWNhY2hlUmVjb3JkLmFjY291bnQpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNldEFjY291bnQoY2FjaGVSZWNvcmQuYWNjb3VudCwgY29ycmVsYXRpb25JZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghIWNhY2hlUmVjb3JkLmlkVG9rZW4gJiYgc3RvcmVJbkNhY2hlPy5pZFRva2VuICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0SWRUb2tlbkNyZWRlbnRpYWwoXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlUmVjb3JkLmlkVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIGNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgISFjYWNoZVJlY29yZC5hY2Nlc3NUb2tlbiAmJlxuICAgICAgICAgICAgICAgIHN0b3JlSW5DYWNoZT8uYWNjZXNzVG9rZW4gIT09IGZhbHNlXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBY2Nlc3NUb2tlbihcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVSZWNvcmQuYWNjZXNzVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIGNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgISFjYWNoZVJlY29yZC5yZWZyZXNoVG9rZW4gJiZcbiAgICAgICAgICAgICAgICBzdG9yZUluQ2FjaGU/LnJlZnJlc2hUb2tlbiAhPT0gZmFsc2VcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0UmVmcmVzaFRva2VuQ3JlZGVudGlhbChcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVSZWNvcmQucmVmcmVzaFRva2VuLFxuICAgICAgICAgICAgICAgICAgICBjb3JyZWxhdGlvbklkXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCEhY2FjaGVSZWNvcmQuYXBwTWV0YWRhdGEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEFwcE1ldGFkYXRhKGNhY2hlUmVjb3JkLmFwcE1ldGFkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZTogdW5rbm93bikge1xuICAgICAgICAgICAgdGhpcy5jb21tb25Mb2dnZXI/LmVycm9yKGBDYWNoZU1hbmFnZXIuc2F2ZUNhY2hlUmVjb3JkOiBmYWlsZWRgKTtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1vbkxvZ2dlcj8uZXJyb3JQaWkoXG4gICAgICAgICAgICAgICAgICAgIGBDYWNoZU1hbmFnZXIuc2F2ZUNhY2hlUmVjb3JkOiAke2UubWVzc2FnZX1gLFxuICAgICAgICAgICAgICAgICAgICBjb3JyZWxhdGlvbklkXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgZS5uYW1lID09PSBcIlF1b3RhRXhjZWVkZWRFcnJvclwiIHx8XG4gICAgICAgICAgICAgICAgICAgIGUubmFtZSA9PT0gXCJOU19FUlJPUl9ET01fUVVPVEFfUkVBQ0hFRFwiIHx8XG4gICAgICAgICAgICAgICAgICAgIGUubWVzc2FnZS5pbmNsdWRlcyhcImV4Y2VlZGVkIHRoZSBxdW90YVwiKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbW1vbkxvZ2dlcj8uZXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICAgICBgQ2FjaGVNYW5hZ2VyLnNhdmVDYWNoZVJlY29yZDogZXhjZWVkZWQgc3RvcmFnZSBxdW90YWAsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3JyZWxhdGlvbklkXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBDYWNoZUVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgQ2FjaGVFcnJvckNvZGVzLmNhY2hlUXVvdGFFeGNlZWRlZEVycm9yQ29kZVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBDYWNoZUVycm9yKGUubmFtZSwgZS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbW9uTG9nZ2VyPy5lcnJvclBpaShcbiAgICAgICAgICAgICAgICAgICAgYENhY2hlTWFuYWdlci5zYXZlQ2FjaGVSZWNvcmQ6ICR7ZX1gLFxuICAgICAgICAgICAgICAgICAgICBjb3JyZWxhdGlvbklkXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ2FjaGVFcnJvcihDYWNoZUVycm9yQ29kZXMuY2FjaGVVbmtub3duRXJyb3JDb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHNhdmVzIGFjY2VzcyB0b2tlbiBjcmVkZW50aWFsXG4gICAgICogQHBhcmFtIGNyZWRlbnRpYWxcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIHNhdmVBY2Nlc3NUb2tlbihcbiAgICAgICAgY3JlZGVudGlhbDogQWNjZXNzVG9rZW5FbnRpdHksXG4gICAgICAgIGNvcnJlbGF0aW9uSWQ6IHN0cmluZ1xuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbkZpbHRlcjogQ3JlZGVudGlhbEZpbHRlciA9IHtcbiAgICAgICAgICAgIGNsaWVudElkOiBjcmVkZW50aWFsLmNsaWVudElkLFxuICAgICAgICAgICAgY3JlZGVudGlhbFR5cGU6IGNyZWRlbnRpYWwuY3JlZGVudGlhbFR5cGUsXG4gICAgICAgICAgICBlbnZpcm9ubWVudDogY3JlZGVudGlhbC5lbnZpcm9ubWVudCxcbiAgICAgICAgICAgIGhvbWVBY2NvdW50SWQ6IGNyZWRlbnRpYWwuaG9tZUFjY291bnRJZCxcbiAgICAgICAgICAgIHJlYWxtOiBjcmVkZW50aWFsLnJlYWxtLFxuICAgICAgICAgICAgdG9rZW5UeXBlOiBjcmVkZW50aWFsLnRva2VuVHlwZSxcbiAgICAgICAgICAgIHJlcXVlc3RlZENsYWltc0hhc2g6IGNyZWRlbnRpYWwucmVxdWVzdGVkQ2xhaW1zSGFzaCxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCB0b2tlbktleXMgPSB0aGlzLmdldFRva2VuS2V5cygpO1xuICAgICAgICBjb25zdCBjdXJyZW50U2NvcGVzID0gU2NvcGVTZXQuZnJvbVN0cmluZyhjcmVkZW50aWFsLnRhcmdldCk7XG5cbiAgICAgICAgY29uc3QgcmVtb3ZlZEFjY2Vzc1Rva2VuczogQXJyYXk8UHJvbWlzZTx2b2lkPj4gPSBbXTtcbiAgICAgICAgdG9rZW5LZXlzLmFjY2Vzc1Rva2VuLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICF0aGlzLmFjY2Vzc1Rva2VuS2V5TWF0Y2hlc0ZpbHRlcihrZXksIGFjY2Vzc1Rva2VuRmlsdGVyLCBmYWxzZSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgdG9rZW5FbnRpdHkgPSB0aGlzLmdldEFjY2Vzc1Rva2VuQ3JlZGVudGlhbChrZXkpO1xuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgdG9rZW5FbnRpdHkgJiZcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWRlbnRpYWxNYXRjaGVzRmlsdGVyKHRva2VuRW50aXR5LCBhY2Nlc3NUb2tlbkZpbHRlcilcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuU2NvcGVTZXQgPSBTY29wZVNldC5mcm9tU3RyaW5nKHRva2VuRW50aXR5LnRhcmdldCk7XG4gICAgICAgICAgICAgICAgaWYgKHRva2VuU2NvcGVTZXQuaW50ZXJzZWN0aW5nU2NvcGVTZXRzKGN1cnJlbnRTY29wZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZWRBY2Nlc3NUb2tlbnMucHVzaCh0aGlzLnJlbW92ZUFjY2Vzc1Rva2VuKGtleSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHJlbW92ZWRBY2Nlc3NUb2tlbnMpO1xuICAgICAgICBhd2FpdCB0aGlzLnNldEFjY2Vzc1Rva2VuQ3JlZGVudGlhbChjcmVkZW50aWFsLCBjb3JyZWxhdGlvbklkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSBhY2NvdW50IGVudGl0aWVzIG1hdGNoaW5nIGFsbCBwcm92aWRlZCB0ZW5hbnQtYWdub3N0aWMgZmlsdGVyczsgaWYgbm8gZmlsdGVyIGlzIHNldCwgZ2V0IGFsbCBhY2NvdW50IGVudGl0aWVzIGluIHRoZSBjYWNoZVxuICAgICAqIE5vdCBjaGVja2luZyBmb3IgY2FzaW5nIGFzIGtleXMgYXJlIGFsbCBnZW5lcmF0ZWQgaW4gbG93ZXIgY2FzZSwgcmVtZW1iZXIgdG8gY29udmVydCB0byBsb3dlciBjYXNlIGlmIG9iamVjdCBwcm9wZXJ0aWVzIGFyZSBjb21wYXJlZFxuICAgICAqIEBwYXJhbSBhY2NvdW50RmlsdGVyIC0gQW4gb2JqZWN0IGNvbnRhaW5pbmcgQWNjb3VudCBwcm9wZXJ0aWVzIHRvIGZpbHRlciBieVxuICAgICAqL1xuICAgIGdldEFjY291bnRzRmlsdGVyZWRCeShhY2NvdW50RmlsdGVyOiBBY2NvdW50RmlsdGVyKTogQWNjb3VudEVudGl0eVtdIHtcbiAgICAgICAgY29uc3QgYWxsQWNjb3VudEtleXMgPSB0aGlzLmdldEFjY291bnRLZXlzKCk7XG4gICAgICAgIGNvbnN0IG1hdGNoaW5nQWNjb3VudHM6IEFjY291bnRFbnRpdHlbXSA9IFtdO1xuICAgICAgICBhbGxBY2NvdW50S2V5cy5mb3JFYWNoKChjYWNoZUtleSkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQWNjb3VudEtleShjYWNoZUtleSwgYWNjb3VudEZpbHRlci5ob21lQWNjb3VudElkKSkge1xuICAgICAgICAgICAgICAgIC8vIERvbid0IHBhcnNlIHZhbHVlIGlmIHRoZSBrZXkgZG9lc24ndCBtYXRjaCB0aGUgYWNjb3VudCBmaWx0ZXJzXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBlbnRpdHk6IEFjY291bnRFbnRpdHkgfCBudWxsID0gdGhpcy5nZXRBY2NvdW50KFxuICAgICAgICAgICAgICAgIGNhY2hlS2V5LFxuICAgICAgICAgICAgICAgIHRoaXMuY29tbW9uTG9nZ2VyXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyBNYXRjaCBiYXNlIGFjY291bnQgZmllbGRzXG5cbiAgICAgICAgICAgIGlmICghZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgISFhY2NvdW50RmlsdGVyLmhvbWVBY2NvdW50SWQgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5tYXRjaEhvbWVBY2NvdW50SWQoZW50aXR5LCBhY2NvdW50RmlsdGVyLmhvbWVBY2NvdW50SWQpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhIWFjY291bnRGaWx0ZXIudXNlcm5hbWUgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5tYXRjaFVzZXJuYW1lKGVudGl0eS51c2VybmFtZSwgYWNjb3VudEZpbHRlci51c2VybmFtZSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICEhYWNjb3VudEZpbHRlci5lbnZpcm9ubWVudCAmJlxuICAgICAgICAgICAgICAgICF0aGlzLm1hdGNoRW52aXJvbm1lbnQoZW50aXR5LCBhY2NvdW50RmlsdGVyLmVudmlyb25tZW50KVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgISFhY2NvdW50RmlsdGVyLnJlYWxtICYmXG4gICAgICAgICAgICAgICAgIXRoaXMubWF0Y2hSZWFsbShlbnRpdHksIGFjY291bnRGaWx0ZXIucmVhbG0pXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhIWFjY291bnRGaWx0ZXIubmF0aXZlQWNjb3VudElkICYmXG4gICAgICAgICAgICAgICAgIXRoaXMubWF0Y2hOYXRpdmVBY2NvdW50SWQoXG4gICAgICAgICAgICAgICAgICAgIGVudGl0eSxcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudEZpbHRlci5uYXRpdmVBY2NvdW50SWRcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhIWFjY291bnRGaWx0ZXIuYXV0aG9yaXR5VHlwZSAmJlxuICAgICAgICAgICAgICAgICF0aGlzLm1hdGNoQXV0aG9yaXR5VHlwZShlbnRpdHksIGFjY291bnRGaWx0ZXIuYXV0aG9yaXR5VHlwZSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSWYgYXQgbGVhc3Qgb25lIHRlbmFudCBwcm9maWxlIG1hdGNoZXMgdGhlIHRlbmFudCBwcm9maWxlIGZpbHRlciwgYWRkIHRoZSBhY2NvdW50IHRvIHRoZSBsaXN0IG9mIG1hdGNoaW5nIGFjY291bnRzXG4gICAgICAgICAgICBjb25zdCB0ZW5hbnRQcm9maWxlRmlsdGVyOiBUZW5hbnRQcm9maWxlRmlsdGVyID0ge1xuICAgICAgICAgICAgICAgIGxvY2FsQWNjb3VudElkOiBhY2NvdW50RmlsdGVyPy5sb2NhbEFjY291bnRJZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBhY2NvdW50RmlsdGVyPy5uYW1lLFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc3QgbWF0Y2hpbmdUZW5hbnRQcm9maWxlcyA9IGVudGl0eS50ZW5hbnRQcm9maWxlcz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgICh0ZW5hbnRQcm9maWxlOiBUZW5hbnRQcm9maWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRlbmFudFByb2ZpbGVNYXRjaGVzRmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgdGVuYW50UHJvZmlsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbmFudFByb2ZpbGVGaWx0ZXJcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAobWF0Y2hpbmdUZW5hbnRQcm9maWxlcyAmJiBtYXRjaGluZ1RlbmFudFByb2ZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIC8vIE5vIHRlbmFudCBwcm9maWxlIGZvciB0aGlzIGFjY291bnQgbWF0Y2hlcyBmaWx0ZXIsIGRvbid0IGFkZCB0byBsaXN0IG9mIG1hdGNoaW5nIGFjY291bnRzXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBtYXRjaGluZ0FjY291bnRzLnB1c2goZW50aXR5KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIG1hdGNoaW5nQWNjb3VudHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBrZXkgbWF0Y2hlcyBvdXIgYWNjb3VudCBrZXkgc2NoZW1hLiBBbHNvIG1hdGNoZXMgaG9tZUFjY291bnRJZCBhbmQvb3IgdGVuYW50SWQgaWYgcHJvdmlkZWRcbiAgICAgKiBAcGFyYW0ga2V5XG4gICAgICogQHBhcmFtIGhvbWVBY2NvdW50SWRcbiAgICAgKiBAcGFyYW0gdGVuYW50SWRcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIGlzQWNjb3VudEtleShcbiAgICAgICAga2V5OiBzdHJpbmcsXG4gICAgICAgIGhvbWVBY2NvdW50SWQ/OiBzdHJpbmcsXG4gICAgICAgIHRlbmFudElkPzogc3RyaW5nXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIGlmIChrZXkuc3BsaXQoU2VwYXJhdG9ycy5DQUNIRV9LRVlfU0VQQVJBVE9SKS5sZW5ndGggPCAzKSB7XG4gICAgICAgICAgICAvLyBBY2NvdW50IGNhY2hlIGtleXMgY29udGFpbiAzIGl0ZW1zIHNlcGFyYXRlZCBieSAnLScgKGVhY2ggaXRlbSBtYXkgYWxzbyBjb250YWluICctJylcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGhvbWVBY2NvdW50SWQgJiZcbiAgICAgICAgICAgICFrZXkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhob21lQWNjb3VudElkLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRlbmFudElkICYmICFrZXkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh0ZW5hbnRJZC50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRG8gbm90IGNoZWNrIGVudmlyb25tZW50IGFzIGFsaWFzaW5nIGNhbiBjYXVzZSBmYWxzZSBuZWdhdGl2ZXNcblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIGtleSBtYXRjaGVzIG91ciBjcmVkZW50aWFsIGtleSBzY2hlbWEuXG4gICAgICogQHBhcmFtIGtleVxuICAgICAqL1xuICAgIGlzQ3JlZGVudGlhbEtleShrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoa2V5LnNwbGl0KFNlcGFyYXRvcnMuQ0FDSEVfS0VZX1NFUEFSQVRPUikubGVuZ3RoIDwgNikge1xuICAgICAgICAgICAgLy8gQ3JlZGVudGlhbCBjYWNoZSBrZXlzIGNvbnRhaW4gNiBpdGVtcyBzZXBhcmF0ZWQgYnkgJy0nIChlYWNoIGl0ZW0gbWF5IGFsc28gY29udGFpbiAnLScpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb3dlckNhc2VLZXkgPSBrZXkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgLy8gQ3JlZGVudGlhbCBrZXlzIG11c3QgaW5kaWNhdGUgd2hhdCBjcmVkZW50aWFsIHR5cGUgdGhleSByZXByZXNlbnRcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgbG93ZXJDYXNlS2V5LmluZGV4T2YoQ3JlZGVudGlhbFR5cGUuSURfVE9LRU4udG9Mb3dlckNhc2UoKSkgPT09XG4gICAgICAgICAgICAgICAgLTEgJiZcbiAgICAgICAgICAgIGxvd2VyQ2FzZUtleS5pbmRleE9mKENyZWRlbnRpYWxUeXBlLkFDQ0VTU19UT0tFTi50b0xvd2VyQ2FzZSgpKSA9PT1cbiAgICAgICAgICAgICAgICAtMSAmJlxuICAgICAgICAgICAgbG93ZXJDYXNlS2V5LmluZGV4T2YoXG4gICAgICAgICAgICAgICAgQ3JlZGVudGlhbFR5cGUuQUNDRVNTX1RPS0VOX1dJVEhfQVVUSF9TQ0hFTUUudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgKSA9PT0gLTEgJiZcbiAgICAgICAgICAgIGxvd2VyQ2FzZUtleS5pbmRleE9mKENyZWRlbnRpYWxUeXBlLlJFRlJFU0hfVE9LRU4udG9Mb3dlckNhc2UoKSkgPT09XG4gICAgICAgICAgICAgICAgLTFcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBsb3dlckNhc2VLZXkuaW5kZXhPZihDcmVkZW50aWFsVHlwZS5SRUZSRVNIX1RPS0VOLnRvTG93ZXJDYXNlKCkpID5cbiAgICAgICAgICAgIC0xXG4gICAgICAgICkge1xuICAgICAgICAgICAgLy8gUmVmcmVzaCB0b2tlbnMgbXVzdCBjb250YWluIHRoZSBjbGllbnQgaWQgb3IgZmFtaWx5IGlkXG4gICAgICAgICAgICBjb25zdCBjbGllbnRJZFZhbGlkYXRpb24gPSBgJHtDcmVkZW50aWFsVHlwZS5SRUZSRVNIX1RPS0VOfSR7U2VwYXJhdG9ycy5DQUNIRV9LRVlfU0VQQVJBVE9SfSR7dGhpcy5jbGllbnRJZH0ke1NlcGFyYXRvcnMuQ0FDSEVfS0VZX1NFUEFSQVRPUn1gO1xuICAgICAgICAgICAgY29uc3QgZmFtaWx5SWRWYWxpZGF0aW9uID0gYCR7Q3JlZGVudGlhbFR5cGUuUkVGUkVTSF9UT0tFTn0ke1NlcGFyYXRvcnMuQ0FDSEVfS0VZX1NFUEFSQVRPUn0ke1RIRV9GQU1JTFlfSUR9JHtTZXBhcmF0b3JzLkNBQ0hFX0tFWV9TRVBBUkFUT1J9YDtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBsb3dlckNhc2VLZXkuaW5kZXhPZihjbGllbnRJZFZhbGlkYXRpb24udG9Mb3dlckNhc2UoKSkgPT09IC0xICYmXG4gICAgICAgICAgICAgICAgbG93ZXJDYXNlS2V5LmluZGV4T2YoZmFtaWx5SWRWYWxpZGF0aW9uLnRvTG93ZXJDYXNlKCkpID09PSAtMVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGxvd2VyQ2FzZUtleS5pbmRleE9mKHRoaXMuY2xpZW50SWQudG9Mb3dlckNhc2UoKSkgPT09IC0xKSB7XG4gICAgICAgICAgICAvLyBUb2tlbnMgbXVzdCBjb250YWluIHRoZSBjbGllbnRJZFxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgZ2l2ZW4gY3JlZGVudGlhbCBlbnRpdHkgbWF0Y2hlcyB0aGUgZmlsdGVyXG4gICAgICogQHBhcmFtIGVudGl0eVxuICAgICAqIEBwYXJhbSBmaWx0ZXJcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIGNyZWRlbnRpYWxNYXRjaGVzRmlsdGVyKFxuICAgICAgICBlbnRpdHk6IFZhbGlkQ3JlZGVudGlhbFR5cGUsXG4gICAgICAgIGZpbHRlcjogQ3JlZGVudGlhbEZpbHRlclxuICAgICk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoISFmaWx0ZXIuY2xpZW50SWQgJiYgIXRoaXMubWF0Y2hDbGllbnRJZChlbnRpdHksIGZpbHRlci5jbGllbnRJZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICEhZmlsdGVyLnVzZXJBc3NlcnRpb25IYXNoICYmXG4gICAgICAgICAgICAhdGhpcy5tYXRjaFVzZXJBc3NlcnRpb25IYXNoKGVudGl0eSwgZmlsdGVyLnVzZXJBc3NlcnRpb25IYXNoKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qXG4gICAgICAgICAqIGhvbWVBY2NvdW50SWQgY2FuIGJlIHVuZGVmaW5lZCwgYW5kIHdlIHdhbnQgdG8gZmlsdGVyIG91dCBjYWNoZWQgaXRlbXMgdGhhdCBoYXZlIGEgaG9tZUFjY291bnRJZCBvZiBcIlwiXG4gICAgICAgICAqIGJlY2F1c2Ugd2UgZG9uJ3Qgd2FudCBhIGNsaWVudF9jcmVkZW50aWFsIHJlcXVlc3QgdG8gcmV0dXJuIGEgY2FjaGVkIHRva2VuIHRoYXQgaGFzIGEgaG9tZUFjY291bnRJZFxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgdHlwZW9mIGZpbHRlci5ob21lQWNjb3VudElkID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgICAgICAhdGhpcy5tYXRjaEhvbWVBY2NvdW50SWQoZW50aXR5LCBmaWx0ZXIuaG9tZUFjY291bnRJZClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhIWZpbHRlci5lbnZpcm9ubWVudCAmJlxuICAgICAgICAgICAgIXRoaXMubWF0Y2hFbnZpcm9ubWVudChlbnRpdHksIGZpbHRlci5lbnZpcm9ubWVudClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoISFmaWx0ZXIucmVhbG0gJiYgIXRoaXMubWF0Y2hSZWFsbShlbnRpdHksIGZpbHRlci5yZWFsbSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICEhZmlsdGVyLmNyZWRlbnRpYWxUeXBlICYmXG4gICAgICAgICAgICAhdGhpcy5tYXRjaENyZWRlbnRpYWxUeXBlKGVudGl0eSwgZmlsdGVyLmNyZWRlbnRpYWxUeXBlKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghIWZpbHRlci5mYW1pbHlJZCAmJiAhdGhpcy5tYXRjaEZhbWlseUlkKGVudGl0eSwgZmlsdGVyLmZhbWlseUlkKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLypcbiAgICAgICAgICogaWRUb2tlbnMgZG8gbm90IGhhdmUgXCJ0YXJnZXRcIiwgdGFyZ2V0IHNwZWNpZmljIHJlZnJlc2hUb2tlbnMgZG8gZXhpc3QgZm9yIHNvbWUgdHlwZXMgb2YgYXV0aGVudGljYXRpb25cbiAgICAgICAgICogUmVzb3VyY2Ugc3BlY2lmaWMgcmVmcmVzaCB0b2tlbnMgY2FzZSB3aWxsIGJlIGFkZGVkIHdoZW4gdGhlIHN1cHBvcnQgaXMgZGVlbWVkIG5lY2Vzc2FyeVxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKCEhZmlsdGVyLnRhcmdldCAmJiAhdGhpcy5tYXRjaFRhcmdldChlbnRpdHksIGZpbHRlci50YXJnZXQpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiByZXF1ZXN0IE9SIGNhY2hlZCBlbnRpdHkgaGFzIHJlcXVlc3RlZCBDbGFpbXMgSGFzaCwgY2hlY2sgaWYgdGhleSBtYXRjaFxuICAgICAgICBpZiAoZmlsdGVyLnJlcXVlc3RlZENsYWltc0hhc2ggfHwgZW50aXR5LnJlcXVlc3RlZENsYWltc0hhc2gpIHtcbiAgICAgICAgICAgIC8vIERvbid0IG1hdGNoIGlmIGVpdGhlciBpcyB1bmRlZmluZWQgb3IgdGhleSBhcmUgZGlmZmVyZW50XG4gICAgICAgICAgICBpZiAoZW50aXR5LnJlcXVlc3RlZENsYWltc0hhc2ggIT09IGZpbHRlci5yZXF1ZXN0ZWRDbGFpbXNIYXNoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWNjZXNzIFRva2VuIHdpdGggQXV0aCBTY2hlbWUgc3BlY2lmaWMgbWF0Y2hpbmdcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgZW50aXR5LmNyZWRlbnRpYWxUeXBlID09PVxuICAgICAgICAgICAgQ3JlZGVudGlhbFR5cGUuQUNDRVNTX1RPS0VOX1dJVEhfQVVUSF9TQ0hFTUVcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgISFmaWx0ZXIudG9rZW5UeXBlICYmXG4gICAgICAgICAgICAgICAgIXRoaXMubWF0Y2hUb2tlblR5cGUoZW50aXR5LCBmaWx0ZXIudG9rZW5UeXBlKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBLZXlJZCAoc3NoS2lkKSBpbiByZXF1ZXN0IG11c3QgbWF0Y2ggY2FjaGVkIFNTSCBjZXJ0aWZpY2F0ZSBrZXlJZCBiZWNhdXNlIFNTSCBjZXJ0IGlzIGJvdW5kIHRvIGEgc3BlY2lmaWMga2V5XG4gICAgICAgICAgICBpZiAoZmlsdGVyLnRva2VuVHlwZSA9PT0gQXV0aGVudGljYXRpb25TY2hlbWUuU1NIKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbHRlci5rZXlJZCAmJiAhdGhpcy5tYXRjaEtleUlkKGVudGl0eSwgZmlsdGVyLmtleUlkKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcmV0cmlldmUgYXBwTWV0YWRhdGEgbWF0Y2hpbmcgYWxsIHByb3ZpZGVkIGZpbHRlcnM7IGlmIG5vIGZpbHRlciBpcyBzZXQsIGdldCBhbGwgYXBwTWV0YWRhdGFcbiAgICAgKiBAcGFyYW0gZmlsdGVyXG4gICAgICovXG4gICAgZ2V0QXBwTWV0YWRhdGFGaWx0ZXJlZEJ5KGZpbHRlcjogQXBwTWV0YWRhdGFGaWx0ZXIpOiBBcHBNZXRhZGF0YUNhY2hlIHtcbiAgICAgICAgY29uc3QgYWxsQ2FjaGVLZXlzID0gdGhpcy5nZXRLZXlzKCk7XG4gICAgICAgIGNvbnN0IG1hdGNoaW5nQXBwTWV0YWRhdGE6IEFwcE1ldGFkYXRhQ2FjaGUgPSB7fTtcblxuICAgICAgICBhbGxDYWNoZUtleXMuZm9yRWFjaCgoY2FjaGVLZXkpID0+IHtcbiAgICAgICAgICAgIC8vIGRvbid0IHBhcnNlIGFueSBub24tYXBwTWV0YWRhdGEgdHlwZSBjYWNoZSBlbnRpdGllc1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQXBwTWV0YWRhdGEoY2FjaGVLZXkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBdHRlbXB0IHJldHJpZXZhbFxuICAgICAgICAgICAgY29uc3QgZW50aXR5ID0gdGhpcy5nZXRBcHBNZXRhZGF0YShjYWNoZUtleSk7XG5cbiAgICAgICAgICAgIGlmICghZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgISFmaWx0ZXIuZW52aXJvbm1lbnQgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5tYXRjaEVudmlyb25tZW50KGVudGl0eSwgZmlsdGVyLmVudmlyb25tZW50KVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgISFmaWx0ZXIuY2xpZW50SWQgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5tYXRjaENsaWVudElkKGVudGl0eSwgZmlsdGVyLmNsaWVudElkKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBtYXRjaGluZ0FwcE1ldGFkYXRhW2NhY2hlS2V5XSA9IGVudGl0eTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIG1hdGNoaW5nQXBwTWV0YWRhdGE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcmV0cmlldmUgYXV0aG9yaXR5TWV0YWRhdGEgdGhhdCBjb250YWlucyBhIG1hdGNoaW5nIGFsaWFzXG4gICAgICogQHBhcmFtIGZpbHRlclxuICAgICAqL1xuICAgIGdldEF1dGhvcml0eU1ldGFkYXRhQnlBbGlhcyhob3N0OiBzdHJpbmcpOiBBdXRob3JpdHlNZXRhZGF0YUVudGl0eSB8IG51bGwge1xuICAgICAgICBjb25zdCBhbGxDYWNoZUtleXMgPSB0aGlzLmdldEF1dGhvcml0eU1ldGFkYXRhS2V5cygpO1xuICAgICAgICBsZXQgbWF0Y2hlZEVudGl0eSA9IG51bGw7XG5cbiAgICAgICAgYWxsQ2FjaGVLZXlzLmZvckVhY2goKGNhY2hlS2V5KSA9PiB7XG4gICAgICAgICAgICAvLyBkb24ndCBwYXJzZSBhbnkgbm9uLWF1dGhvcml0eU1ldGFkYXRhIHR5cGUgY2FjaGUgZW50aXRpZXNcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhdGhpcy5pc0F1dGhvcml0eU1ldGFkYXRhKGNhY2hlS2V5KSB8fFxuICAgICAgICAgICAgICAgIGNhY2hlS2V5LmluZGV4T2YodGhpcy5jbGllbnRJZCkgPT09IC0xXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEF0dGVtcHQgcmV0cmlldmFsXG4gICAgICAgICAgICBjb25zdCBlbnRpdHkgPSB0aGlzLmdldEF1dGhvcml0eU1ldGFkYXRhKGNhY2hlS2V5KTtcblxuICAgICAgICAgICAgaWYgKCFlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChlbnRpdHkuYWxpYXNlcy5pbmRleE9mKGhvc3QpID09PSAtMSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbWF0Y2hlZEVudGl0eSA9IGVudGl0eTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIG1hdGNoZWRFbnRpdHk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhbGwgYWNjb3VudHMgYW5kIHJlbGF0ZWQgdG9rZW5zIGZyb20gY2FjaGUuXG4gICAgICovXG4gICAgYXN5bmMgcmVtb3ZlQWxsQWNjb3VudHMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGFsbEFjY291bnRLZXlzID0gdGhpcy5nZXRBY2NvdW50S2V5cygpO1xuICAgICAgICBjb25zdCByZW1vdmVkQWNjb3VudHM6IEFycmF5PFByb21pc2U8dm9pZD4+ID0gW107XG5cbiAgICAgICAgYWxsQWNjb3VudEtleXMuZm9yRWFjaCgoY2FjaGVLZXkpID0+IHtcbiAgICAgICAgICAgIHJlbW92ZWRBY2NvdW50cy5wdXNoKHRoaXMucmVtb3ZlQWNjb3VudChjYWNoZUtleSkpO1xuICAgICAgICB9KTtcblxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChyZW1vdmVkQWNjb3VudHMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIGFjY291bnQgYW5kIHJlbGF0ZWQgdG9rZW5zIGZvciBhIGdpdmVuIGFjY291bnQga2V5XG4gICAgICogQHBhcmFtIGFjY291bnRcbiAgICAgKi9cbiAgICBhc3luYyByZW1vdmVBY2NvdW50KGFjY291bnRLZXk6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBhY2NvdW50ID0gdGhpcy5nZXRBY2NvdW50KGFjY291bnRLZXksIHRoaXMuY29tbW9uTG9nZ2VyKTtcbiAgICAgICAgaWYgKCFhY2NvdW50KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5yZW1vdmVBY2NvdW50Q29udGV4dChhY2NvdW50KTtcbiAgICAgICAgdGhpcy5yZW1vdmVJdGVtKGFjY291bnRLZXkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgY3JlZGVudGlhbHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBwcm92aWRlZCBhY2NvdW50XG4gICAgICogQHBhcmFtIGFjY291bnRcbiAgICAgKi9cbiAgICBhc3luYyByZW1vdmVBY2NvdW50Q29udGV4dChhY2NvdW50OiBBY2NvdW50RW50aXR5KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGFsbFRva2VuS2V5cyA9IHRoaXMuZ2V0VG9rZW5LZXlzKCk7XG4gICAgICAgIGNvbnN0IGFjY291bnRJZCA9IGFjY291bnQuZ2VuZXJhdGVBY2NvdW50SWQoKTtcbiAgICAgICAgY29uc3QgcmVtb3ZlZENyZWRlbnRpYWxzOiBBcnJheTxQcm9taXNlPHZvaWQ+PiA9IFtdO1xuXG4gICAgICAgIGFsbFRva2VuS2V5cy5pZFRva2VuLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgaWYgKGtleS5pbmRleE9mKGFjY291bnRJZCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUlkVG9rZW4oa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgYWxsVG9rZW5LZXlzLmFjY2Vzc1Rva2VuLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgaWYgKGtleS5pbmRleE9mKGFjY291bnRJZCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZW1vdmVkQ3JlZGVudGlhbHMucHVzaCh0aGlzLnJlbW92ZUFjY2Vzc1Rva2VuKGtleSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBhbGxUb2tlbktleXMucmVmcmVzaFRva2VuLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgaWYgKGtleS5pbmRleE9mKGFjY291bnRJZCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVJlZnJlc2hUb2tlbihrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChyZW1vdmVkQ3JlZGVudGlhbHMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgYSBib29sZWFuIGlmIHRoZSBnaXZlbiBjcmVkZW50aWFsIGlzIHJlbW92ZWRcbiAgICAgKiBAcGFyYW0gY3JlZGVudGlhbFxuICAgICAqL1xuICAgIGFzeW5jIHJlbW92ZUFjY2Vzc1Rva2VuKGtleTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGNyZWRlbnRpYWwgPSB0aGlzLmdldEFjY2Vzc1Rva2VuQ3JlZGVudGlhbChrZXkpO1xuICAgICAgICBpZiAoIWNyZWRlbnRpYWwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlbW92ZSBUb2tlbiBCaW5kaW5nIEtleSBmcm9tIGtleSBzdG9yZSBmb3IgUG9QIFRva2VucyBDcmVkZW50aWFsc1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICBjcmVkZW50aWFsLmNyZWRlbnRpYWxUeXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICBDcmVkZW50aWFsVHlwZS5BQ0NFU1NfVE9LRU5fV0lUSF9BVVRIX1NDSEVNRS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICkge1xuICAgICAgICAgICAgaWYgKGNyZWRlbnRpYWwudG9rZW5UeXBlID09PSBBdXRoZW50aWNhdGlvblNjaGVtZS5QT1ApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbldpdGhBdXRoU2NoZW1lRW50aXR5ID1cbiAgICAgICAgICAgICAgICAgICAgY3JlZGVudGlhbCBhcyBBY2Nlc3NUb2tlbkVudGl0eTtcbiAgICAgICAgICAgICAgICBjb25zdCBraWQgPSBhY2Nlc3NUb2tlbldpdGhBdXRoU2NoZW1lRW50aXR5LmtleUlkO1xuXG4gICAgICAgICAgICAgICAgaWYgKGtpZCkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jcnlwdG9JbXBsLnJlbW92ZVRva2VuQmluZGluZ0tleShraWQpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLmJpbmRpbmdLZXlOb3RSZW1vdmVkXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlSXRlbShrZXkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYWxsIGFwcCBtZXRhZGF0YSBvYmplY3RzIGZyb20gY2FjaGUuXG4gICAgICovXG4gICAgcmVtb3ZlQXBwTWV0YWRhdGEoKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGFsbENhY2hlS2V5cyA9IHRoaXMuZ2V0S2V5cygpO1xuICAgICAgICBhbGxDYWNoZUtleXMuZm9yRWFjaCgoY2FjaGVLZXkpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQXBwTWV0YWRhdGEoY2FjaGVLZXkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVJdGVtKGNhY2hlS2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmUgQWNjb3VudEVudGl0eSBmcm9tIGNhY2hlXG4gICAgICogQHBhcmFtIGFjY291bnRcbiAgICAgKi9cbiAgICByZWFkQWNjb3VudEZyb21DYWNoZShhY2NvdW50OiBBY2NvdW50SW5mbyk6IEFjY291bnRFbnRpdHkgfCBudWxsIHtcbiAgICAgICAgY29uc3QgYWNjb3VudEtleTogc3RyaW5nID1cbiAgICAgICAgICAgIEFjY291bnRFbnRpdHkuZ2VuZXJhdGVBY2NvdW50Q2FjaGVLZXkoYWNjb3VudCk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEFjY291bnQoYWNjb3VudEtleSwgdGhpcy5jb21tb25Mb2dnZXIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlIElkVG9rZW5FbnRpdHkgZnJvbSBjYWNoZVxuICAgICAqIEBwYXJhbSBhY2NvdW50IHtBY2NvdW50SW5mb31cbiAgICAgKiBAcGFyYW0gdG9rZW5LZXlzIHs/VG9rZW5LZXlzfVxuICAgICAqIEBwYXJhbSB0YXJnZXRSZWFsbSB7P3N0cmluZ31cbiAgICAgKiBAcGFyYW0gcGVyZm9ybWFuY2VDbGllbnQgez9JUGVyZm9ybWFuY2VDbGllbnR9XG4gICAgICogQHBhcmFtIGNvcnJlbGF0aW9uSWQgez9zdHJpbmd9XG4gICAgICovXG4gICAgZ2V0SWRUb2tlbihcbiAgICAgICAgYWNjb3VudDogQWNjb3VudEluZm8sXG4gICAgICAgIHRva2VuS2V5cz86IFRva2VuS2V5cyxcbiAgICAgICAgdGFyZ2V0UmVhbG0/OiBzdHJpbmcsXG4gICAgICAgIHBlcmZvcm1hbmNlQ2xpZW50PzogSVBlcmZvcm1hbmNlQ2xpZW50LFxuICAgICAgICBjb3JyZWxhdGlvbklkPzogc3RyaW5nXG4gICAgKTogSWRUb2tlbkVudGl0eSB8IG51bGwge1xuICAgICAgICB0aGlzLmNvbW1vbkxvZ2dlci50cmFjZShcIkNhY2hlTWFuYWdlciAtIGdldElkVG9rZW4gY2FsbGVkXCIpO1xuICAgICAgICBjb25zdCBpZFRva2VuRmlsdGVyOiBDcmVkZW50aWFsRmlsdGVyID0ge1xuICAgICAgICAgICAgaG9tZUFjY291bnRJZDogYWNjb3VudC5ob21lQWNjb3VudElkLFxuICAgICAgICAgICAgZW52aXJvbm1lbnQ6IGFjY291bnQuZW52aXJvbm1lbnQsXG4gICAgICAgICAgICBjcmVkZW50aWFsVHlwZTogQ3JlZGVudGlhbFR5cGUuSURfVE9LRU4sXG4gICAgICAgICAgICBjbGllbnRJZDogdGhpcy5jbGllbnRJZCxcbiAgICAgICAgICAgIHJlYWxtOiB0YXJnZXRSZWFsbSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBpZFRva2VuTWFwOiBNYXA8c3RyaW5nLCBJZFRva2VuRW50aXR5PiA9IHRoaXMuZ2V0SWRUb2tlbnNCeUZpbHRlcihcbiAgICAgICAgICAgIGlkVG9rZW5GaWx0ZXIsXG4gICAgICAgICAgICB0b2tlbktleXNcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBudW1JZFRva2VucyA9IGlkVG9rZW5NYXAuc2l6ZTtcblxuICAgICAgICBpZiAobnVtSWRUb2tlbnMgPCAxKSB7XG4gICAgICAgICAgICB0aGlzLmNvbW1vbkxvZ2dlci5pbmZvKFwiQ2FjaGVNYW5hZ2VyOmdldElkVG9rZW4gLSBObyB0b2tlbiBmb3VuZFwiKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9IGVsc2UgaWYgKG51bUlkVG9rZW5zID4gMSkge1xuICAgICAgICAgICAgbGV0IHRva2Vuc1RvQmVSZW1vdmVkOiBNYXA8c3RyaW5nLCBJZFRva2VuRW50aXR5PiA9IGlkVG9rZW5NYXA7XG4gICAgICAgICAgICAvLyBNdWx0aXBsZSB0ZW5hbnQgcHJvZmlsZXMgYW5kIG5vIHRlbmFudCBzcGVjaWZpZWQsIHBpY2sgaG9tZSBhY2NvdW50XG4gICAgICAgICAgICBpZiAoIXRhcmdldFJlYWxtKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaG9tZUlkVG9rZW5NYXA6IE1hcDxzdHJpbmcsIElkVG9rZW5FbnRpdHk+ID0gbmV3IE1hcDxcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICBJZFRva2VuRW50aXR5XG4gICAgICAgICAgICAgICAgPigpO1xuICAgICAgICAgICAgICAgIGlkVG9rZW5NYXAuZm9yRWFjaCgoaWRUb2tlbiwga2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpZFRva2VuLnJlYWxtID09PSBhY2NvdW50LnRlbmFudElkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBob21lSWRUb2tlbk1hcC5zZXQoa2V5LCBpZFRva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IG51bUhvbWVJZFRva2VucyA9IGhvbWVJZFRva2VuTWFwLnNpemU7XG4gICAgICAgICAgICAgICAgaWYgKG51bUhvbWVJZFRva2VucyA8IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21tb25Mb2dnZXIuaW5mbyhcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQ2FjaGVNYW5hZ2VyOmdldElkVG9rZW4gLSBNdWx0aXBsZSBJRCB0b2tlbnMgZm91bmQgZm9yIGFjY291bnQgYnV0IG5vbmUgbWF0Y2ggYWNjb3VudCBlbnRpdHkgdGVuYW50IGlkLCByZXR1cm5pbmcgZmlyc3QgcmVzdWx0XCJcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlkVG9rZW5NYXAudmFsdWVzKCkubmV4dCgpLnZhbHVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobnVtSG9tZUlkVG9rZW5zID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tbW9uTG9nZ2VyLmluZm8oXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkNhY2hlTWFuYWdlcjpnZXRJZFRva2VuIC0gTXVsdGlwbGUgSUQgdG9rZW5zIGZvdW5kIGZvciBhY2NvdW50LCBkZWZhdWx0aW5nIHRvIGhvbWUgdGVuYW50IHByb2ZpbGVcIlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaG9tZUlkVG9rZW5NYXAudmFsdWVzKCkubmV4dCgpLnZhbHVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE11bHRpcGxlIElEIHRva2VucyBmb3IgaG9tZSB0ZW5hbnQgcHJvZmlsZSwgcmVtb3ZlIGFsbCBhbmQgcmV0dXJuIG51bGxcbiAgICAgICAgICAgICAgICAgICAgdG9rZW5zVG9CZVJlbW92ZWQgPSBob21lSWRUb2tlbk1hcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBNdWx0aXBsZSB0b2tlbnMgZm9yIGEgc2luZ2xlIHRlbmFudCBwcm9maWxlLCByZW1vdmUgYWxsIGFuZCByZXR1cm4gbnVsbFxuICAgICAgICAgICAgdGhpcy5jb21tb25Mb2dnZXIuaW5mbyhcbiAgICAgICAgICAgICAgICBcIkNhY2hlTWFuYWdlcjpnZXRJZFRva2VuIC0gTXVsdGlwbGUgbWF0Y2hpbmcgSUQgdG9rZW5zIGZvdW5kLCBjbGVhcmluZyB0aGVtXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0b2tlbnNUb0JlUmVtb3ZlZC5mb3JFYWNoKChpZFRva2VuLCBrZXkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUlkVG9rZW4oa2V5KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHBlcmZvcm1hbmNlQ2xpZW50ICYmIGNvcnJlbGF0aW9uSWQpIHtcbiAgICAgICAgICAgICAgICBwZXJmb3JtYW5jZUNsaWVudC5hZGRGaWVsZHMoXG4gICAgICAgICAgICAgICAgICAgIHsgbXVsdGlNYXRjaGVkSUQ6IGlkVG9rZW5NYXAuc2l6ZSB9LFxuICAgICAgICAgICAgICAgICAgICBjb3JyZWxhdGlvbklkXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jb21tb25Mb2dnZXIuaW5mbyhcIkNhY2hlTWFuYWdlcjpnZXRJZFRva2VuIC0gUmV0dXJuaW5nIElEIHRva2VuXCIpO1xuICAgICAgICByZXR1cm4gaWRUb2tlbk1hcC52YWx1ZXMoKS5uZXh0KCkudmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBhbGwgaWRUb2tlbnMgbWF0Y2hpbmcgdGhlIGdpdmVuIGZpbHRlclxuICAgICAqIEBwYXJhbSBmaWx0ZXJcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIGdldElkVG9rZW5zQnlGaWx0ZXIoXG4gICAgICAgIGZpbHRlcjogQ3JlZGVudGlhbEZpbHRlcixcbiAgICAgICAgdG9rZW5LZXlzPzogVG9rZW5LZXlzXG4gICAgKTogTWFwPHN0cmluZywgSWRUb2tlbkVudGl0eT4ge1xuICAgICAgICBjb25zdCBpZFRva2VuS2V5cyA9XG4gICAgICAgICAgICAodG9rZW5LZXlzICYmIHRva2VuS2V5cy5pZFRva2VuKSB8fCB0aGlzLmdldFRva2VuS2V5cygpLmlkVG9rZW47XG5cbiAgICAgICAgY29uc3QgaWRUb2tlbnM6IE1hcDxzdHJpbmcsIElkVG9rZW5FbnRpdHk+ID0gbmV3IE1hcDxcbiAgICAgICAgICAgIHN0cmluZyxcbiAgICAgICAgICAgIElkVG9rZW5FbnRpdHlcbiAgICAgICAgPigpO1xuICAgICAgICBpZFRva2VuS2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhdGhpcy5pZFRva2VuS2V5TWF0Y2hlc0ZpbHRlcihrZXksIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpZW50SWQ6IHRoaXMuY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgICAgIC4uLmZpbHRlcixcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaWRUb2tlbiA9IHRoaXMuZ2V0SWRUb2tlbkNyZWRlbnRpYWwoa2V5KTtcbiAgICAgICAgICAgIGlmIChpZFRva2VuICYmIHRoaXMuY3JlZGVudGlhbE1hdGNoZXNGaWx0ZXIoaWRUb2tlbiwgZmlsdGVyKSkge1xuICAgICAgICAgICAgICAgIGlkVG9rZW5zLnNldChrZXksIGlkVG9rZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gaWRUb2tlbnM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVmFsaWRhdGUgdGhlIGNhY2hlIGtleSBhZ2FpbnN0IGZpbHRlciBiZWZvcmUgcmV0cmlldmluZyBhbmQgcGFyc2luZyBjYWNoZSB2YWx1ZVxuICAgICAqIEBwYXJhbSBrZXlcbiAgICAgKiBAcGFyYW0gZmlsdGVyXG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICBpZFRva2VuS2V5TWF0Y2hlc0ZpbHRlcihcbiAgICAgICAgaW5wdXRLZXk6IHN0cmluZyxcbiAgICAgICAgZmlsdGVyOiBDcmVkZW50aWFsRmlsdGVyXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGtleSA9IGlucHV0S2V5LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGZpbHRlci5jbGllbnRJZCAmJlxuICAgICAgICAgICAga2V5LmluZGV4T2YoZmlsdGVyLmNsaWVudElkLnRvTG93ZXJDYXNlKCkpID09PSAtMVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGZpbHRlci5ob21lQWNjb3VudElkICYmXG4gICAgICAgICAgICBrZXkuaW5kZXhPZihmaWx0ZXIuaG9tZUFjY291bnRJZC50b0xvd2VyQ2FzZSgpKSA9PT0gLTFcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGlkVG9rZW4gZnJvbSB0aGUgY2FjaGVcbiAgICAgKiBAcGFyYW0ga2V5XG4gICAgICovXG4gICAgcmVtb3ZlSWRUb2tlbihrZXk6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHJlZnJlc2ggdG9rZW4gZnJvbSB0aGUgY2FjaGVcbiAgICAgKiBAcGFyYW0ga2V5XG4gICAgICovXG4gICAgcmVtb3ZlUmVmcmVzaFRva2VuKGtleTogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVtb3ZlSXRlbShrZXkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlIEFjY2Vzc1Rva2VuRW50aXR5IGZyb20gY2FjaGVcbiAgICAgKiBAcGFyYW0gYWNjb3VudCB7QWNjb3VudEluZm99XG4gICAgICogQHBhcmFtIHJlcXVlc3Qge0Jhc2VBdXRoUmVxdWVzdH1cbiAgICAgKiBAcGFyYW0gdG9rZW5LZXlzIHs/VG9rZW5LZXlzfVxuICAgICAqIEBwYXJhbSBwZXJmb3JtYW5jZUNsaWVudCB7P0lQZXJmb3JtYW5jZUNsaWVudH1cbiAgICAgKiBAcGFyYW0gY29ycmVsYXRpb25JZCB7P3N0cmluZ31cbiAgICAgKi9cbiAgICBnZXRBY2Nlc3NUb2tlbihcbiAgICAgICAgYWNjb3VudDogQWNjb3VudEluZm8sXG4gICAgICAgIHJlcXVlc3Q6IEJhc2VBdXRoUmVxdWVzdCxcbiAgICAgICAgdG9rZW5LZXlzPzogVG9rZW5LZXlzLFxuICAgICAgICB0YXJnZXRSZWFsbT86IHN0cmluZyxcbiAgICAgICAgcGVyZm9ybWFuY2VDbGllbnQ/OiBJUGVyZm9ybWFuY2VDbGllbnQsXG4gICAgICAgIGNvcnJlbGF0aW9uSWQ/OiBzdHJpbmdcbiAgICApOiBBY2Nlc3NUb2tlbkVudGl0eSB8IG51bGwge1xuICAgICAgICB0aGlzLmNvbW1vbkxvZ2dlci50cmFjZShcIkNhY2hlTWFuYWdlciAtIGdldEFjY2Vzc1Rva2VuIGNhbGxlZFwiKTtcbiAgICAgICAgY29uc3Qgc2NvcGVzID0gU2NvcGVTZXQuY3JlYXRlU2VhcmNoU2NvcGVzKHJlcXVlc3Quc2NvcGVzKTtcbiAgICAgICAgY29uc3QgYXV0aFNjaGVtZSA9XG4gICAgICAgICAgICByZXF1ZXN0LmF1dGhlbnRpY2F0aW9uU2NoZW1lIHx8IEF1dGhlbnRpY2F0aW9uU2NoZW1lLkJFQVJFUjtcbiAgICAgICAgLypcbiAgICAgICAgICogRGlzdGluZ3Vpc2ggYmV0d2VlbiBCZWFyZXIgYW5kIFBvUC9TU0ggdG9rZW4gY2FjaGUgdHlwZXNcbiAgICAgICAgICogQ2FzdCB0byBsb3dlcmNhc2UgdG8gaGFuZGxlIFwiYmVhcmVyXCIgZnJvbSBBREZTXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCBjcmVkZW50aWFsVHlwZSA9XG4gICAgICAgICAgICBhdXRoU2NoZW1lICYmXG4gICAgICAgICAgICBhdXRoU2NoZW1lLnRvTG93ZXJDYXNlKCkgIT09XG4gICAgICAgICAgICAgICAgQXV0aGVudGljYXRpb25TY2hlbWUuQkVBUkVSLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgICA/IENyZWRlbnRpYWxUeXBlLkFDQ0VTU19UT0tFTl9XSVRIX0FVVEhfU0NIRU1FXG4gICAgICAgICAgICAgICAgOiBDcmVkZW50aWFsVHlwZS5BQ0NFU1NfVE9LRU47XG5cbiAgICAgICAgY29uc3QgYWNjZXNzVG9rZW5GaWx0ZXI6IENyZWRlbnRpYWxGaWx0ZXIgPSB7XG4gICAgICAgICAgICBob21lQWNjb3VudElkOiBhY2NvdW50LmhvbWVBY2NvdW50SWQsXG4gICAgICAgICAgICBlbnZpcm9ubWVudDogYWNjb3VudC5lbnZpcm9ubWVudCxcbiAgICAgICAgICAgIGNyZWRlbnRpYWxUeXBlOiBjcmVkZW50aWFsVHlwZSxcbiAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLmNsaWVudElkLFxuICAgICAgICAgICAgcmVhbG06IHRhcmdldFJlYWxtIHx8IGFjY291bnQudGVuYW50SWQsXG4gICAgICAgICAgICB0YXJnZXQ6IHNjb3BlcyxcbiAgICAgICAgICAgIHRva2VuVHlwZTogYXV0aFNjaGVtZSxcbiAgICAgICAgICAgIGtleUlkOiByZXF1ZXN0LnNzaEtpZCxcbiAgICAgICAgICAgIHJlcXVlc3RlZENsYWltc0hhc2g6IHJlcXVlc3QucmVxdWVzdGVkQ2xhaW1zSGFzaCxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbktleXMgPVxuICAgICAgICAgICAgKHRva2VuS2V5cyAmJiB0b2tlbktleXMuYWNjZXNzVG9rZW4pIHx8XG4gICAgICAgICAgICB0aGlzLmdldFRva2VuS2V5cygpLmFjY2Vzc1Rva2VuO1xuICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbnM6IEFjY2Vzc1Rva2VuRW50aXR5W10gPSBbXTtcblxuICAgICAgICBhY2Nlc3NUb2tlbktleXMuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICAvLyBWYWxpZGF0ZSBrZXlcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuS2V5TWF0Y2hlc0ZpbHRlcihrZXksIGFjY2Vzc1Rva2VuRmlsdGVyLCB0cnVlKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWNjZXNzVG9rZW4gPSB0aGlzLmdldEFjY2Vzc1Rva2VuQ3JlZGVudGlhbChrZXkpO1xuXG4gICAgICAgICAgICAgICAgLy8gVmFsaWRhdGUgdmFsdWVcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlZGVudGlhbE1hdGNoZXNGaWx0ZXIoYWNjZXNzVG9rZW4sIGFjY2Vzc1Rva2VuRmlsdGVyKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbnMucHVzaChhY2Nlc3NUb2tlbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBudW1BY2Nlc3NUb2tlbnMgPSBhY2Nlc3NUb2tlbnMubGVuZ3RoO1xuICAgICAgICBpZiAobnVtQWNjZXNzVG9rZW5zIDwgMSkge1xuICAgICAgICAgICAgdGhpcy5jb21tb25Mb2dnZXIuaW5mbyhcbiAgICAgICAgICAgICAgICBcIkNhY2hlTWFuYWdlcjpnZXRBY2Nlc3NUb2tlbiAtIE5vIHRva2VuIGZvdW5kXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSBlbHNlIGlmIChudW1BY2Nlc3NUb2tlbnMgPiAxKSB7XG4gICAgICAgICAgICB0aGlzLmNvbW1vbkxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgICAgIFwiQ2FjaGVNYW5hZ2VyOmdldEFjY2Vzc1Rva2VuIC0gTXVsdGlwbGUgYWNjZXNzIHRva2VucyBmb3VuZCwgY2xlYXJpbmcgdGhlbVwiXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgYWNjZXNzVG9rZW5zLmZvckVhY2goKGFjY2Vzc1Rva2VuKSA9PiB7XG4gICAgICAgICAgICAgICAgdm9pZCB0aGlzLnJlbW92ZUFjY2Vzc1Rva2VuKGdlbmVyYXRlQ3JlZGVudGlhbEtleShhY2Nlc3NUb2tlbikpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAocGVyZm9ybWFuY2VDbGllbnQgJiYgY29ycmVsYXRpb25JZCkge1xuICAgICAgICAgICAgICAgIHBlcmZvcm1hbmNlQ2xpZW50LmFkZEZpZWxkcyhcbiAgICAgICAgICAgICAgICAgICAgeyBtdWx0aU1hdGNoZWRBVDogYWNjZXNzVG9rZW5zLmxlbmd0aCB9LFxuICAgICAgICAgICAgICAgICAgICBjb3JyZWxhdGlvbklkXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jb21tb25Mb2dnZXIuaW5mbyhcbiAgICAgICAgICAgIFwiQ2FjaGVNYW5hZ2VyOmdldEFjY2Vzc1Rva2VuIC0gUmV0dXJuaW5nIGFjY2VzcyB0b2tlblwiXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBhY2Nlc3NUb2tlbnNbMF07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVmFsaWRhdGUgdGhlIGNhY2hlIGtleSBhZ2FpbnN0IGZpbHRlciBiZWZvcmUgcmV0cmlldmluZyBhbmQgcGFyc2luZyBjYWNoZSB2YWx1ZVxuICAgICAqIEBwYXJhbSBrZXlcbiAgICAgKiBAcGFyYW0gZmlsdGVyXG4gICAgICogQHBhcmFtIGtleU11c3RDb250YWluQWxsU2NvcGVzXG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICBhY2Nlc3NUb2tlbktleU1hdGNoZXNGaWx0ZXIoXG4gICAgICAgIGlucHV0S2V5OiBzdHJpbmcsXG4gICAgICAgIGZpbHRlcjogQ3JlZGVudGlhbEZpbHRlcixcbiAgICAgICAga2V5TXVzdENvbnRhaW5BbGxTY29wZXM6IGJvb2xlYW5cbiAgICApOiBib29sZWFuIHtcbiAgICAgICAgY29uc3Qga2V5ID0gaW5wdXRLZXkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgZmlsdGVyLmNsaWVudElkICYmXG4gICAgICAgICAgICBrZXkuaW5kZXhPZihmaWx0ZXIuY2xpZW50SWQudG9Mb3dlckNhc2UoKSkgPT09IC0xXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgZmlsdGVyLmhvbWVBY2NvdW50SWQgJiZcbiAgICAgICAgICAgIGtleS5pbmRleE9mKGZpbHRlci5ob21lQWNjb3VudElkLnRvTG93ZXJDYXNlKCkpID09PSAtMVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmaWx0ZXIucmVhbG0gJiYga2V5LmluZGV4T2YoZmlsdGVyLnJlYWxtLnRvTG93ZXJDYXNlKCkpID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgZmlsdGVyLnJlcXVlc3RlZENsYWltc0hhc2ggJiZcbiAgICAgICAgICAgIGtleS5pbmRleE9mKGZpbHRlci5yZXF1ZXN0ZWRDbGFpbXNIYXNoLnRvTG93ZXJDYXNlKCkpID09PSAtMVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmaWx0ZXIudGFyZ2V0KSB7XG4gICAgICAgICAgICBjb25zdCBzY29wZXMgPSBmaWx0ZXIudGFyZ2V0LmFzQXJyYXkoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2NvcGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBrZXlNdXN0Q29udGFpbkFsbFNjb3BlcyAmJlxuICAgICAgICAgICAgICAgICAgICAha2V5LmluY2x1ZGVzKHNjb3Blc1tpXS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIHBlcmZvcm1pbmcgYSBjYWNoZSBsb29rdXAgYSBtaXNzaW5nIHNjb3BlIHdvdWxkIGJlIGEgY2FjaGUgbWlzc1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgIWtleU11c3RDb250YWluQWxsU2NvcGVzICYmXG4gICAgICAgICAgICAgICAgICAgIGtleS5pbmNsdWRlcyhzY29wZXNbaV0udG9Mb3dlckNhc2UoKSlcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2hlbiBwZXJmb3JtaW5nIGEgY2FjaGUgd3JpdGUsIGFueSB0b2tlbiB3aXRoIGEgc3Vic2V0IG9mIHJlcXVlc3RlZCBzY29wZXMgc2hvdWxkIGJlIHJlcGxhY2VkXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgYWxsIGFjY2VzcyB0b2tlbnMgbWF0Y2hpbmcgdGhlIGZpbHRlclxuICAgICAqIEBwYXJhbSBmaWx0ZXJcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIGdldEFjY2Vzc1Rva2Vuc0J5RmlsdGVyKGZpbHRlcjogQ3JlZGVudGlhbEZpbHRlcik6IEFjY2Vzc1Rva2VuRW50aXR5W10ge1xuICAgICAgICBjb25zdCB0b2tlbktleXMgPSB0aGlzLmdldFRva2VuS2V5cygpO1xuXG4gICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuczogQWNjZXNzVG9rZW5FbnRpdHlbXSA9IFtdO1xuICAgICAgICB0b2tlbktleXMuYWNjZXNzVG9rZW4uZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYWNjZXNzVG9rZW5LZXlNYXRjaGVzRmlsdGVyKGtleSwgZmlsdGVyLCB0cnVlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgYWNjZXNzVG9rZW4gPSB0aGlzLmdldEFjY2Vzc1Rva2VuQ3JlZGVudGlhbChrZXkpO1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuICYmXG4gICAgICAgICAgICAgICAgdGhpcy5jcmVkZW50aWFsTWF0Y2hlc0ZpbHRlcihhY2Nlc3NUb2tlbiwgZmlsdGVyKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgYWNjZXNzVG9rZW5zLnB1c2goYWNjZXNzVG9rZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gYWNjZXNzVG9rZW5zO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhlbHBlciB0byByZXRyaWV2ZSB0aGUgYXBwcm9wcmlhdGUgcmVmcmVzaCB0b2tlbiBmcm9tIGNhY2hlXG4gICAgICogQHBhcmFtIGFjY291bnQge0FjY291bnRJbmZvfVxuICAgICAqIEBwYXJhbSBmYW1pbHlSVCB7Ym9vbGVhbn1cbiAgICAgKiBAcGFyYW0gdG9rZW5LZXlzIHs/VG9rZW5LZXlzfVxuICAgICAqIEBwYXJhbSBwZXJmb3JtYW5jZUNsaWVudCB7P0lQZXJmb3JtYW5jZUNsaWVudH1cbiAgICAgKiBAcGFyYW0gY29ycmVsYXRpb25JZCB7P3N0cmluZ31cbiAgICAgKi9cbiAgICBnZXRSZWZyZXNoVG9rZW4oXG4gICAgICAgIGFjY291bnQ6IEFjY291bnRJbmZvLFxuICAgICAgICBmYW1pbHlSVDogYm9vbGVhbixcbiAgICAgICAgdG9rZW5LZXlzPzogVG9rZW5LZXlzLFxuICAgICAgICBwZXJmb3JtYW5jZUNsaWVudD86IElQZXJmb3JtYW5jZUNsaWVudCxcbiAgICAgICAgY29ycmVsYXRpb25JZD86IHN0cmluZ1xuICAgICk6IFJlZnJlc2hUb2tlbkVudGl0eSB8IG51bGwge1xuICAgICAgICB0aGlzLmNvbW1vbkxvZ2dlci50cmFjZShcIkNhY2hlTWFuYWdlciAtIGdldFJlZnJlc2hUb2tlbiBjYWxsZWRcIik7XG4gICAgICAgIGNvbnN0IGlkID0gZmFtaWx5UlQgPyBUSEVfRkFNSUxZX0lEIDogdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCByZWZyZXNoVG9rZW5GaWx0ZXI6IENyZWRlbnRpYWxGaWx0ZXIgPSB7XG4gICAgICAgICAgICBob21lQWNjb3VudElkOiBhY2NvdW50LmhvbWVBY2NvdW50SWQsXG4gICAgICAgICAgICBlbnZpcm9ubWVudDogYWNjb3VudC5lbnZpcm9ubWVudCxcbiAgICAgICAgICAgIGNyZWRlbnRpYWxUeXBlOiBDcmVkZW50aWFsVHlwZS5SRUZSRVNIX1RPS0VOLFxuICAgICAgICAgICAgY2xpZW50SWQ6IHRoaXMuY2xpZW50SWQsXG4gICAgICAgICAgICBmYW1pbHlJZDogaWQsXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcmVmcmVzaFRva2VuS2V5cyA9XG4gICAgICAgICAgICAodG9rZW5LZXlzICYmIHRva2VuS2V5cy5yZWZyZXNoVG9rZW4pIHx8XG4gICAgICAgICAgICB0aGlzLmdldFRva2VuS2V5cygpLnJlZnJlc2hUb2tlbjtcbiAgICAgICAgY29uc3QgcmVmcmVzaFRva2VuczogUmVmcmVzaFRva2VuRW50aXR5W10gPSBbXTtcblxuICAgICAgICByZWZyZXNoVG9rZW5LZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgLy8gVmFsaWRhdGUga2V5XG4gICAgICAgICAgICBpZiAodGhpcy5yZWZyZXNoVG9rZW5LZXlNYXRjaGVzRmlsdGVyKGtleSwgcmVmcmVzaFRva2VuRmlsdGVyKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZnJlc2hUb2tlbiA9IHRoaXMuZ2V0UmVmcmVzaFRva2VuQ3JlZGVudGlhbChrZXkpO1xuICAgICAgICAgICAgICAgIC8vIFZhbGlkYXRlIHZhbHVlXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICByZWZyZXNoVG9rZW4gJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVkZW50aWFsTWF0Y2hlc0ZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2hUb2tlbkZpbHRlclxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlZnJlc2hUb2tlbnMucHVzaChyZWZyZXNoVG9rZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgbnVtUmVmcmVzaFRva2VucyA9IHJlZnJlc2hUb2tlbnMubGVuZ3RoO1xuICAgICAgICBpZiAobnVtUmVmcmVzaFRva2VucyA8IDEpIHtcbiAgICAgICAgICAgIHRoaXMuY29tbW9uTG9nZ2VyLmluZm8oXG4gICAgICAgICAgICAgICAgXCJDYWNoZU1hbmFnZXI6Z2V0UmVmcmVzaFRva2VuIC0gTm8gcmVmcmVzaCB0b2tlbiBmb3VuZC5cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFkZHJlc3MgdGhlIGVsc2UgY2FzZSBhZnRlciByZW1vdmUgZnVuY3Rpb25zIGFkZHJlc3MgZW52aXJvbm1lbnQgYWxpYXNlc1xuXG4gICAgICAgIGlmIChudW1SZWZyZXNoVG9rZW5zID4gMSAmJiBwZXJmb3JtYW5jZUNsaWVudCAmJiBjb3JyZWxhdGlvbklkKSB7XG4gICAgICAgICAgICBwZXJmb3JtYW5jZUNsaWVudC5hZGRGaWVsZHMoXG4gICAgICAgICAgICAgICAgeyBtdWx0aU1hdGNoZWRSVDogbnVtUmVmcmVzaFRva2VucyB9LFxuICAgICAgICAgICAgICAgIGNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNvbW1vbkxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgXCJDYWNoZU1hbmFnZXI6Z2V0UmVmcmVzaFRva2VuIC0gcmV0dXJuaW5nIHJlZnJlc2ggdG9rZW5cIlxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gcmVmcmVzaFRva2Vuc1swXSBhcyBSZWZyZXNoVG9rZW5FbnRpdHk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVmFsaWRhdGUgdGhlIGNhY2hlIGtleSBhZ2FpbnN0IGZpbHRlciBiZWZvcmUgcmV0cmlldmluZyBhbmQgcGFyc2luZyBjYWNoZSB2YWx1ZVxuICAgICAqIEBwYXJhbSBrZXlcbiAgICAgKiBAcGFyYW0gZmlsdGVyXG4gICAgICovXG4gICAgcmVmcmVzaFRva2VuS2V5TWF0Y2hlc0ZpbHRlcihcbiAgICAgICAgaW5wdXRLZXk6IHN0cmluZyxcbiAgICAgICAgZmlsdGVyOiBDcmVkZW50aWFsRmlsdGVyXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGtleSA9IGlucHV0S2V5LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGZpbHRlci5mYW1pbHlJZCAmJlxuICAgICAgICAgICAga2V5LmluZGV4T2YoZmlsdGVyLmZhbWlseUlkLnRvTG93ZXJDYXNlKCkpID09PSAtMVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIGZhbWlseUlkIGlzIHVzZWQsIGNsaWVudElkIGlzIG5vdCBpbiB0aGUga2V5XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFmaWx0ZXIuZmFtaWx5SWQgJiZcbiAgICAgICAgICAgIGZpbHRlci5jbGllbnRJZCAmJlxuICAgICAgICAgICAga2V5LmluZGV4T2YoZmlsdGVyLmNsaWVudElkLnRvTG93ZXJDYXNlKCkpID09PSAtMVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGZpbHRlci5ob21lQWNjb3VudElkICYmXG4gICAgICAgICAgICBrZXkuaW5kZXhPZihmaWx0ZXIuaG9tZUFjY291bnRJZC50b0xvd2VyQ2FzZSgpKSA9PT0gLTFcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSBBcHBNZXRhZGF0YUVudGl0eSBmcm9tIGNhY2hlXG4gICAgICovXG4gICAgcmVhZEFwcE1ldGFkYXRhRnJvbUNhY2hlKGVudmlyb25tZW50OiBzdHJpbmcpOiBBcHBNZXRhZGF0YUVudGl0eSB8IG51bGwge1xuICAgICAgICBjb25zdCBhcHBNZXRhZGF0YUZpbHRlcjogQXBwTWV0YWRhdGFGaWx0ZXIgPSB7XG4gICAgICAgICAgICBlbnZpcm9ubWVudCxcbiAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLmNsaWVudElkLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGFwcE1ldGFkYXRhOiBBcHBNZXRhZGF0YUNhY2hlID1cbiAgICAgICAgICAgIHRoaXMuZ2V0QXBwTWV0YWRhdGFGaWx0ZXJlZEJ5KGFwcE1ldGFkYXRhRmlsdGVyKTtcbiAgICAgICAgY29uc3QgYXBwTWV0YWRhdGFFbnRyaWVzOiBBcHBNZXRhZGF0YUVudGl0eVtdID0gT2JqZWN0LmtleXMoXG4gICAgICAgICAgICBhcHBNZXRhZGF0YVxuICAgICAgICApLm1hcCgoa2V5KSA9PiBhcHBNZXRhZGF0YVtrZXldKTtcblxuICAgICAgICBjb25zdCBudW1BcHBNZXRhZGF0YSA9IGFwcE1ldGFkYXRhRW50cmllcy5sZW5ndGg7XG4gICAgICAgIGlmIChudW1BcHBNZXRhZGF0YSA8IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9IGVsc2UgaWYgKG51bUFwcE1ldGFkYXRhID4gMSkge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKFxuICAgICAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLm11bHRpcGxlTWF0Y2hpbmdBcHBNZXRhZGF0YVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhcHBNZXRhZGF0YUVudHJpZXNbMF0gYXMgQXBwTWV0YWRhdGFFbnRpdHk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBmYW1pbHlfaWQgdmFsdWUgYXNzb2NpYXRlZCAgd2l0aCBGT0NJXG4gICAgICogQHBhcmFtIGVudmlyb25tZW50XG4gICAgICogQHBhcmFtIGNsaWVudElkXG4gICAgICovXG4gICAgaXNBcHBNZXRhZGF0YUZPQ0koZW52aXJvbm1lbnQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBhcHBNZXRhZGF0YSA9IHRoaXMucmVhZEFwcE1ldGFkYXRhRnJvbUNhY2hlKGVudmlyb25tZW50KTtcbiAgICAgICAgcmV0dXJuICEhKGFwcE1ldGFkYXRhICYmIGFwcE1ldGFkYXRhLmZhbWlseUlkID09PSBUSEVfRkFNSUxZX0lEKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBoZWxwZXIgdG8gbWF0Y2ggYWNjb3VudCBpZHNcbiAgICAgKiBAcGFyYW0gdmFsdWVcbiAgICAgKiBAcGFyYW0gaG9tZUFjY291bnRJZFxuICAgICAqL1xuICAgIHByaXZhdGUgbWF0Y2hIb21lQWNjb3VudElkKFxuICAgICAgICBlbnRpdHk6IEFjY291bnRFbnRpdHkgfCBDcmVkZW50aWFsRW50aXR5LFxuICAgICAgICBob21lQWNjb3VudElkOiBzdHJpbmdcbiAgICApOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICEhKFxuICAgICAgICAgICAgdHlwZW9mIGVudGl0eS5ob21lQWNjb3VudElkID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgICAgICBob21lQWNjb3VudElkID09PSBlbnRpdHkuaG9tZUFjY291bnRJZFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGhlbHBlciB0byBtYXRjaCBhY2NvdW50IGlkc1xuICAgICAqIEBwYXJhbSBlbnRpdHlcbiAgICAgKiBAcGFyYW0gbG9jYWxBY2NvdW50SWRcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIHByaXZhdGUgbWF0Y2hMb2NhbEFjY291bnRJZEZyb21Ub2tlbkNsYWltcyhcbiAgICAgICAgdG9rZW5DbGFpbXM6IFRva2VuQ2xhaW1zLFxuICAgICAgICBsb2NhbEFjY291bnRJZDogc3RyaW5nXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGlkVG9rZW5Mb2NhbEFjY291bnRJZCA9IHRva2VuQ2xhaW1zLm9pZCB8fCB0b2tlbkNsYWltcy5zdWI7XG4gICAgICAgIHJldHVybiBsb2NhbEFjY291bnRJZCA9PT0gaWRUb2tlbkxvY2FsQWNjb3VudElkO1xuICAgIH1cblxuICAgIHByaXZhdGUgbWF0Y2hMb2NhbEFjY291bnRJZEZyb21UZW5hbnRQcm9maWxlKFxuICAgICAgICB0ZW5hbnRQcm9maWxlOiBUZW5hbnRQcm9maWxlLFxuICAgICAgICBsb2NhbEFjY291bnRJZDogc3RyaW5nXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0ZW5hbnRQcm9maWxlLmxvY2FsQWNjb3VudElkID09PSBsb2NhbEFjY291bnRJZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBoZWxwZXIgdG8gbWF0Y2ggbmFtZXNcbiAgICAgKiBAcGFyYW0gZW50aXR5XG4gICAgICogQHBhcmFtIG5hbWVcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBkb3duY2FzZWQgbmFtZSBwcm9wZXJ0aWVzIGFyZSBwcmVzZW50IGFuZCBtYXRjaCBpbiB0aGUgZmlsdGVyIGFuZCB0aGUgZW50aXR5XG4gICAgICovXG4gICAgcHJpdmF0ZSBtYXRjaE5hbWUoY2xhaW1zOiBUb2tlbkNsYWltcywgbmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhIShuYW1lLnRvTG93ZXJDYXNlKCkgPT09IGNsYWltcy5uYW1lPy50b0xvd2VyQ2FzZSgpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBoZWxwZXIgdG8gbWF0Y2ggdXNlcm5hbWVzXG4gICAgICogQHBhcmFtIGVudGl0eVxuICAgICAqIEBwYXJhbSB1c2VybmFtZVxuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgcHJpdmF0ZSBtYXRjaFVzZXJuYW1lKFxuICAgICAgICBjYWNoZWRVc2VybmFtZT86IHN0cmluZyxcbiAgICAgICAgZmlsdGVyVXNlcm5hbWU/OiBzdHJpbmdcbiAgICApOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICEhKFxuICAgICAgICAgICAgY2FjaGVkVXNlcm5hbWUgJiZcbiAgICAgICAgICAgIHR5cGVvZiBjYWNoZWRVc2VybmFtZSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICAgICAgZmlsdGVyVXNlcm5hbWU/LnRvTG93ZXJDYXNlKCkgPT09IGNhY2hlZFVzZXJuYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBoZWxwZXIgdG8gbWF0Y2ggYXNzZXJ0aW9uXG4gICAgICogQHBhcmFtIHZhbHVlXG4gICAgICogQHBhcmFtIG9ib0Fzc2VydGlvblxuICAgICAqL1xuICAgIHByaXZhdGUgbWF0Y2hVc2VyQXNzZXJ0aW9uSGFzaChcbiAgICAgICAgZW50aXR5OiBDcmVkZW50aWFsRW50aXR5LFxuICAgICAgICB1c2VyQXNzZXJ0aW9uSGFzaDogc3RyaW5nXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhIShcbiAgICAgICAgICAgIGVudGl0eS51c2VyQXNzZXJ0aW9uSGFzaCAmJlxuICAgICAgICAgICAgdXNlckFzc2VydGlvbkhhc2ggPT09IGVudGl0eS51c2VyQXNzZXJ0aW9uSGFzaFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGhlbHBlciB0byBtYXRjaCBlbnZpcm9ubWVudFxuICAgICAqIEBwYXJhbSB2YWx1ZVxuICAgICAqIEBwYXJhbSBlbnZpcm9ubWVudFxuICAgICAqL1xuICAgIHByaXZhdGUgbWF0Y2hFbnZpcm9ubWVudChcbiAgICAgICAgZW50aXR5OiBBY2NvdW50RW50aXR5IHwgQ3JlZGVudGlhbEVudGl0eSB8IEFwcE1ldGFkYXRhRW50aXR5LFxuICAgICAgICBlbnZpcm9ubWVudDogc3RyaW5nXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIC8vIENoZWNrIHN0YXRpYyBhdXRob3JpdHkgb3B0aW9ucyBmaXJzdCBmb3IgY2FzZXMgd2hlcmUgYXV0aG9yaXR5IG1ldGFkYXRhIGhhcyBub3QgYmVlbiByZXNvbHZlZCBhbmQgY2FjaGVkIHlldFxuICAgICAgICBpZiAodGhpcy5zdGF0aWNBdXRob3JpdHlPcHRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0aWNBbGlhc2VzID0gZ2V0QWxpYXNlc0Zyb21TdGF0aWNTb3VyY2VzKFxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGljQXV0aG9yaXR5T3B0aW9ucyxcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1vbkxvZ2dlclxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBzdGF0aWNBbGlhc2VzLmluY2x1ZGVzKGVudmlyb25tZW50KSAmJlxuICAgICAgICAgICAgICAgIHN0YXRpY0FsaWFzZXMuaW5jbHVkZXMoZW50aXR5LmVudmlyb25tZW50KVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBRdWVyeSBtZXRhZGF0YSBjYWNoZSBpZiBubyBzdGF0aWMgYXV0aG9yaXR5IGNvbmZpZ3VyYXRpb24gaGFzIGFsaWFzZXMgdGhhdCBtYXRjaCBlbnZpcm9tZW50XG4gICAgICAgIGNvbnN0IGNsb3VkTWV0YWRhdGEgPSB0aGlzLmdldEF1dGhvcml0eU1ldGFkYXRhQnlBbGlhcyhlbnZpcm9ubWVudCk7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGNsb3VkTWV0YWRhdGEgJiZcbiAgICAgICAgICAgIGNsb3VkTWV0YWRhdGEuYWxpYXNlcy5pbmRleE9mKGVudGl0eS5lbnZpcm9ubWVudCkgPiAtMVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBoZWxwZXIgdG8gbWF0Y2ggY3JlZGVudGlhbCB0eXBlXG4gICAgICogQHBhcmFtIGVudGl0eVxuICAgICAqIEBwYXJhbSBjcmVkZW50aWFsVHlwZVxuICAgICAqL1xuICAgIHByaXZhdGUgbWF0Y2hDcmVkZW50aWFsVHlwZShcbiAgICAgICAgZW50aXR5OiBDcmVkZW50aWFsRW50aXR5LFxuICAgICAgICBjcmVkZW50aWFsVHlwZTogc3RyaW5nXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICBlbnRpdHkuY3JlZGVudGlhbFR5cGUgJiZcbiAgICAgICAgICAgIGNyZWRlbnRpYWxUeXBlLnRvTG93ZXJDYXNlKCkgPT09IGVudGl0eS5jcmVkZW50aWFsVHlwZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogaGVscGVyIHRvIG1hdGNoIGNsaWVudCBpZHNcbiAgICAgKiBAcGFyYW0gZW50aXR5XG4gICAgICogQHBhcmFtIGNsaWVudElkXG4gICAgICovXG4gICAgcHJpdmF0ZSBtYXRjaENsaWVudElkKFxuICAgICAgICBlbnRpdHk6IENyZWRlbnRpYWxFbnRpdHkgfCBBcHBNZXRhZGF0YUVudGl0eSxcbiAgICAgICAgY2xpZW50SWQ6IHN0cmluZ1xuICAgICk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISEoZW50aXR5LmNsaWVudElkICYmIGNsaWVudElkID09PSBlbnRpdHkuY2xpZW50SWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGhlbHBlciB0byBtYXRjaCBmYW1pbHkgaWRzXG4gICAgICogQHBhcmFtIGVudGl0eVxuICAgICAqIEBwYXJhbSBmYW1pbHlJZFxuICAgICAqL1xuICAgIHByaXZhdGUgbWF0Y2hGYW1pbHlJZChcbiAgICAgICAgZW50aXR5OiBDcmVkZW50aWFsRW50aXR5IHwgQXBwTWV0YWRhdGFFbnRpdHksXG4gICAgICAgIGZhbWlseUlkOiBzdHJpbmdcbiAgICApOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICEhKGVudGl0eS5mYW1pbHlJZCAmJiBmYW1pbHlJZCA9PT0gZW50aXR5LmZhbWlseUlkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBoZWxwZXIgdG8gbWF0Y2ggcmVhbG1cbiAgICAgKiBAcGFyYW0gZW50aXR5XG4gICAgICogQHBhcmFtIHJlYWxtXG4gICAgICovXG4gICAgcHJpdmF0ZSBtYXRjaFJlYWxtKFxuICAgICAgICBlbnRpdHk6IEFjY291bnRFbnRpdHkgfCBDcmVkZW50aWFsRW50aXR5LFxuICAgICAgICByZWFsbTogc3RyaW5nXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhIShlbnRpdHkucmVhbG0/LnRvTG93ZXJDYXNlKCkgPT09IHJlYWxtLnRvTG93ZXJDYXNlKCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGhlbHBlciB0byBtYXRjaCBuYXRpdmVBY2NvdW50SWRcbiAgICAgKiBAcGFyYW0gZW50aXR5XG4gICAgICogQHBhcmFtIG5hdGl2ZUFjY291bnRJZFxuICAgICAqIEByZXR1cm5zIGJvb2xlYW4gaW5kaWNhdGluZyB0aGUgbWF0Y2ggcmVzdWx0XG4gICAgICovXG4gICAgcHJpdmF0ZSBtYXRjaE5hdGl2ZUFjY291bnRJZChcbiAgICAgICAgZW50aXR5OiBBY2NvdW50RW50aXR5LFxuICAgICAgICBuYXRpdmVBY2NvdW50SWQ6IHN0cmluZ1xuICAgICk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISEoXG4gICAgICAgICAgICBlbnRpdHkubmF0aXZlQWNjb3VudElkICYmIG5hdGl2ZUFjY291bnRJZCA9PT0gZW50aXR5Lm5hdGl2ZUFjY291bnRJZFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGhlbHBlciB0byBtYXRjaCBsb2dpbkhpbnQgd2hpY2ggY2FuIGJlIGVpdGhlcjpcbiAgICAgKiAxLiBsb2dpbl9oaW50IElEIHRva2VuIGNsYWltXG4gICAgICogMi4gdXNlcm5hbWUgaW4gY2FjaGVkIGFjY291bnQgb2JqZWN0XG4gICAgICogMy4gdXBuIGluIElEIHRva2VuIGNsYWltc1xuICAgICAqIEBwYXJhbSBlbnRpdHlcbiAgICAgKiBAcGFyYW0gbG9naW5IaW50XG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICBwcml2YXRlIG1hdGNoTG9naW5IaW50RnJvbVRva2VuQ2xhaW1zKFxuICAgICAgICB0b2tlbkNsYWltczogVG9rZW5DbGFpbXMsXG4gICAgICAgIGxvZ2luSGludDogc3RyaW5nXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICh0b2tlbkNsYWltcy5sb2dpbl9oaW50ID09PSBsb2dpbkhpbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRva2VuQ2xhaW1zLnByZWZlcnJlZF91c2VybmFtZSA9PT0gbG9naW5IaW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0b2tlbkNsYWltcy51cG4gPT09IGxvZ2luSGludCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGVscGVyIHRvIG1hdGNoIHNpZFxuICAgICAqIEBwYXJhbSBlbnRpdHlcbiAgICAgKiBAcGFyYW0gc2lkXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgc2lkIGNsYWltIGlzIHByZXNlbnQgYW5kIG1hdGNoZXMgdGhlIGZpbHRlclxuICAgICAqL1xuICAgIHByaXZhdGUgbWF0Y2hTaWQoaWRUb2tlbkNsYWltczogVG9rZW5DbGFpbXMsIHNpZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBpZFRva2VuQ2xhaW1zLnNpZCA9PT0gc2lkO1xuICAgIH1cblxuICAgIHByaXZhdGUgbWF0Y2hBdXRob3JpdHlUeXBlKFxuICAgICAgICBlbnRpdHk6IEFjY291bnRFbnRpdHksXG4gICAgICAgIGF1dGhvcml0eVR5cGU6IHN0cmluZ1xuICAgICk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISEoXG4gICAgICAgICAgICBlbnRpdHkuYXV0aG9yaXR5VHlwZSAmJlxuICAgICAgICAgICAgYXV0aG9yaXR5VHlwZS50b0xvd2VyQ2FzZSgpID09PSBlbnRpdHkuYXV0aG9yaXR5VHlwZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSB0YXJnZXQgc2NvcGVzIGFyZSBhIHN1YnNldCBvZiB0aGUgY3VycmVudCBlbnRpdHkncyBzY29wZXMsIGZhbHNlIG90aGVyd2lzZS5cbiAgICAgKiBAcGFyYW0gZW50aXR5XG4gICAgICogQHBhcmFtIHRhcmdldFxuICAgICAqL1xuICAgIHByaXZhdGUgbWF0Y2hUYXJnZXQoZW50aXR5OiBDcmVkZW50aWFsRW50aXR5LCB0YXJnZXQ6IFNjb3BlU2V0KTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGlzTm90QWNjZXNzVG9rZW5DcmVkZW50aWFsID1cbiAgICAgICAgICAgIGVudGl0eS5jcmVkZW50aWFsVHlwZSAhPT0gQ3JlZGVudGlhbFR5cGUuQUNDRVNTX1RPS0VOICYmXG4gICAgICAgICAgICBlbnRpdHkuY3JlZGVudGlhbFR5cGUgIT09XG4gICAgICAgICAgICAgICAgQ3JlZGVudGlhbFR5cGUuQUNDRVNTX1RPS0VOX1dJVEhfQVVUSF9TQ0hFTUU7XG5cbiAgICAgICAgaWYgKGlzTm90QWNjZXNzVG9rZW5DcmVkZW50aWFsIHx8ICFlbnRpdHkudGFyZ2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBlbnRpdHlTY29wZVNldDogU2NvcGVTZXQgPSBTY29wZVNldC5mcm9tU3RyaW5nKGVudGl0eS50YXJnZXQpO1xuXG4gICAgICAgIHJldHVybiBlbnRpdHlTY29wZVNldC5jb250YWluc1Njb3BlU2V0KHRhcmdldCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBjcmVkZW50aWFsJ3MgdG9rZW5UeXBlIG9yIEF1dGhlbnRpY2F0aW9uIFNjaGVtZSBtYXRjaGVzIHRoZSBvbmUgaW4gdGhlIHJlcXVlc3QsIGZhbHNlIG90aGVyd2lzZVxuICAgICAqIEBwYXJhbSBlbnRpdHlcbiAgICAgKiBAcGFyYW0gdG9rZW5UeXBlXG4gICAgICovXG4gICAgcHJpdmF0ZSBtYXRjaFRva2VuVHlwZShcbiAgICAgICAgZW50aXR5OiBDcmVkZW50aWFsRW50aXR5LFxuICAgICAgICB0b2tlblR5cGU6IEF1dGhlbnRpY2F0aW9uU2NoZW1lXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhIShlbnRpdHkudG9rZW5UeXBlICYmIGVudGl0eS50b2tlblR5cGUgPT09IHRva2VuVHlwZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBjcmVkZW50aWFsJ3Mga2V5SWQgbWF0Y2hlcyB0aGUgb25lIGluIHRoZSByZXF1ZXN0LCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKiBAcGFyYW0gZW50aXR5XG4gICAgICogQHBhcmFtIGtleUlkXG4gICAgICovXG4gICAgcHJpdmF0ZSBtYXRjaEtleUlkKGVudGl0eTogQ3JlZGVudGlhbEVudGl0eSwga2V5SWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISEoZW50aXR5LmtleUlkICYmIGVudGl0eS5rZXlJZCA9PT0ga2V5SWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgaWYgYSBnaXZlbiBjYWNoZSBlbnRpdHkgaXMgb2YgdGhlIHR5cGUgYXBwbWV0YWRhdGFcbiAgICAgKiBAcGFyYW0ga2V5XG4gICAgICovXG4gICAgcHJpdmF0ZSBpc0FwcE1ldGFkYXRhKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBrZXkuaW5kZXhPZihBUFBfTUVUQURBVEEpICE9PSAtMTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZXR1cm5zIGlmIGEgZ2l2ZW4gY2FjaGUgZW50aXR5IGlzIG9mIHRoZSB0eXBlIGF1dGhvcml0eW1ldGFkYXRhXG4gICAgICogQHBhcmFtIGtleVxuICAgICAqL1xuICAgIHByb3RlY3RlZCBpc0F1dGhvcml0eU1ldGFkYXRhKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBrZXkuaW5kZXhPZihBVVRIT1JJVFlfTUVUQURBVEFfQ09OU1RBTlRTLkNBQ0hFX0tFWSkgIT09IC0xO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgY2FjaGUga2V5IHVzZWQgZm9yIGNsb3VkIGluc3RhbmNlIG1ldGFkYXRhXG4gICAgICovXG4gICAgZ2VuZXJhdGVBdXRob3JpdHlNZXRhZGF0YUNhY2hlS2V5KGF1dGhvcml0eTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGAke0FVVEhPUklUWV9NRVRBREFUQV9DT05TVEFOVFMuQ0FDSEVfS0VZfS0ke3RoaXMuY2xpZW50SWR9LSR7YXV0aG9yaXR5fWA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGVscGVyIHRvIGNvbnZlcnQgc2VyaWFsaXplZCBkYXRhIHRvIG9iamVjdFxuICAgICAqIEBwYXJhbSBvYmpcbiAgICAgKiBAcGFyYW0ganNvblxuICAgICAqL1xuICAgIHN0YXRpYyB0b09iamVjdDxUPihvYmo6IFQsIGpzb246IG9iamVjdCk6IFQge1xuICAgICAgICBmb3IgKGNvbnN0IHByb3BlcnR5TmFtZSBpbiBqc29uKSB7XG4gICAgICAgICAgICBvYmpbcHJvcGVydHlOYW1lXSA9IGpzb25bcHJvcGVydHlOYW1lXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cbn1cblxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGNsYXNzIERlZmF1bHRTdG9yYWdlQ2xhc3MgZXh0ZW5kcyBDYWNoZU1hbmFnZXIge1xuICAgIGFzeW5jIHNldEFjY291bnQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JDb2Rlcy5tZXRob2ROb3RJbXBsZW1lbnRlZCk7XG4gICAgfVxuICAgIGdldEFjY291bnQoKTogQWNjb3VudEVudGl0eSB7XG4gICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JDb2Rlcy5tZXRob2ROb3RJbXBsZW1lbnRlZCk7XG4gICAgfVxuICAgIGFzeW5jIHNldElkVG9rZW5DcmVkZW50aWFsKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubWV0aG9kTm90SW1wbGVtZW50ZWQpO1xuICAgIH1cbiAgICBnZXRJZFRva2VuQ3JlZGVudGlhbCgpOiBJZFRva2VuRW50aXR5IHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvckNvZGVzLm1ldGhvZE5vdEltcGxlbWVudGVkKTtcbiAgICB9XG4gICAgYXN5bmMgc2V0QWNjZXNzVG9rZW5DcmVkZW50aWFsKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubWV0aG9kTm90SW1wbGVtZW50ZWQpO1xuICAgIH1cbiAgICBnZXRBY2Nlc3NUb2tlbkNyZWRlbnRpYWwoKTogQWNjZXNzVG9rZW5FbnRpdHkge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubWV0aG9kTm90SW1wbGVtZW50ZWQpO1xuICAgIH1cbiAgICBhc3luYyBzZXRSZWZyZXNoVG9rZW5DcmVkZW50aWFsKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubWV0aG9kTm90SW1wbGVtZW50ZWQpO1xuICAgIH1cbiAgICBnZXRSZWZyZXNoVG9rZW5DcmVkZW50aWFsKCk6IFJlZnJlc2hUb2tlbkVudGl0eSB7XG4gICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JDb2Rlcy5tZXRob2ROb3RJbXBsZW1lbnRlZCk7XG4gICAgfVxuICAgIHNldEFwcE1ldGFkYXRhKCk6IHZvaWQge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubWV0aG9kTm90SW1wbGVtZW50ZWQpO1xuICAgIH1cbiAgICBnZXRBcHBNZXRhZGF0YSgpOiBBcHBNZXRhZGF0YUVudGl0eSB7XG4gICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JDb2Rlcy5tZXRob2ROb3RJbXBsZW1lbnRlZCk7XG4gICAgfVxuICAgIHNldFNlcnZlclRlbGVtZXRyeSgpOiB2b2lkIHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvckNvZGVzLm1ldGhvZE5vdEltcGxlbWVudGVkKTtcbiAgICB9XG4gICAgZ2V0U2VydmVyVGVsZW1ldHJ5KCk6IFNlcnZlclRlbGVtZXRyeUVudGl0eSB7XG4gICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JDb2Rlcy5tZXRob2ROb3RJbXBsZW1lbnRlZCk7XG4gICAgfVxuICAgIHNldEF1dGhvcml0eU1ldGFkYXRhKCk6IHZvaWQge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubWV0aG9kTm90SW1wbGVtZW50ZWQpO1xuICAgIH1cbiAgICBnZXRBdXRob3JpdHlNZXRhZGF0YSgpOiBBdXRob3JpdHlNZXRhZGF0YUVudGl0eSB8IG51bGwge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubWV0aG9kTm90SW1wbGVtZW50ZWQpO1xuICAgIH1cbiAgICBnZXRBdXRob3JpdHlNZXRhZGF0YUtleXMoKTogQXJyYXk8c3RyaW5nPiB7XG4gICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JDb2Rlcy5tZXRob2ROb3RJbXBsZW1lbnRlZCk7XG4gICAgfVxuICAgIHNldFRocm90dGxpbmdDYWNoZSgpOiB2b2lkIHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvckNvZGVzLm1ldGhvZE5vdEltcGxlbWVudGVkKTtcbiAgICB9XG4gICAgZ2V0VGhyb3R0bGluZ0NhY2hlKCk6IFRocm90dGxpbmdFbnRpdHkge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubWV0aG9kTm90SW1wbGVtZW50ZWQpO1xuICAgIH1cbiAgICByZW1vdmVJdGVtKCk6IGJvb2xlYW4ge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubWV0aG9kTm90SW1wbGVtZW50ZWQpO1xuICAgIH1cbiAgICBnZXRLZXlzKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvckNvZGVzLm1ldGhvZE5vdEltcGxlbWVudGVkKTtcbiAgICB9XG4gICAgZ2V0QWNjb3VudEtleXMoKTogc3RyaW5nW10ge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubWV0aG9kTm90SW1wbGVtZW50ZWQpO1xuICAgIH1cbiAgICBnZXRUb2tlbktleXMoKTogVG9rZW5LZXlzIHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvckNvZGVzLm1ldGhvZE5vdEltcGxlbWVudGVkKTtcbiAgICB9XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IElOZXR3b3JrTW9kdWxlIH0gZnJvbSBcIi4uL25ldHdvcmsvSU5ldHdvcmtNb2R1bGUuanNcIjtcbmltcG9ydCB7IERFRkFVTFRfQ1JZUFRPX0lNUExFTUVOVEFUSU9OLCBJQ3J5cHRvIH0gZnJvbSBcIi4uL2NyeXB0by9JQ3J5cHRvLmpzXCI7XG5pbXBvcnQgeyBJTG9nZ2VyQ2FsbGJhY2ssIExvZ2dlciwgTG9nTGV2ZWwgfSBmcm9tIFwiLi4vbG9nZ2VyL0xvZ2dlci5qc1wiO1xuaW1wb3J0IHtcbiAgICBDb25zdGFudHMsXG4gICAgREVGQVVMVF9UT0tFTl9SRU5FV0FMX09GRlNFVF9TRUMsXG59IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcbmltcG9ydCB7IHZlcnNpb24gfSBmcm9tIFwiLi4vcGFja2FnZU1ldGFkYXRhLmpzXCI7XG5pbXBvcnQgeyBBdXRob3JpdHkgfSBmcm9tIFwiLi4vYXV0aG9yaXR5L0F1dGhvcml0eS5qc1wiO1xuaW1wb3J0IHsgQXp1cmVDbG91ZEluc3RhbmNlIH0gZnJvbSBcIi4uL2F1dGhvcml0eS9BdXRob3JpdHlPcHRpb25zLmpzXCI7XG5pbXBvcnQgeyBDYWNoZU1hbmFnZXIsIERlZmF1bHRTdG9yYWdlQ2xhc3MgfSBmcm9tIFwiLi4vY2FjaGUvQ2FjaGVNYW5hZ2VyLmpzXCI7XG5pbXBvcnQgeyBTZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyIH0gZnJvbSBcIi4uL3RlbGVtZXRyeS9zZXJ2ZXIvU2VydmVyVGVsZW1ldHJ5TWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgSUNhY2hlUGx1Z2luIH0gZnJvbSBcIi4uL2NhY2hlL2ludGVyZmFjZS9JQ2FjaGVQbHVnaW4uanNcIjtcbmltcG9ydCB7IElTZXJpYWxpemFibGVUb2tlbkNhY2hlIH0gZnJvbSBcIi4uL2NhY2hlL2ludGVyZmFjZS9JU2VyaWFsaXphYmxlVG9rZW5DYWNoZS5qc1wiO1xuaW1wb3J0IHsgQ2xpZW50Q3JlZGVudGlhbHMgfSBmcm9tIFwiLi4vYWNjb3VudC9DbGllbnRDcmVkZW50aWFscy5qc1wiO1xuaW1wb3J0IHsgUHJvdG9jb2xNb2RlIH0gZnJvbSBcIi4uL2F1dGhvcml0eS9Qcm90b2NvbE1vZGUuanNcIjtcbmltcG9ydCB7XG4gICAgQ2xpZW50QXV0aEVycm9yQ29kZXMsXG4gICAgY3JlYXRlQ2xpZW50QXV0aEVycm9yLFxufSBmcm9tIFwiLi4vZXJyb3IvQ2xpZW50QXV0aEVycm9yLmpzXCI7XG5cbi8qKlxuICogVXNlIHRoZSBjb25maWd1cmF0aW9uIG9iamVjdCB0byBjb25maWd1cmUgTVNBTCBNb2R1bGVzIGFuZCBpbml0aWFsaXplIHRoZSBiYXNlIGludGVyZmFjZXMgZm9yIE1TQUwuXG4gKlxuICogVGhpcyBvYmplY3QgYWxsb3dzIHlvdSB0byBjb25maWd1cmUgaW1wb3J0YW50IGVsZW1lbnRzIG9mIE1TQUwgZnVuY3Rpb25hbGl0eTpcbiAqIC0gYXV0aE9wdGlvbnMgICAgICAgICAgICAgICAgLSBBdXRoZW50aWNhdGlvbiBmb3IgYXBwbGljYXRpb25cbiAqIC0gY3J5cHRvSW50ZXJmYWNlICAgICAgICAgICAgLSBJbXBsZW1lbnRhdGlvbiBvZiBjcnlwdG8gZnVuY3Rpb25zXG4gKiAtIGxpYnJhcnlJbmZvICAgICAgICAgICAgICAgIC0gTGlicmFyeSBtZXRhZGF0YVxuICogLSB0ZWxlbWV0cnkgICAgICAgICAgICAgICAgICAtIFRlbGVtZXRyeSBvcHRpb25zIGFuZCBkYXRhXG4gKiAtIGxvZ2dlck9wdGlvbnMgICAgICAgICAgICAgIC0gTG9nZ2luZyBmb3IgYXBwbGljYXRpb25cbiAqIC0gbmV0d29ya0ludGVyZmFjZSAgICAgICAgICAgLSBOZXR3b3JrIGltcGxlbWVudGF0aW9uXG4gKiAtIHN0b3JhZ2VJbnRlcmZhY2UgICAgICAgICAgIC0gU3RvcmFnZSBpbXBsZW1lbnRhdGlvblxuICogLSBzeXN0ZW1PcHRpb25zICAgICAgICAgICAgICAtIEFkZGl0aW9uYWwgbGlicmFyeSBvcHRpb25zXG4gKiAtIGNsaWVudENyZWRlbnRpYWxzICAgICAgICAgIC0gQ3JlZGVudGlhbHMgb3B0aW9ucyBmb3IgY29uZmlkZW50aWFsIGNsaWVudHNcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdHlwZSBDbGllbnRDb25maWd1cmF0aW9uID0ge1xuICAgIGF1dGhPcHRpb25zOiBBdXRoT3B0aW9ucztcbiAgICBzeXN0ZW1PcHRpb25zPzogU3lzdGVtT3B0aW9ucztcbiAgICBsb2dnZXJPcHRpb25zPzogTG9nZ2VyT3B0aW9ucztcbiAgICBjYWNoZU9wdGlvbnM/OiBDYWNoZU9wdGlvbnM7XG4gICAgc3RvcmFnZUludGVyZmFjZT86IENhY2hlTWFuYWdlcjtcbiAgICBuZXR3b3JrSW50ZXJmYWNlPzogSU5ldHdvcmtNb2R1bGU7XG4gICAgY3J5cHRvSW50ZXJmYWNlPzogSUNyeXB0bztcbiAgICBjbGllbnRDcmVkZW50aWFscz86IENsaWVudENyZWRlbnRpYWxzO1xuICAgIGxpYnJhcnlJbmZvPzogTGlicmFyeUluZm87XG4gICAgdGVsZW1ldHJ5PzogVGVsZW1ldHJ5T3B0aW9ucztcbiAgICBzZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyPzogU2VydmVyVGVsZW1ldHJ5TWFuYWdlciB8IG51bGw7XG4gICAgcGVyc2lzdGVuY2VQbHVnaW4/OiBJQ2FjaGVQbHVnaW4gfCBudWxsO1xuICAgIHNlcmlhbGl6YWJsZUNhY2hlPzogSVNlcmlhbGl6YWJsZVRva2VuQ2FjaGUgfCBudWxsO1xufTtcblxuZXhwb3J0IHR5cGUgQ29tbW9uQ2xpZW50Q29uZmlndXJhdGlvbiA9IHtcbiAgICBhdXRoT3B0aW9uczogUmVxdWlyZWQ8QXV0aE9wdGlvbnM+O1xuICAgIHN5c3RlbU9wdGlvbnM6IFJlcXVpcmVkPFN5c3RlbU9wdGlvbnM+O1xuICAgIGxvZ2dlck9wdGlvbnM6IFJlcXVpcmVkPExvZ2dlck9wdGlvbnM+O1xuICAgIGNhY2hlT3B0aW9uczogUmVxdWlyZWQ8Q2FjaGVPcHRpb25zPjtcbiAgICBzdG9yYWdlSW50ZXJmYWNlOiBDYWNoZU1hbmFnZXI7XG4gICAgbmV0d29ya0ludGVyZmFjZTogSU5ldHdvcmtNb2R1bGU7XG4gICAgY3J5cHRvSW50ZXJmYWNlOiBSZXF1aXJlZDxJQ3J5cHRvPjtcbiAgICBsaWJyYXJ5SW5mbzogTGlicmFyeUluZm87XG4gICAgdGVsZW1ldHJ5OiBSZXF1aXJlZDxUZWxlbWV0cnlPcHRpb25zPjtcbiAgICBzZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyOiBTZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyIHwgbnVsbDtcbiAgICBjbGllbnRDcmVkZW50aWFsczogQ2xpZW50Q3JlZGVudGlhbHM7XG4gICAgcGVyc2lzdGVuY2VQbHVnaW46IElDYWNoZVBsdWdpbiB8IG51bGw7XG4gICAgc2VyaWFsaXphYmxlQ2FjaGU6IElTZXJpYWxpemFibGVUb2tlbkNhY2hlIHwgbnVsbDtcbn07XG5cbi8qKlxuICogVXNlIHRoaXMgdG8gY29uZmlndXJlIHRoZSBhdXRoIG9wdGlvbnMgaW4gdGhlIENsaWVudENvbmZpZ3VyYXRpb24gb2JqZWN0XG4gKlxuICogLSBjbGllbnRJZCAgICAgICAgICAgICAgICAgICAgLSBDbGllbnQgSUQgb2YgeW91ciBhcHAgcmVnaXN0ZXJlZCB3aXRoIG91ciBBcHBsaWNhdGlvbiByZWdpc3RyYXRpb24gcG9ydGFsIDogaHR0cHM6Ly9wb3J0YWwuYXp1cmUuY29tLyNibGFkZS9NaWNyb3NvZnRfQUFEX0lBTS9BY3RpdmVEaXJlY3RvcnlNZW51QmxhZGUvUmVnaXN0ZXJlZEFwcHNQcmV2aWV3IGluIE1pY3Jvc29mdCBJZGVudGl0eSBQbGF0Zm9ybVxuICogLSBhdXRob3JpdHkgICAgICAgICAgICAgICAgICAgLSBZb3UgY2FuIGNvbmZpZ3VyZSBhIHNwZWNpZmljIGF1dGhvcml0eSwgZGVmYXVsdHMgdG8gXCIgXCIgb3IgXCJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vY29tbW9uXCJcbiAqIC0ga25vd25BdXRob3JpdGllcyAgICAgICAgICAgIC0gQW4gYXJyYXkgb2YgVVJJcyB0aGF0IGFyZSBrbm93biB0byBiZSB2YWxpZC4gVXNlZCBpbiBCMkMgc2NlbmFyaW9zLlxuICogLSBjbG91ZERpc2NvdmVyeU1ldGFkYXRhICAgICAgLSBBIHN0cmluZyBjb250YWluaW5nIHRoZSBjbG91ZCBkaXNjb3ZlcnkgcmVzcG9uc2UuIFVzZWQgaW4gQUFEIHNjZW5hcmlvcy5cbiAqIC0gY2xpZW50Q2FwYWJpbGl0aWVzICAgICAgICAgIC0gQXJyYXkgb2YgY2FwYWJpbGl0aWVzIHdoaWNoIHdpbGwgYmUgYWRkZWQgdG8gdGhlIGNsYWltcy5hY2Nlc3NfdG9rZW4ueG1zX2NjIHJlcXVlc3QgcHJvcGVydHkgb24gZXZlcnkgbmV0d29yayByZXF1ZXN0LlxuICogLSBwcm90b2NvbE1vZGUgICAgICAgICAgICAgICAgLSBFbnVtIHRoYXQgcmVwcmVzZW50cyB0aGUgcHJvdG9jb2wgdGhhdCBtc2FsIGZvbGxvd3MuIFVzZWQgZm9yIGNvbmZpZ3VyaW5nIHByb3BlciBlbmRwb2ludHMuXG4gKiAtIHNraXBBdXRob3JpdHlNZXRhZGF0YUNhY2hlICAtIEEgZmxhZyB0byBjaG9vc2Ugd2hldGhlciB0byB1c2Ugb3Igbm90IHVzZSB0aGUgbG9jYWwgbWV0YWRhdGEgY2FjaGUgZHVyaW5nIGF1dGhvcml0eSBpbml0aWFsaXphdGlvbi4gRGVmYXVsdHMgdG8gZmFsc2UuXG4gKiAtIGluc3RhbmNlQXdhcmUgICAgICAgICAgICAgICAtIEEgZmxhZyBvZiB3aGV0aGVyIHRoZSBTVFMgd2lsbCBzZW5kIGJhY2sgYWRkaXRpb25hbCBwYXJhbWV0ZXJzIHRvIHNwZWNpZnkgd2hlcmUgdGhlIHRva2VucyBzaG91bGQgYmUgcmV0cmlldmVkIGZyb20uXG4gKiAtIHJlZGlyZWN0VXJpICAgICAgICAgICAgICAgICAtIFRoZSByZWRpcmVjdCBVUkkgd2hlcmUgYXV0aGVudGljYXRpb24gcmVzcG9uc2VzIGNhbiBiZSByZWNlaXZlZCBieSB5b3VyIGFwcGxpY2F0aW9uLiBJdCBtdXN0IGV4YWN0bHkgbWF0Y2ggb25lIG9mIHRoZSByZWRpcmVjdCBVUklzIHJlZ2lzdGVyZWQgaW4gdGhlIEF6dXJlIHBvcnRhbC5cbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdHlwZSBBdXRoT3B0aW9ucyA9IHtcbiAgICBjbGllbnRJZDogc3RyaW5nO1xuICAgIGF1dGhvcml0eTogQXV0aG9yaXR5O1xuICAgIHJlZGlyZWN0VXJpOiBzdHJpbmc7XG4gICAgY2xpZW50Q2FwYWJpbGl0aWVzPzogQXJyYXk8c3RyaW5nPjtcbiAgICBhenVyZUNsb3VkT3B0aW9ucz86IEF6dXJlQ2xvdWRPcHRpb25zO1xuICAgIHNraXBBdXRob3JpdHlNZXRhZGF0YUNhY2hlPzogYm9vbGVhbjtcbiAgICBpbnN0YW5jZUF3YXJlPzogYm9vbGVhbjtcbn07XG5cbi8qKlxuICogVXNlIHRoaXMgdG8gY29uZmlndXJlIHRva2VuIHJlbmV3YWwgaW5mbyBpbiB0aGUgQ29uZmlndXJhdGlvbiBvYmplY3RcbiAqXG4gKiAtIHRva2VuUmVuZXdhbE9mZnNldFNlY29uZHMgICAgLSBTZXRzIHRoZSB3aW5kb3cgb2Ygb2Zmc2V0IG5lZWRlZCB0byByZW5ldyB0aGUgdG9rZW4gYmVmb3JlIGV4cGlyeVxuICovXG5leHBvcnQgdHlwZSBTeXN0ZW1PcHRpb25zID0ge1xuICAgIHRva2VuUmVuZXdhbE9mZnNldFNlY29uZHM/OiBudW1iZXI7XG4gICAgcHJldmVudENvcnNQcmVmbGlnaHQ/OiBib29sZWFuO1xufTtcblxuLyoqXG4gKiAgVXNlIHRoaXMgdG8gY29uZmlndXJlIHRoZSBsb2dnaW5nIHRoYXQgTVNBTCBkb2VzLCBieSBjb25maWd1cmluZyBsb2dnZXIgb3B0aW9ucyBpbiB0aGUgQ29uZmlndXJhdGlvbiBvYmplY3RcbiAqXG4gKiAtIGxvZ2dlckNhbGxiYWNrICAgICAgICAgICAgICAgIC0gQ2FsbGJhY2sgZm9yIGxvZ2dlclxuICogLSBwaWlMb2dnaW5nRW5hYmxlZCAgICAgICAgICAgICAtIFNldHMgd2hldGhlciBwaWkgbG9nZ2luZyBpcyBlbmFibGVkXG4gKiAtIGxvZ0xldmVsICAgICAgICAgICAgICAgICAgICAgIC0gU2V0cyB0aGUgbGV2ZWwgYXQgd2hpY2ggbG9nZ2luZyBoYXBwZW5zXG4gKiAtIGNvcnJlbGF0aW9uSWQgICAgICAgICAgICAgICAgIC0gU2V0cyB0aGUgY29ycmVsYXRpb25JZCBwcmludGVkIGJ5IHRoZSBsb2dnZXJcbiAqL1xuZXhwb3J0IHR5cGUgTG9nZ2VyT3B0aW9ucyA9IHtcbiAgICBsb2dnZXJDYWxsYmFjaz86IElMb2dnZXJDYWxsYmFjaztcbiAgICBwaWlMb2dnaW5nRW5hYmxlZD86IGJvb2xlYW47XG4gICAgbG9nTGV2ZWw/OiBMb2dMZXZlbDtcbiAgICBjb3JyZWxhdGlvbklkPzogc3RyaW5nO1xufTtcblxuLyoqXG4gKiAgVXNlIHRoaXMgdG8gY29uZmlndXJlIGNyZWRlbnRpYWwgY2FjaGUgcHJlZmVyZW5jZXMgaW4gdGhlIENsaWVudENvbmZpZ3VyYXRpb24gb2JqZWN0XG4gKlxuICogLSBjbGFpbXNCYXNlZENhY2hpbmdFbmFibGVkICAgLSBTZXRzIHdoZXRoZXIgdG9rZW5zIHNob3VsZCBiZSBjYWNoZWQgYmFzZWQgb24gdGhlIGNsYWltcyBoYXNoLiBEZWZhdWx0IGlzIGZhbHNlLlxuICovXG5leHBvcnQgdHlwZSBDYWNoZU9wdGlvbnMgPSB7XG4gICAgY2xhaW1zQmFzZWRDYWNoaW5nRW5hYmxlZD86IGJvb2xlYW47XG59O1xuXG4vKipcbiAqIExpYnJhcnktc3BlY2lmaWMgb3B0aW9uc1xuICovXG5leHBvcnQgdHlwZSBMaWJyYXJ5SW5mbyA9IHtcbiAgICBza3U6IHN0cmluZztcbiAgICB2ZXJzaW9uOiBzdHJpbmc7XG4gICAgY3B1OiBzdHJpbmc7XG4gICAgb3M6IHN0cmluZztcbn07XG5cbi8qKlxuICogQXp1cmVDbG91ZEluc3RhbmNlIHNwZWNpZmljIG9wdGlvbnNcbiAqXG4gKiAtIGF6dXJlQ2xvdWRJbnN0YW5jZSAgICAgICAgICAgICAtIHN0cmluZyBlbnVtIHByb3ZpZGluZyBzaG9ydCBub3RhdGlvbiBmb3Igc292ZXJpZ24gYW5kIHB1YmxpYyBjbG91ZCBhdXRob3JpdGllc1xuICogLSB0ZW5hbnQgICAgICAgICAgICAgICAgICAgICAgICAgLSBwcm92aXNpb24gdG8gcHJvdmlkZSB0aGUgdGVuYW50IGluZm9cbiAqL1xuZXhwb3J0IHR5cGUgQXp1cmVDbG91ZE9wdGlvbnMgPSB7XG4gICAgYXp1cmVDbG91ZEluc3RhbmNlOiBBenVyZUNsb3VkSW5zdGFuY2U7XG4gICAgdGVuYW50Pzogc3RyaW5nO1xufTtcblxuZXhwb3J0IHR5cGUgVGVsZW1ldHJ5T3B0aW9ucyA9IHtcbiAgICBhcHBsaWNhdGlvbjogQXBwbGljYXRpb25UZWxlbWV0cnk7XG59O1xuXG4vKipcbiAqIFRlbGVtZXRyeSBpbmZvcm1hdGlvbiBzZW50IG9uIHJlcXVlc3RcbiAqIC0gYXBwTmFtZTogVW5pcXVlIHN0cmluZyBuYW1lIG9mIGFuIGFwcGxpY2F0aW9uXG4gKiAtIGFwcFZlcnNpb246IFZlcnNpb24gb2YgdGhlIGFwcGxpY2F0aW9uIHVzaW5nIE1TQUxcbiAqL1xuZXhwb3J0IHR5cGUgQXBwbGljYXRpb25UZWxlbWV0cnkgPSB7XG4gICAgYXBwTmFtZTogc3RyaW5nO1xuICAgIGFwcFZlcnNpb246IHN0cmluZztcbn07XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NZU1RFTV9PUFRJT05TOiBSZXF1aXJlZDxTeXN0ZW1PcHRpb25zPiA9IHtcbiAgICB0b2tlblJlbmV3YWxPZmZzZXRTZWNvbmRzOiBERUZBVUxUX1RPS0VOX1JFTkVXQUxfT0ZGU0VUX1NFQyxcbiAgICBwcmV2ZW50Q29yc1ByZWZsaWdodDogZmFsc2UsXG59O1xuXG5jb25zdCBERUZBVUxUX0xPR0dFUl9JTVBMRU1FTlRBVElPTjogUmVxdWlyZWQ8TG9nZ2VyT3B0aW9ucz4gPSB7XG4gICAgbG9nZ2VyQ2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgLy8gYWxsb3cgdXNlcnMgdG8gbm90IHNldCBsb2dnZXJDYWxsYmFja1xuICAgIH0sXG4gICAgcGlpTG9nZ2luZ0VuYWJsZWQ6IGZhbHNlLFxuICAgIGxvZ0xldmVsOiBMb2dMZXZlbC5JbmZvLFxuICAgIGNvcnJlbGF0aW9uSWQ6IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG59O1xuXG5jb25zdCBERUZBVUxUX0NBQ0hFX09QVElPTlM6IFJlcXVpcmVkPENhY2hlT3B0aW9ucz4gPSB7XG4gICAgY2xhaW1zQmFzZWRDYWNoaW5nRW5hYmxlZDogZmFsc2UsXG59O1xuXG5jb25zdCBERUZBVUxUX05FVFdPUktfSU1QTEVNRU5UQVRJT046IElOZXR3b3JrTW9kdWxlID0ge1xuICAgIGFzeW5jIHNlbmRHZXRSZXF1ZXN0QXN5bmM8VD4oKTogUHJvbWlzZTxUPiB7XG4gICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JDb2Rlcy5tZXRob2ROb3RJbXBsZW1lbnRlZCk7XG4gICAgfSxcbiAgICBhc3luYyBzZW5kUG9zdFJlcXVlc3RBc3luYzxUPigpOiBQcm9taXNlPFQ+IHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvckNvZGVzLm1ldGhvZE5vdEltcGxlbWVudGVkKTtcbiAgICB9LFxufTtcblxuY29uc3QgREVGQVVMVF9MSUJSQVJZX0lORk86IExpYnJhcnlJbmZvID0ge1xuICAgIHNrdTogQ29uc3RhbnRzLlNLVSxcbiAgICB2ZXJzaW9uOiB2ZXJzaW9uLFxuICAgIGNwdTogQ29uc3RhbnRzLkVNUFRZX1NUUklORyxcbiAgICBvczogQ29uc3RhbnRzLkVNUFRZX1NUUklORyxcbn07XG5cbmNvbnN0IERFRkFVTFRfQ0xJRU5UX0NSRURFTlRJQUxTOiBDbGllbnRDcmVkZW50aWFscyA9IHtcbiAgICBjbGllbnRTZWNyZXQ6IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgY2xpZW50QXNzZXJ0aW9uOiB1bmRlZmluZWQsXG59O1xuXG5jb25zdCBERUZBVUxUX0FaVVJFX0NMT1VEX09QVElPTlM6IEF6dXJlQ2xvdWRPcHRpb25zID0ge1xuICAgIGF6dXJlQ2xvdWRJbnN0YW5jZTogQXp1cmVDbG91ZEluc3RhbmNlLk5vbmUsXG4gICAgdGVuYW50OiBgJHtDb25zdGFudHMuREVGQVVMVF9DT01NT05fVEVOQU5UfWAsXG59O1xuXG5jb25zdCBERUZBVUxUX1RFTEVNRVRSWV9PUFRJT05TOiBSZXF1aXJlZDxUZWxlbWV0cnlPcHRpb25zPiA9IHtcbiAgICBhcHBsaWNhdGlvbjoge1xuICAgICAgICBhcHBOYW1lOiBcIlwiLFxuICAgICAgICBhcHBWZXJzaW9uOiBcIlwiLFxuICAgIH0sXG59O1xuXG4vKipcbiAqIEZ1bmN0aW9uIHRoYXQgc2V0cyB0aGUgZGVmYXVsdCBvcHRpb25zIHdoZW4gbm90IGV4cGxpY2l0bHkgY29uZmlndXJlZCBmcm9tIGFwcCBkZXZlbG9wZXJcbiAqXG4gKiBAcGFyYW0gQ29uZmlndXJhdGlvblxuICpcbiAqIEByZXR1cm5zIENvbmZpZ3VyYXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkQ2xpZW50Q29uZmlndXJhdGlvbih7XG4gICAgYXV0aE9wdGlvbnM6IHVzZXJBdXRoT3B0aW9ucyxcbiAgICBzeXN0ZW1PcHRpb25zOiB1c2VyU3lzdGVtT3B0aW9ucyxcbiAgICBsb2dnZXJPcHRpb25zOiB1c2VyTG9nZ2VyT3B0aW9uLFxuICAgIGNhY2hlT3B0aW9uczogdXNlckNhY2hlT3B0aW9ucyxcbiAgICBzdG9yYWdlSW50ZXJmYWNlOiBzdG9yYWdlSW1wbGVtZW50YXRpb24sXG4gICAgbmV0d29ya0ludGVyZmFjZTogbmV0d29ya0ltcGxlbWVudGF0aW9uLFxuICAgIGNyeXB0b0ludGVyZmFjZTogY3J5cHRvSW1wbGVtZW50YXRpb24sXG4gICAgY2xpZW50Q3JlZGVudGlhbHM6IGNsaWVudENyZWRlbnRpYWxzLFxuICAgIGxpYnJhcnlJbmZvOiBsaWJyYXJ5SW5mbyxcbiAgICB0ZWxlbWV0cnk6IHRlbGVtZXRyeSxcbiAgICBzZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyOiBzZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyLFxuICAgIHBlcnNpc3RlbmNlUGx1Z2luOiBwZXJzaXN0ZW5jZVBsdWdpbixcbiAgICBzZXJpYWxpemFibGVDYWNoZTogc2VyaWFsaXphYmxlQ2FjaGUsXG59OiBDbGllbnRDb25maWd1cmF0aW9uKTogQ29tbW9uQ2xpZW50Q29uZmlndXJhdGlvbiB7XG4gICAgY29uc3QgbG9nZ2VyT3B0aW9ucyA9IHtcbiAgICAgICAgLi4uREVGQVVMVF9MT0dHRVJfSU1QTEVNRU5UQVRJT04sXG4gICAgICAgIC4uLnVzZXJMb2dnZXJPcHRpb24sXG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGF1dGhPcHRpb25zOiBidWlsZEF1dGhPcHRpb25zKHVzZXJBdXRoT3B0aW9ucyksXG4gICAgICAgIHN5c3RlbU9wdGlvbnM6IHsgLi4uREVGQVVMVF9TWVNURU1fT1BUSU9OUywgLi4udXNlclN5c3RlbU9wdGlvbnMgfSxcbiAgICAgICAgbG9nZ2VyT3B0aW9uczogbG9nZ2VyT3B0aW9ucyxcbiAgICAgICAgY2FjaGVPcHRpb25zOiB7IC4uLkRFRkFVTFRfQ0FDSEVfT1BUSU9OUywgLi4udXNlckNhY2hlT3B0aW9ucyB9LFxuICAgICAgICBzdG9yYWdlSW50ZXJmYWNlOlxuICAgICAgICAgICAgc3RvcmFnZUltcGxlbWVudGF0aW9uIHx8XG4gICAgICAgICAgICBuZXcgRGVmYXVsdFN0b3JhZ2VDbGFzcyhcbiAgICAgICAgICAgICAgICB1c2VyQXV0aE9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgREVGQVVMVF9DUllQVE9fSU1QTEVNRU5UQVRJT04sXG4gICAgICAgICAgICAgICAgbmV3IExvZ2dlcihsb2dnZXJPcHRpb25zKVxuICAgICAgICAgICAgKSxcbiAgICAgICAgbmV0d29ya0ludGVyZmFjZTpcbiAgICAgICAgICAgIG5ldHdvcmtJbXBsZW1lbnRhdGlvbiB8fCBERUZBVUxUX05FVFdPUktfSU1QTEVNRU5UQVRJT04sXG4gICAgICAgIGNyeXB0b0ludGVyZmFjZTogY3J5cHRvSW1wbGVtZW50YXRpb24gfHwgREVGQVVMVF9DUllQVE9fSU1QTEVNRU5UQVRJT04sXG4gICAgICAgIGNsaWVudENyZWRlbnRpYWxzOiBjbGllbnRDcmVkZW50aWFscyB8fCBERUZBVUxUX0NMSUVOVF9DUkVERU5USUFMUyxcbiAgICAgICAgbGlicmFyeUluZm86IHsgLi4uREVGQVVMVF9MSUJSQVJZX0lORk8sIC4uLmxpYnJhcnlJbmZvIH0sXG4gICAgICAgIHRlbGVtZXRyeTogeyAuLi5ERUZBVUxUX1RFTEVNRVRSWV9PUFRJT05TLCAuLi50ZWxlbWV0cnkgfSxcbiAgICAgICAgc2VydmVyVGVsZW1ldHJ5TWFuYWdlcjogc2VydmVyVGVsZW1ldHJ5TWFuYWdlciB8fCBudWxsLFxuICAgICAgICBwZXJzaXN0ZW5jZVBsdWdpbjogcGVyc2lzdGVuY2VQbHVnaW4gfHwgbnVsbCxcbiAgICAgICAgc2VyaWFsaXphYmxlQ2FjaGU6IHNlcmlhbGl6YWJsZUNhY2hlIHx8IG51bGwsXG4gICAgfTtcbn1cblxuLyoqXG4gKiBDb25zdHJ1Y3QgYXV0aG9wdGlvbnMgZnJvbSB0aGUgY2xpZW50IGFuZCBwbGF0Zm9ybSBwYXNzZWQgdmFsdWVzXG4gKiBAcGFyYW0gYXV0aE9wdGlvbnNcbiAqL1xuZnVuY3Rpb24gYnVpbGRBdXRoT3B0aW9ucyhhdXRoT3B0aW9uczogQXV0aE9wdGlvbnMpOiBSZXF1aXJlZDxBdXRoT3B0aW9ucz4ge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNsaWVudENhcGFiaWxpdGllczogW10sXG4gICAgICAgIGF6dXJlQ2xvdWRPcHRpb25zOiBERUZBVUxUX0FaVVJFX0NMT1VEX09QVElPTlMsXG4gICAgICAgIHNraXBBdXRob3JpdHlNZXRhZGF0YUNhY2hlOiBmYWxzZSxcbiAgICAgICAgaW5zdGFuY2VBd2FyZTogZmFsc2UsXG4gICAgICAgIC4uLmF1dGhPcHRpb25zLFxuICAgIH07XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGNvbmZpZyBoYXMgcHJvdG9jb2xNb2RlIHNldCB0byBQcm90b2NvbE1vZGUuT0lEQywgZmFsc2Ugb3RoZXJ3aXNlXG4gKiBAcGFyYW0gQ2xpZW50Q29uZmlndXJhdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNPaWRjUHJvdG9jb2xNb2RlKGNvbmZpZzogQ2xpZW50Q29uZmlndXJhdGlvbik6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICAgIGNvbmZpZy5hdXRoT3B0aW9ucy5hdXRob3JpdHkub3B0aW9ucy5wcm90b2NvbE1vZGUgPT09IFByb3RvY29sTW9kZS5PSURDXG4gICAgKTtcbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuZXhwb3J0IHR5cGUgQ2NzQ3JlZGVudGlhbCA9IHtcbiAgICBjcmVkZW50aWFsOiBzdHJpbmc7XG4gICAgdHlwZTogQ2NzQ3JlZGVudGlhbFR5cGU7XG59O1xuXG5leHBvcnQgY29uc3QgQ2NzQ3JlZGVudGlhbFR5cGUgPSB7XG4gICAgSE9NRV9BQ0NPVU5UX0lEOiBcImhvbWVfYWNjb3VudF9pZFwiLFxuICAgIFVQTjogXCJVUE5cIixcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBDY3NDcmVkZW50aWFsVHlwZSA9XG4gICAgKHR5cGVvZiBDY3NDcmVkZW50aWFsVHlwZSlba2V5b2YgdHlwZW9mIENjc0NyZWRlbnRpYWxUeXBlXTtcbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuZXhwb3J0IGNvbnN0IENMSUVOVF9JRCA9IFwiY2xpZW50X2lkXCI7XG5leHBvcnQgY29uc3QgUkVESVJFQ1RfVVJJID0gXCJyZWRpcmVjdF91cmlcIjtcbmV4cG9ydCBjb25zdCBSRVNQT05TRV9UWVBFID0gXCJyZXNwb25zZV90eXBlXCI7XG5leHBvcnQgY29uc3QgUkVTUE9OU0VfTU9ERSA9IFwicmVzcG9uc2VfbW9kZVwiO1xuZXhwb3J0IGNvbnN0IEdSQU5UX1RZUEUgPSBcImdyYW50X3R5cGVcIjtcbmV4cG9ydCBjb25zdCBDTEFJTVMgPSBcImNsYWltc1wiO1xuZXhwb3J0IGNvbnN0IFNDT1BFID0gXCJzY29wZVwiO1xuZXhwb3J0IGNvbnN0IEVSUk9SID0gXCJlcnJvclwiO1xuZXhwb3J0IGNvbnN0IEVSUk9SX0RFU0NSSVBUSU9OID0gXCJlcnJvcl9kZXNjcmlwdGlvblwiO1xuZXhwb3J0IGNvbnN0IEFDQ0VTU19UT0tFTiA9IFwiYWNjZXNzX3Rva2VuXCI7XG5leHBvcnQgY29uc3QgSURfVE9LRU4gPSBcImlkX3Rva2VuXCI7XG5leHBvcnQgY29uc3QgUkVGUkVTSF9UT0tFTiA9IFwicmVmcmVzaF90b2tlblwiO1xuZXhwb3J0IGNvbnN0IEVYUElSRVNfSU4gPSBcImV4cGlyZXNfaW5cIjtcbmV4cG9ydCBjb25zdCBSRUZSRVNIX1RPS0VOX0VYUElSRVNfSU4gPSBcInJlZnJlc2hfdG9rZW5fZXhwaXJlc19pblwiO1xuZXhwb3J0IGNvbnN0IFNUQVRFID0gXCJzdGF0ZVwiO1xuZXhwb3J0IGNvbnN0IE5PTkNFID0gXCJub25jZVwiO1xuZXhwb3J0IGNvbnN0IFBST01QVCA9IFwicHJvbXB0XCI7XG5leHBvcnQgY29uc3QgU0VTU0lPTl9TVEFURSA9IFwic2Vzc2lvbl9zdGF0ZVwiO1xuZXhwb3J0IGNvbnN0IENMSUVOVF9JTkZPID0gXCJjbGllbnRfaW5mb1wiO1xuZXhwb3J0IGNvbnN0IENPREUgPSBcImNvZGVcIjtcbmV4cG9ydCBjb25zdCBDT0RFX0NIQUxMRU5HRSA9IFwiY29kZV9jaGFsbGVuZ2VcIjtcbmV4cG9ydCBjb25zdCBDT0RFX0NIQUxMRU5HRV9NRVRIT0QgPSBcImNvZGVfY2hhbGxlbmdlX21ldGhvZFwiO1xuZXhwb3J0IGNvbnN0IENPREVfVkVSSUZJRVIgPSBcImNvZGVfdmVyaWZpZXJcIjtcbmV4cG9ydCBjb25zdCBDTElFTlRfUkVRVUVTVF9JRCA9IFwiY2xpZW50LXJlcXVlc3QtaWRcIjtcbmV4cG9ydCBjb25zdCBYX0NMSUVOVF9TS1UgPSBcIngtY2xpZW50LVNLVVwiO1xuZXhwb3J0IGNvbnN0IFhfQ0xJRU5UX1ZFUiA9IFwieC1jbGllbnQtVkVSXCI7XG5leHBvcnQgY29uc3QgWF9DTElFTlRfT1MgPSBcIngtY2xpZW50LU9TXCI7XG5leHBvcnQgY29uc3QgWF9DTElFTlRfQ1BVID0gXCJ4LWNsaWVudC1DUFVcIjtcbmV4cG9ydCBjb25zdCBYX0NMSUVOVF9DVVJSX1RFTEVNID0gXCJ4LWNsaWVudC1jdXJyZW50LXRlbGVtZXRyeVwiO1xuZXhwb3J0IGNvbnN0IFhfQ0xJRU5UX0xBU1RfVEVMRU0gPSBcIngtY2xpZW50LWxhc3QtdGVsZW1ldHJ5XCI7XG5leHBvcnQgY29uc3QgWF9NU19MSUJfQ0FQQUJJTElUWSA9IFwieC1tcy1saWItY2FwYWJpbGl0eVwiO1xuZXhwb3J0IGNvbnN0IFhfQVBQX05BTUUgPSBcIngtYXBwLW5hbWVcIjtcbmV4cG9ydCBjb25zdCBYX0FQUF9WRVIgPSBcIngtYXBwLXZlclwiO1xuZXhwb3J0IGNvbnN0IFBPU1RfTE9HT1VUX1VSSSA9IFwicG9zdF9sb2dvdXRfcmVkaXJlY3RfdXJpXCI7XG5leHBvcnQgY29uc3QgSURfVE9LRU5fSElOVCA9IFwiaWRfdG9rZW5faGludFwiO1xuZXhwb3J0IGNvbnN0IERFVklDRV9DT0RFID0gXCJkZXZpY2VfY29kZVwiO1xuZXhwb3J0IGNvbnN0IENMSUVOVF9TRUNSRVQgPSBcImNsaWVudF9zZWNyZXRcIjtcbmV4cG9ydCBjb25zdCBDTElFTlRfQVNTRVJUSU9OID0gXCJjbGllbnRfYXNzZXJ0aW9uXCI7XG5leHBvcnQgY29uc3QgQ0xJRU5UX0FTU0VSVElPTl9UWVBFID0gXCJjbGllbnRfYXNzZXJ0aW9uX3R5cGVcIjtcbmV4cG9ydCBjb25zdCBUT0tFTl9UWVBFID0gXCJ0b2tlbl90eXBlXCI7XG5leHBvcnQgY29uc3QgUkVRX0NORiA9IFwicmVxX2NuZlwiO1xuZXhwb3J0IGNvbnN0IE9CT19BU1NFUlRJT04gPSBcImFzc2VydGlvblwiO1xuZXhwb3J0IGNvbnN0IFJFUVVFU1RFRF9UT0tFTl9VU0UgPSBcInJlcXVlc3RlZF90b2tlbl91c2VcIjtcbmV4cG9ydCBjb25zdCBPTl9CRUhBTEZfT0YgPSBcIm9uX2JlaGFsZl9vZlwiO1xuZXhwb3J0IGNvbnN0IEZPQ0kgPSBcImZvY2lcIjtcbmV4cG9ydCBjb25zdCBDQ1NfSEVBREVSID0gXCJYLUFuY2hvck1haWxib3hcIjtcbmV4cG9ydCBjb25zdCBSRVRVUk5fU1BBX0NPREUgPSBcInJldHVybl9zcGFfY29kZVwiO1xuZXhwb3J0IGNvbnN0IE5BVElWRV9CUk9LRVIgPSBcIm5hdGl2ZWJyb2tlclwiO1xuZXhwb3J0IGNvbnN0IExPR09VVF9ISU5UID0gXCJsb2dvdXRfaGludFwiO1xuZXhwb3J0IGNvbnN0IFNJRCA9IFwic2lkXCI7XG5leHBvcnQgY29uc3QgTE9HSU5fSElOVCA9IFwibG9naW5faGludFwiO1xuZXhwb3J0IGNvbnN0IERPTUFJTl9ISU5UID0gXCJkb21haW5faGludFwiO1xuZXhwb3J0IGNvbnN0IFhfQ0xJRU5UX0VYVFJBX1NLVSA9IFwieC1jbGllbnQteHRyYS1za3VcIjtcbmV4cG9ydCBjb25zdCBCUk9LRVJfQ0xJRU5UX0lEID0gXCJicmtfY2xpZW50X2lkXCI7XG5leHBvcnQgY29uc3QgQlJPS0VSX1JFRElSRUNUX1VSSSA9IFwiYnJrX3JlZGlyZWN0X3VyaVwiO1xuZXhwb3J0IGNvbnN0IElOU1RBTkNFX0FXQVJFID0gXCJpbnN0YW5jZV9hd2FyZVwiO1xuZXhwb3J0IGNvbnN0IEVBUl9KV0sgPSBcImVhcl9qd2tcIjtcbmV4cG9ydCBjb25zdCBFQVJfSldFX0NSWVBUTyA9IFwiZWFyX2p3ZV9jcnlwdG9cIjtcbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgICBSZXNwb25zZU1vZGUsXG4gICAgQ0xJRU5UX0lORk8sXG4gICAgQXV0aGVudGljYXRpb25TY2hlbWUsXG4gICAgQ2xhaW1zUmVxdWVzdEtleXMsXG4gICAgUGFzc3dvcmRHcmFudENvbnN0YW50cyxcbiAgICBPSURDX0RFRkFVTFRfU0NPUEVTLFxuICAgIFRocm90dGxpbmdDb25zdGFudHMsXG4gICAgSGVhZGVyTmFtZXMsXG4gICAgT0F1dGhSZXNwb25zZVR5cGUsXG59IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcbmltcG9ydCAqIGFzIEFBRFNlcnZlclBhcmFtS2V5cyBmcm9tIFwiLi4vY29uc3RhbnRzL0FBRFNlcnZlclBhcmFtS2V5cy5qc1wiO1xuaW1wb3J0IHsgU2NvcGVTZXQgfSBmcm9tIFwiLi9TY29wZVNldC5qc1wiO1xuaW1wb3J0IHtcbiAgICBjcmVhdGVDbGllbnRDb25maWd1cmF0aW9uRXJyb3IsXG4gICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMsXG59IGZyb20gXCIuLi9lcnJvci9DbGllbnRDb25maWd1cmF0aW9uRXJyb3IuanNcIjtcbmltcG9ydCB7IFN0cmluZ0RpY3QgfSBmcm9tIFwiLi4vdXRpbHMvTXNhbFR5cGVzLmpzXCI7XG5pbXBvcnQge1xuICAgIEFwcGxpY2F0aW9uVGVsZW1ldHJ5LFxuICAgIExpYnJhcnlJbmZvLFxufSBmcm9tIFwiLi4vY29uZmlnL0NsaWVudENvbmZpZ3VyYXRpb24uanNcIjtcbmltcG9ydCB7IFNlcnZlclRlbGVtZXRyeU1hbmFnZXIgfSBmcm9tIFwiLi4vdGVsZW1ldHJ5L3NlcnZlci9TZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyLmpzXCI7XG5pbXBvcnQgeyBDbGllbnRJbmZvIH0gZnJvbSBcIi4uL2FjY291bnQvQ2xpZW50SW5mby5qc1wiO1xuaW1wb3J0IHsgSVBlcmZvcm1hbmNlQ2xpZW50IH0gZnJvbSBcIi4uL3RlbGVtZXRyeS9wZXJmb3JtYW5jZS9JUGVyZm9ybWFuY2VDbGllbnQuanNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGluc3RydW1lbnRCcm9rZXJQYXJhbXMoXG4gICAgcGFyYW1ldGVyczogTWFwPHN0cmluZywgc3RyaW5nPixcbiAgICBjb3JyZWxhdGlvbklkPzogc3RyaW5nLFxuICAgIHBlcmZvcm1hbmNlQ2xpZW50PzogSVBlcmZvcm1hbmNlQ2xpZW50XG4pOiB2b2lkIHtcbiAgICBpZiAoIWNvcnJlbGF0aW9uSWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGNsaWVudElkID0gcGFyYW1ldGVycy5nZXQoQUFEU2VydmVyUGFyYW1LZXlzLkNMSUVOVF9JRCk7XG4gICAgaWYgKGNsaWVudElkICYmIHBhcmFtZXRlcnMuaGFzKEFBRFNlcnZlclBhcmFtS2V5cy5CUk9LRVJfQ0xJRU5UX0lEKSkge1xuICAgICAgICBwZXJmb3JtYW5jZUNsaWVudD8uYWRkRmllbGRzKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGVtYmVkZGVkQ2xpZW50SWQ6IGNsaWVudElkLFxuICAgICAgICAgICAgICAgIGVtYmVkZGVkUmVkaXJlY3RVcmk6IHBhcmFtZXRlcnMuZ2V0KFxuICAgICAgICAgICAgICAgICAgICBBQURTZXJ2ZXJQYXJhbUtleXMuUkVESVJFQ1RfVVJJXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb3JyZWxhdGlvbklkXG4gICAgICAgICk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFkZCB0aGUgZ2l2ZW4gcmVzcG9uc2VfdHlwZVxuICogQHBhcmFtIHBhcmFtZXRlcnNcbiAqIEBwYXJhbSByZXNwb25zZVR5cGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFJlc3BvbnNlVHlwZShcbiAgICBwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+LFxuICAgIHJlc3BvbnNlVHlwZTogT0F1dGhSZXNwb25zZVR5cGVcbik6IHZvaWQge1xuICAgIHBhcmFtZXRlcnMuc2V0KEFBRFNlcnZlclBhcmFtS2V5cy5SRVNQT05TRV9UWVBFLCByZXNwb25zZVR5cGUpO1xufVxuXG4vKipcbiAqIGFkZCByZXNwb25zZV9tb2RlLiBkZWZhdWx0cyB0byBxdWVyeS5cbiAqIEBwYXJhbSByZXNwb25zZU1vZGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFJlc3BvbnNlTW9kZShcbiAgICBwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+LFxuICAgIHJlc3BvbnNlTW9kZT86IFJlc3BvbnNlTW9kZVxuKTogdm9pZCB7XG4gICAgcGFyYW1ldGVycy5zZXQoXG4gICAgICAgIEFBRFNlcnZlclBhcmFtS2V5cy5SRVNQT05TRV9NT0RFLFxuICAgICAgICByZXNwb25zZU1vZGUgPyByZXNwb25zZU1vZGUgOiBSZXNwb25zZU1vZGUuUVVFUllcbiAgICApO1xufVxuXG4vKipcbiAqIEFkZCBmbGFnIHRvIGluZGljYXRlIFNUUyBzaG91bGQgYXR0ZW1wdCB0byB1c2UgV0FNIGlmIGF2YWlsYWJsZVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkTmF0aXZlQnJva2VyKHBhcmFtZXRlcnM6IE1hcDxzdHJpbmcsIHN0cmluZz4pOiB2b2lkIHtcbiAgICBwYXJhbWV0ZXJzLnNldChBQURTZXJ2ZXJQYXJhbUtleXMuTkFUSVZFX0JST0tFUiwgXCIxXCIpO1xufVxuXG4vKipcbiAqIGFkZCBzY29wZXMuIHNldCBhZGRPaWRjU2NvcGVzIHRvIGZhbHNlIHRvIHByZXZlbnQgZGVmYXVsdCBzY29wZXMgaW4gbm9uLXVzZXIgc2NlbmFyaW9zXG4gKiBAcGFyYW0gc2NvcGVTZXRcbiAqIEBwYXJhbSBhZGRPaWRjU2NvcGVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRTY29wZXMoXG4gICAgcGFyYW1ldGVyczogTWFwPHN0cmluZywgc3RyaW5nPixcbiAgICBzY29wZXM6IHN0cmluZ1tdLFxuICAgIGFkZE9pZGNTY29wZXM6IGJvb2xlYW4gPSB0cnVlLFxuICAgIGRlZmF1bHRTY29wZXM6IEFycmF5PHN0cmluZz4gPSBPSURDX0RFRkFVTFRfU0NPUEVTXG4pOiB2b2lkIHtcbiAgICAvLyBBbHdheXMgYWRkIG9wZW5pZCB0byB0aGUgc2NvcGVzIHdoZW4gYWRkaW5nIE9JREMgc2NvcGVzXG4gICAgaWYgKFxuICAgICAgICBhZGRPaWRjU2NvcGVzICYmXG4gICAgICAgICFkZWZhdWx0U2NvcGVzLmluY2x1ZGVzKFwib3BlbmlkXCIpICYmXG4gICAgICAgICFzY29wZXMuaW5jbHVkZXMoXCJvcGVuaWRcIilcbiAgICApIHtcbiAgICAgICAgZGVmYXVsdFNjb3Blcy5wdXNoKFwib3BlbmlkXCIpO1xuICAgIH1cbiAgICBjb25zdCByZXF1ZXN0U2NvcGVzID0gYWRkT2lkY1Njb3Blc1xuICAgICAgICA/IFsuLi4oc2NvcGVzIHx8IFtdKSwgLi4uZGVmYXVsdFNjb3Blc11cbiAgICAgICAgOiBzY29wZXMgfHwgW107XG4gICAgY29uc3Qgc2NvcGVTZXQgPSBuZXcgU2NvcGVTZXQocmVxdWVzdFNjb3Blcyk7XG4gICAgcGFyYW1ldGVycy5zZXQoQUFEU2VydmVyUGFyYW1LZXlzLlNDT1BFLCBzY29wZVNldC5wcmludFNjb3BlcygpKTtcbn1cblxuLyoqXG4gKiBhZGQgY2xpZW50SWRcbiAqIEBwYXJhbSBjbGllbnRJZFxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ2xpZW50SWQoXG4gICAgcGFyYW1ldGVyczogTWFwPHN0cmluZywgc3RyaW5nPixcbiAgICBjbGllbnRJZDogc3RyaW5nXG4pOiB2b2lkIHtcbiAgICBwYXJhbWV0ZXJzLnNldChBQURTZXJ2ZXJQYXJhbUtleXMuQ0xJRU5UX0lELCBjbGllbnRJZCk7XG59XG5cbi8qKlxuICogYWRkIHJlZGlyZWN0X3VyaVxuICogQHBhcmFtIHJlZGlyZWN0VXJpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRSZWRpcmVjdFVyaShcbiAgICBwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+LFxuICAgIHJlZGlyZWN0VXJpOiBzdHJpbmdcbik6IHZvaWQge1xuICAgIHBhcmFtZXRlcnMuc2V0KEFBRFNlcnZlclBhcmFtS2V5cy5SRURJUkVDVF9VUkksIHJlZGlyZWN0VXJpKTtcbn1cblxuLyoqXG4gKiBhZGQgcG9zdCBsb2dvdXQgcmVkaXJlY3RVcmlcbiAqIEBwYXJhbSByZWRpcmVjdFVyaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkUG9zdExvZ291dFJlZGlyZWN0VXJpKFxuICAgIHBhcmFtZXRlcnM6IE1hcDxzdHJpbmcsIHN0cmluZz4sXG4gICAgcmVkaXJlY3RVcmk6IHN0cmluZ1xuKTogdm9pZCB7XG4gICAgcGFyYW1ldGVycy5zZXQoQUFEU2VydmVyUGFyYW1LZXlzLlBPU1RfTE9HT1VUX1VSSSwgcmVkaXJlY3RVcmkpO1xufVxuXG4vKipcbiAqIGFkZCBpZF90b2tlbl9oaW50IHRvIGxvZ291dCByZXF1ZXN0XG4gKiBAcGFyYW0gaWRUb2tlbkhpbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZElkVG9rZW5IaW50KFxuICAgIHBhcmFtZXRlcnM6IE1hcDxzdHJpbmcsIHN0cmluZz4sXG4gICAgaWRUb2tlbkhpbnQ6IHN0cmluZ1xuKTogdm9pZCB7XG4gICAgcGFyYW1ldGVycy5zZXQoQUFEU2VydmVyUGFyYW1LZXlzLklEX1RPS0VOX0hJTlQsIGlkVG9rZW5IaW50KTtcbn1cblxuLyoqXG4gKiBhZGQgZG9tYWluX2hpbnRcbiAqIEBwYXJhbSBkb21haW5IaW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGREb21haW5IaW50KFxuICAgIHBhcmFtZXRlcnM6IE1hcDxzdHJpbmcsIHN0cmluZz4sXG4gICAgZG9tYWluSGludDogc3RyaW5nXG4pOiB2b2lkIHtcbiAgICBwYXJhbWV0ZXJzLnNldChBQURTZXJ2ZXJQYXJhbUtleXMuRE9NQUlOX0hJTlQsIGRvbWFpbkhpbnQpO1xufVxuXG4vKipcbiAqIGFkZCBsb2dpbl9oaW50XG4gKiBAcGFyYW0gbG9naW5IaW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRMb2dpbkhpbnQoXG4gICAgcGFyYW1ldGVyczogTWFwPHN0cmluZywgc3RyaW5nPixcbiAgICBsb2dpbkhpbnQ6IHN0cmluZ1xuKTogdm9pZCB7XG4gICAgcGFyYW1ldGVycy5zZXQoQUFEU2VydmVyUGFyYW1LZXlzLkxPR0lOX0hJTlQsIGxvZ2luSGludCk7XG59XG5cbi8qKlxuICogQWRkcyB0aGUgQ0NTIChDYWNoZSBDcmVkZW50aWFsIFNlcnZpY2UpIHF1ZXJ5IHBhcmFtZXRlciBmb3IgbG9naW5faGludFxuICogQHBhcmFtIGxvZ2luSGludFxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ2NzVXBuKFxuICAgIHBhcmFtZXRlcnM6IE1hcDxzdHJpbmcsIHN0cmluZz4sXG4gICAgbG9naW5IaW50OiBzdHJpbmdcbik6IHZvaWQge1xuICAgIHBhcmFtZXRlcnMuc2V0KEhlYWRlck5hbWVzLkNDU19IRUFERVIsIGBVUE46JHtsb2dpbkhpbnR9YCk7XG59XG5cbi8qKlxuICogQWRkcyB0aGUgQ0NTIChDYWNoZSBDcmVkZW50aWFsIFNlcnZpY2UpIHF1ZXJ5IHBhcmFtZXRlciBmb3IgYWNjb3VudCBvYmplY3RcbiAqIEBwYXJhbSBsb2dpbkhpbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZENjc09pZChcbiAgICBwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+LFxuICAgIGNsaWVudEluZm86IENsaWVudEluZm9cbik6IHZvaWQge1xuICAgIHBhcmFtZXRlcnMuc2V0KFxuICAgICAgICBIZWFkZXJOYW1lcy5DQ1NfSEVBREVSLFxuICAgICAgICBgT2lkOiR7Y2xpZW50SW5mby51aWR9QCR7Y2xpZW50SW5mby51dGlkfWBcbiAgICApO1xufVxuXG4vKipcbiAqIGFkZCBzaWRcbiAqIEBwYXJhbSBzaWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFNpZChwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+LCBzaWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIHBhcmFtZXRlcnMuc2V0KEFBRFNlcnZlclBhcmFtS2V5cy5TSUQsIHNpZCk7XG59XG5cbi8qKlxuICogYWRkIGNsYWltc1xuICogQHBhcmFtIGNsYWltc1xuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ2xhaW1zKFxuICAgIHBhcmFtZXRlcnM6IE1hcDxzdHJpbmcsIHN0cmluZz4sXG4gICAgY2xhaW1zPzogc3RyaW5nLFxuICAgIGNsaWVudENhcGFiaWxpdGllcz86IEFycmF5PHN0cmluZz5cbik6IHZvaWQge1xuICAgIGNvbnN0IG1lcmdlZENsYWltcyA9IGFkZENsaWVudENhcGFiaWxpdGllc1RvQ2xhaW1zKFxuICAgICAgICBjbGFpbXMsXG4gICAgICAgIGNsaWVudENhcGFiaWxpdGllc1xuICAgICk7XG4gICAgdHJ5IHtcbiAgICAgICAgSlNPTi5wYXJzZShtZXJnZWRDbGFpbXMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yKFxuICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuaW52YWxpZENsYWltc1xuICAgICAgICApO1xuICAgIH1cbiAgICBwYXJhbWV0ZXJzLnNldChBQURTZXJ2ZXJQYXJhbUtleXMuQ0xBSU1TLCBtZXJnZWRDbGFpbXMpO1xufVxuXG4vKipcbiAqIGFkZCBjb3JyZWxhdGlvbklkXG4gKiBAcGFyYW0gY29ycmVsYXRpb25JZFxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ29ycmVsYXRpb25JZChcbiAgICBwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+LFxuICAgIGNvcnJlbGF0aW9uSWQ6IHN0cmluZ1xuKTogdm9pZCB7XG4gICAgcGFyYW1ldGVycy5zZXQoQUFEU2VydmVyUGFyYW1LZXlzLkNMSUVOVF9SRVFVRVNUX0lELCBjb3JyZWxhdGlvbklkKTtcbn1cblxuLyoqXG4gKiBhZGQgbGlicmFyeSBpbmZvIHF1ZXJ5IHBhcmFtc1xuICogQHBhcmFtIGxpYnJhcnlJbmZvXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRMaWJyYXJ5SW5mbyhcbiAgICBwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+LFxuICAgIGxpYnJhcnlJbmZvOiBMaWJyYXJ5SW5mb1xuKTogdm9pZCB7XG4gICAgLy8gVGVsZW1ldHJ5IEluZm9cbiAgICBwYXJhbWV0ZXJzLnNldChBQURTZXJ2ZXJQYXJhbUtleXMuWF9DTElFTlRfU0tVLCBsaWJyYXJ5SW5mby5za3UpO1xuICAgIHBhcmFtZXRlcnMuc2V0KEFBRFNlcnZlclBhcmFtS2V5cy5YX0NMSUVOVF9WRVIsIGxpYnJhcnlJbmZvLnZlcnNpb24pO1xuICAgIGlmIChsaWJyYXJ5SW5mby5vcykge1xuICAgICAgICBwYXJhbWV0ZXJzLnNldChBQURTZXJ2ZXJQYXJhbUtleXMuWF9DTElFTlRfT1MsIGxpYnJhcnlJbmZvLm9zKTtcbiAgICB9XG4gICAgaWYgKGxpYnJhcnlJbmZvLmNwdSkge1xuICAgICAgICBwYXJhbWV0ZXJzLnNldChBQURTZXJ2ZXJQYXJhbUtleXMuWF9DTElFTlRfQ1BVLCBsaWJyYXJ5SW5mby5jcHUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBZGQgY2xpZW50IHRlbGVtZXRyeSBwYXJhbWV0ZXJzXG4gKiBAcGFyYW0gYXBwVGVsZW1ldHJ5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRBcHBsaWNhdGlvblRlbGVtZXRyeShcbiAgICBwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+LFxuICAgIGFwcFRlbGVtZXRyeTogQXBwbGljYXRpb25UZWxlbWV0cnlcbik6IHZvaWQge1xuICAgIGlmIChhcHBUZWxlbWV0cnk/LmFwcE5hbWUpIHtcbiAgICAgICAgcGFyYW1ldGVycy5zZXQoQUFEU2VydmVyUGFyYW1LZXlzLlhfQVBQX05BTUUsIGFwcFRlbGVtZXRyeS5hcHBOYW1lKTtcbiAgICB9XG5cbiAgICBpZiAoYXBwVGVsZW1ldHJ5Py5hcHBWZXJzaW9uKSB7XG4gICAgICAgIHBhcmFtZXRlcnMuc2V0KEFBRFNlcnZlclBhcmFtS2V5cy5YX0FQUF9WRVIsIGFwcFRlbGVtZXRyeS5hcHBWZXJzaW9uKTtcbiAgICB9XG59XG5cbi8qKlxuICogYWRkIHByb21wdFxuICogQHBhcmFtIHByb21wdFxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkUHJvbXB0KFxuICAgIHBhcmFtZXRlcnM6IE1hcDxzdHJpbmcsIHN0cmluZz4sXG4gICAgcHJvbXB0OiBzdHJpbmdcbik6IHZvaWQge1xuICAgIHBhcmFtZXRlcnMuc2V0KEFBRFNlcnZlclBhcmFtS2V5cy5QUk9NUFQsIHByb21wdCk7XG59XG5cbi8qKlxuICogYWRkIHN0YXRlXG4gKiBAcGFyYW0gc3RhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFN0YXRlKHBhcmFtZXRlcnM6IE1hcDxzdHJpbmcsIHN0cmluZz4sIHN0YXRlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoc3RhdGUpIHtcbiAgICAgICAgcGFyYW1ldGVycy5zZXQoQUFEU2VydmVyUGFyYW1LZXlzLlNUQVRFLCBzdGF0ZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIGFkZCBub25jZVxuICogQHBhcmFtIG5vbmNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGROb25jZShwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+LCBub25jZTogc3RyaW5nKTogdm9pZCB7XG4gICAgcGFyYW1ldGVycy5zZXQoQUFEU2VydmVyUGFyYW1LZXlzLk5PTkNFLCBub25jZSk7XG59XG5cbi8qKlxuICogYWRkIGNvZGVfY2hhbGxlbmdlIGFuZCBjb2RlX2NoYWxsZW5nZV9tZXRob2RcbiAqIC0gdGhyb3cgaWYgZWl0aGVyIG9mIHRoZW0gYXJlIG5vdCBwYXNzZWRcbiAqIEBwYXJhbSBjb2RlQ2hhbGxlbmdlXG4gKiBAcGFyYW0gY29kZUNoYWxsZW5nZU1ldGhvZFxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ29kZUNoYWxsZW5nZVBhcmFtcyhcbiAgICBwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+LFxuICAgIGNvZGVDaGFsbGVuZ2U/OiBzdHJpbmcsXG4gICAgY29kZUNoYWxsZW5nZU1ldGhvZD86IHN0cmluZ1xuKTogdm9pZCB7XG4gICAgaWYgKGNvZGVDaGFsbGVuZ2UgJiYgY29kZUNoYWxsZW5nZU1ldGhvZCkge1xuICAgICAgICBwYXJhbWV0ZXJzLnNldChBQURTZXJ2ZXJQYXJhbUtleXMuQ09ERV9DSEFMTEVOR0UsIGNvZGVDaGFsbGVuZ2UpO1xuICAgICAgICBwYXJhbWV0ZXJzLnNldChcbiAgICAgICAgICAgIEFBRFNlcnZlclBhcmFtS2V5cy5DT0RFX0NIQUxMRU5HRV9NRVRIT0QsXG4gICAgICAgICAgICBjb2RlQ2hhbGxlbmdlTWV0aG9kXG4gICAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yKFxuICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMucGtjZVBhcmFtc01pc3NpbmdcbiAgICAgICAgKTtcbiAgICB9XG59XG5cbi8qKlxuICogYWRkIHRoZSBgYXV0aG9yaXphdGlvbl9jb2RlYCBwYXNzZWQgYnkgdGhlIHVzZXIgdG8gZXhjaGFuZ2UgZm9yIGEgdG9rZW5cbiAqIEBwYXJhbSBjb2RlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRBdXRob3JpemF0aW9uQ29kZShcbiAgICBwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+LFxuICAgIGNvZGU6IHN0cmluZ1xuKTogdm9pZCB7XG4gICAgcGFyYW1ldGVycy5zZXQoQUFEU2VydmVyUGFyYW1LZXlzLkNPREUsIGNvZGUpO1xufVxuXG4vKipcbiAqIGFkZCB0aGUgYGF1dGhvcml6YXRpb25fY29kZWAgcGFzc2VkIGJ5IHRoZSB1c2VyIHRvIGV4Y2hhbmdlIGZvciBhIHRva2VuXG4gKiBAcGFyYW0gY29kZVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkRGV2aWNlQ29kZShcbiAgICBwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+LFxuICAgIGNvZGU6IHN0cmluZ1xuKTogdm9pZCB7XG4gICAgcGFyYW1ldGVycy5zZXQoQUFEU2VydmVyUGFyYW1LZXlzLkRFVklDRV9DT0RFLCBjb2RlKTtcbn1cblxuLyoqXG4gKiBhZGQgdGhlIGByZWZyZXNoVG9rZW5gIHBhc3NlZCBieSB0aGUgdXNlclxuICogQHBhcmFtIHJlZnJlc2hUb2tlblxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkUmVmcmVzaFRva2VuKFxuICAgIHBhcmFtZXRlcnM6IE1hcDxzdHJpbmcsIHN0cmluZz4sXG4gICAgcmVmcmVzaFRva2VuOiBzdHJpbmdcbik6IHZvaWQge1xuICAgIHBhcmFtZXRlcnMuc2V0KEFBRFNlcnZlclBhcmFtS2V5cy5SRUZSRVNIX1RPS0VOLCByZWZyZXNoVG9rZW4pO1xufVxuXG4vKipcbiAqIGFkZCB0aGUgYGNvZGVfdmVyaWZpZXJgIHBhc3NlZCBieSB0aGUgdXNlciB0byBleGNoYW5nZSBmb3IgYSB0b2tlblxuICogQHBhcmFtIGNvZGVWZXJpZmllclxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ29kZVZlcmlmaWVyKFxuICAgIHBhcmFtZXRlcnM6IE1hcDxzdHJpbmcsIHN0cmluZz4sXG4gICAgY29kZVZlcmlmaWVyOiBzdHJpbmdcbik6IHZvaWQge1xuICAgIHBhcmFtZXRlcnMuc2V0KEFBRFNlcnZlclBhcmFtS2V5cy5DT0RFX1ZFUklGSUVSLCBjb2RlVmVyaWZpZXIpO1xufVxuXG4vKipcbiAqIGFkZCBjbGllbnRfc2VjcmV0XG4gKiBAcGFyYW0gY2xpZW50U2VjcmV0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRDbGllbnRTZWNyZXQoXG4gICAgcGFyYW1ldGVyczogTWFwPHN0cmluZywgc3RyaW5nPixcbiAgICBjbGllbnRTZWNyZXQ6IHN0cmluZ1xuKTogdm9pZCB7XG4gICAgcGFyYW1ldGVycy5zZXQoQUFEU2VydmVyUGFyYW1LZXlzLkNMSUVOVF9TRUNSRVQsIGNsaWVudFNlY3JldCk7XG59XG5cbi8qKlxuICogYWRkIGNsaWVudEFzc2VydGlvbiBmb3IgY29uZmlkZW50aWFsIGNsaWVudCBmbG93c1xuICogQHBhcmFtIGNsaWVudEFzc2VydGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ2xpZW50QXNzZXJ0aW9uKFxuICAgIHBhcmFtZXRlcnM6IE1hcDxzdHJpbmcsIHN0cmluZz4sXG4gICAgY2xpZW50QXNzZXJ0aW9uOiBzdHJpbmdcbik6IHZvaWQge1xuICAgIGlmIChjbGllbnRBc3NlcnRpb24pIHtcbiAgICAgICAgcGFyYW1ldGVycy5zZXQoQUFEU2VydmVyUGFyYW1LZXlzLkNMSUVOVF9BU1NFUlRJT04sIGNsaWVudEFzc2VydGlvbik7XG4gICAgfVxufVxuXG4vKipcbiAqIGFkZCBjbGllbnRBc3NlcnRpb25UeXBlIGZvciBjb25maWRlbnRpYWwgY2xpZW50IGZsb3dzXG4gKiBAcGFyYW0gY2xpZW50QXNzZXJ0aW9uVHlwZVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ2xpZW50QXNzZXJ0aW9uVHlwZShcbiAgICBwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+LFxuICAgIGNsaWVudEFzc2VydGlvblR5cGU6IHN0cmluZ1xuKTogdm9pZCB7XG4gICAgaWYgKGNsaWVudEFzc2VydGlvblR5cGUpIHtcbiAgICAgICAgcGFyYW1ldGVycy5zZXQoXG4gICAgICAgICAgICBBQURTZXJ2ZXJQYXJhbUtleXMuQ0xJRU5UX0FTU0VSVElPTl9UWVBFLFxuICAgICAgICAgICAgY2xpZW50QXNzZXJ0aW9uVHlwZVxuICAgICAgICApO1xuICAgIH1cbn1cblxuLyoqXG4gKiBhZGQgT0JPIGFzc2VydGlvbiBmb3IgY29uZmlkZW50aWFsIGNsaWVudCBmbG93c1xuICogQHBhcmFtIGNsaWVudEFzc2VydGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkT2JvQXNzZXJ0aW9uKFxuICAgIHBhcmFtZXRlcnM6IE1hcDxzdHJpbmcsIHN0cmluZz4sXG4gICAgb2JvQXNzZXJ0aW9uOiBzdHJpbmdcbik6IHZvaWQge1xuICAgIHBhcmFtZXRlcnMuc2V0KEFBRFNlcnZlclBhcmFtS2V5cy5PQk9fQVNTRVJUSU9OLCBvYm9Bc3NlcnRpb24pO1xufVxuXG4vKipcbiAqIGFkZCBncmFudCB0eXBlXG4gKiBAcGFyYW0gZ3JhbnRUeXBlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRSZXF1ZXN0VG9rZW5Vc2UoXG4gICAgcGFyYW1ldGVyczogTWFwPHN0cmluZywgc3RyaW5nPixcbiAgICB0b2tlblVzZTogc3RyaW5nXG4pOiB2b2lkIHtcbiAgICBwYXJhbWV0ZXJzLnNldChBQURTZXJ2ZXJQYXJhbUtleXMuUkVRVUVTVEVEX1RPS0VOX1VTRSwgdG9rZW5Vc2UpO1xufVxuXG4vKipcbiAqIGFkZCBncmFudCB0eXBlXG4gKiBAcGFyYW0gZ3JhbnRUeXBlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRHcmFudFR5cGUoXG4gICAgcGFyYW1ldGVyczogTWFwPHN0cmluZywgc3RyaW5nPixcbiAgICBncmFudFR5cGU6IHN0cmluZ1xuKTogdm9pZCB7XG4gICAgcGFyYW1ldGVycy5zZXQoQUFEU2VydmVyUGFyYW1LZXlzLkdSQU5UX1RZUEUsIGdyYW50VHlwZSk7XG59XG5cbi8qKlxuICogYWRkIGNsaWVudCBpbmZvXG4gKlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ2xpZW50SW5mbyhwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+KTogdm9pZCB7XG4gICAgcGFyYW1ldGVycy5zZXQoQ0xJRU5UX0lORk8sIFwiMVwiKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZEluc3RhbmNlQXdhcmUocGFyYW1ldGVyczogTWFwPHN0cmluZywgc3RyaW5nPik6IHZvaWQge1xuICAgIGlmICghcGFyYW1ldGVycy5oYXMoQUFEU2VydmVyUGFyYW1LZXlzLklOU1RBTkNFX0FXQVJFKSkge1xuICAgICAgICBwYXJhbWV0ZXJzLnNldChBQURTZXJ2ZXJQYXJhbUtleXMuSU5TVEFOQ0VfQVdBUkUsIFwidHJ1ZVwiKTtcbiAgICB9XG59XG5cbi8qKlxuICogYWRkIGV4dHJhUXVlcnlQYXJhbXNcbiAqIEBwYXJhbSBlUVBhcmFtc1xuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkRXh0cmFRdWVyeVBhcmFtZXRlcnMoXG4gICAgcGFyYW1ldGVyczogTWFwPHN0cmluZywgc3RyaW5nPixcbiAgICBlUVBhcmFtczogU3RyaW5nRGljdFxuKTogdm9pZCB7XG4gICAgT2JqZWN0LmVudHJpZXMoZVFQYXJhbXMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICBpZiAoIXBhcmFtZXRlcnMuaGFzKGtleSkgJiYgdmFsdWUpIHtcbiAgICAgICAgICAgIHBhcmFtZXRlcnMuc2V0KGtleSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRDbGllbnRDYXBhYmlsaXRpZXNUb0NsYWltcyhcbiAgICBjbGFpbXM/OiBzdHJpbmcsXG4gICAgY2xpZW50Q2FwYWJpbGl0aWVzPzogQXJyYXk8c3RyaW5nPlxuKTogc3RyaW5nIHtcbiAgICBsZXQgbWVyZ2VkQ2xhaW1zOiBvYmplY3Q7XG5cbiAgICAvLyBQYXJzZSBwcm92aWRlZCBjbGFpbXMgaW50byBKU09OIG9iamVjdCBvciBpbml0aWFsaXplIGVtcHR5IG9iamVjdFxuICAgIGlmICghY2xhaW1zKSB7XG4gICAgICAgIG1lcmdlZENsYWltcyA9IHt9O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBtZXJnZWRDbGFpbXMgPSBKU09OLnBhcnNlKGNsYWltcyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudENvbmZpZ3VyYXRpb25FcnJvcihcbiAgICAgICAgICAgICAgICBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5pbnZhbGlkQ2xhaW1zXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNsaWVudENhcGFiaWxpdGllcyAmJiBjbGllbnRDYXBhYmlsaXRpZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAoIW1lcmdlZENsYWltcy5oYXNPd25Qcm9wZXJ0eShDbGFpbXNSZXF1ZXN0S2V5cy5BQ0NFU1NfVE9LRU4pKSB7XG4gICAgICAgICAgICAvLyBBZGQgYWNjZXNzX3Rva2VuIGtleSB0byBjbGFpbXMgb2JqZWN0XG4gICAgICAgICAgICBtZXJnZWRDbGFpbXNbQ2xhaW1zUmVxdWVzdEtleXMuQUNDRVNTX1RPS0VOXSA9IHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWRkIHhtc19jYyBjbGFpbSB3aXRoIHByb3ZpZGVkIGNsaWVudENhcGFiaWxpdGllcyB0byBhY2Nlc3NfdG9rZW4ga2V5XG4gICAgICAgIG1lcmdlZENsYWltc1tDbGFpbXNSZXF1ZXN0S2V5cy5BQ0NFU1NfVE9LRU5dW0NsYWltc1JlcXVlc3RLZXlzLlhNU19DQ10gPVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhbHVlczogY2xpZW50Q2FwYWJpbGl0aWVzLFxuICAgICAgICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkobWVyZ2VkQ2xhaW1zKTtcbn1cblxuLyoqXG4gKiBhZGRzIGB1c2VybmFtZWAgZm9yIFBhc3N3b3JkIEdyYW50IGZsb3dcbiAqIEBwYXJhbSB1c2VybmFtZVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkVXNlcm5hbWUoXG4gICAgcGFyYW1ldGVyczogTWFwPHN0cmluZywgc3RyaW5nPixcbiAgICB1c2VybmFtZTogc3RyaW5nXG4pOiB2b2lkIHtcbiAgICBwYXJhbWV0ZXJzLnNldChQYXNzd29yZEdyYW50Q29uc3RhbnRzLnVzZXJuYW1lLCB1c2VybmFtZSk7XG59XG5cbi8qKlxuICogYWRkcyBgcGFzc3dvcmRgIGZvciBQYXNzd29yZCBHcmFudCBmbG93XG4gKiBAcGFyYW0gcGFzc3dvcmRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFBhc3N3b3JkKFxuICAgIHBhcmFtZXRlcnM6IE1hcDxzdHJpbmcsIHN0cmluZz4sXG4gICAgcGFzc3dvcmQ6IHN0cmluZ1xuKTogdm9pZCB7XG4gICAgcGFyYW1ldGVycy5zZXQoUGFzc3dvcmRHcmFudENvbnN0YW50cy5wYXNzd29yZCwgcGFzc3dvcmQpO1xufVxuXG4vKipcbiAqIGFkZCBwb3BfandrIHRvIHF1ZXJ5IHBhcmFtc1xuICogQHBhcmFtIGNuZlN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkUG9wVG9rZW4oXG4gICAgcGFyYW1ldGVyczogTWFwPHN0cmluZywgc3RyaW5nPixcbiAgICBjbmZTdHJpbmc6IHN0cmluZ1xuKTogdm9pZCB7XG4gICAgaWYgKGNuZlN0cmluZykge1xuICAgICAgICBwYXJhbWV0ZXJzLnNldChBQURTZXJ2ZXJQYXJhbUtleXMuVE9LRU5fVFlQRSwgQXV0aGVudGljYXRpb25TY2hlbWUuUE9QKTtcbiAgICAgICAgcGFyYW1ldGVycy5zZXQoQUFEU2VydmVyUGFyYW1LZXlzLlJFUV9DTkYsIGNuZlN0cmluZyk7XG4gICAgfVxufVxuXG4vKipcbiAqIGFkZCBTU0ggSldLIGFuZCBrZXkgSUQgdG8gcXVlcnkgcGFyYW1zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRTc2hKd2soXG4gICAgcGFyYW1ldGVyczogTWFwPHN0cmluZywgc3RyaW5nPixcbiAgICBzc2hKd2tTdHJpbmc6IHN0cmluZ1xuKTogdm9pZCB7XG4gICAgaWYgKHNzaEp3a1N0cmluZykge1xuICAgICAgICBwYXJhbWV0ZXJzLnNldChBQURTZXJ2ZXJQYXJhbUtleXMuVE9LRU5fVFlQRSwgQXV0aGVudGljYXRpb25TY2hlbWUuU1NIKTtcbiAgICAgICAgcGFyYW1ldGVycy5zZXQoQUFEU2VydmVyUGFyYW1LZXlzLlJFUV9DTkYsIHNzaEp3a1N0cmluZyk7XG4gICAgfVxufVxuXG4vKipcbiAqIGFkZCBzZXJ2ZXIgdGVsZW1ldHJ5IGZpZWxkc1xuICogQHBhcmFtIHNlcnZlclRlbGVtZXRyeU1hbmFnZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFNlcnZlclRlbGVtZXRyeShcbiAgICBwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+LFxuICAgIHNlcnZlclRlbGVtZXRyeU1hbmFnZXI6IFNlcnZlclRlbGVtZXRyeU1hbmFnZXJcbik6IHZvaWQge1xuICAgIHBhcmFtZXRlcnMuc2V0KFxuICAgICAgICBBQURTZXJ2ZXJQYXJhbUtleXMuWF9DTElFTlRfQ1VSUl9URUxFTSxcbiAgICAgICAgc2VydmVyVGVsZW1ldHJ5TWFuYWdlci5nZW5lcmF0ZUN1cnJlbnRSZXF1ZXN0SGVhZGVyVmFsdWUoKVxuICAgICk7XG4gICAgcGFyYW1ldGVycy5zZXQoXG4gICAgICAgIEFBRFNlcnZlclBhcmFtS2V5cy5YX0NMSUVOVF9MQVNUX1RFTEVNLFxuICAgICAgICBzZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyLmdlbmVyYXRlTGFzdFJlcXVlc3RIZWFkZXJWYWx1ZSgpXG4gICAgKTtcbn1cblxuLyoqXG4gKiBBZGRzIHBhcmFtZXRlciB0aGF0IGluZGljYXRlcyB0byB0aGUgc2VydmVyIHRoYXQgdGhyb3R0bGluZyBpcyBzdXBwb3J0ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFRocm90dGxpbmcocGFyYW1ldGVyczogTWFwPHN0cmluZywgc3RyaW5nPik6IHZvaWQge1xuICAgIHBhcmFtZXRlcnMuc2V0KFxuICAgICAgICBBQURTZXJ2ZXJQYXJhbUtleXMuWF9NU19MSUJfQ0FQQUJJTElUWSxcbiAgICAgICAgVGhyb3R0bGluZ0NvbnN0YW50cy5YX01TX0xJQl9DQVBBQklMSVRZX1ZBTFVFXG4gICAgKTtcbn1cblxuLyoqXG4gKiBBZGRzIGxvZ291dF9oaW50IHBhcmFtZXRlciBmb3IgXCJzaWxlbnRcIiBsb2dvdXQgd2hpY2ggcHJldmVudCBzZXJ2ZXIgYWNjb3VudCBwaWNrZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZExvZ291dEhpbnQoXG4gICAgcGFyYW1ldGVyczogTWFwPHN0cmluZywgc3RyaW5nPixcbiAgICBsb2dvdXRIaW50OiBzdHJpbmdcbik6IHZvaWQge1xuICAgIHBhcmFtZXRlcnMuc2V0KEFBRFNlcnZlclBhcmFtS2V5cy5MT0dPVVRfSElOVCwgbG9nb3V0SGludCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRCcm9rZXJQYXJhbWV0ZXJzKFxuICAgIHBhcmFtZXRlcnM6IE1hcDxzdHJpbmcsIHN0cmluZz4sXG4gICAgYnJva2VyQ2xpZW50SWQ6IHN0cmluZyxcbiAgICBicm9rZXJSZWRpcmVjdFVyaTogc3RyaW5nXG4pOiB2b2lkIHtcbiAgICBpZiAoIXBhcmFtZXRlcnMuaGFzKEFBRFNlcnZlclBhcmFtS2V5cy5CUk9LRVJfQ0xJRU5UX0lEKSkge1xuICAgICAgICBwYXJhbWV0ZXJzLnNldChBQURTZXJ2ZXJQYXJhbUtleXMuQlJPS0VSX0NMSUVOVF9JRCwgYnJva2VyQ2xpZW50SWQpO1xuICAgIH1cbiAgICBpZiAoIXBhcmFtZXRlcnMuaGFzKEFBRFNlcnZlclBhcmFtS2V5cy5CUk9LRVJfUkVESVJFQ1RfVVJJKSkge1xuICAgICAgICBwYXJhbWV0ZXJzLnNldChcbiAgICAgICAgICAgIEFBRFNlcnZlclBhcmFtS2V5cy5CUk9LRVJfUkVESVJFQ1RfVVJJLFxuICAgICAgICAgICAgYnJva2VyUmVkaXJlY3RVcmlcbiAgICAgICAgKTtcbiAgICB9XG59XG5cbi8qKlxuICogQWRkIEVBUiAoRW5jcnlwdGVkIEF1dGhvcml6ZSBSZXNwb25zZSkgcmVxdWVzdCBwYXJhbWV0ZXJzXG4gKiBAcGFyYW0gcGFyYW1ldGVyc1xuICogQHBhcmFtIGp3a1xuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkRUFSUGFyYW1ldGVycyhcbiAgICBwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+LFxuICAgIGp3azogc3RyaW5nXG4pOiB2b2lkIHtcbiAgICBwYXJhbWV0ZXJzLnNldChBQURTZXJ2ZXJQYXJhbUtleXMuRUFSX0pXSywgZW5jb2RlVVJJQ29tcG9uZW50KGp3aykpO1xuXG4gICAgLy8gZWFyX2p3ZV9jcnlwdG8gd2lsbCBhbHdheXMgaGF2ZSB2YWx1ZToge1wiYWxnXCI6XCJkaXJcIixcImVuY1wiOlwiQTI1NkdDTVwifSBzbyB3ZSBjYW4gaGFyZGNvZGUgdGhpc1xuICAgIGNvbnN0IGp3ZUNyeXB0b0I2NEVuY29kZWQgPSBcImV5SmhiR2NpT2lKa2FYSWlMQ0psYm1NaU9pSkJNalUyUjBOTkluMFwiO1xuICAgIHBhcmFtZXRlcnMuc2V0KEFBRFNlcnZlclBhcmFtS2V5cy5FQVJfSldFX0NSWVBUTywgandlQ3J5cHRvQjY0RW5jb2RlZCk7XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogVGVuYW50IERpc2NvdmVyeSBSZXNwb25zZSB3aGljaCBjb250YWlucyB0aGUgcmVsZXZhbnQgT0F1dGggZW5kcG9pbnRzIGFuZCBkYXRhIG5lZWRlZCBmb3IgYXV0aGVudGljYXRpb24gYW5kIGF1dGhvcml6YXRpb24uXG4gKi9cbmV4cG9ydCB0eXBlIE9wZW5JZENvbmZpZ1Jlc3BvbnNlID0ge1xuICAgIGF1dGhvcml6YXRpb25fZW5kcG9pbnQ6IHN0cmluZztcbiAgICB0b2tlbl9lbmRwb2ludDogc3RyaW5nO1xuICAgIGVuZF9zZXNzaW9uX2VuZHBvaW50Pzogc3RyaW5nO1xuICAgIGlzc3Vlcjogc3RyaW5nO1xuICAgIGp3a3NfdXJpOiBzdHJpbmc7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gaXNPcGVuSWRDb25maWdSZXNwb25zZShyZXNwb25zZTogb2JqZWN0KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgcmVzcG9uc2UuaGFzT3duUHJvcGVydHkoXCJhdXRob3JpemF0aW9uX2VuZHBvaW50XCIpICYmXG4gICAgICAgIHJlc3BvbnNlLmhhc093blByb3BlcnR5KFwidG9rZW5fZW5kcG9pbnRcIikgJiZcbiAgICAgICAgcmVzcG9uc2UuaGFzT3duUHJvcGVydHkoXCJpc3N1ZXJcIikgJiZcbiAgICAgICAgcmVzcG9uc2UuaGFzT3duUHJvcGVydHkoXCJqd2tzX3VyaVwiKVxuICAgICk7XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENsb3VkRGlzY292ZXJ5TWV0YWRhdGEgfSBmcm9tIFwiLi9DbG91ZERpc2NvdmVyeU1ldGFkYXRhLmpzXCI7XG5cbi8qKlxuICogVGhlIE9wZW5JRCBDb25maWd1cmF0aW9uIEVuZHBvaW50IFJlc3BvbnNlIHR5cGUuIFVzZWQgYnkgdGhlIGF1dGhvcml0eSBjbGFzcyB0byBnZXQgcmVsZXZhbnQgT0F1dGggZW5kcG9pbnRzLlxuICovXG5leHBvcnQgdHlwZSBDbG91ZEluc3RhbmNlRGlzY292ZXJ5UmVzcG9uc2UgPSB7XG4gICAgdGVuYW50X2Rpc2NvdmVyeV9lbmRwb2ludDogc3RyaW5nO1xuICAgIG1ldGFkYXRhOiBBcnJheTxDbG91ZERpc2NvdmVyeU1ldGFkYXRhPjtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0Nsb3VkSW5zdGFuY2VEaXNjb3ZlcnlSZXNwb25zZShyZXNwb25zZTogb2JqZWN0KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgcmVzcG9uc2UuaGFzT3duUHJvcGVydHkoXCJ0ZW5hbnRfZGlzY292ZXJ5X2VuZHBvaW50XCIpICYmXG4gICAgICAgIHJlc3BvbnNlLmhhc093blByb3BlcnR5KFwibWV0YWRhdGFcIilcbiAgICApO1xufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIFRoZSBPcGVuSUQgQ29uZmlndXJhdGlvbiBFbmRwb2ludCBSZXNwb25zZSB0eXBlLiBVc2VkIGJ5IHRoZSBhdXRob3JpdHkgY2xhc3MgdG8gZ2V0IHJlbGV2YW50IE9BdXRoIGVuZHBvaW50cy5cbiAqL1xuZXhwb3J0IHR5cGUgQ2xvdWRJbnN0YW5jZURpc2NvdmVyeUVycm9yUmVzcG9uc2UgPSB7XG4gICAgZXJyb3I6IFN0cmluZztcbiAgICBlcnJvcl9kZXNjcmlwdGlvbjogU3RyaW5nO1xuICAgIGVycm9yX2NvZGVzPzogQXJyYXk8TnVtYmVyPjtcbiAgICB0aW1lc3RhbXA/OiBTdHJpbmc7XG4gICAgdHJhY2VfaWQ/OiBTdHJpbmc7XG4gICAgY29ycmVsYXRpb25faWQ/OiBTdHJpbmc7XG4gICAgZXJyb3JfdXJpPzogU3RyaW5nO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGlzQ2xvdWRJbnN0YW5jZURpc2NvdmVyeUVycm9yUmVzcG9uc2UoXG4gICAgcmVzcG9uc2U6IG9iamVjdFxuKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgcmVzcG9uc2UuaGFzT3duUHJvcGVydHkoXCJlcnJvclwiKSAmJlxuICAgICAgICByZXNwb25zZS5oYXNPd25Qcm9wZXJ0eShcImVycm9yX2Rlc2NyaXB0aW9uXCIpXG4gICAgKTtcbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBFbnVtZXJhdGlvbiBvZiBvcGVyYXRpb25zIHRoYXQgYXJlIGluc3RydW1lbnRlZCBieSBoYXZlIHRoZWlyIHBlcmZvcm1hbmNlIG1lYXN1cmVkIGJ5IHRoZSBQZXJmb3JtYW5jZUNsaWVudC5cbiAqXG4gKiBAZXhwb3J0XG4gKiBAZW51bSB7bnVtYmVyfVxuICovXG5leHBvcnQgY29uc3QgUGVyZm9ybWFuY2VFdmVudHMgPSB7XG4gICAgLyoqXG4gICAgICogYWNxdWlyZVRva2VuQnlDb2RlIEFQSSAobXNhbC1icm93c2VyIGFuZCBtc2FsLW5vZGUpLlxuICAgICAqIFVzZWQgdG8gYWNxdWlyZSB0b2tlbnMgYnkgdHJhZGluZyBhbiBhdXRob3JpemF0aW9uIGNvZGUgYWdhaW5zdCB0aGUgdG9rZW4gZW5kcG9pbnQuXG4gICAgICovXG4gICAgQWNxdWlyZVRva2VuQnlDb2RlOiBcImFjcXVpcmVUb2tlbkJ5Q29kZVwiLFxuXG4gICAgLyoqXG4gICAgICogYWNxdWlyZVRva2VuQnlSZWZyZXNoVG9rZW4gQVBJIChtc2FsLWJyb3dzZXIgYW5kIG1zYWwtbm9kZSkuXG4gICAgICogVXNlZCB0byByZW5ldyBhbiBhY2Nlc3MgdG9rZW4gdXNpbmcgYSByZWZyZXNoIHRva2VuIGFnYWluc3QgdGhlIHRva2VuIGVuZHBvaW50LlxuICAgICAqL1xuICAgIEFjcXVpcmVUb2tlbkJ5UmVmcmVzaFRva2VuOiBcImFjcXVpcmVUb2tlbkJ5UmVmcmVzaFRva2VuXCIsXG5cbiAgICAvKipcbiAgICAgKiBhY3F1aXJlVG9rZW5TaWxlbnQgQVBJIChtc2FsLWJyb3dzZXIgYW5kIG1zYWwtbm9kZSkuXG4gICAgICogVXNlZCB0byBzaWxlbnRseSBhY3F1aXJlIGEgbmV3IGFjY2VzcyB0b2tlbiAoZnJvbSB0aGUgY2FjaGUgb3IgdGhlIG5ldHdvcmspLlxuICAgICAqL1xuICAgIEFjcXVpcmVUb2tlblNpbGVudDogXCJhY3F1aXJlVG9rZW5TaWxlbnRcIixcblxuICAgIC8qKlxuICAgICAqIGFjcXVpcmVUb2tlblNpbGVudEFzeW5jIChtc2FsLWJyb3dzZXIpLlxuICAgICAqIEludGVybmFsIEFQSSBmb3IgYWNxdWlyZVRva2VuU2lsZW50LlxuICAgICAqL1xuICAgIEFjcXVpcmVUb2tlblNpbGVudEFzeW5jOiBcImFjcXVpcmVUb2tlblNpbGVudEFzeW5jXCIsXG5cbiAgICAvKipcbiAgICAgKiBhY3F1aXJlVG9rZW5Qb3B1cCAobXNhbC1icm93c2VyKS5cbiAgICAgKiBVc2VkIHRvIGFjcXVpcmUgYSBuZXcgYWNjZXNzIHRva2VuIGludGVyYWN0aXZlbHkgdGhyb3VnaCBwb3AgdXBzXG4gICAgICovXG4gICAgQWNxdWlyZVRva2VuUG9wdXA6IFwiYWNxdWlyZVRva2VuUG9wdXBcIixcblxuICAgIC8qKlxuICAgICAqIGFjcXVpcmVUb2tlblByZVJlZGlyZWN0IChtc2FsLWJyb3dzZXIpLlxuICAgICAqIEZpcnN0IHBhcnQgb2YgdGhlIHJlZGlyZWN0IGZsb3cuXG4gICAgICogVXNlZCB0byBhY3F1aXJlIGEgbmV3IGFjY2VzcyB0b2tlbiBpbnRlcmFjdGl2ZWx5IHRocm91Z2ggcmVkaXJlY3RzLlxuICAgICAqL1xuICAgIEFjcXVpcmVUb2tlblByZVJlZGlyZWN0OiBcImFjcXVpcmVUb2tlblByZVJlZGlyZWN0XCIsXG5cbiAgICAvKipcbiAgICAgKiBhY3F1aXJlVG9rZW5SZWRpcmVjdCAobXNhbC1icm93c2VyKS5cbiAgICAgKiBTZWNvbmQgcGFydCBvZiB0aGUgcmVkaXJlY3QgZmxvdy5cbiAgICAgKiBVc2VkIHRvIGFjcXVpcmUgYSBuZXcgYWNjZXNzIHRva2VuIGludGVyYWN0aXZlbHkgdGhyb3VnaCByZWRpcmVjdHMuXG4gICAgICovXG4gICAgQWNxdWlyZVRva2VuUmVkaXJlY3Q6IFwiYWNxdWlyZVRva2VuUmVkaXJlY3RcIixcblxuICAgIC8qKlxuICAgICAqIGdldFB1YmxpY0tleVRodW1icHJpbnQgQVBJIGluIENyeXB0b09wdHMgY2xhc3MgKG1zYWwtYnJvd3NlcikuXG4gICAgICogVXNlZCB0byBnZW5lcmF0ZSBhIHB1YmxpYy9wcml2YXRlIGtleXBhaXIgYW5kIGdlbmVyYXRlIGEgcHVibGljIGtleSB0aHVtYnByaW50IGZvciBwb3AgcmVxdWVzdHMuXG4gICAgICovXG4gICAgQ3J5cHRvT3B0c0dldFB1YmxpY0tleVRodW1icHJpbnQ6IFwiY3J5cHRvT3B0c0dldFB1YmxpY0tleVRodW1icHJpbnRcIixcblxuICAgIC8qKlxuICAgICAqIHNpZ25Kd3QgQVBJIGluIENyeXB0b09wdHMgY2xhc3MgKG1zYWwtYnJvd3NlcikuXG4gICAgICogVXNlZCB0byBzaWduZWQgYSBwb3AgdG9rZW4uXG4gICAgICovXG4gICAgQ3J5cHRvT3B0c1NpZ25Kd3Q6IFwiY3J5cHRvT3B0c1NpZ25Kd3RcIixcblxuICAgIC8qKlxuICAgICAqIGFjcXVpcmVUb2tlbiBBUEkgaW4gdGhlIFNpbGVudENhY2hlQ2xpZW50IGNsYXNzIChtc2FsLWJyb3dzZXIpLlxuICAgICAqIFVzZWQgdG8gcmVhZCBhY2Nlc3MgdG9rZW5zIGZyb20gdGhlIGNhY2hlLlxuICAgICAqL1xuICAgIFNpbGVudENhY2hlQ2xpZW50QWNxdWlyZVRva2VuOiBcInNpbGVudENhY2hlQ2xpZW50QWNxdWlyZVRva2VuXCIsXG5cbiAgICAvKipcbiAgICAgKiBhY3F1aXJlVG9rZW4gQVBJIGluIHRoZSBTaWxlbnRJZnJhbWVDbGllbnQgY2xhc3MgKG1zYWwtYnJvd3NlcikuXG4gICAgICogVXNlZCB0byBhY3F1aXJlIGEgbmV3IHNldCBvZiB0b2tlbnMgZnJvbSB0aGUgYXV0aG9yaXplIGVuZHBvaW50IGluIGEgaGlkZGVuIGlmcmFtZS5cbiAgICAgKi9cbiAgICBTaWxlbnRJZnJhbWVDbGllbnRBY3F1aXJlVG9rZW46IFwic2lsZW50SWZyYW1lQ2xpZW50QWNxdWlyZVRva2VuXCIsXG4gICAgQXdhaXRDb25jdXJyZW50SWZyYW1lOiBcImF3YWl0Q29uY3VycmVudElmcmFtZVwiLCAvLyBUaW1lIHNwZW50IHdhaXRpbmcgZm9yIGEgY29uY3VycmVudCBpZnJhbWUgdG8gY29tcGxldGVcblxuICAgIC8qKlxuICAgICAqIGFjcXVpcmVUb2tlbiBBUEkgaW4gU2lsZW50UmVyZXNoQ2xpZW50IChtc2FsLWJyb3dzZXIpLlxuICAgICAqIFVzZWQgdG8gYWNxdWlyZSBhIG5ldyBzZXQgb2YgdG9rZW5zIGZyb20gdGhlIHRva2VuIGVuZHBvaW50IHVzaW5nIGEgcmVmcmVzaCB0b2tlbi5cbiAgICAgKi9cbiAgICBTaWxlbnRSZWZyZXNoQ2xpZW50QWNxdWlyZVRva2VuOiBcInNpbGVudFJlZnJlc2hDbGllbnRBY3F1aXJlVG9rZW5cIixcblxuICAgIC8qKlxuICAgICAqIHNzb1NpbGVudCBBUEkgKG1zYWwtYnJvd3NlcikuXG4gICAgICogVXNlZCB0byBzaWxlbnRseSBhY3F1aXJlIGFuIGF1dGhvcml6YXRpb24gY29kZSBhbmQgc2V0IG9mIHRva2VucyB1c2luZyBhIGhpZGRlbiBpZnJhbWUuXG4gICAgICovXG4gICAgU3NvU2lsZW50OiBcInNzb1NpbGVudFwiLFxuXG4gICAgLyoqXG4gICAgICogZ2V0RGlzY292ZXJlZEF1dGhvcml0eSBBUEkgaW4gU3RhbmRhcmRJbnRlcmFjdGlvbkNsaWVudCBjbGFzcyAobXNhbC1icm93c2VyKS5cbiAgICAgKiBVc2VkIHRvIGxvYWQgYXV0aG9yaXR5IG1ldGFkYXRhIGZvciBhIHJlcXVlc3QuXG4gICAgICovXG4gICAgU3RhbmRhcmRJbnRlcmFjdGlvbkNsaWVudEdldERpc2NvdmVyZWRBdXRob3JpdHk6XG4gICAgICAgIFwic3RhbmRhcmRJbnRlcmFjdGlvbkNsaWVudEdldERpc2NvdmVyZWRBdXRob3JpdHlcIixcblxuICAgIC8qKlxuICAgICAqIGFjcXVpcmVUb2tlbiBBUElzIGluIG1zYWwtYnJvd3Nlci5cbiAgICAgKiBVc2VkIHRvIG1ha2UgYW4gL2F1dGhvcml6ZSBlbmRwb2ludCBjYWxsIHdpdGggbmF0aXZlIGJyb2tlcmluZyBlbmFibGVkLlxuICAgICAqL1xuICAgIEZldGNoQWNjb3VudElkV2l0aE5hdGl2ZUJyb2tlcjogXCJmZXRjaEFjY291bnRJZFdpdGhOYXRpdmVCcm9rZXJcIixcblxuICAgIC8qKlxuICAgICAqIGFjcXVpcmVUb2tlbiBBUEkgaW4gTmF0aXZlSW50ZXJhY3Rpb25DbGllbnQgY2xhc3MgKG1zYWwtYnJvd3NlcikuXG4gICAgICogVXNlZCB0byBhY3F1aXJlIGEgdG9rZW4gZnJvbSBOYXRpdmUgY29tcG9uZW50IHdoZW4gbmF0aXZlIGJyb2tlcmluZyBpcyBlbmFibGVkLlxuICAgICAqL1xuICAgIE5hdGl2ZUludGVyYWN0aW9uQ2xpZW50QWNxdWlyZVRva2VuOiBcIm5hdGl2ZUludGVyYWN0aW9uQ2xpZW50QWNxdWlyZVRva2VuXCIsXG4gICAgLyoqXG4gICAgICogVGltZSBzcGVudCBjcmVhdGluZyBkZWZhdWx0IGhlYWRlcnMgZm9yIHJlcXVlc3RzIHRvIHRva2VuIGVuZHBvaW50XG4gICAgICovXG4gICAgQmFzZUNsaWVudENyZWF0ZVRva2VuUmVxdWVzdEhlYWRlcnM6IFwiYmFzZUNsaWVudENyZWF0ZVRva2VuUmVxdWVzdEhlYWRlcnNcIixcbiAgICAvKipcbiAgICAgKiBUaW1lIHNwZW50IHNlbmRpbmcvd2FpdGluZyBmb3IgdGhlIHJlc3BvbnNlIG9mIGEgcmVxdWVzdCB0byB0aGUgdG9rZW4gZW5kcG9pbnRcbiAgICAgKi9cbiAgICBOZXR3b3JrQ2xpZW50U2VuZFBvc3RSZXF1ZXN0QXN5bmM6IFwibmV0d29ya0NsaWVudFNlbmRQb3N0UmVxdWVzdEFzeW5jXCIsXG4gICAgUmVmcmVzaFRva2VuQ2xpZW50RXhlY3V0ZVBvc3RUb1Rva2VuRW5kcG9pbnQ6XG4gICAgICAgIFwicmVmcmVzaFRva2VuQ2xpZW50RXhlY3V0ZVBvc3RUb1Rva2VuRW5kcG9pbnRcIixcbiAgICBBdXRob3JpemF0aW9uQ29kZUNsaWVudEV4ZWN1dGVQb3N0VG9Ub2tlbkVuZHBvaW50OlxuICAgICAgICBcImF1dGhvcml6YXRpb25Db2RlQ2xpZW50RXhlY3V0ZVBvc3RUb1Rva2VuRW5kcG9pbnRcIixcbiAgICAvKipcbiAgICAgKiBVc2VkIHRvIG1lYXN1cmUgdGhlIHRpbWUgdGFrZW4gZm9yIGNvbXBsZXRpbmcgZW1iZWRkZWQtYnJva2VyIGhhbmRzaGFrZSAoUFctQnJva2VyKS5cbiAgICAgKi9cbiAgICBCcm9rZXJIYW5kaHNoYWtlOiBcImJyb2tlckhhbmRzaGFrZVwiLFxuICAgIC8qKlxuICAgICAqIGFjcXVpcmVUb2tlbkJ5UmVmcmVzaFRva2VuIEFQSSBpbiBCcm9rZXJDbGllbnRBcHBsaWNhdGlvbiAoUFctQnJva2VyKSAuXG4gICAgICovXG4gICAgQWNxdWlyZVRva2VuQnlSZWZyZXNoVG9rZW5JbkJyb2tlcjogXCJhY3F1aXJlVG9rZW5CeVJlZnJlc2hUb2tlbkluQnJva2VyXCIsXG4gICAgLyoqXG4gICAgICogVGltZSB0YWtlbiBmb3IgdG9rZW4gYWNxdWlzaXRpb24gYnkgYnJva2VyXG4gICAgICovXG4gICAgQWNxdWlyZVRva2VuQnlCcm9rZXI6IFwiYWNxdWlyZVRva2VuQnlCcm9rZXJcIixcblxuICAgIC8qKlxuICAgICAqIFRpbWUgc3BlbnQgb24gdGhlIG5ldHdvcmsgZm9yIHJlZnJlc2ggdG9rZW4gYWNxdWlzaXRpb25cbiAgICAgKi9cbiAgICBSZWZyZXNoVG9rZW5DbGllbnRFeGVjdXRlVG9rZW5SZXF1ZXN0OlxuICAgICAgICBcInJlZnJlc2hUb2tlbkNsaWVudEV4ZWN1dGVUb2tlblJlcXVlc3RcIixcblxuICAgIC8qKlxuICAgICAqIFRpbWUgdGFrZW4gZm9yIGFjcXVpcmluZyByZWZyZXNoIHRva2VuICwgcmVjb3JkcyBSVCBzaXplXG4gICAgICovXG4gICAgUmVmcmVzaFRva2VuQ2xpZW50QWNxdWlyZVRva2VuOiBcInJlZnJlc2hUb2tlbkNsaWVudEFjcXVpcmVUb2tlblwiLFxuXG4gICAgLyoqXG4gICAgICogVGltZSB0YWtlbiBmb3IgYWNxdWlyaW5nIGNhY2hlZCByZWZyZXNoIHRva2VuXG4gICAgICovXG4gICAgUmVmcmVzaFRva2VuQ2xpZW50QWNxdWlyZVRva2VuV2l0aENhY2hlZFJlZnJlc2hUb2tlbjpcbiAgICAgICAgXCJyZWZyZXNoVG9rZW5DbGllbnRBY3F1aXJlVG9rZW5XaXRoQ2FjaGVkUmVmcmVzaFRva2VuXCIsXG5cbiAgICAvKipcbiAgICAgKiBhY3F1aXJlVG9rZW5CeVJlZnJlc2hUb2tlbiBBUEkgaW4gUmVmcmVzaFRva2VuQ2xpZW50IChtc2FsLWNvbW1vbikuXG4gICAgICovXG4gICAgUmVmcmVzaFRva2VuQ2xpZW50QWNxdWlyZVRva2VuQnlSZWZyZXNoVG9rZW46XG4gICAgICAgIFwicmVmcmVzaFRva2VuQ2xpZW50QWNxdWlyZVRva2VuQnlSZWZyZXNoVG9rZW5cIixcblxuICAgIC8qKlxuICAgICAqIEhlbHBlciBmdW5jdGlvbiB0byBjcmVhdGUgdG9rZW4gcmVxdWVzdCBib2R5IGluIFJlZnJlc2hUb2tlbkNsaWVudCAobXNhbC1jb21tb24pLlxuICAgICAqL1xuICAgIFJlZnJlc2hUb2tlbkNsaWVudENyZWF0ZVRva2VuUmVxdWVzdEJvZHk6XG4gICAgICAgIFwicmVmcmVzaFRva2VuQ2xpZW50Q3JlYXRlVG9rZW5SZXF1ZXN0Qm9keVwiLFxuXG4gICAgLyoqXG4gICAgICogYWNxdWlyZVRva2VuRnJvbUNhY2hlIChtc2FsLWJyb3dzZXIpLlxuICAgICAqIEludGVybmFsIEFQSSBmb3IgYWNxdWlyaW5nIHRva2VuIGZyb20gY2FjaGVcbiAgICAgKi9cbiAgICBBY3F1aXJlVG9rZW5Gcm9tQ2FjaGU6IFwiYWNxdWlyZVRva2VuRnJvbUNhY2hlXCIsXG4gICAgU2lsZW50Rmxvd0NsaWVudEFjcXVpcmVDYWNoZWRUb2tlbjogXCJzaWxlbnRGbG93Q2xpZW50QWNxdWlyZUNhY2hlZFRva2VuXCIsXG4gICAgU2lsZW50Rmxvd0NsaWVudEdlbmVyYXRlUmVzdWx0RnJvbUNhY2hlUmVjb3JkOlxuICAgICAgICBcInNpbGVudEZsb3dDbGllbnRHZW5lcmF0ZVJlc3VsdEZyb21DYWNoZVJlY29yZFwiLFxuXG4gICAgLyoqXG4gICAgICogYWNxdWlyZVRva2VuQnlTaWxlbnRJZnJhbWUgKG1zYWwtYnJvd3NlcikuXG4gICAgICogSW50ZXJuYWwgQVBJIGZvciBhY3F1aXJpbmcgdG9rZW4gYnkgc2lsZW50IElmcmFtZVxuICAgICAqL1xuICAgIEFjcXVpcmVUb2tlbkJ5U2lsZW50SWZyYW1lOiBcImFjcXVpcmVUb2tlbkJ5U2lsZW50SWZyYW1lXCIsXG5cbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbCBBUEkgZm9yIGluaXRpYWxpemluZyBiYXNlIHJlcXVlc3QgaW4gQmFzZUludGVyYWN0aW9uQ2xpZW50IChtc2FsLWJyb3dzZXIpXG4gICAgICovXG4gICAgSW5pdGlhbGl6ZUJhc2VSZXF1ZXN0OiBcImluaXRpYWxpemVCYXNlUmVxdWVzdFwiLFxuXG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgQVBJIGZvciBpbml0aWFsaXppbmcgc2lsZW50IHJlcXVlc3QgaW4gU2lsZW50Q2FjaGVDbGllbnQgKG1zYWwtYnJvd3NlcilcbiAgICAgKi9cbiAgICBJbml0aWFsaXplU2lsZW50UmVxdWVzdDogXCJpbml0aWFsaXplU2lsZW50UmVxdWVzdFwiLFxuXG4gICAgSW5pdGlhbGl6ZUNsaWVudEFwcGxpY2F0aW9uOiBcImluaXRpYWxpemVDbGllbnRBcHBsaWNhdGlvblwiLFxuXG4gICAgSW5pdGlhbGl6ZUNhY2hlOiBcImluaXRpYWxpemVDYWNoZVwiLFxuXG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIGluIFNpbGVudElmcmFtZUNsaWVudCBjbGFzcyAobXNhbC1icm93c2VyKS5cbiAgICAgKi9cbiAgICBTaWxlbnRJZnJhbWVDbGllbnRUb2tlbkhlbHBlcjogXCJzaWxlbnRJZnJhbWVDbGllbnRUb2tlbkhlbHBlclwiLFxuXG4gICAgLyoqXG4gICAgICogU2lsZW50SGFuZGxlclxuICAgICAqL1xuICAgIFNpbGVudEhhbmRsZXJJbml0aWF0ZUF1dGhSZXF1ZXN0OiBcInNpbGVudEhhbmRsZXJJbml0aWF0ZUF1dGhSZXF1ZXN0XCIsXG4gICAgU2lsZW50SGFuZGxlck1vbml0b3JJZnJhbWVGb3JIYXNoOiBcInNpbGVudEhhbmRsZXJNb25pdG9ySWZyYW1lRm9ySGFzaFwiLFxuICAgIFNpbGVudEhhbmRsZXJMb2FkRnJhbWU6IFwic2lsZW50SGFuZGxlckxvYWRGcmFtZVwiLFxuICAgIFNpbGVudEhhbmRsZXJMb2FkRnJhbWVTeW5jOiBcInNpbGVudEhhbmRsZXJMb2FkRnJhbWVTeW5jXCIsXG5cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb25zIGluIFN0YW5kYXJkSW50ZXJhY3Rpb25DbGllbnQgY2xhc3MgKG1zYWwtYnJvd3NlcilcbiAgICAgKi9cbiAgICBTdGFuZGFyZEludGVyYWN0aW9uQ2xpZW50Q3JlYXRlQXV0aENvZGVDbGllbnQ6XG4gICAgICAgIFwic3RhbmRhcmRJbnRlcmFjdGlvbkNsaWVudENyZWF0ZUF1dGhDb2RlQ2xpZW50XCIsXG4gICAgU3RhbmRhcmRJbnRlcmFjdGlvbkNsaWVudEdldENsaWVudENvbmZpZ3VyYXRpb246XG4gICAgICAgIFwic3RhbmRhcmRJbnRlcmFjdGlvbkNsaWVudEdldENsaWVudENvbmZpZ3VyYXRpb25cIixcbiAgICBTdGFuZGFyZEludGVyYWN0aW9uQ2xpZW50SW5pdGlhbGl6ZUF1dGhvcml6YXRpb25SZXF1ZXN0OlxuICAgICAgICBcInN0YW5kYXJkSW50ZXJhY3Rpb25DbGllbnRJbml0aWFsaXplQXV0aG9yaXphdGlvblJlcXVlc3RcIixcblxuICAgIC8qKlxuICAgICAqIGdldEF1dGhDb2RlVXJsIEFQSSAobXNhbC1icm93c2VyIGFuZCBtc2FsLW5vZGUpLlxuICAgICAqL1xuICAgIEdldEF1dGhDb2RlVXJsOiBcImdldEF1dGhDb2RlVXJsXCIsXG4gICAgR2V0U3RhbmRhcmRQYXJhbXM6IFwiZ2V0U3RhbmRhcmRQYXJhbXNcIixcblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9ucyBmcm9tIEludGVyYWN0aW9uSGFuZGxlciAobXNhbC1icm93c2VyKVxuICAgICAqL1xuICAgIEhhbmRsZUNvZGVSZXNwb25zZUZyb21TZXJ2ZXI6IFwiaGFuZGxlQ29kZVJlc3BvbnNlRnJvbVNlcnZlclwiLFxuICAgIEhhbmRsZUNvZGVSZXNwb25zZTogXCJoYW5kbGVDb2RlUmVzcG9uc2VcIixcbiAgICBIYW5kbGVSZXNwb25zZUVhcjogXCJoYW5kbGVSZXNwb25zZUVhclwiLFxuICAgIEhhbmRsZVJlc3BvbnNlUGxhdGZvcm1Ccm9rZXI6IFwiaGFuZGxlUmVzcG9uc2VQbGF0Zm9ybUJyb2tlclwiLFxuICAgIEhhbmRsZVJlc3BvbnNlQ29kZTogXCJoYW5kbGVSZXNwb25zZUNvZGVcIixcbiAgICBVcGRhdGVUb2tlbkVuZHBvaW50QXV0aG9yaXR5OiBcInVwZGF0ZVRva2VuRW5kcG9pbnRBdXRob3JpdHlcIixcblxuICAgIC8qKlxuICAgICAqIEFQSXMgaW4gQXV0aG9yaXphdGlvbiBDb2RlIENsaWVudCAobXNhbC1jb21tb24pXG4gICAgICovXG4gICAgQXV0aENsaWVudEFjcXVpcmVUb2tlbjogXCJhdXRoQ2xpZW50QWNxdWlyZVRva2VuXCIsXG4gICAgQXV0aENsaWVudEV4ZWN1dGVUb2tlblJlcXVlc3Q6IFwiYXV0aENsaWVudEV4ZWN1dGVUb2tlblJlcXVlc3RcIixcbiAgICBBdXRoQ2xpZW50Q3JlYXRlVG9rZW5SZXF1ZXN0Qm9keTogXCJhdXRoQ2xpZW50Q3JlYXRlVG9rZW5SZXF1ZXN0Qm9keVwiLFxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGUgZnVuY3Rpb25zIGluIFBvcFRva2VuR2VuZXJhdG9yIChtc2FsLWNvbW1vbilcbiAgICAgKi9cbiAgICBQb3BUb2tlbkdlbmVyYXRlQ25mOiBcInBvcFRva2VuR2VuZXJhdGVDbmZcIixcbiAgICBQb3BUb2tlbkdlbmVyYXRlS2lkOiBcInBvcFRva2VuR2VuZXJhdGVLaWRcIixcblxuICAgIC8qKlxuICAgICAqIGhhbmRsZVNlcnZlclRva2VuUmVzcG9uc2UgQVBJIGluIFJlc3BvbnNlSGFuZGxlciAobXNhbC1jb21tb24pXG4gICAgICovXG4gICAgSGFuZGxlU2VydmVyVG9rZW5SZXNwb25zZTogXCJoYW5kbGVTZXJ2ZXJUb2tlblJlc3BvbnNlXCIsXG4gICAgRGVzZXJpYWxpemVSZXNwb25zZTogXCJkZXNlcmlhbGl6ZVJlc3BvbnNlXCIsXG5cbiAgICAvKipcbiAgICAgKiBBdXRob3JpdHkgZnVuY3Rpb25zXG4gICAgICovXG4gICAgQXV0aG9yaXR5RmFjdG9yeUNyZWF0ZURpc2NvdmVyZWRJbnN0YW5jZTpcbiAgICAgICAgXCJhdXRob3JpdHlGYWN0b3J5Q3JlYXRlRGlzY292ZXJlZEluc3RhbmNlXCIsXG4gICAgQXV0aG9yaXR5UmVzb2x2ZUVuZHBvaW50c0FzeW5jOiBcImF1dGhvcml0eVJlc29sdmVFbmRwb2ludHNBc3luY1wiLFxuICAgIEF1dGhvcml0eVJlc29sdmVFbmRwb2ludHNGcm9tTG9jYWxTb3VyY2VzOlxuICAgICAgICBcImF1dGhvcml0eVJlc29sdmVFbmRwb2ludHNGcm9tTG9jYWxTb3VyY2VzXCIsXG4gICAgQXV0aG9yaXR5R2V0Q2xvdWREaXNjb3ZlcnlNZXRhZGF0YUZyb21OZXR3b3JrOlxuICAgICAgICBcImF1dGhvcml0eUdldENsb3VkRGlzY292ZXJ5TWV0YWRhdGFGcm9tTmV0d29ya1wiLFxuICAgIEF1dGhvcml0eVVwZGF0ZUNsb3VkRGlzY292ZXJ5TWV0YWRhdGE6XG4gICAgICAgIFwiYXV0aG9yaXR5VXBkYXRlQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YVwiLFxuICAgIEF1dGhvcml0eUdldEVuZHBvaW50TWV0YWRhdGFGcm9tTmV0d29yazpcbiAgICAgICAgXCJhdXRob3JpdHlHZXRFbmRwb2ludE1ldGFkYXRhRnJvbU5ldHdvcmtcIixcbiAgICBBdXRob3JpdHlVcGRhdGVFbmRwb2ludE1ldGFkYXRhOiBcImF1dGhvcml0eVVwZGF0ZUVuZHBvaW50TWV0YWRhdGFcIixcbiAgICBBdXRob3JpdHlVcGRhdGVNZXRhZGF0YVdpdGhSZWdpb25hbEluZm9ybWF0aW9uOlxuICAgICAgICBcImF1dGhvcml0eVVwZGF0ZU1ldGFkYXRhV2l0aFJlZ2lvbmFsSW5mb3JtYXRpb25cIixcblxuICAgIC8qKlxuICAgICAqIFJlZ2lvbiBEaXNjb3ZlcnkgZnVuY3Rpb25zXG4gICAgICovXG4gICAgUmVnaW9uRGlzY292ZXJ5RGV0ZWN0UmVnaW9uOiBcInJlZ2lvbkRpc2NvdmVyeURldGVjdFJlZ2lvblwiLFxuICAgIFJlZ2lvbkRpc2NvdmVyeUdldFJlZ2lvbkZyb21JTURTOiBcInJlZ2lvbkRpc2NvdmVyeUdldFJlZ2lvbkZyb21JTURTXCIsXG4gICAgUmVnaW9uRGlzY292ZXJ5R2V0Q3VycmVudFZlcnNpb246IFwicmVnaW9uRGlzY292ZXJ5R2V0Q3VycmVudFZlcnNpb25cIixcblxuICAgIEFjcXVpcmVUb2tlbkJ5Q29kZUFzeW5jOiBcImFjcXVpcmVUb2tlbkJ5Q29kZUFzeW5jXCIsXG5cbiAgICBHZXRFbmRwb2ludE1ldGFkYXRhRnJvbU5ldHdvcms6IFwiZ2V0RW5kcG9pbnRNZXRhZGF0YUZyb21OZXR3b3JrXCIsXG4gICAgR2V0Q2xvdWREaXNjb3ZlcnlNZXRhZGF0YUZyb21OZXR3b3JrTWVhc3VyZW1lbnQ6XG4gICAgICAgIFwiZ2V0Q2xvdWREaXNjb3ZlcnlNZXRhZGF0YUZyb21OZXR3b3JrTWVhc3VyZW1lbnRcIixcblxuICAgIEhhbmRsZVJlZGlyZWN0UHJvbWlzZU1lYXN1cmVtZW50OiBcImhhbmRsZVJlZGlyZWN0UHJvbWlzZVwiLFxuICAgIEhhbmRsZU5hdGl2ZVJlZGlyZWN0UHJvbWlzZU1lYXN1cmVtZW50OiBcImhhbmRsZU5hdGl2ZVJlZGlyZWN0UHJvbWlzZVwiLFxuXG4gICAgVXBkYXRlQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YU1lYXN1cmVtZW50OlxuICAgICAgICBcInVwZGF0ZUNsb3VkRGlzY292ZXJ5TWV0YWRhdGFNZWFzdXJlbWVudFwiLFxuXG4gICAgVXNlcm5hbWVQYXNzd29yZENsaWVudEFjcXVpcmVUb2tlbjogXCJ1c2VybmFtZVBhc3N3b3JkQ2xpZW50QWNxdWlyZVRva2VuXCIsXG5cbiAgICBOYXRpdmVNZXNzYWdlSGFuZGxlckhhbmRzaGFrZTogXCJuYXRpdmVNZXNzYWdlSGFuZGxlckhhbmRzaGFrZVwiLFxuXG4gICAgTmF0aXZlR2VuZXJhdGVBdXRoUmVzdWx0OiBcIm5hdGl2ZUdlbmVyYXRlQXV0aFJlc3VsdFwiLFxuXG4gICAgUmVtb3ZlSGlkZGVuSWZyYW1lOiBcInJlbW92ZUhpZGRlbklmcmFtZVwiLFxuXG4gICAgLyoqXG4gICAgICogQ2FjaGUgb3BlcmF0aW9uc1xuICAgICAqL1xuICAgIENsZWFyVG9rZW5zQW5kS2V5c1dpdGhDbGFpbXM6IFwiY2xlYXJUb2tlbnNBbmRLZXlzV2l0aENsYWltc1wiLFxuICAgIENhY2hlTWFuYWdlckdldFJlZnJlc2hUb2tlbjogXCJjYWNoZU1hbmFnZXJHZXRSZWZyZXNoVG9rZW5cIixcbiAgICBJbXBvcnRFeGlzdGluZ0NhY2hlOiBcImltcG9ydEV4aXN0aW5nQ2FjaGVcIixcbiAgICBTZXRVc2VyRGF0YTogXCJzZXRVc2VyRGF0YVwiLFxuICAgIExvY2FsU3RvcmFnZVVwZGF0ZWQ6IFwibG9jYWxTdG9yYWdlVXBkYXRlZFwiLFxuXG4gICAgLyoqXG4gICAgICogQ3J5cHRvIE9wZXJhdGlvbnNcbiAgICAgKi9cbiAgICBHZW5lcmF0ZVBrY2VDb2RlczogXCJnZW5lcmF0ZVBrY2VDb2Rlc1wiLFxuICAgIEdlbmVyYXRlQ29kZVZlcmlmaWVyOiBcImdlbmVyYXRlQ29kZVZlcmlmaWVyXCIsXG4gICAgR2VuZXJhdGVDb2RlQ2hhbGxlbmdlRnJvbVZlcmlmaWVyOiBcImdlbmVyYXRlQ29kZUNoYWxsZW5nZUZyb21WZXJpZmllclwiLFxuICAgIFNoYTI1NkRpZ2VzdDogXCJzaGEyNTZEaWdlc3RcIixcbiAgICBHZXRSYW5kb21WYWx1ZXM6IFwiZ2V0UmFuZG9tVmFsdWVzXCIsXG4gICAgR2VuZXJhdGVIS0RGOiBcImdlbmVyYXRlSEtERlwiLFxuICAgIEdlbmVyYXRlQmFzZUtleTogXCJnZW5lcmF0ZUJhc2VLZXlcIixcbiAgICBCYXNlNjREZWNvZGU6IFwiYmFzZTY0RGVjb2RlXCIsXG4gICAgVXJsRW5jb2RlQXJyOiBcInVybEVuY29kZUFyclwiLFxuICAgIEVuY3J5cHQ6IFwiZW5jcnlwdFwiLFxuICAgIERlY3J5cHQ6IFwiZGVjcnlwdFwiLFxuICAgIEdlbmVyYXRlRWFyS2V5OiBcImdlbmVyYXRlRWFyS2V5XCIsXG4gICAgRGVjcnlwdEVhclJlc3BvbnNlOiBcImRlY3J5cHRFYXJSZXNwb25zZVwiLFxufSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIFBlcmZvcm1hbmNlRXZlbnRzID1cbiAgICAodHlwZW9mIFBlcmZvcm1hbmNlRXZlbnRzKVtrZXlvZiB0eXBlb2YgUGVyZm9ybWFuY2VFdmVudHNdO1xuXG5leHBvcnQgY29uc3QgUGVyZm9ybWFuY2VFdmVudEFiYnJldmlhdGlvbnM6IFJlYWRvbmx5TWFwPHN0cmluZywgc3RyaW5nPiA9XG4gICAgbmV3IE1hcChbXG4gICAgICAgIFtQZXJmb3JtYW5jZUV2ZW50cy5BY3F1aXJlVG9rZW5CeUNvZGUsIFwiQVRCeUNvZGVcIl0sXG4gICAgICAgIFtQZXJmb3JtYW5jZUV2ZW50cy5BY3F1aXJlVG9rZW5CeVJlZnJlc2hUb2tlbiwgXCJBVEJ5UlRcIl0sXG4gICAgICAgIFtQZXJmb3JtYW5jZUV2ZW50cy5BY3F1aXJlVG9rZW5TaWxlbnQsIFwiQVRTXCJdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuQWNxdWlyZVRva2VuU2lsZW50QXN5bmMsIFwiQVRTQXN5bmNcIl0sXG4gICAgICAgIFtQZXJmb3JtYW5jZUV2ZW50cy5BY3F1aXJlVG9rZW5Qb3B1cCwgXCJBVFBvcHVwXCJdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuQWNxdWlyZVRva2VuUmVkaXJlY3QsIFwiQVRSZWRpcmVjdFwiXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuQ3J5cHRvT3B0c0dldFB1YmxpY0tleVRodW1icHJpbnQsXG4gICAgICAgICAgICBcIkNyeXB0b0dldFBLVGh1bWJcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLkNyeXB0b09wdHNTaWduSnd0LCBcIkNyeXB0b1NpZ25Kd3RcIl0sXG4gICAgICAgIFtQZXJmb3JtYW5jZUV2ZW50cy5TaWxlbnRDYWNoZUNsaWVudEFjcXVpcmVUb2tlbiwgXCJTbHRDYWNoZUNsaWVudEFUXCJdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuU2lsZW50SWZyYW1lQ2xpZW50QWNxdWlyZVRva2VuLCBcIlNsdElmcmFtZUNsaWVudEFUXCJdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuU2lsZW50UmVmcmVzaENsaWVudEFjcXVpcmVUb2tlbiwgXCJTbHRSQ2xpZW50QVRcIl0sXG4gICAgICAgIFtQZXJmb3JtYW5jZUV2ZW50cy5Tc29TaWxlbnQsIFwiU3NvU2x0XCJdLFxuICAgICAgICBbXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5TdGFuZGFyZEludGVyYWN0aW9uQ2xpZW50R2V0RGlzY292ZXJlZEF1dGhvcml0eSxcbiAgICAgICAgICAgIFwiU3RkSW50Q2xpZW50R2V0RGlzY0F1dGhcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuRmV0Y2hBY2NvdW50SWRXaXRoTmF0aXZlQnJva2VyLFxuICAgICAgICAgICAgXCJGZXRjaEFjY0lkV2l0aE50dkJyb2tlclwiLFxuICAgICAgICBdLFxuICAgICAgICBbXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5OYXRpdmVJbnRlcmFjdGlvbkNsaWVudEFjcXVpcmVUb2tlbixcbiAgICAgICAgICAgIFwiTnR2SW50Q2xpZW50QVRcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuQmFzZUNsaWVudENyZWF0ZVRva2VuUmVxdWVzdEhlYWRlcnMsXG4gICAgICAgICAgICBcIkJhc2VDbGllbnRDcmVhdGVUUmVxSGVhZFwiLFxuICAgICAgICBdLFxuICAgICAgICBbXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5OZXR3b3JrQ2xpZW50U2VuZFBvc3RSZXF1ZXN0QXN5bmMsXG4gICAgICAgICAgICBcIk5ldENsaWVudFNlbmRQb3N0XCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLlJlZnJlc2hUb2tlbkNsaWVudEV4ZWN1dGVQb3N0VG9Ub2tlbkVuZHBvaW50LFxuICAgICAgICAgICAgXCJSVENsaWVudEV4ZWNQb3N0XCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkF1dGhvcml6YXRpb25Db2RlQ2xpZW50RXhlY3V0ZVBvc3RUb1Rva2VuRW5kcG9pbnQsXG4gICAgICAgICAgICBcIkF1dGhDb2RlQ2xpZW50RXhlY1Bvc3RcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLkJyb2tlckhhbmRoc2hha2UsIFwiQnJva2VySGFuZHNoYWtlXCJdLFxuICAgICAgICBbXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5BY3F1aXJlVG9rZW5CeVJlZnJlc2hUb2tlbkluQnJva2VyLFxuICAgICAgICAgICAgXCJBVEJ5UlRJbkJyb2tlclwiLFxuICAgICAgICBdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuQWNxdWlyZVRva2VuQnlCcm9rZXIsIFwiQVRCeUJyb2tlclwiXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuUmVmcmVzaFRva2VuQ2xpZW50RXhlY3V0ZVRva2VuUmVxdWVzdCxcbiAgICAgICAgICAgIFwiUlRDbGllbnRFeGVjVFJlcVwiLFxuICAgICAgICBdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuUmVmcmVzaFRva2VuQ2xpZW50QWNxdWlyZVRva2VuLCBcIlJUQ2xpZW50QVRcIl0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLlJlZnJlc2hUb2tlbkNsaWVudEFjcXVpcmVUb2tlbldpdGhDYWNoZWRSZWZyZXNoVG9rZW4sXG4gICAgICAgICAgICBcIlJUQ2xpZW50QVRXaXRoQ2FjaGVkUlRcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuUmVmcmVzaFRva2VuQ2xpZW50QWNxdWlyZVRva2VuQnlSZWZyZXNoVG9rZW4sXG4gICAgICAgICAgICBcIlJUQ2xpZW50QVRCeVJUXCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLlJlZnJlc2hUb2tlbkNsaWVudENyZWF0ZVRva2VuUmVxdWVzdEJvZHksXG4gICAgICAgICAgICBcIlJUQ2xpZW50Q3JlYXRlVFJlcUJvZHlcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLkFjcXVpcmVUb2tlbkZyb21DYWNoZSwgXCJBVEZyb21DYWNoZVwiXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuU2lsZW50Rmxvd0NsaWVudEFjcXVpcmVDYWNoZWRUb2tlbixcbiAgICAgICAgICAgIFwiU2x0Rmxvd0NsaWVudEFUQ2FjaGVkXCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLlNpbGVudEZsb3dDbGllbnRHZW5lcmF0ZVJlc3VsdEZyb21DYWNoZVJlY29yZCxcbiAgICAgICAgICAgIFwiU2x0Rmxvd0NsaWVudEdlblJlc0Zyb21DYWNoZVwiLFxuICAgICAgICBdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuQWNxdWlyZVRva2VuQnlTaWxlbnRJZnJhbWUsIFwiQVRCeVNsdElmcmFtZVwiXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLkluaXRpYWxpemVCYXNlUmVxdWVzdCwgXCJJbml0QmFzZVJlcVwiXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLkluaXRpYWxpemVTaWxlbnRSZXF1ZXN0LCBcIkluaXRTbHRSZXFcIl0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkluaXRpYWxpemVDbGllbnRBcHBsaWNhdGlvbixcbiAgICAgICAgICAgIFwiSW5pdENsaWVudEFwcGxpY2F0aW9uXCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtQZXJmb3JtYW5jZUV2ZW50cy5Jbml0aWFsaXplQ2FjaGUsIFwiSW5pdENhY2hlXCJdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuSW1wb3J0RXhpc3RpbmdDYWNoZSwgXCJpbXBvcnRDYWNoZVwiXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLlNldFVzZXJEYXRhLCBcInNldFVzZXJEYXRhXCJdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuTG9jYWxTdG9yYWdlVXBkYXRlZCwgXCJsb2NhbFN0b3JhZ2VVcGRhdGVkXCJdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuU2lsZW50SWZyYW1lQ2xpZW50VG9rZW5IZWxwZXIsIFwiU0lDbGllbnRUSGVscGVyXCJdLFxuICAgICAgICBbXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5TaWxlbnRIYW5kbGVySW5pdGlhdGVBdXRoUmVxdWVzdCxcbiAgICAgICAgICAgIFwiU0hhbmRsZXJJbml0QXV0aFJlcVwiLFxuICAgICAgICBdLFxuICAgICAgICBbXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5TaWxlbnRIYW5kbGVyTW9uaXRvcklmcmFtZUZvckhhc2gsXG4gICAgICAgICAgICBcIlNsdEhhbmRsZXJNb25pdG9ySWZyYW1lRm9ySGFzaFwiLFxuICAgICAgICBdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuU2lsZW50SGFuZGxlckxvYWRGcmFtZSwgXCJTSGFuZGxlckxvYWRGcmFtZVwiXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLlNpbGVudEhhbmRsZXJMb2FkRnJhbWVTeW5jLCBcIlNIYW5kbGVyTG9hZEZyYW1lU3luY1wiXSxcblxuICAgICAgICBbXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5TdGFuZGFyZEludGVyYWN0aW9uQ2xpZW50Q3JlYXRlQXV0aENvZGVDbGllbnQsXG4gICAgICAgICAgICBcIlN0ZEludENsaWVudENyZWF0ZUF1dGhDb2RlQ2xpZW50XCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLlN0YW5kYXJkSW50ZXJhY3Rpb25DbGllbnRHZXRDbGllbnRDb25maWd1cmF0aW9uLFxuICAgICAgICAgICAgXCJTdGRJbnRDbGllbnRHZXRDbGllbnRDb25mXCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLlN0YW5kYXJkSW50ZXJhY3Rpb25DbGllbnRJbml0aWFsaXplQXV0aG9yaXphdGlvblJlcXVlc3QsXG4gICAgICAgICAgICBcIlN0ZEludENsaWVudEluaXRBdXRoUmVxXCIsXG4gICAgICAgIF0sXG5cbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLkdldEF1dGhDb2RlVXJsLCBcIkdldEF1dGhDb2RlVXJsXCJdLFxuXG4gICAgICAgIFtcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkhhbmRsZUNvZGVSZXNwb25zZUZyb21TZXJ2ZXIsXG4gICAgICAgICAgICBcIkhhbmRsZUNvZGVSZXNGcm9tU2VydmVyXCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtQZXJmb3JtYW5jZUV2ZW50cy5IYW5kbGVDb2RlUmVzcG9uc2UsIFwiSGFuZGxlQ29kZVJlc3BcIl0sXG4gICAgICAgIFtQZXJmb3JtYW5jZUV2ZW50cy5IYW5kbGVSZXNwb25zZUVhciwgXCJIYW5kbGVSZXNwRWFyXCJdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuSGFuZGxlUmVzcG9uc2VDb2RlLCBcIkhhbmRsZVJlc3BDb2RlXCJdLFxuICAgICAgICBbXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5IYW5kbGVSZXNwb25zZVBsYXRmb3JtQnJva2VyLFxuICAgICAgICAgICAgXCJIYW5kbGVSZXNwUGxhdEJyb2tlclwiLFxuICAgICAgICBdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuVXBkYXRlVG9rZW5FbmRwb2ludEF1dGhvcml0eSwgXCJVcGRURW5kcG9pbnRBdXRoXCJdLFxuXG4gICAgICAgIFtQZXJmb3JtYW5jZUV2ZW50cy5BdXRoQ2xpZW50QWNxdWlyZVRva2VuLCBcIkF1dGhDbGllbnRBVFwiXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLkF1dGhDbGllbnRFeGVjdXRlVG9rZW5SZXF1ZXN0LCBcIkF1dGhDbGllbnRFeGVjVFJlcVwiXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuQXV0aENsaWVudENyZWF0ZVRva2VuUmVxdWVzdEJvZHksXG4gICAgICAgICAgICBcIkF1dGhDbGllbnRDcmVhdGVUUmVxQm9keVwiLFxuICAgICAgICBdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuUG9wVG9rZW5HZW5lcmF0ZUNuZiwgXCJQb3BUR2VuQ25mXCJdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuUG9wVG9rZW5HZW5lcmF0ZUtpZCwgXCJQb3BUR2VuS2lkXCJdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuSGFuZGxlU2VydmVyVG9rZW5SZXNwb25zZSwgXCJIYW5kbGVTZXJ2ZXJUUmVzXCJdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuRGVzZXJpYWxpemVSZXNwb25zZSwgXCJEZXNlcmlhbGl6ZVJlc1wiXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuQXV0aG9yaXR5RmFjdG9yeUNyZWF0ZURpc2NvdmVyZWRJbnN0YW5jZSxcbiAgICAgICAgICAgIFwiQXV0aEZhY3RDcmVhdGVEaXNjSW5zdFwiLFxuICAgICAgICBdLFxuICAgICAgICBbXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5BdXRob3JpdHlSZXNvbHZlRW5kcG9pbnRzQXN5bmMsXG4gICAgICAgICAgICBcIkF1dGhSZXNvbHZlRW5kcG9pbnRzQXN5bmNcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuQXV0aG9yaXR5UmVzb2x2ZUVuZHBvaW50c0Zyb21Mb2NhbFNvdXJjZXMsXG4gICAgICAgICAgICBcIkF1dGhSZXNvbHZlRW5kcG9pbnRzRnJvbUxvY2FsXCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkF1dGhvcml0eUdldENsb3VkRGlzY292ZXJ5TWV0YWRhdGFGcm9tTmV0d29yayxcbiAgICAgICAgICAgIFwiQXV0aEdldENETWV0YUZyb21OZXRcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuQXV0aG9yaXR5VXBkYXRlQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YSxcbiAgICAgICAgICAgIFwiQXV0aFVwZENETWV0YVwiLFxuICAgICAgICBdLFxuICAgICAgICBbXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5BdXRob3JpdHlHZXRFbmRwb2ludE1ldGFkYXRhRnJvbU5ldHdvcmssXG4gICAgICAgICAgICBcIkF1dGhVcGRDRE1ldGFGcm9tTmV0XCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkF1dGhvcml0eVVwZGF0ZUVuZHBvaW50TWV0YWRhdGEsXG4gICAgICAgICAgICBcIkF1dGhVcGRFbmRwb2ludE1ldGFcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuQXV0aG9yaXR5VXBkYXRlTWV0YWRhdGFXaXRoUmVnaW9uYWxJbmZvcm1hdGlvbixcbiAgICAgICAgICAgIFwiQXV0aFVwZE1ldGFXaXRoUmVnSW5mb1wiLFxuICAgICAgICBdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuUmVnaW9uRGlzY292ZXJ5RGV0ZWN0UmVnaW9uLCBcIlJlZ0Rpc2NEZXRlY3RSZWdcIl0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLlJlZ2lvbkRpc2NvdmVyeUdldFJlZ2lvbkZyb21JTURTLFxuICAgICAgICAgICAgXCJSZWdEaXNjR2V0UmVnRnJvbUlNRFNcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuUmVnaW9uRGlzY292ZXJ5R2V0Q3VycmVudFZlcnNpb24sXG4gICAgICAgICAgICBcIlJlZ0Rpc2NHZXRDdXJyZW50VmVyXCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtQZXJmb3JtYW5jZUV2ZW50cy5BY3F1aXJlVG9rZW5CeUNvZGVBc3luYywgXCJBVEJ5Q29kZUFzeW5jXCJdLFxuICAgICAgICBbXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5HZXRFbmRwb2ludE1ldGFkYXRhRnJvbU5ldHdvcmssXG4gICAgICAgICAgICBcIkdldEVuZHBvaW50TWV0YUZyb21OZXRcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuR2V0Q2xvdWREaXNjb3ZlcnlNZXRhZGF0YUZyb21OZXR3b3JrTWVhc3VyZW1lbnQsXG4gICAgICAgICAgICBcIkdldENETWV0YUZyb21OZXRcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuSGFuZGxlUmVkaXJlY3RQcm9taXNlTWVhc3VyZW1lbnQsXG4gICAgICAgICAgICBcIkhhbmRsZVJlZGlyZWN0UHJvbWlzZVwiLFxuICAgICAgICBdLFxuICAgICAgICBbXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5IYW5kbGVOYXRpdmVSZWRpcmVjdFByb21pc2VNZWFzdXJlbWVudCxcbiAgICAgICAgICAgIFwiSGFuZGxlTnR2UmVkaXJlY3RQcm9taXNlXCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLlVwZGF0ZUNsb3VkRGlzY292ZXJ5TWV0YWRhdGFNZWFzdXJlbWVudCxcbiAgICAgICAgICAgIFwiVXBkYXRlQ0RNZXRhXCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLlVzZXJuYW1lUGFzc3dvcmRDbGllbnRBY3F1aXJlVG9rZW4sXG4gICAgICAgICAgICBcIlVzZXJQYXNzQ2xpZW50QVRcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuTmF0aXZlTWVzc2FnZUhhbmRsZXJIYW5kc2hha2UsXG4gICAgICAgICAgICBcIk50dk1zZ0hhbmRsZXJIYW5kc2hha2VcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLk5hdGl2ZUdlbmVyYXRlQXV0aFJlc3VsdCwgXCJOdHZHZW5BdXRoUmVzXCJdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuUmVtb3ZlSGlkZGVuSWZyYW1lLCBcIlJlbW92ZUhpZGRlbklmcmFtZVwiXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuQ2xlYXJUb2tlbnNBbmRLZXlzV2l0aENsYWltcyxcbiAgICAgICAgICAgIFwiQ2xlYXJUQW5kS2V5c1dpdGhDbGFpbXNcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLkNhY2hlTWFuYWdlckdldFJlZnJlc2hUb2tlbiwgXCJDYWNoZU1hbmFnZXJHZXRSVFwiXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLkdlbmVyYXRlUGtjZUNvZGVzLCBcIkdlblBrY2VDb2Rlc1wiXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLkdlbmVyYXRlQ29kZVZlcmlmaWVyLCBcIkdlbkNvZGVWZXJpZmllclwiXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuR2VuZXJhdGVDb2RlQ2hhbGxlbmdlRnJvbVZlcmlmaWVyLFxuICAgICAgICAgICAgXCJHZW5Db2RlQ2hhbGxlbmdlRnJvbVZlcmlmaWVyXCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtQZXJmb3JtYW5jZUV2ZW50cy5TaGEyNTZEaWdlc3QsIFwiU2hhMjU2RGlnZXN0XCJdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuR2V0UmFuZG9tVmFsdWVzLCBcIkdldFJhbmRvbVZhbHVlc1wiXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLkdlbmVyYXRlSEtERiwgXCJnZW5IS0RGXCJdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuR2VuZXJhdGVCYXNlS2V5LCBcImdlbkJhc2VLZXlcIl0sXG4gICAgICAgIFtQZXJmb3JtYW5jZUV2ZW50cy5CYXNlNjREZWNvZGUsIFwiYjY0RGVjb2RlXCJdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuVXJsRW5jb2RlQXJyLCBcInVybEVuY0FyclwiXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLkVuY3J5cHQsIFwiZW5jcnlwdFwiXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLkRlY3J5cHQsIFwiZGVjcnlwdFwiXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLkdlbmVyYXRlRWFyS2V5LCBcImdlbkVhcktleVwiXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLkRlY3J5cHRFYXJSZXNwb25zZSwgXCJkZWNyeXB0RWFyUmVzcFwiXSxcbiAgICBdKTtcblxuLyoqXG4gKiBTdGF0ZSBvZiB0aGUgcGVyZm9ybWFuY2UgZXZlbnQuXG4gKlxuICogQGV4cG9ydFxuICogQGVudW0ge251bWJlcn1cbiAqL1xuZXhwb3J0IGNvbnN0IFBlcmZvcm1hbmNlRXZlbnRTdGF0dXMgPSB7XG4gICAgTm90U3RhcnRlZDogMCxcbiAgICBJblByb2dyZXNzOiAxLFxuICAgIENvbXBsZXRlZDogMixcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBQZXJmb3JtYW5jZUV2ZW50U3RhdHVzID1cbiAgICAodHlwZW9mIFBlcmZvcm1hbmNlRXZlbnRTdGF0dXMpW2tleW9mIHR5cGVvZiBQZXJmb3JtYW5jZUV2ZW50U3RhdHVzXTtcblxuZXhwb3J0IHR5cGUgU3ViTWVhc3VyZW1lbnQgPSB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHN0YXJ0VGltZU1zOiBudW1iZXI7XG59O1xuXG4vKipcbiAqIFBlcmZvcm1hbmNlIG1lYXN1cmVtZW50IHRha2VuIGJ5IHRoZSBsaWJyYXJ5LCBpbmNsdWRpbmcgbWV0YWRhdGEgYWJvdXQgdGhlIHJlcXVlc3QgYW5kIGFwcGxpY2F0aW9uLlxuICpcbiAqIEBleHBvcnRcbiAqIEB0eXBlZGVmIHtQZXJmb3JtYW5jZUV2ZW50fVxuICovXG5leHBvcnQgdHlwZSBQZXJmb3JtYW5jZUV2ZW50ID0ge1xuICAgIC8qKlxuICAgICAqIFVuaXF1ZSBpZCBmb3IgdGhlIGV2ZW50XG4gICAgICpcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIGV2ZW50SWQ6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFN0YXRlIG9mIHRoZSBwZXJmb3JhbmNlIG1lYXN1cmUuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7UGVyZm9ybWFuY2VFdmVudFN0YXR1c31cbiAgICAgKi9cbiAgICBzdGF0dXM6IFBlcmZvcm1hbmNlRXZlbnRTdGF0dXM7XG5cbiAgICAvKipcbiAgICAgKiBMb2dpbiBhdXRob3JpdHkgdXNlZCBmb3IgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgYXV0aG9yaXR5OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBDbGllbnQgaWQgZm9yIHRoZSBhcHBsaWNhdGlvblxuICAgICAqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICBjbGllbnRJZDogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogQ29ycmVsYXRpb24gSUQgdXNlZCBmb3IgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgY29ycmVsYXRpb25JZDogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogRW5kLXRvLWVuZCBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gICAgICogQGRhdGUgMy8yMi8yMDIyIC0gMzo0MDowNSBQTVxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBkdXJhdGlvbk1zPzogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogVmlzaWJpbGl0eSBvZiB0aGUgcGFnZSB3aGVuIHRoZSBldmVudCBjb21wbGV0ZWQuXG4gICAgICogUmVhZCBmcm9tOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvUGFnZV9WaXNpYmlsaXR5X0FQSVxuICAgICAqXG4gICAgICogQHR5cGUgez8oc3RyaW5nIHwgbnVsbCl9XG4gICAgICovXG4gICAgZW5kUGFnZVZpc2liaWxpdHk/OiBzdHJpbmcgfCBudWxsO1xuXG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgcmVzdWx0IHdhcyByZXRyaWV2ZWQgZnJvbSB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7KGJvb2xlYW4gfCBudWxsKX1cbiAgICAgKi9cbiAgICBmcm9tQ2FjaGU/OiBib29sZWFuIHwgbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEV2ZW50IG5hbWUgKHVzdWFsbHkgaW4gdGhlIGZvcm0gb2YgY2xhc3NOYW1lRnVuY3Rpb25OYW1lKVxuICAgICAqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICBuYW1lOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBWaXNpYmlsaXR5IG9mIHRoZSBwYWdlIHdoZW4gdGhlIGV2ZW50IGNvbXBsZXRlZC5cbiAgICAgKiBSZWFkIGZyb206IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9QYWdlX1Zpc2liaWxpdHlfQVBJXG4gICAgICpcbiAgICAgKiBAdHlwZSB7PyhzdHJpbmcgfCBudWxsKX1cbiAgICAgKi9cbiAgICBzdGFydFBhZ2VWaXNpYmlsaXR5Pzogc3RyaW5nIHwgbnVsbDtcblxuICAgIC8qKlxuICAgICAqIFVuaXggbWlsbGlzZWNvbmQgdGltZXN0YW1wIHdoZW4gdGhlIGV2ZW50IHdhcyBpbml0aWF0ZWQuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHN0YXJ0VGltZU1zOiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIG9yIHRoZSBvcGVyYXRpb24gY29tcGxldGVkIHN1Y2Nlc3NmdWxseS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHsoYm9vbGVhbiB8IG51bGwpfVxuICAgICAqL1xuICAgIHN1Y2Nlc3M/OiBib29sZWFuIHwgbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEFkZCBzcGVjaWZpYyBlcnJvciBjb2RlIGluIGNhc2Ugb2YgZmFpbHVyZVxuICAgICAqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICBlcnJvckNvZGU/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBBZGQgc3BlY2lmaWMgc3ViIGVycm9yIGNvZGUgaW4gY2FzZSBvZiBmYWlsdXJlXG4gICAgICpcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIHN1YkVycm9yQ29kZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFNlcnZlciBlcnJvciBudW1iZXJcbiAgICAgKi9cbiAgICBzZXJ2ZXJFcnJvck5vPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogTmFtZSBvZiB0aGUgbGlicmFyeSB1c2VkIGZvciB0aGUgb3BlcmF0aW9uLlxuICAgICAqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICBsaWJyYXJ5TmFtZTogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVmVyc2lvbiBvZiB0aGUgbGlicmFyeSB1c2VkIGZvciB0aGUgb3BlcmF0aW9uLlxuICAgICAqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICBsaWJyYXJ5VmVyc2lvbjogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgcmVzcG9uc2UgaXMgZnJvbSBhIG5hdGl2ZSBjb21wb25lbnQgKGUuZy4sIFdBTSlcbiAgICAgKlxuICAgICAqIEB0eXBlIHs/Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBpc05hdGl2ZUJyb2tlcj86IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBSZXF1ZXN0IElEIHJldHVybmVkIGZyb20gdGhlIHJlc3BvbnNlXG4gICAgICpcbiAgICAgKiBAdHlwZSB7P3N0cmluZ31cbiAgICAgKi9cbiAgICByZXF1ZXN0SWQ/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBDYWNoZSBsb29rdXAgcG9saWN5XG4gICAgICpcbiAgICAgKiBAdHlwZSB7P251bWJlcn1cbiAgICAgKi9cbiAgICBjYWNoZUxvb2t1cFBvbGljeT86IG51bWJlciB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIENhY2hlIE91dGNvbWVcbiAgICAgKiBAdHlwZSB7P251bWJlcn1cbiAgICAgKi9cbiAgICBjYWNoZU91dGNvbWU/OiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBBbW91bnQgb2YgdGltZSBzcGVudCBpbiB0aGUgSlMgcXVldWUgaW4gbWlsbGlzZWNvbmRzLlxuICAgICAqXG4gICAgICogQHR5cGUgez9udW1iZXJ9XG4gICAgICovXG4gICAgcXVldWVkVGltZU1zPzogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogU3ViLW1lYXN1cmVtZW50cyBmb3IgaW50ZXJuYWwgdXNlLiBUbyBiZSBkZWxldGVkIGJlZm9yZSBmbHVzaGluZy5cbiAgICAgKi9cbiAgICBpbmNvbXBsZXRlU3ViTWVhc3VyZW1lbnRzPzogTWFwPHN0cmluZywgU3ViTWVhc3VyZW1lbnQ+O1xuXG4gICAgdmlzaWJpbGl0eUNoYW5nZUNvdW50PzogbnVtYmVyO1xuICAgIGluY29tcGxldGVTdWJzQ291bnQ/OiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBDb3JyZWxhdGlvbklkIG9mIHRoZSBpbiBwcm9ncmVzcyBpZnJhbWUgcmVxdWVzdCB0aGF0IHdhcyBhd2FpdGVkXG4gICAgICovXG4gICAgYXdhaXRJZnJhbWVDb3JyZWxhdGlvbklkPzogc3RyaW5nO1xuICAgIC8qKlxuICAgICAqIEFtb3VudCBvZiB0aW1lcyBxdWV1ZWQgaW4gdGhlIEpTIGV2ZW50IHF1ZXVlLlxuICAgICAqXG4gICAgICogQHR5cGUgez9udW1iZXJ9XG4gICAgICovXG4gICAgcXVldWVkQ291bnQ/OiBudW1iZXI7XG4gICAgLyoqXG4gICAgICogQW1vdW50IG9mIG1hbnVhbGx5IGNvbXBsZXRlZCBxdWV1ZSBldmVudHMuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7P251bWJlcn1cbiAgICAgKi9cbiAgICBxdWV1ZWRNYW51YWxseUNvbXBsZXRlZENvdW50PzogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogU2l6ZSBvZiB0aGUgaWQgdG9rZW5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgaWRUb2tlblNpemU/OiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFNpemUgb2YgdGhlIGFjY2VzcyB0b2tlblxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICAgIGFjY2Vzc1Rva2VuU2l6ZT86IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqXG4gICAgICogU2l6ZSBvZiB0aGUgcmVmcmVzaCB0b2tlblxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICAgIHJlZnJlc2hUb2tlblNpemU/OiBudW1iZXIgfCB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBBcHBsaWNhdGlvbiBuYW1lIGFzIHNwZWNpZmllZCBieSB0aGUgYXBwLlxuICAgICAqXG4gICAgICogQHR5cGUgez9zdHJpbmd9XG4gICAgICovXG4gICAgYXBwTmFtZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIEFwcGxpY2F0aW9uIHZlcnNpb24gYXMgc3BlY2lmaWVkIGJ5IHRoZSBhcHAuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7P3N0cmluZ31cbiAgICAgKi9cbiAgICBhcHBWZXJzaW9uPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGZvbGxvd2luZyBhcmUgZmllbGRzIHRoYXQgbWF5IGJlIGVtaXR0ZWQgaW4gbmF0aXZlIGJyb2tlciBzY2VuYXJpb3NcbiAgICAgKi9cbiAgICBleHRlbnNpb25JZD86IHN0cmluZztcbiAgICBleHRlbnNpb25WZXJzaW9uPzogc3RyaW5nO1xuICAgIG1hdHNCcm9rZXJWZXJzaW9uPzogc3RyaW5nO1xuICAgIG1hdHNBY2NvdW50Sm9pbk9uU3RhcnQ/OiBzdHJpbmc7XG4gICAgbWF0c0FjY291bnRKb2luT25FbmQ/OiBzdHJpbmc7XG4gICAgbWF0c0RldmljZUpvaW4/OiBzdHJpbmc7XG4gICAgbWF0c1Byb21wdEJlaGF2aW9yPzogc3RyaW5nO1xuICAgIG1hdHNBcGlFcnJvckNvZGU/OiBudW1iZXI7XG4gICAgbWF0c1VpVmlzaWJsZT86IGJvb2xlYW47XG4gICAgbWF0c1NpbGVudENvZGU/OiBudW1iZXI7XG4gICAgbWF0c1NpbGVudEJpU3ViQ29kZT86IG51bWJlcjtcbiAgICBtYXRzU2lsZW50TWVzc2FnZT86IHN0cmluZztcbiAgICBtYXRzU2lsZW50U3RhdHVzPzogbnVtYmVyO1xuICAgIG1hdHNIdHRwU3RhdHVzPzogbnVtYmVyO1xuICAgIG1hdHNIdHRwRXZlbnRDb3VudD86IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIEh0dHAgUE9TVCBtZXRhZGF0YVxuICAgICAqL1xuICAgIGh0dHBWZXJUb2tlbj86IHN0cmluZztcbiAgICBodHRwU3RhdHVzPzogbnVtYmVyO1xuICAgIGNvbnRlbnRUeXBlSGVhZGVyPzogc3RyaW5nO1xuICAgIGNvbnRlbnRMZW5ndGhIZWFkZXI/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBQbGF0Zm9ybSBicm9rZXIgZmllbGRzXG4gICAgICovXG4gICAgYWxsb3dQbGF0Zm9ybUJyb2tlcj86IGJvb2xlYW47XG4gICAgZXh0ZW5zaW9uSW5zdGFsbGVkPzogYm9vbGVhbjtcbiAgICBleHRlbnNpb25IYW5kc2hha2VUaW1lb3V0TXM/OiBudW1iZXI7XG4gICAgZXh0ZW5zaW9uSGFuZHNoYWtlVGltZWRPdXQ/OiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogTmVzdGVkIEFwcCBBdXRoIEZpZWxkc1xuICAgICAqL1xuICAgIG5lc3RlZEFwcEF1dGhSZXF1ZXN0PzogYm9vbGVhbjtcblxuICAgIC8qKlxuICAgICAqIE11bHRpcGxlIG1hdGNoZWQgYWNjZXNzL2lkL3JlZnJlc2ggdG9rZW5zIGluIHRoZSBjYWNoZVxuICAgICAqL1xuICAgIG11bHRpTWF0Y2hlZEFUPzogbnVtYmVyO1xuICAgIG11bHRpTWF0Y2hlZElEPzogbnVtYmVyO1xuICAgIG11bHRpTWF0Y2hlZFJUPzogbnVtYmVyO1xuXG4gICAgZXJyb3JOYW1lPzogc3RyaW5nO1xuICAgIGVycm9yU3RhY2s/OiBzdHJpbmdbXTtcblxuICAgIC8vIEV2ZW50IGNvbnRleHQgYXMgSlNPTiBzdHJpbmdcbiAgICBjb250ZXh0Pzogc3RyaW5nO1xuXG4gICAgLy8gTnVtYmVyIG9mIHRva2VucyBpbiB0aGUgY2FjaGUgdG8gYmUgcmVwb3J0ZWQgd2hlbiBjYWNoZSBxdW90YSBpcyBleGNlZWRlZFxuICAgIGNhY2hlUnRDb3VudD86IG51bWJlcjtcbiAgICBjYWNoZUlkQ291bnQ/OiBudW1iZXI7XG4gICAgY2FjaGVBdENvdW50PzogbnVtYmVyO1xuXG4gICAgLy8gU2NlbmFyaW8gaWQgdG8gdHJhY2sgY3VzdG9tIHVzZXIgcHJvbXB0c1xuICAgIHNjZW5hcmlvSWQ/OiBzdHJpbmc7XG5cbiAgICBhY2NvdW50VHlwZT86IFwiQUFEXCIgfCBcIk1TQVwiIHwgXCJCMkNcIjtcblxuICAgIC8qKlxuICAgICAqIFNlcnZlciBlcnJvciB0aGF0IHRyaWdnZXJzIGEgcmVxdWVzdCByZXRyeVxuICAgICAqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICByZXRyeUVycm9yPzogc3RyaW5nO1xuXG4gICAgZW1iZWRkZWRDbGllbnRJZD86IHN0cmluZztcbiAgICBlbWJlZGRlZFJlZGlyZWN0VXJpPzogc3RyaW5nO1xuXG4gICAgaXNBc3luY1BvcHVwPzogYm9vbGVhbjtcblxuICAgIHJ0RXhwaXJlc09uTXM/OiBudW1iZXI7XG5cbiAgICBzaWRGcm9tQ2xhaW1zPzogYm9vbGVhbjtcbiAgICBzaWRGcm9tUmVxdWVzdD86IGJvb2xlYW47XG4gICAgbG9naW5IaW50RnJvbVJlcXVlc3Q/OiBib29sZWFuO1xuICAgIGxvZ2luSGludEZyb21VcG4/OiBib29sZWFuO1xuICAgIGxvZ2luSGludEZyb21DbGFpbT86IGJvb2xlYW47XG4gICAgZG9tYWluSGludEZyb21SZXF1ZXN0PzogYm9vbGVhbjtcblxuICAgIHByb21wdD86IHN0cmluZztcblxuICAgIHVzZVByZUdlbmVyYXRlZFBrY2U/OiBib29sZWFuO1xufTtcblxuZXhwb3J0IHR5cGUgUGVyZm9ybWFuY2VFdmVudENvbnRleHQgPSB7XG4gICAgZHVyPzogbnVtYmVyO1xuICAgIGVycj86IHN0cmluZztcbiAgICBzdWJFcnI/OiBzdHJpbmc7XG4gICAgZmFpbD86IG51bWJlcjtcbn07XG5cbmV4cG9ydCB0eXBlIFBlcmZvcm1hbmNlRXZlbnRTdGFja2VkQ29udGV4dCA9IFBlcmZvcm1hbmNlRXZlbnRDb250ZXh0ICYge1xuICAgIG5hbWU/OiBzdHJpbmc7XG4gICAgY2hpbGRFcnI/OiBzdHJpbmc7XG59O1xuXG5leHBvcnQgY29uc3QgSW50RmllbGRzOiBSZWFkb25seVNldDxzdHJpbmc+ID0gbmV3IFNldChbXG4gICAgXCJhY2Nlc3NUb2tlblNpemVcIixcbiAgICBcImR1cmF0aW9uTXNcIixcbiAgICBcImlkVG9rZW5TaXplXCIsXG4gICAgXCJtYXRzU2lsZW50U3RhdHVzXCIsXG4gICAgXCJtYXRzSHR0cFN0YXR1c1wiLFxuICAgIFwicmVmcmVzaFRva2VuU2l6ZVwiLFxuICAgIFwicXVldWVkVGltZU1zXCIsXG4gICAgXCJzdGFydFRpbWVNc1wiLFxuICAgIFwic3RhdHVzXCIsXG4gICAgXCJtdWx0aU1hdGNoZWRBVFwiLFxuICAgIFwibXVsdGlNYXRjaGVkSURcIixcbiAgICBcIm11bHRpTWF0Y2hlZFJUXCIsXG4gICAgXCJ1bmVuY3J5cHRlZENhY2hlQ291bnRcIixcbiAgICBcImVuY3J5cHRlZENhY2hlRXhwaXJlZENvdW50XCIsXG5dKTtcbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4uL2xvZ2dlci9Mb2dnZXIuanNcIjtcbmltcG9ydCB7IElQZXJmb3JtYW5jZUNsaWVudCB9IGZyb20gXCIuLi90ZWxlbWV0cnkvcGVyZm9ybWFuY2UvSVBlcmZvcm1hbmNlQ2xpZW50LmpzXCI7XG5cbi8qKlxuICogV3JhcHMgYSBmdW5jdGlvbiB3aXRoIGEgcGVyZm9ybWFuY2UgbWVhc3VyZW1lbnQuXG4gKiBVc2FnZTogaW52b2tlKGZ1bmN0aW9uVG9DYWxsLCBwZXJmb3JtYW5jZUNsaWVudCwgXCJFdmVudE5hbWVcIiwgXCJjb3JyZWxhdGlvbklkXCIpKC4uLmFyZ3NUb1Bhc3NUb0Z1bmN0aW9uKVxuICogQHBhcmFtIGNhbGxiYWNrXG4gKiBAcGFyYW0gZXZlbnROYW1lXG4gKiBAcGFyYW0gbG9nZ2VyXG4gKiBAcGFyYW0gdGVsZW1ldHJ5Q2xpZW50XG4gKiBAcGFyYW0gY29ycmVsYXRpb25JZFxuICogQHJldHVybnNcbiAqIEBpbnRlcm5hbFxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZXhwb3J0IGNvbnN0IGludm9rZSA9IDxUIGV4dGVuZHMgQXJyYXk8YW55PiwgVT4oXG4gICAgY2FsbGJhY2s6ICguLi5hcmdzOiBUKSA9PiBVLFxuICAgIGV2ZW50TmFtZTogc3RyaW5nLFxuICAgIGxvZ2dlcjogTG9nZ2VyLFxuICAgIHRlbGVtZXRyeUNsaWVudD86IElQZXJmb3JtYW5jZUNsaWVudCxcbiAgICBjb3JyZWxhdGlvbklkPzogc3RyaW5nXG4pID0+IHtcbiAgICByZXR1cm4gKC4uLmFyZ3M6IFQpOiBVID0+IHtcbiAgICAgICAgbG9nZ2VyLnRyYWNlKGBFeGVjdXRpbmcgZnVuY3Rpb24gJHtldmVudE5hbWV9YCk7XG4gICAgICAgIGNvbnN0IGluUHJvZ3Jlc3NFdmVudCA9IHRlbGVtZXRyeUNsaWVudD8uc3RhcnRNZWFzdXJlbWVudChcbiAgICAgICAgICAgIGV2ZW50TmFtZSxcbiAgICAgICAgICAgIGNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGNvcnJlbGF0aW9uSWQpIHtcbiAgICAgICAgICAgIC8vIFRyYWNrIG51bWJlciBvZiB0aW1lcyB0aGlzIEFQSSBpcyBjYWxsZWQgaW4gYSBzaW5nbGUgcmVxdWVzdFxuICAgICAgICAgICAgY29uc3QgZXZlbnRDb3VudCA9IGV2ZW50TmFtZSArIFwiQ2FsbENvdW50XCI7XG4gICAgICAgICAgICB0ZWxlbWV0cnlDbGllbnQ/LmluY3JlbWVudEZpZWxkcyhcbiAgICAgICAgICAgICAgICB7IFtldmVudENvdW50XTogMSB9LFxuICAgICAgICAgICAgICAgIGNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGNhbGxiYWNrKC4uLmFyZ3MpO1xuICAgICAgICAgICAgaW5Qcm9ncmVzc0V2ZW50Py5lbmQoe1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxvZ2dlci50cmFjZShgUmV0dXJuaW5nIHJlc3VsdCBmcm9tICR7ZXZlbnROYW1lfWApO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgbG9nZ2VyLnRyYWNlKGBFcnJvciBvY2N1cnJlZCBpbiAke2V2ZW50TmFtZX1gKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLnRyYWNlKEpTT04uc3RyaW5naWZ5KGUpKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIudHJhY2UoXCJVbmFibGUgdG8gcHJpbnQgZXJyb3IgbWVzc2FnZS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpblByb2dyZXNzRXZlbnQ/LmVuZChcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICB9O1xufTtcblxuLyoqXG4gKiBXcmFwcyBhbiBhc3luYyBmdW5jdGlvbiB3aXRoIGEgcGVyZm9ybWFuY2UgbWVhc3VyZW1lbnQuXG4gKiBVc2FnZTogaW52b2tlQXN5bmMoZnVuY3Rpb25Ub0NhbGwsIHBlcmZvcm1hbmNlQ2xpZW50LCBcIkV2ZW50TmFtZVwiLCBcImNvcnJlbGF0aW9uSWRcIikoLi4uYXJnc1RvUGFzc1RvRnVuY3Rpb24pXG4gKiBAcGFyYW0gY2FsbGJhY2tcbiAqIEBwYXJhbSBldmVudE5hbWVcbiAqIEBwYXJhbSBsb2dnZXJcbiAqIEBwYXJhbSB0ZWxlbWV0cnlDbGllbnRcbiAqIEBwYXJhbSBjb3JyZWxhdGlvbklkXG4gKiBAcmV0dXJuc1xuICogQGludGVybmFsXG4gKlxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZXhwb3J0IGNvbnN0IGludm9rZUFzeW5jID0gPFQgZXh0ZW5kcyBBcnJheTxhbnk+LCBVPihcbiAgICBjYWxsYmFjazogKC4uLmFyZ3M6IFQpID0+IFByb21pc2U8VT4sXG4gICAgZXZlbnROYW1lOiBzdHJpbmcsXG4gICAgbG9nZ2VyOiBMb2dnZXIsXG4gICAgdGVsZW1ldHJ5Q2xpZW50PzogSVBlcmZvcm1hbmNlQ2xpZW50LFxuICAgIGNvcnJlbGF0aW9uSWQ/OiBzdHJpbmdcbikgPT4ge1xuICAgIHJldHVybiAoLi4uYXJnczogVCk6IFByb21pc2U8VT4gPT4ge1xuICAgICAgICBsb2dnZXIudHJhY2UoYEV4ZWN1dGluZyBmdW5jdGlvbiAke2V2ZW50TmFtZX1gKTtcbiAgICAgICAgY29uc3QgaW5Qcm9ncmVzc0V2ZW50ID0gdGVsZW1ldHJ5Q2xpZW50Py5zdGFydE1lYXN1cmVtZW50KFxuICAgICAgICAgICAgZXZlbnROYW1lLFxuICAgICAgICAgICAgY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuICAgICAgICBpZiAoY29ycmVsYXRpb25JZCkge1xuICAgICAgICAgICAgLy8gVHJhY2sgbnVtYmVyIG9mIHRpbWVzIHRoaXMgQVBJIGlzIGNhbGxlZCBpbiBhIHNpbmdsZSByZXF1ZXN0XG4gICAgICAgICAgICBjb25zdCBldmVudENvdW50ID0gZXZlbnROYW1lICsgXCJDYWxsQ291bnRcIjtcbiAgICAgICAgICAgIHRlbGVtZXRyeUNsaWVudD8uaW5jcmVtZW50RmllbGRzKFxuICAgICAgICAgICAgICAgIHsgW2V2ZW50Q291bnRdOiAxIH0sXG4gICAgICAgICAgICAgICAgY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB0ZWxlbWV0cnlDbGllbnQ/LnNldFByZVF1ZXVlVGltZShldmVudE5hbWUsIGNvcnJlbGF0aW9uSWQpO1xuICAgICAgICByZXR1cm4gY2FsbGJhY2soLi4uYXJncylcbiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgIGxvZ2dlci50cmFjZShgUmV0dXJuaW5nIHJlc3VsdCBmcm9tICR7ZXZlbnROYW1lfWApO1xuICAgICAgICAgICAgICAgIGluUHJvZ3Jlc3NFdmVudD8uZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLnRyYWNlKGBFcnJvciBvY2N1cnJlZCBpbiAke2V2ZW50TmFtZX1gKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIudHJhY2UoSlNPTi5zdHJpbmdpZnkoZSkpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLnRyYWNlKFwiVW5hYmxlIHRvIHByaW50IGVycm9yIG1lc3NhZ2UuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpblByb2dyZXNzRXZlbnQ/LmVuZChcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9KTtcbiAgICB9O1xufTtcbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgSU5ldHdvcmtNb2R1bGUgfSBmcm9tIFwiLi4vbmV0d29yay9JTmV0d29ya01vZHVsZS5qc1wiO1xuaW1wb3J0IHsgTmV0d29ya1Jlc3BvbnNlIH0gZnJvbSBcIi4uL25ldHdvcmsvTmV0d29ya1Jlc3BvbnNlLmpzXCI7XG5pbXBvcnQgeyBJTURTQmFkUmVzcG9uc2UgfSBmcm9tIFwiLi4vcmVzcG9uc2UvSU1EU0JhZFJlc3BvbnNlLmpzXCI7XG5pbXBvcnQge1xuICAgIENvbnN0YW50cyxcbiAgICBSZWdpb25EaXNjb3ZlcnlTb3VyY2VzLFxuICAgIFJlc3BvbnNlQ29kZXMsXG59IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcbmltcG9ydCB7IFJlZ2lvbkRpc2NvdmVyeU1ldGFkYXRhIH0gZnJvbSBcIi4vUmVnaW9uRGlzY292ZXJ5TWV0YWRhdGEuanNcIjtcbmltcG9ydCB7IEltZHNPcHRpb25zIH0gZnJvbSBcIi4vSW1kc09wdGlvbnMuanNcIjtcbmltcG9ydCB7IElQZXJmb3JtYW5jZUNsaWVudCB9IGZyb20gXCIuLi90ZWxlbWV0cnkvcGVyZm9ybWFuY2UvSVBlcmZvcm1hbmNlQ2xpZW50LmpzXCI7XG5pbXBvcnQgeyBQZXJmb3JtYW5jZUV2ZW50cyB9IGZyb20gXCIuLi90ZWxlbWV0cnkvcGVyZm9ybWFuY2UvUGVyZm9ybWFuY2VFdmVudC5qc1wiO1xuaW1wb3J0IHsgaW52b2tlQXN5bmMgfSBmcm9tIFwiLi4vdXRpbHMvRnVuY3Rpb25XcmFwcGVycy5qc1wiO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4uL2xvZ2dlci9Mb2dnZXIuanNcIjtcblxuZXhwb3J0IGNsYXNzIFJlZ2lvbkRpc2NvdmVyeSB7XG4gICAgLy8gTmV0d29yayBpbnRlcmZhY2UgdG8gbWFrZSByZXF1ZXN0cyB3aXRoLlxuICAgIHByb3RlY3RlZCBuZXR3b3JrSW50ZXJmYWNlOiBJTmV0d29ya01vZHVsZTtcbiAgICAvLyBMb2dnZXJcbiAgICBwcml2YXRlIGxvZ2dlcjogTG9nZ2VyO1xuICAgIC8vIFBlcmZvcm1hbmNlIGNsaWVudFxuICAgIHByb3RlY3RlZCBwZXJmb3JtYW5jZUNsaWVudDogSVBlcmZvcm1hbmNlQ2xpZW50IHwgdW5kZWZpbmVkO1xuICAgIC8vIENvcnJlbGF0aW9uSWRcbiAgICBwcm90ZWN0ZWQgY29ycmVsYXRpb25JZDogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgIC8vIE9wdGlvbnMgZm9yIHRoZSBJTURTIGVuZHBvaW50IHJlcXVlc3RcbiAgICBwcm90ZWN0ZWQgc3RhdGljIElNRFNfT1BUSU9OUzogSW1kc09wdGlvbnMgPSB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIE1ldGFkYXRhOiBcInRydWVcIixcbiAgICAgICAgfSxcbiAgICB9O1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIG5ldHdvcmtJbnRlcmZhY2U6IElOZXR3b3JrTW9kdWxlLFxuICAgICAgICBsb2dnZXI6IExvZ2dlcixcbiAgICAgICAgcGVyZm9ybWFuY2VDbGllbnQ/OiBJUGVyZm9ybWFuY2VDbGllbnQsXG4gICAgICAgIGNvcnJlbGF0aW9uSWQ/OiBzdHJpbmdcbiAgICApIHtcbiAgICAgICAgdGhpcy5uZXR3b3JrSW50ZXJmYWNlID0gbmV0d29ya0ludGVyZmFjZTtcbiAgICAgICAgdGhpcy5sb2dnZXIgPSBsb2dnZXI7XG4gICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQgPSBwZXJmb3JtYW5jZUNsaWVudDtcbiAgICAgICAgdGhpcy5jb3JyZWxhdGlvbklkID0gY29ycmVsYXRpb25JZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlY3QgdGhlIHJlZ2lvbiBmcm9tIHRoZSBhcHBsaWNhdGlvbidzIGVudmlyb25tZW50LlxuICAgICAqXG4gICAgICogQHJldHVybnMgUHJvbWlzZTxzdHJpbmcgfCBudWxsPlxuICAgICAqL1xuICAgIHB1YmxpYyBhc3luYyBkZXRlY3RSZWdpb24oXG4gICAgICAgIGVudmlyb25tZW50UmVnaW9uOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgICAgIHJlZ2lvbkRpc2NvdmVyeU1ldGFkYXRhOiBSZWdpb25EaXNjb3ZlcnlNZXRhZGF0YVxuICAgICk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50Py5hZGRRdWV1ZU1lYXN1cmVtZW50KFxuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuUmVnaW9uRGlzY292ZXJ5RGV0ZWN0UmVnaW9uLFxuICAgICAgICAgICAgdGhpcy5jb3JyZWxhdGlvbklkXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBhdXRvIGRldGVjdGVkIHJlZ2lvbiB3aXRoIHRoZSByZWdpb24gZnJvbSB0aGUgZW52cmlvbm1lbnRcbiAgICAgICAgbGV0IGF1dG9kZXRlY3RlZFJlZ2lvbk5hbWUgPSBlbnZpcm9ubWVudFJlZ2lvbjtcblxuICAgICAgICAvLyBDaGVjayBpZiBhIHJlZ2lvbiB3YXMgZGV0ZWN0ZWQgZnJvbSB0aGUgZW52aXJvbm1lbnQsIGlmIG5vdCwgYXR0ZW1wdCB0byBnZXQgdGhlIHJlZ2lvbiBmcm9tIElNRFNcbiAgICAgICAgaWYgKCFhdXRvZGV0ZWN0ZWRSZWdpb25OYW1lKSB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0gUmVnaW9uRGlzY292ZXJ5LklNRFNfT1BUSU9OUztcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbElNRFNWZXJzaW9uUmVzcG9uc2UgPSBhd2FpdCBpbnZva2VBc3luYyhcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRSZWdpb25Gcm9tSU1EUy5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5SZWdpb25EaXNjb3ZlcnlHZXRSZWdpb25Gcm9tSU1EUyxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgICAgICkoQ29uc3RhbnRzLklNRFNfVkVSU0lPTiwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBsb2NhbElNRFNWZXJzaW9uUmVzcG9uc2Uuc3RhdHVzID09PVxuICAgICAgICAgICAgICAgICAgICBSZXNwb25zZUNvZGVzLmh0dHBTdWNjZXNzXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGF1dG9kZXRlY3RlZFJlZ2lvbk5hbWUgPSBsb2NhbElNRFNWZXJzaW9uUmVzcG9uc2UuYm9keTtcbiAgICAgICAgICAgICAgICAgICAgcmVnaW9uRGlzY292ZXJ5TWV0YWRhdGEucmVnaW9uX3NvdXJjZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICBSZWdpb25EaXNjb3ZlcnlTb3VyY2VzLklNRFM7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIHJlc3BvbnNlIHVzaW5nIHRoZSBsb2NhbCBJTURTIHZlcnNpb24gZmFpbGVkLCB0cnkgdG8gZmV0Y2ggdGhlIGN1cnJlbnQgdmVyc2lvbiBvZiBJTURTIGFuZCByZXRyeS5cbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsSU1EU1ZlcnNpb25SZXNwb25zZS5zdGF0dXMgPT09XG4gICAgICAgICAgICAgICAgICAgIFJlc3BvbnNlQ29kZXMuaHR0cEJhZFJlcXVlc3RcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudElNRFNWZXJzaW9uID0gYXdhaXQgaW52b2tlQXN5bmMoXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEN1cnJlbnRWZXJzaW9uLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5SZWdpb25EaXNjb3ZlcnlHZXRDdXJyZW50VmVyc2lvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgICAgICAgICApKG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRJTURTVmVyc2lvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaW9uRGlzY292ZXJ5TWV0YWRhdGEucmVnaW9uX3NvdXJjZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVnaW9uRGlzY292ZXJ5U291cmNlcy5GQUlMRURfQVVUT19ERVRFQ1RJT047XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRJTURTVmVyc2lvblJlc3BvbnNlID0gYXdhaXQgaW52b2tlQXN5bmMoXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFJlZ2lvbkZyb21JTURTLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5SZWdpb25EaXNjb3ZlcnlHZXRSZWdpb25Gcm9tSU1EUyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgICAgICAgICApKGN1cnJlbnRJTURTVmVyc2lvbiwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJTURTVmVyc2lvblJlc3BvbnNlLnN0YXR1cyA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgIFJlc3BvbnNlQ29kZXMuaHR0cFN1Y2Nlc3NcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRvZGV0ZWN0ZWRSZWdpb25OYW1lID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SU1EU1ZlcnNpb25SZXNwb25zZS5ib2R5O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaW9uRGlzY292ZXJ5TWV0YWRhdGEucmVnaW9uX3NvdXJjZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVnaW9uRGlzY292ZXJ5U291cmNlcy5JTURTO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJlZ2lvbkRpc2NvdmVyeU1ldGFkYXRhLnJlZ2lvbl9zb3VyY2UgPVxuICAgICAgICAgICAgICAgICAgICBSZWdpb25EaXNjb3ZlcnlTb3VyY2VzLkZBSUxFRF9BVVRPX0RFVEVDVElPTjtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlZ2lvbkRpc2NvdmVyeU1ldGFkYXRhLnJlZ2lvbl9zb3VyY2UgPVxuICAgICAgICAgICAgICAgIFJlZ2lvbkRpc2NvdmVyeVNvdXJjZXMuRU5WSVJPTk1FTlRfVkFSSUFCTEU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiBubyByZWdpb24gd2FzIGF1dG8gZGV0ZWN0ZWQgZnJvbSB0aGUgZW52aXJvbm1lbnQgb3IgZnJvbSB0aGUgSU1EUyBlbmRwb2ludCwgbWFyayB0aGUgYXR0ZW1wdCBhcyBhIEZBSUxFRF9BVVRPX0RFVEVDVElPTlxuICAgICAgICBpZiAoIWF1dG9kZXRlY3RlZFJlZ2lvbk5hbWUpIHtcbiAgICAgICAgICAgIHJlZ2lvbkRpc2NvdmVyeU1ldGFkYXRhLnJlZ2lvbl9zb3VyY2UgPVxuICAgICAgICAgICAgICAgIFJlZ2lvbkRpc2NvdmVyeVNvdXJjZXMuRkFJTEVEX0FVVE9fREVURUNUSU9OO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGF1dG9kZXRlY3RlZFJlZ2lvbk5hbWUgfHwgbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYWtlIHRoZSBjYWxsIHRvIHRoZSBJTURTIGVuZHBvaW50XG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW1kc0VuZHBvaW50VXJsXG4gICAgICogQHJldHVybnMgUHJvbWlzZTxOZXR3b3JrUmVzcG9uc2U8c3RyaW5nPj5cbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGdldFJlZ2lvbkZyb21JTURTKFxuICAgICAgICB2ZXJzaW9uOiBzdHJpbmcsXG4gICAgICAgIG9wdGlvbnM6IEltZHNPcHRpb25zXG4gICAgKTogUHJvbWlzZTxOZXR3b3JrUmVzcG9uc2U8c3RyaW5nPj4ge1xuICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50Py5hZGRRdWV1ZU1lYXN1cmVtZW50KFxuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuUmVnaW9uRGlzY292ZXJ5R2V0UmVnaW9uRnJvbUlNRFMsXG4gICAgICAgICAgICB0aGlzLmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubmV0d29ya0ludGVyZmFjZS5zZW5kR2V0UmVxdWVzdEFzeW5jPHN0cmluZz4oXG4gICAgICAgICAgICBgJHtDb25zdGFudHMuSU1EU19FTkRQT0lOVH0/YXBpLXZlcnNpb249JHt2ZXJzaW9ufSZmb3JtYXQ9dGV4dGAsXG4gICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgQ29uc3RhbnRzLklNRFNfVElNRU9VVFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbW9zdCByZWNlbnQgdmVyc2lvbiBvZiB0aGUgSU1EUyBlbmRwb2ludCBhdmFpbGFibGVcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFByb21pc2U8c3RyaW5nIHwgbnVsbD5cbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGdldEN1cnJlbnRWZXJzaW9uKFxuICAgICAgICBvcHRpb25zOiBJbWRzT3B0aW9uc1xuICAgICk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50Py5hZGRRdWV1ZU1lYXN1cmVtZW50KFxuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuUmVnaW9uRGlzY292ZXJ5R2V0Q3VycmVudFZlcnNpb24sXG4gICAgICAgICAgICB0aGlzLmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID1cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm5ldHdvcmtJbnRlcmZhY2Uuc2VuZEdldFJlcXVlc3RBc3luYzxJTURTQmFkUmVzcG9uc2U+KFxuICAgICAgICAgICAgICAgICAgICBgJHtDb25zdGFudHMuSU1EU19FTkRQT0lOVH0/Zm9ybWF0PWpzb25gLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgLy8gV2hlbiBJTURTIGVuZHBvaW50IGlzIGNhbGxlZCB3aXRob3V0IHRoZSBhcGkgdmVyc2lvbiBxdWVyeSBwYXJhbSwgYmFkIHJlcXVlc3QgcmVzcG9uc2UgY29tZXMgYmFjayB3aXRoIGxhdGVzdCB2ZXJzaW9uLlxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnN0YXR1cyA9PT0gUmVzcG9uc2VDb2Rlcy5odHRwQmFkUmVxdWVzdCAmJlxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLmJvZHkgJiZcbiAgICAgICAgICAgICAgICByZXNwb25zZS5ib2R5W1wibmV3ZXN0LXZlcnNpb25zXCJdICYmXG4gICAgICAgICAgICAgICAgcmVzcG9uc2UuYm9keVtcIm5ld2VzdC12ZXJzaW9uc1wiXS5sZW5ndGggPiAwXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuYm9keVtcIm5ld2VzdC12ZXJzaW9uc1wiXVswXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBBdXRob3JpdHlUeXBlIH0gZnJvbSBcIi4vQXV0aG9yaXR5VHlwZS5qc1wiO1xuaW1wb3J0IHtcbiAgICBpc09wZW5JZENvbmZpZ1Jlc3BvbnNlLFxuICAgIE9wZW5JZENvbmZpZ1Jlc3BvbnNlLFxufSBmcm9tIFwiLi9PcGVuSWRDb25maWdSZXNwb25zZS5qc1wiO1xuaW1wb3J0IHsgVXJsU3RyaW5nIH0gZnJvbSBcIi4uL3VybC9VcmxTdHJpbmcuanNcIjtcbmltcG9ydCB7IElVcmkgfSBmcm9tIFwiLi4vdXJsL0lVcmkuanNcIjtcbmltcG9ydCB7XG4gICAgY3JlYXRlQ2xpZW50QXV0aEVycm9yLFxuICAgIENsaWVudEF1dGhFcnJvckNvZGVzLFxufSBmcm9tIFwiLi4vZXJyb3IvQ2xpZW50QXV0aEVycm9yLmpzXCI7XG5pbXBvcnQgeyBJTmV0d29ya01vZHVsZSB9IGZyb20gXCIuLi9uZXR3b3JrL0lOZXR3b3JrTW9kdWxlLmpzXCI7XG5pbXBvcnQge1xuICAgIEFBREF1dGhvcml0eUNvbnN0YW50cyxcbiAgICBBdXRob3JpdHlNZXRhZGF0YVNvdXJjZSxcbiAgICBDb25zdGFudHMsXG4gICAgUmVnaW9uRGlzY292ZXJ5T3V0Y29tZXMsXG59IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcbmltcG9ydCB7XG4gICAgRW5kcG9pbnRNZXRhZGF0YSxcbiAgICBnZXRDbG91ZERpc2NvdmVyeU1ldGFkYXRhRnJvbUhhcmRjb2RlZFZhbHVlcyxcbiAgICBnZXRDbG91ZERpc2NvdmVyeU1ldGFkYXRhRnJvbU5ldHdvcmtSZXNwb25zZSxcbiAgICBJbnN0YW5jZURpc2NvdmVyeU1ldGFkYXRhQWxpYXNlcyxcbn0gZnJvbSBcIi4vQXV0aG9yaXR5TWV0YWRhdGEuanNcIjtcbmltcG9ydCB7XG4gICAgY3JlYXRlQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yLFxuICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLFxufSBmcm9tIFwiLi4vZXJyb3IvQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yLmpzXCI7XG5pbXBvcnQgeyBQcm90b2NvbE1vZGUgfSBmcm9tIFwiLi9Qcm90b2NvbE1vZGUuanNcIjtcbmltcG9ydCB7IElDYWNoZU1hbmFnZXIgfSBmcm9tIFwiLi4vY2FjaGUvaW50ZXJmYWNlL0lDYWNoZU1hbmFnZXIuanNcIjtcbmltcG9ydCB7IEF1dGhvcml0eU1ldGFkYXRhRW50aXR5IH0gZnJvbSBcIi4uL2NhY2hlL2VudGl0aWVzL0F1dGhvcml0eU1ldGFkYXRhRW50aXR5LmpzXCI7XG5pbXBvcnQge1xuICAgIEF1dGhvcml0eU9wdGlvbnMsXG4gICAgQXp1cmVDbG91ZEluc3RhbmNlLFxuICAgIFN0YXRpY0F1dGhvcml0eU9wdGlvbnMsXG59IGZyb20gXCIuL0F1dGhvcml0eU9wdGlvbnMuanNcIjtcbmltcG9ydCB7XG4gICAgQ2xvdWRJbnN0YW5jZURpc2NvdmVyeVJlc3BvbnNlLFxuICAgIGlzQ2xvdWRJbnN0YW5jZURpc2NvdmVyeVJlc3BvbnNlLFxufSBmcm9tIFwiLi9DbG91ZEluc3RhbmNlRGlzY292ZXJ5UmVzcG9uc2UuanNcIjtcbmltcG9ydCB7XG4gICAgQ2xvdWRJbnN0YW5jZURpc2NvdmVyeUVycm9yUmVzcG9uc2UsXG4gICAgaXNDbG91ZEluc3RhbmNlRGlzY292ZXJ5RXJyb3JSZXNwb25zZSxcbn0gZnJvbSBcIi4vQ2xvdWRJbnN0YW5jZURpc2NvdmVyeUVycm9yUmVzcG9uc2UuanNcIjtcbmltcG9ydCB7IENsb3VkRGlzY292ZXJ5TWV0YWRhdGEgfSBmcm9tIFwiLi9DbG91ZERpc2NvdmVyeU1ldGFkYXRhLmpzXCI7XG5pbXBvcnQgeyBSZWdpb25EaXNjb3ZlcnkgfSBmcm9tIFwiLi9SZWdpb25EaXNjb3ZlcnkuanNcIjtcbmltcG9ydCB7IFJlZ2lvbkRpc2NvdmVyeU1ldGFkYXRhIH0gZnJvbSBcIi4vUmVnaW9uRGlzY292ZXJ5TWV0YWRhdGEuanNcIjtcbmltcG9ydCB7IEltZHNPcHRpb25zIH0gZnJvbSBcIi4vSW1kc09wdGlvbnMuanNcIjtcbmltcG9ydCB7IEF6dXJlQ2xvdWRPcHRpb25zIH0gZnJvbSBcIi4uL2NvbmZpZy9DbGllbnRDb25maWd1cmF0aW9uLmpzXCI7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiLi4vbG9nZ2VyL0xvZ2dlci5qc1wiO1xuaW1wb3J0IHsgQXV0aEVycm9yIH0gZnJvbSBcIi4uL2Vycm9yL0F1dGhFcnJvci5qc1wiO1xuaW1wb3J0IHsgSVBlcmZvcm1hbmNlQ2xpZW50IH0gZnJvbSBcIi4uL3RlbGVtZXRyeS9wZXJmb3JtYW5jZS9JUGVyZm9ybWFuY2VDbGllbnQuanNcIjtcbmltcG9ydCB7IFBlcmZvcm1hbmNlRXZlbnRzIH0gZnJvbSBcIi4uL3RlbGVtZXRyeS9wZXJmb3JtYW5jZS9QZXJmb3JtYW5jZUV2ZW50LmpzXCI7XG5pbXBvcnQgeyBpbnZva2VBc3luYyB9IGZyb20gXCIuLi91dGlscy9GdW5jdGlvbldyYXBwZXJzLmpzXCI7XG5pbXBvcnQgKiBhcyBDYWNoZUhlbHBlcnMgZnJvbSBcIi4uL2NhY2hlL3V0aWxzL0NhY2hlSGVscGVycy5qc1wiO1xuXG4vKipcbiAqIFRoZSBhdXRob3JpdHkgY2xhc3MgdmFsaWRhdGVzIHRoZSBhdXRob3JpdHkgVVJJcyB1c2VkIGJ5IHRoZSB1c2VyLCBhbmQgcmV0cmlldmVzIHRoZSBPcGVuSUQgQ29uZmlndXJhdGlvbiBEYXRhIGZyb20gdGhlXG4gKiBlbmRwb2ludC4gSXQgd2lsbCBzdG9yZSB0aGUgcGVydGluZW50IGNvbmZpZyBkYXRhIGluIHRoaXMgb2JqZWN0IGZvciB1c2UgZHVyaW5nIHRva2VuIGNhbGxzLlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBjbGFzcyBBdXRob3JpdHkge1xuICAgIC8vIENhbm9uaWNhbCBhdXRob3JpdHkgdXJsIHN0cmluZ1xuICAgIHByaXZhdGUgX2Nhbm9uaWNhbEF1dGhvcml0eTogVXJsU3RyaW5nO1xuICAgIC8vIENhbm9uaWNhbHkgYXV0aG9yaXR5IHVybCBjb21wb25lbnRzXG4gICAgcHJpdmF0ZSBfY2Fub25pY2FsQXV0aG9yaXR5VXJsQ29tcG9uZW50czogSVVyaSB8IG51bGw7XG4gICAgLy8gTmV0d29yayBpbnRlcmZhY2UgdG8gbWFrZSByZXF1ZXN0cyB3aXRoLlxuICAgIHByb3RlY3RlZCBuZXR3b3JrSW50ZXJmYWNlOiBJTmV0d29ya01vZHVsZTtcbiAgICAvLyBDYWNoZSBNYW5hZ2VyIHRvIGNhY2hlIG5ldHdvcmsgcmVzcG9uc2VzXG4gICAgcHJvdGVjdGVkIGNhY2hlTWFuYWdlcjogSUNhY2hlTWFuYWdlcjtcbiAgICAvLyBQcm90b2NvbCBtb2RlIHRvIGNvbnN0cnVjdCBlbmRwb2ludHNcbiAgICBwcml2YXRlIGF1dGhvcml0eU9wdGlvbnM6IEF1dGhvcml0eU9wdGlvbnM7XG4gICAgLy8gQXV0aG9yaXR5IG1ldGFkYXRhXG4gICAgcHJpdmF0ZSBtZXRhZGF0YTogQXV0aG9yaXR5TWV0YWRhdGFFbnRpdHk7XG4gICAgLy8gUmVnaW9uIGRpc2NvdmVyeSBzZXJ2aWNlXG4gICAgcHJpdmF0ZSByZWdpb25EaXNjb3Zlcnk6IFJlZ2lvbkRpc2NvdmVyeTtcbiAgICAvLyBSZWdpb24gZGlzY292ZXJ5IG1ldGFkYXRhXG4gICAgcHVibGljIHJlZ2lvbkRpc2NvdmVyeU1ldGFkYXRhOiBSZWdpb25EaXNjb3ZlcnlNZXRhZGF0YTtcbiAgICAvLyBMb2dnZXIgb2JqZWN0XG4gICAgcHJpdmF0ZSBsb2dnZXI6IExvZ2dlcjtcbiAgICAvLyBQZXJmb3JtYW5jZSBjbGllbnRcbiAgICBwcm90ZWN0ZWQgcGVyZm9ybWFuY2VDbGllbnQ6IElQZXJmb3JtYW5jZUNsaWVudCB8IHVuZGVmaW5lZDtcbiAgICAvLyBDb3JyZWxhdGlvbiBJZFxuICAgIHByb3RlY3RlZCBjb3JyZWxhdGlvbklkOiBzdHJpbmc7XG4gICAgLy8gSW5kaWNhdGVzIGlmIHRoZSBhdXRob3JpdHkgaXMgZmFrZSwgZm9yIHRoZSBwdXJwb3NlIG9mIGEgTWFuYWdlZCBJZGVudGl0eSBBcHBsaWNhdGlvblxuICAgIHByaXZhdGUgbWFuYWdlZElkZW50aXR5OiBib29sZWFuO1xuICAgIC8vIFJlc2VydmVkIHRlbmFudCBkb21haW4gbmFtZXMgdGhhdCB3aWxsIG5vdCBiZSByZXBsYWNlZCB3aXRoIHRlbmFudCBpZFxuICAgIHByaXZhdGUgc3RhdGljIHJlc2VydmVkVGVuYW50RG9tYWluczogU2V0PHN0cmluZz4gPSBuZXcgU2V0KFtcbiAgICAgICAgXCJ7dGVuYW50fVwiLFxuICAgICAgICBcInt0ZW5hbnRpZH1cIixcbiAgICAgICAgQUFEQXV0aG9yaXR5Q29uc3RhbnRzLkNPTU1PTixcbiAgICAgICAgQUFEQXV0aG9yaXR5Q29uc3RhbnRzLkNPTlNVTUVSUyxcbiAgICAgICAgQUFEQXV0aG9yaXR5Q29uc3RhbnRzLk9SR0FOSVpBVElPTlMsXG4gICAgXSk7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgYXV0aG9yaXR5OiBzdHJpbmcsXG4gICAgICAgIG5ldHdvcmtJbnRlcmZhY2U6IElOZXR3b3JrTW9kdWxlLFxuICAgICAgICBjYWNoZU1hbmFnZXI6IElDYWNoZU1hbmFnZXIsXG4gICAgICAgIGF1dGhvcml0eU9wdGlvbnM6IEF1dGhvcml0eU9wdGlvbnMsXG4gICAgICAgIGxvZ2dlcjogTG9nZ2VyLFxuICAgICAgICBjb3JyZWxhdGlvbklkOiBzdHJpbmcsXG4gICAgICAgIHBlcmZvcm1hbmNlQ2xpZW50PzogSVBlcmZvcm1hbmNlQ2xpZW50LFxuICAgICAgICBtYW5hZ2VkSWRlbnRpdHk/OiBib29sZWFuXG4gICAgKSB7XG4gICAgICAgIHRoaXMuY2Fub25pY2FsQXV0aG9yaXR5ID0gYXV0aG9yaXR5O1xuICAgICAgICB0aGlzLl9jYW5vbmljYWxBdXRob3JpdHkudmFsaWRhdGVBc1VyaSgpO1xuICAgICAgICB0aGlzLm5ldHdvcmtJbnRlcmZhY2UgPSBuZXR3b3JrSW50ZXJmYWNlO1xuICAgICAgICB0aGlzLmNhY2hlTWFuYWdlciA9IGNhY2hlTWFuYWdlcjtcbiAgICAgICAgdGhpcy5hdXRob3JpdHlPcHRpb25zID0gYXV0aG9yaXR5T3B0aW9ucztcbiAgICAgICAgdGhpcy5yZWdpb25EaXNjb3ZlcnlNZXRhZGF0YSA9IHtcbiAgICAgICAgICAgIHJlZ2lvbl91c2VkOiB1bmRlZmluZWQsXG4gICAgICAgICAgICByZWdpb25fc291cmNlOiB1bmRlZmluZWQsXG4gICAgICAgICAgICByZWdpb25fb3V0Y29tZTogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmxvZ2dlciA9IGxvZ2dlcjtcbiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudCA9IHBlcmZvcm1hbmNlQ2xpZW50O1xuICAgICAgICB0aGlzLmNvcnJlbGF0aW9uSWQgPSBjb3JyZWxhdGlvbklkO1xuICAgICAgICB0aGlzLm1hbmFnZWRJZGVudGl0eSA9IG1hbmFnZWRJZGVudGl0eSB8fCBmYWxzZTtcbiAgICAgICAgdGhpcy5yZWdpb25EaXNjb3ZlcnkgPSBuZXcgUmVnaW9uRGlzY292ZXJ5KFxuICAgICAgICAgICAgbmV0d29ya0ludGVyZmFjZSxcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLFxuICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudCxcbiAgICAgICAgICAgIHRoaXMuY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB7QGxpbmsgQXV0aG9yaXR5VHlwZX1cbiAgICAgKiBAcGFyYW0gYXV0aG9yaXR5VXJpIHtAbGluayBJVXJpfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZXRBdXRob3JpdHlUeXBlKGF1dGhvcml0eVVyaTogSVVyaSk6IEF1dGhvcml0eVR5cGUge1xuICAgICAgICAvLyBDSUFNIGF1dGggdXJsIHBhdHRlcm4gaXMgYmVpbmcgc3RhbmRhcmRpemVkIGFzOiA8dGVuYW50Pi5jaWFtbG9naW4uY29tXG4gICAgICAgIGlmIChhdXRob3JpdHlVcmkuSG9zdE5hbWVBbmRQb3J0LmVuZHNXaXRoKENvbnN0YW50cy5DSUFNX0FVVEhfVVJMKSkge1xuICAgICAgICAgICAgcmV0dXJuIEF1dGhvcml0eVR5cGUuQ2lhbTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBhdGhTZWdtZW50cyA9IGF1dGhvcml0eVVyaS5QYXRoU2VnbWVudHM7XG4gICAgICAgIGlmIChwYXRoU2VnbWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHBhdGhTZWdtZW50c1swXS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBDb25zdGFudHMuQURGUzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEF1dGhvcml0eVR5cGUuQWRmcztcbiAgICAgICAgICAgICAgICBjYXNlIENvbnN0YW50cy5EU1RTOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXV0aG9yaXR5VHlwZS5Ec3RzO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBBdXRob3JpdHlUeXBlLkRlZmF1bHQ7XG4gICAgfVxuXG4gICAgLy8gU2VlIGFib3ZlIGZvciBBdXRob3JpdHlUeXBlXG4gICAgcHVibGljIGdldCBhdXRob3JpdHlUeXBlKCk6IEF1dGhvcml0eVR5cGUge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRBdXRob3JpdHlUeXBlKHRoaXMuY2Fub25pY2FsQXV0aG9yaXR5VXJsQ29tcG9uZW50cyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHJvdG9jb2xNb2RlIGVudW0gcmVwcmVzZW50aW5nIHRoZSB3YXkgZW5kcG9pbnRzIGFyZSBjb25zdHJ1Y3RlZC5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHByb3RvY29sTW9kZSgpOiBQcm90b2NvbE1vZGUge1xuICAgICAgICByZXR1cm4gdGhpcy5hdXRob3JpdHlPcHRpb25zLnByb3RvY29sTW9kZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGF1dGhvcml0eU9wdGlvbnMgd2hpY2ggY2FuIGJlIHVzZWQgdG8gcmVpbnN0YW50aWF0ZSBhIG5ldyBhdXRob3JpdHkgaW5zdGFuY2VcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IG9wdGlvbnMoKTogQXV0aG9yaXR5T3B0aW9ucyB7XG4gICAgICAgIHJldHVybiB0aGlzLmF1dGhvcml0eU9wdGlvbnM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBVUkwgdGhhdCBpcyB0aGUgYXV0aG9yaXR5IHNldCBieSB0aGUgZGV2ZWxvcGVyXG4gICAgICovXG4gICAgcHVibGljIGdldCBjYW5vbmljYWxBdXRob3JpdHkoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Nhbm9uaWNhbEF1dGhvcml0eS51cmxTdHJpbmc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyBjYW5vbmljYWwgYXV0aG9yaXR5LlxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgY2Fub25pY2FsQXV0aG9yaXR5KHVybDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuX2Nhbm9uaWNhbEF1dGhvcml0eSA9IG5ldyBVcmxTdHJpbmcodXJsKTtcbiAgICAgICAgdGhpcy5fY2Fub25pY2FsQXV0aG9yaXR5LnZhbGlkYXRlQXNVcmkoKTtcbiAgICAgICAgdGhpcy5fY2Fub25pY2FsQXV0aG9yaXR5VXJsQ29tcG9uZW50cyA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGF1dGhvcml0eSBjb21wb25lbnRzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgY2Fub25pY2FsQXV0aG9yaXR5VXJsQ29tcG9uZW50cygpOiBJVXJpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9jYW5vbmljYWxBdXRob3JpdHlVcmxDb21wb25lbnRzKSB7XG4gICAgICAgICAgICB0aGlzLl9jYW5vbmljYWxBdXRob3JpdHlVcmxDb21wb25lbnRzID1cbiAgICAgICAgICAgICAgICB0aGlzLl9jYW5vbmljYWxBdXRob3JpdHkuZ2V0VXJsQ29tcG9uZW50cygpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2Nhbm9uaWNhbEF1dGhvcml0eVVybENvbXBvbmVudHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGhvc3RuYW1lIGFuZCBwb3J0IGkuZS4gbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgaG9zdG5hbWVBbmRQb3J0KCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbm9uaWNhbEF1dGhvcml0eVVybENvbXBvbmVudHMuSG9zdE5hbWVBbmRQb3J0LnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRlbmFudCBmb3IgYXV0aG9yaXR5LlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgdGVuYW50KCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbm9uaWNhbEF1dGhvcml0eVVybENvbXBvbmVudHMuUGF0aFNlZ21lbnRzWzBdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9BdXRoIC9hdXRob3JpemUgZW5kcG9pbnQgZm9yIHJlcXVlc3RzXG4gICAgICovXG4gICAgcHVibGljIGdldCBhdXRob3JpemF0aW9uRW5kcG9pbnQoKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzY292ZXJ5Q29tcGxldGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVwbGFjZVBhdGgodGhpcy5tZXRhZGF0YS5hdXRob3JpemF0aW9uX2VuZHBvaW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihcbiAgICAgICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy5lbmRwb2ludFJlc29sdXRpb25FcnJvclxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9BdXRoIC90b2tlbiBlbmRwb2ludCBmb3IgcmVxdWVzdHNcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHRva2VuRW5kcG9pbnQoKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzY292ZXJ5Q29tcGxldGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVwbGFjZVBhdGgodGhpcy5tZXRhZGF0YS50b2tlbl9lbmRwb2ludCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuZW5kcG9pbnRSZXNvbHV0aW9uRXJyb3JcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IGRldmljZUNvZGVFbmRwb2ludCgpOiBzdHJpbmcge1xuICAgICAgICBpZiAodGhpcy5kaXNjb3ZlcnlDb21wbGV0ZSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXBsYWNlUGF0aChcbiAgICAgICAgICAgICAgICB0aGlzLm1ldGFkYXRhLnRva2VuX2VuZHBvaW50LnJlcGxhY2UoXCIvdG9rZW5cIiwgXCIvZGV2aWNlY29kZVwiKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihcbiAgICAgICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy5lbmRwb2ludFJlc29sdXRpb25FcnJvclxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9BdXRoIGxvZ291dCBlbmRwb2ludCBmb3IgcmVxdWVzdHNcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IGVuZFNlc3Npb25FbmRwb2ludCgpOiBzdHJpbmcge1xuICAgICAgICBpZiAodGhpcy5kaXNjb3ZlcnlDb21wbGV0ZSgpKSB7XG4gICAgICAgICAgICAvLyBST1BDIHBvbGljaWVzIG1heSBub3QgaGF2ZSBlbmRfc2Vzc2lvbl9lbmRwb2ludCBzZXRcbiAgICAgICAgICAgIGlmICghdGhpcy5tZXRhZGF0YS5lbmRfc2Vzc2lvbl9lbmRwb2ludCkge1xuICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuZW5kU2Vzc2lvbkVuZHBvaW50Tm90U3VwcG9ydGVkXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcGxhY2VQYXRoKHRoaXMubWV0YWRhdGEuZW5kX3Nlc3Npb25fZW5kcG9pbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKFxuICAgICAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT0F1dGggaXNzdWVyIGZvciByZXF1ZXN0c1xuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgc2VsZlNpZ25lZEp3dEF1ZGllbmNlKCk6IHN0cmluZyB7XG4gICAgICAgIGlmICh0aGlzLmRpc2NvdmVyeUNvbXBsZXRlKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcGxhY2VQYXRoKHRoaXMubWV0YWRhdGEuaXNzdWVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihcbiAgICAgICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy5lbmRwb2ludFJlc29sdXRpb25FcnJvclxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEp3a3NfdXJpIGZvciB0b2tlbiBzaWduaW5nIGtleXNcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IGp3a3NVcmkoKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzY292ZXJ5Q29tcGxldGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVwbGFjZVBhdGgodGhpcy5tZXRhZGF0YS5qd2tzX3VyaSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuZW5kcG9pbnRSZXNvbHV0aW9uRXJyb3JcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgZmxhZyBpbmRpY2F0aW5nIHRoYXQgdGVuYW50IG5hbWUgY2FuIGJlIHJlcGxhY2VkIGluIGF1dGhvcml0eSB7QGxpbmsgSVVyaX1cbiAgICAgKiBAcGFyYW0gYXV0aG9yaXR5VXJpIHtAbGluayBJVXJpfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcHJpdmF0ZSBjYW5SZXBsYWNlVGVuYW50KGF1dGhvcml0eVVyaTogSVVyaSk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgYXV0aG9yaXR5VXJpLlBhdGhTZWdtZW50cy5sZW5ndGggPT09IDEgJiZcbiAgICAgICAgICAgICFBdXRob3JpdHkucmVzZXJ2ZWRUZW5hbnREb21haW5zLmhhcyhcbiAgICAgICAgICAgICAgICBhdXRob3JpdHlVcmkuUGF0aFNlZ21lbnRzWzBdXG4gICAgICAgICAgICApICYmXG4gICAgICAgICAgICB0aGlzLmdldEF1dGhvcml0eVR5cGUoYXV0aG9yaXR5VXJpKSA9PT0gQXV0aG9yaXR5VHlwZS5EZWZhdWx0ICYmXG4gICAgICAgICAgICB0aGlzLnByb3RvY29sTW9kZSAhPT0gUHJvdG9jb2xNb2RlLk9JRENcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXBsYWNlcyB0ZW5hbnQgaW4gdXJsIHBhdGggd2l0aCBjdXJyZW50IHRlbmFudC4gRGVmYXVsdHMgdG8gY29tbW9uLlxuICAgICAqIEBwYXJhbSB1cmxTdHJpbmdcbiAgICAgKi9cbiAgICBwcml2YXRlIHJlcGxhY2VUZW5hbnQodXJsU3RyaW5nOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdXJsU3RyaW5nLnJlcGxhY2UoL3t0ZW5hbnR9fHt0ZW5hbnRpZH0vZywgdGhpcy50ZW5hbnQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlcGxhY2VzIHBhdGggc3VjaCBhcyB0ZW5hbnQgb3IgcG9saWN5IHdpdGggdGhlIGN1cnJlbnQgdGVuYW50IG9yIHBvbGljeS5cbiAgICAgKiBAcGFyYW0gdXJsU3RyaW5nXG4gICAgICovXG4gICAgcHJpdmF0ZSByZXBsYWNlUGF0aCh1cmxTdHJpbmc6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGxldCBlbmRwb2ludCA9IHVybFN0cmluZztcbiAgICAgICAgY29uc3QgY2FjaGVkQXV0aG9yaXR5VXJsID0gbmV3IFVybFN0cmluZyhcbiAgICAgICAgICAgIHRoaXMubWV0YWRhdGEuY2Fub25pY2FsX2F1dGhvcml0eVxuICAgICAgICApO1xuICAgICAgICBjb25zdCBjYWNoZWRBdXRob3JpdHlVcmxDb21wb25lbnRzID1cbiAgICAgICAgICAgIGNhY2hlZEF1dGhvcml0eVVybC5nZXRVcmxDb21wb25lbnRzKCk7XG4gICAgICAgIGNvbnN0IGNhY2hlZEF1dGhvcml0eVBhcnRzID0gY2FjaGVkQXV0aG9yaXR5VXJsQ29tcG9uZW50cy5QYXRoU2VnbWVudHM7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRBdXRob3JpdHlQYXJ0cyA9XG4gICAgICAgICAgICB0aGlzLmNhbm9uaWNhbEF1dGhvcml0eVVybENvbXBvbmVudHMuUGF0aFNlZ21lbnRzO1xuXG4gICAgICAgIGN1cnJlbnRBdXRob3JpdHlQYXJ0cy5mb3JFYWNoKChjdXJyZW50UGFydCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGxldCBjYWNoZWRQYXJ0ID0gY2FjaGVkQXV0aG9yaXR5UGFydHNbaW5kZXhdO1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGluZGV4ID09PSAwICYmXG4gICAgICAgICAgICAgICAgdGhpcy5jYW5SZXBsYWNlVGVuYW50KGNhY2hlZEF1dGhvcml0eVVybENvbXBvbmVudHMpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZW5hbnRJZCA9IG5ldyBVcmxTdHJpbmcoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWV0YWRhdGEuYXV0aG9yaXphdGlvbl9lbmRwb2ludFxuICAgICAgICAgICAgICAgICkuZ2V0VXJsQ29tcG9uZW50cygpLlBhdGhTZWdtZW50c1swXTtcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDaGVjayBpZiBBQUQgY2Fub25pY2FsIGF1dGhvcml0eSBjb250YWlucyB0ZW5hbnQgZG9tYWluIG5hbWUsIGZvciBleGFtcGxlIFwidGVzdGRvbWFpbi5vbm1pY3Jvc29mdC5jb21cIixcbiAgICAgICAgICAgICAgICAgKiBieSBjb21wYXJpbmcgaXRzIGZpcnN0IHBhdGggc2VnbWVudCB0byB0aGUgY29ycmVzcG9uZGluZyBhdXRob3JpemF0aW9uIGVuZHBvaW50IHBhdGggc2VnbWVudCwgd2hpY2ggaXNcbiAgICAgICAgICAgICAgICAgKiBhbHdheXMgcmVzb2x2ZWQgd2l0aCB0ZW5hbnQgaWQgYnkgT0lEQy5cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBpZiAoY2FjaGVkUGFydCAhPT0gdGVuYW50SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIudmVyYm9zZShcbiAgICAgICAgICAgICAgICAgICAgICAgIGBSZXBsYWNpbmcgdGVuYW50IGRvbWFpbiBuYW1lICR7Y2FjaGVkUGFydH0gd2l0aCBpZCAke3RlbmFudElkfWBcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVkUGFydCA9IHRlbmFudElkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjdXJyZW50UGFydCAhPT0gY2FjaGVkUGFydCkge1xuICAgICAgICAgICAgICAgIGVuZHBvaW50ID0gZW5kcG9pbnQucmVwbGFjZShcbiAgICAgICAgICAgICAgICAgICAgYC8ke2NhY2hlZFBhcnR9L2AsXG4gICAgICAgICAgICAgICAgICAgIGAvJHtjdXJyZW50UGFydH0vYFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0aGlzLnJlcGxhY2VUZW5hbnQoZW5kcG9pbnQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBkZWZhdWx0IG9wZW4gaWQgY29uZmlndXJhdGlvbiBlbmRwb2ludCBmb3IgYW55IGNhbm9uaWNhbCBhdXRob3JpdHkuXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGdldCBkZWZhdWx0T3BlbklkQ29uZmlndXJhdGlvbkVuZHBvaW50KCk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGNhbm9uaWNhbEF1dGhvcml0eUhvc3QgPSB0aGlzLmhvc3RuYW1lQW5kUG9ydDtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5jYW5vbmljYWxBdXRob3JpdHkuZW5kc1dpdGgoXCJ2Mi4wL1wiKSB8fFxuICAgICAgICAgICAgdGhpcy5hdXRob3JpdHlUeXBlID09PSBBdXRob3JpdHlUeXBlLkFkZnMgfHxcbiAgICAgICAgICAgICh0aGlzLnByb3RvY29sTW9kZSA9PT0gUHJvdG9jb2xNb2RlLk9JREMgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5pc0FsaWFzT2ZLbm93bk1pY3Jvc29mdEF1dGhvcml0eShjYW5vbmljYWxBdXRob3JpdHlIb3N0KSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gYCR7dGhpcy5jYW5vbmljYWxBdXRob3JpdHl9LndlbGwta25vd24vb3BlbmlkLWNvbmZpZ3VyYXRpb25gO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNhbm9uaWNhbEF1dGhvcml0eX12Mi4wLy53ZWxsLWtub3duL29wZW5pZC1jb25maWd1cmF0aW9uYDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBCb29sZWFuIHRoYXQgcmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0ZW5hbnQgZGlzY292ZXJ5IGhhcyBiZWVuIGNvbXBsZXRlZC5cbiAgICAgKi9cbiAgICBkaXNjb3ZlcnlDb21wbGV0ZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5tZXRhZGF0YTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtIGVuZHBvaW50IGRpc2NvdmVyeSB0byBkaXNjb3ZlciBhbGlhc2VzLCBwcmVmZXJyZWRfY2FjaGUsIHByZWZlcnJlZF9uZXR3b3JrXG4gICAgICogYW5kIHRoZSAvYXV0aG9yaXplLCAvdG9rZW4gYW5kIGxvZ291dCBlbmRwb2ludHMuXG4gICAgICovXG4gICAgcHVibGljIGFzeW5jIHJlc29sdmVFbmRwb2ludHNBc3luYygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudD8uYWRkUXVldWVNZWFzdXJlbWVudChcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkF1dGhvcml0eVJlc29sdmVFbmRwb2ludHNBc3luYyxcbiAgICAgICAgICAgIHRoaXMuY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IG1ldGFkYXRhRW50aXR5ID0gdGhpcy5nZXRDdXJyZW50TWV0YWRhdGFFbnRpdHkoKTtcblxuICAgICAgICBjb25zdCBjbG91ZERpc2NvdmVyeVNvdXJjZSA9IGF3YWl0IGludm9rZUFzeW5jKFxuICAgICAgICAgICAgdGhpcy51cGRhdGVDbG91ZERpc2NvdmVyeU1ldGFkYXRhLmJpbmQodGhpcyksXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5BdXRob3JpdHlVcGRhdGVDbG91ZERpc2NvdmVyeU1ldGFkYXRhLFxuICAgICAgICAgICAgdGhpcy5sb2dnZXIsXG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50LFxuICAgICAgICAgICAgdGhpcy5jb3JyZWxhdGlvbklkXG4gICAgICAgICkobWV0YWRhdGFFbnRpdHkpO1xuICAgICAgICB0aGlzLmNhbm9uaWNhbEF1dGhvcml0eSA9IHRoaXMuY2Fub25pY2FsQXV0aG9yaXR5LnJlcGxhY2UoXG4gICAgICAgICAgICB0aGlzLmhvc3RuYW1lQW5kUG9ydCxcbiAgICAgICAgICAgIG1ldGFkYXRhRW50aXR5LnByZWZlcnJlZF9uZXR3b3JrXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGVuZHBvaW50U291cmNlID0gYXdhaXQgaW52b2tlQXN5bmMoXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUVuZHBvaW50TWV0YWRhdGEuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkF1dGhvcml0eVVwZGF0ZUVuZHBvaW50TWV0YWRhdGEsXG4gICAgICAgICAgICB0aGlzLmxvZ2dlcixcbiAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQsXG4gICAgICAgICAgICB0aGlzLmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKShtZXRhZGF0YUVudGl0eSk7XG4gICAgICAgIHRoaXMudXBkYXRlQ2FjaGVkTWV0YWRhdGEobWV0YWRhdGFFbnRpdHksIGNsb3VkRGlzY292ZXJ5U291cmNlLCB7XG4gICAgICAgICAgICBzb3VyY2U6IGVuZHBvaW50U291cmNlLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudD8uYWRkRmllbGRzKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsb3VkRGlzY292ZXJ5U291cmNlOiBjbG91ZERpc2NvdmVyeVNvdXJjZSxcbiAgICAgICAgICAgICAgICBhdXRob3JpdHlFbmRwb2ludFNvdXJjZTogZW5kcG9pbnRTb3VyY2UsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGhpcy5jb3JyZWxhdGlvbklkXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBtZXRhZGF0YSBlbnRpdHkgZnJvbSBjYWNoZSBpZiBpdCBleGlzdHMsIG90aGVyd2lzZXIgcmV0dXJucyBhIG5ldyBtZXRhZGF0YSBlbnRpdHkgYnVpbHRcbiAgICAgKiBmcm9tIHRoZSBjb25maWd1cmVkIGNhbm9uaWNhbCBhdXRob3JpdHlcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIHByaXZhdGUgZ2V0Q3VycmVudE1ldGFkYXRhRW50aXR5KCk6IEF1dGhvcml0eU1ldGFkYXRhRW50aXR5IHtcbiAgICAgICAgbGV0IG1ldGFkYXRhRW50aXR5OiBBdXRob3JpdHlNZXRhZGF0YUVudGl0eSB8IG51bGwgPVxuICAgICAgICAgICAgdGhpcy5jYWNoZU1hbmFnZXIuZ2V0QXV0aG9yaXR5TWV0YWRhdGFCeUFsaWFzKHRoaXMuaG9zdG5hbWVBbmRQb3J0KTtcblxuICAgICAgICBpZiAoIW1ldGFkYXRhRW50aXR5KSB7XG4gICAgICAgICAgICBtZXRhZGF0YUVudGl0eSA9IHtcbiAgICAgICAgICAgICAgICBhbGlhc2VzOiBbXSxcbiAgICAgICAgICAgICAgICBwcmVmZXJyZWRfY2FjaGU6IHRoaXMuaG9zdG5hbWVBbmRQb3J0LFxuICAgICAgICAgICAgICAgIHByZWZlcnJlZF9uZXR3b3JrOiB0aGlzLmhvc3RuYW1lQW5kUG9ydCxcbiAgICAgICAgICAgICAgICBjYW5vbmljYWxfYXV0aG9yaXR5OiB0aGlzLmNhbm9uaWNhbEF1dGhvcml0eSxcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uX2VuZHBvaW50OiBcIlwiLFxuICAgICAgICAgICAgICAgIHRva2VuX2VuZHBvaW50OiBcIlwiLFxuICAgICAgICAgICAgICAgIGVuZF9zZXNzaW9uX2VuZHBvaW50OiBcIlwiLFxuICAgICAgICAgICAgICAgIGlzc3VlcjogXCJcIixcbiAgICAgICAgICAgICAgICBhbGlhc2VzRnJvbU5ldHdvcms6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVuZHBvaW50c0Zyb21OZXR3b3JrOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBleHBpcmVzQXQ6IENhY2hlSGVscGVycy5nZW5lcmF0ZUF1dGhvcml0eU1ldGFkYXRhRXhwaXJlc0F0KCksXG4gICAgICAgICAgICAgICAgandrc191cmk6IFwiXCIsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXRhZGF0YUVudGl0eTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIGNhY2hlZCBtZXRhZGF0YSBiYXNlZCBvbiBtZXRhZGF0YSBzb3VyY2UgYW5kIHNldHMgdGhlIGluc3RhbmNlJ3MgbWV0YWRhdGFcbiAgICAgKiBwcm9wZXJ0eSB0byB0aGUgc2FtZSB2YWx1ZVxuICAgICAqIEBwYXJhbSBtZXRhZGF0YUVudGl0eVxuICAgICAqIEBwYXJhbSBjbG91ZERpc2NvdmVyeVNvdXJjZVxuICAgICAqIEBwYXJhbSBlbmRwb2ludE1ldGFkYXRhUmVzdWx0XG4gICAgICovXG4gICAgcHJpdmF0ZSB1cGRhdGVDYWNoZWRNZXRhZGF0YShcbiAgICAgICAgbWV0YWRhdGFFbnRpdHk6IEF1dGhvcml0eU1ldGFkYXRhRW50aXR5LFxuICAgICAgICBjbG91ZERpc2NvdmVyeVNvdXJjZTogQXV0aG9yaXR5TWV0YWRhdGFTb3VyY2UgfCBudWxsLFxuICAgICAgICBlbmRwb2ludE1ldGFkYXRhUmVzdWx0OiB7XG4gICAgICAgICAgICBzb3VyY2U6IEF1dGhvcml0eU1ldGFkYXRhU291cmNlO1xuICAgICAgICAgICAgbWV0YWRhdGE/OiBPcGVuSWRDb25maWdSZXNwb25zZTtcbiAgICAgICAgfSB8IG51bGxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgY2xvdWREaXNjb3ZlcnlTb3VyY2UgIT09IEF1dGhvcml0eU1ldGFkYXRhU291cmNlLkNBQ0hFICYmXG4gICAgICAgICAgICBlbmRwb2ludE1ldGFkYXRhUmVzdWx0Py5zb3VyY2UgIT09IEF1dGhvcml0eU1ldGFkYXRhU291cmNlLkNBQ0hFXG4gICAgICAgICkge1xuICAgICAgICAgICAgLy8gUmVzZXQgdGhlIGV4cGlyYXRpb24gdGltZSB1bmxlc3MgYm90aCB2YWx1ZXMgY2FtZSBmcm9tIGEgc3VjY2Vzc2Z1bCBjYWNoZSBsb29rdXBcbiAgICAgICAgICAgIG1ldGFkYXRhRW50aXR5LmV4cGlyZXNBdCA9XG4gICAgICAgICAgICAgICAgQ2FjaGVIZWxwZXJzLmdlbmVyYXRlQXV0aG9yaXR5TWV0YWRhdGFFeHBpcmVzQXQoKTtcbiAgICAgICAgICAgIG1ldGFkYXRhRW50aXR5LmNhbm9uaWNhbF9hdXRob3JpdHkgPSB0aGlzLmNhbm9uaWNhbEF1dGhvcml0eTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNhY2hlS2V5ID0gdGhpcy5jYWNoZU1hbmFnZXIuZ2VuZXJhdGVBdXRob3JpdHlNZXRhZGF0YUNhY2hlS2V5KFxuICAgICAgICAgICAgbWV0YWRhdGFFbnRpdHkucHJlZmVycmVkX2NhY2hlXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuY2FjaGVNYW5hZ2VyLnNldEF1dGhvcml0eU1ldGFkYXRhKGNhY2hlS2V5LCBtZXRhZGF0YUVudGl0eSk7XG4gICAgICAgIHRoaXMubWV0YWRhdGEgPSBtZXRhZGF0YUVudGl0eTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgQXV0aG9yaXR5TWV0YWRhdGFFbnRpdHkgd2l0aCBuZXcgZW5kcG9pbnRzIGFuZCByZXR1cm4gd2hlcmUgdGhlIGluZm9ybWF0aW9uIGNhbWUgZnJvbVxuICAgICAqIEBwYXJhbSBtZXRhZGF0YUVudGl0eVxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgdXBkYXRlRW5kcG9pbnRNZXRhZGF0YShcbiAgICAgICAgbWV0YWRhdGFFbnRpdHk6IEF1dGhvcml0eU1ldGFkYXRhRW50aXR5XG4gICAgKTogUHJvbWlzZTxBdXRob3JpdHlNZXRhZGF0YVNvdXJjZT4ge1xuICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50Py5hZGRRdWV1ZU1lYXN1cmVtZW50KFxuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuQXV0aG9yaXR5VXBkYXRlRW5kcG9pbnRNZXRhZGF0YSxcbiAgICAgICAgICAgIHRoaXMuY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGxvY2FsTWV0YWRhdGEgPVxuICAgICAgICAgICAgdGhpcy51cGRhdGVFbmRwb2ludE1ldGFkYXRhRnJvbUxvY2FsU291cmNlcyhtZXRhZGF0YUVudGl0eSk7XG5cbiAgICAgICAgLy8gRnVydGhlciB1cGRhdGUgbWF5IGJlIHJlcXVpcmVkIGZvciBoYXJkY29kZWQgbWV0YWRhdGEgaWYgcmVnaW9uYWwgbWV0YWRhdGEgaXMgcHJlZmVycmVkXG4gICAgICAgIGlmIChsb2NhbE1ldGFkYXRhKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgbG9jYWxNZXRhZGF0YS5zb3VyY2UgPT09XG4gICAgICAgICAgICAgICAgQXV0aG9yaXR5TWV0YWRhdGFTb3VyY2UuSEFSRENPREVEX1ZBTFVFU1xuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIHVzZXIgcHJlZmVycyB0byB1c2UgYW4gYXp1cmUgcmVnaW9uIHJlcGxhY2UgdGhlIGdsb2JhbCBlbmRwb2ludHMgd2l0aCByZWdpb25hbCBpbmZvcm1hdGlvbi5cbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXV0aG9yaXR5T3B0aW9ucy5henVyZVJlZ2lvbkNvbmZpZ3VyYXRpb24/LmF6dXJlUmVnaW9uXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsb2NhbE1ldGFkYXRhLm1ldGFkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoYXJkY29kZWRNZXRhZGF0YSA9IGF3YWl0IGludm9rZUFzeW5jKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTWV0YWRhdGFXaXRoUmVnaW9uYWxJbmZvcm1hdGlvbi5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5BdXRob3JpdHlVcGRhdGVNZXRhZGF0YVdpdGhSZWdpb25hbEluZm9ybWF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3JyZWxhdGlvbklkXG4gICAgICAgICAgICAgICAgICAgICAgICApKGxvY2FsTWV0YWRhdGEubWV0YWRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgQ2FjaGVIZWxwZXJzLnVwZGF0ZUF1dGhvcml0eUVuZHBvaW50TWV0YWRhdGEoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGFFbnRpdHksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFyZGNvZGVkTWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YUVudGl0eS5jYW5vbmljYWxfYXV0aG9yaXR5ID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbm9uaWNhbEF1dGhvcml0eTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBsb2NhbE1ldGFkYXRhLnNvdXJjZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEdldCBtZXRhZGF0YSBmcm9tIG5ldHdvcmsgaWYgbG9jYWwgc291cmNlcyBhcmVuJ3QgYXZhaWxhYmxlXG4gICAgICAgIGxldCBtZXRhZGF0YSA9IGF3YWl0IGludm9rZUFzeW5jKFxuICAgICAgICAgICAgdGhpcy5nZXRFbmRwb2ludE1ldGFkYXRhRnJvbU5ldHdvcmsuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkF1dGhvcml0eUdldEVuZHBvaW50TWV0YWRhdGFGcm9tTmV0d29yayxcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLFxuICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudCxcbiAgICAgICAgICAgIHRoaXMuY29ycmVsYXRpb25JZFxuICAgICAgICApKCk7XG4gICAgICAgIGlmIChtZXRhZGF0YSkge1xuICAgICAgICAgICAgLy8gSWYgdGhlIHVzZXIgcHJlZmVycyB0byB1c2UgYW4gYXp1cmUgcmVnaW9uIHJlcGxhY2UgdGhlIGdsb2JhbCBlbmRwb2ludHMgd2l0aCByZWdpb25hbCBpbmZvcm1hdGlvbi5cbiAgICAgICAgICAgIGlmICh0aGlzLmF1dGhvcml0eU9wdGlvbnMuYXp1cmVSZWdpb25Db25maWd1cmF0aW9uPy5henVyZVJlZ2lvbikge1xuICAgICAgICAgICAgICAgIG1ldGFkYXRhID0gYXdhaXQgaW52b2tlQXN5bmMoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTWV0YWRhdGFXaXRoUmVnaW9uYWxJbmZvcm1hdGlvbi5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5BdXRob3JpdHlVcGRhdGVNZXRhZGF0YVdpdGhSZWdpb25hbEluZm9ybWF0aW9uLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlcixcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudCxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3JyZWxhdGlvbklkXG4gICAgICAgICAgICAgICAgKShtZXRhZGF0YSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIENhY2hlSGVscGVycy51cGRhdGVBdXRob3JpdHlFbmRwb2ludE1ldGFkYXRhKFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhRW50aXR5LFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhLFxuICAgICAgICAgICAgICAgIHRydWVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm4gQXV0aG9yaXR5TWV0YWRhdGFTb3VyY2UuTkVUV09SSztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE1ldGFkYXRhIGNvdWxkIG5vdCBiZSBvYnRhaW5lZCBmcm9tIHRoZSBjb25maWcsIGNhY2hlLCBuZXR3b3JrIG9yIGhhcmRjb2RlZCB2YWx1ZXNcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihcbiAgICAgICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy5vcGVuSWRDb25maWdFcnJvcixcbiAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHRPcGVuSWRDb25maWd1cmF0aW9uRW5kcG9pbnRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIGVuZHBvaW50IG1ldGFkYXRhIGZyb20gbG9jYWwgc291cmNlcyBhbmQgcmV0dXJucyB3aGVyZSB0aGUgaW5mb3JtYXRpb24gd2FzIHJldHJpZXZlZCBmcm9tIGFuZCB0aGUgbWV0YWRhdGEgY29uZmlnXG4gICAgICogcmVzcG9uc2UgaWYgdGhlIHNvdXJjZSBpcyBoYXJkY29kZWQgbWV0YWRhdGFcbiAgICAgKiBAcGFyYW0gbWV0YWRhdGFFbnRpdHlcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIHByaXZhdGUgdXBkYXRlRW5kcG9pbnRNZXRhZGF0YUZyb21Mb2NhbFNvdXJjZXMoXG4gICAgICAgIG1ldGFkYXRhRW50aXR5OiBBdXRob3JpdHlNZXRhZGF0YUVudGl0eVxuICAgICk6IHtcbiAgICAgICAgc291cmNlOiBBdXRob3JpdHlNZXRhZGF0YVNvdXJjZTtcbiAgICAgICAgbWV0YWRhdGE/OiBPcGVuSWRDb25maWdSZXNwb25zZTtcbiAgICB9IHwgbnVsbCB7XG4gICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICBcIkF0dGVtcHRpbmcgdG8gZ2V0IGVuZHBvaW50IG1ldGFkYXRhIGZyb20gYXV0aG9yaXR5IGNvbmZpZ3VyYXRpb25cIlxuICAgICAgICApO1xuICAgICAgICBjb25zdCBjb25maWdNZXRhZGF0YSA9IHRoaXMuZ2V0RW5kcG9pbnRNZXRhZGF0YUZyb21Db25maWcoKTtcbiAgICAgICAgaWYgKGNvbmZpZ01ldGFkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFxuICAgICAgICAgICAgICAgIFwiRm91bmQgZW5kcG9pbnQgbWV0YWRhdGEgaW4gYXV0aG9yaXR5IGNvbmZpZ3VyYXRpb25cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIENhY2hlSGVscGVycy51cGRhdGVBdXRob3JpdHlFbmRwb2ludE1ldGFkYXRhKFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhRW50aXR5LFxuICAgICAgICAgICAgICAgIGNvbmZpZ01ldGFkYXRhLFxuICAgICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzb3VyY2U6IEF1dGhvcml0eU1ldGFkYXRhU291cmNlLkNPTkZJRyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFxuICAgICAgICAgICAgXCJEaWQgbm90IGZpbmQgZW5kcG9pbnQgbWV0YWRhdGEgaW4gdGhlIGNvbmZpZy4uLiBBdHRlbXB0aW5nIHRvIGdldCBlbmRwb2ludCBtZXRhZGF0YSBmcm9tIHRoZSBoYXJkY29kZWQgdmFsdWVzLlwiXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gc2tpcEF1dGhvcml0eU1ldGFkYXRhQ2FjaGUgaXMgdXNlZCB0byBieXBhc3MgaGFyZGNvZGVkIGF1dGhvcml0eSBtZXRhZGF0YSBhbmQgZm9yY2UgYSBuZXR3b3JrIG1ldGFkYXRhIGNhY2hlIGxvb2t1cCBhbmQgbmV0d29yayBtZXRhZGF0YSByZXF1ZXN0IGlmIG5vIGNhY2hlZCByZXNwb25zZSBpcyBhdmFpbGFibGUuXG4gICAgICAgIGlmICh0aGlzLmF1dGhvcml0eU9wdGlvbnMuc2tpcEF1dGhvcml0eU1ldGFkYXRhQ2FjaGUpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgXCJTa2lwcGluZyBoYXJkY29kZWQgbWV0YWRhdGEgY2FjaGUgc2luY2Ugc2tpcEF1dGhvcml0eU1ldGFkYXRhQ2FjaGUgaXMgc2V0IHRvIHRydWUuIEF0dGVtcHRpbmcgdG8gZ2V0IGVuZHBvaW50IG1ldGFkYXRhIGZyb20gdGhlIG5ldHdvcmsgbWV0YWRhdGEgY2FjaGUuXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBoYXJkY29kZWRNZXRhZGF0YSA9XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRFbmRwb2ludE1ldGFkYXRhRnJvbUhhcmRjb2RlZFZhbHVlcygpO1xuICAgICAgICAgICAgaWYgKGhhcmRjb2RlZE1ldGFkYXRhKSB7XG4gICAgICAgICAgICAgICAgQ2FjaGVIZWxwZXJzLnVwZGF0ZUF1dGhvcml0eUVuZHBvaW50TWV0YWRhdGEoXG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhRW50aXR5LFxuICAgICAgICAgICAgICAgICAgICBoYXJkY29kZWRNZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogQXV0aG9yaXR5TWV0YWRhdGFTb3VyY2UuSEFSRENPREVEX1ZBTFVFUyxcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6IGhhcmRjb2RlZE1ldGFkYXRhLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgICAgIFwiRGlkIG5vdCBmaW5kIGVuZHBvaW50IG1ldGFkYXRhIGluIGhhcmRjb2RlZCB2YWx1ZXMuLi4gQXR0ZW1wdGluZyB0byBnZXQgZW5kcG9pbnQgbWV0YWRhdGEgZnJvbSB0aGUgbmV0d29yayBtZXRhZGF0YSBjYWNoZS5cIlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBjYWNoZWQgbWV0YWRhdGEgZW50aXR5IGV4cGlyYXRpb24gc3RhdHVzXG4gICAgICAgIGNvbnN0IG1ldGFkYXRhRW50aXR5RXhwaXJlZCA9XG4gICAgICAgICAgICBDYWNoZUhlbHBlcnMuaXNBdXRob3JpdHlNZXRhZGF0YUV4cGlyZWQobWV0YWRhdGFFbnRpdHkpO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLmlzQXV0aG9yaXR5U2FtZVR5cGUobWV0YWRhdGFFbnRpdHkpICYmXG4gICAgICAgICAgICBtZXRhZGF0YUVudGl0eS5lbmRwb2ludHNGcm9tTmV0d29yayAmJlxuICAgICAgICAgICAgIW1ldGFkYXRhRW50aXR5RXhwaXJlZFxuICAgICAgICApIHtcbiAgICAgICAgICAgIC8vIE5vIG5lZWQgdG8gdXBkYXRlXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFwiRm91bmQgZW5kcG9pbnQgbWV0YWRhdGEgaW4gdGhlIGNhY2hlLlwiKTtcbiAgICAgICAgICAgIHJldHVybiB7IHNvdXJjZTogQXV0aG9yaXR5TWV0YWRhdGFTb3VyY2UuQ0FDSEUgfTtcbiAgICAgICAgfSBlbHNlIGlmIChtZXRhZGF0YUVudGl0eUV4cGlyZWQpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXCJUaGUgbWV0YWRhdGEgZW50aXR5IGlzIGV4cGlyZWQuXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29tcGFyZXMgdGhlIG51bWJlciBvZiB1cmwgY29tcG9uZW50cyBhZnRlciB0aGUgZG9tYWluIHRvIGRldGVybWluZSBpZiB0aGUgY2FjaGVkXG4gICAgICogYXV0aG9yaXR5IG1ldGFkYXRhIGNhbiBiZSB1c2VkIGZvciB0aGUgcmVxdWVzdGVkIGF1dGhvcml0eS4gUHJvdGVjdHMgYWdhaW5zdCBzYW1lIGRvbWFpbiBkaWZmZXJlbnRcbiAgICAgKiBhdXRob3JpdHkgc3VjaCBhcyBsb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tL3RlbmFudCBhbmQgbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbS90ZnAvdGVuYW50L3BvbGljeVxuICAgICAqIEBwYXJhbSBtZXRhZGF0YUVudGl0eVxuICAgICAqL1xuICAgIHByaXZhdGUgaXNBdXRob3JpdHlTYW1lVHlwZShcbiAgICAgICAgbWV0YWRhdGFFbnRpdHk6IEF1dGhvcml0eU1ldGFkYXRhRW50aXR5XG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGNhY2hlZEF1dGhvcml0eVVybCA9IG5ldyBVcmxTdHJpbmcoXG4gICAgICAgICAgICBtZXRhZGF0YUVudGl0eS5jYW5vbmljYWxfYXV0aG9yaXR5XG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGNhY2hlZFBhcnRzID0gY2FjaGVkQXV0aG9yaXR5VXJsLmdldFVybENvbXBvbmVudHMoKS5QYXRoU2VnbWVudHM7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIGNhY2hlZFBhcnRzLmxlbmd0aCA9PT1cbiAgICAgICAgICAgIHRoaXMuY2Fub25pY2FsQXV0aG9yaXR5VXJsQ29tcG9uZW50cy5QYXRoU2VnbWVudHMubGVuZ3RoXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyc2UgYXV0aG9yaXR5TWV0YWRhdGEgY29uZmlnIG9wdGlvblxuICAgICAqL1xuICAgIHByaXZhdGUgZ2V0RW5kcG9pbnRNZXRhZGF0YUZyb21Db25maWcoKTogT3BlbklkQ29uZmlnUmVzcG9uc2UgfCBudWxsIHtcbiAgICAgICAgaWYgKHRoaXMuYXV0aG9yaXR5T3B0aW9ucy5hdXRob3JpdHlNZXRhZGF0YSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdXRob3JpdHlPcHRpb25zLmF1dGhvcml0eU1ldGFkYXRhXG4gICAgICAgICAgICAgICAgKSBhcyBPcGVuSWRDb25maWdSZXNwb25zZTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRDb25maWd1cmF0aW9uRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmludmFsaWRBdXRob3JpdHlNZXRhZGF0YVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIE9BdXRoIGVuZHBvaW50cyBmcm9tIHRoZSBnaXZlbiBPcGVuSUQgY29uZmlndXJhdGlvbiBlbmRwb2ludC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBoYXNIYXJkY29kZWRNZXRhZGF0YSBib29sZWFuXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBnZXRFbmRwb2ludE1ldGFkYXRhRnJvbU5ldHdvcmsoKTogUHJvbWlzZTxPcGVuSWRDb25maWdSZXNwb25zZSB8IG51bGw+IHtcbiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudD8uYWRkUXVldWVNZWFzdXJlbWVudChcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkF1dGhvcml0eUdldEVuZHBvaW50TWV0YWRhdGFGcm9tTmV0d29yayxcbiAgICAgICAgICAgIHRoaXMuY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IG9wdGlvbnM6IEltZHNPcHRpb25zID0ge307XG5cbiAgICAgICAgLypcbiAgICAgICAgICogVE9ETzogQWRkIGEgdGltZW91dCBpZiB0aGUgYXV0aG9yaXR5IGV4aXN0cyBpbiBvdXIgbGlicmFyeSdzXG4gICAgICAgICAqIGhhcmRjb2RlZCBsaXN0IG9mIG1ldGFkYXRhXG4gICAgICAgICAqL1xuXG4gICAgICAgIGNvbnN0IG9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludCA9XG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRPcGVuSWRDb25maWd1cmF0aW9uRW5kcG9pbnQ7XG4gICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICBgQXV0aG9yaXR5LmdldEVuZHBvaW50TWV0YWRhdGFGcm9tTmV0d29yazogYXR0ZW1wdGluZyB0byByZXRyaWV2ZSBPQXV0aCBlbmRwb2ludHMgZnJvbSAke29wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludH1gXG4gICAgICAgICk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID1cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm5ldHdvcmtJbnRlcmZhY2Uuc2VuZEdldFJlcXVlc3RBc3luYzxPcGVuSWRDb25maWdSZXNwb25zZT4oXG4gICAgICAgICAgICAgICAgICAgIG9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludCxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uc1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBpc1ZhbGlkUmVzcG9uc2UgPSBpc09wZW5JZENvbmZpZ1Jlc3BvbnNlKHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgaWYgKGlzVmFsaWRSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5ib2R5O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFxuICAgICAgICAgICAgICAgICAgICBgQXV0aG9yaXR5LmdldEVuZHBvaW50TWV0YWRhdGFGcm9tTmV0d29yazogY291bGQgbm90IHBhcnNlIHJlc3BvbnNlIGFzIE9wZW5JRCBjb25maWd1cmF0aW9uYFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgYEF1dGhvcml0eS5nZXRFbmRwb2ludE1ldGFkYXRhRnJvbU5ldHdvcms6ICR7ZX1gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgT0F1dGggZW5kcG9pbnRzIGZvciBjb21tb24gYXV0aG9yaXRpZXMuXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZXRFbmRwb2ludE1ldGFkYXRhRnJvbUhhcmRjb2RlZFZhbHVlcygpOiBPcGVuSWRDb25maWdSZXNwb25zZSB8IG51bGwge1xuICAgICAgICBpZiAodGhpcy5ob3N0bmFtZUFuZFBvcnQgaW4gRW5kcG9pbnRNZXRhZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIEVuZHBvaW50TWV0YWRhdGFbdGhpcy5ob3N0bmFtZUFuZFBvcnRdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSByZXRyaWV2ZWQgbWV0YWRhdGEgd2l0aCByZWdpb25hbCBpbmZvcm1hdGlvbi5cbiAgICAgKiBVc2VyIHNlbGVjdGVkIEF6dXJlIHJlZ2lvbiB3aWxsIGJlIHVzZWQgaWYgY29uZmlndXJlZC5cbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIHVwZGF0ZU1ldGFkYXRhV2l0aFJlZ2lvbmFsSW5mb3JtYXRpb24oXG4gICAgICAgIG1ldGFkYXRhOiBPcGVuSWRDb25maWdSZXNwb25zZVxuICAgICk6IFByb21pc2U8T3BlbklkQ29uZmlnUmVzcG9uc2U+IHtcbiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudD8uYWRkUXVldWVNZWFzdXJlbWVudChcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkF1dGhvcml0eVVwZGF0ZU1ldGFkYXRhV2l0aFJlZ2lvbmFsSW5mb3JtYXRpb24sXG4gICAgICAgICAgICB0aGlzLmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCB1c2VyQ29uZmlndXJlZEF6dXJlUmVnaW9uID1cbiAgICAgICAgICAgIHRoaXMuYXV0aG9yaXR5T3B0aW9ucy5henVyZVJlZ2lvbkNvbmZpZ3VyYXRpb24/LmF6dXJlUmVnaW9uO1xuXG4gICAgICAgIGlmICh1c2VyQ29uZmlndXJlZEF6dXJlUmVnaW9uKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgdXNlckNvbmZpZ3VyZWRBenVyZVJlZ2lvbiAhPT1cbiAgICAgICAgICAgICAgICBDb25zdGFudHMuQVpVUkVfUkVHSU9OX0FVVE9fRElTQ09WRVJfRkxBR1xuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWdpb25EaXNjb3ZlcnlNZXRhZGF0YS5yZWdpb25fb3V0Y29tZSA9XG4gICAgICAgICAgICAgICAgICAgIFJlZ2lvbkRpc2NvdmVyeU91dGNvbWVzLkNPTkZJR1VSRURfTk9fQVVUT19ERVRFQ1RJT047XG4gICAgICAgICAgICAgICAgdGhpcy5yZWdpb25EaXNjb3ZlcnlNZXRhZGF0YS5yZWdpb25fdXNlZCA9XG4gICAgICAgICAgICAgICAgICAgIHVzZXJDb25maWd1cmVkQXp1cmVSZWdpb247XG4gICAgICAgICAgICAgICAgcmV0dXJuIEF1dGhvcml0eS5yZXBsYWNlV2l0aFJlZ2lvbmFsSW5mb3JtYXRpb24oXG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhLFxuICAgICAgICAgICAgICAgICAgICB1c2VyQ29uZmlndXJlZEF6dXJlUmVnaW9uXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgYXV0b2RldGVjdGVkUmVnaW9uTmFtZSA9IGF3YWl0IGludm9rZUFzeW5jKFxuICAgICAgICAgICAgICAgIHRoaXMucmVnaW9uRGlzY292ZXJ5LmRldGVjdFJlZ2lvbi5iaW5kKHRoaXMucmVnaW9uRGlzY292ZXJ5KSxcbiAgICAgICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5SZWdpb25EaXNjb3ZlcnlEZXRlY3RSZWdpb24sXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIsXG4gICAgICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudCxcbiAgICAgICAgICAgICAgICB0aGlzLmNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICkoXG4gICAgICAgICAgICAgICAgdGhpcy5hdXRob3JpdHlPcHRpb25zLmF6dXJlUmVnaW9uQ29uZmlndXJhdGlvblxuICAgICAgICAgICAgICAgICAgICA/LmVudmlyb25tZW50UmVnaW9uLFxuICAgICAgICAgICAgICAgIHRoaXMucmVnaW9uRGlzY292ZXJ5TWV0YWRhdGFcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmIChhdXRvZGV0ZWN0ZWRSZWdpb25OYW1lKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWdpb25EaXNjb3ZlcnlNZXRhZGF0YS5yZWdpb25fb3V0Y29tZSA9XG4gICAgICAgICAgICAgICAgICAgIFJlZ2lvbkRpc2NvdmVyeU91dGNvbWVzLkFVVE9fREVURUNUSU9OX1JFUVVFU1RFRF9TVUNDRVNTRlVMO1xuICAgICAgICAgICAgICAgIHRoaXMucmVnaW9uRGlzY292ZXJ5TWV0YWRhdGEucmVnaW9uX3VzZWQgPVxuICAgICAgICAgICAgICAgICAgICBhdXRvZGV0ZWN0ZWRSZWdpb25OYW1lO1xuICAgICAgICAgICAgICAgIHJldHVybiBBdXRob3JpdHkucmVwbGFjZVdpdGhSZWdpb25hbEluZm9ybWF0aW9uKFxuICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgYXV0b2RldGVjdGVkUmVnaW9uTmFtZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMucmVnaW9uRGlzY292ZXJ5TWV0YWRhdGEucmVnaW9uX291dGNvbWUgPVxuICAgICAgICAgICAgICAgIFJlZ2lvbkRpc2NvdmVyeU91dGNvbWVzLkFVVE9fREVURUNUSU9OX1JFUVVFU1RFRF9GQUlMRUQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbWV0YWRhdGE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgQXV0aG9yaXR5TWV0YWRhdGFFbnRpdHkgd2l0aCBuZXcgYWxpYXNlcywgcHJlZmVycmVkX25ldHdvcmsgYW5kIHByZWZlcnJlZF9jYWNoZVxuICAgICAqIGFuZCByZXR1cm5zIHdoZXJlIHRoZSBpbmZvcm1hdGlvbiB3YXMgcmV0cmlldmVkIGZyb21cbiAgICAgKiBAcGFyYW0gbWV0YWRhdGFFbnRpdHlcbiAgICAgKiBAcmV0dXJucyBBdXRob3JpdHlNZXRhZGF0YVNvdXJjZVxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgdXBkYXRlQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YShcbiAgICAgICAgbWV0YWRhdGFFbnRpdHk6IEF1dGhvcml0eU1ldGFkYXRhRW50aXR5XG4gICAgKTogUHJvbWlzZTxBdXRob3JpdHlNZXRhZGF0YVNvdXJjZT4ge1xuICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50Py5hZGRRdWV1ZU1lYXN1cmVtZW50KFxuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuQXV0aG9yaXR5VXBkYXRlQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YSxcbiAgICAgICAgICAgIHRoaXMuY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBsb2NhbE1ldGFkYXRhU291cmNlID1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YUZyb21Mb2NhbFNvdXJjZXMobWV0YWRhdGFFbnRpdHkpO1xuICAgICAgICBpZiAobG9jYWxNZXRhZGF0YVNvdXJjZSkge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsTWV0YWRhdGFTb3VyY2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGYWxsYmFjayB0byBuZXR3b3JrIGFzIG1ldGFkYXRhIHNvdXJjZVxuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGF3YWl0IGludm9rZUFzeW5jKFxuICAgICAgICAgICAgdGhpcy5nZXRDbG91ZERpc2NvdmVyeU1ldGFkYXRhRnJvbU5ldHdvcmsuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkF1dGhvcml0eUdldENsb3VkRGlzY292ZXJ5TWV0YWRhdGFGcm9tTmV0d29yayxcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLFxuICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudCxcbiAgICAgICAgICAgIHRoaXMuY29ycmVsYXRpb25JZFxuICAgICAgICApKCk7XG5cbiAgICAgICAgaWYgKG1ldGFkYXRhKSB7XG4gICAgICAgICAgICBDYWNoZUhlbHBlcnMudXBkYXRlQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YShcbiAgICAgICAgICAgICAgICBtZXRhZGF0YUVudGl0eSxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YSxcbiAgICAgICAgICAgICAgICB0cnVlXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmV0dXJuIEF1dGhvcml0eU1ldGFkYXRhU291cmNlLk5FVFdPUks7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBNZXRhZGF0YSBjb3VsZCBub3QgYmUgb2J0YWluZWQgZnJvbSB0aGUgY29uZmlnLCBjYWNoZSwgbmV0d29yayBvciBoYXJkY29kZWQgdmFsdWVzXG4gICAgICAgIHRocm93IGNyZWF0ZUNsaWVudENvbmZpZ3VyYXRpb25FcnJvcihcbiAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLnVudHJ1c3RlZEF1dGhvcml0eVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YUZyb21Mb2NhbFNvdXJjZXMoXG4gICAgICAgIG1ldGFkYXRhRW50aXR5OiBBdXRob3JpdHlNZXRhZGF0YUVudGl0eVxuICAgICk6IEF1dGhvcml0eU1ldGFkYXRhU291cmNlIHwgbnVsbCB7XG4gICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICBcIkF0dGVtcHRpbmcgdG8gZ2V0IGNsb3VkIGRpc2NvdmVyeSBtZXRhZGF0YSAgZnJvbSBhdXRob3JpdHkgY29uZmlndXJhdGlvblwiXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2VQaWkoXG4gICAgICAgICAgICBgS25vd24gQXV0aG9yaXRpZXM6ICR7XG4gICAgICAgICAgICAgICAgdGhpcy5hdXRob3JpdHlPcHRpb25zLmtub3duQXV0aG9yaXRpZXMgfHxcbiAgICAgICAgICAgICAgICBDb25zdGFudHMuTk9UX0FQUExJQ0FCTEVcbiAgICAgICAgICAgIH1gXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2VQaWkoXG4gICAgICAgICAgICBgQXV0aG9yaXR5IE1ldGFkYXRhOiAke1xuICAgICAgICAgICAgICAgIHRoaXMuYXV0aG9yaXR5T3B0aW9ucy5hdXRob3JpdHlNZXRhZGF0YSB8fFxuICAgICAgICAgICAgICAgIENvbnN0YW50cy5OT1RfQVBQTElDQUJMRVxuICAgICAgICAgICAgfWBcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5sb2dnZXIudmVyYm9zZVBpaShcbiAgICAgICAgICAgIGBDYW5vbmljYWwgQXV0aG9yaXR5OiAke1xuICAgICAgICAgICAgICAgIG1ldGFkYXRhRW50aXR5LmNhbm9uaWNhbF9hdXRob3JpdHkgfHwgQ29uc3RhbnRzLk5PVF9BUFBMSUNBQkxFXG4gICAgICAgICAgICB9YFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IHRoaXMuZ2V0Q2xvdWREaXNjb3ZlcnlNZXRhZGF0YUZyb21Db25maWcoKTtcbiAgICAgICAgaWYgKG1ldGFkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFxuICAgICAgICAgICAgICAgIFwiRm91bmQgY2xvdWQgZGlzY292ZXJ5IG1ldGFkYXRhIGluIGF1dGhvcml0eSBjb25maWd1cmF0aW9uXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBDYWNoZUhlbHBlcnMudXBkYXRlQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YShcbiAgICAgICAgICAgICAgICBtZXRhZGF0YUVudGl0eSxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YSxcbiAgICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybiBBdXRob3JpdHlNZXRhZGF0YVNvdXJjZS5DT05GSUc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiB0aGUgY2FjaGVkIG1ldGFkYXRhIGNhbWUgZnJvbSBjb25maWcgYnV0IHRoYXQgY29uZmlnIHdhcyBub3QgcGFzc2VkIHRvIHRoaXMgaW5zdGFuY2UsIHdlIG11c3QgZ28gdG8gaGFyZGNvZGVkIHZhbHVlc1xuICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFxuICAgICAgICAgICAgXCJEaWQgbm90IGZpbmQgY2xvdWQgZGlzY292ZXJ5IG1ldGFkYXRhIGluIHRoZSBjb25maWcuLi4gQXR0ZW1wdGluZyB0byBnZXQgY2xvdWQgZGlzY292ZXJ5IG1ldGFkYXRhIGZyb20gdGhlIGhhcmRjb2RlZCB2YWx1ZXMuXCJcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNraXBBdXRob3JpdHlNZXRhZGF0YUNhY2hlKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFxuICAgICAgICAgICAgICAgIFwiU2tpcHBpbmcgaGFyZGNvZGVkIGNsb3VkIGRpc2NvdmVyeSBtZXRhZGF0YSBjYWNoZSBzaW5jZSBza2lwQXV0aG9yaXR5TWV0YWRhdGFDYWNoZSBpcyBzZXQgdG8gdHJ1ZS4gQXR0ZW1wdGluZyB0byBnZXQgY2xvdWQgZGlzY292ZXJ5IG1ldGFkYXRhIGZyb20gdGhlIG5ldHdvcmsgbWV0YWRhdGEgY2FjaGUuXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBoYXJkY29kZWRNZXRhZGF0YSA9XG4gICAgICAgICAgICAgICAgZ2V0Q2xvdWREaXNjb3ZlcnlNZXRhZGF0YUZyb21IYXJkY29kZWRWYWx1ZXMoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaG9zdG5hbWVBbmRQb3J0XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChoYXJkY29kZWRNZXRhZGF0YSkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgICAgIFwiRm91bmQgY2xvdWQgZGlzY292ZXJ5IG1ldGFkYXRhIGZyb20gaGFyZGNvZGVkIHZhbHVlcy5cIlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgQ2FjaGVIZWxwZXJzLnVwZGF0ZUNsb3VkRGlzY292ZXJ5TWV0YWRhdGEoXG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhRW50aXR5LFxuICAgICAgICAgICAgICAgICAgICBoYXJkY29kZWRNZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHJldHVybiBBdXRob3JpdHlNZXRhZGF0YVNvdXJjZS5IQVJEQ09ERURfVkFMVUVTO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFxuICAgICAgICAgICAgICAgIFwiRGlkIG5vdCBmaW5kIGNsb3VkIGRpc2NvdmVyeSBtZXRhZGF0YSBpbiBoYXJkY29kZWQgdmFsdWVzLi4uIEF0dGVtcHRpbmcgdG8gZ2V0IGNsb3VkIGRpc2NvdmVyeSBtZXRhZGF0YSBmcm9tIHRoZSBuZXR3b3JrIG1ldGFkYXRhIGNhY2hlLlwiXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbWV0YWRhdGFFbnRpdHlFeHBpcmVkID1cbiAgICAgICAgICAgIENhY2hlSGVscGVycy5pc0F1dGhvcml0eU1ldGFkYXRhRXhwaXJlZChtZXRhZGF0YUVudGl0eSk7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMuaXNBdXRob3JpdHlTYW1lVHlwZShtZXRhZGF0YUVudGl0eSkgJiZcbiAgICAgICAgICAgIG1ldGFkYXRhRW50aXR5LmFsaWFzZXNGcm9tTmV0d29yayAmJlxuICAgICAgICAgICAgIW1ldGFkYXRhRW50aXR5RXhwaXJlZFxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXCJGb3VuZCBjbG91ZCBkaXNjb3ZlcnkgbWV0YWRhdGEgaW4gdGhlIGNhY2hlLlwiKTtcbiAgICAgICAgICAgIC8vIE5vIG5lZWQgdG8gdXBkYXRlXG4gICAgICAgICAgICByZXR1cm4gQXV0aG9yaXR5TWV0YWRhdGFTb3VyY2UuQ0FDSEU7XG4gICAgICAgIH0gZWxzZSBpZiAobWV0YWRhdGFFbnRpdHlFeHBpcmVkKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFwiVGhlIG1ldGFkYXRhIGVudGl0eSBpcyBleHBpcmVkLlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhcnNlIGNsb3VkRGlzY292ZXJ5TWV0YWRhdGEgY29uZmlnIG9yIGNoZWNrIGtub3duQXV0aG9yaXRpZXNcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldENsb3VkRGlzY292ZXJ5TWV0YWRhdGFGcm9tQ29uZmlnKCk6IENsb3VkRGlzY292ZXJ5TWV0YWRhdGEgfCBudWxsIHtcbiAgICAgICAgLy8gQ0lBTSBkb2VzIG5vdCBzdXBwb3J0IGNsb3VkIGRpc2NvdmVyeSBtZXRhZGF0YVxuICAgICAgICBpZiAodGhpcy5hdXRob3JpdHlUeXBlID09PSBBdXRob3JpdHlUeXBlLkNpYW0pIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgXCJDSUFNIGF1dGhvcml0aWVzIGRvIG5vdCBzdXBwb3J0IGNsb3VkIGRpc2NvdmVyeSBtZXRhZGF0YSwgZ2VuZXJhdGUgdGhlIGFsaWFzZXMgZnJvbSBhdXRob3JpdHkgaG9zdC5cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybiBBdXRob3JpdHkuY3JlYXRlQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YUZyb21Ib3N0KFxuICAgICAgICAgICAgICAgIHRoaXMuaG9zdG5hbWVBbmRQb3J0XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgbmV0d29yayByZXNwb25zZSB3YXMgcHJvdmlkZWQgaW4gY29uZmlnXG4gICAgICAgIGlmICh0aGlzLmF1dGhvcml0eU9wdGlvbnMuY2xvdWREaXNjb3ZlcnlNZXRhZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIudmVyYm9zZShcbiAgICAgICAgICAgICAgICBcIlRoZSBjbG91ZCBkaXNjb3ZlcnkgbWV0YWRhdGEgaGFzIGJlZW4gcHJvdmlkZWQgYXMgYSBuZXR3b3JrIHJlc3BvbnNlLCBpbiB0aGUgY29uZmlnLlwiXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFxuICAgICAgICAgICAgICAgICAgICBcIkF0dGVtcHRpbmcgdG8gcGFyc2UgdGhlIGNsb3VkIGRpc2NvdmVyeSBtZXRhZGF0YS5cIlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkUmVzcG9uc2UgPSBKU09OLnBhcnNlKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmF1dGhvcml0eU9wdGlvbnMuY2xvdWREaXNjb3ZlcnlNZXRhZGF0YVxuICAgICAgICAgICAgICAgICkgYXMgQ2xvdWRJbnN0YW5jZURpc2NvdmVyeVJlc3BvbnNlO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gZ2V0Q2xvdWREaXNjb3ZlcnlNZXRhZGF0YUZyb21OZXR3b3JrUmVzcG9uc2UoXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZFJlc3BvbnNlLm1ldGFkYXRhLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhvc3RuYW1lQW5kUG9ydFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIudmVyYm9zZShcIlBhcnNlZCB0aGUgY2xvdWQgZGlzY292ZXJ5IG1ldGFkYXRhLlwiKTtcbiAgICAgICAgICAgICAgICBpZiAobWV0YWRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIudmVyYm9zZShcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiVGhlcmUgaXMgcmV0dXJuYWJsZSBtZXRhZGF0YSBhdHRhY2hlZCB0byB0aGUgcGFyc2VkIGNsb3VkIGRpc2NvdmVyeSBtZXRhZGF0YS5cIlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWV0YWRhdGE7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIudmVyYm9zZShcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiVGhlcmUgaXMgbm8gbWV0YWRhdGEgYXR0YWNoZWQgdG8gdGhlIHBhcnNlZCBjbG91ZCBkaXNjb3ZlcnkgbWV0YWRhdGEuXCJcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIudmVyYm9zZShcbiAgICAgICAgICAgICAgICAgICAgXCJVbmFibGUgdG8gcGFyc2UgdGhlIGNsb3VkIGRpc2NvdmVyeSBtZXRhZGF0YS4gVGhyb3dpbmcgSW52YWxpZCBDbG91ZCBEaXNjb3ZlcnkgTWV0YWRhdGEgRXJyb3IuXCJcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudENvbmZpZ3VyYXRpb25FcnJvcihcbiAgICAgICAgICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuaW52YWxpZENsb3VkRGlzY292ZXJ5TWV0YWRhdGFcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgY2xvdWREaXNjb3ZlcnlNZXRhZGF0YSBpcyBlbXB0eSBvciBkb2VzIG5vdCBjb250YWluIHRoZSBob3N0LCBjaGVjayBrbm93bkF1dGhvcml0aWVzXG4gICAgICAgIGlmICh0aGlzLmlzSW5Lbm93bkF1dGhvcml0aWVzKCkpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgXCJUaGUgaG9zdCBpcyBpbmNsdWRlZCBpbiBrbm93bkF1dGhvcml0aWVzLiBDcmVhdGluZyBuZXcgY2xvdWQgZGlzY292ZXJ5IG1ldGFkYXRhIGZyb20gdGhlIGhvc3QuXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm4gQXV0aG9yaXR5LmNyZWF0ZUNsb3VkRGlzY292ZXJ5TWV0YWRhdGFGcm9tSG9zdChcbiAgICAgICAgICAgICAgICB0aGlzLmhvc3RuYW1lQW5kUG9ydFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGxlZCB0byBnZXQgbWV0YWRhdGEgZnJvbSBuZXR3b3JrIGlmIENsb3VkRGlzY292ZXJ5TWV0YWRhdGEgd2FzIG5vdCBwb3B1bGF0ZWQgYnkgY29uZmlnXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaGFzSGFyZGNvZGVkTWV0YWRhdGEgYm9vbGVhblxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgZ2V0Q2xvdWREaXNjb3ZlcnlNZXRhZGF0YUZyb21OZXR3b3JrKCk6IFByb21pc2U8Q2xvdWREaXNjb3ZlcnlNZXRhZGF0YSB8IG51bGw+IHtcbiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudD8uYWRkUXVldWVNZWFzdXJlbWVudChcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkF1dGhvcml0eUdldENsb3VkRGlzY292ZXJ5TWV0YWRhdGFGcm9tTmV0d29yayxcbiAgICAgICAgICAgIHRoaXMuY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBpbnN0YW5jZURpc2NvdmVyeUVuZHBvaW50ID0gYCR7Q29uc3RhbnRzLkFBRF9JTlNUQU5DRV9ESVNDT1ZFUllfRU5EUFR9JHt0aGlzLmNhbm9uaWNhbEF1dGhvcml0eX1vYXV0aDIvdjIuMC9hdXRob3JpemVgO1xuICAgICAgICBjb25zdCBvcHRpb25zOiBJbWRzT3B0aW9ucyA9IHt9O1xuXG4gICAgICAgIC8qXG4gICAgICAgICAqIFRPRE86IEFkZCBhIHRpbWVvdXQgaWYgdGhlIGF1dGhvcml0eSBleGlzdHMgaW4gb3VyIGxpYnJhcnknc1xuICAgICAgICAgKiBoYXJkY29kZWQgbGlzdCBvZiBtZXRhZGF0YVxuICAgICAgICAgKi9cblxuICAgICAgICBsZXQgbWF0Y2ggPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm5ldHdvcmtJbnRlcmZhY2Uuc2VuZEdldFJlcXVlc3RBc3luYzxcbiAgICAgICAgICAgICAgICB8IENsb3VkSW5zdGFuY2VEaXNjb3ZlcnlSZXNwb25zZVxuICAgICAgICAgICAgICAgIHwgQ2xvdWRJbnN0YW5jZURpc2NvdmVyeUVycm9yUmVzcG9uc2VcbiAgICAgICAgICAgID4oaW5zdGFuY2VEaXNjb3ZlcnlFbmRwb2ludCwgb3B0aW9ucyk7XG4gICAgICAgICAgICBsZXQgdHlwZWRSZXNwb25zZUJvZHk6XG4gICAgICAgICAgICAgICAgfCBDbG91ZEluc3RhbmNlRGlzY292ZXJ5UmVzcG9uc2VcbiAgICAgICAgICAgICAgICB8IENsb3VkSW5zdGFuY2VEaXNjb3ZlcnlFcnJvclJlc3BvbnNlO1xuICAgICAgICAgICAgbGV0IG1ldGFkYXRhOiBBcnJheTxDbG91ZERpc2NvdmVyeU1ldGFkYXRhPjtcbiAgICAgICAgICAgIGlmIChpc0Nsb3VkSW5zdGFuY2VEaXNjb3ZlcnlSZXNwb25zZShyZXNwb25zZS5ib2R5KSkge1xuICAgICAgICAgICAgICAgIHR5cGVkUmVzcG9uc2VCb2R5ID1cbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuYm9keSBhcyBDbG91ZEluc3RhbmNlRGlzY292ZXJ5UmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgbWV0YWRhdGEgPSB0eXBlZFJlc3BvbnNlQm9keS5tZXRhZGF0YTtcblxuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2VQaWkoXG4gICAgICAgICAgICAgICAgICAgIGB0ZW5hbnRfZGlzY292ZXJ5X2VuZHBvaW50IGlzOiAke3R5cGVkUmVzcG9uc2VCb2R5LnRlbmFudF9kaXNjb3ZlcnlfZW5kcG9pbnR9YFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzQ2xvdWRJbnN0YW5jZURpc2NvdmVyeUVycm9yUmVzcG9uc2UocmVzcG9uc2UuYm9keSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuaW5nKFxuICAgICAgICAgICAgICAgICAgICBgQSBDbG91ZEluc3RhbmNlRGlzY292ZXJ5RXJyb3JSZXNwb25zZSB3YXMgcmV0dXJuZWQuIFRoZSBjbG91ZCBpbnN0YW5jZSBkaXNjb3ZlcnkgbmV0d29yayByZXF1ZXN0J3Mgc3RhdHVzIGNvZGUgaXM6ICR7cmVzcG9uc2Uuc3RhdHVzfWBcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgdHlwZWRSZXNwb25zZUJvZHkgPVxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5ib2R5IGFzIENsb3VkSW5zdGFuY2VEaXNjb3ZlcnlFcnJvclJlc3BvbnNlO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlZFJlc3BvbnNlQm9keS5lcnJvciA9PT0gQ29uc3RhbnRzLklOVkFMSURfSU5TVEFOQ0UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlRoZSBDbG91ZEluc3RhbmNlRGlzY292ZXJ5RXJyb3JSZXNwb25zZSBlcnJvciBpcyBpbnZhbGlkX2luc3RhbmNlLlwiXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm5pbmcoXG4gICAgICAgICAgICAgICAgICAgIGBUaGUgQ2xvdWRJbnN0YW5jZURpc2NvdmVyeUVycm9yUmVzcG9uc2UgZXJyb3IgaXMgJHt0eXBlZFJlc3BvbnNlQm9keS5lcnJvcn1gXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuaW5nKFxuICAgICAgICAgICAgICAgICAgICBgVGhlIENsb3VkSW5zdGFuY2VEaXNjb3ZlcnlFcnJvclJlc3BvbnNlIGVycm9yIGRlc2NyaXB0aW9uIGlzICR7dHlwZWRSZXNwb25zZUJvZHkuZXJyb3JfZGVzY3JpcHRpb259YFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuaW5nKFxuICAgICAgICAgICAgICAgICAgICBcIlNldHRpbmcgdGhlIHZhbHVlIG9mIHRoZSBDbG91ZEluc3RhbmNlRGlzY292ZXJ5TWV0YWRhdGEgKHJldHVybmVkIGZyb20gdGhlIG5ldHdvcmspIHRvIFtdXCJcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIG1ldGFkYXRhID0gW107XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFxuICAgICAgICAgICAgICAgICAgICBcIkFBRCBkaWQgbm90IHJldHVybiBhIENsb3VkSW5zdGFuY2VEaXNjb3ZlcnlSZXNwb25zZSBvciBDbG91ZEluc3RhbmNlRGlzY292ZXJ5RXJyb3JSZXNwb25zZVwiXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5sb2dnZXIudmVyYm9zZShcbiAgICAgICAgICAgICAgICBcIkF0dGVtcHRpbmcgdG8gZmluZCBhIG1hdGNoIGJldHdlZW4gdGhlIGRldmVsb3BlcidzIGF1dGhvcml0eSBhbmQgdGhlIENsb3VkSW5zdGFuY2VEaXNjb3ZlcnlNZXRhZGF0YSByZXR1cm5lZCBmcm9tIHRoZSBuZXR3b3JrIHJlcXVlc3QuXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBtYXRjaCA9IGdldENsb3VkRGlzY292ZXJ5TWV0YWRhdGFGcm9tTmV0d29ya1Jlc3BvbnNlKFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhLFxuICAgICAgICAgICAgICAgIHRoaXMuaG9zdG5hbWVBbmRQb3J0XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgQXV0aEVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIGBUaGVyZSB3YXMgYSBuZXR3b3JrIGVycm9yIHdoaWxlIGF0dGVtcHRpbmcgdG8gZ2V0IHRoZSBjbG91ZCBkaXNjb3ZlcnkgaW5zdGFuY2UgbWV0YWRhdGEuXFxuRXJyb3I6ICR7ZXJyb3IuZXJyb3JDb2RlfVxcbkVycm9yIERlc2NyaXB0aW9uOiAke2Vycm9yLmVycm9yTWVzc2FnZX1gXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdHlwZWRFcnJvciA9IGVycm9yIGFzIEVycm9yO1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFxuICAgICAgICAgICAgICAgICAgICBgQSBub24tTVNBTEpTIGVycm9yIHdhcyB0aHJvd24gd2hpbGUgYXR0ZW1wdGluZyB0byBnZXQgdGhlIGNsb3VkIGluc3RhbmNlIGRpc2NvdmVyeSBtZXRhZGF0YS5cXG5FcnJvcjogJHt0eXBlZEVycm9yLm5hbWV9XFxuRXJyb3IgRGVzY3JpcHRpb246ICR7dHlwZWRFcnJvci5tZXNzYWdlfWBcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEN1c3RvbSBEb21haW4gc2NlbmFyaW8sIGhvc3QgaXMgdHJ1c3RlZCBiZWNhdXNlIEluc3RhbmNlIERpc2NvdmVyeSBjYWxsIHN1Y2NlZWRlZFxuICAgICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuaW5nKFxuICAgICAgICAgICAgICAgIFwiVGhlIGRldmVsb3BlcidzIGF1dGhvcml0eSB3YXMgbm90IGZvdW5kIHdpdGhpbiB0aGUgQ2xvdWRJbnN0YW5jZURpc2NvdmVyeU1ldGFkYXRhIHJldHVybmVkIGZyb20gdGhlIG5ldHdvcmsgcmVxdWVzdC5cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgXCJDcmVhdGluZyBjdXN0b20gQXV0aG9yaXR5IGZvciBjdXN0b20gZG9tYWluIHNjZW5hcmlvLlwiXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBtYXRjaCA9IEF1dGhvcml0eS5jcmVhdGVDbG91ZERpc2NvdmVyeU1ldGFkYXRhRnJvbUhvc3QoXG4gICAgICAgICAgICAgICAgdGhpcy5ob3N0bmFtZUFuZFBvcnRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhlbHBlciBmdW5jdGlvbiB0byBkZXRlcm1pbmUgaWYgdGhpcyBob3N0IGlzIGluY2x1ZGVkIGluIHRoZSBrbm93bkF1dGhvcml0aWVzIGNvbmZpZyBvcHRpb25cbiAgICAgKi9cbiAgICBwcml2YXRlIGlzSW5Lbm93bkF1dGhvcml0aWVzKCk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBtYXRjaGVzID0gdGhpcy5hdXRob3JpdHlPcHRpb25zLmtub3duQXV0aG9yaXRpZXMuZmlsdGVyKFxuICAgICAgICAgICAgKGF1dGhvcml0eSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIGF1dGhvcml0eSAmJlxuICAgICAgICAgICAgICAgICAgICBVcmxTdHJpbmcuZ2V0RG9tYWluRnJvbVVybChhdXRob3JpdHkpLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhvc3RuYW1lQW5kUG9ydFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBtYXRjaGVzLmxlbmd0aCA+IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogaGVscGVyIGZ1bmN0aW9uIHRvIHBvcHVsYXRlIHRoZSBhdXRob3JpdHkgYmFzZWQgb24gYXp1cmVDbG91ZE9wdGlvbnNcbiAgICAgKiBAcGFyYW0gYXV0aG9yaXR5U3RyaW5nXG4gICAgICogQHBhcmFtIGF6dXJlQ2xvdWRPcHRpb25zXG4gICAgICovXG4gICAgc3RhdGljIGdlbmVyYXRlQXV0aG9yaXR5KFxuICAgICAgICBhdXRob3JpdHlTdHJpbmc6IHN0cmluZyxcbiAgICAgICAgYXp1cmVDbG91ZE9wdGlvbnM/OiBBenVyZUNsb3VkT3B0aW9uc1xuICAgICk6IHN0cmluZyB7XG4gICAgICAgIGxldCBhdXRob3JpdHlBenVyZUNsb3VkSW5zdGFuY2U7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgYXp1cmVDbG91ZE9wdGlvbnMgJiZcbiAgICAgICAgICAgIGF6dXJlQ2xvdWRPcHRpb25zLmF6dXJlQ2xvdWRJbnN0YW5jZSAhPT0gQXp1cmVDbG91ZEluc3RhbmNlLk5vbmVcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zdCB0ZW5hbnQgPSBhenVyZUNsb3VkT3B0aW9ucy50ZW5hbnRcbiAgICAgICAgICAgICAgICA/IGF6dXJlQ2xvdWRPcHRpb25zLnRlbmFudFxuICAgICAgICAgICAgICAgIDogQ29uc3RhbnRzLkRFRkFVTFRfQ09NTU9OX1RFTkFOVDtcbiAgICAgICAgICAgIGF1dGhvcml0eUF6dXJlQ2xvdWRJbnN0YW5jZSA9IGAke2F6dXJlQ2xvdWRPcHRpb25zLmF6dXJlQ2xvdWRJbnN0YW5jZX0vJHt0ZW5hbnR9L2A7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYXV0aG9yaXR5QXp1cmVDbG91ZEluc3RhbmNlXG4gICAgICAgICAgICA/IGF1dGhvcml0eUF6dXJlQ2xvdWRJbnN0YW5jZVxuICAgICAgICAgICAgOiBhdXRob3JpdHlTdHJpbmc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBjbG91ZCBkaXNjb3ZlcnkgbWV0YWRhdGEgb2JqZWN0IGZyb20gYSBnaXZlbiBob3N0XG4gICAgICogQHBhcmFtIGhvc3RcbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YUZyb21Ib3N0KFxuICAgICAgICBob3N0OiBzdHJpbmdcbiAgICApOiBDbG91ZERpc2NvdmVyeU1ldGFkYXRhIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHByZWZlcnJlZF9uZXR3b3JrOiBob3N0LFxuICAgICAgICAgICAgcHJlZmVycmVkX2NhY2hlOiBob3N0LFxuICAgICAgICAgICAgYWxpYXNlczogW2hvc3RdLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGhlbHBlciBmdW5jdGlvbiB0byBnZW5lcmF0ZSBlbnZpcm9ubWVudCBmcm9tIGF1dGhvcml0eSBvYmplY3RcbiAgICAgKi9cbiAgICBnZXRQcmVmZXJyZWRDYWNoZSgpOiBzdHJpbmcge1xuICAgICAgICBpZiAodGhpcy5tYW5hZ2VkSWRlbnRpdHkpIHtcbiAgICAgICAgICAgIHJldHVybiBDb25zdGFudHMuREVGQVVMVF9BVVRIT1JJVFlfSE9TVDtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRpc2NvdmVyeUNvbXBsZXRlKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1ldGFkYXRhLnByZWZlcnJlZF9jYWNoZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihcbiAgICAgICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy5lbmRwb2ludFJlc29sdXRpb25FcnJvclxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIHByb3ZpZGVkIGhvc3QgaXMgYW4gYWxpYXMgb2YgdGhpcyBhdXRob3JpdHkgaW5zdGFuY2VcbiAgICAgKiBAcGFyYW0gaG9zdFxuICAgICAqL1xuICAgIGlzQWxpYXMoaG9zdDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLm1ldGFkYXRhLmFsaWFzZXMuaW5kZXhPZihob3N0KSA+IC0xO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIHByb3ZpZGVkIGhvc3QgaXMgYW4gYWxpYXMgb2YgYSBrbm93biBNaWNyb3NvZnQgYXV0aG9yaXR5IGZvciBwdXJwb3NlcyBvZiBlbmRwb2ludCBkaXNjb3ZlcnlcbiAgICAgKiBAcGFyYW0gaG9zdFxuICAgICAqL1xuICAgIGlzQWxpYXNPZktub3duTWljcm9zb2Z0QXV0aG9yaXR5KGhvc3Q6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gSW5zdGFuY2VEaXNjb3ZlcnlNZXRhZGF0YUFsaWFzZXMuaGFzKGhvc3QpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyB3aGV0aGVyIHRoZSBwcm92aWRlZCBob3N0IGlzIHRoYXQgb2YgYSBwdWJsaWMgY2xvdWQgYXV0aG9yaXR5XG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXV0aG9yaXR5IHN0cmluZ1xuICAgICAqIEByZXR1cm5zIGJvb2xcbiAgICAgKi9cbiAgICBzdGF0aWMgaXNQdWJsaWNDbG91ZEF1dGhvcml0eShob3N0OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIENvbnN0YW50cy5LTk9XTl9QVUJMSUNfQ0xPVURTLmluZGV4T2YoaG9zdCkgPj0gMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWJ1aWxkIHRoZSBhdXRob3JpdHkgc3RyaW5nIHdpdGggdGhlIHJlZ2lvblxuICAgICAqXG4gICAgICogQHBhcmFtIGhvc3Qgc3RyaW5nXG4gICAgICogQHBhcmFtIHJlZ2lvbiBzdHJpbmdcbiAgICAgKi9cbiAgICBzdGF0aWMgYnVpbGRSZWdpb25hbEF1dGhvcml0eVN0cmluZyhcbiAgICAgICAgaG9zdDogc3RyaW5nLFxuICAgICAgICByZWdpb246IHN0cmluZyxcbiAgICAgICAgcXVlcnlTdHJpbmc/OiBzdHJpbmdcbiAgICApOiBzdHJpbmcge1xuICAgICAgICAvLyBDcmVhdGUgYW5kIHZhbGlkYXRlIGEgVXJsIHN0cmluZyBvYmplY3Qgd2l0aCB0aGUgaW5pdGlhbCBhdXRob3JpdHkgc3RyaW5nXG4gICAgICAgIGNvbnN0IGF1dGhvcml0eVVybEluc3RhbmNlID0gbmV3IFVybFN0cmluZyhob3N0KTtcbiAgICAgICAgYXV0aG9yaXR5VXJsSW5zdGFuY2UudmFsaWRhdGVBc1VyaSgpO1xuXG4gICAgICAgIGNvbnN0IGF1dGhvcml0eVVybFBhcnRzID0gYXV0aG9yaXR5VXJsSW5zdGFuY2UuZ2V0VXJsQ29tcG9uZW50cygpO1xuXG4gICAgICAgIGxldCBob3N0TmFtZUFuZFBvcnQgPSBgJHtyZWdpb259LiR7YXV0aG9yaXR5VXJsUGFydHMuSG9zdE5hbWVBbmRQb3J0fWA7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNQdWJsaWNDbG91ZEF1dGhvcml0eShhdXRob3JpdHlVcmxQYXJ0cy5Ib3N0TmFtZUFuZFBvcnQpKSB7XG4gICAgICAgICAgICBob3N0TmFtZUFuZFBvcnQgPSBgJHtyZWdpb259LiR7Q29uc3RhbnRzLlJFR0lPTkFMX0FVVEhfUFVCTElDX0NMT1VEX1NVRkZJWH1gO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSW5jbHVkZSB0aGUgcXVlcnkgc3RyaW5nIHBvcnRpb24gb2YgdGhlIHVybFxuICAgICAgICBjb25zdCB1cmwgPSBVcmxTdHJpbmcuY29uc3RydWN0QXV0aG9yaXR5VXJpRnJvbU9iamVjdCh7XG4gICAgICAgICAgICAuLi5hdXRob3JpdHlVcmxJbnN0YW5jZS5nZXRVcmxDb21wb25lbnRzKCksXG4gICAgICAgICAgICBIb3N0TmFtZUFuZFBvcnQ6IGhvc3ROYW1lQW5kUG9ydCxcbiAgICAgICAgfSkudXJsU3RyaW5nO1xuXG4gICAgICAgIC8vIEFkZCB0aGUgcXVlcnkgc3RyaW5nIGlmIGEgcXVlcnkgc3RyaW5nIHdhcyBwcm92aWRlZFxuICAgICAgICBpZiAocXVlcnlTdHJpbmcpIHJldHVybiBgJHt1cmx9PyR7cXVlcnlTdHJpbmd9YDtcblxuICAgICAgICByZXR1cm4gdXJsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlcGxhY2UgdGhlIGVuZHBvaW50cyBpbiB0aGUgbWV0YWRhdGEgb2JqZWN0IHdpdGggdGhlaXIgcmVnaW9uYWwgZXF1aXZhbGVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWV0YWRhdGEgT3BlbklkQ29uZmlnUmVzcG9uc2VcbiAgICAgKiBAcGFyYW0gYXp1cmVSZWdpb24gc3RyaW5nXG4gICAgICovXG4gICAgc3RhdGljIHJlcGxhY2VXaXRoUmVnaW9uYWxJbmZvcm1hdGlvbihcbiAgICAgICAgbWV0YWRhdGE6IE9wZW5JZENvbmZpZ1Jlc3BvbnNlLFxuICAgICAgICBhenVyZVJlZ2lvbjogc3RyaW5nXG4gICAgKTogT3BlbklkQ29uZmlnUmVzcG9uc2Uge1xuICAgICAgICBjb25zdCByZWdpb25hbE1ldGFkYXRhID0geyAuLi5tZXRhZGF0YSB9O1xuICAgICAgICByZWdpb25hbE1ldGFkYXRhLmF1dGhvcml6YXRpb25fZW5kcG9pbnQgPVxuICAgICAgICAgICAgQXV0aG9yaXR5LmJ1aWxkUmVnaW9uYWxBdXRob3JpdHlTdHJpbmcoXG4gICAgICAgICAgICAgICAgcmVnaW9uYWxNZXRhZGF0YS5hdXRob3JpemF0aW9uX2VuZHBvaW50LFxuICAgICAgICAgICAgICAgIGF6dXJlUmVnaW9uXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIHJlZ2lvbmFsTWV0YWRhdGEudG9rZW5fZW5kcG9pbnQgPVxuICAgICAgICAgICAgQXV0aG9yaXR5LmJ1aWxkUmVnaW9uYWxBdXRob3JpdHlTdHJpbmcoXG4gICAgICAgICAgICAgICAgcmVnaW9uYWxNZXRhZGF0YS50b2tlbl9lbmRwb2ludCxcbiAgICAgICAgICAgICAgICBhenVyZVJlZ2lvblxuICAgICAgICAgICAgKTtcblxuICAgICAgICBpZiAocmVnaW9uYWxNZXRhZGF0YS5lbmRfc2Vzc2lvbl9lbmRwb2ludCkge1xuICAgICAgICAgICAgcmVnaW9uYWxNZXRhZGF0YS5lbmRfc2Vzc2lvbl9lbmRwb2ludCA9XG4gICAgICAgICAgICAgICAgQXV0aG9yaXR5LmJ1aWxkUmVnaW9uYWxBdXRob3JpdHlTdHJpbmcoXG4gICAgICAgICAgICAgICAgICAgIHJlZ2lvbmFsTWV0YWRhdGEuZW5kX3Nlc3Npb25fZW5kcG9pbnQsXG4gICAgICAgICAgICAgICAgICAgIGF6dXJlUmVnaW9uXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZWdpb25hbE1ldGFkYXRhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSBDSUFNX0FVVEhPUklZIGFzIHBlciB0aGUgYmVsb3cgcnVsZXM6XG4gICAgICogSWYgbm8gcGF0aCBzZWdtZW50cyBmb3VuZCBhbmQgaXQgaXMgYSBDSUFNIGF1dGhvcml0eSAoaG9zdG5hbWUgZW5kcyB3aXRoIC5jaWFtbG9naW4uY29tKSwgdGhlbiB0cmFuc2Zvcm0gaXRcbiAgICAgKlxuICAgICAqIE5PVEU6IFRoZSB0cmFuc2Zvcm1hdGlvbiBwYXRoIHNob3VsZCBnbyBhd2F5IG9uY2UgU1RTIHN1cHBvcnRzIENJQU0gd2l0aCB0aGUgZm9ybWF0OiBgdGVuYW50SWRvckRvbWFpbi5jaWFtbG9naW4uY29tYFxuICAgICAqIGBjaWFtbG9naW4uY29tYCBjYW4gYWxzbyBjaGFuZ2UgaW4gdGhlIGZ1dHVyZSBhbmQgd2Ugc2hvdWxkIGFjY29tbW9kYXRlIHRoZSBzYW1lXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXV0aG9yaXR5XG4gICAgICovXG4gICAgc3RhdGljIHRyYW5zZm9ybUNJQU1BdXRob3JpdHkoYXV0aG9yaXR5OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBsZXQgY2lhbUF1dGhvcml0eSA9IGF1dGhvcml0eTtcbiAgICAgICAgY29uc3QgYXV0aG9yaXR5VXJsID0gbmV3IFVybFN0cmluZyhhdXRob3JpdHkpO1xuICAgICAgICBjb25zdCBhdXRob3JpdHlVcmxDb21wb25lbnRzID0gYXV0aG9yaXR5VXJsLmdldFVybENvbXBvbmVudHMoKTtcblxuICAgICAgICAvLyBjaGVjayBpZiB0cmFuc2Zvcm1hdGlvbiBpcyBuZWVkZWRcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgYXV0aG9yaXR5VXJsQ29tcG9uZW50cy5QYXRoU2VnbWVudHMubGVuZ3RoID09PSAwICYmXG4gICAgICAgICAgICBhdXRob3JpdHlVcmxDb21wb25lbnRzLkhvc3ROYW1lQW5kUG9ydC5lbmRzV2l0aChcbiAgICAgICAgICAgICAgICBDb25zdGFudHMuQ0lBTV9BVVRIX1VSTFxuICAgICAgICAgICAgKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IHRlbmFudElkT3JEb21haW4gPVxuICAgICAgICAgICAgICAgIGF1dGhvcml0eVVybENvbXBvbmVudHMuSG9zdE5hbWVBbmRQb3J0LnNwbGl0KFwiLlwiKVswXTtcbiAgICAgICAgICAgIGNpYW1BdXRob3JpdHkgPSBgJHtjaWFtQXV0aG9yaXR5fSR7dGVuYW50SWRPckRvbWFpbn0ke0NvbnN0YW50cy5BQURfVEVOQU5UX0RPTUFJTl9TVUZGSVh9YDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjaWFtQXV0aG9yaXR5O1xuICAgIH1cbn1cblxuLyoqXG4gKiBFeHRyYWN0IHRlbmFudElkIGZyb20gYXV0aG9yaXR5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUZW5hbnRGcm9tQXV0aG9yaXR5U3RyaW5nKFxuICAgIGF1dGhvcml0eTogc3RyaW5nXG4pOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IGF1dGhvcml0eVVybCA9IG5ldyBVcmxTdHJpbmcoYXV0aG9yaXR5KTtcbiAgICBjb25zdCBhdXRob3JpdHlVcmxDb21wb25lbnRzID0gYXV0aG9yaXR5VXJsLmdldFVybENvbXBvbmVudHMoKTtcbiAgICAvKipcbiAgICAgKiBGb3IgY3JlZGVudGlhbCBtYXRjaGluZyBwdXJwb3NlcywgdGVuYW50SWQgaXMgdGhlIGxhc3QgcGF0aCBzZWdtZW50IG9mIHRoZSBhdXRob3JpdHkgVVJMOlxuICAgICAqICBBQUQgQXV0aG9yaXR5IC0gZG9tYWluL3RlbmFudElkIC0+IENyZWRlbnRpYWxzIGFyZSBjYWNoZWQgd2l0aCByZWFsbSA9IHRlbmFudElkXG4gICAgICogIEIyQyBBdXRob3JpdHkgLSBkb21haW4ve3RlbmFudElkfT8vLi4uL3BvbGljeSAtPiBDcmVkZW50aWFscyBhcmUgY2FjaGVkIHdpdGggcmVhbG0gPSBwb2xpY3lcbiAgICAgKiAgdGVuYW50SWQgaXMgZG93bmNhc2VkIGJlY2F1c2UgQjJDIHBvbGljaWVzIGNhbiBoYXZlIG1peGVkIGNhc2UgYnV0IHRmcCBjbGFpbSBpcyBkb3duY2FzZWRcbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB3ZSBtYXkgbm90IGhhdmUgYW55IHBhdGggc2VnbWVudHMgaW4gY2VydGFpbiBPSURDIHNjZW5hcmlvcy5cbiAgICAgKi9cbiAgICBjb25zdCB0ZW5hbnRJZCA9XG4gICAgICAgIGF1dGhvcml0eVVybENvbXBvbmVudHMuUGF0aFNlZ21lbnRzLnNsaWNlKC0xKVswXT8udG9Mb3dlckNhc2UoKTtcblxuICAgIHN3aXRjaCAodGVuYW50SWQpIHtcbiAgICAgICAgY2FzZSBBQURBdXRob3JpdHlDb25zdGFudHMuQ09NTU9OOlxuICAgICAgICBjYXNlIEFBREF1dGhvcml0eUNvbnN0YW50cy5PUkdBTklaQVRJT05TOlxuICAgICAgICBjYXNlIEFBREF1dGhvcml0eUNvbnN0YW50cy5DT05TVU1FUlM6XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHRlbmFudElkO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEF1dGhvcml0eVVyaShhdXRob3JpdHlVcmk6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGF1dGhvcml0eVVyaS5lbmRzV2l0aChDb25zdGFudHMuRk9SV0FSRF9TTEFTSClcbiAgICAgICAgPyBhdXRob3JpdHlVcmlcbiAgICAgICAgOiBgJHthdXRob3JpdHlVcml9JHtDb25zdGFudHMuRk9SV0FSRF9TTEFTSH1gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRTdGF0aWNBdXRob3JpdHlPcHRpb25zKFxuICAgIGF1dGhPcHRpb25zOiBQYXJ0aWFsPEF1dGhvcml0eU9wdGlvbnM+XG4pOiBTdGF0aWNBdXRob3JpdHlPcHRpb25zIHtcbiAgICBjb25zdCByYXdDbG91ZERpc2NvdmVyeU1ldGFkYXRhID0gYXV0aE9wdGlvbnMuY2xvdWREaXNjb3ZlcnlNZXRhZGF0YTtcbiAgICBsZXQgY2xvdWREaXNjb3ZlcnlNZXRhZGF0YTogQ2xvdWRJbnN0YW5jZURpc2NvdmVyeVJlc3BvbnNlIHwgdW5kZWZpbmVkID1cbiAgICAgICAgdW5kZWZpbmVkO1xuICAgIGlmIChyYXdDbG91ZERpc2NvdmVyeU1ldGFkYXRhKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjbG91ZERpc2NvdmVyeU1ldGFkYXRhID0gSlNPTi5wYXJzZShyYXdDbG91ZERpc2NvdmVyeU1ldGFkYXRhKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yKFxuICAgICAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmludmFsaWRDbG91ZERpc2NvdmVyeU1ldGFkYXRhXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGNhbm9uaWNhbEF1dGhvcml0eTogYXV0aE9wdGlvbnMuYXV0aG9yaXR5XG4gICAgICAgICAgICA/IGZvcm1hdEF1dGhvcml0eVVyaShhdXRoT3B0aW9ucy5hdXRob3JpdHkpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAga25vd25BdXRob3JpdGllczogYXV0aE9wdGlvbnMua25vd25BdXRob3JpdGllcyxcbiAgICAgICAgY2xvdWREaXNjb3ZlcnlNZXRhZGF0YTogY2xvdWREaXNjb3ZlcnlNZXRhZGF0YSxcbiAgICB9O1xufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBBdXRob3JpdHksIGZvcm1hdEF1dGhvcml0eVVyaSB9IGZyb20gXCIuL0F1dGhvcml0eS5qc1wiO1xuaW1wb3J0IHsgSU5ldHdvcmtNb2R1bGUgfSBmcm9tIFwiLi4vbmV0d29yay9JTmV0d29ya01vZHVsZS5qc1wiO1xuaW1wb3J0IHtcbiAgICBjcmVhdGVDbGllbnRBdXRoRXJyb3IsXG4gICAgQ2xpZW50QXV0aEVycm9yQ29kZXMsXG59IGZyb20gXCIuLi9lcnJvci9DbGllbnRBdXRoRXJyb3IuanNcIjtcbmltcG9ydCB7IElDYWNoZU1hbmFnZXIgfSBmcm9tIFwiLi4vY2FjaGUvaW50ZXJmYWNlL0lDYWNoZU1hbmFnZXIuanNcIjtcbmltcG9ydCB7IEF1dGhvcml0eU9wdGlvbnMgfSBmcm9tIFwiLi9BdXRob3JpdHlPcHRpb25zLmpzXCI7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiLi4vbG9nZ2VyL0xvZ2dlci5qc1wiO1xuaW1wb3J0IHsgSVBlcmZvcm1hbmNlQ2xpZW50IH0gZnJvbSBcIi4uL3RlbGVtZXRyeS9wZXJmb3JtYW5jZS9JUGVyZm9ybWFuY2VDbGllbnQuanNcIjtcbmltcG9ydCB7IFBlcmZvcm1hbmNlRXZlbnRzIH0gZnJvbSBcIi4uL3RlbGVtZXRyeS9wZXJmb3JtYW5jZS9QZXJmb3JtYW5jZUV2ZW50LmpzXCI7XG5pbXBvcnQgeyBpbnZva2VBc3luYyB9IGZyb20gXCIuLi91dGlscy9GdW5jdGlvbldyYXBwZXJzLmpzXCI7XG5cbi8qKlxuICogQ3JlYXRlIGFuIGF1dGhvcml0eSBvYmplY3Qgb2YgdGhlIGNvcnJlY3QgdHlwZSBiYXNlZCBvbiB0aGUgdXJsXG4gKiBQZXJmb3JtcyBiYXNpYyBhdXRob3JpdHkgdmFsaWRhdGlvbiAtIGNoZWNrcyB0byBzZWUgaWYgdGhlIGF1dGhvcml0eSBpcyBvZiBhIHZhbGlkIHR5cGUgKGkuZS4gYWFkLCBiMmMsIGFkZnMpXG4gKlxuICogQWxzbyBwZXJmb3JtcyBlbmRwb2ludCBkaXNjb3ZlcnkuXG4gKlxuICogQHBhcmFtIGF1dGhvcml0eVVyaVxuICogQHBhcmFtIG5ldHdvcmtDbGllbnRcbiAqIEBwYXJhbSBwcm90b2NvbE1vZGVcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRGlzY292ZXJlZEluc3RhbmNlKFxuICAgIGF1dGhvcml0eVVyaTogc3RyaW5nLFxuICAgIG5ldHdvcmtDbGllbnQ6IElOZXR3b3JrTW9kdWxlLFxuICAgIGNhY2hlTWFuYWdlcjogSUNhY2hlTWFuYWdlcixcbiAgICBhdXRob3JpdHlPcHRpb25zOiBBdXRob3JpdHlPcHRpb25zLFxuICAgIGxvZ2dlcjogTG9nZ2VyLFxuICAgIGNvcnJlbGF0aW9uSWQ6IHN0cmluZyxcbiAgICBwZXJmb3JtYW5jZUNsaWVudD86IElQZXJmb3JtYW5jZUNsaWVudFxuKTogUHJvbWlzZTxBdXRob3JpdHk+IHtcbiAgICBwZXJmb3JtYW5jZUNsaWVudD8uYWRkUXVldWVNZWFzdXJlbWVudChcbiAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuQXV0aG9yaXR5RmFjdG9yeUNyZWF0ZURpc2NvdmVyZWRJbnN0YW5jZSxcbiAgICAgICAgY29ycmVsYXRpb25JZFxuICAgICk7XG4gICAgY29uc3QgYXV0aG9yaXR5VXJpRmluYWwgPSBBdXRob3JpdHkudHJhbnNmb3JtQ0lBTUF1dGhvcml0eShcbiAgICAgICAgZm9ybWF0QXV0aG9yaXR5VXJpKGF1dGhvcml0eVVyaSlcbiAgICApO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBhdXRob3JpdHkgYW5kIHBlcmZvcm0gZGlzY292ZXJ5IGVuZHBvaW50IGNoZWNrLlxuICAgIGNvbnN0IGFjcXVpcmVUb2tlbkF1dGhvcml0eTogQXV0aG9yaXR5ID0gbmV3IEF1dGhvcml0eShcbiAgICAgICAgYXV0aG9yaXR5VXJpRmluYWwsXG4gICAgICAgIG5ldHdvcmtDbGllbnQsXG4gICAgICAgIGNhY2hlTWFuYWdlcixcbiAgICAgICAgYXV0aG9yaXR5T3B0aW9ucyxcbiAgICAgICAgbG9nZ2VyLFxuICAgICAgICBjb3JyZWxhdGlvbklkLFxuICAgICAgICBwZXJmb3JtYW5jZUNsaWVudFxuICAgICk7XG5cbiAgICB0cnkge1xuICAgICAgICBhd2FpdCBpbnZva2VBc3luYyhcbiAgICAgICAgICAgIGFjcXVpcmVUb2tlbkF1dGhvcml0eS5yZXNvbHZlRW5kcG9pbnRzQXN5bmMuYmluZChcbiAgICAgICAgICAgICAgICBhY3F1aXJlVG9rZW5BdXRob3JpdHlcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5BdXRob3JpdHlSZXNvbHZlRW5kcG9pbnRzQXN5bmMsXG4gICAgICAgICAgICBsb2dnZXIsXG4gICAgICAgICAgICBwZXJmb3JtYW5jZUNsaWVudCxcbiAgICAgICAgICAgIGNvcnJlbGF0aW9uSWRcbiAgICAgICAgKSgpO1xuICAgICAgICByZXR1cm4gYWNxdWlyZVRva2VuQXV0aG9yaXR5O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKFxuICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuZW5kcG9pbnRSZXNvbHV0aW9uRXJyb3JcbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEF1dGhFcnJvciB9IGZyb20gXCIuL0F1dGhFcnJvci5qc1wiO1xuXG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIHRoZXJlIGlzIGFuIGVycm9yIHdpdGggdGhlIHNlcnZlciBjb2RlLCBmb3IgZXhhbXBsZSwgdW5hdmFpbGFiaWxpdHkuXG4gKi9cbmV4cG9ydCBjbGFzcyBTZXJ2ZXJFcnJvciBleHRlbmRzIEF1dGhFcnJvciB7XG4gICAgLyoqXG4gICAgICogU2VydmVyIGVycm9yIG51bWJlcjtcbiAgICAgKi9cbiAgICByZWFkb25seSBlcnJvck5vPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogSHR0cCBzdGF0dXMgbnVtYmVyO1xuICAgICAqL1xuICAgIHJlYWRvbmx5IHN0YXR1cz86IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBlcnJvckNvZGU/OiBzdHJpbmcsXG4gICAgICAgIGVycm9yTWVzc2FnZT86IHN0cmluZyxcbiAgICAgICAgc3ViRXJyb3I/OiBzdHJpbmcsXG4gICAgICAgIGVycm9yTm8/OiBzdHJpbmcsXG4gICAgICAgIHN0YXR1cz86IG51bWJlclxuICAgICkge1xuICAgICAgICBzdXBlcihlcnJvckNvZGUsIGVycm9yTWVzc2FnZSwgc3ViRXJyb3IpO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIlNlcnZlckVycm9yXCI7XG4gICAgICAgIHRoaXMuZXJyb3JObyA9IGVycm9yTm87XG4gICAgICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzO1xuXG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBTZXJ2ZXJFcnJvci5wcm90b3R5cGUpO1xuICAgIH1cbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgU2hyT3B0aW9ucyB9IGZyb20gXCIuLi9jcnlwdG8vU2lnbmVkSHR0cFJlcXVlc3QuanNcIjtcbmltcG9ydCB7IEJhc2VBdXRoUmVxdWVzdCB9IGZyb20gXCIuLi9yZXF1ZXN0L0Jhc2VBdXRoUmVxdWVzdC5qc1wiO1xuaW1wb3J0IHsgQXV0aGVudGljYXRpb25TY2hlbWUgfSBmcm9tIFwiLi4vdXRpbHMvQ29uc3RhbnRzLmpzXCI7XG5cbi8qKlxuICogVHlwZSByZXByZXNlbnRpbmcgYSB1bmlxdWUgcmVxdWVzdCB0aHVtYnByaW50LlxuICovXG5leHBvcnQgdHlwZSBSZXF1ZXN0VGh1bWJwcmludCA9IHtcbiAgICBjbGllbnRJZDogc3RyaW5nO1xuICAgIGF1dGhvcml0eTogc3RyaW5nO1xuICAgIHNjb3BlczogQXJyYXk8c3RyaW5nPjtcbiAgICBob21lQWNjb3VudElkZW50aWZpZXI/OiBzdHJpbmc7XG4gICAgY2xhaW1zPzogc3RyaW5nO1xuICAgIGF1dGhlbnRpY2F0aW9uU2NoZW1lPzogQXV0aGVudGljYXRpb25TY2hlbWU7XG4gICAgcmVzb3VyY2VSZXF1ZXN0TWV0aG9kPzogc3RyaW5nO1xuICAgIHJlc291cmNlUmVxdWVzdFVyaT86IHN0cmluZztcbiAgICBzaHJDbGFpbXM/OiBzdHJpbmc7XG4gICAgc3NoS2lkPzogc3RyaW5nO1xuICAgIHNock9wdGlvbnM/OiBTaHJPcHRpb25zO1xuICAgIGVtYmVkZGVkQ2xpZW50SWQ/OiBzdHJpbmc7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVxdWVzdFRodW1icHJpbnQoXG4gICAgY2xpZW50SWQ6IHN0cmluZyxcbiAgICByZXF1ZXN0OiBCYXNlQXV0aFJlcXVlc3QsXG4gICAgaG9tZUFjY291bnRJZD86IHN0cmluZ1xuKTogUmVxdWVzdFRodW1icHJpbnQge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNsaWVudElkOiBjbGllbnRJZCxcbiAgICAgICAgYXV0aG9yaXR5OiByZXF1ZXN0LmF1dGhvcml0eSxcbiAgICAgICAgc2NvcGVzOiByZXF1ZXN0LnNjb3BlcyxcbiAgICAgICAgaG9tZUFjY291bnRJZGVudGlmaWVyOiBob21lQWNjb3VudElkLFxuICAgICAgICBjbGFpbXM6IHJlcXVlc3QuY2xhaW1zLFxuICAgICAgICBhdXRoZW50aWNhdGlvblNjaGVtZTogcmVxdWVzdC5hdXRoZW50aWNhdGlvblNjaGVtZSxcbiAgICAgICAgcmVzb3VyY2VSZXF1ZXN0TWV0aG9kOiByZXF1ZXN0LnJlc291cmNlUmVxdWVzdE1ldGhvZCxcbiAgICAgICAgcmVzb3VyY2VSZXF1ZXN0VXJpOiByZXF1ZXN0LnJlc291cmNlUmVxdWVzdFVyaSxcbiAgICAgICAgc2hyQ2xhaW1zOiByZXF1ZXN0LnNockNsYWltcyxcbiAgICAgICAgc3NoS2lkOiByZXF1ZXN0LnNzaEtpZCxcbiAgICAgICAgZW1iZWRkZWRDbGllbnRJZDpcbiAgICAgICAgICAgIHJlcXVlc3QuZW1iZWRkZWRDbGllbnRJZCB8fCByZXF1ZXN0LnRva2VuQm9keVBhcmFtZXRlcnM/LmNsaWVudElkLFxuICAgIH07XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IE5ldHdvcmtSZXNwb25zZSB9IGZyb20gXCIuL05ldHdvcmtSZXNwb25zZS5qc1wiO1xuaW1wb3J0IHsgU2VydmVyQXV0aG9yaXphdGlvblRva2VuUmVzcG9uc2UgfSBmcm9tIFwiLi4vcmVzcG9uc2UvU2VydmVyQXV0aG9yaXphdGlvblRva2VuUmVzcG9uc2UuanNcIjtcbmltcG9ydCB7XG4gICAgSGVhZGVyTmFtZXMsXG4gICAgVGhyb3R0bGluZ0NvbnN0YW50cyxcbiAgICBDb25zdGFudHMsXG59IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcbmltcG9ydCB7IENhY2hlTWFuYWdlciB9IGZyb20gXCIuLi9jYWNoZS9DYWNoZU1hbmFnZXIuanNcIjtcbmltcG9ydCB7IFNlcnZlckVycm9yIH0gZnJvbSBcIi4uL2Vycm9yL1NlcnZlckVycm9yLmpzXCI7XG5pbXBvcnQge1xuICAgIGdldFJlcXVlc3RUaHVtYnByaW50LFxuICAgIFJlcXVlc3RUaHVtYnByaW50LFxufSBmcm9tIFwiLi9SZXF1ZXN0VGh1bWJwcmludC5qc1wiO1xuaW1wb3J0IHsgVGhyb3R0bGluZ0VudGl0eSB9IGZyb20gXCIuLi9jYWNoZS9lbnRpdGllcy9UaHJvdHRsaW5nRW50aXR5LmpzXCI7XG5pbXBvcnQgeyBCYXNlQXV0aFJlcXVlc3QgfSBmcm9tIFwiLi4vcmVxdWVzdC9CYXNlQXV0aFJlcXVlc3QuanNcIjtcblxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGNsYXNzIFRocm90dGxpbmdVdGlscyB7XG4gICAgLyoqXG4gICAgICogUHJlcGFyZXMgYSBSZXF1ZXN0VGh1bWJwcmludCB0byBiZSBzdG9yZWQgYXMgYSBrZXkuXG4gICAgICogQHBhcmFtIHRodW1icHJpbnRcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2VuZXJhdGVUaHJvdHRsaW5nU3RvcmFnZUtleSh0aHVtYnByaW50OiBSZXF1ZXN0VGh1bWJwcmludCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBgJHtUaHJvdHRsaW5nQ29uc3RhbnRzLlRIUk9UVExJTkdfUFJFRklYfS4ke0pTT04uc3RyaW5naWZ5KFxuICAgICAgICAgICAgdGh1bWJwcmludFxuICAgICAgICApfWA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgbmVjZXNzYXJ5IHRocm90dGxpbmcgY2hlY2tzIGJlZm9yZSBhIG5ldHdvcmsgcmVxdWVzdC5cbiAgICAgKiBAcGFyYW0gY2FjaGVNYW5hZ2VyXG4gICAgICogQHBhcmFtIHRodW1icHJpbnRcbiAgICAgKi9cbiAgICBzdGF0aWMgcHJlUHJvY2VzcyhcbiAgICAgICAgY2FjaGVNYW5hZ2VyOiBDYWNoZU1hbmFnZXIsXG4gICAgICAgIHRodW1icHJpbnQ6IFJlcXVlc3RUaHVtYnByaW50XG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGtleSA9IFRocm90dGxpbmdVdGlscy5nZW5lcmF0ZVRocm90dGxpbmdTdG9yYWdlS2V5KHRodW1icHJpbnQpO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGNhY2hlTWFuYWdlci5nZXRUaHJvdHRsaW5nQ2FjaGUoa2V5KTtcblxuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZS50aHJvdHRsZVRpbWUgPCBEYXRlLm5vdygpKSB7XG4gICAgICAgICAgICAgICAgY2FjaGVNYW5hZ2VyLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgU2VydmVyRXJyb3IoXG4gICAgICAgICAgICAgICAgdmFsdWUuZXJyb3JDb2Rlcz8uam9pbihcIiBcIikgfHwgQ29uc3RhbnRzLkVNUFRZX1NUUklORyxcbiAgICAgICAgICAgICAgICB2YWx1ZS5lcnJvck1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgdmFsdWUuc3ViRXJyb3JcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBuZWNlc3NhcnkgdGhyb3R0bGluZyBjaGVja3MgYWZ0ZXIgYSBuZXR3b3JrIHJlcXVlc3QuXG4gICAgICogQHBhcmFtIGNhY2hlTWFuYWdlclxuICAgICAqIEBwYXJhbSB0aHVtYnByaW50XG4gICAgICogQHBhcmFtIHJlc3BvbnNlXG4gICAgICovXG4gICAgc3RhdGljIHBvc3RQcm9jZXNzKFxuICAgICAgICBjYWNoZU1hbmFnZXI6IENhY2hlTWFuYWdlcixcbiAgICAgICAgdGh1bWJwcmludDogUmVxdWVzdFRodW1icHJpbnQsXG4gICAgICAgIHJlc3BvbnNlOiBOZXR3b3JrUmVzcG9uc2U8U2VydmVyQXV0aG9yaXphdGlvblRva2VuUmVzcG9uc2U+XG4gICAgKTogdm9pZCB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIFRocm90dGxpbmdVdGlscy5jaGVja1Jlc3BvbnNlU3RhdHVzKHJlc3BvbnNlKSB8fFxuICAgICAgICAgICAgVGhyb3R0bGluZ1V0aWxzLmNoZWNrUmVzcG9uc2VGb3JSZXRyeUFmdGVyKHJlc3BvbnNlKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IHRodW1icHJpbnRWYWx1ZTogVGhyb3R0bGluZ0VudGl0eSA9IHtcbiAgICAgICAgICAgICAgICB0aHJvdHRsZVRpbWU6IFRocm90dGxpbmdVdGlscy5jYWxjdWxhdGVUaHJvdHRsZVRpbWUoXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHJlc3BvbnNlLmhlYWRlcnNbSGVhZGVyTmFtZXMuUkVUUllfQUZURVJdKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgZXJyb3I6IHJlc3BvbnNlLmJvZHkuZXJyb3IsXG4gICAgICAgICAgICAgICAgZXJyb3JDb2RlczogcmVzcG9uc2UuYm9keS5lcnJvcl9jb2RlcyxcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IHJlc3BvbnNlLmJvZHkuZXJyb3JfZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgc3ViRXJyb3I6IHJlc3BvbnNlLmJvZHkuc3ViZXJyb3IsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2FjaGVNYW5hZ2VyLnNldFRocm90dGxpbmdDYWNoZShcbiAgICAgICAgICAgICAgICBUaHJvdHRsaW5nVXRpbHMuZ2VuZXJhdGVUaHJvdHRsaW5nU3RvcmFnZUtleSh0aHVtYnByaW50KSxcbiAgICAgICAgICAgICAgICB0aHVtYnByaW50VmFsdWVcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgYSBOZXR3b3JrUmVzcG9uc2Ugb2JqZWN0J3Mgc3RhdHVzIGNvZGVzIGFnYWluc3QgNDI5IG9yIDV4eFxuICAgICAqIEBwYXJhbSByZXNwb25zZVxuICAgICAqL1xuICAgIHN0YXRpYyBjaGVja1Jlc3BvbnNlU3RhdHVzKFxuICAgICAgICByZXNwb25zZTogTmV0d29ya1Jlc3BvbnNlPFNlcnZlckF1dGhvcml6YXRpb25Ub2tlblJlc3BvbnNlPlxuICAgICk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgcmVzcG9uc2Uuc3RhdHVzID09PSA0MjkgfHxcbiAgICAgICAgICAgIChyZXNwb25zZS5zdGF0dXMgPj0gNTAwICYmIHJlc3BvbnNlLnN0YXR1cyA8IDYwMClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgYSBOZXR3b3JrUmVzcG9uc2Ugb2JqZWN0J3MgUmV0cnlBZnRlciBoZWFkZXJcbiAgICAgKiBAcGFyYW0gcmVzcG9uc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgY2hlY2tSZXNwb25zZUZvclJldHJ5QWZ0ZXIoXG4gICAgICAgIHJlc3BvbnNlOiBOZXR3b3JrUmVzcG9uc2U8U2VydmVyQXV0aG9yaXphdGlvblRva2VuUmVzcG9uc2U+XG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIGlmIChyZXNwb25zZS5oZWFkZXJzKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLmhlYWRlcnMuaGFzT3duUHJvcGVydHkoSGVhZGVyTmFtZXMuUkVUUllfQUZURVIpICYmXG4gICAgICAgICAgICAgICAgKHJlc3BvbnNlLnN0YXR1cyA8IDIwMCB8fCByZXNwb25zZS5zdGF0dXMgPj0gMzAwKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlcyB0aGUgVW5peC10aW1lIHZhbHVlIGZvciBhIHRocm90dGxlIHRvIGV4cGlyZSBnaXZlbiB0aHJvdHRsZVRpbWUgaW4gc2Vjb25kcy5cbiAgICAgKiBAcGFyYW0gdGhyb3R0bGVUaW1lXG4gICAgICovXG4gICAgc3RhdGljIGNhbGN1bGF0ZVRocm90dGxlVGltZSh0aHJvdHRsZVRpbWU6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IHRpbWUgPSB0aHJvdHRsZVRpbWUgPD0gMCA/IDAgOiB0aHJvdHRsZVRpbWU7XG5cbiAgICAgICAgY29uc3QgY3VycmVudFNlY29uZHMgPSBEYXRlLm5vdygpIC8gMTAwMDtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoXG4gICAgICAgICAgICBNYXRoLm1pbihcbiAgICAgICAgICAgICAgICBjdXJyZW50U2Vjb25kcyArXG4gICAgICAgICAgICAgICAgICAgICh0aW1lIHx8IFRocm90dGxpbmdDb25zdGFudHMuREVGQVVMVF9USFJPVFRMRV9USU1FX1NFQ09ORFMpLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRTZWNvbmRzICtcbiAgICAgICAgICAgICAgICAgICAgVGhyb3R0bGluZ0NvbnN0YW50cy5ERUZBVUxUX01BWF9USFJPVFRMRV9USU1FX1NFQ09ORFNcbiAgICAgICAgICAgICkgKiAxMDAwXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgc3RhdGljIHJlbW92ZVRocm90dGxlKFxuICAgICAgICBjYWNoZU1hbmFnZXI6IENhY2hlTWFuYWdlcixcbiAgICAgICAgY2xpZW50SWQ6IHN0cmluZyxcbiAgICAgICAgcmVxdWVzdDogQmFzZUF1dGhSZXF1ZXN0LFxuICAgICAgICBob21lQWNjb3VudElkZW50aWZpZXI/OiBzdHJpbmdcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgdGh1bWJwcmludCA9IGdldFJlcXVlc3RUaHVtYnByaW50KFxuICAgICAgICAgICAgY2xpZW50SWQsXG4gICAgICAgICAgICByZXF1ZXN0LFxuICAgICAgICAgICAgaG9tZUFjY291bnRJZGVudGlmaWVyXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGtleSA9IHRoaXMuZ2VuZXJhdGVUaHJvdHRsaW5nU3RvcmFnZUtleSh0aHVtYnByaW50KTtcbiAgICAgICAgY2FjaGVNYW5hZ2VyLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICB9XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEF1dGhFcnJvciB9IGZyb20gXCIuL0F1dGhFcnJvci5qc1wiO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgbmV0d29yayByZWxhdGVkIGVycm9yc1xuICovXG5leHBvcnQgY2xhc3MgTmV0d29ya0Vycm9yIGV4dGVuZHMgQXV0aEVycm9yIHtcbiAgICBlcnJvcjogQXV0aEVycm9yO1xuICAgIGh0dHBTdGF0dXM/OiBudW1iZXI7XG4gICAgcmVzcG9uc2VIZWFkZXJzPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBlcnJvcjogQXV0aEVycm9yLFxuICAgICAgICBodHRwU3RhdHVzPzogbnVtYmVyLFxuICAgICAgICByZXNwb25zZUhlYWRlcnM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+XG4gICAgKSB7XG4gICAgICAgIHN1cGVyKGVycm9yLmVycm9yQ29kZSwgZXJyb3IuZXJyb3JNZXNzYWdlLCBlcnJvci5zdWJFcnJvcik7XG5cbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIE5ldHdvcmtFcnJvci5wcm90b3R5cGUpO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIk5ldHdvcmtFcnJvclwiO1xuICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XG4gICAgICAgIHRoaXMuaHR0cFN0YXR1cyA9IGh0dHBTdGF0dXM7XG4gICAgICAgIHRoaXMucmVzcG9uc2VIZWFkZXJzID0gcmVzcG9uc2VIZWFkZXJzO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIE5ldHdvcmtFcnJvciBvYmplY3QgZm9yIGEgZmFpbGVkIG5ldHdvcmsgcmVxdWVzdFxuICogQHBhcmFtIGVycm9yIC0gRXJyb3IgdG8gYmUgdGhyb3duIGJhY2sgdG8gdGhlIGNhbGxlclxuICogQHBhcmFtIGh0dHBTdGF0dXMgLSBTdGF0dXMgY29kZSBvZiB0aGUgbmV0d29yayByZXF1ZXN0XG4gKiBAcGFyYW0gcmVzcG9uc2VIZWFkZXJzIC0gUmVzcG9uc2UgaGVhZGVycyBvZiB0aGUgbmV0d29yayByZXF1ZXN0LCB3aGVuIGF2YWlsYWJsZVxuICogQHJldHVybnMgTmV0d29ya0Vycm9yIG9iamVjdFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTmV0d29ya0Vycm9yKFxuICAgIGVycm9yOiBBdXRoRXJyb3IsXG4gICAgaHR0cFN0YXR1cz86IG51bWJlcixcbiAgICByZXNwb25zZUhlYWRlcnM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+XG4pOiBOZXR3b3JrRXJyb3Ige1xuICAgIHJldHVybiBuZXcgTmV0d29ya0Vycm9yKGVycm9yLCBodHRwU3RhdHVzLCByZXNwb25zZUhlYWRlcnMpO1xufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICAgIENsaWVudENvbmZpZ3VyYXRpb24sXG4gICAgYnVpbGRDbGllbnRDb25maWd1cmF0aW9uLFxuICAgIENvbW1vbkNsaWVudENvbmZpZ3VyYXRpb24sXG59IGZyb20gXCIuLi9jb25maWcvQ2xpZW50Q29uZmlndXJhdGlvbi5qc1wiO1xuaW1wb3J0IHtcbiAgICBJTmV0d29ya01vZHVsZSxcbiAgICBOZXR3b3JrUmVxdWVzdE9wdGlvbnMsXG59IGZyb20gXCIuLi9uZXR3b3JrL0lOZXR3b3JrTW9kdWxlLmpzXCI7XG5pbXBvcnQgeyBOZXR3b3JrUmVzcG9uc2UgfSBmcm9tIFwiLi4vbmV0d29yay9OZXR3b3JrUmVzcG9uc2UuanNcIjtcbmltcG9ydCB7IElDcnlwdG8gfSBmcm9tIFwiLi4vY3J5cHRvL0lDcnlwdG8uanNcIjtcbmltcG9ydCB7IEF1dGhvcml0eSB9IGZyb20gXCIuLi9hdXRob3JpdHkvQXV0aG9yaXR5LmpzXCI7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiLi4vbG9nZ2VyL0xvZ2dlci5qc1wiO1xuaW1wb3J0IHsgQ29uc3RhbnRzLCBIZWFkZXJOYW1lcyB9IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcbmltcG9ydCB7IFNlcnZlckF1dGhvcml6YXRpb25Ub2tlblJlc3BvbnNlIH0gZnJvbSBcIi4uL3Jlc3BvbnNlL1NlcnZlckF1dGhvcml6YXRpb25Ub2tlblJlc3BvbnNlLmpzXCI7XG5pbXBvcnQgeyBDYWNoZU1hbmFnZXIgfSBmcm9tIFwiLi4vY2FjaGUvQ2FjaGVNYW5hZ2VyLmpzXCI7XG5pbXBvcnQgeyBTZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyIH0gZnJvbSBcIi4uL3RlbGVtZXRyeS9zZXJ2ZXIvU2VydmVyVGVsZW1ldHJ5TWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgUmVxdWVzdFRodW1icHJpbnQgfSBmcm9tIFwiLi4vbmV0d29yay9SZXF1ZXN0VGh1bWJwcmludC5qc1wiO1xuaW1wb3J0IHsgdmVyc2lvbiwgbmFtZSB9IGZyb20gXCIuLi9wYWNrYWdlTWV0YWRhdGEuanNcIjtcbmltcG9ydCB7IENjc0NyZWRlbnRpYWwsIENjc0NyZWRlbnRpYWxUeXBlIH0gZnJvbSBcIi4uL2FjY291bnQvQ2NzQ3JlZGVudGlhbC5qc1wiO1xuaW1wb3J0IHsgYnVpbGRDbGllbnRJbmZvRnJvbUhvbWVBY2NvdW50SWQgfSBmcm9tIFwiLi4vYWNjb3VudC9DbGllbnRJbmZvLmpzXCI7XG5pbXBvcnQgeyBJUGVyZm9ybWFuY2VDbGllbnQgfSBmcm9tIFwiLi4vdGVsZW1ldHJ5L3BlcmZvcm1hbmNlL0lQZXJmb3JtYW5jZUNsaWVudC5qc1wiO1xuaW1wb3J0ICogYXMgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIgZnJvbSBcIi4uL3JlcXVlc3QvUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuanNcIjtcbmltcG9ydCAqIGFzIFVybFV0aWxzIGZyb20gXCIuLi91dGlscy9VcmxVdGlscy5qc1wiO1xuaW1wb3J0IHsgQmFzZUF1dGhSZXF1ZXN0IH0gZnJvbSBcIi4uL3JlcXVlc3QvQmFzZUF1dGhSZXF1ZXN0LmpzXCI7XG5pbXBvcnQgeyBjcmVhdGVEaXNjb3ZlcmVkSW5zdGFuY2UgfSBmcm9tIFwiLi4vYXV0aG9yaXR5L0F1dGhvcml0eUZhY3RvcnkuanNcIjtcbmltcG9ydCB7IFBlcmZvcm1hbmNlRXZlbnRzIH0gZnJvbSBcIi4uL3RlbGVtZXRyeS9wZXJmb3JtYW5jZS9QZXJmb3JtYW5jZUV2ZW50LmpzXCI7XG5pbXBvcnQgeyBUaHJvdHRsaW5nVXRpbHMgfSBmcm9tIFwiLi4vbmV0d29yay9UaHJvdHRsaW5nVXRpbHMuanNcIjtcbmltcG9ydCB7IEF1dGhFcnJvciB9IGZyb20gXCIuLi9lcnJvci9BdXRoRXJyb3IuanNcIjtcbmltcG9ydCB7XG4gICAgQ2xpZW50QXV0aEVycm9yQ29kZXMsXG4gICAgY3JlYXRlQ2xpZW50QXV0aEVycm9yLFxufSBmcm9tIFwiLi4vZXJyb3IvQ2xpZW50QXV0aEVycm9yLmpzXCI7XG5pbXBvcnQgeyBOZXR3b3JrRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3IvTmV0d29ya0Vycm9yLmpzXCI7XG5pbXBvcnQgeyBpbnZva2VBc3luYyB9IGZyb20gXCIuLi91dGlscy9GdW5jdGlvbldyYXBwZXJzLmpzXCI7XG5cbi8qKlxuICogQmFzZSBhcHBsaWNhdGlvbiBjbGFzcyB3aGljaCB3aWxsIGNvbnN0cnVjdCByZXF1ZXN0cyB0byBzZW5kIHRvIGFuZCBoYW5kbGUgcmVzcG9uc2VzIGZyb20gdGhlIE1pY3Jvc29mdCBTVFMgdXNpbmcgdGhlIGF1dGhvcml6YXRpb24gY29kZSBmbG93LlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYXNlQ2xpZW50IHtcbiAgICAvLyBMb2dnZXIgb2JqZWN0XG4gICAgcHVibGljIGxvZ2dlcjogTG9nZ2VyO1xuXG4gICAgLy8gQXBwbGljYXRpb24gY29uZmlnXG4gICAgcHJvdGVjdGVkIGNvbmZpZzogQ29tbW9uQ2xpZW50Q29uZmlndXJhdGlvbjtcblxuICAgIC8vIENyeXB0byBJbnRlcmZhY2VcbiAgICBwcm90ZWN0ZWQgY3J5cHRvVXRpbHM6IElDcnlwdG87XG5cbiAgICAvLyBTdG9yYWdlIEludGVyZmFjZVxuICAgIHByb3RlY3RlZCBjYWNoZU1hbmFnZXI6IENhY2hlTWFuYWdlcjtcblxuICAgIC8vIE5ldHdvcmsgSW50ZXJmYWNlXG4gICAgcHJvdGVjdGVkIG5ldHdvcmtDbGllbnQ6IElOZXR3b3JrTW9kdWxlO1xuXG4gICAgLy8gU2VydmVyIFRlbGVtZXRyeSBNYW5hZ2VyXG4gICAgcHJvdGVjdGVkIHNlcnZlclRlbGVtZXRyeU1hbmFnZXI6IFNlcnZlclRlbGVtZXRyeU1hbmFnZXIgfCBudWxsO1xuXG4gICAgLy8gRGVmYXVsdCBhdXRob3JpdHkgb2JqZWN0XG4gICAgcHVibGljIGF1dGhvcml0eTogQXV0aG9yaXR5O1xuXG4gICAgLy8gUGVyZm9ybWFuY2UgdGVsZW1ldHJ5IGNsaWVudFxuICAgIHByb3RlY3RlZCBwZXJmb3JtYW5jZUNsaWVudD86IElQZXJmb3JtYW5jZUNsaWVudDtcblxuICAgIHByb3RlY3RlZCBjb25zdHJ1Y3RvcihcbiAgICAgICAgY29uZmlndXJhdGlvbjogQ2xpZW50Q29uZmlndXJhdGlvbixcbiAgICAgICAgcGVyZm9ybWFuY2VDbGllbnQ/OiBJUGVyZm9ybWFuY2VDbGllbnRcbiAgICApIHtcbiAgICAgICAgLy8gU2V0IHRoZSBjb25maWd1cmF0aW9uXG4gICAgICAgIHRoaXMuY29uZmlnID0gYnVpbGRDbGllbnRDb25maWd1cmF0aW9uKGNvbmZpZ3VyYXRpb24pO1xuXG4gICAgICAgIC8vIEluaXRpYWxpemUgdGhlIGxvZ2dlclxuICAgICAgICB0aGlzLmxvZ2dlciA9IG5ldyBMb2dnZXIodGhpcy5jb25maWcubG9nZ2VyT3B0aW9ucywgbmFtZSwgdmVyc2lvbik7XG5cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBjcnlwdG9cbiAgICAgICAgdGhpcy5jcnlwdG9VdGlscyA9IHRoaXMuY29uZmlnLmNyeXB0b0ludGVyZmFjZTtcblxuICAgICAgICAvLyBJbml0aWFsaXplIHN0b3JhZ2UgaW50ZXJmYWNlXG4gICAgICAgIHRoaXMuY2FjaGVNYW5hZ2VyID0gdGhpcy5jb25maWcuc3RvcmFnZUludGVyZmFjZTtcblxuICAgICAgICAvLyBTZXQgdGhlIG5ldHdvcmsgaW50ZXJmYWNlXG4gICAgICAgIHRoaXMubmV0d29ya0NsaWVudCA9IHRoaXMuY29uZmlnLm5ldHdvcmtJbnRlcmZhY2U7XG5cbiAgICAgICAgLy8gU2V0IFRlbGVtZXRyeU1hbmFnZXJcbiAgICAgICAgdGhpcy5zZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyID0gdGhpcy5jb25maWcuc2VydmVyVGVsZW1ldHJ5TWFuYWdlcjtcblxuICAgICAgICAvLyBzZXQgQXV0aG9yaXR5XG4gICAgICAgIHRoaXMuYXV0aG9yaXR5ID0gdGhpcy5jb25maWcuYXV0aE9wdGlvbnMuYXV0aG9yaXR5O1xuXG4gICAgICAgIC8vIHNldCBwZXJmb3JtYW5jZSB0ZWxlbWV0cnkgY2xpZW50XG4gICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQgPSBwZXJmb3JtYW5jZUNsaWVudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGRlZmF1bHQgaGVhZGVycyBmb3IgcmVxdWVzdHMgdG8gdG9rZW4gZW5kcG9pbnRcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgY3JlYXRlVG9rZW5SZXF1ZXN0SGVhZGVycyhcbiAgICAgICAgY2NzQ3JlZD86IENjc0NyZWRlbnRpYWxcbiAgICApOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHtcbiAgICAgICAgY29uc3QgaGVhZGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuICAgICAgICBoZWFkZXJzW0hlYWRlck5hbWVzLkNPTlRFTlRfVFlQRV0gPSBDb25zdGFudHMuVVJMX0ZPUk1fQ09OVEVOVF9UWVBFO1xuICAgICAgICBpZiAoIXRoaXMuY29uZmlnLnN5c3RlbU9wdGlvbnMucHJldmVudENvcnNQcmVmbGlnaHQgJiYgY2NzQ3JlZCkge1xuICAgICAgICAgICAgc3dpdGNoIChjY3NDcmVkLnR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIENjc0NyZWRlbnRpYWxUeXBlLkhPTUVfQUNDT1VOVF9JRDpcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsaWVudEluZm8gPSBidWlsZENsaWVudEluZm9Gcm9tSG9tZUFjY291bnRJZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjY3NDcmVkLmNyZWRlbnRpYWxcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlYWRlck5hbWVzLkNDU19IRUFERVJcbiAgICAgICAgICAgICAgICAgICAgICAgIF0gPSBgT2lkOiR7Y2xpZW50SW5mby51aWR9QCR7Y2xpZW50SW5mby51dGlkfWA7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJDb3VsZCBub3QgcGFyc2UgaG9tZSBhY2NvdW50IElEIGZvciBDQ1MgSGVhZGVyOiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBDY3NDcmVkZW50aWFsVHlwZS5VUE46XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbXG4gICAgICAgICAgICAgICAgICAgICAgICBIZWFkZXJOYW1lcy5DQ1NfSEVBREVSXG4gICAgICAgICAgICAgICAgICAgIF0gPSBgVVBOOiAke2Njc0NyZWQuY3JlZGVudGlhbH1gO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGVhZGVycztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIdHRwIHBvc3QgdG8gdG9rZW4gZW5kcG9pbnRcbiAgICAgKiBAcGFyYW0gdG9rZW5FbmRwb2ludFxuICAgICAqIEBwYXJhbSBxdWVyeVN0cmluZ1xuICAgICAqIEBwYXJhbSBoZWFkZXJzXG4gICAgICogQHBhcmFtIHRodW1icHJpbnRcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgYXN5bmMgZXhlY3V0ZVBvc3RUb1Rva2VuRW5kcG9pbnQoXG4gICAgICAgIHRva2VuRW5kcG9pbnQ6IHN0cmluZyxcbiAgICAgICAgcXVlcnlTdHJpbmc6IHN0cmluZyxcbiAgICAgICAgaGVhZGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPixcbiAgICAgICAgdGh1bWJwcmludDogUmVxdWVzdFRodW1icHJpbnQsXG4gICAgICAgIGNvcnJlbGF0aW9uSWQ6IHN0cmluZyxcbiAgICAgICAgcXVldWVkRXZlbnQ/OiBzdHJpbmdcbiAgICApOiBQcm9taXNlPE5ldHdvcmtSZXNwb25zZTxTZXJ2ZXJBdXRob3JpemF0aW9uVG9rZW5SZXNwb25zZT4+IHtcbiAgICAgICAgaWYgKHF1ZXVlZEV2ZW50KSB7XG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50Py5hZGRRdWV1ZU1lYXN1cmVtZW50KFxuICAgICAgICAgICAgICAgIHF1ZXVlZEV2ZW50LFxuICAgICAgICAgICAgICAgIGNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZXNwb25zZSA9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNlbmRQb3N0UmVxdWVzdDxTZXJ2ZXJBdXRob3JpemF0aW9uVG9rZW5SZXNwb25zZT4oXG4gICAgICAgICAgICAgICAgdGh1bWJwcmludCxcbiAgICAgICAgICAgICAgICB0b2tlbkVuZHBvaW50LFxuICAgICAgICAgICAgICAgIHsgYm9keTogcXVlcnlTdHJpbmcsIGhlYWRlcnM6IGhlYWRlcnMgfSxcbiAgICAgICAgICAgICAgICBjb3JyZWxhdGlvbklkXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLnNlcnZlclRlbGVtZXRyeU1hbmFnZXIgJiZcbiAgICAgICAgICAgIHJlc3BvbnNlLnN0YXR1cyA8IDUwMCAmJlxuICAgICAgICAgICAgcmVzcG9uc2Uuc3RhdHVzICE9PSA0MjlcbiAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBUZWxlbWV0cnkgZGF0YSBzdWNjZXNzZnVsbHkgbG9nZ2VkIGJ5IHNlcnZlciwgY2xlYXIgVGVsZW1ldHJ5IGNhY2hlXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5zZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyLmNsZWFyVGVsZW1ldHJ5Q2FjaGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXcmFwcyBzZW5kUG9zdFJlcXVlc3RBc3luYyB3aXRoIG5lY2Vzc2FyeSBwcmVmbGlnaHQgYW5kIHBvc3RmbGlnaHQgbG9naWNcbiAgICAgKiBAcGFyYW0gdGh1bWJwcmludCAtIFJlcXVlc3QgdGh1bWJwcmludCBmb3IgdGhyb3R0bGluZ1xuICAgICAqIEBwYXJhbSB0b2tlbkVuZHBvaW50IC0gRW5kcG9pbnQgdG8gbWFrZSB0aGUgUE9TVCB0b1xuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQm9keSBhbmQgSGVhZGVycyB0byBpbmNsdWRlIG9uIHRoZSBQT1NUIHJlcXVlc3RcbiAgICAgKiBAcGFyYW0gY29ycmVsYXRpb25JZCAtIENvcnJlbGF0aW9uSWQgZm9yIHRlbGVtZXRyeVxuICAgICAqL1xuICAgIGFzeW5jIHNlbmRQb3N0UmVxdWVzdDxUIGV4dGVuZHMgU2VydmVyQXV0aG9yaXphdGlvblRva2VuUmVzcG9uc2U+KFxuICAgICAgICB0aHVtYnByaW50OiBSZXF1ZXN0VGh1bWJwcmludCxcbiAgICAgICAgdG9rZW5FbmRwb2ludDogc3RyaW5nLFxuICAgICAgICBvcHRpb25zOiBOZXR3b3JrUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgIGNvcnJlbGF0aW9uSWQ6IHN0cmluZ1xuICAgICk6IFByb21pc2U8TmV0d29ya1Jlc3BvbnNlPFQ+PiB7XG4gICAgICAgIFRocm90dGxpbmdVdGlscy5wcmVQcm9jZXNzKHRoaXMuY2FjaGVNYW5hZ2VyLCB0aHVtYnByaW50KTtcblxuICAgICAgICBsZXQgcmVzcG9uc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IGludm9rZUFzeW5jKFxuICAgICAgICAgICAgICAgIHRoaXMubmV0d29ya0NsaWVudC5zZW5kUG9zdFJlcXVlc3RBc3luYy5iaW5kKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5ldHdvcmtDbGllbnRcbiAgICAgICAgICAgICAgICApPFQ+LFxuICAgICAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLk5ldHdvcmtDbGllbnRTZW5kUG9zdFJlcXVlc3RBc3luYyxcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlcixcbiAgICAgICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50LFxuICAgICAgICAgICAgICAgIGNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICkodG9rZW5FbmRwb2ludCwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZUhlYWRlcnMgPSByZXNwb25zZS5oZWFkZXJzIHx8IHt9O1xuICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudD8uYWRkRmllbGRzKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFRva2VuU2l6ZTogcmVzcG9uc2UuYm9keS5yZWZyZXNoX3Rva2VuPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgaHR0cFZlclRva2VuOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VIZWFkZXJzW0hlYWRlck5hbWVzLlhfTVNfSFRUUF9WRVJTSU9OXSB8fCBcIlwiLFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0SWQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUhlYWRlcnNbSGVhZGVyTmFtZXMuWF9NU19SRVFVRVNUX0lEXSB8fCBcIlwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBOZXR3b3JrRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZUhlYWRlcnMgPSBlLnJlc3BvbnNlSGVhZGVycztcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2VIZWFkZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQ/LmFkZEZpZWxkcyhcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodHRwVmVyVG9rZW46XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSGVhZGVyc1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlYWRlck5hbWVzLlhfTVNfSFRUUF9WRVJTSU9OXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0gfHwgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0SWQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSGVhZGVyc1tIZWFkZXJOYW1lcy5YX01TX1JFUVVFU1RfSURdIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGVIZWFkZXI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSGVhZGVyc1tIZWFkZXJOYW1lcy5DT05URU5UX1RZUEVdIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50TGVuZ3RoSGVhZGVyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUhlYWRlcnNbSGVhZGVyTmFtZXMuQ09OVEVOVF9MRU5HVEhdIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodHRwU3RhdHVzOiBlLmh0dHBTdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBlLmVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBBdXRoRXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubmV0d29ya0Vycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIFRocm90dGxpbmdVdGlscy5wb3N0UHJvY2Vzcyh0aGlzLmNhY2hlTWFuYWdlciwgdGh1bWJwcmludCwgcmVzcG9uc2UpO1xuXG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBhdXRob3JpdHkgb2JqZWN0IG9mIHRoZSBjbGllbnQuIEVuZHBvaW50IGRpc2NvdmVyeSBtdXN0IGJlIGNvbXBsZXRlZC5cbiAgICAgKiBAcGFyYW0gdXBkYXRlZEF1dGhvcml0eVxuICAgICAqL1xuICAgIGFzeW5jIHVwZGF0ZUF1dGhvcml0eShcbiAgICAgICAgY2xvdWRJbnN0YW5jZUhvc3RuYW1lOiBzdHJpbmcsXG4gICAgICAgIGNvcnJlbGF0aW9uSWQ6IHN0cmluZ1xuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50Py5hZGRRdWV1ZU1lYXN1cmVtZW50KFxuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuVXBkYXRlVG9rZW5FbmRwb2ludEF1dGhvcml0eSxcbiAgICAgICAgICAgIGNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgY2xvdWRJbnN0YW5jZUF1dGhvcml0eVVyaSA9IGBodHRwczovLyR7Y2xvdWRJbnN0YW5jZUhvc3RuYW1lfS8ke3RoaXMuYXV0aG9yaXR5LnRlbmFudH0vYDtcbiAgICAgICAgY29uc3QgY2xvdWRJbnN0YW5jZUF1dGhvcml0eSA9IGF3YWl0IGNyZWF0ZURpc2NvdmVyZWRJbnN0YW5jZShcbiAgICAgICAgICAgIGNsb3VkSW5zdGFuY2VBdXRob3JpdHlVcmksXG4gICAgICAgICAgICB0aGlzLm5ldHdvcmtDbGllbnQsXG4gICAgICAgICAgICB0aGlzLmNhY2hlTWFuYWdlcixcbiAgICAgICAgICAgIHRoaXMuYXV0aG9yaXR5Lm9wdGlvbnMsXG4gICAgICAgICAgICB0aGlzLmxvZ2dlcixcbiAgICAgICAgICAgIGNvcnJlbGF0aW9uSWQsXG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50XG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuYXV0aG9yaXR5ID0gY2xvdWRJbnN0YW5jZUF1dGhvcml0eTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIHF1ZXJ5IHN0cmluZyBmb3IgdGhlIC90b2tlbiByZXF1ZXN0XG4gICAgICogQHBhcmFtIHJlcXVlc3RcbiAgICAgKi9cbiAgICBjcmVhdGVUb2tlblF1ZXJ5UGFyYW1ldGVycyhyZXF1ZXN0OiBCYXNlQXV0aFJlcXVlc3QpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBwYXJhbWV0ZXJzID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZz4oKTtcblxuICAgICAgICBpZiAocmVxdWVzdC5lbWJlZGRlZENsaWVudElkKSB7XG4gICAgICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRCcm9rZXJQYXJhbWV0ZXJzKFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aE9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aE9wdGlvbnMucmVkaXJlY3RVcmlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVxdWVzdC50b2tlblF1ZXJ5UGFyYW1ldGVycykge1xuICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkRXh0cmFRdWVyeVBhcmFtZXRlcnMoXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnRva2VuUXVlcnlQYXJhbWV0ZXJzXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ29ycmVsYXRpb25JZChcbiAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcblxuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5pbnN0cnVtZW50QnJva2VyUGFyYW1zKFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZCxcbiAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnRcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIFVybFV0aWxzLm1hcFRvUXVlcnlTdHJpbmcocGFyYW1ldGVycyk7XG4gICAgfVxufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG4vLyBDb2RlcyBkZWZpbmVkIGJ5IE1TQUxcbmV4cG9ydCBjb25zdCBub1Rva2Vuc0ZvdW5kID0gXCJub190b2tlbnNfZm91bmRcIjtcbmV4cG9ydCBjb25zdCBuYXRpdmVBY2NvdW50VW5hdmFpbGFibGUgPSBcIm5hdGl2ZV9hY2NvdW50X3VuYXZhaWxhYmxlXCI7XG5leHBvcnQgY29uc3QgcmVmcmVzaFRva2VuRXhwaXJlZCA9IFwicmVmcmVzaF90b2tlbl9leHBpcmVkXCI7XG5cbi8vIENvZGVzIHBvdGVudGlhbGx5IHJldHVybmVkIGJ5IHNlcnZlclxuZXhwb3J0IGNvbnN0IGludGVyYWN0aW9uUmVxdWlyZWQgPSBcImludGVyYWN0aW9uX3JlcXVpcmVkXCI7XG5leHBvcnQgY29uc3QgY29uc2VudFJlcXVpcmVkID0gXCJjb25zZW50X3JlcXVpcmVkXCI7XG5leHBvcnQgY29uc3QgbG9naW5SZXF1aXJlZCA9IFwibG9naW5fcmVxdWlyZWRcIjtcbmV4cG9ydCBjb25zdCBiYWRUb2tlbiA9IFwiYmFkX3Rva2VuXCI7XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENvbnN0YW50cyB9IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcbmltcG9ydCB7IEF1dGhFcnJvciB9IGZyb20gXCIuL0F1dGhFcnJvci5qc1wiO1xuaW1wb3J0ICogYXMgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvckNvZGVzIGZyb20gXCIuL0ludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3JDb2Rlcy5qc1wiO1xuZXhwb3J0IHsgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvckNvZGVzIH07XG5cbi8qKlxuICogSW50ZXJhY3Rpb25SZXF1aXJlZFNlcnZlckVycm9yTWVzc2FnZSBjb250YWlucyBzdHJpbmcgY29uc3RhbnRzIHVzZWQgYnkgZXJyb3IgY29kZXMgYW5kIG1lc3NhZ2VzIHJldHVybmVkIGJ5IHRoZSBzZXJ2ZXIgaW5kaWNhdGluZyBpbnRlcmFjdGlvbiBpcyByZXF1aXJlZFxuICovXG5leHBvcnQgY29uc3QgSW50ZXJhY3Rpb25SZXF1aXJlZFNlcnZlckVycm9yTWVzc2FnZSA9IFtcbiAgICBJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yQ29kZXMuaW50ZXJhY3Rpb25SZXF1aXJlZCxcbiAgICBJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yQ29kZXMuY29uc2VudFJlcXVpcmVkLFxuICAgIEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3JDb2Rlcy5sb2dpblJlcXVpcmVkLFxuICAgIEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3JDb2Rlcy5iYWRUb2tlbixcbl07XG5cbmV4cG9ydCBjb25zdCBJbnRlcmFjdGlvblJlcXVpcmVkQXV0aFN1YkVycm9yTWVzc2FnZSA9IFtcbiAgICBcIm1lc3NhZ2Vfb25seVwiLFxuICAgIFwiYWRkaXRpb25hbF9hY3Rpb25cIixcbiAgICBcImJhc2ljX2FjdGlvblwiLFxuICAgIFwidXNlcl9wYXNzd29yZF9leHBpcmVkXCIsXG4gICAgXCJjb25zZW50X3JlcXVpcmVkXCIsXG4gICAgXCJiYWRfdG9rZW5cIixcbl07XG5cbmNvbnN0IEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3JNZXNzYWdlcyA9IHtcbiAgICBbSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvckNvZGVzLm5vVG9rZW5zRm91bmRdOlxuICAgICAgICBcIk5vIHJlZnJlc2ggdG9rZW4gZm91bmQgaW4gdGhlIGNhY2hlLiBQbGVhc2Ugc2lnbi1pbi5cIixcbiAgICBbSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvckNvZGVzLm5hdGl2ZUFjY291bnRVbmF2YWlsYWJsZV06XG4gICAgICAgIFwiVGhlIHJlcXVlc3RlZCBhY2NvdW50IGlzIG5vdCBhdmFpbGFibGUgaW4gdGhlIG5hdGl2ZSBicm9rZXIuIEl0IG1heSBoYXZlIGJlZW4gZGVsZXRlZCBvciBsb2dnZWQgb3V0LiBQbGVhc2Ugc2lnbi1pbiBhZ2FpbiB1c2luZyBhbiBpbnRlcmFjdGl2ZSBBUEkuXCIsXG4gICAgW0ludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3JDb2Rlcy5yZWZyZXNoVG9rZW5FeHBpcmVkXTpcbiAgICAgICAgXCJSZWZyZXNoIHRva2VuIGhhcyBleHBpcmVkLlwiLFxuICAgIFtJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yQ29kZXMuYmFkVG9rZW5dOlxuICAgICAgICBcIklkZW50aXR5IHByb3ZpZGVyIHJldHVybmVkIGJhZF90b2tlbiBkdWUgdG8gYW4gZXhwaXJlZCBvciBpbnZhbGlkIHJlZnJlc2ggdG9rZW4uIFBsZWFzZSBpbnZva2UgYW4gaW50ZXJhY3RpdmUgQVBJIHRvIHJlc29sdmUuXCIsXG59O1xuXG4vKipcbiAqIEludGVyYWN0aW9uIHJlcXVpcmVkIGVycm9ycyBkZWZpbmVkIGJ5IHRoZSBTREtcbiAqIEBkZXByZWNhdGVkIFVzZSBJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yQ29kZXMgaW5zdGVhZFxuICovXG5leHBvcnQgY29uc3QgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvck1lc3NhZ2UgPSB7XG4gICAgbm9Ub2tlbnNGb3VuZEVycm9yOiB7XG4gICAgICAgIGNvZGU6IEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3JDb2Rlcy5ub1Rva2Vuc0ZvdW5kLFxuICAgICAgICBkZXNjOiBJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yTWVzc2FnZXNbXG4gICAgICAgICAgICBJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yQ29kZXMubm9Ub2tlbnNGb3VuZFxuICAgICAgICBdLFxuICAgIH0sXG4gICAgbmF0aXZlX2FjY291bnRfdW5hdmFpbGFibGU6IHtcbiAgICAgICAgY29kZTogSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvckNvZGVzLm5hdGl2ZUFjY291bnRVbmF2YWlsYWJsZSxcbiAgICAgICAgZGVzYzogSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvckNvZGVzLm5hdGl2ZUFjY291bnRVbmF2YWlsYWJsZVxuICAgICAgICBdLFxuICAgIH0sXG4gICAgYmFkX3Rva2VuOiB7XG4gICAgICAgIGNvZGU6IEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3JDb2Rlcy5iYWRUb2tlbixcbiAgICAgICAgZGVzYzogSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvckNvZGVzLmJhZFRva2VuXG4gICAgICAgIF0sXG4gICAgfSxcbn07XG5cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gdXNlciBpbnRlcmFjdGlvbiBpcyByZXF1aXJlZC5cbiAqL1xuZXhwb3J0IGNsYXNzIEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3IgZXh0ZW5kcyBBdXRoRXJyb3Ige1xuICAgIC8qKlxuICAgICAqIFRoZSB0aW1lIHRoZSBlcnJvciBvY2N1cmVkIGF0XG4gICAgICovXG4gICAgdGltZXN0YW1wOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUcmFjZUlkIGFzc29jaWF0ZWQgd2l0aCB0aGUgZXJyb3JcbiAgICAgKi9cbiAgICB0cmFjZUlkOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vQXp1cmVBRC9taWNyb3NvZnQtYXV0aGVudGljYXRpb24tbGlicmFyeS1mb3ItanMvYmxvYi9kZXYvbGliL21zYWwtY29tbW9uL2RvY3MvY2xhaW1zLWNoYWxsZW5nZS5tZFxuICAgICAqXG4gICAgICogQSBzdHJpbmcgd2l0aCBleHRyYSBjbGFpbXMgbmVlZGVkIGZvciB0aGUgdG9rZW4gcmVxdWVzdCB0byBzdWNjZWVkXG4gICAgICogd2ViIHNpdGU6IHJlZGlyZWN0IHRoZSB1c2VyIHRvIHRoZSBhdXRob3JpemF0aW9uIHBhZ2UgYW5kIHNldCB0aGUgZXh0cmEgY2xhaW1zXG4gICAgICogd2ViIGFwaTogaW5jbHVkZSB0aGUgY2xhaW1zIGluIHRoZSBXV1ctQXV0aGVudGljYXRlIGhlYWRlciB0aGF0IGFyZSBzZW50IGJhY2sgdG8gdGhlIGNsaWVudCBzbyB0aGF0IGl0IGtub3dzIHRvIHJlcXVlc3QgYSB0b2tlbiB3aXRoIHRoZSBleHRyYSBjbGFpbXNcbiAgICAgKiBkZXNrdG9wIGFwcGxpY2F0aW9uIG9yIGJyb3dzZXIgY29udGV4dDogaW5jbHVkZSB0aGUgY2xhaW1zIHdoZW4gYWNxdWlyaW5nIHRoZSB0b2tlbiBpbnRlcmFjdGl2ZWx5XG4gICAgICogYXBwIHRvIGFwcCBjb250ZXh0IChjbGllbnRfY3JlZGVudGlhbHMpOiBpbmNsdWRlIHRoZSBjbGFpbXMgaW4gdGhlIEFjcXVpcmVUb2tlbkJ5Q2xpZW50Q3JlZGVudGlhbCByZXF1ZXN0XG4gICAgICovXG4gICAgY2xhaW1zOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBTZXJ2ZXIgZXJyb3IgbnVtYmVyO1xuICAgICAqL1xuICAgIHJlYWRvbmx5IGVycm9yTm8/OiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgZXJyb3JDb2RlPzogc3RyaW5nLFxuICAgICAgICBlcnJvck1lc3NhZ2U/OiBzdHJpbmcsXG4gICAgICAgIHN1YkVycm9yPzogc3RyaW5nLFxuICAgICAgICB0aW1lc3RhbXA/OiBzdHJpbmcsXG4gICAgICAgIHRyYWNlSWQ/OiBzdHJpbmcsXG4gICAgICAgIGNvcnJlbGF0aW9uSWQ/OiBzdHJpbmcsXG4gICAgICAgIGNsYWltcz86IHN0cmluZyxcbiAgICAgICAgZXJyb3JObz86IHN0cmluZ1xuICAgICkge1xuICAgICAgICBzdXBlcihlcnJvckNvZGUsIGVycm9yTWVzc2FnZSwgc3ViRXJyb3IpO1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvci5wcm90b3R5cGUpO1xuXG4gICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wIHx8IENvbnN0YW50cy5FTVBUWV9TVFJJTkc7XG4gICAgICAgIHRoaXMudHJhY2VJZCA9IHRyYWNlSWQgfHwgQ29uc3RhbnRzLkVNUFRZX1NUUklORztcbiAgICAgICAgdGhpcy5jb3JyZWxhdGlvbklkID0gY29ycmVsYXRpb25JZCB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HO1xuICAgICAgICB0aGlzLmNsYWltcyA9IGNsYWltcyB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIkludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3JcIjtcbiAgICAgICAgdGhpcy5lcnJvck5vID0gZXJyb3JObztcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHVzZWQgdG8gZGV0ZXJtaW5lIGlmIGFuIGVycm9yIHRocm93biBieSB0aGUgc2VydmVyIHJlcXVpcmVzIGludGVyYWN0aW9uIHRvIHJlc29sdmVcbiAqIEBwYXJhbSBlcnJvckNvZGVcbiAqIEBwYXJhbSBlcnJvclN0cmluZ1xuICogQHBhcmFtIHN1YkVycm9yXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0ludGVyYWN0aW9uUmVxdWlyZWRFcnJvcihcbiAgICBlcnJvckNvZGU/OiBzdHJpbmcsXG4gICAgZXJyb3JTdHJpbmc/OiBzdHJpbmcsXG4gICAgc3ViRXJyb3I/OiBzdHJpbmdcbik6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGlzSW50ZXJhY3Rpb25SZXF1aXJlZEVycm9yQ29kZSA9XG4gICAgICAgICEhZXJyb3JDb2RlICYmXG4gICAgICAgIEludGVyYWN0aW9uUmVxdWlyZWRTZXJ2ZXJFcnJvck1lc3NhZ2UuaW5kZXhPZihlcnJvckNvZGUpID4gLTE7XG4gICAgY29uc3QgaXNJbnRlcmFjdGlvblJlcXVpcmVkU3ViRXJyb3IgPVxuICAgICAgICAhIXN1YkVycm9yICYmXG4gICAgICAgIEludGVyYWN0aW9uUmVxdWlyZWRBdXRoU3ViRXJyb3JNZXNzYWdlLmluZGV4T2Yoc3ViRXJyb3IpID4gLTE7XG4gICAgY29uc3QgaXNJbnRlcmFjdGlvblJlcXVpcmVkRXJyb3JEZXNjID1cbiAgICAgICAgISFlcnJvclN0cmluZyAmJlxuICAgICAgICBJbnRlcmFjdGlvblJlcXVpcmVkU2VydmVyRXJyb3JNZXNzYWdlLnNvbWUoKGlyRXJyb3JDb2RlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZXJyb3JTdHJpbmcuaW5kZXhPZihpckVycm9yQ29kZSkgPiAtMTtcbiAgICAgICAgfSk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgICBpc0ludGVyYWN0aW9uUmVxdWlyZWRFcnJvckNvZGUgfHxcbiAgICAgICAgaXNJbnRlcmFjdGlvblJlcXVpcmVkRXJyb3JEZXNjIHx8XG4gICAgICAgIGlzSW50ZXJhY3Rpb25SZXF1aXJlZFN1YkVycm9yXG4gICAgKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3IoXG4gICAgZXJyb3JDb2RlOiBzdHJpbmdcbik6IEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3Ige1xuICAgIHJldHVybiBuZXcgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvcihcbiAgICAgICAgZXJyb3JDb2RlLFxuICAgICAgICBJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yTWVzc2FnZXNbZXJyb3JDb2RlXVxuICAgICk7XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENvbnN0YW50cyB9IGZyb20gXCIuL0NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgSUNyeXB0byB9IGZyb20gXCIuLi9jcnlwdG8vSUNyeXB0by5qc1wiO1xuaW1wb3J0IHtcbiAgICBDbGllbnRBdXRoRXJyb3JDb2RlcyxcbiAgICBjcmVhdGVDbGllbnRBdXRoRXJyb3IsXG59IGZyb20gXCIuLi9lcnJvci9DbGllbnRBdXRoRXJyb3IuanNcIjtcblxuLyoqXG4gKiBUeXBlIHdoaWNoIGRlZmluZXMgdGhlIG9iamVjdCB0aGF0IGlzIHN0cmluZ2lmaWVkLCBlbmNvZGVkIGFuZCBzZW50IGluIHRoZSBzdGF0ZSB2YWx1ZS5cbiAqIENvbnRhaW5zIHRoZSBmb2xsb3dpbmc6XG4gKiAtIGlkIC0gdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoaXMgcmVxdWVzdFxuICogLSB0cyAtIHRpbWVzdGFtcCBmb3IgdGhlIHRpbWUgdGhlIHJlcXVlc3Qgd2FzIG1hZGUuIFVzZWQgdG8gZW5zdXJlIHRoYXQgdG9rZW4gZXhwaXJhdGlvbiBpcyBub3QgY2FsY3VsYXRlZCBpbmNvcnJlY3RseS5cbiAqIC0gcGxhdGZvcm1TdGF0ZSAtIHN0cmluZyB2YWx1ZSBzZW50IGZyb20gdGhlIHBsYXRmb3JtLlxuICovXG5leHBvcnQgdHlwZSBMaWJyYXJ5U3RhdGVPYmplY3QgPSB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBtZXRhPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbn07XG5cbi8qKlxuICogVHlwZSB3aGljaCBkZWZpbmVzIHRoZSBzdHJpbmdpZmllZCBhbmQgZW5jb2RlZCBvYmplY3Qgc2VudCB0byB0aGUgc2VydmljZSBpbiB0aGUgYXV0aG9yaXplIHJlcXVlc3QuXG4gKi9cbmV4cG9ydCB0eXBlIFJlcXVlc3RTdGF0ZU9iamVjdCA9IHtcbiAgICB1c2VyUmVxdWVzdFN0YXRlOiBzdHJpbmc7XG4gICAgbGlicmFyeVN0YXRlOiBMaWJyYXJ5U3RhdGVPYmplY3Q7XG59O1xuXG4vKipcbiAqIENsYXNzIHdoaWNoIHByb3ZpZGVzIGhlbHBlcnMgZm9yIE9BdXRoIDIuMCBwcm90b2NvbCBzcGVjaWZpYyB2YWx1ZXNcbiAqL1xuZXhwb3J0IGNsYXNzIFByb3RvY29sVXRpbHMge1xuICAgIC8qKlxuICAgICAqIEFwcGVuZHMgdXNlciBzdGF0ZSB3aXRoIHJhbmRvbSBndWlkLCBvciByZXR1cm5zIHJhbmRvbSBndWlkLlxuICAgICAqIEBwYXJhbSB1c2VyU3RhdGVcbiAgICAgKiBAcGFyYW0gcmFuZG9tR3VpZFxuICAgICAqL1xuICAgIHN0YXRpYyBzZXRSZXF1ZXN0U3RhdGUoXG4gICAgICAgIGNyeXB0b09iajogSUNyeXB0byxcbiAgICAgICAgdXNlclN0YXRlPzogc3RyaW5nLFxuICAgICAgICBtZXRhPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPlxuICAgICk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGxpYnJhcnlTdGF0ZSA9IFByb3RvY29sVXRpbHMuZ2VuZXJhdGVMaWJyYXJ5U3RhdGUoXG4gICAgICAgICAgICBjcnlwdG9PYmosXG4gICAgICAgICAgICBtZXRhXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiB1c2VyU3RhdGVcbiAgICAgICAgICAgID8gYCR7bGlicmFyeVN0YXRlfSR7Q29uc3RhbnRzLlJFU09VUkNFX0RFTElNfSR7dXNlclN0YXRlfWBcbiAgICAgICAgICAgIDogbGlicmFyeVN0YXRlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyB0aGUgc3RhdGUgdmFsdWUgdXNlZCBieSB0aGUgY29tbW9uIGxpYnJhcnkuXG4gICAgICogQHBhcmFtIHJhbmRvbUd1aWRcbiAgICAgKiBAcGFyYW0gY3J5cHRvT2JqXG4gICAgICovXG4gICAgc3RhdGljIGdlbmVyYXRlTGlicmFyeVN0YXRlKFxuICAgICAgICBjcnlwdG9PYmo6IElDcnlwdG8sXG4gICAgICAgIG1ldGE/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+XG4gICAgKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKCFjcnlwdG9PYmopIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JDb2Rlcy5ub0NyeXB0b09iamVjdCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGUgYSBzdGF0ZSBvYmplY3QgY29udGFpbmluZyBhIHVuaXF1ZSBpZCBhbmQgdGhlIHRpbWVzdGFtcCBvZiB0aGUgcmVxdWVzdCBjcmVhdGlvblxuICAgICAgICBjb25zdCBzdGF0ZU9iajogTGlicmFyeVN0YXRlT2JqZWN0ID0ge1xuICAgICAgICAgICAgaWQ6IGNyeXB0b09iai5jcmVhdGVOZXdHdWlkKCksXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKG1ldGEpIHtcbiAgICAgICAgICAgIHN0YXRlT2JqLm1ldGEgPSBtZXRhO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhdGVTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShzdGF0ZU9iaik7XG5cbiAgICAgICAgcmV0dXJuIGNyeXB0b09iai5iYXNlNjRFbmNvZGUoc3RhdGVTdHJpbmcpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhcnNlcyB0aGUgc3RhdGUgaW50byB0aGUgUmVxdWVzdFN0YXRlT2JqZWN0LCB3aGljaCBjb250YWlucyB0aGUgTGlicmFyeVN0YXRlIGluZm8gYW5kIHRoZSBzdGF0ZSBwYXNzZWQgYnkgdGhlIHVzZXIuXG4gICAgICogQHBhcmFtIHN0YXRlXG4gICAgICogQHBhcmFtIGNyeXB0b09ialxuICAgICAqL1xuICAgIHN0YXRpYyBwYXJzZVJlcXVlc3RTdGF0ZShcbiAgICAgICAgY3J5cHRvT2JqOiBJQ3J5cHRvLFxuICAgICAgICBzdGF0ZTogc3RyaW5nXG4gICAgKTogUmVxdWVzdFN0YXRlT2JqZWN0IHtcbiAgICAgICAgaWYgKCFjcnlwdG9PYmopIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JDb2Rlcy5ub0NyeXB0b09iamVjdCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXN0YXRlKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZFN0YXRlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBTcGxpdCB0aGUgc3RhdGUgYmV0d2VlbiBsaWJyYXJ5IHN0YXRlIGFuZCB1c2VyIHBhc3NlZCBzdGF0ZSBhbmQgZGVjb2RlIHRoZW0gc2VwYXJhdGVseVxuICAgICAgICAgICAgY29uc3Qgc3BsaXRTdGF0ZSA9IHN0YXRlLnNwbGl0KENvbnN0YW50cy5SRVNPVVJDRV9ERUxJTSk7XG4gICAgICAgICAgICBjb25zdCBsaWJyYXJ5U3RhdGUgPSBzcGxpdFN0YXRlWzBdO1xuICAgICAgICAgICAgY29uc3QgdXNlclN0YXRlID1cbiAgICAgICAgICAgICAgICBzcGxpdFN0YXRlLmxlbmd0aCA+IDFcbiAgICAgICAgICAgICAgICAgICAgPyBzcGxpdFN0YXRlLnNsaWNlKDEpLmpvaW4oQ29uc3RhbnRzLlJFU09VUkNFX0RFTElNKVxuICAgICAgICAgICAgICAgICAgICA6IENvbnN0YW50cy5FTVBUWV9TVFJJTkc7XG4gICAgICAgICAgICBjb25zdCBsaWJyYXJ5U3RhdGVTdHJpbmcgPSBjcnlwdG9PYmouYmFzZTY0RGVjb2RlKGxpYnJhcnlTdGF0ZSk7XG4gICAgICAgICAgICBjb25zdCBsaWJyYXJ5U3RhdGVPYmogPSBKU09OLnBhcnNlKFxuICAgICAgICAgICAgICAgIGxpYnJhcnlTdGF0ZVN0cmluZ1xuICAgICAgICAgICAgKSBhcyBMaWJyYXJ5U3RhdGVPYmplY3Q7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVzZXJSZXF1ZXN0U3RhdGU6IHVzZXJTdGF0ZSB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HLFxuICAgICAgICAgICAgICAgIGxpYnJhcnlTdGF0ZTogbGlicmFyeVN0YXRlT2JqLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvckNvZGVzLmludmFsaWRTdGF0ZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IElDcnlwdG8sIFNpZ25lZEh0dHBSZXF1ZXN0UGFyYW1ldGVycyB9IGZyb20gXCIuL0lDcnlwdG8uanNcIjtcbmltcG9ydCAqIGFzIFRpbWVVdGlscyBmcm9tIFwiLi4vdXRpbHMvVGltZVV0aWxzLmpzXCI7XG5pbXBvcnQgeyBVcmxTdHJpbmcgfSBmcm9tIFwiLi4vdXJsL1VybFN0cmluZy5qc1wiO1xuaW1wb3J0IHsgSVBlcmZvcm1hbmNlQ2xpZW50IH0gZnJvbSBcIi4uL3RlbGVtZXRyeS9wZXJmb3JtYW5jZS9JUGVyZm9ybWFuY2VDbGllbnQuanNcIjtcbmltcG9ydCB7IFBlcmZvcm1hbmNlRXZlbnRzIH0gZnJvbSBcIi4uL3RlbGVtZXRyeS9wZXJmb3JtYW5jZS9QZXJmb3JtYW5jZUV2ZW50LmpzXCI7XG5pbXBvcnQgeyBpbnZva2VBc3luYyB9IGZyb20gXCIuLi91dGlscy9GdW5jdGlvbldyYXBwZXJzLmpzXCI7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiLi4vbG9nZ2VyL0xvZ2dlci5qc1wiO1xuXG4vKipcbiAqIFNlZSBlU1RTIGRvY3MgZm9yIG1vcmUgaW5mby5cbiAqIC0gQSBraWQgZWxlbWVudCwgd2l0aCB0aGUgdmFsdWUgY29udGFpbmluZyBhbiBSRkMgNzYzOC1jb21wbGlhbnQgSldLIHRodW1icHJpbnQgdGhhdCBpcyBiYXNlNjQgZW5jb2RlZC5cbiAqIC0gIHhtc19rc2wgZWxlbWVudCwgcmVwcmVzZW50aW5nIHRoZSBzdG9yYWdlIGxvY2F0aW9uIG9mIHRoZSBrZXkncyBzZWNyZXQgY29tcG9uZW50IG9uIHRoZSBjbGllbnQgZGV2aWNlLiBPbmUgb2YgdHdvIHZhbHVlczpcbiAqICAgICAgLSBzdzogc29mdHdhcmUgc3RvcmFnZVxuICogICAgICAtIHVodzogaGFyZHdhcmUgc3RvcmFnZVxuICovXG50eXBlIFJlcUNuZiA9IHtcbiAgICBraWQ6IHN0cmluZztcbiAgICB4bXNfa3NsOiBLZXlMb2NhdGlvbjtcbn07XG5cbmV4cG9ydCB0eXBlIFJlcUNuZkRhdGEgPSB7XG4gICAga2lkOiBzdHJpbmc7XG4gICAgcmVxQ25mU3RyaW5nOiBzdHJpbmc7XG59O1xuXG5jb25zdCBLZXlMb2NhdGlvbiA9IHtcbiAgICBTVzogXCJzd1wiLFxuICAgIFVIVzogXCJ1aHdcIixcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBLZXlMb2NhdGlvbiA9ICh0eXBlb2YgS2V5TG9jYXRpb24pW2tleW9mIHR5cGVvZiBLZXlMb2NhdGlvbl07XG5cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBjbGFzcyBQb3BUb2tlbkdlbmVyYXRvciB7XG4gICAgcHJpdmF0ZSBjcnlwdG9VdGlsczogSUNyeXB0bztcbiAgICBwcml2YXRlIHBlcmZvcm1hbmNlQ2xpZW50PzogSVBlcmZvcm1hbmNlQ2xpZW50O1xuXG4gICAgY29uc3RydWN0b3IoY3J5cHRvVXRpbHM6IElDcnlwdG8sIHBlcmZvcm1hbmNlQ2xpZW50PzogSVBlcmZvcm1hbmNlQ2xpZW50KSB7XG4gICAgICAgIHRoaXMuY3J5cHRvVXRpbHMgPSBjcnlwdG9VdGlscztcbiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudCA9IHBlcmZvcm1hbmNlQ2xpZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyB0aGUgcmVxX2NuZiB2YWxpZGF0ZWQgYXQgdGhlIFJQIGluIHRoZSBQT1AgcHJvdG9jb2wgZm9yIFNIUiBwYXJhbWV0ZXJzXG4gICAgICogYW5kIHJldHVybnMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGtleWlkLCB0aGUgZnVsbCByZXFfY25mIHN0cmluZyBhbmQgdGhlIHJlcV9jbmYgc3RyaW5nIGhhc2hcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFxuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgYXN5bmMgZ2VuZXJhdGVDbmYoXG4gICAgICAgIHJlcXVlc3Q6IFNpZ25lZEh0dHBSZXF1ZXN0UGFyYW1ldGVycyxcbiAgICAgICAgbG9nZ2VyOiBMb2dnZXJcbiAgICApOiBQcm9taXNlPFJlcUNuZkRhdGE+IHtcbiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudD8uYWRkUXVldWVNZWFzdXJlbWVudChcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLlBvcFRva2VuR2VuZXJhdGVDbmYsXG4gICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCByZXFDbmYgPSBhd2FpdCBpbnZva2VBc3luYyhcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVLaWQuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLlBvcFRva2VuR2VuZXJhdGVDbmYsXG4gICAgICAgICAgICBsb2dnZXIsXG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50LFxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICkocmVxdWVzdCk7XG4gICAgICAgIGNvbnN0IHJlcUNuZlN0cmluZzogc3RyaW5nID0gdGhpcy5jcnlwdG9VdGlscy5iYXNlNjRVcmxFbmNvZGUoXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShyZXFDbmYpXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtpZDogcmVxQ25mLmtpZCxcbiAgICAgICAgICAgIHJlcUNuZlN0cmluZyxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMga2V5X2lkIGZvciBhIFNIUiB0b2tlbiByZXF1ZXN0XG4gICAgICogQHBhcmFtIHJlcXVlc3RcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIGFzeW5jIGdlbmVyYXRlS2lkKHJlcXVlc3Q6IFNpZ25lZEh0dHBSZXF1ZXN0UGFyYW1ldGVycyk6IFByb21pc2U8UmVxQ25mPiB7XG4gICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQ/LmFkZFF1ZXVlTWVhc3VyZW1lbnQoXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5Qb3BUb2tlbkdlbmVyYXRlS2lkLFxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3Qga2lkVGh1bWJwcmludCA9IGF3YWl0IHRoaXMuY3J5cHRvVXRpbHMuZ2V0UHVibGljS2V5VGh1bWJwcmludChcbiAgICAgICAgICAgIHJlcXVlc3RcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2lkOiBraWRUaHVtYnByaW50LFxuICAgICAgICAgICAgeG1zX2tzbDogS2V5TG9jYXRpb24uU1csXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2lnbnMgdGhlIFBPUCBhY2Nlc3NfdG9rZW4gd2l0aCB0aGUgbG9jYWwgZ2VuZXJhdGVkIGtleS1wYWlyXG4gICAgICogQHBhcmFtIGFjY2Vzc1Rva2VuXG4gICAgICogQHBhcmFtIHJlcXVlc3RcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIGFzeW5jIHNpZ25Qb3BUb2tlbihcbiAgICAgICAgYWNjZXNzVG9rZW46IHN0cmluZyxcbiAgICAgICAga2V5SWQ6IHN0cmluZyxcbiAgICAgICAgcmVxdWVzdDogU2lnbmVkSHR0cFJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2lnblBheWxvYWQoYWNjZXNzVG9rZW4sIGtleUlkLCByZXF1ZXN0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVdGlsaXR5IGZ1bmN0aW9uIHRvIGdlbmVyYXRlIHRoZSBzaWduZWQgSldUIGZvciBhbiBhY2Nlc3NfdG9rZW5cbiAgICAgKiBAcGFyYW0gcGF5bG9hZFxuICAgICAqIEBwYXJhbSBraWRcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFxuICAgICAqIEBwYXJhbSBjbGFpbXNcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIGFzeW5jIHNpZ25QYXlsb2FkKFxuICAgICAgICBwYXlsb2FkOiBzdHJpbmcsXG4gICAgICAgIGtleUlkOiBzdHJpbmcsXG4gICAgICAgIHJlcXVlc3Q6IFNpZ25lZEh0dHBSZXF1ZXN0UGFyYW1ldGVycyxcbiAgICAgICAgY2xhaW1zPzogb2JqZWN0XG4gICAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgLy8gRGVjb25zdHJ1Y3QgcmVxdWVzdCB0byBleHRyYWN0IFNIUiBwYXJhbWV0ZXJzXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIHJlc291cmNlUmVxdWVzdE1ldGhvZCxcbiAgICAgICAgICAgIHJlc291cmNlUmVxdWVzdFVyaSxcbiAgICAgICAgICAgIHNockNsYWltcyxcbiAgICAgICAgICAgIHNock5vbmNlLFxuICAgICAgICAgICAgc2hyT3B0aW9ucyxcbiAgICAgICAgfSA9IHJlcXVlc3Q7XG5cbiAgICAgICAgY29uc3QgcmVzb3VyY2VVcmxTdHJpbmcgPSByZXNvdXJjZVJlcXVlc3RVcmlcbiAgICAgICAgICAgID8gbmV3IFVybFN0cmluZyhyZXNvdXJjZVJlcXVlc3RVcmkpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgcmVzb3VyY2VVcmxDb21wb25lbnRzID0gcmVzb3VyY2VVcmxTdHJpbmc/LmdldFVybENvbXBvbmVudHMoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3J5cHRvVXRpbHMuc2lnbkp3dChcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhdDogcGF5bG9hZCxcbiAgICAgICAgICAgICAgICB0czogVGltZVV0aWxzLm5vd1NlY29uZHMoKSxcbiAgICAgICAgICAgICAgICBtOiByZXNvdXJjZVJlcXVlc3RNZXRob2Q/LnRvVXBwZXJDYXNlKCksXG4gICAgICAgICAgICAgICAgdTogcmVzb3VyY2VVcmxDb21wb25lbnRzPy5Ib3N0TmFtZUFuZFBvcnQsXG4gICAgICAgICAgICAgICAgbm9uY2U6IHNock5vbmNlIHx8IHRoaXMuY3J5cHRvVXRpbHMuY3JlYXRlTmV3R3VpZCgpLFxuICAgICAgICAgICAgICAgIHA6IHJlc291cmNlVXJsQ29tcG9uZW50cz8uQWJzb2x1dGVQYXRoLFxuICAgICAgICAgICAgICAgIHE6IHJlc291cmNlVXJsQ29tcG9uZW50cz8uUXVlcnlTdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgPyBbW10sIHJlc291cmNlVXJsQ29tcG9uZW50cy5RdWVyeVN0cmluZ11cbiAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgY2xpZW50X2NsYWltczogc2hyQ2xhaW1zIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAuLi5jbGFpbXMsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAga2V5SWQsXG4gICAgICAgICAgICBzaHJPcHRpb25zLFxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICk7XG4gICAgfVxufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBJU2VyaWFsaXphYmxlVG9rZW5DYWNoZSB9IGZyb20gXCIuLi9pbnRlcmZhY2UvSVNlcmlhbGl6YWJsZVRva2VuQ2FjaGUuanNcIjtcblxuLyoqXG4gKiBUaGlzIGNsYXNzIGluc3RhbmNlIGhlbHBzIHRyYWNrIHRoZSBtZW1vcnkgY2hhbmdlcyBmYWNpbGl0YXRpbmdcbiAqIGRlY2lzaW9ucyB0byByZWFkIGZyb20gYW5kIHdyaXRlIHRvIHRoZSBwZXJzaXN0ZW50IGNhY2hlXG4gKi8gZXhwb3J0IGNsYXNzIFRva2VuQ2FjaGVDb250ZXh0IHtcbiAgICAvKipcbiAgICAgKiBib29sZWFuIGluZGljYXRpbmcgY2FjaGUgY2hhbmdlXG4gICAgICovXG4gICAgaGFzQ2hhbmdlZDogYm9vbGVhbjtcbiAgICAvKipcbiAgICAgKiBzZXJpYWxpemFibGUgdG9rZW4gY2FjaGUgaW50ZXJmYWNlXG4gICAgICovXG4gICAgY2FjaGU6IElTZXJpYWxpemFibGVUb2tlbkNhY2hlO1xuXG4gICAgY29uc3RydWN0b3IodG9rZW5DYWNoZTogSVNlcmlhbGl6YWJsZVRva2VuQ2FjaGUsIGhhc0NoYW5nZWQ6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5jYWNoZSA9IHRva2VuQ2FjaGU7XG4gICAgICAgIHRoaXMuaGFzQ2hhbmdlZCA9IGhhc0NoYW5nZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogYm9vbGVhbiB3aGljaCBpbmRpY2F0ZXMgdGhlIGNoYW5nZXMgaW4gY2FjaGVcbiAgICAgKi9cbiAgICBnZXQgY2FjaGVIYXNDaGFuZ2VkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXNDaGFuZ2VkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGZ1bmN0aW9uIHRvIHJldHJpZXZlIHRoZSB0b2tlbiBjYWNoZVxuICAgICAqL1xuICAgIGdldCB0b2tlbkNhY2hlKCk6IElTZXJpYWxpemFibGVUb2tlbkNhY2hlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGU7XG4gICAgfVxufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBTZXJ2ZXJBdXRob3JpemF0aW9uVG9rZW5SZXNwb25zZSB9IGZyb20gXCIuL1NlcnZlckF1dGhvcml6YXRpb25Ub2tlblJlc3BvbnNlLmpzXCI7XG5pbXBvcnQgeyBJQ3J5cHRvIH0gZnJvbSBcIi4uL2NyeXB0by9JQ3J5cHRvLmpzXCI7XG5pbXBvcnQge1xuICAgIENsaWVudEF1dGhFcnJvckNvZGVzLFxuICAgIGNyZWF0ZUNsaWVudEF1dGhFcnJvcixcbn0gZnJvbSBcIi4uL2Vycm9yL0NsaWVudEF1dGhFcnJvci5qc1wiO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4uL2xvZ2dlci9Mb2dnZXIuanNcIjtcbmltcG9ydCB7IFNlcnZlckVycm9yIH0gZnJvbSBcIi4uL2Vycm9yL1NlcnZlckVycm9yLmpzXCI7XG5pbXBvcnQgeyBTY29wZVNldCB9IGZyb20gXCIuLi9yZXF1ZXN0L1Njb3BlU2V0LmpzXCI7XG5pbXBvcnQgeyBBdXRoZW50aWNhdGlvblJlc3VsdCB9IGZyb20gXCIuL0F1dGhlbnRpY2F0aW9uUmVzdWx0LmpzXCI7XG5pbXBvcnQgeyBBY2NvdW50RW50aXR5IH0gZnJvbSBcIi4uL2NhY2hlL2VudGl0aWVzL0FjY291bnRFbnRpdHkuanNcIjtcbmltcG9ydCB7IEF1dGhvcml0eSB9IGZyb20gXCIuLi9hdXRob3JpdHkvQXV0aG9yaXR5LmpzXCI7XG5pbXBvcnQgeyBJZFRva2VuRW50aXR5IH0gZnJvbSBcIi4uL2NhY2hlL2VudGl0aWVzL0lkVG9rZW5FbnRpdHkuanNcIjtcbmltcG9ydCB7IEFjY2Vzc1Rva2VuRW50aXR5IH0gZnJvbSBcIi4uL2NhY2hlL2VudGl0aWVzL0FjY2Vzc1Rva2VuRW50aXR5LmpzXCI7XG5pbXBvcnQgeyBSZWZyZXNoVG9rZW5FbnRpdHkgfSBmcm9tIFwiLi4vY2FjaGUvZW50aXRpZXMvUmVmcmVzaFRva2VuRW50aXR5LmpzXCI7XG5pbXBvcnQge1xuICAgIEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3IsXG4gICAgaXNJbnRlcmFjdGlvblJlcXVpcmVkRXJyb3IsXG59IGZyb20gXCIuLi9lcnJvci9JbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yLmpzXCI7XG5pbXBvcnQgeyBDYWNoZVJlY29yZCB9IGZyb20gXCIuLi9jYWNoZS9lbnRpdGllcy9DYWNoZVJlY29yZC5qc1wiO1xuaW1wb3J0IHsgQ2FjaGVNYW5hZ2VyIH0gZnJvbSBcIi4uL2NhY2hlL0NhY2hlTWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgUHJvdG9jb2xVdGlscywgUmVxdWVzdFN0YXRlT2JqZWN0IH0gZnJvbSBcIi4uL3V0aWxzL1Byb3RvY29sVXRpbHMuanNcIjtcbmltcG9ydCB7XG4gICAgQXV0aGVudGljYXRpb25TY2hlbWUsXG4gICAgQ29uc3RhbnRzLFxuICAgIFRIRV9GQU1JTFlfSUQsXG4gICAgSHR0cFN0YXR1cyxcbn0gZnJvbSBcIi4uL3V0aWxzL0NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgUG9wVG9rZW5HZW5lcmF0b3IgfSBmcm9tIFwiLi4vY3J5cHRvL1BvcFRva2VuR2VuZXJhdG9yLmpzXCI7XG5pbXBvcnQgeyBBcHBNZXRhZGF0YUVudGl0eSB9IGZyb20gXCIuLi9jYWNoZS9lbnRpdGllcy9BcHBNZXRhZGF0YUVudGl0eS5qc1wiO1xuaW1wb3J0IHsgSUNhY2hlUGx1Z2luIH0gZnJvbSBcIi4uL2NhY2hlL2ludGVyZmFjZS9JQ2FjaGVQbHVnaW4uanNcIjtcbmltcG9ydCB7IFRva2VuQ2FjaGVDb250ZXh0IH0gZnJvbSBcIi4uL2NhY2hlL3BlcnNpc3RlbmNlL1Rva2VuQ2FjaGVDb250ZXh0LmpzXCI7XG5pbXBvcnQgeyBJU2VyaWFsaXphYmxlVG9rZW5DYWNoZSB9IGZyb20gXCIuLi9jYWNoZS9pbnRlcmZhY2UvSVNlcmlhbGl6YWJsZVRva2VuQ2FjaGUuanNcIjtcbmltcG9ydCB7IEF1dGhvcml6YXRpb25Db2RlUGF5bG9hZCB9IGZyb20gXCIuL0F1dGhvcml6YXRpb25Db2RlUGF5bG9hZC5qc1wiO1xuaW1wb3J0IHsgQmFzZUF1dGhSZXF1ZXN0IH0gZnJvbSBcIi4uL3JlcXVlc3QvQmFzZUF1dGhSZXF1ZXN0LmpzXCI7XG5pbXBvcnQgeyBJUGVyZm9ybWFuY2VDbGllbnQgfSBmcm9tIFwiLi4vdGVsZW1ldHJ5L3BlcmZvcm1hbmNlL0lQZXJmb3JtYW5jZUNsaWVudC5qc1wiO1xuaW1wb3J0IHsgUGVyZm9ybWFuY2VFdmVudHMgfSBmcm9tIFwiLi4vdGVsZW1ldHJ5L3BlcmZvcm1hbmNlL1BlcmZvcm1hbmNlRXZlbnQuanNcIjtcbmltcG9ydCB7IGNoZWNrTWF4QWdlLCBleHRyYWN0VG9rZW5DbGFpbXMgfSBmcm9tIFwiLi4vYWNjb3VudC9BdXRoVG9rZW4uanNcIjtcbmltcG9ydCB7XG4gICAgVG9rZW5DbGFpbXMsXG4gICAgZ2V0VGVuYW50SWRGcm9tSWRUb2tlbkNsYWltcyxcbn0gZnJvbSBcIi4uL2FjY291bnQvVG9rZW5DbGFpbXMuanNcIjtcbmltcG9ydCB7XG4gICAgQWNjb3VudEluZm8sXG4gICAgYnVpbGRUZW5hbnRQcm9maWxlLFxuICAgIHVwZGF0ZUFjY291bnRUZW5hbnRQcm9maWxlRGF0YSxcbn0gZnJvbSBcIi4uL2FjY291bnQvQWNjb3VudEluZm8uanNcIjtcbmltcG9ydCAqIGFzIENhY2hlSGVscGVycyBmcm9tIFwiLi4vY2FjaGUvdXRpbHMvQ2FjaGVIZWxwZXJzLmpzXCI7XG5pbXBvcnQgKiBhcyBUaW1lVXRpbHMgZnJvbSBcIi4uL3V0aWxzL1RpbWVVdGlscy5qc1wiO1xuXG4vKipcbiAqIENsYXNzIHRoYXQgaGFuZGxlcyByZXNwb25zZSBwYXJzaW5nLlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBjbGFzcyBSZXNwb25zZUhhbmRsZXIge1xuICAgIHByaXZhdGUgY2xpZW50SWQ6IHN0cmluZztcbiAgICBwcml2YXRlIGNhY2hlU3RvcmFnZTogQ2FjaGVNYW5hZ2VyO1xuICAgIHByaXZhdGUgY3J5cHRvT2JqOiBJQ3J5cHRvO1xuICAgIHByaXZhdGUgbG9nZ2VyOiBMb2dnZXI7XG4gICAgcHJpdmF0ZSBob21lQWNjb3VudElkZW50aWZpZXI6IHN0cmluZztcbiAgICBwcml2YXRlIHNlcmlhbGl6YWJsZUNhY2hlOiBJU2VyaWFsaXphYmxlVG9rZW5DYWNoZSB8IG51bGw7XG4gICAgcHJpdmF0ZSBwZXJzaXN0ZW5jZVBsdWdpbjogSUNhY2hlUGx1Z2luIHwgbnVsbDtcbiAgICBwcml2YXRlIHBlcmZvcm1hbmNlQ2xpZW50PzogSVBlcmZvcm1hbmNlQ2xpZW50O1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGNsaWVudElkOiBzdHJpbmcsXG4gICAgICAgIGNhY2hlU3RvcmFnZTogQ2FjaGVNYW5hZ2VyLFxuICAgICAgICBjcnlwdG9PYmo6IElDcnlwdG8sXG4gICAgICAgIGxvZ2dlcjogTG9nZ2VyLFxuICAgICAgICBzZXJpYWxpemFibGVDYWNoZTogSVNlcmlhbGl6YWJsZVRva2VuQ2FjaGUgfCBudWxsLFxuICAgICAgICBwZXJzaXN0ZW5jZVBsdWdpbjogSUNhY2hlUGx1Z2luIHwgbnVsbCxcbiAgICAgICAgcGVyZm9ybWFuY2VDbGllbnQ/OiBJUGVyZm9ybWFuY2VDbGllbnRcbiAgICApIHtcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IGNsaWVudElkO1xuICAgICAgICB0aGlzLmNhY2hlU3RvcmFnZSA9IGNhY2hlU3RvcmFnZTtcbiAgICAgICAgdGhpcy5jcnlwdG9PYmogPSBjcnlwdG9PYmo7XG4gICAgICAgIHRoaXMubG9nZ2VyID0gbG9nZ2VyO1xuICAgICAgICB0aGlzLnNlcmlhbGl6YWJsZUNhY2hlID0gc2VyaWFsaXphYmxlQ2FjaGU7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2VQbHVnaW4gPSBwZXJzaXN0ZW5jZVBsdWdpbjtcbiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudCA9IHBlcmZvcm1hbmNlQ2xpZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHdoaWNoIHZhbGlkYXRlcyBzZXJ2ZXIgYXV0aG9yaXphdGlvbiB0b2tlbiByZXNwb25zZS5cbiAgICAgKiBAcGFyYW0gc2VydmVyUmVzcG9uc2VcbiAgICAgKiBAcGFyYW0gcmVmcmVzaEFjY2Vzc1Rva2VuXG4gICAgICovXG4gICAgdmFsaWRhdGVUb2tlblJlc3BvbnNlKFxuICAgICAgICBzZXJ2ZXJSZXNwb25zZTogU2VydmVyQXV0aG9yaXphdGlvblRva2VuUmVzcG9uc2UsXG4gICAgICAgIHJlZnJlc2hBY2Nlc3NUb2tlbj86IGJvb2xlYW5cbiAgICApOiB2b2lkIHtcbiAgICAgICAgLy8gQ2hlY2sgZm9yIGVycm9yXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHNlcnZlclJlc3BvbnNlLmVycm9yIHx8XG4gICAgICAgICAgICBzZXJ2ZXJSZXNwb25zZS5lcnJvcl9kZXNjcmlwdGlvbiB8fFxuICAgICAgICAgICAgc2VydmVyUmVzcG9uc2Uuc3ViZXJyb3JcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJTdHJpbmcgPSBgRXJyb3Iocyk6ICR7XG4gICAgICAgICAgICAgICAgc2VydmVyUmVzcG9uc2UuZXJyb3JfY29kZXMgfHwgQ29uc3RhbnRzLk5PVF9BVkFJTEFCTEVcbiAgICAgICAgICAgIH0gLSBUaW1lc3RhbXA6ICR7XG4gICAgICAgICAgICAgICAgc2VydmVyUmVzcG9uc2UudGltZXN0YW1wIHx8IENvbnN0YW50cy5OT1RfQVZBSUxBQkxFXG4gICAgICAgICAgICB9IC0gRGVzY3JpcHRpb246ICR7XG4gICAgICAgICAgICAgICAgc2VydmVyUmVzcG9uc2UuZXJyb3JfZGVzY3JpcHRpb24gfHwgQ29uc3RhbnRzLk5PVF9BVkFJTEFCTEVcbiAgICAgICAgICAgIH0gLSBDb3JyZWxhdGlvbiBJRDogJHtcbiAgICAgICAgICAgICAgICBzZXJ2ZXJSZXNwb25zZS5jb3JyZWxhdGlvbl9pZCB8fCBDb25zdGFudHMuTk9UX0FWQUlMQUJMRVxuICAgICAgICAgICAgfSAtIFRyYWNlIElEOiAke1xuICAgICAgICAgICAgICAgIHNlcnZlclJlc3BvbnNlLnRyYWNlX2lkIHx8IENvbnN0YW50cy5OT1RfQVZBSUxBQkxFXG4gICAgICAgICAgICB9YDtcbiAgICAgICAgICAgIGNvbnN0IHNlcnZlckVycm9yTm8gPSBzZXJ2ZXJSZXNwb25zZS5lcnJvcl9jb2Rlcz8ubGVuZ3RoXG4gICAgICAgICAgICAgICAgPyBzZXJ2ZXJSZXNwb25zZS5lcnJvcl9jb2Rlc1swXVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgY29uc3Qgc2VydmVyRXJyb3IgPSBuZXcgU2VydmVyRXJyb3IoXG4gICAgICAgICAgICAgICAgc2VydmVyUmVzcG9uc2UuZXJyb3IsXG4gICAgICAgICAgICAgICAgZXJyU3RyaW5nLFxuICAgICAgICAgICAgICAgIHNlcnZlclJlc3BvbnNlLnN1YmVycm9yLFxuICAgICAgICAgICAgICAgIHNlcnZlckVycm9yTm8sXG4gICAgICAgICAgICAgICAgc2VydmVyUmVzcG9uc2Uuc3RhdHVzXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyBjaGVjayBpZiA1MDAgZXJyb3JcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICByZWZyZXNoQWNjZXNzVG9rZW4gJiZcbiAgICAgICAgICAgICAgICBzZXJ2ZXJSZXNwb25zZS5zdGF0dXMgJiZcbiAgICAgICAgICAgICAgICBzZXJ2ZXJSZXNwb25zZS5zdGF0dXMgPj0gSHR0cFN0YXR1cy5TRVJWRVJfRVJST1JfUkFOR0VfU1RBUlQgJiZcbiAgICAgICAgICAgICAgICBzZXJ2ZXJSZXNwb25zZS5zdGF0dXMgPD0gSHR0cFN0YXR1cy5TRVJWRVJfRVJST1JfUkFOR0VfRU5EXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuaW5nKFxuICAgICAgICAgICAgICAgICAgICBgZXhlY3V0ZVRva2VuUmVxdWVzdDp2YWxpZGF0ZVRva2VuUmVzcG9uc2UgLSBBQUQgaXMgY3VycmVudGx5IHVuYXZhaWxhYmxlIGFuZCB0aGUgYWNjZXNzIHRva2VuIGlzIHVuYWJsZSB0byBiZSByZWZyZXNoZWQuXFxuJHtzZXJ2ZXJFcnJvcn1gXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIC8vIGRvbid0IHRocm93IGFuIGV4Y2VwdGlvbiwgYnV0IGFsZXJ0IHRoZSB1c2VyIHZpYSBhIGxvZyB0aGF0IHRoZSB0b2tlbiB3YXMgdW5hYmxlIHRvIGJlIHJlZnJlc2hlZFxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiA0MDAgZXJyb3JcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgcmVmcmVzaEFjY2Vzc1Rva2VuICYmXG4gICAgICAgICAgICAgICAgc2VydmVyUmVzcG9uc2Uuc3RhdHVzICYmXG4gICAgICAgICAgICAgICAgc2VydmVyUmVzcG9uc2Uuc3RhdHVzID49IEh0dHBTdGF0dXMuQ0xJRU5UX0VSUk9SX1JBTkdFX1NUQVJUICYmXG4gICAgICAgICAgICAgICAgc2VydmVyUmVzcG9uc2Uuc3RhdHVzIDw9IEh0dHBTdGF0dXMuQ0xJRU5UX0VSUk9SX1JBTkdFX0VORFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybmluZyhcbiAgICAgICAgICAgICAgICAgICAgYGV4ZWN1dGVUb2tlblJlcXVlc3Q6dmFsaWRhdGVUb2tlblJlc3BvbnNlIC0gQUFEIGlzIGN1cnJlbnRseSBhdmFpbGFibGUgYnV0IGlzIHVuYWJsZSB0byByZWZyZXNoIHRoZSBhY2Nlc3MgdG9rZW4uXFxuJHtzZXJ2ZXJFcnJvcn1gXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIC8vIGRvbid0IHRocm93IGFuIGV4Y2VwdGlvbiwgYnV0IGFsZXJ0IHRoZSB1c2VyIHZpYSBhIGxvZyB0aGF0IHRoZSB0b2tlbiB3YXMgdW5hYmxlIHRvIGJlIHJlZnJlc2hlZFxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGlzSW50ZXJhY3Rpb25SZXF1aXJlZEVycm9yKFxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJSZXNwb25zZS5lcnJvcixcbiAgICAgICAgICAgICAgICAgICAgc2VydmVyUmVzcG9uc2UuZXJyb3JfZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgICAgIHNlcnZlclJlc3BvbnNlLnN1YmVycm9yXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIHNlcnZlclJlc3BvbnNlLmVycm9yLFxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJSZXNwb25zZS5lcnJvcl9kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICAgICAgc2VydmVyUmVzcG9uc2Uuc3ViZXJyb3IsXG4gICAgICAgICAgICAgICAgICAgIHNlcnZlclJlc3BvbnNlLnRpbWVzdGFtcCB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HLFxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJSZXNwb25zZS50cmFjZV9pZCB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HLFxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJSZXNwb25zZS5jb3JyZWxhdGlvbl9pZCB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HLFxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJSZXNwb25zZS5jbGFpbXMgfHwgQ29uc3RhbnRzLkVNUFRZX1NUUklORyxcbiAgICAgICAgICAgICAgICAgICAgc2VydmVyRXJyb3JOb1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRocm93IHNlcnZlckVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGNvbnN0cnVjdGVkIHRva2VuIHJlc3BvbnNlIGJhc2VkIG9uIGdpdmVuIHN0cmluZy4gQWxzbyBtYW5hZ2VzIHRoZSBjYWNoZSB1cGRhdGVzIGFuZCBjbGVhbnVwcy5cbiAgICAgKiBAcGFyYW0gc2VydmVyVG9rZW5SZXNwb25zZVxuICAgICAqIEBwYXJhbSBhdXRob3JpdHlcbiAgICAgKi9cbiAgICBhc3luYyBoYW5kbGVTZXJ2ZXJUb2tlblJlc3BvbnNlKFxuICAgICAgICBzZXJ2ZXJUb2tlblJlc3BvbnNlOiBTZXJ2ZXJBdXRob3JpemF0aW9uVG9rZW5SZXNwb25zZSxcbiAgICAgICAgYXV0aG9yaXR5OiBBdXRob3JpdHksXG4gICAgICAgIHJlcVRpbWVzdGFtcDogbnVtYmVyLFxuICAgICAgICByZXF1ZXN0OiBCYXNlQXV0aFJlcXVlc3QsXG4gICAgICAgIGF1dGhDb2RlUGF5bG9hZD86IEF1dGhvcml6YXRpb25Db2RlUGF5bG9hZCxcbiAgICAgICAgdXNlckFzc2VydGlvbkhhc2g/OiBzdHJpbmcsXG4gICAgICAgIGhhbmRsaW5nUmVmcmVzaFRva2VuUmVzcG9uc2U/OiBib29sZWFuLFxuICAgICAgICBmb3JjZUNhY2hlUmVmcmVzaFRva2VuUmVzcG9uc2U/OiBib29sZWFuLFxuICAgICAgICBzZXJ2ZXJSZXF1ZXN0SWQ/OiBzdHJpbmdcbiAgICApOiBQcm9taXNlPEF1dGhlbnRpY2F0aW9uUmVzdWx0PiB7XG4gICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQ/LmFkZFF1ZXVlTWVhc3VyZW1lbnQoXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5IYW5kbGVTZXJ2ZXJUb2tlblJlc3BvbnNlLFxuICAgICAgICAgICAgc2VydmVyVG9rZW5SZXNwb25zZS5jb3JyZWxhdGlvbl9pZFxuICAgICAgICApO1xuXG4gICAgICAgIC8vIGNyZWF0ZSBhbiBpZFRva2VuIG9iamVjdCAobm90IGVudGl0eSlcbiAgICAgICAgbGV0IGlkVG9rZW5DbGFpbXM6IFRva2VuQ2xhaW1zIHwgdW5kZWZpbmVkO1xuICAgICAgICBpZiAoc2VydmVyVG9rZW5SZXNwb25zZS5pZF90b2tlbikge1xuICAgICAgICAgICAgaWRUb2tlbkNsYWltcyA9IGV4dHJhY3RUb2tlbkNsYWltcyhcbiAgICAgICAgICAgICAgICBzZXJ2ZXJUb2tlblJlc3BvbnNlLmlkX3Rva2VuIHx8IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgICAgICAgICAgICAgdGhpcy5jcnlwdG9PYmouYmFzZTY0RGVjb2RlXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyB0b2tlbiBub25jZSBjaGVjayAoVE9ETzogQWRkIGEgd2FybmluZyBpZiBubyBub25jZSBpcyBnaXZlbj8pXG4gICAgICAgICAgICBpZiAoYXV0aENvZGVQYXlsb2FkICYmIGF1dGhDb2RlUGF5bG9hZC5ub25jZSkge1xuICAgICAgICAgICAgICAgIGlmIChpZFRva2VuQ2xhaW1zLm5vbmNlICE9PSBhdXRoQ29kZVBheWxvYWQubm9uY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMubm9uY2VNaXNtYXRjaFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gdG9rZW4gbWF4X2FnZSBjaGVja1xuICAgICAgICAgICAgaWYgKHJlcXVlc3QubWF4QWdlIHx8IHJlcXVlc3QubWF4QWdlID09PSAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXV0aFRpbWUgPSBpZFRva2VuQ2xhaW1zLmF1dGhfdGltZTtcbiAgICAgICAgICAgICAgICBpZiAoIWF1dGhUaW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLmF1dGhUaW1lTm90Rm91bmRcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjaGVja01heEFnZShhdXRoVGltZSwgcmVxdWVzdC5tYXhBZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gZ2VuZXJhdGUgaG9tZUFjY291bnRJZFxuICAgICAgICB0aGlzLmhvbWVBY2NvdW50SWRlbnRpZmllciA9IEFjY291bnRFbnRpdHkuZ2VuZXJhdGVIb21lQWNjb3VudElkKFxuICAgICAgICAgICAgc2VydmVyVG9rZW5SZXNwb25zZS5jbGllbnRfaW5mbyB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HLFxuICAgICAgICAgICAgYXV0aG9yaXR5LmF1dGhvcml0eVR5cGUsXG4gICAgICAgICAgICB0aGlzLmxvZ2dlcixcbiAgICAgICAgICAgIHRoaXMuY3J5cHRvT2JqLFxuICAgICAgICAgICAgaWRUb2tlbkNsYWltc1xuICAgICAgICApO1xuXG4gICAgICAgIC8vIHNhdmUgdGhlIHJlc3BvbnNlIHRva2Vuc1xuICAgICAgICBsZXQgcmVxdWVzdFN0YXRlT2JqOiBSZXF1ZXN0U3RhdGVPYmplY3QgfCB1bmRlZmluZWQ7XG4gICAgICAgIGlmICghIWF1dGhDb2RlUGF5bG9hZCAmJiAhIWF1dGhDb2RlUGF5bG9hZC5zdGF0ZSkge1xuICAgICAgICAgICAgcmVxdWVzdFN0YXRlT2JqID0gUHJvdG9jb2xVdGlscy5wYXJzZVJlcXVlc3RTdGF0ZShcbiAgICAgICAgICAgICAgICB0aGlzLmNyeXB0b09iaixcbiAgICAgICAgICAgICAgICBhdXRoQ29kZVBheWxvYWQuc3RhdGVcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGQga2V5SWQgZnJvbSByZXF1ZXN0IHRvIHNlcnZlclRva2VuUmVzcG9uc2UgaWYgZGVmaW5lZFxuICAgICAgICBzZXJ2ZXJUb2tlblJlc3BvbnNlLmtleV9pZCA9XG4gICAgICAgICAgICBzZXJ2ZXJUb2tlblJlc3BvbnNlLmtleV9pZCB8fCByZXF1ZXN0LnNzaEtpZCB8fCB1bmRlZmluZWQ7XG5cbiAgICAgICAgY29uc3QgY2FjaGVSZWNvcmQgPSB0aGlzLmdlbmVyYXRlQ2FjaGVSZWNvcmQoXG4gICAgICAgICAgICBzZXJ2ZXJUb2tlblJlc3BvbnNlLFxuICAgICAgICAgICAgYXV0aG9yaXR5LFxuICAgICAgICAgICAgcmVxVGltZXN0YW1wLFxuICAgICAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgICAgIGlkVG9rZW5DbGFpbXMsXG4gICAgICAgICAgICB1c2VyQXNzZXJ0aW9uSGFzaCxcbiAgICAgICAgICAgIGF1dGhDb2RlUGF5bG9hZFxuICAgICAgICApO1xuICAgICAgICBsZXQgY2FjaGVDb250ZXh0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGVyc2lzdGVuY2VQbHVnaW4gJiYgdGhpcy5zZXJpYWxpemFibGVDYWNoZSkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgICAgIFwiUGVyc2lzdGVuY2UgZW5hYmxlZCwgY2FsbGluZyBiZWZvcmVDYWNoZUFjY2Vzc1wiXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBjYWNoZUNvbnRleHQgPSBuZXcgVG9rZW5DYWNoZUNvbnRleHQoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VyaWFsaXphYmxlQ2FjaGUsXG4gICAgICAgICAgICAgICAgICAgIHRydWVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGVyc2lzdGVuY2VQbHVnaW4uYmVmb3JlQ2FjaGVBY2Nlc3MoY2FjaGVDb250ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgKiBXaGVuIHNhdmluZyBhIHJlZnJlc2hlZCB0b2tlbnMgdG8gdGhlIGNhY2hlLCBpdCBpcyBleHBlY3RlZCB0aGF0IHRoZSBhY2NvdW50IHRoYXQgd2FzIHVzZWQgaXMgcHJlc2VudCBpbiB0aGUgY2FjaGUuXG4gICAgICAgICAgICAgKiBJZiBub3QgcHJlc2VudCwgd2Ugc2hvdWxkIHJldHVybiBudWxsLCBhcyBpdCdzIHRoZSBjYXNlIHRoYXQgYW5vdGhlciBhcHBsaWNhdGlvbiBjYWxsZWQgcmVtb3ZlQWNjb3VudCBpbiBiZXR3ZWVuXG4gICAgICAgICAgICAgKiB0aGUgY2FsbHMgdG8gZ2V0QWxsQWNjb3VudHMgYW5kIGFjcXVpcmVUb2tlblNpbGVudC4gV2Ugc2hvdWxkIG5vdCBvdmVyd3JpdGUgdGhhdCByZW1vdmFsLCB1bmxlc3MgZXhwbGljaXRseSBmbGFnZ2VkIGJ5XG4gICAgICAgICAgICAgKiB0aGUgZGV2ZWxvcGVyLCBhcyBpbiB0aGUgY2FzZSBvZiByZWZyZXNoIHRva2VuIGZsb3cgdXNlZCBpbiBBREFMIE5vZGUgdG8gTVNBTCBOb2RlIG1pZ3JhdGlvbi5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGhhbmRsaW5nUmVmcmVzaFRva2VuUmVzcG9uc2UgJiZcbiAgICAgICAgICAgICAgICAhZm9yY2VDYWNoZVJlZnJlc2hUb2tlblJlc3BvbnNlICYmXG4gICAgICAgICAgICAgICAgY2FjaGVSZWNvcmQuYWNjb3VudFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gY2FjaGVSZWNvcmQuYWNjb3VudC5nZW5lcmF0ZUFjY291bnRLZXkoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBhY2NvdW50ID0gdGhpcy5jYWNoZVN0b3JhZ2UuZ2V0QWNjb3VudChrZXkpO1xuICAgICAgICAgICAgICAgIGlmICghYWNjb3VudCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuaW5nKFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJBY2NvdW50IHVzZWQgdG8gcmVmcmVzaCB0b2tlbnMgbm90IGluIHBlcnNpc3RlbmNlLCByZWZyZXNoZWQgdG9rZW5zIHdpbGwgbm90IGJlIHN0b3JlZCBpbiB0aGUgY2FjaGVcIlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgUmVzcG9uc2VIYW5kbGVyLmdlbmVyYXRlQXV0aGVudGljYXRpb25SZXN1bHQoXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNyeXB0b09iaixcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhvcml0eSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlUmVjb3JkLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgaWRUb2tlbkNsYWltcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RTdGF0ZU9iaixcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlclJlcXVlc3RJZFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2FjaGVTdG9yYWdlLnNhdmVDYWNoZVJlY29yZChcbiAgICAgICAgICAgICAgICBjYWNoZVJlY29yZCxcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWQsXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5zdG9yZUluQ2FjaGVcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZVBsdWdpbiAmJlxuICAgICAgICAgICAgICAgIHRoaXMuc2VyaWFsaXphYmxlQ2FjaGUgJiZcbiAgICAgICAgICAgICAgICBjYWNoZUNvbnRleHRcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgICAgIFwiUGVyc2lzdGVuY2UgZW5hYmxlZCwgY2FsbGluZyBhZnRlckNhY2hlQWNjZXNzXCJcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGVyc2lzdGVuY2VQbHVnaW4uYWZ0ZXJDYWNoZUFjY2VzcyhjYWNoZUNvbnRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFJlc3BvbnNlSGFuZGxlci5nZW5lcmF0ZUF1dGhlbnRpY2F0aW9uUmVzdWx0KFxuICAgICAgICAgICAgdGhpcy5jcnlwdG9PYmosXG4gICAgICAgICAgICBhdXRob3JpdHksXG4gICAgICAgICAgICBjYWNoZVJlY29yZCxcbiAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgICAgIGlkVG9rZW5DbGFpbXMsXG4gICAgICAgICAgICByZXF1ZXN0U3RhdGVPYmosXG4gICAgICAgICAgICBzZXJ2ZXJUb2tlblJlc3BvbnNlLFxuICAgICAgICAgICAgc2VydmVyUmVxdWVzdElkXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIENhY2hlUmVjb3JkXG4gICAgICogQHBhcmFtIHNlcnZlclRva2VuUmVzcG9uc2VcbiAgICAgKiBAcGFyYW0gaWRUb2tlbk9ialxuICAgICAqIEBwYXJhbSBhdXRob3JpdHlcbiAgICAgKi9cbiAgICBwcml2YXRlIGdlbmVyYXRlQ2FjaGVSZWNvcmQoXG4gICAgICAgIHNlcnZlclRva2VuUmVzcG9uc2U6IFNlcnZlckF1dGhvcml6YXRpb25Ub2tlblJlc3BvbnNlLFxuICAgICAgICBhdXRob3JpdHk6IEF1dGhvcml0eSxcbiAgICAgICAgcmVxVGltZXN0YW1wOiBudW1iZXIsXG4gICAgICAgIHJlcXVlc3Q6IEJhc2VBdXRoUmVxdWVzdCxcbiAgICAgICAgaWRUb2tlbkNsYWltcz86IFRva2VuQ2xhaW1zLFxuICAgICAgICB1c2VyQXNzZXJ0aW9uSGFzaD86IHN0cmluZyxcbiAgICAgICAgYXV0aENvZGVQYXlsb2FkPzogQXV0aG9yaXphdGlvbkNvZGVQYXlsb2FkXG4gICAgKTogQ2FjaGVSZWNvcmQge1xuICAgICAgICBjb25zdCBlbnYgPSBhdXRob3JpdHkuZ2V0UHJlZmVycmVkQ2FjaGUoKTtcbiAgICAgICAgaWYgKCFlbnYpIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihcbiAgICAgICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy5pbnZhbGlkQ2FjaGVFbnZpcm9ubWVudFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNsYWltc1RlbmFudElkID0gZ2V0VGVuYW50SWRGcm9tSWRUb2tlbkNsYWltcyhpZFRva2VuQ2xhaW1zKTtcblxuICAgICAgICAvLyBJZFRva2VuOiBub24gQUFEIHNjZW5hcmlvcyBjYW4gaGF2ZSBlbXB0eSByZWFsbVxuICAgICAgICBsZXQgY2FjaGVkSWRUb2tlbjogSWRUb2tlbkVudGl0eSB8IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IGNhY2hlZEFjY291bnQ6IEFjY291bnRFbnRpdHkgfCB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChzZXJ2ZXJUb2tlblJlc3BvbnNlLmlkX3Rva2VuICYmICEhaWRUb2tlbkNsYWltcykge1xuICAgICAgICAgICAgY2FjaGVkSWRUb2tlbiA9IENhY2hlSGVscGVycy5jcmVhdGVJZFRva2VuRW50aXR5KFxuICAgICAgICAgICAgICAgIHRoaXMuaG9tZUFjY291bnRJZGVudGlmaWVyLFxuICAgICAgICAgICAgICAgIGVudixcbiAgICAgICAgICAgICAgICBzZXJ2ZXJUb2tlblJlc3BvbnNlLmlkX3Rva2VuLFxuICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgY2xhaW1zVGVuYW50SWQgfHwgXCJcIlxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY2FjaGVkQWNjb3VudCA9IGJ1aWxkQWNjb3VudFRvQ2FjaGUoXG4gICAgICAgICAgICAgICAgdGhpcy5jYWNoZVN0b3JhZ2UsXG4gICAgICAgICAgICAgICAgYXV0aG9yaXR5LFxuICAgICAgICAgICAgICAgIHRoaXMuaG9tZUFjY291bnRJZGVudGlmaWVyLFxuICAgICAgICAgICAgICAgIHRoaXMuY3J5cHRvT2JqLmJhc2U2NERlY29kZSxcbiAgICAgICAgICAgICAgICBpZFRva2VuQ2xhaW1zLFxuICAgICAgICAgICAgICAgIHNlcnZlclRva2VuUmVzcG9uc2UuY2xpZW50X2luZm8sXG4gICAgICAgICAgICAgICAgZW52LFxuICAgICAgICAgICAgICAgIGNsYWltc1RlbmFudElkLFxuICAgICAgICAgICAgICAgIGF1dGhDb2RlUGF5bG9hZCxcbiAgICAgICAgICAgICAgICB1bmRlZmluZWQsIC8vIG5hdGl2ZUFjY291bnRJZFxuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWNjZXNzVG9rZW5cbiAgICAgICAgbGV0IGNhY2hlZEFjY2Vzc1Rva2VuOiBBY2Nlc3NUb2tlbkVudGl0eSB8IG51bGwgPSBudWxsO1xuICAgICAgICBpZiAoc2VydmVyVG9rZW5SZXNwb25zZS5hY2Nlc3NfdG9rZW4pIHtcbiAgICAgICAgICAgIC8vIElmIHNjb3BlcyBub3QgcmV0dXJuZWQgaW4gc2VydmVyIHJlc3BvbnNlLCB1c2UgcmVxdWVzdCBzY29wZXNcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlU2NvcGVzID0gc2VydmVyVG9rZW5SZXNwb25zZS5zY29wZVxuICAgICAgICAgICAgICAgID8gU2NvcGVTZXQuZnJvbVN0cmluZyhzZXJ2ZXJUb2tlblJlc3BvbnNlLnNjb3BlKVxuICAgICAgICAgICAgICAgIDogbmV3IFNjb3BlU2V0KHJlcXVlc3Quc2NvcGVzIHx8IFtdKTtcblxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAqIFVzZSB0aW1lc3RhbXAgY2FsY3VsYXRlZCBiZWZvcmUgcmVxdWVzdFxuICAgICAgICAgICAgICogU2VydmVyIG1heSByZXR1cm4gdGltZXN0YW1wcyBhcyBzdHJpbmdzLCBwYXJzZSB0byBudW1iZXJzIGlmIHNvLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBjb25zdCBleHBpcmVzSW46IG51bWJlciA9XG4gICAgICAgICAgICAgICAgKHR5cGVvZiBzZXJ2ZXJUb2tlblJlc3BvbnNlLmV4cGlyZXNfaW4gPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgPyBwYXJzZUludChzZXJ2ZXJUb2tlblJlc3BvbnNlLmV4cGlyZXNfaW4sIDEwKVxuICAgICAgICAgICAgICAgICAgICA6IHNlcnZlclRva2VuUmVzcG9uc2UuZXhwaXJlc19pbikgfHwgMDtcbiAgICAgICAgICAgIGNvbnN0IGV4dEV4cGlyZXNJbjogbnVtYmVyID1cbiAgICAgICAgICAgICAgICAodHlwZW9mIHNlcnZlclRva2VuUmVzcG9uc2UuZXh0X2V4cGlyZXNfaW4gPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgPyBwYXJzZUludChzZXJ2ZXJUb2tlblJlc3BvbnNlLmV4dF9leHBpcmVzX2luLCAxMClcbiAgICAgICAgICAgICAgICAgICAgOiBzZXJ2ZXJUb2tlblJlc3BvbnNlLmV4dF9leHBpcmVzX2luKSB8fCAwO1xuICAgICAgICAgICAgY29uc3QgcmVmcmVzaEluOiBudW1iZXIgfCB1bmRlZmluZWQgPVxuICAgICAgICAgICAgICAgICh0eXBlb2Ygc2VydmVyVG9rZW5SZXNwb25zZS5yZWZyZXNoX2luID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICAgICAgICAgID8gcGFyc2VJbnQoc2VydmVyVG9rZW5SZXNwb25zZS5yZWZyZXNoX2luLCAxMClcbiAgICAgICAgICAgICAgICAgICAgOiBzZXJ2ZXJUb2tlblJlc3BvbnNlLnJlZnJlc2hfaW4pIHx8IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGNvbnN0IHRva2VuRXhwaXJhdGlvblNlY29uZHMgPSByZXFUaW1lc3RhbXAgKyBleHBpcmVzSW47XG4gICAgICAgICAgICBjb25zdCBleHRlbmRlZFRva2VuRXhwaXJhdGlvblNlY29uZHMgPVxuICAgICAgICAgICAgICAgIHRva2VuRXhwaXJhdGlvblNlY29uZHMgKyBleHRFeHBpcmVzSW47XG4gICAgICAgICAgICBjb25zdCByZWZyZXNoT25TZWNvbmRzID1cbiAgICAgICAgICAgICAgICByZWZyZXNoSW4gJiYgcmVmcmVzaEluID4gMFxuICAgICAgICAgICAgICAgICAgICA/IHJlcVRpbWVzdGFtcCArIHJlZnJlc2hJblxuICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgLy8gbm9uIEFBRCBzY2VuYXJpb3MgY2FuIGhhdmUgZW1wdHkgcmVhbG1cbiAgICAgICAgICAgIGNhY2hlZEFjY2Vzc1Rva2VuID0gQ2FjaGVIZWxwZXJzLmNyZWF0ZUFjY2Vzc1Rva2VuRW50aXR5KFxuICAgICAgICAgICAgICAgIHRoaXMuaG9tZUFjY291bnRJZGVudGlmaWVyLFxuICAgICAgICAgICAgICAgIGVudixcbiAgICAgICAgICAgICAgICBzZXJ2ZXJUb2tlblJlc3BvbnNlLmFjY2Vzc190b2tlbixcbiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudElkLFxuICAgICAgICAgICAgICAgIGNsYWltc1RlbmFudElkIHx8IGF1dGhvcml0eS50ZW5hbnQgfHwgXCJcIixcbiAgICAgICAgICAgICAgICByZXNwb25zZVNjb3Blcy5wcmludFNjb3BlcygpLFxuICAgICAgICAgICAgICAgIHRva2VuRXhwaXJhdGlvblNlY29uZHMsXG4gICAgICAgICAgICAgICAgZXh0ZW5kZWRUb2tlbkV4cGlyYXRpb25TZWNvbmRzLFxuICAgICAgICAgICAgICAgIHRoaXMuY3J5cHRvT2JqLmJhc2U2NERlY29kZSxcbiAgICAgICAgICAgICAgICByZWZyZXNoT25TZWNvbmRzLFxuICAgICAgICAgICAgICAgIHNlcnZlclRva2VuUmVzcG9uc2UudG9rZW5fdHlwZSxcbiAgICAgICAgICAgICAgICB1c2VyQXNzZXJ0aW9uSGFzaCxcbiAgICAgICAgICAgICAgICBzZXJ2ZXJUb2tlblJlc3BvbnNlLmtleV9pZCxcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmNsYWltcyxcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnJlcXVlc3RlZENsYWltc0hhc2hcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZWZyZXNoVG9rZW5cbiAgICAgICAgbGV0IGNhY2hlZFJlZnJlc2hUb2tlbjogUmVmcmVzaFRva2VuRW50aXR5IHwgbnVsbCA9IG51bGw7XG4gICAgICAgIGlmIChzZXJ2ZXJUb2tlblJlc3BvbnNlLnJlZnJlc2hfdG9rZW4pIHtcbiAgICAgICAgICAgIGxldCBydEV4cGlyZXNPbjogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKHNlcnZlclRva2VuUmVzcG9uc2UucmVmcmVzaF90b2tlbl9leHBpcmVzX2luKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcnRFeHBpcmVzSW46IG51bWJlciA9XG4gICAgICAgICAgICAgICAgICAgIHR5cGVvZiBzZXJ2ZXJUb2tlblJlc3BvbnNlLnJlZnJlc2hfdG9rZW5fZXhwaXJlc19pbiA9PT1cbiAgICAgICAgICAgICAgICAgICAgXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPyBwYXJzZUludChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlclRva2VuUmVzcG9uc2UucmVmcmVzaF90b2tlbl9leHBpcmVzX2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMTBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBzZXJ2ZXJUb2tlblJlc3BvbnNlLnJlZnJlc2hfdG9rZW5fZXhwaXJlc19pbjtcbiAgICAgICAgICAgICAgICBydEV4cGlyZXNPbiA9IHJlcVRpbWVzdGFtcCArIHJ0RXhwaXJlc0luO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FjaGVkUmVmcmVzaFRva2VuID0gQ2FjaGVIZWxwZXJzLmNyZWF0ZVJlZnJlc2hUb2tlbkVudGl0eShcbiAgICAgICAgICAgICAgICB0aGlzLmhvbWVBY2NvdW50SWRlbnRpZmllcixcbiAgICAgICAgICAgICAgICBlbnYsXG4gICAgICAgICAgICAgICAgc2VydmVyVG9rZW5SZXNwb25zZS5yZWZyZXNoX3Rva2VuLFxuICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgc2VydmVyVG9rZW5SZXNwb25zZS5mb2NpLFxuICAgICAgICAgICAgICAgIHVzZXJBc3NlcnRpb25IYXNoLFxuICAgICAgICAgICAgICAgIHJ0RXhwaXJlc09uXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYXBwTWV0YWRhdGFcbiAgICAgICAgbGV0IGNhY2hlZEFwcE1ldGFkYXRhOiBBcHBNZXRhZGF0YUVudGl0eSB8IG51bGwgPSBudWxsO1xuICAgICAgICBpZiAoc2VydmVyVG9rZW5SZXNwb25zZS5mb2NpKSB7XG4gICAgICAgICAgICBjYWNoZWRBcHBNZXRhZGF0YSA9IHtcbiAgICAgICAgICAgICAgICBjbGllbnRJZDogdGhpcy5jbGllbnRJZCxcbiAgICAgICAgICAgICAgICBlbnZpcm9ubWVudDogZW52LFxuICAgICAgICAgICAgICAgIGZhbWlseUlkOiBzZXJ2ZXJUb2tlblJlc3BvbnNlLmZvY2ksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFjY291bnQ6IGNhY2hlZEFjY291bnQsXG4gICAgICAgICAgICBpZFRva2VuOiBjYWNoZWRJZFRva2VuLFxuICAgICAgICAgICAgYWNjZXNzVG9rZW46IGNhY2hlZEFjY2Vzc1Rva2VuLFxuICAgICAgICAgICAgcmVmcmVzaFRva2VuOiBjYWNoZWRSZWZyZXNoVG9rZW4sXG4gICAgICAgICAgICBhcHBNZXRhZGF0YTogY2FjaGVkQXBwTWV0YWRhdGEsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBAQXV0aGVudGljYXRpb25SZXN1bHQgZnJvbSBAQ2FjaGVSZWNvcmQgLCBASWRUb2tlbiAsIGFuZCBhIGJvb2xlYW4gdGhhdCBzdGF0ZXMgd2hldGhlciBvciBub3QgdGhlIHJlc3VsdCBpcyBmcm9tIGNhY2hlLlxuICAgICAqXG4gICAgICogT3B0aW9uYWxseSB0YWtlcyBhIHN0YXRlIHN0cmluZyB0aGF0IGlzIHNldCBhcy1pcyBpbiB0aGUgcmVzcG9uc2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2FjaGVSZWNvcmRcbiAgICAgKiBAcGFyYW0gaWRUb2tlbk9ialxuICAgICAqIEBwYXJhbSBmcm9tVG9rZW5DYWNoZVxuICAgICAqIEBwYXJhbSBzdGF0ZVN0cmluZ1xuICAgICAqL1xuICAgIHN0YXRpYyBhc3luYyBnZW5lcmF0ZUF1dGhlbnRpY2F0aW9uUmVzdWx0KFxuICAgICAgICBjcnlwdG9PYmo6IElDcnlwdG8sXG4gICAgICAgIGF1dGhvcml0eTogQXV0aG9yaXR5LFxuICAgICAgICBjYWNoZVJlY29yZDogQ2FjaGVSZWNvcmQsXG4gICAgICAgIGZyb21Ub2tlbkNhY2hlOiBib29sZWFuLFxuICAgICAgICByZXF1ZXN0OiBCYXNlQXV0aFJlcXVlc3QsXG4gICAgICAgIGlkVG9rZW5DbGFpbXM/OiBUb2tlbkNsYWltcyxcbiAgICAgICAgcmVxdWVzdFN0YXRlPzogUmVxdWVzdFN0YXRlT2JqZWN0LFxuICAgICAgICBzZXJ2ZXJUb2tlblJlc3BvbnNlPzogU2VydmVyQXV0aG9yaXphdGlvblRva2VuUmVzcG9uc2UsXG4gICAgICAgIHJlcXVlc3RJZD86IHN0cmluZ1xuICAgICk6IFByb21pc2U8QXV0aGVudGljYXRpb25SZXN1bHQ+IHtcbiAgICAgICAgbGV0IGFjY2Vzc1Rva2VuOiBzdHJpbmcgPSBDb25zdGFudHMuRU1QVFlfU1RSSU5HO1xuICAgICAgICBsZXQgcmVzcG9uc2VTY29wZXM6IEFycmF5PHN0cmluZz4gPSBbXTtcbiAgICAgICAgbGV0IGV4cGlyZXNPbjogRGF0ZSB8IG51bGwgPSBudWxsO1xuICAgICAgICBsZXQgZXh0RXhwaXJlc09uOiBEYXRlIHwgdW5kZWZpbmVkO1xuICAgICAgICBsZXQgcmVmcmVzaE9uOiBEYXRlIHwgdW5kZWZpbmVkO1xuICAgICAgICBsZXQgZmFtaWx5SWQ6IHN0cmluZyA9IENvbnN0YW50cy5FTVBUWV9TVFJJTkc7XG5cbiAgICAgICAgaWYgKGNhY2hlUmVjb3JkLmFjY2Vzc1Rva2VuKSB7XG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgICogaWYgdGhlIHJlcXVlc3Qgb2JqZWN0IGhhcyBgcG9wS2lkYCBwcm9wZXJ0eSwgYHNpZ25Qb3BUb2tlbmAgd2lsbCBiZSBzZXQgdG8gZmFsc2UgYW5kXG4gICAgICAgICAgICAgKiB0aGUgdG9rZW4gd2lsbCBiZSByZXR1cm5lZCB1bnNpZ25lZFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgY2FjaGVSZWNvcmQuYWNjZXNzVG9rZW4udG9rZW5UeXBlID09PVxuICAgICAgICAgICAgICAgICAgICBBdXRoZW50aWNhdGlvblNjaGVtZS5QT1AgJiZcbiAgICAgICAgICAgICAgICAhcmVxdWVzdC5wb3BLaWRcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBvcFRva2VuR2VuZXJhdG9yOiBQb3BUb2tlbkdlbmVyYXRvciA9XG4gICAgICAgICAgICAgICAgICAgIG5ldyBQb3BUb2tlbkdlbmVyYXRvcihjcnlwdG9PYmopO1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgc2VjcmV0LCBrZXlJZCB9ID0gY2FjaGVSZWNvcmQuYWNjZXNzVG9rZW47XG5cbiAgICAgICAgICAgICAgICBpZiAoIWtleUlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLmtleUlkTWlzc2luZ1xuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuID0gYXdhaXQgcG9wVG9rZW5HZW5lcmF0b3Iuc2lnblBvcFRva2VuKFxuICAgICAgICAgICAgICAgICAgICBzZWNyZXQsXG4gICAgICAgICAgICAgICAgICAgIGtleUlkLFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYWNjZXNzVG9rZW4gPSBjYWNoZVJlY29yZC5hY2Nlc3NUb2tlbi5zZWNyZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXNwb25zZVNjb3BlcyA9IFNjb3BlU2V0LmZyb21TdHJpbmcoXG4gICAgICAgICAgICAgICAgY2FjaGVSZWNvcmQuYWNjZXNzVG9rZW4udGFyZ2V0XG4gICAgICAgICAgICApLmFzQXJyYXkoKTtcbiAgICAgICAgICAgIC8vIEFjY2VzcyB0b2tlbiBleHBpcmVzT24gY2FjaGVkIGluIHNlY29uZHMsIGNvbnZlcnRpbmcgdG8gRGF0ZSBmb3IgQXV0aGVudGljYXRpb25SZXN1bHRcbiAgICAgICAgICAgIGV4cGlyZXNPbiA9IFRpbWVVdGlscy50b0RhdGVGcm9tU2Vjb25kcyhcbiAgICAgICAgICAgICAgICBjYWNoZVJlY29yZC5hY2Nlc3NUb2tlbi5leHBpcmVzT25cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBleHRFeHBpcmVzT24gPSBUaW1lVXRpbHMudG9EYXRlRnJvbVNlY29uZHMoXG4gICAgICAgICAgICAgICAgY2FjaGVSZWNvcmQuYWNjZXNzVG9rZW4uZXh0ZW5kZWRFeHBpcmVzT25cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoY2FjaGVSZWNvcmQuYWNjZXNzVG9rZW4ucmVmcmVzaE9uKSB7XG4gICAgICAgICAgICAgICAgcmVmcmVzaE9uID0gVGltZVV0aWxzLnRvRGF0ZUZyb21TZWNvbmRzKFxuICAgICAgICAgICAgICAgICAgICBjYWNoZVJlY29yZC5hY2Nlc3NUb2tlbi5yZWZyZXNoT25cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNhY2hlUmVjb3JkLmFwcE1ldGFkYXRhKSB7XG4gICAgICAgICAgICBmYW1pbHlJZCA9XG4gICAgICAgICAgICAgICAgY2FjaGVSZWNvcmQuYXBwTWV0YWRhdGEuZmFtaWx5SWQgPT09IFRIRV9GQU1JTFlfSURcbiAgICAgICAgICAgICAgICAgICAgPyBUSEVfRkFNSUxZX0lEXG4gICAgICAgICAgICAgICAgICAgIDogXCJcIjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1aWQgPSBpZFRva2VuQ2xhaW1zPy5vaWQgfHwgaWRUb2tlbkNsYWltcz8uc3ViIHx8IFwiXCI7XG4gICAgICAgIGNvbnN0IHRpZCA9IGlkVG9rZW5DbGFpbXM/LnRpZCB8fCBcIlwiO1xuXG4gICAgICAgIC8vIGZvciBoeWJyaWQgKyBuYXRpdmUgYnJpZGdlIGVuYWJsZW1lbnQsIHNlbmQgYmFjayB0aGUgbmF0aXZlIGFjY291bnQgSWRcbiAgICAgICAgaWYgKHNlcnZlclRva2VuUmVzcG9uc2U/LnNwYV9hY2NvdW50aWQgJiYgISFjYWNoZVJlY29yZC5hY2NvdW50KSB7XG4gICAgICAgICAgICBjYWNoZVJlY29yZC5hY2NvdW50Lm5hdGl2ZUFjY291bnRJZCA9XG4gICAgICAgICAgICAgICAgc2VydmVyVG9rZW5SZXNwb25zZT8uc3BhX2FjY291bnRpZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGFjY291bnRJbmZvOiBBY2NvdW50SW5mbyB8IG51bGwgPSBjYWNoZVJlY29yZC5hY2NvdW50XG4gICAgICAgICAgICA/IHVwZGF0ZUFjY291bnRUZW5hbnRQcm9maWxlRGF0YShcbiAgICAgICAgICAgICAgICAgIGNhY2hlUmVjb3JkLmFjY291bnQuZ2V0QWNjb3VudEluZm8oKSxcbiAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCwgLy8gdGVuYW50UHJvZmlsZSBvcHRpb25hbFxuICAgICAgICAgICAgICAgICAgaWRUb2tlbkNsYWltcyxcbiAgICAgICAgICAgICAgICAgIGNhY2hlUmVjb3JkLmlkVG9rZW4/LnNlY3JldFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICA6IG51bGw7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGF1dGhvcml0eTogYXV0aG9yaXR5LmNhbm9uaWNhbEF1dGhvcml0eSxcbiAgICAgICAgICAgIHVuaXF1ZUlkOiB1aWQsXG4gICAgICAgICAgICB0ZW5hbnRJZDogdGlkLFxuICAgICAgICAgICAgc2NvcGVzOiByZXNwb25zZVNjb3BlcyxcbiAgICAgICAgICAgIGFjY291bnQ6IGFjY291bnRJbmZvLFxuICAgICAgICAgICAgaWRUb2tlbjogY2FjaGVSZWNvcmQ/LmlkVG9rZW4/LnNlY3JldCB8fCBcIlwiLFxuICAgICAgICAgICAgaWRUb2tlbkNsYWltczogaWRUb2tlbkNsYWltcyB8fCB7fSxcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiBhY2Nlc3NUb2tlbixcbiAgICAgICAgICAgIGZyb21DYWNoZTogZnJvbVRva2VuQ2FjaGUsXG4gICAgICAgICAgICBleHBpcmVzT246IGV4cGlyZXNPbixcbiAgICAgICAgICAgIGV4dEV4cGlyZXNPbjogZXh0RXhwaXJlc09uLFxuICAgICAgICAgICAgcmVmcmVzaE9uOiByZWZyZXNoT24sXG4gICAgICAgICAgICBjb3JyZWxhdGlvbklkOiByZXF1ZXN0LmNvcnJlbGF0aW9uSWQsXG4gICAgICAgICAgICByZXF1ZXN0SWQ6IHJlcXVlc3RJZCB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HLFxuICAgICAgICAgICAgZmFtaWx5SWQ6IGZhbWlseUlkLFxuICAgICAgICAgICAgdG9rZW5UeXBlOlxuICAgICAgICAgICAgICAgIGNhY2hlUmVjb3JkLmFjY2Vzc1Rva2VuPy50b2tlblR5cGUgfHwgQ29uc3RhbnRzLkVNUFRZX1NUUklORyxcbiAgICAgICAgICAgIHN0YXRlOiByZXF1ZXN0U3RhdGVcbiAgICAgICAgICAgICAgICA/IHJlcXVlc3RTdGF0ZS51c2VyUmVxdWVzdFN0YXRlXG4gICAgICAgICAgICAgICAgOiBDb25zdGFudHMuRU1QVFlfU1RSSU5HLFxuICAgICAgICAgICAgY2xvdWRHcmFwaEhvc3ROYW1lOlxuICAgICAgICAgICAgICAgIGNhY2hlUmVjb3JkLmFjY291bnQ/LmNsb3VkR3JhcGhIb3N0TmFtZSB8fFxuICAgICAgICAgICAgICAgIENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgICAgICAgICBtc0dyYXBoSG9zdDpcbiAgICAgICAgICAgICAgICBjYWNoZVJlY29yZC5hY2NvdW50Py5tc0dyYXBoSG9zdCB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HLFxuICAgICAgICAgICAgY29kZTogc2VydmVyVG9rZW5SZXNwb25zZT8uc3BhX2NvZGUsXG4gICAgICAgICAgICBmcm9tTmF0aXZlQnJva2VyOiBmYWxzZSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBidWlsZEFjY291bnRUb0NhY2hlKFxuICAgIGNhY2hlU3RvcmFnZTogQ2FjaGVNYW5hZ2VyLFxuICAgIGF1dGhvcml0eTogQXV0aG9yaXR5LFxuICAgIGhvbWVBY2NvdW50SWQ6IHN0cmluZyxcbiAgICBiYXNlNjREZWNvZGU6IChpbnB1dDogc3RyaW5nKSA9PiBzdHJpbmcsXG4gICAgaWRUb2tlbkNsYWltcz86IFRva2VuQ2xhaW1zLFxuICAgIGNsaWVudEluZm8/OiBzdHJpbmcsXG4gICAgZW52aXJvbm1lbnQ/OiBzdHJpbmcsXG4gICAgY2xhaW1zVGVuYW50SWQ/OiBzdHJpbmcgfCBudWxsLFxuICAgIGF1dGhDb2RlUGF5bG9hZD86IEF1dGhvcml6YXRpb25Db2RlUGF5bG9hZCxcbiAgICBuYXRpdmVBY2NvdW50SWQ/OiBzdHJpbmcsXG4gICAgbG9nZ2VyPzogTG9nZ2VyXG4pOiBBY2NvdW50RW50aXR5IHtcbiAgICBsb2dnZXI/LnZlcmJvc2UoXCJzZXRDYWNoZWRBY2NvdW50IGNhbGxlZFwiKTtcblxuICAgIC8vIENoZWNrIGlmIGJhc2UgYWNjb3VudCBpcyBhbHJlYWR5IGNhY2hlZFxuICAgIGNvbnN0IGFjY291bnRLZXlzID0gY2FjaGVTdG9yYWdlLmdldEFjY291bnRLZXlzKCk7XG4gICAgY29uc3QgYmFzZUFjY291bnRLZXkgPSBhY2NvdW50S2V5cy5maW5kKChhY2NvdW50S2V5OiBzdHJpbmcpID0+IHtcbiAgICAgICAgcmV0dXJuIGFjY291bnRLZXkuc3RhcnRzV2l0aChob21lQWNjb3VudElkKTtcbiAgICB9KTtcblxuICAgIGxldCBjYWNoZWRBY2NvdW50OiBBY2NvdW50RW50aXR5IHwgbnVsbCA9IG51bGw7XG4gICAgaWYgKGJhc2VBY2NvdW50S2V5KSB7XG4gICAgICAgIGNhY2hlZEFjY291bnQgPSBjYWNoZVN0b3JhZ2UuZ2V0QWNjb3VudChiYXNlQWNjb3VudEtleSk7XG4gICAgfVxuXG4gICAgY29uc3QgYmFzZUFjY291bnQgPVxuICAgICAgICBjYWNoZWRBY2NvdW50IHx8XG4gICAgICAgIEFjY291bnRFbnRpdHkuY3JlYXRlQWNjb3VudChcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBob21lQWNjb3VudElkLFxuICAgICAgICAgICAgICAgIGlkVG9rZW5DbGFpbXMsXG4gICAgICAgICAgICAgICAgY2xpZW50SW5mbyxcbiAgICAgICAgICAgICAgICBlbnZpcm9ubWVudCxcbiAgICAgICAgICAgICAgICBjbG91ZEdyYXBoSG9zdE5hbWU6IGF1dGhDb2RlUGF5bG9hZD8uY2xvdWRfZ3JhcGhfaG9zdF9uYW1lLFxuICAgICAgICAgICAgICAgIG1zR3JhcGhIb3N0OiBhdXRoQ29kZVBheWxvYWQ/Lm1zZ3JhcGhfaG9zdCxcbiAgICAgICAgICAgICAgICBuYXRpdmVBY2NvdW50SWQ6IG5hdGl2ZUFjY291bnRJZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhdXRob3JpdHksXG4gICAgICAgICAgICBiYXNlNjREZWNvZGVcbiAgICAgICAgKTtcblxuICAgIGNvbnN0IHRlbmFudFByb2ZpbGVzID0gYmFzZUFjY291bnQudGVuYW50UHJvZmlsZXMgfHwgW107XG4gICAgY29uc3QgdGVuYW50SWQgPSBjbGFpbXNUZW5hbnRJZCB8fCBiYXNlQWNjb3VudC5yZWFsbTtcbiAgICBpZiAoXG4gICAgICAgIHRlbmFudElkICYmXG4gICAgICAgICF0ZW5hbnRQcm9maWxlcy5maW5kKCh0ZW5hbnRQcm9maWxlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGVuYW50UHJvZmlsZS50ZW5hbnRJZCA9PT0gdGVuYW50SWQ7XG4gICAgICAgIH0pXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IG5ld1RlbmFudFByb2ZpbGUgPSBidWlsZFRlbmFudFByb2ZpbGUoXG4gICAgICAgICAgICBob21lQWNjb3VudElkLFxuICAgICAgICAgICAgYmFzZUFjY291bnQubG9jYWxBY2NvdW50SWQsXG4gICAgICAgICAgICB0ZW5hbnRJZCxcbiAgICAgICAgICAgIGlkVG9rZW5DbGFpbXNcbiAgICAgICAgKTtcbiAgICAgICAgdGVuYW50UHJvZmlsZXMucHVzaChuZXdUZW5hbnRQcm9maWxlKTtcbiAgICB9XG4gICAgYmFzZUFjY291bnQudGVuYW50UHJvZmlsZXMgPSB0ZW5hbnRQcm9maWxlcztcblxuICAgIHJldHVybiBiYXNlQWNjb3VudDtcbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgICBjcmVhdGVDbGllbnRDb25maWd1cmF0aW9uRXJyb3IsXG4gICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMsXG59IGZyb20gXCIuLi9lcnJvci9DbGllbnRDb25maWd1cmF0aW9uRXJyb3IuanNcIjtcbmltcG9ydCB7IFByb21wdFZhbHVlLCBDb2RlQ2hhbGxlbmdlTWV0aG9kVmFsdWVzIH0gZnJvbSBcIi4uL3V0aWxzL0NvbnN0YW50cy5qc1wiO1xuXG4vKipcbiAqIFZhbGlkYXRlcyBzZXJ2ZXIgY29uc3VtYWJsZSBwYXJhbXMgZnJvbSB0aGUgXCJyZXF1ZXN0XCIgb2JqZWN0c1xuICovXG5leHBvcnQgY2xhc3MgUmVxdWVzdFZhbGlkYXRvciB7XG4gICAgLyoqXG4gICAgICogVXRpbGl0eSB0byBjaGVjayBpZiB0aGUgYHJlZGlyZWN0VXJpYCBpbiB0aGUgcmVxdWVzdCBpcyBhIG5vbi1udWxsIHZhbHVlXG4gICAgICogQHBhcmFtIHJlZGlyZWN0VXJpXG4gICAgICovXG4gICAgc3RhdGljIHZhbGlkYXRlUmVkaXJlY3RVcmkocmVkaXJlY3RVcmk6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZiAoIXJlZGlyZWN0VXJpKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRDb25maWd1cmF0aW9uRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMucmVkaXJlY3RVcmlFbXB0eVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFV0aWxpdHkgdG8gdmFsaWRhdGUgcHJvbXB0IHNlbnQgYnkgdGhlIHVzZXIgaW4gdGhlIHJlcXVlc3RcbiAgICAgKiBAcGFyYW0gcHJvbXB0XG4gICAgICovXG4gICAgc3RhdGljIHZhbGlkYXRlUHJvbXB0KHByb21wdDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHByb21wdFZhbHVlcyA9IFtdO1xuXG4gICAgICAgIGZvciAoY29uc3QgdmFsdWUgaW4gUHJvbXB0VmFsdWUpIHtcbiAgICAgICAgICAgIHByb21wdFZhbHVlcy5wdXNoKFByb21wdFZhbHVlW3ZhbHVlXSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocHJvbXB0VmFsdWVzLmluZGV4T2YocHJvbXB0KSA8IDApIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudENvbmZpZ3VyYXRpb25FcnJvcihcbiAgICAgICAgICAgICAgICBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5pbnZhbGlkUHJvbXB0VmFsdWVcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgdmFsaWRhdGVDbGFpbXMoY2xhaW1zOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIEpTT04ucGFyc2UoY2xhaW1zKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yKFxuICAgICAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmludmFsaWRDbGFpbXNcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVdGlsaXR5IHRvIHZhbGlkYXRlIGNvZGVfY2hhbGxlbmdlIGFuZCBjb2RlX2NoYWxsZW5nZV9tZXRob2RcbiAgICAgKiBAcGFyYW0gY29kZUNoYWxsZW5nZVxuICAgICAqIEBwYXJhbSBjb2RlQ2hhbGxlbmdlTWV0aG9kXG4gICAgICovXG4gICAgc3RhdGljIHZhbGlkYXRlQ29kZUNoYWxsZW5nZVBhcmFtcyhcbiAgICAgICAgY29kZUNoYWxsZW5nZTogc3RyaW5nLFxuICAgICAgICBjb2RlQ2hhbGxlbmdlTWV0aG9kOiBzdHJpbmdcbiAgICApOiB2b2lkIHtcbiAgICAgICAgaWYgKCFjb2RlQ2hhbGxlbmdlIHx8ICFjb2RlQ2hhbGxlbmdlTWV0aG9kKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRDb25maWd1cmF0aW9uRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMucGtjZVBhcmFtc01pc3NpbmdcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlQ29kZUNoYWxsZW5nZU1ldGhvZChjb2RlQ2hhbGxlbmdlTWV0aG9kKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFV0aWxpdHkgdG8gdmFsaWRhdGUgY29kZV9jaGFsbGVuZ2VfbWV0aG9kXG4gICAgICogQHBhcmFtIGNvZGVDaGFsbGVuZ2VNZXRob2RcbiAgICAgKi9cbiAgICBzdGF0aWMgdmFsaWRhdGVDb2RlQ2hhbGxlbmdlTWV0aG9kKGNvZGVDaGFsbGVuZ2VNZXRob2Q6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgQ29kZUNoYWxsZW5nZU1ldGhvZFZhbHVlcy5QTEFJTixcbiAgICAgICAgICAgICAgICBDb2RlQ2hhbGxlbmdlTWV0aG9kVmFsdWVzLlMyNTYsXG4gICAgICAgICAgICBdLmluZGV4T2YoY29kZUNoYWxsZW5nZU1ldGhvZCkgPCAwXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yKFxuICAgICAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmludmFsaWRDb2RlQ2hhbGxlbmdlTWV0aG9kXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICAgIENsaWVudEFzc2VydGlvbkNhbGxiYWNrLFxuICAgIENsaWVudEFzc2VydGlvbkNvbmZpZyxcbn0gZnJvbSBcIi4uL2FjY291bnQvQ2xpZW50Q3JlZGVudGlhbHMuanNcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENsaWVudEFzc2VydGlvbihcbiAgICBjbGllbnRBc3NlcnRpb246IHN0cmluZyB8IENsaWVudEFzc2VydGlvbkNhbGxiYWNrLFxuICAgIGNsaWVudElkOiBzdHJpbmcsXG4gICAgdG9rZW5FbmRwb2ludD86IHN0cmluZ1xuKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBpZiAodHlwZW9mIGNsaWVudEFzc2VydGlvbiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gY2xpZW50QXNzZXJ0aW9uO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZzogQ2xpZW50QXNzZXJ0aW9uQ29uZmlnID0ge1xuICAgICAgICAgICAgY2xpZW50SWQ6IGNsaWVudElkLFxuICAgICAgICAgICAgdG9rZW5FbmRwb2ludDogdG9rZW5FbmRwb2ludCxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGNsaWVudEFzc2VydGlvbihjb25maWcpO1xuICAgIH1cbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQmFzZUNsaWVudCB9IGZyb20gXCIuL0Jhc2VDbGllbnQuanNcIjtcbmltcG9ydCB7IENvbW1vbkF1dGhvcml6YXRpb25Db2RlUmVxdWVzdCB9IGZyb20gXCIuLi9yZXF1ZXN0L0NvbW1vbkF1dGhvcml6YXRpb25Db2RlUmVxdWVzdC5qc1wiO1xuaW1wb3J0IHsgQXV0aG9yaXR5IH0gZnJvbSBcIi4uL2F1dGhvcml0eS9BdXRob3JpdHkuanNcIjtcbmltcG9ydCAqIGFzIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyIGZyb20gXCIuLi9yZXF1ZXN0L1JlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmpzXCI7XG5pbXBvcnQgKiBhcyBVcmxVdGlscyBmcm9tIFwiLi4vdXRpbHMvVXJsVXRpbHMuanNcIjtcbmltcG9ydCB7XG4gICAgR3JhbnRUeXBlLFxuICAgIEF1dGhlbnRpY2F0aW9uU2NoZW1lLFxuICAgIFNlcGFyYXRvcnMsXG4gICAgSGVhZGVyTmFtZXMsXG59IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcbmltcG9ydCAqIGFzIEFBRFNlcnZlclBhcmFtS2V5cyBmcm9tIFwiLi4vY29uc3RhbnRzL0FBRFNlcnZlclBhcmFtS2V5cy5qc1wiO1xuaW1wb3J0IHtcbiAgICBDbGllbnRDb25maWd1cmF0aW9uLFxuICAgIGlzT2lkY1Byb3RvY29sTW9kZSxcbn0gZnJvbSBcIi4uL2NvbmZpZy9DbGllbnRDb25maWd1cmF0aW9uLmpzXCI7XG5pbXBvcnQgeyBTZXJ2ZXJBdXRob3JpemF0aW9uVG9rZW5SZXNwb25zZSB9IGZyb20gXCIuLi9yZXNwb25zZS9TZXJ2ZXJBdXRob3JpemF0aW9uVG9rZW5SZXNwb25zZS5qc1wiO1xuaW1wb3J0IHsgTmV0d29ya1Jlc3BvbnNlIH0gZnJvbSBcIi4uL25ldHdvcmsvTmV0d29ya1Jlc3BvbnNlLmpzXCI7XG5pbXBvcnQgeyBSZXNwb25zZUhhbmRsZXIgfSBmcm9tIFwiLi4vcmVzcG9uc2UvUmVzcG9uc2VIYW5kbGVyLmpzXCI7XG5pbXBvcnQgeyBBdXRoZW50aWNhdGlvblJlc3VsdCB9IGZyb20gXCIuLi9yZXNwb25zZS9BdXRoZW50aWNhdGlvblJlc3VsdC5qc1wiO1xuaW1wb3J0IHsgU3RyaW5nVXRpbHMgfSBmcm9tIFwiLi4vdXRpbHMvU3RyaW5nVXRpbHMuanNcIjtcbmltcG9ydCB7XG4gICAgQ2xpZW50QXV0aEVycm9yQ29kZXMsXG4gICAgY3JlYXRlQ2xpZW50QXV0aEVycm9yLFxufSBmcm9tIFwiLi4vZXJyb3IvQ2xpZW50QXV0aEVycm9yLmpzXCI7XG5pbXBvcnQgeyBVcmxTdHJpbmcgfSBmcm9tIFwiLi4vdXJsL1VybFN0cmluZy5qc1wiO1xuaW1wb3J0IHsgQ29tbW9uRW5kU2Vzc2lvblJlcXVlc3QgfSBmcm9tIFwiLi4vcmVxdWVzdC9Db21tb25FbmRTZXNzaW9uUmVxdWVzdC5qc1wiO1xuaW1wb3J0IHsgUG9wVG9rZW5HZW5lcmF0b3IgfSBmcm9tIFwiLi4vY3J5cHRvL1BvcFRva2VuR2VuZXJhdG9yLmpzXCI7XG5pbXBvcnQgeyBBdXRob3JpemF0aW9uQ29kZVBheWxvYWQgfSBmcm9tIFwiLi4vcmVzcG9uc2UvQXV0aG9yaXphdGlvbkNvZGVQYXlsb2FkLmpzXCI7XG5pbXBvcnQgKiBhcyBUaW1lVXRpbHMgZnJvbSBcIi4uL3V0aWxzL1RpbWVVdGlscy5qc1wiO1xuaW1wb3J0IHtcbiAgICBidWlsZENsaWVudEluZm9Gcm9tSG9tZUFjY291bnRJZCxcbiAgICBidWlsZENsaWVudEluZm8sXG59IGZyb20gXCIuLi9hY2NvdW50L0NsaWVudEluZm8uanNcIjtcbmltcG9ydCB7IENjc0NyZWRlbnRpYWxUeXBlLCBDY3NDcmVkZW50aWFsIH0gZnJvbSBcIi4uL2FjY291bnQvQ2NzQ3JlZGVudGlhbC5qc1wiO1xuaW1wb3J0IHtcbiAgICBjcmVhdGVDbGllbnRDb25maWd1cmF0aW9uRXJyb3IsXG4gICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMsXG59IGZyb20gXCIuLi9lcnJvci9DbGllbnRDb25maWd1cmF0aW9uRXJyb3IuanNcIjtcbmltcG9ydCB7IFJlcXVlc3RWYWxpZGF0b3IgfSBmcm9tIFwiLi4vcmVxdWVzdC9SZXF1ZXN0VmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgeyBJUGVyZm9ybWFuY2VDbGllbnQgfSBmcm9tIFwiLi4vdGVsZW1ldHJ5L3BlcmZvcm1hbmNlL0lQZXJmb3JtYW5jZUNsaWVudC5qc1wiO1xuaW1wb3J0IHsgUGVyZm9ybWFuY2VFdmVudHMgfSBmcm9tIFwiLi4vdGVsZW1ldHJ5L3BlcmZvcm1hbmNlL1BlcmZvcm1hbmNlRXZlbnQuanNcIjtcbmltcG9ydCB7IGludm9rZUFzeW5jIH0gZnJvbSBcIi4uL3V0aWxzL0Z1bmN0aW9uV3JhcHBlcnMuanNcIjtcbmltcG9ydCB7IENsaWVudEFzc2VydGlvbiB9IGZyb20gXCIuLi9hY2NvdW50L0NsaWVudENyZWRlbnRpYWxzLmpzXCI7XG5pbXBvcnQgeyBnZXRDbGllbnRBc3NlcnRpb24gfSBmcm9tIFwiLi4vdXRpbHMvQ2xpZW50QXNzZXJ0aW9uVXRpbHMuanNcIjtcbmltcG9ydCB7IGdldFJlcXVlc3RUaHVtYnByaW50IH0gZnJvbSBcIi4uL25ldHdvcmsvUmVxdWVzdFRodW1icHJpbnQuanNcIjtcblxuLyoqXG4gKiBPYXV0aDIuMCBBdXRob3JpemF0aW9uIENvZGUgY2xpZW50XG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGNsYXNzIEF1dGhvcml6YXRpb25Db2RlQ2xpZW50IGV4dGVuZHMgQmFzZUNsaWVudCB7XG4gICAgLy8gRmxhZyB0byBpbmRpY2F0ZSBpZiBjbGllbnQgaXMgZm9yIGh5YnJpZCBzcGEgYXV0aCBjb2RlIHJlZGVtcHRpb25cbiAgICBwcm90ZWN0ZWQgaW5jbHVkZVJlZGlyZWN0VXJpOiBib29sZWFuID0gdHJ1ZTtcbiAgICBwcml2YXRlIG9pZGNEZWZhdWx0U2NvcGVzO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGNvbmZpZ3VyYXRpb246IENsaWVudENvbmZpZ3VyYXRpb24sXG4gICAgICAgIHBlcmZvcm1hbmNlQ2xpZW50PzogSVBlcmZvcm1hbmNlQ2xpZW50XG4gICAgKSB7XG4gICAgICAgIHN1cGVyKGNvbmZpZ3VyYXRpb24sIHBlcmZvcm1hbmNlQ2xpZW50KTtcbiAgICAgICAgdGhpcy5vaWRjRGVmYXVsdFNjb3BlcyA9XG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5hdXRob3JpdHkub3B0aW9ucy5PSURDT3B0aW9ucz8uZGVmYXVsdFNjb3BlcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBUEkgdG8gYWNxdWlyZSBhIHRva2VuIGluIGV4Y2hhbmdlIG9mICdhdXRob3JpemF0aW9uX2NvZGVgIGFjcXVpcmVkIGJ5IHRoZSB1c2VyIGluIHRoZSBmaXJzdCBsZWcgb2YgdGhlXG4gICAgICogYXV0aG9yaXphdGlvbl9jb2RlX2dyYW50XG4gICAgICogQHBhcmFtIHJlcXVlc3RcbiAgICAgKi9cbiAgICBhc3luYyBhY3F1aXJlVG9rZW4oXG4gICAgICAgIHJlcXVlc3Q6IENvbW1vbkF1dGhvcml6YXRpb25Db2RlUmVxdWVzdCxcbiAgICAgICAgYXV0aENvZGVQYXlsb2FkPzogQXV0aG9yaXphdGlvbkNvZGVQYXlsb2FkXG4gICAgKTogUHJvbWlzZTxBdXRoZW50aWNhdGlvblJlc3VsdD4ge1xuICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50Py5hZGRRdWV1ZU1lYXN1cmVtZW50KFxuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuQXV0aENsaWVudEFjcXVpcmVUb2tlbixcbiAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuXG4gICAgICAgIGlmICghcmVxdWVzdC5jb2RlKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMucmVxdWVzdENhbm5vdEJlTWFkZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlcVRpbWVzdGFtcCA9IFRpbWVVdGlscy5ub3dTZWNvbmRzKCk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgaW52b2tlQXN5bmMoXG4gICAgICAgICAgICB0aGlzLmV4ZWN1dGVUb2tlblJlcXVlc3QuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkF1dGhDbGllbnRFeGVjdXRlVG9rZW5SZXF1ZXN0LFxuICAgICAgICAgICAgdGhpcy5sb2dnZXIsXG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50LFxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICkodGhpcy5hdXRob3JpdHksIHJlcXVlc3QpO1xuXG4gICAgICAgIC8vIFJldHJpZXZlIHJlcXVlc3RJZCBmcm9tIHJlc3BvbnNlIGhlYWRlcnNcbiAgICAgICAgY29uc3QgcmVxdWVzdElkID0gcmVzcG9uc2UuaGVhZGVycz8uW0hlYWRlck5hbWVzLlhfTVNfUkVRVUVTVF9JRF07XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2VIYW5kbGVyID0gbmV3IFJlc3BvbnNlSGFuZGxlcihcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmF1dGhPcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgICAgdGhpcy5jYWNoZU1hbmFnZXIsXG4gICAgICAgICAgICB0aGlzLmNyeXB0b1V0aWxzLFxuICAgICAgICAgICAgdGhpcy5sb2dnZXIsXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5zZXJpYWxpemFibGVDYWNoZSxcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLnBlcnNpc3RlbmNlUGx1Z2luLFxuICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudFxuICAgICAgICApO1xuXG4gICAgICAgIC8vIFZhbGlkYXRlIHJlc3BvbnNlLiBUaGlzIGZ1bmN0aW9uIHRocm93cyBhIHNlcnZlciBlcnJvciBpZiBhbiBlcnJvciBpcyByZXR1cm5lZCBieSB0aGUgc2VydmVyLlxuICAgICAgICByZXNwb25zZUhhbmRsZXIudmFsaWRhdGVUb2tlblJlc3BvbnNlKHJlc3BvbnNlLmJvZHkpO1xuXG4gICAgICAgIHJldHVybiBpbnZva2VBc3luYyhcbiAgICAgICAgICAgIHJlc3BvbnNlSGFuZGxlci5oYW5kbGVTZXJ2ZXJUb2tlblJlc3BvbnNlLmJpbmQocmVzcG9uc2VIYW5kbGVyKSxcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkhhbmRsZVNlcnZlclRva2VuUmVzcG9uc2UsXG4gICAgICAgICAgICB0aGlzLmxvZ2dlcixcbiAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQsXG4gICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKShcbiAgICAgICAgICAgIHJlc3BvbnNlLmJvZHksXG4gICAgICAgICAgICB0aGlzLmF1dGhvcml0eSxcbiAgICAgICAgICAgIHJlcVRpbWVzdGFtcCxcbiAgICAgICAgICAgIHJlcXVlc3QsXG4gICAgICAgICAgICBhdXRoQ29kZVBheWxvYWQsXG4gICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICByZXF1ZXN0SWRcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2VkIHRvIGxvZyBvdXQgdGhlIGN1cnJlbnQgdXNlciwgYW5kIHJlZGlyZWN0IHRoZSB1c2VyIHRvIHRoZSBwb3N0TG9nb3V0UmVkaXJlY3RVcmkuXG4gICAgICogRGVmYXVsdCBiZWhhdmlvdXIgaXMgdG8gcmVkaXJlY3QgdGhlIHVzZXIgdG8gYHdpbmRvdy5sb2NhdGlvbi5ocmVmYC5cbiAgICAgKiBAcGFyYW0gYXV0aG9yaXR5VXJpXG4gICAgICovXG4gICAgZ2V0TG9nb3V0VXJpKGxvZ291dFJlcXVlc3Q6IENvbW1vbkVuZFNlc3Npb25SZXF1ZXN0KTogc3RyaW5nIHtcbiAgICAgICAgLy8gVGhyb3cgZXJyb3IgaWYgbG9nb3V0UmVxdWVzdCBpcyBudWxsL3VuZGVmaW5lZFxuICAgICAgICBpZiAoIWxvZ291dFJlcXVlc3QpIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudENvbmZpZ3VyYXRpb25FcnJvcihcbiAgICAgICAgICAgICAgICBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5sb2dvdXRSZXF1ZXN0RW1wdHlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcXVlcnlTdHJpbmcgPSB0aGlzLmNyZWF0ZUxvZ291dFVybFF1ZXJ5U3RyaW5nKGxvZ291dFJlcXVlc3QpO1xuXG4gICAgICAgIC8vIENvbnN0cnVjdCBsb2dvdXQgVVJJXG4gICAgICAgIHJldHVybiBVcmxTdHJpbmcuYXBwZW5kUXVlcnlTdHJpbmcoXG4gICAgICAgICAgICB0aGlzLmF1dGhvcml0eS5lbmRTZXNzaW9uRW5kcG9pbnQsXG4gICAgICAgICAgICBxdWVyeVN0cmluZ1xuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4ZWN1dGVzIFBPU1QgcmVxdWVzdCB0byB0b2tlbiBlbmRwb2ludFxuICAgICAqIEBwYXJhbSBhdXRob3JpdHlcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgZXhlY3V0ZVRva2VuUmVxdWVzdChcbiAgICAgICAgYXV0aG9yaXR5OiBBdXRob3JpdHksXG4gICAgICAgIHJlcXVlc3Q6IENvbW1vbkF1dGhvcml6YXRpb25Db2RlUmVxdWVzdFxuICAgICk6IFByb21pc2U8TmV0d29ya1Jlc3BvbnNlPFNlcnZlckF1dGhvcml6YXRpb25Ub2tlblJlc3BvbnNlPj4ge1xuICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50Py5hZGRRdWV1ZU1lYXN1cmVtZW50KFxuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuQXV0aENsaWVudEV4ZWN1dGVUb2tlblJlcXVlc3QsXG4gICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnNTdHJpbmcgPSB0aGlzLmNyZWF0ZVRva2VuUXVlcnlQYXJhbWV0ZXJzKHJlcXVlc3QpO1xuICAgICAgICBjb25zdCBlbmRwb2ludCA9IFVybFN0cmluZy5hcHBlbmRRdWVyeVN0cmluZyhcbiAgICAgICAgICAgIGF1dGhvcml0eS50b2tlbkVuZHBvaW50LFxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzU3RyaW5nXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgcmVxdWVzdEJvZHkgPSBhd2FpdCBpbnZva2VBc3luYyhcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlVG9rZW5SZXF1ZXN0Qm9keS5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuQXV0aENsaWVudENyZWF0ZVRva2VuUmVxdWVzdEJvZHksXG4gICAgICAgICAgICB0aGlzLmxvZ2dlcixcbiAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQsXG4gICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKShyZXF1ZXN0KTtcblxuICAgICAgICBsZXQgY2NzQ3JlZGVudGlhbDogQ2NzQ3JlZGVudGlhbCB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHJlcXVlc3QuY2xpZW50SW5mbykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjbGllbnRJbmZvID0gYnVpbGRDbGllbnRJbmZvKFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LmNsaWVudEluZm8sXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3J5cHRvVXRpbHMuYmFzZTY0RGVjb2RlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBjY3NDcmVkZW50aWFsID0ge1xuICAgICAgICAgICAgICAgICAgICBjcmVkZW50aWFsOiBgJHtjbGllbnRJbmZvLnVpZH0ke1NlcGFyYXRvcnMuQ0xJRU5UX0lORk9fU0VQQVJBVE9SfSR7Y2xpZW50SW5mby51dGlkfWAsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IENjc0NyZWRlbnRpYWxUeXBlLkhPTUVfQUNDT1VOVF9JRCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgICAgIFwiQ291bGQgbm90IHBhcnNlIGNsaWVudCBpbmZvIGZvciBDQ1MgSGVhZGVyOiBcIiArIGVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB0aGlzLmNyZWF0ZVRva2VuUmVxdWVzdEhlYWRlcnMoXG4gICAgICAgICAgICBjY3NDcmVkZW50aWFsIHx8IHJlcXVlc3QuY2NzQ3JlZGVudGlhbFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHRodW1icHJpbnQgPSBnZXRSZXF1ZXN0VGh1bWJwcmludChcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmF1dGhPcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgICAgcmVxdWVzdFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiBpbnZva2VBc3luYyhcbiAgICAgICAgICAgIHRoaXMuZXhlY3V0ZVBvc3RUb1Rva2VuRW5kcG9pbnQuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkF1dGhvcml6YXRpb25Db2RlQ2xpZW50RXhlY3V0ZVBvc3RUb1Rva2VuRW5kcG9pbnQsXG4gICAgICAgICAgICB0aGlzLmxvZ2dlcixcbiAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQsXG4gICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKShcbiAgICAgICAgICAgIGVuZHBvaW50LFxuICAgICAgICAgICAgcmVxdWVzdEJvZHksXG4gICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgdGh1bWJwcmludCxcbiAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZCxcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkF1dGhvcml6YXRpb25Db2RlQ2xpZW50RXhlY3V0ZVBvc3RUb1Rva2VuRW5kcG9pbnRcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgYSBtYXAgZm9yIGFsbCB0aGUgcGFyYW1zIHRvIGJlIHNlbnQgdG8gdGhlIHNlcnZpY2VcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgY3JlYXRlVG9rZW5SZXF1ZXN0Qm9keShcbiAgICAgICAgcmVxdWVzdDogQ29tbW9uQXV0aG9yaXphdGlvbkNvZGVSZXF1ZXN0XG4gICAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudD8uYWRkUXVldWVNZWFzdXJlbWVudChcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkF1dGhDbGllbnRDcmVhdGVUb2tlblJlcXVlc3RCb2R5LFxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgcGFyYW1ldGVycyA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmc+KCk7XG5cbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2xpZW50SWQoXG4gICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgcmVxdWVzdC5lbWJlZGRlZENsaWVudElkIHx8XG4gICAgICAgICAgICAgICAgcmVxdWVzdC50b2tlbkJvZHlQYXJhbWV0ZXJzPy5bQUFEU2VydmVyUGFyYW1LZXlzLkNMSUVOVF9JRF0gfHxcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRJZFxuICAgICAgICApO1xuXG4gICAgICAgIC8qXG4gICAgICAgICAqIEZvciBoeWJyaWQgc3BhIGZsb3csIHRoZXJlIHdpbGwgYmUgYSBjb2RlIGJ1dCBubyB2ZXJpZmllclxuICAgICAgICAgKiBJbiB0aGlzIHNjZW5hcmlvLCBkb24ndCBpbmNsdWRlIHJlZGlyZWN0IHVyaSBhcyBhdXRoIGNvZGUgd2lsbCBub3QgYmUgYm91bmQgdG8gcmVkaXJlY3QgVVJJXG4gICAgICAgICAqL1xuICAgICAgICBpZiAoIXRoaXMuaW5jbHVkZVJlZGlyZWN0VXJpKSB7XG4gICAgICAgICAgICAvLyBKdXN0IHZhbGlkYXRlXG4gICAgICAgICAgICBSZXF1ZXN0VmFsaWRhdG9yLnZhbGlkYXRlUmVkaXJlY3RVcmkocmVxdWVzdC5yZWRpcmVjdFVyaSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBWYWxpZGF0ZSBhbmQgaW5jbHVkZSByZWRpcmVjdCB1cmlcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFJlZGlyZWN0VXJpKFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5yZWRpcmVjdFVyaVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFkZCBzY29wZSBhcnJheSwgcGFyYW1ldGVyIGJ1aWxkZXIgd2lsbCBhZGQgZGVmYXVsdCBzY29wZXMgYW5kIGRlZHVwZVxuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRTY29wZXMoXG4gICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgcmVxdWVzdC5zY29wZXMsXG4gICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgdGhpcy5vaWRjRGVmYXVsdFNjb3Blc1xuICAgICAgICApO1xuXG4gICAgICAgIC8vIGFkZCBjb2RlOiB1c2VyIHNldCwgbm90IHZhbGlkYXRlZFxuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRBdXRob3JpemF0aW9uQ29kZShwYXJhbWV0ZXJzLCByZXF1ZXN0LmNvZGUpO1xuXG4gICAgICAgIC8vIEFkZCBsaWJyYXJ5IG1ldGFkYXRhXG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZExpYnJhcnlJbmZvKFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmxpYnJhcnlJbmZvXG4gICAgICAgICk7XG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZEFwcGxpY2F0aW9uVGVsZW1ldHJ5KFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLnRlbGVtZXRyeS5hcHBsaWNhdGlvblxuICAgICAgICApO1xuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRUaHJvdHRsaW5nKHBhcmFtZXRlcnMpO1xuXG4gICAgICAgIGlmICh0aGlzLnNlcnZlclRlbGVtZXRyeU1hbmFnZXIgJiYgIWlzT2lkY1Byb3RvY29sTW9kZSh0aGlzLmNvbmZpZykpIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFNlcnZlclRlbGVtZXRyeShcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHRoaXMuc2VydmVyVGVsZW1ldHJ5TWFuYWdlclxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGFkZCBjb2RlX3ZlcmlmaWVyIGlmIHBhc3NlZFxuICAgICAgICBpZiAocmVxdWVzdC5jb2RlVmVyaWZpZXIpIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENvZGVWZXJpZmllcihcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlcXVlc3QuY29kZVZlcmlmaWVyXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmNsaWVudENyZWRlbnRpYWxzLmNsaWVudFNlY3JldCkge1xuICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2xpZW50U2VjcmV0KFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcuY2xpZW50Q3JlZGVudGlhbHMuY2xpZW50U2VjcmV0XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmNsaWVudENyZWRlbnRpYWxzLmNsaWVudEFzc2VydGlvbikge1xuICAgICAgICAgICAgY29uc3QgY2xpZW50QXNzZXJ0aW9uOiBDbGllbnRBc3NlcnRpb24gPVxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmNsaWVudENyZWRlbnRpYWxzLmNsaWVudEFzc2VydGlvbjtcblxuICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2xpZW50QXNzZXJ0aW9uKFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYXdhaXQgZ2V0Q2xpZW50QXNzZXJ0aW9uKFxuICAgICAgICAgICAgICAgICAgICBjbGllbnRBc3NlcnRpb24uYXNzZXJ0aW9uLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5yZXNvdXJjZVJlcXVlc3RVcmlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2xpZW50QXNzZXJ0aW9uVHlwZShcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGNsaWVudEFzc2VydGlvbi5hc3NlcnRpb25UeXBlXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkR3JhbnRUeXBlKFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIEdyYW50VHlwZS5BVVRIT1JJWkFUSU9OX0NPREVfR1JBTlRcbiAgICAgICAgKTtcbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2xpZW50SW5mbyhwYXJhbWV0ZXJzKTtcblxuICAgICAgICBpZiAocmVxdWVzdC5hdXRoZW50aWNhdGlvblNjaGVtZSA9PT0gQXV0aGVudGljYXRpb25TY2hlbWUuUE9QKSB7XG4gICAgICAgICAgICBjb25zdCBwb3BUb2tlbkdlbmVyYXRvciA9IG5ldyBQb3BUb2tlbkdlbmVyYXRvcihcbiAgICAgICAgICAgICAgICB0aGlzLmNyeXB0b1V0aWxzLFxuICAgICAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnRcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGxldCByZXFDbmZEYXRhO1xuICAgICAgICAgICAgaWYgKCFyZXF1ZXN0LnBvcEtpZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGdlbmVyYXRlZFJlcUNuZkRhdGEgPSBhd2FpdCBpbnZva2VBc3luYyhcbiAgICAgICAgICAgICAgICAgICAgcG9wVG9rZW5HZW5lcmF0b3IuZ2VuZXJhdGVDbmYuYmluZChwb3BUb2tlbkdlbmVyYXRvciksXG4gICAgICAgICAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLlBvcFRva2VuR2VuZXJhdGVDbmYsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50LFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICAgICApKHJlcXVlc3QsIHRoaXMubG9nZ2VyKTtcbiAgICAgICAgICAgICAgICByZXFDbmZEYXRhID0gZ2VuZXJhdGVkUmVxQ25mRGF0YS5yZXFDbmZTdHJpbmc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlcUNuZkRhdGEgPSB0aGlzLmNyeXB0b1V0aWxzLmVuY29kZUtpZChyZXF1ZXN0LnBvcEtpZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFNQQSBQb1AgcmVxdWlyZXMgZnVsbCBCYXNlNjRVcmwgZW5jb2RlZCByZXFfY25mIHN0cmluZyAodW5oYXNoZWQpXG4gICAgICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRQb3BUb2tlbihwYXJhbWV0ZXJzLCByZXFDbmZEYXRhKTtcbiAgICAgICAgfSBlbHNlIGlmIChyZXF1ZXN0LmF1dGhlbnRpY2F0aW9uU2NoZW1lID09PSBBdXRoZW50aWNhdGlvblNjaGVtZS5TU0gpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0LnNzaEp3aykge1xuICAgICAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFNzaEp3ayhwYXJhbWV0ZXJzLCByZXF1ZXN0LnNzaEp3ayk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudENvbmZpZ3VyYXRpb25FcnJvcihcbiAgICAgICAgICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMubWlzc2luZ1NzaEp3a1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhU3RyaW5nVXRpbHMuaXNFbXB0eU9iaihyZXF1ZXN0LmNsYWltcykgfHxcbiAgICAgICAgICAgICh0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRDYXBhYmlsaXRpZXMgJiZcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRDYXBhYmlsaXRpZXMubGVuZ3RoID4gMClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDbGFpbXMoXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmNsYWltcyxcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRDYXBhYmlsaXRpZXNcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY2NzQ3JlZDogQ2NzQ3JlZGVudGlhbCB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHJlcXVlc3QuY2xpZW50SW5mbykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjbGllbnRJbmZvID0gYnVpbGRDbGllbnRJbmZvKFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LmNsaWVudEluZm8sXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3J5cHRvVXRpbHMuYmFzZTY0RGVjb2RlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBjY3NDcmVkID0ge1xuICAgICAgICAgICAgICAgICAgICBjcmVkZW50aWFsOiBgJHtjbGllbnRJbmZvLnVpZH0ke1NlcGFyYXRvcnMuQ0xJRU5UX0lORk9fU0VQQVJBVE9SfSR7Y2xpZW50SW5mby51dGlkfWAsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IENjc0NyZWRlbnRpYWxUeXBlLkhPTUVfQUNDT1VOVF9JRCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgICAgIFwiQ291bGQgbm90IHBhcnNlIGNsaWVudCBpbmZvIGZvciBDQ1MgSGVhZGVyOiBcIiArIGVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2NzQ3JlZCA9IHJlcXVlc3QuY2NzQ3JlZGVudGlhbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFkZHMgdGhlc2UgYXMgcGFyYW1ldGVycyBpbiB0aGUgcmVxdWVzdCBpbnN0ZWFkIG9mIGhlYWRlcnMgdG8gcHJldmVudCBDT1JTIHByZWZsaWdodCByZXF1ZXN0XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5zeXN0ZW1PcHRpb25zLnByZXZlbnRDb3JzUHJlZmxpZ2h0ICYmIGNjc0NyZWQpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoY2NzQ3JlZC50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBDY3NDcmVkZW50aWFsVHlwZS5IT01FX0FDQ09VTlRfSUQ6XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjbGllbnRJbmZvID0gYnVpbGRDbGllbnRJbmZvRnJvbUhvbWVBY2NvdW50SWQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2NzQ3JlZC5jcmVkZW50aWFsXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2NzT2lkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50SW5mb1xuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIudmVyYm9zZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkNvdWxkIG5vdCBwYXJzZSBob21lIGFjY291bnQgSUQgZm9yIENDUyBIZWFkZXI6IFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIENjc0NyZWRlbnRpYWxUeXBlLlVQTjpcbiAgICAgICAgICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2NzVXBuKFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNjc0NyZWQuY3JlZGVudGlhbFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXF1ZXN0LmVtYmVkZGVkQ2xpZW50SWQpIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZEJyb2tlclBhcmFtZXRlcnMoXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5yZWRpcmVjdFVyaVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXF1ZXN0LnRva2VuQm9keVBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZEV4dHJhUXVlcnlQYXJhbWV0ZXJzKFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVxdWVzdC50b2tlbkJvZHlQYXJhbWV0ZXJzXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWRkIGh5YnJpZCBzcGEgcGFyYW1ldGVycyBpZiBub3QgYWxyZWFkeSBwcm92aWRlZFxuICAgICAgICBpZiAoXG4gICAgICAgICAgICByZXF1ZXN0LmVuYWJsZVNwYUF1dGhvcml6YXRpb25Db2RlICYmXG4gICAgICAgICAgICAoIXJlcXVlc3QudG9rZW5Cb2R5UGFyYW1ldGVycyB8fFxuICAgICAgICAgICAgICAgICFyZXF1ZXN0LnRva2VuQm9keVBhcmFtZXRlcnNbXG4gICAgICAgICAgICAgICAgICAgIEFBRFNlcnZlclBhcmFtS2V5cy5SRVRVUk5fU1BBX0NPREVcbiAgICAgICAgICAgICAgICBdKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZEV4dHJhUXVlcnlQYXJhbWV0ZXJzKHBhcmFtZXRlcnMsIHtcbiAgICAgICAgICAgICAgICBbQUFEU2VydmVyUGFyYW1LZXlzLlJFVFVSTl9TUEFfQ09ERV06IFwiMVwiLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5pbnN0cnVtZW50QnJva2VyUGFyYW1zKFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZCxcbiAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnRcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIFVybFV0aWxzLm1hcFRvUXVlcnlTdHJpbmcocGFyYW1ldGVycyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBBUEkgdmFsaWRhdGVzIHRoZSBgRW5kU2Vzc2lvblJlcXVlc3RgIGFuZCBjcmVhdGVzIGEgVVJMXG4gICAgICogQHBhcmFtIHJlcXVlc3RcbiAgICAgKi9cbiAgICBwcml2YXRlIGNyZWF0ZUxvZ291dFVybFF1ZXJ5U3RyaW5nKFxuICAgICAgICByZXF1ZXN0OiBDb21tb25FbmRTZXNzaW9uUmVxdWVzdFxuICAgICk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSBuZXcgTWFwPHN0cmluZywgc3RyaW5nPigpO1xuXG4gICAgICAgIGlmIChyZXF1ZXN0LnBvc3RMb2dvdXRSZWRpcmVjdFVyaSkge1xuICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkUG9zdExvZ291dFJlZGlyZWN0VXJpKFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5wb3N0TG9nb3V0UmVkaXJlY3RVcmlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVxdWVzdC5jb3JyZWxhdGlvbklkKSB7XG4gICAgICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDb3JyZWxhdGlvbklkKFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlcXVlc3QuaWRUb2tlbkhpbnQpIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZElkVG9rZW5IaW50KFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5pZFRva2VuSGludFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXF1ZXN0LnN0YXRlKSB7XG4gICAgICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRTdGF0ZShwYXJhbWV0ZXJzLCByZXF1ZXN0LnN0YXRlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXF1ZXN0LmxvZ291dEhpbnQpIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZExvZ291dEhpbnQoXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmxvZ291dEhpbnRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVxdWVzdC5leHRyYVF1ZXJ5UGFyYW1ldGVycykge1xuICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkRXh0cmFRdWVyeVBhcmFtZXRlcnMoXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmV4dHJhUXVlcnlQYXJhbWV0ZXJzXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmF1dGhPcHRpb25zLmluc3RhbmNlQXdhcmUpIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZEluc3RhbmNlQXdhcmUocGFyYW1ldGVycyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gVXJsVXRpbHMubWFwVG9RdWVyeVN0cmluZyhwYXJhbWV0ZXJzKTtcbiAgICB9XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gICAgQ2xpZW50Q29uZmlndXJhdGlvbixcbiAgICBpc09pZGNQcm90b2NvbE1vZGUsXG59IGZyb20gXCIuLi9jb25maWcvQ2xpZW50Q29uZmlndXJhdGlvbi5qc1wiO1xuaW1wb3J0IHsgQmFzZUNsaWVudCB9IGZyb20gXCIuL0Jhc2VDbGllbnQuanNcIjtcbmltcG9ydCB7IENvbW1vblJlZnJlc2hUb2tlblJlcXVlc3QgfSBmcm9tIFwiLi4vcmVxdWVzdC9Db21tb25SZWZyZXNoVG9rZW5SZXF1ZXN0LmpzXCI7XG5pbXBvcnQgeyBBdXRob3JpdHkgfSBmcm9tIFwiLi4vYXV0aG9yaXR5L0F1dGhvcml0eS5qc1wiO1xuaW1wb3J0IHsgU2VydmVyQXV0aG9yaXphdGlvblRva2VuUmVzcG9uc2UgfSBmcm9tIFwiLi4vcmVzcG9uc2UvU2VydmVyQXV0aG9yaXphdGlvblRva2VuUmVzcG9uc2UuanNcIjtcbmltcG9ydCAqIGFzIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyIGZyb20gXCIuLi9yZXF1ZXN0L1JlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmpzXCI7XG5pbXBvcnQgKiBhcyBVcmxVdGlscyBmcm9tIFwiLi4vdXRpbHMvVXJsVXRpbHMuanNcIjtcbmltcG9ydCB7XG4gICAgR3JhbnRUeXBlLFxuICAgIEF1dGhlbnRpY2F0aW9uU2NoZW1lLFxuICAgIEVycm9ycyxcbiAgICBIZWFkZXJOYW1lcyxcbn0gZnJvbSBcIi4uL3V0aWxzL0NvbnN0YW50cy5qc1wiO1xuaW1wb3J0ICogYXMgQUFEU2VydmVyUGFyYW1LZXlzIGZyb20gXCIuLi9jb25zdGFudHMvQUFEU2VydmVyUGFyYW1LZXlzLmpzXCI7XG5pbXBvcnQgeyBSZXNwb25zZUhhbmRsZXIgfSBmcm9tIFwiLi4vcmVzcG9uc2UvUmVzcG9uc2VIYW5kbGVyLmpzXCI7XG5pbXBvcnQgeyBBdXRoZW50aWNhdGlvblJlc3VsdCB9IGZyb20gXCIuLi9yZXNwb25zZS9BdXRoZW50aWNhdGlvblJlc3VsdC5qc1wiO1xuaW1wb3J0IHsgUG9wVG9rZW5HZW5lcmF0b3IgfSBmcm9tIFwiLi4vY3J5cHRvL1BvcFRva2VuR2VuZXJhdG9yLmpzXCI7XG5pbXBvcnQgeyBTdHJpbmdVdGlscyB9IGZyb20gXCIuLi91dGlscy9TdHJpbmdVdGlscy5qc1wiO1xuaW1wb3J0IHsgTmV0d29ya1Jlc3BvbnNlIH0gZnJvbSBcIi4uL25ldHdvcmsvTmV0d29ya1Jlc3BvbnNlLmpzXCI7XG5pbXBvcnQgeyBDb21tb25TaWxlbnRGbG93UmVxdWVzdCB9IGZyb20gXCIuLi9yZXF1ZXN0L0NvbW1vblNpbGVudEZsb3dSZXF1ZXN0LmpzXCI7XG5pbXBvcnQge1xuICAgIGNyZWF0ZUNsaWVudENvbmZpZ3VyYXRpb25FcnJvcixcbiAgICBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcyxcbn0gZnJvbSBcIi4uL2Vycm9yL0NsaWVudENvbmZpZ3VyYXRpb25FcnJvci5qc1wiO1xuaW1wb3J0IHtcbiAgICBjcmVhdGVDbGllbnRBdXRoRXJyb3IsXG4gICAgQ2xpZW50QXV0aEVycm9yQ29kZXMsXG59IGZyb20gXCIuLi9lcnJvci9DbGllbnRBdXRoRXJyb3IuanNcIjtcbmltcG9ydCB7IFNlcnZlckVycm9yIH0gZnJvbSBcIi4uL2Vycm9yL1NlcnZlckVycm9yLmpzXCI7XG5pbXBvcnQgKiBhcyBUaW1lVXRpbHMgZnJvbSBcIi4uL3V0aWxzL1RpbWVVdGlscy5qc1wiO1xuaW1wb3J0IHsgVXJsU3RyaW5nIH0gZnJvbSBcIi4uL3VybC9VcmxTdHJpbmcuanNcIjtcbmltcG9ydCB7IENjc0NyZWRlbnRpYWxUeXBlIH0gZnJvbSBcIi4uL2FjY291bnQvQ2NzQ3JlZGVudGlhbC5qc1wiO1xuaW1wb3J0IHsgYnVpbGRDbGllbnRJbmZvRnJvbUhvbWVBY2NvdW50SWQgfSBmcm9tIFwiLi4vYWNjb3VudC9DbGllbnRJbmZvLmpzXCI7XG5pbXBvcnQge1xuICAgIEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3IsXG4gICAgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvckNvZGVzLFxuICAgIGNyZWF0ZUludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3IsXG59IGZyb20gXCIuLi9lcnJvci9JbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yLmpzXCI7XG5pbXBvcnQgeyBQZXJmb3JtYW5jZUV2ZW50cyB9IGZyb20gXCIuLi90ZWxlbWV0cnkvcGVyZm9ybWFuY2UvUGVyZm9ybWFuY2VFdmVudC5qc1wiO1xuaW1wb3J0IHsgSVBlcmZvcm1hbmNlQ2xpZW50IH0gZnJvbSBcIi4uL3RlbGVtZXRyeS9wZXJmb3JtYW5jZS9JUGVyZm9ybWFuY2VDbGllbnQuanNcIjtcbmltcG9ydCB7IGludm9rZSwgaW52b2tlQXN5bmMgfSBmcm9tIFwiLi4vdXRpbHMvRnVuY3Rpb25XcmFwcGVycy5qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVDcmVkZW50aWFsS2V5IH0gZnJvbSBcIi4uL2NhY2hlL3V0aWxzL0NhY2hlSGVscGVycy5qc1wiO1xuaW1wb3J0IHsgQ2xpZW50QXNzZXJ0aW9uIH0gZnJvbSBcIi4uL2FjY291bnQvQ2xpZW50Q3JlZGVudGlhbHMuanNcIjtcbmltcG9ydCB7IGdldENsaWVudEFzc2VydGlvbiB9IGZyb20gXCIuLi91dGlscy9DbGllbnRBc3NlcnRpb25VdGlscy5qc1wiO1xuaW1wb3J0IHsgZ2V0UmVxdWVzdFRodW1icHJpbnQgfSBmcm9tIFwiLi4vbmV0d29yay9SZXF1ZXN0VGh1bWJwcmludC5qc1wiO1xuXG5jb25zdCBERUZBVUxUX1JFRlJFU0hfVE9LRU5fRVhQSVJBVElPTl9PRkZTRVRfU0VDT05EUyA9IDMwMDsgLy8gNSBNaW51dGVzXG5cbi8qKlxuICogT0F1dGgyLjAgcmVmcmVzaCB0b2tlbiBjbGllbnRcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgY2xhc3MgUmVmcmVzaFRva2VuQ2xpZW50IGV4dGVuZHMgQmFzZUNsaWVudCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGNvbmZpZ3VyYXRpb246IENsaWVudENvbmZpZ3VyYXRpb24sXG4gICAgICAgIHBlcmZvcm1hbmNlQ2xpZW50PzogSVBlcmZvcm1hbmNlQ2xpZW50XG4gICAgKSB7XG4gICAgICAgIHN1cGVyKGNvbmZpZ3VyYXRpb24sIHBlcmZvcm1hbmNlQ2xpZW50KTtcbiAgICB9XG4gICAgcHVibGljIGFzeW5jIGFjcXVpcmVUb2tlbihcbiAgICAgICAgcmVxdWVzdDogQ29tbW9uUmVmcmVzaFRva2VuUmVxdWVzdFxuICAgICk6IFByb21pc2U8QXV0aGVudGljYXRpb25SZXN1bHQ+IHtcbiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudD8uYWRkUXVldWVNZWFzdXJlbWVudChcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLlJlZnJlc2hUb2tlbkNsaWVudEFjcXVpcmVUb2tlbixcbiAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHJlcVRpbWVzdGFtcCA9IFRpbWVVdGlscy5ub3dTZWNvbmRzKCk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgaW52b2tlQXN5bmMoXG4gICAgICAgICAgICB0aGlzLmV4ZWN1dGVUb2tlblJlcXVlc3QuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLlJlZnJlc2hUb2tlbkNsaWVudEV4ZWN1dGVUb2tlblJlcXVlc3QsXG4gICAgICAgICAgICB0aGlzLmxvZ2dlcixcbiAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQsXG4gICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKShyZXF1ZXN0LCB0aGlzLmF1dGhvcml0eSk7XG5cbiAgICAgICAgLy8gUmV0cmlldmUgcmVxdWVzdElkIGZyb20gcmVzcG9uc2UgaGVhZGVyc1xuICAgICAgICBjb25zdCByZXF1ZXN0SWQgPSByZXNwb25zZS5oZWFkZXJzPy5bSGVhZGVyTmFtZXMuWF9NU19SRVFVRVNUX0lEXTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2VIYW5kbGVyID0gbmV3IFJlc3BvbnNlSGFuZGxlcihcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmF1dGhPcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgICAgdGhpcy5jYWNoZU1hbmFnZXIsXG4gICAgICAgICAgICB0aGlzLmNyeXB0b1V0aWxzLFxuICAgICAgICAgICAgdGhpcy5sb2dnZXIsXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5zZXJpYWxpemFibGVDYWNoZSxcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLnBlcnNpc3RlbmNlUGx1Z2luXG4gICAgICAgICk7XG4gICAgICAgIHJlc3BvbnNlSGFuZGxlci52YWxpZGF0ZVRva2VuUmVzcG9uc2UocmVzcG9uc2UuYm9keSk7XG5cbiAgICAgICAgcmV0dXJuIGludm9rZUFzeW5jKFxuICAgICAgICAgICAgcmVzcG9uc2VIYW5kbGVyLmhhbmRsZVNlcnZlclRva2VuUmVzcG9uc2UuYmluZChyZXNwb25zZUhhbmRsZXIpLFxuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuSGFuZGxlU2VydmVyVG9rZW5SZXNwb25zZSxcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLFxuICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudCxcbiAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICApKFxuICAgICAgICAgICAgcmVzcG9uc2UuYm9keSxcbiAgICAgICAgICAgIHRoaXMuYXV0aG9yaXR5LFxuICAgICAgICAgICAgcmVxVGltZXN0YW1wLFxuICAgICAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICByZXF1ZXN0LmZvcmNlQ2FjaGUsXG4gICAgICAgICAgICByZXF1ZXN0SWRcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGNhY2hlZCByZWZyZXNoIHRva2VuIGFuZCBhdHRhY2hlcyB0byByZXF1ZXN0LCB0aGVuIGNhbGxzIGFjcXVpcmVUb2tlbiBBUElcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFxuICAgICAqL1xuICAgIHB1YmxpYyBhc3luYyBhY3F1aXJlVG9rZW5CeVJlZnJlc2hUb2tlbihcbiAgICAgICAgcmVxdWVzdDogQ29tbW9uU2lsZW50Rmxvd1JlcXVlc3RcbiAgICApOiBQcm9taXNlPEF1dGhlbnRpY2F0aW9uUmVzdWx0PiB7XG4gICAgICAgIC8vIENhbm5vdCByZW5ldyB0b2tlbiBpZiBubyByZXF1ZXN0IG9iamVjdCBpcyBnaXZlbi5cbiAgICAgICAgaWYgKCFyZXF1ZXN0KSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRDb25maWd1cmF0aW9uRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMudG9rZW5SZXF1ZXN0RW1wdHlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50Py5hZGRRdWV1ZU1lYXN1cmVtZW50KFxuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuUmVmcmVzaFRva2VuQ2xpZW50QWNxdWlyZVRva2VuQnlSZWZyZXNoVG9rZW4sXG4gICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBXZSBjdXJyZW50bHkgZG8gbm90IHN1cHBvcnQgc2lsZW50IGZsb3cgZm9yIGFjY291bnQgPT09IG51bGwgdXNlIGNhc2VzOyBUaGlzIHdpbGwgYmUgcmV2aXNpdGVkIGZvciBjb25maWRlbnRpYWwgZmxvdyB1c2VjYXNlc1xuICAgICAgICBpZiAoIXJlcXVlc3QuYWNjb3VudCkge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKFxuICAgICAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLm5vQWNjb3VudEluU2lsZW50UmVxdWVzdFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHRyeSBjaGVja2luZyBpZiBGT0NJIGlzIGVuYWJsZWQgZm9yIHRoZSBnaXZlbiBhcHBsaWNhdGlvblxuICAgICAgICBjb25zdCBpc0ZPQ0kgPSB0aGlzLmNhY2hlTWFuYWdlci5pc0FwcE1ldGFkYXRhRk9DSShcbiAgICAgICAgICAgIHJlcXVlc3QuYWNjb3VudC5lbnZpcm9ubWVudFxuICAgICAgICApO1xuXG4gICAgICAgIC8vIGlmIHRoZSBhcHAgaXMgcGFydCBvZiB0aGUgZmFtaWx5LCByZXRyaXZlIGEgRmFtaWx5IHJlZnJlc2ggdG9rZW4gaWYgcHJlc2VudCBhbmQgbWFrZSBhIHJlZnJlc2hUb2tlblJlcXVlc3RcbiAgICAgICAgaWYgKGlzRk9DSSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgaW52b2tlQXN5bmMoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWNxdWlyZVRva2VuV2l0aENhY2hlZFJlZnJlc2hUb2tlbi5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5SZWZyZXNoVG9rZW5DbGllbnRBY3F1aXJlVG9rZW5XaXRoQ2FjaGVkUmVmcmVzaFRva2VuLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlcixcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudCxcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICAgICAgICAgKShyZXF1ZXN0LCB0cnVlKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBub0ZhbWlseVJUSW5DYWNoZSA9XG4gICAgICAgICAgICAgICAgICAgIGUgaW5zdGFuY2VvZiBJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yICYmXG4gICAgICAgICAgICAgICAgICAgIGUuZXJyb3JDb2RlID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvckNvZGVzLm5vVG9rZW5zRm91bmQ7XG4gICAgICAgICAgICAgICAgY29uc3QgY2xpZW50TWlzbWF0Y2hFcnJvcldpdGhGYW1pbHlSVCA9XG4gICAgICAgICAgICAgICAgICAgIGUgaW5zdGFuY2VvZiBTZXJ2ZXJFcnJvciAmJlxuICAgICAgICAgICAgICAgICAgICBlLmVycm9yQ29kZSA9PT0gRXJyb3JzLklOVkFMSURfR1JBTlRfRVJST1IgJiZcbiAgICAgICAgICAgICAgICAgICAgZS5zdWJFcnJvciA9PT0gRXJyb3JzLkNMSUVOVF9NSVNNQVRDSF9FUlJPUjtcblxuICAgICAgICAgICAgICAgIC8vIGlmIGZhbWlseSBSZWZyZXNoIFRva2VuIChGUlQpIGNhY2hlIGFjcXVpc2l0aW9uIGZhaWxzIG9yIGlmIGNsaWVudF9taXNtYXRjaCBlcnJvciBpcyBzZWVuIHdpdGggRlJULCByZWF0dGVtcHQgd2l0aCBhcHBsaWNhdGlvbiBSZWZyZXNoIFRva2VuIChBUlQpXG4gICAgICAgICAgICAgICAgaWYgKG5vRmFtaWx5UlRJbkNhY2hlIHx8IGNsaWVudE1pc21hdGNoRXJyb3JXaXRoRmFtaWx5UlQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGludm9rZUFzeW5jKFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3F1aXJlVG9rZW5XaXRoQ2FjaGVkUmVmcmVzaFRva2VuLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5SZWZyZXNoVG9rZW5DbGllbnRBY3F1aXJlVG9rZW5XaXRoQ2FjaGVkUmVmcmVzaFRva2VuLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICAgICAgICAgICAgICkocmVxdWVzdCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAvLyB0aHJvdyBpbiBhbGwgb3RoZXIgY2FzZXNcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBmYWxsIGJhY2sgdG8gYXBwbGljYXRpb24gcmVmcmVzaCB0b2tlbiBhY3F1aXNpdGlvblxuICAgICAgICByZXR1cm4gaW52b2tlQXN5bmMoXG4gICAgICAgICAgICB0aGlzLmFjcXVpcmVUb2tlbldpdGhDYWNoZWRSZWZyZXNoVG9rZW4uYmluZCh0aGlzKSxcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLlJlZnJlc2hUb2tlbkNsaWVudEFjcXVpcmVUb2tlbldpdGhDYWNoZWRSZWZyZXNoVG9rZW4sXG4gICAgICAgICAgICB0aGlzLmxvZ2dlcixcbiAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQsXG4gICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKShyZXF1ZXN0LCBmYWxzZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogbWFrZXMgYSBuZXR3b3JrIGNhbGwgdG8gYWNxdWlyZSB0b2tlbnMgYnkgZXhjaGFuZ2luZyBSZWZyZXNoVG9rZW4gYXZhaWxhYmxlIGluIHVzZXJDYWNoZTsgdGhyb3dzIGlmIHJlZnJlc2ggdG9rZW4gaXMgbm90IGNhY2hlZFxuICAgICAqIEBwYXJhbSByZXF1ZXN0XG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBhY3F1aXJlVG9rZW5XaXRoQ2FjaGVkUmVmcmVzaFRva2VuKFxuICAgICAgICByZXF1ZXN0OiBDb21tb25TaWxlbnRGbG93UmVxdWVzdCxcbiAgICAgICAgZm9jaTogYm9vbGVhblxuICAgICkge1xuICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50Py5hZGRRdWV1ZU1lYXN1cmVtZW50KFxuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuUmVmcmVzaFRva2VuQ2xpZW50QWNxdWlyZVRva2VuV2l0aENhY2hlZFJlZnJlc2hUb2tlbixcbiAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuXG4gICAgICAgIC8vIGZldGNoZXMgZmFtaWx5IFJUIG9yIGFwcGxpY2F0aW9uIFJUIGJhc2VkIG9uIEZPQ0kgdmFsdWVcbiAgICAgICAgY29uc3QgcmVmcmVzaFRva2VuID0gaW52b2tlKFxuICAgICAgICAgICAgdGhpcy5jYWNoZU1hbmFnZXIuZ2V0UmVmcmVzaFRva2VuLmJpbmQodGhpcy5jYWNoZU1hbmFnZXIpLFxuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuQ2FjaGVNYW5hZ2VyR2V0UmVmcmVzaFRva2VuLFxuICAgICAgICAgICAgdGhpcy5sb2dnZXIsXG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50LFxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICkoXG4gICAgICAgICAgICByZXF1ZXN0LmFjY291bnQsXG4gICAgICAgICAgICBmb2NpLFxuICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudCxcbiAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuXG4gICAgICAgIGlmICghcmVmcmVzaFRva2VuKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yKFxuICAgICAgICAgICAgICAgIEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3JDb2Rlcy5ub1Rva2Vuc0ZvdW5kXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgcmVmcmVzaFRva2VuLmV4cGlyZXNPbiAmJlxuICAgICAgICAgICAgVGltZVV0aWxzLmlzVG9rZW5FeHBpcmVkKFxuICAgICAgICAgICAgICAgIHJlZnJlc2hUb2tlbi5leHBpcmVzT24sXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5yZWZyZXNoVG9rZW5FeHBpcmF0aW9uT2Zmc2V0U2Vjb25kcyB8fFxuICAgICAgICAgICAgICAgICAgICBERUZBVUxUX1JFRlJFU0hfVE9LRU5fRVhQSVJBVElPTl9PRkZTRVRfU0VDT05EU1xuICAgICAgICAgICAgKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQ/LmFkZEZpZWxkcyhcbiAgICAgICAgICAgICAgICB7IHJ0RXhwaXJlc09uTXM6IE51bWJlcihyZWZyZXNoVG9rZW4uZXhwaXJlc09uKSB9LFxuICAgICAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvckNvZGVzLnJlZnJlc2hUb2tlbkV4cGlyZWRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYXR0YWNoIGNhY2hlZCBSVCBzaXplIHRvIHRoZSBjdXJyZW50IG1lYXN1cmVtZW50XG5cbiAgICAgICAgY29uc3QgcmVmcmVzaFRva2VuUmVxdWVzdDogQ29tbW9uUmVmcmVzaFRva2VuUmVxdWVzdCA9IHtcbiAgICAgICAgICAgIC4uLnJlcXVlc3QsXG4gICAgICAgICAgICByZWZyZXNoVG9rZW46IHJlZnJlc2hUb2tlbi5zZWNyZXQsXG4gICAgICAgICAgICBhdXRoZW50aWNhdGlvblNjaGVtZTpcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmF1dGhlbnRpY2F0aW9uU2NoZW1lIHx8IEF1dGhlbnRpY2F0aW9uU2NoZW1lLkJFQVJFUixcbiAgICAgICAgICAgIGNjc0NyZWRlbnRpYWw6IHtcbiAgICAgICAgICAgICAgICBjcmVkZW50aWFsOiByZXF1ZXN0LmFjY291bnQuaG9tZUFjY291bnRJZCxcbiAgICAgICAgICAgICAgICB0eXBlOiBDY3NDcmVkZW50aWFsVHlwZS5IT01FX0FDQ09VTlRfSUQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgaW52b2tlQXN5bmMoXG4gICAgICAgICAgICAgICAgdGhpcy5hY3F1aXJlVG9rZW4uYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5SZWZyZXNoVG9rZW5DbGllbnRBY3F1aXJlVG9rZW4sXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIsXG4gICAgICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudCxcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICkocmVmcmVzaFRva2VuUmVxdWVzdCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQ/LmFkZEZpZWxkcyhcbiAgICAgICAgICAgICAgICAgICAgeyBydEV4cGlyZXNPbk1zOiBOdW1iZXIocmVmcmVzaFRva2VuLmV4cGlyZXNPbikgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGlmIChlLnN1YkVycm9yID09PSBJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yQ29kZXMuYmFkVG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGJhZCByZWZyZXNoIHRva2VuIGZyb20gY2FjaGVcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIudmVyYm9zZShcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNxdWlyZVRva2VuV2l0aFJlZnJlc2hUb2tlbjogYmFkIHJlZnJlc2ggdG9rZW4sIHJlbW92aW5nIGZyb20gY2FjaGVcIlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBiYWRSZWZyZXNoVG9rZW5LZXkgPVxuICAgICAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGVDcmVkZW50aWFsS2V5KHJlZnJlc2hUb2tlbik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FjaGVNYW5hZ2VyLnJlbW92ZVJlZnJlc2hUb2tlbihiYWRSZWZyZXNoVG9rZW5LZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgdGhlIG5ldHdvcmsgbWVzc2FnZSBhbmQgbWFrZXMgYSBOVyBjYWxsIHRvIHRoZSB1bmRlcmx5aW5nIHNlY3VyZSB0b2tlbiBzZXJ2aWNlXG4gICAgICogQHBhcmFtIHJlcXVlc3RcbiAgICAgKiBAcGFyYW0gYXV0aG9yaXR5XG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBleGVjdXRlVG9rZW5SZXF1ZXN0KFxuICAgICAgICByZXF1ZXN0OiBDb21tb25SZWZyZXNoVG9rZW5SZXF1ZXN0LFxuICAgICAgICBhdXRob3JpdHk6IEF1dGhvcml0eVxuICAgICk6IFByb21pc2U8TmV0d29ya1Jlc3BvbnNlPFNlcnZlckF1dGhvcml6YXRpb25Ub2tlblJlc3BvbnNlPj4ge1xuICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50Py5hZGRRdWV1ZU1lYXN1cmVtZW50KFxuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuUmVmcmVzaFRva2VuQ2xpZW50RXhlY3V0ZVRva2VuUmVxdWVzdCxcbiAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVyc1N0cmluZyA9IHRoaXMuY3JlYXRlVG9rZW5RdWVyeVBhcmFtZXRlcnMocmVxdWVzdCk7XG4gICAgICAgIGNvbnN0IGVuZHBvaW50ID0gVXJsU3RyaW5nLmFwcGVuZFF1ZXJ5U3RyaW5nKFxuICAgICAgICAgICAgYXV0aG9yaXR5LnRva2VuRW5kcG9pbnQsXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNTdHJpbmdcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCByZXF1ZXN0Qm9keSA9IGF3YWl0IGludm9rZUFzeW5jKFxuICAgICAgICAgICAgdGhpcy5jcmVhdGVUb2tlblJlcXVlc3RCb2R5LmJpbmQodGhpcyksXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5SZWZyZXNoVG9rZW5DbGllbnRDcmVhdGVUb2tlblJlcXVlc3RCb2R5LFxuICAgICAgICAgICAgdGhpcy5sb2dnZXIsXG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50LFxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICkocmVxdWVzdCk7XG4gICAgICAgIGNvbnN0IGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB0aGlzLmNyZWF0ZVRva2VuUmVxdWVzdEhlYWRlcnMoXG4gICAgICAgICAgICByZXF1ZXN0LmNjc0NyZWRlbnRpYWxcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCB0aHVtYnByaW50ID0gZ2V0UmVxdWVzdFRodW1icHJpbnQoXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICAgIHJlcXVlc3RcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gaW52b2tlQXN5bmMoXG4gICAgICAgICAgICB0aGlzLmV4ZWN1dGVQb3N0VG9Ub2tlbkVuZHBvaW50LmJpbmQodGhpcyksXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5SZWZyZXNoVG9rZW5DbGllbnRFeGVjdXRlUG9zdFRvVG9rZW5FbmRwb2ludCxcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLFxuICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudCxcbiAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICApKFxuICAgICAgICAgICAgZW5kcG9pbnQsXG4gICAgICAgICAgICByZXF1ZXN0Qm9keSxcbiAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICB0aHVtYnByaW50LFxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkLFxuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuUmVmcmVzaFRva2VuQ2xpZW50RXhlY3V0ZVBvc3RUb1Rva2VuRW5kcG9pbnRcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb24gdG8gY3JlYXRlIHRoZSB0b2tlbiByZXF1ZXN0IGJvZHlcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgY3JlYXRlVG9rZW5SZXF1ZXN0Qm9keShcbiAgICAgICAgcmVxdWVzdDogQ29tbW9uUmVmcmVzaFRva2VuUmVxdWVzdFxuICAgICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQ/LmFkZFF1ZXVlTWVhc3VyZW1lbnQoXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5SZWZyZXNoVG9rZW5DbGllbnRDcmVhdGVUb2tlblJlcXVlc3RCb2R5LFxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgcGFyYW1ldGVycyA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmc+KCk7XG5cbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2xpZW50SWQoXG4gICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgcmVxdWVzdC5lbWJlZGRlZENsaWVudElkIHx8XG4gICAgICAgICAgICAgICAgcmVxdWVzdC50b2tlbkJvZHlQYXJhbWV0ZXJzPy5bQUFEU2VydmVyUGFyYW1LZXlzLkNMSUVOVF9JRF0gfHxcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRJZFxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChyZXF1ZXN0LnJlZGlyZWN0VXJpKSB7XG4gICAgICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRSZWRpcmVjdFVyaShcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlcXVlc3QucmVkaXJlY3RVcmlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRTY29wZXMoXG4gICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgcmVxdWVzdC5zY29wZXMsXG4gICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aE9wdGlvbnMuYXV0aG9yaXR5Lm9wdGlvbnMuT0lEQ09wdGlvbnM/LmRlZmF1bHRTY29wZXNcbiAgICAgICAgKTtcblxuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRHcmFudFR5cGUoXG4gICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgR3JhbnRUeXBlLlJFRlJFU0hfVE9LRU5fR1JBTlRcbiAgICAgICAgKTtcblxuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDbGllbnRJbmZvKHBhcmFtZXRlcnMpO1xuXG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZExpYnJhcnlJbmZvKFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmxpYnJhcnlJbmZvXG4gICAgICAgICk7XG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZEFwcGxpY2F0aW9uVGVsZW1ldHJ5KFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLnRlbGVtZXRyeS5hcHBsaWNhdGlvblxuICAgICAgICApO1xuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRUaHJvdHRsaW5nKHBhcmFtZXRlcnMpO1xuXG4gICAgICAgIGlmICh0aGlzLnNlcnZlclRlbGVtZXRyeU1hbmFnZXIgJiYgIWlzT2lkY1Byb3RvY29sTW9kZSh0aGlzLmNvbmZpZykpIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFNlcnZlclRlbGVtZXRyeShcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHRoaXMuc2VydmVyVGVsZW1ldHJ5TWFuYWdlclxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFJlZnJlc2hUb2tlbihcbiAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICByZXF1ZXN0LnJlZnJlc2hUb2tlblxuICAgICAgICApO1xuXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5jbGllbnRDcmVkZW50aWFscy5jbGllbnRTZWNyZXQpIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudFNlY3JldChcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmNsaWVudENyZWRlbnRpYWxzLmNsaWVudFNlY3JldFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5jbGllbnRDcmVkZW50aWFscy5jbGllbnRBc3NlcnRpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IGNsaWVudEFzc2VydGlvbjogQ2xpZW50QXNzZXJ0aW9uID1cbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5jbGllbnRDcmVkZW50aWFscy5jbGllbnRBc3NlcnRpb247XG5cbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudEFzc2VydGlvbihcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGF3YWl0IGdldENsaWVudEFzc2VydGlvbihcbiAgICAgICAgICAgICAgICAgICAgY2xpZW50QXNzZXJ0aW9uLmFzc2VydGlvbixcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aE9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3QucmVzb3VyY2VSZXF1ZXN0VXJpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudEFzc2VydGlvblR5cGUoXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBjbGllbnRBc3NlcnRpb24uYXNzZXJ0aW9uVHlwZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXF1ZXN0LmF1dGhlbnRpY2F0aW9uU2NoZW1lID09PSBBdXRoZW50aWNhdGlvblNjaGVtZS5QT1ApIHtcbiAgICAgICAgICAgIGNvbnN0IHBvcFRva2VuR2VuZXJhdG9yID0gbmV3IFBvcFRva2VuR2VuZXJhdG9yKFxuICAgICAgICAgICAgICAgIHRoaXMuY3J5cHRvVXRpbHMsXG4gICAgICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgbGV0IHJlcUNuZkRhdGE7XG4gICAgICAgICAgICBpZiAoIXJlcXVlc3QucG9wS2lkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZ2VuZXJhdGVkUmVxQ25mRGF0YSA9IGF3YWl0IGludm9rZUFzeW5jKFxuICAgICAgICAgICAgICAgICAgICBwb3BUb2tlbkdlbmVyYXRvci5nZW5lcmF0ZUNuZi5iaW5kKHBvcFRva2VuR2VuZXJhdG9yKSxcbiAgICAgICAgICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuUG9wVG9rZW5HZW5lcmF0ZUNuZixcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQsXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgICAgICkocmVxdWVzdCwgdGhpcy5sb2dnZXIpO1xuXG4gICAgICAgICAgICAgICAgcmVxQ25mRGF0YSA9IGdlbmVyYXRlZFJlcUNuZkRhdGEucmVxQ25mU3RyaW5nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXFDbmZEYXRhID0gdGhpcy5jcnlwdG9VdGlscy5lbmNvZGVLaWQocmVxdWVzdC5wb3BLaWQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTUEEgUG9QIHJlcXVpcmVzIGZ1bGwgQmFzZTY0VXJsIGVuY29kZWQgcmVxX2NuZiBzdHJpbmcgKHVuaGFzaGVkKVxuICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkUG9wVG9rZW4ocGFyYW1ldGVycywgcmVxQ25mRGF0YSk7XG4gICAgICAgIH0gZWxzZSBpZiAocmVxdWVzdC5hdXRoZW50aWNhdGlvblNjaGVtZSA9PT0gQXV0aGVudGljYXRpb25TY2hlbWUuU1NIKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdC5zc2hKd2spIHtcbiAgICAgICAgICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRTc2hKd2socGFyYW1ldGVycywgcmVxdWVzdC5zc2hKd2spO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRDb25maWd1cmF0aW9uRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLm1pc3NpbmdTc2hKd2tcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIVN0cmluZ1V0aWxzLmlzRW1wdHlPYmoocmVxdWVzdC5jbGFpbXMpIHx8XG4gICAgICAgICAgICAodGhpcy5jb25maWcuYXV0aE9wdGlvbnMuY2xpZW50Q2FwYWJpbGl0aWVzICYmXG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aE9wdGlvbnMuY2xpZW50Q2FwYWJpbGl0aWVzLmxlbmd0aCA+IDApXG4gICAgICAgICkge1xuICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2xhaW1zKFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5jbGFpbXMsXG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aE9wdGlvbnMuY2xpZW50Q2FwYWJpbGl0aWVzXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5jb25maWcuc3lzdGVtT3B0aW9ucy5wcmV2ZW50Q29yc1ByZWZsaWdodCAmJlxuICAgICAgICAgICAgcmVxdWVzdC5jY3NDcmVkZW50aWFsXG4gICAgICAgICkge1xuICAgICAgICAgICAgc3dpdGNoIChyZXF1ZXN0LmNjc0NyZWRlbnRpYWwudHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgQ2NzQ3JlZGVudGlhbFR5cGUuSE9NRV9BQ0NPVU5UX0lEOlxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2xpZW50SW5mbyA9IGJ1aWxkQ2xpZW50SW5mb0Zyb21Ib21lQWNjb3VudElkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3QuY2NzQ3JlZGVudGlhbC5jcmVkZW50aWFsXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2NzT2lkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50SW5mb1xuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIudmVyYm9zZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkNvdWxkIG5vdCBwYXJzZSBob21lIGFjY291bnQgSUQgZm9yIENDUyBIZWFkZXI6IFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIENjc0NyZWRlbnRpYWxUeXBlLlVQTjpcbiAgICAgICAgICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2NzVXBuKFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3QuY2NzQ3JlZGVudGlhbC5jcmVkZW50aWFsXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlcXVlc3QuZW1iZWRkZWRDbGllbnRJZCkge1xuICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQnJva2VyUGFyYW1ldGVycyhcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmF1dGhPcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmF1dGhPcHRpb25zLnJlZGlyZWN0VXJpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlcXVlc3QudG9rZW5Cb2R5UGFyYW1ldGVycykge1xuICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkRXh0cmFRdWVyeVBhcmFtZXRlcnMoXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnRva2VuQm9keVBhcmFtZXRlcnNcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5pbnN0cnVtZW50QnJva2VyUGFyYW1zKFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZCxcbiAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnRcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIFVybFV0aWxzLm1hcFRvUXVlcnlTdHJpbmcocGFyYW1ldGVycyk7XG4gICAgfVxufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBCYXNlQ2xpZW50IH0gZnJvbSBcIi4vQmFzZUNsaWVudC5qc1wiO1xuaW1wb3J0IHsgQ2xpZW50Q29uZmlndXJhdGlvbiB9IGZyb20gXCIuLi9jb25maWcvQ2xpZW50Q29uZmlndXJhdGlvbi5qc1wiO1xuaW1wb3J0IHsgQ29tbW9uU2lsZW50Rmxvd1JlcXVlc3QgfSBmcm9tIFwiLi4vcmVxdWVzdC9Db21tb25TaWxlbnRGbG93UmVxdWVzdC5qc1wiO1xuaW1wb3J0IHsgQXV0aGVudGljYXRpb25SZXN1bHQgfSBmcm9tIFwiLi4vcmVzcG9uc2UvQXV0aGVudGljYXRpb25SZXN1bHQuanNcIjtcbmltcG9ydCAqIGFzIFRpbWVVdGlscyBmcm9tIFwiLi4vdXRpbHMvVGltZVV0aWxzLmpzXCI7XG5pbXBvcnQge1xuICAgIENsaWVudEF1dGhFcnJvckNvZGVzLFxuICAgIGNyZWF0ZUNsaWVudEF1dGhFcnJvcixcbn0gZnJvbSBcIi4uL2Vycm9yL0NsaWVudEF1dGhFcnJvci5qc1wiO1xuaW1wb3J0IHsgUmVzcG9uc2VIYW5kbGVyIH0gZnJvbSBcIi4uL3Jlc3BvbnNlL1Jlc3BvbnNlSGFuZGxlci5qc1wiO1xuaW1wb3J0IHsgQ2FjaGVSZWNvcmQgfSBmcm9tIFwiLi4vY2FjaGUvZW50aXRpZXMvQ2FjaGVSZWNvcmQuanNcIjtcbmltcG9ydCB7IENhY2hlT3V0Y29tZSB9IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcbmltcG9ydCB7IElQZXJmb3JtYW5jZUNsaWVudCB9IGZyb20gXCIuLi90ZWxlbWV0cnkvcGVyZm9ybWFuY2UvSVBlcmZvcm1hbmNlQ2xpZW50LmpzXCI7XG5pbXBvcnQgeyBTdHJpbmdVdGlscyB9IGZyb20gXCIuLi91dGlscy9TdHJpbmdVdGlscy5qc1wiO1xuaW1wb3J0IHsgY2hlY2tNYXhBZ2UsIGV4dHJhY3RUb2tlbkNsYWltcyB9IGZyb20gXCIuLi9hY2NvdW50L0F1dGhUb2tlbi5qc1wiO1xuaW1wb3J0IHsgVG9rZW5DbGFpbXMgfSBmcm9tIFwiLi4vYWNjb3VudC9Ub2tlbkNsYWltcy5qc1wiO1xuaW1wb3J0IHsgUGVyZm9ybWFuY2VFdmVudHMgfSBmcm9tIFwiLi4vdGVsZW1ldHJ5L3BlcmZvcm1hbmNlL1BlcmZvcm1hbmNlRXZlbnQuanNcIjtcbmltcG9ydCB7IGludm9rZUFzeW5jIH0gZnJvbSBcIi4uL3V0aWxzL0Z1bmN0aW9uV3JhcHBlcnMuanNcIjtcbmltcG9ydCB7IGdldFRlbmFudEZyb21BdXRob3JpdHlTdHJpbmcgfSBmcm9tIFwiLi4vYXV0aG9yaXR5L0F1dGhvcml0eS5qc1wiO1xuXG4vKiogQGludGVybmFsICovXG5leHBvcnQgY2xhc3MgU2lsZW50Rmxvd0NsaWVudCBleHRlbmRzIEJhc2VDbGllbnQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBjb25maWd1cmF0aW9uOiBDbGllbnRDb25maWd1cmF0aW9uLFxuICAgICAgICBwZXJmb3JtYW5jZUNsaWVudD86IElQZXJmb3JtYW5jZUNsaWVudFxuICAgICkge1xuICAgICAgICBzdXBlcihjb25maWd1cmF0aW9uLCBwZXJmb3JtYW5jZUNsaWVudCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRva2VuIGZyb20gY2FjaGUgb3IgdGhyb3dzIGFuIGVycm9yIGlmIGl0IG11c3QgYmUgcmVmcmVzaGVkLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0XG4gICAgICovXG4gICAgYXN5bmMgYWNxdWlyZUNhY2hlZFRva2VuKFxuICAgICAgICByZXF1ZXN0OiBDb21tb25TaWxlbnRGbG93UmVxdWVzdFxuICAgICk6IFByb21pc2U8W0F1dGhlbnRpY2F0aW9uUmVzdWx0LCBDYWNoZU91dGNvbWVdPiB7XG4gICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQ/LmFkZFF1ZXVlTWVhc3VyZW1lbnQoXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5TaWxlbnRGbG93Q2xpZW50QWNxdWlyZUNhY2hlZFRva2VuLFxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICk7XG4gICAgICAgIGxldCBsYXN0Q2FjaGVPdXRjb21lOiBDYWNoZU91dGNvbWUgPSBDYWNoZU91dGNvbWUuTk9UX0FQUExJQ0FCTEU7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgcmVxdWVzdC5mb3JjZVJlZnJlc2ggfHxcbiAgICAgICAgICAgICghdGhpcy5jb25maWcuY2FjaGVPcHRpb25zLmNsYWltc0Jhc2VkQ2FjaGluZ0VuYWJsZWQgJiZcbiAgICAgICAgICAgICAgICAhU3RyaW5nVXRpbHMuaXNFbXB0eU9iaihyZXF1ZXN0LmNsYWltcykpXG4gICAgICAgICkge1xuICAgICAgICAgICAgLy8gTXVzdCByZWZyZXNoIGR1ZSB0byBwcmVzZW50IGZvcmNlX3JlZnJlc2ggZmxhZy5cbiAgICAgICAgICAgIHRoaXMuc2V0Q2FjaGVPdXRjb21lKFxuICAgICAgICAgICAgICAgIENhY2hlT3V0Y29tZS5GT1JDRV9SRUZSRVNIX09SX0NMQUlNUyxcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMudG9rZW5SZWZyZXNoUmVxdWlyZWRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXZSBjdXJyZW50bHkgZG8gbm90IHN1cHBvcnQgc2lsZW50IGZsb3cgZm9yIGFjY291bnQgPT09IG51bGwgdXNlIGNhc2VzOyBUaGlzIHdpbGwgYmUgcmV2aXNpdGVkIGZvciBjb25maWRlbnRpYWwgZmxvdyB1c2VjYXNlc1xuICAgICAgICBpZiAoIXJlcXVlc3QuYWNjb3VudCkge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKFxuICAgICAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLm5vQWNjb3VudEluU2lsZW50UmVxdWVzdFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlcXVlc3RUZW5hbnRJZCA9XG4gICAgICAgICAgICByZXF1ZXN0LmFjY291bnQudGVuYW50SWQgfHxcbiAgICAgICAgICAgIGdldFRlbmFudEZyb21BdXRob3JpdHlTdHJpbmcocmVxdWVzdC5hdXRob3JpdHkpO1xuICAgICAgICBjb25zdCB0b2tlbktleXMgPSB0aGlzLmNhY2hlTWFuYWdlci5nZXRUb2tlbktleXMoKTtcbiAgICAgICAgY29uc3QgY2FjaGVkQWNjZXNzVG9rZW4gPSB0aGlzLmNhY2hlTWFuYWdlci5nZXRBY2Nlc3NUb2tlbihcbiAgICAgICAgICAgIHJlcXVlc3QuYWNjb3VudCxcbiAgICAgICAgICAgIHJlcXVlc3QsXG4gICAgICAgICAgICB0b2tlbktleXMsXG4gICAgICAgICAgICByZXF1ZXN0VGVuYW50SWQsXG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50LFxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKCFjYWNoZWRBY2Nlc3NUb2tlbikge1xuICAgICAgICAgICAgLy8gbXVzdCByZWZyZXNoIGR1ZSB0byBub24tZXhpc3RlbnQgYWNjZXNzX3Rva2VuXG4gICAgICAgICAgICB0aGlzLnNldENhY2hlT3V0Y29tZShcbiAgICAgICAgICAgICAgICBDYWNoZU91dGNvbWUuTk9fQ0FDSEVEX0FDQ0VTU19UT0tFTixcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMudG9rZW5SZWZyZXNoUmVxdWlyZWRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICBUaW1lVXRpbHMud2FzQ2xvY2tUdXJuZWRCYWNrKGNhY2hlZEFjY2Vzc1Rva2VuLmNhY2hlZEF0KSB8fFxuICAgICAgICAgICAgVGltZVV0aWxzLmlzVG9rZW5FeHBpcmVkKFxuICAgICAgICAgICAgICAgIGNhY2hlZEFjY2Vzc1Rva2VuLmV4cGlyZXNPbixcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5zeXN0ZW1PcHRpb25zLnRva2VuUmVuZXdhbE9mZnNldFNlY29uZHNcbiAgICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBtdXN0IHJlZnJlc2ggZHVlIHRvIHRoZSBleHBpcmVzX2luIHZhbHVlXG4gICAgICAgICAgICB0aGlzLnNldENhY2hlT3V0Y29tZShcbiAgICAgICAgICAgICAgICBDYWNoZU91dGNvbWUuQ0FDSEVEX0FDQ0VTU19UT0tFTl9FWFBJUkVELFxuICAgICAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihcbiAgICAgICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy50b2tlblJlZnJlc2hSZXF1aXJlZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIGNhY2hlZEFjY2Vzc1Rva2VuLnJlZnJlc2hPbiAmJlxuICAgICAgICAgICAgVGltZVV0aWxzLmlzVG9rZW5FeHBpcmVkKGNhY2hlZEFjY2Vzc1Rva2VuLnJlZnJlc2hPbiwgMClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBtdXN0IHJlZnJlc2ggKGluIHRoZSBiYWNrZ3JvdW5kKSBkdWUgdG8gdGhlIHJlZnJlc2hfaW4gdmFsdWVcbiAgICAgICAgICAgIGxhc3RDYWNoZU91dGNvbWUgPSBDYWNoZU91dGNvbWUuUFJPQUNUSVZFTFlfUkVGUkVTSEVEO1xuXG4gICAgICAgICAgICAvLyBkb24ndCB0aHJvdyBDbGllbnRBdXRoRXJyb3IuY3JlYXRlUmVmcmVzaFJlcXVpcmVkRXJyb3IoKSwgcmV0dXJuIGNhY2hlZCB0b2tlbiBpbnN0ZWFkXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBlbnZpcm9ubWVudCA9XG4gICAgICAgICAgICByZXF1ZXN0LmF1dGhvcml0eSB8fCB0aGlzLmF1dGhvcml0eS5nZXRQcmVmZXJyZWRDYWNoZSgpO1xuICAgICAgICBjb25zdCBjYWNoZVJlY29yZDogQ2FjaGVSZWNvcmQgPSB7XG4gICAgICAgICAgICBhY2NvdW50OiB0aGlzLmNhY2hlTWFuYWdlci5yZWFkQWNjb3VudEZyb21DYWNoZShyZXF1ZXN0LmFjY291bnQpLFxuICAgICAgICAgICAgYWNjZXNzVG9rZW46IGNhY2hlZEFjY2Vzc1Rva2VuLFxuICAgICAgICAgICAgaWRUb2tlbjogdGhpcy5jYWNoZU1hbmFnZXIuZ2V0SWRUb2tlbihcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmFjY291bnQsXG4gICAgICAgICAgICAgICAgdG9rZW5LZXlzLFxuICAgICAgICAgICAgICAgIHJlcXVlc3RUZW5hbnRJZCxcbiAgICAgICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50LFxuICAgICAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIHJlZnJlc2hUb2tlbjogbnVsbCxcbiAgICAgICAgICAgIGFwcE1ldGFkYXRhOlxuICAgICAgICAgICAgICAgIHRoaXMuY2FjaGVNYW5hZ2VyLnJlYWRBcHBNZXRhZGF0YUZyb21DYWNoZShlbnZpcm9ubWVudCksXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5zZXRDYWNoZU91dGNvbWUobGFzdENhY2hlT3V0Y29tZSwgcmVxdWVzdC5jb3JyZWxhdGlvbklkKTtcblxuICAgICAgICBpZiAodGhpcy5jb25maWcuc2VydmVyVGVsZW1ldHJ5TWFuYWdlcikge1xuICAgICAgICAgICAgdGhpcy5jb25maWcuc2VydmVyVGVsZW1ldHJ5TWFuYWdlci5pbmNyZW1lbnRDYWNoZUhpdHMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBhd2FpdCBpbnZva2VBc3luYyhcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlUmVzdWx0RnJvbUNhY2hlUmVjb3JkLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuU2lsZW50Rmxvd0NsaWVudEdlbmVyYXRlUmVzdWx0RnJvbUNhY2hlUmVjb3JkLFxuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLFxuICAgICAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQsXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICAgICApKGNhY2hlUmVjb3JkLCByZXF1ZXN0KSxcbiAgICAgICAgICAgIGxhc3RDYWNoZU91dGNvbWUsXG4gICAgICAgIF07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXRDYWNoZU91dGNvbWUoXG4gICAgICAgIGNhY2hlT3V0Y29tZTogQ2FjaGVPdXRjb21lLFxuICAgICAgICBjb3JyZWxhdGlvbklkOiBzdHJpbmdcbiAgICApOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyPy5zZXRDYWNoZU91dGNvbWUoY2FjaGVPdXRjb21lKTtcbiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudD8uYWRkRmllbGRzKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNhY2hlT3V0Y29tZTogY2FjaGVPdXRjb21lLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGNhY2hlT3V0Y29tZSAhPT0gQ2FjaGVPdXRjb21lLk5PVF9BUFBMSUNBQkxFKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgICAgIGBUb2tlbiByZWZyZXNoIGlzIHJlcXVpcmVkIGR1ZSB0byBjYWNoZSBvdXRjb21lOiAke2NhY2hlT3V0Y29tZX1gXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIHRvIGJ1aWxkIHJlc3BvbnNlIG9iamVjdCBmcm9tIHRoZSBDYWNoZVJlY29yZFxuICAgICAqIEBwYXJhbSBjYWNoZVJlY29yZFxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVSZXN1bHRGcm9tQ2FjaGVSZWNvcmQoXG4gICAgICAgIGNhY2hlUmVjb3JkOiBDYWNoZVJlY29yZCxcbiAgICAgICAgcmVxdWVzdDogQ29tbW9uU2lsZW50Rmxvd1JlcXVlc3RcbiAgICApOiBQcm9taXNlPEF1dGhlbnRpY2F0aW9uUmVzdWx0PiB7XG4gICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQ/LmFkZFF1ZXVlTWVhc3VyZW1lbnQoXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5TaWxlbnRGbG93Q2xpZW50R2VuZXJhdGVSZXN1bHRGcm9tQ2FjaGVSZWNvcmQsXG4gICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcbiAgICAgICAgbGV0IGlkVG9rZW5DbGFpbXM6IFRva2VuQ2xhaW1zIHwgdW5kZWZpbmVkO1xuICAgICAgICBpZiAoY2FjaGVSZWNvcmQuaWRUb2tlbikge1xuICAgICAgICAgICAgaWRUb2tlbkNsYWltcyA9IGV4dHJhY3RUb2tlbkNsYWltcyhcbiAgICAgICAgICAgICAgICBjYWNoZVJlY29yZC5pZFRva2VuLnNlY3JldCxcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5jcnlwdG9JbnRlcmZhY2UuYmFzZTY0RGVjb2RlXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdG9rZW4gbWF4X2FnZSBjaGVja1xuICAgICAgICBpZiAocmVxdWVzdC5tYXhBZ2UgfHwgcmVxdWVzdC5tYXhBZ2UgPT09IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGF1dGhUaW1lID0gaWRUb2tlbkNsYWltcz8uYXV0aF90aW1lO1xuICAgICAgICAgICAgaWYgKCFhdXRoVGltZSkge1xuICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuYXV0aFRpbWVOb3RGb3VuZFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNoZWNrTWF4QWdlKGF1dGhUaW1lLCByZXF1ZXN0Lm1heEFnZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUmVzcG9uc2VIYW5kbGVyLmdlbmVyYXRlQXV0aGVudGljYXRpb25SZXN1bHQoXG4gICAgICAgICAgICB0aGlzLmNyeXB0b1V0aWxzLFxuICAgICAgICAgICAgdGhpcy5hdXRob3JpdHksXG4gICAgICAgICAgICBjYWNoZVJlY29yZCxcbiAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICByZXF1ZXN0LFxuICAgICAgICAgICAgaWRUb2tlbkNsYWltc1xuICAgICAgICApO1xuICAgIH1cbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQ29tbW9uQXV0aG9yaXphdGlvblVybFJlcXVlc3QgfSBmcm9tIFwiLi4vcmVxdWVzdC9Db21tb25BdXRob3JpemF0aW9uVXJsUmVxdWVzdC5qc1wiO1xuaW1wb3J0ICogYXMgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIgZnJvbSBcIi4uL3JlcXVlc3QvUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuanNcIjtcbmltcG9ydCB7IElQZXJmb3JtYW5jZUNsaWVudCB9IGZyb20gXCIuLi90ZWxlbWV0cnkvcGVyZm9ybWFuY2UvSVBlcmZvcm1hbmNlQ2xpZW50LmpzXCI7XG5pbXBvcnQgKiBhcyBBQURTZXJ2ZXJQYXJhbUtleXMgZnJvbSBcIi4uL2NvbnN0YW50cy9BQURTZXJ2ZXJQYXJhbUtleXMuanNcIjtcbmltcG9ydCB7IEF1dGhPcHRpb25zIH0gZnJvbSBcIi4uL2NvbmZpZy9DbGllbnRDb25maWd1cmF0aW9uLmpzXCI7XG5pbXBvcnQgeyBQcm9tcHRWYWx1ZSB9IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcbmltcG9ydCB7IEFjY291bnRJbmZvIH0gZnJvbSBcIi4uL2FjY291bnQvQWNjb3VudEluZm8uanNcIjtcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gXCIuLi9sb2dnZXIvTG9nZ2VyLmpzXCI7XG5pbXBvcnQgeyBidWlsZENsaWVudEluZm9Gcm9tSG9tZUFjY291bnRJZCB9IGZyb20gXCIuLi9hY2NvdW50L0NsaWVudEluZm8uanNcIjtcbmltcG9ydCB7IEF1dGhvcml0eSB9IGZyb20gXCIuLi9hdXRob3JpdHkvQXV0aG9yaXR5LmpzXCI7XG5pbXBvcnQgeyBtYXBUb1F1ZXJ5U3RyaW5nIH0gZnJvbSBcIi4uL3V0aWxzL1VybFV0aWxzLmpzXCI7XG5pbXBvcnQgeyBVcmxTdHJpbmcgfSBmcm9tIFwiLi4vdXJsL1VybFN0cmluZy5qc1wiO1xuaW1wb3J0IHsgQXV0aG9yaXphdGlvbkNvZGVQYXlsb2FkIH0gZnJvbSBcIi4uL3Jlc3BvbnNlL0F1dGhvcml6YXRpb25Db2RlUGF5bG9hZC5qc1wiO1xuaW1wb3J0IHsgQXV0aG9yaXplUmVzcG9uc2UgfSBmcm9tIFwiLi4vcmVzcG9uc2UvQXV0aG9yaXplUmVzcG9uc2UuanNcIjtcbmltcG9ydCB7XG4gICAgQ2xpZW50QXV0aEVycm9yQ29kZXMsXG4gICAgY3JlYXRlQ2xpZW50QXV0aEVycm9yLFxufSBmcm9tIFwiLi4vZXJyb3IvQ2xpZW50QXV0aEVycm9yLmpzXCI7XG5pbXBvcnQge1xuICAgIEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3IsXG4gICAgaXNJbnRlcmFjdGlvblJlcXVpcmVkRXJyb3IsXG59IGZyb20gXCIuLi9lcnJvci9JbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yLmpzXCI7XG5pbXBvcnQgeyBTZXJ2ZXJFcnJvciB9IGZyb20gXCIuLi9lcnJvci9TZXJ2ZXJFcnJvci5qc1wiO1xuXG4vKipcbiAqIFJldHVybnMgbWFwIG9mIHBhcmFtZXRlcnMgdGhhdCBhcmUgYXBwbGljYWJsZSB0byBhbGwgY2FsbHMgdG8gL2F1dGhvcml6ZSB3aGV0aGVyIHVzaW5nIFBLQ0Ugb3IgRUFSXG4gKiBAcGFyYW0gY29uZmlnXG4gKiBAcGFyYW0gcmVxdWVzdFxuICogQHBhcmFtIGxvZ2dlclxuICogQHBhcmFtIHBlcmZvcm1hbmNlQ2xpZW50XG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3RhbmRhcmRBdXRob3JpemVSZXF1ZXN0UGFyYW1ldGVycyhcbiAgICBhdXRoT3B0aW9uczogQXV0aE9wdGlvbnMsXG4gICAgcmVxdWVzdDogQ29tbW9uQXV0aG9yaXphdGlvblVybFJlcXVlc3QsXG4gICAgbG9nZ2VyOiBMb2dnZXIsXG4gICAgcGVyZm9ybWFuY2VDbGllbnQ/OiBJUGVyZm9ybWFuY2VDbGllbnRcbik6IE1hcDxzdHJpbmcsIHN0cmluZz4ge1xuICAgIC8vIGdlbmVyYXRlIHRoZSBjb3JyZWxhdGlvbklkIGlmIG5vdCBzZXQgYnkgdGhlIHVzZXIgYW5kIGFkZFxuICAgIGNvbnN0IGNvcnJlbGF0aW9uSWQgPSByZXF1ZXN0LmNvcnJlbGF0aW9uSWQ7XG5cbiAgICBjb25zdCBwYXJhbWV0ZXJzID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZz4oKTtcblxuICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudElkKFxuICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICByZXF1ZXN0LmVtYmVkZGVkQ2xpZW50SWQgfHxcbiAgICAgICAgICAgIHJlcXVlc3QuZXh0cmFRdWVyeVBhcmFtZXRlcnM/LltBQURTZXJ2ZXJQYXJhbUtleXMuQ0xJRU5UX0lEXSB8fFxuICAgICAgICAgICAgYXV0aE9wdGlvbnMuY2xpZW50SWRcbiAgICApO1xuXG4gICAgY29uc3QgcmVxdWVzdFNjb3BlcyA9IFtcbiAgICAgICAgLi4uKHJlcXVlc3Quc2NvcGVzIHx8IFtdKSxcbiAgICAgICAgLi4uKHJlcXVlc3QuZXh0cmFTY29wZXNUb0NvbnNlbnQgfHwgW10pLFxuICAgIF07XG4gICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkU2NvcGVzKFxuICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICByZXF1ZXN0U2NvcGVzLFxuICAgICAgICB0cnVlLFxuICAgICAgICBhdXRoT3B0aW9ucy5hdXRob3JpdHkub3B0aW9ucy5PSURDT3B0aW9ucz8uZGVmYXVsdFNjb3Blc1xuICAgICk7XG5cbiAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRSZWRpcmVjdFVyaShwYXJhbWV0ZXJzLCByZXF1ZXN0LnJlZGlyZWN0VXJpKTtcblxuICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENvcnJlbGF0aW9uSWQocGFyYW1ldGVycywgY29ycmVsYXRpb25JZCk7XG5cbiAgICAvLyBhZGQgcmVzcG9uc2VfbW9kZS4gSWYgbm90IHBhc3NlZCBpbiBpdCBkZWZhdWx0cyB0byBxdWVyeS5cbiAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRSZXNwb25zZU1vZGUocGFyYW1ldGVycywgcmVxdWVzdC5yZXNwb25zZU1vZGUpO1xuXG4gICAgLy8gYWRkIGNsaWVudF9pbmZvPTFcbiAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDbGllbnRJbmZvKHBhcmFtZXRlcnMpO1xuXG4gICAgaWYgKHJlcXVlc3QucHJvbXB0KSB7XG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFByb21wdChwYXJhbWV0ZXJzLCByZXF1ZXN0LnByb21wdCk7XG4gICAgICAgIHBlcmZvcm1hbmNlQ2xpZW50Py5hZGRGaWVsZHMoeyBwcm9tcHQ6IHJlcXVlc3QucHJvbXB0IH0sIGNvcnJlbGF0aW9uSWQpO1xuICAgIH1cblxuICAgIGlmIChyZXF1ZXN0LmRvbWFpbkhpbnQpIHtcbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkRG9tYWluSGludChwYXJhbWV0ZXJzLCByZXF1ZXN0LmRvbWFpbkhpbnQpO1xuICAgICAgICBwZXJmb3JtYW5jZUNsaWVudD8uYWRkRmllbGRzKFxuICAgICAgICAgICAgeyBkb21haW5IaW50RnJvbVJlcXVlc3Q6IHRydWUgfSxcbiAgICAgICAgICAgIGNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgc2lkIG9yIGxvZ2luSGludCB3aXRoIHByZWZlcmVuY2UgZm9yIGxvZ2luX2hpbnQgY2xhaW0gKGluIHJlcXVlc3QpIC0+IHNpZCAtPiBsb2dpbkhpbnQgKHVwbi9lbWFpbCkgLT4gdXNlcm5hbWUgb2YgQWNjb3VudEluZm8gb2JqZWN0XG4gICAgaWYgKHJlcXVlc3QucHJvbXB0ICE9PSBQcm9tcHRWYWx1ZS5TRUxFQ1RfQUNDT1VOVCkge1xuICAgICAgICAvLyBBQUQgd2lsbCB0aHJvdyBpZiBwcm9tcHQ9c2VsZWN0X2FjY291bnQgaXMgcGFzc2VkIHdpdGggYW4gYWNjb3VudCBoaW50XG4gICAgICAgIGlmIChyZXF1ZXN0LnNpZCAmJiByZXF1ZXN0LnByb21wdCA9PT0gUHJvbXB0VmFsdWUuTk9ORSkge1xuICAgICAgICAgICAgLy8gU2Vzc2lvbklEIGlzIG9ubHkgdXNlZCBpbiBzaWxlbnQgY2FsbHNcbiAgICAgICAgICAgIGxvZ2dlci52ZXJib3NlKFxuICAgICAgICAgICAgICAgIFwiY3JlYXRlQXV0aENvZGVVcmxRdWVyeVN0cmluZzogUHJvbXB0IGlzIG5vbmUsIGFkZGluZyBzaWQgZnJvbSByZXF1ZXN0XCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRTaWQocGFyYW1ldGVycywgcmVxdWVzdC5zaWQpO1xuICAgICAgICAgICAgcGVyZm9ybWFuY2VDbGllbnQ/LmFkZEZpZWxkcyhcbiAgICAgICAgICAgICAgICB7IHNpZEZyb21SZXF1ZXN0OiB0cnVlIH0sXG4gICAgICAgICAgICAgICAgY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmIChyZXF1ZXN0LmFjY291bnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGFjY291bnRTaWQgPSBleHRyYWN0QWNjb3VudFNpZChyZXF1ZXN0LmFjY291bnQpO1xuICAgICAgICAgICAgbGV0IGFjY291bnRMb2dpbkhpbnRDbGFpbSA9IGV4dHJhY3RMb2dpbkhpbnQocmVxdWVzdC5hY2NvdW50KTtcblxuICAgICAgICAgICAgaWYgKGFjY291bnRMb2dpbkhpbnRDbGFpbSAmJiByZXF1ZXN0LmRvbWFpbkhpbnQpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIud2FybmluZyhcbiAgICAgICAgICAgICAgICAgICAgYEF1dGhvcml6YXRpb25Db2RlQ2xpZW50LmNyZWF0ZUF1dGhDb2RlVXJsUXVlcnlTdHJpbmc6IFwiZG9tYWluSGludFwiIHBhcmFtIGlzIHNldCwgc2tpcHBpbmcgb3BhcXVlIFwibG9naW5faGludFwiIGNsYWltLiBQbGVhc2UgY29uc2lkZXIgbm90IHBhc3NpbmcgZG9tYWluSGludGBcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGFjY291bnRMb2dpbkhpbnRDbGFpbSA9IG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIElmIGxvZ2luX2hpbnQgY2xhaW0gaXMgcHJlc2VudCwgdXNlIGl0IG92ZXIgc2lkL3VzZXJuYW1lXG4gICAgICAgICAgICBpZiAoYWNjb3VudExvZ2luSGludENsYWltKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgICAgIFwiY3JlYXRlQXV0aENvZGVVcmxRdWVyeVN0cmluZzogbG9naW5faGludCBjbGFpbSBwcmVzZW50IG9uIGFjY291bnRcIlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkTG9naW5IaW50KFxuICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50TG9naW5IaW50Q2xhaW1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHBlcmZvcm1hbmNlQ2xpZW50Py5hZGRGaWVsZHMoXG4gICAgICAgICAgICAgICAgICAgIHsgbG9naW5IaW50RnJvbUNsYWltOiB0cnVlIH0sXG4gICAgICAgICAgICAgICAgICAgIGNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsaWVudEluZm8gPSBidWlsZENsaWVudEluZm9Gcm9tSG9tZUFjY291bnRJZChcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3QuYWNjb3VudC5ob21lQWNjb3VudElkXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENjc09pZChwYXJhbWV0ZXJzLCBjbGllbnRJbmZvKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci52ZXJib3NlKFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjcmVhdGVBdXRoQ29kZVVybFF1ZXJ5U3RyaW5nOiBDb3VsZCBub3QgcGFyc2UgaG9tZSBhY2NvdW50IElEIGZvciBDQ1MgSGVhZGVyXCJcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFjY291bnRTaWQgJiYgcmVxdWVzdC5wcm9tcHQgPT09IFByb21wdFZhbHVlLk5PTkUpIHtcbiAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAqIElmIGFjY291bnQgYW5kIGxvZ2luSGludCBhcmUgcHJvdmlkZWQsIHdlIHdpbGwgY2hlY2sgYWNjb3VudCBmaXJzdCBmb3Igc2lkIGJlZm9yZSBhZGRpbmcgbG9naW5IaW50XG4gICAgICAgICAgICAgICAgICogU2Vzc2lvbklkIGlzIG9ubHkgdXNlZCBpbiBzaWxlbnQgY2FsbHNcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBsb2dnZXIudmVyYm9zZShcbiAgICAgICAgICAgICAgICAgICAgXCJjcmVhdGVBdXRoQ29kZVVybFF1ZXJ5U3RyaW5nOiBQcm9tcHQgaXMgbm9uZSwgYWRkaW5nIHNpZCBmcm9tIGFjY291bnRcIlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkU2lkKHBhcmFtZXRlcnMsIGFjY291bnRTaWQpO1xuICAgICAgICAgICAgICAgIHBlcmZvcm1hbmNlQ2xpZW50Py5hZGRGaWVsZHMoXG4gICAgICAgICAgICAgICAgICAgIHsgc2lkRnJvbUNsYWltOiB0cnVlIH0sXG4gICAgICAgICAgICAgICAgICAgIGNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsaWVudEluZm8gPSBidWlsZENsaWVudEluZm9Gcm9tSG9tZUFjY291bnRJZChcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3QuYWNjb3VudC5ob21lQWNjb3VudElkXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENjc09pZChwYXJhbWV0ZXJzLCBjbGllbnRJbmZvKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci52ZXJib3NlKFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjcmVhdGVBdXRoQ29kZVVybFF1ZXJ5U3RyaW5nOiBDb3VsZCBub3QgcGFyc2UgaG9tZSBhY2NvdW50IElEIGZvciBDQ1MgSGVhZGVyXCJcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlcXVlc3QubG9naW5IaW50KSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgICAgIFwiY3JlYXRlQXV0aENvZGVVcmxRdWVyeVN0cmluZzogQWRkaW5nIGxvZ2luX2hpbnQgZnJvbSByZXF1ZXN0XCJcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZExvZ2luSGludChcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5sb2dpbkhpbnRcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENjc1VwbihcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5sb2dpbkhpbnRcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHBlcmZvcm1hbmNlQ2xpZW50Py5hZGRGaWVsZHMoXG4gICAgICAgICAgICAgICAgICAgIHsgbG9naW5IaW50RnJvbVJlcXVlc3Q6IHRydWUgfSxcbiAgICAgICAgICAgICAgICAgICAgY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlcXVlc3QuYWNjb3VudC51c2VybmFtZSkge1xuICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrIHRvIGFjY291bnQgdXNlcm5hbWUgaWYgcHJvdmlkZWRcbiAgICAgICAgICAgICAgICBsb2dnZXIudmVyYm9zZShcbiAgICAgICAgICAgICAgICAgICAgXCJjcmVhdGVBdXRoQ29kZVVybFF1ZXJ5U3RyaW5nOiBBZGRpbmcgbG9naW5faGludCBmcm9tIGFjY291bnRcIlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkTG9naW5IaW50KFxuICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LmFjY291bnQudXNlcm5hbWVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHBlcmZvcm1hbmNlQ2xpZW50Py5hZGRGaWVsZHMoXG4gICAgICAgICAgICAgICAgICAgIHsgbG9naW5IaW50RnJvbVVwbjogdHJ1ZSB9LFxuICAgICAgICAgICAgICAgICAgICBjb3JyZWxhdGlvbklkXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjbGllbnRJbmZvID0gYnVpbGRDbGllbnRJbmZvRnJvbUhvbWVBY2NvdW50SWQoXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LmFjY291bnQuaG9tZUFjY291bnRJZFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDY3NPaWQocGFyYW1ldGVycywgY2xpZW50SW5mbyk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIudmVyYm9zZShcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY3JlYXRlQXV0aENvZGVVcmxRdWVyeVN0cmluZzogQ291bGQgbm90IHBhcnNlIGhvbWUgYWNjb3VudCBJRCBmb3IgQ0NTIEhlYWRlclwiXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHJlcXVlc3QubG9naW5IaW50KSB7XG4gICAgICAgICAgICBsb2dnZXIudmVyYm9zZShcbiAgICAgICAgICAgICAgICBcImNyZWF0ZUF1dGhDb2RlVXJsUXVlcnlTdHJpbmc6IE5vIGFjY291bnQsIGFkZGluZyBsb2dpbl9oaW50IGZyb20gcmVxdWVzdFwiXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkTG9naW5IaW50KHBhcmFtZXRlcnMsIHJlcXVlc3QubG9naW5IaW50KTtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENjc1VwbihwYXJhbWV0ZXJzLCByZXF1ZXN0LmxvZ2luSGludCk7XG4gICAgICAgICAgICBwZXJmb3JtYW5jZUNsaWVudD8uYWRkRmllbGRzKFxuICAgICAgICAgICAgICAgIHsgbG9naW5IaW50RnJvbVJlcXVlc3Q6IHRydWUgfSxcbiAgICAgICAgICAgICAgICBjb3JyZWxhdGlvbklkXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICBcImNyZWF0ZUF1dGhDb2RlVXJsUXVlcnlTdHJpbmc6IFByb21wdCBpcyBzZWxlY3RfYWNjb3VudCwgaWdub3JpbmcgYWNjb3VudCBoaW50c1wiXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3Qubm9uY2UpIHtcbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkTm9uY2UocGFyYW1ldGVycywgcmVxdWVzdC5ub25jZSk7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3Quc3RhdGUpIHtcbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkU3RhdGUocGFyYW1ldGVycywgcmVxdWVzdC5zdGF0ZSk7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgICByZXF1ZXN0LmNsYWltcyB8fFxuICAgICAgICAoYXV0aE9wdGlvbnMuY2xpZW50Q2FwYWJpbGl0aWVzICYmXG4gICAgICAgICAgICBhdXRoT3B0aW9ucy5jbGllbnRDYXBhYmlsaXRpZXMubGVuZ3RoID4gMClcbiAgICApIHtcbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2xhaW1zKFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHJlcXVlc3QuY2xhaW1zLFxuICAgICAgICAgICAgYXV0aE9wdGlvbnMuY2xpZW50Q2FwYWJpbGl0aWVzXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3QuZW1iZWRkZWRDbGllbnRJZCkge1xuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRCcm9rZXJQYXJhbWV0ZXJzKFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIGF1dGhPcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgICAgYXV0aE9wdGlvbnMucmVkaXJlY3RVcmlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBJZiBleHRyYVF1ZXJ5UGFyYW1ldGVycyBpbmNsdWRlcyBpbnN0YW5jZV9hd2FyZSBpdHMgdmFsdWUgd2lsbCBiZSBhZGRlZCB3aGVuIGV4dHJhUXVlcnlQYXJhbWV0ZXJzIGFyZSBhZGRlZFxuICAgIGlmIChcbiAgICAgICAgYXV0aE9wdGlvbnMuaW5zdGFuY2VBd2FyZSAmJlxuICAgICAgICAoIXJlcXVlc3QuZXh0cmFRdWVyeVBhcmFtZXRlcnMgfHxcbiAgICAgICAgICAgICFPYmplY3Qua2V5cyhyZXF1ZXN0LmV4dHJhUXVlcnlQYXJhbWV0ZXJzKS5pbmNsdWRlcyhcbiAgICAgICAgICAgICAgICBBQURTZXJ2ZXJQYXJhbUtleXMuSU5TVEFOQ0VfQVdBUkVcbiAgICAgICAgICAgICkpXG4gICAgKSB7XG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZEluc3RhbmNlQXdhcmUocGFyYW1ldGVycyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhcmFtZXRlcnM7XG59XG5cbi8qKlxuICogUmV0dXJucyBhdXRob3JpemUgZW5kcG9pbnQgd2l0aCBnaXZlbiByZXF1ZXN0IHBhcmFtZXRlcnMgaW4gdGhlIHF1ZXJ5IHN0cmluZ1xuICogQHBhcmFtIGF1dGhvcml0eVxuICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXV0aG9yaXplVXJsKFxuICAgIGF1dGhvcml0eTogQXV0aG9yaXR5LFxuICAgIHJlcXVlc3RQYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+XG4pOiBzdHJpbmcge1xuICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gbWFwVG9RdWVyeVN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycyk7XG5cbiAgICByZXR1cm4gVXJsU3RyaW5nLmFwcGVuZFF1ZXJ5U3RyaW5nKFxuICAgICAgICBhdXRob3JpdHkuYXV0aG9yaXphdGlvbkVuZHBvaW50LFxuICAgICAgICBxdWVyeVN0cmluZ1xuICAgICk7XG59XG5cbi8qKlxuICogSGFuZGxlcyB0aGUgaGFzaCBmcmFnbWVudCByZXNwb25zZSBmcm9tIHB1YmxpYyBjbGllbnQgY29kZSByZXF1ZXN0LiBSZXR1cm5zIGEgY29kZSByZXNwb25zZSB1c2VkIGJ5XG4gKiB0aGUgY2xpZW50IHRvIGV4Y2hhbmdlIGZvciBhIHRva2VuIGluIGFjcXVpcmVUb2tlbi5cbiAqIEBwYXJhbSBzZXJ2ZXJQYXJhbXNcbiAqIEBwYXJhbSBjYWNoZWRTdGF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXV0aG9yaXphdGlvbkNvZGVQYXlsb2FkKFxuICAgIHNlcnZlclBhcmFtczogQXV0aG9yaXplUmVzcG9uc2UsXG4gICAgY2FjaGVkU3RhdGU6IHN0cmluZ1xuKTogQXV0aG9yaXphdGlvbkNvZGVQYXlsb2FkIHtcbiAgICAvLyBHZXQgY29kZSByZXNwb25zZVxuICAgIHZhbGlkYXRlQXV0aG9yaXphdGlvblJlc3BvbnNlKHNlcnZlclBhcmFtcywgY2FjaGVkU3RhdGUpO1xuXG4gICAgLy8gdGhyb3cgd2hlbiB0aGVyZSBpcyBubyBhdXRoIGNvZGUgaW4gdGhlIHJlc3BvbnNlXG4gICAgaWYgKCFzZXJ2ZXJQYXJhbXMuY29kZSkge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy5hdXRob3JpemF0aW9uQ29kZU1pc3NpbmdGcm9tU2VydmVyUmVzcG9uc2VcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2VydmVyUGFyYW1zIGFzIEF1dGhvcml6YXRpb25Db2RlUGF5bG9hZDtcbn1cblxuLyoqXG4gKiBGdW5jdGlvbiB3aGljaCB2YWxpZGF0ZXMgc2VydmVyIGF1dGhvcml6YXRpb24gY29kZSByZXNwb25zZS5cbiAqIEBwYXJhbSBzZXJ2ZXJSZXNwb25zZUhhc2hcbiAqIEBwYXJhbSByZXF1ZXN0U3RhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlQXV0aG9yaXphdGlvblJlc3BvbnNlKFxuICAgIHNlcnZlclJlc3BvbnNlOiBBdXRob3JpemVSZXNwb25zZSxcbiAgICByZXF1ZXN0U3RhdGU6IHN0cmluZ1xuKTogdm9pZCB7XG4gICAgaWYgKCFzZXJ2ZXJSZXNwb25zZS5zdGF0ZSB8fCAhcmVxdWVzdFN0YXRlKSB7XG4gICAgICAgIHRocm93IHNlcnZlclJlc3BvbnNlLnN0YXRlXG4gICAgICAgICAgICA/IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihcbiAgICAgICAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLnN0YXRlTm90Rm91bmQsXG4gICAgICAgICAgICAgICAgICBcIkNhY2hlZCBTdGF0ZVwiXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIDogY3JlYXRlQ2xpZW50QXV0aEVycm9yKFxuICAgICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuc3RhdGVOb3RGb3VuZCxcbiAgICAgICAgICAgICAgICAgIFwiU2VydmVyIFN0YXRlXCJcbiAgICAgICAgICAgICAgKTtcbiAgICB9XG5cbiAgICBsZXQgZGVjb2RlZFNlcnZlclJlc3BvbnNlU3RhdGU6IHN0cmluZztcbiAgICBsZXQgZGVjb2RlZFJlcXVlc3RTdGF0ZTogc3RyaW5nO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgZGVjb2RlZFNlcnZlclJlc3BvbnNlU3RhdGUgPSBkZWNvZGVVUklDb21wb25lbnQoc2VydmVyUmVzcG9uc2Uuc3RhdGUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKFxuICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZFN0YXRlLFxuICAgICAgICAgICAgc2VydmVyUmVzcG9uc2Uuc3RhdGVcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgICBkZWNvZGVkUmVxdWVzdFN0YXRlID0gZGVjb2RlVVJJQ29tcG9uZW50KHJlcXVlc3RTdGF0ZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy5pbnZhbGlkU3RhdGUsXG4gICAgICAgICAgICBzZXJ2ZXJSZXNwb25zZS5zdGF0ZVxuICAgICAgICApO1xuICAgIH1cblxuICAgIGlmIChkZWNvZGVkU2VydmVyUmVzcG9uc2VTdGF0ZSAhPT0gZGVjb2RlZFJlcXVlc3RTdGF0ZSkge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMuc3RhdGVNaXNtYXRjaCk7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIGVycm9yXG4gICAgaWYgKFxuICAgICAgICBzZXJ2ZXJSZXNwb25zZS5lcnJvciB8fFxuICAgICAgICBzZXJ2ZXJSZXNwb25zZS5lcnJvcl9kZXNjcmlwdGlvbiB8fFxuICAgICAgICBzZXJ2ZXJSZXNwb25zZS5zdWJlcnJvclxuICAgICkge1xuICAgICAgICBjb25zdCBzZXJ2ZXJFcnJvck5vID0gcGFyc2VTZXJ2ZXJFcnJvck5vKHNlcnZlclJlc3BvbnNlKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgaXNJbnRlcmFjdGlvblJlcXVpcmVkRXJyb3IoXG4gICAgICAgICAgICAgICAgc2VydmVyUmVzcG9uc2UuZXJyb3IsXG4gICAgICAgICAgICAgICAgc2VydmVyUmVzcG9uc2UuZXJyb3JfZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgc2VydmVyUmVzcG9uc2Uuc3ViZXJyb3JcbiAgICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvcihcbiAgICAgICAgICAgICAgICBzZXJ2ZXJSZXNwb25zZS5lcnJvciB8fCBcIlwiLFxuICAgICAgICAgICAgICAgIHNlcnZlclJlc3BvbnNlLmVycm9yX2Rlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgIHNlcnZlclJlc3BvbnNlLnN1YmVycm9yLFxuICAgICAgICAgICAgICAgIHNlcnZlclJlc3BvbnNlLnRpbWVzdGFtcCB8fCBcIlwiLFxuICAgICAgICAgICAgICAgIHNlcnZlclJlc3BvbnNlLnRyYWNlX2lkIHx8IFwiXCIsXG4gICAgICAgICAgICAgICAgc2VydmVyUmVzcG9uc2UuY29ycmVsYXRpb25faWQgfHwgXCJcIixcbiAgICAgICAgICAgICAgICBzZXJ2ZXJSZXNwb25zZS5jbGFpbXMgfHwgXCJcIixcbiAgICAgICAgICAgICAgICBzZXJ2ZXJFcnJvck5vXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhyb3cgbmV3IFNlcnZlckVycm9yKFxuICAgICAgICAgICAgc2VydmVyUmVzcG9uc2UuZXJyb3IgfHwgXCJcIixcbiAgICAgICAgICAgIHNlcnZlclJlc3BvbnNlLmVycm9yX2Rlc2NyaXB0aW9uLFxuICAgICAgICAgICAgc2VydmVyUmVzcG9uc2Uuc3ViZXJyb3IsXG4gICAgICAgICAgICBzZXJ2ZXJFcnJvck5vXG4gICAgICAgICk7XG4gICAgfVxufVxuXG4vKipcbiAqIEdldCBzZXJ2ZXIgZXJyb3IgTm8gZnJvbSB0aGUgZXJyb3JfdXJpXG4gKiBAcGFyYW0gc2VydmVyUmVzcG9uc2VcbiAqIEByZXR1cm5zXG4gKi9cbmZ1bmN0aW9uIHBhcnNlU2VydmVyRXJyb3JObyhcbiAgICBzZXJ2ZXJSZXNwb25zZTogQXV0aG9yaXplUmVzcG9uc2Vcbik6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgZXJyb3JDb2RlUHJlZml4ID0gXCJjb2RlPVwiO1xuICAgIGNvbnN0IGVycm9yQ29kZVByZWZpeEluZGV4ID1cbiAgICAgICAgc2VydmVyUmVzcG9uc2UuZXJyb3JfdXJpPy5sYXN0SW5kZXhPZihlcnJvckNvZGVQcmVmaXgpO1xuICAgIHJldHVybiBlcnJvckNvZGVQcmVmaXhJbmRleCAmJiBlcnJvckNvZGVQcmVmaXhJbmRleCA+PSAwXG4gICAgICAgID8gc2VydmVyUmVzcG9uc2UuZXJyb3JfdXJpPy5zdWJzdHJpbmcoXG4gICAgICAgICAgICAgIGVycm9yQ29kZVByZWZpeEluZGV4ICsgZXJyb3JDb2RlUHJlZml4Lmxlbmd0aFxuICAgICAgICAgIClcbiAgICAgICAgOiB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBzaWQgZnJvbSBhY2NvdW50LiBSZXR1cm5zIG51bGwgaWYgaWRUb2tlbkNsYWltcyBhcmUgbm90IHByZXNlbnQgb3Igc2lkIGlzIG5vdCBwcmVzZW50LlxuICogQHBhcmFtIGFjY291bnRcbiAqL1xuZnVuY3Rpb24gZXh0cmFjdEFjY291bnRTaWQoYWNjb3VudDogQWNjb3VudEluZm8pOiBzdHJpbmcgfCBudWxsIHtcbiAgICByZXR1cm4gYWNjb3VudC5pZFRva2VuQ2xhaW1zPy5zaWQgfHwgbnVsbDtcbn1cblxuZnVuY3Rpb24gZXh0cmFjdExvZ2luSGludChhY2NvdW50OiBBY2NvdW50SW5mbyk6IHN0cmluZyB8IG51bGwge1xuICAgIHJldHVybiBhY2NvdW50LmlkVG9rZW5DbGFpbXM/LmxvZ2luX2hpbnQgfHwgbnVsbDtcbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgICBTRVJWRVJfVEVMRU1fQ09OU1RBTlRTLFxuICAgIFNlcGFyYXRvcnMsXG4gICAgQ2FjaGVPdXRjb21lLFxuICAgIENvbnN0YW50cyxcbiAgICBSZWdpb25EaXNjb3ZlcnlTb3VyY2VzLFxuICAgIFJlZ2lvbkRpc2NvdmVyeU91dGNvbWVzLFxufSBmcm9tIFwiLi4vLi4vdXRpbHMvQ29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBDYWNoZU1hbmFnZXIgfSBmcm9tIFwiLi4vLi4vY2FjaGUvQ2FjaGVNYW5hZ2VyLmpzXCI7XG5pbXBvcnQgeyBBdXRoRXJyb3IgfSBmcm9tIFwiLi4vLi4vZXJyb3IvQXV0aEVycm9yLmpzXCI7XG5pbXBvcnQgeyBTZXJ2ZXJUZWxlbWV0cnlSZXF1ZXN0IH0gZnJvbSBcIi4vU2VydmVyVGVsZW1ldHJ5UmVxdWVzdC5qc1wiO1xuaW1wb3J0IHsgU2VydmVyVGVsZW1ldHJ5RW50aXR5IH0gZnJvbSBcIi4uLy4uL2NhY2hlL2VudGl0aWVzL1NlcnZlclRlbGVtZXRyeUVudGl0eS5qc1wiO1xuaW1wb3J0IHsgUmVnaW9uRGlzY292ZXJ5TWV0YWRhdGEgfSBmcm9tIFwiLi4vLi4vYXV0aG9yaXR5L1JlZ2lvbkRpc2NvdmVyeU1ldGFkYXRhLmpzXCI7XG5cbmNvbnN0IHNrdUdyb3VwU2VwYXJhdG9yID0gXCIsXCI7XG5jb25zdCBza3VWYWx1ZVNlcGFyYXRvciA9IFwifFwiO1xuXG50eXBlIFNrdVBhcmFtcyA9IHtcbiAgICBsaWJyYXJ5TmFtZT86IHN0cmluZztcbiAgICBsaWJyYXJ5VmVyc2lvbj86IHN0cmluZztcbiAgICBleHRlbnNpb25OYW1lPzogc3RyaW5nO1xuICAgIGV4dGVuc2lvblZlcnNpb24/OiBzdHJpbmc7XG4gICAgc2t1cz86IHN0cmluZztcbn07XG5cbmZ1bmN0aW9uIG1ha2VFeHRyYVNrdVN0cmluZyhwYXJhbXM6IFNrdVBhcmFtcyk6IHN0cmluZyB7XG4gICAgY29uc3Qge1xuICAgICAgICBza3VzLFxuICAgICAgICBsaWJyYXJ5TmFtZSxcbiAgICAgICAgbGlicmFyeVZlcnNpb24sXG4gICAgICAgIGV4dGVuc2lvbk5hbWUsXG4gICAgICAgIGV4dGVuc2lvblZlcnNpb24sXG4gICAgfSA9IHBhcmFtcztcbiAgICBjb25zdCBza3VNYXA6IE1hcDxudW1iZXIsIChzdHJpbmcgfCB1bmRlZmluZWQpW10+ID0gbmV3IE1hcChbXG4gICAgICAgIFswLCBbbGlicmFyeU5hbWUsIGxpYnJhcnlWZXJzaW9uXV0sXG4gICAgICAgIFsyLCBbZXh0ZW5zaW9uTmFtZSwgZXh0ZW5zaW9uVmVyc2lvbl1dLFxuICAgIF0pO1xuICAgIGxldCBza3VBcnI6IHN0cmluZ1tdID0gW107XG5cbiAgICBpZiAoc2t1cz8ubGVuZ3RoKSB7XG4gICAgICAgIHNrdUFyciA9IHNrdXMuc3BsaXQoc2t1R3JvdXBTZXBhcmF0b3IpO1xuXG4gICAgICAgIC8vIElnbm9yZSBpbnZhbGlkIGlucHV0IHNrdSBwYXJhbVxuICAgICAgICBpZiAoc2t1QXJyLmxlbmd0aCA8IDQpIHtcbiAgICAgICAgICAgIHJldHVybiBza3VzO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc2t1QXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogNCB9LCAoKSA9PiBza3VWYWx1ZVNlcGFyYXRvcik7XG4gICAgfVxuXG4gICAgc2t1TWFwLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcbiAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMiAmJiB2YWx1ZVswXT8ubGVuZ3RoICYmIHZhbHVlWzFdPy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHNldFNrdSh7XG4gICAgICAgICAgICAgICAgc2t1QXJyLFxuICAgICAgICAgICAgICAgIGluZGV4OiBrZXksXG4gICAgICAgICAgICAgICAgc2t1TmFtZTogdmFsdWVbMF0sXG4gICAgICAgICAgICAgICAgc2t1VmVyc2lvbjogdmFsdWVbMV0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHNrdUFyci5qb2luKHNrdUdyb3VwU2VwYXJhdG9yKTtcbn1cblxuZnVuY3Rpb24gc2V0U2t1KHBhcmFtczoge1xuICAgIHNrdUFycjogc3RyaW5nW107XG4gICAgaW5kZXg6IG51bWJlcjtcbiAgICBza3VOYW1lOiBzdHJpbmc7XG4gICAgc2t1VmVyc2lvbjogc3RyaW5nO1xufSk6IHZvaWQge1xuICAgIGNvbnN0IHsgc2t1QXJyLCBpbmRleCwgc2t1TmFtZSwgc2t1VmVyc2lvbiB9ID0gcGFyYW1zO1xuICAgIGlmIChpbmRleCA+PSBza3VBcnIubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2t1QXJyW2luZGV4XSA9IFtza3VOYW1lLCBza3VWZXJzaW9uXS5qb2luKHNrdVZhbHVlU2VwYXJhdG9yKTtcbn1cblxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGNsYXNzIFNlcnZlclRlbGVtZXRyeU1hbmFnZXIge1xuICAgIHByaXZhdGUgY2FjaGVNYW5hZ2VyOiBDYWNoZU1hbmFnZXI7XG4gICAgcHJpdmF0ZSBhcGlJZDogbnVtYmVyO1xuICAgIHByaXZhdGUgY29ycmVsYXRpb25JZDogc3RyaW5nO1xuICAgIHByaXZhdGUgdGVsZW1ldHJ5Q2FjaGVLZXk6IHN0cmluZztcbiAgICBwcml2YXRlIHdyYXBwZXJTS1U6IFN0cmluZztcbiAgICBwcml2YXRlIHdyYXBwZXJWZXI6IFN0cmluZztcbiAgICBwcml2YXRlIHJlZ2lvblVzZWQ6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBwcml2YXRlIHJlZ2lvblNvdXJjZTogUmVnaW9uRGlzY292ZXJ5U291cmNlcyB8IHVuZGVmaW5lZDtcbiAgICBwcml2YXRlIHJlZ2lvbk91dGNvbWU6IFJlZ2lvbkRpc2NvdmVyeU91dGNvbWVzIHwgdW5kZWZpbmVkO1xuICAgIHByaXZhdGUgY2FjaGVPdXRjb21lOiBDYWNoZU91dGNvbWUgPSBDYWNoZU91dGNvbWUuTk9UX0FQUExJQ0FCTEU7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgdGVsZW1ldHJ5UmVxdWVzdDogU2VydmVyVGVsZW1ldHJ5UmVxdWVzdCxcbiAgICAgICAgY2FjaGVNYW5hZ2VyOiBDYWNoZU1hbmFnZXJcbiAgICApIHtcbiAgICAgICAgdGhpcy5jYWNoZU1hbmFnZXIgPSBjYWNoZU1hbmFnZXI7XG4gICAgICAgIHRoaXMuYXBpSWQgPSB0ZWxlbWV0cnlSZXF1ZXN0LmFwaUlkO1xuICAgICAgICB0aGlzLmNvcnJlbGF0aW9uSWQgPSB0ZWxlbWV0cnlSZXF1ZXN0LmNvcnJlbGF0aW9uSWQ7XG4gICAgICAgIHRoaXMud3JhcHBlclNLVSA9IHRlbGVtZXRyeVJlcXVlc3Qud3JhcHBlclNLVSB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HO1xuICAgICAgICB0aGlzLndyYXBwZXJWZXIgPSB0ZWxlbWV0cnlSZXF1ZXN0LndyYXBwZXJWZXIgfHwgQ29uc3RhbnRzLkVNUFRZX1NUUklORztcblxuICAgICAgICB0aGlzLnRlbGVtZXRyeUNhY2hlS2V5ID1cbiAgICAgICAgICAgIFNFUlZFUl9URUxFTV9DT05TVEFOVFMuQ0FDSEVfS0VZICtcbiAgICAgICAgICAgIFNlcGFyYXRvcnMuQ0FDSEVfS0VZX1NFUEFSQVRPUiArXG4gICAgICAgICAgICB0ZWxlbWV0cnlSZXF1ZXN0LmNsaWVudElkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFQSSB0byBhZGQgTVNFUiBUZWxlbWV0cnkgdG8gcmVxdWVzdFxuICAgICAqL1xuICAgIGdlbmVyYXRlQ3VycmVudFJlcXVlc3RIZWFkZXJWYWx1ZSgpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCByZXF1ZXN0ID0gYCR7dGhpcy5hcGlJZH0ke1NFUlZFUl9URUxFTV9DT05TVEFOVFMuVkFMVUVfU0VQQVJBVE9SfSR7dGhpcy5jYWNoZU91dGNvbWV9YDtcbiAgICAgICAgY29uc3QgcGxhdGZvcm1GaWVsZHNBcnIgPSBbdGhpcy53cmFwcGVyU0tVLCB0aGlzLndyYXBwZXJWZXJdO1xuICAgICAgICBjb25zdCBuYXRpdmVCcm9rZXJFcnJvckNvZGUgPSB0aGlzLmdldE5hdGl2ZUJyb2tlckVycm9yQ29kZSgpO1xuICAgICAgICBpZiAobmF0aXZlQnJva2VyRXJyb3JDb2RlPy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHBsYXRmb3JtRmllbGRzQXJyLnB1c2goYGJyb2tlcl9lcnJvcj0ke25hdGl2ZUJyb2tlckVycm9yQ29kZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwbGF0Zm9ybUZpZWxkcyA9IHBsYXRmb3JtRmllbGRzQXJyLmpvaW4oXG4gICAgICAgICAgICBTRVJWRVJfVEVMRU1fQ09OU1RBTlRTLlZBTFVFX1NFUEFSQVRPUlxuICAgICAgICApO1xuICAgICAgICBjb25zdCByZWdpb25EaXNjb3ZlcnlGaWVsZHMgPSB0aGlzLmdldFJlZ2lvbkRpc2NvdmVyeUZpZWxkcygpO1xuICAgICAgICBjb25zdCByZXF1ZXN0V2l0aFJlZ2lvbkRpc2NvdmVyeUZpZWxkcyA9IFtcbiAgICAgICAgICAgIHJlcXVlc3QsXG4gICAgICAgICAgICByZWdpb25EaXNjb3ZlcnlGaWVsZHMsXG4gICAgICAgIF0uam9pbihTRVJWRVJfVEVMRU1fQ09OU1RBTlRTLlZBTFVFX1NFUEFSQVRPUik7XG5cbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFNFUlZFUl9URUxFTV9DT05TVEFOVFMuU0NIRU1BX1ZFUlNJT04sXG4gICAgICAgICAgICByZXF1ZXN0V2l0aFJlZ2lvbkRpc2NvdmVyeUZpZWxkcyxcbiAgICAgICAgICAgIHBsYXRmb3JtRmllbGRzLFxuICAgICAgICBdLmpvaW4oU0VSVkVSX1RFTEVNX0NPTlNUQU5UUy5DQVRFR09SWV9TRVBBUkFUT1IpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFQSSB0byBhZGQgTVNFUiBUZWxlbWV0cnkgZm9yIHRoZSBsYXN0IGZhaWxlZCByZXF1ZXN0XG4gICAgICovXG4gICAgZ2VuZXJhdGVMYXN0UmVxdWVzdEhlYWRlclZhbHVlKCk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGxhc3RSZXF1ZXN0cyA9IHRoaXMuZ2V0TGFzdFJlcXVlc3RzKCk7XG5cbiAgICAgICAgY29uc3QgbWF4RXJyb3JzID0gU2VydmVyVGVsZW1ldHJ5TWFuYWdlci5tYXhFcnJvcnNUb1NlbmQobGFzdFJlcXVlc3RzKTtcbiAgICAgICAgY29uc3QgZmFpbGVkUmVxdWVzdHMgPSBsYXN0UmVxdWVzdHMuZmFpbGVkUmVxdWVzdHNcbiAgICAgICAgICAgIC5zbGljZSgwLCAyICogbWF4RXJyb3JzKVxuICAgICAgICAgICAgLmpvaW4oU0VSVkVSX1RFTEVNX0NPTlNUQU5UUy5WQUxVRV9TRVBBUkFUT1IpO1xuICAgICAgICBjb25zdCBlcnJvcnMgPSBsYXN0UmVxdWVzdHMuZXJyb3JzXG4gICAgICAgICAgICAuc2xpY2UoMCwgbWF4RXJyb3JzKVxuICAgICAgICAgICAgLmpvaW4oU0VSVkVSX1RFTEVNX0NPTlNUQU5UUy5WQUxVRV9TRVBBUkFUT1IpO1xuICAgICAgICBjb25zdCBlcnJvckNvdW50ID0gbGFzdFJlcXVlc3RzLmVycm9ycy5sZW5ndGg7XG5cbiAgICAgICAgLy8gSW5kaWNhdGUgd2hldGhlciB0aGlzIGhlYWRlciBjb250YWlucyBhbGwgZGF0YSBvciBwYXJ0aWFsIGRhdGFcbiAgICAgICAgY29uc3Qgb3ZlcmZsb3cgPVxuICAgICAgICAgICAgbWF4RXJyb3JzIDwgZXJyb3JDb3VudFxuICAgICAgICAgICAgICAgID8gU0VSVkVSX1RFTEVNX0NPTlNUQU5UUy5PVkVSRkxPV19UUlVFXG4gICAgICAgICAgICAgICAgOiBTRVJWRVJfVEVMRU1fQ09OU1RBTlRTLk9WRVJGTE9XX0ZBTFNFO1xuICAgICAgICBjb25zdCBwbGF0Zm9ybUZpZWxkcyA9IFtlcnJvckNvdW50LCBvdmVyZmxvd10uam9pbihcbiAgICAgICAgICAgIFNFUlZFUl9URUxFTV9DT05TVEFOVFMuVkFMVUVfU0VQQVJBVE9SXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFNFUlZFUl9URUxFTV9DT05TVEFOVFMuU0NIRU1BX1ZFUlNJT04sXG4gICAgICAgICAgICBsYXN0UmVxdWVzdHMuY2FjaGVIaXRzLFxuICAgICAgICAgICAgZmFpbGVkUmVxdWVzdHMsXG4gICAgICAgICAgICBlcnJvcnMsXG4gICAgICAgICAgICBwbGF0Zm9ybUZpZWxkcyxcbiAgICAgICAgXS5qb2luKFNFUlZFUl9URUxFTV9DT05TVEFOVFMuQ0FURUdPUllfU0VQQVJBVE9SKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBUEkgdG8gY2FjaGUgdG9rZW4gZmFpbHVyZXMgZm9yIE1TRVIgZGF0YSBjYXB0dXJlXG4gICAgICogQHBhcmFtIGVycm9yXG4gICAgICovXG4gICAgY2FjaGVGYWlsZWRSZXF1ZXN0KGVycm9yOiB1bmtub3duKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGxhc3RSZXF1ZXN0cyA9IHRoaXMuZ2V0TGFzdFJlcXVlc3RzKCk7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGxhc3RSZXF1ZXN0cy5lcnJvcnMubGVuZ3RoID49XG4gICAgICAgICAgICBTRVJWRVJfVEVMRU1fQ09OU1RBTlRTLk1BWF9DQUNIRURfRVJST1JTXG4gICAgICAgICkge1xuICAgICAgICAgICAgLy8gUmVtb3ZlIGEgY2FjaGVkIGVycm9yIHRvIG1ha2Ugcm9vbSwgZmlyc3QgaW4gZmlyc3Qgb3V0XG4gICAgICAgICAgICBsYXN0UmVxdWVzdHMuZmFpbGVkUmVxdWVzdHMuc2hpZnQoKTsgLy8gYXBpSWRcbiAgICAgICAgICAgIGxhc3RSZXF1ZXN0cy5mYWlsZWRSZXF1ZXN0cy5zaGlmdCgpOyAvLyBjb3JyZWxhdGlvbklkXG4gICAgICAgICAgICBsYXN0UmVxdWVzdHMuZXJyb3JzLnNoaWZ0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBsYXN0UmVxdWVzdHMuZmFpbGVkUmVxdWVzdHMucHVzaCh0aGlzLmFwaUlkLCB0aGlzLmNvcnJlbGF0aW9uSWQpO1xuXG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmICEhZXJyb3IgJiYgZXJyb3IudG9TdHJpbmcoKSkge1xuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgQXV0aEVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLnN1YkVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhc3RSZXF1ZXN0cy5lcnJvcnMucHVzaChlcnJvci5zdWJFcnJvcik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlcnJvci5lcnJvckNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFzdFJlcXVlc3RzLmVycm9ycy5wdXNoKGVycm9yLmVycm9yQ29kZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGFzdFJlcXVlc3RzLmVycm9ycy5wdXNoKGVycm9yLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGFzdFJlcXVlc3RzLmVycm9ycy5wdXNoKGVycm9yLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGFzdFJlcXVlc3RzLmVycm9ycy5wdXNoKFNFUlZFUl9URUxFTV9DT05TVEFOVFMuVU5LTk9XTl9FUlJPUik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNhY2hlTWFuYWdlci5zZXRTZXJ2ZXJUZWxlbWV0cnkoXG4gICAgICAgICAgICB0aGlzLnRlbGVtZXRyeUNhY2hlS2V5LFxuICAgICAgICAgICAgbGFzdFJlcXVlc3RzXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBzZXJ2ZXIgdGVsZW1ldHJ5IGNhY2hlIGVudHJ5IGJ5IGluY3JlbWVudGluZyBjYWNoZSBoaXQgY291bnRlclxuICAgICAqL1xuICAgIGluY3JlbWVudENhY2hlSGl0cygpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBsYXN0UmVxdWVzdHMgPSB0aGlzLmdldExhc3RSZXF1ZXN0cygpO1xuICAgICAgICBsYXN0UmVxdWVzdHMuY2FjaGVIaXRzICs9IDE7XG5cbiAgICAgICAgdGhpcy5jYWNoZU1hbmFnZXIuc2V0U2VydmVyVGVsZW1ldHJ5KFxuICAgICAgICAgICAgdGhpcy50ZWxlbWV0cnlDYWNoZUtleSxcbiAgICAgICAgICAgIGxhc3RSZXF1ZXN0c1xuICAgICAgICApO1xuICAgICAgICByZXR1cm4gbGFzdFJlcXVlc3RzLmNhY2hlSGl0cztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHNlcnZlciB0ZWxlbWV0cnkgZW50aXR5IGZyb20gY2FjaGUgb3IgaW5pdGlhbGl6ZSBhIG5ldyBvbmVcbiAgICAgKi9cbiAgICBnZXRMYXN0UmVxdWVzdHMoKTogU2VydmVyVGVsZW1ldHJ5RW50aXR5IHtcbiAgICAgICAgY29uc3QgaW5pdGlhbFZhbHVlOiBTZXJ2ZXJUZWxlbWV0cnlFbnRpdHkgPSB7XG4gICAgICAgICAgICBmYWlsZWRSZXF1ZXN0czogW10sXG4gICAgICAgICAgICBlcnJvcnM6IFtdLFxuICAgICAgICAgICAgY2FjaGVIaXRzOiAwLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBsYXN0UmVxdWVzdHMgPSB0aGlzLmNhY2hlTWFuYWdlci5nZXRTZXJ2ZXJUZWxlbWV0cnkoXG4gICAgICAgICAgICB0aGlzLnRlbGVtZXRyeUNhY2hlS2V5XG4gICAgICAgICkgYXMgU2VydmVyVGVsZW1ldHJ5RW50aXR5O1xuXG4gICAgICAgIHJldHVybiBsYXN0UmVxdWVzdHMgfHwgaW5pdGlhbFZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBzZXJ2ZXIgdGVsZW1ldHJ5IGNhY2hlIGVudHJ5XG4gICAgICovXG4gICAgY2xlYXJUZWxlbWV0cnlDYWNoZSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgbGFzdFJlcXVlc3RzID0gdGhpcy5nZXRMYXN0UmVxdWVzdHMoKTtcbiAgICAgICAgY29uc3QgbnVtRXJyb3JzRmx1c2hlZCA9XG4gICAgICAgICAgICBTZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyLm1heEVycm9yc1RvU2VuZChsYXN0UmVxdWVzdHMpO1xuICAgICAgICBjb25zdCBlcnJvckNvdW50ID0gbGFzdFJlcXVlc3RzLmVycm9ycy5sZW5ndGg7XG4gICAgICAgIGlmIChudW1FcnJvcnNGbHVzaGVkID09PSBlcnJvckNvdW50KSB7XG4gICAgICAgICAgICAvLyBBbGwgZXJyb3JzIHdlcmUgc2VudCBvbiBsYXN0IHJlcXVlc3QsIGNsZWFyIFRlbGVtZXRyeSBjYWNoZVxuICAgICAgICAgICAgdGhpcy5jYWNoZU1hbmFnZXIucmVtb3ZlSXRlbSh0aGlzLnRlbGVtZXRyeUNhY2hlS2V5KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFBhcnRpYWwgZGF0YSB3YXMgZmx1c2hlZCB0byBzZXJ2ZXIsIGNvbnN0cnVjdCBhIG5ldyB0ZWxlbWV0cnkgY2FjaGUgaXRlbSB3aXRoIGVycm9ycyB0aGF0IHdlcmUgbm90IGZsdXNoZWRcbiAgICAgICAgICAgIGNvbnN0IHNlcnZlclRlbGVtRW50aXR5OiBTZXJ2ZXJUZWxlbWV0cnlFbnRpdHkgPSB7XG4gICAgICAgICAgICAgICAgZmFpbGVkUmVxdWVzdHM6IGxhc3RSZXF1ZXN0cy5mYWlsZWRSZXF1ZXN0cy5zbGljZShcbiAgICAgICAgICAgICAgICAgICAgbnVtRXJyb3JzRmx1c2hlZCAqIDJcbiAgICAgICAgICAgICAgICApLCAvLyBmYWlsZWRSZXF1ZXN0cyBjb250YWlucyAyIGl0ZW1zIGZvciBlYWNoIGVycm9yXG4gICAgICAgICAgICAgICAgZXJyb3JzOiBsYXN0UmVxdWVzdHMuZXJyb3JzLnNsaWNlKG51bUVycm9yc0ZsdXNoZWQpLFxuICAgICAgICAgICAgICAgIGNhY2hlSGl0czogMCxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMuY2FjaGVNYW5hZ2VyLnNldFNlcnZlclRlbGVtZXRyeShcbiAgICAgICAgICAgICAgICB0aGlzLnRlbGVtZXRyeUNhY2hlS2V5LFxuICAgICAgICAgICAgICAgIHNlcnZlclRlbGVtRW50aXR5XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbWF4aW11bSBudW1iZXIgb2YgZXJyb3JzIHRoYXQgY2FuIGJlIGZsdXNoZWQgdG8gdGhlIHNlcnZlciBpbiB0aGUgbmV4dCBuZXR3b3JrIHJlcXVlc3RcbiAgICAgKiBAcGFyYW0gc2VydmVyVGVsZW1ldHJ5RW50aXR5XG4gICAgICovXG4gICAgc3RhdGljIG1heEVycm9yc1RvU2VuZChcbiAgICAgICAgc2VydmVyVGVsZW1ldHJ5RW50aXR5OiBTZXJ2ZXJUZWxlbWV0cnlFbnRpdHlcbiAgICApOiBudW1iZXIge1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgbGV0IG1heEVycm9ycyA9IDA7XG4gICAgICAgIGxldCBkYXRhU2l6ZSA9IDA7XG4gICAgICAgIGNvbnN0IGVycm9yQ291bnQgPSBzZXJ2ZXJUZWxlbWV0cnlFbnRpdHkuZXJyb3JzLmxlbmd0aDtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGVycm9yQ291bnQ7IGkrKykge1xuICAgICAgICAgICAgLy8gZmFpbGVkUmVxdWVzdHMgcGFyYW1ldGVyIGNvbnRhaW5zIHBhaXJzIG9mIGFwaUlkIGFuZCBjb3JyZWxhdGlvbklkLCBtdWx0aXBseSBpbmRleCBieSAyIHRvIHByZXNlcnZlIHBhaXJzXG4gICAgICAgICAgICBjb25zdCBhcGlJZCA9XG4gICAgICAgICAgICAgICAgc2VydmVyVGVsZW1ldHJ5RW50aXR5LmZhaWxlZFJlcXVlc3RzWzIgKiBpXSB8fFxuICAgICAgICAgICAgICAgIENvbnN0YW50cy5FTVBUWV9TVFJJTkc7XG4gICAgICAgICAgICBjb25zdCBjb3JyZWxhdGlvbklkID1cbiAgICAgICAgICAgICAgICBzZXJ2ZXJUZWxlbWV0cnlFbnRpdHkuZmFpbGVkUmVxdWVzdHNbMiAqIGkgKyAxXSB8fFxuICAgICAgICAgICAgICAgIENvbnN0YW50cy5FTVBUWV9TVFJJTkc7XG4gICAgICAgICAgICBjb25zdCBlcnJvckNvZGUgPVxuICAgICAgICAgICAgICAgIHNlcnZlclRlbGVtZXRyeUVudGl0eS5lcnJvcnNbaV0gfHwgQ29uc3RhbnRzLkVNUFRZX1NUUklORztcblxuICAgICAgICAgICAgLy8gQ291bnQgbnVtYmVyIG9mIGNoYXJhY3RlcnMgdGhhdCB3b3VsZCBiZSBhZGRlZCB0byBoZWFkZXIsIGVhY2ggY2hhcmFjdGVyIGlzIDEgYnl0ZS4gQWRkIDMgYXQgdGhlIGVuZCB0byBhY2NvdW50IGZvciBzZXBhcmF0b3JzXG4gICAgICAgICAgICBkYXRhU2l6ZSArPVxuICAgICAgICAgICAgICAgIGFwaUlkLnRvU3RyaW5nKCkubGVuZ3RoICtcbiAgICAgICAgICAgICAgICBjb3JyZWxhdGlvbklkLnRvU3RyaW5nKCkubGVuZ3RoICtcbiAgICAgICAgICAgICAgICBlcnJvckNvZGUubGVuZ3RoICtcbiAgICAgICAgICAgICAgICAzO1xuXG4gICAgICAgICAgICBpZiAoZGF0YVNpemUgPCBTRVJWRVJfVEVMRU1fQ09OU1RBTlRTLk1BWF9MQVNUX0hFQURFUl9CWVRFUykge1xuICAgICAgICAgICAgICAgIC8vIEFkZGluZyB0aGlzIGVudHJ5IHRvIHRoZSBoZWFkZXIgd291bGQgc3RpbGwga2VlcCBoZWFkZXIgc2l6ZSBiZWxvdyB0aGUgbGltaXRcbiAgICAgICAgICAgICAgICBtYXhFcnJvcnMgKz0gMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbWF4RXJyb3JzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcmVnaW9uIGRpc2NvdmVyeSBmaWVsZHNcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHN0cmluZ1xuICAgICAqL1xuICAgIGdldFJlZ2lvbkRpc2NvdmVyeUZpZWxkcygpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCByZWdpb25EaXNjb3ZlcnlGaWVsZHM6IHN0cmluZ1tdID0gW107XG5cbiAgICAgICAgcmVnaW9uRGlzY292ZXJ5RmllbGRzLnB1c2godGhpcy5yZWdpb25Vc2VkIHx8IENvbnN0YW50cy5FTVBUWV9TVFJJTkcpO1xuICAgICAgICByZWdpb25EaXNjb3ZlcnlGaWVsZHMucHVzaCh0aGlzLnJlZ2lvblNvdXJjZSB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HKTtcbiAgICAgICAgcmVnaW9uRGlzY292ZXJ5RmllbGRzLnB1c2goXG4gICAgICAgICAgICB0aGlzLnJlZ2lvbk91dGNvbWUgfHwgQ29uc3RhbnRzLkVNUFRZX1NUUklOR1xuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiByZWdpb25EaXNjb3ZlcnlGaWVsZHMuam9pbihcIixcIik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSByZWdpb24gZGlzY292ZXJ5IG1ldGFkYXRhXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcmVnaW9uRGlzY292ZXJ5TWV0YWRhdGFcbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgdXBkYXRlUmVnaW9uRGlzY292ZXJ5TWV0YWRhdGEoXG4gICAgICAgIHJlZ2lvbkRpc2NvdmVyeU1ldGFkYXRhOiBSZWdpb25EaXNjb3ZlcnlNZXRhZGF0YVxuICAgICk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlZ2lvblVzZWQgPSByZWdpb25EaXNjb3ZlcnlNZXRhZGF0YS5yZWdpb25fdXNlZDtcbiAgICAgICAgdGhpcy5yZWdpb25Tb3VyY2UgPSByZWdpb25EaXNjb3ZlcnlNZXRhZGF0YS5yZWdpb25fc291cmNlO1xuICAgICAgICB0aGlzLnJlZ2lvbk91dGNvbWUgPSByZWdpb25EaXNjb3ZlcnlNZXRhZGF0YS5yZWdpb25fb3V0Y29tZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgY2FjaGUgb3V0Y29tZVxuICAgICAqL1xuICAgIHNldENhY2hlT3V0Y29tZShjYWNoZU91dGNvbWU6IENhY2hlT3V0Y29tZSk6IHZvaWQge1xuICAgICAgICB0aGlzLmNhY2hlT3V0Y29tZSA9IGNhY2hlT3V0Y29tZTtcbiAgICB9XG5cbiAgICBzZXROYXRpdmVCcm9rZXJFcnJvckNvZGUoZXJyb3JDb2RlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgbGFzdFJlcXVlc3RzID0gdGhpcy5nZXRMYXN0UmVxdWVzdHMoKTtcbiAgICAgICAgbGFzdFJlcXVlc3RzLm5hdGl2ZUJyb2tlckVycm9yQ29kZSA9IGVycm9yQ29kZTtcbiAgICAgICAgdGhpcy5jYWNoZU1hbmFnZXIuc2V0U2VydmVyVGVsZW1ldHJ5KFxuICAgICAgICAgICAgdGhpcy50ZWxlbWV0cnlDYWNoZUtleSxcbiAgICAgICAgICAgIGxhc3RSZXF1ZXN0c1xuICAgICAgICApO1xuICAgIH1cblxuICAgIGdldE5hdGl2ZUJyb2tlckVycm9yQ29kZSgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRMYXN0UmVxdWVzdHMoKS5uYXRpdmVCcm9rZXJFcnJvckNvZGU7XG4gICAgfVxuXG4gICAgY2xlYXJOYXRpdmVCcm9rZXJFcnJvckNvZGUoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGxhc3RSZXF1ZXN0cyA9IHRoaXMuZ2V0TGFzdFJlcXVlc3RzKCk7XG4gICAgICAgIGRlbGV0ZSBsYXN0UmVxdWVzdHMubmF0aXZlQnJva2VyRXJyb3JDb2RlO1xuICAgICAgICB0aGlzLmNhY2hlTWFuYWdlci5zZXRTZXJ2ZXJUZWxlbWV0cnkoXG4gICAgICAgICAgICB0aGlzLnRlbGVtZXRyeUNhY2hlS2V5LFxuICAgICAgICAgICAgbGFzdFJlcXVlc3RzXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgc3RhdGljIG1ha2VFeHRyYVNrdVN0cmluZyhwYXJhbXM6IFNrdVBhcmFtcyk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBtYWtlRXh0cmFTa3VTdHJpbmcocGFyYW1zKTtcbiAgICB9XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gICAgQWNjb3VudENhY2hlLFxuICAgIElkVG9rZW5DYWNoZSxcbiAgICBBY2Nlc3NUb2tlbkNhY2hlLFxuICAgIFJlZnJlc2hUb2tlbkNhY2hlLFxuICAgIEFwcE1ldGFkYXRhQ2FjaGUsXG4gICAgQWNjb3VudEVudGl0eSxcbiAgICBJZFRva2VuRW50aXR5LFxuICAgIEFjY2Vzc1Rva2VuRW50aXR5LFxuICAgIFJlZnJlc2hUb2tlbkVudGl0eSxcbiAgICBDYWNoZU1hbmFnZXIsXG4gICAgQ3JlZGVudGlhbFR5cGUsXG4gICAgQXV0aGVudGljYXRpb25TY2hlbWUsXG59IGZyb20gXCJAYXp1cmUvbXNhbC1jb21tb24vbm9kZVwiO1xuaW1wb3J0IHtcbiAgICBKc29uQ2FjaGUsXG4gICAgSW5NZW1vcnlDYWNoZSxcbiAgICBTZXJpYWxpemVkQWNjb3VudEVudGl0eSxcbiAgICBTZXJpYWxpemVkSWRUb2tlbkVudGl0eSxcbiAgICBTZXJpYWxpemVkQWNjZXNzVG9rZW5FbnRpdHksXG4gICAgU2VyaWFsaXplZFJlZnJlc2hUb2tlbkVudGl0eSxcbiAgICBTZXJpYWxpemVkQXBwTWV0YWRhdGFFbnRpdHksXG59IGZyb20gXCIuL1NlcmlhbGl6ZXJUeXBlcy5qc1wiO1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgZGVzZXJpYWxpemVzIGNhY2hlIGVudGl0aWVzIHJlYWQgZnJvbSB0aGUgZmlsZSBpbnRvIGluLW1lbW9yeSBvYmplY3QgdHlwZXMgZGVmaW5lZCBpbnRlcm5hbGx5XG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGNsYXNzIERlc2VyaWFsaXplciB7XG4gICAgLyoqXG4gICAgICogUGFyc2UgdGhlIEpTT04gYmxvYiBpbiBtZW1vcnkgYW5kIGRlc2VyaWFsaXplIHRoZSBjb250ZW50XG4gICAgICogQHBhcmFtIGNhY2hlZEpzb24gLSBKU09OIGJsb2IgY2FjaGVcbiAgICAgKi9cbiAgICBzdGF0aWMgZGVzZXJpYWxpemVKU09OQmxvYihqc29uRmlsZTogc3RyaW5nKTogSnNvbkNhY2hlIHtcbiAgICAgICAgY29uc3QgZGVzZXJpYWxpemVkQ2FjaGUgPSAhanNvbkZpbGUgPyB7fSA6IEpTT04ucGFyc2UoanNvbkZpbGUpO1xuICAgICAgICByZXR1cm4gZGVzZXJpYWxpemVkQ2FjaGU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVzZXJpYWxpemVzIGFjY291bnRzIHRvIEFjY291bnRFbnRpdHkgb2JqZWN0c1xuICAgICAqIEBwYXJhbSBhY2NvdW50cyAtIGFjY291bnRzIG9mIHR5cGUgU2VyaWFsaXplZEFjY291bnRFbnRpdHlcbiAgICAgKi9cbiAgICBzdGF0aWMgZGVzZXJpYWxpemVBY2NvdW50cyhcbiAgICAgICAgYWNjb3VudHM6IFJlY29yZDxzdHJpbmcsIFNlcmlhbGl6ZWRBY2NvdW50RW50aXR5PlxuICAgICk6IEFjY291bnRDYWNoZSB7XG4gICAgICAgIGNvbnN0IGFjY291bnRPYmplY3RzOiBBY2NvdW50Q2FjaGUgPSB7fTtcbiAgICAgICAgaWYgKGFjY291bnRzKSB7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhhY2NvdW50cykubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJpYWxpemVkQWNjID0gYWNjb3VudHNba2V5XTtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXBwZWRBY2MgPSB7XG4gICAgICAgICAgICAgICAgICAgIGhvbWVBY2NvdW50SWQ6IHNlcmlhbGl6ZWRBY2MuaG9tZV9hY2NvdW50X2lkLFxuICAgICAgICAgICAgICAgICAgICBlbnZpcm9ubWVudDogc2VyaWFsaXplZEFjYy5lbnZpcm9ubWVudCxcbiAgICAgICAgICAgICAgICAgICAgcmVhbG06IHNlcmlhbGl6ZWRBY2MucmVhbG0sXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsQWNjb3VudElkOiBzZXJpYWxpemVkQWNjLmxvY2FsX2FjY291bnRfaWQsXG4gICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBzZXJpYWxpemVkQWNjLnVzZXJuYW1lLFxuICAgICAgICAgICAgICAgICAgICBhdXRob3JpdHlUeXBlOiBzZXJpYWxpemVkQWNjLmF1dGhvcml0eV90eXBlLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBzZXJpYWxpemVkQWNjLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGNsaWVudEluZm86IHNlcmlhbGl6ZWRBY2MuY2xpZW50X2luZm8sXG4gICAgICAgICAgICAgICAgICAgIGxhc3RNb2RpZmljYXRpb25UaW1lOiBzZXJpYWxpemVkQWNjLmxhc3RfbW9kaWZpY2F0aW9uX3RpbWUsXG4gICAgICAgICAgICAgICAgICAgIGxhc3RNb2RpZmljYXRpb25BcHA6IHNlcmlhbGl6ZWRBY2MubGFzdF9tb2RpZmljYXRpb25fYXBwLFxuICAgICAgICAgICAgICAgICAgICB0ZW5hbnRQcm9maWxlczogc2VyaWFsaXplZEFjYy50ZW5hbnRQcm9maWxlcz8ubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgKHNlcmlhbGl6ZWRUZW5hbnRQcm9maWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2Uoc2VyaWFsaXplZFRlbmFudFByb2ZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgYWNjb3VudDogQWNjb3VudEVudGl0eSA9IG5ldyBBY2NvdW50RW50aXR5KCk7XG4gICAgICAgICAgICAgICAgQ2FjaGVNYW5hZ2VyLnRvT2JqZWN0KGFjY291bnQsIG1hcHBlZEFjYyk7XG4gICAgICAgICAgICAgICAgYWNjb3VudE9iamVjdHNba2V5XSA9IGFjY291bnQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhY2NvdW50T2JqZWN0cztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXNlcmlhbGl6ZXMgaWQgdG9rZW5zIHRvIElkVG9rZW5FbnRpdHkgb2JqZWN0c1xuICAgICAqIEBwYXJhbSBpZFRva2VucyAtIGNyZWRlbnRpYWxzIG9mIHR5cGUgU2VyaWFsaXplZElkVG9rZW5FbnRpdHlcbiAgICAgKi9cbiAgICBzdGF0aWMgZGVzZXJpYWxpemVJZFRva2VucyhcbiAgICAgICAgaWRUb2tlbnM6IFJlY29yZDxzdHJpbmcsIFNlcmlhbGl6ZWRJZFRva2VuRW50aXR5PlxuICAgICk6IElkVG9rZW5DYWNoZSB7XG4gICAgICAgIGNvbnN0IGlkT2JqZWN0czogSWRUb2tlbkNhY2hlID0ge307XG4gICAgICAgIGlmIChpZFRva2Vucykge1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoaWRUb2tlbnMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VyaWFsaXplZElkVCA9IGlkVG9rZW5zW2tleV07XG4gICAgICAgICAgICAgICAgY29uc3QgaWRUb2tlbjogSWRUb2tlbkVudGl0eSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaG9tZUFjY291bnRJZDogc2VyaWFsaXplZElkVC5ob21lX2FjY291bnRfaWQsXG4gICAgICAgICAgICAgICAgICAgIGVudmlyb25tZW50OiBzZXJpYWxpemVkSWRULmVudmlyb25tZW50LFxuICAgICAgICAgICAgICAgICAgICBjcmVkZW50aWFsVHlwZTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcmlhbGl6ZWRJZFQuY3JlZGVudGlhbF90eXBlIGFzIENyZWRlbnRpYWxUeXBlLFxuICAgICAgICAgICAgICAgICAgICBjbGllbnRJZDogc2VyaWFsaXplZElkVC5jbGllbnRfaWQsXG4gICAgICAgICAgICAgICAgICAgIHNlY3JldDogc2VyaWFsaXplZElkVC5zZWNyZXQsXG4gICAgICAgICAgICAgICAgICAgIHJlYWxtOiBzZXJpYWxpemVkSWRULnJlYWxtLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWRPYmplY3RzW2tleV0gPSBpZFRva2VuO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlkT2JqZWN0cztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXNlcmlhbGl6ZXMgYWNjZXNzIHRva2VucyB0byBBY2Nlc3NUb2tlbkVudGl0eSBvYmplY3RzXG4gICAgICogQHBhcmFtIGFjY2Vzc1Rva2VucyAtIGFjY2VzcyB0b2tlbnMgb2YgdHlwZSBTZXJpYWxpemVkQWNjZXNzVG9rZW5FbnRpdHlcbiAgICAgKi9cbiAgICBzdGF0aWMgZGVzZXJpYWxpemVBY2Nlc3NUb2tlbnMoXG4gICAgICAgIGFjY2Vzc1Rva2VuczogUmVjb3JkPHN0cmluZywgU2VyaWFsaXplZEFjY2Vzc1Rva2VuRW50aXR5PlxuICAgICk6IEFjY2Vzc1Rva2VuQ2FjaGUge1xuICAgICAgICBjb25zdCBhdE9iamVjdHM6IEFjY2Vzc1Rva2VuQ2FjaGUgPSB7fTtcbiAgICAgICAgaWYgKGFjY2Vzc1Rva2Vucykge1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoYWNjZXNzVG9rZW5zKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlcmlhbGl6ZWRBVCA9IGFjY2Vzc1Rva2Vuc1trZXldO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuOiBBY2Nlc3NUb2tlbkVudGl0eSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaG9tZUFjY291bnRJZDogc2VyaWFsaXplZEFULmhvbWVfYWNjb3VudF9pZCxcbiAgICAgICAgICAgICAgICAgICAgZW52aXJvbm1lbnQ6IHNlcmlhbGl6ZWRBVC5lbnZpcm9ubWVudCxcbiAgICAgICAgICAgICAgICAgICAgY3JlZGVudGlhbFR5cGU6XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXJpYWxpemVkQVQuY3JlZGVudGlhbF90eXBlIGFzIENyZWRlbnRpYWxUeXBlLFxuICAgICAgICAgICAgICAgICAgICBjbGllbnRJZDogc2VyaWFsaXplZEFULmNsaWVudF9pZCxcbiAgICAgICAgICAgICAgICAgICAgc2VjcmV0OiBzZXJpYWxpemVkQVQuc2VjcmV0LFxuICAgICAgICAgICAgICAgICAgICByZWFsbTogc2VyaWFsaXplZEFULnJlYWxtLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IHNlcmlhbGl6ZWRBVC50YXJnZXQsXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlZEF0OiBzZXJpYWxpemVkQVQuY2FjaGVkX2F0LFxuICAgICAgICAgICAgICAgICAgICBleHBpcmVzT246IHNlcmlhbGl6ZWRBVC5leHBpcmVzX29uLFxuICAgICAgICAgICAgICAgICAgICBleHRlbmRlZEV4cGlyZXNPbjogc2VyaWFsaXplZEFULmV4dGVuZGVkX2V4cGlyZXNfb24sXG4gICAgICAgICAgICAgICAgICAgIHJlZnJlc2hPbjogc2VyaWFsaXplZEFULnJlZnJlc2hfb24sXG4gICAgICAgICAgICAgICAgICAgIGtleUlkOiBzZXJpYWxpemVkQVQua2V5X2lkLFxuICAgICAgICAgICAgICAgICAgICB0b2tlblR5cGU6IHNlcmlhbGl6ZWRBVC50b2tlbl90eXBlIGFzIEF1dGhlbnRpY2F0aW9uU2NoZW1lLFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ZWRDbGFpbXM6IHNlcmlhbGl6ZWRBVC5yZXF1ZXN0ZWRDbGFpbXMsXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RlZENsYWltc0hhc2g6IHNlcmlhbGl6ZWRBVC5yZXF1ZXN0ZWRDbGFpbXNIYXNoLFxuICAgICAgICAgICAgICAgICAgICB1c2VyQXNzZXJ0aW9uSGFzaDogc2VyaWFsaXplZEFULnVzZXJBc3NlcnRpb25IYXNoLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgYXRPYmplY3RzW2tleV0gPSBhY2Nlc3NUb2tlbjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGF0T2JqZWN0cztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXNlcmlhbGl6ZXMgcmVmcmVzaCB0b2tlbnMgdG8gUmVmcmVzaFRva2VuRW50aXR5IG9iamVjdHNcbiAgICAgKiBAcGFyYW0gcmVmcmVzaFRva2VucyAtIHJlZnJlc2ggdG9rZW5zIG9mIHR5cGUgU2VyaWFsaXplZFJlZnJlc2hUb2tlbkVudGl0eVxuICAgICAqL1xuICAgIHN0YXRpYyBkZXNlcmlhbGl6ZVJlZnJlc2hUb2tlbnMoXG4gICAgICAgIHJlZnJlc2hUb2tlbnM6IFJlY29yZDxzdHJpbmcsIFNlcmlhbGl6ZWRSZWZyZXNoVG9rZW5FbnRpdHk+XG4gICAgKTogUmVmcmVzaFRva2VuQ2FjaGUge1xuICAgICAgICBjb25zdCBydE9iamVjdHM6IFJlZnJlc2hUb2tlbkNhY2hlID0ge307XG4gICAgICAgIGlmIChyZWZyZXNoVG9rZW5zKSB7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhyZWZyZXNoVG9rZW5zKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlcmlhbGl6ZWRSVCA9IHJlZnJlc2hUb2tlbnNba2V5XTtcbiAgICAgICAgICAgICAgICBjb25zdCByZWZyZXNoVG9rZW46IFJlZnJlc2hUb2tlbkVudGl0eSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaG9tZUFjY291bnRJZDogc2VyaWFsaXplZFJULmhvbWVfYWNjb3VudF9pZCxcbiAgICAgICAgICAgICAgICAgICAgZW52aXJvbm1lbnQ6IHNlcmlhbGl6ZWRSVC5lbnZpcm9ubWVudCxcbiAgICAgICAgICAgICAgICAgICAgY3JlZGVudGlhbFR5cGU6XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXJpYWxpemVkUlQuY3JlZGVudGlhbF90eXBlIGFzIENyZWRlbnRpYWxUeXBlLFxuICAgICAgICAgICAgICAgICAgICBjbGllbnRJZDogc2VyaWFsaXplZFJULmNsaWVudF9pZCxcbiAgICAgICAgICAgICAgICAgICAgc2VjcmV0OiBzZXJpYWxpemVkUlQuc2VjcmV0LFxuICAgICAgICAgICAgICAgICAgICBmYW1pbHlJZDogc2VyaWFsaXplZFJULmZhbWlseV9pZCxcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBzZXJpYWxpemVkUlQudGFyZ2V0LFxuICAgICAgICAgICAgICAgICAgICByZWFsbTogc2VyaWFsaXplZFJULnJlYWxtLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcnRPYmplY3RzW2tleV0gPSByZWZyZXNoVG9rZW47XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBydE9iamVjdHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVzZXJpYWxpemVzIGFwcE1ldGFkYXRhIHRvIEFwcE1ldGFEYXRhIG9iamVjdHNcbiAgICAgKiBAcGFyYW0gYXBwTWV0YWRhdGEgLSBhcHAgbWV0YWRhdGEgb2YgdHlwZSBTZXJpYWxpemVkQXBwTWV0YWRhdGFFbnRpdHlcbiAgICAgKi9cbiAgICBzdGF0aWMgZGVzZXJpYWxpemVBcHBNZXRhZGF0YShcbiAgICAgICAgYXBwTWV0YWRhdGE6IFJlY29yZDxzdHJpbmcsIFNlcmlhbGl6ZWRBcHBNZXRhZGF0YUVudGl0eT5cbiAgICApOiBBcHBNZXRhZGF0YUNhY2hlIHtcbiAgICAgICAgY29uc3QgYXBwTWV0YWRhdGFPYmplY3RzOiBBcHBNZXRhZGF0YUNhY2hlID0ge307XG4gICAgICAgIGlmIChhcHBNZXRhZGF0YSkge1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoYXBwTWV0YWRhdGEpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VyaWFsaXplZEFtZHQgPSBhcHBNZXRhZGF0YVtrZXldO1xuICAgICAgICAgICAgICAgIGFwcE1ldGFkYXRhT2JqZWN0c1trZXldID0ge1xuICAgICAgICAgICAgICAgICAgICBjbGllbnRJZDogc2VyaWFsaXplZEFtZHQuY2xpZW50X2lkLFxuICAgICAgICAgICAgICAgICAgICBlbnZpcm9ubWVudDogc2VyaWFsaXplZEFtZHQuZW52aXJvbm1lbnQsXG4gICAgICAgICAgICAgICAgICAgIGZhbWlseUlkOiBzZXJpYWxpemVkQW1kdC5mYW1pbHlfaWQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGFwcE1ldGFkYXRhT2JqZWN0cztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXNlcmlhbGl6ZSBhbiBpbk1lbW9yeSBDYWNoZVxuICAgICAqIEBwYXJhbSBqc29uQ2FjaGUgLSBKU09OIGJsb2IgY2FjaGVcbiAgICAgKi9cbiAgICBzdGF0aWMgZGVzZXJpYWxpemVBbGxDYWNoZShqc29uQ2FjaGU6IEpzb25DYWNoZSk6IEluTWVtb3J5Q2FjaGUge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYWNjb3VudHM6IGpzb25DYWNoZS5BY2NvdW50XG4gICAgICAgICAgICAgICAgPyB0aGlzLmRlc2VyaWFsaXplQWNjb3VudHMoanNvbkNhY2hlLkFjY291bnQpXG4gICAgICAgICAgICAgICAgOiB7fSxcbiAgICAgICAgICAgIGlkVG9rZW5zOiBqc29uQ2FjaGUuSWRUb2tlblxuICAgICAgICAgICAgICAgID8gdGhpcy5kZXNlcmlhbGl6ZUlkVG9rZW5zKGpzb25DYWNoZS5JZFRva2VuKVxuICAgICAgICAgICAgICAgIDoge30sXG4gICAgICAgICAgICBhY2Nlc3NUb2tlbnM6IGpzb25DYWNoZS5BY2Nlc3NUb2tlblxuICAgICAgICAgICAgICAgID8gdGhpcy5kZXNlcmlhbGl6ZUFjY2Vzc1Rva2Vucyhqc29uQ2FjaGUuQWNjZXNzVG9rZW4pXG4gICAgICAgICAgICAgICAgOiB7fSxcbiAgICAgICAgICAgIHJlZnJlc2hUb2tlbnM6IGpzb25DYWNoZS5SZWZyZXNoVG9rZW5cbiAgICAgICAgICAgICAgICA/IHRoaXMuZGVzZXJpYWxpemVSZWZyZXNoVG9rZW5zKGpzb25DYWNoZS5SZWZyZXNoVG9rZW4pXG4gICAgICAgICAgICAgICAgOiB7fSxcbiAgICAgICAgICAgIGFwcE1ldGFkYXRhOiBqc29uQ2FjaGUuQXBwTWV0YWRhdGFcbiAgICAgICAgICAgICAgICA/IHRoaXMuZGVzZXJpYWxpemVBcHBNZXRhZGF0YShqc29uQ2FjaGUuQXBwTWV0YWRhdGEpXG4gICAgICAgICAgICAgICAgOiB7fSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEh0dHBTdGF0dXMgfSBmcm9tIFwiQGF6dXJlL21zYWwtY29tbW9uL25vZGVcIjtcbmltcG9ydCB7IExpbmVhclJldHJ5UG9saWN5IH0gZnJvbSBcIi4uL3JldHJ5L0xpbmVhclJldHJ5UG9saWN5LmpzXCI7XG5cbi8vIE1TSSBDb25zdGFudHMuIERvY3MgZm9yIE1TSSBhcmUgYXZhaWxhYmxlIGhlcmUgaHR0cHM6Ly9kb2NzLm1pY3Jvc29mdC5jb20vYXp1cmUvYXBwLXNlcnZpY2Uvb3ZlcnZpZXctbWFuYWdlZC1pZGVudGl0eVxuZXhwb3J0IGNvbnN0IEFVVEhPUklaQVRJT05fSEVBREVSX05BTUU6IHN0cmluZyA9IFwiQXV0aG9yaXphdGlvblwiO1xuZXhwb3J0IGNvbnN0IE1FVEFEQVRBX0hFQURFUl9OQU1FOiBzdHJpbmcgPSBcIk1ldGFkYXRhXCI7XG5leHBvcnQgY29uc3QgQVBQX1NFUlZJQ0VfU0VDUkVUX0hFQURFUl9OQU1FOiBzdHJpbmcgPSBcIlgtSURFTlRJVFktSEVBREVSXCI7XG5leHBvcnQgY29uc3QgTUxfQU5EX1NGX1NFQ1JFVF9IRUFERVJfTkFNRTogc3RyaW5nID0gXCJzZWNyZXRcIjtcbmV4cG9ydCBjb25zdCBBUElfVkVSU0lPTl9RVUVSWV9QQVJBTUVURVJfTkFNRTogc3RyaW5nID0gXCJhcGktdmVyc2lvblwiO1xuZXhwb3J0IGNvbnN0IFJFU09VUkNFX0JPRFlfT1JfUVVFUllfUEFSQU1FVEVSX05BTUU6IHN0cmluZyA9IFwicmVzb3VyY2VcIjtcbmV4cG9ydCBjb25zdCBERUZBVUxUX01BTkFHRURfSURFTlRJVFlfSUQgPSBcInN5c3RlbV9hc3NpZ25lZF9tYW5hZ2VkX2lkZW50aXR5XCI7XG5leHBvcnQgY29uc3QgTUFOQUdFRF9JREVOVElUWV9ERUZBVUxUX1RFTkFOVCA9IFwibWFuYWdlZF9pZGVudGl0eVwiO1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfQVVUSE9SSVRZX0ZPUl9NQU5BR0VEX0lERU5USVRZID0gYGh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbS8ke01BTkFHRURfSURFTlRJVFlfREVGQVVMVF9URU5BTlR9L2A7XG5cbi8qKlxuICogTWFuYWdlZCBJZGVudGl0eSBFbnZpcm9ubWVudCBWYXJpYWJsZSBOYW1lc1xuICovXG5leHBvcnQgY29uc3QgTWFuYWdlZElkZW50aXR5RW52aXJvbm1lbnRWYXJpYWJsZU5hbWVzID0ge1xuICAgIEFaVVJFX1BPRF9JREVOVElUWV9BVVRIT1JJVFlfSE9TVDogXCJBWlVSRV9QT0RfSURFTlRJVFlfQVVUSE9SSVRZX0hPU1RcIixcbiAgICBJREVOVElUWV9FTkRQT0lOVDogXCJJREVOVElUWV9FTkRQT0lOVFwiLFxuICAgIElERU5USVRZX0hFQURFUjogXCJJREVOVElUWV9IRUFERVJcIixcbiAgICBJREVOVElUWV9TRVJWRVJfVEhVTUJQUklOVDogXCJJREVOVElUWV9TRVJWRVJfVEhVTUJQUklOVFwiLFxuICAgIElNRFNfRU5EUE9JTlQ6IFwiSU1EU19FTkRQT0lOVFwiLFxuICAgIE1TSV9FTkRQT0lOVDogXCJNU0lfRU5EUE9JTlRcIixcbiAgICBNU0lfU0VDUkVUOiBcIk1TSV9TRUNSRVRcIixcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBNYW5hZ2VkSWRlbnRpdHlFbnZpcm9ubWVudFZhcmlhYmxlTmFtZXMgPVxuICAgICh0eXBlb2YgTWFuYWdlZElkZW50aXR5RW52aXJvbm1lbnRWYXJpYWJsZU5hbWVzKVtrZXlvZiB0eXBlb2YgTWFuYWdlZElkZW50aXR5RW52aXJvbm1lbnRWYXJpYWJsZU5hbWVzXTtcblxuLyoqXG4gKiBNYW5hZ2VkIElkZW50aXR5IFNvdXJjZSBOYW1lc1xuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgTWFuYWdlZElkZW50aXR5U291cmNlTmFtZXMgPSB7XG4gICAgQVBQX1NFUlZJQ0U6IFwiQXBwU2VydmljZVwiLFxuICAgIEFaVVJFX0FSQzogXCJBenVyZUFyY1wiLFxuICAgIENMT1VEX1NIRUxMOiBcIkNsb3VkU2hlbGxcIixcbiAgICBERUZBVUxUX1RPX0lNRFM6IFwiRGVmYXVsdFRvSW1kc1wiLFxuICAgIElNRFM6IFwiSW1kc1wiLFxuICAgIE1BQ0hJTkVfTEVBUk5JTkc6IFwiTWFjaGluZUxlYXJuaW5nXCIsXG4gICAgU0VSVklDRV9GQUJSSUM6IFwiU2VydmljZUZhYnJpY1wiLFxufSBhcyBjb25zdDtcbi8qKlxuICogVGhlIE1hbmFnZWRJZGVudGl0eVNvdXJjZU5hbWVzIHR5cGVcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHR5cGUgTWFuYWdlZElkZW50aXR5U291cmNlTmFtZXMgPVxuICAgICh0eXBlb2YgTWFuYWdlZElkZW50aXR5U291cmNlTmFtZXMpW2tleW9mIHR5cGVvZiBNYW5hZ2VkSWRlbnRpdHlTb3VyY2VOYW1lc107XG5cbi8qKlxuICogTWFuYWdlZCBJZGVudGl0eSBJZHNcbiAqL1xuZXhwb3J0IGNvbnN0IE1hbmFnZWRJZGVudGl0eUlkVHlwZSA9IHtcbiAgICBTWVNURU1fQVNTSUdORUQ6IFwic3lzdGVtLWFzc2lnbmVkXCIsXG4gICAgVVNFUl9BU1NJR05FRF9DTElFTlRfSUQ6IFwidXNlci1hc3NpZ25lZC1jbGllbnQtaWRcIixcbiAgICBVU0VSX0FTU0lHTkVEX1JFU09VUkNFX0lEOiBcInVzZXItYXNzaWduZWQtcmVzb3VyY2UtaWRcIixcbiAgICBVU0VSX0FTU0lHTkVEX09CSkVDVF9JRDogXCJ1c2VyLWFzc2lnbmVkLW9iamVjdC1pZFwiLFxufSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIE1hbmFnZWRJZGVudGl0eUlkVHlwZSA9XG4gICAgKHR5cGVvZiBNYW5hZ2VkSWRlbnRpdHlJZFR5cGUpW2tleW9mIHR5cGVvZiBNYW5hZ2VkSWRlbnRpdHlJZFR5cGVdO1xuXG4vKipcbiAqIGh0dHAgbWV0aG9kc1xuICovXG5leHBvcnQgY29uc3QgSHR0cE1ldGhvZCA9IHtcbiAgICBHRVQ6IFwiZ2V0XCIsXG4gICAgUE9TVDogXCJwb3N0XCIsXG59IGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgSHR0cE1ldGhvZCA9ICh0eXBlb2YgSHR0cE1ldGhvZClba2V5b2YgdHlwZW9mIEh0dHBNZXRob2RdO1xuXG5leHBvcnQgY29uc3QgUHJveHlTdGF0dXMgPSB7XG4gICAgU1VDQ0VTUzogSHR0cFN0YXR1cy5TVUNDRVNTLFxuICAgIFNVQ0NFU1NfUkFOR0VfU1RBUlQ6IEh0dHBTdGF0dXMuU1VDQ0VTU19SQU5HRV9TVEFSVCxcbiAgICBTVUNDRVNTX1JBTkdFX0VORDogSHR0cFN0YXR1cy5TVUNDRVNTX1JBTkdFX0VORCxcbiAgICBTRVJWRVJfRVJST1I6IEh0dHBTdGF0dXMuU0VSVkVSX0VSUk9SLFxufSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIFByb3h5U3RhdHVzID0gKHR5cGVvZiBQcm94eVN0YXR1cylba2V5b2YgdHlwZW9mIFByb3h5U3RhdHVzXTtcblxuLyoqXG4gKiBDb25zdGFudHMgdXNlZCBmb3IgcmVnaW9uIGRpc2NvdmVyeVxuICovXG5leHBvcnQgY29uc3QgUkVHSU9OX0VOVklST05NRU5UX1ZBUklBQkxFID0gXCJSRUdJT05fTkFNRVwiO1xuZXhwb3J0IGNvbnN0IE1TQUxfRk9SQ0VfUkVHSU9OID0gXCJNU0FMX0ZPUkNFX1JFR0lPTlwiO1xuXG4vKipcbiAqIENvbnN0YW50IHVzZWQgZm9yIFBLQ0VcbiAqL1xuZXhwb3J0IGNvbnN0IFJBTkRPTV9PQ1RFVF9TSVpFID0gMzI7XG5cbi8qKlxuICogQ29uc3RhbnRzIHVzZWQgaW4gUEtDRVxuICovXG5leHBvcnQgY29uc3QgSGFzaCA9IHtcbiAgICBTSEEyNTY6IFwic2hhMjU2XCIsXG59O1xuXG4vKipcbiAqIENvbnN0YW50cyBmb3IgZW5jb2Rpbmcgc2NoZW1lc1xuICovXG5leHBvcnQgY29uc3QgQ2hhclNldCA9IHtcbiAgICBDVl9DSEFSU0VUOlxuICAgICAgICBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5LS5fflwiLFxufTtcblxuLyoqXG4gKiBDYWNoZSBDb25zdGFudHNcbiAqL1xuZXhwb3J0IGNvbnN0IENBQ0hFID0ge1xuICAgIEZJTEVfQ0FDSEU6IFwiZmlsZUNhY2hlXCIsXG4gICAgRVhURU5TSU9OX0xJQjogXCJleHRlbnN0aW9uX2xpYnJhcnlcIixcbn07XG5cbi8qKlxuICogQ29uc3RhbnRzXG4gKi9cbmV4cG9ydCBjb25zdCBDb25zdGFudHMgPSB7XG4gICAgTVNBTF9TS1U6IFwibXNhbC5qcy5ub2RlXCIsXG4gICAgSldUX0JFQVJFUl9BU1NFUlRJT05fVFlQRTpcbiAgICAgICAgXCJ1cm46aWV0ZjpwYXJhbXM6b2F1dGg6Y2xpZW50LWFzc2VydGlvbi10eXBlOmp3dC1iZWFyZXJcIixcbiAgICBBVVRIT1JJWkFUSU9OX1BFTkRJTkc6IFwiYXV0aG9yaXphdGlvbl9wZW5kaW5nXCIsXG4gICAgSFRUUF9QUk9UT0NPTDogXCJodHRwOi8vXCIsXG4gICAgTE9DQUxIT1NUOiBcImxvY2FsaG9zdFwiLFxufTtcblxuLyoqXG4gKiBBUEkgQ29kZXMgZm9yIFRlbGVtZXRyeSBwdXJwb3Nlcy5cbiAqIEJlZm9yZSBhZGRpbmcgYSBuZXcgY29kZSB5b3UgbXVzdCBjbGFpbSBpdCBpbiB0aGUgTVNBTCBUZWxlbWV0cnkgdHJhY2tlciBhcyB0aGVzZSBudW1iZXIgc3BhY2VzIGFyZSBzaGFyZWQgYWNyb3NzIGFsbCBNU0FMc1xuICogMC05OSBTaWxlbnQgRmxvd1xuICogNjAwLTY5OSBEZXZpY2UgQ29kZSBGbG93XG4gKiA4MDAtODk5IEF1dGggQ29kZSBGbG93XG4gKi9cbmV4cG9ydCBjb25zdCBBcGlJZCA9IHtcbiAgICBhY3F1aXJlVG9rZW5TaWxlbnQ6IDYyLFxuICAgIGFjcXVpcmVUb2tlbkJ5VXNlcm5hbWVQYXNzd29yZDogMzcxLFxuICAgIGFjcXVpcmVUb2tlbkJ5RGV2aWNlQ29kZTogNjcxLFxuICAgIGFjcXVpcmVUb2tlbkJ5Q2xpZW50Q3JlZGVudGlhbDogNzcxLFxuICAgIGFjcXVpcmVUb2tlbkJ5Q29kZTogODcxLFxuICAgIGFjcXVpcmVUb2tlbkJ5UmVmcmVzaFRva2VuOiA4NzIsXG59O1xuZXhwb3J0IHR5cGUgQXBpSWQgPSAodHlwZW9mIEFwaUlkKVtrZXlvZiB0eXBlb2YgQXBpSWRdO1xuXG4vKipcbiAqIEpXVCAgY29uc3RhbnRzXG4gKi9cbmV4cG9ydCBjb25zdCBKd3RDb25zdGFudHMgPSB7XG4gICAgQUxHT1JJVEhNOiBcImFsZ1wiLFxuICAgIFJTQV8yNTY6IFwiUlMyNTZcIixcbiAgICBQU1NfMjU2OiBcIlBTMjU2XCIsXG4gICAgWDVUXzI1NjogXCJ4NXQjUzI1NlwiLFxuICAgIFg1VDogXCJ4NXRcIixcbiAgICBYNUM6IFwieDVjXCIsXG4gICAgQVVESUVOQ0U6IFwiYXVkXCIsXG4gICAgRVhQSVJBVElPTl9USU1FOiBcImV4cFwiLFxuICAgIElTU1VFUjogXCJpc3NcIixcbiAgICBTVUJKRUNUOiBcInN1YlwiLFxuICAgIE5PVF9CRUZPUkU6IFwibmJmXCIsXG4gICAgSldUX0lEOiBcImp0aVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IExPT1BCQUNLX1NFUlZFUl9DT05TVEFOVFMgPSB7XG4gICAgSU5URVJWQUxfTVM6IDEwMCxcbiAgICBUSU1FT1VUX01TOiA1MDAwLFxufTtcblxuZXhwb3J0IGNvbnN0IEFaVVJFX0FSQ19TRUNSRVRfRklMRV9NQVhfU0laRV9CWVRFUyA9IDQwOTY7IC8vIDQgS0JcblxuZXhwb3J0IGNvbnN0IE1BTkFHRURfSURFTlRJVFlfTUFYX1JFVFJJRVMgPSAzO1xuZXhwb3J0IGNvbnN0IE1BTkFHRURfSURFTlRJVFlfUkVUUllfREVMQVkgPSAxMDAwO1xuZXhwb3J0IGNvbnN0IE1BTkFHRURfSURFTlRJVFlfSFRUUF9TVEFUVVNfQ09ERVNfVE9fUkVUUllfT04gPSBbXG4gICAgSHR0cFN0YXR1cy5OT1RfRk9VTkQsXG4gICAgSHR0cFN0YXR1cy5SRVFVRVNUX1RJTUVPVVQsXG4gICAgSHR0cFN0YXR1cy5UT09fTUFOWV9SRVFVRVNUUyxcbiAgICBIdHRwU3RhdHVzLlNFUlZFUl9FUlJPUixcbiAgICBIdHRwU3RhdHVzLlNFUlZJQ0VfVU5BVkFJTEFCTEUsXG4gICAgSHR0cFN0YXR1cy5HQVRFV0FZX1RJTUVPVVQsXG5dO1xuXG4vKipcbiAqIFJldHJ5IFBvbGljeSBUeXBlc1xuICovXG5leHBvcnQgdHlwZSBSZXRyeVBvbGljaWVzID0gTGluZWFyUmV0cnlQb2xpY3k7XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IE5ldHdvcmtSZXNwb25zZSB9IGZyb20gXCJAYXp1cmUvbXNhbC1jb21tb24vbm9kZVwiO1xuXG5leHBvcnQgdHlwZSBVcmxUb0h0dHBSZXF1ZXN0T3B0aW9ucyA9IHtcbiAgICBwcm90b2NvbDogc3RyaW5nO1xuICAgIGhvc3RuYW1lOiBzdHJpbmc7XG4gICAgaGFzaDogc3RyaW5nO1xuICAgIHNlYXJjaDogc3RyaW5nO1xuICAgIHBhdGhuYW1lOiBzdHJpbmc7XG4gICAgcGF0aDogc3RyaW5nO1xuICAgIGhyZWY6IHN0cmluZztcbiAgICBwb3J0PzogbnVtYmVyO1xuICAgIGF1dGg/OiBzdHJpbmc7XG59O1xuXG5leHBvcnQgY2xhc3MgTmV0d29ya1V0aWxzIHtcbiAgICBzdGF0aWMgZ2V0TmV0d29ya1Jlc3BvbnNlPFQ+KFxuICAgICAgICBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+LFxuICAgICAgICBib2R5OiBULFxuICAgICAgICBzdGF0dXNDb2RlOiBudW1iZXJcbiAgICApOiBOZXR3b3JrUmVzcG9uc2U8VD4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgIGJvZHk6IGJvZHksXG4gICAgICAgICAgICBzdGF0dXM6IHN0YXR1c0NvZGUsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBVdGlsaXR5IGZ1bmN0aW9uIHRoYXQgY29udmVydHMgYSBVUkwgb2JqZWN0IGludG8gYW4gb3JkaW5hcnkgb3B0aW9ucyBvYmplY3QgYXMgZXhwZWN0ZWQgYnkgdGhlXG4gICAgICogaHR0cC5yZXF1ZXN0IGFuZCBodHRwcy5yZXF1ZXN0IEFQSXMuXG4gICAgICogaHR0cHM6Ly9naXRodWIuY29tL25vZGVqcy9ub2RlL2Jsb2IvbWFpbi9saWIvaW50ZXJuYWwvdXJsLmpzI0wxMDkwXG4gICAgICovXG4gICAgc3RhdGljIHVybFRvSHR0cE9wdGlvbnModXJsOiBVUkwpOiBVcmxUb0h0dHBSZXF1ZXN0T3B0aW9ucyB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnM6IFVybFRvSHR0cFJlcXVlc3RPcHRpb25zID0ge1xuICAgICAgICAgICAgcHJvdG9jb2w6IHVybC5wcm90b2NvbCxcbiAgICAgICAgICAgIGhvc3RuYW1lOlxuICAgICAgICAgICAgICAgIHVybC5ob3N0bmFtZSAmJiB1cmwuaG9zdG5hbWUuc3RhcnRzV2l0aChcIltcIilcbiAgICAgICAgICAgICAgICAgICAgPyB1cmwuaG9zdG5hbWUuc2xpY2UoMSwgLTEpXG4gICAgICAgICAgICAgICAgICAgIDogdXJsLmhvc3RuYW1lLFxuICAgICAgICAgICAgaGFzaDogdXJsLmhhc2gsXG4gICAgICAgICAgICBzZWFyY2g6IHVybC5zZWFyY2gsXG4gICAgICAgICAgICBwYXRobmFtZTogdXJsLnBhdGhuYW1lLFxuICAgICAgICAgICAgcGF0aDogYCR7dXJsLnBhdGhuYW1lIHx8IFwiXCJ9JHt1cmwuc2VhcmNoIHx8IFwiXCJ9YCxcbiAgICAgICAgICAgIGhyZWY6IHVybC5ocmVmLFxuICAgICAgICB9O1xuICAgICAgICBpZiAodXJsLnBvcnQgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIG9wdGlvbnMucG9ydCA9IE51bWJlcih1cmwucG9ydCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVybC51c2VybmFtZSB8fCB1cmwucGFzc3dvcmQpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuYXV0aCA9IGAke2RlY29kZVVSSUNvbXBvbmVudChcbiAgICAgICAgICAgICAgICB1cmwudXNlcm5hbWVcbiAgICAgICAgICAgICl9OiR7ZGVjb2RlVVJJQ29tcG9uZW50KHVybC5wYXNzd29yZCl9YDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3B0aW9ucztcbiAgICB9XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gICAgSU5ldHdvcmtNb2R1bGUsXG4gICAgTmV0d29ya1JlcXVlc3RPcHRpb25zLFxuICAgIE5ldHdvcmtSZXNwb25zZSxcbiAgICBIdHRwU3RhdHVzLFxufSBmcm9tIFwiQGF6dXJlL21zYWwtY29tbW9uL25vZGVcIjtcbmltcG9ydCB7IEh0dHBNZXRob2QsIENvbnN0YW50cywgUHJveHlTdGF0dXMgfSBmcm9tIFwiLi4vdXRpbHMvQ29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBOZXR3b3JrVXRpbHMgfSBmcm9tIFwiLi4vdXRpbHMvTmV0d29ya1V0aWxzLmpzXCI7XG5pbXBvcnQgaHR0cCBmcm9tIFwiaHR0cFwiO1xuaW1wb3J0IGh0dHBzIGZyb20gXCJodHRwc1wiO1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyB0aGUgQVBJIGZvciBuZXR3b3JrIHJlcXVlc3RzLlxuICovXG5leHBvcnQgY2xhc3MgSHR0cENsaWVudCBpbXBsZW1lbnRzIElOZXR3b3JrTW9kdWxlIHtcbiAgICBwcml2YXRlIHByb3h5VXJsOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBjdXN0b21BZ2VudE9wdGlvbnM6IGh0dHAuQWdlbnRPcHRpb25zIHwgaHR0cHMuQWdlbnRPcHRpb25zO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByb3h5VXJsPzogc3RyaW5nLFxuICAgICAgICBjdXN0b21BZ2VudE9wdGlvbnM/OiBodHRwLkFnZW50T3B0aW9ucyB8IGh0dHBzLkFnZW50T3B0aW9uc1xuICAgICkge1xuICAgICAgICB0aGlzLnByb3h5VXJsID0gcHJveHlVcmwgfHwgXCJcIjtcbiAgICAgICAgdGhpcy5jdXN0b21BZ2VudE9wdGlvbnMgPSBjdXN0b21BZ2VudE9wdGlvbnMgfHwge307XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSHR0cCBHZXQgcmVxdWVzdFxuICAgICAqIEBwYXJhbSB1cmxcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqL1xuICAgIGFzeW5jIHNlbmRHZXRSZXF1ZXN0QXN5bmM8VD4oXG4gICAgICAgIHVybDogc3RyaW5nLFxuICAgICAgICBvcHRpb25zPzogTmV0d29ya1JlcXVlc3RPcHRpb25zLFxuICAgICAgICB0aW1lb3V0PzogbnVtYmVyXG4gICAgKTogUHJvbWlzZTxOZXR3b3JrUmVzcG9uc2U8VD4+IHtcbiAgICAgICAgaWYgKHRoaXMucHJveHlVcmwpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXR3b3JrUmVxdWVzdFZpYVByb3h5KFxuICAgICAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgICAgICB0aGlzLnByb3h5VXJsLFxuICAgICAgICAgICAgICAgIEh0dHBNZXRob2QuR0VULFxuICAgICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21BZ2VudE9wdGlvbnMgYXMgaHR0cC5BZ2VudE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgdGltZW91dFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBuZXR3b3JrUmVxdWVzdFZpYUh0dHBzKFxuICAgICAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgICAgICBIdHRwTWV0aG9kLkdFVCxcbiAgICAgICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9tQWdlbnRPcHRpb25zIGFzIGh0dHBzLkFnZW50T3B0aW9ucyxcbiAgICAgICAgICAgICAgICB0aW1lb3V0XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSHR0cCBQb3N0IHJlcXVlc3RcbiAgICAgKiBAcGFyYW0gdXJsXG4gICAgICogQHBhcmFtIG9wdGlvbnNcbiAgICAgKi9cbiAgICBhc3luYyBzZW5kUG9zdFJlcXVlc3RBc3luYzxUPihcbiAgICAgICAgdXJsOiBzdHJpbmcsXG4gICAgICAgIG9wdGlvbnM/OiBOZXR3b3JrUmVxdWVzdE9wdGlvbnNcbiAgICApOiBQcm9taXNlPE5ldHdvcmtSZXNwb25zZTxUPj4ge1xuICAgICAgICBpZiAodGhpcy5wcm94eVVybCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldHdvcmtSZXF1ZXN0VmlhUHJveHkoXG4gICAgICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgICAgIHRoaXMucHJveHlVcmwsXG4gICAgICAgICAgICAgICAgSHR0cE1ldGhvZC5QT1NULFxuICAgICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21BZ2VudE9wdGlvbnMgYXMgaHR0cC5BZ2VudE9wdGlvbnNcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmV0d29ya1JlcXVlc3RWaWFIdHRwcyhcbiAgICAgICAgICAgICAgICB1cmwsXG4gICAgICAgICAgICAgICAgSHR0cE1ldGhvZC5QT1NULFxuICAgICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21BZ2VudE9wdGlvbnMgYXMgaHR0cHMuQWdlbnRPcHRpb25zXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jb25zdCBuZXR3b3JrUmVxdWVzdFZpYVByb3h5ID0gPFQ+KFxuICAgIGRlc3RpbmF0aW9uVXJsU3RyaW5nOiBzdHJpbmcsXG4gICAgcHJveHlVcmxTdHJpbmc6IHN0cmluZyxcbiAgICBodHRwTWV0aG9kOiBzdHJpbmcsXG4gICAgb3B0aW9ucz86IE5ldHdvcmtSZXF1ZXN0T3B0aW9ucyxcbiAgICBhZ2VudE9wdGlvbnM/OiBodHRwLkFnZW50T3B0aW9ucyxcbiAgICB0aW1lb3V0PzogbnVtYmVyXG4pOiBQcm9taXNlPE5ldHdvcmtSZXNwb25zZTxUPj4gPT4ge1xuICAgIGNvbnN0IGRlc3RpbmF0aW9uVXJsID0gbmV3IFVSTChkZXN0aW5hdGlvblVybFN0cmluZyk7XG4gICAgY29uc3QgcHJveHlVcmwgPSBuZXcgVVJMKHByb3h5VXJsU3RyaW5nKTtcblxuICAgIC8vIFwibWV0aG9kOiBjb25uZWN0XCIgbXVzdCBiZSB1c2VkIHRvIGVzdGFibGlzaCBhIGNvbm5lY3Rpb24gdG8gdGhlIHByb3h5XG4gICAgY29uc3QgaGVhZGVycyA9IG9wdGlvbnM/LmhlYWRlcnMgfHwgKHt9IGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz4pO1xuICAgIGNvbnN0IHR1bm5lbFJlcXVlc3RPcHRpb25zOiBodHRwcy5SZXF1ZXN0T3B0aW9ucyA9IHtcbiAgICAgICAgaG9zdDogcHJveHlVcmwuaG9zdG5hbWUsXG4gICAgICAgIHBvcnQ6IHByb3h5VXJsLnBvcnQsXG4gICAgICAgIG1ldGhvZDogXCJDT05ORUNUXCIsXG4gICAgICAgIHBhdGg6IGRlc3RpbmF0aW9uVXJsLmhvc3RuYW1lLFxuICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgIH07XG5cbiAgICBpZiAoYWdlbnRPcHRpb25zICYmIE9iamVjdC5rZXlzKGFnZW50T3B0aW9ucykubGVuZ3RoKSB7XG4gICAgICAgIHR1bm5lbFJlcXVlc3RPcHRpb25zLmFnZW50ID0gbmV3IGh0dHAuQWdlbnQoYWdlbnRPcHRpb25zKTtcbiAgICB9XG5cbiAgICAvLyBjb21wb3NlIGEgcmVxdWVzdCBzdHJpbmcgZm9yIHRoZSBzb2NrZXRcbiAgICBsZXQgcG9zdFJlcXVlc3RTdHJpbmdDb250ZW50OiBzdHJpbmcgPSBcIlwiO1xuICAgIGlmIChodHRwTWV0aG9kID09PSBIdHRwTWV0aG9kLlBPU1QpIHtcbiAgICAgICAgY29uc3QgYm9keSA9IG9wdGlvbnM/LmJvZHkgfHwgXCJcIjtcbiAgICAgICAgcG9zdFJlcXVlc3RTdHJpbmdDb250ZW50ID1cbiAgICAgICAgICAgIFwiQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcXHJcXG5cIiArXG4gICAgICAgICAgICBgQ29udGVudC1MZW5ndGg6ICR7Ym9keS5sZW5ndGh9XFxyXFxuYCArXG4gICAgICAgICAgICBgXFxyXFxuJHtib2R5fWA7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gb3B0aW9uYWwgdGltZW91dCBpcyBvbmx5IGZvciBnZXQgcmVxdWVzdHMgKHJlZ2lvbkRpc2NvdmVyeSwgZm9yIGV4YW1wbGUpXG4gICAgICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICAgICAgICB0dW5uZWxSZXF1ZXN0T3B0aW9ucy50aW1lb3V0ID0gdGltZW91dDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBvdXRnb2luZ1JlcXVlc3RTdHJpbmcgPVxuICAgICAgICBgJHtodHRwTWV0aG9kLnRvVXBwZXJDYXNlKCl9ICR7ZGVzdGluYXRpb25VcmwuaHJlZn0gSFRUUC8xLjFcXHJcXG5gICtcbiAgICAgICAgYEhvc3Q6ICR7ZGVzdGluYXRpb25VcmwuaG9zdH1cXHJcXG5gICtcbiAgICAgICAgXCJDb25uZWN0aW9uOiBjbG9zZVxcclxcblwiICtcbiAgICAgICAgcG9zdFJlcXVlc3RTdHJpbmdDb250ZW50ICtcbiAgICAgICAgXCJcXHJcXG5cIjtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxOZXR3b3JrUmVzcG9uc2U8VD4+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IGh0dHAucmVxdWVzdCh0dW5uZWxSZXF1ZXN0T3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICAgICAgIHJlcXVlc3Qub24oXCJ0aW1lb3V0XCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwiUmVxdWVzdCB0aW1lIG91dFwiKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlcXVlc3QuZW5kKCk7XG5cbiAgICAgICAgLy8gZXN0YWJsaXNoIGNvbm5lY3Rpb24gdG8gdGhlIHByb3h5XG4gICAgICAgIHJlcXVlc3Qub24oXCJjb25uZWN0XCIsIChyZXNwb25zZSwgc29ja2V0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcm94eVN0YXR1c0NvZGUgPVxuICAgICAgICAgICAgICAgIHJlc3BvbnNlPy5zdGF0dXNDb2RlIHx8IFByb3h5U3RhdHVzLlNFUlZFUl9FUlJPUjtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBwcm94eVN0YXR1c0NvZGUgPCBQcm94eVN0YXR1cy5TVUNDRVNTX1JBTkdFX1NUQVJUIHx8XG4gICAgICAgICAgICAgICAgcHJveHlTdGF0dXNDb2RlID4gUHJveHlTdGF0dXMuU1VDQ0VTU19SQU5HRV9FTkRcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJlcXVlc3QuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIHNvY2tldC5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgcmVqZWN0KFxuICAgICAgICAgICAgICAgICAgICBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICAgICBgRXJyb3IgY29ubmVjdGluZyB0byBwcm94eS4gSHR0cCBzdGF0dXMgY29kZTogJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5zdGF0dXNDb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICB9LiBIdHRwIHN0YXR1cyBtZXNzYWdlOiAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlPy5zdGF0dXNNZXNzYWdlIHx8IFwiVW5rbm93blwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9YFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gbWFrZSBhIHJlcXVlc3Qgb3ZlciBhbiBIVFRQIHR1bm5lbFxuICAgICAgICAgICAgc29ja2V0LndyaXRlKG91dGdvaW5nUmVxdWVzdFN0cmluZyk7XG5cbiAgICAgICAgICAgIGNvbnN0IGRhdGE6IEJ1ZmZlcltdID0gW107XG4gICAgICAgICAgICBzb2NrZXQub24oXCJkYXRhXCIsIChjaHVuaykgPT4ge1xuICAgICAgICAgICAgICAgIGRhdGEucHVzaChjaHVuayk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgc29ja2V0Lm9uKFwiZW5kXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBjb21iaW5lIGFsbCByZWNlaXZlZCBidWZmZXIgc3RyZWFtcyBpbnRvIG9uZSBidWZmZXIsIGFuZCB0aGVuIGludG8gYSBzdHJpbmdcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhU3RyaW5nID0gQnVmZmVyLmNvbmNhdChbLi4uZGF0YV0pLnRvU3RyaW5nKCk7XG5cbiAgICAgICAgICAgICAgICAvLyBzZXBhcmF0ZSBlYWNoIGxpbmUgaW50byBpdCdzIG93biBlbnRyeSBpbiBhbiBhcnJ5XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YVN0cmluZ0FycmF5ID0gZGF0YVN0cmluZy5zcGxpdChcIlxcclxcblwiKTtcbiAgICAgICAgICAgICAgICAvLyB0aGUgZmlyc3QgZW50cnkgd2lsbCBjb250YWluIHRoZSBzdGF0dXNDb2RlIGFuZCBzdGF0dXNNZXNzYWdlXG4gICAgICAgICAgICAgICAgY29uc3QgaHR0cFN0YXR1c0NvZGUgPSBwYXJzZUludChcbiAgICAgICAgICAgICAgICAgICAgZGF0YVN0cmluZ0FycmF5WzBdLnNwbGl0KFwiIFwiKVsxXVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIFwiSFRUUC8xLjFcIiBhbmQgdGhlIHN0YXR1cyBjb2RlIHRvIGdldCB0aGUgc3RhdHVzIG1lc3NhZ2VcbiAgICAgICAgICAgICAgICBjb25zdCBzdGF0dXNNZXNzYWdlID0gZGF0YVN0cmluZ0FycmF5WzBdXG4gICAgICAgICAgICAgICAgICAgIC5zcGxpdChcIiBcIilcbiAgICAgICAgICAgICAgICAgICAgLnNsaWNlKDIpXG4gICAgICAgICAgICAgICAgICAgIC5qb2luKFwiIFwiKTtcbiAgICAgICAgICAgICAgICAvLyB0aGUgbGFzdCBlbnRyeSB3aWxsIGNvbnRhaW4gdGhlIGJvZHlcbiAgICAgICAgICAgICAgICBjb25zdCBib2R5ID0gZGF0YVN0cmluZ0FycmF5W2RhdGFTdHJpbmdBcnJheS5sZW5ndGggLSAxXTtcblxuICAgICAgICAgICAgICAgIC8vIGV2ZXJ5dGhpbmcgaW4gYmV0d2VlbiB0aGUgZmlyc3QgYW5kIGxhc3QgZW50cmllcyBhcmUgdGhlIGhlYWRlcnNcbiAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJzQXJyYXkgPSBkYXRhU3RyaW5nQXJyYXkuc2xpY2UoXG4gICAgICAgICAgICAgICAgICAgIDEsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTdHJpbmdBcnJheS5sZW5ndGggLSAyXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIC8vIGJ1aWxkIGFuIG9iamVjdCBvdXQgb2YgYWxsIHRoZSBoZWFkZXJzXG4gICAgICAgICAgICAgICAgY29uc3QgZW50cmllcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgICAgICBoZWFkZXJzQXJyYXkuZm9yRWFjaCgoaGVhZGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiB0aGUgaGVhZGVyIG1pZ2h0IGxvb2sgbGlrZSBcIkNvbnRlbnQtTGVuZ3RoOiAxNTMxXCIsIGJ1dCB0aGF0IGlzIGp1c3QgYSBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICogaXQgbmVlZHMgdG8gYmUgY29udmVydGVkIHRvIGEga2V5L3ZhbHVlIHBhaXJcbiAgICAgICAgICAgICAgICAgICAgICogc3BsaXQgdGhlIHN0cmluZyBhdCB0aGUgZmlyc3QgaW5zdGFuY2Ugb2YgXCI6XCJcbiAgICAgICAgICAgICAgICAgICAgICogdGhlcmUgbWF5IGJlIG1vcmUgdGhhbiBvbmUgXCI6XCIgaWYgdGhlIHZhbHVlIG9mIHRoZSBoZWFkZXIgaXMgc3VwcG9zZWQgdG8gYmUgYSBKU09OIG9iamVjdFxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyS2V5VmFsdWUgPSBoZWFkZXIuc3BsaXQobmV3IFJlZ0V4cCgvOlxccyguKikvcykpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJLZXkgPSBoZWFkZXJLZXlWYWx1ZVswXTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGhlYWRlclZhbHVlID0gaGVhZGVyS2V5VmFsdWVbMV07XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhlIHZhbHVlIG9mIHRoZSBoZWFkZXIgaXMgc3VwcG9zZWQgdG8gYmUgYSBKU09OIG9iamVjdFxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2JqZWN0ID0gSlNPTi5wYXJzZShoZWFkZXJWYWx1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGl0IGlzLCB0aGVuIGNvbnZlcnQgaXQgZnJvbSBhIHN0cmluZyB0byBhIEpTT04gb2JqZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqZWN0ICYmIHR5cGVvZiBvYmplY3QgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJWYWx1ZSA9IG9iamVjdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlLCBsZWF2ZSBpdCBhcyBhIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZW50cmllcy5zZXQoaGVhZGVyS2V5LCBoZWFkZXJWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IE9iamVjdC5mcm9tRW50cmllcyhlbnRyaWVzKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZEhlYWRlcnMgPSBoZWFkZXJzIGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gICAgICAgICAgICAgICAgY29uc3QgbmV0d29ya1Jlc3BvbnNlID0gTmV0d29ya1V0aWxzLmdldE5ldHdvcmtSZXNwb25zZShcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkSGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VCb2R5KFxuICAgICAgICAgICAgICAgICAgICAgICAgaHR0cFN0YXR1c0NvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNNZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkSGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHlcbiAgICAgICAgICAgICAgICAgICAgKSBhcyBULFxuICAgICAgICAgICAgICAgICAgICBodHRwU3RhdHVzQ29kZVxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIChodHRwU3RhdHVzQ29kZSA8IEh0dHBTdGF0dXMuU1VDQ0VTU19SQU5HRV9TVEFSVCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgaHR0cFN0YXR1c0NvZGUgPiBIdHRwU3RhdHVzLlNVQ0NFU1NfUkFOR0VfRU5EKSAmJlxuICAgICAgICAgICAgICAgICAgICAvLyBkbyBub3QgZGVzdHJveSB0aGUgcmVxdWVzdCBmb3IgdGhlIGRldmljZSBjb2RlIGZsb3dcbiAgICAgICAgICAgICAgICAgICAgbmV0d29ya1Jlc3BvbnNlLmJvZHlbXCJlcnJvclwiXSAhPT1cbiAgICAgICAgICAgICAgICAgICAgICAgIENvbnN0YW50cy5BVVRIT1JJWkFUSU9OX1BFTkRJTkdcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc29sdmUobmV0d29ya1Jlc3BvbnNlKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBzb2NrZXQub24oXCJlcnJvclwiLCAoY2h1bmspID0+IHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICBzb2NrZXQuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoY2h1bmsudG9TdHJpbmcoKSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJlcXVlc3Qub24oXCJlcnJvclwiLCAoY2h1bmspID0+IHtcbiAgICAgICAgICAgIHJlcXVlc3QuZGVzdHJveSgpO1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihjaHVuay50b1N0cmluZygpKSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuY29uc3QgbmV0d29ya1JlcXVlc3RWaWFIdHRwcyA9IDxUPihcbiAgICB1cmxTdHJpbmc6IHN0cmluZyxcbiAgICBodHRwTWV0aG9kOiBzdHJpbmcsXG4gICAgb3B0aW9ucz86IE5ldHdvcmtSZXF1ZXN0T3B0aW9ucyxcbiAgICBhZ2VudE9wdGlvbnM/OiBodHRwcy5BZ2VudE9wdGlvbnMsXG4gICAgdGltZW91dD86IG51bWJlclxuKTogUHJvbWlzZTxOZXR3b3JrUmVzcG9uc2U8VD4+ID0+IHtcbiAgICBjb25zdCBpc1Bvc3RSZXF1ZXN0ID0gaHR0cE1ldGhvZCA9PT0gSHR0cE1ldGhvZC5QT1NUO1xuICAgIGNvbnN0IGJvZHk6IHN0cmluZyA9IG9wdGlvbnM/LmJvZHkgfHwgXCJcIjtcblxuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwodXJsU3RyaW5nKTtcbiAgICBjb25zdCBoZWFkZXJzID0gb3B0aW9ucz8uaGVhZGVycyB8fCAoe30gYXMgUmVjb3JkPHN0cmluZywgc3RyaW5nPik7XG4gICAgY29uc3QgY3VzdG9tT3B0aW9uczogaHR0cHMuUmVxdWVzdE9wdGlvbnMgPSB7XG4gICAgICAgIG1ldGhvZDogaHR0cE1ldGhvZCxcbiAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgLi4uTmV0d29ya1V0aWxzLnVybFRvSHR0cE9wdGlvbnModXJsKSxcbiAgICB9O1xuXG4gICAgaWYgKGFnZW50T3B0aW9ucyAmJiBPYmplY3Qua2V5cyhhZ2VudE9wdGlvbnMpLmxlbmd0aCkge1xuICAgICAgICBjdXN0b21PcHRpb25zLmFnZW50ID0gbmV3IGh0dHBzLkFnZW50KGFnZW50T3B0aW9ucyk7XG4gICAgfVxuXG4gICAgaWYgKGlzUG9zdFJlcXVlc3QpIHtcbiAgICAgICAgLy8gbmVlZGVkIGZvciBwb3N0IHJlcXVlc3QgdG8gd29ya1xuICAgICAgICBjdXN0b21PcHRpb25zLmhlYWRlcnMgPSB7XG4gICAgICAgICAgICAuLi5jdXN0b21PcHRpb25zLmhlYWRlcnMsXG4gICAgICAgICAgICBcIkNvbnRlbnQtTGVuZ3RoXCI6IGJvZHkubGVuZ3RoLFxuICAgICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIG9wdGlvbmFsIHRpbWVvdXQgaXMgb25seSBmb3IgZ2V0IHJlcXVlc3RzIChyZWdpb25EaXNjb3ZlcnksIGZvciBleGFtcGxlKVxuICAgICAgICBpZiAodGltZW91dCkge1xuICAgICAgICAgICAgY3VzdG9tT3B0aW9ucy50aW1lb3V0ID0gdGltZW91dDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxOZXR3b3JrUmVzcG9uc2U8VD4+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgbGV0IHJlcXVlc3Q6IGh0dHAuQ2xpZW50UmVxdWVzdDtcbiAgICAgICAgLy8gbWFuYWdlZCBpZGVudGl0eSBzb3VyY2VzIHVzZSBodHRwIGluc3RlYWQgb2YgaHR0cHNcbiAgICAgICAgaWYgKGN1c3RvbU9wdGlvbnMucHJvdG9jb2wgPT09IFwiaHR0cDpcIikge1xuICAgICAgICAgICAgcmVxdWVzdCA9IGh0dHAucmVxdWVzdChjdXN0b21PcHRpb25zKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcXVlc3QgPSBodHRwcy5yZXF1ZXN0KGN1c3RvbU9wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzUG9zdFJlcXVlc3QpIHtcbiAgICAgICAgICAgIHJlcXVlc3Qud3JpdGUoYm9keSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGltZW91dCkge1xuICAgICAgICAgICAgcmVxdWVzdC5vbihcInRpbWVvdXRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlcXVlc3QuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJSZXF1ZXN0IHRpbWUgb3V0XCIpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVxdWVzdC5lbmQoKTtcblxuICAgICAgICByZXF1ZXN0Lm9uKFwicmVzcG9uc2VcIiwgKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gcmVzcG9uc2UuaGVhZGVycztcbiAgICAgICAgICAgIGNvbnN0IHN0YXR1c0NvZGUgPSByZXNwb25zZS5zdGF0dXNDb2RlIGFzIG51bWJlcjtcbiAgICAgICAgICAgIGNvbnN0IHN0YXR1c01lc3NhZ2UgPSByZXNwb25zZS5zdGF0dXNNZXNzYWdlO1xuXG4gICAgICAgICAgICBjb25zdCBkYXRhOiBCdWZmZXJbXSA9IFtdO1xuICAgICAgICAgICAgcmVzcG9uc2Uub24oXCJkYXRhXCIsIChjaHVuaykgPT4ge1xuICAgICAgICAgICAgICAgIGRhdGEucHVzaChjaHVuayk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmVzcG9uc2Uub24oXCJlbmRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGNvbWJpbmUgYWxsIHJlY2VpdmVkIGJ1ZmZlciBzdHJlYW1zIGludG8gb25lIGJ1ZmZlciwgYW5kIHRoZW4gaW50byBhIHN0cmluZ1xuICAgICAgICAgICAgICAgIGNvbnN0IGJvZHkgPSBCdWZmZXIuY29uY2F0KFsuLi5kYXRhXSkudG9TdHJpbmcoKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZEhlYWRlcnMgPSBoZWFkZXJzIGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gICAgICAgICAgICAgICAgY29uc3QgbmV0d29ya1Jlc3BvbnNlID0gTmV0d29ya1V0aWxzLmdldE5ldHdvcmtSZXNwb25zZShcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkSGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VCb2R5KFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzQ29kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c01lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWRIZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgYm9keVxuICAgICAgICAgICAgICAgICAgICApIGFzIFQsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1c0NvZGVcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAoc3RhdHVzQ29kZSA8IEh0dHBTdGF0dXMuU1VDQ0VTU19SQU5HRV9TVEFSVCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzQ29kZSA+IEh0dHBTdGF0dXMuU1VDQ0VTU19SQU5HRV9FTkQpICYmXG4gICAgICAgICAgICAgICAgICAgIC8vIGRvIG5vdCBkZXN0cm95IHRoZSByZXF1ZXN0IGZvciB0aGUgZGV2aWNlIGNvZGUgZmxvd1xuICAgICAgICAgICAgICAgICAgICBuZXR3b3JrUmVzcG9uc2UuYm9keVtcImVycm9yXCJdICE9PVxuICAgICAgICAgICAgICAgICAgICAgICAgQ29uc3RhbnRzLkFVVEhPUklaQVRJT05fUEVORElOR1xuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShuZXR3b3JrUmVzcG9uc2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJlcXVlc3Qub24oXCJlcnJvclwiLCAoY2h1bmspID0+IHtcbiAgICAgICAgICAgIHJlcXVlc3QuZGVzdHJveSgpO1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihjaHVuay50b1N0cmluZygpKSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuLyoqXG4gKiBDaGVjayBpZiBleHRyYSBwYXJzaW5nIGlzIG5lZWRlZCBvbiB0aGUgcmVwc29uc2UgZnJvbSB0aGUgc2VydmVyXG4gKiBAcGFyYW0gc3RhdHVzQ29kZSB7bnVtYmVyfSB0aGUgc3RhdHVzIGNvZGUgb2YgdGhlIHJlc3BvbnNlIGZyb20gdGhlIHNlcnZlclxuICogQHBhcmFtIHN0YXR1c01lc3NhZ2Uge3N0cmluZyB8IHVuZGVmaW5lZH0gdGhlIHN0YXR1cyBtZXNzYWdlIG9mIHRoZSByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXJcbiAqIEBwYXJhbSBoZWFkZXJzIHtSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+fSB0aGUgaGVhZGVycyBvZiB0aGUgcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVyXG4gKiBAcGFyYW0gYm9keSB7c3RyaW5nfSB0aGUgYm9keSBmcm9tIHRoZSByZXNwb25zZSBvZiB0aGUgc2VydmVyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBKU09OIHBhcnNlZCBib2R5IG9yIGVycm9yIG9iamVjdFxuICovXG5jb25zdCBwYXJzZUJvZHkgPSAoXG4gICAgc3RhdHVzQ29kZTogbnVtYmVyLFxuICAgIHN0YXR1c01lc3NhZ2U6IHN0cmluZyB8IHVuZGVmaW5lZCxcbiAgICBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+LFxuICAgIGJvZHk6IHN0cmluZ1xuKSA9PiB7XG4gICAgLypcbiAgICAgKiBJbmZvcm1hdGlvbmFsIHJlc3BvbnNlcyAoMTAwIFx1MjAxMyAxOTkpXG4gICAgICogU3VjY2Vzc2Z1bCByZXNwb25zZXMgKDIwMCBcdTIwMTMgMjk5KVxuICAgICAqIFJlZGlyZWN0aW9uIG1lc3NhZ2VzICgzMDAgXHUyMDEzIDM5OSlcbiAgICAgKiBDbGllbnQgZXJyb3IgcmVzcG9uc2VzICg0MDAgXHUyMDEzIDQ5OSlcbiAgICAgKiBTZXJ2ZXIgZXJyb3IgcmVzcG9uc2VzICg1MDAgXHUyMDEzIDU5OSlcbiAgICAgKi9cblxuICAgIGxldCBwYXJzZWRCb2R5O1xuICAgIHRyeSB7XG4gICAgICAgIHBhcnNlZEJvZHkgPSBKU09OLnBhcnNlKGJvZHkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxldCBlcnJvclR5cGU7XG4gICAgICAgIGxldCBlcnJvckRlc2NyaXB0aW9uSGVscGVyO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICBzdGF0dXNDb2RlID49IEh0dHBTdGF0dXMuQ0xJRU5UX0VSUk9SX1JBTkdFX1NUQVJUICYmXG4gICAgICAgICAgICBzdGF0dXNDb2RlIDw9IEh0dHBTdGF0dXMuQ0xJRU5UX0VSUk9SX1JBTkdFX0VORFxuICAgICAgICApIHtcbiAgICAgICAgICAgIGVycm9yVHlwZSA9IFwiY2xpZW50X2Vycm9yXCI7XG4gICAgICAgICAgICBlcnJvckRlc2NyaXB0aW9uSGVscGVyID0gXCJBIGNsaWVudFwiO1xuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgc3RhdHVzQ29kZSA+PSBIdHRwU3RhdHVzLlNFUlZFUl9FUlJPUl9SQU5HRV9TVEFSVCAmJlxuICAgICAgICAgICAgc3RhdHVzQ29kZSA8PSBIdHRwU3RhdHVzLlNFUlZFUl9FUlJPUl9SQU5HRV9FTkRcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBlcnJvclR5cGUgPSBcInNlcnZlcl9lcnJvclwiO1xuICAgICAgICAgICAgZXJyb3JEZXNjcmlwdGlvbkhlbHBlciA9IFwiQSBzZXJ2ZXJcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVycm9yVHlwZSA9IFwidW5rbm93bl9lcnJvclwiO1xuICAgICAgICAgICAgZXJyb3JEZXNjcmlwdGlvbkhlbHBlciA9IFwiQW4gdW5rbm93blwiO1xuICAgICAgICB9XG5cbiAgICAgICAgcGFyc2VkQm9keSA9IHtcbiAgICAgICAgICAgIGVycm9yOiBlcnJvclR5cGUsXG4gICAgICAgICAgICBlcnJvcl9kZXNjcmlwdGlvbjogYCR7ZXJyb3JEZXNjcmlwdGlvbkhlbHBlcn0gZXJyb3Igb2NjdXJlZC5cXG5IdHRwIHN0YXR1cyBjb2RlOiAke3N0YXR1c0NvZGV9XFxuSHR0cCBzdGF0dXMgbWVzc2FnZTogJHtcbiAgICAgICAgICAgICAgICBzdGF0dXNNZXNzYWdlIHx8IFwiVW5rbm93blwiXG4gICAgICAgICAgICB9XFxuSGVhZGVyczogJHtKU09OLnN0cmluZ2lmeShoZWFkZXJzKX1gLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBwYXJzZWRCb2R5O1xufTtcbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgTWFuYWdlZElkZW50aXR5RW52aXJvbm1lbnRWYXJpYWJsZU5hbWVzIH0gZnJvbSBcIi4uL3V0aWxzL0NvbnN0YW50cy5qc1wiO1xuXG5leHBvcnQgY29uc3QgaW52YWxpZEZpbGVFeHRlbnNpb24gPSBcImludmFsaWRfZmlsZV9leHRlbnNpb25cIjtcbmV4cG9ydCBjb25zdCBpbnZhbGlkRmlsZVBhdGggPSBcImludmFsaWRfZmlsZV9wYXRoXCI7XG5leHBvcnQgY29uc3QgaW52YWxpZE1hbmFnZWRJZGVudGl0eUlkVHlwZSA9IFwiaW52YWxpZF9tYW5hZ2VkX2lkZW50aXR5X2lkX3R5cGVcIjtcbmV4cG9ydCBjb25zdCBpbnZhbGlkU2VjcmV0ID0gXCJpbnZhbGlkX3NlY3JldFwiO1xuZXhwb3J0IGNvbnN0IG1pc3NpbmdJZCA9IFwibWlzc2luZ19jbGllbnRfaWRcIjtcbmV4cG9ydCBjb25zdCBuZXR3b3JrVW5hdmFpbGFibGUgPSBcIm5ldHdvcmtfdW5hdmFpbGFibGVcIjtcbmV4cG9ydCBjb25zdCBwbGF0Zm9ybU5vdFN1cHBvcnRlZCA9IFwicGxhdGZvcm1fbm90X3N1cHBvcnRlZFwiO1xuZXhwb3J0IGNvbnN0IHVuYWJsZVRvQ3JlYXRlQXp1cmVBcmMgPSBcInVuYWJsZV90b19jcmVhdGVfYXp1cmVfYXJjXCI7XG5leHBvcnQgY29uc3QgdW5hYmxlVG9DcmVhdGVDbG91ZFNoZWxsID0gXCJ1bmFibGVfdG9fY3JlYXRlX2Nsb3VkX3NoZWxsXCI7XG5leHBvcnQgY29uc3QgdW5hYmxlVG9DcmVhdGVTb3VyY2UgPSBcInVuYWJsZV90b19jcmVhdGVfc291cmNlXCI7XG5leHBvcnQgY29uc3QgdW5hYmxlVG9SZWFkU2VjcmV0RmlsZSA9IFwidW5hYmxlX3RvX3JlYWRfc2VjcmV0X2ZpbGVcIjtcbmV4cG9ydCBjb25zdCB1cmxQYXJzZUVycm9yID0gXCJ1cmxfcGFyc2VfZXJyb3JcIjtcbmV4cG9ydCBjb25zdCB1c2VyQXNzaWduZWROb3RBdmFpbGFibGVBdFJ1bnRpbWUgPVxuICAgIFwidXNlcl9hc3NpZ25lZF9ub3RfYXZhaWxhYmxlX2F0X3J1bnRpbWVcIjtcbmV4cG9ydCBjb25zdCB3d3dBdXRoZW50aWNhdGVIZWFkZXJNaXNzaW5nID0gXCJ3d3dfYXV0aGVudGljYXRlX2hlYWRlcl9taXNzaW5nXCI7XG5leHBvcnQgY29uc3Qgd3d3QXV0aGVudGljYXRlSGVhZGVyVW5zdXBwb3J0ZWRGb3JtYXQgPVxuICAgIFwid3d3X2F1dGhlbnRpY2F0ZV9oZWFkZXJfdW5zdXBwb3J0ZWRfZm9ybWF0XCI7XG5cbmV4cG9ydCBjb25zdCBNc2lFbnZpcm9ubWVudFZhcmlhYmxlVXJsTWFsZm9ybWVkRXJyb3JDb2RlcyA9IHtcbiAgICBbTWFuYWdlZElkZW50aXR5RW52aXJvbm1lbnRWYXJpYWJsZU5hbWVzLkFaVVJFX1BPRF9JREVOVElUWV9BVVRIT1JJVFlfSE9TVF06XG4gICAgICAgIFwiYXp1cmVfcG9kX2lkZW50aXR5X2F1dGhvcml0eV9ob3N0X3VybF9tYWxmb3JtZWRcIixcbiAgICBbTWFuYWdlZElkZW50aXR5RW52aXJvbm1lbnRWYXJpYWJsZU5hbWVzLklERU5USVRZX0VORFBPSU5UXTpcbiAgICAgICAgXCJpZGVudGl0eV9lbmRwb2ludF91cmxfbWFsZm9ybWVkXCIsXG4gICAgW01hbmFnZWRJZGVudGl0eUVudmlyb25tZW50VmFyaWFibGVOYW1lcy5JTURTX0VORFBPSU5UXTpcbiAgICAgICAgXCJpbWRzX2VuZHBvaW50X3VybF9tYWxmb3JtZWRcIixcbiAgICBbTWFuYWdlZElkZW50aXR5RW52aXJvbm1lbnRWYXJpYWJsZU5hbWVzLk1TSV9FTkRQT0lOVF06XG4gICAgICAgIFwibXNpX2VuZHBvaW50X3VybF9tYWxmb3JtZWRcIixcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBNc2lFbnZpcm9ubWVudFZhcmlhYmxlRXJyb3JDb2RlcyA9XG4gICAgKHR5cGVvZiBNc2lFbnZpcm9ubWVudFZhcmlhYmxlVXJsTWFsZm9ybWVkRXJyb3JDb2Rlcylba2V5b2YgdHlwZW9mIE1zaUVudmlyb25tZW50VmFyaWFibGVVcmxNYWxmb3JtZWRFcnJvckNvZGVzXTtcbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQXV0aEVycm9yIH0gZnJvbSBcIkBhenVyZS9tc2FsLWNvbW1vbi9ub2RlXCI7XG5pbXBvcnQgKiBhcyBNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzIGZyb20gXCIuL01hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMuanNcIjtcbmltcG9ydCB7IE1hbmFnZWRJZGVudGl0eUVudmlyb25tZW50VmFyaWFibGVOYW1lcyB9IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcbmV4cG9ydCB7IE1hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMgfTtcblxuLyoqXG4gKiBNYW5hZ2VkSWRlbnRpdHlFcnJvck1lc3NhZ2UgY2xhc3MgY29udGFpbmluZyBzdHJpbmcgY29uc3RhbnRzIHVzZWQgYnkgZXJyb3IgY29kZXMgYW5kIG1lc3NhZ2VzLlxuICovXG5leHBvcnQgY29uc3QgTWFuYWdlZElkZW50aXR5RXJyb3JNZXNzYWdlcyA9IHtcbiAgICBbTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy5pbnZhbGlkRmlsZUV4dGVuc2lvbl06XG4gICAgICAgIFwiVGhlIGZpbGUgcGF0aCBpbiB0aGUgV1dXLUF1dGhlbnRpY2F0ZSBoZWFkZXIgZG9lcyBub3QgY29udGFpbiBhIC5rZXkgZmlsZS5cIixcbiAgICBbTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy5pbnZhbGlkRmlsZVBhdGhdOlxuICAgICAgICBcIlRoZSBmaWxlIHBhdGggaW4gdGhlIFdXVy1BdXRoZW50aWNhdGUgaGVhZGVyIGlzIG5vdCBpbiBhIHZhbGlkIFdpbmRvd3Mgb3IgTGludXggRm9ybWF0LlwiLFxuICAgIFtNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzLmludmFsaWRNYW5hZ2VkSWRlbnRpdHlJZFR5cGVdOlxuICAgICAgICBcIk1vcmUgdGhhbiBvbmUgTWFuYWdlZElkZW50aXR5SWRUeXBlIHdhcyBwcm92aWRlZC5cIixcbiAgICBbTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy5pbnZhbGlkU2VjcmV0XTpcbiAgICAgICAgXCJUaGUgc2VjcmV0IGluIHRoZSBmaWxlIG9uIHRoZSBmaWxlIHBhdGggaW4gdGhlIFdXVy1BdXRoZW50aWNhdGUgaGVhZGVyIGlzIGdyZWF0ZXIgdGhhbiA0MDk2IGJ5dGVzLlwiLFxuICAgIFtNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzLnBsYXRmb3JtTm90U3VwcG9ydGVkXTpcbiAgICAgICAgXCJUaGUgcGxhdGZvcm0gaXMgbm90IHN1cHBvcnRlZCBieSBBenVyZSBBcmMuIEF6dXJlIEFyYyBvbmx5IHN1cHBvcnRzIFdpbmRvd3MgYW5kIExpbnV4LlwiLFxuICAgIFtNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzLm1pc3NpbmdJZF06XG4gICAgICAgIFwiQSBNYW5hZ2VkSWRlbnRpdHlJZCBpZCB3YXMgbm90IHByb3ZpZGVkLlwiLFxuICAgIFtNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzLk1zaUVudmlyb25tZW50VmFyaWFibGVVcmxNYWxmb3JtZWRFcnJvckNvZGVzXG4gICAgICAgIC5BWlVSRV9QT0RfSURFTlRJVFlfQVVUSE9SSVRZX0hPU1RdOiBgVGhlIE1hbmFnZWQgSWRlbnRpdHkncyAnJHtNYW5hZ2VkSWRlbnRpdHlFbnZpcm9ubWVudFZhcmlhYmxlTmFtZXMuQVpVUkVfUE9EX0lERU5USVRZX0FVVEhPUklUWV9IT1NUfScgZW52aXJvbm1lbnQgdmFyaWFibGUgaXMgbWFsZm9ybWVkLmAsXG4gICAgW01hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMuTXNpRW52aXJvbm1lbnRWYXJpYWJsZVVybE1hbGZvcm1lZEVycm9yQ29kZXNcbiAgICAgICAgLklERU5USVRZX0VORFBPSU5UXTogYFRoZSBNYW5hZ2VkIElkZW50aXR5J3MgJyR7TWFuYWdlZElkZW50aXR5RW52aXJvbm1lbnRWYXJpYWJsZU5hbWVzLklERU5USVRZX0VORFBPSU5UfScgZW52aXJvbm1lbnQgdmFyaWFibGUgaXMgbWFsZm9ybWVkLmAsXG4gICAgW01hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMuTXNpRW52aXJvbm1lbnRWYXJpYWJsZVVybE1hbGZvcm1lZEVycm9yQ29kZXNcbiAgICAgICAgLklNRFNfRU5EUE9JTlRdOiBgVGhlIE1hbmFnZWQgSWRlbnRpdHkncyAnJHtNYW5hZ2VkSWRlbnRpdHlFbnZpcm9ubWVudFZhcmlhYmxlTmFtZXMuSU1EU19FTkRQT0lOVH0nIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIG1hbGZvcm1lZC5gLFxuICAgIFtNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzLk1zaUVudmlyb25tZW50VmFyaWFibGVVcmxNYWxmb3JtZWRFcnJvckNvZGVzXG4gICAgICAgIC5NU0lfRU5EUE9JTlRdOiBgVGhlIE1hbmFnZWQgSWRlbnRpdHkncyAnJHtNYW5hZ2VkSWRlbnRpdHlFbnZpcm9ubWVudFZhcmlhYmxlTmFtZXMuTVNJX0VORFBPSU5UfScgZW52aXJvbm1lbnQgdmFyaWFibGUgaXMgbWFsZm9ybWVkLmAsXG4gICAgW01hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMubmV0d29ya1VuYXZhaWxhYmxlXTpcbiAgICAgICAgXCJBdXRoZW50aWNhdGlvbiB1bmF2YWlsYWJsZS4gVGhlIHJlcXVlc3QgdG8gdGhlIG1hbmFnZWQgaWRlbnRpdHkgZW5kcG9pbnQgdGltZWQgb3V0LlwiLFxuICAgIFtNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzLnVuYWJsZVRvQ3JlYXRlQXp1cmVBcmNdOlxuICAgICAgICBcIkF6dXJlIEFyYyBNYW5hZ2VkIElkZW50aXRpZXMgY2FuIG9ubHkgYmUgc3lzdGVtIGFzc2lnbmVkLlwiLFxuICAgIFtNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzLnVuYWJsZVRvQ3JlYXRlQ2xvdWRTaGVsbF06XG4gICAgICAgIFwiQ2xvdWQgU2hlbGwgTWFuYWdlZCBJZGVudGl0aWVzIGNhbiBvbmx5IGJlIHN5c3RlbSBhc3NpZ25lZC5cIixcbiAgICBbTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy51bmFibGVUb0NyZWF0ZVNvdXJjZV06XG4gICAgICAgIFwiVW5hYmxlIHRvIGNyZWF0ZSBhIE1hbmFnZWQgSWRlbnRpdHkgc291cmNlIGJhc2VkIG9uIGVudmlyb25tZW50IHZhcmlhYmxlcy5cIixcbiAgICBbTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy51bmFibGVUb1JlYWRTZWNyZXRGaWxlXTpcbiAgICAgICAgXCJVbmFibGUgdG8gcmVhZCB0aGUgc2VjcmV0IGZpbGUuXCIsXG4gICAgW01hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMudXNlckFzc2lnbmVkTm90QXZhaWxhYmxlQXRSdW50aW1lXTpcbiAgICAgICAgXCJTZXJ2aWNlIEZhYnJpYyB1c2VyIGFzc2lnbmVkIG1hbmFnZWQgaWRlbnRpdHkgQ2xpZW50SWQgb3IgUmVzb3VyY2VJZCBpcyBub3QgY29uZmlndXJhYmxlIGF0IHJ1bnRpbWUuXCIsXG4gICAgW01hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMud3d3QXV0aGVudGljYXRlSGVhZGVyTWlzc2luZ106XG4gICAgICAgIFwiQSA0MDEgcmVzcG9uc2Ugd2FzIHJlY2VpdmVkIGZvcm0gdGhlIEF6dXJlIEFyYyBNYW5hZ2VkIElkZW50aXR5LCBidXQgdGhlIHd3dy1hdXRoZW50aWNhdGUgaGVhZGVyIGlzIG1pc3NpbmcuXCIsXG4gICAgW01hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMud3d3QXV0aGVudGljYXRlSGVhZGVyVW5zdXBwb3J0ZWRGb3JtYXRdOlxuICAgICAgICBcIkEgNDAxIHJlc3BvbnNlIHdhcyByZWNlaXZlZCBmb3JtIHRoZSBBenVyZSBBcmMgTWFuYWdlZCBJZGVudGl0eSwgYnV0IHRoZSB3d3ctYXV0aGVudGljYXRlIGhlYWRlciBpcyBpbiBhbiB1bnN1cHBvcnRlZCBmb3JtYXQuXCIsXG59O1xuXG5leHBvcnQgY2xhc3MgTWFuYWdlZElkZW50aXR5RXJyb3IgZXh0ZW5kcyBBdXRoRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKGVycm9yQ29kZTogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKGVycm9yQ29kZSwgTWFuYWdlZElkZW50aXR5RXJyb3JNZXNzYWdlc1tlcnJvckNvZGVdKTtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJNYW5hZ2VkSWRlbnRpdHlFcnJvclwiO1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgTWFuYWdlZElkZW50aXR5RXJyb3IucHJvdG90eXBlKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVNYW5hZ2VkSWRlbnRpdHlFcnJvcihcbiAgICBlcnJvckNvZGU6IHN0cmluZ1xuKTogTWFuYWdlZElkZW50aXR5RXJyb3Ige1xuICAgIHJldHVybiBuZXcgTWFuYWdlZElkZW50aXR5RXJyb3IoZXJyb3JDb2RlKTtcbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQXV0aEVycm9yIH0gZnJvbSBcIkBhenVyZS9tc2FsLWNvbW1vbi9ub2RlXCI7XG5cbi8qKlxuICogTm9kZUF1dGhFcnJvck1lc3NhZ2UgY2xhc3MgY29udGFpbmluZyBzdHJpbmcgY29uc3RhbnRzIHVzZWQgYnkgZXJyb3IgY29kZXMgYW5kIG1lc3NhZ2VzLlxuICovXG5leHBvcnQgY29uc3QgTm9kZUF1dGhFcnJvck1lc3NhZ2UgPSB7XG4gICAgaW52YWxpZExvb3BiYWNrQWRkcmVzc1R5cGU6IHtcbiAgICAgICAgY29kZTogXCJpbnZhbGlkX2xvb3BiYWNrX3NlcnZlcl9hZGRyZXNzX3R5cGVcIixcbiAgICAgICAgZGVzYzogXCJMb29wYmFjayBzZXJ2ZXIgYWRkcmVzcyBpcyBub3QgdHlwZSBzdHJpbmcuIFRoaXMgaXMgdW5leHBlY3RlZC5cIixcbiAgICB9LFxuICAgIHVuYWJsZVRvTG9hZFJlZGlyZWN0VXJpOiB7XG4gICAgICAgIGNvZGU6IFwidW5hYmxlX3RvX2xvYWRfcmVkaXJlY3RVcmxcIixcbiAgICAgICAgZGVzYzogXCJMb29wYmFjayBzZXJ2ZXIgY2FsbGJhY2sgd2FzIGludm9rZWQgd2l0aG91dCBhIHVybC4gVGhpcyBpcyB1bmV4cGVjdGVkLlwiLFxuICAgIH0sXG4gICAgbm9BdXRoQ29kZUluUmVzcG9uc2U6IHtcbiAgICAgICAgY29kZTogXCJub19hdXRoX2NvZGVfaW5fcmVzcG9uc2VcIixcbiAgICAgICAgZGVzYzogXCJObyBhdXRoIGNvZGUgZm91bmQgaW4gdGhlIHNlcnZlciByZXNwb25zZS4gUGxlYXNlIGNoZWNrIHlvdXIgbmV0d29yayB0cmFjZSB0byBkZXRlcm1pbmUgd2hhdCBoYXBwZW5lZC5cIixcbiAgICB9LFxuICAgIG5vTG9vcGJhY2tTZXJ2ZXJFeGlzdHM6IHtcbiAgICAgICAgY29kZTogXCJub19sb29wYmFja19zZXJ2ZXJfZXhpc3RzXCIsXG4gICAgICAgIGRlc2M6IFwiTm8gbG9vcGJhY2sgc2VydmVyIGV4aXN0cyB5ZXQuXCIsXG4gICAgfSxcbiAgICBsb29wYmFja1NlcnZlckFscmVhZHlFeGlzdHM6IHtcbiAgICAgICAgY29kZTogXCJsb29wYmFja19zZXJ2ZXJfYWxyZWFkeV9leGlzdHNcIixcbiAgICAgICAgZGVzYzogXCJMb29wYmFjayBzZXJ2ZXIgYWxyZWFkeSBleGlzdHMuIENhbm5vdCBjcmVhdGUgYW5vdGhlci5cIixcbiAgICB9LFxuICAgIGxvb3BiYWNrU2VydmVyVGltZW91dDoge1xuICAgICAgICBjb2RlOiBcImxvb3BiYWNrX3NlcnZlcl90aW1lb3V0XCIsXG4gICAgICAgIGRlc2M6IFwiVGltZWQgb3V0IHdhaXRpbmcgZm9yIGF1dGggY29kZSBsaXN0ZW5lciB0byBiZSByZWdpc3RlcmVkLlwiLFxuICAgIH0sXG4gICAgc3RhdGVOb3RGb3VuZEVycm9yOiB7XG4gICAgICAgIGNvZGU6IFwic3RhdGVfbm90X2ZvdW5kXCIsXG4gICAgICAgIGRlc2M6IFwiU3RhdGUgbm90IGZvdW5kLiBQbGVhc2UgdmVyaWZ5IHRoYXQgdGhlIHJlcXVlc3Qgb3JpZ2luYXRlZCBmcm9tIG1zYWwuXCIsXG4gICAgfSxcbiAgICB0aHVtYnByaW50TWlzc2luZzoge1xuICAgICAgICBjb2RlOiBcInRodW1icHJpbnRfbWlzc2luZ19mcm9tX2NsaWVudF9jZXJ0aWZpY2F0ZVwiLFxuICAgICAgICBkZXNjOiBcIkNsaWVudCBjZXJ0aWZpY2F0ZSBkb2VzIG5vdCBjb250YWluIGEgU0hBLTEgb3IgU0hBLTI1NiB0aHVtYnByaW50LlwiLFxuICAgIH0sXG59O1xuXG5leHBvcnQgY2xhc3MgTm9kZUF1dGhFcnJvciBleHRlbmRzIEF1dGhFcnJvciB7XG4gICAgY29uc3RydWN0b3IoZXJyb3JDb2RlOiBzdHJpbmcsIGVycm9yTWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihlcnJvckNvZGUsIGVycm9yTWVzc2FnZSk7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiTm9kZUF1dGhFcnJvclwiO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gZXJyb3IgdGhyb3duIGlmIGxvb3BiYWNrIHNlcnZlciBhZGRyZXNzIGlzIG9mIHR5cGUgc3RyaW5nLlxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVJbnZhbGlkTG9vcGJhY2tBZGRyZXNzVHlwZUVycm9yKCk6IE5vZGVBdXRoRXJyb3Ige1xuICAgICAgICByZXR1cm4gbmV3IE5vZGVBdXRoRXJyb3IoXG4gICAgICAgICAgICBOb2RlQXV0aEVycm9yTWVzc2FnZS5pbnZhbGlkTG9vcGJhY2tBZGRyZXNzVHlwZS5jb2RlLFxuICAgICAgICAgICAgYCR7Tm9kZUF1dGhFcnJvck1lc3NhZ2UuaW52YWxpZExvb3BiYWNrQWRkcmVzc1R5cGUuZGVzY31gXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBlcnJvciB0aHJvd24gaWYgdGhlIGxvb3BiYWNrIHNlcnZlciBpcyB1bmFibGUgdG8gZ2V0IGEgdXJsLlxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVVbmFibGVUb0xvYWRSZWRpcmVjdFVybEVycm9yKCk6IE5vZGVBdXRoRXJyb3Ige1xuICAgICAgICByZXR1cm4gbmV3IE5vZGVBdXRoRXJyb3IoXG4gICAgICAgICAgICBOb2RlQXV0aEVycm9yTWVzc2FnZS51bmFibGVUb0xvYWRSZWRpcmVjdFVyaS5jb2RlLFxuICAgICAgICAgICAgYCR7Tm9kZUF1dGhFcnJvck1lc3NhZ2UudW5hYmxlVG9Mb2FkUmVkaXJlY3RVcmkuZGVzY31gXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBlcnJvciB0aHJvd24gaWYgdGhlIHNlcnZlciByZXNwb25zZSBkb2VzIG5vdCBjb250YWluIGFuIGF1dGggY29kZS5cbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlTm9BdXRoQ29kZUluUmVzcG9uc2VFcnJvcigpOiBOb2RlQXV0aEVycm9yIHtcbiAgICAgICAgcmV0dXJuIG5ldyBOb2RlQXV0aEVycm9yKFxuICAgICAgICAgICAgTm9kZUF1dGhFcnJvck1lc3NhZ2Uubm9BdXRoQ29kZUluUmVzcG9uc2UuY29kZSxcbiAgICAgICAgICAgIGAke05vZGVBdXRoRXJyb3JNZXNzYWdlLm5vQXV0aENvZGVJblJlc3BvbnNlLmRlc2N9YFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gZXJyb3IgdGhyb3duIGlmIHRoZSBsb29wYmFjayBzZXJ2ZXIgaGFzIG5vdCBiZWVuIHNwdW4gdXAgeWV0LlxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVOb0xvb3BiYWNrU2VydmVyRXhpc3RzRXJyb3IoKTogTm9kZUF1dGhFcnJvciB7XG4gICAgICAgIHJldHVybiBuZXcgTm9kZUF1dGhFcnJvcihcbiAgICAgICAgICAgIE5vZGVBdXRoRXJyb3JNZXNzYWdlLm5vTG9vcGJhY2tTZXJ2ZXJFeGlzdHMuY29kZSxcbiAgICAgICAgICAgIGAke05vZGVBdXRoRXJyb3JNZXNzYWdlLm5vTG9vcGJhY2tTZXJ2ZXJFeGlzdHMuZGVzY31gXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBlcnJvciB0aHJvd24gaWYgYSBsb29wYmFjayBzZXJ2ZXIgYWxyZWFkeSBleGlzdHMgd2hlbiBhdHRlbXB0aW5nIHRvIGNyZWF0ZSBhbm90aGVyIG9uZS5cbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlTG9vcGJhY2tTZXJ2ZXJBbHJlYWR5RXhpc3RzRXJyb3IoKTogTm9kZUF1dGhFcnJvciB7XG4gICAgICAgIHJldHVybiBuZXcgTm9kZUF1dGhFcnJvcihcbiAgICAgICAgICAgIE5vZGVBdXRoRXJyb3JNZXNzYWdlLmxvb3BiYWNrU2VydmVyQWxyZWFkeUV4aXN0cy5jb2RlLFxuICAgICAgICAgICAgYCR7Tm9kZUF1dGhFcnJvck1lc3NhZ2UubG9vcGJhY2tTZXJ2ZXJBbHJlYWR5RXhpc3RzLmRlc2N9YFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gZXJyb3IgdGhyb3duIGlmIHRoZSBsb29wYmFjayBzZXJ2ZXIgdGltZXMgb3V0IHJlZ2lzdGVyaW5nIHRoZSBhdXRoIGNvZGUgbGlzdGVuZXIuXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZUxvb3BiYWNrU2VydmVyVGltZW91dEVycm9yKCk6IE5vZGVBdXRoRXJyb3Ige1xuICAgICAgICByZXR1cm4gbmV3IE5vZGVBdXRoRXJyb3IoXG4gICAgICAgICAgICBOb2RlQXV0aEVycm9yTWVzc2FnZS5sb29wYmFja1NlcnZlclRpbWVvdXQuY29kZSxcbiAgICAgICAgICAgIGAke05vZGVBdXRoRXJyb3JNZXNzYWdlLmxvb3BiYWNrU2VydmVyVGltZW91dC5kZXNjfWBcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGVycm9yIHRocm93biB3aGVuIHRoZSBzdGF0ZSBpcyBub3QgcHJlc2VudC5cbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlU3RhdGVOb3RGb3VuZEVycm9yKCk6IE5vZGVBdXRoRXJyb3Ige1xuICAgICAgICByZXR1cm4gbmV3IE5vZGVBdXRoRXJyb3IoXG4gICAgICAgICAgICBOb2RlQXV0aEVycm9yTWVzc2FnZS5zdGF0ZU5vdEZvdW5kRXJyb3IuY29kZSxcbiAgICAgICAgICAgIE5vZGVBdXRoRXJyb3JNZXNzYWdlLnN0YXRlTm90Rm91bmRFcnJvci5kZXNjXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBlcnJvciB0aHJvd24gd2hlbiBjbGllbnQgY2VydGlmaWNhdGUgd2FzIHByb3ZpZGVkLCBidXQgbmVpdGhlciB0aGUgU0hBLTEgb3IgU0hBLTI1NiB0aHVtYnByaW50cyB3ZXJlIHByb3ZpZGVkXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZVRodW1icHJpbnRNaXNzaW5nRXJyb3IoKTogTm9kZUF1dGhFcnJvciB7XG4gICAgICAgIHJldHVybiBuZXcgTm9kZUF1dGhFcnJvcihcbiAgICAgICAgICAgIE5vZGVBdXRoRXJyb3JNZXNzYWdlLnRodW1icHJpbnRNaXNzaW5nLmNvZGUsXG4gICAgICAgICAgICBOb2RlQXV0aEVycm9yTWVzc2FnZS50aHVtYnByaW50TWlzc2luZy5kZXNjXG4gICAgICAgICk7XG4gICAgfVxufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICAgIExvZ2dlck9wdGlvbnMsXG4gICAgSU5ldHdvcmtNb2R1bGUsXG4gICAgTG9nTGV2ZWwsXG4gICAgUHJvdG9jb2xNb2RlLFxuICAgIElDYWNoZVBsdWdpbixcbiAgICBDb25zdGFudHMsXG4gICAgQXp1cmVDbG91ZEluc3RhbmNlLFxuICAgIEF6dXJlQ2xvdWRPcHRpb25zLFxuICAgIEFwcGxpY2F0aW9uVGVsZW1ldHJ5LFxuICAgIElOYXRpdmVCcm9rZXJQbHVnaW4sXG4gICAgQ2xpZW50QXNzZXJ0aW9uQ2FsbGJhY2ssXG59IGZyb20gXCJAYXp1cmUvbXNhbC1jb21tb24vbm9kZVwiO1xuaW1wb3J0IHsgSHR0cENsaWVudCB9IGZyb20gXCIuLi9uZXR3b3JrL0h0dHBDbGllbnQuanNcIjtcbmltcG9ydCBodHRwIGZyb20gXCJodHRwXCI7XG5pbXBvcnQgaHR0cHMgZnJvbSBcImh0dHBzXCI7XG5pbXBvcnQgeyBNYW5hZ2VkSWRlbnRpdHlJZCB9IGZyb20gXCIuL01hbmFnZWRJZGVudGl0eUlkLmpzXCI7XG5pbXBvcnQgeyBOb2RlQXV0aEVycm9yIH0gZnJvbSBcIi4uL2Vycm9yL05vZGVBdXRoRXJyb3IuanNcIjtcblxuLyoqXG4gKiAtIGNsaWVudElkICAgICAgICAgICAgICAgLSBDbGllbnQgaWQgb2YgdGhlIGFwcGxpY2F0aW9uLlxuICogLSBhdXRob3JpdHkgICAgICAgICAgICAgIC0gVXJsIG9mIHRoZSBhdXRob3JpdHkuIElmIG5vIHZhbHVlIGlzIHNldCwgZGVmYXVsdHMgdG8gaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tL2NvbW1vbi5cbiAqIC0ga25vd25BdXRob3JpdGllcyAgICAgICAtIE5lZWRlZCBmb3IgQXp1cmUgQjJDIGFuZCBBREZTLiBBbGwgYXV0aG9yaXRpZXMgdGhhdCB3aWxsIGJlIHVzZWQgaW4gdGhlIGNsaWVudCBhcHBsaWNhdGlvbi4gT25seSB0aGUgaG9zdCBvZiB0aGUgYXV0aG9yaXR5IHNob3VsZCBiZSBwYXNzZWQgaW4uXG4gKiAtIGNsaWVudFNlY3JldCAgICAgICAgICAgLSBTZWNyZXQgc3RyaW5nIHRoYXQgdGhlIGFwcGxpY2F0aW9uIHVzZXMgd2hlbiByZXF1ZXN0aW5nIGEgdG9rZW4uIE9ubHkgdXNlZCBpbiBjb25maWRlbnRpYWwgY2xpZW50IGFwcGxpY2F0aW9ucy4gQ2FuIGJlIGNyZWF0ZWQgaW4gdGhlIEF6dXJlIGFwcCByZWdpc3RyYXRpb24gcG9ydGFsLlxuICogLSBjbGllbnRBc3NlcnRpb24gICAgICAgIC0gQSBDbGllbnRBc3NlcnRpb24gb2JqZWN0IGNvbnRhaW5pbmcgYW4gYXNzZXJ0aW9uIHN0cmluZyBvciBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBhc3NlcnRpb24gc3RyaW5nIHRoYXQgdGhlIGFwcGxpY2F0aW9uIHVzZXMgd2hlbiByZXF1ZXN0aW5nIGEgdG9rZW4sIGFzIHdlbGwgYXMgdGhlIGFzc2VydGlvbidzIHR5cGUgKHVybjppZXRmOnBhcmFtczpvYXV0aDpjbGllbnQtYXNzZXJ0aW9uLXR5cGU6and0LWJlYXJlcikuIE9ubHkgdXNlZCBpbiBjb25maWRlbnRpYWwgY2xpZW50IGFwcGxpY2F0aW9ucy5cbiAqIC0gY2xpZW50Q2VydGlmaWNhdGUgICAgICAtIENlcnRpZmljYXRlIHRoYXQgdGhlIGFwcGxpY2F0aW9uIHVzZXMgd2hlbiByZXF1ZXN0aW5nIGEgdG9rZW4uIE9ubHkgdXNlZCBpbiBjb25maWRlbnRpYWwgY2xpZW50IGFwcGxpY2F0aW9ucy4gUmVxdWlyZXMgaGV4IGVuY29kZWQgWC41MDkgU0hBLTEgb3IgU0hBLTI1NiB0aHVtYnByaW50IG9mIHRoZSBjZXJ0aWZpY2F0ZSwgYW5kIHRoZSBQRU0gZW5jb2RlZCBwcml2YXRlIGtleSAoc3RyaW5nIHNob3VsZCBjb250YWluIC0tLS0tQkVHSU4gUFJJVkFURSBLRVktLS0tLSAuLi4gLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLSApXG4gKiAtIHByb3RvY29sTW9kZSAgICAgICAgICAgLSBFbnVtIHRoYXQgcmVwcmVzZW50cyB0aGUgcHJvdG9jb2wgdGhhdCBtc2FsIGZvbGxvd3MuIFVzZWQgZm9yIGNvbmZpZ3VyaW5nIHByb3BlciBlbmRwb2ludHMuXG4gKiAtIHNraXBBdXRob3JpdHlNZXRhZGF0YUNhY2hlIC0gQSBmbGFnIHRvIGNob29zZSB3aGV0aGVyIHRvIHVzZSBvciBub3QgdXNlIHRoZSBsb2NhbCBtZXRhZGF0YSBjYWNoZSBkdXJpbmcgYXV0aG9yaXR5IGluaXRpYWxpemF0aW9uLiBEZWZhdWx0cyB0byBmYWxzZS5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHR5cGUgTm9kZUF1dGhPcHRpb25zID0ge1xuICAgIGNsaWVudElkOiBzdHJpbmc7XG4gICAgYXV0aG9yaXR5Pzogc3RyaW5nO1xuICAgIGNsaWVudFNlY3JldD86IHN0cmluZztcbiAgICBjbGllbnRBc3NlcnRpb24/OiBzdHJpbmcgfCBDbGllbnRBc3NlcnRpb25DYWxsYmFjaztcbiAgICBjbGllbnRDZXJ0aWZpY2F0ZT86IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXByZWNhdGVkIFVzZSB0aHVtYnByaW50U2hhMiBwcm9wZXJ0eSBpbnN0ZWFkLiBUaHVtYnByaW50IG5lZWRzIHRvIGJlIGNvbXB1dGVkIHdpdGggU0hBLTI1NiBhbGdvcml0aG0uXG4gICAgICAgICAqIFNIQS0xIGlzIG9ubHkgbmVlZGVkIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSB3aXRoIG9sZGVyIHZlcnNpb25zIG9mIEFERlMuXG4gICAgICAgICAqL1xuICAgICAgICB0aHVtYnByaW50Pzogc3RyaW5nO1xuICAgICAgICB0aHVtYnByaW50U2hhMjU2Pzogc3RyaW5nO1xuICAgICAgICBwcml2YXRlS2V5OiBzdHJpbmc7XG4gICAgICAgIHg1Yz86IHN0cmluZztcbiAgICB9O1xuICAgIGtub3duQXV0aG9yaXRpZXM/OiBBcnJheTxzdHJpbmc+O1xuICAgIGNsb3VkRGlzY292ZXJ5TWV0YWRhdGE/OiBzdHJpbmc7XG4gICAgYXV0aG9yaXR5TWV0YWRhdGE/OiBzdHJpbmc7XG4gICAgY2xpZW50Q2FwYWJpbGl0aWVzPzogQXJyYXk8c3RyaW5nPjtcbiAgICBwcm90b2NvbE1vZGU/OiBQcm90b2NvbE1vZGU7XG4gICAgYXp1cmVDbG91ZE9wdGlvbnM/OiBBenVyZUNsb3VkT3B0aW9ucztcbiAgICBza2lwQXV0aG9yaXR5TWV0YWRhdGFDYWNoZT86IGJvb2xlYW47XG59O1xuXG4vKipcbiAqIFVzZSB0aGlzIHRvIGNvbmZpZ3VyZSB0aGUgYmVsb3cgY2FjaGUgY29uZmlndXJhdGlvbiBvcHRpb25zOlxuICpcbiAqIC0gY2FjaGVQbHVnaW4gICAtIFBsdWdpbiBmb3IgcmVhZGluZyBhbmQgd3JpdGluZyB0b2tlbiBjYWNoZSB0byBkaXNrLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgdHlwZSBDYWNoZU9wdGlvbnMgPSB7XG4gICAgY2FjaGVQbHVnaW4/OiBJQ2FjaGVQbHVnaW47XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgY2xhaW1zLWJhc2VkLWNhY2hpbmcgZnVuY3Rpb25hbGl0eSB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgdmVyc2lvbiBvZiBNU0FMSlNcbiAgICAgKi9cbiAgICBjbGFpbXNCYXNlZENhY2hpbmdFbmFibGVkPzogYm9vbGVhbjtcbn07XG5cbi8qKlxuICogVXNlIHRoaXMgdG8gY29uZmlndXJlIHRoZSBiZWxvdyBicm9rZXIgb3B0aW9uczpcbiAqIC0gbmF0aXZlQnJva2VyUGx1Z2luIC0gTmF0aXZlIGJyb2tlciBpbXBsZW1lbnRhdGlvbiAoc2hvdWxkIGJlIGltcG9ydGVkIGZyb20gbXNhbC1ub2RlLWV4dGVuc2lvbnMpXG4gKlxuICogTm90ZTogVGhlc2Ugb3B0aW9ucyBhcmUgb25seSBhdmFpbGFibGUgZm9yIFB1YmxpY0NsaWVudEFwcGxpY2F0aW9ucyB1c2luZyB0aGUgQXV0aG9yaXphdGlvbiBDb2RlIEZsb3dcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHR5cGUgQnJva2VyT3B0aW9ucyA9IHtcbiAgICBuYXRpdmVCcm9rZXJQbHVnaW4/OiBJTmF0aXZlQnJva2VyUGx1Z2luO1xufTtcblxuLyoqXG4gKiBUeXBlIGZvciBjb25maWd1cmluZyBsb2dnZXIgYW5kIGh0dHAgY2xpZW50IG9wdGlvbnNcbiAqXG4gKiAtIGxvZ2dlciAgICAgICAgICAgICAgICAgICAgICAgLSBVc2VkIHRvIGluaXRpYWxpemUgdGhlIExvZ2dlciBvYmplY3Q7IFRPRE86IEV4cGFuZCBvbiBsb2dnZXIgZGV0YWlscyBvciBsaW5rIHRvIHRoZSBkb2N1bWVudGF0aW9uIG9uIGxvZ2dlclxuICogLSBuZXR3b3JrQ2xpZW50ICAgICAgICAgICAgICAgIC0gSHR0cCBjbGllbnQgdXNlZCBmb3IgYWxsIGh0dHAgZ2V0IGFuZCBwb3N0IGNhbGxzLiBEZWZhdWx0cyB0byB1c2luZyBNU0FMJ3MgZGVmYXVsdCBodHRwIGNsaWVudC5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHR5cGUgTm9kZVN5c3RlbU9wdGlvbnMgPSB7XG4gICAgbG9nZ2VyT3B0aW9ucz86IExvZ2dlck9wdGlvbnM7XG4gICAgbmV0d29ya0NsaWVudD86IElOZXR3b3JrTW9kdWxlO1xuICAgIHByb3h5VXJsPzogc3RyaW5nO1xuICAgIGN1c3RvbUFnZW50T3B0aW9ucz86IGh0dHAuQWdlbnRPcHRpb25zIHwgaHR0cHMuQWdlbnRPcHRpb25zO1xuICAgIGRpc2FibGVJbnRlcm5hbFJldHJpZXM/OiBib29sZWFuO1xufTtcblxuLyoqIEBwdWJsaWMgKi9cbmV4cG9ydCB0eXBlIE5vZGVUZWxlbWV0cnlPcHRpb25zID0ge1xuICAgIGFwcGxpY2F0aW9uPzogQXBwbGljYXRpb25UZWxlbWV0cnk7XG59O1xuXG4vKipcbiAqIFVzZSB0aGUgY29uZmlndXJhdGlvbiBvYmplY3QgdG8gY29uZmlndXJlIE1TQUwgYW5kIGluaXRpYWxpemUgdGhlIGNsaWVudCBhcHBsaWNhdGlvbiBvYmplY3RcbiAqXG4gKiAtIGF1dGg6IHRoaXMgaXMgd2hlcmUgeW91IGNvbmZpZ3VyZSBhdXRoIGVsZW1lbnRzIGxpa2UgY2xpZW50SUQsIGF1dGhvcml0eSB1c2VkIGZvciBhdXRoZW50aWNhdGluZyBhZ2FpbnN0IHRoZSBNaWNyb3NvZnQgSWRlbnRpdHkgUGxhdGZvcm1cbiAqIC0gYnJva2VyOiB0aGlzIGlzIHdoZXJlIHlvdSBjb25maWd1cmUgYnJva2VyIG9wdGlvbnNcbiAqIC0gY2FjaGU6IHRoaXMgaXMgd2hlcmUgeW91IGNvbmZpZ3VyZSBjYWNoZSBsb2NhdGlvblxuICogLSBzeXN0ZW06IHRoaXMgaXMgd2hlcmUgeW91IGNhbiBjb25maWd1cmUgdGhlIG5ldHdvcmsgY2xpZW50LCBsb2dnZXJcbiAqIC0gdGVsZW1ldHJ5OiB0aGlzIGlzIHdoZXJlIHlvdSBjYW4gY29uZmlndXJlIHRlbGVtZXRyeSBvcHRpb25zXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCB0eXBlIENvbmZpZ3VyYXRpb24gPSB7XG4gICAgYXV0aDogTm9kZUF1dGhPcHRpb25zO1xuICAgIGJyb2tlcj86IEJyb2tlck9wdGlvbnM7XG4gICAgY2FjaGU/OiBDYWNoZU9wdGlvbnM7XG4gICAgc3lzdGVtPzogTm9kZVN5c3RlbU9wdGlvbnM7XG4gICAgdGVsZW1ldHJ5PzogTm9kZVRlbGVtZXRyeU9wdGlvbnM7XG59O1xuXG4vKiogQHB1YmxpYyAqL1xuZXhwb3J0IHR5cGUgTWFuYWdlZElkZW50aXR5SWRQYXJhbXMgPSB7XG4gICAgdXNlckFzc2lnbmVkQ2xpZW50SWQ/OiBzdHJpbmc7XG4gICAgdXNlckFzc2lnbmVkUmVzb3VyY2VJZD86IHN0cmluZztcbiAgICB1c2VyQXNzaWduZWRPYmplY3RJZD86IHN0cmluZztcbn07XG5cbi8qKiBAcHVibGljICovXG5leHBvcnQgdHlwZSBNYW5hZ2VkSWRlbnRpdHlDb25maWd1cmF0aW9uID0ge1xuICAgIG1hbmFnZWRJZGVudGl0eUlkUGFyYW1zPzogTWFuYWdlZElkZW50aXR5SWRQYXJhbXM7XG4gICAgc3lzdGVtPzogTm9kZVN5c3RlbU9wdGlvbnM7XG59O1xuXG5jb25zdCBERUZBVUxUX0FVVEhfT1BUSU9OUzogUmVxdWlyZWQ8Tm9kZUF1dGhPcHRpb25zPiA9IHtcbiAgICBjbGllbnRJZDogQ29uc3RhbnRzLkVNUFRZX1NUUklORyxcbiAgICBhdXRob3JpdHk6IENvbnN0YW50cy5ERUZBVUxUX0FVVEhPUklUWSxcbiAgICBjbGllbnRTZWNyZXQ6IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgY2xpZW50QXNzZXJ0aW9uOiBDb25zdGFudHMuRU1QVFlfU1RSSU5HLFxuICAgIGNsaWVudENlcnRpZmljYXRlOiB7XG4gICAgICAgIHRodW1icHJpbnQ6IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgICAgIHRodW1icHJpbnRTaGEyNTY6IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgICAgIHByaXZhdGVLZXk6IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgICAgIHg1YzogQ29uc3RhbnRzLkVNUFRZX1NUUklORyxcbiAgICB9LFxuICAgIGtub3duQXV0aG9yaXRpZXM6IFtdLFxuICAgIGNsb3VkRGlzY292ZXJ5TWV0YWRhdGE6IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgYXV0aG9yaXR5TWV0YWRhdGE6IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgY2xpZW50Q2FwYWJpbGl0aWVzOiBbXSxcbiAgICBwcm90b2NvbE1vZGU6IFByb3RvY29sTW9kZS5BQUQsXG4gICAgYXp1cmVDbG91ZE9wdGlvbnM6IHtcbiAgICAgICAgYXp1cmVDbG91ZEluc3RhbmNlOiBBenVyZUNsb3VkSW5zdGFuY2UuTm9uZSxcbiAgICAgICAgdGVuYW50OiBDb25zdGFudHMuRU1QVFlfU1RSSU5HLFxuICAgIH0sXG4gICAgc2tpcEF1dGhvcml0eU1ldGFkYXRhQ2FjaGU6IGZhbHNlLFxufTtcblxuY29uc3QgREVGQVVMVF9DQUNIRV9PUFRJT05TOiBDYWNoZU9wdGlvbnMgPSB7XG4gICAgY2xhaW1zQmFzZWRDYWNoaW5nRW5hYmxlZDogZmFsc2UsXG59O1xuXG5jb25zdCBERUZBVUxUX0xPR0dFUl9PUFRJT05TOiBMb2dnZXJPcHRpb25zID0ge1xuICAgIGxvZ2dlckNhbGxiYWNrOiAoKTogdm9pZCA9PiB7XG4gICAgICAgIC8vIGFsbG93IHVzZXJzIHRvIG5vdCBzZXQgbG9nZ2VyIGNhbGwgYmFja1xuICAgIH0sXG4gICAgcGlpTG9nZ2luZ0VuYWJsZWQ6IGZhbHNlLFxuICAgIGxvZ0xldmVsOiBMb2dMZXZlbC5JbmZvLFxufTtcblxuY29uc3QgREVGQVVMVF9TWVNURU1fT1BUSU9OUzogUmVxdWlyZWQ8Tm9kZVN5c3RlbU9wdGlvbnM+ID0ge1xuICAgIGxvZ2dlck9wdGlvbnM6IERFRkFVTFRfTE9HR0VSX09QVElPTlMsXG4gICAgbmV0d29ya0NsaWVudDogbmV3IEh0dHBDbGllbnQoKSxcbiAgICBwcm94eVVybDogQ29uc3RhbnRzLkVNUFRZX1NUUklORyxcbiAgICBjdXN0b21BZ2VudE9wdGlvbnM6IHt9IGFzIGh0dHAuQWdlbnRPcHRpb25zIHwgaHR0cHMuQWdlbnRPcHRpb25zLFxuICAgIGRpc2FibGVJbnRlcm5hbFJldHJpZXM6IGZhbHNlLFxufTtcblxuY29uc3QgREVGQVVMVF9URUxFTUVUUllfT1BUSU9OUzogUmVxdWlyZWQ8Tm9kZVRlbGVtZXRyeU9wdGlvbnM+ID0ge1xuICAgIGFwcGxpY2F0aW9uOiB7XG4gICAgICAgIGFwcE5hbWU6IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgICAgIGFwcFZlcnNpb246IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgfSxcbn07XG5cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB0eXBlIE5vZGVDb25maWd1cmF0aW9uID0ge1xuICAgIGF1dGg6IFJlcXVpcmVkPE5vZGVBdXRoT3B0aW9ucz47XG4gICAgYnJva2VyOiBCcm9rZXJPcHRpb25zO1xuICAgIGNhY2hlOiBDYWNoZU9wdGlvbnM7XG4gICAgc3lzdGVtOiBSZXF1aXJlZDxOb2RlU3lzdGVtT3B0aW9ucz47XG4gICAgdGVsZW1ldHJ5OiBSZXF1aXJlZDxOb2RlVGVsZW1ldHJ5T3B0aW9ucz47XG59O1xuXG4vKipcbiAqIFNldHMgdGhlIGRlZmF1bHQgb3B0aW9ucyB3aGVuIG5vdCBleHBsaWNpdGx5IGNvbmZpZ3VyZWQgZnJvbSBhcHAgZGV2ZWxvcGVyXG4gKlxuICogQHBhcmFtIGF1dGggLSBBdXRoZW50aWNhdGlvbiBvcHRpb25zXG4gKiBAcGFyYW0gY2FjaGUgLSBDYWNoZSBvcHRpb25zXG4gKiBAcGFyYW0gc3lzdGVtIC0gU3lzdGVtIG9wdGlvbnNcbiAqIEBwYXJhbSB0ZWxlbWV0cnkgLSBUZWxlbWV0cnkgb3B0aW9uc1xuICpcbiAqIEByZXR1cm5zIENvbmZpZ3VyYXRpb25cbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRBcHBDb25maWd1cmF0aW9uKHtcbiAgICBhdXRoLFxuICAgIGJyb2tlcixcbiAgICBjYWNoZSxcbiAgICBzeXN0ZW0sXG4gICAgdGVsZW1ldHJ5LFxufTogQ29uZmlndXJhdGlvbik6IE5vZGVDb25maWd1cmF0aW9uIHtcbiAgICBjb25zdCBzeXN0ZW1PcHRpb25zOiBSZXF1aXJlZDxOb2RlU3lzdGVtT3B0aW9ucz4gPSB7XG4gICAgICAgIC4uLkRFRkFVTFRfU1lTVEVNX09QVElPTlMsXG4gICAgICAgIG5ldHdvcmtDbGllbnQ6IG5ldyBIdHRwQ2xpZW50KFxuICAgICAgICAgICAgc3lzdGVtPy5wcm94eVVybCxcbiAgICAgICAgICAgIHN5c3RlbT8uY3VzdG9tQWdlbnRPcHRpb25zIGFzIGh0dHAuQWdlbnRPcHRpb25zIHwgaHR0cHMuQWdlbnRPcHRpb25zXG4gICAgICAgICksXG4gICAgICAgIGxvZ2dlck9wdGlvbnM6IHN5c3RlbT8ubG9nZ2VyT3B0aW9ucyB8fCBERUZBVUxUX0xPR0dFUl9PUFRJT05TLFxuICAgICAgICBkaXNhYmxlSW50ZXJuYWxSZXRyaWVzOiBzeXN0ZW0/LmRpc2FibGVJbnRlcm5hbFJldHJpZXMgfHwgZmFsc2UsXG4gICAgfTtcblxuICAgIC8vIGlmIGNsaWVudCBjZXJ0aWZpY2F0ZSB3YXMgcHJvdmlkZWQsIGVuc3VyZSB0aGF0IGF0IGxlYXN0IG9uZSBvZiB0aGUgU0hBLTEgb3IgU0hBLTI1NiB0aHVtYnByaW50cyB3ZXJlIHByb3ZpZGVkXG4gICAgaWYgKFxuICAgICAgICAhIWF1dGguY2xpZW50Q2VydGlmaWNhdGUgJiZcbiAgICAgICAgISEhYXV0aC5jbGllbnRDZXJ0aWZpY2F0ZS50aHVtYnByaW50ICYmXG4gICAgICAgICEhIWF1dGguY2xpZW50Q2VydGlmaWNhdGUudGh1bWJwcmludFNoYTI1NlxuICAgICkge1xuICAgICAgICB0aHJvdyBOb2RlQXV0aEVycm9yLmNyZWF0ZVN0YXRlTm90Rm91bmRFcnJvcigpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGF1dGg6IHsgLi4uREVGQVVMVF9BVVRIX09QVElPTlMsIC4uLmF1dGggfSxcbiAgICAgICAgYnJva2VyOiB7IC4uLmJyb2tlciB9LFxuICAgICAgICBjYWNoZTogeyAuLi5ERUZBVUxUX0NBQ0hFX09QVElPTlMsIC4uLmNhY2hlIH0sXG4gICAgICAgIHN5c3RlbTogeyAuLi5zeXN0ZW1PcHRpb25zLCAuLi5zeXN0ZW0gfSxcbiAgICAgICAgdGVsZW1ldHJ5OiB7IC4uLkRFRkFVTFRfVEVMRU1FVFJZX09QVElPTlMsIC4uLnRlbGVtZXRyeSB9LFxuICAgIH07XG59XG5cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB0eXBlIE1hbmFnZWRJZGVudGl0eU5vZGVDb25maWd1cmF0aW9uID0ge1xuICAgIG1hbmFnZWRJZGVudGl0eUlkOiBNYW5hZ2VkSWRlbnRpdHlJZDtcbiAgICBzeXN0ZW06IFJlcXVpcmVkPFxuICAgICAgICBQaWNrPE5vZGVTeXN0ZW1PcHRpb25zLCBcImxvZ2dlck9wdGlvbnNcIiB8IFwibmV0d29ya0NsaWVudFwiPlxuICAgID47XG4gICAgZGlzYWJsZUludGVybmFsUmV0cmllczogYm9vbGVhbjtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBidWlsZE1hbmFnZWRJZGVudGl0eUNvbmZpZ3VyYXRpb24oe1xuICAgIG1hbmFnZWRJZGVudGl0eUlkUGFyYW1zLFxuICAgIHN5c3RlbSxcbn06IE1hbmFnZWRJZGVudGl0eUNvbmZpZ3VyYXRpb24pOiBNYW5hZ2VkSWRlbnRpdHlOb2RlQ29uZmlndXJhdGlvbiB7XG4gICAgY29uc3QgbWFuYWdlZElkZW50aXR5SWQ6IE1hbmFnZWRJZGVudGl0eUlkID0gbmV3IE1hbmFnZWRJZGVudGl0eUlkKFxuICAgICAgICBtYW5hZ2VkSWRlbnRpdHlJZFBhcmFtc1xuICAgICk7XG5cbiAgICBjb25zdCBsb2dnZXJPcHRpb25zOiBMb2dnZXJPcHRpb25zID1cbiAgICAgICAgc3lzdGVtPy5sb2dnZXJPcHRpb25zIHx8IERFRkFVTFRfTE9HR0VSX09QVElPTlM7XG5cbiAgICBsZXQgbmV0d29ya0NsaWVudDogSU5ldHdvcmtNb2R1bGU7XG4gICAgLy8gdXNlIGRldmVsb3BlciBwcm92aWRlZCBuZXR3b3JrIGNsaWVudCBpZiBwYXNzZWQgaW5cbiAgICBpZiAoc3lzdGVtPy5uZXR3b3JrQ2xpZW50KSB7XG4gICAgICAgIG5ldHdvcmtDbGllbnQgPSBzeXN0ZW0ubmV0d29ya0NsaWVudDtcbiAgICAgICAgLy8gb3RoZXJ3aXNlLCBjcmVhdGUgYSBuZXcgb25lXG4gICAgfSBlbHNlIHtcbiAgICAgICAgbmV0d29ya0NsaWVudCA9IG5ldyBIdHRwQ2xpZW50KFxuICAgICAgICAgICAgc3lzdGVtPy5wcm94eVVybCxcbiAgICAgICAgICAgIHN5c3RlbT8uY3VzdG9tQWdlbnRPcHRpb25zIGFzIGh0dHAuQWdlbnRPcHRpb25zIHwgaHR0cHMuQWdlbnRPcHRpb25zXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWFuYWdlZElkZW50aXR5SWQ6IG1hbmFnZWRJZGVudGl0eUlkLFxuICAgICAgICBzeXN0ZW06IHtcbiAgICAgICAgICAgIGxvZ2dlck9wdGlvbnMsXG4gICAgICAgICAgICBuZXR3b3JrQ2xpZW50LFxuICAgICAgICB9LFxuICAgICAgICBkaXNhYmxlSW50ZXJuYWxSZXRyaWVzOiBzeXN0ZW0/LmRpc2FibGVJbnRlcm5hbFJldHJpZXMgfHwgZmFsc2UsXG4gICAgfTtcbn1cbiIsICIvLyBVbmlxdWUgSUQgY3JlYXRpb24gcmVxdWlyZXMgYSBoaWdoIHF1YWxpdHkgcmFuZG9tICMgZ2VuZXJhdG9yLiBJbiB0aGUgYnJvd3NlciB3ZSB0aGVyZWZvcmVcbi8vIHJlcXVpcmUgdGhlIGNyeXB0byBBUEkgYW5kIGRvIG5vdCBzdXBwb3J0IGJ1aWx0LWluIGZhbGxiYWNrIHRvIGxvd2VyIHF1YWxpdHkgcmFuZG9tIG51bWJlclxuLy8gZ2VuZXJhdG9ycyAobGlrZSBNYXRoLnJhbmRvbSgpKS5cbnZhciBnZXRSYW5kb21WYWx1ZXM7XG52YXIgcm5kczggPSBuZXcgVWludDhBcnJheSgxNik7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBybmcoKSB7XG4gIC8vIGxhenkgbG9hZCBzbyB0aGF0IGVudmlyb25tZW50cyB0aGF0IG5lZWQgdG8gcG9seWZpbGwgaGF2ZSBhIGNoYW5jZSB0byBkbyBzb1xuICBpZiAoIWdldFJhbmRvbVZhbHVlcykge1xuICAgIC8vIGdldFJhbmRvbVZhbHVlcyBuZWVkcyB0byBiZSBpbnZva2VkIGluIGEgY29udGV4dCB3aGVyZSBcInRoaXNcIiBpcyBhIENyeXB0byBpbXBsZW1lbnRhdGlvbi4gQWxzbyxcbiAgICAvLyBmaW5kIHRoZSBjb21wbGV0ZSBpbXBsZW1lbnRhdGlvbiBvZiBjcnlwdG8gKG1zQ3J5cHRvKSBvbiBJRTExLlxuICAgIGdldFJhbmRvbVZhbHVlcyA9IHR5cGVvZiBjcnlwdG8gIT09ICd1bmRlZmluZWQnICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKGNyeXB0bykgfHwgdHlwZW9mIG1zQ3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzID09PSAnZnVuY3Rpb24nICYmIG1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKG1zQ3J5cHRvKTtcblxuICAgIGlmICghZ2V0UmFuZG9tVmFsdWVzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NyeXB0by5nZXRSYW5kb21WYWx1ZXMoKSBub3Qgc3VwcG9ydGVkLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkI2dldHJhbmRvbXZhbHVlcy1ub3Qtc3VwcG9ydGVkJyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGdldFJhbmRvbVZhbHVlcyhybmRzOCk7XG59IiwgImV4cG9ydCBkZWZhdWx0IC9eKD86WzAtOWEtZl17OH0tWzAtOWEtZl17NH0tWzEtNV1bMC05YS1mXXszfS1bODlhYl1bMC05YS1mXXszfS1bMC05YS1mXXsxMn18MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwKSQvaTsiLCAiaW1wb3J0IFJFR0VYIGZyb20gJy4vcmVnZXguanMnO1xuXG5mdW5jdGlvbiB2YWxpZGF0ZSh1dWlkKSB7XG4gIHJldHVybiB0eXBlb2YgdXVpZCA9PT0gJ3N0cmluZycgJiYgUkVHRVgudGVzdCh1dWlkKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdmFsaWRhdGU7IiwgImltcG9ydCB2YWxpZGF0ZSBmcm9tICcuL3ZhbGlkYXRlLmpzJztcbi8qKlxuICogQ29udmVydCBhcnJheSBvZiAxNiBieXRlIHZhbHVlcyB0byBVVUlEIHN0cmluZyBmb3JtYXQgb2YgdGhlIGZvcm06XG4gKiBYWFhYWFhYWC1YWFhYLVhYWFgtWFhYWC1YWFhYWFhYWFhYWFhcbiAqL1xuXG52YXIgYnl0ZVRvSGV4ID0gW107XG5cbmZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyArK2kpIHtcbiAgYnl0ZVRvSGV4LnB1c2goKGkgKyAweDEwMCkudG9TdHJpbmcoMTYpLnN1YnN0cigxKSk7XG59XG5cbmZ1bmN0aW9uIHN0cmluZ2lmeShhcnIpIHtcbiAgdmFyIG9mZnNldCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMDtcbiAgLy8gTm90ZTogQmUgY2FyZWZ1bCBlZGl0aW5nIHRoaXMgY29kZSEgIEl0J3MgYmVlbiB0dW5lZCBmb3IgcGVyZm9ybWFuY2VcbiAgLy8gYW5kIHdvcmtzIGluIHdheXMgeW91IG1heSBub3QgZXhwZWN0LiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkL3B1bGwvNDM0XG4gIHZhciB1dWlkID0gKGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDJdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgM11dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA0XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDVdXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA3XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDhdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgOV1dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMV1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxM11dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxNF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxNV1dKS50b0xvd2VyQ2FzZSgpOyAvLyBDb25zaXN0ZW5jeSBjaGVjayBmb3IgdmFsaWQgVVVJRC4gIElmIHRoaXMgdGhyb3dzLCBpdCdzIGxpa2VseSBkdWUgdG8gb25lXG4gIC8vIG9mIHRoZSBmb2xsb3dpbmc6XG4gIC8vIC0gT25lIG9yIG1vcmUgaW5wdXQgYXJyYXkgdmFsdWVzIGRvbid0IG1hcCB0byBhIGhleCBvY3RldCAobGVhZGluZyB0b1xuICAvLyBcInVuZGVmaW5lZFwiIGluIHRoZSB1dWlkKVxuICAvLyAtIEludmFsaWQgaW5wdXQgdmFsdWVzIGZvciB0aGUgUkZDIGB2ZXJzaW9uYCBvciBgdmFyaWFudGAgZmllbGRzXG5cbiAgaWYgKCF2YWxpZGF0ZSh1dWlkKSkge1xuICAgIHRocm93IFR5cGVFcnJvcignU3RyaW5naWZpZWQgVVVJRCBpcyBpbnZhbGlkJyk7XG4gIH1cblxuICByZXR1cm4gdXVpZDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgc3RyaW5naWZ5OyIsICJpbXBvcnQgcm5nIGZyb20gJy4vcm5nLmpzJztcbmltcG9ydCBzdHJpbmdpZnkgZnJvbSAnLi9zdHJpbmdpZnkuanMnO1xuXG5mdW5jdGlvbiB2NChvcHRpb25zLCBidWYsIG9mZnNldCkge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIHJuZHMgPSBvcHRpb25zLnJhbmRvbSB8fCAob3B0aW9ucy5ybmcgfHwgcm5nKSgpOyAvLyBQZXIgNC40LCBzZXQgYml0cyBmb3IgdmVyc2lvbiBhbmQgYGNsb2NrX3NlcV9oaV9hbmRfcmVzZXJ2ZWRgXG5cbiAgcm5kc1s2XSA9IHJuZHNbNl0gJiAweDBmIHwgMHg0MDtcbiAgcm5kc1s4XSA9IHJuZHNbOF0gJiAweDNmIHwgMHg4MDsgLy8gQ29weSBieXRlcyB0byBidWZmZXIsIGlmIHByb3ZpZGVkXG5cbiAgaWYgKGJ1Zikge1xuICAgIG9mZnNldCA9IG9mZnNldCB8fCAwO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxNjsgKytpKSB7XG4gICAgICBidWZbb2Zmc2V0ICsgaV0gPSBybmRzW2ldO1xuICAgIH1cblxuICAgIHJldHVybiBidWY7XG4gIH1cblxuICByZXR1cm4gc3RyaW5naWZ5KHJuZHMpO1xufVxuXG5leHBvcnQgZGVmYXVsdCB2NDsiLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IElHdWlkR2VuZXJhdG9yIH0gZnJvbSBcIkBhenVyZS9tc2FsLWNvbW1vbi9ub2RlXCI7XG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tIFwidXVpZFwiO1xuXG5leHBvcnQgY2xhc3MgR3VpZEdlbmVyYXRvciBpbXBsZW1lbnRzIElHdWlkR2VuZXJhdG9yIHtcbiAgICAvKipcbiAgICAgKlxuICAgICAqIFJGQzQxMjI6IFRoZSB2ZXJzaW9uIDQgVVVJRCBpcyBtZWFudCBmb3IgZ2VuZXJhdGluZyBVVUlEcyBmcm9tIHRydWx5LXJhbmRvbSBvciBwc2V1ZG8tcmFuZG9tIG51bWJlcnMuXG4gICAgICogdXVpZHY0IGdlbmVyYXRlcyBndWlkcyBmcm9tIGNyeXBydG9ncmFwaGljYWxseS1zdHJpbmcgcmFuZG9tXG4gICAgICovXG4gICAgZ2VuZXJhdGVHdWlkKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB1dWlkdjQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiB2ZXJpZmllcyBpZiBhIHN0cmluZyBpcyAgR1VJRFxuICAgICAqIEBwYXJhbSBndWlkXG4gICAgICovXG4gICAgaXNHdWlkKGd1aWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCByZWdleEd1aWQgPVxuICAgICAgICAgICAgL15bMC05YS1mXXs4fS1bMC05YS1mXXs0fS1bMS01XVswLTlhLWZdezN9LVs4OWFiXVswLTlhLWZdezN9LVswLTlhLWZdezEyfSQvaTtcbiAgICAgICAgcmV0dXJuIHJlZ2V4R3VpZC50ZXN0KGd1aWQpO1xuICAgIH1cbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQ29uc3RhbnRzIH0gZnJvbSBcIkBhenVyZS9tc2FsLWNvbW1vbi9ub2RlXCI7XG5cbmV4cG9ydCBjbGFzcyBFbmNvZGluZ1V0aWxzIHtcbiAgICAvKipcbiAgICAgKiAndXRmOCc6IE11bHRpYnl0ZSBlbmNvZGVkIFVuaWNvZGUgY2hhcmFjdGVycy4gTWFueSB3ZWIgcGFnZXMgYW5kIG90aGVyIGRvY3VtZW50IGZvcm1hdHMgdXNlIFVURi04LlxuICAgICAqICdiYXNlNjQnOiBCYXNlNjQgZW5jb2RpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3RyIHRleHRcbiAgICAgKi9cbiAgICBzdGF0aWMgYmFzZTY0RW5jb2RlKHN0cjogc3RyaW5nLCBlbmNvZGluZz86IEJ1ZmZlckVuY29kaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIEJ1ZmZlci5mcm9tKHN0ciwgZW5jb2RpbmcpLnRvU3RyaW5nKFwiYmFzZTY0XCIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGVuY29kZSBhIFVSTFxuICAgICAqIEBwYXJhbSBzdHJcbiAgICAgKi9cbiAgICBzdGF0aWMgYmFzZTY0RW5jb2RlVXJsKHN0cjogc3RyaW5nLCBlbmNvZGluZz86IEJ1ZmZlckVuY29kaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIEVuY29kaW5nVXRpbHMuYmFzZTY0RW5jb2RlKHN0ciwgZW5jb2RpbmcpXG4gICAgICAgICAgICAucmVwbGFjZSgvPS9nLCBDb25zdGFudHMuRU1QVFlfU1RSSU5HKVxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcKy9nLCBcIi1cIilcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXC8vZywgXCJfXCIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqICd1dGY4JzogTXVsdGlieXRlIGVuY29kZWQgVW5pY29kZSBjaGFyYWN0ZXJzLiBNYW55IHdlYiBwYWdlcyBhbmQgb3RoZXIgZG9jdW1lbnQgZm9ybWF0cyB1c2UgVVRGLTguXG4gICAgICogJ2Jhc2U2NCc6IEJhc2U2NCBlbmNvZGluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiYXNlNjRTdHIgQmFzZTY0IGVuY29kZWQgdGV4dFxuICAgICAqL1xuICAgIHN0YXRpYyBiYXNlNjREZWNvZGUoYmFzZTY0U3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gQnVmZmVyLmZyb20oYmFzZTY0U3RyLCBcImJhc2U2NFwiKS50b1N0cmluZyhcInV0ZjhcIik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIGJhc2U2NFN0ciBCYXNlNjQgZW5jb2RlZCBVcmxcbiAgICAgKi9cbiAgICBzdGF0aWMgYmFzZTY0RGVjb2RlVXJsKGJhc2U2NFN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHN0ciA9IGJhc2U2NFN0ci5yZXBsYWNlKC8tL2csIFwiK1wiKS5yZXBsYWNlKC9fL2csIFwiL1wiKTtcbiAgICAgICAgd2hpbGUgKHN0ci5sZW5ndGggJSA0KSB7XG4gICAgICAgICAgICBzdHIgKz0gXCI9XCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEVuY29kaW5nVXRpbHMuYmFzZTY0RGVjb2RlKHN0cik7XG4gICAgfVxufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBIYXNoIH0gZnJvbSBcIi4uL3V0aWxzL0NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IGNyeXB0byBmcm9tIFwiY3J5cHRvXCI7XG5cbmV4cG9ydCBjbGFzcyBIYXNoVXRpbHMge1xuICAgIC8qKlxuICAgICAqIGdlbmVyYXRlICdTSEEyNTYnIGhhc2hcbiAgICAgKiBAcGFyYW0gYnVmZmVyXG4gICAgICovXG4gICAgc2hhMjU2KGJ1ZmZlcjogc3RyaW5nKTogQnVmZmVyIHtcbiAgICAgICAgcmV0dXJuIGNyeXB0by5jcmVhdGVIYXNoKEhhc2guU0hBMjU2KS51cGRhdGUoYnVmZmVyKS5kaWdlc3QoKTtcbiAgICB9XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENvbnN0YW50cywgUGtjZUNvZGVzIH0gZnJvbSBcIkBhenVyZS9tc2FsLWNvbW1vbi9ub2RlXCI7XG5pbXBvcnQgeyBDaGFyU2V0LCBSQU5ET01fT0NURVRfU0laRSB9IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcbmltcG9ydCB7IEVuY29kaW5nVXRpbHMgfSBmcm9tIFwiLi4vdXRpbHMvRW5jb2RpbmdVdGlscy5qc1wiO1xuaW1wb3J0IHsgSGFzaFV0aWxzIH0gZnJvbSBcIi4vSGFzaFV0aWxzLmpzXCI7XG5pbXBvcnQgY3J5cHRvIGZyb20gXCJjcnlwdG9cIjtcblxuLyoqXG4gKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNzYzNiNwYWdlLThcbiAqL1xuZXhwb3J0IGNsYXNzIFBrY2VHZW5lcmF0b3Ige1xuICAgIHByaXZhdGUgaGFzaFV0aWxzOiBIYXNoVXRpbHM7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5oYXNoVXRpbHMgPSBuZXcgSGFzaFV0aWxzKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGdlbmVyYXRlcyB0aGUgY29kZVZlcmZpZXIgYW5kIHRoZSBjaGFsbGVuZ2UgZnJvbSB0aGUgY29kZVZlcmZpZXJcbiAgICAgKiByZWZlcmVuY2U6IGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM3NjM2I3NlY3Rpb24tNC4xIGFuZCBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNzYzNiNzZWN0aW9uLTQuMlxuICAgICAqL1xuICAgIGFzeW5jIGdlbmVyYXRlUGtjZUNvZGVzKCk6IFByb21pc2U8UGtjZUNvZGVzPiB7XG4gICAgICAgIGNvbnN0IHZlcmlmaWVyID0gdGhpcy5nZW5lcmF0ZUNvZGVWZXJpZmllcigpO1xuICAgICAgICBjb25zdCBjaGFsbGVuZ2UgPSB0aGlzLmdlbmVyYXRlQ29kZUNoYWxsZW5nZUZyb21WZXJpZmllcih2ZXJpZmllcik7XG4gICAgICAgIHJldHVybiB7IHZlcmlmaWVyLCBjaGFsbGVuZ2UgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnZW5lcmF0ZXMgdGhlIGNvZGVWZXJmaWVyOyByZWZlcmVuY2U6IGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM3NjM2I3NlY3Rpb24tNC4xXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZUNvZGVWZXJpZmllcigpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBjaGFyQXJyID0gW107XG4gICAgICAgIGNvbnN0IG1heE51bWJlciA9IDI1NiAtICgyNTYgJSBDaGFyU2V0LkNWX0NIQVJTRVQubGVuZ3RoKTtcbiAgICAgICAgd2hpbGUgKGNoYXJBcnIubGVuZ3RoIDw9IFJBTkRPTV9PQ1RFVF9TSVpFKSB7XG4gICAgICAgICAgICBjb25zdCBieXRlID0gY3J5cHRvLnJhbmRvbUJ5dGVzKDEpWzBdO1xuICAgICAgICAgICAgaWYgKGJ5dGUgPj0gbWF4TnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgKiBJZ25vcmUgdGhpcyBudW1iZXIgdG8gbWFpbnRhaW4gcmFuZG9tbmVzcy5cbiAgICAgICAgICAgICAgICAgKiBJbmNsdWRpbmcgaXQgd291bGQgcmVzdWx0IGluIGFuIHVuZXF1YWwgZGlzdHJpYnV0aW9uIG9mIGNoYXJhY3RlcnMgYWZ0ZXIgZG9pbmcgdGhlIG1vZHVsb1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBieXRlICUgQ2hhclNldC5DVl9DSEFSU0VULmxlbmd0aDtcbiAgICAgICAgICAgIGNoYXJBcnIucHVzaChDaGFyU2V0LkNWX0NIQVJTRVRbaW5kZXhdKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2ZXJpZmllcjogc3RyaW5nID0gY2hhckFyci5qb2luKENvbnN0YW50cy5FTVBUWV9TVFJJTkcpO1xuICAgICAgICByZXR1cm4gRW5jb2RpbmdVdGlscy5iYXNlNjRFbmNvZGVVcmwodmVyaWZpZXIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGdlbmVyYXRlIHRoZSBjaGFsbGVuZ2UgZnJvbSB0aGUgY29kZVZlcmZpZXI7IHJlZmVyZW5jZTogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzc2MzYjc2VjdGlvbi00LjJcbiAgICAgKiBAcGFyYW0gY29kZVZlcmlmaWVyXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZUNvZGVDaGFsbGVuZ2VGcm9tVmVyaWZpZXIoY29kZVZlcmlmaWVyOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gRW5jb2RpbmdVdGlscy5iYXNlNjRFbmNvZGVVcmwoXG4gICAgICAgICAgICB0aGlzLmhhc2hVdGlscy5zaGEyNTYoY29kZVZlcmlmaWVyKS50b1N0cmluZyhcImJhc2U2NFwiKSxcbiAgICAgICAgICAgIFwiYmFzZTY0XCJcbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IElDcnlwdG8sIFBrY2VDb2RlcyB9IGZyb20gXCJAYXp1cmUvbXNhbC1jb21tb24vbm9kZVwiO1xuaW1wb3J0IHsgR3VpZEdlbmVyYXRvciB9IGZyb20gXCIuL0d1aWRHZW5lcmF0b3IuanNcIjtcbmltcG9ydCB7IEVuY29kaW5nVXRpbHMgfSBmcm9tIFwiLi4vdXRpbHMvRW5jb2RpbmdVdGlscy5qc1wiO1xuaW1wb3J0IHsgUGtjZUdlbmVyYXRvciB9IGZyb20gXCIuL1BrY2VHZW5lcmF0b3IuanNcIjtcbmltcG9ydCB7IEhhc2hVdGlscyB9IGZyb20gXCIuL0hhc2hVdGlscy5qc1wiO1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBNU0FMIG5vZGUncyBjcnlwdG8gaW50ZXJmYWNlLCB3aGljaCBhbGxvd3MgaXQgdG8gcGVyZm9ybSBiYXNlNjQgZW5jb2RpbmcgYW5kIGRlY29kaW5nLCBnZW5lcmF0aW5nIGNyeXB0b2dyYXBoaWNhbGx5IHJhbmRvbSBHVUlEcyBhbmRcbiAqIGltcGxlbWVudGluZyBQcm9vZiBLZXkgZm9yIENvZGUgRXhjaGFuZ2Ugc3BlY3MgZm9yIHRoZSBPQXV0aCBBdXRob3JpemF0aW9uIENvZGUgRmxvdyB1c2luZyBQS0NFIChyZmMgaGVyZTogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzc2MzYpLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgQ3J5cHRvUHJvdmlkZXIgaW1wbGVtZW50cyBJQ3J5cHRvIHtcbiAgICBwcml2YXRlIHBrY2VHZW5lcmF0b3I6IFBrY2VHZW5lcmF0b3I7XG4gICAgcHJpdmF0ZSBndWlkR2VuZXJhdG9yOiBHdWlkR2VuZXJhdG9yO1xuICAgIHByaXZhdGUgaGFzaFV0aWxzOiBIYXNoVXRpbHM7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gQnJvd3NlciBjcnlwdG8gbmVlZHMgdG8gYmUgdmFsaWRhdGVkIGZpcnN0IGJlZm9yZSBhbnkgb3RoZXIgY2xhc3NlcyBjYW4gYmUgc2V0LlxuICAgICAgICB0aGlzLnBrY2VHZW5lcmF0b3IgPSBuZXcgUGtjZUdlbmVyYXRvcigpO1xuICAgICAgICB0aGlzLmd1aWRHZW5lcmF0b3IgPSBuZXcgR3VpZEdlbmVyYXRvcigpO1xuICAgICAgICB0aGlzLmhhc2hVdGlscyA9IG5ldyBIYXNoVXRpbHMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBiYXNlNjQgVVJMIHNhZmUgZW5jb2RlZCBzdHJpbmdcbiAgICAgKi9cbiAgICBiYXNlNjRVcmxFbmNvZGUoKTogc3RyaW5nIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0cmluZ2lmaWVzIGFuZCBiYXNlNjRVcmwgZW5jb2RlcyBpbnB1dCBwdWJsaWMga2V5XG4gICAgICogQHBhcmFtIGlucHV0S2lkIC0gcHVibGljIGtleSBpZFxuICAgICAqIEByZXR1cm5zIEJhc2U2NFVybCBlbmNvZGVkIHB1YmxpYyBrZXlcbiAgICAgKi9cbiAgICBlbmNvZGVLaWQoKTogc3RyaW5nIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyByYW5kb20gR1VJRCAtIHVzZWQgdG8gcG9wdWxhdGUgc3RhdGUgYW5kIG5vbmNlLlxuICAgICAqIEByZXR1cm5zIHN0cmluZyAoR1VJRClcbiAgICAgKi9cbiAgICBjcmVhdGVOZXdHdWlkKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLmd1aWRHZW5lcmF0b3IuZ2VuZXJhdGVHdWlkKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW5jb2RlcyBpbnB1dCBzdHJpbmcgdG8gYmFzZTY0LlxuICAgICAqIEBwYXJhbSBpbnB1dCAtIHN0cmluZyB0byBiZSBlbmNvZGVkXG4gICAgICovXG4gICAgYmFzZTY0RW5jb2RlKGlucHV0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gRW5jb2RpbmdVdGlscy5iYXNlNjRFbmNvZGUoaW5wdXQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlY29kZXMgaW5wdXQgc3RyaW5nIGZyb20gYmFzZTY0LlxuICAgICAqIEBwYXJhbSBpbnB1dCAtIHN0cmluZyB0byBiZSBkZWNvZGVkXG4gICAgICovXG4gICAgYmFzZTY0RGVjb2RlKGlucHV0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gRW5jb2RpbmdVdGlscy5iYXNlNjREZWNvZGUoaW5wdXQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBQS0NFIGNvZGVzIHVzZWQgaW4gQXV0aG9yaXphdGlvbiBDb2RlIEZsb3cuXG4gICAgICovXG4gICAgZ2VuZXJhdGVQa2NlQ29kZXMoKTogUHJvbWlzZTxQa2NlQ29kZXM+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGtjZUdlbmVyYXRvci5nZW5lcmF0ZVBrY2VDb2RlcygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBhIGtleXBhaXIsIHN0b3JlcyBpdCBhbmQgcmV0dXJucyBhIHRodW1icHJpbnQgLSBub3QgeWV0IGltcGxlbWVudGVkIGZvciBub2RlXG4gICAgICovXG4gICAgZ2V0UHVibGljS2V5VGh1bWJwcmludCgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGNyeXB0b2dyYXBoaWMga2V5cGFpciBmcm9tIGtleSBzdG9yZSBtYXRjaGluZyB0aGUga2V5SWQgcGFzc2VkIGluXG4gICAgICogQHBhcmFtIGtpZCAtIHB1YmxpYyBrZXkgaWRcbiAgICAgKi9cbiAgICByZW1vdmVUb2tlbkJpbmRpbmdLZXkoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYWxsIGNyeXB0b2dyYXBoaWMga2V5cyBmcm9tIEtleXN0b3JlXG4gICAgICovXG4gICAgY2xlYXJLZXlzdG9yZSgpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2lnbnMgdGhlIGdpdmVuIG9iamVjdCBhcyBhIGp3dCBwYXlsb2FkIHdpdGggcHJpdmF0ZSBrZXkgcmV0cmlldmVkIGJ5IGdpdmVuIGtpZCAtIGN1cnJlbnRseSBub3QgaW1wbGVtZW50ZWQgZm9yIG5vZGVcbiAgICAgKi9cbiAgICBzaWduSnd0KCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIFNIQS0yNTYgaGFzaCBvZiBhbiBpbnB1dCBzdHJpbmdcbiAgICAgKi9cbiAgICBhc3luYyBoYXNoU3RyaW5nKHBsYWluVGV4dDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgcmV0dXJuIEVuY29kaW5nVXRpbHMuYmFzZTY0RW5jb2RlVXJsKFxuICAgICAgICAgICAgdGhpcy5oYXNoVXRpbHMuc2hhMjU2KHBsYWluVGV4dCkudG9TdHJpbmcoXCJiYXNlNjRcIiksXG4gICAgICAgICAgICBcImJhc2U2NFwiXG4gICAgICAgICk7XG4gICAgfVxufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICAgIFRva2VuS2V5cyxcbiAgICBBY2NvdW50RW50aXR5LFxuICAgIElkVG9rZW5FbnRpdHksXG4gICAgQWNjZXNzVG9rZW5FbnRpdHksXG4gICAgUmVmcmVzaFRva2VuRW50aXR5LFxuICAgIEFwcE1ldGFkYXRhRW50aXR5LFxuICAgIFNlcnZlclRlbGVtZXRyeUVudGl0eSxcbiAgICBUaHJvdHRsaW5nRW50aXR5LFxuICAgIENhY2hlTWFuYWdlcixcbiAgICBMb2dnZXIsXG4gICAgVmFsaWRDYWNoZVR5cGUsXG4gICAgSUNyeXB0byxcbiAgICBBdXRob3JpdHlNZXRhZGF0YUVudGl0eSxcbiAgICBWYWxpZENyZWRlbnRpYWxUeXBlLFxuICAgIFN0YXRpY0F1dGhvcml0eU9wdGlvbnMsXG4gICAgQ2FjaGVIZWxwZXJzLFxufSBmcm9tIFwiQGF6dXJlL21zYWwtY29tbW9uL25vZGVcIjtcblxuaW1wb3J0IHsgRGVzZXJpYWxpemVyIH0gZnJvbSBcIi4vc2VyaWFsaXplci9EZXNlcmlhbGl6ZXIuanNcIjtcbmltcG9ydCB7IFNlcmlhbGl6ZXIgfSBmcm9tIFwiLi9zZXJpYWxpemVyL1NlcmlhbGl6ZXIuanNcIjtcbmltcG9ydCB7XG4gICAgSW5NZW1vcnlDYWNoZSxcbiAgICBKc29uQ2FjaGUsXG4gICAgQ2FjaGVLVlN0b3JlLFxufSBmcm9tIFwiLi9zZXJpYWxpemVyL1NlcmlhbGl6ZXJUeXBlcy5qc1wiO1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBTdG9yYWdlIGZvciBub2RlLCByZWFkaW5nIGNhY2hlIGZyb20gdXNlciBzcGVjaWZpZWQgc3RvcmFnZSBsb2NhdGlvbiBvciBhbiAgZXh0ZW5zaW9uIGxpYnJhcnlcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIE5vZGVTdG9yYWdlIGV4dGVuZHMgQ2FjaGVNYW5hZ2VyIHtcbiAgICAvLyBDYWNoZSBjb25maWd1cmF0aW9uLCBlaXRoZXIgc2V0IGJ5IHVzZXIgb3IgZGVmYXVsdCB2YWx1ZXMuXG4gICAgcHJpdmF0ZSBsb2dnZXI6IExvZ2dlcjtcbiAgICBwcml2YXRlIGNhY2hlOiBDYWNoZUtWU3RvcmUgPSB7fTtcbiAgICBwcml2YXRlIGNoYW5nZUVtaXR0ZXJzOiBBcnJheTxGdW5jdGlvbj4gPSBbXTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBsb2dnZXI6IExvZ2dlcixcbiAgICAgICAgY2xpZW50SWQ6IHN0cmluZyxcbiAgICAgICAgY3J5cHRvSW1wbDogSUNyeXB0byxcbiAgICAgICAgc3RhdGljQXV0aG9yaXR5T3B0aW9ucz86IFN0YXRpY0F1dGhvcml0eU9wdGlvbnNcbiAgICApIHtcbiAgICAgICAgc3VwZXIoY2xpZW50SWQsIGNyeXB0b0ltcGwsIGxvZ2dlciwgc3RhdGljQXV0aG9yaXR5T3B0aW9ucyk7XG4gICAgICAgIHRoaXMubG9nZ2VyID0gbG9nZ2VyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFF1ZXVlIHVwIGNhbGxiYWNrc1xuICAgICAqIEBwYXJhbSBmdW5jIC0gYSBjYWxsYmFjayBmdW5jdGlvbiBmb3IgY2FjaGUgY2hhbmdlIGluZGljYXRpb25cbiAgICAgKi9cbiAgICByZWdpc3RlckNoYW5nZUVtaXR0ZXIoZnVuYzogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgICAgICB0aGlzLmNoYW5nZUVtaXR0ZXJzLnB1c2goZnVuYyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW52b2tlIHRoZSBjYWxsYmFjayB3aGVuIGNhY2hlIGNoYW5nZXNcbiAgICAgKi9cbiAgICBlbWl0Q2hhbmdlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmNoYW5nZUVtaXR0ZXJzLmZvckVhY2goKGZ1bmMpID0+IGZ1bmMuY2FsbChudWxsKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgY2FjaGVLVlN0b3JlIHRvIEluTWVtb3J5Q2FjaGVcbiAgICAgKiBAcGFyYW0gY2FjaGUgLSBrZXkgdmFsdWUgc3RvcmVcbiAgICAgKi9cbiAgICBjYWNoZVRvSW5NZW1vcnlDYWNoZShjYWNoZTogQ2FjaGVLVlN0b3JlKTogSW5NZW1vcnlDYWNoZSB7XG4gICAgICAgIGNvbnN0IGluTWVtb3J5Q2FjaGU6IEluTWVtb3J5Q2FjaGUgPSB7XG4gICAgICAgICAgICBhY2NvdW50czoge30sXG4gICAgICAgICAgICBpZFRva2Vuczoge30sXG4gICAgICAgICAgICBhY2Nlc3NUb2tlbnM6IHt9LFxuICAgICAgICAgICAgcmVmcmVzaFRva2Vuczoge30sXG4gICAgICAgICAgICBhcHBNZXRhZGF0YToge30sXG4gICAgICAgIH07XG5cbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gY2FjaGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gY2FjaGVba2V5XTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFjY291bnRFbnRpdHkpIHtcbiAgICAgICAgICAgICAgICBpbk1lbW9yeUNhY2hlLmFjY291bnRzW2tleV0gPSB2YWx1ZSBhcyBBY2NvdW50RW50aXR5O1xuICAgICAgICAgICAgfSBlbHNlIGlmIChDYWNoZUhlbHBlcnMuaXNJZFRva2VuRW50aXR5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGluTWVtb3J5Q2FjaGUuaWRUb2tlbnNba2V5XSA9IHZhbHVlIGFzIElkVG9rZW5FbnRpdHk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKENhY2hlSGVscGVycy5pc0FjY2Vzc1Rva2VuRW50aXR5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGluTWVtb3J5Q2FjaGUuYWNjZXNzVG9rZW5zW2tleV0gPSB2YWx1ZSBhcyBBY2Nlc3NUb2tlbkVudGl0eTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoQ2FjaGVIZWxwZXJzLmlzUmVmcmVzaFRva2VuRW50aXR5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGluTWVtb3J5Q2FjaGUucmVmcmVzaFRva2Vuc1trZXldID0gdmFsdWUgYXMgUmVmcmVzaFRva2VuRW50aXR5O1xuICAgICAgICAgICAgfSBlbHNlIGlmIChDYWNoZUhlbHBlcnMuaXNBcHBNZXRhZGF0YUVudGl0eShrZXksIHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGluTWVtb3J5Q2FjaGUuYXBwTWV0YWRhdGFba2V5XSA9IHZhbHVlIGFzIEFwcE1ldGFkYXRhRW50aXR5O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBpbk1lbW9yeUNhY2hlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGNvbnZlcnRzIGluTWVtb3J5Q2FjaGUgdG8gQ2FjaGVLVlN0b3JlXG4gICAgICogQHBhcmFtIGluTWVtb3J5Q2FjaGUgLSBrdnN0b3JlIG1hcCBmb3IgaW5tZW1vcnlcbiAgICAgKi9cbiAgICBpbk1lbW9yeUNhY2hlVG9DYWNoZShpbk1lbW9yeUNhY2hlOiBJbk1lbW9yeUNhY2hlKTogQ2FjaGVLVlN0b3JlIHtcbiAgICAgICAgLy8gY29udmVydCBpbiBtZW1vcnkgY2FjaGUgdG8gYSBmbGF0IEtleS1WYWx1ZSBtYXBcbiAgICAgICAgbGV0IGNhY2hlID0gdGhpcy5nZXRDYWNoZSgpO1xuXG4gICAgICAgIGNhY2hlID0ge1xuICAgICAgICAgICAgLi4uY2FjaGUsXG4gICAgICAgICAgICAuLi5pbk1lbW9yeUNhY2hlLmFjY291bnRzLFxuICAgICAgICAgICAgLi4uaW5NZW1vcnlDYWNoZS5pZFRva2VucyxcbiAgICAgICAgICAgIC4uLmluTWVtb3J5Q2FjaGUuYWNjZXNzVG9rZW5zLFxuICAgICAgICAgICAgLi4uaW5NZW1vcnlDYWNoZS5yZWZyZXNoVG9rZW5zLFxuICAgICAgICAgICAgLi4uaW5NZW1vcnlDYWNoZS5hcHBNZXRhZGF0YSxcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBjb252ZXJ0IGluIG1lbW9yeSBjYWNoZSB0byBhIGZsYXQgS2V5LVZhbHVlIG1hcFxuICAgICAgICByZXR1cm4gY2FjaGU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZ2V0cyB0aGUgY3VycmVudCBpbiBtZW1vcnkgY2FjaGUgZm9yIHRoZSBjbGllbnRcbiAgICAgKi9cbiAgICBnZXRJbk1lbW9yeUNhY2hlKCk6IEluTWVtb3J5Q2FjaGUge1xuICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShcIkdldHRpbmcgaW4tbWVtb3J5IGNhY2hlXCIpO1xuXG4gICAgICAgIC8vIGNvbnZlcnQgdGhlIGNhY2hlIGtleSB2YWx1ZSBzdG9yZSB0byBpbk1lbW9yeUNhY2hlXG4gICAgICAgIGNvbnN0IGluTWVtb3J5Q2FjaGUgPSB0aGlzLmNhY2hlVG9Jbk1lbW9yeUNhY2hlKHRoaXMuZ2V0Q2FjaGUoKSk7XG4gICAgICAgIHJldHVybiBpbk1lbW9yeUNhY2hlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHNldHMgdGhlIGN1cnJlbnQgaW4gbWVtb3J5IGNhY2hlIGZvciB0aGUgY2xpZW50XG4gICAgICogQHBhcmFtIGluTWVtb3J5Q2FjaGUgLSBrZXkgdmFsdWUgbWFwIGluIG1lbW9yeVxuICAgICAqL1xuICAgIHNldEluTWVtb3J5Q2FjaGUoaW5NZW1vcnlDYWNoZTogSW5NZW1vcnlDYWNoZSk6IHZvaWQge1xuICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShcIlNldHRpbmcgaW4tbWVtb3J5IGNhY2hlXCIpO1xuXG4gICAgICAgIC8vIGNvbnZlcnQgYW5kIGFwcGVuZCB0aGUgaW5NZW1vcnlDYWNoZSB0byBjYWNoZUtWU3RvcmVcbiAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLmluTWVtb3J5Q2FjaGVUb0NhY2hlKGluTWVtb3J5Q2FjaGUpO1xuICAgICAgICB0aGlzLnNldENhY2hlKGNhY2hlKTtcblxuICAgICAgICB0aGlzLmVtaXRDaGFuZ2UoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnZXQgdGhlIGN1cnJlbnQgY2FjaGUga2V5LXZhbHVlIHN0b3JlXG4gICAgICovXG4gICAgZ2V0Q2FjaGUoKTogQ2FjaGVLVlN0b3JlIHtcbiAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoXCJHZXR0aW5nIGNhY2hlIGtleS12YWx1ZSBzdG9yZVwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogc2V0cyB0aGUgY3VycmVudCBjYWNoZSAoa2V5IHZhbHVlIHN0b3JlKVxuICAgICAqIEBwYXJhbSBjYWNoZU1hcCAtIGtleSB2YWx1ZSBtYXBcbiAgICAgKi9cbiAgICBzZXRDYWNoZShjYWNoZTogQ2FjaGVLVlN0b3JlKTogdm9pZCB7XG4gICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKFwiU2V0dGluZyBjYWNoZSBrZXkgdmFsdWUgc3RvcmVcIik7XG4gICAgICAgIHRoaXMuY2FjaGUgPSBjYWNoZTtcblxuICAgICAgICAvLyBtYXJrIGNoYW5nZSBpbiBjYWNoZVxuICAgICAgICB0aGlzLmVtaXRDaGFuZ2UoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGNhY2hlIGl0ZW0gd2l0aCBnaXZlbiBrZXkuXG4gICAgICogQHBhcmFtIGtleSAtIGxvb2t1cCBrZXkgZm9yIHRoZSBjYWNoZSBlbnRyeVxuICAgICAqL1xuICAgIGdldEl0ZW0oa2V5OiBzdHJpbmcpOiBWYWxpZENhY2hlVHlwZSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlUGlpKGBJdGVtIGtleTogJHtrZXl9YCk7XG5cbiAgICAgICAgLy8gcmVhZCBjYWNoZVxuICAgICAgICBjb25zdCBjYWNoZSA9IHRoaXMuZ2V0Q2FjaGUoKTtcbiAgICAgICAgcmV0dXJuIGNhY2hlW2tleV07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBjYWNoZSBpdGVtIHdpdGggZ2l2ZW4ga2V5LXZhbHVlXG4gICAgICogQHBhcmFtIGtleSAtIGxvb2t1cCBrZXkgZm9yIHRoZSBjYWNoZSBlbnRyeVxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIHZhbHVlIG9mIHRoZSBjYWNoZSBlbnRyeVxuICAgICAqL1xuICAgIHNldEl0ZW0oa2V5OiBzdHJpbmcsIHZhbHVlOiBWYWxpZENhY2hlVHlwZSk6IHZvaWQge1xuICAgICAgICB0aGlzLmxvZ2dlci50cmFjZVBpaShgSXRlbSBrZXk6ICR7a2V5fWApO1xuXG4gICAgICAgIC8vIHJlYWQgY2FjaGVcbiAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLmdldENhY2hlKCk7XG4gICAgICAgIGNhY2hlW2tleV0gPSB2YWx1ZTtcblxuICAgICAgICAvLyB3cml0ZSB0byBjYWNoZVxuICAgICAgICB0aGlzLnNldENhY2hlKGNhY2hlKTtcbiAgICB9XG5cbiAgICBnZXRBY2NvdW50S2V5cygpOiBzdHJpbmdbXSB7XG4gICAgICAgIGNvbnN0IGluTWVtb3J5Q2FjaGUgPSB0aGlzLmdldEluTWVtb3J5Q2FjaGUoKTtcbiAgICAgICAgY29uc3QgYWNjb3VudEtleXMgPSBPYmplY3Qua2V5cyhpbk1lbW9yeUNhY2hlLmFjY291bnRzKTtcblxuICAgICAgICByZXR1cm4gYWNjb3VudEtleXM7XG4gICAgfVxuXG4gICAgZ2V0VG9rZW5LZXlzKCk6IFRva2VuS2V5cyB7XG4gICAgICAgIGNvbnN0IGluTWVtb3J5Q2FjaGUgPSB0aGlzLmdldEluTWVtb3J5Q2FjaGUoKTtcbiAgICAgICAgY29uc3QgdG9rZW5LZXlzID0ge1xuICAgICAgICAgICAgaWRUb2tlbjogT2JqZWN0LmtleXMoaW5NZW1vcnlDYWNoZS5pZFRva2VucyksXG4gICAgICAgICAgICBhY2Nlc3NUb2tlbjogT2JqZWN0LmtleXMoaW5NZW1vcnlDYWNoZS5hY2Nlc3NUb2tlbnMpLFxuICAgICAgICAgICAgcmVmcmVzaFRva2VuOiBPYmplY3Qua2V5cyhpbk1lbW9yeUNhY2hlLnJlZnJlc2hUb2tlbnMpLFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB0b2tlbktleXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVhZHMgYWNjb3VudCBmcm9tIGNhY2hlLCBidWlsZHMgaXQgaW50byBhbiBhY2NvdW50IGVudGl0eSBhbmQgcmV0dXJucyBpdC5cbiAgICAgKiBAcGFyYW0gYWNjb3VudEtleSAtIGxvb2t1cCBrZXkgdG8gZmV0Y2ggY2FjaGUgdHlwZSBBY2NvdW50RW50aXR5XG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICBnZXRBY2NvdW50KGFjY291bnRLZXk6IHN0cmluZyk6IEFjY291bnRFbnRpdHkgfCBudWxsIHtcbiAgICAgICAgY29uc3QgY2FjaGVkQWNjb3VudCA9IHRoaXMuZ2V0SXRlbShhY2NvdW50S2V5KTtcbiAgICAgICAgcmV0dXJuIGNhY2hlZEFjY291bnRcbiAgICAgICAgICAgID8gT2JqZWN0LmFzc2lnbihuZXcgQWNjb3VudEVudGl0eSgpLCB0aGlzLmdldEl0ZW0oYWNjb3VudEtleSkpXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogc2V0IGFjY291bnQgZW50aXR5XG4gICAgICogQHBhcmFtIGFjY291bnQgLSBjYWNoZSB2YWx1ZSB0byBiZSBzZXQgb2YgdHlwZSBBY2NvdW50RW50aXR5XG4gICAgICovXG4gICAgYXN5bmMgc2V0QWNjb3VudChhY2NvdW50OiBBY2NvdW50RW50aXR5KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGFjY291bnRLZXkgPSBhY2NvdW50LmdlbmVyYXRlQWNjb3VudEtleSgpO1xuICAgICAgICB0aGlzLnNldEl0ZW0oYWNjb3VudEtleSwgYWNjb3VudCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZmV0Y2ggdGhlIGlkVG9rZW4gY3JlZGVudGlhbFxuICAgICAqIEBwYXJhbSBpZFRva2VuS2V5IC0gbG9va3VwIGtleSB0byBmZXRjaCBjYWNoZSB0eXBlIElkVG9rZW5FbnRpdHlcbiAgICAgKi9cbiAgICBnZXRJZFRva2VuQ3JlZGVudGlhbChpZFRva2VuS2V5OiBzdHJpbmcpOiBJZFRva2VuRW50aXR5IHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IGlkVG9rZW4gPSB0aGlzLmdldEl0ZW0oaWRUb2tlbktleSkgYXMgSWRUb2tlbkVudGl0eTtcbiAgICAgICAgaWYgKENhY2hlSGVscGVycy5pc0lkVG9rZW5FbnRpdHkoaWRUb2tlbikpIHtcbiAgICAgICAgICAgIHJldHVybiBpZFRva2VuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHNldCBpZFRva2VuIGNyZWRlbnRpYWxcbiAgICAgKiBAcGFyYW0gaWRUb2tlbiAtIGNhY2hlIHZhbHVlIHRvIGJlIHNldCBvZiB0eXBlIElkVG9rZW5FbnRpdHlcbiAgICAgKi9cbiAgICBhc3luYyBzZXRJZFRva2VuQ3JlZGVudGlhbChpZFRva2VuOiBJZFRva2VuRW50aXR5KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGlkVG9rZW5LZXkgPSBDYWNoZUhlbHBlcnMuZ2VuZXJhdGVDcmVkZW50aWFsS2V5KGlkVG9rZW4pO1xuICAgICAgICB0aGlzLnNldEl0ZW0oaWRUb2tlbktleSwgaWRUb2tlbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZmV0Y2ggdGhlIGFjY2Vzc1Rva2VuIGNyZWRlbnRpYWxcbiAgICAgKiBAcGFyYW0gYWNjZXNzVG9rZW5LZXkgLSBsb29rdXAga2V5IHRvIGZldGNoIGNhY2hlIHR5cGUgQWNjZXNzVG9rZW5FbnRpdHlcbiAgICAgKi9cbiAgICBnZXRBY2Nlc3NUb2tlbkNyZWRlbnRpYWwoYWNjZXNzVG9rZW5LZXk6IHN0cmluZyk6IEFjY2Vzc1Rva2VuRW50aXR5IHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gdGhpcy5nZXRJdGVtKGFjY2Vzc1Rva2VuS2V5KSBhcyBBY2Nlc3NUb2tlbkVudGl0eTtcbiAgICAgICAgaWYgKENhY2hlSGVscGVycy5pc0FjY2Vzc1Rva2VuRW50aXR5KGFjY2Vzc1Rva2VuKSkge1xuICAgICAgICAgICAgcmV0dXJuIGFjY2Vzc1Rva2VuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHNldCBhY2Nlc3NUb2tlbiBjcmVkZW50aWFsXG4gICAgICogQHBhcmFtIGFjY2Vzc1Rva2VuIC0gIGNhY2hlIHZhbHVlIHRvIGJlIHNldCBvZiB0eXBlIEFjY2Vzc1Rva2VuRW50aXR5XG4gICAgICovXG4gICAgYXN5bmMgc2V0QWNjZXNzVG9rZW5DcmVkZW50aWFsKFxuICAgICAgICBhY2Nlc3NUb2tlbjogQWNjZXNzVG9rZW5FbnRpdHlcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgYWNjZXNzVG9rZW5LZXkgPSBDYWNoZUhlbHBlcnMuZ2VuZXJhdGVDcmVkZW50aWFsS2V5KGFjY2Vzc1Rva2VuKTtcbiAgICAgICAgdGhpcy5zZXRJdGVtKGFjY2Vzc1Rva2VuS2V5LCBhY2Nlc3NUb2tlbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZmV0Y2ggdGhlIHJlZnJlc2hUb2tlbiBjcmVkZW50aWFsXG4gICAgICogQHBhcmFtIHJlZnJlc2hUb2tlbktleSAtIGxvb2t1cCBrZXkgdG8gZmV0Y2ggY2FjaGUgdHlwZSBSZWZyZXNoVG9rZW5FbnRpdHlcbiAgICAgKi9cbiAgICBnZXRSZWZyZXNoVG9rZW5DcmVkZW50aWFsKFxuICAgICAgICByZWZyZXNoVG9rZW5LZXk6IHN0cmluZ1xuICAgICk6IFJlZnJlc2hUb2tlbkVudGl0eSB8IG51bGwge1xuICAgICAgICBjb25zdCByZWZyZXNoVG9rZW4gPSB0aGlzLmdldEl0ZW0oXG4gICAgICAgICAgICByZWZyZXNoVG9rZW5LZXlcbiAgICAgICAgKSBhcyBSZWZyZXNoVG9rZW5FbnRpdHk7XG4gICAgICAgIGlmIChDYWNoZUhlbHBlcnMuaXNSZWZyZXNoVG9rZW5FbnRpdHkocmVmcmVzaFRva2VuKSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlZnJlc2hUb2tlbiBhcyBSZWZyZXNoVG9rZW5FbnRpdHk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogc2V0IHJlZnJlc2hUb2tlbiBjcmVkZW50aWFsXG4gICAgICogQHBhcmFtIHJlZnJlc2hUb2tlbiAtIGNhY2hlIHZhbHVlIHRvIGJlIHNldCBvZiB0eXBlIFJlZnJlc2hUb2tlbkVudGl0eVxuICAgICAqL1xuICAgIGFzeW5jIHNldFJlZnJlc2hUb2tlbkNyZWRlbnRpYWwoXG4gICAgICAgIHJlZnJlc2hUb2tlbjogUmVmcmVzaFRva2VuRW50aXR5XG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHJlZnJlc2hUb2tlbktleSA9XG4gICAgICAgICAgICBDYWNoZUhlbHBlcnMuZ2VuZXJhdGVDcmVkZW50aWFsS2V5KHJlZnJlc2hUb2tlbik7XG4gICAgICAgIHRoaXMuc2V0SXRlbShyZWZyZXNoVG9rZW5LZXksIHJlZnJlc2hUb2tlbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZmV0Y2ggYXBwTWV0YWRhdGEgZW50aXR5IGZyb20gdGhlIHBsYXRmb3JtIGNhY2hlXG4gICAgICogQHBhcmFtIGFwcE1ldGFkYXRhS2V5IC0gbG9va3VwIGtleSB0byBmZXRjaCBjYWNoZSB0eXBlIEFwcE1ldGFkYXRhRW50aXR5XG4gICAgICovXG4gICAgZ2V0QXBwTWV0YWRhdGEoYXBwTWV0YWRhdGFLZXk6IHN0cmluZyk6IEFwcE1ldGFkYXRhRW50aXR5IHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IGFwcE1ldGFkYXRhOiBBcHBNZXRhZGF0YUVudGl0eSA9IHRoaXMuZ2V0SXRlbShcbiAgICAgICAgICAgIGFwcE1ldGFkYXRhS2V5XG4gICAgICAgICkgYXMgQXBwTWV0YWRhdGFFbnRpdHk7XG4gICAgICAgIGlmIChDYWNoZUhlbHBlcnMuaXNBcHBNZXRhZGF0YUVudGl0eShhcHBNZXRhZGF0YUtleSwgYXBwTWV0YWRhdGEpKSB7XG4gICAgICAgICAgICByZXR1cm4gYXBwTWV0YWRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogc2V0IGFwcE1ldGFkYXRhIGVudGl0eSB0byB0aGUgcGxhdGZvcm0gY2FjaGVcbiAgICAgKiBAcGFyYW0gYXBwTWV0YWRhdGEgLSBjYWNoZSB2YWx1ZSB0byBiZSBzZXQgb2YgdHlwZSBBcHBNZXRhZGF0YUVudGl0eVxuICAgICAqL1xuICAgIHNldEFwcE1ldGFkYXRhKGFwcE1ldGFkYXRhOiBBcHBNZXRhZGF0YUVudGl0eSk6IHZvaWQge1xuICAgICAgICBjb25zdCBhcHBNZXRhZGF0YUtleSA9IENhY2hlSGVscGVycy5nZW5lcmF0ZUFwcE1ldGFkYXRhS2V5KGFwcE1ldGFkYXRhKTtcbiAgICAgICAgdGhpcy5zZXRJdGVtKGFwcE1ldGFkYXRhS2V5LCBhcHBNZXRhZGF0YSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZmV0Y2ggc2VydmVyIHRlbGVtZXRyeSBlbnRpdHkgZnJvbSB0aGUgcGxhdGZvcm0gY2FjaGVcbiAgICAgKiBAcGFyYW0gc2VydmVyVGVsZW1ldHJ5a2V5IC0gbG9va3VwIGtleSB0byBmZXRjaCBjYWNoZSB0eXBlIFNlcnZlclRlbGVtZXRyeUVudGl0eVxuICAgICAqL1xuICAgIGdldFNlcnZlclRlbGVtZXRyeShcbiAgICAgICAgc2VydmVyVGVsZW1ldHJ5a2V5OiBzdHJpbmdcbiAgICApOiBTZXJ2ZXJUZWxlbWV0cnlFbnRpdHkgfCBudWxsIHtcbiAgICAgICAgY29uc3Qgc2VydmVyVGVsZW1ldHJ5RW50aXR5OiBTZXJ2ZXJUZWxlbWV0cnlFbnRpdHkgPSB0aGlzLmdldEl0ZW0oXG4gICAgICAgICAgICBzZXJ2ZXJUZWxlbWV0cnlrZXlcbiAgICAgICAgKSBhcyBTZXJ2ZXJUZWxlbWV0cnlFbnRpdHk7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHNlcnZlclRlbGVtZXRyeUVudGl0eSAmJlxuICAgICAgICAgICAgQ2FjaGVIZWxwZXJzLmlzU2VydmVyVGVsZW1ldHJ5RW50aXR5KFxuICAgICAgICAgICAgICAgIHNlcnZlclRlbGVtZXRyeWtleSxcbiAgICAgICAgICAgICAgICBzZXJ2ZXJUZWxlbWV0cnlFbnRpdHlcbiAgICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VydmVyVGVsZW1ldHJ5RW50aXR5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHNldCBzZXJ2ZXIgdGVsZW1ldHJ5IGVudGl0eSB0byB0aGUgcGxhdGZvcm0gY2FjaGVcbiAgICAgKiBAcGFyYW0gc2VydmVyVGVsZW1ldHJ5S2V5IC0gbG9va3VwIGtleSB0byBmZXRjaCBjYWNoZSB0eXBlIFNlcnZlclRlbGVtZXRyeUVudGl0eVxuICAgICAqIEBwYXJhbSBzZXJ2ZXJUZWxlbWV0cnkgLSBjYWNoZSB2YWx1ZSB0byBiZSBzZXQgb2YgdHlwZSBTZXJ2ZXJUZWxlbWV0cnlFbnRpdHlcbiAgICAgKi9cbiAgICBzZXRTZXJ2ZXJUZWxlbWV0cnkoXG4gICAgICAgIHNlcnZlclRlbGVtZXRyeUtleTogc3RyaW5nLFxuICAgICAgICBzZXJ2ZXJUZWxlbWV0cnk6IFNlcnZlclRlbGVtZXRyeUVudGl0eVxuICAgICk6IHZvaWQge1xuICAgICAgICB0aGlzLnNldEl0ZW0oc2VydmVyVGVsZW1ldHJ5S2V5LCBzZXJ2ZXJUZWxlbWV0cnkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGZldGNoIGF1dGhvcml0eSBtZXRhZGF0YSBlbnRpdHkgZnJvbSB0aGUgcGxhdGZvcm0gY2FjaGVcbiAgICAgKiBAcGFyYW0ga2V5IC0gbG9va3VwIGtleSB0byBmZXRjaCBjYWNoZSB0eXBlIEF1dGhvcml0eU1ldGFkYXRhRW50aXR5XG4gICAgICovXG4gICAgZ2V0QXV0aG9yaXR5TWV0YWRhdGEoa2V5OiBzdHJpbmcpOiBBdXRob3JpdHlNZXRhZGF0YUVudGl0eSB8IG51bGwge1xuICAgICAgICBjb25zdCBhdXRob3JpdHlNZXRhZGF0YUVudGl0eTogQXV0aG9yaXR5TWV0YWRhdGFFbnRpdHkgPSB0aGlzLmdldEl0ZW0oXG4gICAgICAgICAgICBrZXlcbiAgICAgICAgKSBhcyBBdXRob3JpdHlNZXRhZGF0YUVudGl0eTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgYXV0aG9yaXR5TWV0YWRhdGFFbnRpdHkgJiZcbiAgICAgICAgICAgIENhY2hlSGVscGVycy5pc0F1dGhvcml0eU1ldGFkYXRhRW50aXR5KGtleSwgYXV0aG9yaXR5TWV0YWRhdGFFbnRpdHkpXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGF1dGhvcml0eU1ldGFkYXRhRW50aXR5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBhbGwgYXV0aG9yaXR5IG1ldGFkYXRhIGtleXNcbiAgICAgKi9cbiAgICBnZXRBdXRob3JpdHlNZXRhZGF0YUtleXMoKTogQXJyYXk8c3RyaW5nPiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEtleXMoKS5maWx0ZXIoKGtleSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNBdXRob3JpdHlNZXRhZGF0YShrZXkpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzZXQgYXV0aG9yaXR5IG1ldGFkYXRhIGVudGl0eSB0byB0aGUgcGxhdGZvcm0gY2FjaGVcbiAgICAgKiBAcGFyYW0ga2V5IC0gbG9va3VwIGtleSB0byBmZXRjaCBjYWNoZSB0eXBlIEF1dGhvcml0eU1ldGFkYXRhRW50aXR5XG4gICAgICogQHBhcmFtIG1ldGFkYXRhIC0gY2FjaGUgdmFsdWUgdG8gYmUgc2V0IG9mIHR5cGUgQXV0aG9yaXR5TWV0YWRhdGFFbnRpdHlcbiAgICAgKi9cbiAgICBzZXRBdXRob3JpdHlNZXRhZGF0YShrZXk6IHN0cmluZywgbWV0YWRhdGE6IEF1dGhvcml0eU1ldGFkYXRhRW50aXR5KTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2V0SXRlbShrZXksIG1ldGFkYXRhKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBmZXRjaCB0aHJvdHRsaW5nIGVudGl0eSBmcm9tIHRoZSBwbGF0Zm9ybSBjYWNoZVxuICAgICAqIEBwYXJhbSB0aHJvdHRsaW5nQ2FjaGVLZXkgLSBsb29rdXAga2V5IHRvIGZldGNoIGNhY2hlIHR5cGUgVGhyb3R0bGluZ0VudGl0eVxuICAgICAqL1xuICAgIGdldFRocm90dGxpbmdDYWNoZSh0aHJvdHRsaW5nQ2FjaGVLZXk6IHN0cmluZyk6IFRocm90dGxpbmdFbnRpdHkgfCBudWxsIHtcbiAgICAgICAgY29uc3QgdGhyb3R0bGluZ0NhY2hlOiBUaHJvdHRsaW5nRW50aXR5ID0gdGhpcy5nZXRJdGVtKFxuICAgICAgICAgICAgdGhyb3R0bGluZ0NhY2hlS2V5XG4gICAgICAgICkgYXMgVGhyb3R0bGluZ0VudGl0eTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhyb3R0bGluZ0NhY2hlICYmXG4gICAgICAgICAgICBDYWNoZUhlbHBlcnMuaXNUaHJvdHRsaW5nRW50aXR5KHRocm90dGxpbmdDYWNoZUtleSwgdGhyb3R0bGluZ0NhY2hlKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiB0aHJvdHRsaW5nQ2FjaGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogc2V0IHRocm90dGxpbmcgZW50aXR5IHRvIHRoZSBwbGF0Zm9ybSBjYWNoZVxuICAgICAqIEBwYXJhbSB0aHJvdHRsaW5nQ2FjaGVLZXkgLSBsb29rdXAga2V5IHRvIGZldGNoIGNhY2hlIHR5cGUgVGhyb3R0bGluZ0VudGl0eVxuICAgICAqIEBwYXJhbSB0aHJvdHRsaW5nQ2FjaGUgLSBjYWNoZSB2YWx1ZSB0byBiZSBzZXQgb2YgdHlwZSBUaHJvdHRsaW5nRW50aXR5XG4gICAgICovXG4gICAgc2V0VGhyb3R0bGluZ0NhY2hlKFxuICAgICAgICB0aHJvdHRsaW5nQ2FjaGVLZXk6IHN0cmluZyxcbiAgICAgICAgdGhyb3R0bGluZ0NhY2hlOiBUaHJvdHRsaW5nRW50aXR5XG4gICAgKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2V0SXRlbSh0aHJvdHRsaW5nQ2FjaGVLZXksIHRocm90dGxpbmdDYWNoZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgY2FjaGUgaXRlbSBmcm9tIG1lbW9yeSB3aXRoIHRoZSBnaXZlbiBrZXkuXG4gICAgICogQHBhcmFtIGtleSAtIGxvb2t1cCBrZXkgdG8gcmVtb3ZlIGEgY2FjaGUgZW50aXR5XG4gICAgICogQHBhcmFtIGluTWVtb3J5IC0ga2V5IHZhbHVlIG1hcCBvZiB0aGUgY2FjaGVcbiAgICAgKi9cbiAgICByZW1vdmVJdGVtKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlUGlpKGBJdGVtIGtleTogJHtrZXl9YCk7XG5cbiAgICAgICAgLy8gcmVhZCBpbk1lbW9yeUNhY2hlXG4gICAgICAgIGxldCByZXN1bHQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLmdldENhY2hlKCk7XG5cbiAgICAgICAgaWYgKCEhY2FjaGVba2V5XSkge1xuICAgICAgICAgICAgZGVsZXRlIGNhY2hlW2tleV07XG4gICAgICAgICAgICByZXN1bHQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gd3JpdGUgdG8gdGhlIGNhY2hlIGFmdGVyIHJlbW92YWxcbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy5zZXRDYWNoZShjYWNoZSk7XG4gICAgICAgICAgICB0aGlzLmVtaXRDaGFuZ2UoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhY2NvdW50IGVudGl0eSBmcm9tIHRoZSBwbGF0Zm9ybSBjYWNoZSBpZiBpdCdzIG91dGRhdGVkXG4gICAgICogQHBhcmFtIGFjY291bnRLZXkgLSBsb29rdXAga2V5IHRvIGZldGNoIGNhY2hlIHR5cGUgQWNjb3VudEVudGl0eVxuICAgICAqL1xuICAgIHJlbW92ZU91dGRhdGVkQWNjb3VudChhY2NvdW50S2V5OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZW1vdmVJdGVtKGFjY291bnRLZXkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyB3aGV0aGVyIGtleSBpcyBpbiBjYWNoZS5cbiAgICAgKiBAcGFyYW0ga2V5IC0gbG9vayB1cCBrZXkgZm9yIGEgY2FjaGUgZW50aXR5XG4gICAgICovXG4gICAgY29udGFpbnNLZXkoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0S2V5cygpLmluY2x1ZGVzKGtleSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBhbGwga2V5cyBpbiB3aW5kb3cuXG4gICAgICovXG4gICAgZ2V0S2V5cygpOiBzdHJpbmdbXSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKFwiUmV0cmlldmluZyBhbGwgY2FjaGUga2V5c1wiKTtcblxuICAgICAgICAvLyByZWFkIGNhY2hlXG4gICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5nZXRDYWNoZSgpO1xuICAgICAgICByZXR1cm4gWy4uLk9iamVjdC5rZXlzKGNhY2hlKV07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xlYXJzIGFsbCBjYWNoZSBlbnRyaWVzIGNyZWF0ZWQgYnkgTVNBTCAoZXhjZXB0IHRva2VucykuXG4gICAgICovXG4gICAgY2xlYXIoKTogdm9pZCB7XG4gICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKFwiQ2xlYXJpbmcgY2FjaGUgZW50cmllcyBjcmVhdGVkIGJ5IE1TQUxcIik7XG5cbiAgICAgICAgLy8gcmVhZCBpbk1lbW9yeUNhY2hlXG4gICAgICAgIGNvbnN0IGNhY2hlS2V5cyA9IHRoaXMuZ2V0S2V5cygpO1xuXG4gICAgICAgIC8vIGRlbGV0ZSBlYWNoIGVsZW1lbnRcbiAgICAgICAgY2FjaGVLZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVJdGVtKGtleSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVtaXRDaGFuZ2UoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIGluIG1lbW9yeSBjYWNoZSBmcm9tIGFuIGV4aXNpdGluZyBjYWNoZSB2YXVsdFxuICAgICAqIEBwYXJhbSBjYWNoZSAtIGJsb2IgZm9ybWF0dGVkIGNhY2hlIChKU09OKVxuICAgICAqL1xuICAgIHN0YXRpYyBnZW5lcmF0ZUluTWVtb3J5Q2FjaGUoY2FjaGU6IHN0cmluZyk6IEluTWVtb3J5Q2FjaGUge1xuICAgICAgICByZXR1cm4gRGVzZXJpYWxpemVyLmRlc2VyaWFsaXplQWxsQ2FjaGUoXG4gICAgICAgICAgICBEZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVKU09OQmxvYihjYWNoZSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZXRyaWV2ZXMgdGhlIGZpbmFsIEpTT05cbiAgICAgKiBAcGFyYW0gaW5NZW1vcnlDYWNoZSAtIGl0ZW1pc2VkIGNhY2hlIHJlYWQgZnJvbSB0aGUgSlNPTlxuICAgICAqL1xuICAgIHN0YXRpYyBnZW5lcmF0ZUpzb25DYWNoZShpbk1lbW9yeUNhY2hlOiBJbk1lbW9yeUNhY2hlKTogSnNvbkNhY2hlIHtcbiAgICAgICAgcmV0dXJuIFNlcmlhbGl6ZXIuc2VyaWFsaXplQWxsQ2FjaGUoaW5NZW1vcnlDYWNoZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBhIGNyZWRlbnRpYWwncyBjYWNoZSBrZXkgaWYgdGhlIGN1cnJlbnQgY2FjaGUga2V5IGlzIG91dGRhdGVkXG4gICAgICovXG4gICAgdXBkYXRlQ3JlZGVudGlhbENhY2hlS2V5KFxuICAgICAgICBjdXJyZW50Q2FjaGVLZXk6IHN0cmluZyxcbiAgICAgICAgY3JlZGVudGlhbDogVmFsaWRDcmVkZW50aWFsVHlwZVxuICAgICk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRDYWNoZUtleSA9IENhY2hlSGVscGVycy5nZW5lcmF0ZUNyZWRlbnRpYWxLZXkoY3JlZGVudGlhbCk7XG5cbiAgICAgICAgaWYgKGN1cnJlbnRDYWNoZUtleSAhPT0gdXBkYXRlZENhY2hlS2V5KSB7XG4gICAgICAgICAgICBjb25zdCBjYWNoZUl0ZW0gPSB0aGlzLmdldEl0ZW0oY3VycmVudENhY2hlS2V5KTtcbiAgICAgICAgICAgIGlmIChjYWNoZUl0ZW0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUl0ZW0oY3VycmVudENhY2hlS2V5KTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEl0ZW0odXBkYXRlZENhY2hlS2V5LCBjYWNoZUl0ZW0pO1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgICAgIGBVcGRhdGVkIGFuIG91dGRhdGVkICR7Y3JlZGVudGlhbC5jcmVkZW50aWFsVHlwZX0gY2FjaGUga2V5YFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZWRDYWNoZUtleTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIGBBdHRlbXB0ZWQgdG8gdXBkYXRlIGFuIG91dGRhdGVkICR7Y3JlZGVudGlhbC5jcmVkZW50aWFsVHlwZX0gY2FjaGUga2V5IGJ1dCBubyBpdGVtIG1hdGNoaW5nIHRoZSBvdXRkYXRlZCBrZXkgd2FzIGZvdW5kIGluIHN0b3JhZ2VgXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjdXJyZW50Q2FjaGVLZXk7XG4gICAgfVxufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBOb2RlU3RvcmFnZSB9IGZyb20gXCIuL05vZGVTdG9yYWdlLmpzXCI7XG5pbXBvcnQge1xuICAgIEFjY291bnRFbnRpdHksXG4gICAgQWNjb3VudEluZm8sXG4gICAgTG9nZ2VyLFxuICAgIElTZXJpYWxpemFibGVUb2tlbkNhY2hlLFxuICAgIElDYWNoZVBsdWdpbixcbiAgICBUb2tlbkNhY2hlQ29udGV4dCxcbn0gZnJvbSBcIkBhenVyZS9tc2FsLWNvbW1vbi9ub2RlXCI7XG5pbXBvcnQge1xuICAgIEluTWVtb3J5Q2FjaGUsXG4gICAgSnNvbkNhY2hlLFxuICAgIFNlcmlhbGl6ZWRBY2NvdW50RW50aXR5LFxuICAgIFNlcmlhbGl6ZWRBY2Nlc3NUb2tlbkVudGl0eSxcbiAgICBTZXJpYWxpemVkUmVmcmVzaFRva2VuRW50aXR5LFxuICAgIFNlcmlhbGl6ZWRJZFRva2VuRW50aXR5LFxuICAgIFNlcmlhbGl6ZWRBcHBNZXRhZGF0YUVudGl0eSxcbiAgICBDYWNoZUtWU3RvcmUsXG59IGZyb20gXCIuL3NlcmlhbGl6ZXIvU2VyaWFsaXplclR5cGVzLmpzXCI7XG5pbXBvcnQgeyBEZXNlcmlhbGl6ZXIgfSBmcm9tIFwiLi9zZXJpYWxpemVyL0Rlc2VyaWFsaXplci5qc1wiO1xuaW1wb3J0IHsgU2VyaWFsaXplciB9IGZyb20gXCIuL3NlcmlhbGl6ZXIvU2VyaWFsaXplci5qc1wiO1xuaW1wb3J0IHsgSVRva2VuQ2FjaGUgfSBmcm9tIFwiLi9JVG9rZW5DYWNoZS5qc1wiO1xuXG5jb25zdCBkZWZhdWx0U2VyaWFsaXplZENhY2hlOiBKc29uQ2FjaGUgPSB7XG4gICAgQWNjb3VudDoge30sXG4gICAgSWRUb2tlbjoge30sXG4gICAgQWNjZXNzVG9rZW46IHt9LFxuICAgIFJlZnJlc2hUb2tlbjoge30sXG4gICAgQXBwTWV0YWRhdGE6IHt9LFxufTtcblxuLyoqXG4gKiBJbi1tZW1vcnkgdG9rZW4gY2FjaGUgbWFuYWdlclxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgVG9rZW5DYWNoZSBpbXBsZW1lbnRzIElTZXJpYWxpemFibGVUb2tlbkNhY2hlLCBJVG9rZW5DYWNoZSB7XG4gICAgcHJpdmF0ZSBzdG9yYWdlOiBOb2RlU3RvcmFnZTtcbiAgICBwcml2YXRlIGNhY2hlSGFzQ2hhbmdlZDogYm9vbGVhbjtcbiAgICBwcml2YXRlIGNhY2hlU25hcHNob3Q6IHN0cmluZztcbiAgICBwdWJsaWMgcmVhZG9ubHkgcGVyc2lzdGVuY2U6IElDYWNoZVBsdWdpbjtcbiAgICBwcml2YXRlIGxvZ2dlcjogTG9nZ2VyO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHN0b3JhZ2U6IE5vZGVTdG9yYWdlLFxuICAgICAgICBsb2dnZXI6IExvZ2dlcixcbiAgICAgICAgY2FjaGVQbHVnaW4/OiBJQ2FjaGVQbHVnaW5cbiAgICApIHtcbiAgICAgICAgdGhpcy5jYWNoZUhhc0NoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zdG9yYWdlID0gc3RvcmFnZTtcbiAgICAgICAgdGhpcy5zdG9yYWdlLnJlZ2lzdGVyQ2hhbmdlRW1pdHRlcih0aGlzLmhhbmRsZUNoYW5nZUV2ZW50LmJpbmQodGhpcykpO1xuICAgICAgICBpZiAoY2FjaGVQbHVnaW4pIHtcbiAgICAgICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSBjYWNoZVBsdWdpbjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvZ2dlciA9IGxvZ2dlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdG8gdHJ1ZSBpZiBjYWNoZSBzdGF0ZSBoYXMgY2hhbmdlZCBzaW5jZSBsYXN0IHRpbWUgc2VyaWFsaXplIG9yIHdyaXRlVG9QZXJzaXN0ZW5jZSB3YXMgY2FsbGVkXG4gICAgICovXG4gICAgaGFzQ2hhbmdlZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVIYXNDaGFuZ2VkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNlcmlhbGl6ZXMgaW4gbWVtb3J5IGNhY2hlIHRvIEpTT05cbiAgICAgKi9cbiAgICBzZXJpYWxpemUoKTogc3RyaW5nIHtcbiAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoXCJTZXJpYWxpemluZyBpbi1tZW1vcnkgY2FjaGVcIik7XG4gICAgICAgIGxldCBmaW5hbFN0YXRlID0gU2VyaWFsaXplci5zZXJpYWxpemVBbGxDYWNoZShcbiAgICAgICAgICAgIHRoaXMuc3RvcmFnZS5nZXRJbk1lbW9yeUNhY2hlKCkgYXMgSW5NZW1vcnlDYWNoZVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIGlmIGNhY2hlU25hcHNob3Qgbm90IG51bGwgb3IgZW1wdHksIG1lcmdlXG4gICAgICAgIGlmICh0aGlzLmNhY2hlU25hcHNob3QpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKFwiUmVhZGluZyBjYWNoZSBzbmFwc2hvdCBmcm9tIGRpc2tcIik7XG4gICAgICAgICAgICBmaW5hbFN0YXRlID0gdGhpcy5tZXJnZVN0YXRlKFxuICAgICAgICAgICAgICAgIEpTT04ucGFyc2UodGhpcy5jYWNoZVNuYXBzaG90KSxcbiAgICAgICAgICAgICAgICBmaW5hbFN0YXRlXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoXCJObyBjYWNoZSBzbmFwc2hvdCB0byBtZXJnZVwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhY2hlSGFzQ2hhbmdlZCA9IGZhbHNlO1xuXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShmaW5hbFN0YXRlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXNlcmlhbGl6ZXMgSlNPTiB0byBpbi1tZW1vcnkgY2FjaGUuIEpTT04gc2hvdWxkIGJlIGluIE1TQUwgY2FjaGUgc2NoZW1hIGZvcm1hdFxuICAgICAqIEBwYXJhbSBjYWNoZSAtIGJsb2IgZm9ybWF0dGVkIGNhY2hlXG4gICAgICovXG4gICAgZGVzZXJpYWxpemUoY2FjaGU6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShcIkRlc2VyaWFsaXppbmcgSlNPTiB0byBpbi1tZW1vcnkgY2FjaGVcIik7XG4gICAgICAgIHRoaXMuY2FjaGVTbmFwc2hvdCA9IGNhY2hlO1xuXG4gICAgICAgIGlmICh0aGlzLmNhY2hlU25hcHNob3QpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKFwiUmVhZGluZyBjYWNoZSBzbmFwc2hvdCBmcm9tIGRpc2tcIik7XG4gICAgICAgICAgICBjb25zdCBkZXNlcmlhbGl6ZWRDYWNoZSA9IERlc2VyaWFsaXplci5kZXNlcmlhbGl6ZUFsbENhY2hlKFxuICAgICAgICAgICAgICAgIHRoaXMub3ZlcmxheURlZmF1bHRzKEpTT04ucGFyc2UodGhpcy5jYWNoZVNuYXBzaG90KSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0SW5NZW1vcnlDYWNoZShkZXNlcmlhbGl6ZWRDYWNoZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShcIk5vIGNhY2hlIHNuYXBzaG90IHRvIGRlc2VyaWFsaXplXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmV0Y2hlcyB0aGUgY2FjaGUga2V5LXZhbHVlIG1hcFxuICAgICAqL1xuICAgIGdldEtWU3RvcmUoKTogQ2FjaGVLVlN0b3JlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RvcmFnZS5nZXRDYWNoZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgY2FjaGUgc25hcHNob3QgaW4gQ2FjaGVLVlN0b3JlIGZvcm1hdFxuICAgICAqL1xuICAgIGdldENhY2hlU25hcHNob3QoKTogQ2FjaGVLVlN0b3JlIHtcbiAgICAgICAgY29uc3QgZGVzZXJpYWxpemVkUGVyc2lzdGVudFN0b3JhZ2UgPSBOb2RlU3RvcmFnZS5nZW5lcmF0ZUluTWVtb3J5Q2FjaGUoXG4gICAgICAgICAgICB0aGlzLmNhY2hlU25hcHNob3RcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RvcmFnZS5pbk1lbW9yeUNhY2hlVG9DYWNoZShkZXNlcmlhbGl6ZWRQZXJzaXN0ZW50U3RvcmFnZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQVBJIHRoYXQgcmV0cmlldmVzIGFsbCBhY2NvdW50cyBjdXJyZW50bHkgaW4gY2FjaGUgdG8gdGhlIHVzZXJcbiAgICAgKi9cbiAgICBhc3luYyBnZXRBbGxBY2NvdW50cygpOiBQcm9taXNlPEFjY291bnRJbmZvW10+IHtcbiAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoXCJnZXRBbGxBY2NvdW50cyBjYWxsZWRcIik7XG4gICAgICAgIGxldCBjYWNoZUNvbnRleHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wZXJzaXN0ZW5jZSkge1xuICAgICAgICAgICAgICAgIGNhY2hlQ29udGV4dCA9IG5ldyBUb2tlbkNhY2hlQ29udGV4dCh0aGlzLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5iZWZvcmVDYWNoZUFjY2VzcyhjYWNoZUNvbnRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RvcmFnZS5nZXRBbGxBY2NvdW50cygpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGVyc2lzdGVuY2UgJiYgY2FjaGVDb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5hZnRlckNhY2hlQWNjZXNzKGNhY2hlQ29udGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBzaWduZWQgaW4gYWNjb3VudCBtYXRjaGluZyBob21lQWNjb3VudElkLlxuICAgICAqICh0aGUgYWNjb3VudCBvYmplY3QgaXMgY3JlYXRlZCBhdCB0aGUgdGltZSBvZiBzdWNjZXNzZnVsIGxvZ2luKVxuICAgICAqIG9yIG51bGwgd2hlbiBubyBtYXRjaGluZyBhY2NvdW50IGlzIGZvdW5kXG4gICAgICogQHBhcmFtIGhvbWVBY2NvdW50SWQgLSB1bmlxdWUgaWRlbnRpZmllciBmb3IgYW4gYWNjb3VudCAodWlkLnV0aWQpXG4gICAgICovXG4gICAgYXN5bmMgZ2V0QWNjb3VudEJ5SG9tZUlkKFxuICAgICAgICBob21lQWNjb3VudElkOiBzdHJpbmdcbiAgICApOiBQcm9taXNlPEFjY291bnRJbmZvIHwgbnVsbD4ge1xuICAgICAgICBjb25zdCBhbGxBY2NvdW50cyA9IGF3YWl0IHRoaXMuZ2V0QWxsQWNjb3VudHMoKTtcbiAgICAgICAgaWYgKGhvbWVBY2NvdW50SWQgJiYgYWxsQWNjb3VudHMgJiYgYWxsQWNjb3VudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIGFsbEFjY291bnRzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGFjY291bnRPYmopID0+IGFjY291bnRPYmouaG9tZUFjY291bnRJZCA9PT0gaG9tZUFjY291bnRJZFxuICAgICAgICAgICAgICAgIClbMF0gfHwgbnVsbFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgc2lnbmVkIGluIGFjY291bnQgbWF0Y2hpbmcgbG9jYWxBY2NvdW50SWQuXG4gICAgICogKHRoZSBhY2NvdW50IG9iamVjdCBpcyBjcmVhdGVkIGF0IHRoZSB0aW1lIG9mIHN1Y2Nlc3NmdWwgbG9naW4pXG4gICAgICogb3IgbnVsbCB3aGVuIG5vIG1hdGNoaW5nIGFjY291bnQgaXMgZm91bmRcbiAgICAgKiBAcGFyYW0gbG9jYWxBY2NvdW50SWQgLSB1bmlxdWUgaWRlbnRpZmllciBvZiBhbiBhY2NvdW50IChzdWIvb2JqIHdoZW4gaG9tZUFjY291bnRJZCBjYW5ub3QgYmUgcG9wdWxhdGVkKVxuICAgICAqL1xuICAgIGFzeW5jIGdldEFjY291bnRCeUxvY2FsSWQoXG4gICAgICAgIGxvY2FsQWNjb3VudElkOiBzdHJpbmdcbiAgICApOiBQcm9taXNlPEFjY291bnRJbmZvIHwgbnVsbD4ge1xuICAgICAgICBjb25zdCBhbGxBY2NvdW50cyA9IGF3YWl0IHRoaXMuZ2V0QWxsQWNjb3VudHMoKTtcbiAgICAgICAgaWYgKGxvY2FsQWNjb3VudElkICYmIGFsbEFjY291bnRzICYmIGFsbEFjY291bnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICBhbGxBY2NvdW50cy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgIChhY2NvdW50T2JqKSA9PiBhY2NvdW50T2JqLmxvY2FsQWNjb3VudElkID09PSBsb2NhbEFjY291bnRJZFxuICAgICAgICAgICAgICAgIClbMF0gfHwgbnVsbFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQVBJIHRvIHJlbW92ZSBhIHNwZWNpZmljIGFjY291bnQgYW5kIHRoZSByZWxldmFudCBkYXRhIGZyb20gY2FjaGVcbiAgICAgKiBAcGFyYW0gYWNjb3VudCAtIEFjY291bnRJbmZvIHBhc3NlZCBieSB0aGUgdXNlclxuICAgICAqL1xuICAgIGFzeW5jIHJlbW92ZUFjY291bnQoYWNjb3VudDogQWNjb3VudEluZm8pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoXCJyZW1vdmVBY2NvdW50IGNhbGxlZFwiKTtcbiAgICAgICAgbGV0IGNhY2hlQ29udGV4dDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBlcnNpc3RlbmNlKSB7XG4gICAgICAgICAgICAgICAgY2FjaGVDb250ZXh0ID0gbmV3IFRva2VuQ2FjaGVDb250ZXh0KHRoaXMsIHRydWUpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGVyc2lzdGVuY2UuYmVmb3JlQ2FjaGVBY2Nlc3MoY2FjaGVDb250ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc3RvcmFnZS5yZW1vdmVBY2NvdW50KFxuICAgICAgICAgICAgICAgIEFjY291bnRFbnRpdHkuZ2VuZXJhdGVBY2NvdW50Q2FjaGVLZXkoYWNjb3VudClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wZXJzaXN0ZW5jZSAmJiBjYWNoZUNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLmFmdGVyQ2FjaGVBY2Nlc3MoY2FjaGVDb250ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE92ZXJ3cml0ZXMgaW4tbWVtb3J5IGNhY2hlIHdpdGggcGVyc2lzdGVudCBjYWNoZVxuICAgICAqL1xuICAgIGFzeW5jIG92ZXJ3cml0ZUNhY2hlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoIXRoaXMucGVyc2lzdGVuY2UpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXG4gICAgICAgICAgICAgICAgXCJObyBwZXJzaXN0ZW5jZSBsYXllciBzcGVjaWZpZWQsIGNhY2hlIGNhbm5vdCBiZSBvdmVyd3JpdHRlblwiXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXCJPdmVyd3JpdGluZyBpbi1tZW1vcnkgY2FjaGUgd2l0aCBwZXJzaXN0ZW50IGNhY2hlXCIpO1xuICAgICAgICB0aGlzLnN0b3JhZ2UuY2xlYXIoKTtcbiAgICAgICAgY29uc3QgY2FjaGVDb250ZXh0ID0gbmV3IFRva2VuQ2FjaGVDb250ZXh0KHRoaXMsIGZhbHNlKTtcbiAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5iZWZvcmVDYWNoZUFjY2VzcyhjYWNoZUNvbnRleHQpO1xuICAgICAgICBjb25zdCBjYWNoZVNuYXBzaG90ID0gdGhpcy5nZXRDYWNoZVNuYXBzaG90KCk7XG4gICAgICAgIHRoaXMuc3RvcmFnZS5zZXRDYWNoZShjYWNoZVNuYXBzaG90KTtcbiAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5hZnRlckNhY2hlQWNjZXNzKGNhY2hlQ29udGV4dCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdoZW4gdGhlIGNhY2hlIGhhcyBjaGFuZ2VkIHN0YXRlLlxuICAgICAqL1xuICAgIHByaXZhdGUgaGFuZGxlQ2hhbmdlRXZlbnQoKSB7XG4gICAgICAgIHRoaXMuY2FjaGVIYXNDaGFuZ2VkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNZXJnZSBpbiBtZW1vcnkgY2FjaGUgd2l0aCB0aGUgY2FjaGUgc25hcHNob3QuXG4gICAgICogQHBhcmFtIG9sZFN0YXRlIC0gY2FjaGUgYmVmb3JlIGNoYW5nZXNcbiAgICAgKiBAcGFyYW0gY3VycmVudFN0YXRlIC0gY3VycmVudCBjYWNoZSBzdGF0ZSBpbiB0aGUgbGlicmFyeVxuICAgICAqL1xuICAgIHByaXZhdGUgbWVyZ2VTdGF0ZShcbiAgICAgICAgb2xkU3RhdGU6IEpzb25DYWNoZSxcbiAgICAgICAgY3VycmVudFN0YXRlOiBKc29uQ2FjaGVcbiAgICApOiBKc29uQ2FjaGUge1xuICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShcIk1lcmdpbmcgaW4tbWVtb3J5IGNhY2hlIHdpdGggY2FjaGUgc25hcHNob3RcIik7XG4gICAgICAgIGNvbnN0IHN0YXRlQWZ0ZXJSZW1vdmFsID0gdGhpcy5tZXJnZVJlbW92YWxzKG9sZFN0YXRlLCBjdXJyZW50U3RhdGUpO1xuICAgICAgICByZXR1cm4gdGhpcy5tZXJnZVVwZGF0ZXMoc3RhdGVBZnRlclJlbW92YWwsIGN1cnJlbnRTdGF0ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVlcCB1cGRhdGUgb2Ygb2xkU3RhdGUgYmFzZWQgb24gbmV3U3RhdGUgdmFsdWVzXG4gICAgICogQHBhcmFtIG9sZFN0YXRlIC0gY2FjaGUgYmVmb3JlIGNoYW5nZXNcbiAgICAgKiBAcGFyYW0gbmV3U3RhdGUgLSB1cGRhdGVkIGNhY2hlXG4gICAgICovXG4gICAgcHJpdmF0ZSBtZXJnZVVwZGF0ZXMob2xkU3RhdGU6IG9iamVjdCwgbmV3U3RhdGU6IG9iamVjdCk6IEpzb25DYWNoZSB7XG4gICAgICAgIE9iamVjdC5rZXlzKG5ld1N0YXRlKS5mb3JFYWNoKChuZXdLZXk6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBuZXdTdGF0ZVtuZXdLZXldO1xuXG4gICAgICAgICAgICAvLyBpZiBvbGRTdGF0ZSBkb2VzIG5vdCBjb250YWluIHZhbHVlIGJ1dCBuZXdWYWx1ZSBkb2VzLCBhZGQgaXRcbiAgICAgICAgICAgIGlmICghb2xkU3RhdGUuaGFzT3duUHJvcGVydHkobmV3S2V5KSkge1xuICAgICAgICAgICAgICAgIGlmIChuZXdWYWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBvbGRTdGF0ZVtuZXdLZXldID0gbmV3VmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBib3RoIG9sZFN0YXRlIGFuZCBuZXdTdGF0ZSBjb250YWluIHRoZSBrZXksIGRvIGRlZXAgdXBkYXRlXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VmFsdWVOb3ROdWxsID0gbmV3VmFsdWUgIT09IG51bGw7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VmFsdWVJc09iamVjdCA9IHR5cGVvZiBuZXdWYWx1ZSA9PT0gXCJvYmplY3RcIjtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdWYWx1ZUlzTm90QXJyYXkgPSAhQXJyYXkuaXNBcnJheShuZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkU3RhdGVOb3RVbmRlZmluZWRPck51bGwgPVxuICAgICAgICAgICAgICAgICAgICB0eXBlb2Ygb2xkU3RhdGVbbmV3S2V5XSAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgICAgICAgICAgICAgICBvbGRTdGF0ZVtuZXdLZXldICE9PSBudWxsO1xuXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZU5vdE51bGwgJiZcbiAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWVJc09iamVjdCAmJlxuICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZUlzTm90QXJyYXkgJiZcbiAgICAgICAgICAgICAgICAgICAgb2xkU3RhdGVOb3RVbmRlZmluZWRPck51bGxcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXJnZVVwZGF0ZXMob2xkU3RhdGVbbmV3S2V5XSwgbmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG9sZFN0YXRlW25ld0tleV0gPSBuZXdWYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBvbGRTdGF0ZSBhcyBKc29uQ2FjaGU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBlbnRpdGllcyBpbiBvbGRTdGF0ZSB0aGF0IHRoZSB3ZXJlIHJlbW92ZWQgZnJvbSBuZXdTdGF0ZS4gSWYgdGhlcmUgYXJlIGFueSB1bmtub3duIHZhbHVlcyBpbiByb290IG9mXG4gICAgICogb2xkU3RhdGUgdGhhdCBhcmUgbm90IHJlY29nbml6ZWQsIHRoZXkgYXJlIGxlZnQgdW50b3VjaGVkLlxuICAgICAqIEBwYXJhbSBvbGRTdGF0ZSAtIGNhY2hlIGJlZm9yZSBjaGFuZ2VzXG4gICAgICogQHBhcmFtIG5ld1N0YXRlIC0gdXBkYXRlZCBjYWNoZVxuICAgICAqL1xuICAgIHByaXZhdGUgbWVyZ2VSZW1vdmFscyhvbGRTdGF0ZTogSnNvbkNhY2hlLCBuZXdTdGF0ZTogSnNvbkNhY2hlKTogSnNvbkNhY2hlIHtcbiAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoXCJSZW1vdmUgdXBkYXRlZCBlbnRyaWVzIGluIGNhY2hlXCIpO1xuICAgICAgICBjb25zdCBhY2NvdW50cyA9IG9sZFN0YXRlLkFjY291bnRcbiAgICAgICAgICAgID8gdGhpcy5tZXJnZVJlbW92YWxzRGljdDxTZXJpYWxpemVkQWNjb3VudEVudGl0eT4oXG4gICAgICAgICAgICAgICAgICBvbGRTdGF0ZS5BY2NvdW50LFxuICAgICAgICAgICAgICAgICAgbmV3U3RhdGUuQWNjb3VudFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICA6IG9sZFN0YXRlLkFjY291bnQ7XG4gICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VucyA9IG9sZFN0YXRlLkFjY2Vzc1Rva2VuXG4gICAgICAgICAgICA/IHRoaXMubWVyZ2VSZW1vdmFsc0RpY3Q8U2VyaWFsaXplZEFjY2Vzc1Rva2VuRW50aXR5PihcbiAgICAgICAgICAgICAgICAgIG9sZFN0YXRlLkFjY2Vzc1Rva2VuLFxuICAgICAgICAgICAgICAgICAgbmV3U3RhdGUuQWNjZXNzVG9rZW5cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgOiBvbGRTdGF0ZS5BY2Nlc3NUb2tlbjtcbiAgICAgICAgY29uc3QgcmVmcmVzaFRva2VucyA9IG9sZFN0YXRlLlJlZnJlc2hUb2tlblxuICAgICAgICAgICAgPyB0aGlzLm1lcmdlUmVtb3ZhbHNEaWN0PFNlcmlhbGl6ZWRSZWZyZXNoVG9rZW5FbnRpdHk+KFxuICAgICAgICAgICAgICAgICAgb2xkU3RhdGUuUmVmcmVzaFRva2VuLFxuICAgICAgICAgICAgICAgICAgbmV3U3RhdGUuUmVmcmVzaFRva2VuXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIDogb2xkU3RhdGUuUmVmcmVzaFRva2VuO1xuICAgICAgICBjb25zdCBpZFRva2VucyA9IG9sZFN0YXRlLklkVG9rZW5cbiAgICAgICAgICAgID8gdGhpcy5tZXJnZVJlbW92YWxzRGljdDxTZXJpYWxpemVkSWRUb2tlbkVudGl0eT4oXG4gICAgICAgICAgICAgICAgICBvbGRTdGF0ZS5JZFRva2VuLFxuICAgICAgICAgICAgICAgICAgbmV3U3RhdGUuSWRUb2tlblxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICA6IG9sZFN0YXRlLklkVG9rZW47XG4gICAgICAgIGNvbnN0IGFwcE1ldGFkYXRhID0gb2xkU3RhdGUuQXBwTWV0YWRhdGFcbiAgICAgICAgICAgID8gdGhpcy5tZXJnZVJlbW92YWxzRGljdDxTZXJpYWxpemVkQXBwTWV0YWRhdGFFbnRpdHk+KFxuICAgICAgICAgICAgICAgICAgb2xkU3RhdGUuQXBwTWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgICBuZXdTdGF0ZS5BcHBNZXRhZGF0YVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICA6IG9sZFN0YXRlLkFwcE1ldGFkYXRhO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5vbGRTdGF0ZSxcbiAgICAgICAgICAgIEFjY291bnQ6IGFjY291bnRzLFxuICAgICAgICAgICAgQWNjZXNzVG9rZW46IGFjY2Vzc1Rva2VucyxcbiAgICAgICAgICAgIFJlZnJlc2hUb2tlbjogcmVmcmVzaFRva2VucyxcbiAgICAgICAgICAgIElkVG9rZW46IGlkVG9rZW5zLFxuICAgICAgICAgICAgQXBwTWV0YWRhdGE6IGFwcE1ldGFkYXRhLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhlbHBlciB0byBtZXJnZSBuZXcgY2FjaGUgd2l0aCB0aGUgb2xkIG9uZVxuICAgICAqIEBwYXJhbSBvbGRTdGF0ZSAtIGNhY2hlIGJlZm9yZSBjaGFuZ2VzXG4gICAgICogQHBhcmFtIG5ld1N0YXRlIC0gdXBkYXRlZCBjYWNoZVxuICAgICAqL1xuICAgIHByaXZhdGUgbWVyZ2VSZW1vdmFsc0RpY3Q8VD4oXG4gICAgICAgIG9sZFN0YXRlOiBSZWNvcmQ8c3RyaW5nLCBUPixcbiAgICAgICAgbmV3U3RhdGU/OiBSZWNvcmQ8c3RyaW5nLCBUPlxuICAgICk6IFJlY29yZDxzdHJpbmcsIFQ+IHtcbiAgICAgICAgY29uc3QgZmluYWxTdGF0ZSA9IHsgLi4ub2xkU3RhdGUgfTtcbiAgICAgICAgT2JqZWN0LmtleXMob2xkU3RhdGUpLmZvckVhY2goKG9sZEtleSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFuZXdTdGF0ZSB8fCAhbmV3U3RhdGUuaGFzT3duUHJvcGVydHkob2xkS2V5KSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBmaW5hbFN0YXRlW29sZEtleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmluYWxTdGF0ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgdG8gb3ZlcmxheSBhcyBhIHBhcnQgb2YgY2FjaGUgbWVyZ2VcbiAgICAgKiBAcGFyYW0gcGFzc2VkSW5DYWNoZSAtIGNhY2hlIHJlYWQgZnJvbSB0aGUgYmxvYlxuICAgICAqL1xuICAgIHByaXZhdGUgb3ZlcmxheURlZmF1bHRzKHBhc3NlZEluQ2FjaGU6IEpzb25DYWNoZSk6IEpzb25DYWNoZSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKFwiT3ZlcmxheWluZyBpbnB1dCBjYWNoZSB3aXRoIHRoZSBkZWZhdWx0IGNhY2hlXCIpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgQWNjb3VudDoge1xuICAgICAgICAgICAgICAgIC4uLmRlZmF1bHRTZXJpYWxpemVkQ2FjaGUuQWNjb3VudCxcbiAgICAgICAgICAgICAgICAuLi5wYXNzZWRJbkNhY2hlLkFjY291bnQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgSWRUb2tlbjoge1xuICAgICAgICAgICAgICAgIC4uLmRlZmF1bHRTZXJpYWxpemVkQ2FjaGUuSWRUb2tlbixcbiAgICAgICAgICAgICAgICAuLi5wYXNzZWRJbkNhY2hlLklkVG9rZW4sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgQWNjZXNzVG9rZW46IHtcbiAgICAgICAgICAgICAgICAuLi5kZWZhdWx0U2VyaWFsaXplZENhY2hlLkFjY2Vzc1Rva2VuLFxuICAgICAgICAgICAgICAgIC4uLnBhc3NlZEluQ2FjaGUuQWNjZXNzVG9rZW4sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgUmVmcmVzaFRva2VuOiB7XG4gICAgICAgICAgICAgICAgLi4uZGVmYXVsdFNlcmlhbGl6ZWRDYWNoZS5SZWZyZXNoVG9rZW4sXG4gICAgICAgICAgICAgICAgLi4ucGFzc2VkSW5DYWNoZS5SZWZyZXNoVG9rZW4sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgQXBwTWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAuLi5kZWZhdWx0U2VyaWFsaXplZENhY2hlLkFwcE1ldGFkYXRhLFxuICAgICAgICAgICAgICAgIC4uLnBhc3NlZEluQ2FjaGUuQXBwTWV0YWRhdGEsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XG5pbXBvcnQge1xuICAgIFRpbWVVdGlscyxcbiAgICBDb25zdGFudHMsXG4gICAgY3JlYXRlQ2xpZW50QXV0aEVycm9yLFxuICAgIENsaWVudEF1dGhFcnJvckNvZGVzLFxufSBmcm9tIFwiQGF6dXJlL21zYWwtY29tbW9uL25vZGVcIjtcbmltcG9ydCB7IENyeXB0b1Byb3ZpZGVyIH0gZnJvbSBcIi4uL2NyeXB0by9DcnlwdG9Qcm92aWRlci5qc1wiO1xuaW1wb3J0IHsgRW5jb2RpbmdVdGlscyB9IGZyb20gXCIuLi91dGlscy9FbmNvZGluZ1V0aWxzLmpzXCI7XG5pbXBvcnQgeyBKd3RDb25zdGFudHMgfSBmcm9tIFwiLi4vdXRpbHMvQ29uc3RhbnRzLmpzXCI7XG5cbi8qKlxuICogQ2xpZW50IGFzc2VydGlvbiBvZiB0eXBlIGp3dC1iZWFyZXIgdXNlZCBpbiBjb25maWRlbnRpYWwgY2xpZW50IGZsb3dzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBDbGllbnRBc3NlcnRpb24ge1xuICAgIHByaXZhdGUgand0OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBwcml2YXRlS2V5OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSB0aHVtYnByaW50OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSB1c2VTaGEyNTY6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBleHBpcmF0aW9uVGltZTogbnVtYmVyO1xuICAgIHByaXZhdGUgaXNzdWVyOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBqd3RBdWRpZW5jZTogc3RyaW5nO1xuICAgIHByaXZhdGUgcHVibGljQ2VydGlmaWNhdGU6IEFycmF5PHN0cmluZz47XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIHRoZSBDbGllbnRBc3NlcnRpb24gY2xhc3MgZnJvbSB0aGUgY2xpZW50QXNzZXJ0aW9uIHBhc3NlZCBieSB0aGUgdXNlclxuICAgICAqIEBwYXJhbSBhc3NlcnRpb24gLSByZWZlciBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNzUyMVxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgZnJvbUFzc2VydGlvbihhc3NlcnRpb246IHN0cmluZyk6IENsaWVudEFzc2VydGlvbiB7XG4gICAgICAgIGNvbnN0IGNsaWVudEFzc2VydGlvbiA9IG5ldyBDbGllbnRBc3NlcnRpb24oKTtcbiAgICAgICAgY2xpZW50QXNzZXJ0aW9uLmp3dCA9IGFzc2VydGlvbjtcbiAgICAgICAgcmV0dXJuIGNsaWVudEFzc2VydGlvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgZnJvbUNlcnRpZmljYXRlV2l0aFNoYTI1NlRodW1icHJpbnQgaW5zdGVhZCwgd2l0aCBhIFNIQS0yNTYgdGh1bXByaW50XG4gICAgICogSW5pdGlhbGl6ZSB0aGUgQ2xpZW50QXNzZXJ0aW9uIGNsYXNzIGZyb20gdGhlIGNlcnRpZmljYXRlIHBhc3NlZCBieSB0aGUgdXNlclxuICAgICAqIEBwYXJhbSB0aHVtYnByaW50IC0gaWRlbnRpZmllciBvZiBhIGNlcnRpZmljYXRlXG4gICAgICogQHBhcmFtIHByaXZhdGVLZXkgLSBzZWNyZXQga2V5XG4gICAgICogQHBhcmFtIHB1YmxpY0NlcnRpZmljYXRlIC0gZWxlY3Ryb25pYyBkb2N1bWVudCBwcm92aWRlZCB0byBwcm92ZSB0aGUgb3duZXJzaGlwIG9mIHRoZSBwdWJsaWMga2V5XG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBmcm9tQ2VydGlmaWNhdGUoXG4gICAgICAgIHRodW1icHJpbnQ6IHN0cmluZyxcbiAgICAgICAgcHJpdmF0ZUtleTogc3RyaW5nLFxuICAgICAgICBwdWJsaWNDZXJ0aWZpY2F0ZT86IHN0cmluZ1xuICAgICk6IENsaWVudEFzc2VydGlvbiB7XG4gICAgICAgIGNvbnN0IGNsaWVudEFzc2VydGlvbiA9IG5ldyBDbGllbnRBc3NlcnRpb24oKTtcbiAgICAgICAgY2xpZW50QXNzZXJ0aW9uLnByaXZhdGVLZXkgPSBwcml2YXRlS2V5O1xuICAgICAgICBjbGllbnRBc3NlcnRpb24udGh1bWJwcmludCA9IHRodW1icHJpbnQ7XG4gICAgICAgIGNsaWVudEFzc2VydGlvbi51c2VTaGEyNTYgPSBmYWxzZTtcbiAgICAgICAgaWYgKHB1YmxpY0NlcnRpZmljYXRlKSB7XG4gICAgICAgICAgICBjbGllbnRBc3NlcnRpb24ucHVibGljQ2VydGlmaWNhdGUgPVxuICAgICAgICAgICAgICAgIHRoaXMucGFyc2VDZXJ0aWZpY2F0ZShwdWJsaWNDZXJ0aWZpY2F0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNsaWVudEFzc2VydGlvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIHRoZSBDbGllbnRBc3NlcnRpb24gY2xhc3MgZnJvbSB0aGUgY2VydGlmaWNhdGUgcGFzc2VkIGJ5IHRoZSB1c2VyXG4gICAgICogQHBhcmFtIHRodW1icHJpbnQgLSBpZGVudGlmaWVyIG9mIGEgY2VydGlmaWNhdGVcbiAgICAgKiBAcGFyYW0gcHJpdmF0ZUtleSAtIHNlY3JldCBrZXlcbiAgICAgKiBAcGFyYW0gcHVibGljQ2VydGlmaWNhdGUgLSBlbGVjdHJvbmljIGRvY3VtZW50IHByb3ZpZGVkIHRvIHByb3ZlIHRoZSBvd25lcnNoaXAgb2YgdGhlIHB1YmxpYyBrZXlcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGZyb21DZXJ0aWZpY2F0ZVdpdGhTaGEyNTZUaHVtYnByaW50KFxuICAgICAgICB0aHVtYnByaW50OiBzdHJpbmcsXG4gICAgICAgIHByaXZhdGVLZXk6IHN0cmluZyxcbiAgICAgICAgcHVibGljQ2VydGlmaWNhdGU/OiBzdHJpbmdcbiAgICApOiBDbGllbnRBc3NlcnRpb24ge1xuICAgICAgICBjb25zdCBjbGllbnRBc3NlcnRpb24gPSBuZXcgQ2xpZW50QXNzZXJ0aW9uKCk7XG4gICAgICAgIGNsaWVudEFzc2VydGlvbi5wcml2YXRlS2V5ID0gcHJpdmF0ZUtleTtcbiAgICAgICAgY2xpZW50QXNzZXJ0aW9uLnRodW1icHJpbnQgPSB0aHVtYnByaW50O1xuICAgICAgICBjbGllbnRBc3NlcnRpb24udXNlU2hhMjU2ID0gdHJ1ZTtcbiAgICAgICAgaWYgKHB1YmxpY0NlcnRpZmljYXRlKSB7XG4gICAgICAgICAgICBjbGllbnRBc3NlcnRpb24ucHVibGljQ2VydGlmaWNhdGUgPVxuICAgICAgICAgICAgICAgIHRoaXMucGFyc2VDZXJ0aWZpY2F0ZShwdWJsaWNDZXJ0aWZpY2F0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNsaWVudEFzc2VydGlvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgSldUIGZvciBjZXJ0aWZpY2F0ZSBiYXNlZCBjbGllbnRBc3NlcnRpb24sIGlmIHBhc3NlZCBieSB0aGUgdXNlciwgdXNlcyBpdCBhcyBpc1xuICAgICAqIEBwYXJhbSBjcnlwdG9Qcm92aWRlciAtIGxpYnJhcnkncyBjcnlwdG8gaGVscGVyXG4gICAgICogQHBhcmFtIGlzc3VlciAtIGlzcyBjbGFpbVxuICAgICAqIEBwYXJhbSBqd3RBdWRpZW5jZSAtIGF1ZCBjbGFpbVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRKd3QoXG4gICAgICAgIGNyeXB0b1Byb3ZpZGVyOiBDcnlwdG9Qcm92aWRlcixcbiAgICAgICAgaXNzdWVyOiBzdHJpbmcsXG4gICAgICAgIGp3dEF1ZGllbmNlOiBzdHJpbmdcbiAgICApOiBzdHJpbmcge1xuICAgICAgICAvLyBpZiBhc3NlcnRpb24gd2FzIGNyZWF0ZWQgZnJvbSBjZXJ0aWZpY2F0ZSwgY2hlY2sgaWYgand0IGlzIGV4cGlyZWQgYW5kIGNyZWF0ZSBuZXcgb25lLlxuICAgICAgICBpZiAodGhpcy5wcml2YXRlS2V5ICYmIHRoaXMudGh1bWJwcmludCkge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIHRoaXMuand0ICYmXG4gICAgICAgICAgICAgICAgIXRoaXMuaXNFeHBpcmVkKCkgJiZcbiAgICAgICAgICAgICAgICBpc3N1ZXIgPT09IHRoaXMuaXNzdWVyICYmXG4gICAgICAgICAgICAgICAgand0QXVkaWVuY2UgPT09IHRoaXMuand0QXVkaWVuY2VcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmp3dDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlSnd0KGNyeXB0b1Byb3ZpZGVyLCBpc3N1ZXIsIGp3dEF1ZGllbmNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qXG4gICAgICAgICAqIGlmIGFzc2VydGlvbiB3YXMgY3JlYXRlZCBieSBjYWxsZXIsIHRoZW4gd2UganVzdCBhcHBlbmQgaXQuIEl0IGlzIHVwIHRvIHRoZSBjYWxsZXIgdG9cbiAgICAgICAgICogZW5zdXJlIHRoYXQgaXQgY29udGFpbnMgbmVjZXNzYXJ5IGNsYWltcyBhbmQgdGhhdCBpdCBpcyBub3QgZXhwaXJlZC5cbiAgICAgICAgICovXG4gICAgICAgIGlmICh0aGlzLmp3dCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuand0O1xuICAgICAgICB9XG5cbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvckNvZGVzLmludmFsaWRBc3NlcnRpb24pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEpXVCBmb3JtYXQgYW5kIHJlcXVpcmVkIGNsYWltcyBzcGVjaWZpZWQ6IGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM3NTIzI3NlY3Rpb24tM1xuICAgICAqL1xuICAgIHByaXZhdGUgY3JlYXRlSnd0KFxuICAgICAgICBjcnlwdG9Qcm92aWRlcjogQ3J5cHRvUHJvdmlkZXIsXG4gICAgICAgIGlzc3Vlcjogc3RyaW5nLFxuICAgICAgICBqd3RBdWRpZW5jZTogc3RyaW5nXG4gICAgKTogc3RyaW5nIHtcbiAgICAgICAgdGhpcy5pc3N1ZXIgPSBpc3N1ZXI7XG4gICAgICAgIHRoaXMuand0QXVkaWVuY2UgPSBqd3RBdWRpZW5jZTtcbiAgICAgICAgY29uc3QgaXNzdWVkQXQgPSBUaW1lVXRpbHMubm93U2Vjb25kcygpO1xuICAgICAgICB0aGlzLmV4cGlyYXRpb25UaW1lID0gaXNzdWVkQXQgKyA2MDA7XG5cbiAgICAgICAgY29uc3QgYWxnb3JpdGhtID0gdGhpcy51c2VTaGEyNTZcbiAgICAgICAgICAgID8gSnd0Q29uc3RhbnRzLlBTU18yNTZcbiAgICAgICAgICAgIDogSnd0Q29uc3RhbnRzLlJTQV8yNTY7XG4gICAgICAgIGNvbnN0IGhlYWRlcjogand0Lkp3dEhlYWRlciA9IHtcbiAgICAgICAgICAgIGFsZzogYWxnb3JpdGhtLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHRodW1icHJpbnRIZWFkZXIgPSB0aGlzLnVzZVNoYTI1NlxuICAgICAgICAgICAgPyBKd3RDb25zdGFudHMuWDVUXzI1NlxuICAgICAgICAgICAgOiBKd3RDb25zdGFudHMuWDVUO1xuICAgICAgICBPYmplY3QuYXNzaWduKGhlYWRlciwge1xuICAgICAgICAgICAgW3RodW1icHJpbnRIZWFkZXJdOiBFbmNvZGluZ1V0aWxzLmJhc2U2NEVuY29kZVVybChcbiAgICAgICAgICAgICAgICB0aGlzLnRodW1icHJpbnQsXG4gICAgICAgICAgICAgICAgXCJoZXhcIlxuICAgICAgICAgICAgKSxcbiAgICAgICAgfSBhcyBQYXJ0aWFsPGp3dC5Kd3RIZWFkZXI+KTtcblxuICAgICAgICBpZiAodGhpcy5wdWJsaWNDZXJ0aWZpY2F0ZSkge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihoZWFkZXIsIHtcbiAgICAgICAgICAgICAgICBbSnd0Q29uc3RhbnRzLlg1Q106IHRoaXMucHVibGljQ2VydGlmaWNhdGUsXG4gICAgICAgICAgICB9IGFzIFBhcnRpYWw8and0Lkp3dEhlYWRlcj4pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgICAgICAgIFtKd3RDb25zdGFudHMuQVVESUVOQ0VdOiB0aGlzLmp3dEF1ZGllbmNlLFxuICAgICAgICAgICAgW0p3dENvbnN0YW50cy5FWFBJUkFUSU9OX1RJTUVdOiB0aGlzLmV4cGlyYXRpb25UaW1lLFxuICAgICAgICAgICAgW0p3dENvbnN0YW50cy5JU1NVRVJdOiB0aGlzLmlzc3VlcixcbiAgICAgICAgICAgIFtKd3RDb25zdGFudHMuU1VCSkVDVF06IHRoaXMuaXNzdWVyLFxuICAgICAgICAgICAgW0p3dENvbnN0YW50cy5OT1RfQkVGT1JFXTogaXNzdWVkQXQsXG4gICAgICAgICAgICBbSnd0Q29uc3RhbnRzLkpXVF9JRF06IGNyeXB0b1Byb3ZpZGVyLmNyZWF0ZU5ld0d1aWQoKSxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmp3dCA9IGp3dC5zaWduKHBheWxvYWQsIHRoaXMucHJpdmF0ZUtleSwgeyBoZWFkZXIgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLmp3dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVdGlsaXR5IEFQSSB0byBjaGVjayBleHBpcmF0aW9uXG4gICAgICovXG4gICAgcHJpdmF0ZSBpc0V4cGlyZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmV4cGlyYXRpb25UaW1lIDwgVGltZVV0aWxzLm5vd1NlY29uZHMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeHRyYWN0cyB0aGUgcmF3IGNlcnRzIGZyb20gYSBnaXZlbiBjZXJ0aWZpY2F0ZSBzdHJpbmcgYW5kIHJldHVybnMgdGhlbSBpbiBhbiBhcnJheS5cbiAgICAgKiBAcGFyYW0gcHVibGljQ2VydGlmaWNhdGUgLSBlbGVjdHJvbmljIGRvY3VtZW50IHByb3ZpZGVkIHRvIHByb3ZlIHRoZSBvd25lcnNoaXAgb2YgdGhlIHB1YmxpYyBrZXlcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIHBhcnNlQ2VydGlmaWNhdGUocHVibGljQ2VydGlmaWNhdGU6IHN0cmluZyk6IEFycmF5PHN0cmluZz4ge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBpcyByZWdleCB0byBpZGVudGlmeSB0aGUgY2VydHMgaW4gYSBnaXZlbiBjZXJ0aWZpY2F0ZSBzdHJpbmcuXG4gICAgICAgICAqIFdlIHdhbnQgdG8gbG9vayBmb3IgdGhlIGNvbnRlbnRzIGJldHdlZW4gdGhlIEJFR0lOIGFuZCBFTkQgY2VydGlmaWNhdGUgc3RyaW5ncywgd2l0aG91dCB0aGUgYXNzb2NpYXRlZCBuZXdsaW5lcy5cbiAgICAgICAgICogVGhlIGluZm9ybWF0aW9uIGluIHBhcmVucyBcIiguKz8pXCIgaXMgdGhlIGNhcHR1cmUgZ3JvdXAgdG8gcmVwcmVzZW50IHRoZSBjZXJ0IHdlIHdhbnQgaXNvbGF0ZWQuXG4gICAgICAgICAqIFwiLlwiIG1lYW5zIGFueSBzdHJpbmcgY2hhcmFjdGVyLCBcIitcIiBtZWFucyBtYXRjaCAxIG9yIG1vcmUgdGltZXMsIGFuZCBcIj9cIiBtZWFucyB0aGUgc2hvcnRlc3QgbWF0Y2guXG4gICAgICAgICAqIFRoZSBcImdcIiBhdCB0aGUgZW5kIG9mIHRoZSByZWdleCBtZWFucyBzZWFyY2ggdGhlIHN0cmluZyBnbG9iYWxseSwgYW5kIHRoZSBcInNcIiBlbmFibGVzIHRoZSBcIi5cIiB0byBtYXRjaCBuZXdsaW5lcy5cbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IHJlZ2V4VG9GaW5kQ2VydHMgPVxuICAgICAgICAgICAgLy0tLS0tQkVHSU4gQ0VSVElGSUNBVEUtLS0tLVxccipcXG4oLis/KVxccipcXG4tLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tL2dzO1xuICAgICAgICBjb25zdCBjZXJ0czogc3RyaW5nW10gPSBbXTtcblxuICAgICAgICBsZXQgbWF0Y2hlcztcbiAgICAgICAgd2hpbGUgKChtYXRjaGVzID0gcmVnZXhUb0ZpbmRDZXJ0cy5leGVjKHB1YmxpY0NlcnRpZmljYXRlKSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgIC8vIG1hdGNoZXNbMV0gcmVwcmVzZW50cyB0aGUgZmlyc3QgcGFyZW5zIGNhcHR1cmUgZ3JvdXAgaW4gdGhlIHJlZ2V4LlxuICAgICAgICAgICAgY2VydHMucHVzaChtYXRjaGVzWzFdLnJlcGxhY2UoL1xccipcXG4vZywgQ29uc3RhbnRzLkVNUFRZX1NUUklORykpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNlcnRzO1xuICAgIH1cbn1cbiIsICIvKiBlc2xpbnQtZGlzYWJsZSBoZWFkZXIvaGVhZGVyICovXG5leHBvcnQgY29uc3QgbmFtZSA9IFwiQGF6dXJlL21zYWwtbm9kZVwiO1xuZXhwb3J0IGNvbnN0IHZlcnNpb24gPSBcIjMuNC4xXCI7XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gICAgQXV0aGVudGljYXRpb25SZXN1bHQsXG4gICAgQXV0aG9yaXR5LFxuICAgIEJhc2VDbGllbnQsXG4gICAgQ2NzQ3JlZGVudGlhbFR5cGUsXG4gICAgQ2xpZW50QXNzZXJ0aW9uLFxuICAgIENsaWVudENvbmZpZ3VyYXRpb24sXG4gICAgQ29tbW9uVXNlcm5hbWVQYXNzd29yZFJlcXVlc3QsXG4gICAgR3JhbnRUeXBlLFxuICAgIE5ldHdvcmtSZXNwb25zZSxcbiAgICBPQXV0aFJlc3BvbnNlVHlwZSxcbiAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlcixcbiAgICBSZXF1ZXN0VGh1bWJwcmludCxcbiAgICBSZXNwb25zZUhhbmRsZXIsXG4gICAgU2VydmVyQXV0aG9yaXphdGlvblRva2VuUmVzcG9uc2UsXG4gICAgU3RyaW5nVXRpbHMsXG4gICAgVGltZVV0aWxzLFxuICAgIFVybFN0cmluZyxcbiAgICBVcmxVdGlscyxcbiAgICBnZXRDbGllbnRBc3NlcnRpb24sXG59IGZyb20gXCJAYXp1cmUvbXNhbC1jb21tb24vbm9kZVwiO1xuXG4vKipcbiAqIE9hdXRoMi4wIFBhc3N3b3JkIGdyYW50IGNsaWVudFxuICogTm90ZTogV2UgYXJlIG9ubHkgc3VwcG9ydGluZyBwdWJsaWMgY2xpZW50cyBmb3IgcGFzc3dvcmQgZ3JhbnQgYW5kIGZvciBwdXJlbHkgdGVzdGluZyBwdXJwb3Nlc1xuICogQHB1YmxpY1xuICogQGRlcHJlY2F0ZWQgLSBVc2UgYSBtb3JlIHNlY3VyZSBmbG93IGluc3RlYWRcbiAqL1xuZXhwb3J0IGNsYXNzIFVzZXJuYW1lUGFzc3dvcmRDbGllbnQgZXh0ZW5kcyBCYXNlQ2xpZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWd1cmF0aW9uOiBDbGllbnRDb25maWd1cmF0aW9uKSB7XG4gICAgICAgIHN1cGVyKGNvbmZpZ3VyYXRpb24pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFQSSB0byBhY3F1aXJlIGEgdG9rZW4gYnkgcGFzc2luZyB0aGUgdXNlcm5hbWUgYW5kIHBhc3N3b3JkIHRvIHRoZSBzZXJ2aWNlIGluIGV4Y2hhZ2Ugb2YgY3JlZGVudGlhbHNcbiAgICAgKiBwYXNzd29yZF9ncmFudFxuICAgICAqIEBwYXJhbSByZXF1ZXN0IC0gQ29tbW9uVXNlcm5hbWVQYXNzd29yZFJlcXVlc3RcbiAgICAgKi9cbiAgICBhc3luYyBhY3F1aXJlVG9rZW4oXG4gICAgICAgIHJlcXVlc3Q6IENvbW1vblVzZXJuYW1lUGFzc3dvcmRSZXF1ZXN0XG4gICAgKTogUHJvbWlzZTxBdXRoZW50aWNhdGlvblJlc3VsdCB8IG51bGw+IHtcbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcImluIGFjcXVpcmVUb2tlbiBjYWxsIGluIHVzZXJuYW1lLXBhc3N3b3JkIGNsaWVudFwiKTtcblxuICAgICAgICBjb25zdCByZXFUaW1lc3RhbXAgPSBUaW1lVXRpbHMubm93U2Vjb25kcygpO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZXhlY3V0ZVRva2VuUmVxdWVzdChcbiAgICAgICAgICAgIHRoaXMuYXV0aG9yaXR5LFxuICAgICAgICAgICAgcmVxdWVzdFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlSGFuZGxlciA9IG5ldyBSZXNwb25zZUhhbmRsZXIoXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICAgIHRoaXMuY2FjaGVNYW5hZ2VyLFxuICAgICAgICAgICAgdGhpcy5jcnlwdG9VdGlscyxcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLFxuICAgICAgICAgICAgdGhpcy5jb25maWcuc2VyaWFsaXphYmxlQ2FjaGUsXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5wZXJzaXN0ZW5jZVBsdWdpblxuICAgICAgICApO1xuXG4gICAgICAgIC8vIFZhbGlkYXRlIHJlc3BvbnNlLiBUaGlzIGZ1bmN0aW9uIHRocm93cyBhIHNlcnZlciBlcnJvciBpZiBhbiBlcnJvciBpcyByZXR1cm5lZCBieSB0aGUgc2VydmVyLlxuICAgICAgICByZXNwb25zZUhhbmRsZXIudmFsaWRhdGVUb2tlblJlc3BvbnNlKHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICBjb25zdCB0b2tlblJlc3BvbnNlID0gcmVzcG9uc2VIYW5kbGVyLmhhbmRsZVNlcnZlclRva2VuUmVzcG9uc2UoXG4gICAgICAgICAgICByZXNwb25zZS5ib2R5LFxuICAgICAgICAgICAgdGhpcy5hdXRob3JpdHksXG4gICAgICAgICAgICByZXFUaW1lc3RhbXAsXG4gICAgICAgICAgICByZXF1ZXN0XG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHRva2VuUmVzcG9uc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXhlY3V0ZXMgUE9TVCByZXF1ZXN0IHRvIHRva2VuIGVuZHBvaW50XG4gICAgICogQHBhcmFtIGF1dGhvcml0eSAtIGF1dGhvcml0eSBvYmplY3RcbiAgICAgKiBAcGFyYW0gcmVxdWVzdCAtIENvbW1vblVzZXJuYW1lUGFzc3dvcmRSZXF1ZXN0IHByb3ZpZGVkIGJ5IHRoZSBkZXZlbG9wZXJcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGV4ZWN1dGVUb2tlblJlcXVlc3QoXG4gICAgICAgIGF1dGhvcml0eTogQXV0aG9yaXR5LFxuICAgICAgICByZXF1ZXN0OiBDb21tb25Vc2VybmFtZVBhc3N3b3JkUmVxdWVzdFxuICAgICk6IFByb21pc2U8TmV0d29ya1Jlc3BvbnNlPFNlcnZlckF1dGhvcml6YXRpb25Ub2tlblJlc3BvbnNlPj4ge1xuICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnNTdHJpbmcgPSB0aGlzLmNyZWF0ZVRva2VuUXVlcnlQYXJhbWV0ZXJzKHJlcXVlc3QpO1xuICAgICAgICBjb25zdCBlbmRwb2ludCA9IFVybFN0cmluZy5hcHBlbmRRdWVyeVN0cmluZyhcbiAgICAgICAgICAgIGF1dGhvcml0eS50b2tlbkVuZHBvaW50LFxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzU3RyaW5nXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0gYXdhaXQgdGhpcy5jcmVhdGVUb2tlblJlcXVlc3RCb2R5KHJlcXVlc3QpO1xuICAgICAgICBjb25zdCBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0gdGhpcy5jcmVhdGVUb2tlblJlcXVlc3RIZWFkZXJzKHtcbiAgICAgICAgICAgIGNyZWRlbnRpYWw6IHJlcXVlc3QudXNlcm5hbWUsXG4gICAgICAgICAgICB0eXBlOiBDY3NDcmVkZW50aWFsVHlwZS5VUE4sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB0aHVtYnByaW50OiBSZXF1ZXN0VGh1bWJwcmludCA9IHtcbiAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICAgIGF1dGhvcml0eTogYXV0aG9yaXR5LmNhbm9uaWNhbEF1dGhvcml0eSxcbiAgICAgICAgICAgIHNjb3BlczogcmVxdWVzdC5zY29wZXMsXG4gICAgICAgICAgICBjbGFpbXM6IHJlcXVlc3QuY2xhaW1zLFxuICAgICAgICAgICAgYXV0aGVudGljYXRpb25TY2hlbWU6IHJlcXVlc3QuYXV0aGVudGljYXRpb25TY2hlbWUsXG4gICAgICAgICAgICByZXNvdXJjZVJlcXVlc3RNZXRob2Q6IHJlcXVlc3QucmVzb3VyY2VSZXF1ZXN0TWV0aG9kLFxuICAgICAgICAgICAgcmVzb3VyY2VSZXF1ZXN0VXJpOiByZXF1ZXN0LnJlc291cmNlUmVxdWVzdFVyaSxcbiAgICAgICAgICAgIHNockNsYWltczogcmVxdWVzdC5zaHJDbGFpbXMsXG4gICAgICAgICAgICBzc2hLaWQ6IHJlcXVlc3Quc3NoS2lkLFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB0aGlzLmV4ZWN1dGVQb3N0VG9Ub2tlbkVuZHBvaW50KFxuICAgICAgICAgICAgZW5kcG9pbnQsXG4gICAgICAgICAgICByZXF1ZXN0Qm9keSxcbiAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICB0aHVtYnByaW50LFxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIGEgbWFwIGZvciBhbGwgdGhlIHBhcmFtcyB0byBiZSBzZW50IHRvIHRoZSBzZXJ2aWNlXG4gICAgICogQHBhcmFtIHJlcXVlc3QgLSBDb21tb25Vc2VybmFtZVBhc3N3b3JkUmVxdWVzdCBwcm92aWRlZCBieSB0aGUgZGV2ZWxvcGVyXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBjcmVhdGVUb2tlblJlcXVlc3RCb2R5KFxuICAgICAgICByZXF1ZXN0OiBDb21tb25Vc2VybmFtZVBhc3N3b3JkUmVxdWVzdFxuICAgICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSBuZXcgTWFwPHN0cmluZywgc3RyaW5nPigpO1xuXG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudElkKFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmF1dGhPcHRpb25zLmNsaWVudElkXG4gICAgICAgICk7XG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFVzZXJuYW1lKHBhcmFtZXRlcnMsIHJlcXVlc3QudXNlcm5hbWUpO1xuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRQYXNzd29yZChwYXJhbWV0ZXJzLCByZXF1ZXN0LnBhc3N3b3JkKTtcblxuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRTY29wZXMocGFyYW1ldGVycywgcmVxdWVzdC5zY29wZXMpO1xuXG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFJlc3BvbnNlVHlwZShcbiAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICBPQXV0aFJlc3BvbnNlVHlwZS5JRFRPS0VOX1RPS0VOXG4gICAgICAgICk7XG5cbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkR3JhbnRUeXBlKFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIEdyYW50VHlwZS5SRVNPVVJDRV9PV05FUl9QQVNTV09SRF9HUkFOVFxuICAgICAgICApO1xuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDbGllbnRJbmZvKHBhcmFtZXRlcnMpO1xuXG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZExpYnJhcnlJbmZvKFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmxpYnJhcnlJbmZvXG4gICAgICAgICk7XG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZEFwcGxpY2F0aW9uVGVsZW1ldHJ5KFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLnRlbGVtZXRyeS5hcHBsaWNhdGlvblxuICAgICAgICApO1xuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRUaHJvdHRsaW5nKHBhcmFtZXRlcnMpO1xuXG4gICAgICAgIGlmICh0aGlzLnNlcnZlclRlbGVtZXRyeU1hbmFnZXIpIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFNlcnZlclRlbGVtZXRyeShcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHRoaXMuc2VydmVyVGVsZW1ldHJ5TWFuYWdlclxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNvcnJlbGF0aW9uSWQgPVxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkIHx8XG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5jcnlwdG9JbnRlcmZhY2UuY3JlYXRlTmV3R3VpZCgpO1xuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDb3JyZWxhdGlvbklkKHBhcmFtZXRlcnMsIGNvcnJlbGF0aW9uSWQpO1xuXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5jbGllbnRDcmVkZW50aWFscy5jbGllbnRTZWNyZXQpIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudFNlY3JldChcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmNsaWVudENyZWRlbnRpYWxzLmNsaWVudFNlY3JldFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNsaWVudEFzc2VydGlvbjogQ2xpZW50QXNzZXJ0aW9uIHwgdW5kZWZpbmVkID1cbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmNsaWVudENyZWRlbnRpYWxzLmNsaWVudEFzc2VydGlvbjtcblxuICAgICAgICBpZiAoY2xpZW50QXNzZXJ0aW9uKSB7XG4gICAgICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDbGllbnRBc3NlcnRpb24oXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBhd2FpdCBnZXRDbGllbnRBc3NlcnRpb24oXG4gICAgICAgICAgICAgICAgICAgIGNsaWVudEFzc2VydGlvbi5hc3NlcnRpb24sXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmF1dGhPcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LnJlc291cmNlUmVxdWVzdFVyaVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDbGllbnRBc3NlcnRpb25UeXBlKFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgY2xpZW50QXNzZXJ0aW9uLmFzc2VydGlvblR5cGVcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhU3RyaW5nVXRpbHMuaXNFbXB0eU9iaihyZXF1ZXN0LmNsYWltcykgfHxcbiAgICAgICAgICAgICh0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRDYXBhYmlsaXRpZXMgJiZcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRDYXBhYmlsaXRpZXMubGVuZ3RoID4gMClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDbGFpbXMoXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmNsYWltcyxcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRDYXBhYmlsaXRpZXNcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5zeXN0ZW1PcHRpb25zLnByZXZlbnRDb3JzUHJlZmxpZ2h0ICYmXG4gICAgICAgICAgICByZXF1ZXN0LnVzZXJuYW1lXG4gICAgICAgICkge1xuICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2NzVXBuKHBhcmFtZXRlcnMsIHJlcXVlc3QudXNlcm5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFVybFV0aWxzLm1hcFRvUXVlcnlTdHJpbmcocGFyYW1ldGVycyk7XG4gICAgfVxufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICAgIEF1dGhvcml0eSxcbiAgICBBdXRob3JpemVQcm90b2NvbCxcbiAgICBDb21tb25BdXRob3JpemF0aW9uVXJsUmVxdWVzdCxcbiAgICBMb2dnZXIsXG4gICAgT0F1dGhSZXNwb25zZVR5cGUsXG4gICAgUHJvdG9jb2xNb2RlLFxuICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLFxufSBmcm9tIFwiQGF6dXJlL21zYWwtY29tbW9uL25vZGVcIjtcbmltcG9ydCB7IE5vZGVDb25maWd1cmF0aW9uIH0gZnJvbSBcIi4uL2NvbmZpZy9Db25maWd1cmF0aW9uLmpzXCI7XG5pbXBvcnQgeyBDb25zdGFudHMgYXMgTm9kZUNvbnN0YW50cyB9IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcbmltcG9ydCB7IHZlcnNpb24gfSBmcm9tIFwiLi4vcGFja2FnZU1ldGFkYXRhLmpzXCI7XG5cbi8qKlxuICogQ29uc3RydWN0cyB0aGUgZnVsbCAvYXV0aG9yaXplIFVSTCB3aXRoIHJlcXVlc3QgcGFyYW1ldGVyc1xuICogQHBhcmFtIGNvbmZpZ1xuICogQHBhcmFtIGF1dGhvcml0eVxuICogQHBhcmFtIHJlcXVlc3RcbiAqIEBwYXJhbSBsb2dnZXJcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBdXRoQ29kZVJlcXVlc3RVcmwoXG4gICAgY29uZmlnOiBOb2RlQ29uZmlndXJhdGlvbixcbiAgICBhdXRob3JpdHk6IEF1dGhvcml0eSxcbiAgICByZXF1ZXN0OiBDb21tb25BdXRob3JpemF0aW9uVXJsUmVxdWVzdCxcbiAgICBsb2dnZXI6IExvZ2dlclxuKTogc3RyaW5nIHtcbiAgICBjb25zdCBwYXJhbWV0ZXJzID0gQXV0aG9yaXplUHJvdG9jb2wuZ2V0U3RhbmRhcmRBdXRob3JpemVSZXF1ZXN0UGFyYW1ldGVycyhcbiAgICAgICAge1xuICAgICAgICAgICAgLi4uY29uZmlnLmF1dGgsXG4gICAgICAgICAgICBhdXRob3JpdHk6IGF1dGhvcml0eSxcbiAgICAgICAgICAgIHJlZGlyZWN0VXJpOiByZXF1ZXN0LnJlZGlyZWN0VXJpIHx8IFwiXCIsXG4gICAgICAgIH0sXG4gICAgICAgIHJlcXVlc3QsXG4gICAgICAgIGxvZ2dlclxuICAgICk7XG4gICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkTGlicmFyeUluZm8ocGFyYW1ldGVycywge1xuICAgICAgICBza3U6IE5vZGVDb25zdGFudHMuTVNBTF9TS1UsXG4gICAgICAgIHZlcnNpb246IHZlcnNpb24sXG4gICAgICAgIGNwdTogcHJvY2Vzcy5hcmNoIHx8IFwiXCIsXG4gICAgICAgIG9zOiBwcm9jZXNzLnBsYXRmb3JtIHx8IFwiXCIsXG4gICAgfSk7XG4gICAgaWYgKGNvbmZpZy5hdXRoLnByb3RvY29sTW9kZSAhPT0gUHJvdG9jb2xNb2RlLk9JREMpIHtcbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQXBwbGljYXRpb25UZWxlbWV0cnkoXG4gICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgY29uZmlnLnRlbGVtZXRyeS5hcHBsaWNhdGlvblxuICAgICAgICApO1xuICAgIH1cbiAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRSZXNwb25zZVR5cGUocGFyYW1ldGVycywgT0F1dGhSZXNwb25zZVR5cGUuQ09ERSk7XG4gICAgaWYgKHJlcXVlc3QuY29kZUNoYWxsZW5nZSAmJiByZXF1ZXN0LmNvZGVDaGFsbGVuZ2VNZXRob2QpIHtcbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ29kZUNoYWxsZW5nZVBhcmFtcyhcbiAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICByZXF1ZXN0LmNvZGVDaGFsbGVuZ2UsXG4gICAgICAgICAgICByZXF1ZXN0LmNvZGVDaGFsbGVuZ2VNZXRob2RcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRFeHRyYVF1ZXJ5UGFyYW1ldGVycyhcbiAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgcmVxdWVzdC5leHRyYVF1ZXJ5UGFyYW1ldGVycyB8fCB7fVxuICAgICk7XG5cbiAgICByZXR1cm4gQXV0aG9yaXplUHJvdG9jb2wuZ2V0QXV0aG9yaXplVXJsKGF1dGhvcml0eSwgcGFyYW1ldGVycyk7XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gICAgQXV0aG9yaXphdGlvbkNvZGVDbGllbnQsXG4gICAgQ2xpZW50Q29uZmlndXJhdGlvbixcbiAgICBSZWZyZXNoVG9rZW5DbGllbnQsXG4gICAgQXV0aGVudGljYXRpb25SZXN1bHQsXG4gICAgQXV0aG9yaXR5LFxuICAgIEF1dGhvcml0eUZhY3RvcnksXG4gICAgQmFzZUF1dGhSZXF1ZXN0LFxuICAgIFNpbGVudEZsb3dDbGllbnQsXG4gICAgTG9nZ2VyLFxuICAgIFNlcnZlclRlbGVtZXRyeU1hbmFnZXIsXG4gICAgU2VydmVyVGVsZW1ldHJ5UmVxdWVzdCxcbiAgICBDb21tb25TaWxlbnRGbG93UmVxdWVzdCxcbiAgICBDb21tb25SZWZyZXNoVG9rZW5SZXF1ZXN0LFxuICAgIENvbW1vbkF1dGhvcml6YXRpb25Db2RlUmVxdWVzdCxcbiAgICBDb21tb25BdXRob3JpemF0aW9uVXJsUmVxdWVzdCxcbiAgICBDb21tb25Vc2VybmFtZVBhc3N3b3JkUmVxdWVzdCxcbiAgICBBdXRoZW50aWNhdGlvblNjaGVtZSxcbiAgICBSZXNwb25zZU1vZGUsXG4gICAgQXV0aG9yaXR5T3B0aW9ucyxcbiAgICBPSURDX0RFRkFVTFRfU0NPUEVTLFxuICAgIEF6dXJlUmVnaW9uQ29uZmlndXJhdGlvbixcbiAgICBBdXRoRXJyb3IsXG4gICAgQXp1cmVDbG91ZE9wdGlvbnMsXG4gICAgQXV0aG9yaXphdGlvbkNvZGVQYXlsb2FkLFxuICAgIENvbnN0YW50cyxcbiAgICBTdHJpbmdVdGlscyxcbiAgICBjcmVhdGVDbGllbnRBdXRoRXJyb3IsXG4gICAgQ2xpZW50QXV0aEVycm9yQ29kZXMsXG4gICAgYnVpbGRTdGF0aWNBdXRob3JpdHlPcHRpb25zLFxuICAgIENsaWVudEFzc2VydGlvbiBhcyBDbGllbnRBc3NlcnRpb25UeXBlLFxuICAgIGdldENsaWVudEFzc2VydGlvbixcbiAgICBDbGllbnRBc3NlcnRpb25DYWxsYmFjayxcbiAgICBDYWNoZU91dGNvbWUsXG4gICAgQ2xpZW50QXV0aEVycm9yLFxufSBmcm9tIFwiQGF6dXJlL21zYWwtY29tbW9uL25vZGVcIjtcbmltcG9ydCB7XG4gICAgQ29uZmlndXJhdGlvbixcbiAgICBidWlsZEFwcENvbmZpZ3VyYXRpb24sXG4gICAgTm9kZUNvbmZpZ3VyYXRpb24sXG59IGZyb20gXCIuLi9jb25maWcvQ29uZmlndXJhdGlvbi5qc1wiO1xuaW1wb3J0IHsgQ3J5cHRvUHJvdmlkZXIgfSBmcm9tIFwiLi4vY3J5cHRvL0NyeXB0b1Byb3ZpZGVyLmpzXCI7XG5pbXBvcnQgeyBOb2RlU3RvcmFnZSB9IGZyb20gXCIuLi9jYWNoZS9Ob2RlU3RvcmFnZS5qc1wiO1xuaW1wb3J0IHsgQ29uc3RhbnRzIGFzIE5vZGVDb25zdGFudHMsIEFwaUlkIH0gZnJvbSBcIi4uL3V0aWxzL0NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgVG9rZW5DYWNoZSB9IGZyb20gXCIuLi9jYWNoZS9Ub2tlbkNhY2hlLmpzXCI7XG5pbXBvcnQgeyBDbGllbnRBc3NlcnRpb24gfSBmcm9tIFwiLi9DbGllbnRBc3NlcnRpb24uanNcIjtcbmltcG9ydCB7IEF1dGhvcml6YXRpb25VcmxSZXF1ZXN0IH0gZnJvbSBcIi4uL3JlcXVlc3QvQXV0aG9yaXphdGlvblVybFJlcXVlc3QuanNcIjtcbmltcG9ydCB7IEF1dGhvcml6YXRpb25Db2RlUmVxdWVzdCB9IGZyb20gXCIuLi9yZXF1ZXN0L0F1dGhvcml6YXRpb25Db2RlUmVxdWVzdC5qc1wiO1xuaW1wb3J0IHsgUmVmcmVzaFRva2VuUmVxdWVzdCB9IGZyb20gXCIuLi9yZXF1ZXN0L1JlZnJlc2hUb2tlblJlcXVlc3QuanNcIjtcbmltcG9ydCB7IFNpbGVudEZsb3dSZXF1ZXN0IH0gZnJvbSBcIi4uL3JlcXVlc3QvU2lsZW50Rmxvd1JlcXVlc3QuanNcIjtcbmltcG9ydCB7IHZlcnNpb24sIG5hbWUgfSBmcm9tIFwiLi4vcGFja2FnZU1ldGFkYXRhLmpzXCI7XG5pbXBvcnQgeyBVc2VybmFtZVBhc3N3b3JkUmVxdWVzdCB9IGZyb20gXCIuLi9yZXF1ZXN0L1VzZXJuYW1lUGFzc3dvcmRSZXF1ZXN0LmpzXCI7XG5pbXBvcnQgeyBOb2RlQXV0aEVycm9yIH0gZnJvbSBcIi4uL2Vycm9yL05vZGVBdXRoRXJyb3IuanNcIjtcbmltcG9ydCB7IFVzZXJuYW1lUGFzc3dvcmRDbGllbnQgfSBmcm9tIFwiLi9Vc2VybmFtZVBhc3N3b3JkQ2xpZW50LmpzXCI7XG5pbXBvcnQgeyBnZXRBdXRoQ29kZVJlcXVlc3RVcmwgfSBmcm9tIFwiLi4vcHJvdG9jb2wvQXV0aG9yaXplLmpzXCI7XG5cbi8qKlxuICogQmFzZSBhYnN0cmFjdCBjbGFzcyBmb3IgYWxsIENsaWVudEFwcGxpY2F0aW9ucyAtIHB1YmxpYyBhbmQgY29uZmlkZW50aWFsXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDbGllbnRBcHBsaWNhdGlvbiB7XG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IGNyeXB0b1Byb3ZpZGVyOiBDcnlwdG9Qcm92aWRlcjtcbiAgICBwcml2YXRlIHRva2VuQ2FjaGU6IFRva2VuQ2FjaGU7XG5cbiAgICAvKipcbiAgICAgKiBQbGF0Zm9ybSBzdG9yYWdlIG9iamVjdFxuICAgICAqL1xuICAgIHByb3RlY3RlZCBzdG9yYWdlOiBOb2RlU3RvcmFnZTtcbiAgICAvKipcbiAgICAgKiBMb2dnZXIgb2JqZWN0IHRvIGxvZyB0aGUgYXBwbGljYXRpb24gZmxvd1xuICAgICAqL1xuICAgIHByb3RlY3RlZCBsb2dnZXI6IExvZ2dlcjtcbiAgICAvKipcbiAgICAgKiBQbGF0Zm9ybSBjb25maWd1cmF0aW9uIGluaXRpYWxpemVkIGJ5IHRoZSBhcHBsaWNhdGlvblxuICAgICAqL1xuICAgIHByb3RlY3RlZCBjb25maWc6IE5vZGVDb25maWd1cmF0aW9uO1xuICAgIC8qKlxuICAgICAqIENsaWVudCBhc3NlcnRpb24gcGFzc2VkIGJ5IHRoZSB1c2VyIGZvciBjb25maWRlbnRpYWwgY2xpZW50IGZsb3dzXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGNsaWVudEFzc2VydGlvbjogQ2xpZW50QXNzZXJ0aW9uO1xuICAgIHByb3RlY3RlZCBkZXZlbG9wZXJQcm92aWRlZENsaWVudEFzc2VydGlvbjpcbiAgICAgICAgfCBzdHJpbmdcbiAgICAgICAgfCBDbGllbnRBc3NlcnRpb25DYWxsYmFjaztcbiAgICAvKipcbiAgICAgKiBDbGllbnQgc2VjcmV0IHBhc3NlZCBieSB0aGUgdXNlciBmb3IgY29uZmlkZW50aWFsIGNsaWVudCBmbG93c1xuICAgICAqL1xuICAgIHByb3RlY3RlZCBjbGllbnRTZWNyZXQ6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yIGZvciB0aGUgQ2xpZW50QXBwbGljYXRpb25cbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgY29uc3RydWN0b3IoY29uZmlndXJhdGlvbjogQ29uZmlndXJhdGlvbikge1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGJ1aWxkQXBwQ29uZmlndXJhdGlvbihjb25maWd1cmF0aW9uKTtcbiAgICAgICAgdGhpcy5jcnlwdG9Qcm92aWRlciA9IG5ldyBDcnlwdG9Qcm92aWRlcigpO1xuICAgICAgICB0aGlzLmxvZ2dlciA9IG5ldyBMb2dnZXIoXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5zeXN0ZW0ubG9nZ2VyT3B0aW9ucyxcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICB2ZXJzaW9uXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuc3RvcmFnZSA9IG5ldyBOb2RlU3RvcmFnZShcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLFxuICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aC5jbGllbnRJZCxcbiAgICAgICAgICAgIHRoaXMuY3J5cHRvUHJvdmlkZXIsXG4gICAgICAgICAgICBidWlsZFN0YXRpY0F1dGhvcml0eU9wdGlvbnModGhpcy5jb25maWcuYXV0aClcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy50b2tlbkNhY2hlID0gbmV3IFRva2VuQ2FjaGUoXG4gICAgICAgICAgICB0aGlzLnN0b3JhZ2UsXG4gICAgICAgICAgICB0aGlzLmxvZ2dlcixcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmNhY2hlLmNhY2hlUGx1Z2luXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyB0aGUgVVJMIG9mIHRoZSBhdXRob3JpemF0aW9uIHJlcXVlc3QsIGxldHRpbmcgdGhlIHVzZXIgaW5wdXQgY3JlZGVudGlhbHMgYW5kIGNvbnNlbnQgdG8gdGhlXG4gICAgICogYXBwbGljYXRpb24uIFRoZSBVUkwgdGFyZ2V0cyB0aGUgL2F1dGhvcml6ZSBlbmRwb2ludCBvZiB0aGUgYXV0aG9yaXR5IGNvbmZpZ3VyZWQgaW4gdGhlXG4gICAgICogYXBwbGljYXRpb24gb2JqZWN0LlxuICAgICAqXG4gICAgICogT25jZSB0aGUgdXNlciBpbnB1dHMgdGhlaXIgY3JlZGVudGlhbHMgYW5kIGNvbnNlbnRzLCB0aGUgYXV0aG9yaXR5IHdpbGwgc2VuZCBhIHJlc3BvbnNlIHRvIHRoZSByZWRpcmVjdCBVUklcbiAgICAgKiBzZW50IGluIHRoZSByZXF1ZXN0IGFuZCBzaG91bGQgY29udGFpbiBhbiBhdXRob3JpemF0aW9uIGNvZGUsIHdoaWNoIGNhbiB0aGVuIGJlIHVzZWQgdG8gYWNxdWlyZSB0b2tlbnMgdmlhXG4gICAgICogYGFjcXVpcmVUb2tlbkJ5Q29kZShBdXRob3JpemF0aW9uQ29kZVJlcXVlc3QpYC5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRBdXRoQ29kZVVybChyZXF1ZXN0OiBBdXRob3JpemF0aW9uVXJsUmVxdWVzdCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXCJnZXRBdXRoQ29kZVVybCBjYWxsZWRcIiwgcmVxdWVzdC5jb3JyZWxhdGlvbklkKTtcbiAgICAgICAgY29uc3QgdmFsaWRSZXF1ZXN0OiBDb21tb25BdXRob3JpemF0aW9uVXJsUmVxdWVzdCA9IHtcbiAgICAgICAgICAgIC4uLnJlcXVlc3QsXG4gICAgICAgICAgICAuLi4oYXdhaXQgdGhpcy5pbml0aWFsaXplQmFzZVJlcXVlc3QocmVxdWVzdCkpLFxuICAgICAgICAgICAgcmVzcG9uc2VNb2RlOiByZXF1ZXN0LnJlc3BvbnNlTW9kZSB8fCBSZXNwb25zZU1vZGUuUVVFUlksXG4gICAgICAgICAgICBhdXRoZW50aWNhdGlvblNjaGVtZTogQXV0aGVudGljYXRpb25TY2hlbWUuQkVBUkVSLFxuICAgICAgICAgICAgc3RhdGU6IHJlcXVlc3Quc3RhdGUgfHwgXCJcIixcbiAgICAgICAgICAgIG5vbmNlOiByZXF1ZXN0Lm5vbmNlIHx8IFwiXCIsXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgZGlzY292ZXJlZEF1dGhvcml0eSA9IGF3YWl0IHRoaXMuY3JlYXRlQXV0aG9yaXR5KFxuICAgICAgICAgICAgdmFsaWRSZXF1ZXN0LmF1dGhvcml0eSxcbiAgICAgICAgICAgIHZhbGlkUmVxdWVzdC5jb3JyZWxhdGlvbklkLFxuICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgcmVxdWVzdC5henVyZUNsb3VkT3B0aW9uc1xuICAgICAgICApO1xuICAgICAgICByZXR1cm4gZ2V0QXV0aENvZGVSZXF1ZXN0VXJsKFxuICAgICAgICAgICAgdGhpcy5jb25maWcsXG4gICAgICAgICAgICBkaXNjb3ZlcmVkQXV0aG9yaXR5LFxuICAgICAgICAgICAgdmFsaWRSZXF1ZXN0LFxuICAgICAgICAgICAgdGhpcy5sb2dnZXJcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBY3F1aXJlcyBhIHRva2VuIGJ5IGV4Y2hhbmdpbmcgdGhlIEF1dGhvcml6YXRpb24gQ29kZSByZWNlaXZlZCBmcm9tIHRoZSBmaXJzdCBzdGVwIG9mIE9BdXRoMi4wXG4gICAgICogQXV0aG9yaXphdGlvbiBDb2RlIGZsb3cuXG4gICAgICpcbiAgICAgKiBgZ2V0QXV0aENvZGVVcmwoQXV0aG9yaXphdGlvbkNvZGVVcmxSZXF1ZXN0KWAgY2FuIGJlIHVzZWQgdG8gY3JlYXRlIHRoZSBVUkwgZm9yIHRoZSBmaXJzdCBzdGVwIG9mIE9BdXRoMi4wXG4gICAgICogQXV0aG9yaXphdGlvbiBDb2RlIGZsb3cuIEVuc3VyZSB0aGF0IHZhbHVlcyBmb3IgcmVkaXJlY3RVcmkgYW5kIHNjb3BlcyBpbiBBdXRob3JpemF0aW9uQ29kZVVybFJlcXVlc3QgYW5kXG4gICAgICogQXV0aG9yaXphdGlvbkNvZGVSZXF1ZXN0IGFyZSB0aGUgc2FtZS5cbiAgICAgKi9cbiAgICBhc3luYyBhY3F1aXJlVG9rZW5CeUNvZGUoXG4gICAgICAgIHJlcXVlc3Q6IEF1dGhvcml6YXRpb25Db2RlUmVxdWVzdCxcbiAgICAgICAgYXV0aENvZGVQYXlMb2FkPzogQXV0aG9yaXphdGlvbkNvZGVQYXlsb2FkXG4gICAgKTogUHJvbWlzZTxBdXRoZW50aWNhdGlvblJlc3VsdD4ge1xuICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiYWNxdWlyZVRva2VuQnlDb2RlIGNhbGxlZFwiKTtcbiAgICAgICAgaWYgKHJlcXVlc3Quc3RhdGUgJiYgYXV0aENvZGVQYXlMb2FkKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiYWNxdWlyZVRva2VuQnlDb2RlIC0gdmFsaWRhdGluZyBzdGF0ZVwiKTtcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVTdGF0ZShyZXF1ZXN0LnN0YXRlLCBhdXRoQ29kZVBheUxvYWQuc3RhdGUgfHwgXCJcIik7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGF1dGhDb2RlUGF5TG9hZCA9IHsgLi4uYXV0aENvZGVQYXlMb2FkLCBzdGF0ZTogXCJcIiB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbGlkUmVxdWVzdDogQ29tbW9uQXV0aG9yaXphdGlvbkNvZGVSZXF1ZXN0ID0ge1xuICAgICAgICAgICAgLi4ucmVxdWVzdCxcbiAgICAgICAgICAgIC4uLihhd2FpdCB0aGlzLmluaXRpYWxpemVCYXNlUmVxdWVzdChyZXF1ZXN0KSksXG4gICAgICAgICAgICBhdXRoZW50aWNhdGlvblNjaGVtZTogQXV0aGVudGljYXRpb25TY2hlbWUuQkVBUkVSLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHNlcnZlclRlbGVtZXRyeU1hbmFnZXIgPSB0aGlzLmluaXRpYWxpemVTZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyKFxuICAgICAgICAgICAgQXBpSWQuYWNxdWlyZVRva2VuQnlDb2RlLFxuICAgICAgICAgICAgdmFsaWRSZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGRpc2NvdmVyZWRBdXRob3JpdHkgPSBhd2FpdCB0aGlzLmNyZWF0ZUF1dGhvcml0eShcbiAgICAgICAgICAgICAgICB2YWxpZFJlcXVlc3QuYXV0aG9yaXR5LFxuICAgICAgICAgICAgICAgIHZhbGlkUmVxdWVzdC5jb3JyZWxhdGlvbklkLFxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmF6dXJlQ2xvdWRPcHRpb25zXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3QgYXV0aENsaWVudENvbmZpZyA9IGF3YWl0IHRoaXMuYnVpbGRPYXV0aENsaWVudENvbmZpZ3VyYXRpb24oXG4gICAgICAgICAgICAgICAgZGlzY292ZXJlZEF1dGhvcml0eSxcbiAgICAgICAgICAgICAgICB2YWxpZFJlcXVlc3QuY29ycmVsYXRpb25JZCxcbiAgICAgICAgICAgICAgICB2YWxpZFJlcXVlc3QucmVkaXJlY3RVcmksXG4gICAgICAgICAgICAgICAgc2VydmVyVGVsZW1ldHJ5TWFuYWdlclxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IGF1dGhvcml6YXRpb25Db2RlQ2xpZW50ID0gbmV3IEF1dGhvcml6YXRpb25Db2RlQ2xpZW50KFxuICAgICAgICAgICAgICAgIGF1dGhDbGllbnRDb25maWdcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFxuICAgICAgICAgICAgICAgIFwiQXV0aCBjb2RlIGNsaWVudCBjcmVhdGVkXCIsXG4gICAgICAgICAgICAgICAgdmFsaWRSZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgYXV0aG9yaXphdGlvbkNvZGVDbGllbnQuYWNxdWlyZVRva2VuKFxuICAgICAgICAgICAgICAgIHZhbGlkUmVxdWVzdCxcbiAgICAgICAgICAgICAgICBhdXRoQ29kZVBheUxvYWRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgQXV0aEVycm9yKSB7XG4gICAgICAgICAgICAgICAgZS5zZXRDb3JyZWxhdGlvbklkKHZhbGlkUmVxdWVzdC5jb3JyZWxhdGlvbklkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlcnZlclRlbGVtZXRyeU1hbmFnZXIuY2FjaGVGYWlsZWRSZXF1ZXN0KGUpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFjcXVpcmVzIGEgdG9rZW4gYnkgZXhjaGFuZ2luZyB0aGUgcmVmcmVzaCB0b2tlbiBwcm92aWRlZCBmb3IgYSBuZXcgc2V0IG9mIHRva2Vucy5cbiAgICAgKlxuICAgICAqIFRoaXMgQVBJIGlzIHByb3ZpZGVkIG9ubHkgZm9yIHNjZW5hcmlvcyB3aGVyZSB5b3Ugd291bGQgbGlrZSB0byBtaWdyYXRlIGZyb20gQURBTCB0byBNU0FMLiBPdGhlcndpc2UsIGl0IGlzXG4gICAgICogcmVjb21tZW5kZWQgdGhhdCB5b3UgdXNlIGBhY3F1aXJlVG9rZW5TaWxlbnQoKWAgZm9yIHNpbGVudCBzY2VuYXJpb3MuIFdoZW4gdXNpbmcgYGFjcXVpcmVUb2tlblNpbGVudCgpYCwgTVNBTCB3aWxsXG4gICAgICogaGFuZGxlIHRoZSBjYWNoaW5nIGFuZCByZWZyZXNoaW5nIG9mIHRva2VucyBhdXRvbWF0aWNhbGx5LlxuICAgICAqL1xuICAgIGFzeW5jIGFjcXVpcmVUb2tlbkJ5UmVmcmVzaFRva2VuKFxuICAgICAgICByZXF1ZXN0OiBSZWZyZXNoVG9rZW5SZXF1ZXN0XG4gICAgKTogUHJvbWlzZTxBdXRoZW50aWNhdGlvblJlc3VsdCB8IG51bGw+IHtcbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcbiAgICAgICAgICAgIFwiYWNxdWlyZVRva2VuQnlSZWZyZXNoVG9rZW4gY2FsbGVkXCIsXG4gICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgdmFsaWRSZXF1ZXN0OiBDb21tb25SZWZyZXNoVG9rZW5SZXF1ZXN0ID0ge1xuICAgICAgICAgICAgLi4ucmVxdWVzdCxcbiAgICAgICAgICAgIC4uLihhd2FpdCB0aGlzLmluaXRpYWxpemVCYXNlUmVxdWVzdChyZXF1ZXN0KSksXG4gICAgICAgICAgICBhdXRoZW50aWNhdGlvblNjaGVtZTogQXV0aGVudGljYXRpb25TY2hlbWUuQkVBUkVSLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHNlcnZlclRlbGVtZXRyeU1hbmFnZXIgPSB0aGlzLmluaXRpYWxpemVTZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyKFxuICAgICAgICAgICAgQXBpSWQuYWNxdWlyZVRva2VuQnlSZWZyZXNoVG9rZW4sXG4gICAgICAgICAgICB2YWxpZFJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZGlzY292ZXJlZEF1dGhvcml0eSA9IGF3YWl0IHRoaXMuY3JlYXRlQXV0aG9yaXR5KFxuICAgICAgICAgICAgICAgIHZhbGlkUmVxdWVzdC5hdXRob3JpdHksXG4gICAgICAgICAgICAgICAgdmFsaWRSZXF1ZXN0LmNvcnJlbGF0aW9uSWQsXG4gICAgICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIHJlcXVlc3QuYXp1cmVDbG91ZE9wdGlvbnNcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCByZWZyZXNoVG9rZW5DbGllbnRDb25maWcgPVxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYnVpbGRPYXV0aENsaWVudENvbmZpZ3VyYXRpb24oXG4gICAgICAgICAgICAgICAgICAgIGRpc2NvdmVyZWRBdXRob3JpdHksXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkUmVxdWVzdC5jb3JyZWxhdGlvbklkLFxuICAgICAgICAgICAgICAgICAgICB2YWxpZFJlcXVlc3QucmVkaXJlY3RVcmkgfHwgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgc2VydmVyVGVsZW1ldHJ5TWFuYWdlclxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCByZWZyZXNoVG9rZW5DbGllbnQgPSBuZXcgUmVmcmVzaFRva2VuQ2xpZW50KFxuICAgICAgICAgICAgICAgIHJlZnJlc2hUb2tlbkNsaWVudENvbmZpZ1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgXCJSZWZyZXNoIHRva2VuIGNsaWVudCBjcmVhdGVkXCIsXG4gICAgICAgICAgICAgICAgdmFsaWRSZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgcmVmcmVzaFRva2VuQ2xpZW50LmFjcXVpcmVUb2tlbih2YWxpZFJlcXVlc3QpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEF1dGhFcnJvcikge1xuICAgICAgICAgICAgICAgIGUuc2V0Q29ycmVsYXRpb25JZCh2YWxpZFJlcXVlc3QuY29ycmVsYXRpb25JZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyLmNhY2hlRmFpbGVkUmVxdWVzdChlKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBY3F1aXJlcyBhIHRva2VuIHNpbGVudGx5IHdoZW4gYSB1c2VyIHNwZWNpZmllcyB0aGUgYWNjb3VudCB0aGUgdG9rZW4gaXMgcmVxdWVzdGVkIGZvci5cbiAgICAgKlxuICAgICAqIFRoaXMgQVBJIGV4cGVjdHMgdGhlIHVzZXIgdG8gcHJvdmlkZSBhbiBhY2NvdW50IG9iamVjdCBhbmQgbG9va3MgaW50byB0aGUgY2FjaGUgdG8gcmV0cmlldmUgdGhlIHRva2VuIGlmIHByZXNlbnQuXG4gICAgICogVGhlcmUgaXMgYWxzbyBhbiBvcHRpb25hbCBcImZvcmNlUmVmcmVzaFwiIGJvb2xlYW4gdGhlIHVzZXIgY2FuIHNlbmQgdG8gYnlwYXNzIHRoZSBjYWNoZSBmb3IgYWNjZXNzX3Rva2VuIGFuZCBpZF90b2tlbi5cbiAgICAgKiBJbiBjYXNlIHRoZSByZWZyZXNoX3Rva2VuIGlzIGV4cGlyZWQgb3Igbm90IGZvdW5kLCBhbiBlcnJvciBpcyB0aHJvd25cbiAgICAgKiBhbmQgdGhlIGd1aWRhbmNlIGlzIGZvciB0aGUgdXNlciB0byBjYWxsIGFueSBpbnRlcmFjdGl2ZSB0b2tlbiBhY3F1aXNpdGlvbiBBUEkgKGVnOiBgYWNxdWlyZVRva2VuQnlDb2RlKClgKS5cbiAgICAgKi9cbiAgICBhc3luYyBhY3F1aXJlVG9rZW5TaWxlbnQoXG4gICAgICAgIHJlcXVlc3Q6IFNpbGVudEZsb3dSZXF1ZXN0XG4gICAgKTogUHJvbWlzZTxBdXRoZW50aWNhdGlvblJlc3VsdD4ge1xuICAgICAgICBjb25zdCB2YWxpZFJlcXVlc3Q6IENvbW1vblNpbGVudEZsb3dSZXF1ZXN0ID0ge1xuICAgICAgICAgICAgLi4ucmVxdWVzdCxcbiAgICAgICAgICAgIC4uLihhd2FpdCB0aGlzLmluaXRpYWxpemVCYXNlUmVxdWVzdChyZXF1ZXN0KSksXG4gICAgICAgICAgICBmb3JjZVJlZnJlc2g6IHJlcXVlc3QuZm9yY2VSZWZyZXNoIHx8IGZhbHNlLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHNlcnZlclRlbGVtZXRyeU1hbmFnZXIgPSB0aGlzLmluaXRpYWxpemVTZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyKFxuICAgICAgICAgICAgQXBpSWQuYWNxdWlyZVRva2VuU2lsZW50LFxuICAgICAgICAgICAgdmFsaWRSZXF1ZXN0LmNvcnJlbGF0aW9uSWQsXG4gICAgICAgICAgICB2YWxpZFJlcXVlc3QuZm9yY2VSZWZyZXNoXG4gICAgICAgICk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGRpc2NvdmVyZWRBdXRob3JpdHkgPSBhd2FpdCB0aGlzLmNyZWF0ZUF1dGhvcml0eShcbiAgICAgICAgICAgICAgICB2YWxpZFJlcXVlc3QuYXV0aG9yaXR5LFxuICAgICAgICAgICAgICAgIHZhbGlkUmVxdWVzdC5jb3JyZWxhdGlvbklkLFxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmF6dXJlQ2xvdWRPcHRpb25zXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3QgY2xpZW50Q29uZmlndXJhdGlvbiA9XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5idWlsZE9hdXRoQ2xpZW50Q29uZmlndXJhdGlvbihcbiAgICAgICAgICAgICAgICAgICAgZGlzY292ZXJlZEF1dGhvcml0eSxcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRSZXF1ZXN0LmNvcnJlbGF0aW9uSWQsXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkUmVxdWVzdC5yZWRpcmVjdFVyaSB8fCBcIlwiLFxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IHNpbGVudEZsb3dDbGllbnQgPSBuZXcgU2lsZW50Rmxvd0NsaWVudChjbGllbnRDb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgXCJTaWxlbnQgZmxvdyBjbGllbnQgY3JlYXRlZFwiLFxuICAgICAgICAgICAgICAgIHZhbGlkUmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBhbHdheXMgb3ZlcndyaXRlIHRoZSBpbi1tZW1vcnkgY2FjaGUgd2l0aCB0aGUgcGVyc2lzdGVuY2UgY2FjaGUgKGlmIGl0IGV4aXN0cykgYmVmb3JlIGEgY2FjaGUgbG9va3VwXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy50b2tlbkNhY2hlLm92ZXJ3cml0ZUNhY2hlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuYWNxdWlyZUNhY2hlZFRva2VuU2lsZW50KFxuICAgICAgICAgICAgICAgICAgICB2YWxpZFJlcXVlc3QsXG4gICAgICAgICAgICAgICAgICAgIHNpbGVudEZsb3dDbGllbnQsXG4gICAgICAgICAgICAgICAgICAgIGNsaWVudENvbmZpZ3VyYXRpb25cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIGVycm9yIGluc3RhbmNlb2YgQ2xpZW50QXV0aEVycm9yICYmXG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmVycm9yQ29kZSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLnRva2VuUmVmcmVzaFJlcXVpcmVkXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZnJlc2hUb2tlbkNsaWVudCA9IG5ldyBSZWZyZXNoVG9rZW5DbGllbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRDb25maWd1cmF0aW9uXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWZyZXNoVG9rZW5DbGllbnQuYWNxdWlyZVRva2VuQnlSZWZyZXNoVG9rZW4oXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBBdXRoRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBlcnJvci5zZXRDb3JyZWxhdGlvbklkKHZhbGlkUmVxdWVzdC5jb3JyZWxhdGlvbklkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlcnZlclRlbGVtZXRyeU1hbmFnZXIuY2FjaGVGYWlsZWRSZXF1ZXN0KGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBhY3F1aXJlQ2FjaGVkVG9rZW5TaWxlbnQoXG4gICAgICAgIHZhbGlkUmVxdWVzdDogQ29tbW9uU2lsZW50Rmxvd1JlcXVlc3QsXG4gICAgICAgIHNpbGVudEZsb3dDbGllbnQ6IFNpbGVudEZsb3dDbGllbnQsXG4gICAgICAgIGNsaWVudENvbmZpZ3VyYXRpb246IENsaWVudENvbmZpZ3VyYXRpb25cbiAgICApOiBQcm9taXNlPEF1dGhlbnRpY2F0aW9uUmVzdWx0PiB7XG4gICAgICAgIGNvbnN0IFthdXRoUmVzcG9uc2UsIGNhY2hlT3V0Y29tZV0gPVxuICAgICAgICAgICAgYXdhaXQgc2lsZW50Rmxvd0NsaWVudC5hY3F1aXJlQ2FjaGVkVG9rZW4oe1xuICAgICAgICAgICAgICAgIC4uLnZhbGlkUmVxdWVzdCxcbiAgICAgICAgICAgICAgICBzY29wZXM6IHZhbGlkUmVxdWVzdC5zY29wZXM/Lmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICA/IHZhbGlkUmVxdWVzdC5zY29wZXNcbiAgICAgICAgICAgICAgICAgICAgOiBbLi4uT0lEQ19ERUZBVUxUX1NDT1BFU10sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBpZiAoY2FjaGVPdXRjb21lID09PSBDYWNoZU91dGNvbWUuUFJPQUNUSVZFTFlfUkVGUkVTSEVEKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgICAgIFwiQ2xpZW50QXBwbGljYXRpb246YWNxdWlyZUNhY2hlZFRva2VuU2lsZW50IC0gQ2FjaGVkIGFjY2VzcyB0b2tlbidzIHJlZnJlc2hPbiBwcm9wZXJ0eSBoYXMgYmVlbiBleGNlZWRlZCcuIEl0J3Mgbm90IGV4cGlyZWQsIGJ1dCBtdXN0IGJlIHJlZnJlc2hlZC5cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIC8vIHJlZnJlc2ggdGhlIGFjY2VzcyB0b2tlbiBpbiB0aGUgYmFja2dyb3VuZFxuICAgICAgICAgICAgY29uc3QgcmVmcmVzaFRva2VuQ2xpZW50ID0gbmV3IFJlZnJlc2hUb2tlbkNsaWVudChcbiAgICAgICAgICAgICAgICBjbGllbnRDb25maWd1cmF0aW9uXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHJlZnJlc2hUb2tlbkNsaWVudC5hY3F1aXJlVG9rZW5CeVJlZnJlc2hUb2tlbihcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRSZXF1ZXN0XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgICAgIC8vIGRvIG5vdGhpbmcsIHRoaXMgaXMgcnVubmluZyBpbiB0aGUgYmFja2dyb3VuZCBhbmQgbm8gYWN0aW9uIGlzIHRvIGJlIHRha2VuIHVwb24gc3VjY2VzcyBvciBmYWlsdXJlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZXR1cm4gdGhlIGNhY2hlZCB0b2tlblxuICAgICAgICByZXR1cm4gYXV0aFJlc3BvbnNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFjcXVpcmVzIHRva2VucyB3aXRoIHBhc3N3b3JkIGdyYW50IGJ5IGV4Y2hhbmdpbmcgY2xpZW50IGFwcGxpY2F0aW9ucyB1c2VybmFtZSBhbmQgcGFzc3dvcmQgZm9yIGNyZWRlbnRpYWxzXG4gICAgICpcbiAgICAgKiBUaGUgbGF0ZXN0IE9BdXRoIDIuMCBTZWN1cml0eSBCZXN0IEN1cnJlbnQgUHJhY3RpY2UgZGlzYWxsb3dzIHRoZSBwYXNzd29yZCBncmFudCBlbnRpcmVseS5cbiAgICAgKiBNb3JlIGRldGFpbHMgb24gdGhpcyByZWNvbW1lbmRhdGlvbiBhdCBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvZHJhZnQtaWV0Zi1vYXV0aC1zZWN1cml0eS10b3BpY3MtMTMjc2VjdGlvbi0zLjRcbiAgICAgKiBNaWNyb3NvZnQncyBkb2N1bWVudGF0aW9uIGFuZCByZWNvbW1lbmRhdGlvbnMgYXJlIGF0OlxuICAgICAqIGh0dHBzOi8vZG9jcy5taWNyb3NvZnQuY29tL2VuLXVzL2F6dXJlL2FjdGl2ZS1kaXJlY3RvcnkvZGV2ZWxvcC9tc2FsLWF1dGhlbnRpY2F0aW9uLWZsb3dzI3VzZXJuYW1lcGFzc3dvcmRcbiAgICAgKlxuICAgICAqIEBwYXJhbSByZXF1ZXN0IC0gVXNlbmFtZVBhc3N3b3JkUmVxdWVzdFxuICAgICAqIEBkZXByZWNhdGVkIC0gVXNlIGEgbW9yZSBzZWN1cmUgZmxvdyBpbnN0ZWFkXG4gICAgICovXG4gICAgYXN5bmMgYWNxdWlyZVRva2VuQnlVc2VybmFtZVBhc3N3b3JkKFxuICAgICAgICByZXF1ZXN0OiBVc2VybmFtZVBhc3N3b3JkUmVxdWVzdFxuICAgICk6IFByb21pc2U8QXV0aGVudGljYXRpb25SZXN1bHQgfCBudWxsPiB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXG4gICAgICAgICAgICBcImFjcXVpcmVUb2tlbkJ5VXNlcm5hbWVQYXNzd29yZCBjYWxsZWRcIixcbiAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuICAgICAgICBjb25zdCB2YWxpZFJlcXVlc3Q6IENvbW1vblVzZXJuYW1lUGFzc3dvcmRSZXF1ZXN0ID0ge1xuICAgICAgICAgICAgLi4ucmVxdWVzdCxcbiAgICAgICAgICAgIC4uLihhd2FpdCB0aGlzLmluaXRpYWxpemVCYXNlUmVxdWVzdChyZXF1ZXN0KSksXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHNlcnZlclRlbGVtZXRyeU1hbmFnZXIgPSB0aGlzLmluaXRpYWxpemVTZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyKFxuICAgICAgICAgICAgQXBpSWQuYWNxdWlyZVRva2VuQnlVc2VybmFtZVBhc3N3b3JkLFxuICAgICAgICAgICAgdmFsaWRSZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGRpc2NvdmVyZWRBdXRob3JpdHkgPSBhd2FpdCB0aGlzLmNyZWF0ZUF1dGhvcml0eShcbiAgICAgICAgICAgICAgICB2YWxpZFJlcXVlc3QuYXV0aG9yaXR5LFxuICAgICAgICAgICAgICAgIHZhbGlkUmVxdWVzdC5jb3JyZWxhdGlvbklkLFxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmF6dXJlQ2xvdWRPcHRpb25zXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3QgdXNlcm5hbWVQYXNzd29yZENsaWVudENvbmZpZyA9XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5idWlsZE9hdXRoQ2xpZW50Q29uZmlndXJhdGlvbihcbiAgICAgICAgICAgICAgICAgICAgZGlzY292ZXJlZEF1dGhvcml0eSxcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRSZXF1ZXN0LmNvcnJlbGF0aW9uSWQsXG4gICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgIHNlcnZlclRlbGVtZXRyeU1hbmFnZXJcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3QgdXNlcm5hbWVQYXNzd29yZENsaWVudCA9IG5ldyBVc2VybmFtZVBhc3N3b3JkQ2xpZW50KFxuICAgICAgICAgICAgICAgIHVzZXJuYW1lUGFzc3dvcmRDbGllbnRDb25maWdcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFxuICAgICAgICAgICAgICAgIFwiVXNlcm5hbWUgcGFzc3dvcmQgY2xpZW50IGNyZWF0ZWRcIixcbiAgICAgICAgICAgICAgICB2YWxpZFJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB1c2VybmFtZVBhc3N3b3JkQ2xpZW50LmFjcXVpcmVUb2tlbih2YWxpZFJlcXVlc3QpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEF1dGhFcnJvcikge1xuICAgICAgICAgICAgICAgIGUuc2V0Q29ycmVsYXRpb25JZCh2YWxpZFJlcXVlc3QuY29ycmVsYXRpb25JZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyLmNhY2hlRmFpbGVkUmVxdWVzdChlKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSB0b2tlbiBjYWNoZSBmb3IgdGhlIGFwcGxpY2F0aW9uLlxuICAgICAqL1xuICAgIGdldFRva2VuQ2FjaGUoKTogVG9rZW5DYWNoZSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXCJnZXRUb2tlbkNhY2hlIGNhbGxlZFwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9rZW5DYWNoZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBWYWxpZGF0ZXMgT0lEQyBzdGF0ZSBieSBjb21wYXJpbmcgdGhlIHVzZXIgY2FjaGVkIHN0YXRlIHdpdGggdGhlIHN0YXRlIHJlY2VpdmVkIGZyb20gdGhlIHNlcnZlci5cbiAgICAgKlxuICAgICAqIFRoaXMgQVBJIGlzIHByb3ZpZGVkIGZvciBzY2VuYXJpb3Mgd2hlcmUgeW91IHdvdWxkIHVzZSBPQXV0aDIuMCBzdGF0ZSBwYXJhbWV0ZXIgdG8gbWl0aWdhdGUgYWdhaW5zdFxuICAgICAqIENTUkYgYXR0YWNrcy5cbiAgICAgKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBzdGF0ZSwgdmlzaXQgaHR0cHM6Ly9kYXRhdHJhY2tlci5pZXRmLm9yZy9kb2MvaHRtbC9yZmM2ODE5I3NlY3Rpb24tMy42LlxuICAgICAqIEBwYXJhbSBzdGF0ZSAtIFVuaXF1ZSBHVUlEIGdlbmVyYXRlZCBieSB0aGUgdXNlciB0aGF0IGlzIGNhY2hlZCBieSB0aGUgdXNlciBhbmQgc2VudCB0byB0aGUgc2VydmVyIGR1cmluZyB0aGUgZmlyc3QgbGVnIG9mIHRoZSBmbG93XG4gICAgICogQHBhcmFtIGNhY2hlZFN0YXRlIC0gVGhpcyBzdHJpbmcgaXMgc2VudCBiYWNrIGJ5IHRoZSBzZXJ2ZXIgd2l0aCB0aGUgYXV0aG9yaXphdGlvbiBjb2RlXG4gICAgICovXG4gICAgcHJvdGVjdGVkIHZhbGlkYXRlU3RhdGUoc3RhdGU6IHN0cmluZywgY2FjaGVkU3RhdGU6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZiAoIXN0YXRlKSB7XG4gICAgICAgICAgICB0aHJvdyBOb2RlQXV0aEVycm9yLmNyZWF0ZVN0YXRlTm90Rm91bmRFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN0YXRlICE9PSBjYWNoZWRTdGF0ZSkge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvckNvZGVzLnN0YXRlTWlzbWF0Y2gpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbG9nZ2VyIGluc3RhbmNlXG4gICAgICovXG4gICAgZ2V0TG9nZ2VyKCk6IExvZ2dlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvZ2dlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXBsYWNlcyB0aGUgZGVmYXVsdCBsb2dnZXIgc2V0IGluIGNvbmZpZ3VyYXRpb25zIHdpdGggbmV3IExvZ2dlciB3aXRoIG5ldyBjb25maWd1cmF0aW9uc1xuICAgICAqIEBwYXJhbSBsb2dnZXIgLSBMb2dnZXIgaW5zdGFuY2VcbiAgICAgKi9cbiAgICBzZXRMb2dnZXIobG9nZ2VyOiBMb2dnZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5sb2dnZXIgPSBsb2dnZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQnVpbGRzIHRoZSBjb21tb24gY29uZmlndXJhdGlvbiB0byBiZSBwYXNzZWQgdG8gdGhlIGNvbW1vbiBjb21wb25lbnQgYmFzZWQgb24gdGhlIHBsYXRmb3JtIGNvbmZpZ3VyYXJpb25cbiAgICAgKiBAcGFyYW0gYXV0aG9yaXR5IC0gdXNlciBwYXNzZWQgYXV0aG9yaXR5IGluIGNvbmZpZ3VyYXRpb25cbiAgICAgKiBAcGFyYW0gc2VydmVyVGVsZW1ldHJ5TWFuYWdlciAtIGluaXRpYWxpemVzIHNlcnZlcnRlbGVtZXRyeSBpZiBwYXNzZWRcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgYXN5bmMgYnVpbGRPYXV0aENsaWVudENvbmZpZ3VyYXRpb24oXG4gICAgICAgIGRpc2NvdmVyZWRBdXRob3JpdHk6IEF1dGhvcml0eSxcbiAgICAgICAgcmVxdWVzdENvcnJlbGF0aW9uSWQ6IHN0cmluZyxcbiAgICAgICAgcmVkaXJlY3RVcmk6IHN0cmluZyxcbiAgICAgICAgc2VydmVyVGVsZW1ldHJ5TWFuYWdlcj86IFNlcnZlclRlbGVtZXRyeU1hbmFnZXJcbiAgICApOiBQcm9taXNlPENsaWVudENvbmZpZ3VyYXRpb24+IHtcbiAgICAgICAgdGhpcy5sb2dnZXIudmVyYm9zZShcbiAgICAgICAgICAgIFwiYnVpbGRPYXV0aENsaWVudENvbmZpZ3VyYXRpb24gY2FsbGVkXCIsXG4gICAgICAgICAgICByZXF1ZXN0Q29ycmVsYXRpb25JZFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXG4gICAgICAgICAgICBgQnVpbGRpbmcgb2F1dGggY2xpZW50IGNvbmZpZ3VyYXRpb24gd2l0aCB0aGUgZm9sbG93aW5nIGF1dGhvcml0eTogJHtkaXNjb3ZlcmVkQXV0aG9yaXR5LnRva2VuRW5kcG9pbnR9LmAsXG4gICAgICAgICAgICByZXF1ZXN0Q29ycmVsYXRpb25JZFxuICAgICAgICApO1xuXG4gICAgICAgIHNlcnZlclRlbGVtZXRyeU1hbmFnZXI/LnVwZGF0ZVJlZ2lvbkRpc2NvdmVyeU1ldGFkYXRhKFxuICAgICAgICAgICAgZGlzY292ZXJlZEF1dGhvcml0eS5yZWdpb25EaXNjb3ZlcnlNZXRhZGF0YVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsaWVudENvbmZpZ3VyYXRpb246IENsaWVudENvbmZpZ3VyYXRpb24gPSB7XG4gICAgICAgICAgICBhdXRoT3B0aW9uczoge1xuICAgICAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLmNvbmZpZy5hdXRoLmNsaWVudElkLFxuICAgICAgICAgICAgICAgIGF1dGhvcml0eTogZGlzY292ZXJlZEF1dGhvcml0eSxcbiAgICAgICAgICAgICAgICBjbGllbnRDYXBhYmlsaXRpZXM6IHRoaXMuY29uZmlnLmF1dGguY2xpZW50Q2FwYWJpbGl0aWVzLFxuICAgICAgICAgICAgICAgIHJlZGlyZWN0VXJpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxvZ2dlck9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICBsb2dMZXZlbDogdGhpcy5jb25maWcuc3lzdGVtLmxvZ2dlck9wdGlvbnMubG9nTGV2ZWwsXG4gICAgICAgICAgICAgICAgbG9nZ2VyQ2FsbGJhY2s6IHRoaXMuY29uZmlnLnN5c3RlbS5sb2dnZXJPcHRpb25zLmxvZ2dlckNhbGxiYWNrLFxuICAgICAgICAgICAgICAgIHBpaUxvZ2dpbmdFbmFibGVkOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5zeXN0ZW0ubG9nZ2VyT3B0aW9ucy5waWlMb2dnaW5nRW5hYmxlZCxcbiAgICAgICAgICAgICAgICBjb3JyZWxhdGlvbklkOiByZXF1ZXN0Q29ycmVsYXRpb25JZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYWNoZU9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICBjbGFpbXNCYXNlZENhY2hpbmdFbmFibGVkOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5jYWNoZS5jbGFpbXNCYXNlZENhY2hpbmdFbmFibGVkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNyeXB0b0ludGVyZmFjZTogdGhpcy5jcnlwdG9Qcm92aWRlcixcbiAgICAgICAgICAgIG5ldHdvcmtJbnRlcmZhY2U6IHRoaXMuY29uZmlnLnN5c3RlbS5uZXR3b3JrQ2xpZW50LFxuICAgICAgICAgICAgc3RvcmFnZUludGVyZmFjZTogdGhpcy5zdG9yYWdlLFxuICAgICAgICAgICAgc2VydmVyVGVsZW1ldHJ5TWFuYWdlcjogc2VydmVyVGVsZW1ldHJ5TWFuYWdlcixcbiAgICAgICAgICAgIGNsaWVudENyZWRlbnRpYWxzOiB7XG4gICAgICAgICAgICAgICAgY2xpZW50U2VjcmV0OiB0aGlzLmNsaWVudFNlY3JldCxcbiAgICAgICAgICAgICAgICBjbGllbnRBc3NlcnRpb246IGF3YWl0IHRoaXMuZ2V0Q2xpZW50QXNzZXJ0aW9uKFxuICAgICAgICAgICAgICAgICAgICBkaXNjb3ZlcmVkQXV0aG9yaXR5XG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsaWJyYXJ5SW5mbzoge1xuICAgICAgICAgICAgICAgIHNrdTogTm9kZUNvbnN0YW50cy5NU0FMX1NLVSxcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiB2ZXJzaW9uLFxuICAgICAgICAgICAgICAgIGNwdTogcHJvY2Vzcy5hcmNoIHx8IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgICAgICAgICAgICAgb3M6IHByb2Nlc3MucGxhdGZvcm0gfHwgQ29uc3RhbnRzLkVNUFRZX1NUUklORyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0ZWxlbWV0cnk6IHRoaXMuY29uZmlnLnRlbGVtZXRyeSxcbiAgICAgICAgICAgIHBlcnNpc3RlbmNlUGx1Z2luOiB0aGlzLmNvbmZpZy5jYWNoZS5jYWNoZVBsdWdpbixcbiAgICAgICAgICAgIHNlcmlhbGl6YWJsZUNhY2hlOiB0aGlzLnRva2VuQ2FjaGUsXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGNsaWVudENvbmZpZ3VyYXRpb247XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBnZXRDbGllbnRBc3NlcnRpb24oXG4gICAgICAgIGF1dGhvcml0eTogQXV0aG9yaXR5XG4gICAgKTogUHJvbWlzZTxDbGllbnRBc3NlcnRpb25UeXBlPiB7XG4gICAgICAgIGlmICh0aGlzLmRldmVsb3BlclByb3ZpZGVkQ2xpZW50QXNzZXJ0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmNsaWVudEFzc2VydGlvbiA9IENsaWVudEFzc2VydGlvbi5mcm9tQXNzZXJ0aW9uKFxuICAgICAgICAgICAgICAgIGF3YWl0IGdldENsaWVudEFzc2VydGlvbihcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXZlbG9wZXJQcm92aWRlZENsaWVudEFzc2VydGlvbixcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aC5jbGllbnRJZCxcbiAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXR5LnRva2VuRW5kcG9pbnRcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIHRoaXMuY2xpZW50QXNzZXJ0aW9uICYmIHtcbiAgICAgICAgICAgICAgICBhc3NlcnRpb246IHRoaXMuY2xpZW50QXNzZXJ0aW9uLmdldEp3dChcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jcnlwdG9Qcm92aWRlcixcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aC5jbGllbnRJZCxcbiAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXR5LnRva2VuRW5kcG9pbnRcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIGFzc2VydGlvblR5cGU6IE5vZGVDb25zdGFudHMuSldUX0JFQVJFUl9BU1NFUlRJT05fVFlQRSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgYSByZXF1ZXN0IHdpdGggdGhlIGRlZmF1bHQgc2NvcGVzICYgZ2VuZXJhdGVzIGEgY29ycmVsYXRpb25JZC5cbiAgICAgKiBAcGFyYW0gYXV0aFJlcXVlc3QgLSBCYXNlQXV0aFJlcXVlc3QgZm9yIGluaXRpYWxpemF0aW9uXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGFzeW5jIGluaXRpYWxpemVCYXNlUmVxdWVzdChcbiAgICAgICAgYXV0aFJlcXVlc3Q6IFBhcnRpYWw8QmFzZUF1dGhSZXF1ZXN0PlxuICAgICk6IFByb21pc2U8QmFzZUF1dGhSZXF1ZXN0PiB7XG4gICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICBcImluaXRpYWxpemVSZXF1ZXN0U2NvcGVzIGNhbGxlZFwiLFxuICAgICAgICAgICAgYXV0aFJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuICAgICAgICAvLyBEZWZhdWx0IGF1dGhlbnRpY2F0aW9uU2NoZW1lIHRvIEJlYXJlciwgbG9nIHRoYXQgUE9QIGlzbid0IHN1cHBvcnRlZCB5ZXRcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgYXV0aFJlcXVlc3QuYXV0aGVudGljYXRpb25TY2hlbWUgJiZcbiAgICAgICAgICAgIGF1dGhSZXF1ZXN0LmF1dGhlbnRpY2F0aW9uU2NoZW1lID09PSBBdXRoZW50aWNhdGlvblNjaGVtZS5QT1BcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFxuICAgICAgICAgICAgICAgIFwiQXV0aGVudGljYXRpb24gU2NoZW1lICdwb3AnIGlzIG5vdCBzdXBwb3J0ZWQgeWV0LCBzZXR0aW5nIEF1dGhlbnRpY2F0aW9uIFNjaGVtZSB0byAnQmVhcmVyJyBmb3IgcmVxdWVzdFwiLFxuICAgICAgICAgICAgICAgIGF1dGhSZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBhdXRoUmVxdWVzdC5hdXRoZW50aWNhdGlvblNjaGVtZSA9IEF1dGhlbnRpY2F0aW9uU2NoZW1lLkJFQVJFUjtcblxuICAgICAgICAvLyBTZXQgcmVxdWVzdGVkIGNsYWltcyBoYXNoIGlmIGNsYWltcy1iYXNlZCBjYWNoaW5nIGlzIGVuYWJsZWQgYW5kIGNsYWltcyB3ZXJlIHJlcXVlc3RlZFxuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5jYWNoZS5jbGFpbXNCYXNlZENhY2hpbmdFbmFibGVkICYmXG4gICAgICAgICAgICBhdXRoUmVxdWVzdC5jbGFpbXMgJiZcbiAgICAgICAgICAgIC8vIENoZWNrcyBmb3IgZW1wdHkgc3RyaW5naWZpZWQgb2JqZWN0IFwie31cIiB3aGljaCBkb2Vzbid0IHF1YWxpZnkgYXMgcmVxdWVzdGVkIGNsYWltc1xuICAgICAgICAgICAgIVN0cmluZ1V0aWxzLmlzRW1wdHlPYmooYXV0aFJlcXVlc3QuY2xhaW1zKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGF1dGhSZXF1ZXN0LnJlcXVlc3RlZENsYWltc0hhc2ggPVxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY3J5cHRvUHJvdmlkZXIuaGFzaFN0cmluZyhhdXRoUmVxdWVzdC5jbGFpbXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmF1dGhSZXF1ZXN0LFxuICAgICAgICAgICAgc2NvcGVzOiBbXG4gICAgICAgICAgICAgICAgLi4uKChhdXRoUmVxdWVzdCAmJiBhdXRoUmVxdWVzdC5zY29wZXMpIHx8IFtdKSxcbiAgICAgICAgICAgICAgICAuLi5PSURDX0RFRkFVTFRfU0NPUEVTLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGNvcnJlbGF0aW9uSWQ6XG4gICAgICAgICAgICAgICAgKGF1dGhSZXF1ZXN0ICYmIGF1dGhSZXF1ZXN0LmNvcnJlbGF0aW9uSWQpIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5jcnlwdG9Qcm92aWRlci5jcmVhdGVOZXdHdWlkKCksXG4gICAgICAgICAgICBhdXRob3JpdHk6IGF1dGhSZXF1ZXN0LmF1dGhvcml0eSB8fCB0aGlzLmNvbmZpZy5hdXRoLmF1dGhvcml0eSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyB0aGUgc2VydmVyIHRlbGVtZXRyeSBwYXlsb2FkXG4gICAgICogQHBhcmFtIGFwaUlkIC0gSWQgZm9yIGEgc3BlY2lmaWMgcmVxdWVzdFxuICAgICAqIEBwYXJhbSBjb3JyZWxhdGlvbklkIC0gR1VJRFxuICAgICAqIEBwYXJhbSBmb3JjZVJlZnJlc2ggLSBib29sZWFuIHRvIGluZGljYXRlIG5ldHdvcmsgY2FsbFxuICAgICAqL1xuICAgIHByb3RlY3RlZCBpbml0aWFsaXplU2VydmVyVGVsZW1ldHJ5TWFuYWdlcihcbiAgICAgICAgYXBpSWQ6IG51bWJlcixcbiAgICAgICAgY29ycmVsYXRpb25JZDogc3RyaW5nLFxuICAgICAgICBmb3JjZVJlZnJlc2g/OiBib29sZWFuXG4gICAgKTogU2VydmVyVGVsZW1ldHJ5TWFuYWdlciB7XG4gICAgICAgIGNvbnN0IHRlbGVtZXRyeVBheWxvYWQ6IFNlcnZlclRlbGVtZXRyeVJlcXVlc3QgPSB7XG4gICAgICAgICAgICBjbGllbnRJZDogdGhpcy5jb25maWcuYXV0aC5jbGllbnRJZCxcbiAgICAgICAgICAgIGNvcnJlbGF0aW9uSWQ6IGNvcnJlbGF0aW9uSWQsXG4gICAgICAgICAgICBhcGlJZDogYXBpSWQsXG4gICAgICAgICAgICBmb3JjZVJlZnJlc2g6IGZvcmNlUmVmcmVzaCB8fCBmYWxzZSxcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gbmV3IFNlcnZlclRlbGVtZXRyeU1hbmFnZXIodGVsZW1ldHJ5UGF5bG9hZCwgdGhpcy5zdG9yYWdlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYXV0aG9yaXR5IGluc3RhbmNlLiBJZiBhdXRob3JpdHkgbm90IHBhc3NlZCBpbiByZXF1ZXN0LCBkZWZhdWx0IHRvIGF1dGhvcml0eSBzZXQgb24gdGhlIGFwcGxpY2F0aW9uXG4gICAgICogb2JqZWN0LiBJZiBubyBhdXRob3JpdHkgc2V0IGluIGFwcGxpY2F0aW9uIG9iamVjdCwgdGhlbiBkZWZhdWx0IHRvIGNvbW1vbiBhdXRob3JpdHkuXG4gICAgICogQHBhcmFtIGF1dGhvcml0eVN0cmluZyAtIGF1dGhvcml0eSBmcm9tIHVzZXIgY29uZmlndXJhdGlvblxuICAgICAqL1xuICAgIHByb3RlY3RlZCBhc3luYyBjcmVhdGVBdXRob3JpdHkoXG4gICAgICAgIGF1dGhvcml0eVN0cmluZzogc3RyaW5nLFxuICAgICAgICByZXF1ZXN0Q29ycmVsYXRpb25JZDogc3RyaW5nLFxuICAgICAgICBhenVyZVJlZ2lvbkNvbmZpZ3VyYXRpb24/OiBBenVyZVJlZ2lvbkNvbmZpZ3VyYXRpb24sXG4gICAgICAgIGF6dXJlQ2xvdWRPcHRpb25zPzogQXp1cmVDbG91ZE9wdGlvbnNcbiAgICApOiBQcm9taXNlPEF1dGhvcml0eT4ge1xuICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFwiY3JlYXRlQXV0aG9yaXR5IGNhbGxlZFwiLCByZXF1ZXN0Q29ycmVsYXRpb25JZCk7XG5cbiAgICAgICAgLy8gYnVpbGQgYXV0aG9yaXR5IHN0cmluZyBiYXNlZCBvbiBhdXRoIHBhcmFtcyAtIGF6dXJlQ2xvdWRJbnN0YW5jZSBpcyBwcmlvcml0aXplZCBpZiBwcm92aWRlZFxuICAgICAgICBjb25zdCBhdXRob3JpdHlVcmwgPSBBdXRob3JpdHkuZ2VuZXJhdGVBdXRob3JpdHkoXG4gICAgICAgICAgICBhdXRob3JpdHlTdHJpbmcsXG4gICAgICAgICAgICBhenVyZUNsb3VkT3B0aW9ucyB8fCB0aGlzLmNvbmZpZy5hdXRoLmF6dXJlQ2xvdWRPcHRpb25zXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgYXV0aG9yaXR5T3B0aW9uczogQXV0aG9yaXR5T3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHByb3RvY29sTW9kZTogdGhpcy5jb25maWcuYXV0aC5wcm90b2NvbE1vZGUsXG4gICAgICAgICAgICBrbm93bkF1dGhvcml0aWVzOiB0aGlzLmNvbmZpZy5hdXRoLmtub3duQXV0aG9yaXRpZXMsXG4gICAgICAgICAgICBjbG91ZERpc2NvdmVyeU1ldGFkYXRhOiB0aGlzLmNvbmZpZy5hdXRoLmNsb3VkRGlzY292ZXJ5TWV0YWRhdGEsXG4gICAgICAgICAgICBhdXRob3JpdHlNZXRhZGF0YTogdGhpcy5jb25maWcuYXV0aC5hdXRob3JpdHlNZXRhZGF0YSxcbiAgICAgICAgICAgIGF6dXJlUmVnaW9uQ29uZmlndXJhdGlvbixcbiAgICAgICAgICAgIHNraXBBdXRob3JpdHlNZXRhZGF0YUNhY2hlOlxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmF1dGguc2tpcEF1dGhvcml0eU1ldGFkYXRhQ2FjaGUsXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIEF1dGhvcml0eUZhY3RvcnkuY3JlYXRlRGlzY292ZXJlZEluc3RhbmNlKFxuICAgICAgICAgICAgYXV0aG9yaXR5VXJsLFxuICAgICAgICAgICAgdGhpcy5jb25maWcuc3lzdGVtLm5ldHdvcmtDbGllbnQsXG4gICAgICAgICAgICB0aGlzLnN0b3JhZ2UsXG4gICAgICAgICAgICBhdXRob3JpdHlPcHRpb25zLFxuICAgICAgICAgICAgdGhpcy5sb2dnZXIsXG4gICAgICAgICAgICByZXF1ZXN0Q29ycmVsYXRpb25JZFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsZWFyIHRoZSBjYWNoZVxuICAgICAqL1xuICAgIGNsZWFyQ2FjaGUoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc3RvcmFnZS5jbGVhcigpO1xuICAgIH1cbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgICBBY2Nlc3NUb2tlbkVudGl0eSxcbiAgICBBdXRoZW50aWNhdGlvblJlc3VsdCxcbiAgICBBdXRoZW50aWNhdGlvblNjaGVtZSxcbiAgICBBdXRob3JpdHksXG4gICAgQmFzZUNsaWVudCxcbiAgICBDYWNoZU1hbmFnZXIsXG4gICAgQ2FjaGVPdXRjb21lLFxuICAgIENsaWVudEF1dGhFcnJvckNvZGVzLFxuICAgIENsaWVudENvbmZpZ3VyYXRpb24sXG4gICAgQ29tbW9uQ2xpZW50Q3JlZGVudGlhbFJlcXVlc3QsXG4gICAgQ29uc3RhbnRzLFxuICAgIENyZWRlbnRpYWxGaWx0ZXIsXG4gICAgQ3JlZGVudGlhbFR5cGUsXG4gICAgREVGQVVMVF9UT0tFTl9SRU5FV0FMX09GRlNFVF9TRUMsXG4gICAgR3JhbnRUeXBlLFxuICAgIElBcHBUb2tlblByb3ZpZGVyLFxuICAgIElDcnlwdG8sXG4gICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIsXG4gICAgUmVxdWVzdFRodW1icHJpbnQsXG4gICAgUmVzcG9uc2VIYW5kbGVyLFxuICAgIFNjb3BlU2V0LFxuICAgIFNlcnZlckF1dGhvcml6YXRpb25Ub2tlblJlc3BvbnNlLFxuICAgIFNlcnZlclRlbGVtZXRyeU1hbmFnZXIsXG4gICAgU3RyaW5nVXRpbHMsXG4gICAgVGltZVV0aWxzLFxuICAgIFRva2VuQ2FjaGVDb250ZXh0LFxuICAgIFVybFN0cmluZyxcbiAgICBjcmVhdGVDbGllbnRBdXRoRXJyb3IsXG4gICAgQ2xpZW50QXNzZXJ0aW9uLFxuICAgIGdldENsaWVudEFzc2VydGlvbixcbiAgICBVcmxVdGlscyxcbn0gZnJvbSBcIkBhenVyZS9tc2FsLWNvbW1vbi9ub2RlXCI7XG5pbXBvcnQge1xuICAgIE1hbmFnZWRJZGVudGl0eUNvbmZpZ3VyYXRpb24sXG4gICAgTWFuYWdlZElkZW50aXR5Tm9kZUNvbmZpZ3VyYXRpb24sXG59IGZyb20gXCIuLi9jb25maWcvQ29uZmlndXJhdGlvbi5qc1wiO1xuXG4vKipcbiAqIE9BdXRoMi4wIGNsaWVudCBjcmVkZW50aWFsIGdyYW50XG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBDbGllbnRDcmVkZW50aWFsQ2xpZW50IGV4dGVuZHMgQmFzZUNsaWVudCB7XG4gICAgcHJpdmF0ZSByZWFkb25seSBhcHBUb2tlblByb3ZpZGVyPzogSUFwcFRva2VuUHJvdmlkZXI7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgY29uZmlndXJhdGlvbjogQ2xpZW50Q29uZmlndXJhdGlvbixcbiAgICAgICAgYXBwVG9rZW5Qcm92aWRlcj86IElBcHBUb2tlblByb3ZpZGVyXG4gICAgKSB7XG4gICAgICAgIHN1cGVyKGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICB0aGlzLmFwcFRva2VuUHJvdmlkZXIgPSBhcHBUb2tlblByb3ZpZGVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFB1YmxpYyBBUEkgdG8gYWNxdWlyZSBhIHRva2VuIHdpdGggQ2xpZW50Q3JlZGVudGlhbCBGbG93IGZvciBDb25maWRlbnRpYWwgY2xpZW50c1xuICAgICAqIEBwYXJhbSByZXF1ZXN0IC0gQ29tbW9uQ2xpZW50Q3JlZGVudGlhbFJlcXVlc3QgcHJvdmlkZWQgYnkgdGhlIGRldmVsb3BlclxuICAgICAqL1xuICAgIHB1YmxpYyBhc3luYyBhY3F1aXJlVG9rZW4oXG4gICAgICAgIHJlcXVlc3Q6IENvbW1vbkNsaWVudENyZWRlbnRpYWxSZXF1ZXN0XG4gICAgKTogUHJvbWlzZTxBdXRoZW50aWNhdGlvblJlc3VsdCB8IG51bGw+IHtcbiAgICAgICAgaWYgKHJlcXVlc3Quc2tpcENhY2hlIHx8IHJlcXVlc3QuY2xhaW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5leGVjdXRlVG9rZW5SZXF1ZXN0KHJlcXVlc3QsIHRoaXMuYXV0aG9yaXR5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IFtjYWNoZWRBdXRoZW50aWNhdGlvblJlc3VsdCwgbGFzdENhY2hlT3V0Y29tZV0gPVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5nZXRDYWNoZWRBdXRoZW50aWNhdGlvblJlc3VsdChcbiAgICAgICAgICAgICAgICByZXF1ZXN0LFxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLFxuICAgICAgICAgICAgICAgIHRoaXMuY3J5cHRvVXRpbHMsXG4gICAgICAgICAgICAgICAgdGhpcy5hdXRob3JpdHksXG4gICAgICAgICAgICAgICAgdGhpcy5jYWNoZU1hbmFnZXIsXG4gICAgICAgICAgICAgICAgdGhpcy5zZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIGlmIChjYWNoZWRBdXRoZW50aWNhdGlvblJlc3VsdCkge1xuICAgICAgICAgICAgLy8gaWYgdGhlIHRva2VuIGlzIG5vdCBleHBpcmVkIGJ1dCBtdXN0IGJlIHJlZnJlc2hlZDsgZ2V0IGEgbmV3IG9uZSBpbiB0aGUgYmFja2dyb3VuZFxuICAgICAgICAgICAgaWYgKGxhc3RDYWNoZU91dGNvbWUgPT09IENhY2hlT3V0Y29tZS5QUk9BQ1RJVkVMWV9SRUZSRVNIRUQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgICAgICAgICBcIkNsaWVudENyZWRlbnRpYWxDbGllbnQ6Z2V0Q2FjaGVkQXV0aGVudGljYXRpb25SZXN1bHQgLSBDYWNoZWQgYWNjZXNzIHRva2VuJ3MgcmVmcmVzaE9uIHByb3BlcnR5IGhhcyBiZWVuIGV4Y2VlZGVkJy4gSXQncyBub3QgZXhwaXJlZCwgYnV0IG11c3QgYmUgcmVmcmVzaGVkLlwiXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIC8vIHJlZnJlc2ggdGhlIGFjY2VzcyB0b2tlbiBpbiB0aGUgYmFja2dyb3VuZFxuICAgICAgICAgICAgICAgIGNvbnN0IHJlZnJlc2hBY2Nlc3NUb2tlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5leGVjdXRlVG9rZW5SZXF1ZXN0KFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmF1dGhvcml0eSxcbiAgICAgICAgICAgICAgICAgICAgcmVmcmVzaEFjY2Vzc1Rva2VuXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gcmV0dXJuIHRoZSBjYWNoZWQgdG9rZW5cbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRBdXRoZW50aWNhdGlvblJlc3VsdDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4ZWN1dGVUb2tlblJlcXVlc3QocmVxdWVzdCwgdGhpcy5hdXRob3JpdHkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogbG9va3MgdXAgY2FjaGUgaWYgdGhlIHRva2VucyBhcmUgY2FjaGVkIGFscmVhZHlcbiAgICAgKi9cbiAgICBwdWJsaWMgYXN5bmMgZ2V0Q2FjaGVkQXV0aGVudGljYXRpb25SZXN1bHQoXG4gICAgICAgIHJlcXVlc3Q6IENvbW1vbkNsaWVudENyZWRlbnRpYWxSZXF1ZXN0LFxuICAgICAgICBjb25maWc6IENsaWVudENvbmZpZ3VyYXRpb24gfCBNYW5hZ2VkSWRlbnRpdHlDb25maWd1cmF0aW9uLFxuICAgICAgICBjcnlwdG9VdGlsczogSUNyeXB0byxcbiAgICAgICAgYXV0aG9yaXR5OiBBdXRob3JpdHksXG4gICAgICAgIGNhY2hlTWFuYWdlcjogQ2FjaGVNYW5hZ2VyLFxuICAgICAgICBzZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyPzogU2VydmVyVGVsZW1ldHJ5TWFuYWdlciB8IG51bGxcbiAgICApOiBQcm9taXNlPFtBdXRoZW50aWNhdGlvblJlc3VsdCB8IG51bGwsIENhY2hlT3V0Y29tZV0+IHtcbiAgICAgICAgY29uc3QgY2xpZW50Q29uZmlndXJhdGlvbiA9IGNvbmZpZyBhcyBDbGllbnRDb25maWd1cmF0aW9uO1xuICAgICAgICBjb25zdCBtYW5hZ2VkSWRlbnRpdHlDb25maWd1cmF0aW9uID1cbiAgICAgICAgICAgIGNvbmZpZyBhcyBNYW5hZ2VkSWRlbnRpdHlOb2RlQ29uZmlndXJhdGlvbjtcblxuICAgICAgICBsZXQgbGFzdENhY2hlT3V0Y29tZTogQ2FjaGVPdXRjb21lID0gQ2FjaGVPdXRjb21lLk5PVF9BUFBMSUNBQkxFO1xuXG4gICAgICAgIC8vIHJlYWQgdGhlIHVzZXItc3VwcGxpZWQgY2FjaGUgaW50byBtZW1vcnksIGlmIGFwcGxpY2FibGVcbiAgICAgICAgbGV0IGNhY2hlQ29udGV4dDtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgY2xpZW50Q29uZmlndXJhdGlvbi5zZXJpYWxpemFibGVDYWNoZSAmJlxuICAgICAgICAgICAgY2xpZW50Q29uZmlndXJhdGlvbi5wZXJzaXN0ZW5jZVBsdWdpblxuICAgICAgICApIHtcbiAgICAgICAgICAgIGNhY2hlQ29udGV4dCA9IG5ldyBUb2tlbkNhY2hlQ29udGV4dChcbiAgICAgICAgICAgICAgICBjbGllbnRDb25maWd1cmF0aW9uLnNlcmlhbGl6YWJsZUNhY2hlLFxuICAgICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgYXdhaXQgY2xpZW50Q29uZmlndXJhdGlvbi5wZXJzaXN0ZW5jZVBsdWdpbi5iZWZvcmVDYWNoZUFjY2VzcyhcbiAgICAgICAgICAgICAgICBjYWNoZUNvbnRleHRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjYWNoZWRBY2Nlc3NUb2tlbiA9IHRoaXMucmVhZEFjY2Vzc1Rva2VuRnJvbUNhY2hlKFxuICAgICAgICAgICAgYXV0aG9yaXR5LFxuICAgICAgICAgICAgbWFuYWdlZElkZW50aXR5Q29uZmlndXJhdGlvbi5tYW5hZ2VkSWRlbnRpdHlJZD8uaWQgfHxcbiAgICAgICAgICAgICAgICBjbGllbnRDb25maWd1cmF0aW9uLmF1dGhPcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgICAgbmV3IFNjb3BlU2V0KHJlcXVlc3Quc2NvcGVzIHx8IFtdKSxcbiAgICAgICAgICAgIGNhY2hlTWFuYWdlclxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGNsaWVudENvbmZpZ3VyYXRpb24uc2VyaWFsaXphYmxlQ2FjaGUgJiZcbiAgICAgICAgICAgIGNsaWVudENvbmZpZ3VyYXRpb24ucGVyc2lzdGVuY2VQbHVnaW4gJiZcbiAgICAgICAgICAgIGNhY2hlQ29udGV4dFxuICAgICAgICApIHtcbiAgICAgICAgICAgIGF3YWl0IGNsaWVudENvbmZpZ3VyYXRpb24ucGVyc2lzdGVuY2VQbHVnaW4uYWZ0ZXJDYWNoZUFjY2VzcyhcbiAgICAgICAgICAgICAgICBjYWNoZUNvbnRleHRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtdXN0IHJlZnJlc2ggZHVlIHRvIG5vbi1leGlzdGVudCBhY2Nlc3NfdG9rZW5cbiAgICAgICAgaWYgKCFjYWNoZWRBY2Nlc3NUb2tlbikge1xuICAgICAgICAgICAgc2VydmVyVGVsZW1ldHJ5TWFuYWdlcj8uc2V0Q2FjaGVPdXRjb21lKFxuICAgICAgICAgICAgICAgIENhY2hlT3V0Y29tZS5OT19DQUNIRURfQUNDRVNTX1RPS0VOXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmV0dXJuIFtudWxsLCBDYWNoZU91dGNvbWUuTk9fQ0FDSEVEX0FDQ0VTU19UT0tFTl07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtdXN0IHJlZnJlc2ggZHVlIHRvIHRoZSBleHBpcmVzX2luIHZhbHVlXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIFRpbWVVdGlscy5pc1Rva2VuRXhwaXJlZChcbiAgICAgICAgICAgICAgICBjYWNoZWRBY2Nlc3NUb2tlbi5leHBpcmVzT24sXG4gICAgICAgICAgICAgICAgY2xpZW50Q29uZmlndXJhdGlvbi5zeXN0ZW1PcHRpb25zPy50b2tlblJlbmV3YWxPZmZzZXRTZWNvbmRzIHx8XG4gICAgICAgICAgICAgICAgICAgIERFRkFVTFRfVE9LRU5fUkVORVdBTF9PRkZTRVRfU0VDXG4gICAgICAgICAgICApXG4gICAgICAgICkge1xuICAgICAgICAgICAgc2VydmVyVGVsZW1ldHJ5TWFuYWdlcj8uc2V0Q2FjaGVPdXRjb21lKFxuICAgICAgICAgICAgICAgIENhY2hlT3V0Y29tZS5DQUNIRURfQUNDRVNTX1RPS0VOX0VYUElSRURcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm4gW251bGwsIENhY2hlT3V0Y29tZS5DQUNIRURfQUNDRVNTX1RPS0VOX0VYUElSRURdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbXVzdCByZWZyZXNoIChpbiB0aGUgYmFja2dyb3VuZCkgZHVlIHRvIHRoZSByZWZyZXNoX2luIHZhbHVlXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGNhY2hlZEFjY2Vzc1Rva2VuLnJlZnJlc2hPbiAmJlxuICAgICAgICAgICAgVGltZVV0aWxzLmlzVG9rZW5FeHBpcmVkKGNhY2hlZEFjY2Vzc1Rva2VuLnJlZnJlc2hPbi50b1N0cmluZygpLCAwKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGxhc3RDYWNoZU91dGNvbWUgPSBDYWNoZU91dGNvbWUuUFJPQUNUSVZFTFlfUkVGUkVTSEVEO1xuICAgICAgICAgICAgc2VydmVyVGVsZW1ldHJ5TWFuYWdlcj8uc2V0Q2FjaGVPdXRjb21lKFxuICAgICAgICAgICAgICAgIENhY2hlT3V0Y29tZS5QUk9BQ1RJVkVMWV9SRUZSRVNIRURcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgYXdhaXQgUmVzcG9uc2VIYW5kbGVyLmdlbmVyYXRlQXV0aGVudGljYXRpb25SZXN1bHQoXG4gICAgICAgICAgICAgICAgY3J5cHRvVXRpbHMsXG4gICAgICAgICAgICAgICAgYXV0aG9yaXR5LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgaWRUb2tlbjogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IGNhY2hlZEFjY2Vzc1Rva2VuLFxuICAgICAgICAgICAgICAgICAgICByZWZyZXNoVG9rZW46IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGFwcE1ldGFkYXRhOiBudWxsLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICByZXF1ZXN0XG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgbGFzdENhY2hlT3V0Y29tZSxcbiAgICAgICAgXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWFkcyBhY2Nlc3MgdG9rZW4gZnJvbSB0aGUgY2FjaGVcbiAgICAgKi9cbiAgICBwcml2YXRlIHJlYWRBY2Nlc3NUb2tlbkZyb21DYWNoZShcbiAgICAgICAgYXV0aG9yaXR5OiBBdXRob3JpdHksXG4gICAgICAgIGlkOiBzdHJpbmcsXG4gICAgICAgIHNjb3BlU2V0OiBTY29wZVNldCxcbiAgICAgICAgY2FjaGVNYW5hZ2VyOiBDYWNoZU1hbmFnZXJcbiAgICApOiBBY2Nlc3NUb2tlbkVudGl0eSB8IG51bGwge1xuICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbkZpbHRlcjogQ3JlZGVudGlhbEZpbHRlciA9IHtcbiAgICAgICAgICAgIGhvbWVBY2NvdW50SWQ6IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgICAgICAgICBlbnZpcm9ubWVudDpcbiAgICAgICAgICAgICAgICBhdXRob3JpdHkuY2Fub25pY2FsQXV0aG9yaXR5VXJsQ29tcG9uZW50cy5Ib3N0TmFtZUFuZFBvcnQsXG4gICAgICAgICAgICBjcmVkZW50aWFsVHlwZTogQ3JlZGVudGlhbFR5cGUuQUNDRVNTX1RPS0VOLFxuICAgICAgICAgICAgY2xpZW50SWQ6IGlkLFxuICAgICAgICAgICAgcmVhbG06IGF1dGhvcml0eS50ZW5hbnQsXG4gICAgICAgICAgICB0YXJnZXQ6IFNjb3BlU2V0LmNyZWF0ZVNlYXJjaFNjb3BlcyhzY29wZVNldC5hc0FycmF5KCkpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VucyA9XG4gICAgICAgICAgICBjYWNoZU1hbmFnZXIuZ2V0QWNjZXNzVG9rZW5zQnlGaWx0ZXIoYWNjZXNzVG9rZW5GaWx0ZXIpO1xuICAgICAgICBpZiAoYWNjZXNzVG9rZW5zLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9IGVsc2UgaWYgKGFjY2Vzc1Rva2Vucy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMubXVsdGlwbGVNYXRjaGluZ1Rva2Vuc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWNjZXNzVG9rZW5zWzBdIGFzIEFjY2Vzc1Rva2VuRW50aXR5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1ha2VzIGEgbmV0d29yayBjYWxsIHRvIHJlcXVlc3QgdGhlIHRva2VuIGZyb20gdGhlIHNlcnZpY2VcbiAgICAgKiBAcGFyYW0gcmVxdWVzdCAtIENvbW1vbkNsaWVudENyZWRlbnRpYWxSZXF1ZXN0IHByb3ZpZGVkIGJ5IHRoZSBkZXZlbG9wZXJcbiAgICAgKiBAcGFyYW0gYXV0aG9yaXR5IC0gYXV0aG9yaXR5IG9iamVjdFxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgZXhlY3V0ZVRva2VuUmVxdWVzdChcbiAgICAgICAgcmVxdWVzdDogQ29tbW9uQ2xpZW50Q3JlZGVudGlhbFJlcXVlc3QsXG4gICAgICAgIGF1dGhvcml0eTogQXV0aG9yaXR5LFxuICAgICAgICByZWZyZXNoQWNjZXNzVG9rZW4/OiBib29sZWFuXG4gICAgKTogUHJvbWlzZTxBdXRoZW50aWNhdGlvblJlc3VsdCB8IG51bGw+IHtcbiAgICAgICAgbGV0IHNlcnZlclRva2VuUmVzcG9uc2U6IFNlcnZlckF1dGhvcml6YXRpb25Ub2tlblJlc3BvbnNlO1xuICAgICAgICBsZXQgcmVxVGltZXN0YW1wOiBudW1iZXI7XG5cbiAgICAgICAgaWYgKHRoaXMuYXBwVG9rZW5Qcm92aWRlcikge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcIlVzaW5nIGFwcFRva2VuUHJvdmlkZXIgZXh0ZW5zaWJpbGl0eS5cIik7XG5cbiAgICAgICAgICAgIGNvbnN0IGFwcFRva2VuUHJvcHZpZGVyUGFyYW1ldGVycyA9IHtcbiAgICAgICAgICAgICAgICBjb3JyZWxhdGlvbklkOiByZXF1ZXN0LmNvcnJlbGF0aW9uSWQsXG4gICAgICAgICAgICAgICAgdGVuYW50SWQ6IHRoaXMuY29uZmlnLmF1dGhPcHRpb25zLmF1dGhvcml0eS50ZW5hbnQsXG4gICAgICAgICAgICAgICAgc2NvcGVzOiByZXF1ZXN0LnNjb3BlcyxcbiAgICAgICAgICAgICAgICBjbGFpbXM6IHJlcXVlc3QuY2xhaW1zLFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmVxVGltZXN0YW1wID0gVGltZVV0aWxzLm5vd1NlY29uZHMoKTtcbiAgICAgICAgICAgIGNvbnN0IGFwcFRva2VuUHJvdmlkZXJSZXN1bHQgPSBhd2FpdCB0aGlzLmFwcFRva2VuUHJvdmlkZXIoXG4gICAgICAgICAgICAgICAgYXBwVG9rZW5Qcm9wdmlkZXJQYXJhbWV0ZXJzXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBzZXJ2ZXJUb2tlblJlc3BvbnNlID0ge1xuICAgICAgICAgICAgICAgIGFjY2Vzc190b2tlbjogYXBwVG9rZW5Qcm92aWRlclJlc3VsdC5hY2Nlc3NUb2tlbixcbiAgICAgICAgICAgICAgICBleHBpcmVzX2luOiBhcHBUb2tlblByb3ZpZGVyUmVzdWx0LmV4cGlyZXNJblNlY29uZHMsXG4gICAgICAgICAgICAgICAgcmVmcmVzaF9pbjogYXBwVG9rZW5Qcm92aWRlclJlc3VsdC5yZWZyZXNoSW5TZWNvbmRzLFxuICAgICAgICAgICAgICAgIHRva2VuX3R5cGU6IEF1dGhlbnRpY2F0aW9uU2NoZW1lLkJFQVJFUixcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnNTdHJpbmcgPVxuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlVG9rZW5RdWVyeVBhcmFtZXRlcnMocmVxdWVzdCk7XG4gICAgICAgICAgICBjb25zdCBlbmRwb2ludCA9IFVybFN0cmluZy5hcHBlbmRRdWVyeVN0cmluZyhcbiAgICAgICAgICAgICAgICBhdXRob3JpdHkudG9rZW5FbmRwb2ludCxcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNTdHJpbmdcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0gYXdhaXQgdGhpcy5jcmVhdGVUb2tlblJlcXVlc3RCb2R5KHJlcXVlc3QpO1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVUb2tlblJlcXVlc3RIZWFkZXJzKCk7XG4gICAgICAgICAgICBjb25zdCB0aHVtYnByaW50OiBSZXF1ZXN0VGh1bWJwcmludCA9IHtcbiAgICAgICAgICAgICAgICBjbGllbnRJZDogdGhpcy5jb25maWcuYXV0aE9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgYXV0aG9yaXR5OiByZXF1ZXN0LmF1dGhvcml0eSxcbiAgICAgICAgICAgICAgICBzY29wZXM6IHJlcXVlc3Quc2NvcGVzLFxuICAgICAgICAgICAgICAgIGNsYWltczogcmVxdWVzdC5jbGFpbXMsXG4gICAgICAgICAgICAgICAgYXV0aGVudGljYXRpb25TY2hlbWU6IHJlcXVlc3QuYXV0aGVudGljYXRpb25TY2hlbWUsXG4gICAgICAgICAgICAgICAgcmVzb3VyY2VSZXF1ZXN0TWV0aG9kOiByZXF1ZXN0LnJlc291cmNlUmVxdWVzdE1ldGhvZCxcbiAgICAgICAgICAgICAgICByZXNvdXJjZVJlcXVlc3RVcmk6IHJlcXVlc3QucmVzb3VyY2VSZXF1ZXN0VXJpLFxuICAgICAgICAgICAgICAgIHNockNsYWltczogcmVxdWVzdC5zaHJDbGFpbXMsXG4gICAgICAgICAgICAgICAgc3NoS2lkOiByZXF1ZXN0LnNzaEtpZCxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXG4gICAgICAgICAgICAgICAgXCJTZW5kaW5nIHRva2VuIHJlcXVlc3QgdG8gZW5kcG9pbnQ6IFwiICsgYXV0aG9yaXR5LnRva2VuRW5kcG9pbnRcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHJlcVRpbWVzdGFtcCA9IFRpbWVVdGlscy5ub3dTZWNvbmRzKCk7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZXhlY3V0ZVBvc3RUb1Rva2VuRW5kcG9pbnQoXG4gICAgICAgICAgICAgICAgZW5kcG9pbnQsXG4gICAgICAgICAgICAgICAgcmVxdWVzdEJvZHksXG4gICAgICAgICAgICAgICAgaGVhZGVycyxcbiAgICAgICAgICAgICAgICB0aHVtYnByaW50LFxuICAgICAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgc2VydmVyVG9rZW5SZXNwb25zZSA9IHJlc3BvbnNlLmJvZHk7XG4gICAgICAgICAgICBzZXJ2ZXJUb2tlblJlc3BvbnNlLnN0YXR1cyA9IHJlc3BvbnNlLnN0YXR1cztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlSGFuZGxlciA9IG5ldyBSZXNwb25zZUhhbmRsZXIoXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICAgIHRoaXMuY2FjaGVNYW5hZ2VyLFxuICAgICAgICAgICAgdGhpcy5jcnlwdG9VdGlscyxcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLFxuICAgICAgICAgICAgdGhpcy5jb25maWcuc2VyaWFsaXphYmxlQ2FjaGUsXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5wZXJzaXN0ZW5jZVBsdWdpblxuICAgICAgICApO1xuXG4gICAgICAgIHJlc3BvbnNlSGFuZGxlci52YWxpZGF0ZVRva2VuUmVzcG9uc2UoXG4gICAgICAgICAgICBzZXJ2ZXJUb2tlblJlc3BvbnNlLFxuICAgICAgICAgICAgcmVmcmVzaEFjY2Vzc1Rva2VuXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgdG9rZW5SZXNwb25zZSA9IGF3YWl0IHJlc3BvbnNlSGFuZGxlci5oYW5kbGVTZXJ2ZXJUb2tlblJlc3BvbnNlKFxuICAgICAgICAgICAgc2VydmVyVG9rZW5SZXNwb25zZSxcbiAgICAgICAgICAgIHRoaXMuYXV0aG9yaXR5LFxuICAgICAgICAgICAgcmVxVGltZXN0YW1wLFxuICAgICAgICAgICAgcmVxdWVzdFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiB0b2tlblJlc3BvbnNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGdlbmVyYXRlIHRoZSByZXF1ZXN0IHRvIHRoZSBzZXJ2ZXIgaW4gdGhlIGFjY2VwdGFibGUgZm9ybWF0XG4gICAgICogQHBhcmFtIHJlcXVlc3QgLSBDb21tb25DbGllbnRDcmVkZW50aWFsUmVxdWVzdCBwcm92aWRlZCBieSB0aGUgZGV2ZWxvcGVyXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBjcmVhdGVUb2tlblJlcXVlc3RCb2R5KFxuICAgICAgICByZXF1ZXN0OiBDb21tb25DbGllbnRDcmVkZW50aWFsUmVxdWVzdFxuICAgICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSBuZXcgTWFwPHN0cmluZywgc3RyaW5nPigpO1xuXG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudElkKFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmF1dGhPcHRpb25zLmNsaWVudElkXG4gICAgICAgICk7XG5cbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkU2NvcGVzKHBhcmFtZXRlcnMsIHJlcXVlc3Quc2NvcGVzLCBmYWxzZSk7XG5cbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkR3JhbnRUeXBlKFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIEdyYW50VHlwZS5DTElFTlRfQ1JFREVOVElBTFNfR1JBTlRcbiAgICAgICAgKTtcblxuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRMaWJyYXJ5SW5mbyhcbiAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5saWJyYXJ5SW5mb1xuICAgICAgICApO1xuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRBcHBsaWNhdGlvblRlbGVtZXRyeShcbiAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy50ZWxlbWV0cnkuYXBwbGljYXRpb25cbiAgICAgICAgKTtcblxuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRUaHJvdHRsaW5nKHBhcmFtZXRlcnMpO1xuXG4gICAgICAgIGlmICh0aGlzLnNlcnZlclRlbGVtZXRyeU1hbmFnZXIpIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFNlcnZlclRlbGVtZXRyeShcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHRoaXMuc2VydmVyVGVsZW1ldHJ5TWFuYWdlclxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNvcnJlbGF0aW9uSWQgPVxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkIHx8XG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5jcnlwdG9JbnRlcmZhY2UuY3JlYXRlTmV3R3VpZCgpO1xuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDb3JyZWxhdGlvbklkKHBhcmFtZXRlcnMsIGNvcnJlbGF0aW9uSWQpO1xuXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5jbGllbnRDcmVkZW50aWFscy5jbGllbnRTZWNyZXQpIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudFNlY3JldChcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmNsaWVudENyZWRlbnRpYWxzLmNsaWVudFNlY3JldFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVzZSBjbGllbnRBc3NlcnRpb24gZnJvbSByZXF1ZXN0LCBmYWxsYmFjayB0byBjbGllbnQgYXNzZXJ0aW9uIGluIGJhc2UgY29uZmlndXJhdGlvblxuICAgICAgICBjb25zdCBjbGllbnRBc3NlcnRpb246IENsaWVudEFzc2VydGlvbiB8IHVuZGVmaW5lZCA9XG4gICAgICAgICAgICByZXF1ZXN0LmNsaWVudEFzc2VydGlvbiB8fFxuICAgICAgICAgICAgdGhpcy5jb25maWcuY2xpZW50Q3JlZGVudGlhbHMuY2xpZW50QXNzZXJ0aW9uO1xuXG4gICAgICAgIGlmIChjbGllbnRBc3NlcnRpb24pIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudEFzc2VydGlvbihcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGF3YWl0IGdldENsaWVudEFzc2VydGlvbihcbiAgICAgICAgICAgICAgICAgICAgY2xpZW50QXNzZXJ0aW9uLmFzc2VydGlvbixcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aE9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3QucmVzb3VyY2VSZXF1ZXN0VXJpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudEFzc2VydGlvblR5cGUoXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBjbGllbnRBc3NlcnRpb24uYXNzZXJ0aW9uVHlwZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFTdHJpbmdVdGlscy5pc0VtcHR5T2JqKHJlcXVlc3QuY2xhaW1zKSB8fFxuICAgICAgICAgICAgKHRoaXMuY29uZmlnLmF1dGhPcHRpb25zLmNsaWVudENhcGFiaWxpdGllcyAmJlxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmF1dGhPcHRpb25zLmNsaWVudENhcGFiaWxpdGllcy5sZW5ndGggPiAwKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsYWltcyhcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlcXVlc3QuY2xhaW1zLFxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmF1dGhPcHRpb25zLmNsaWVudENhcGFiaWxpdGllc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBVcmxVdGlscy5tYXBUb1F1ZXJ5U3RyaW5nKHBhcmFtZXRlcnMpO1xuICAgIH1cbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgICBBQURTZXJ2ZXJQYXJhbUtleXMsXG4gICAgQWNjZXNzVG9rZW5FbnRpdHksXG4gICAgQWNjb3VudEVudGl0eSxcbiAgICBBY2NvdW50SW5mbyxcbiAgICBBdXRoZW50aWNhdGlvblJlc3VsdCxcbiAgICBBdXRoZW50aWNhdGlvblNjaGVtZSxcbiAgICBBdXRob3JpdHksXG4gICAgQXV0aFRva2VuLFxuICAgIEJhc2VDbGllbnQsXG4gICAgQ2FjaGVPdXRjb21lLFxuICAgIENsaWVudEF1dGhFcnJvckNvZGVzLFxuICAgIENsaWVudENvbmZpZ3VyYXRpb24sXG4gICAgQ29tbW9uT25CZWhhbGZPZlJlcXVlc3QsXG4gICAgQ29uc3RhbnRzLFxuICAgIGNyZWF0ZUNsaWVudEF1dGhFcnJvcixcbiAgICBDcmVkZW50aWFsRmlsdGVyLFxuICAgIENyZWRlbnRpYWxUeXBlLFxuICAgIEdyYW50VHlwZSxcbiAgICBJZFRva2VuRW50aXR5LFxuICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLFxuICAgIFJlcXVlc3RUaHVtYnByaW50LFxuICAgIFJlc3BvbnNlSGFuZGxlcixcbiAgICBTY29wZVNldCxcbiAgICBUaW1lVXRpbHMsXG4gICAgVG9rZW5DbGFpbXMsXG4gICAgVXJsU3RyaW5nLFxuICAgIENsaWVudEFzc2VydGlvbixcbiAgICBnZXRDbGllbnRBc3NlcnRpb24sXG4gICAgVXJsVXRpbHMsXG59IGZyb20gXCJAYXp1cmUvbXNhbC1jb21tb24vbm9kZVwiO1xuaW1wb3J0IHsgRW5jb2RpbmdVdGlscyB9IGZyb20gXCIuLi91dGlscy9FbmNvZGluZ1V0aWxzLmpzXCI7XG5cbi8qKlxuICogT24tQmVoYWxmLU9mIGNsaWVudFxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgT25CZWhhbGZPZkNsaWVudCBleHRlbmRzIEJhc2VDbGllbnQge1xuICAgIHByaXZhdGUgc2NvcGVTZXQ6IFNjb3BlU2V0O1xuICAgIHByaXZhdGUgdXNlckFzc2VydGlvbkhhc2g6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZ3VyYXRpb246IENsaWVudENvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgc3VwZXIoY29uZmlndXJhdGlvbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHVibGljIEFQSSB0byBhY3F1aXJlIHRva2VucyB3aXRoIG9uIGJlaGFsZiBvZiBmbG93XG4gICAgICogQHBhcmFtIHJlcXVlc3QgLSBkZXZlbG9wZXIgcHJvdmlkZWQgQ29tbW9uT25CZWhhbGZPZlJlcXVlc3RcbiAgICAgKi9cbiAgICBwdWJsaWMgYXN5bmMgYWNxdWlyZVRva2VuKFxuICAgICAgICByZXF1ZXN0OiBDb21tb25PbkJlaGFsZk9mUmVxdWVzdFxuICAgICk6IFByb21pc2U8QXV0aGVudGljYXRpb25SZXN1bHQgfCBudWxsPiB7XG4gICAgICAgIHRoaXMuc2NvcGVTZXQgPSBuZXcgU2NvcGVTZXQocmVxdWVzdC5zY29wZXMgfHwgW10pO1xuXG4gICAgICAgIC8vIGdlbmVyYXRlIHRoZSB1c2VyX2Fzc2VydGlvbl9oYXNoIGZvciBPQk9Bc3NlcnRpb25cbiAgICAgICAgdGhpcy51c2VyQXNzZXJ0aW9uSGFzaCA9IGF3YWl0IHRoaXMuY3J5cHRvVXRpbHMuaGFzaFN0cmluZyhcbiAgICAgICAgICAgIHJlcXVlc3Qub2JvQXNzZXJ0aW9uXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKHJlcXVlc3Quc2tpcENhY2hlIHx8IHJlcXVlc3QuY2xhaW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5leGVjdXRlVG9rZW5SZXF1ZXN0KFxuICAgICAgICAgICAgICAgIHJlcXVlc3QsXG4gICAgICAgICAgICAgICAgdGhpcy5hdXRob3JpdHksXG4gICAgICAgICAgICAgICAgdGhpcy51c2VyQXNzZXJ0aW9uSGFzaFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRDYWNoZWRBdXRoZW50aWNhdGlvblJlc3VsdChyZXF1ZXN0KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gQW55IGZhaWx1cmUgZmFsbHMgYmFjayB0byBpbnRlcmFjdGl2ZSByZXF1ZXN0LCBvbmNlIHdlIGltcGxlbWVudCBkaXN0cmlidXRlZCBjYWNoZSwgd2UgcGxhbiB0byBoYW5kbGUgYGNyZWF0ZVJlZnJlc2hSZXF1aXJlZEVycm9yYCB0byByZWZyZXNoIHVzaW5nIHRoZSBSVFxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZXhlY3V0ZVRva2VuUmVxdWVzdChcbiAgICAgICAgICAgICAgICByZXF1ZXN0LFxuICAgICAgICAgICAgICAgIHRoaXMuYXV0aG9yaXR5LFxuICAgICAgICAgICAgICAgIHRoaXMudXNlckFzc2VydGlvbkhhc2hcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBsb29rIHVwIGNhY2hlIGZvciB0b2tlbnNcbiAgICAgKiBGaW5kIGlkdG9rZW4gaW4gdGhlIGNhY2hlXG4gICAgICogRmluZCBhY2Nlc3NUb2tlbiBiYXNlZCBvbiB1c2VyIGFzc2VydGlvbiBhbmQgYWNjb3VudCBpbmZvIGluIHRoZSBjYWNoZVxuICAgICAqIFBsZWFzZSBub3RlIHdlIGFyZSBub3QgeWV0IHN1cHBvcnRlZCBPQk8gdG9rZW5zIHJlZnJlc2hlZCB3aXRoIGxvbmcgbGl2ZWQgUlQuIFVzZXIgd2lsbCBoYXZlIHRvIHNlbmQgYSBuZXcgYXNzZXJ0aW9uIGlmIHRoZSBjdXJyZW50IGFjY2VzcyB0b2tlbiBleHBpcmVzXG4gICAgICogVGhpcyBpcyB0byBwcmV2ZW50IHNlY3VyaXR5IGlzc3VlcyB3aGVuIHRoZSBhc3NlcnRpb24gY2hhbmdlcyBvdmVyIHRpbWUsIGhvd2V2ZXIsIGxvbmdsaXZlZCBSVCBoZWxwcyByZXRhaW5pbmcgdGhlIHNlc3Npb25cbiAgICAgKiBAcGFyYW0gcmVxdWVzdCAtIGRldmVsb3BlciBwcm92aWRlZCBDb21tb25PbkJlaGFsZk9mUmVxdWVzdFxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgZ2V0Q2FjaGVkQXV0aGVudGljYXRpb25SZXN1bHQoXG4gICAgICAgIHJlcXVlc3Q6IENvbW1vbk9uQmVoYWxmT2ZSZXF1ZXN0XG4gICAgKTogUHJvbWlzZTxBdXRoZW50aWNhdGlvblJlc3VsdCB8IG51bGw+IHtcbiAgICAgICAgLy8gbG9vayBpbiB0aGUgY2FjaGUgZm9yIHRoZSBhY2Nlc3NfdG9rZW4gd2hpY2ggbWF0Y2hlcyB0aGUgaW5jb21pbmdfYXNzZXJ0aW9uXG4gICAgICAgIGNvbnN0IGNhY2hlZEFjY2Vzc1Rva2VuID0gdGhpcy5yZWFkQWNjZXNzVG9rZW5Gcm9tQ2FjaGVGb3JPQk8oXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICAgIHJlcXVlc3RcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKCFjYWNoZWRBY2Nlc3NUb2tlbikge1xuICAgICAgICAgICAgLy8gTXVzdCByZWZyZXNoIGR1ZSB0byBub24tZXhpc3RlbnQgYWNjZXNzX3Rva2VuLlxuICAgICAgICAgICAgdGhpcy5zZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyPy5zZXRDYWNoZU91dGNvbWUoXG4gICAgICAgICAgICAgICAgQ2FjaGVPdXRjb21lLk5PX0NBQ0hFRF9BQ0NFU1NfVE9LRU5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgICAgIFwiU2lsZW50Rmxvd0NsaWVudDphY3F1aXJlQ2FjaGVkVG9rZW4gLSBObyBhY2Nlc3MgdG9rZW4gZm91bmQgaW4gY2FjaGUgZm9yIHRoZSBnaXZlbiBwcm9wZXJ0aWVzLlwiXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKFxuICAgICAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLnRva2VuUmVmcmVzaFJlcXVpcmVkXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgVGltZVV0aWxzLmlzVG9rZW5FeHBpcmVkKFxuICAgICAgICAgICAgICAgIGNhY2hlZEFjY2Vzc1Rva2VuLmV4cGlyZXNPbixcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5zeXN0ZW1PcHRpb25zLnRva2VuUmVuZXdhbE9mZnNldFNlY29uZHNcbiAgICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBBY2Nlc3MgdG9rZW4gZXhwaXJlZCwgd2lsbCBuZWVkIHRvIHJlbmV3ZWRcbiAgICAgICAgICAgIHRoaXMuc2VydmVyVGVsZW1ldHJ5TWFuYWdlcj8uc2V0Q2FjaGVPdXRjb21lKFxuICAgICAgICAgICAgICAgIENhY2hlT3V0Y29tZS5DQUNIRURfQUNDRVNTX1RPS0VOX0VYUElSRURcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgICAgIGBPbmJlaGFsZm9mRmxvdzpnZXRDYWNoZWRBdXRoZW50aWNhdGlvblJlc3VsdCAtIENhY2hlZCBhY2Nlc3MgdG9rZW4gaXMgZXhwaXJlZCBvciB3aWxsIGV4cGlyZSB3aXRoaW4gJHt0aGlzLmNvbmZpZy5zeXN0ZW1PcHRpb25zLnRva2VuUmVuZXdhbE9mZnNldFNlY29uZHN9IHNlY29uZHMuYFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihcbiAgICAgICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy50b2tlblJlZnJlc2hSZXF1aXJlZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGZldGNoIHRoZSBpZFRva2VuIGZyb20gY2FjaGVcbiAgICAgICAgY29uc3QgY2FjaGVkSWRUb2tlbiA9IHRoaXMucmVhZElkVG9rZW5Gcm9tQ2FjaGVGb3JPQk8oXG4gICAgICAgICAgICBjYWNoZWRBY2Nlc3NUb2tlbi5ob21lQWNjb3VudElkXG4gICAgICAgICk7XG4gICAgICAgIGxldCBpZFRva2VuQ2xhaW1zOiBUb2tlbkNsYWltcyB8IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IGNhY2hlZEFjY291bnQ6IEFjY291bnRFbnRpdHkgfCBudWxsID0gbnVsbDtcbiAgICAgICAgaWYgKGNhY2hlZElkVG9rZW4pIHtcbiAgICAgICAgICAgIGlkVG9rZW5DbGFpbXMgPSBBdXRoVG9rZW4uZXh0cmFjdFRva2VuQ2xhaW1zKFxuICAgICAgICAgICAgICAgIGNhY2hlZElkVG9rZW4uc2VjcmV0LFxuICAgICAgICAgICAgICAgIEVuY29kaW5nVXRpbHMuYmFzZTY0RGVjb2RlXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxBY2NvdW50SWQgPSBpZFRva2VuQ2xhaW1zLm9pZCB8fCBpZFRva2VuQ2xhaW1zLnN1YjtcbiAgICAgICAgICAgIGNvbnN0IGFjY291bnRJbmZvOiBBY2NvdW50SW5mbyA9IHtcbiAgICAgICAgICAgICAgICBob21lQWNjb3VudElkOiBjYWNoZWRJZFRva2VuLmhvbWVBY2NvdW50SWQsXG4gICAgICAgICAgICAgICAgZW52aXJvbm1lbnQ6IGNhY2hlZElkVG9rZW4uZW52aXJvbm1lbnQsXG4gICAgICAgICAgICAgICAgdGVuYW50SWQ6IGNhY2hlZElkVG9rZW4ucmVhbG0sXG4gICAgICAgICAgICAgICAgdXNlcm5hbWU6IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgICAgICAgICAgICAgbG9jYWxBY2NvdW50SWQ6IGxvY2FsQWNjb3VudElkIHx8IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjYWNoZWRBY2NvdW50ID0gdGhpcy5jYWNoZU1hbmFnZXIucmVhZEFjY291bnRGcm9tQ2FjaGUoYWNjb3VudEluZm8pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaW5jcmVtZW50IHRlbGVtZXRyeSBjYWNoZSBoaXQgY291bnRlclxuICAgICAgICBpZiAodGhpcy5jb25maWcuc2VydmVyVGVsZW1ldHJ5TWFuYWdlcikge1xuICAgICAgICAgICAgdGhpcy5jb25maWcuc2VydmVyVGVsZW1ldHJ5TWFuYWdlci5pbmNyZW1lbnRDYWNoZUhpdHMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBSZXNwb25zZUhhbmRsZXIuZ2VuZXJhdGVBdXRoZW50aWNhdGlvblJlc3VsdChcbiAgICAgICAgICAgIHRoaXMuY3J5cHRvVXRpbHMsXG4gICAgICAgICAgICB0aGlzLmF1dGhvcml0eSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhY2NvdW50OiBjYWNoZWRBY2NvdW50LFxuICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiBjYWNoZWRBY2Nlc3NUb2tlbixcbiAgICAgICAgICAgICAgICBpZFRva2VuOiBjYWNoZWRJZFRva2VuLFxuICAgICAgICAgICAgICAgIHJlZnJlc2hUb2tlbjogbnVsbCxcbiAgICAgICAgICAgICAgICBhcHBNZXRhZGF0YTogbnVsbCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgICAgIGlkVG9rZW5DbGFpbXNcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZWFkIGlkdG9rZW4gZnJvbSBjYWNoZSwgdGhpcyBpcyBhIHNwZWNpZmljIGltcGxlbWVudGF0aW9uIGZvciBPQk8gYXMgdGhlIHJlcXVpcmVtZW50cyBkaWZmZXIgZnJvbSBhIGdlbmVyaWMgbG9va3VwIGluIHRoZSBjYWNoZU1hbmFnZXJcbiAgICAgKiBDZXJ0YWluIHVzZSBjYXNlcyBvZiBPQk8gZmxvdyBkbyBub3QgZXhwZWN0IGFuIGlkVG9rZW4gaW4gdGhlIGNhY2hlL29yIGZyb20gdGhlIHNlcnZpY2VcbiAgICAgKiBAcGFyYW0gYXRIb21lQWNjb3VudElkIC0gYWNjb3VudCBpZFxuICAgICAqL1xuICAgIHByaXZhdGUgcmVhZElkVG9rZW5Gcm9tQ2FjaGVGb3JPQk8oXG4gICAgICAgIGF0SG9tZUFjY291bnRJZDogc3RyaW5nXG4gICAgKTogSWRUb2tlbkVudGl0eSB8IG51bGwge1xuICAgICAgICBjb25zdCBpZFRva2VuRmlsdGVyOiBDcmVkZW50aWFsRmlsdGVyID0ge1xuICAgICAgICAgICAgaG9tZUFjY291bnRJZDogYXRIb21lQWNjb3VudElkLFxuICAgICAgICAgICAgZW52aXJvbm1lbnQ6XG4gICAgICAgICAgICAgICAgdGhpcy5hdXRob3JpdHkuY2Fub25pY2FsQXV0aG9yaXR5VXJsQ29tcG9uZW50cy5Ib3N0TmFtZUFuZFBvcnQsXG4gICAgICAgICAgICBjcmVkZW50aWFsVHlwZTogQ3JlZGVudGlhbFR5cGUuSURfVE9LRU4sXG4gICAgICAgICAgICBjbGllbnRJZDogdGhpcy5jb25maWcuYXV0aE9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgICByZWFsbTogdGhpcy5hdXRob3JpdHkudGVuYW50LFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGlkVG9rZW5NYXA6IE1hcDxzdHJpbmcsIElkVG9rZW5FbnRpdHk+ID1cbiAgICAgICAgICAgIHRoaXMuY2FjaGVNYW5hZ2VyLmdldElkVG9rZW5zQnlGaWx0ZXIoaWRUb2tlbkZpbHRlcik7XG5cbiAgICAgICAgLy8gV2hlbiBhY3F1aXJpbmcgYSB0b2tlbiBvbiBiZWhhbGYgb2YgYW4gYXBwbGljYXRpb24sIHRoZXJlIG1pZ2h0IG5vdCBiZSBhbiBpZCB0b2tlbiBpbiB0aGUgY2FjaGVcbiAgICAgICAgaWYgKE9iamVjdC52YWx1ZXMoaWRUb2tlbk1hcCkubGVuZ3RoIDwgMSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9iamVjdC52YWx1ZXMoaWRUb2tlbk1hcClbMF0gYXMgSWRUb2tlbkVudGl0eTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGZXRjaGVzIHRoZSBjYWNoZWQgYWNjZXNzIHRva2VuIGJhc2VkIG9uIGluY29taW5nIGFzc2VydGlvblxuICAgICAqIEBwYXJhbSBjbGllbnRJZCAtIGNsaWVudCBpZFxuICAgICAqIEBwYXJhbSByZXF1ZXN0IC0gZGV2ZWxvcGVyIHByb3ZpZGVkIENvbW1vbk9uQmVoYWxmT2ZSZXF1ZXN0XG4gICAgICovXG4gICAgcHJpdmF0ZSByZWFkQWNjZXNzVG9rZW5Gcm9tQ2FjaGVGb3JPQk8oXG4gICAgICAgIGNsaWVudElkOiBzdHJpbmcsXG4gICAgICAgIHJlcXVlc3Q6IENvbW1vbk9uQmVoYWxmT2ZSZXF1ZXN0XG4gICAgKSB7XG4gICAgICAgIGNvbnN0IGF1dGhTY2hlbWUgPVxuICAgICAgICAgICAgcmVxdWVzdC5hdXRoZW50aWNhdGlvblNjaGVtZSB8fCBBdXRoZW50aWNhdGlvblNjaGVtZS5CRUFSRVI7XG4gICAgICAgIC8qXG4gICAgICAgICAqIERpc3Rpbmd1aXNoIGJldHdlZW4gQmVhcmVyIGFuZCBQb1AvU1NIIHRva2VuIGNhY2hlIHR5cGVzXG4gICAgICAgICAqIENhc3QgdG8gbG93ZXJjYXNlIHRvIGhhbmRsZSBcImJlYXJlclwiIGZyb20gQURGU1xuICAgICAgICAgKi9cbiAgICAgICAgY29uc3QgY3JlZGVudGlhbFR5cGUgPVxuICAgICAgICAgICAgYXV0aFNjaGVtZSAmJlxuICAgICAgICAgICAgYXV0aFNjaGVtZS50b0xvd2VyQ2FzZSgpICE9PVxuICAgICAgICAgICAgICAgIEF1dGhlbnRpY2F0aW9uU2NoZW1lLkJFQVJFUi50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgICAgPyBDcmVkZW50aWFsVHlwZS5BQ0NFU1NfVE9LRU5fV0lUSF9BVVRIX1NDSEVNRVxuICAgICAgICAgICAgICAgIDogQ3JlZGVudGlhbFR5cGUuQUNDRVNTX1RPS0VOO1xuXG4gICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuRmlsdGVyOiBDcmVkZW50aWFsRmlsdGVyID0ge1xuICAgICAgICAgICAgY3JlZGVudGlhbFR5cGU6IGNyZWRlbnRpYWxUeXBlLFxuICAgICAgICAgICAgY2xpZW50SWQsXG4gICAgICAgICAgICB0YXJnZXQ6IFNjb3BlU2V0LmNyZWF0ZVNlYXJjaFNjb3Blcyh0aGlzLnNjb3BlU2V0LmFzQXJyYXkoKSksXG4gICAgICAgICAgICB0b2tlblR5cGU6IGF1dGhTY2hlbWUsXG4gICAgICAgICAgICBrZXlJZDogcmVxdWVzdC5zc2hLaWQsXG4gICAgICAgICAgICByZXF1ZXN0ZWRDbGFpbXNIYXNoOiByZXF1ZXN0LnJlcXVlc3RlZENsYWltc0hhc2gsXG4gICAgICAgICAgICB1c2VyQXNzZXJ0aW9uSGFzaDogdGhpcy51c2VyQXNzZXJ0aW9uSGFzaCxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbnMgPVxuICAgICAgICAgICAgdGhpcy5jYWNoZU1hbmFnZXIuZ2V0QWNjZXNzVG9rZW5zQnlGaWx0ZXIoYWNjZXNzVG9rZW5GaWx0ZXIpO1xuXG4gICAgICAgIGNvbnN0IG51bUFjY2Vzc1Rva2VucyA9IGFjY2Vzc1Rva2Vucy5sZW5ndGg7XG4gICAgICAgIGlmIChudW1BY2Nlc3NUb2tlbnMgPCAxKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSBlbHNlIGlmIChudW1BY2Nlc3NUb2tlbnMgPiAxKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMubXVsdGlwbGVNYXRjaGluZ1Rva2Vuc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhY2Nlc3NUb2tlbnNbMF0gYXMgQWNjZXNzVG9rZW5FbnRpdHk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFrZSBhIG5ldHdvcmsgY2FsbCB0byB0aGUgc2VydmVyIHJlcXVlc3RpbmcgY3JlZGVudGlhbHNcbiAgICAgKiBAcGFyYW0gcmVxdWVzdCAtIGRldmVsb3BlciBwcm92aWRlZCBDb21tb25PbkJlaGFsZk9mUmVxdWVzdFxuICAgICAqIEBwYXJhbSBhdXRob3JpdHkgLSBhdXRob3JpdHkgb2JqZWN0XG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBleGVjdXRlVG9rZW5SZXF1ZXN0KFxuICAgICAgICByZXF1ZXN0OiBDb21tb25PbkJlaGFsZk9mUmVxdWVzdCxcbiAgICAgICAgYXV0aG9yaXR5OiBBdXRob3JpdHksXG4gICAgICAgIHVzZXJBc3NlcnRpb25IYXNoOiBzdHJpbmdcbiAgICApOiBQcm9taXNlPEF1dGhlbnRpY2F0aW9uUmVzdWx0IHwgbnVsbD4ge1xuICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnNTdHJpbmcgPSB0aGlzLmNyZWF0ZVRva2VuUXVlcnlQYXJhbWV0ZXJzKHJlcXVlc3QpO1xuICAgICAgICBjb25zdCBlbmRwb2ludCA9IFVybFN0cmluZy5hcHBlbmRRdWVyeVN0cmluZyhcbiAgICAgICAgICAgIGF1dGhvcml0eS50b2tlbkVuZHBvaW50LFxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzU3RyaW5nXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0gYXdhaXQgdGhpcy5jcmVhdGVUb2tlblJlcXVlc3RCb2R5KHJlcXVlc3QpO1xuICAgICAgICBjb25zdCBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID1cbiAgICAgICAgICAgIHRoaXMuY3JlYXRlVG9rZW5SZXF1ZXN0SGVhZGVycygpO1xuICAgICAgICBjb25zdCB0aHVtYnByaW50OiBSZXF1ZXN0VGh1bWJwcmludCA9IHtcbiAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICAgIGF1dGhvcml0eTogcmVxdWVzdC5hdXRob3JpdHksXG4gICAgICAgICAgICBzY29wZXM6IHJlcXVlc3Quc2NvcGVzLFxuICAgICAgICAgICAgY2xhaW1zOiByZXF1ZXN0LmNsYWltcyxcbiAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uU2NoZW1lOiByZXF1ZXN0LmF1dGhlbnRpY2F0aW9uU2NoZW1lLFxuICAgICAgICAgICAgcmVzb3VyY2VSZXF1ZXN0TWV0aG9kOiByZXF1ZXN0LnJlc291cmNlUmVxdWVzdE1ldGhvZCxcbiAgICAgICAgICAgIHJlc291cmNlUmVxdWVzdFVyaTogcmVxdWVzdC5yZXNvdXJjZVJlcXVlc3RVcmksXG4gICAgICAgICAgICBzaHJDbGFpbXM6IHJlcXVlc3Quc2hyQ2xhaW1zLFxuICAgICAgICAgICAgc3NoS2lkOiByZXF1ZXN0LnNzaEtpZCxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCByZXFUaW1lc3RhbXAgPSBUaW1lVXRpbHMubm93U2Vjb25kcygpO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZXhlY3V0ZVBvc3RUb1Rva2VuRW5kcG9pbnQoXG4gICAgICAgICAgICBlbmRwb2ludCxcbiAgICAgICAgICAgIHJlcXVlc3RCb2R5LFxuICAgICAgICAgICAgaGVhZGVycyxcbiAgICAgICAgICAgIHRodW1icHJpbnQsXG4gICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCByZXNwb25zZUhhbmRsZXIgPSBuZXcgUmVzcG9uc2VIYW5kbGVyKFxuICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aE9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgICB0aGlzLmNhY2hlTWFuYWdlcixcbiAgICAgICAgICAgIHRoaXMuY3J5cHRvVXRpbHMsXG4gICAgICAgICAgICB0aGlzLmxvZ2dlcixcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLnNlcmlhbGl6YWJsZUNhY2hlLFxuICAgICAgICAgICAgdGhpcy5jb25maWcucGVyc2lzdGVuY2VQbHVnaW5cbiAgICAgICAgKTtcblxuICAgICAgICByZXNwb25zZUhhbmRsZXIudmFsaWRhdGVUb2tlblJlc3BvbnNlKHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICBjb25zdCB0b2tlblJlc3BvbnNlID0gYXdhaXQgcmVzcG9uc2VIYW5kbGVyLmhhbmRsZVNlcnZlclRva2VuUmVzcG9uc2UoXG4gICAgICAgICAgICByZXNwb25zZS5ib2R5LFxuICAgICAgICAgICAgdGhpcy5hdXRob3JpdHksXG4gICAgICAgICAgICByZXFUaW1lc3RhbXAsXG4gICAgICAgICAgICByZXF1ZXN0LFxuICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgdXNlckFzc2VydGlvbkhhc2hcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gdG9rZW5SZXNwb25zZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnZW5lcmF0ZSBhIHNlcnZlciByZXF1ZXN0IGluIGFjY2VwYWJsZSBmb3JtYXRcbiAgICAgKiBAcGFyYW0gcmVxdWVzdCAtIGRldmVsb3BlciBwcm92aWRlZCBDb21tb25PbkJlaGFsZk9mUmVxdWVzdFxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgY3JlYXRlVG9rZW5SZXF1ZXN0Qm9keShcbiAgICAgICAgcmVxdWVzdDogQ29tbW9uT25CZWhhbGZPZlJlcXVlc3RcbiAgICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCBwYXJhbWV0ZXJzID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZz4oKTtcblxuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDbGllbnRJZChcbiAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRJZFxuICAgICAgICApO1xuXG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFNjb3BlcyhwYXJhbWV0ZXJzLCByZXF1ZXN0LnNjb3Blcyk7XG5cbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkR3JhbnRUeXBlKHBhcmFtZXRlcnMsIEdyYW50VHlwZS5KV1RfQkVBUkVSKTtcblxuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDbGllbnRJbmZvKHBhcmFtZXRlcnMpO1xuXG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZExpYnJhcnlJbmZvKFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmxpYnJhcnlJbmZvXG4gICAgICAgICk7XG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZEFwcGxpY2F0aW9uVGVsZW1ldHJ5KFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLnRlbGVtZXRyeS5hcHBsaWNhdGlvblxuICAgICAgICApO1xuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRUaHJvdHRsaW5nKHBhcmFtZXRlcnMpO1xuXG4gICAgICAgIGlmICh0aGlzLnNlcnZlclRlbGVtZXRyeU1hbmFnZXIpIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFNlcnZlclRlbGVtZXRyeShcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHRoaXMuc2VydmVyVGVsZW1ldHJ5TWFuYWdlclxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNvcnJlbGF0aW9uSWQgPVxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkIHx8XG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5jcnlwdG9JbnRlcmZhY2UuY3JlYXRlTmV3R3VpZCgpO1xuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDb3JyZWxhdGlvbklkKHBhcmFtZXRlcnMsIGNvcnJlbGF0aW9uSWQpO1xuXG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFJlcXVlc3RUb2tlblVzZShcbiAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICBBQURTZXJ2ZXJQYXJhbUtleXMuT05fQkVIQUxGX09GXG4gICAgICAgICk7XG5cbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkT2JvQXNzZXJ0aW9uKFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHJlcXVlc3Qub2JvQXNzZXJ0aW9uXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmNsaWVudENyZWRlbnRpYWxzLmNsaWVudFNlY3JldCkge1xuICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2xpZW50U2VjcmV0KFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcuY2xpZW50Q3JlZGVudGlhbHMuY2xpZW50U2VjcmV0XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2xpZW50QXNzZXJ0aW9uOiBDbGllbnRBc3NlcnRpb24gfCB1bmRlZmluZWQgPVxuICAgICAgICAgICAgdGhpcy5jb25maWcuY2xpZW50Q3JlZGVudGlhbHMuY2xpZW50QXNzZXJ0aW9uO1xuXG4gICAgICAgIGlmIChjbGllbnRBc3NlcnRpb24pIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudEFzc2VydGlvbihcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGF3YWl0IGdldENsaWVudEFzc2VydGlvbihcbiAgICAgICAgICAgICAgICAgICAgY2xpZW50QXNzZXJ0aW9uLmFzc2VydGlvbixcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aE9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3QucmVzb3VyY2VSZXF1ZXN0VXJpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudEFzc2VydGlvblR5cGUoXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBjbGllbnRBc3NlcnRpb24uYXNzZXJ0aW9uVHlwZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHJlcXVlc3QuY2xhaW1zIHx8XG4gICAgICAgICAgICAodGhpcy5jb25maWcuYXV0aE9wdGlvbnMuY2xpZW50Q2FwYWJpbGl0aWVzICYmXG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aE9wdGlvbnMuY2xpZW50Q2FwYWJpbGl0aWVzLmxlbmd0aCA+IDApXG4gICAgICAgICkge1xuICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2xhaW1zKFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5jbGFpbXMsXG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aE9wdGlvbnMuY2xpZW50Q2FwYWJpbGl0aWVzXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFVybFV0aWxzLm1hcFRvUXVlcnlTdHJpbmcocGFyYW1ldGVycyk7XG4gICAgfVxufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG4vLyBBQURBdXRob3JpdHlDb25zdGFudHNcblxuaW1wb3J0IHsgQ2xpZW50QXBwbGljYXRpb24gfSBmcm9tIFwiLi9DbGllbnRBcHBsaWNhdGlvbi5qc1wiO1xuaW1wb3J0IHsgQ29uZmlndXJhdGlvbiB9IGZyb20gXCIuLi9jb25maWcvQ29uZmlndXJhdGlvbi5qc1wiO1xuaW1wb3J0IHsgQ2xpZW50QXNzZXJ0aW9uIH0gZnJvbSBcIi4vQ2xpZW50QXNzZXJ0aW9uLmpzXCI7XG5pbXBvcnQge1xuICAgIENvbnN0YW50cyBhcyBOb2RlQ29uc3RhbnRzLFxuICAgIEFwaUlkLFxuICAgIFJFR0lPTl9FTlZJUk9OTUVOVF9WQVJJQUJMRSxcbiAgICBNU0FMX0ZPUkNFX1JFR0lPTixcbn0gZnJvbSBcIi4uL3V0aWxzL0NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHtcbiAgICBDb21tb25DbGllbnRDcmVkZW50aWFsUmVxdWVzdCxcbiAgICBDb21tb25PbkJlaGFsZk9mUmVxdWVzdCxcbiAgICBBdXRoZW50aWNhdGlvblJlc3VsdCxcbiAgICBBenVyZVJlZ2lvbkNvbmZpZ3VyYXRpb24sXG4gICAgQXV0aEVycm9yLFxuICAgIElBcHBUb2tlblByb3ZpZGVyLFxuICAgIE9JRENfREVGQVVMVF9TQ09QRVMsXG4gICAgVXJsU3RyaW5nLFxuICAgIEFBREF1dGhvcml0eUNvbnN0YW50cyxcbiAgICBjcmVhdGVDbGllbnRBdXRoRXJyb3IsXG4gICAgQ2xpZW50QXV0aEVycm9yQ29kZXMsXG4gICAgQ2xpZW50QXNzZXJ0aW9uIGFzIENsaWVudEFzc2VydGlvblR5cGUsXG4gICAgZ2V0Q2xpZW50QXNzZXJ0aW9uLFxuICAgIEF6dXJlUmVnaW9uLFxufSBmcm9tIFwiQGF6dXJlL21zYWwtY29tbW9uL25vZGVcIjtcbmltcG9ydCB7IElDb25maWRlbnRpYWxDbGllbnRBcHBsaWNhdGlvbiB9IGZyb20gXCIuL0lDb25maWRlbnRpYWxDbGllbnRBcHBsaWNhdGlvbi5qc1wiO1xuaW1wb3J0IHsgT25CZWhhbGZPZlJlcXVlc3QgfSBmcm9tIFwiLi4vcmVxdWVzdC9PbkJlaGFsZk9mUmVxdWVzdC5qc1wiO1xuaW1wb3J0IHsgQ2xpZW50Q3JlZGVudGlhbFJlcXVlc3QgfSBmcm9tIFwiLi4vcmVxdWVzdC9DbGllbnRDcmVkZW50aWFsUmVxdWVzdC5qc1wiO1xuaW1wb3J0IHsgQ2xpZW50Q3JlZGVudGlhbENsaWVudCB9IGZyb20gXCIuL0NsaWVudENyZWRlbnRpYWxDbGllbnQuanNcIjtcbmltcG9ydCB7IE9uQmVoYWxmT2ZDbGllbnQgfSBmcm9tIFwiLi9PbkJlaGFsZk9mQ2xpZW50LmpzXCI7XG5cbi8qKlxuICogIFRoaXMgY2xhc3MgaXMgdG8gYmUgdXNlZCB0byBhY3F1aXJlIHRva2VucyBmb3IgY29uZmlkZW50aWFsIGNsaWVudCBhcHBsaWNhdGlvbnMgKHdlYkFwcCwgd2ViQVBJKS4gQ29uZmlkZW50aWFsIGNsaWVudCBhcHBsaWNhdGlvbnNcbiAqICB3aWxsIGNvbmZpZ3VyZSBhcHBsaWNhdGlvbiBzZWNyZXRzLCBjbGllbnQgY2VydGlmaWNhdGVzL2Fzc2VydGlvbnMgYXMgYXBwbGljYWJsZVxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgQ29uZmlkZW50aWFsQ2xpZW50QXBwbGljYXRpb25cbiAgICBleHRlbmRzIENsaWVudEFwcGxpY2F0aW9uXG4gICAgaW1wbGVtZW50cyBJQ29uZmlkZW50aWFsQ2xpZW50QXBwbGljYXRpb25cbntcbiAgICBwcml2YXRlIGFwcFRva2VuUHJvdmlkZXI/OiBJQXBwVG9rZW5Qcm92aWRlcjtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yIGZvciB0aGUgQ29uZmlkZW50aWFsQ2xpZW50QXBwbGljYXRpb25cbiAgICAgKlxuICAgICAqIFJlcXVpcmVkIGF0dHJpYnV0ZXMgaW4gdGhlIENvbmZpZ3VyYXRpb24gb2JqZWN0IGFyZTpcbiAgICAgKiAtIGNsaWVudElEOiB0aGUgYXBwbGljYXRpb24gSUQgb2YgeW91ciBhcHBsaWNhdGlvbi4gWW91IGNhbiBvYnRhaW4gb25lIGJ5IHJlZ2lzdGVyaW5nIHlvdXIgYXBwbGljYXRpb24gd2l0aCBvdXIgYXBwbGljYXRpb24gcmVnaXN0cmF0aW9uIHBvcnRhbFxuICAgICAqIC0gYXV0aG9yaXR5OiB0aGUgYXV0aG9yaXR5IFVSTCBmb3IgeW91ciBhcHBsaWNhdGlvbi5cbiAgICAgKiAtIGNsaWVudCBjcmVkZW50aWFsOiBNdXN0IHNldCBlaXRoZXIgY2xpZW50IHNlY3JldCwgY2VydGlmaWNhdGUsIG9yIGFzc2VydGlvbiBmb3IgY29uZmlkZW50aWFsIGNsaWVudHMuIFlvdSBjYW4gb2J0YWluIGEgY2xpZW50IHNlY3JldCBmcm9tIHRoZSBhcHBsaWNhdGlvbiByZWdpc3RyYXRpb24gcG9ydGFsLlxuICAgICAqXG4gICAgICogSW4gQXp1cmUgQUQsIGF1dGhvcml0eSBpcyBhIFVSTCBpbmRpY2F0aW5nIG9mIHRoZSBmb3JtIGh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbS9cXHtFbnRlcl90aGVfVGVuYW50X0luZm9fSGVyZVxcfS5cbiAgICAgKiBJZiB5b3VyIGFwcGxpY2F0aW9uIHN1cHBvcnRzIEFjY291bnRzIGluIG9uZSBvcmdhbml6YXRpb25hbCBkaXJlY3RvcnksIHJlcGxhY2UgXCJFbnRlcl90aGVfVGVuYW50X0luZm9fSGVyZVwiIHZhbHVlIHdpdGggdGhlIFRlbmFudCBJZCBvciBUZW5hbnQgbmFtZSAoZm9yIGV4YW1wbGUsIGNvbnRvc28ubWljcm9zb2Z0LmNvbSkuXG4gICAgICogSWYgeW91ciBhcHBsaWNhdGlvbiBzdXBwb3J0cyBBY2NvdW50cyBpbiBhbnkgb3JnYW5pemF0aW9uYWwgZGlyZWN0b3J5LCByZXBsYWNlIFwiRW50ZXJfdGhlX1RlbmFudF9JbmZvX0hlcmVcIiB2YWx1ZSB3aXRoIG9yZ2FuaXphdGlvbnMuXG4gICAgICogSWYgeW91ciBhcHBsaWNhdGlvbiBzdXBwb3J0cyBBY2NvdW50cyBpbiBhbnkgb3JnYW5pemF0aW9uYWwgZGlyZWN0b3J5IGFuZCBwZXJzb25hbCBNaWNyb3NvZnQgYWNjb3VudHMsIHJlcGxhY2UgXCJFbnRlcl90aGVfVGVuYW50X0luZm9fSGVyZVwiIHZhbHVlIHdpdGggY29tbW9uLlxuICAgICAqIFRvIHJlc3RyaWN0IHN1cHBvcnQgdG8gUGVyc29uYWwgTWljcm9zb2Z0IGFjY291bnRzIG9ubHksIHJlcGxhY2UgXCJFbnRlcl90aGVfVGVuYW50X0luZm9fSGVyZVwiIHZhbHVlIHdpdGggY29uc3VtZXJzLlxuICAgICAqXG4gICAgICogSW4gQXp1cmUgQjJDLCBhdXRob3JpdHkgaXMgb2YgdGhlIGZvcm0gaHR0cHM6Ly9cXHtpbnN0YW5jZVxcfS90ZnAvXFx7dGVuYW50XFx9L1xce3BvbGljeU5hbWVcXH0vXG4gICAgICogRnVsbCBCMkMgZnVuY3Rpb25hbGl0eSB3aWxsIGJlIGF2YWlsYWJsZSBpbiB0aGlzIGxpYnJhcnkgaW4gZnV0dXJlIHZlcnNpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIENvbmZpZ3VyYXRpb24gLSBjb25maWd1cmF0aW9uIG9iamVjdCBmb3IgdGhlIE1TQUwgQ29uZmlkZW50aWFsQ2xpZW50QXBwbGljYXRpb24gaW5zdGFuY2VcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihjb25maWd1cmF0aW9uOiBDb25maWd1cmF0aW9uKSB7XG4gICAgICAgIHN1cGVyKGNvbmZpZ3VyYXRpb24pO1xuXG4gICAgICAgIGNvbnN0IGNsaWVudFNlY3JldE5vdEVtcHR5ID0gISF0aGlzLmNvbmZpZy5hdXRoLmNsaWVudFNlY3JldDtcbiAgICAgICAgY29uc3QgY2xpZW50QXNzZXJ0aW9uTm90RW1wdHkgPSAhIXRoaXMuY29uZmlnLmF1dGguY2xpZW50QXNzZXJ0aW9uO1xuICAgICAgICBjb25zdCBjZXJ0aWZpY2F0ZU5vdEVtcHR5ID1cbiAgICAgICAgICAgICghIXRoaXMuY29uZmlnLmF1dGguY2xpZW50Q2VydGlmaWNhdGU/LnRodW1icHJpbnQgfHxcbiAgICAgICAgICAgICAgICAhIXRoaXMuY29uZmlnLmF1dGguY2xpZW50Q2VydGlmaWNhdGU/LnRodW1icHJpbnRTaGEyNTYpICYmXG4gICAgICAgICAgICAhIXRoaXMuY29uZmlnLmF1dGguY2xpZW50Q2VydGlmaWNhdGU/LnByaXZhdGVLZXk7XG5cbiAgICAgICAgLypcbiAgICAgICAgICogSWYgYXBwIGRldmVsb3BlciBjb25maWd1cmVzIHRoaXMgY2FsbGJhY2ssIHRoZXkgZG9uJ3QgbmVlZCBhIGNyZWRlbnRpYWxcbiAgICAgICAgICogaS5lLiBBenVyZVNESyBjYW4gZ2V0IHRva2VuIGZyb20gTWFuYWdlZCBJZGVudGl0eSB3aXRob3V0IGEgY2VydCAvIHNlY3JldFxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKHRoaXMuYXBwVG9rZW5Qcm92aWRlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgdGhhdCBhdCBtb3N0IG9uZSBjcmVkZW50aWFsIGlzIHNldCBvbiB0aGUgYXBwbGljYXRpb25cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgKGNsaWVudFNlY3JldE5vdEVtcHR5ICYmIGNsaWVudEFzc2VydGlvbk5vdEVtcHR5KSB8fFxuICAgICAgICAgICAgKGNsaWVudEFzc2VydGlvbk5vdEVtcHR5ICYmIGNlcnRpZmljYXRlTm90RW1wdHkpIHx8XG4gICAgICAgICAgICAoY2xpZW50U2VjcmV0Tm90RW1wdHkgJiYgY2VydGlmaWNhdGVOb3RFbXB0eSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZENsaWVudENyZWRlbnRpYWxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5jb25maWcuYXV0aC5jbGllbnRTZWNyZXQpIHtcbiAgICAgICAgICAgIHRoaXMuY2xpZW50U2VjcmV0ID0gdGhpcy5jb25maWcuYXV0aC5jbGllbnRTZWNyZXQ7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5jb25maWcuYXV0aC5jbGllbnRBc3NlcnRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuZGV2ZWxvcGVyUHJvdmlkZWRDbGllbnRBc3NlcnRpb24gPVxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmF1dGguY2xpZW50QXNzZXJ0aW9uO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFjZXJ0aWZpY2F0ZU5vdEVtcHR5KSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZENsaWVudENyZWRlbnRpYWxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNsaWVudEFzc2VydGlvbiA9ICEhdGhpcy5jb25maWcuYXV0aC5jbGllbnRDZXJ0aWZpY2F0ZVxuICAgICAgICAgICAgICAgIC50aHVtYnByaW50U2hhMjU2XG4gICAgICAgICAgICAgICAgPyBDbGllbnRBc3NlcnRpb24uZnJvbUNlcnRpZmljYXRlV2l0aFNoYTI1NlRodW1icHJpbnQoXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aC5jbGllbnRDZXJ0aWZpY2F0ZS50aHVtYnByaW50U2hhMjU2LFxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmF1dGguY2xpZW50Q2VydGlmaWNhdGUucHJpdmF0ZUtleSxcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoLmNsaWVudENlcnRpZmljYXRlLng1Y1xuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIDogQ2xpZW50QXNzZXJ0aW9uLmZyb21DZXJ0aWZpY2F0ZShcbiAgICAgICAgICAgICAgICAgICAgICAvLyBndWFyYW50ZWVkIHRvIGJlIGEgc3RyaW5nLCBkdWUgdG8gcHJpb3IgZXJyb3IgY2hlY2tpbmcgaW4gdGhpcyBmdW5jdGlvblxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmF1dGguY2xpZW50Q2VydGlmaWNhdGUudGh1bWJwcmludCBhcyBzdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aC5jbGllbnRDZXJ0aWZpY2F0ZS5wcml2YXRlS2V5LFxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmF1dGguY2xpZW50Q2VydGlmaWNhdGUueDVjXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXBwVG9rZW5Qcm92aWRlciA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGV4dGVuc2liaWxpdHkgcG9pbnQgb25seSB3b3JrcyBmb3IgdGhlIGNsaWVudF9jcmVkZW50aWFsIGZsb3csIGkuZS4gYWNxdWlyZVRva2VuQnlDbGllbnRDcmVkZW50aWFsIGFuZFxuICAgICAqIGlzIG1lYW50IGZvciBBenVyZSBTREsgdG8gZW5oYW5jZSBNYW5hZ2VkIElkZW50aXR5IHN1cHBvcnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gSUFwcFRva2VuUHJvdmlkZXIgIC0gRXh0ZW5zaWJpbGl0eSBpbnRlcmZhY2UsIHdoaWNoIGFsbG93cyB0aGUgYXBwIGRldmVsb3BlciB0byByZXR1cm4gYSB0b2tlbiBmcm9tIGEgY3VzdG9tIHNvdXJjZS5cbiAgICAgKi9cbiAgICBTZXRBcHBUb2tlblByb3ZpZGVyKHByb3ZpZGVyOiBJQXBwVG9rZW5Qcm92aWRlcik6IHZvaWQge1xuICAgICAgICB0aGlzLmFwcFRva2VuUHJvdmlkZXIgPSBwcm92aWRlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBY3F1aXJlcyB0b2tlbnMgZnJvbSB0aGUgYXV0aG9yaXR5IGZvciB0aGUgYXBwbGljYXRpb24gKG5vdCBmb3IgYW4gZW5kIHVzZXIpLlxuICAgICAqL1xuICAgIHB1YmxpYyBhc3luYyBhY3F1aXJlVG9rZW5CeUNsaWVudENyZWRlbnRpYWwoXG4gICAgICAgIHJlcXVlc3Q6IENsaWVudENyZWRlbnRpYWxSZXF1ZXN0XG4gICAgKTogUHJvbWlzZTxBdXRoZW50aWNhdGlvblJlc3VsdCB8IG51bGw+IHtcbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcbiAgICAgICAgICAgIFwiYWNxdWlyZVRva2VuQnlDbGllbnRDcmVkZW50aWFsIGNhbGxlZFwiLFxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgYSBjbGllbnQgYXNzZXJ0aW9uIHByZXNlbnQgaW4gdGhlIHJlcXVlc3QsIGl0IG92ZXJyaWRlcyB0aGUgb25lIHByZXNlbnQgaW4gdGhlIGNsaWVudCBjb25maWd1cmF0aW9uXG4gICAgICAgIGxldCBjbGllbnRBc3NlcnRpb246IENsaWVudEFzc2VydGlvblR5cGUgfCB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChyZXF1ZXN0LmNsaWVudEFzc2VydGlvbikge1xuICAgICAgICAgICAgY2xpZW50QXNzZXJ0aW9uID0ge1xuICAgICAgICAgICAgICAgIGFzc2VydGlvbjogYXdhaXQgZ2V0Q2xpZW50QXNzZXJ0aW9uKFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LmNsaWVudEFzc2VydGlvbixcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aC5jbGllbnRJZFxuICAgICAgICAgICAgICAgICAgICAvLyB0b2tlbkVuZHBvaW50IHdpbGwgYmUgdW5kZWZpbmVkLiByZXNvdXJjZVJlcXVlc3RVcmkgaXMgb21pdHRlZCBpbiBDbGllbnRDcmVkZW50aWFsUmVxdWVzdFxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgYXNzZXJ0aW9uVHlwZTogTm9kZUNvbnN0YW50cy5KV1RfQkVBUkVSX0FTU0VSVElPTl9UWVBFLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGJhc2VSZXF1ZXN0ID0gYXdhaXQgdGhpcy5pbml0aWFsaXplQmFzZVJlcXVlc3QocmVxdWVzdCk7XG5cbiAgICAgICAgLy8gdmFsaWQgYmFzZSByZXF1ZXN0IHNob3VsZCBub3QgY29udGFpbiBvaWRjIHNjb3BlcyBpbiB0aGlzIGdyYW50IHR5cGVcbiAgICAgICAgY29uc3QgdmFsaWRCYXNlUmVxdWVzdCA9IHtcbiAgICAgICAgICAgIC4uLmJhc2VSZXF1ZXN0LFxuICAgICAgICAgICAgc2NvcGVzOiBiYXNlUmVxdWVzdC5zY29wZXMuZmlsdGVyKFxuICAgICAgICAgICAgICAgIChzY29wZTogc3RyaW5nKSA9PiAhT0lEQ19ERUZBVUxUX1NDT1BFUy5pbmNsdWRlcyhzY29wZSlcbiAgICAgICAgICAgICksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgdmFsaWRSZXF1ZXN0OiBDb21tb25DbGllbnRDcmVkZW50aWFsUmVxdWVzdCA9IHtcbiAgICAgICAgICAgIC4uLnJlcXVlc3QsXG4gICAgICAgICAgICAuLi52YWxpZEJhc2VSZXF1ZXN0LFxuICAgICAgICAgICAgY2xpZW50QXNzZXJ0aW9uLFxuICAgICAgICB9O1xuXG4gICAgICAgIC8qXG4gICAgICAgICAqIHZhbGlkIHJlcXVlc3Qgc2hvdWxkIG5vdCBoYXZlIFwiY29tbW9uXCIgb3IgXCJvcmdhbml6YXRpb25zXCIgaW4gbGlldSBvZiB0aGUgdGVuYW50X2lkIGluIHRoZSBhdXRob3JpdHkgaW4gdGhlIGF1dGggY29uZmlndXJhdGlvblxuICAgICAgICAgKiBleGFtcGxlIGF1dGhvcml0eTogXCJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vVGVuYW50SWRcIixcbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IGF1dGhvcml0eSA9IG5ldyBVcmxTdHJpbmcodmFsaWRSZXF1ZXN0LmF1dGhvcml0eSk7XG4gICAgICAgIGNvbnN0IHRlbmFudElkID0gYXV0aG9yaXR5LmdldFVybENvbXBvbmVudHMoKS5QYXRoU2VnbWVudHNbMF07XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIE9iamVjdC52YWx1ZXMoQUFEQXV0aG9yaXR5Q29uc3RhbnRzKS5pbmNsdWRlcyhcbiAgICAgICAgICAgICAgICB0ZW5hbnRJZCBhcyBBQURBdXRob3JpdHlDb25zdGFudHNcbiAgICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMubWlzc2luZ1RlbmFudElkRXJyb3JcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvKlxuICAgICAgICAgKiBpZiB0aGlzIGVudiB2YXJpYWJsZSBpcyBzZXQsIGFuZCB0aGUgZGV2ZWxvcGVyIHByb3ZpZGVkIHJlZ2lvbiBpc24ndCBkZWZpbmVkIGFuZCBpc24ndCBcIkRpc2FibGVNc2FsRm9yY2VSZWdpb25cIixcbiAgICAgICAgICogTVNBTCBzaGFsbCBvcHQtaW4gdG8gRVNUUy1SIHdpdGggdGhlIHZhbHVlIG9mIHRoaXMgdmFyaWFibGVcbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IEVOVl9NU0FMX0ZPUkNFX1JFR0lPTjogQXp1cmVSZWdpb24gfCB1bmRlZmluZWQgPVxuICAgICAgICAgICAgcHJvY2Vzcy5lbnZbTVNBTF9GT1JDRV9SRUdJT05dO1xuXG4gICAgICAgIGxldCByZWdpb246IEF6dXJlUmVnaW9uIHwgdW5kZWZpbmVkO1xuICAgICAgICBpZiAodmFsaWRSZXF1ZXN0LmF6dXJlUmVnaW9uICE9PSBcIkRpc2FibGVNc2FsRm9yY2VSZWdpb25cIikge1xuICAgICAgICAgICAgaWYgKCF2YWxpZFJlcXVlc3QuYXp1cmVSZWdpb24gJiYgRU5WX01TQUxfRk9SQ0VfUkVHSU9OKSB7XG4gICAgICAgICAgICAgICAgcmVnaW9uID0gRU5WX01TQUxfRk9SQ0VfUkVHSU9OO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWdpb24gPSB2YWxpZFJlcXVlc3QuYXp1cmVSZWdpb247XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBhenVyZVJlZ2lvbkNvbmZpZ3VyYXRpb246IEF6dXJlUmVnaW9uQ29uZmlndXJhdGlvbiA9IHtcbiAgICAgICAgICAgIGF6dXJlUmVnaW9uOiByZWdpb24sXG4gICAgICAgICAgICBlbnZpcm9ubWVudFJlZ2lvbjogcHJvY2Vzcy5lbnZbUkVHSU9OX0VOVklST05NRU5UX1ZBUklBQkxFXSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBzZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyID0gdGhpcy5pbml0aWFsaXplU2VydmVyVGVsZW1ldHJ5TWFuYWdlcihcbiAgICAgICAgICAgIEFwaUlkLmFjcXVpcmVUb2tlbkJ5Q2xpZW50Q3JlZGVudGlhbCxcbiAgICAgICAgICAgIHZhbGlkUmVxdWVzdC5jb3JyZWxhdGlvbklkLFxuICAgICAgICAgICAgdmFsaWRSZXF1ZXN0LnNraXBDYWNoZVxuICAgICAgICApO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZGlzY292ZXJlZEF1dGhvcml0eSA9IGF3YWl0IHRoaXMuY3JlYXRlQXV0aG9yaXR5KFxuICAgICAgICAgICAgICAgIHZhbGlkUmVxdWVzdC5hdXRob3JpdHksXG4gICAgICAgICAgICAgICAgdmFsaWRSZXF1ZXN0LmNvcnJlbGF0aW9uSWQsXG4gICAgICAgICAgICAgICAgYXp1cmVSZWdpb25Db25maWd1cmF0aW9uLFxuICAgICAgICAgICAgICAgIHJlcXVlc3QuYXp1cmVDbG91ZE9wdGlvbnNcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBjbGllbnRDcmVkZW50aWFsQ29uZmlnID1cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmJ1aWxkT2F1dGhDbGllbnRDb25maWd1cmF0aW9uKFxuICAgICAgICAgICAgICAgICAgICBkaXNjb3ZlcmVkQXV0aG9yaXR5LFxuICAgICAgICAgICAgICAgICAgICB2YWxpZFJlcXVlc3QuY29ycmVsYXRpb25JZCxcbiAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgc2VydmVyVGVsZW1ldHJ5TWFuYWdlclxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBjbGllbnRDcmVkZW50aWFsQ2xpZW50ID0gbmV3IENsaWVudENyZWRlbnRpYWxDbGllbnQoXG4gICAgICAgICAgICAgICAgY2xpZW50Q3JlZGVudGlhbENvbmZpZyxcbiAgICAgICAgICAgICAgICB0aGlzLmFwcFRva2VuUHJvdmlkZXJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFxuICAgICAgICAgICAgICAgIFwiQ2xpZW50IGNyZWRlbnRpYWwgY2xpZW50IGNyZWF0ZWRcIixcbiAgICAgICAgICAgICAgICB2YWxpZFJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBjbGllbnRDcmVkZW50aWFsQ2xpZW50LmFjcXVpcmVUb2tlbih2YWxpZFJlcXVlc3QpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEF1dGhFcnJvcikge1xuICAgICAgICAgICAgICAgIGUuc2V0Q29ycmVsYXRpb25JZCh2YWxpZFJlcXVlc3QuY29ycmVsYXRpb25JZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyLmNhY2hlRmFpbGVkUmVxdWVzdChlKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBY3F1aXJlcyB0b2tlbnMgZnJvbSB0aGUgYXV0aG9yaXR5IGZvciB0aGUgYXBwbGljYXRpb24uXG4gICAgICpcbiAgICAgKiBVc2VkIGluIHNjZW5hcmlvcyB3aGVyZSB0aGUgY3VycmVudCBhcHAgaXMgYSBtaWRkbGUtdGllciBzZXJ2aWNlIHdoaWNoIHdhcyBjYWxsZWQgd2l0aCBhIHRva2VuXG4gICAgICogcmVwcmVzZW50aW5nIGFuIGVuZCB1c2VyLiBUaGUgY3VycmVudCBhcHAgY2FuIHVzZSB0aGUgdG9rZW4gKG9ib0Fzc2VydGlvbikgdG8gcmVxdWVzdCBhbm90aGVyXG4gICAgICogdG9rZW4gdG8gYWNjZXNzIGRvd25zdHJlYW0gd2ViIEFQSSwgb24gYmVoYWxmIG9mIHRoYXQgdXNlci5cbiAgICAgKlxuICAgICAqIFRoZSBjdXJyZW50IG1pZGRsZS10aWVyIGFwcCBoYXMgbm8gdXNlciBpbnRlcmFjdGlvbiB0byBvYnRhaW4gY29uc2VudC5cbiAgICAgKiBTZWUgaG93IHRvIGdhaW4gY29uc2VudCB1cGZyb250IGZvciB5b3VyIG1pZGRsZS10aWVyIGFwcCBmcm9tIHRoaXMgYXJ0aWNsZS5cbiAgICAgKiBodHRwczovL2RvY3MubWljcm9zb2Z0LmNvbS9lbi11cy9henVyZS9hY3RpdmUtZGlyZWN0b3J5L2RldmVsb3AvdjItb2F1dGgyLW9uLWJlaGFsZi1vZi1mbG93I2dhaW5pbmctY29uc2VudC1mb3ItdGhlLW1pZGRsZS10aWVyLWFwcGxpY2F0aW9uXG4gICAgICovXG4gICAgcHVibGljIGFzeW5jIGFjcXVpcmVUb2tlbk9uQmVoYWxmT2YoXG4gICAgICAgIHJlcXVlc3Q6IE9uQmVoYWxmT2ZSZXF1ZXN0XG4gICAgKTogUHJvbWlzZTxBdXRoZW50aWNhdGlvblJlc3VsdCB8IG51bGw+IHtcbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcbiAgICAgICAgICAgIFwiYWNxdWlyZVRva2VuT25CZWhhbGZPZiBjYWxsZWRcIixcbiAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuICAgICAgICBjb25zdCB2YWxpZFJlcXVlc3Q6IENvbW1vbk9uQmVoYWxmT2ZSZXF1ZXN0ID0ge1xuICAgICAgICAgICAgLi4ucmVxdWVzdCxcbiAgICAgICAgICAgIC4uLihhd2FpdCB0aGlzLmluaXRpYWxpemVCYXNlUmVxdWVzdChyZXF1ZXN0KSksXG4gICAgICAgIH07XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBkaXNjb3ZlcmVkQXV0aG9yaXR5ID0gYXdhaXQgdGhpcy5jcmVhdGVBdXRob3JpdHkoXG4gICAgICAgICAgICAgICAgdmFsaWRSZXF1ZXN0LmF1dGhvcml0eSxcbiAgICAgICAgICAgICAgICB2YWxpZFJlcXVlc3QuY29ycmVsYXRpb25JZCxcbiAgICAgICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5henVyZUNsb3VkT3B0aW9uc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IG9uQmVoYWxmT2ZDb25maWcgPSBhd2FpdCB0aGlzLmJ1aWxkT2F1dGhDbGllbnRDb25maWd1cmF0aW9uKFxuICAgICAgICAgICAgICAgIGRpc2NvdmVyZWRBdXRob3JpdHksXG4gICAgICAgICAgICAgICAgdmFsaWRSZXF1ZXN0LmNvcnJlbGF0aW9uSWQsXG4gICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICB1bmRlZmluZWRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBvYm9DbGllbnQgPSBuZXcgT25CZWhhbGZPZkNsaWVudChvbkJlaGFsZk9mQ29uZmlnKTtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgXCJPbiBiZWhhbGYgb2YgY2xpZW50IGNyZWF0ZWRcIixcbiAgICAgICAgICAgICAgICB2YWxpZFJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBvYm9DbGllbnQuYWNxdWlyZVRva2VuKHZhbGlkUmVxdWVzdCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgQXV0aEVycm9yKSB7XG4gICAgICAgICAgICAgICAgZS5zZXRDb3JyZWxhdGlvbklkKHZhbGlkUmVxdWVzdC5jb3JyZWxhdGlvbklkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQGludGVybmFsXG4gKiBDaGVja3MgaWYgYSBnaXZlbiBkYXRlIHN0cmluZyBpcyBpbiBJU08gODYwMSBmb3JtYXQuXG4gKlxuICogQHBhcmFtIGRhdGVTdHJpbmcgLSBUaGUgZGF0ZSBzdHJpbmcgdG8gYmUgY2hlY2tlZC5cbiAqIEByZXR1cm5zIGJvb2xlYW4gLSBSZXR1cm5zIHRydWUgaWYgdGhlIGRhdGUgc3RyaW5nIGlzIGluIElTTyA4NjAxIGZvcm1hdCwgb3RoZXJ3aXNlIGZhbHNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNJc284NjAxKGRhdGVTdHJpbmc6IG51bWJlciB8IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGlmICh0eXBlb2YgZGF0ZVN0cmluZyAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHJpbmcpO1xuICAgIHJldHVybiAhaXNOYU4oZGF0ZS5nZXRUaW1lKCkpICYmIGRhdGUudG9JU09TdHJpbmcoKSA9PT0gZGF0ZVN0cmluZztcbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgICBIZWFkZXJOYW1lcyxcbiAgICBJTmV0d29ya01vZHVsZSxcbiAgICBOZXR3b3JrUmVxdWVzdE9wdGlvbnMsXG4gICAgTmV0d29ya1Jlc3BvbnNlLFxufSBmcm9tIFwiQGF6dXJlL21zYWwtY29tbW9uL25vZGVcIjtcbmltcG9ydCB7IElIdHRwUmV0cnlQb2xpY3kgfSBmcm9tIFwiLi4vcmV0cnkvSUh0dHBSZXRyeVBvbGljeS5qc1wiO1xuaW1wb3J0IHsgSHR0cE1ldGhvZCB9IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcblxuZXhwb3J0IGNsYXNzIEh0dHBDbGllbnRXaXRoUmV0cmllcyBpbXBsZW1lbnRzIElOZXR3b3JrTW9kdWxlIHtcbiAgICBwcml2YXRlIGh0dHBDbGllbnROb1JldHJpZXM6IElOZXR3b3JrTW9kdWxlO1xuICAgIHByaXZhdGUgcmV0cnlQb2xpY3k6IElIdHRwUmV0cnlQb2xpY3k7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgaHR0cENsaWVudE5vUmV0cmllczogSU5ldHdvcmtNb2R1bGUsXG4gICAgICAgIHJldHJ5UG9saWN5OiBJSHR0cFJldHJ5UG9saWN5XG4gICAgKSB7XG4gICAgICAgIHRoaXMuaHR0cENsaWVudE5vUmV0cmllcyA9IGh0dHBDbGllbnROb1JldHJpZXM7XG4gICAgICAgIHRoaXMucmV0cnlQb2xpY3kgPSByZXRyeVBvbGljeTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHNlbmROZXR3b3JrUmVxdWVzdEFzeW5jSGVscGVyPFQ+KFxuICAgICAgICBodHRwTWV0aG9kOiBIdHRwTWV0aG9kLFxuICAgICAgICB1cmw6IHN0cmluZyxcbiAgICAgICAgb3B0aW9ucz86IE5ldHdvcmtSZXF1ZXN0T3B0aW9uc1xuICAgICk6IFByb21pc2U8TmV0d29ya1Jlc3BvbnNlPFQ+PiB7XG4gICAgICAgIGlmIChodHRwTWV0aG9kID09PSBIdHRwTWV0aG9kLkdFVCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudE5vUmV0cmllcy5zZW5kR2V0UmVxdWVzdEFzeW5jKHVybCwgb3B0aW9ucyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50Tm9SZXRyaWVzLnNlbmRQb3N0UmVxdWVzdEFzeW5jKHVybCwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHNlbmROZXR3b3JrUmVxdWVzdEFzeW5jPFQ+KFxuICAgICAgICBodHRwTWV0aG9kOiBIdHRwTWV0aG9kLFxuICAgICAgICB1cmw6IHN0cmluZyxcbiAgICAgICAgb3B0aW9ucz86IE5ldHdvcmtSZXF1ZXN0T3B0aW9uc1xuICAgICk6IFByb21pc2U8TmV0d29ya1Jlc3BvbnNlPFQ+PiB7XG4gICAgICAgIC8vIHRoZSB1bmRlcmx5aW5nIG5ldHdvcmsgbW9kdWxlIChjdXN0b20gb3IgSHR0cENsaWVudCkgd2lsbCBtYWtlIHRoZSBjYWxsXG4gICAgICAgIGxldCByZXNwb25zZTogTmV0d29ya1Jlc3BvbnNlPFQ+ID1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZE5ldHdvcmtSZXF1ZXN0QXN5bmNIZWxwZXIoaHR0cE1ldGhvZCwgdXJsLCBvcHRpb25zKTtcblxuICAgICAgICBsZXQgY3VycmVudFJldHJ5OiBudW1iZXIgPSAwO1xuICAgICAgICB3aGlsZSAoXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJldHJ5UG9saWN5LnBhdXNlRm9yUmV0cnkoXG4gICAgICAgICAgICAgICAgcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRSZXRyeSxcbiAgICAgICAgICAgICAgICByZXNwb25zZS5oZWFkZXJzW0hlYWRlck5hbWVzLlJFVFJZX0FGVEVSXVxuICAgICAgICAgICAgKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kTmV0d29ya1JlcXVlc3RBc3luY0hlbHBlcihcbiAgICAgICAgICAgICAgICBodHRwTWV0aG9kLFxuICAgICAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgICAgICBvcHRpb25zXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY3VycmVudFJldHJ5Kys7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIHNlbmRHZXRSZXF1ZXN0QXN5bmM8VD4oXG4gICAgICAgIHVybDogc3RyaW5nLFxuICAgICAgICBvcHRpb25zPzogTmV0d29ya1JlcXVlc3RPcHRpb25zXG4gICAgKTogUHJvbWlzZTxOZXR3b3JrUmVzcG9uc2U8VD4+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZE5ldHdvcmtSZXF1ZXN0QXN5bmMoSHR0cE1ldGhvZC5HRVQsIHVybCwgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIHNlbmRQb3N0UmVxdWVzdEFzeW5jPFQ+KFxuICAgICAgICB1cmw6IHN0cmluZyxcbiAgICAgICAgb3B0aW9ucz86IE5ldHdvcmtSZXF1ZXN0T3B0aW9uc1xuICAgICk6IFByb21pc2U8TmV0d29ya1Jlc3BvbnNlPFQ+PiB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbmROZXR3b3JrUmVxdWVzdEFzeW5jKEh0dHBNZXRob2QuUE9TVCwgdXJsLCBvcHRpb25zKTtcbiAgICB9XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gICAgQXV0aEVycm9yLFxuICAgIEF1dGhvcml0eSxcbiAgICBDbGllbnRBdXRoRXJyb3JDb2RlcyxcbiAgICBDb25zdGFudHMsXG4gICAgSGVhZGVyTmFtZXMsXG4gICAgSU5ldHdvcmtNb2R1bGUsXG4gICAgTG9nZ2VyLFxuICAgIE5ldHdvcmtSZXF1ZXN0T3B0aW9ucyxcbiAgICBOZXR3b3JrUmVzcG9uc2UsXG4gICAgUmVzcG9uc2VIYW5kbGVyLFxuICAgIFNlcnZlckF1dGhvcml6YXRpb25Ub2tlblJlc3BvbnNlLFxuICAgIFRpbWVVdGlscyxcbiAgICBjcmVhdGVDbGllbnRBdXRoRXJyb3IsXG4gICAgQXV0aGVudGljYXRpb25SZXN1bHQsXG4gICAgVXJsU3RyaW5nLFxufSBmcm9tIFwiQGF6dXJlL21zYWwtY29tbW9uL25vZGVcIjtcbmltcG9ydCB7IE1hbmFnZWRJZGVudGl0eUlkIH0gZnJvbSBcIi4uLy4uL2NvbmZpZy9NYW5hZ2VkSWRlbnRpdHlJZC5qc1wiO1xuaW1wb3J0IHsgTWFuYWdlZElkZW50aXR5UmVxdWVzdFBhcmFtZXRlcnMgfSBmcm9tIFwiLi4vLi4vY29uZmlnL01hbmFnZWRJZGVudGl0eVJlcXVlc3RQYXJhbWV0ZXJzLmpzXCI7XG5pbXBvcnQgeyBDcnlwdG9Qcm92aWRlciB9IGZyb20gXCIuLi8uLi9jcnlwdG8vQ3J5cHRvUHJvdmlkZXIuanNcIjtcbmltcG9ydCB7IE1hbmFnZWRJZGVudGl0eVJlcXVlc3QgfSBmcm9tIFwiLi4vLi4vcmVxdWVzdC9NYW5hZ2VkSWRlbnRpdHlSZXF1ZXN0LmpzXCI7XG5pbXBvcnQgeyBIdHRwTWV0aG9kLCBNYW5hZ2VkSWRlbnRpdHlJZFR5cGUgfSBmcm9tIFwiLi4vLi4vdXRpbHMvQ29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBNYW5hZ2VkSWRlbnRpdHlUb2tlblJlc3BvbnNlIH0gZnJvbSBcIi4uLy4uL3Jlc3BvbnNlL01hbmFnZWRJZGVudGl0eVRva2VuUmVzcG9uc2UuanNcIjtcbmltcG9ydCB7IE5vZGVTdG9yYWdlIH0gZnJvbSBcIi4uLy4uL2NhY2hlL05vZGVTdG9yYWdlLmpzXCI7XG5pbXBvcnQge1xuICAgIE1hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMsXG4gICAgY3JlYXRlTWFuYWdlZElkZW50aXR5RXJyb3IsXG59IGZyb20gXCIuLi8uLi9lcnJvci9NYW5hZ2VkSWRlbnRpdHlFcnJvci5qc1wiO1xuaW1wb3J0IHsgaXNJc284NjAxIH0gZnJvbSBcIi4uLy4uL3V0aWxzL1RpbWVVdGlscy5qc1wiO1xuaW1wb3J0IHsgSHR0cENsaWVudFdpdGhSZXRyaWVzIH0gZnJvbSBcIi4uLy4uL25ldHdvcmsvSHR0cENsaWVudFdpdGhSZXRyaWVzLmpzXCI7XG5cbi8qKlxuICogTWFuYWdlZCBJZGVudGl0eSBVc2VyIEFzc2lnbmVkIElkIFF1ZXJ5IFBhcmFtZXRlciBOYW1lc1xuICovXG5leHBvcnQgY29uc3QgTWFuYWdlZElkZW50aXR5VXNlckFzc2lnbmVkSWRRdWVyeVBhcmFtZXRlck5hbWVzID0ge1xuICAgIE1BTkFHRURfSURFTlRJVFlfQ0xJRU5UX0lEOiBcImNsaWVudF9pZFwiLFxuICAgIE1BTkFHRURfSURFTlRJVFlfT0JKRUNUX0lEOiBcIm9iamVjdF9pZFwiLFxuICAgIE1BTkFHRURfSURFTlRJVFlfUkVTT1VSQ0VfSURfSU1EUzogXCJtc2lfcmVzX2lkXCIsXG4gICAgTUFOQUdFRF9JREVOVElUWV9SRVNPVVJDRV9JRF9OT05fSU1EUzogXCJtaV9yZXNfaWRcIixcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBNYW5hZ2VkSWRlbnRpdHlVc2VyQXNzaWduZWRJZFF1ZXJ5UGFyYW1ldGVyTmFtZXMgPVxuICAgICh0eXBlb2YgTWFuYWdlZElkZW50aXR5VXNlckFzc2lnbmVkSWRRdWVyeVBhcmFtZXRlck5hbWVzKVtrZXlvZiB0eXBlb2YgTWFuYWdlZElkZW50aXR5VXNlckFzc2lnbmVkSWRRdWVyeVBhcmFtZXRlck5hbWVzXTtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEJhc2VNYW5hZ2VkSWRlbnRpdHlTb3VyY2Uge1xuICAgIHByb3RlY3RlZCBsb2dnZXI6IExvZ2dlcjtcbiAgICBwcml2YXRlIG5vZGVTdG9yYWdlOiBOb2RlU3RvcmFnZTtcbiAgICBwcml2YXRlIG5ldHdvcmtDbGllbnQ6IElOZXR3b3JrTW9kdWxlO1xuICAgIHByaXZhdGUgY3J5cHRvUHJvdmlkZXI6IENyeXB0b1Byb3ZpZGVyO1xuICAgIHByaXZhdGUgZGlzYWJsZUludGVybmFsUmV0cmllczogYm9vbGVhbjtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBsb2dnZXI6IExvZ2dlcixcbiAgICAgICAgbm9kZVN0b3JhZ2U6IE5vZGVTdG9yYWdlLFxuICAgICAgICBuZXR3b3JrQ2xpZW50OiBJTmV0d29ya01vZHVsZSxcbiAgICAgICAgY3J5cHRvUHJvdmlkZXI6IENyeXB0b1Byb3ZpZGVyLFxuICAgICAgICBkaXNhYmxlSW50ZXJuYWxSZXRyaWVzOiBib29sZWFuXG4gICAgKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyID0gbG9nZ2VyO1xuICAgICAgICB0aGlzLm5vZGVTdG9yYWdlID0gbm9kZVN0b3JhZ2U7XG4gICAgICAgIHRoaXMubmV0d29ya0NsaWVudCA9IG5ldHdvcmtDbGllbnQ7XG4gICAgICAgIHRoaXMuY3J5cHRvUHJvdmlkZXIgPSBjcnlwdG9Qcm92aWRlcjtcbiAgICAgICAgdGhpcy5kaXNhYmxlSW50ZXJuYWxSZXRyaWVzID0gZGlzYWJsZUludGVybmFsUmV0cmllcztcbiAgICB9XG5cbiAgICBhYnN0cmFjdCBjcmVhdGVSZXF1ZXN0KFxuICAgICAgICByZXF1ZXN0OiBzdHJpbmcsXG4gICAgICAgIG1hbmFnZWRJZGVudGl0eUlkOiBNYW5hZ2VkSWRlbnRpdHlJZFxuICAgICk6IE1hbmFnZWRJZGVudGl0eVJlcXVlc3RQYXJhbWV0ZXJzO1xuXG4gICAgcHVibGljIGFzeW5jIGdldFNlcnZlclRva2VuUmVzcG9uc2VBc3luYyhcbiAgICAgICAgcmVzcG9uc2U6IE5ldHdvcmtSZXNwb25zZTxNYW5hZ2VkSWRlbnRpdHlUb2tlblJlc3BvbnNlPixcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuICAgICAgICBfbmV0d29ya0NsaWVudDogSU5ldHdvcmtNb2R1bGUsXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgICAgICAgX25ldHdvcmtSZXF1ZXN0OiBNYW5hZ2VkSWRlbnRpdHlSZXF1ZXN0UGFyYW1ldGVycyxcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuICAgICAgICBfbmV0d29ya1JlcXVlc3RPcHRpb25zOiBOZXR3b3JrUmVxdWVzdE9wdGlvbnNcbiAgICApOiBQcm9taXNlPFNlcnZlckF1dGhvcml6YXRpb25Ub2tlblJlc3BvbnNlPiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZlclRva2VuUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRTZXJ2ZXJUb2tlblJlc3BvbnNlKFxuICAgICAgICByZXNwb25zZTogTmV0d29ya1Jlc3BvbnNlPE1hbmFnZWRJZGVudGl0eVRva2VuUmVzcG9uc2U+XG4gICAgKTogU2VydmVyQXV0aG9yaXphdGlvblRva2VuUmVzcG9uc2Uge1xuICAgICAgICBsZXQgcmVmcmVzaEluLCBleHBpcmVzSW46IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHJlc3BvbnNlLmJvZHkuZXhwaXJlc19vbikge1xuICAgICAgICAgICAgLy8gaWYgdGhlIGV4cGlyZXNfb24gZmllbGQgaW4gdGhlIHJlc3BvbnNlIGJvZHkgaXMgYSBzdHJpbmcgYW5kIGluIElTTyA4NjAxIGZvcm1hdCwgY29udmVydCBpdCB0byBhIFVuaXggdGltZXN0YW1wIChzZWNvbmRzIHNpbmNlIGVwb2NoKVxuICAgICAgICAgICAgaWYgKGlzSXNvODYwMShyZXNwb25zZS5ib2R5LmV4cGlyZXNfb24pKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UuYm9keS5leHBpcmVzX29uID1cbiAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUocmVzcG9uc2UuYm9keS5leHBpcmVzX29uKS5nZXRUaW1lKCkgLyAxMDAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBleHBpcmVzSW4gPSByZXNwb25zZS5ib2R5LmV4cGlyZXNfb24gLSBUaW1lVXRpbHMubm93U2Vjb25kcygpO1xuXG4gICAgICAgICAgICAvLyBjb21wdXRlIHJlZnJlc2hfaW4gYXMgMS8yIG9mIGV4cGlyZXNfaW4sIGJ1dCBvbmx5IGlmIGV4cGlyZXNfaW4gPiAyaFxuICAgICAgICAgICAgaWYgKGV4cGlyZXNJbiA+IDIgKiAzNjAwKSB7XG4gICAgICAgICAgICAgICAgcmVmcmVzaEluID0gZXhwaXJlc0luIC8gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNlcnZlclRva2VuUmVzcG9uc2U6IFNlcnZlckF1dGhvcml6YXRpb25Ub2tlblJlc3BvbnNlID0ge1xuICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG5cbiAgICAgICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgICAgICAgIGFjY2Vzc190b2tlbjogcmVzcG9uc2UuYm9keS5hY2Nlc3NfdG9rZW4sXG4gICAgICAgICAgICBleHBpcmVzX2luOiBleHBpcmVzSW4sXG4gICAgICAgICAgICBzY29wZTogcmVzcG9uc2UuYm9keS5yZXNvdXJjZSxcbiAgICAgICAgICAgIHRva2VuX3R5cGU6IHJlc3BvbnNlLmJvZHkudG9rZW5fdHlwZSxcbiAgICAgICAgICAgIHJlZnJlc2hfaW46IHJlZnJlc2hJbixcblxuICAgICAgICAgICAgLy8gZXJyb3JcbiAgICAgICAgICAgIGNvcnJlbGF0aW9uX2lkOlxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLmJvZHkuY29ycmVsYXRpb25faWQgfHwgcmVzcG9uc2UuYm9keS5jb3JyZWxhdGlvbklkLFxuICAgICAgICAgICAgZXJyb3I6XG4gICAgICAgICAgICAgICAgdHlwZW9mIHJlc3BvbnNlLmJvZHkuZXJyb3IgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgPyByZXNwb25zZS5ib2R5LmVycm9yXG4gICAgICAgICAgICAgICAgICAgIDogcmVzcG9uc2UuYm9keS5lcnJvcj8uY29kZSxcbiAgICAgICAgICAgIGVycm9yX2Rlc2NyaXB0aW9uOlxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLmJvZHkubWVzc2FnZSB8fFxuICAgICAgICAgICAgICAgICh0eXBlb2YgcmVzcG9uc2UuYm9keS5lcnJvciA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgICAgICA/IHJlc3BvbnNlLmJvZHkuZXJyb3JfZGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgICAgOiByZXNwb25zZS5ib2R5LmVycm9yPy5tZXNzYWdlKSxcbiAgICAgICAgICAgIGVycm9yX2NvZGVzOiByZXNwb25zZS5ib2R5LmVycm9yX2NvZGVzLFxuICAgICAgICAgICAgdGltZXN0YW1wOiByZXNwb25zZS5ib2R5LnRpbWVzdGFtcCxcbiAgICAgICAgICAgIHRyYWNlX2lkOiByZXNwb25zZS5ib2R5LnRyYWNlX2lkLFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBzZXJ2ZXJUb2tlblJlc3BvbnNlO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBhY3F1aXJlVG9rZW5XaXRoTWFuYWdlZElkZW50aXR5KFxuICAgICAgICBtYW5hZ2VkSWRlbnRpdHlSZXF1ZXN0OiBNYW5hZ2VkSWRlbnRpdHlSZXF1ZXN0LFxuICAgICAgICBtYW5hZ2VkSWRlbnRpdHlJZDogTWFuYWdlZElkZW50aXR5SWQsXG4gICAgICAgIGZha2VBdXRob3JpdHk6IEF1dGhvcml0eSxcbiAgICAgICAgcmVmcmVzaEFjY2Vzc1Rva2VuPzogYm9vbGVhblxuICAgICk6IFByb21pc2U8QXV0aGVudGljYXRpb25SZXN1bHQ+IHtcbiAgICAgICAgY29uc3QgbmV0d29ya1JlcXVlc3Q6IE1hbmFnZWRJZGVudGl0eVJlcXVlc3RQYXJhbWV0ZXJzID1cbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUmVxdWVzdChcbiAgICAgICAgICAgICAgICBtYW5hZ2VkSWRlbnRpdHlSZXF1ZXN0LnJlc291cmNlLFxuICAgICAgICAgICAgICAgIG1hbmFnZWRJZGVudGl0eUlkXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSBuZXR3b3JrUmVxdWVzdC5oZWFkZXJzO1xuICAgICAgICBoZWFkZXJzW0hlYWRlck5hbWVzLkNPTlRFTlRfVFlQRV0gPSBDb25zdGFudHMuVVJMX0ZPUk1fQ09OVEVOVF9UWVBFO1xuXG4gICAgICAgIGNvbnN0IG5ldHdvcmtSZXF1ZXN0T3B0aW9uczogTmV0d29ya1JlcXVlc3RPcHRpb25zID0geyBoZWFkZXJzIH07XG5cbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKG5ldHdvcmtSZXF1ZXN0LmJvZHlQYXJhbWV0ZXJzKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIG5ldHdvcmtSZXF1ZXN0T3B0aW9ucy5ib2R5ID1cbiAgICAgICAgICAgICAgICBuZXR3b3JrUmVxdWVzdC5jb21wdXRlUGFyYW1ldGVyc0JvZHlTdHJpbmcoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbml0aWFsaXplcyB0aGUgbmV0d29yayBjbGllbnQgaGVscGVyIGJhc2VkIG9uIHRoZSByZXRyeSBwb2xpY3kgY29uZmlndXJhdGlvbi5cbiAgICAgICAgICogSWYgaW50ZXJuYWwgcmV0cmllcyBhcmUgZGlzYWJsZWQsIGl0IHVzZXMgdGhlIHByb3ZpZGVkIG5ldHdvcmsgY2xpZW50IGRpcmVjdGx5LlxuICAgICAgICAgKiBPdGhlcndpc2UsIGl0IHdyYXBzIHRoZSBuZXR3b3JrIGNsaWVudCB3aXRoIGFuIEhUVFAgY2xpZW50IHRoYXQgc3VwcG9ydHMgcmV0cmllcy5cbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IG5ldHdvcmtDbGllbnRIZWxwZXI6IElOZXR3b3JrTW9kdWxlID0gdGhpcy5kaXNhYmxlSW50ZXJuYWxSZXRyaWVzXG4gICAgICAgICAgICA/IHRoaXMubmV0d29ya0NsaWVudFxuICAgICAgICAgICAgOiBuZXcgSHR0cENsaWVudFdpdGhSZXRyaWVzKFxuICAgICAgICAgICAgICAgICAgdGhpcy5uZXR3b3JrQ2xpZW50LFxuICAgICAgICAgICAgICAgICAgbmV0d29ya1JlcXVlc3QucmV0cnlQb2xpY3lcbiAgICAgICAgICAgICAgKTtcblxuICAgICAgICBjb25zdCByZXFUaW1lc3RhbXAgPSBUaW1lVXRpbHMubm93U2Vjb25kcygpO1xuICAgICAgICBsZXQgcmVzcG9uc2U6IE5ldHdvcmtSZXNwb25zZTxNYW5hZ2VkSWRlbnRpdHlUb2tlblJlc3BvbnNlPjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFNvdXJjZXMgdGhhdCBzZW5kIFBPU1QgcmVxdWVzdHM6IENsb3VkIFNoZWxsXG4gICAgICAgICAgICBpZiAobmV0d29ya1JlcXVlc3QuaHR0cE1ldGhvZCA9PT0gSHR0cE1ldGhvZC5QT1NUKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UgPVxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBuZXR3b3JrQ2xpZW50SGVscGVyLnNlbmRQb3N0UmVxdWVzdEFzeW5jPE1hbmFnZWRJZGVudGl0eVRva2VuUmVzcG9uc2U+KFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV0d29ya1JlcXVlc3QuY29tcHV0ZVVyaSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV0d29ya1JlcXVlc3RPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgLy8gU291cmNlcyB0aGF0IHNlbmQgR0VUIHJlcXVlc3RzOiBBcHAgU2VydmljZSwgQXp1cmUgQXJjLCBJTURTLCBTZXJ2aWNlIEZhYnJpY1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZSA9XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IG5ldHdvcmtDbGllbnRIZWxwZXIuc2VuZEdldFJlcXVlc3RBc3luYzxNYW5hZ2VkSWRlbnRpdHlUb2tlblJlc3BvbnNlPihcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldHdvcmtSZXF1ZXN0LmNvbXB1dGVVcmkoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldHdvcmtSZXF1ZXN0T3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgQXV0aEVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JDb2Rlcy5uZXR3b3JrRXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2VIYW5kbGVyID0gbmV3IFJlc3BvbnNlSGFuZGxlcihcbiAgICAgICAgICAgIG1hbmFnZWRJZGVudGl0eUlkLmlkLFxuICAgICAgICAgICAgdGhpcy5ub2RlU3RvcmFnZSxcbiAgICAgICAgICAgIHRoaXMuY3J5cHRvUHJvdmlkZXIsXG4gICAgICAgICAgICB0aGlzLmxvZ2dlcixcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBudWxsXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3Qgc2VydmVyVG9rZW5SZXNwb25zZTogU2VydmVyQXV0aG9yaXphdGlvblRva2VuUmVzcG9uc2UgPVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5nZXRTZXJ2ZXJUb2tlblJlc3BvbnNlQXN5bmMoXG4gICAgICAgICAgICAgICAgcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgbmV0d29ya0NsaWVudEhlbHBlcixcbiAgICAgICAgICAgICAgICBuZXR3b3JrUmVxdWVzdCxcbiAgICAgICAgICAgICAgICBuZXR3b3JrUmVxdWVzdE9wdGlvbnNcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgcmVzcG9uc2VIYW5kbGVyLnZhbGlkYXRlVG9rZW5SZXNwb25zZShcbiAgICAgICAgICAgIHNlcnZlclRva2VuUmVzcG9uc2UsXG4gICAgICAgICAgICByZWZyZXNoQWNjZXNzVG9rZW5cbiAgICAgICAgKTtcblxuICAgICAgICAvLyBjYWNoZXMgdGhlIHRva2VuXG4gICAgICAgIHJldHVybiByZXNwb25zZUhhbmRsZXIuaGFuZGxlU2VydmVyVG9rZW5SZXNwb25zZShcbiAgICAgICAgICAgIHNlcnZlclRva2VuUmVzcG9uc2UsXG4gICAgICAgICAgICBmYWtlQXV0aG9yaXR5LFxuICAgICAgICAgICAgcmVxVGltZXN0YW1wLFxuICAgICAgICAgICAgbWFuYWdlZElkZW50aXR5UmVxdWVzdFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRNYW5hZ2VkSWRlbnRpdHlVc2VyQXNzaWduZWRJZFF1ZXJ5UGFyYW1ldGVyS2V5KFxuICAgICAgICBtYW5hZ2VkSWRlbnRpdHlJZFR5cGU6IE1hbmFnZWRJZGVudGl0eUlkVHlwZSxcbiAgICAgICAgaW1kcz86IGJvb2xlYW5cbiAgICApOiBzdHJpbmcge1xuICAgICAgICBzd2l0Y2ggKG1hbmFnZWRJZGVudGl0eUlkVHlwZSkge1xuICAgICAgICAgICAgY2FzZSBNYW5hZ2VkSWRlbnRpdHlJZFR5cGUuVVNFUl9BU1NJR05FRF9DTElFTlRfSUQ6XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcbiAgICAgICAgICAgICAgICAgICAgXCJbTWFuYWdlZCBJZGVudGl0eV0gQWRkaW5nIHVzZXIgYXNzaWduZWQgY2xpZW50IGlkIHRvIHRoZSByZXF1ZXN0LlwiXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gTWFuYWdlZElkZW50aXR5VXNlckFzc2lnbmVkSWRRdWVyeVBhcmFtZXRlck5hbWVzLk1BTkFHRURfSURFTlRJVFlfQ0xJRU5UX0lEO1xuXG4gICAgICAgICAgICBjYXNlIE1hbmFnZWRJZGVudGl0eUlkVHlwZS5VU0VSX0FTU0lHTkVEX1JFU09VUkNFX0lEOlxuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXG4gICAgICAgICAgICAgICAgICAgIFwiW01hbmFnZWQgSWRlbnRpdHldIEFkZGluZyB1c2VyIGFzc2lnbmVkIHJlc291cmNlIGlkIHRvIHRoZSByZXF1ZXN0LlwiXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW1kc1xuICAgICAgICAgICAgICAgICAgICA/IE1hbmFnZWRJZGVudGl0eVVzZXJBc3NpZ25lZElkUXVlcnlQYXJhbWV0ZXJOYW1lcy5NQU5BR0VEX0lERU5USVRZX1JFU09VUkNFX0lEX0lNRFNcbiAgICAgICAgICAgICAgICAgICAgOiBNYW5hZ2VkSWRlbnRpdHlVc2VyQXNzaWduZWRJZFF1ZXJ5UGFyYW1ldGVyTmFtZXMuTUFOQUdFRF9JREVOVElUWV9SRVNPVVJDRV9JRF9OT05fSU1EUztcblxuICAgICAgICAgICAgY2FzZSBNYW5hZ2VkSWRlbnRpdHlJZFR5cGUuVVNFUl9BU1NJR05FRF9PQkpFQ1RfSUQ6XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcbiAgICAgICAgICAgICAgICAgICAgXCJbTWFuYWdlZCBJZGVudGl0eV0gQWRkaW5nIHVzZXIgYXNzaWduZWQgb2JqZWN0IGlkIHRvIHRoZSByZXF1ZXN0LlwiXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gTWFuYWdlZElkZW50aXR5VXNlckFzc2lnbmVkSWRRdWVyeVBhcmFtZXRlck5hbWVzLk1BTkFHRURfSURFTlRJVFlfT0JKRUNUX0lEO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBjcmVhdGVNYW5hZ2VkSWRlbnRpdHlFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy5pbnZhbGlkTWFuYWdlZElkZW50aXR5SWRUeXBlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0VmFsaWRhdGVkRW52VmFyaWFibGVVcmxTdHJpbmcgPSAoXG4gICAgICAgIGVudlZhcmlhYmxlU3RyaW5nTmFtZTogc3RyaW5nLFxuICAgICAgICBlbnZWYXJpYWJsZTogc3RyaW5nLFxuICAgICAgICBzb3VyY2VOYW1lOiBzdHJpbmcsXG4gICAgICAgIGxvZ2dlcjogTG9nZ2VyXG4gICAgKTogc3RyaW5nID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVXJsU3RyaW5nKGVudlZhcmlhYmxlKS51cmxTdHJpbmc7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIuaW5mbyhcbiAgICAgICAgICAgICAgICBgW01hbmFnZWQgSWRlbnRpdHldICR7c291cmNlTmFtZX0gbWFuYWdlZCBpZGVudGl0eSBpcyB1bmF2YWlsYWJsZSBiZWNhdXNlIHRoZSAnJHtlbnZWYXJpYWJsZVN0cmluZ05hbWV9JyBlbnZpcm9ubWVudCB2YXJpYWJsZSBpcyBtYWxmb3JtZWQuYFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgdGhyb3cgY3JlYXRlTWFuYWdlZElkZW50aXR5RXJyb3IoXG4gICAgICAgICAgICAgICAgTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlc1xuICAgICAgICAgICAgICAgICAgICAuTXNpRW52aXJvbm1lbnRWYXJpYWJsZVVybE1hbGZvcm1lZEVycm9yQ29kZXNbXG4gICAgICAgICAgICAgICAgICAgIGVudlZhcmlhYmxlU3RyaW5nTmFtZVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICAgIEF1dGhFcnJvcixcbiAgICBDbGllbnRBdXRoRXJyb3JDb2RlcyxcbiAgICBjcmVhdGVDbGllbnRBdXRoRXJyb3IsXG4gICAgSHR0cFN0YXR1cyxcbiAgICBJTmV0d29ya01vZHVsZSxcbiAgICBOZXR3b3JrUmVzcG9uc2UsXG4gICAgTmV0d29ya1JlcXVlc3RPcHRpb25zLFxuICAgIExvZ2dlcixcbiAgICBTZXJ2ZXJBdXRob3JpemF0aW9uVG9rZW5SZXNwb25zZSxcbn0gZnJvbSBcIkBhenVyZS9tc2FsLWNvbW1vbi9ub2RlXCI7XG5pbXBvcnQgeyBNYW5hZ2VkSWRlbnRpdHlSZXF1ZXN0UGFyYW1ldGVycyB9IGZyb20gXCIuLi8uLi9jb25maWcvTWFuYWdlZElkZW50aXR5UmVxdWVzdFBhcmFtZXRlcnMuanNcIjtcbmltcG9ydCB7IEJhc2VNYW5hZ2VkSWRlbnRpdHlTb3VyY2UgfSBmcm9tIFwiLi9CYXNlTWFuYWdlZElkZW50aXR5U291cmNlLmpzXCI7XG5pbXBvcnQgeyBDcnlwdG9Qcm92aWRlciB9IGZyb20gXCIuLi8uLi9jcnlwdG8vQ3J5cHRvUHJvdmlkZXIuanNcIjtcbmltcG9ydCB7XG4gICAgTWFuYWdlZElkZW50aXR5RXJyb3JDb2RlcyxcbiAgICBjcmVhdGVNYW5hZ2VkSWRlbnRpdHlFcnJvcixcbn0gZnJvbSBcIi4uLy4uL2Vycm9yL01hbmFnZWRJZGVudGl0eUVycm9yLmpzXCI7XG5pbXBvcnQge1xuICAgIEFQSV9WRVJTSU9OX1FVRVJZX1BBUkFNRVRFUl9OQU1FLFxuICAgIEFVVEhPUklaQVRJT05fSEVBREVSX05BTUUsXG4gICAgQVpVUkVfQVJDX1NFQ1JFVF9GSUxFX01BWF9TSVpFX0JZVEVTLFxuICAgIEh0dHBNZXRob2QsXG4gICAgTUVUQURBVEFfSEVBREVSX05BTUUsXG4gICAgTWFuYWdlZElkZW50aXR5RW52aXJvbm1lbnRWYXJpYWJsZU5hbWVzLFxuICAgIE1hbmFnZWRJZGVudGl0eUlkVHlwZSxcbiAgICBNYW5hZ2VkSWRlbnRpdHlTb3VyY2VOYW1lcyxcbiAgICBSRVNPVVJDRV9CT0RZX09SX1FVRVJZX1BBUkFNRVRFUl9OQU1FLFxufSBmcm9tIFwiLi4vLi4vdXRpbHMvQ29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBOb2RlU3RvcmFnZSB9IGZyb20gXCIuLi8uLi9jYWNoZS9Ob2RlU3RvcmFnZS5qc1wiO1xuaW1wb3J0IHtcbiAgICBhY2Nlc3NTeW5jLFxuICAgIGNvbnN0YW50cyBhcyBmc0NvbnN0YW50cyxcbiAgICByZWFkRmlsZVN5bmMsXG4gICAgc3RhdFN5bmMsXG59IGZyb20gXCJmc1wiO1xuaW1wb3J0IHsgTWFuYWdlZElkZW50aXR5VG9rZW5SZXNwb25zZSB9IGZyb20gXCIuLi8uLi9yZXNwb25zZS9NYW5hZ2VkSWRlbnRpdHlUb2tlblJlc3BvbnNlLmpzXCI7XG5pbXBvcnQgeyBNYW5hZ2VkSWRlbnRpdHlJZCB9IGZyb20gXCIuLi8uLi9jb25maWcvTWFuYWdlZElkZW50aXR5SWQuanNcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5cbmV4cG9ydCBjb25zdCBBUkNfQVBJX1ZFUlNJT046IHN0cmluZyA9IFwiMjAxOS0xMS0wMVwiO1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfQVpVUkVfQVJDX0lERU5USVRZX0VORFBPSU5UOiBzdHJpbmcgPVxuICAgIFwiaHR0cDovLzEyNy4wLjAuMTo0MDM0Mi9tZXRhZGF0YS9pZGVudGl0eS9vYXV0aDIvdG9rZW5cIjtcbmNvbnN0IEhJTURTX0VYRUNVVEFCTEVfSEVMUEVSX1NUUklORyA9IFwiTi9BOiBoaW1kcyBleGVjdXRhYmxlIGV4aXN0c1wiO1xuXG50eXBlIEZpbGVQYXRoTWFwID0ge1xuICAgIHdpbjMyOiBzdHJpbmc7XG4gICAgbGludXg6IHN0cmluZztcbn07XG5cbmV4cG9ydCBjb25zdCBTVVBQT1JURURfQVpVUkVfQVJDX1BMQVRGT1JNUzogRmlsZVBhdGhNYXAgPSB7XG4gICAgd2luMzI6IGAke3Byb2Nlc3MuZW52W1wiUHJvZ3JhbURhdGFcIl19XFxcXEF6dXJlQ29ubmVjdGVkTWFjaGluZUFnZW50XFxcXFRva2Vuc1xcXFxgLFxuICAgIGxpbnV4OiBcIi92YXIvb3B0L2F6Y21hZ2VudC90b2tlbnMvXCIsXG59O1xuXG5leHBvcnQgY29uc3QgQVpVUkVfQVJDX0ZJTEVfREVURUNUSU9OOiBGaWxlUGF0aE1hcCA9IHtcbiAgICB3aW4zMjogYCR7cHJvY2Vzcy5lbnZbXCJQcm9ncmFtRmlsZXNcIl19XFxcXEF6dXJlQ29ubmVjdGVkTWFjaGluZUFnZW50XFxcXGhpbWRzLmV4ZWAsXG4gICAgbGludXg6IFwiL29wdC9hemNtYWdlbnQvYmluL2hpbWRzXCIsXG59O1xuXG4vKipcbiAqIE9yaWdpbmFsIHNvdXJjZSBvZiBjb2RlOiBodHRwczovL2dpdGh1Yi5jb20vQXp1cmUvYXp1cmUtc2RrLWZvci1uZXQvYmxvYi9tYWluL3Nkay9pZGVudGl0eS9BenVyZS5JZGVudGl0eS9zcmMvQXp1cmVBcmNNYW5hZ2VkSWRlbnRpdHlTb3VyY2UuY3NcbiAqL1xuZXhwb3J0IGNsYXNzIEF6dXJlQXJjIGV4dGVuZHMgQmFzZU1hbmFnZWRJZGVudGl0eVNvdXJjZSB7XG4gICAgcHJpdmF0ZSBpZGVudGl0eUVuZHBvaW50OiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgbG9nZ2VyOiBMb2dnZXIsXG4gICAgICAgIG5vZGVTdG9yYWdlOiBOb2RlU3RvcmFnZSxcbiAgICAgICAgbmV0d29ya0NsaWVudDogSU5ldHdvcmtNb2R1bGUsXG4gICAgICAgIGNyeXB0b1Byb3ZpZGVyOiBDcnlwdG9Qcm92aWRlcixcbiAgICAgICAgZGlzYWJsZUludGVybmFsUmV0cmllczogYm9vbGVhbixcbiAgICAgICAgaWRlbnRpdHlFbmRwb2ludDogc3RyaW5nXG4gICAgKSB7XG4gICAgICAgIHN1cGVyKFxuICAgICAgICAgICAgbG9nZ2VyLFxuICAgICAgICAgICAgbm9kZVN0b3JhZ2UsXG4gICAgICAgICAgICBuZXR3b3JrQ2xpZW50LFxuICAgICAgICAgICAgY3J5cHRvUHJvdmlkZXIsXG4gICAgICAgICAgICBkaXNhYmxlSW50ZXJuYWxSZXRyaWVzXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5pZGVudGl0eUVuZHBvaW50ID0gaWRlbnRpdHlFbmRwb2ludDtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldEVudmlyb25tZW50VmFyaWFibGVzKCk6IEFycmF5PHN0cmluZyB8IHVuZGVmaW5lZD4ge1xuICAgICAgICBsZXQgaWRlbnRpdHlFbmRwb2ludDogc3RyaW5nIHwgdW5kZWZpbmVkID1cbiAgICAgICAgICAgIHByb2Nlc3MuZW52W1xuICAgICAgICAgICAgICAgIE1hbmFnZWRJZGVudGl0eUVudmlyb25tZW50VmFyaWFibGVOYW1lcy5JREVOVElUWV9FTkRQT0lOVFxuICAgICAgICAgICAgXTtcbiAgICAgICAgbGV0IGltZHNFbmRwb2ludDogc3RyaW5nIHwgdW5kZWZpbmVkID1cbiAgICAgICAgICAgIHByb2Nlc3MuZW52W01hbmFnZWRJZGVudGl0eUVudmlyb25tZW50VmFyaWFibGVOYW1lcy5JTURTX0VORFBPSU5UXTtcblxuICAgICAgICAvLyBpZiBlaXRoZXIgb2YgdGhlIGlkZW50aXR5IG9yIGltZHMgZW5kcG9pbnRzIGFyZSB1bmRlZmluZWQsIGNoZWNrIGlmIHRoZSBoaW1kcyBleGVjdXRhYmxlIGV4aXN0c1xuICAgICAgICBpZiAoIWlkZW50aXR5RW5kcG9pbnQgfHwgIWltZHNFbmRwb2ludCkge1xuICAgICAgICAgICAgLy8gZ2V0IHRoZSBleHBlY3RlZCBXaW5kb3dzIG9yIExpbnV4IGZpbGUgcGF0aCBvZiB0aGUgaGltZHMgZXhlY3V0YWJsZVxuICAgICAgICAgICAgY29uc3QgZmlsZURldGVjdGlvblBhdGg6IHN0cmluZyA9XG4gICAgICAgICAgICAgICAgQVpVUkVfQVJDX0ZJTEVfREVURUNUSU9OW3Byb2Nlc3MucGxhdGZvcm0gYXMga2V5b2YgRmlsZVBhdGhNYXBdO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAqIGNoZWNrIGlmIHRoZSBoaW1kcyBleGVjdXRhYmxlIGV4aXN0cyBhbmQgaXRzIHBlcm1pc3Npb25zIGFsbG93IGl0IHRvIGJlIHJlYWRcbiAgICAgICAgICAgICAgICAgKiByZXR1cm5zIHVuZGVmaW5lZCBpZiB0cnVlLCB0aHJvd3MgYW4gZXJyb3Igb3RoZXJ3aXNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgYWNjZXNzU3luYyhcbiAgICAgICAgICAgICAgICAgICAgZmlsZURldGVjdGlvblBhdGgsXG4gICAgICAgICAgICAgICAgICAgIGZzQ29uc3RhbnRzLkZfT0sgfCBmc0NvbnN0YW50cy5SX09LXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGlkZW50aXR5RW5kcG9pbnQgPSBERUZBVUxUX0FaVVJFX0FSQ19JREVOVElUWV9FTkRQT0lOVDtcbiAgICAgICAgICAgICAgICBpbWRzRW5kcG9pbnQgPSBISU1EU19FWEVDVVRBQkxFX0hFTFBFUl9TVFJJTkc7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAqIGRvIG5vdGhpbmdcbiAgICAgICAgICAgICAgICAgKiBhY2Nlc3NTeW5jIHJldHVybnMgdW5kZWZpbmVkIG9uIHN1Y2Nlc3MsIGFuZCB0aHJvd3MgYW4gZXJyb3Igb24gZmFpbHVyZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFtpZGVudGl0eUVuZHBvaW50LCBpbWRzRW5kcG9pbnRdO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdHJ5Q3JlYXRlKFxuICAgICAgICBsb2dnZXI6IExvZ2dlcixcbiAgICAgICAgbm9kZVN0b3JhZ2U6IE5vZGVTdG9yYWdlLFxuICAgICAgICBuZXR3b3JrQ2xpZW50OiBJTmV0d29ya01vZHVsZSxcbiAgICAgICAgY3J5cHRvUHJvdmlkZXI6IENyeXB0b1Byb3ZpZGVyLFxuICAgICAgICBkaXNhYmxlSW50ZXJuYWxSZXRyaWVzOiBib29sZWFuLFxuICAgICAgICBtYW5hZ2VkSWRlbnRpdHlJZDogTWFuYWdlZElkZW50aXR5SWRcbiAgICApOiBBenVyZUFyYyB8IG51bGwge1xuICAgICAgICBjb25zdCBbaWRlbnRpdHlFbmRwb2ludCwgaW1kc0VuZHBvaW50XSA9XG4gICAgICAgICAgICBBenVyZUFyYy5nZXRFbnZpcm9ubWVudFZhcmlhYmxlcygpO1xuXG4gICAgICAgIC8vIGlmIGVpdGhlciBvZiB0aGUgaWRlbnRpdHkgb3IgaW1kcyBlbmRwb2ludHMgYXJlIHVuZGVmaW5lZCAoZXZlbiBhZnRlciBoaW1kcyBmaWxlIGRldGVjdGlvbilcbiAgICAgICAgaWYgKCFpZGVudGl0eUVuZHBvaW50IHx8ICFpbWRzRW5kcG9pbnQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgICAgIGBbTWFuYWdlZCBJZGVudGl0eV0gJHtNYW5hZ2VkSWRlbnRpdHlTb3VyY2VOYW1lcy5BWlVSRV9BUkN9IG1hbmFnZWQgaWRlbnRpdHkgaXMgdW5hdmFpbGFibGUgdGhyb3VnaCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYmVjYXVzZSBvbmUgb3IgYm90aCBvZiAnJHtNYW5hZ2VkSWRlbnRpdHlFbnZpcm9ubWVudFZhcmlhYmxlTmFtZXMuSURFTlRJVFlfRU5EUE9JTlR9JyBhbmQgJyR7TWFuYWdlZElkZW50aXR5RW52aXJvbm1lbnRWYXJpYWJsZU5hbWVzLklNRFNfRU5EUE9JTlR9JyBhcmUgbm90IGRlZmluZWQuICR7TWFuYWdlZElkZW50aXR5U291cmNlTmFtZXMuQVpVUkVfQVJDfSBtYW5hZ2VkIGlkZW50aXR5IGlzIGFsc28gdW5hdmFpbGFibGUgdGhyb3VnaCBmaWxlIGRldGVjdGlvbi5gXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNoZWNrIGlmIHRoZSBpbWRzIGVuZHBvaW50IGlzIHNldCB0byB0aGUgZGVmYXVsdCBmb3IgZmlsZSBkZXRlY3Rpb25cbiAgICAgICAgaWYgKGltZHNFbmRwb2ludCA9PT0gSElNRFNfRVhFQ1VUQUJMRV9IRUxQRVJfU1RSSU5HKSB7XG4gICAgICAgICAgICBsb2dnZXIuaW5mbyhcbiAgICAgICAgICAgICAgICBgW01hbmFnZWQgSWRlbnRpdHldICR7TWFuYWdlZElkZW50aXR5U291cmNlTmFtZXMuQVpVUkVfQVJDfSBtYW5hZ2VkIGlkZW50aXR5IGlzIGF2YWlsYWJsZSB0aHJvdWdoIGZpbGUgZGV0ZWN0aW9uLiBEZWZhdWx0aW5nIHRvIGtub3duICR7TWFuYWdlZElkZW50aXR5U291cmNlTmFtZXMuQVpVUkVfQVJDfSBlbmRwb2ludDogJHtERUZBVUxUX0FaVVJFX0FSQ19JREVOVElUWV9FTkRQT0lOVH0uIENyZWF0aW5nICR7TWFuYWdlZElkZW50aXR5U291cmNlTmFtZXMuQVpVUkVfQVJDfSBtYW5hZ2VkIGlkZW50aXR5LmBcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBvdGhlcndpc2UsIGJvdGggdGhlIGlkZW50aXR5IGFuZCBpbWRzIGVuZHBvaW50cyBhcmUgZGVmaW5lZCB3aXRob3V0IGZpbGUgZGV0ZWN0aW9uOyB2YWxpZGF0ZSB0aGVtXG5cbiAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRlZElkZW50aXR5RW5kcG9pbnQ6IHN0cmluZyA9XG4gICAgICAgICAgICAgICAgQXp1cmVBcmMuZ2V0VmFsaWRhdGVkRW52VmFyaWFibGVVcmxTdHJpbmcoXG4gICAgICAgICAgICAgICAgICAgIE1hbmFnZWRJZGVudGl0eUVudmlyb25tZW50VmFyaWFibGVOYW1lcy5JREVOVElUWV9FTkRQT0lOVCxcbiAgICAgICAgICAgICAgICAgICAgaWRlbnRpdHlFbmRwb2ludCxcbiAgICAgICAgICAgICAgICAgICAgTWFuYWdlZElkZW50aXR5U291cmNlTmFtZXMuQVpVUkVfQVJDLFxuICAgICAgICAgICAgICAgICAgICBsb2dnZXJcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgLy8gcmVtb3ZlIHRyYWlsaW5nIHNsYXNoXG4gICAgICAgICAgICB2YWxpZGF0ZWRJZGVudGl0eUVuZHBvaW50LmVuZHNXaXRoKFwiL1wiKVxuICAgICAgICAgICAgICAgID8gdmFsaWRhdGVkSWRlbnRpdHlFbmRwb2ludC5zbGljZSgwLCAtMSlcbiAgICAgICAgICAgICAgICA6IHZhbGlkYXRlZElkZW50aXR5RW5kcG9pbnQ7XG5cbiAgICAgICAgICAgIEF6dXJlQXJjLmdldFZhbGlkYXRlZEVudlZhcmlhYmxlVXJsU3RyaW5nKFxuICAgICAgICAgICAgICAgIE1hbmFnZWRJZGVudGl0eUVudmlyb25tZW50VmFyaWFibGVOYW1lcy5JTURTX0VORFBPSU5ULFxuICAgICAgICAgICAgICAgIGltZHNFbmRwb2ludCxcbiAgICAgICAgICAgICAgICBNYW5hZ2VkSWRlbnRpdHlTb3VyY2VOYW1lcy5BWlVSRV9BUkMsXG4gICAgICAgICAgICAgICAgbG9nZ2VyXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBsb2dnZXIuaW5mbyhcbiAgICAgICAgICAgICAgICBgW01hbmFnZWQgSWRlbnRpdHldIEVudmlyb25tZW50IHZhcmlhYmxlcyB2YWxpZGF0aW9uIHBhc3NlZCBmb3IgJHtNYW5hZ2VkSWRlbnRpdHlTb3VyY2VOYW1lcy5BWlVSRV9BUkN9IG1hbmFnZWQgaWRlbnRpdHkuIEVuZHBvaW50IFVSSTogJHt2YWxpZGF0ZWRJZGVudGl0eUVuZHBvaW50fS4gQ3JlYXRpbmcgJHtNYW5hZ2VkSWRlbnRpdHlTb3VyY2VOYW1lcy5BWlVSRV9BUkN9IG1hbmFnZWQgaWRlbnRpdHkuYFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIG1hbmFnZWRJZGVudGl0eUlkLmlkVHlwZSAhPT0gTWFuYWdlZElkZW50aXR5SWRUeXBlLlNZU1RFTV9BU1NJR05FRFxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZU1hbmFnZWRJZGVudGl0eUVycm9yKFxuICAgICAgICAgICAgICAgIE1hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMudW5hYmxlVG9DcmVhdGVBenVyZUFyY1xuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgQXp1cmVBcmMoXG4gICAgICAgICAgICBsb2dnZXIsXG4gICAgICAgICAgICBub2RlU3RvcmFnZSxcbiAgICAgICAgICAgIG5ldHdvcmtDbGllbnQsXG4gICAgICAgICAgICBjcnlwdG9Qcm92aWRlcixcbiAgICAgICAgICAgIGRpc2FibGVJbnRlcm5hbFJldHJpZXMsXG4gICAgICAgICAgICBpZGVudGl0eUVuZHBvaW50XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIGNyZWF0ZVJlcXVlc3QocmVzb3VyY2U6IHN0cmluZyk6IE1hbmFnZWRJZGVudGl0eVJlcXVlc3RQYXJhbWV0ZXJzIHtcbiAgICAgICAgY29uc3QgcmVxdWVzdDogTWFuYWdlZElkZW50aXR5UmVxdWVzdFBhcmFtZXRlcnMgPVxuICAgICAgICAgICAgbmV3IE1hbmFnZWRJZGVudGl0eVJlcXVlc3RQYXJhbWV0ZXJzKFxuICAgICAgICAgICAgICAgIEh0dHBNZXRob2QuR0VULFxuICAgICAgICAgICAgICAgIHRoaXMuaWRlbnRpdHlFbmRwb2ludC5yZXBsYWNlKFwibG9jYWxob3N0XCIsIFwiMTI3LjAuMC4xXCIpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIHJlcXVlc3QuaGVhZGVyc1tNRVRBREFUQV9IRUFERVJfTkFNRV0gPSBcInRydWVcIjtcblxuICAgICAgICByZXF1ZXN0LnF1ZXJ5UGFyYW1ldGVyc1tBUElfVkVSU0lPTl9RVUVSWV9QQVJBTUVURVJfTkFNRV0gPVxuICAgICAgICAgICAgQVJDX0FQSV9WRVJTSU9OO1xuICAgICAgICByZXF1ZXN0LnF1ZXJ5UGFyYW1ldGVyc1tSRVNPVVJDRV9CT0RZX09SX1FVRVJZX1BBUkFNRVRFUl9OQU1FXSA9XG4gICAgICAgICAgICByZXNvdXJjZTtcblxuICAgICAgICAvLyBib2R5UGFyYW1ldGVycyBjYWxjdWxhdGVkIGluIEJhc2VNYW5hZ2VkSWRlbnRpdHkuYWNxdWlyZVRva2VuV2l0aE1hbmFnZWRJZGVudGl0eVxuXG4gICAgICAgIHJldHVybiByZXF1ZXN0O1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBnZXRTZXJ2ZXJUb2tlblJlc3BvbnNlQXN5bmMoXG4gICAgICAgIG9yaWdpbmFsUmVzcG9uc2U6IE5ldHdvcmtSZXNwb25zZTxNYW5hZ2VkSWRlbnRpdHlUb2tlblJlc3BvbnNlPixcbiAgICAgICAgbmV0d29ya0NsaWVudDogSU5ldHdvcmtNb2R1bGUsXG4gICAgICAgIG5ldHdvcmtSZXF1ZXN0OiBNYW5hZ2VkSWRlbnRpdHlSZXF1ZXN0UGFyYW1ldGVycyxcbiAgICAgICAgbmV0d29ya1JlcXVlc3RPcHRpb25zOiBOZXR3b3JrUmVxdWVzdE9wdGlvbnNcbiAgICApOiBQcm9taXNlPFNlcnZlckF1dGhvcml6YXRpb25Ub2tlblJlc3BvbnNlPiB7XG4gICAgICAgIGxldCByZXRyeVJlc3BvbnNlOlxuICAgICAgICAgICAgfCBOZXR3b3JrUmVzcG9uc2U8TWFuYWdlZElkZW50aXR5VG9rZW5SZXNwb25zZT5cbiAgICAgICAgICAgIHwgdW5kZWZpbmVkO1xuXG4gICAgICAgIGlmIChvcmlnaW5hbFJlc3BvbnNlLnN0YXR1cyA9PT0gSHR0cFN0YXR1cy5VTkFVVEhPUklaRUQpIHtcbiAgICAgICAgICAgIGNvbnN0IHd3d0F1dGhIZWFkZXI6IHN0cmluZyA9XG4gICAgICAgICAgICAgICAgb3JpZ2luYWxSZXNwb25zZS5oZWFkZXJzW1wid3d3LWF1dGhlbnRpY2F0ZVwiXTtcbiAgICAgICAgICAgIGlmICghd3d3QXV0aEhlYWRlcikge1xuICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZU1hbmFnZWRJZGVudGl0eUVycm9yKFxuICAgICAgICAgICAgICAgICAgICBNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzLnd3d0F1dGhlbnRpY2F0ZUhlYWRlck1pc3NpbmdcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF3d3dBdXRoSGVhZGVyLmluY2x1ZGVzKFwiQmFzaWMgcmVhbG09XCIpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgY3JlYXRlTWFuYWdlZElkZW50aXR5RXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIE1hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMud3d3QXV0aGVudGljYXRlSGVhZGVyVW5zdXBwb3J0ZWRGb3JtYXRcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBzZWNyZXRGaWxlUGF0aCA9IHd3d0F1dGhIZWFkZXIuc3BsaXQoXCJCYXNpYyByZWFsbT1cIilbMV07XG5cbiAgICAgICAgICAgIC8vIHRocm93IGFuIGVycm9yIGlmIHRoZSBtYW5hZ2VkIGlkZW50aXR5IGFwcGxpY2F0aW9uIGlzIG5vdCBiZWluZyBydW4gb24gV2luZG93cyBvciBMaW51eFxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICFTVVBQT1JURURfQVpVUkVfQVJDX1BMQVRGT1JNUy5oYXNPd25Qcm9wZXJ0eShwcm9jZXNzLnBsYXRmb3JtKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgY3JlYXRlTWFuYWdlZElkZW50aXR5RXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIE1hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMucGxhdGZvcm1Ob3RTdXBwb3J0ZWRcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBnZXQgdGhlIGV4cGVjdGVkIFdpbmRvd3Mgb3IgTGludXggZmlsZSBwYXRoXG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZFNlY3JldEZpbGVQYXRoOiBzdHJpbmcgPVxuICAgICAgICAgICAgICAgIFNVUFBPUlRFRF9BWlVSRV9BUkNfUExBVEZPUk1TW1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLnBsYXRmb3JtIGFzIGtleW9mIEZpbGVQYXRoTWFwXG4gICAgICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgLy8gdGhyb3cgYW4gZXJyb3IgaWYgdGhlIGZpbGUgaW4gdGhlIGZpbGUgcGF0aCBpcyBub3QgYSAua2V5IGZpbGVcbiAgICAgICAgICAgIGNvbnN0IGZpbGVOYW1lOiBzdHJpbmcgPSBwYXRoLmJhc2VuYW1lKHNlY3JldEZpbGVQYXRoKTtcbiAgICAgICAgICAgIGlmICghZmlsZU5hbWUuZW5kc1dpdGgoXCIua2V5XCIpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgY3JlYXRlTWFuYWdlZElkZW50aXR5RXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIE1hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMuaW52YWxpZEZpbGVFeHRlbnNpb25cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgICogdGhyb3cgYW4gZXJyb3IgaWYgdGhlIGZpbGUgcGF0aCBmcm9tIHRoZSB3d3ctYXV0aGVudGljYXRlIGhlYWRlciBkb2VzIG5vdCBtYXRjaCB0aGVcbiAgICAgICAgICAgICAqIGV4cGVjdGVkIGZpbGUgcGF0aCBmb3IgdGhlIHBsYXRmb3JtIChXaW5kb3dzIG9yIExpbnV4KSB0aGUgbWFuYWdlZCBpZGVudGl0eSBhcHBsaWNhdGlvblxuICAgICAgICAgICAgICogaXMgcnVubmluZyBvblxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpZiAoZXhwZWN0ZWRTZWNyZXRGaWxlUGF0aCArIGZpbGVOYW1lICE9PSBzZWNyZXRGaWxlUGF0aCkge1xuICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZU1hbmFnZWRJZGVudGl0eUVycm9yKFxuICAgICAgICAgICAgICAgICAgICBNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzLmludmFsaWRGaWxlUGF0aFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBzZWNyZXRGaWxlU2l6ZTtcbiAgICAgICAgICAgIC8vIGF0dGVtcHQgdG8gZ2V0IHRoZSBzZWNyZXQgZmlsZSdzIHNpemUsIGluIGJ5dGVzXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHNlY3JldEZpbGVTaXplID0gYXdhaXQgc3RhdFN5bmMoc2VjcmV0RmlsZVBhdGgpLnNpemU7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgY3JlYXRlTWFuYWdlZElkZW50aXR5RXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIE1hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMudW5hYmxlVG9SZWFkU2VjcmV0RmlsZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB0aHJvdyBhbiBlcnJvciBpZiB0aGUgc2VjcmV0IGZpbGUncyBzaXplIGlzIGdyZWF0ZXIgdGhhbiA0MDk2IGJ5dGVzXG4gICAgICAgICAgICBpZiAoc2VjcmV0RmlsZVNpemUgPiBBWlVSRV9BUkNfU0VDUkVUX0ZJTEVfTUFYX1NJWkVfQllURVMpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBjcmVhdGVNYW5hZ2VkSWRlbnRpdHlFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy5pbnZhbGlkU2VjcmV0XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gYXR0ZW1wdCB0byByZWFkIHRoZSBjb250ZW50cyBvZiB0aGUgc2VjcmV0IGZpbGVcbiAgICAgICAgICAgIGxldCBzZWNyZXQ7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHNlY3JldCA9IHJlYWRGaWxlU3luYyhzZWNyZXRGaWxlUGF0aCwgXCJ1dGYtOFwiKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBjcmVhdGVNYW5hZ2VkSWRlbnRpdHlFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy51bmFibGVUb1JlYWRTZWNyZXRGaWxlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGF1dGhIZWFkZXJWYWx1ZSA9IGBCYXNpYyAke3NlY3JldH1gO1xuXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgICAgIGBbTWFuYWdlZCBJZGVudGl0eV0gQWRkaW5nIGF1dGhvcml6YXRpb24gaGVhZGVyIHRvIHRoZSByZXF1ZXN0LmBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBuZXR3b3JrUmVxdWVzdC5oZWFkZXJzW0FVVEhPUklaQVRJT05fSEVBREVSX05BTUVdID0gYXV0aEhlYWRlclZhbHVlO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHJ5UmVzcG9uc2UgPVxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBuZXR3b3JrQ2xpZW50LnNlbmRHZXRSZXF1ZXN0QXN5bmM8TWFuYWdlZElkZW50aXR5VG9rZW5SZXNwb25zZT4oXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXR3b3JrUmVxdWVzdC5jb21wdXRlVXJpKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXR3b3JrUmVxdWVzdE9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgQXV0aEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLm5ldHdvcmtFcnJvclxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZlclRva2VuUmVzcG9uc2UocmV0cnlSZXNwb25zZSB8fCBvcmlnaW5hbFJlc3BvbnNlKTtcbiAgICB9XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IElOZXR3b3JrTW9kdWxlLCBMb2dnZXIgfSBmcm9tIFwiQGF6dXJlL21zYWwtY29tbW9uL25vZGVcIjtcbmltcG9ydCB7IE1hbmFnZWRJZGVudGl0eUlkIH0gZnJvbSBcIi4uLy4uL2NvbmZpZy9NYW5hZ2VkSWRlbnRpdHlJZC5qc1wiO1xuaW1wb3J0IHsgTWFuYWdlZElkZW50aXR5UmVxdWVzdFBhcmFtZXRlcnMgfSBmcm9tIFwiLi4vLi4vY29uZmlnL01hbmFnZWRJZGVudGl0eVJlcXVlc3RQYXJhbWV0ZXJzLmpzXCI7XG5pbXBvcnQgeyBCYXNlTWFuYWdlZElkZW50aXR5U291cmNlIH0gZnJvbSBcIi4vQmFzZU1hbmFnZWRJZGVudGl0eVNvdXJjZS5qc1wiO1xuaW1wb3J0IHsgQ3J5cHRvUHJvdmlkZXIgfSBmcm9tIFwiLi4vLi4vY3J5cHRvL0NyeXB0b1Byb3ZpZGVyLmpzXCI7XG5pbXBvcnQge1xuICAgIEFQSV9WRVJTSU9OX1FVRVJZX1BBUkFNRVRFUl9OQU1FLFxuICAgIEh0dHBNZXRob2QsXG4gICAgTUVUQURBVEFfSEVBREVSX05BTUUsXG4gICAgTWFuYWdlZElkZW50aXR5RW52aXJvbm1lbnRWYXJpYWJsZU5hbWVzLFxuICAgIE1hbmFnZWRJZGVudGl0eUlkVHlwZSxcbiAgICBNYW5hZ2VkSWRlbnRpdHlTb3VyY2VOYW1lcyxcbiAgICBSRVNPVVJDRV9CT0RZX09SX1FVRVJZX1BBUkFNRVRFUl9OQU1FLFxufSBmcm9tIFwiLi4vLi4vdXRpbHMvQ29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBOb2RlU3RvcmFnZSB9IGZyb20gXCIuLi8uLi9jYWNoZS9Ob2RlU3RvcmFnZS5qc1wiO1xuXG4vLyBJTURTIGNvbnN0YW50cy4gRG9jcyBmb3IgSU1EUyBhcmUgYXZhaWxhYmxlIGhlcmUgaHR0cHM6Ly9kb2NzLm1pY3Jvc29mdC5jb20vYXp1cmUvYWN0aXZlLWRpcmVjdG9yeS9tYW5hZ2VkLWlkZW50aXRpZXMtYXp1cmUtcmVzb3VyY2VzL2hvdy10by11c2Utdm0tdG9rZW4jZ2V0LWEtdG9rZW4tdXNpbmctaHR0cFxuY29uc3QgSU1EU19UT0tFTl9QQVRIOiBzdHJpbmcgPSBcIi9tZXRhZGF0YS9pZGVudGl0eS9vYXV0aDIvdG9rZW5cIjtcbmNvbnN0IERFRkFVTFRfSU1EU19FTkRQT0lOVDogc3RyaW5nID0gYGh0dHA6Ly8xNjkuMjU0LjE2OS4yNTQke0lNRFNfVE9LRU5fUEFUSH1gO1xuXG5jb25zdCBJTURTX0FQSV9WRVJTSU9OOiBzdHJpbmcgPSBcIjIwMTgtMDItMDFcIjtcblxuLy8gT3JpZ2luYWwgc291cmNlIG9mIGNvZGU6IGh0dHBzOi8vZ2l0aHViLmNvbS9BenVyZS9henVyZS1zZGstZm9yLW5ldC9ibG9iL21haW4vc2RrL2lkZW50aXR5L0F6dXJlLklkZW50aXR5L3NyYy9JbWRzTWFuYWdlZElkZW50aXR5U291cmNlLmNzXG5leHBvcnQgY2xhc3MgSW1kcyBleHRlbmRzIEJhc2VNYW5hZ2VkSWRlbnRpdHlTb3VyY2Uge1xuICAgIHByaXZhdGUgaWRlbnRpdHlFbmRwb2ludDogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGxvZ2dlcjogTG9nZ2VyLFxuICAgICAgICBub2RlU3RvcmFnZTogTm9kZVN0b3JhZ2UsXG4gICAgICAgIG5ldHdvcmtDbGllbnQ6IElOZXR3b3JrTW9kdWxlLFxuICAgICAgICBjcnlwdG9Qcm92aWRlcjogQ3J5cHRvUHJvdmlkZXIsXG4gICAgICAgIGRpc2FibGVJbnRlcm5hbFJldHJpZXM6IGJvb2xlYW4sXG4gICAgICAgIGlkZW50aXR5RW5kcG9pbnQ6IHN0cmluZ1xuICAgICkge1xuICAgICAgICBzdXBlcihcbiAgICAgICAgICAgIGxvZ2dlcixcbiAgICAgICAgICAgIG5vZGVTdG9yYWdlLFxuICAgICAgICAgICAgbmV0d29ya0NsaWVudCxcbiAgICAgICAgICAgIGNyeXB0b1Byb3ZpZGVyLFxuICAgICAgICAgICAgZGlzYWJsZUludGVybmFsUmV0cmllc1xuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMuaWRlbnRpdHlFbmRwb2ludCA9IGlkZW50aXR5RW5kcG9pbnQ7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB0cnlDcmVhdGUoXG4gICAgICAgIGxvZ2dlcjogTG9nZ2VyLFxuICAgICAgICBub2RlU3RvcmFnZTogTm9kZVN0b3JhZ2UsXG4gICAgICAgIG5ldHdvcmtDbGllbnQ6IElOZXR3b3JrTW9kdWxlLFxuICAgICAgICBjcnlwdG9Qcm92aWRlcjogQ3J5cHRvUHJvdmlkZXIsXG4gICAgICAgIGRpc2FibGVJbnRlcm5hbFJldHJpZXM6IGJvb2xlYW5cbiAgICApOiBJbWRzIHtcbiAgICAgICAgbGV0IHZhbGlkYXRlZElkZW50aXR5RW5kcG9pbnQ6IHN0cmluZztcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBwcm9jZXNzLmVudltcbiAgICAgICAgICAgICAgICBNYW5hZ2VkSWRlbnRpdHlFbnZpcm9ubWVudFZhcmlhYmxlTmFtZXNcbiAgICAgICAgICAgICAgICAgICAgLkFaVVJFX1BPRF9JREVOVElUWV9BVVRIT1JJVFlfSE9TVFxuICAgICAgICAgICAgXVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgICAgIGBbTWFuYWdlZCBJZGVudGl0eV0gRW52aXJvbm1lbnQgdmFyaWFibGUgJHtcbiAgICAgICAgICAgICAgICAgICAgTWFuYWdlZElkZW50aXR5RW52aXJvbm1lbnRWYXJpYWJsZU5hbWVzLkFaVVJFX1BPRF9JREVOVElUWV9BVVRIT1JJVFlfSE9TVFxuICAgICAgICAgICAgICAgIH0gZm9yICR7TWFuYWdlZElkZW50aXR5U291cmNlTmFtZXMuSU1EU30gcmV0dXJuZWQgZW5kcG9pbnQ6ICR7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuZW52W1xuICAgICAgICAgICAgICAgICAgICAgICAgTWFuYWdlZElkZW50aXR5RW52aXJvbm1lbnRWYXJpYWJsZU5hbWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLkFaVVJFX1BPRF9JREVOVElUWV9BVVRIT1JJVFlfSE9TVFxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfWBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB2YWxpZGF0ZWRJZGVudGl0eUVuZHBvaW50ID0gSW1kcy5nZXRWYWxpZGF0ZWRFbnZWYXJpYWJsZVVybFN0cmluZyhcbiAgICAgICAgICAgICAgICBNYW5hZ2VkSWRlbnRpdHlFbnZpcm9ubWVudFZhcmlhYmxlTmFtZXMuQVpVUkVfUE9EX0lERU5USVRZX0FVVEhPUklUWV9IT1NULFxuICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudltcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hbmFnZWRJZGVudGl0eUVudmlyb25tZW50VmFyaWFibGVOYW1lc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5BWlVSRV9QT0RfSURFTlRJVFlfQVVUSE9SSVRZX0hPU1RcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH0ke0lNRFNfVE9LRU5fUEFUSH1gLFxuICAgICAgICAgICAgICAgIE1hbmFnZWRJZGVudGl0eVNvdXJjZU5hbWVzLklNRFMsXG4gICAgICAgICAgICAgICAgbG9nZ2VyXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLmluZm8oXG4gICAgICAgICAgICAgICAgYFtNYW5hZ2VkIElkZW50aXR5XSBVbmFibGUgdG8gZmluZCAke01hbmFnZWRJZGVudGl0eUVudmlyb25tZW50VmFyaWFibGVOYW1lcy5BWlVSRV9QT0RfSURFTlRJVFlfQVVUSE9SSVRZX0hPU1R9IGVudmlyb25tZW50IHZhcmlhYmxlIGZvciAke01hbmFnZWRJZGVudGl0eVNvdXJjZU5hbWVzLklNRFN9LCB1c2luZyB0aGUgZGVmYXVsdCBlbmRwb2ludC5gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdmFsaWRhdGVkSWRlbnRpdHlFbmRwb2ludCA9IERFRkFVTFRfSU1EU19FTkRQT0lOVDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgSW1kcyhcbiAgICAgICAgICAgIGxvZ2dlcixcbiAgICAgICAgICAgIG5vZGVTdG9yYWdlLFxuICAgICAgICAgICAgbmV0d29ya0NsaWVudCxcbiAgICAgICAgICAgIGNyeXB0b1Byb3ZpZGVyLFxuICAgICAgICAgICAgZGlzYWJsZUludGVybmFsUmV0cmllcyxcbiAgICAgICAgICAgIHZhbGlkYXRlZElkZW50aXR5RW5kcG9pbnRcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY3JlYXRlUmVxdWVzdChcbiAgICAgICAgcmVzb3VyY2U6IHN0cmluZyxcbiAgICAgICAgbWFuYWdlZElkZW50aXR5SWQ6IE1hbmFnZWRJZGVudGl0eUlkXG4gICAgKTogTWFuYWdlZElkZW50aXR5UmVxdWVzdFBhcmFtZXRlcnMge1xuICAgICAgICBjb25zdCByZXF1ZXN0OiBNYW5hZ2VkSWRlbnRpdHlSZXF1ZXN0UGFyYW1ldGVycyA9XG4gICAgICAgICAgICBuZXcgTWFuYWdlZElkZW50aXR5UmVxdWVzdFBhcmFtZXRlcnMoXG4gICAgICAgICAgICAgICAgSHR0cE1ldGhvZC5HRVQsXG4gICAgICAgICAgICAgICAgdGhpcy5pZGVudGl0eUVuZHBvaW50XG4gICAgICAgICAgICApO1xuXG4gICAgICAgIHJlcXVlc3QuaGVhZGVyc1tNRVRBREFUQV9IRUFERVJfTkFNRV0gPSBcInRydWVcIjtcblxuICAgICAgICByZXF1ZXN0LnF1ZXJ5UGFyYW1ldGVyc1tBUElfVkVSU0lPTl9RVUVSWV9QQVJBTUVURVJfTkFNRV0gPVxuICAgICAgICAgICAgSU1EU19BUElfVkVSU0lPTjtcbiAgICAgICAgcmVxdWVzdC5xdWVyeVBhcmFtZXRlcnNbUkVTT1VSQ0VfQk9EWV9PUl9RVUVSWV9QQVJBTUVURVJfTkFNRV0gPVxuICAgICAgICAgICAgcmVzb3VyY2U7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgbWFuYWdlZElkZW50aXR5SWQuaWRUeXBlICE9PSBNYW5hZ2VkSWRlbnRpdHlJZFR5cGUuU1lTVEVNX0FTU0lHTkVEXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmVxdWVzdC5xdWVyeVBhcmFtZXRlcnNbXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRNYW5hZ2VkSWRlbnRpdHlVc2VyQXNzaWduZWRJZFF1ZXJ5UGFyYW1ldGVyS2V5KFxuICAgICAgICAgICAgICAgICAgICBtYW5hZ2VkSWRlbnRpdHlJZC5pZFR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHRydWUgLy8gaW5kaWNhdGVzIHNvdXJjZSBpcyBJTURTXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgXSA9IG1hbmFnZWRJZGVudGl0eUlkLmlkO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYm9keVBhcmFtZXRlcnMgY2FsY3VsYXRlZCBpbiBCYXNlTWFuYWdlZElkZW50aXR5LmFjcXVpcmVUb2tlbldpdGhNYW5hZ2VkSWRlbnRpdHlcblxuICAgICAgICByZXR1cm4gcmVxdWVzdDtcbiAgICB9XG59XG4iLCAiLy8gc3JjL2F1dGgudHNcbmltcG9ydCB7IENvbmZpZGVudGlhbENsaWVudEFwcGxpY2F0aW9uLCBDb25maWd1cmF0aW9uIH0gZnJvbSBcIkBhenVyZS9tc2FsLW5vZGVcIjtcbmltcG9ydCB7IEJyb3dzZXJXaW5kb3cgfSBmcm9tIFwiQGVsZWN0cm9uL3JlbW90ZVwiO1xuaW1wb3J0ICogYXMgZnMgZnJvbSBcImZzXCI7XG5cbmNvbnN0IEFVVEhPUklUWSA9IFwiaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tL2NvbnN1bWVyc1wiO1xuY29uc3QgUkVESVJFQ1RfVVJJID0gXCJodHRwOi8vbG9jYWxob3N0OjUwMDBcIjsgLy8gTXVzdCBtYXRjaCB5b3VyIEF6dXJlIHJlZ2lzdHJhdGlvblxuY29uc3QgU0NPUEVTID0gW1wiVGFza3MuUmVhZFdyaXRlXCIsIFwib2ZmbGluZV9hY2Nlc3NcIl07XG5cbi8qKlxuICogQXV0aE1hbmFnZXIgaGFuZGxlcyBhdXRoZW50aWNhdGlvbiwgdG9rZW4gY2FjaGluZywgYW5kIHRva2VuIHJlZnJlc2hpbmcgdXNpbmcgTVNBTC5cbiAqL1xuZXhwb3J0IGNsYXNzIEF1dGhNYW5hZ2VyIHtcblx0Y2NhOiBDb25maWRlbnRpYWxDbGllbnRBcHBsaWNhdGlvbjtcblx0dG9rZW5GaWxlUGF0aDogc3RyaW5nO1xuXHRjbGllbnRJZDogc3RyaW5nO1xuXHRjbGllbnRTZWNyZXQ6IHN0cmluZztcblx0cmVkaXJlY3RVcmw6IHN0cmluZztcblxuXHQvKipcblx0ICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBBdXRoTWFuYWdlci5cblx0ICogQHBhcmFtIGNsaWVudElkIC0gVGhlIGNsaWVudCBJRCBvZiB5b3VyIEF6dXJlIEFEIGFwcGxpY2F0aW9uLlxuXHQgKiBAcGFyYW0gY2xpZW50U2VjcmV0IC0gVGhlIGNsaWVudCBzZWNyZXQgb2YgeW91ciBBenVyZSBBRCBhcHBsaWNhdGlvbi5cblx0ICogQHBhcmFtIHJlZGlyZWN0VXJsIC0gVGhlIHJlZGlyZWN0IFVSTCByZWdpc3RlcmVkIGluIHlvdXIgQXp1cmUgQUQgYXBwLlxuXHQgKiBAcGFyYW0gdG9rZW5GaWxlUGF0aCAtIFBhdGggdG8gdGhlIGZpbGUgd2hlcmUgdGhlIHRva2VuIGNhY2hlIHdpbGwgYmUgc3RvcmVkLlxuXHQgKi9cblx0Y29uc3RydWN0b3IoXG5cdFx0Y2xpZW50SWQ6IHN0cmluZyxcblx0XHRjbGllbnRTZWNyZXQ6IHN0cmluZyxcblx0XHRyZWRpcmVjdFVybDogc3RyaW5nLFxuXHRcdHRva2VuRmlsZVBhdGg6IHN0cmluZyxcblx0KSB7XG5cdFx0dGhpcy5jbGllbnRJZCA9IGNsaWVudElkO1xuXHRcdHRoaXMuY2xpZW50U2VjcmV0ID0gY2xpZW50U2VjcmV0O1xuXHRcdHRoaXMucmVkaXJlY3RVcmwgPSByZWRpcmVjdFVybDtcblx0XHR0aGlzLnRva2VuRmlsZVBhdGggPSB0b2tlbkZpbGVQYXRoO1xuXHRcdHRoaXMuaW5pdENsaWVudCgpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEluaXRpYWxpemVzIHRoZSBNU0FMIGNsaWVudCB3aXRoIHRoZSBnaXZlbiBjb25maWd1cmF0aW9uLlxuXHQgKi9cblx0aW5pdENsaWVudCgpOiB2b2lkIHtcblx0XHRjb25zdCBjb25maWc6IENvbmZpZ3VyYXRpb24gPSB7XG5cdFx0XHRhdXRoOiB7XG5cdFx0XHRcdGNsaWVudElkOiB0aGlzLmNsaWVudElkLFxuXHRcdFx0XHRhdXRob3JpdHk6IEFVVEhPUklUWSxcblx0XHRcdFx0Y2xpZW50U2VjcmV0OiB0aGlzLmNsaWVudFNlY3JldCxcblx0XHRcdH0sXG5cdFx0fTtcblx0XHR0aGlzLmNjYSA9IG5ldyBDb25maWRlbnRpYWxDbGllbnRBcHBsaWNhdGlvbihjb25maWcpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFNhdmVzIHRoZSBjdXJyZW50IHRva2VuIGNhY2hlIHRvIGRpc2suXG5cdCAqL1xuXHRzYXZlVG9rZW5DYWNoZSgpOiB2b2lkIHtcblx0XHRjb25zdCB0b2tlbkNhY2hlU2VyaWFsaXplZCA9IHRoaXMuY2NhLmdldFRva2VuQ2FjaGUoKS5zZXJpYWxpemUoKTtcblx0XHRmcy53cml0ZUZpbGVTeW5jKHRoaXMudG9rZW5GaWxlUGF0aCwgdG9rZW5DYWNoZVNlcmlhbGl6ZWQpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFBlcmZvcm1zIGFuIGludGVyYWN0aXZlIGxvZ2luIHRvIGFjcXVpcmUgYW4gYWNjZXNzIHRva2VuLlxuXHQgKiBPcGVucyBhIEJyb3dzZXJXaW5kb3cgdG8gbGV0IHRoZSB1c2VyIHNpZ24gaW4uXG5cdCAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggYW4gb2JqZWN0IGNvbnRhaW5pbmcgYSB2YWxpZCBhY2Nlc3MgdG9rZW4uXG5cdCAqL1xuXHRhc3luYyBnZXRBY2Nlc3NUb2tlbigpOiBQcm9taXNlPHsgYWNjZXNzVG9rZW46IHN0cmluZyB9PiB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdGNvbnN0IGF1dGhVcmwgPVxuXHRcdFx0XHRgJHtBVVRIT1JJVFl9L29hdXRoMi92Mi4wL2F1dGhvcml6ZT9jbGllbnRfaWQ9JHt0aGlzLmNsaWVudElkfWAgK1xuXHRcdFx0XHRgJnJlc3BvbnNlX3R5cGU9Y29kZWAgK1xuXHRcdFx0XHRgJnJlZGlyZWN0X3VyaT0ke2VuY29kZVVSSUNvbXBvbmVudChSRURJUkVDVF9VUkkpfWAgK1xuXHRcdFx0XHRgJnJlc3BvbnNlX21vZGU9cXVlcnlgICtcblx0XHRcdFx0YCZzY29wZT0ke2VuY29kZVVSSUNvbXBvbmVudChTQ09QRVMuam9pbihcIiBcIikpfWAgK1xuXHRcdFx0XHRgJnByb21wdD1jb25zZW50YDtcblxuXHRcdFx0Y29uc3QgYXV0aFdpbmRvdyA9IG5ldyBCcm93c2VyV2luZG93KHtcblx0XHRcdFx0d2lkdGg6IDYwMCxcblx0XHRcdFx0aGVpZ2h0OiA3MDAsXG5cdFx0XHRcdHdlYlByZWZlcmVuY2VzOiB7XG5cdFx0XHRcdFx0bm9kZUludGVncmF0aW9uOiBmYWxzZSxcblx0XHRcdFx0XHRjb250ZXh0SXNvbGF0aW9uOiB0cnVlLFxuXHRcdFx0XHR9LFxuXHRcdFx0fSk7XG5cblx0XHRcdGF1dGhXaW5kb3cubG9hZFVSTChhdXRoVXJsKTtcblxuXHRcdFx0YXV0aFdpbmRvdy53ZWJDb250ZW50cy5vbihcIndpbGwtcmVkaXJlY3RcIiwgYXN5bmMgKGV2ZW50LCB1cmwpID0+IHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRjb25zdCByZWRpcmVjdFVSTCA9IG5ldyBVUkwodXJsKTtcblx0XHRcdFx0XHRjb25zdCBlcnJvciA9IHJlZGlyZWN0VVJMLnNlYXJjaFBhcmFtcy5nZXQoXCJlcnJvclwiKTtcblx0XHRcdFx0XHRpZiAoZXJyb3IpIHRocm93IG5ldyBFcnJvcihcIk9BdXRoIGVycm9yOiBcIiArIGVycm9yKTtcblxuXHRcdFx0XHRcdGNvbnN0IGF1dGhDb2RlID0gcmVkaXJlY3RVUkwuc2VhcmNoUGFyYW1zLmdldChcImNvZGVcIik7XG5cdFx0XHRcdFx0aWYgKCFhdXRoQ29kZSkgcmV0dXJuOyAvLyBJZiBubyBhdXRoIGNvZGUsIGV4aXQgZWFybHkuXG5cblx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdGF1dGhXaW5kb3cuY2xvc2UoKTtcblxuXHRcdFx0XHRcdGNvbnN0IHRva2VuUmVxdWVzdCA9IHtcblx0XHRcdFx0XHRcdGNvZGU6IGF1dGhDb2RlLFxuXHRcdFx0XHRcdFx0c2NvcGVzOiBTQ09QRVMsXG5cdFx0XHRcdFx0XHRyZWRpcmVjdFVyaTogUkVESVJFQ1RfVVJJLFxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0Y29uc3QgdG9rZW5SZXNwb25zZSA9XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmNjYS5hY3F1aXJlVG9rZW5CeUNvZGUodG9rZW5SZXF1ZXN0KTtcblx0XHRcdFx0XHRpZiAoIXRva2VuUmVzcG9uc2UpXG5cdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJObyB0b2tlbiByZXNwb25zZSByZWNlaXZlZC5cIik7XG5cdFx0XHRcdFx0dGhpcy5zYXZlVG9rZW5DYWNoZSgpO1xuXHRcdFx0XHRcdHJlc29sdmUoeyBhY2Nlc3NUb2tlbjogdG9rZW5SZXNwb25zZS5hY2Nlc3NUb2tlbiB9KTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0aWYgKCFhdXRoV2luZG93LmlzRGVzdHJveWVkKCkpIGF1dGhXaW5kb3cuY2xvc2UoKTtcblx0XHRcdFx0XHRyZWplY3QoZXJyKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogUmVmcmVzaGVzIHRoZSBhY2Nlc3MgdG9rZW4gdXNpbmcgdGhlIHJlZnJlc2ggdG9rZW4gc3RvcmVkIGluIHRoZSB0b2tlbiBjYWNoZS5cblx0ICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCBhbiBvYmplY3QgY29udGFpbmluZyBhIG5ldyBhY2Nlc3MgdG9rZW4uXG5cdCAqL1xuXHRhc3luYyByZWZyZXNoQWNjZXNzVG9rZW5XaXRoQ0NBKCk6IFByb21pc2U8eyBhY2Nlc3NUb2tlbjogc3RyaW5nIH0+IHtcblx0XHRpZiAoIWZzLmV4aXN0c1N5bmModGhpcy50b2tlbkZpbGVQYXRoKSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiTm8gdG9rZW4gY2FjaGUgZm91bmQuIFBsZWFzZSBsb2dpbiBmaXJzdC5cIik7XG5cdFx0fVxuXG5cdFx0Y29uc3QgY2FjaGVEYXRhID0gZnMucmVhZEZpbGVTeW5jKHRoaXMudG9rZW5GaWxlUGF0aCwgXCJ1dGY4XCIpO1xuXHRcdHRoaXMuY2NhLmdldFRva2VuQ2FjaGUoKS5kZXNlcmlhbGl6ZShjYWNoZURhdGEpO1xuXG5cdFx0Y29uc3QgdG9rZW5DYWNoZVNlcmlhbGl6ZWQgPSB0aGlzLmNjYS5nZXRUb2tlbkNhY2hlKCkuc2VyaWFsaXplKCk7XG5cdFx0Y29uc3QgcGFyc2VkQ2FjaGUgPSBKU09OLnBhcnNlKHRva2VuQ2FjaGVTZXJpYWxpemVkKTtcblx0XHRpZiAoIXBhcnNlZENhY2hlLlJlZnJlc2hUb2tlbikge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiTm8gcmVmcmVzaCB0b2tlbiBmb3VuZCBpbiB0aGUgY2FjaGUuXCIpO1xuXHRcdH1cblx0XHRjb25zdCByZWZyZXNoVG9rZW5PYmplY3QgPSBwYXJzZWRDYWNoZS5SZWZyZXNoVG9rZW47XG5cdFx0Y29uc3QgcmVmcmVzaFRva2VuS2V5ID0gT2JqZWN0LmtleXMocmVmcmVzaFRva2VuT2JqZWN0KVswXTtcblx0XHRjb25zdCByZWZyZXNoVG9rZW4gPSByZWZyZXNoVG9rZW5PYmplY3RbcmVmcmVzaFRva2VuS2V5XS5zZWNyZXQ7XG5cblx0XHRjb25zdCB0b2tlblJlcXVlc3QgPSB7XG5cdFx0XHRyZWZyZXNoVG9rZW46IHJlZnJlc2hUb2tlbixcblx0XHRcdHNjb3BlczogU0NPUEVTLFxuXHRcdFx0cmVkaXJlY3RVcmk6IFJFRElSRUNUX1VSSSxcblx0XHR9O1xuXG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHRva2VuUmVzcG9uc2UgPVxuXHRcdFx0XHRhd2FpdCB0aGlzLmNjYS5hY3F1aXJlVG9rZW5CeVJlZnJlc2hUb2tlbih0b2tlblJlcXVlc3QpO1xuXHRcdFx0aWYgKCF0b2tlblJlc3BvbnNlKVxuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJObyB0b2tlbiByZXNwb25zZSByZWNlaXZlZCBmcm9tIHJlZnJlc2guXCIpO1xuXHRcdFx0dGhpcy5zYXZlVG9rZW5DYWNoZSgpO1xuXHRcdFx0cmV0dXJuIHsgYWNjZXNzVG9rZW46IHRva2VuUmVzcG9uc2UuYWNjZXNzVG9rZW4gfTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0dGhyb3cgZXJyb3I7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgYSB2YWxpZCBhY2Nlc3MgdG9rZW4gYnkgY2hlY2tpbmcgdGhlIHRva2VuIGNhY2hlLlxuXHQgKiBJZiBhIHRva2VuIGlzIGF2YWlsYWJsZSwgaXQgcmVmcmVzaGVzIGl0OyBvdGhlcndpc2UsIGl0IHBlcmZvcm1zIGFuIGludGVyYWN0aXZlIGxvZ2luLlxuXHQgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIGFuIG9iamVjdCBjb250YWluaW5nIGEgdmFsaWQgYWNjZXNzIHRva2VuLlxuXHQgKi9cblx0YXN5bmMgZ2V0VG9rZW4oKTogUHJvbWlzZTx7IGFjY2Vzc1Rva2VuOiBzdHJpbmcgfT4ge1xuXHRcdGlmIChmcy5leGlzdHNTeW5jKHRoaXMudG9rZW5GaWxlUGF0aCkpIHtcblx0XHRcdHJldHVybiB0aGlzLnJlZnJlc2hBY2Nlc3NUb2tlbldpdGhDQ0EoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIHRoaXMuZ2V0QWNjZXNzVG9rZW4oKTtcblx0XHR9XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBNb2RhbCwgQXBwIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbi8qKlxuICogQSBzaW1wbGUgbW9kYWwgdGhhdCBwcm9tcHRzIHRoZSB1c2VyIHRvIGVudGVyIGEgdGFzayB0aXRsZS5cbiAqIFRoZSBtb2RhbCBpcyBjZW50ZXJlZCwgYW5kIHRoZSB0YXNrIGlzIHN1Ym1pdHRlZCB3aGVuIHRoZSB1c2VyIHByZXNzZXMgRW50ZXIuXG4gKi9cbmV4cG9ydCBjbGFzcyBUYXNrVGl0bGVNb2RhbCBleHRlbmRzIE1vZGFsIHtcblx0cmVzdWx0OiBzdHJpbmc7XG5cdG9uU3VibWl0OiAocmVzdWx0OiBzdHJpbmcpID0+IHZvaWQ7XG5cblx0LyoqXG5cdCAqIENvbnN0cnVjdHMgdGhlIG1vZGFsLlxuXHQgKiBAcGFyYW0gYXBwIC0gVGhlIE9ic2lkaWFuIGFwcCBpbnN0YW5jZS5cblx0ICogQHBhcmFtIG9uU3VibWl0IC0gQSBjYWxsYmFjayB0aGF0IHJlY2VpdmVzIHRoZSBlbnRlcmVkIHRhc2sgdGl0bGUuXG5cdCAqL1xuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgb25TdWJtaXQ6IChyZXN1bHQ6IHN0cmluZykgPT4gdm9pZCkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xuXHR9XG5cblx0LyoqXG5cdCAqIENhbGxlZCB3aGVuIHRoZSBtb2RhbCBpcyBvcGVuZWQuIFJlbmRlcnMgdGhlIGlucHV0IFVJIGFuZCBjZW50ZXJzIGl0LlxuXHQgKi9cblx0b25PcGVuKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG5cdFx0Ly8gQXBwbHkgY2VudGVyaW5nIHN0eWxlcyB0byB0aGUgbW9kYWwgY29udGVudC5cblx0XHRjb250ZW50RWwuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuXHRcdGNvbnRlbnRFbC5zdHlsZS5mbGV4RGlyZWN0aW9uID0gXCJjb2x1bW5cIjtcblx0XHRjb250ZW50RWwuc3R5bGUuYWxpZ25JdGVtcyA9IFwiY2VudGVyXCI7XG5cdFx0Y29udGVudEVsLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJjZW50ZXJcIjtcblx0XHRjb250ZW50RWwuc3R5bGUuZ2FwID0gXCIxMHB4XCI7XG5cdFx0Y29udGVudEVsLnN0eWxlLm1pbkhlaWdodCA9IFwiMTAwcHhcIjtcblxuXHRcdC8vIENyZWF0ZSBhbmQgYXBwZW5kIHRoZSBoZWFkZXIuXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwiaDJcIiwgeyB0ZXh0OiBcIkVudGVyIFRhc2sgVGl0bGVcIiB9KTtcblxuXHRcdC8vIENyZWF0ZSBhbmQgYXBwZW5kIHRoZSBpbnB1dCBlbGVtZW50LlxuXHRcdGNvbnN0IGlucHV0RWwgPSBjb250ZW50RWwuY3JlYXRlRWwoXCJpbnB1dFwiLCB7XG5cdFx0XHR0eXBlOiBcInRleHRcIixcblx0XHRcdHBsYWNlaG9sZGVyOiBcIlRhc2sgVGl0bGVcIixcblx0XHR9KTtcblx0XHQvLyBPcHRpb25hbGx5IHNldCBhIHdpZHRoIGZvciB0aGUgaW5wdXQuXG5cdFx0aW5wdXRFbC5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xuXHRcdGlucHV0RWwuZm9jdXMoKTtcblxuXHRcdC8vIFdoZW4gdGhlIHVzZXIgcHJlc3NlcyBFbnRlciwgc3VibWl0IHRoZSBpbnB1dC5cblx0XHRpbnB1dEVsLm9ua2V5ZG93biA9IChlKSA9PiB7XG5cdFx0XHRpZiAoZS5rZXkgPT09IFwiRW50ZXJcIikge1xuXHRcdFx0XHR0aGlzLnJlc3VsdCA9IGlucHV0RWwudmFsdWU7XG5cdFx0XHRcdHRoaXMuY2xvc2UoKTtcblx0XHRcdFx0dGhpcy5vblN1Ym1pdCh0aGlzLnJlc3VsdCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDYWxsZWQgd2hlbiB0aGUgbW9kYWwgaXMgY2xvc2VkLiBDbGVhcnMgdGhlIGNvbnRlbnQuXG5cdCAqL1xuXHRvbkNsb3NlKCkge1xuXHRcdHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBBcHAsIEZ1enp5U3VnZ2VzdE1vZGFsIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmV4cG9ydCBjbGFzcyBHZW5lcmljU2VsZWN0TW9kYWw8VD4gZXh0ZW5kcyBGdXp6eVN1Z2dlc3RNb2RhbDxUPiB7XG5cdGl0ZW1zOiBUW107XG5cdGdldFRleHQ6IChpdGVtOiBUKSA9PiBzdHJpbmc7XG5cdG9uU2VsZWN0OiAoaXRlbTogVCkgPT4gUHJvbWlzZTx2b2lkPjtcblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRhcHA6IEFwcCxcblx0XHRpdGVtczogVFtdLFxuXHRcdGdldFRleHQ6IChpdGVtOiBUKSA9PiBzdHJpbmcsXG5cdFx0b25TZWxlY3Q6IChpdGVtOiBUKSA9PiBQcm9taXNlPHZvaWQ+LFxuXHQpIHtcblx0XHRzdXBlcihhcHApO1xuXHRcdHRoaXMuaXRlbXMgPSBpdGVtcztcblx0XHR0aGlzLmdldFRleHQgPSBnZXRUZXh0O1xuXHRcdHRoaXMub25TZWxlY3QgPSBvblNlbGVjdDtcblx0fVxuXG5cdGdldEl0ZW1zKCk6IFRbXSB7XG5cdFx0cmV0dXJuIHRoaXMuaXRlbXM7XG5cdH1cblxuXHRnZXRJdGVtVGV4dChpdGVtOiBUKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5nZXRUZXh0KGl0ZW0pO1xuXHR9XG5cblx0YXN5bmMgb25DaG9vc2VJdGVtKGl0ZW06IFQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLm9uU2VsZWN0KGl0ZW0pO1xuXHR9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQSw4Q0FBQUEsU0FBQTtBQUFBLElBQUFBLFFBQUE7QUFBQSxNQUNFLE1BQVE7QUFBQSxNQUNSLFNBQVc7QUFBQSxNQUNYLGFBQWU7QUFBQSxNQUNmLE1BQVE7QUFBQSxNQUNSLE9BQVM7QUFBQSxNQUNULFNBQVc7QUFBQSxRQUNULEtBQUs7QUFBQSxVQUNILE9BQVM7QUFBQSxVQUNULFNBQVc7QUFBQSxVQUNYLFNBQVc7QUFBQSxRQUNiO0FBQUEsUUFDQSxZQUFZO0FBQUEsUUFDWixlQUFlO0FBQUEsUUFDZixxQkFBcUI7QUFBQSxRQUNyQix3QkFBd0I7QUFBQSxRQUN4QixxQkFBcUI7QUFBQSxRQUNyQix3QkFBd0I7QUFBQSxRQUN4QixrQkFBa0I7QUFBQSxNQUNwQjtBQUFBLE1BQ0EsU0FBVztBQUFBLFFBQ1QsYUFBYTtBQUFBLFFBQ2IsTUFBUTtBQUFB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S0FBSyxFQUFFO0FBQ3BEO0FBQUEsTUFDRDtBQUVBLFdBQUssb0JBQW9CO0FBQ3pCLGFBQU87QUFBQSxJQUNSLFNBQVMsT0FBTztBQUNmLGNBQVEsTUFBTSx5QkFBeUIsS0FBSztBQUM1QyxhQUFPO0FBQUEsSUFDUjtBQUFBLEVBQ0Q7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLE1BQU0sc0JBQXNCO0FBQzNCLFVBQU0sUUFBUSxNQUFNLEtBQUssaUJBQWlCO0FBQzFDLFFBQUksS0FBSyxhQUFhO0FBQ3JCLFlBQU0sS0FBSyxZQUFZLE9BQU8sS0FBSztBQUFBLElBQ3BDLE9BQU87QUFDTixjQUFRLEtBQUssNkJBQTZCO0FBQUEsSUFDM0M7QUFBQSxFQUNEO0FBQ0Q7IiwKICAibmFtZXMiOiBbIm1vZHVsZSIsICJtb2R1bGUiLCAiZnMiLCAicGF0aCIsICJjcnlwdG8iLCAidmVyc2lvbiIsICJjb25maWciLCAibW9kdWxlIiwgIkJ1ZmZlciIsICJtb2R1bGUiLCAiQnVmZmVyIiwgIm1vZHVsZSIsICJCdWZmZXIiLCAibW9kdWxlIiwgIm1vZHVsZSIsICJCdWZmZXIiLCAibW9kdWxlIiwgIkJ1ZmZlciIsICJjcnlwdG8iLCAibW9kdWxlIiwgIkJ1ZmZlciIsICJtb2R1bGUiLCAiQnVmZmVyIiwgIm1vZHVsZSIsICJCdWZmZXIiLCAibW9kdWxlIiwgImp3dCIsICJtb2R1bGUiLCAibW9kdWxlIiwgIm1vZHVsZSIsICJtb2R1bGUiLCAibmFtZSIsICJtb2R1bGUiLCAibW9kdWxlIiwgIm1vZHVsZSIsICJtb2R1bGUiLCAibmFtZSIsICJtb2R1bGUiLCAibW9kdWxlIiwgIm1vZHVsZSIsICJ2ZXJzaW9uIiwgIm1vZHVsZSIsICJ2ZXJzaW9uIiwgIm1vZHVsZSIsICJ2ZXJzaW9uIiwgIm1vZHVsZSIsICJ2ZXJzaW9uIiwgIm1vZHVsZSIsICJ2ZXJzaW9uIiwgIm1vZHVsZSIsICJ2ZXJzaW9uMiIsICJtb2R1bGUiLCAibW9kdWxlIiwgIm1vZHVsZSIsICJtb2R1bGUiLCAidmVyc2lvbiIsICJtb2R1bGUiLCAibW9kdWxlIiwgIm1vZHVsZSIsICJtb2R1bGUiLCAibW9kdWxlIiwgIm1vZHVsZSIsICJtb2R1bGUiLCAibW9kdWxlIiwgIm1vZHVsZSIsICJtb2R1bGUiLCAibW9kdWxlIiwgIm1vZHVsZSIsICJtb2R1bGUiLCAibW9kdWxlIiwgInZlcnNpb24iLCAibW9kdWxlIiwgIm1vZHVsZSIsICJ2ZXJzaW9uIiwgIm1vZHVsZSIsICJ2ZXJzaW9uIiwgIm1vZHVsZSIsICJ2ZXJzaW9uIiwgIm1vZHVsZSIsICJtb2R1bGUiLCAibW9kdWxlIiwgIm1vZHVsZSIsICJyZXF1aXJlX3ZhbGlkIiwgIm1vZHVsZSIsICJtb2R1bGUiLCAidmVyc2lvbiIsICJtb2R1bGUiLCAidmVyc2lvbiIsICJtb2R1bGUiLCAidmVyc2lvbiIsICJtb2R1bGUiLCAibW9kdWxlIiwgInZlcnNpb24iLCAibW9kdWxlIiwgInJlcXVpcmVfc2VtdmVyIiwgIm1vZHVsZSIsICJjb25zdGFudHMiLCAibW9kdWxlIiwgIm1vZHVsZSIsICJtb2R1bGUiLCAibW9kdWxlIiwgIm1vZHVsZSIsICJoZWFkZXIiLCAic2VjcmV0T3JQdWJsaWNLZXkiLCAiXyIsICJtb2R1bGUiLCAicmVxdWlyZV9sb2Rhc2giLCAibW9kdWxlIiwgInJlcXVpcmVfbG9kYXNoIiwgIm1vZHVsZSIsICJyZXF1aXJlX2xvZGFzaCIsICJtb2R1bGUiLCAicmVxdWlyZV9sb2Rhc2giLCAibW9kdWxlIiwgInJlcXVpcmVfbG9kYXNoIiwgIm1vZHVsZSIsICJyZXF1aXJlX2xvZGFzaCIsICJtb2R1bGUiLCAibW9kdWxlIiwgInZhbGlkYXRlIiwgIl8iLCAibW9kdWxlIiwgIm5hbWUiLCAiUHJvbWlzZSIsICJuYW1lIiwgIm1vZHVsZSIsICJleHBvcnRzIiwgInJlcXVpcmVfcmVuZGVyZXIiLCAibW9kdWxlIiwgImltcG9ydF9vYnNpZGlhbiIsICJmcyIsICJwYXRoIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIkF1dGhFcnJvckNvZGVzLnVuZXhwZWN0ZWRFcnJvciIsICJBdXRoRXJyb3JDb2Rlcy5wb3N0UmVxdWVzdEZhaWxlZCIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5jbGllbnRJbmZvRGVjb2RpbmdFcnJvciIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5jbGllbnRJbmZvRW1wdHlFcnJvciIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy50b2tlblBhcnNpbmdFcnJvciIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5udWxsT3JFbXB0eVRva2VuIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLm5ldHdvcmtFcnJvciIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5vcGVuSWRDb25maWdFcnJvciIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5oYXNoTm90RGVzZXJpYWxpemVkIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLmludmFsaWRTdGF0ZSIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5zdGF0ZU1pc21hdGNoIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLnN0YXRlTm90Rm91bmQiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMubm9uY2VNaXNtYXRjaCIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5hdXRoVGltZU5vdEZvdW5kIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLm1heEFnZVRyYW5zcGlyZWQiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMubXVsdGlwbGVNYXRjaGluZ1Rva2VucyIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5tdWx0aXBsZU1hdGNoaW5nQWNjb3VudHMiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMubXVsdGlwbGVNYXRjaGluZ0FwcE1ldGFkYXRhIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLnJlcXVlc3RDYW5ub3RCZU1hZGUiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMuY2Fubm90UmVtb3ZlRW1wdHlTY29wZSIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5jYW5ub3RBcHBlbmRTY29wZVNldCIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5lbXB0eUlucHV0U2NvcGVTZXQiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMuZGV2aWNlQ29kZVBvbGxpbmdDYW5jZWxsZWQiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMuZGV2aWNlQ29kZUV4cGlyZWQiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMuZGV2aWNlQ29kZVVua25vd25FcnJvciIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5ub0FjY291bnRJblNpbGVudFJlcXVlc3QiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZENhY2hlUmVjb3JkIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLmludmFsaWRDYWNoZUVudmlyb25tZW50IiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLm5vQWNjb3VudEZvdW5kIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLm5vQ3J5cHRvT2JqZWN0IiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLnVuZXhwZWN0ZWRDcmVkZW50aWFsVHlwZSIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5pbnZhbGlkQXNzZXJ0aW9uIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLmludmFsaWRDbGllbnRDcmVkZW50aWFsIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLnRva2VuUmVmcmVzaFJlcXVpcmVkIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLnVzZXJUaW1lb3V0UmVhY2hlZCIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy50b2tlbkNsYWltc0NuZlJlcXVpcmVkRm9yU2lnbmVkSnd0IiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLmF1dGhvcml6YXRpb25Db2RlTWlzc2luZ0Zyb21TZXJ2ZXJSZXNwb25zZSIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5iaW5kaW5nS2V5Tm90UmVtb3ZlZCIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5lbmRTZXNzaW9uRW5kcG9pbnROb3RTdXBwb3J0ZWQiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMua2V5SWRNaXNzaW5nIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLm5vTmV0d29ya0Nvbm5lY3Rpdml0eSIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy51c2VyQ2FuY2VsZWQiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMubWlzc2luZ1RlbmFudElkRXJyb3IiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMubWV0aG9kTm90SW1wbGVtZW50ZWQiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMubmVzdGVkQXBwQXV0aEJyaWRnZURpc2FibGVkIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLm1ldGhvZE5vdEltcGxlbWVudGVkIiwgIkxvZ0xldmVsIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLnRva2VuUGFyc2luZ0Vycm9yIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLm51bGxPckVtcHR5VG9rZW4iLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMubWF4QWdlVHJhbnNwaXJlZCIsICJUaW1lVXRpbHMubm93U2Vjb25kcyIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy50b2tlbkNsYWltc0NuZlJlcXVpcmVkRm9yU2lnbmVkSnd0IiwgIkNsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLnJlZGlyZWN0VXJpRW1wdHkiLCAiQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuY2xhaW1zUmVxdWVzdFBhcnNpbmdFcnJvciIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5hdXRob3JpdHlVcmlJbnNlY3VyZSIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy51cmxQYXJzZUVycm9yIiwgIkNsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLnVybEVtcHR5RXJyb3IiLCAiQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuZW1wdHlJbnB1dFNjb3Blc0Vycm9yIiwgIkNsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmludmFsaWRQcm9tcHRWYWx1ZSIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5pbnZhbGlkQ2xhaW1zIiwgIkNsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLnRva2VuUmVxdWVzdEVtcHR5IiwgIkNsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmxvZ291dFJlcXVlc3RFbXB0eSIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5pbnZhbGlkQ29kZUNoYWxsZW5nZU1ldGhvZCIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5wa2NlUGFyYW1zTWlzc2luZyIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5pbnZhbGlkQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YSIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5pbnZhbGlkQXV0aG9yaXR5TWV0YWRhdGEiLCAiQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMudW50cnVzdGVkQXV0aG9yaXR5IiwgIkNsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLm1pc3NpbmdTc2hKd2siLCAiQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMubWlzc2luZ1NzaEtpZCIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5taXNzaW5nTm9uY2VBdXRoZW50aWNhdGlvbkhlYWRlciIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5pbnZhbGlkQXV0aGVudGljYXRpb25IZWFkZXIiLCAiQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuY2Fubm90U2V0T0lEQ09wdGlvbnMiLCAiQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuY2Fubm90QWxsb3dQbGF0Zm9ybUJyb2tlciIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5hdXRob3JpdHlNaXNtYXRjaCIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5lbXB0eUlucHV0U2NvcGVzRXJyb3IiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMuY2Fubm90QXBwZW5kU2NvcGVTZXQiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMuY2Fubm90UmVtb3ZlRW1wdHlTY29wZSIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5lbXB0eUlucHV0U2NvcGVTZXQiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMuY2xpZW50SW5mb0VtcHR5RXJyb3IiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMuY2xpZW50SW5mb0RlY29kaW5nRXJyb3IiLCAibmFtZSIsICJ0ZW5hbnRJZCIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5pbnZhbGlkQ2FjaGVFbnZpcm9ubWVudCIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5oYXNoTm90RGVzZXJpYWxpemVkIiwgIkNsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLnVybEVtcHR5RXJyb3IiLCAiQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMudXJsUGFyc2VFcnJvciIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5hdXRob3JpdHlVcmlJbnNlY3VyZSIsICJVcmxVdGlscy5nZXREZXNlcmlhbGl6ZWRSZXNwb25zZSIsICJDYWNoZUVycm9yQ29kZXMuY2FjaGVRdW90YUV4Y2VlZGVkRXJyb3JDb2RlIiwgIkNhY2hlRXJyb3JDb2Rlcy5jYWNoZVVua25vd25FcnJvckNvZGUiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZENhY2hlUmVjb3JkIiwgIkNhY2hlRXJyb3JDb2Rlcy5jYWNoZVF1b3RhRXhjZWVkZWRFcnJvckNvZGUiLCAiQ2FjaGVFcnJvckNvZGVzLmNhY2hlVW5rbm93bkVycm9yQ29kZSIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5iaW5kaW5nS2V5Tm90UmVtb3ZlZCIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5tdWx0aXBsZU1hdGNoaW5nQXBwTWV0YWRhdGEiLCAibmFtZSIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5tZXRob2ROb3RJbXBsZW1lbnRlZCIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5tZXRob2ROb3RJbXBsZW1lbnRlZCIsICJjb25maWciLCAiQ0xJRU5UX0lORk8iLCAiQUFEU2VydmVyUGFyYW1LZXlzLkNMSUVOVF9JRCIsICJBQURTZXJ2ZXJQYXJhbUtleXMuQlJPS0VSX0NMSUVOVF9JRCIsICJBQURTZXJ2ZXJQYXJhbUtleXMuUkVESVJFQ1RfVVJJIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5SRVNQT05TRV9UWVBFIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5SRVNQT05TRV9NT0RFIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5OQVRJVkVfQlJPS0VSIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5TQ09QRSIsICJBQURTZXJ2ZXJQYXJhbUtleXMuUE9TVF9MT0dPVVRfVVJJIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5JRF9UT0tFTl9ISU5UIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5ET01BSU5fSElOVCIsICJBQURTZXJ2ZXJQYXJhbUtleXMuTE9HSU5fSElOVCIsICJBQURTZXJ2ZXJQYXJhbUtleXMuU0lEIiwgIkNsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmludmFsaWRDbGFpbXMiLCAiQUFEU2VydmVyUGFyYW1LZXlzLkNMQUlNUyIsICJBQURTZXJ2ZXJQYXJhbUtleXMuQ0xJRU5UX1JFUVVFU1RfSUQiLCAiQUFEU2VydmVyUGFyYW1LZXlzLlhfQ0xJRU5UX1NLVSIsICJBQURTZXJ2ZXJQYXJhbUtleXMuWF9DTElFTlRfVkVSIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5YX0NMSUVOVF9PUyIsICJBQURTZXJ2ZXJQYXJhbUtleXMuWF9DTElFTlRfQ1BVIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5YX0FQUF9OQU1FIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5YX0FQUF9WRVIiLCAiQUFEU2VydmVyUGFyYW1LZXlzLlBST01QVCIsICJBQURTZXJ2ZXJQYXJhbUtleXMuU1RBVEUiLCAiQUFEU2VydmVyUGFyYW1LZXlzLk5PTkNFIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5DT0RFX0NIQUxMRU5HRSIsICJBQURTZXJ2ZXJQYXJhbUtleXMuQ09ERV9DSEFMTEVOR0VfTUVUSE9EIiwgIkNsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLnBrY2VQYXJhbXNNaXNzaW5nIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5DT0RFIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5ERVZJQ0VfQ09ERSIsICJBQURTZXJ2ZXJQYXJhbUtleXMuUkVGUkVTSF9UT0tFTiIsICJBQURTZXJ2ZXJQYXJhbUtleXMuQ09ERV9WRVJJRklFUiIsICJBQURTZXJ2ZXJQYXJhbUtleXMuQ0xJRU5UX1NFQ1JFVCIsICJBQURTZXJ2ZXJQYXJhbUtleXMuQ0xJRU5UX0FTU0VSVElPTiIsICJBQURTZXJ2ZXJQYXJhbUtleXMuQ0xJRU5UX0FTU0VSVElPTl9UWVBFIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5PQk9fQVNTRVJUSU9OIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5SRVFVRVNURURfVE9LRU5fVVNFIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5HUkFOVF9UWVBFIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5JTlNUQU5DRV9BV0FSRSIsICJBQURTZXJ2ZXJQYXJhbUtleXMuVE9LRU5fVFlQRSIsICJBQURTZXJ2ZXJQYXJhbUtleXMuUkVRX0NORiIsICJBQURTZXJ2ZXJQYXJhbUtleXMuWF9DTElFTlRfQ1VSUl9URUxFTSIsICJBQURTZXJ2ZXJQYXJhbUtleXMuWF9DTElFTlRfTEFTVF9URUxFTSIsICJBQURTZXJ2ZXJQYXJhbUtleXMuWF9NU19MSUJfQ0FQQUJJTElUWSIsICJBQURTZXJ2ZXJQYXJhbUtleXMuTE9HT1VUX0hJTlQiLCAiQUFEU2VydmVyUGFyYW1LZXlzLkJST0tFUl9SRURJUkVDVF9VUkkiLCAiQUFEU2VydmVyUGFyYW1LZXlzLkVBUl9KV0siLCAiQUFEU2VydmVyUGFyYW1LZXlzLkVBUl9KV0VfQ1JZUFRPIiwgImUiLCAidmVyc2lvbiIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5lbmRwb2ludFJlc29sdXRpb25FcnJvciIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5lbmRTZXNzaW9uRW5kcG9pbnROb3RTdXBwb3J0ZWQiLCAiQ2FjaGVIZWxwZXJzLmdlbmVyYXRlQXV0aG9yaXR5TWV0YWRhdGFFeHBpcmVzQXQiLCAiQ2FjaGVIZWxwZXJzLnVwZGF0ZUF1dGhvcml0eUVuZHBvaW50TWV0YWRhdGEiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMub3BlbklkQ29uZmlnRXJyb3IiLCAiQ2FjaGVIZWxwZXJzLmlzQXV0aG9yaXR5TWV0YWRhdGFFeHBpcmVkIiwgIkNsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmludmFsaWRBdXRob3JpdHlNZXRhZGF0YSIsICJDYWNoZUhlbHBlcnMudXBkYXRlQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YSIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy51bnRydXN0ZWRBdXRob3JpdHkiLCAiQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuaW52YWxpZENsb3VkRGlzY292ZXJ5TWV0YWRhdGEiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMuZW5kcG9pbnRSZXNvbHV0aW9uRXJyb3IiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMubmV0d29ya0Vycm9yIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZEJyb2tlclBhcmFtZXRlcnMiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkRXh0cmFRdWVyeVBhcmFtZXRlcnMiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ29ycmVsYXRpb25JZCIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5pbnN0cnVtZW50QnJva2VyUGFyYW1zIiwgIlVybFV0aWxzLm1hcFRvUXVlcnlTdHJpbmciLCAiSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvckNvZGVzLmludGVyYWN0aW9uUmVxdWlyZWQiLCAiSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvckNvZGVzLmNvbnNlbnRSZXF1aXJlZCIsICJJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yQ29kZXMubG9naW5SZXF1aXJlZCIsICJJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yQ29kZXMuYmFkVG9rZW4iLCAiSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvckNvZGVzLm5vVG9rZW5zRm91bmQiLCAiSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvckNvZGVzLm5hdGl2ZUFjY291bnRVbmF2YWlsYWJsZSIsICJJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yQ29kZXMucmVmcmVzaFRva2VuRXhwaXJlZCIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5ub0NyeXB0b09iamVjdCIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5pbnZhbGlkU3RhdGUiLCAiVGltZVV0aWxzLm5vd1NlY29uZHMiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMubm9uY2VNaXNtYXRjaCIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5hdXRoVGltZU5vdEZvdW5kIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLmludmFsaWRDYWNoZUVudmlyb25tZW50IiwgIkNhY2hlSGVscGVycy5jcmVhdGVJZFRva2VuRW50aXR5IiwgIkNhY2hlSGVscGVycy5jcmVhdGVBY2Nlc3NUb2tlbkVudGl0eSIsICJDYWNoZUhlbHBlcnMuY3JlYXRlUmVmcmVzaFRva2VuRW50aXR5IiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLmtleUlkTWlzc2luZyIsICJUaW1lVXRpbHMudG9EYXRlRnJvbVNlY29uZHMiLCAiQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMucmVkaXJlY3RVcmlFbXB0eSIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5pbnZhbGlkUHJvbXB0VmFsdWUiLCAiQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuaW52YWxpZENsYWltcyIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5wa2NlUGFyYW1zTWlzc2luZyIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5pbnZhbGlkQ29kZUNoYWxsZW5nZU1ldGhvZCIsICJjb25maWciLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMucmVxdWVzdENhbm5vdEJlTWFkZSIsICJUaW1lVXRpbHMubm93U2Vjb25kcyIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5sb2dvdXRSZXF1ZXN0RW1wdHkiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2xpZW50SWQiLCAiQUFEU2VydmVyUGFyYW1LZXlzLkNMSUVOVF9JRCIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRSZWRpcmVjdFVyaSIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRTY29wZXMiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQXV0aG9yaXphdGlvbkNvZGUiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkTGlicmFyeUluZm8iLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQXBwbGljYXRpb25UZWxlbWV0cnkiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkVGhyb3R0bGluZyIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRTZXJ2ZXJUZWxlbWV0cnkiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ29kZVZlcmlmaWVyIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudFNlY3JldCIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDbGllbnRBc3NlcnRpb24iLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2xpZW50QXNzZXJ0aW9uVHlwZSIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRHcmFudFR5cGUiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2xpZW50SW5mbyIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRQb3BUb2tlbiIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRTc2hKd2siLCAiQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMubWlzc2luZ1NzaEp3ayIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDbGFpbXMiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2NzT2lkIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENjc1VwbiIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRCcm9rZXJQYXJhbWV0ZXJzIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZEV4dHJhUXVlcnlQYXJhbWV0ZXJzIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5SRVRVUk5fU1BBX0NPREUiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuaW5zdHJ1bWVudEJyb2tlclBhcmFtcyIsICJVcmxVdGlscy5tYXBUb1F1ZXJ5U3RyaW5nIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFBvc3RMb2dvdXRSZWRpcmVjdFVyaSIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDb3JyZWxhdGlvbklkIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZElkVG9rZW5IaW50IiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFN0YXRlIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZExvZ291dEhpbnQiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkSW5zdGFuY2VBd2FyZSIsICJUaW1lVXRpbHMubm93U2Vjb25kcyIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy50b2tlblJlcXVlc3RFbXB0eSIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5ub0FjY291bnRJblNpbGVudFJlcXVlc3QiLCAiSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvckNvZGVzLm5vVG9rZW5zRm91bmQiLCAiVGltZVV0aWxzLmlzVG9rZW5FeHBpcmVkIiwgIkludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3JDb2Rlcy5yZWZyZXNoVG9rZW5FeHBpcmVkIiwgIkludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3JDb2Rlcy5iYWRUb2tlbiIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDbGllbnRJZCIsICJBQURTZXJ2ZXJQYXJhbUtleXMuQ0xJRU5UX0lEIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFJlZGlyZWN0VXJpIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFNjb3BlcyIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRHcmFudFR5cGUiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2xpZW50SW5mbyIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRMaWJyYXJ5SW5mbyIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRBcHBsaWNhdGlvblRlbGVtZXRyeSIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRUaHJvdHRsaW5nIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFNlcnZlclRlbGVtZXRyeSIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRSZWZyZXNoVG9rZW4iLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2xpZW50U2VjcmV0IiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudEFzc2VydGlvbiIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDbGllbnRBc3NlcnRpb25UeXBlIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFBvcFRva2VuIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFNzaEp3ayIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5taXNzaW5nU3NoSndrIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsYWltcyIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDY3NPaWQiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2NzVXBuIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZEJyb2tlclBhcmFtZXRlcnMiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkRXh0cmFRdWVyeVBhcmFtZXRlcnMiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuaW5zdHJ1bWVudEJyb2tlclBhcmFtcyIsICJVcmxVdGlscy5tYXBUb1F1ZXJ5U3RyaW5nIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLnRva2VuUmVmcmVzaFJlcXVpcmVkIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLm5vQWNjb3VudEluU2lsZW50UmVxdWVzdCIsICJUaW1lVXRpbHMud2FzQ2xvY2tUdXJuZWRCYWNrIiwgIlRpbWVVdGlscy5pc1Rva2VuRXhwaXJlZCIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5hdXRoVGltZU5vdEZvdW5kIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudElkIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5DTElFTlRfSUQiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkU2NvcGVzIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFJlZGlyZWN0VXJpIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENvcnJlbGF0aW9uSWQiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkUmVzcG9uc2VNb2RlIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudEluZm8iLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkUHJvbXB0IiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZERvbWFpbkhpbnQiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkU2lkIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZExvZ2luSGludCIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDY3NPaWQiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2NzVXBuIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZE5vbmNlIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFN0YXRlIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsYWltcyIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRCcm9rZXJQYXJhbWV0ZXJzIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5JTlNUQU5DRV9BV0FSRSIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRJbnN0YW5jZUF3YXJlIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLmF1dGhvcml6YXRpb25Db2RlTWlzc2luZ0Zyb21TZXJ2ZXJSZXNwb25zZSIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5zdGF0ZU5vdEZvdW5kIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLmludmFsaWRTdGF0ZSIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5zdGF0ZU1pc21hdGNoIiwgIkNvbnN0YW50cyIsICJodHRwIiwgImhlYWRlcnMiLCAiQ29uc3RhbnRzIiwgImh0dHBzIiwgImJvZHkiLCAiTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy5pbnZhbGlkRmlsZUV4dGVuc2lvbiIsICJNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzLmludmFsaWRGaWxlUGF0aCIsICJNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzLmludmFsaWRNYW5hZ2VkSWRlbnRpdHlJZFR5cGUiLCAiTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy5pbnZhbGlkU2VjcmV0IiwgIk1hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMucGxhdGZvcm1Ob3RTdXBwb3J0ZWQiLCAiTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy5taXNzaW5nSWQiLCAiTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy5Nc2lFbnZpcm9ubWVudFZhcmlhYmxlVXJsTWFsZm9ybWVkRXJyb3JDb2RlcyIsICJNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzLm5ldHdvcmtVbmF2YWlsYWJsZSIsICJNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzLnVuYWJsZVRvQ3JlYXRlQXp1cmVBcmMiLCAiTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy51bmFibGVUb0NyZWF0ZUNsb3VkU2hlbGwiLCAiTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy51bmFibGVUb0NyZWF0ZVNvdXJjZSIsICJNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzLnVuYWJsZVRvUmVhZFNlY3JldEZpbGUiLCAiTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy51c2VyQXNzaWduZWROb3RBdmFpbGFibGVBdFJ1bnRpbWUiLCAiTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy53d3dBdXRoZW50aWNhdGVIZWFkZXJNaXNzaW5nIiwgIk1hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMud3d3QXV0aGVudGljYXRlSGVhZGVyVW5zdXBwb3J0ZWRGb3JtYXQiLCAiREVGQVVMVF9DQUNIRV9PUFRJT05TIiwgIkRFRkFVTFRfU1lTVEVNX09QVElPTlMiLCAiREVGQVVMVF9URUxFTUVUUllfT1BUSU9OUyIsICJ1dWlkdjQiLCAiY3J5cHRvIiwgImNyeXB0byIsICJqd3QiLCAibmFtZSIsICJ2ZXJzaW9uIiwgImNvbmZpZyIsICJOb2RlQ29uc3RhbnRzIiwgInZlcnNpb24iLCAibmFtZSIsICJ2ZXJzaW9uIiwgIk5vZGVDb25zdGFudHMiLCAiQ29uc3RhbnRzIiwgImNvbmZpZyIsICJOb2RlQ29uc3RhbnRzIiwgIk1hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMuaW52YWxpZE1hbmFnZWRJZGVudGl0eUlkVHlwZSIsICJNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzXHJcbiAgICAgICAgICAgIC5Nc2lFbnZpcm9ubWVudFZhcmlhYmxlVXJsTWFsZm9ybWVkRXJyb3JDb2RlcyIsICJSRURJUkVDVF9VUkkiLCAiY29uZmlnIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iXQp9Cg==
