/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name3 in all)
    __defProp(target, name3, { get: all[name3], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// node_modules/dotenv/package.json
var require_package = __commonJS({
  "node_modules/dotenv/package.json"(exports, module2) {
    module2.exports = {
      name: "dotenv",
      version: "16.4.7",
      description: "Loads environment variables from .env file",
      main: "lib/main.js",
      types: "lib/main.d.ts",
      exports: {
        ".": {
          types: "./lib/main.d.ts",
          require: "./lib/main.js",
          default: "./lib/main.js"
        },
        "./config": "./config.js",
        "./config.js": "./config.js",
        "./lib/env-options": "./lib/env-options.js",
        "./lib/env-options.js": "./lib/env-options.js",
        "./lib/cli-options": "./lib/cli-options.js",
        "./lib/cli-options.js": "./lib/cli-options.js",
        "./package.json": "./package.json"
      },
      scripts: {
        "dts-check": "tsc --project tests/types/tsconfig.json",
        lint: "standard",
        pretest: "npm run lint && npm run dts-check",
        test: "tap run --allow-empty-coverage --disable-coverage --timeout=60000",
        "test:coverage": "tap run --show-full-coverage --timeout=60000 --coverage-report=lcov",
        prerelease: "npm test",
        release: "standard-version"
      },
      repository: {
        type: "git",
        url: "git://github.com/motdotla/dotenv.git"
      },
      funding: "https://dotenvx.com",
      keywords: [
        "dotenv",
        "env",
        ".env",
        "environment",
        "variables",
        "config",
        "settings"
      ],
      readmeFilename: "README.md",
      license: "BSD-2-Clause",
      devDependencies: {
        "@types/node": "^18.11.3",
        decache: "^4.6.2",
        sinon: "^14.0.1",
        standard: "^17.0.0",
        "standard-version": "^9.5.0",
        tap: "^19.2.0",
        typescript: "^4.8.4"
      },
      engines: {
        node: ">=12"
      },
      browser: {
        fs: false
      }
    };
  }
});

// node_modules/dotenv/lib/main.js
var require_main = __commonJS({
  "node_modules/dotenv/lib/main.js"(exports, module2) {
    var fs3 = require("fs");
    var path3 = require("path");
    var os = require("os");
    var crypto4 = require("crypto");
    var packageJson = require_package();
    var version3 = packageJson.version;
    var LINE = /(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;
    function parse(src) {
      const obj = {};
      let lines = src.toString();
      lines = lines.replace(/\r\n?/mg, "\n");
      let match;
      while ((match = LINE.exec(lines)) != null) {
        const key = match[1];
        let value = match[2] || "";
        value = value.trim();
        const maybeQuote = value[0];
        value = value.replace(/^(['"`])([\s\S]*)\1$/mg, "$2");
        if (maybeQuote === '"') {
          value = value.replace(/\\n/g, "\n");
          value = value.replace(/\\r/g, "\r");
        }
        obj[key] = value;
      }
      return obj;
    }
    function _parseVault(options) {
      const vaultPath = _vaultPath(options);
      const result = DotenvModule.configDotenv({ path: vaultPath });
      if (!result.parsed) {
        const err = new Error(`MISSING_DATA: Cannot parse ${vaultPath} for an unknown reason`);
        err.code = "MISSING_DATA";
        throw err;
      }
      const keys = _dotenvKey(options).split(",");
      const length = keys.length;
      let decrypted;
      for (let i = 0; i < length; i++) {
        try {
          const key = keys[i].trim();
          const attrs = _instructions(result, key);
          decrypted = DotenvModule.decrypt(attrs.ciphertext, attrs.key);
          break;
        } catch (error) {
          if (i + 1 >= length) {
            throw error;
          }
        }
      }
      return DotenvModule.parse(decrypted);
    }
    function _log(message) {
      console.log(`[dotenv@${version3}][INFO] ${message}`);
    }
    function _warn(message) {
      console.log(`[dotenv@${version3}][WARN] ${message}`);
    }
    function _debug(message) {
      console.log(`[dotenv@${version3}][DEBUG] ${message}`);
    }
    function _dotenvKey(options) {
      if (options && options.DOTENV_KEY && options.DOTENV_KEY.length > 0) {
        return options.DOTENV_KEY;
      }
      if (process.env.DOTENV_KEY && process.env.DOTENV_KEY.length > 0) {
        return process.env.DOTENV_KEY;
      }
      return "";
    }
    function _instructions(result, dotenvKey) {
      let uri;
      try {
        uri = new URL(dotenvKey);
      } catch (error) {
        if (error.code === "ERR_INVALID_URL") {
          const err = new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");
          err.code = "INVALID_DOTENV_KEY";
          throw err;
        }
        throw error;
      }
      const key = uri.password;
      if (!key) {
        const err = new Error("INVALID_DOTENV_KEY: Missing key part");
        err.code = "INVALID_DOTENV_KEY";
        throw err;
      }
      const environment = uri.searchParams.get("environment");
      if (!environment) {
        const err = new Error("INVALID_DOTENV_KEY: Missing environment part");
        err.code = "INVALID_DOTENV_KEY";
        throw err;
      }
      const environmentKey = `DOTENV_VAULT_${environment.toUpperCase()}`;
      const ciphertext = result.parsed[environmentKey];
      if (!ciphertext) {
        const err = new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${environmentKey} in your .env.vault file.`);
        err.code = "NOT_FOUND_DOTENV_ENVIRONMENT";
        throw err;
      }
      return { ciphertext, key };
    }
    function _vaultPath(options) {
      let possibleVaultPath = null;
      if (options && options.path && options.path.length > 0) {
        if (Array.isArray(options.path)) {
          for (const filepath of options.path) {
            if (fs3.existsSync(filepath)) {
              possibleVaultPath = filepath.endsWith(".vault") ? filepath : `${filepath}.vault`;
            }
          }
        } else {
          possibleVaultPath = options.path.endsWith(".vault") ? options.path : `${options.path}.vault`;
        }
      } else {
        possibleVaultPath = path3.resolve(process.cwd(), ".env.vault");
      }
      if (fs3.existsSync(possibleVaultPath)) {
        return possibleVaultPath;
      }
      return null;
    }
    function _resolveHome(envPath) {
      return envPath[0] === "~" ? path3.join(os.homedir(), envPath.slice(1)) : envPath;
    }
    function _configVault(options) {
      _log("Loading env from encrypted .env.vault");
      const parsed = DotenvModule._parseVault(options);
      let processEnv = process.env;
      if (options && options.processEnv != null) {
        processEnv = options.processEnv;
      }
      DotenvModule.populate(processEnv, parsed, options);
      return { parsed };
    }
    function configDotenv(options) {
      const dotenvPath = path3.resolve(process.cwd(), ".env");
      let encoding = "utf8";
      const debug = Boolean(options && options.debug);
      if (options && options.encoding) {
        encoding = options.encoding;
      } else {
        if (debug) {
          _debug("No encoding is specified. UTF-8 is used by default");
        }
      }
      let optionPaths = [dotenvPath];
      if (options && options.path) {
        if (!Array.isArray(options.path)) {
          optionPaths = [_resolveHome(options.path)];
        } else {
          optionPaths = [];
          for (const filepath of options.path) {
            optionPaths.push(_resolveHome(filepath));
          }
        }
      }
      let lastError;
      const parsedAll = {};
      for (const path4 of optionPaths) {
        try {
          const parsed = DotenvModule.parse(fs3.readFileSync(path4, { encoding }));
          DotenvModule.populate(parsedAll, parsed, options);
        } catch (e) {
          if (debug) {
            _debug(`Failed to load ${path4} ${e.message}`);
          }
          lastError = e;
        }
      }
      let processEnv = process.env;
      if (options && options.processEnv != null) {
        processEnv = options.processEnv;
      }
      DotenvModule.populate(processEnv, parsedAll, options);
      if (lastError) {
        return { parsed: parsedAll, error: lastError };
      } else {
        return { parsed: parsedAll };
      }
    }
    function config2(options) {
      if (_dotenvKey(options).length === 0) {
        return DotenvModule.configDotenv(options);
      }
      const vaultPath = _vaultPath(options);
      if (!vaultPath) {
        _warn(`You set DOTENV_KEY but you are missing a .env.vault file at ${vaultPath}. Did you forget to build it?`);
        return DotenvModule.configDotenv(options);
      }
      return DotenvModule._configVault(options);
    }
    function decrypt(encrypted, keyStr) {
      const key = Buffer.from(keyStr.slice(-64), "hex");
      let ciphertext = Buffer.from(encrypted, "base64");
      const nonce = ciphertext.subarray(0, 12);
      const authTag = ciphertext.subarray(-16);
      ciphertext = ciphertext.subarray(12, -16);
      try {
        const aesgcm = crypto4.createDecipheriv("aes-256-gcm", key, nonce);
        aesgcm.setAuthTag(authTag);
        return `${aesgcm.update(ciphertext)}${aesgcm.final()}`;
      } catch (error) {
        const isRange = error instanceof RangeError;
        const invalidKeyLength = error.message === "Invalid key length";
        const decryptionFailed = error.message === "Unsupported state or unable to authenticate data";
        if (isRange || invalidKeyLength) {
          const err = new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");
          err.code = "INVALID_DOTENV_KEY";
          throw err;
        } else if (decryptionFailed) {
          const err = new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");
          err.code = "DECRYPTION_FAILED";
          throw err;
        } else {
          throw error;
        }
      }
    }
    function populate(processEnv, parsed, options = {}) {
      const debug = Boolean(options && options.debug);
      const override = Boolean(options && options.override);
      if (typeof parsed !== "object") {
        const err = new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");
        err.code = "OBJECT_REQUIRED";
        throw err;
      }
      for (const key of Object.keys(parsed)) {
        if (Object.prototype.hasOwnProperty.call(processEnv, key)) {
          if (override === true) {
            processEnv[key] = parsed[key];
          }
          if (debug) {
            if (override === true) {
              _debug(`"${key}" is already defined and WAS overwritten`);
            } else {
              _debug(`"${key}" is already defined and was NOT overwritten`);
            }
          }
        } else {
          processEnv[key] = parsed[key];
        }
      }
    }
    var DotenvModule = {
      configDotenv,
      _configVault,
      _parseVault,
      config: config2,
      decrypt,
      parse,
      populate
    };
    module2.exports.configDotenv = DotenvModule.configDotenv;
    module2.exports._configVault = DotenvModule._configVault;
    module2.exports._parseVault = DotenvModule._parseVault;
    module2.exports.config = DotenvModule.config;
    module2.exports.decrypt = DotenvModule.decrypt;
    module2.exports.parse = DotenvModule.parse;
    module2.exports.populate = DotenvModule.populate;
    module2.exports = DotenvModule;
  }
});

// node_modules/safe-buffer/index.js
var require_safe_buffer = __commonJS({
  "node_modules/safe-buffer/index.js"(exports, module2) {
    var buffer = require("buffer");
    var Buffer2 = buffer.Buffer;
    function copyProps(src, dst) {
      for (var key in src) {
        dst[key] = src[key];
      }
    }
    if (Buffer2.from && Buffer2.alloc && Buffer2.allocUnsafe && Buffer2.allocUnsafeSlow) {
      module2.exports = buffer;
    } else {
      copyProps(buffer, exports);
      exports.Buffer = SafeBuffer;
    }
    function SafeBuffer(arg, encodingOrOffset, length) {
      return Buffer2(arg, encodingOrOffset, length);
    }
    SafeBuffer.prototype = Object.create(Buffer2.prototype);
    copyProps(Buffer2, SafeBuffer);
    SafeBuffer.from = function(arg, encodingOrOffset, length) {
      if (typeof arg === "number") {
        throw new TypeError("Argument must not be a number");
      }
      return Buffer2(arg, encodingOrOffset, length);
    };
    SafeBuffer.alloc = function(size, fill, encoding) {
      if (typeof size !== "number") {
        throw new TypeError("Argument must be a number");
      }
      var buf = Buffer2(size);
      if (fill !== void 0) {
        if (typeof encoding === "string") {
          buf.fill(fill, encoding);
        } else {
          buf.fill(fill);
        }
      } else {
        buf.fill(0);
      }
      return buf;
    };
    SafeBuffer.allocUnsafe = function(size) {
      if (typeof size !== "number") {
        throw new TypeError("Argument must be a number");
      }
      return Buffer2(size);
    };
    SafeBuffer.allocUnsafeSlow = function(size) {
      if (typeof size !== "number") {
        throw new TypeError("Argument must be a number");
      }
      return buffer.SlowBuffer(size);
    };
  }
});

// node_modules/jws/lib/data-stream.js
var require_data_stream = __commonJS({
  "node_modules/jws/lib/data-stream.js"(exports, module2) {
    var Buffer2 = require_safe_buffer().Buffer;
    var Stream = require("stream");
    var util = require("util");
    function DataStream(data) {
      this.buffer = null;
      this.writable = true;
      this.readable = true;
      if (!data) {
        this.buffer = Buffer2.alloc(0);
        return this;
      }
      if (typeof data.pipe === "function") {
        this.buffer = Buffer2.alloc(0);
        data.pipe(this);
        return this;
      }
      if (data.length || typeof data === "object") {
        this.buffer = data;
        this.writable = false;
        process.nextTick(function() {
          this.emit("end", data);
          this.readable = false;
          this.emit("close");
        }.bind(this));
        return this;
      }
      throw new TypeError("Unexpected data type (" + typeof data + ")");
    }
    util.inherits(DataStream, Stream);
    DataStream.prototype.write = function write(data) {
      this.buffer = Buffer2.concat([this.buffer, Buffer2.from(data)]);
      this.emit("data", data);
    };
    DataStream.prototype.end = function end(data) {
      if (data)
        this.write(data);
      this.emit("end", data);
      this.emit("close");
      this.writable = false;
      this.readable = false;
    };
    module2.exports = DataStream;
  }
});

// node_modules/buffer-equal-constant-time/index.js
var require_buffer_equal_constant_time = __commonJS({
  "node_modules/buffer-equal-constant-time/index.js"(exports, module2) {
    "use strict";
    var Buffer2 = require("buffer").Buffer;
    var SlowBuffer = require("buffer").SlowBuffer;
    module2.exports = bufferEq;
    function bufferEq(a, b) {
      if (!Buffer2.isBuffer(a) || !Buffer2.isBuffer(b)) {
        return false;
      }
      if (a.length !== b.length) {
        return false;
      }
      var c = 0;
      for (var i = 0; i < a.length; i++) {
        c |= a[i] ^ b[i];
      }
      return c === 0;
    }
    bufferEq.install = function() {
      Buffer2.prototype.equal = SlowBuffer.prototype.equal = function equal(that) {
        return bufferEq(this, that);
      };
    };
    var origBufEqual = Buffer2.prototype.equal;
    var origSlowBufEqual = SlowBuffer.prototype.equal;
    bufferEq.restore = function() {
      Buffer2.prototype.equal = origBufEqual;
      SlowBuffer.prototype.equal = origSlowBufEqual;
    };
  }
});

// node_modules/ecdsa-sig-formatter/src/param-bytes-for-alg.js
var require_param_bytes_for_alg = __commonJS({
  "node_modules/ecdsa-sig-formatter/src/param-bytes-for-alg.js"(exports, module2) {
    "use strict";
    function getParamSize(keySize) {
      var result = (keySize / 8 | 0) + (keySize % 8 === 0 ? 0 : 1);
      return result;
    }
    var paramBytesForAlg = {
      ES256: getParamSize(256),
      ES384: getParamSize(384),
      ES512: getParamSize(521)
    };
    function getParamBytesForAlg(alg) {
      var paramBytes = paramBytesForAlg[alg];
      if (paramBytes) {
        return paramBytes;
      }
      throw new Error('Unknown algorithm "' + alg + '"');
    }
    module2.exports = getParamBytesForAlg;
  }
});

// node_modules/ecdsa-sig-formatter/src/ecdsa-sig-formatter.js
var require_ecdsa_sig_formatter = __commonJS({
  "node_modules/ecdsa-sig-formatter/src/ecdsa-sig-formatter.js"(exports, module2) {
    "use strict";
    var Buffer2 = require_safe_buffer().Buffer;
    var getParamBytesForAlg = require_param_bytes_for_alg();
    var MAX_OCTET = 128;
    var CLASS_UNIVERSAL = 0;
    var PRIMITIVE_BIT = 32;
    var TAG_SEQ = 16;
    var TAG_INT = 2;
    var ENCODED_TAG_SEQ = TAG_SEQ | PRIMITIVE_BIT | CLASS_UNIVERSAL << 6;
    var ENCODED_TAG_INT = TAG_INT | CLASS_UNIVERSAL << 6;
    function base64Url(base64) {
      return base64.replace(/=/g, "").replace(/\+/g, "-").replace(/\//g, "_");
    }
    function signatureAsBuffer(signature) {
      if (Buffer2.isBuffer(signature)) {
        return signature;
      } else if ("string" === typeof signature) {
        return Buffer2.from(signature, "base64");
      }
      throw new TypeError("ECDSA signature must be a Base64 string or a Buffer");
    }
    function derToJose(signature, alg) {
      signature = signatureAsBuffer(signature);
      var paramBytes = getParamBytesForAlg(alg);
      var maxEncodedParamLength = paramBytes + 1;
      var inputLength = signature.length;
      var offset = 0;
      if (signature[offset++] !== ENCODED_TAG_SEQ) {
        throw new Error('Could not find expected "seq"');
      }
      var seqLength = signature[offset++];
      if (seqLength === (MAX_OCTET | 1)) {
        seqLength = signature[offset++];
      }
      if (inputLength - offset < seqLength) {
        throw new Error('"seq" specified length of "' + seqLength + '", only "' + (inputLength - offset) + '" remaining');
      }
      if (signature[offset++] !== ENCODED_TAG_INT) {
        throw new Error('Could not find expected "int" for "r"');
      }
      var rLength = signature[offset++];
      if (inputLength - offset - 2 < rLength) {
        throw new Error('"r" specified length of "' + rLength + '", only "' + (inputLength - offset - 2) + '" available');
      }
      if (maxEncodedParamLength < rLength) {
        throw new Error('"r" specified length of "' + rLength + '", max of "' + maxEncodedParamLength + '" is acceptable');
      }
      var rOffset = offset;
      offset += rLength;
      if (signature[offset++] !== ENCODED_TAG_INT) {
        throw new Error('Could not find expected "int" for "s"');
      }
      var sLength = signature[offset++];
      if (inputLength - offset !== sLength) {
        throw new Error('"s" specified length of "' + sLength + '", expected "' + (inputLength - offset) + '"');
      }
      if (maxEncodedParamLength < sLength) {
        throw new Error('"s" specified length of "' + sLength + '", max of "' + maxEncodedParamLength + '" is acceptable');
      }
      var sOffset = offset;
      offset += sLength;
      if (offset !== inputLength) {
        throw new Error('Expected to consume entire buffer, but "' + (inputLength - offset) + '" bytes remain');
      }
      var rPadding = paramBytes - rLength, sPadding = paramBytes - sLength;
      var dst = Buffer2.allocUnsafe(rPadding + rLength + sPadding + sLength);
      for (offset = 0; offset < rPadding; ++offset) {
        dst[offset] = 0;
      }
      signature.copy(dst, offset, rOffset + Math.max(-rPadding, 0), rOffset + rLength);
      offset = paramBytes;
      for (var o = offset; offset < o + sPadding; ++offset) {
        dst[offset] = 0;
      }
      signature.copy(dst, offset, sOffset + Math.max(-sPadding, 0), sOffset + sLength);
      dst = dst.toString("base64");
      dst = base64Url(dst);
      return dst;
    }
    function countPadding(buf, start, stop) {
      var padding = 0;
      while (start + padding < stop && buf[start + padding] === 0) {
        ++padding;
      }
      var needsSign = buf[start + padding] >= MAX_OCTET;
      if (needsSign) {
        --padding;
      }
      return padding;
    }
    function joseToDer(signature, alg) {
      signature = signatureAsBuffer(signature);
      var paramBytes = getParamBytesForAlg(alg);
      var signatureBytes = signature.length;
      if (signatureBytes !== paramBytes * 2) {
        throw new TypeError('"' + alg + '" signatures must be "' + paramBytes * 2 + '" bytes, saw "' + signatureBytes + '"');
      }
      var rPadding = countPadding(signature, 0, paramBytes);
      var sPadding = countPadding(signature, paramBytes, signature.length);
      var rLength = paramBytes - rPadding;
      var sLength = paramBytes - sPadding;
      var rsBytes = 1 + 1 + rLength + 1 + 1 + sLength;
      var shortLength = rsBytes < MAX_OCTET;
      var dst = Buffer2.allocUnsafe((shortLength ? 2 : 3) + rsBytes);
      var offset = 0;
      dst[offset++] = ENCODED_TAG_SEQ;
      if (shortLength) {
        dst[offset++] = rsBytes;
      } else {
        dst[offset++] = MAX_OCTET | 1;
        dst[offset++] = rsBytes & 255;
      }
      dst[offset++] = ENCODED_TAG_INT;
      dst[offset++] = rLength;
      if (rPadding < 0) {
        dst[offset++] = 0;
        offset += signature.copy(dst, offset, 0, paramBytes);
      } else {
        offset += signature.copy(dst, offset, rPadding, paramBytes);
      }
      dst[offset++] = ENCODED_TAG_INT;
      dst[offset++] = sLength;
      if (sPadding < 0) {
        dst[offset++] = 0;
        signature.copy(dst, offset, paramBytes);
      } else {
        signature.copy(dst, offset, paramBytes + sPadding);
      }
      return dst;
    }
    module2.exports = {
      derToJose,
      joseToDer
    };
  }
});

// node_modules/jwa/index.js
var require_jwa = __commonJS({
  "node_modules/jwa/index.js"(exports, module2) {
    var bufferEqual = require_buffer_equal_constant_time();
    var Buffer2 = require_safe_buffer().Buffer;
    var crypto4 = require("crypto");
    var formatEcdsa = require_ecdsa_sig_formatter();
    var util = require("util");
    var MSG_INVALID_ALGORITHM = '"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".';
    var MSG_INVALID_SECRET = "secret must be a string or buffer";
    var MSG_INVALID_VERIFIER_KEY = "key must be a string or a buffer";
    var MSG_INVALID_SIGNER_KEY = "key must be a string, a buffer or an object";
    var supportsKeyObjects = typeof crypto4.createPublicKey === "function";
    if (supportsKeyObjects) {
      MSG_INVALID_VERIFIER_KEY += " or a KeyObject";
      MSG_INVALID_SECRET += "or a KeyObject";
    }
    function checkIsPublicKey(key) {
      if (Buffer2.isBuffer(key)) {
        return;
      }
      if (typeof key === "string") {
        return;
      }
      if (!supportsKeyObjects) {
        throw typeError(MSG_INVALID_VERIFIER_KEY);
      }
      if (typeof key !== "object") {
        throw typeError(MSG_INVALID_VERIFIER_KEY);
      }
      if (typeof key.type !== "string") {
        throw typeError(MSG_INVALID_VERIFIER_KEY);
      }
      if (typeof key.asymmetricKeyType !== "string") {
        throw typeError(MSG_INVALID_VERIFIER_KEY);
      }
      if (typeof key.export !== "function") {
        throw typeError(MSG_INVALID_VERIFIER_KEY);
      }
    }
    function checkIsPrivateKey(key) {
      if (Buffer2.isBuffer(key)) {
        return;
      }
      if (typeof key === "string") {
        return;
      }
      if (typeof key === "object") {
        return;
      }
      throw typeError(MSG_INVALID_SIGNER_KEY);
    }
    function checkIsSecretKey(key) {
      if (Buffer2.isBuffer(key)) {
        return;
      }
      if (typeof key === "string") {
        return key;
      }
      if (!supportsKeyObjects) {
        throw typeError(MSG_INVALID_SECRET);
      }
      if (typeof key !== "object") {
        throw typeError(MSG_INVALID_SECRET);
      }
      if (key.type !== "secret") {
        throw typeError(MSG_INVALID_SECRET);
      }
      if (typeof key.export !== "function") {
        throw typeError(MSG_INVALID_SECRET);
      }
    }
    function fromBase64(base64) {
      return base64.replace(/=/g, "").replace(/\+/g, "-").replace(/\//g, "_");
    }
    function toBase64(base64url) {
      base64url = base64url.toString();
      var padding = 4 - base64url.length % 4;
      if (padding !== 4) {
        for (var i = 0; i < padding; ++i) {
          base64url += "=";
        }
      }
      return base64url.replace(/\-/g, "+").replace(/_/g, "/");
    }
    function typeError(template) {
      var args = [].slice.call(arguments, 1);
      var errMsg = util.format.bind(util, template).apply(null, args);
      return new TypeError(errMsg);
    }
    function bufferOrString(obj) {
      return Buffer2.isBuffer(obj) || typeof obj === "string";
    }
    function normalizeInput(thing) {
      if (!bufferOrString(thing))
        thing = JSON.stringify(thing);
      return thing;
    }
    function createHmacSigner(bits) {
      return function sign(thing, secret) {
        checkIsSecretKey(secret);
        thing = normalizeInput(thing);
        var hmac = crypto4.createHmac("sha" + bits, secret);
        var sig = (hmac.update(thing), hmac.digest("base64"));
        return fromBase64(sig);
      };
    }
    function createHmacVerifier(bits) {
      return function verify(thing, signature, secret) {
        var computedSig = createHmacSigner(bits)(thing, secret);
        return bufferEqual(Buffer2.from(signature), Buffer2.from(computedSig));
      };
    }
    function createKeySigner(bits) {
      return function sign(thing, privateKey) {
        checkIsPrivateKey(privateKey);
        thing = normalizeInput(thing);
        var signer = crypto4.createSign("RSA-SHA" + bits);
        var sig = (signer.update(thing), signer.sign(privateKey, "base64"));
        return fromBase64(sig);
      };
    }
    function createKeyVerifier(bits) {
      return function verify(thing, signature, publicKey) {
        checkIsPublicKey(publicKey);
        thing = normalizeInput(thing);
        signature = toBase64(signature);
        var verifier = crypto4.createVerify("RSA-SHA" + bits);
        verifier.update(thing);
        return verifier.verify(publicKey, signature, "base64");
      };
    }
    function createPSSKeySigner(bits) {
      return function sign(thing, privateKey) {
        checkIsPrivateKey(privateKey);
        thing = normalizeInput(thing);
        var signer = crypto4.createSign("RSA-SHA" + bits);
        var sig = (signer.update(thing), signer.sign({
          key: privateKey,
          padding: crypto4.constants.RSA_PKCS1_PSS_PADDING,
          saltLength: crypto4.constants.RSA_PSS_SALTLEN_DIGEST
        }, "base64"));
        return fromBase64(sig);
      };
    }
    function createPSSKeyVerifier(bits) {
      return function verify(thing, signature, publicKey) {
        checkIsPublicKey(publicKey);
        thing = normalizeInput(thing);
        signature = toBase64(signature);
        var verifier = crypto4.createVerify("RSA-SHA" + bits);
        verifier.update(thing);
        return verifier.verify({
          key: publicKey,
          padding: crypto4.constants.RSA_PKCS1_PSS_PADDING,
          saltLength: crypto4.constants.RSA_PSS_SALTLEN_DIGEST
        }, signature, "base64");
      };
    }
    function createECDSASigner(bits) {
      var inner = createKeySigner(bits);
      return function sign() {
        var signature = inner.apply(null, arguments);
        signature = formatEcdsa.derToJose(signature, "ES" + bits);
        return signature;
      };
    }
    function createECDSAVerifer(bits) {
      var inner = createKeyVerifier(bits);
      return function verify(thing, signature, publicKey) {
        signature = formatEcdsa.joseToDer(signature, "ES" + bits).toString("base64");
        var result = inner(thing, signature, publicKey);
        return result;
      };
    }
    function createNoneSigner() {
      return function sign() {
        return "";
      };
    }
    function createNoneVerifier() {
      return function verify(thing, signature) {
        return signature === "";
      };
    }
    module2.exports = function jwa(algorithm) {
      var signerFactories = {
        hs: createHmacSigner,
        rs: createKeySigner,
        ps: createPSSKeySigner,
        es: createECDSASigner,
        none: createNoneSigner
      };
      var verifierFactories = {
        hs: createHmacVerifier,
        rs: createKeyVerifier,
        ps: createPSSKeyVerifier,
        es: createECDSAVerifer,
        none: createNoneVerifier
      };
      var match = algorithm.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);
      if (!match)
        throw typeError(MSG_INVALID_ALGORITHM, algorithm);
      var algo = (match[1] || match[3]).toLowerCase();
      var bits = match[2];
      return {
        sign: signerFactories[algo](bits),
        verify: verifierFactories[algo](bits)
      };
    };
  }
});

// node_modules/jws/lib/tostring.js
var require_tostring = __commonJS({
  "node_modules/jws/lib/tostring.js"(exports, module2) {
    var Buffer2 = require("buffer").Buffer;
    module2.exports = function toString(obj) {
      if (typeof obj === "string")
        return obj;
      if (typeof obj === "number" || Buffer2.isBuffer(obj))
        return obj.toString();
      return JSON.stringify(obj);
    };
  }
});

// node_modules/jws/lib/sign-stream.js
var require_sign_stream = __commonJS({
  "node_modules/jws/lib/sign-stream.js"(exports, module2) {
    var Buffer2 = require_safe_buffer().Buffer;
    var DataStream = require_data_stream();
    var jwa = require_jwa();
    var Stream = require("stream");
    var toString = require_tostring();
    var util = require("util");
    function base64url(string, encoding) {
      return Buffer2.from(string, encoding).toString("base64").replace(/=/g, "").replace(/\+/g, "-").replace(/\//g, "_");
    }
    function jwsSecuredInput(header, payload, encoding) {
      encoding = encoding || "utf8";
      var encodedHeader = base64url(toString(header), "binary");
      var encodedPayload = base64url(toString(payload), encoding);
      return util.format("%s.%s", encodedHeader, encodedPayload);
    }
    function jwsSign(opts) {
      var header = opts.header;
      var payload = opts.payload;
      var secretOrKey = opts.secret || opts.privateKey;
      var encoding = opts.encoding;
      var algo = jwa(header.alg);
      var securedInput = jwsSecuredInput(header, payload, encoding);
      var signature = algo.sign(securedInput, secretOrKey);
      return util.format("%s.%s", securedInput, signature);
    }
    function SignStream(opts) {
      var secret = opts.secret || opts.privateKey || opts.key;
      var secretStream = new DataStream(secret);
      this.readable = true;
      this.header = opts.header;
      this.encoding = opts.encoding;
      this.secret = this.privateKey = this.key = secretStream;
      this.payload = new DataStream(opts.payload);
      this.secret.once("close", function() {
        if (!this.payload.writable && this.readable)
          this.sign();
      }.bind(this));
      this.payload.once("close", function() {
        if (!this.secret.writable && this.readable)
          this.sign();
      }.bind(this));
    }
    util.inherits(SignStream, Stream);
    SignStream.prototype.sign = function sign() {
      try {
        var signature = jwsSign({
          header: this.header,
          payload: this.payload.buffer,
          secret: this.secret.buffer,
          encoding: this.encoding
        });
        this.emit("done", signature);
        this.emit("data", signature);
        this.emit("end");
        this.readable = false;
        return signature;
      } catch (e) {
        this.readable = false;
        this.emit("error", e);
        this.emit("close");
      }
    };
    SignStream.sign = jwsSign;
    module2.exports = SignStream;
  }
});

// node_modules/jws/lib/verify-stream.js
var require_verify_stream = __commonJS({
  "node_modules/jws/lib/verify-stream.js"(exports, module2) {
    var Buffer2 = require_safe_buffer().Buffer;
    var DataStream = require_data_stream();
    var jwa = require_jwa();
    var Stream = require("stream");
    var toString = require_tostring();
    var util = require("util");
    var JWS_REGEX = /^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;
    function isObject(thing) {
      return Object.prototype.toString.call(thing) === "[object Object]";
    }
    function safeJsonParse(thing) {
      if (isObject(thing))
        return thing;
      try {
        return JSON.parse(thing);
      } catch (e) {
        return void 0;
      }
    }
    function headerFromJWS(jwsSig) {
      var encodedHeader = jwsSig.split(".", 1)[0];
      return safeJsonParse(Buffer2.from(encodedHeader, "base64").toString("binary"));
    }
    function securedInputFromJWS(jwsSig) {
      return jwsSig.split(".", 2).join(".");
    }
    function signatureFromJWS(jwsSig) {
      return jwsSig.split(".")[2];
    }
    function payloadFromJWS(jwsSig, encoding) {
      encoding = encoding || "utf8";
      var payload = jwsSig.split(".")[1];
      return Buffer2.from(payload, "base64").toString(encoding);
    }
    function isValidJws(string) {
      return JWS_REGEX.test(string) && !!headerFromJWS(string);
    }
    function jwsVerify(jwsSig, algorithm, secretOrKey) {
      if (!algorithm) {
        var err = new Error("Missing algorithm parameter for jws.verify");
        err.code = "MISSING_ALGORITHM";
        throw err;
      }
      jwsSig = toString(jwsSig);
      var signature = signatureFromJWS(jwsSig);
      var securedInput = securedInputFromJWS(jwsSig);
      var algo = jwa(algorithm);
      return algo.verify(securedInput, signature, secretOrKey);
    }
    function jwsDecode(jwsSig, opts) {
      opts = opts || {};
      jwsSig = toString(jwsSig);
      if (!isValidJws(jwsSig))
        return null;
      var header = headerFromJWS(jwsSig);
      if (!header)
        return null;
      var payload = payloadFromJWS(jwsSig);
      if (header.typ === "JWT" || opts.json)
        payload = JSON.parse(payload, opts.encoding);
      return {
        header,
        payload,
        signature: signatureFromJWS(jwsSig)
      };
    }
    function VerifyStream(opts) {
      opts = opts || {};
      var secretOrKey = opts.secret || opts.publicKey || opts.key;
      var secretStream = new DataStream(secretOrKey);
      this.readable = true;
      this.algorithm = opts.algorithm;
      this.encoding = opts.encoding;
      this.secret = this.publicKey = this.key = secretStream;
      this.signature = new DataStream(opts.signature);
      this.secret.once("close", function() {
        if (!this.signature.writable && this.readable)
          this.verify();
      }.bind(this));
      this.signature.once("close", function() {
        if (!this.secret.writable && this.readable)
          this.verify();
      }.bind(this));
    }
    util.inherits(VerifyStream, Stream);
    VerifyStream.prototype.verify = function verify() {
      try {
        var valid = jwsVerify(this.signature.buffer, this.algorithm, this.key.buffer);
        var obj = jwsDecode(this.signature.buffer, this.encoding);
        this.emit("done", valid, obj);
        this.emit("data", valid);
        this.emit("end");
        this.readable = false;
        return valid;
      } catch (e) {
        this.readable = false;
        this.emit("error", e);
        this.emit("close");
      }
    };
    VerifyStream.decode = jwsDecode;
    VerifyStream.isValid = isValidJws;
    VerifyStream.verify = jwsVerify;
    module2.exports = VerifyStream;
  }
});

// node_modules/jws/index.js
var require_jws = __commonJS({
  "node_modules/jws/index.js"(exports) {
    var SignStream = require_sign_stream();
    var VerifyStream = require_verify_stream();
    var ALGORITHMS = [
      "HS256",
      "HS384",
      "HS512",
      "RS256",
      "RS384",
      "RS512",
      "PS256",
      "PS384",
      "PS512",
      "ES256",
      "ES384",
      "ES512"
    ];
    exports.ALGORITHMS = ALGORITHMS;
    exports.sign = SignStream.sign;
    exports.verify = VerifyStream.verify;
    exports.decode = VerifyStream.decode;
    exports.isValid = VerifyStream.isValid;
    exports.createSign = function createSign(opts) {
      return new SignStream(opts);
    };
    exports.createVerify = function createVerify(opts) {
      return new VerifyStream(opts);
    };
  }
});

// node_modules/jsonwebtoken/decode.js
var require_decode = __commonJS({
  "node_modules/jsonwebtoken/decode.js"(exports, module2) {
    var jws = require_jws();
    module2.exports = function(jwt2, options) {
      options = options || {};
      var decoded = jws.decode(jwt2, options);
      if (!decoded) {
        return null;
      }
      var payload = decoded.payload;
      if (typeof payload === "string") {
        try {
          var obj = JSON.parse(payload);
          if (obj !== null && typeof obj === "object") {
            payload = obj;
          }
        } catch (e) {
        }
      }
      if (options.complete === true) {
        return {
          header: decoded.header,
          payload,
          signature: decoded.signature
        };
      }
      return payload;
    };
  }
});

// node_modules/jsonwebtoken/lib/JsonWebTokenError.js
var require_JsonWebTokenError = __commonJS({
  "node_modules/jsonwebtoken/lib/JsonWebTokenError.js"(exports, module2) {
    var JsonWebTokenError = function(message, error) {
      Error.call(this, message);
      if (Error.captureStackTrace) {
        Error.captureStackTrace(this, this.constructor);
      }
      this.name = "JsonWebTokenError";
      this.message = message;
      if (error) this.inner = error;
    };
    JsonWebTokenError.prototype = Object.create(Error.prototype);
    JsonWebTokenError.prototype.constructor = JsonWebTokenError;
    module2.exports = JsonWebTokenError;
  }
});

// node_modules/jsonwebtoken/lib/NotBeforeError.js
var require_NotBeforeError = __commonJS({
  "node_modules/jsonwebtoken/lib/NotBeforeError.js"(exports, module2) {
    var JsonWebTokenError = require_JsonWebTokenError();
    var NotBeforeError = function(message, date) {
      JsonWebTokenError.call(this, message);
      this.name = "NotBeforeError";
      this.date = date;
    };
    NotBeforeError.prototype = Object.create(JsonWebTokenError.prototype);
    NotBeforeError.prototype.constructor = NotBeforeError;
    module2.exports = NotBeforeError;
  }
});

// node_modules/jsonwebtoken/lib/TokenExpiredError.js
var require_TokenExpiredError = __commonJS({
  "node_modules/jsonwebtoken/lib/TokenExpiredError.js"(exports, module2) {
    var JsonWebTokenError = require_JsonWebTokenError();
    var TokenExpiredError = function(message, expiredAt) {
      JsonWebTokenError.call(this, message);
      this.name = "TokenExpiredError";
      this.expiredAt = expiredAt;
    };
    TokenExpiredError.prototype = Object.create(JsonWebTokenError.prototype);
    TokenExpiredError.prototype.constructor = TokenExpiredError;
    module2.exports = TokenExpiredError;
  }
});

// node_modules/ms/index.js
var require_ms = __commonJS({
  "node_modules/ms/index.js"(exports, module2) {
    var s = 1e3;
    var m = s * 60;
    var h = m * 60;
    var d = h * 24;
    var w = d * 7;
    var y = d * 365.25;
    module2.exports = function(val, options) {
      options = options || {};
      var type = typeof val;
      if (type === "string" && val.length > 0) {
        return parse(val);
      } else if (type === "number" && isFinite(val)) {
        return options.long ? fmtLong(val) : fmtShort(val);
      }
      throw new Error(
        "val is not a non-empty string or a valid number. val=" + JSON.stringify(val)
      );
    };
    function parse(str) {
      str = String(str);
      if (str.length > 100) {
        return;
      }
      var match = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(
        str
      );
      if (!match) {
        return;
      }
      var n = parseFloat(match[1]);
      var type = (match[2] || "ms").toLowerCase();
      switch (type) {
        case "years":
        case "year":
        case "yrs":
        case "yr":
        case "y":
          return n * y;
        case "weeks":
        case "week":
        case "w":
          return n * w;
        case "days":
        case "day":
        case "d":
          return n * d;
        case "hours":
        case "hour":
        case "hrs":
        case "hr":
        case "h":
          return n * h;
        case "minutes":
        case "minute":
        case "mins":
        case "min":
        case "m":
          return n * m;
        case "seconds":
        case "second":
        case "secs":
        case "sec":
        case "s":
          return n * s;
        case "milliseconds":
        case "millisecond":
        case "msecs":
        case "msec":
        case "ms":
          return n;
        default:
          return void 0;
      }
    }
    function fmtShort(ms) {
      var msAbs = Math.abs(ms);
      if (msAbs >= d) {
        return Math.round(ms / d) + "d";
      }
      if (msAbs >= h) {
        return Math.round(ms / h) + "h";
      }
      if (msAbs >= m) {
        return Math.round(ms / m) + "m";
      }
      if (msAbs >= s) {
        return Math.round(ms / s) + "s";
      }
      return ms + "ms";
    }
    function fmtLong(ms) {
      var msAbs = Math.abs(ms);
      if (msAbs >= d) {
        return plural(ms, msAbs, d, "day");
      }
      if (msAbs >= h) {
        return plural(ms, msAbs, h, "hour");
      }
      if (msAbs >= m) {
        return plural(ms, msAbs, m, "minute");
      }
      if (msAbs >= s) {
        return plural(ms, msAbs, s, "second");
      }
      return ms + " ms";
    }
    function plural(ms, msAbs, n, name3) {
      var isPlural = msAbs >= n * 1.5;
      return Math.round(ms / n) + " " + name3 + (isPlural ? "s" : "");
    }
  }
});

// node_modules/jsonwebtoken/lib/timespan.js
var require_timespan = __commonJS({
  "node_modules/jsonwebtoken/lib/timespan.js"(exports, module2) {
    var ms = require_ms();
    module2.exports = function(time, iat) {
      var timestamp = iat || Math.floor(Date.now() / 1e3);
      if (typeof time === "string") {
        var milliseconds = ms(time);
        if (typeof milliseconds === "undefined") {
          return;
        }
        return Math.floor(timestamp + milliseconds / 1e3);
      } else if (typeof time === "number") {
        return timestamp + time;
      } else {
        return;
      }
    };
  }
});

// node_modules/semver/internal/constants.js
var require_constants = __commonJS({
  "node_modules/semver/internal/constants.js"(exports, module2) {
    var SEMVER_SPEC_VERSION = "2.0.0";
    var MAX_LENGTH = 256;
    var MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER || /* istanbul ignore next */
    9007199254740991;
    var MAX_SAFE_COMPONENT_LENGTH = 16;
    var MAX_SAFE_BUILD_LENGTH = MAX_LENGTH - 6;
    var RELEASE_TYPES = [
      "major",
      "premajor",
      "minor",
      "preminor",
      "patch",
      "prepatch",
      "prerelease"
    ];
    module2.exports = {
      MAX_LENGTH,
      MAX_SAFE_COMPONENT_LENGTH,
      MAX_SAFE_BUILD_LENGTH,
      MAX_SAFE_INTEGER,
      RELEASE_TYPES,
      SEMVER_SPEC_VERSION,
      FLAG_INCLUDE_PRERELEASE: 1,
      FLAG_LOOSE: 2
    };
  }
});

// node_modules/semver/internal/debug.js
var require_debug = __commonJS({
  "node_modules/semver/internal/debug.js"(exports, module2) {
    var debug = typeof process === "object" && process.env && process.env.NODE_DEBUG && /\bsemver\b/i.test(process.env.NODE_DEBUG) ? (...args) => console.error("SEMVER", ...args) : () => {
    };
    module2.exports = debug;
  }
});

// node_modules/semver/internal/re.js
var require_re = __commonJS({
  "node_modules/semver/internal/re.js"(exports, module2) {
    var {
      MAX_SAFE_COMPONENT_LENGTH,
      MAX_SAFE_BUILD_LENGTH,
      MAX_LENGTH
    } = require_constants();
    var debug = require_debug();
    exports = module2.exports = {};
    var re = exports.re = [];
    var safeRe = exports.safeRe = [];
    var src = exports.src = [];
    var safeSrc = exports.safeSrc = [];
    var t = exports.t = {};
    var R = 0;
    var LETTERDASHNUMBER = "[a-zA-Z0-9-]";
    var safeRegexReplacements = [
      ["\\s", 1],
      ["\\d", MAX_LENGTH],
      [LETTERDASHNUMBER, MAX_SAFE_BUILD_LENGTH]
    ];
    var makeSafeRegex = (value) => {
      for (const [token, max] of safeRegexReplacements) {
        value = value.split(`${token}*`).join(`${token}{0,${max}}`).split(`${token}+`).join(`${token}{1,${max}}`);
      }
      return value;
    };
    var createToken = (name3, value, isGlobal) => {
      const safe = makeSafeRegex(value);
      const index = R++;
      debug(name3, index, value);
      t[name3] = index;
      src[index] = value;
      safeSrc[index] = safe;
      re[index] = new RegExp(value, isGlobal ? "g" : void 0);
      safeRe[index] = new RegExp(safe, isGlobal ? "g" : void 0);
    };
    createToken("NUMERICIDENTIFIER", "0|[1-9]\\d*");
    createToken("NUMERICIDENTIFIERLOOSE", "\\d+");
    createToken("NONNUMERICIDENTIFIER", `\\d*[a-zA-Z-]${LETTERDASHNUMBER}*`);
    createToken("MAINVERSION", `(${src[t.NUMERICIDENTIFIER]})\\.(${src[t.NUMERICIDENTIFIER]})\\.(${src[t.NUMERICIDENTIFIER]})`);
    createToken("MAINVERSIONLOOSE", `(${src[t.NUMERICIDENTIFIERLOOSE]})\\.(${src[t.NUMERICIDENTIFIERLOOSE]})\\.(${src[t.NUMERICIDENTIFIERLOOSE]})`);
    createToken("PRERELEASEIDENTIFIER", `(?:${src[t.NUMERICIDENTIFIER]}|${src[t.NONNUMERICIDENTIFIER]})`);
    createToken("PRERELEASEIDENTIFIERLOOSE", `(?:${src[t.NUMERICIDENTIFIERLOOSE]}|${src[t.NONNUMERICIDENTIFIER]})`);
    createToken("PRERELEASE", `(?:-(${src[t.PRERELEASEIDENTIFIER]}(?:\\.${src[t.PRERELEASEIDENTIFIER]})*))`);
    createToken("PRERELEASELOOSE", `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`);
    createToken("BUILDIDENTIFIER", `${LETTERDASHNUMBER}+`);
    createToken("BUILD", `(?:\\+(${src[t.BUILDIDENTIFIER]}(?:\\.${src[t.BUILDIDENTIFIER]})*))`);
    createToken("FULLPLAIN", `v?${src[t.MAINVERSION]}${src[t.PRERELEASE]}?${src[t.BUILD]}?`);
    createToken("FULL", `^${src[t.FULLPLAIN]}$`);
    createToken("LOOSEPLAIN", `[v=\\s]*${src[t.MAINVERSIONLOOSE]}${src[t.PRERELEASELOOSE]}?${src[t.BUILD]}?`);
    createToken("LOOSE", `^${src[t.LOOSEPLAIN]}$`);
    createToken("GTLT", "((?:<|>)?=?)");
    createToken("XRANGEIDENTIFIERLOOSE", `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);
    createToken("XRANGEIDENTIFIER", `${src[t.NUMERICIDENTIFIER]}|x|X|\\*`);
    createToken("XRANGEPLAIN", `[v=\\s]*(${src[t.XRANGEIDENTIFIER]})(?:\\.(${src[t.XRANGEIDENTIFIER]})(?:\\.(${src[t.XRANGEIDENTIFIER]})(?:${src[t.PRERELEASE]})?${src[t.BUILD]}?)?)?`);
    createToken("XRANGEPLAINLOOSE", `[v=\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})(?:\\.(${src[t.XRANGEIDENTIFIERLOOSE]})(?:\\.(${src[t.XRANGEIDENTIFIERLOOSE]})(?:${src[t.PRERELEASELOOSE]})?${src[t.BUILD]}?)?)?`);
    createToken("XRANGE", `^${src[t.GTLT]}\\s*${src[t.XRANGEPLAIN]}$`);
    createToken("XRANGELOOSE", `^${src[t.GTLT]}\\s*${src[t.XRANGEPLAINLOOSE]}$`);
    createToken("COERCEPLAIN", `${"(^|[^\\d])(\\d{1,"}${MAX_SAFE_COMPONENT_LENGTH}})(?:\\.(\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?(?:\\.(\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`);
    createToken("COERCE", `${src[t.COERCEPLAIN]}(?:$|[^\\d])`);
    createToken("COERCEFULL", src[t.COERCEPLAIN] + `(?:${src[t.PRERELEASE]})?(?:${src[t.BUILD]})?(?:$|[^\\d])`);
    createToken("COERCERTL", src[t.COERCE], true);
    createToken("COERCERTLFULL", src[t.COERCEFULL], true);
    createToken("LONETILDE", "(?:~>?)");
    createToken("TILDETRIM", `(\\s*)${src[t.LONETILDE]}\\s+`, true);
    exports.tildeTrimReplace = "$1~";
    createToken("TILDE", `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`);
    createToken("TILDELOOSE", `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`);
    createToken("LONECARET", "(?:\\^)");
    createToken("CARETTRIM", `(\\s*)${src[t.LONECARET]}\\s+`, true);
    exports.caretTrimReplace = "$1^";
    createToken("CARET", `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`);
    createToken("CARETLOOSE", `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`);
    createToken("COMPARATORLOOSE", `^${src[t.GTLT]}\\s*(${src[t.LOOSEPLAIN]})$|^$`);
    createToken("COMPARATOR", `^${src[t.GTLT]}\\s*(${src[t.FULLPLAIN]})$|^$`);
    createToken("COMPARATORTRIM", `(\\s*)${src[t.GTLT]}\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true);
    exports.comparatorTrimReplace = "$1$2$3";
    createToken("HYPHENRANGE", `^\\s*(${src[t.XRANGEPLAIN]})\\s+-\\s+(${src[t.XRANGEPLAIN]})\\s*$`);
    createToken("HYPHENRANGELOOSE", `^\\s*(${src[t.XRANGEPLAINLOOSE]})\\s+-\\s+(${src[t.XRANGEPLAINLOOSE]})\\s*$`);
    createToken("STAR", "(<|>)?=?\\s*\\*");
    createToken("GTE0", "^\\s*>=\\s*0\\.0\\.0\\s*$");
    createToken("GTE0PRE", "^\\s*>=\\s*0\\.0\\.0-0\\s*$");
  }
});

// node_modules/semver/internal/parse-options.js
var require_parse_options = __commonJS({
  "node_modules/semver/internal/parse-options.js"(exports, module2) {
    var looseOption = Object.freeze({ loose: true });
    var emptyOpts = Object.freeze({});
    var parseOptions = (options) => {
      if (!options) {
        return emptyOpts;
      }
      if (typeof options !== "object") {
        return looseOption;
      }
      return options;
    };
    module2.exports = parseOptions;
  }
});

// node_modules/semver/internal/identifiers.js
var require_identifiers = __commonJS({
  "node_modules/semver/internal/identifiers.js"(exports, module2) {
    var numeric = /^[0-9]+$/;
    var compareIdentifiers = (a, b) => {
      const anum = numeric.test(a);
      const bnum = numeric.test(b);
      if (anum && bnum) {
        a = +a;
        b = +b;
      }
      return a === b ? 0 : anum && !bnum ? -1 : bnum && !anum ? 1 : a < b ? -1 : 1;
    };
    var rcompareIdentifiers = (a, b) => compareIdentifiers(b, a);
    module2.exports = {
      compareIdentifiers,
      rcompareIdentifiers
    };
  }
});

// node_modules/semver/classes/semver.js
var require_semver = __commonJS({
  "node_modules/semver/classes/semver.js"(exports, module2) {
    var debug = require_debug();
    var { MAX_LENGTH, MAX_SAFE_INTEGER } = require_constants();
    var { safeRe: re, safeSrc: src, t } = require_re();
    var parseOptions = require_parse_options();
    var { compareIdentifiers } = require_identifiers();
    var SemVer = class _SemVer {
      constructor(version3, options) {
        options = parseOptions(options);
        if (version3 instanceof _SemVer) {
          if (version3.loose === !!options.loose && version3.includePrerelease === !!options.includePrerelease) {
            return version3;
          } else {
            version3 = version3.version;
          }
        } else if (typeof version3 !== "string") {
          throw new TypeError(`Invalid version. Must be a string. Got type "${typeof version3}".`);
        }
        if (version3.length > MAX_LENGTH) {
          throw new TypeError(
            `version is longer than ${MAX_LENGTH} characters`
          );
        }
        debug("SemVer", version3, options);
        this.options = options;
        this.loose = !!options.loose;
        this.includePrerelease = !!options.includePrerelease;
        const m = version3.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL]);
        if (!m) {
          throw new TypeError(`Invalid Version: ${version3}`);
        }
        this.raw = version3;
        this.major = +m[1];
        this.minor = +m[2];
        this.patch = +m[3];
        if (this.major > MAX_SAFE_INTEGER || this.major < 0) {
          throw new TypeError("Invalid major version");
        }
        if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {
          throw new TypeError("Invalid minor version");
        }
        if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {
          throw new TypeError("Invalid patch version");
        }
        if (!m[4]) {
          this.prerelease = [];
        } else {
          this.prerelease = m[4].split(".").map((id) => {
            if (/^[0-9]+$/.test(id)) {
              const num = +id;
              if (num >= 0 && num < MAX_SAFE_INTEGER) {
                return num;
              }
            }
            return id;
          });
        }
        this.build = m[5] ? m[5].split(".") : [];
        this.format();
      }
      format() {
        this.version = `${this.major}.${this.minor}.${this.patch}`;
        if (this.prerelease.length) {
          this.version += `-${this.prerelease.join(".")}`;
        }
        return this.version;
      }
      toString() {
        return this.version;
      }
      compare(other) {
        debug("SemVer.compare", this.version, this.options, other);
        if (!(other instanceof _SemVer)) {
          if (typeof other === "string" && other === this.version) {
            return 0;
          }
          other = new _SemVer(other, this.options);
        }
        if (other.version === this.version) {
          return 0;
        }
        return this.compareMain(other) || this.comparePre(other);
      }
      compareMain(other) {
        if (!(other instanceof _SemVer)) {
          other = new _SemVer(other, this.options);
        }
        return compareIdentifiers(this.major, other.major) || compareIdentifiers(this.minor, other.minor) || compareIdentifiers(this.patch, other.patch);
      }
      comparePre(other) {
        if (!(other instanceof _SemVer)) {
          other = new _SemVer(other, this.options);
        }
        if (this.prerelease.length && !other.prerelease.length) {
          return -1;
        } else if (!this.prerelease.length && other.prerelease.length) {
          return 1;
        } else if (!this.prerelease.length && !other.prerelease.length) {
          return 0;
        }
        let i = 0;
        do {
          const a = this.prerelease[i];
          const b = other.prerelease[i];
          debug("prerelease compare", i, a, b);
          if (a === void 0 && b === void 0) {
            return 0;
          } else if (b === void 0) {
            return 1;
          } else if (a === void 0) {
            return -1;
          } else if (a === b) {
            continue;
          } else {
            return compareIdentifiers(a, b);
          }
        } while (++i);
      }
      compareBuild(other) {
        if (!(other instanceof _SemVer)) {
          other = new _SemVer(other, this.options);
        }
        let i = 0;
        do {
          const a = this.build[i];
          const b = other.build[i];
          debug("build compare", i, a, b);
          if (a === void 0 && b === void 0) {
            return 0;
          } else if (b === void 0) {
            return 1;
          } else if (a === void 0) {
            return -1;
          } else if (a === b) {
            continue;
          } else {
            return compareIdentifiers(a, b);
          }
        } while (++i);
      }
      // preminor will bump the version up to the next minor release, and immediately
      // down to pre-release. premajor and prepatch work the same way.
      inc(release, identifier, identifierBase) {
        if (release.startsWith("pre")) {
          if (!identifier && identifierBase === false) {
            throw new Error("invalid increment argument: identifier is empty");
          }
          if (identifier) {
            const r = new RegExp(`^${this.options.loose ? src[t.PRERELEASELOOSE] : src[t.PRERELEASE]}$`);
            const match = `-${identifier}`.match(r);
            if (!match || match[1] !== identifier) {
              throw new Error(`invalid identifier: ${identifier}`);
            }
          }
        }
        switch (release) {
          case "premajor":
            this.prerelease.length = 0;
            this.patch = 0;
            this.minor = 0;
            this.major++;
            this.inc("pre", identifier, identifierBase);
            break;
          case "preminor":
            this.prerelease.length = 0;
            this.patch = 0;
            this.minor++;
            this.inc("pre", identifier, identifierBase);
            break;
          case "prepatch":
            this.prerelease.length = 0;
            this.inc("patch", identifier, identifierBase);
            this.inc("pre", identifier, identifierBase);
            break;
          // If the input is a non-prerelease version, this acts the same as
          // prepatch.
          case "prerelease":
            if (this.prerelease.length === 0) {
              this.inc("patch", identifier, identifierBase);
            }
            this.inc("pre", identifier, identifierBase);
            break;
          case "release":
            if (this.prerelease.length === 0) {
              throw new Error(`version ${this.raw} is not a prerelease`);
            }
            this.prerelease.length = 0;
            break;
          case "major":
            if (this.minor !== 0 || this.patch !== 0 || this.prerelease.length === 0) {
              this.major++;
            }
            this.minor = 0;
            this.patch = 0;
            this.prerelease = [];
            break;
          case "minor":
            if (this.patch !== 0 || this.prerelease.length === 0) {
              this.minor++;
            }
            this.patch = 0;
            this.prerelease = [];
            break;
          case "patch":
            if (this.prerelease.length === 0) {
              this.patch++;
            }
            this.prerelease = [];
            break;
          // This probably shouldn't be used publicly.
          // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.
          case "pre": {
            const base = Number(identifierBase) ? 1 : 0;
            if (this.prerelease.length === 0) {
              this.prerelease = [base];
            } else {
              let i = this.prerelease.length;
              while (--i >= 0) {
                if (typeof this.prerelease[i] === "number") {
                  this.prerelease[i]++;
                  i = -2;
                }
              }
              if (i === -1) {
                if (identifier === this.prerelease.join(".") && identifierBase === false) {
                  throw new Error("invalid increment argument: identifier already exists");
                }
                this.prerelease.push(base);
              }
            }
            if (identifier) {
              let prerelease = [identifier, base];
              if (identifierBase === false) {
                prerelease = [identifier];
              }
              if (compareIdentifiers(this.prerelease[0], identifier) === 0) {
                if (isNaN(this.prerelease[1])) {
                  this.prerelease = prerelease;
                }
              } else {
                this.prerelease = prerelease;
              }
            }
            break;
          }
          default:
            throw new Error(`invalid increment argument: ${release}`);
        }
        this.raw = this.format();
        if (this.build.length) {
          this.raw += `+${this.build.join(".")}`;
        }
        return this;
      }
    };
    module2.exports = SemVer;
  }
});

// node_modules/semver/functions/parse.js
var require_parse = __commonJS({
  "node_modules/semver/functions/parse.js"(exports, module2) {
    var SemVer = require_semver();
    var parse = (version3, options, throwErrors = false) => {
      if (version3 instanceof SemVer) {
        return version3;
      }
      try {
        return new SemVer(version3, options);
      } catch (er) {
        if (!throwErrors) {
          return null;
        }
        throw er;
      }
    };
    module2.exports = parse;
  }
});

// node_modules/semver/functions/valid.js
var require_valid = __commonJS({
  "node_modules/semver/functions/valid.js"(exports, module2) {
    var parse = require_parse();
    var valid = (version3, options) => {
      const v = parse(version3, options);
      return v ? v.version : null;
    };
    module2.exports = valid;
  }
});

// node_modules/semver/functions/clean.js
var require_clean = __commonJS({
  "node_modules/semver/functions/clean.js"(exports, module2) {
    var parse = require_parse();
    var clean = (version3, options) => {
      const s = parse(version3.trim().replace(/^[=v]+/, ""), options);
      return s ? s.version : null;
    };
    module2.exports = clean;
  }
});

// node_modules/semver/functions/inc.js
var require_inc = __commonJS({
  "node_modules/semver/functions/inc.js"(exports, module2) {
    var SemVer = require_semver();
    var inc = (version3, release, options, identifier, identifierBase) => {
      if (typeof options === "string") {
        identifierBase = identifier;
        identifier = options;
        options = void 0;
      }
      try {
        return new SemVer(
          version3 instanceof SemVer ? version3.version : version3,
          options
        ).inc(release, identifier, identifierBase).version;
      } catch (er) {
        return null;
      }
    };
    module2.exports = inc;
  }
});

// node_modules/semver/functions/diff.js
var require_diff = __commonJS({
  "node_modules/semver/functions/diff.js"(exports, module2) {
    var parse = require_parse();
    var diff = (version1, version22) => {
      const v1 = parse(version1, null, true);
      const v2 = parse(version22, null, true);
      const comparison = v1.compare(v2);
      if (comparison === 0) {
        return null;
      }
      const v1Higher = comparison > 0;
      const highVersion = v1Higher ? v1 : v2;
      const lowVersion = v1Higher ? v2 : v1;
      const highHasPre = !!highVersion.prerelease.length;
      const lowHasPre = !!lowVersion.prerelease.length;
      if (lowHasPre && !highHasPre) {
        if (!lowVersion.patch && !lowVersion.minor) {
          return "major";
        }
        if (lowVersion.compareMain(highVersion) === 0) {
          if (lowVersion.minor && !lowVersion.patch) {
            return "minor";
          }
          return "patch";
        }
      }
      const prefix = highHasPre ? "pre" : "";
      if (v1.major !== v2.major) {
        return prefix + "major";
      }
      if (v1.minor !== v2.minor) {
        return prefix + "minor";
      }
      if (v1.patch !== v2.patch) {
        return prefix + "patch";
      }
      return "prerelease";
    };
    module2.exports = diff;
  }
});

// node_modules/semver/functions/major.js
var require_major = __commonJS({
  "node_modules/semver/functions/major.js"(exports, module2) {
    var SemVer = require_semver();
    var major = (a, loose) => new SemVer(a, loose).major;
    module2.exports = major;
  }
});

// node_modules/semver/functions/minor.js
var require_minor = __commonJS({
  "node_modules/semver/functions/minor.js"(exports, module2) {
    var SemVer = require_semver();
    var minor = (a, loose) => new SemVer(a, loose).minor;
    module2.exports = minor;
  }
});

// node_modules/semver/functions/patch.js
var require_patch = __commonJS({
  "node_modules/semver/functions/patch.js"(exports, module2) {
    var SemVer = require_semver();
    var patch = (a, loose) => new SemVer(a, loose).patch;
    module2.exports = patch;
  }
});

// node_modules/semver/functions/prerelease.js
var require_prerelease = __commonJS({
  "node_modules/semver/functions/prerelease.js"(exports, module2) {
    var parse = require_parse();
    var prerelease = (version3, options) => {
      const parsed = parse(version3, options);
      return parsed && parsed.prerelease.length ? parsed.prerelease : null;
    };
    module2.exports = prerelease;
  }
});

// node_modules/semver/functions/compare.js
var require_compare = __commonJS({
  "node_modules/semver/functions/compare.js"(exports, module2) {
    var SemVer = require_semver();
    var compare = (a, b, loose) => new SemVer(a, loose).compare(new SemVer(b, loose));
    module2.exports = compare;
  }
});

// node_modules/semver/functions/rcompare.js
var require_rcompare = __commonJS({
  "node_modules/semver/functions/rcompare.js"(exports, module2) {
    var compare = require_compare();
    var rcompare = (a, b, loose) => compare(b, a, loose);
    module2.exports = rcompare;
  }
});

// node_modules/semver/functions/compare-loose.js
var require_compare_loose = __commonJS({
  "node_modules/semver/functions/compare-loose.js"(exports, module2) {
    var compare = require_compare();
    var compareLoose = (a, b) => compare(a, b, true);
    module2.exports = compareLoose;
  }
});

// node_modules/semver/functions/compare-build.js
var require_compare_build = __commonJS({
  "node_modules/semver/functions/compare-build.js"(exports, module2) {
    var SemVer = require_semver();
    var compareBuild = (a, b, loose) => {
      const versionA = new SemVer(a, loose);
      const versionB = new SemVer(b, loose);
      return versionA.compare(versionB) || versionA.compareBuild(versionB);
    };
    module2.exports = compareBuild;
  }
});

// node_modules/semver/functions/sort.js
var require_sort = __commonJS({
  "node_modules/semver/functions/sort.js"(exports, module2) {
    var compareBuild = require_compare_build();
    var sort = (list, loose) => list.sort((a, b) => compareBuild(a, b, loose));
    module2.exports = sort;
  }
});

// node_modules/semver/functions/rsort.js
var require_rsort = __commonJS({
  "node_modules/semver/functions/rsort.js"(exports, module2) {
    var compareBuild = require_compare_build();
    var rsort = (list, loose) => list.sort((a, b) => compareBuild(b, a, loose));
    module2.exports = rsort;
  }
});

// node_modules/semver/functions/gt.js
var require_gt = __commonJS({
  "node_modules/semver/functions/gt.js"(exports, module2) {
    var compare = require_compare();
    var gt = (a, b, loose) => compare(a, b, loose) > 0;
    module2.exports = gt;
  }
});

// node_modules/semver/functions/lt.js
var require_lt = __commonJS({
  "node_modules/semver/functions/lt.js"(exports, module2) {
    var compare = require_compare();
    var lt = (a, b, loose) => compare(a, b, loose) < 0;
    module2.exports = lt;
  }
});

// node_modules/semver/functions/eq.js
var require_eq = __commonJS({
  "node_modules/semver/functions/eq.js"(exports, module2) {
    var compare = require_compare();
    var eq = (a, b, loose) => compare(a, b, loose) === 0;
    module2.exports = eq;
  }
});

// node_modules/semver/functions/neq.js
var require_neq = __commonJS({
  "node_modules/semver/functions/neq.js"(exports, module2) {
    var compare = require_compare();
    var neq = (a, b, loose) => compare(a, b, loose) !== 0;
    module2.exports = neq;
  }
});

// node_modules/semver/functions/gte.js
var require_gte = __commonJS({
  "node_modules/semver/functions/gte.js"(exports, module2) {
    var compare = require_compare();
    var gte = (a, b, loose) => compare(a, b, loose) >= 0;
    module2.exports = gte;
  }
});

// node_modules/semver/functions/lte.js
var require_lte = __commonJS({
  "node_modules/semver/functions/lte.js"(exports, module2) {
    var compare = require_compare();
    var lte = (a, b, loose) => compare(a, b, loose) <= 0;
    module2.exports = lte;
  }
});

// node_modules/semver/functions/cmp.js
var require_cmp = __commonJS({
  "node_modules/semver/functions/cmp.js"(exports, module2) {
    var eq = require_eq();
    var neq = require_neq();
    var gt = require_gt();
    var gte = require_gte();
    var lt = require_lt();
    var lte = require_lte();
    var cmp = (a, op, b, loose) => {
      switch (op) {
        case "===":
          if (typeof a === "object") {
            a = a.version;
          }
          if (typeof b === "object") {
            b = b.version;
          }
          return a === b;
        case "!==":
          if (typeof a === "object") {
            a = a.version;
          }
          if (typeof b === "object") {
            b = b.version;
          }
          return a !== b;
        case "":
        case "=":
        case "==":
          return eq(a, b, loose);
        case "!=":
          return neq(a, b, loose);
        case ">":
          return gt(a, b, loose);
        case ">=":
          return gte(a, b, loose);
        case "<":
          return lt(a, b, loose);
        case "<=":
          return lte(a, b, loose);
        default:
          throw new TypeError(`Invalid operator: ${op}`);
      }
    };
    module2.exports = cmp;
  }
});

// node_modules/semver/functions/coerce.js
var require_coerce = __commonJS({
  "node_modules/semver/functions/coerce.js"(exports, module2) {
    var SemVer = require_semver();
    var parse = require_parse();
    var { safeRe: re, t } = require_re();
    var coerce = (version3, options) => {
      if (version3 instanceof SemVer) {
        return version3;
      }
      if (typeof version3 === "number") {
        version3 = String(version3);
      }
      if (typeof version3 !== "string") {
        return null;
      }
      options = options || {};
      let match = null;
      if (!options.rtl) {
        match = version3.match(options.includePrerelease ? re[t.COERCEFULL] : re[t.COERCE]);
      } else {
        const coerceRtlRegex = options.includePrerelease ? re[t.COERCERTLFULL] : re[t.COERCERTL];
        let next;
        while ((next = coerceRtlRegex.exec(version3)) && (!match || match.index + match[0].length !== version3.length)) {
          if (!match || next.index + next[0].length !== match.index + match[0].length) {
            match = next;
          }
          coerceRtlRegex.lastIndex = next.index + next[1].length + next[2].length;
        }
        coerceRtlRegex.lastIndex = -1;
      }
      if (match === null) {
        return null;
      }
      const major = match[2];
      const minor = match[3] || "0";
      const patch = match[4] || "0";
      const prerelease = options.includePrerelease && match[5] ? `-${match[5]}` : "";
      const build = options.includePrerelease && match[6] ? `+${match[6]}` : "";
      return parse(`${major}.${minor}.${patch}${prerelease}${build}`, options);
    };
    module2.exports = coerce;
  }
});

// node_modules/semver/internal/lrucache.js
var require_lrucache = __commonJS({
  "node_modules/semver/internal/lrucache.js"(exports, module2) {
    var LRUCache = class {
      constructor() {
        this.max = 1e3;
        this.map = /* @__PURE__ */ new Map();
      }
      get(key) {
        const value = this.map.get(key);
        if (value === void 0) {
          return void 0;
        } else {
          this.map.delete(key);
          this.map.set(key, value);
          return value;
        }
      }
      delete(key) {
        return this.map.delete(key);
      }
      set(key, value) {
        const deleted = this.delete(key);
        if (!deleted && value !== void 0) {
          if (this.map.size >= this.max) {
            const firstKey = this.map.keys().next().value;
            this.delete(firstKey);
          }
          this.map.set(key, value);
        }
        return this;
      }
    };
    module2.exports = LRUCache;
  }
});

// node_modules/semver/classes/range.js
var require_range = __commonJS({
  "node_modules/semver/classes/range.js"(exports, module2) {
    var SPACE_CHARACTERS = /\s+/g;
    var Range = class _Range {
      constructor(range, options) {
        options = parseOptions(options);
        if (range instanceof _Range) {
          if (range.loose === !!options.loose && range.includePrerelease === !!options.includePrerelease) {
            return range;
          } else {
            return new _Range(range.raw, options);
          }
        }
        if (range instanceof Comparator) {
          this.raw = range.value;
          this.set = [[range]];
          this.formatted = void 0;
          return this;
        }
        this.options = options;
        this.loose = !!options.loose;
        this.includePrerelease = !!options.includePrerelease;
        this.raw = range.trim().replace(SPACE_CHARACTERS, " ");
        this.set = this.raw.split("||").map((r) => this.parseRange(r.trim())).filter((c) => c.length);
        if (!this.set.length) {
          throw new TypeError(`Invalid SemVer Range: ${this.raw}`);
        }
        if (this.set.length > 1) {
          const first = this.set[0];
          this.set = this.set.filter((c) => !isNullSet(c[0]));
          if (this.set.length === 0) {
            this.set = [first];
          } else if (this.set.length > 1) {
            for (const c of this.set) {
              if (c.length === 1 && isAny(c[0])) {
                this.set = [c];
                break;
              }
            }
          }
        }
        this.formatted = void 0;
      }
      get range() {
        if (this.formatted === void 0) {
          this.formatted = "";
          for (let i = 0; i < this.set.length; i++) {
            if (i > 0) {
              this.formatted += "||";
            }
            const comps = this.set[i];
            for (let k = 0; k < comps.length; k++) {
              if (k > 0) {
                this.formatted += " ";
              }
              this.formatted += comps[k].toString().trim();
            }
          }
        }
        return this.formatted;
      }
      format() {
        return this.range;
      }
      toString() {
        return this.range;
      }
      parseRange(range) {
        const memoOpts = (this.options.includePrerelease && FLAG_INCLUDE_PRERELEASE) | (this.options.loose && FLAG_LOOSE);
        const memoKey = memoOpts + ":" + range;
        const cached = cache.get(memoKey);
        if (cached) {
          return cached;
        }
        const loose = this.options.loose;
        const hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE];
        range = range.replace(hr, hyphenReplace(this.options.includePrerelease));
        debug("hyphen replace", range);
        range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace);
        debug("comparator trim", range);
        range = range.replace(re[t.TILDETRIM], tildeTrimReplace);
        debug("tilde trim", range);
        range = range.replace(re[t.CARETTRIM], caretTrimReplace);
        debug("caret trim", range);
        let rangeList = range.split(" ").map((comp) => parseComparator(comp, this.options)).join(" ").split(/\s+/).map((comp) => replaceGTE0(comp, this.options));
        if (loose) {
          rangeList = rangeList.filter((comp) => {
            debug("loose invalid filter", comp, this.options);
            return !!comp.match(re[t.COMPARATORLOOSE]);
          });
        }
        debug("range list", rangeList);
        const rangeMap = /* @__PURE__ */ new Map();
        const comparators = rangeList.map((comp) => new Comparator(comp, this.options));
        for (const comp of comparators) {
          if (isNullSet(comp)) {
            return [comp];
          }
          rangeMap.set(comp.value, comp);
        }
        if (rangeMap.size > 1 && rangeMap.has("")) {
          rangeMap.delete("");
        }
        const result = [...rangeMap.values()];
        cache.set(memoKey, result);
        return result;
      }
      intersects(range, options) {
        if (!(range instanceof _Range)) {
          throw new TypeError("a Range is required");
        }
        return this.set.some((thisComparators) => {
          return isSatisfiable(thisComparators, options) && range.set.some((rangeComparators) => {
            return isSatisfiable(rangeComparators, options) && thisComparators.every((thisComparator) => {
              return rangeComparators.every((rangeComparator) => {
                return thisComparator.intersects(rangeComparator, options);
              });
            });
          });
        });
      }
      // if ANY of the sets match ALL of its comparators, then pass
      test(version3) {
        if (!version3) {
          return false;
        }
        if (typeof version3 === "string") {
          try {
            version3 = new SemVer(version3, this.options);
          } catch (er) {
            return false;
          }
        }
        for (let i = 0; i < this.set.length; i++) {
          if (testSet(this.set[i], version3, this.options)) {
            return true;
          }
        }
        return false;
      }
    };
    module2.exports = Range;
    var LRU = require_lrucache();
    var cache = new LRU();
    var parseOptions = require_parse_options();
    var Comparator = require_comparator();
    var debug = require_debug();
    var SemVer = require_semver();
    var {
      safeRe: re,
      t,
      comparatorTrimReplace,
      tildeTrimReplace,
      caretTrimReplace
    } = require_re();
    var { FLAG_INCLUDE_PRERELEASE, FLAG_LOOSE } = require_constants();
    var isNullSet = (c) => c.value === "<0.0.0-0";
    var isAny = (c) => c.value === "";
    var isSatisfiable = (comparators, options) => {
      let result = true;
      const remainingComparators = comparators.slice();
      let testComparator = remainingComparators.pop();
      while (result && remainingComparators.length) {
        result = remainingComparators.every((otherComparator) => {
          return testComparator.intersects(otherComparator, options);
        });
        testComparator = remainingComparators.pop();
      }
      return result;
    };
    var parseComparator = (comp, options) => {
      debug("comp", comp, options);
      comp = replaceCarets(comp, options);
      debug("caret", comp);
      comp = replaceTildes(comp, options);
      debug("tildes", comp);
      comp = replaceXRanges(comp, options);
      debug("xrange", comp);
      comp = replaceStars(comp, options);
      debug("stars", comp);
      return comp;
    };
    var isX = (id) => !id || id.toLowerCase() === "x" || id === "*";
    var replaceTildes = (comp, options) => {
      return comp.trim().split(/\s+/).map((c) => replaceTilde(c, options)).join(" ");
    };
    var replaceTilde = (comp, options) => {
      const r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE];
      return comp.replace(r, (_, M, m, p, pr) => {
        debug("tilde", comp, _, M, m, p, pr);
        let ret;
        if (isX(M)) {
          ret = "";
        } else if (isX(m)) {
          ret = `>=${M}.0.0 <${+M + 1}.0.0-0`;
        } else if (isX(p)) {
          ret = `>=${M}.${m}.0 <${M}.${+m + 1}.0-0`;
        } else if (pr) {
          debug("replaceTilde pr", pr);
          ret = `>=${M}.${m}.${p}-${pr} <${M}.${+m + 1}.0-0`;
        } else {
          ret = `>=${M}.${m}.${p} <${M}.${+m + 1}.0-0`;
        }
        debug("tilde return", ret);
        return ret;
      });
    };
    var replaceCarets = (comp, options) => {
      return comp.trim().split(/\s+/).map((c) => replaceCaret(c, options)).join(" ");
    };
    var replaceCaret = (comp, options) => {
      debug("caret", comp, options);
      const r = options.loose ? re[t.CARETLOOSE] : re[t.CARET];
      const z = options.includePrerelease ? "-0" : "";
      return comp.replace(r, (_, M, m, p, pr) => {
        debug("caret", comp, _, M, m, p, pr);
        let ret;
        if (isX(M)) {
          ret = "";
        } else if (isX(m)) {
          ret = `>=${M}.0.0${z} <${+M + 1}.0.0-0`;
        } else if (isX(p)) {
          if (M === "0") {
            ret = `>=${M}.${m}.0${z} <${M}.${+m + 1}.0-0`;
          } else {
            ret = `>=${M}.${m}.0${z} <${+M + 1}.0.0-0`;
          }
        } else if (pr) {
          debug("replaceCaret pr", pr);
          if (M === "0") {
            if (m === "0") {
              ret = `>=${M}.${m}.${p}-${pr} <${M}.${m}.${+p + 1}-0`;
            } else {
              ret = `>=${M}.${m}.${p}-${pr} <${M}.${+m + 1}.0-0`;
            }
          } else {
            ret = `>=${M}.${m}.${p}-${pr} <${+M + 1}.0.0-0`;
          }
        } else {
          debug("no pr");
          if (M === "0") {
            if (m === "0") {
              ret = `>=${M}.${m}.${p}${z} <${M}.${m}.${+p + 1}-0`;
            } else {
              ret = `>=${M}.${m}.${p}${z} <${M}.${+m + 1}.0-0`;
            }
          } else {
            ret = `>=${M}.${m}.${p} <${+M + 1}.0.0-0`;
          }
        }
        debug("caret return", ret);
        return ret;
      });
    };
    var replaceXRanges = (comp, options) => {
      debug("replaceXRanges", comp, options);
      return comp.split(/\s+/).map((c) => replaceXRange(c, options)).join(" ");
    };
    var replaceXRange = (comp, options) => {
      comp = comp.trim();
      const r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE];
      return comp.replace(r, (ret, gtlt, M, m, p, pr) => {
        debug("xRange", comp, ret, gtlt, M, m, p, pr);
        const xM = isX(M);
        const xm = xM || isX(m);
        const xp = xm || isX(p);
        const anyX = xp;
        if (gtlt === "=" && anyX) {
          gtlt = "";
        }
        pr = options.includePrerelease ? "-0" : "";
        if (xM) {
          if (gtlt === ">" || gtlt === "<") {
            ret = "<0.0.0-0";
          } else {
            ret = "*";
          }
        } else if (gtlt && anyX) {
          if (xm) {
            m = 0;
          }
          p = 0;
          if (gtlt === ">") {
            gtlt = ">=";
            if (xm) {
              M = +M + 1;
              m = 0;
              p = 0;
            } else {
              m = +m + 1;
              p = 0;
            }
          } else if (gtlt === "<=") {
            gtlt = "<";
            if (xm) {
              M = +M + 1;
            } else {
              m = +m + 1;
            }
          }
          if (gtlt === "<") {
            pr = "-0";
          }
          ret = `${gtlt + M}.${m}.${p}${pr}`;
        } else if (xm) {
          ret = `>=${M}.0.0${pr} <${+M + 1}.0.0-0`;
        } else if (xp) {
          ret = `>=${M}.${m}.0${pr} <${M}.${+m + 1}.0-0`;
        }
        debug("xRange return", ret);
        return ret;
      });
    };
    var replaceStars = (comp, options) => {
      debug("replaceStars", comp, options);
      return comp.trim().replace(re[t.STAR], "");
    };
    var replaceGTE0 = (comp, options) => {
      debug("replaceGTE0", comp, options);
      return comp.trim().replace(re[options.includePrerelease ? t.GTE0PRE : t.GTE0], "");
    };
    var hyphenReplace = (incPr) => ($0, from, fM, fm, fp, fpr, fb, to, tM, tm, tp, tpr) => {
      if (isX(fM)) {
        from = "";
      } else if (isX(fm)) {
        from = `>=${fM}.0.0${incPr ? "-0" : ""}`;
      } else if (isX(fp)) {
        from = `>=${fM}.${fm}.0${incPr ? "-0" : ""}`;
      } else if (fpr) {
        from = `>=${from}`;
      } else {
        from = `>=${from}${incPr ? "-0" : ""}`;
      }
      if (isX(tM)) {
        to = "";
      } else if (isX(tm)) {
        to = `<${+tM + 1}.0.0-0`;
      } else if (isX(tp)) {
        to = `<${tM}.${+tm + 1}.0-0`;
      } else if (tpr) {
        to = `<=${tM}.${tm}.${tp}-${tpr}`;
      } else if (incPr) {
        to = `<${tM}.${tm}.${+tp + 1}-0`;
      } else {
        to = `<=${to}`;
      }
      return `${from} ${to}`.trim();
    };
    var testSet = (set, version3, options) => {
      for (let i = 0; i < set.length; i++) {
        if (!set[i].test(version3)) {
          return false;
        }
      }
      if (version3.prerelease.length && !options.includePrerelease) {
        for (let i = 0; i < set.length; i++) {
          debug(set[i].semver);
          if (set[i].semver === Comparator.ANY) {
            continue;
          }
          if (set[i].semver.prerelease.length > 0) {
            const allowed = set[i].semver;
            if (allowed.major === version3.major && allowed.minor === version3.minor && allowed.patch === version3.patch) {
              return true;
            }
          }
        }
        return false;
      }
      return true;
    };
  }
});

// node_modules/semver/classes/comparator.js
var require_comparator = __commonJS({
  "node_modules/semver/classes/comparator.js"(exports, module2) {
    var ANY = Symbol("SemVer ANY");
    var Comparator = class _Comparator {
      static get ANY() {
        return ANY;
      }
      constructor(comp, options) {
        options = parseOptions(options);
        if (comp instanceof _Comparator) {
          if (comp.loose === !!options.loose) {
            return comp;
          } else {
            comp = comp.value;
          }
        }
        comp = comp.trim().split(/\s+/).join(" ");
        debug("comparator", comp, options);
        this.options = options;
        this.loose = !!options.loose;
        this.parse(comp);
        if (this.semver === ANY) {
          this.value = "";
        } else {
          this.value = this.operator + this.semver.version;
        }
        debug("comp", this);
      }
      parse(comp) {
        const r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR];
        const m = comp.match(r);
        if (!m) {
          throw new TypeError(`Invalid comparator: ${comp}`);
        }
        this.operator = m[1] !== void 0 ? m[1] : "";
        if (this.operator === "=") {
          this.operator = "";
        }
        if (!m[2]) {
          this.semver = ANY;
        } else {
          this.semver = new SemVer(m[2], this.options.loose);
        }
      }
      toString() {
        return this.value;
      }
      test(version3) {
        debug("Comparator.test", version3, this.options.loose);
        if (this.semver === ANY || version3 === ANY) {
          return true;
        }
        if (typeof version3 === "string") {
          try {
            version3 = new SemVer(version3, this.options);
          } catch (er) {
            return false;
          }
        }
        return cmp(version3, this.operator, this.semver, this.options);
      }
      intersects(comp, options) {
        if (!(comp instanceof _Comparator)) {
          throw new TypeError("a Comparator is required");
        }
        if (this.operator === "") {
          if (this.value === "") {
            return true;
          }
          return new Range(comp.value, options).test(this.value);
        } else if (comp.operator === "") {
          if (comp.value === "") {
            return true;
          }
          return new Range(this.value, options).test(comp.semver);
        }
        options = parseOptions(options);
        if (options.includePrerelease && (this.value === "<0.0.0-0" || comp.value === "<0.0.0-0")) {
          return false;
        }
        if (!options.includePrerelease && (this.value.startsWith("<0.0.0") || comp.value.startsWith("<0.0.0"))) {
          return false;
        }
        if (this.operator.startsWith(">") && comp.operator.startsWith(">")) {
          return true;
        }
        if (this.operator.startsWith("<") && comp.operator.startsWith("<")) {
          return true;
        }
        if (this.semver.version === comp.semver.version && this.operator.includes("=") && comp.operator.includes("=")) {
          return true;
        }
        if (cmp(this.semver, "<", comp.semver, options) && this.operator.startsWith(">") && comp.operator.startsWith("<")) {
          return true;
        }
        if (cmp(this.semver, ">", comp.semver, options) && this.operator.startsWith("<") && comp.operator.startsWith(">")) {
          return true;
        }
        return false;
      }
    };
    module2.exports = Comparator;
    var parseOptions = require_parse_options();
    var { safeRe: re, t } = require_re();
    var cmp = require_cmp();
    var debug = require_debug();
    var SemVer = require_semver();
    var Range = require_range();
  }
});

// node_modules/semver/functions/satisfies.js
var require_satisfies = __commonJS({
  "node_modules/semver/functions/satisfies.js"(exports, module2) {
    var Range = require_range();
    var satisfies = (version3, range, options) => {
      try {
        range = new Range(range, options);
      } catch (er) {
        return false;
      }
      return range.test(version3);
    };
    module2.exports = satisfies;
  }
});

// node_modules/semver/ranges/to-comparators.js
var require_to_comparators = __commonJS({
  "node_modules/semver/ranges/to-comparators.js"(exports, module2) {
    var Range = require_range();
    var toComparators = (range, options) => new Range(range, options).set.map((comp) => comp.map((c) => c.value).join(" ").trim().split(" "));
    module2.exports = toComparators;
  }
});

// node_modules/semver/ranges/max-satisfying.js
var require_max_satisfying = __commonJS({
  "node_modules/semver/ranges/max-satisfying.js"(exports, module2) {
    var SemVer = require_semver();
    var Range = require_range();
    var maxSatisfying = (versions, range, options) => {
      let max = null;
      let maxSV = null;
      let rangeObj = null;
      try {
        rangeObj = new Range(range, options);
      } catch (er) {
        return null;
      }
      versions.forEach((v) => {
        if (rangeObj.test(v)) {
          if (!max || maxSV.compare(v) === -1) {
            max = v;
            maxSV = new SemVer(max, options);
          }
        }
      });
      return max;
    };
    module2.exports = maxSatisfying;
  }
});

// node_modules/semver/ranges/min-satisfying.js
var require_min_satisfying = __commonJS({
  "node_modules/semver/ranges/min-satisfying.js"(exports, module2) {
    var SemVer = require_semver();
    var Range = require_range();
    var minSatisfying = (versions, range, options) => {
      let min = null;
      let minSV = null;
      let rangeObj = null;
      try {
        rangeObj = new Range(range, options);
      } catch (er) {
        return null;
      }
      versions.forEach((v) => {
        if (rangeObj.test(v)) {
          if (!min || minSV.compare(v) === 1) {
            min = v;
            minSV = new SemVer(min, options);
          }
        }
      });
      return min;
    };
    module2.exports = minSatisfying;
  }
});

// node_modules/semver/ranges/min-version.js
var require_min_version = __commonJS({
  "node_modules/semver/ranges/min-version.js"(exports, module2) {
    var SemVer = require_semver();
    var Range = require_range();
    var gt = require_gt();
    var minVersion = (range, loose) => {
      range = new Range(range, loose);
      let minver = new SemVer("0.0.0");
      if (range.test(minver)) {
        return minver;
      }
      minver = new SemVer("0.0.0-0");
      if (range.test(minver)) {
        return minver;
      }
      minver = null;
      for (let i = 0; i < range.set.length; ++i) {
        const comparators = range.set[i];
        let setMin = null;
        comparators.forEach((comparator) => {
          const compver = new SemVer(comparator.semver.version);
          switch (comparator.operator) {
            case ">":
              if (compver.prerelease.length === 0) {
                compver.patch++;
              } else {
                compver.prerelease.push(0);
              }
              compver.raw = compver.format();
            /* fallthrough */
            case "":
            case ">=":
              if (!setMin || gt(compver, setMin)) {
                setMin = compver;
              }
              break;
            case "<":
            case "<=":
              break;
            /* istanbul ignore next */
            default:
              throw new Error(`Unexpected operation: ${comparator.operator}`);
          }
        });
        if (setMin && (!minver || gt(minver, setMin))) {
          minver = setMin;
        }
      }
      if (minver && range.test(minver)) {
        return minver;
      }
      return null;
    };
    module2.exports = minVersion;
  }
});

// node_modules/semver/ranges/valid.js
var require_valid2 = __commonJS({
  "node_modules/semver/ranges/valid.js"(exports, module2) {
    var Range = require_range();
    var validRange = (range, options) => {
      try {
        return new Range(range, options).range || "*";
      } catch (er) {
        return null;
      }
    };
    module2.exports = validRange;
  }
});

// node_modules/semver/ranges/outside.js
var require_outside = __commonJS({
  "node_modules/semver/ranges/outside.js"(exports, module2) {
    var SemVer = require_semver();
    var Comparator = require_comparator();
    var { ANY } = Comparator;
    var Range = require_range();
    var satisfies = require_satisfies();
    var gt = require_gt();
    var lt = require_lt();
    var lte = require_lte();
    var gte = require_gte();
    var outside = (version3, range, hilo, options) => {
      version3 = new SemVer(version3, options);
      range = new Range(range, options);
      let gtfn, ltefn, ltfn, comp, ecomp;
      switch (hilo) {
        case ">":
          gtfn = gt;
          ltefn = lte;
          ltfn = lt;
          comp = ">";
          ecomp = ">=";
          break;
        case "<":
          gtfn = lt;
          ltefn = gte;
          ltfn = gt;
          comp = "<";
          ecomp = "<=";
          break;
        default:
          throw new TypeError('Must provide a hilo val of "<" or ">"');
      }
      if (satisfies(version3, range, options)) {
        return false;
      }
      for (let i = 0; i < range.set.length; ++i) {
        const comparators = range.set[i];
        let high = null;
        let low = null;
        comparators.forEach((comparator) => {
          if (comparator.semver === ANY) {
            comparator = new Comparator(">=0.0.0");
          }
          high = high || comparator;
          low = low || comparator;
          if (gtfn(comparator.semver, high.semver, options)) {
            high = comparator;
          } else if (ltfn(comparator.semver, low.semver, options)) {
            low = comparator;
          }
        });
        if (high.operator === comp || high.operator === ecomp) {
          return false;
        }
        if ((!low.operator || low.operator === comp) && ltefn(version3, low.semver)) {
          return false;
        } else if (low.operator === ecomp && ltfn(version3, low.semver)) {
          return false;
        }
      }
      return true;
    };
    module2.exports = outside;
  }
});

// node_modules/semver/ranges/gtr.js
var require_gtr = __commonJS({
  "node_modules/semver/ranges/gtr.js"(exports, module2) {
    var outside = require_outside();
    var gtr = (version3, range, options) => outside(version3, range, ">", options);
    module2.exports = gtr;
  }
});

// node_modules/semver/ranges/ltr.js
var require_ltr = __commonJS({
  "node_modules/semver/ranges/ltr.js"(exports, module2) {
    var outside = require_outside();
    var ltr = (version3, range, options) => outside(version3, range, "<", options);
    module2.exports = ltr;
  }
});

// node_modules/semver/ranges/intersects.js
var require_intersects = __commonJS({
  "node_modules/semver/ranges/intersects.js"(exports, module2) {
    var Range = require_range();
    var intersects = (r1, r2, options) => {
      r1 = new Range(r1, options);
      r2 = new Range(r2, options);
      return r1.intersects(r2, options);
    };
    module2.exports = intersects;
  }
});

// node_modules/semver/ranges/simplify.js
var require_simplify = __commonJS({
  "node_modules/semver/ranges/simplify.js"(exports, module2) {
    var satisfies = require_satisfies();
    var compare = require_compare();
    module2.exports = (versions, range, options) => {
      const set = [];
      let first = null;
      let prev = null;
      const v = versions.sort((a, b) => compare(a, b, options));
      for (const version3 of v) {
        const included = satisfies(version3, range, options);
        if (included) {
          prev = version3;
          if (!first) {
            first = version3;
          }
        } else {
          if (prev) {
            set.push([first, prev]);
          }
          prev = null;
          first = null;
        }
      }
      if (first) {
        set.push([first, null]);
      }
      const ranges = [];
      for (const [min, max] of set) {
        if (min === max) {
          ranges.push(min);
        } else if (!max && min === v[0]) {
          ranges.push("*");
        } else if (!max) {
          ranges.push(`>=${min}`);
        } else if (min === v[0]) {
          ranges.push(`<=${max}`);
        } else {
          ranges.push(`${min} - ${max}`);
        }
      }
      const simplified = ranges.join(" || ");
      const original = typeof range.raw === "string" ? range.raw : String(range);
      return simplified.length < original.length ? simplified : range;
    };
  }
});

// node_modules/semver/ranges/subset.js
var require_subset = __commonJS({
  "node_modules/semver/ranges/subset.js"(exports, module2) {
    var Range = require_range();
    var Comparator = require_comparator();
    var { ANY } = Comparator;
    var satisfies = require_satisfies();
    var compare = require_compare();
    var subset = (sub, dom, options = {}) => {
      if (sub === dom) {
        return true;
      }
      sub = new Range(sub, options);
      dom = new Range(dom, options);
      let sawNonNull = false;
      OUTER: for (const simpleSub of sub.set) {
        for (const simpleDom of dom.set) {
          const isSub = simpleSubset(simpleSub, simpleDom, options);
          sawNonNull = sawNonNull || isSub !== null;
          if (isSub) {
            continue OUTER;
          }
        }
        if (sawNonNull) {
          return false;
        }
      }
      return true;
    };
    var minimumVersionWithPreRelease = [new Comparator(">=0.0.0-0")];
    var minimumVersion = [new Comparator(">=0.0.0")];
    var simpleSubset = (sub, dom, options) => {
      if (sub === dom) {
        return true;
      }
      if (sub.length === 1 && sub[0].semver === ANY) {
        if (dom.length === 1 && dom[0].semver === ANY) {
          return true;
        } else if (options.includePrerelease) {
          sub = minimumVersionWithPreRelease;
        } else {
          sub = minimumVersion;
        }
      }
      if (dom.length === 1 && dom[0].semver === ANY) {
        if (options.includePrerelease) {
          return true;
        } else {
          dom = minimumVersion;
        }
      }
      const eqSet = /* @__PURE__ */ new Set();
      let gt, lt;
      for (const c of sub) {
        if (c.operator === ">" || c.operator === ">=") {
          gt = higherGT(gt, c, options);
        } else if (c.operator === "<" || c.operator === "<=") {
          lt = lowerLT(lt, c, options);
        } else {
          eqSet.add(c.semver);
        }
      }
      if (eqSet.size > 1) {
        return null;
      }
      let gtltComp;
      if (gt && lt) {
        gtltComp = compare(gt.semver, lt.semver, options);
        if (gtltComp > 0) {
          return null;
        } else if (gtltComp === 0 && (gt.operator !== ">=" || lt.operator !== "<=")) {
          return null;
        }
      }
      for (const eq of eqSet) {
        if (gt && !satisfies(eq, String(gt), options)) {
          return null;
        }
        if (lt && !satisfies(eq, String(lt), options)) {
          return null;
        }
        for (const c of dom) {
          if (!satisfies(eq, String(c), options)) {
            return false;
          }
        }
        return true;
      }
      let higher, lower;
      let hasDomLT, hasDomGT;
      let needDomLTPre = lt && !options.includePrerelease && lt.semver.prerelease.length ? lt.semver : false;
      let needDomGTPre = gt && !options.includePrerelease && gt.semver.prerelease.length ? gt.semver : false;
      if (needDomLTPre && needDomLTPre.prerelease.length === 1 && lt.operator === "<" && needDomLTPre.prerelease[0] === 0) {
        needDomLTPre = false;
      }
      for (const c of dom) {
        hasDomGT = hasDomGT || c.operator === ">" || c.operator === ">=";
        hasDomLT = hasDomLT || c.operator === "<" || c.operator === "<=";
        if (gt) {
          if (needDomGTPre) {
            if (c.semver.prerelease && c.semver.prerelease.length && c.semver.major === needDomGTPre.major && c.semver.minor === needDomGTPre.minor && c.semver.patch === needDomGTPre.patch) {
              needDomGTPre = false;
            }
          }
          if (c.operator === ">" || c.operator === ">=") {
            higher = higherGT(gt, c, options);
            if (higher === c && higher !== gt) {
              return false;
            }
          } else if (gt.operator === ">=" && !satisfies(gt.semver, String(c), options)) {
            return false;
          }
        }
        if (lt) {
          if (needDomLTPre) {
            if (c.semver.prerelease && c.semver.prerelease.length && c.semver.major === needDomLTPre.major && c.semver.minor === needDomLTPre.minor && c.semver.patch === needDomLTPre.patch) {
              needDomLTPre = false;
            }
          }
          if (c.operator === "<" || c.operator === "<=") {
            lower = lowerLT(lt, c, options);
            if (lower === c && lower !== lt) {
              return false;
            }
          } else if (lt.operator === "<=" && !satisfies(lt.semver, String(c), options)) {
            return false;
          }
        }
        if (!c.operator && (lt || gt) && gtltComp !== 0) {
          return false;
        }
      }
      if (gt && hasDomLT && !lt && gtltComp !== 0) {
        return false;
      }
      if (lt && hasDomGT && !gt && gtltComp !== 0) {
        return false;
      }
      if (needDomGTPre || needDomLTPre) {
        return false;
      }
      return true;
    };
    var higherGT = (a, b, options) => {
      if (!a) {
        return b;
      }
      const comp = compare(a.semver, b.semver, options);
      return comp > 0 ? a : comp < 0 ? b : b.operator === ">" && a.operator === ">=" ? b : a;
    };
    var lowerLT = (a, b, options) => {
      if (!a) {
        return b;
      }
      const comp = compare(a.semver, b.semver, options);
      return comp < 0 ? a : comp > 0 ? b : b.operator === "<" && a.operator === "<=" ? b : a;
    };
    module2.exports = subset;
  }
});

// node_modules/semver/index.js
var require_semver2 = __commonJS({
  "node_modules/semver/index.js"(exports, module2) {
    var internalRe = require_re();
    var constants2 = require_constants();
    var SemVer = require_semver();
    var identifiers = require_identifiers();
    var parse = require_parse();
    var valid = require_valid();
    var clean = require_clean();
    var inc = require_inc();
    var diff = require_diff();
    var major = require_major();
    var minor = require_minor();
    var patch = require_patch();
    var prerelease = require_prerelease();
    var compare = require_compare();
    var rcompare = require_rcompare();
    var compareLoose = require_compare_loose();
    var compareBuild = require_compare_build();
    var sort = require_sort();
    var rsort = require_rsort();
    var gt = require_gt();
    var lt = require_lt();
    var eq = require_eq();
    var neq = require_neq();
    var gte = require_gte();
    var lte = require_lte();
    var cmp = require_cmp();
    var coerce = require_coerce();
    var Comparator = require_comparator();
    var Range = require_range();
    var satisfies = require_satisfies();
    var toComparators = require_to_comparators();
    var maxSatisfying = require_max_satisfying();
    var minSatisfying = require_min_satisfying();
    var minVersion = require_min_version();
    var validRange = require_valid2();
    var outside = require_outside();
    var gtr = require_gtr();
    var ltr = require_ltr();
    var intersects = require_intersects();
    var simplifyRange = require_simplify();
    var subset = require_subset();
    module2.exports = {
      parse,
      valid,
      clean,
      inc,
      diff,
      major,
      minor,
      patch,
      prerelease,
      compare,
      rcompare,
      compareLoose,
      compareBuild,
      sort,
      rsort,
      gt,
      lt,
      eq,
      neq,
      gte,
      lte,
      cmp,
      coerce,
      Comparator,
      Range,
      satisfies,
      toComparators,
      maxSatisfying,
      minSatisfying,
      minVersion,
      validRange,
      outside,
      gtr,
      ltr,
      intersects,
      simplifyRange,
      subset,
      SemVer,
      re: internalRe.re,
      src: internalRe.src,
      tokens: internalRe.t,
      SEMVER_SPEC_VERSION: constants2.SEMVER_SPEC_VERSION,
      RELEASE_TYPES: constants2.RELEASE_TYPES,
      compareIdentifiers: identifiers.compareIdentifiers,
      rcompareIdentifiers: identifiers.rcompareIdentifiers
    };
  }
});

// node_modules/jsonwebtoken/lib/asymmetricKeyDetailsSupported.js
var require_asymmetricKeyDetailsSupported = __commonJS({
  "node_modules/jsonwebtoken/lib/asymmetricKeyDetailsSupported.js"(exports, module2) {
    var semver = require_semver2();
    module2.exports = semver.satisfies(process.version, ">=15.7.0");
  }
});

// node_modules/jsonwebtoken/lib/rsaPssKeyDetailsSupported.js
var require_rsaPssKeyDetailsSupported = __commonJS({
  "node_modules/jsonwebtoken/lib/rsaPssKeyDetailsSupported.js"(exports, module2) {
    var semver = require_semver2();
    module2.exports = semver.satisfies(process.version, ">=16.9.0");
  }
});

// node_modules/jsonwebtoken/lib/validateAsymmetricKey.js
var require_validateAsymmetricKey = __commonJS({
  "node_modules/jsonwebtoken/lib/validateAsymmetricKey.js"(exports, module2) {
    var ASYMMETRIC_KEY_DETAILS_SUPPORTED = require_asymmetricKeyDetailsSupported();
    var RSA_PSS_KEY_DETAILS_SUPPORTED = require_rsaPssKeyDetailsSupported();
    var allowedAlgorithmsForKeys = {
      "ec": ["ES256", "ES384", "ES512"],
      "rsa": ["RS256", "PS256", "RS384", "PS384", "RS512", "PS512"],
      "rsa-pss": ["PS256", "PS384", "PS512"]
    };
    var allowedCurves = {
      ES256: "prime256v1",
      ES384: "secp384r1",
      ES512: "secp521r1"
    };
    module2.exports = function(algorithm, key) {
      if (!algorithm || !key) return;
      const keyType = key.asymmetricKeyType;
      if (!keyType) return;
      const allowedAlgorithms = allowedAlgorithmsForKeys[keyType];
      if (!allowedAlgorithms) {
        throw new Error(`Unknown key type "${keyType}".`);
      }
      if (!allowedAlgorithms.includes(algorithm)) {
        throw new Error(`"alg" parameter for "${keyType}" key type must be one of: ${allowedAlgorithms.join(", ")}.`);
      }
      if (ASYMMETRIC_KEY_DETAILS_SUPPORTED) {
        switch (keyType) {
          case "ec":
            const keyCurve = key.asymmetricKeyDetails.namedCurve;
            const allowedCurve = allowedCurves[algorithm];
            if (keyCurve !== allowedCurve) {
              throw new Error(`"alg" parameter "${algorithm}" requires curve "${allowedCurve}".`);
            }
            break;
          case "rsa-pss":
            if (RSA_PSS_KEY_DETAILS_SUPPORTED) {
              const length = parseInt(algorithm.slice(-3), 10);
              const { hashAlgorithm, mgf1HashAlgorithm, saltLength } = key.asymmetricKeyDetails;
              if (hashAlgorithm !== `sha${length}` || mgf1HashAlgorithm !== hashAlgorithm) {
                throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${algorithm}.`);
              }
              if (saltLength !== void 0 && saltLength > length >> 3) {
                throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${algorithm}.`);
              }
            }
            break;
        }
      }
    };
  }
});

// node_modules/jsonwebtoken/lib/psSupported.js
var require_psSupported = __commonJS({
  "node_modules/jsonwebtoken/lib/psSupported.js"(exports, module2) {
    var semver = require_semver2();
    module2.exports = semver.satisfies(process.version, "^6.12.0 || >=8.0.0");
  }
});

// node_modules/jsonwebtoken/verify.js
var require_verify = __commonJS({
  "node_modules/jsonwebtoken/verify.js"(exports, module2) {
    var JsonWebTokenError = require_JsonWebTokenError();
    var NotBeforeError = require_NotBeforeError();
    var TokenExpiredError = require_TokenExpiredError();
    var decode = require_decode();
    var timespan = require_timespan();
    var validateAsymmetricKey = require_validateAsymmetricKey();
    var PS_SUPPORTED = require_psSupported();
    var jws = require_jws();
    var { KeyObject, createSecretKey, createPublicKey } = require("crypto");
    var PUB_KEY_ALGS = ["RS256", "RS384", "RS512"];
    var EC_KEY_ALGS = ["ES256", "ES384", "ES512"];
    var RSA_KEY_ALGS = ["RS256", "RS384", "RS512"];
    var HS_ALGS = ["HS256", "HS384", "HS512"];
    if (PS_SUPPORTED) {
      PUB_KEY_ALGS.splice(PUB_KEY_ALGS.length, 0, "PS256", "PS384", "PS512");
      RSA_KEY_ALGS.splice(RSA_KEY_ALGS.length, 0, "PS256", "PS384", "PS512");
    }
    module2.exports = function(jwtString, secretOrPublicKey, options, callback) {
      if (typeof options === "function" && !callback) {
        callback = options;
        options = {};
      }
      if (!options) {
        options = {};
      }
      options = Object.assign({}, options);
      let done;
      if (callback) {
        done = callback;
      } else {
        done = function(err, data) {
          if (err) throw err;
          return data;
        };
      }
      if (options.clockTimestamp && typeof options.clockTimestamp !== "number") {
        return done(new JsonWebTokenError("clockTimestamp must be a number"));
      }
      if (options.nonce !== void 0 && (typeof options.nonce !== "string" || options.nonce.trim() === "")) {
        return done(new JsonWebTokenError("nonce must be a non-empty string"));
      }
      if (options.allowInvalidAsymmetricKeyTypes !== void 0 && typeof options.allowInvalidAsymmetricKeyTypes !== "boolean") {
        return done(new JsonWebTokenError("allowInvalidAsymmetricKeyTypes must be a boolean"));
      }
      const clockTimestamp = options.clockTimestamp || Math.floor(Date.now() / 1e3);
      if (!jwtString) {
        return done(new JsonWebTokenError("jwt must be provided"));
      }
      if (typeof jwtString !== "string") {
        return done(new JsonWebTokenError("jwt must be a string"));
      }
      const parts = jwtString.split(".");
      if (parts.length !== 3) {
        return done(new JsonWebTokenError("jwt malformed"));
      }
      let decodedToken;
      try {
        decodedToken = decode(jwtString, { complete: true });
      } catch (err) {
        return done(err);
      }
      if (!decodedToken) {
        return done(new JsonWebTokenError("invalid token"));
      }
      const header = decodedToken.header;
      let getSecret;
      if (typeof secretOrPublicKey === "function") {
        if (!callback) {
          return done(new JsonWebTokenError("verify must be called asynchronous if secret or public key is provided as a callback"));
        }
        getSecret = secretOrPublicKey;
      } else {
        getSecret = function(header2, secretCallback) {
          return secretCallback(null, secretOrPublicKey);
        };
      }
      return getSecret(header, function(err, secretOrPublicKey2) {
        if (err) {
          return done(new JsonWebTokenError("error in secret or public key callback: " + err.message));
        }
        const hasSignature = parts[2].trim() !== "";
        if (!hasSignature && secretOrPublicKey2) {
          return done(new JsonWebTokenError("jwt signature is required"));
        }
        if (hasSignature && !secretOrPublicKey2) {
          return done(new JsonWebTokenError("secret or public key must be provided"));
        }
        if (!hasSignature && !options.algorithms) {
          return done(new JsonWebTokenError('please specify "none" in "algorithms" to verify unsigned tokens'));
        }
        if (secretOrPublicKey2 != null && !(secretOrPublicKey2 instanceof KeyObject)) {
          try {
            secretOrPublicKey2 = createPublicKey(secretOrPublicKey2);
          } catch (_) {
            try {
              secretOrPublicKey2 = createSecretKey(typeof secretOrPublicKey2 === "string" ? Buffer.from(secretOrPublicKey2) : secretOrPublicKey2);
            } catch (_2) {
              return done(new JsonWebTokenError("secretOrPublicKey is not valid key material"));
            }
          }
        }
        if (!options.algorithms) {
          if (secretOrPublicKey2.type === "secret") {
            options.algorithms = HS_ALGS;
          } else if (["rsa", "rsa-pss"].includes(secretOrPublicKey2.asymmetricKeyType)) {
            options.algorithms = RSA_KEY_ALGS;
          } else if (secretOrPublicKey2.asymmetricKeyType === "ec") {
            options.algorithms = EC_KEY_ALGS;
          } else {
            options.algorithms = PUB_KEY_ALGS;
          }
        }
        if (options.algorithms.indexOf(decodedToken.header.alg) === -1) {
          return done(new JsonWebTokenError("invalid algorithm"));
        }
        if (header.alg.startsWith("HS") && secretOrPublicKey2.type !== "secret") {
          return done(new JsonWebTokenError(`secretOrPublicKey must be a symmetric key when using ${header.alg}`));
        } else if (/^(?:RS|PS|ES)/.test(header.alg) && secretOrPublicKey2.type !== "public") {
          return done(new JsonWebTokenError(`secretOrPublicKey must be an asymmetric key when using ${header.alg}`));
        }
        if (!options.allowInvalidAsymmetricKeyTypes) {
          try {
            validateAsymmetricKey(header.alg, secretOrPublicKey2);
          } catch (e) {
            return done(e);
          }
        }
        let valid;
        try {
          valid = jws.verify(jwtString, decodedToken.header.alg, secretOrPublicKey2);
        } catch (e) {
          return done(e);
        }
        if (!valid) {
          return done(new JsonWebTokenError("invalid signature"));
        }
        const payload = decodedToken.payload;
        if (typeof payload.nbf !== "undefined" && !options.ignoreNotBefore) {
          if (typeof payload.nbf !== "number") {
            return done(new JsonWebTokenError("invalid nbf value"));
          }
          if (payload.nbf > clockTimestamp + (options.clockTolerance || 0)) {
            return done(new NotBeforeError("jwt not active", new Date(payload.nbf * 1e3)));
          }
        }
        if (typeof payload.exp !== "undefined" && !options.ignoreExpiration) {
          if (typeof payload.exp !== "number") {
            return done(new JsonWebTokenError("invalid exp value"));
          }
          if (clockTimestamp >= payload.exp + (options.clockTolerance || 0)) {
            return done(new TokenExpiredError("jwt expired", new Date(payload.exp * 1e3)));
          }
        }
        if (options.audience) {
          const audiences = Array.isArray(options.audience) ? options.audience : [options.audience];
          const target = Array.isArray(payload.aud) ? payload.aud : [payload.aud];
          const match = target.some(function(targetAudience) {
            return audiences.some(function(audience) {
              return audience instanceof RegExp ? audience.test(targetAudience) : audience === targetAudience;
            });
          });
          if (!match) {
            return done(new JsonWebTokenError("jwt audience invalid. expected: " + audiences.join(" or ")));
          }
        }
        if (options.issuer) {
          const invalid_issuer = typeof options.issuer === "string" && payload.iss !== options.issuer || Array.isArray(options.issuer) && options.issuer.indexOf(payload.iss) === -1;
          if (invalid_issuer) {
            return done(new JsonWebTokenError("jwt issuer invalid. expected: " + options.issuer));
          }
        }
        if (options.subject) {
          if (payload.sub !== options.subject) {
            return done(new JsonWebTokenError("jwt subject invalid. expected: " + options.subject));
          }
        }
        if (options.jwtid) {
          if (payload.jti !== options.jwtid) {
            return done(new JsonWebTokenError("jwt jwtid invalid. expected: " + options.jwtid));
          }
        }
        if (options.nonce) {
          if (payload.nonce !== options.nonce) {
            return done(new JsonWebTokenError("jwt nonce invalid. expected: " + options.nonce));
          }
        }
        if (options.maxAge) {
          if (typeof payload.iat !== "number") {
            return done(new JsonWebTokenError("iat required when maxAge is specified"));
          }
          const maxAgeTimestamp = timespan(options.maxAge, payload.iat);
          if (typeof maxAgeTimestamp === "undefined") {
            return done(new JsonWebTokenError('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));
          }
          if (clockTimestamp >= maxAgeTimestamp + (options.clockTolerance || 0)) {
            return done(new TokenExpiredError("maxAge exceeded", new Date(maxAgeTimestamp * 1e3)));
          }
        }
        if (options.complete === true) {
          const signature = decodedToken.signature;
          return done(null, {
            header,
            payload,
            signature
          });
        }
        return done(null, payload);
      });
    };
  }
});

// node_modules/lodash.includes/index.js
var require_lodash = __commonJS({
  "node_modules/lodash.includes/index.js"(exports, module2) {
    var INFINITY = 1 / 0;
    var MAX_SAFE_INTEGER = 9007199254740991;
    var MAX_INTEGER = 17976931348623157e292;
    var NAN = 0 / 0;
    var argsTag = "[object Arguments]";
    var funcTag = "[object Function]";
    var genTag = "[object GeneratorFunction]";
    var stringTag = "[object String]";
    var symbolTag = "[object Symbol]";
    var reTrim = /^\s+|\s+$/g;
    var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;
    var reIsBinary = /^0b[01]+$/i;
    var reIsOctal = /^0o[0-7]+$/i;
    var reIsUint = /^(?:0|[1-9]\d*)$/;
    var freeParseInt = parseInt;
    function arrayMap(array, iteratee) {
      var index = -1, length = array ? array.length : 0, result = Array(length);
      while (++index < length) {
        result[index] = iteratee(array[index], index, array);
      }
      return result;
    }
    function baseFindIndex(array, predicate, fromIndex, fromRight) {
      var length = array.length, index = fromIndex + (fromRight ? 1 : -1);
      while (fromRight ? index-- : ++index < length) {
        if (predicate(array[index], index, array)) {
          return index;
        }
      }
      return -1;
    }
    function baseIndexOf(array, value, fromIndex) {
      if (value !== value) {
        return baseFindIndex(array, baseIsNaN, fromIndex);
      }
      var index = fromIndex - 1, length = array.length;
      while (++index < length) {
        if (array[index] === value) {
          return index;
        }
      }
      return -1;
    }
    function baseIsNaN(value) {
      return value !== value;
    }
    function baseTimes(n, iteratee) {
      var index = -1, result = Array(n);
      while (++index < n) {
        result[index] = iteratee(index);
      }
      return result;
    }
    function baseValues(object, props) {
      return arrayMap(props, function(key) {
        return object[key];
      });
    }
    function overArg(func, transform) {
      return function(arg) {
        return func(transform(arg));
      };
    }
    var objectProto = Object.prototype;
    var hasOwnProperty = objectProto.hasOwnProperty;
    var objectToString = objectProto.toString;
    var propertyIsEnumerable = objectProto.propertyIsEnumerable;
    var nativeKeys = overArg(Object.keys, Object);
    var nativeMax = Math.max;
    function arrayLikeKeys(value, inherited) {
      var result = isArray(value) || isArguments(value) ? baseTimes(value.length, String) : [];
      var length = result.length, skipIndexes = !!length;
      for (var key in value) {
        if ((inherited || hasOwnProperty.call(value, key)) && !(skipIndexes && (key == "length" || isIndex(key, length)))) {
          result.push(key);
        }
      }
      return result;
    }
    function baseKeys(object) {
      if (!isPrototype(object)) {
        return nativeKeys(object);
      }
      var result = [];
      for (var key in Object(object)) {
        if (hasOwnProperty.call(object, key) && key != "constructor") {
          result.push(key);
        }
      }
      return result;
    }
    function isIndex(value, length) {
      length = length == null ? MAX_SAFE_INTEGER : length;
      return !!length && (typeof value == "number" || reIsUint.test(value)) && (value > -1 && value % 1 == 0 && value < length);
    }
    function isPrototype(value) {
      var Ctor = value && value.constructor, proto = typeof Ctor == "function" && Ctor.prototype || objectProto;
      return value === proto;
    }
    function includes(collection, value, fromIndex, guard) {
      collection = isArrayLike(collection) ? collection : values(collection);
      fromIndex = fromIndex && !guard ? toInteger(fromIndex) : 0;
      var length = collection.length;
      if (fromIndex < 0) {
        fromIndex = nativeMax(length + fromIndex, 0);
      }
      return isString(collection) ? fromIndex <= length && collection.indexOf(value, fromIndex) > -1 : !!length && baseIndexOf(collection, value, fromIndex) > -1;
    }
    function isArguments(value) {
      return isArrayLikeObject(value) && hasOwnProperty.call(value, "callee") && (!propertyIsEnumerable.call(value, "callee") || objectToString.call(value) == argsTag);
    }
    var isArray = Array.isArray;
    function isArrayLike(value) {
      return value != null && isLength(value.length) && !isFunction(value);
    }
    function isArrayLikeObject(value) {
      return isObjectLike(value) && isArrayLike(value);
    }
    function isFunction(value) {
      var tag = isObject(value) ? objectToString.call(value) : "";
      return tag == funcTag || tag == genTag;
    }
    function isLength(value) {
      return typeof value == "number" && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;
    }
    function isObject(value) {
      var type = typeof value;
      return !!value && (type == "object" || type == "function");
    }
    function isObjectLike(value) {
      return !!value && typeof value == "object";
    }
    function isString(value) {
      return typeof value == "string" || !isArray(value) && isObjectLike(value) && objectToString.call(value) == stringTag;
    }
    function isSymbol(value) {
      return typeof value == "symbol" || isObjectLike(value) && objectToString.call(value) == symbolTag;
    }
    function toFinite(value) {
      if (!value) {
        return value === 0 ? value : 0;
      }
      value = toNumber(value);
      if (value === INFINITY || value === -INFINITY) {
        var sign = value < 0 ? -1 : 1;
        return sign * MAX_INTEGER;
      }
      return value === value ? value : 0;
    }
    function toInteger(value) {
      var result = toFinite(value), remainder = result % 1;
      return result === result ? remainder ? result - remainder : result : 0;
    }
    function toNumber(value) {
      if (typeof value == "number") {
        return value;
      }
      if (isSymbol(value)) {
        return NAN;
      }
      if (isObject(value)) {
        var other = typeof value.valueOf == "function" ? value.valueOf() : value;
        value = isObject(other) ? other + "" : other;
      }
      if (typeof value != "string") {
        return value === 0 ? value : +value;
      }
      value = value.replace(reTrim, "");
      var isBinary = reIsBinary.test(value);
      return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;
    }
    function keys(object) {
      return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);
    }
    function values(object) {
      return object ? baseValues(object, keys(object)) : [];
    }
    module2.exports = includes;
  }
});

// node_modules/lodash.isboolean/index.js
var require_lodash2 = __commonJS({
  "node_modules/lodash.isboolean/index.js"(exports, module2) {
    var boolTag = "[object Boolean]";
    var objectProto = Object.prototype;
    var objectToString = objectProto.toString;
    function isBoolean(value) {
      return value === true || value === false || isObjectLike(value) && objectToString.call(value) == boolTag;
    }
    function isObjectLike(value) {
      return !!value && typeof value == "object";
    }
    module2.exports = isBoolean;
  }
});

// node_modules/lodash.isinteger/index.js
var require_lodash3 = __commonJS({
  "node_modules/lodash.isinteger/index.js"(exports, module2) {
    var INFINITY = 1 / 0;
    var MAX_INTEGER = 17976931348623157e292;
    var NAN = 0 / 0;
    var symbolTag = "[object Symbol]";
    var reTrim = /^\s+|\s+$/g;
    var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;
    var reIsBinary = /^0b[01]+$/i;
    var reIsOctal = /^0o[0-7]+$/i;
    var freeParseInt = parseInt;
    var objectProto = Object.prototype;
    var objectToString = objectProto.toString;
    function isInteger(value) {
      return typeof value == "number" && value == toInteger(value);
    }
    function isObject(value) {
      var type = typeof value;
      return !!value && (type == "object" || type == "function");
    }
    function isObjectLike(value) {
      return !!value && typeof value == "object";
    }
    function isSymbol(value) {
      return typeof value == "symbol" || isObjectLike(value) && objectToString.call(value) == symbolTag;
    }
    function toFinite(value) {
      if (!value) {
        return value === 0 ? value : 0;
      }
      value = toNumber(value);
      if (value === INFINITY || value === -INFINITY) {
        var sign = value < 0 ? -1 : 1;
        return sign * MAX_INTEGER;
      }
      return value === value ? value : 0;
    }
    function toInteger(value) {
      var result = toFinite(value), remainder = result % 1;
      return result === result ? remainder ? result - remainder : result : 0;
    }
    function toNumber(value) {
      if (typeof value == "number") {
        return value;
      }
      if (isSymbol(value)) {
        return NAN;
      }
      if (isObject(value)) {
        var other = typeof value.valueOf == "function" ? value.valueOf() : value;
        value = isObject(other) ? other + "" : other;
      }
      if (typeof value != "string") {
        return value === 0 ? value : +value;
      }
      value = value.replace(reTrim, "");
      var isBinary = reIsBinary.test(value);
      return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;
    }
    module2.exports = isInteger;
  }
});

// node_modules/lodash.isnumber/index.js
var require_lodash4 = __commonJS({
  "node_modules/lodash.isnumber/index.js"(exports, module2) {
    var numberTag = "[object Number]";
    var objectProto = Object.prototype;
    var objectToString = objectProto.toString;
    function isObjectLike(value) {
      return !!value && typeof value == "object";
    }
    function isNumber(value) {
      return typeof value == "number" || isObjectLike(value) && objectToString.call(value) == numberTag;
    }
    module2.exports = isNumber;
  }
});

// node_modules/lodash.isplainobject/index.js
var require_lodash5 = __commonJS({
  "node_modules/lodash.isplainobject/index.js"(exports, module2) {
    var objectTag = "[object Object]";
    function isHostObject(value) {
      var result = false;
      if (value != null && typeof value.toString != "function") {
        try {
          result = !!(value + "");
        } catch (e) {
        }
      }
      return result;
    }
    function overArg(func, transform) {
      return function(arg) {
        return func(transform(arg));
      };
    }
    var funcProto = Function.prototype;
    var objectProto = Object.prototype;
    var funcToString = funcProto.toString;
    var hasOwnProperty = objectProto.hasOwnProperty;
    var objectCtorString = funcToString.call(Object);
    var objectToString = objectProto.toString;
    var getPrototype = overArg(Object.getPrototypeOf, Object);
    function isObjectLike(value) {
      return !!value && typeof value == "object";
    }
    function isPlainObject(value) {
      if (!isObjectLike(value) || objectToString.call(value) != objectTag || isHostObject(value)) {
        return false;
      }
      var proto = getPrototype(value);
      if (proto === null) {
        return true;
      }
      var Ctor = hasOwnProperty.call(proto, "constructor") && proto.constructor;
      return typeof Ctor == "function" && Ctor instanceof Ctor && funcToString.call(Ctor) == objectCtorString;
    }
    module2.exports = isPlainObject;
  }
});

// node_modules/lodash.isstring/index.js
var require_lodash6 = __commonJS({
  "node_modules/lodash.isstring/index.js"(exports, module2) {
    var stringTag = "[object String]";
    var objectProto = Object.prototype;
    var objectToString = objectProto.toString;
    var isArray = Array.isArray;
    function isObjectLike(value) {
      return !!value && typeof value == "object";
    }
    function isString(value) {
      return typeof value == "string" || !isArray(value) && isObjectLike(value) && objectToString.call(value) == stringTag;
    }
    module2.exports = isString;
  }
});

// node_modules/lodash.once/index.js
var require_lodash7 = __commonJS({
  "node_modules/lodash.once/index.js"(exports, module2) {
    var FUNC_ERROR_TEXT = "Expected a function";
    var INFINITY = 1 / 0;
    var MAX_INTEGER = 17976931348623157e292;
    var NAN = 0 / 0;
    var symbolTag = "[object Symbol]";
    var reTrim = /^\s+|\s+$/g;
    var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;
    var reIsBinary = /^0b[01]+$/i;
    var reIsOctal = /^0o[0-7]+$/i;
    var freeParseInt = parseInt;
    var objectProto = Object.prototype;
    var objectToString = objectProto.toString;
    function before(n, func) {
      var result;
      if (typeof func != "function") {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      n = toInteger(n);
      return function() {
        if (--n > 0) {
          result = func.apply(this, arguments);
        }
        if (n <= 1) {
          func = void 0;
        }
        return result;
      };
    }
    function once(func) {
      return before(2, func);
    }
    function isObject(value) {
      var type = typeof value;
      return !!value && (type == "object" || type == "function");
    }
    function isObjectLike(value) {
      return !!value && typeof value == "object";
    }
    function isSymbol(value) {
      return typeof value == "symbol" || isObjectLike(value) && objectToString.call(value) == symbolTag;
    }
    function toFinite(value) {
      if (!value) {
        return value === 0 ? value : 0;
      }
      value = toNumber(value);
      if (value === INFINITY || value === -INFINITY) {
        var sign = value < 0 ? -1 : 1;
        return sign * MAX_INTEGER;
      }
      return value === value ? value : 0;
    }
    function toInteger(value) {
      var result = toFinite(value), remainder = result % 1;
      return result === result ? remainder ? result - remainder : result : 0;
    }
    function toNumber(value) {
      if (typeof value == "number") {
        return value;
      }
      if (isSymbol(value)) {
        return NAN;
      }
      if (isObject(value)) {
        var other = typeof value.valueOf == "function" ? value.valueOf() : value;
        value = isObject(other) ? other + "" : other;
      }
      if (typeof value != "string") {
        return value === 0 ? value : +value;
      }
      value = value.replace(reTrim, "");
      var isBinary = reIsBinary.test(value);
      return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;
    }
    module2.exports = once;
  }
});

// node_modules/jsonwebtoken/sign.js
var require_sign = __commonJS({
  "node_modules/jsonwebtoken/sign.js"(exports, module2) {
    var timespan = require_timespan();
    var PS_SUPPORTED = require_psSupported();
    var validateAsymmetricKey = require_validateAsymmetricKey();
    var jws = require_jws();
    var includes = require_lodash();
    var isBoolean = require_lodash2();
    var isInteger = require_lodash3();
    var isNumber = require_lodash4();
    var isPlainObject = require_lodash5();
    var isString = require_lodash6();
    var once = require_lodash7();
    var { KeyObject, createSecretKey, createPrivateKey } = require("crypto");
    var SUPPORTED_ALGS = ["RS256", "RS384", "RS512", "ES256", "ES384", "ES512", "HS256", "HS384", "HS512", "none"];
    if (PS_SUPPORTED) {
      SUPPORTED_ALGS.splice(3, 0, "PS256", "PS384", "PS512");
    }
    var sign_options_schema = {
      expiresIn: { isValid: function(value) {
        return isInteger(value) || isString(value) && value;
      }, message: '"expiresIn" should be a number of seconds or string representing a timespan' },
      notBefore: { isValid: function(value) {
        return isInteger(value) || isString(value) && value;
      }, message: '"notBefore" should be a number of seconds or string representing a timespan' },
      audience: { isValid: function(value) {
        return isString(value) || Array.isArray(value);
      }, message: '"audience" must be a string or array' },
      algorithm: { isValid: includes.bind(null, SUPPORTED_ALGS), message: '"algorithm" must be a valid string enum value' },
      header: { isValid: isPlainObject, message: '"header" must be an object' },
      encoding: { isValid: isString, message: '"encoding" must be a string' },
      issuer: { isValid: isString, message: '"issuer" must be a string' },
      subject: { isValid: isString, message: '"subject" must be a string' },
      jwtid: { isValid: isString, message: '"jwtid" must be a string' },
      noTimestamp: { isValid: isBoolean, message: '"noTimestamp" must be a boolean' },
      keyid: { isValid: isString, message: '"keyid" must be a string' },
      mutatePayload: { isValid: isBoolean, message: '"mutatePayload" must be a boolean' },
      allowInsecureKeySizes: { isValid: isBoolean, message: '"allowInsecureKeySizes" must be a boolean' },
      allowInvalidAsymmetricKeyTypes: { isValid: isBoolean, message: '"allowInvalidAsymmetricKeyTypes" must be a boolean' }
    };
    var registered_claims_schema = {
      iat: { isValid: isNumber, message: '"iat" should be a number of seconds' },
      exp: { isValid: isNumber, message: '"exp" should be a number of seconds' },
      nbf: { isValid: isNumber, message: '"nbf" should be a number of seconds' }
    };
    function validate2(schema, allowUnknown, object, parameterName) {
      if (!isPlainObject(object)) {
        throw new Error('Expected "' + parameterName + '" to be a plain object.');
      }
      Object.keys(object).forEach(function(key) {
        const validator = schema[key];
        if (!validator) {
          if (!allowUnknown) {
            throw new Error('"' + key + '" is not allowed in "' + parameterName + '"');
          }
          return;
        }
        if (!validator.isValid(object[key])) {
          throw new Error(validator.message);
        }
      });
    }
    function validateOptions(options) {
      return validate2(sign_options_schema, false, options, "options");
    }
    function validatePayload(payload) {
      return validate2(registered_claims_schema, true, payload, "payload");
    }
    var options_to_payload = {
      "audience": "aud",
      "issuer": "iss",
      "subject": "sub",
      "jwtid": "jti"
    };
    var options_for_objects = [
      "expiresIn",
      "notBefore",
      "noTimestamp",
      "audience",
      "issuer",
      "subject",
      "jwtid"
    ];
    module2.exports = function(payload, secretOrPrivateKey, options, callback) {
      if (typeof options === "function") {
        callback = options;
        options = {};
      } else {
        options = options || {};
      }
      const isObjectPayload = typeof payload === "object" && !Buffer.isBuffer(payload);
      const header = Object.assign({
        alg: options.algorithm || "HS256",
        typ: isObjectPayload ? "JWT" : void 0,
        kid: options.keyid
      }, options.header);
      function failure(err) {
        if (callback) {
          return callback(err);
        }
        throw err;
      }
      if (!secretOrPrivateKey && options.algorithm !== "none") {
        return failure(new Error("secretOrPrivateKey must have a value"));
      }
      if (secretOrPrivateKey != null && !(secretOrPrivateKey instanceof KeyObject)) {
        try {
          secretOrPrivateKey = createPrivateKey(secretOrPrivateKey);
        } catch (_) {
          try {
            secretOrPrivateKey = createSecretKey(typeof secretOrPrivateKey === "string" ? Buffer.from(secretOrPrivateKey) : secretOrPrivateKey);
          } catch (_2) {
            return failure(new Error("secretOrPrivateKey is not valid key material"));
          }
        }
      }
      if (header.alg.startsWith("HS") && secretOrPrivateKey.type !== "secret") {
        return failure(new Error(`secretOrPrivateKey must be a symmetric key when using ${header.alg}`));
      } else if (/^(?:RS|PS|ES)/.test(header.alg)) {
        if (secretOrPrivateKey.type !== "private") {
          return failure(new Error(`secretOrPrivateKey must be an asymmetric key when using ${header.alg}`));
        }
        if (!options.allowInsecureKeySizes && !header.alg.startsWith("ES") && secretOrPrivateKey.asymmetricKeyDetails !== void 0 && //KeyObject.asymmetricKeyDetails is supported in Node 15+
        secretOrPrivateKey.asymmetricKeyDetails.modulusLength < 2048) {
          return failure(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${header.alg}`));
        }
      }
      if (typeof payload === "undefined") {
        return failure(new Error("payload is required"));
      } else if (isObjectPayload) {
        try {
          validatePayload(payload);
        } catch (error) {
          return failure(error);
        }
        if (!options.mutatePayload) {
          payload = Object.assign({}, payload);
        }
      } else {
        const invalid_options = options_for_objects.filter(function(opt) {
          return typeof options[opt] !== "undefined";
        });
        if (invalid_options.length > 0) {
          return failure(new Error("invalid " + invalid_options.join(",") + " option for " + typeof payload + " payload"));
        }
      }
      if (typeof payload.exp !== "undefined" && typeof options.expiresIn !== "undefined") {
        return failure(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));
      }
      if (typeof payload.nbf !== "undefined" && typeof options.notBefore !== "undefined") {
        return failure(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));
      }
      try {
        validateOptions(options);
      } catch (error) {
        return failure(error);
      }
      if (!options.allowInvalidAsymmetricKeyTypes) {
        try {
          validateAsymmetricKey(header.alg, secretOrPrivateKey);
        } catch (error) {
          return failure(error);
        }
      }
      const timestamp = payload.iat || Math.floor(Date.now() / 1e3);
      if (options.noTimestamp) {
        delete payload.iat;
      } else if (isObjectPayload) {
        payload.iat = timestamp;
      }
      if (typeof options.notBefore !== "undefined") {
        try {
          payload.nbf = timespan(options.notBefore, timestamp);
        } catch (err) {
          return failure(err);
        }
        if (typeof payload.nbf === "undefined") {
          return failure(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));
        }
      }
      if (typeof options.expiresIn !== "undefined" && typeof payload === "object") {
        try {
          payload.exp = timespan(options.expiresIn, timestamp);
        } catch (err) {
          return failure(err);
        }
        if (typeof payload.exp === "undefined") {
          return failure(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));
        }
      }
      Object.keys(options_to_payload).forEach(function(key) {
        const claim = options_to_payload[key];
        if (typeof options[key] !== "undefined") {
          if (typeof payload[claim] !== "undefined") {
            return failure(new Error('Bad "options.' + key + '" option. The payload already has an "' + claim + '" property.'));
          }
          payload[claim] = options[key];
        }
      });
      const encoding = options.encoding || "utf8";
      if (typeof callback === "function") {
        callback = callback && once(callback);
        jws.createSign({
          header,
          privateKey: secretOrPrivateKey,
          payload,
          encoding
        }).once("error", callback).once("done", function(signature) {
          if (!options.allowInsecureKeySizes && /^(?:RS|PS)/.test(header.alg) && signature.length < 256) {
            return callback(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${header.alg}`));
          }
          callback(null, signature);
        });
      } else {
        let signature = jws.sign({ header, payload, secret: secretOrPrivateKey, encoding });
        if (!options.allowInsecureKeySizes && /^(?:RS|PS)/.test(header.alg) && signature.length < 256) {
          throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${header.alg}`);
        }
        return signature;
      }
    };
  }
});

// node_modules/jsonwebtoken/index.js
var require_jsonwebtoken = __commonJS({
  "node_modules/jsonwebtoken/index.js"(exports, module2) {
    module2.exports = {
      decode: require_decode(),
      verify: require_verify(),
      sign: require_sign(),
      JsonWebTokenError: require_JsonWebTokenError(),
      NotBeforeError: require_NotBeforeError(),
      TokenExpiredError: require_TokenExpiredError()
    };
  }
});

// node_modules/@electron/remote/dist/src/renderer/callbacks-registry.js
var require_callbacks_registry = __commonJS({
  "node_modules/@electron/remote/dist/src/renderer/callbacks-registry.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.CallbacksRegistry = void 0;
    var CallbacksRegistry = class {
      constructor() {
        this.nextId = 0;
        this.callbacks = {};
        this.callbackIds = /* @__PURE__ */ new WeakMap();
        this.locationInfo = /* @__PURE__ */ new WeakMap();
      }
      add(callback) {
        let id = this.callbackIds.get(callback);
        if (id != null)
          return id;
        id = this.nextId += 1;
        this.callbacks[id] = callback;
        this.callbackIds.set(callback, id);
        const regexp = /at (.*)/gi;
        const stackString = new Error().stack;
        if (!stackString)
          return id;
        let filenameAndLine;
        let match;
        while ((match = regexp.exec(stackString)) !== null) {
          const location = match[1];
          if (location.includes("(native)"))
            continue;
          if (location.includes("(<anonymous>)"))
            continue;
          if (location.includes("callbacks-registry.js"))
            continue;
          if (location.includes("remote.js"))
            continue;
          if (location.includes("@electron/remote/dist"))
            continue;
          const ref = /([^/^)]*)\)?$/gi.exec(location);
          if (ref)
            filenameAndLine = ref[1];
          break;
        }
        this.locationInfo.set(callback, filenameAndLine);
        return id;
      }
      get(id) {
        return this.callbacks[id] || function() {
        };
      }
      getLocation(callback) {
        return this.locationInfo.get(callback);
      }
      apply(id, ...args) {
        return this.get(id).apply(global, ...args);
      }
      remove(id) {
        const callback = this.callbacks[id];
        if (callback) {
          this.callbackIds.delete(callback);
          delete this.callbacks[id];
        }
      }
    };
    exports.CallbacksRegistry = CallbacksRegistry;
  }
});

// node_modules/@electron/remote/dist/src/common/type-utils.js
var require_type_utils = __commonJS({
  "node_modules/@electron/remote/dist/src/common/type-utils.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.deserialize = exports.serialize = exports.isSerializableObject = exports.isPromise = void 0;
    var electron_1 = require("electron");
    function isPromise(val) {
      return val && val.then && val.then instanceof Function && val.constructor && val.constructor.reject && val.constructor.reject instanceof Function && val.constructor.resolve && val.constructor.resolve instanceof Function;
    }
    exports.isPromise = isPromise;
    var serializableTypes = [
      Boolean,
      Number,
      String,
      Date,
      Error,
      RegExp,
      ArrayBuffer
    ];
    function isSerializableObject(value) {
      return value === null || ArrayBuffer.isView(value) || serializableTypes.some((type) => value instanceof type);
    }
    exports.isSerializableObject = isSerializableObject;
    var objectMap = function(source, mapper) {
      const sourceEntries = Object.entries(source);
      const targetEntries = sourceEntries.map(([key, val]) => [key, mapper(val)]);
      return Object.fromEntries(targetEntries);
    };
    function serializeNativeImage(image) {
      const representations = [];
      const scaleFactors = image.getScaleFactors();
      if (scaleFactors.length === 1) {
        const scaleFactor = scaleFactors[0];
        const size = image.getSize(scaleFactor);
        const buffer = image.toBitmap({ scaleFactor });
        representations.push({ scaleFactor, size, buffer });
      } else {
        for (const scaleFactor of scaleFactors) {
          const size = image.getSize(scaleFactor);
          const dataURL = image.toDataURL({ scaleFactor });
          representations.push({ scaleFactor, size, dataURL });
        }
      }
      return { __ELECTRON_SERIALIZED_NativeImage__: true, representations };
    }
    function deserializeNativeImage(value) {
      const image = electron_1.nativeImage.createEmpty();
      if (value.representations.length === 1) {
        const { buffer, size, scaleFactor } = value.representations[0];
        const { width, height } = size;
        image.addRepresentation({ buffer, scaleFactor, width, height });
      } else {
        for (const rep of value.representations) {
          const { dataURL, size, scaleFactor } = rep;
          const { width, height } = size;
          image.addRepresentation({ dataURL, scaleFactor, width, height });
        }
      }
      return image;
    }
    function serialize(value) {
      if (value && value.constructor && value.constructor.name === "NativeImage") {
        return serializeNativeImage(value);
      }
      if (Array.isArray(value)) {
        return value.map(serialize);
      } else if (isSerializableObject(value)) {
        return value;
      } else if (value instanceof Object) {
        return objectMap(value, serialize);
      } else {
        return value;
      }
    }
    exports.serialize = serialize;
    function deserialize(value) {
      if (value && value.__ELECTRON_SERIALIZED_NativeImage__) {
        return deserializeNativeImage(value);
      } else if (Array.isArray(value)) {
        return value.map(deserialize);
      } else if (isSerializableObject(value)) {
        return value;
      } else if (value instanceof Object) {
        return objectMap(value, deserialize);
      } else {
        return value;
      }
    }
    exports.deserialize = deserialize;
  }
});

// node_modules/@electron/remote/dist/src/common/get-electron-binding.js
var require_get_electron_binding = __commonJS({
  "node_modules/@electron/remote/dist/src/common/get-electron-binding.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.getElectronBinding = void 0;
    var getElectronBinding = (name3) => {
      if (process._linkedBinding) {
        return process._linkedBinding("electron_common_" + name3);
      } else if (process.electronBinding) {
        return process.electronBinding(name3);
      } else {
        return null;
      }
    };
    exports.getElectronBinding = getElectronBinding;
  }
});

// node_modules/@electron/remote/dist/src/common/module-names.js
var require_module_names = __commonJS({
  "node_modules/@electron/remote/dist/src/common/module-names.js"(exports) {
    "use strict";
    var _a;
    var _b;
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.browserModuleNames = exports.commonModuleNames = void 0;
    var get_electron_binding_1 = require_get_electron_binding();
    exports.commonModuleNames = [
      "clipboard",
      "nativeImage",
      "shell"
    ];
    exports.browserModuleNames = [
      "app",
      "autoUpdater",
      "BaseWindow",
      "BrowserView",
      "BrowserWindow",
      "contentTracing",
      "crashReporter",
      "dialog",
      "globalShortcut",
      "ipcMain",
      "inAppPurchase",
      "Menu",
      "MenuItem",
      "nativeTheme",
      "net",
      "netLog",
      "MessageChannelMain",
      "Notification",
      "powerMonitor",
      "powerSaveBlocker",
      "protocol",
      "pushNotifications",
      "safeStorage",
      "screen",
      "session",
      "ShareMenu",
      "systemPreferences",
      "TopLevelWindow",
      "TouchBar",
      "Tray",
      "utilityProcess",
      "View",
      "webContents",
      "WebContentsView",
      "webFrameMain"
    ].concat(exports.commonModuleNames);
    var features = get_electron_binding_1.getElectronBinding("features");
    if (((_a = features === null || features === void 0 ? void 0 : features.isDesktopCapturerEnabled) === null || _a === void 0 ? void 0 : _a.call(features)) !== false) {
      exports.browserModuleNames.push("desktopCapturer");
    }
    if (((_b = features === null || features === void 0 ? void 0 : features.isViewApiEnabled) === null || _b === void 0 ? void 0 : _b.call(features)) !== false) {
      exports.browserModuleNames.push("ImageView");
    }
  }
});

// node_modules/@electron/remote/dist/src/renderer/remote.js
var require_remote = __commonJS({
  "node_modules/@electron/remote/dist/src/renderer/remote.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.createFunctionWithReturnValue = exports.getGlobal = exports.getCurrentWebContents = exports.getCurrentWindow = exports.getBuiltin = void 0;
    var callbacks_registry_1 = require_callbacks_registry();
    var type_utils_1 = require_type_utils();
    var electron_1 = require("electron");
    var module_names_1 = require_module_names();
    var get_electron_binding_1 = require_get_electron_binding();
    var { Promise: Promise2 } = global;
    var callbacksRegistry = new callbacks_registry_1.CallbacksRegistry();
    var remoteObjectCache = /* @__PURE__ */ new Map();
    var finalizationRegistry = new FinalizationRegistry((id) => {
      const ref = remoteObjectCache.get(id);
      if (ref !== void 0 && ref.deref() === void 0) {
        remoteObjectCache.delete(id);
        electron_1.ipcRenderer.send("REMOTE_BROWSER_DEREFERENCE", contextId, id, 0);
      }
    });
    var electronIds = /* @__PURE__ */ new WeakMap();
    var isReturnValue = /* @__PURE__ */ new WeakSet();
    function getCachedRemoteObject(id) {
      const ref = remoteObjectCache.get(id);
      if (ref !== void 0) {
        const deref = ref.deref();
        if (deref !== void 0)
          return deref;
      }
    }
    function setCachedRemoteObject(id, value) {
      const wr = new WeakRef(value);
      remoteObjectCache.set(id, wr);
      finalizationRegistry.register(value, id);
      return value;
    }
    function getContextId() {
      const v8Util = get_electron_binding_1.getElectronBinding("v8_util");
      if (v8Util) {
        return v8Util.getHiddenValue(global, "contextId");
      } else {
        throw new Error("Electron >=v13.0.0-beta.6 required to support sandboxed renderers");
      }
    }
    var contextId = process.contextId || getContextId();
    process.on("exit", () => {
      const command = "REMOTE_BROWSER_CONTEXT_RELEASE";
      electron_1.ipcRenderer.send(command, contextId);
    });
    var IS_REMOTE_PROXY = Symbol("is-remote-proxy");
    function wrapArgs(args, visited = /* @__PURE__ */ new Set()) {
      const valueToMeta = (value) => {
        if (visited.has(value)) {
          return {
            type: "value",
            value: null
          };
        }
        if (value && value.constructor && value.constructor.name === "NativeImage") {
          return { type: "nativeimage", value: type_utils_1.serialize(value) };
        } else if (Array.isArray(value)) {
          visited.add(value);
          const meta = {
            type: "array",
            value: wrapArgs(value, visited)
          };
          visited.delete(value);
          return meta;
        } else if (value instanceof Buffer) {
          return {
            type: "buffer",
            value
          };
        } else if (type_utils_1.isSerializableObject(value)) {
          return {
            type: "value",
            value
          };
        } else if (typeof value === "object") {
          if (type_utils_1.isPromise(value)) {
            return {
              type: "promise",
              then: valueToMeta(function(onFulfilled, onRejected) {
                value.then(onFulfilled, onRejected);
              })
            };
          } else if (electronIds.has(value)) {
            return {
              type: "remote-object",
              id: electronIds.get(value)
            };
          }
          const meta = {
            type: "object",
            name: value.constructor ? value.constructor.name : "",
            members: []
          };
          visited.add(value);
          for (const prop in value) {
            meta.members.push({
              name: prop,
              value: valueToMeta(value[prop])
            });
          }
          visited.delete(value);
          return meta;
        } else if (typeof value === "function" && isReturnValue.has(value)) {
          return {
            type: "function-with-return-value",
            value: valueToMeta(value())
          };
        } else if (typeof value === "function") {
          return {
            type: "function",
            id: callbacksRegistry.add(value),
            location: callbacksRegistry.getLocation(value),
            length: value.length
          };
        } else {
          return {
            type: "value",
            value
          };
        }
      };
      return args.map(valueToMeta);
    }
    function setObjectMembers(ref, object, metaId, members) {
      if (!Array.isArray(members))
        return;
      for (const member of members) {
        if (Object.prototype.hasOwnProperty.call(object, member.name))
          continue;
        const descriptor = { enumerable: member.enumerable };
        if (member.type === "method") {
          const remoteMemberFunction = function(...args) {
            let command;
            if (this && this.constructor === remoteMemberFunction) {
              command = "REMOTE_BROWSER_MEMBER_CONSTRUCTOR";
            } else {
              command = "REMOTE_BROWSER_MEMBER_CALL";
            }
            const ret = electron_1.ipcRenderer.sendSync(command, contextId, metaId, member.name, wrapArgs(args));
            return metaToValue(ret);
          };
          let descriptorFunction = proxyFunctionProperties(remoteMemberFunction, metaId, member.name);
          descriptor.get = () => {
            descriptorFunction.ref = ref;
            return descriptorFunction;
          };
          descriptor.set = (value) => {
            descriptorFunction = value;
            return value;
          };
          descriptor.configurable = true;
        } else if (member.type === "get") {
          descriptor.get = () => {
            const command = "REMOTE_BROWSER_MEMBER_GET";
            const meta = electron_1.ipcRenderer.sendSync(command, contextId, metaId, member.name);
            return metaToValue(meta);
          };
          if (member.writable) {
            descriptor.set = (value) => {
              const args = wrapArgs([value]);
              const command = "REMOTE_BROWSER_MEMBER_SET";
              const meta = electron_1.ipcRenderer.sendSync(command, contextId, metaId, member.name, args);
              if (meta != null)
                metaToValue(meta);
              return value;
            };
          }
        }
        Object.defineProperty(object, member.name, descriptor);
      }
    }
    function setObjectPrototype(ref, object, metaId, descriptor) {
      if (descriptor === null)
        return;
      const proto = {};
      setObjectMembers(ref, proto, metaId, descriptor.members);
      setObjectPrototype(ref, proto, metaId, descriptor.proto);
      Object.setPrototypeOf(object, proto);
    }
    function proxyFunctionProperties(remoteMemberFunction, metaId, name3) {
      let loaded = false;
      const loadRemoteProperties = () => {
        if (loaded)
          return;
        loaded = true;
        const command = "REMOTE_BROWSER_MEMBER_GET";
        const meta = electron_1.ipcRenderer.sendSync(command, contextId, metaId, name3);
        setObjectMembers(remoteMemberFunction, remoteMemberFunction, meta.id, meta.members);
      };
      return new Proxy(remoteMemberFunction, {
        set: (target, property, value) => {
          if (property !== "ref")
            loadRemoteProperties();
          target[property] = value;
          return true;
        },
        get: (target, property) => {
          if (property === IS_REMOTE_PROXY)
            return true;
          if (!Object.prototype.hasOwnProperty.call(target, property))
            loadRemoteProperties();
          const value = target[property];
          if (property === "toString" && typeof value === "function") {
            return value.bind(target);
          }
          return value;
        },
        ownKeys: (target) => {
          loadRemoteProperties();
          return Object.getOwnPropertyNames(target);
        },
        getOwnPropertyDescriptor: (target, property) => {
          const descriptor = Object.getOwnPropertyDescriptor(target, property);
          if (descriptor)
            return descriptor;
          loadRemoteProperties();
          return Object.getOwnPropertyDescriptor(target, property);
        }
      });
    }
    function metaToValue(meta) {
      if (!meta)
        return {};
      if (meta.type === "value") {
        return meta.value;
      } else if (meta.type === "array") {
        return meta.members.map((member) => metaToValue(member));
      } else if (meta.type === "nativeimage") {
        return type_utils_1.deserialize(meta.value);
      } else if (meta.type === "buffer") {
        return Buffer.from(meta.value.buffer, meta.value.byteOffset, meta.value.byteLength);
      } else if (meta.type === "promise") {
        return Promise2.resolve({ then: metaToValue(meta.then) });
      } else if (meta.type === "error") {
        return metaToError(meta);
      } else if (meta.type === "exception") {
        if (meta.value.type === "error") {
          throw metaToError(meta.value);
        } else {
          throw new Error(`Unexpected value type in exception: ${meta.value.type}`);
        }
      } else {
        let ret;
        if ("id" in meta) {
          const cached = getCachedRemoteObject(meta.id);
          if (cached !== void 0) {
            return cached;
          }
        }
        if (meta.type === "function") {
          const remoteFunction = function(...args) {
            let command;
            if (this && this.constructor === remoteFunction) {
              command = "REMOTE_BROWSER_CONSTRUCTOR";
            } else {
              command = "REMOTE_BROWSER_FUNCTION_CALL";
            }
            const obj = electron_1.ipcRenderer.sendSync(command, contextId, meta.id, wrapArgs(args));
            return metaToValue(obj);
          };
          ret = remoteFunction;
        } else {
          ret = {};
        }
        setObjectMembers(ret, ret, meta.id, meta.members);
        setObjectPrototype(ret, ret, meta.id, meta.proto);
        if (ret.constructor && ret.constructor[IS_REMOTE_PROXY]) {
          Object.defineProperty(ret.constructor, "name", { value: meta.name });
        }
        electronIds.set(ret, meta.id);
        setCachedRemoteObject(meta.id, ret);
        return ret;
      }
    }
    function metaToError(meta) {
      const obj = meta.value;
      for (const { name: name3, value } of meta.members) {
        obj[name3] = metaToValue(value);
      }
      return obj;
    }
    function hasSenderId(input) {
      return typeof input.senderId === "number";
    }
    function handleMessage(channel, handler) {
      electron_1.ipcRenderer.on(channel, (event, passedContextId, id, ...args) => {
        if (hasSenderId(event)) {
          if (event.senderId !== 0 && event.senderId !== void 0) {
            console.error(`Message ${channel} sent by unexpected WebContents (${event.senderId})`);
            return;
          }
        }
        if (passedContextId === contextId) {
          handler(id, ...args);
        } else {
          electron_1.ipcRenderer.send("REMOTE_BROWSER_WRONG_CONTEXT_ERROR", contextId, passedContextId, id);
        }
      });
    }
    var enableStacks = process.argv.includes("--enable-api-filtering-logging");
    function getCurrentStack() {
      const target = { stack: void 0 };
      if (enableStacks) {
        Error.captureStackTrace(target, getCurrentStack);
      }
      return target.stack;
    }
    handleMessage("REMOTE_RENDERER_CALLBACK", (id, args) => {
      callbacksRegistry.apply(id, metaToValue(args));
    });
    handleMessage("REMOTE_RENDERER_RELEASE_CALLBACK", (id) => {
      callbacksRegistry.remove(id);
    });
    exports.require = (module3) => {
      const command = "REMOTE_BROWSER_REQUIRE";
      const meta = electron_1.ipcRenderer.sendSync(command, contextId, module3, getCurrentStack());
      return metaToValue(meta);
    };
    function getBuiltin(module3) {
      const command = "REMOTE_BROWSER_GET_BUILTIN";
      const meta = electron_1.ipcRenderer.sendSync(command, contextId, module3, getCurrentStack());
      return metaToValue(meta);
    }
    exports.getBuiltin = getBuiltin;
    function getCurrentWindow() {
      const command = "REMOTE_BROWSER_GET_CURRENT_WINDOW";
      const meta = electron_1.ipcRenderer.sendSync(command, contextId, getCurrentStack());
      return metaToValue(meta);
    }
    exports.getCurrentWindow = getCurrentWindow;
    function getCurrentWebContents() {
      const command = "REMOTE_BROWSER_GET_CURRENT_WEB_CONTENTS";
      const meta = electron_1.ipcRenderer.sendSync(command, contextId, getCurrentStack());
      return metaToValue(meta);
    }
    exports.getCurrentWebContents = getCurrentWebContents;
    function getGlobal(name3) {
      const command = "REMOTE_BROWSER_GET_GLOBAL";
      const meta = electron_1.ipcRenderer.sendSync(command, contextId, name3, getCurrentStack());
      return metaToValue(meta);
    }
    exports.getGlobal = getGlobal;
    Object.defineProperty(exports, "process", {
      enumerable: true,
      get: () => exports.getGlobal("process")
    });
    function createFunctionWithReturnValue(returnValue) {
      const func = () => returnValue;
      isReturnValue.add(func);
      return func;
    }
    exports.createFunctionWithReturnValue = createFunctionWithReturnValue;
    var addBuiltinProperty = (name3) => {
      Object.defineProperty(exports, name3, {
        enumerable: true,
        get: () => exports.getBuiltin(name3)
      });
    };
    module_names_1.browserModuleNames.forEach(addBuiltinProperty);
  }
});

// node_modules/@electron/remote/dist/src/renderer/index.js
var require_renderer = __commonJS({
  "node_modules/@electron/remote/dist/src/renderer/index.js"(exports) {
    "use strict";
    var __createBinding = exports && exports.__createBinding || (Object.create ? function(o, m, k, k2) {
      if (k2 === void 0) k2 = k;
      Object.defineProperty(o, k2, { enumerable: true, get: function() {
        return m[k];
      } });
    } : function(o, m, k, k2) {
      if (k2 === void 0) k2 = k;
      o[k2] = m[k];
    });
    var __exportStar = exports && exports.__exportStar || function(m, exports2) {
      for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports2, p)) __createBinding(exports2, m, p);
    };
    Object.defineProperty(exports, "__esModule", { value: true });
    if (process.type === "browser")
      throw new Error(`"@electron/remote" cannot be required in the browser process. Instead require("@electron/remote/main").`);
    __exportStar(require_remote(), exports);
  }
});

// node_modules/@electron/remote/renderer/index.js
var require_renderer2 = __commonJS({
  "node_modules/@electron/remote/renderer/index.js"(exports, module2) {
    module2.exports = require_renderer();
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => TaskSyncerPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian6 = require("obsidian");
var fs2 = __toESM(require("fs"));
var dotenv = __toESM(require_main());
var path2 = __toESM(require("path"));

// src/setting.ts
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  selectedTaskListId: "",
  taskLists: [],
  clientId: "",
  clientSecret: "",
  redirectUrl: "http://localhost:5000"
};
var MyTodoSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
    this.settings = plugin.settings;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Microsoft To\u2011Do Settings" });
    new import_obsidian.Setting(containerEl).setName("Client Details").setDesc(
      "Enter the client ID and client secret of your Azure AD app."
    ).addText(
      (text) => text.setPlaceholder("Client ID").setValue(this.plugin.settings.clientId).onChange(async (value) => {
        this.plugin.settings.clientId = value;
        await this.plugin.saveSettings();
      })
    ).addText(
      (text) => text.setPlaceholder("Client Secret").setValue(this.plugin.settings.clientSecret).onChange(async (value) => {
        this.plugin.settings.clientSecret = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Redirect URL").setDesc("Enter the URL to redirect to after authentication.").addText(
      (text) => text.setPlaceholder("http://localhost:5000").setValue(this.plugin.settings.redirectUrl).onChange(async (value) => {
        this.plugin.settings.redirectUrl = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Get Task Lists").setDesc("Click to get the list of available task lists.").addButton((button) => {
      button.setButtonText("Get Task Lists").onClick(async () => {
        await this.plugin.loadAvailableTaskLists();
        this.display();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Task List").setDesc(
      "Select the Microsoft To\u2011Do list to store your Obsidian tasks."
    ).addDropdown((drop) => {
      drop.addOption("", "Select a task list");
      if (this.settings.taskLists.length > 0) {
        this.settings.taskLists.forEach((list) => {
          drop.addOption(list.id, list.title);
        });
      } else {
        drop.addOption("none", "No task lists available");
      }
      drop.setValue(this.settings.selectedTaskListId);
      drop.onChange(async (value) => {
        this.settings.selectedTaskListId = value;
        await this.plugin.saveSettings();
      });
    });
  }
};

// src/right-sidebar-view.ts
var import_obsidian2 = require("obsidian");
var VIEW_TYPE_TODO_SIDEBAR = "tasks-syncer-sidebar";
var TaskSidebarView = class extends import_obsidian2.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.plugin = plugin;
  }
  getViewType() {
    return VIEW_TYPE_TODO_SIDEBAR;
  }
  getDisplayText() {
    return "To-Do Tasks";
  }
  async onOpen() {
    const tasks = await this.plugin.refreshTaskCache();
    await this.render(tasks);
  }
  async render(tasks) {
    const container = this.containerEl.children[1];
    container.empty();
    const refreshBtn = container.createEl("button", {
      text: "Refresh Tasks"
    });
    refreshBtn.onclick = () => this.render(tasks);
    container.createEl("h3", { text: "Tasks" });
    if (tasks.size === 0) {
      container.createEl("p", {
        text: "No tasks found or not authenticated."
      });
      return;
    }
    Array.from(tasks.values()).sort((a, b) => {
      if (a.status === "completed" && b.status !== "completed")
        return 1;
      if (a.status !== "completed" && b.status === "completed")
        return -1;
      return 0;
    }).forEach((task) => {
      const line = container.createEl("div", { cls: "task-line" });
      const checkbox = line.createEl("input", {
        type: "checkbox"
      });
      checkbox.checked = task.status === "completed";
      checkbox.disabled = true;
      line.createEl("span", {
        text: task.title
      });
    });
  }
  async onClose() {
  }
};

// src/api.ts
var import_obsidian3 = require("obsidian");
async function fetchTasks(settings, accessToken) {
  const tasks = /* @__PURE__ */ new Map();
  const response = await (0, import_obsidian3.requestUrl)({
    url: `https://graph.microsoft.com/v1.0/me/todo/lists/${settings.selectedTaskListId}/tasks`,
    method: "GET",
    headers: { Authorization: `Bearer ${accessToken}` }
  });
  if (response.status !== 200) {
    throw new Error("Failed to fetch tasks: " + response.text);
  }
  const data = response.json;
  if (data.value && Array.isArray(data.value)) {
    for (const task of data.value) {
      const title = task.title.trim();
      tasks.set(title, { title, status: task.status, id: task.id });
    }
  }
  return tasks;
}
async function createTask(settings, accessToken, taskTitle, status = "notStarted") {
  const response = await (0, import_obsidian3.requestUrl)({
    url: `https://graph.microsoft.com/v1.0/me/todo/lists/${settings.selectedTaskListId}/tasks`,
    method: "POST",
    headers: {
      Authorization: `Bearer ${accessToken}`,
      "Content-Type": "application/json"
    },
    body: JSON.stringify({
      title: taskTitle,
      status
    })
  });
  if (response.status !== 201) {
    throw new Error(`Failed to create task: ${response.text}`);
  }
}
async function updateTask(settings, accessToken, taskId, complete) {
  const newStatus = complete ? "completed" : "notStarted";
  const response = await (0, import_obsidian3.requestUrl)({
    url: `https://graph.microsoft.com/v1.0/me/todo/lists/${settings.selectedTaskListId}/tasks/${taskId}`,
    method: "PATCH",
    headers: {
      Authorization: `Bearer ${accessToken}`,
      "Content-Type": "application/json"
    },
    body: JSON.stringify({ status: newStatus })
  });
  if (response.status !== 200) {
    throw new Error(`Failed to update task: ${response.text}`);
  }
}
async function fetchTaskLists(accessToken) {
  const response = await (0, import_obsidian3.requestUrl)({
    url: "https://graph.microsoft.com/v1.0/me/todo/lists",
    method: "GET",
    headers: { Authorization: `Bearer ${accessToken}` }
  });
  if (response.status !== 200) {
    throw new Error("Failed to fetch task lists: " + response.text);
  }
  const data = response.json;
  const taskLists = new Array();
  console.log("Task lists data:", data);
  if (data.value && Array.isArray(data.value)) {
    for (const list of data.value) {
      taskLists.push({ title: list.displayName, id: list.id });
    }
  }
  return taskLists;
}
async function deleteTask(settings, accessToken, taskId) {
  const response = await (0, import_obsidian3.requestUrl)({
    url: `https://graph.microsoft.com/v1.0/me/todo/lists/${settings.selectedTaskListId}/tasks/${taskId}`,
    method: "DELETE",
    headers: {
      Authorization: `Bearer ${accessToken}`,
      "Content-Type": "application/json"
    }
  });
  if (response.status !== 204) {
    throw new Error(`Failed to delete task: ${response.text}`);
  }
}

// node_modules/@azure/msal-node/dist/cache/serializer/Serializer.mjs
var Serializer = class {
  /**
   * serialize the JSON blob
   * @param data - JSON blob cache
   */
  static serializeJSONBlob(data) {
    return JSON.stringify(data);
  }
  /**
   * Serialize Accounts
   * @param accCache - cache of accounts
   */
  static serializeAccounts(accCache) {
    const accounts = {};
    Object.keys(accCache).map(function(key) {
      var _a;
      const accountEntity = accCache[key];
      accounts[key] = {
        home_account_id: accountEntity.homeAccountId,
        environment: accountEntity.environment,
        realm: accountEntity.realm,
        local_account_id: accountEntity.localAccountId,
        username: accountEntity.username,
        authority_type: accountEntity.authorityType,
        name: accountEntity.name,
        client_info: accountEntity.clientInfo,
        last_modification_time: accountEntity.lastModificationTime,
        last_modification_app: accountEntity.lastModificationApp,
        tenantProfiles: (_a = accountEntity.tenantProfiles) == null ? void 0 : _a.map((tenantProfile) => {
          return JSON.stringify(tenantProfile);
        })
      };
    });
    return accounts;
  }
  /**
   * Serialize IdTokens
   * @param idTCache - cache of ID tokens
   */
  static serializeIdTokens(idTCache) {
    const idTokens = {};
    Object.keys(idTCache).map(function(key) {
      const idTEntity = idTCache[key];
      idTokens[key] = {
        home_account_id: idTEntity.homeAccountId,
        environment: idTEntity.environment,
        credential_type: idTEntity.credentialType,
        client_id: idTEntity.clientId,
        secret: idTEntity.secret,
        realm: idTEntity.realm
      };
    });
    return idTokens;
  }
  /**
   * Serializes AccessTokens
   * @param atCache - cache of access tokens
   */
  static serializeAccessTokens(atCache) {
    const accessTokens = {};
    Object.keys(atCache).map(function(key) {
      const atEntity = atCache[key];
      accessTokens[key] = {
        home_account_id: atEntity.homeAccountId,
        environment: atEntity.environment,
        credential_type: atEntity.credentialType,
        client_id: atEntity.clientId,
        secret: atEntity.secret,
        realm: atEntity.realm,
        target: atEntity.target,
        cached_at: atEntity.cachedAt,
        expires_on: atEntity.expiresOn,
        extended_expires_on: atEntity.extendedExpiresOn,
        refresh_on: atEntity.refreshOn,
        key_id: atEntity.keyId,
        token_type: atEntity.tokenType,
        requestedClaims: atEntity.requestedClaims,
        requestedClaimsHash: atEntity.requestedClaimsHash,
        userAssertionHash: atEntity.userAssertionHash
      };
    });
    return accessTokens;
  }
  /**
   * Serialize refreshTokens
   * @param rtCache - cache of refresh tokens
   */
  static serializeRefreshTokens(rtCache) {
    const refreshTokens = {};
    Object.keys(rtCache).map(function(key) {
      const rtEntity = rtCache[key];
      refreshTokens[key] = {
        home_account_id: rtEntity.homeAccountId,
        environment: rtEntity.environment,
        credential_type: rtEntity.credentialType,
        client_id: rtEntity.clientId,
        secret: rtEntity.secret,
        family_id: rtEntity.familyId,
        target: rtEntity.target,
        realm: rtEntity.realm
      };
    });
    return refreshTokens;
  }
  /**
   * Serialize amdtCache
   * @param amdtCache - cache of app metadata
   */
  static serializeAppMetadata(amdtCache) {
    const appMetadata = {};
    Object.keys(amdtCache).map(function(key) {
      const amdtEntity = amdtCache[key];
      appMetadata[key] = {
        client_id: amdtEntity.clientId,
        environment: amdtEntity.environment,
        family_id: amdtEntity.familyId
      };
    });
    return appMetadata;
  }
  /**
   * Serialize the cache
   * @param inMemCache - itemised cache read from the JSON
   */
  static serializeAllCache(inMemCache) {
    return {
      Account: this.serializeAccounts(inMemCache.accounts),
      IdToken: this.serializeIdTokens(inMemCache.idTokens),
      AccessToken: this.serializeAccessTokens(inMemCache.accessTokens),
      RefreshToken: this.serializeRefreshTokens(inMemCache.refreshTokens),
      AppMetadata: this.serializeAppMetadata(inMemCache.appMetadata)
    };
  }
};

// node_modules/@azure/msal-common/dist/utils/Constants.mjs
var Constants = {
  LIBRARY_NAME: "MSAL.JS",
  SKU: "msal.js.common",
  // Prefix for all library cache entries
  CACHE_PREFIX: "msal",
  // default authority
  DEFAULT_AUTHORITY: "https://login.microsoftonline.com/common/",
  DEFAULT_AUTHORITY_HOST: "login.microsoftonline.com",
  DEFAULT_COMMON_TENANT: "common",
  // ADFS String
  ADFS: "adfs",
  DSTS: "dstsv2",
  // Default AAD Instance Discovery Endpoint
  AAD_INSTANCE_DISCOVERY_ENDPT: "https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",
  // CIAM URL
  CIAM_AUTH_URL: ".ciamlogin.com",
  AAD_TENANT_DOMAIN_SUFFIX: ".onmicrosoft.com",
  // Resource delimiter - used for certain cache entries
  RESOURCE_DELIM: "|",
  // Placeholder for non-existent account ids/objects
  NO_ACCOUNT: "NO_ACCOUNT",
  // Claims
  CLAIMS: "claims",
  // Consumer UTID
  CONSUMER_UTID: "9188040d-6c67-4c5b-b112-36a304b66dad",
  // Default scopes
  OPENID_SCOPE: "openid",
  PROFILE_SCOPE: "profile",
  OFFLINE_ACCESS_SCOPE: "offline_access",
  EMAIL_SCOPE: "email",
  CODE_GRANT_TYPE: "authorization_code",
  RT_GRANT_TYPE: "refresh_token",
  S256_CODE_CHALLENGE_METHOD: "S256",
  URL_FORM_CONTENT_TYPE: "application/x-www-form-urlencoded;charset=utf-8",
  AUTHORIZATION_PENDING: "authorization_pending",
  NOT_DEFINED: "not_defined",
  EMPTY_STRING: "",
  NOT_APPLICABLE: "N/A",
  NOT_AVAILABLE: "Not Available",
  FORWARD_SLASH: "/",
  IMDS_ENDPOINT: "http://169.254.169.254/metadata/instance/compute/location",
  IMDS_VERSION: "2020-06-01",
  IMDS_TIMEOUT: 2e3,
  AZURE_REGION_AUTO_DISCOVER_FLAG: "TryAutoDetect",
  REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX: "login.microsoft.com",
  KNOWN_PUBLIC_CLOUDS: [
    "login.microsoftonline.com",
    "login.windows.net",
    "login.microsoft.com",
    "sts.windows.net"
  ],
  SHR_NONCE_VALIDITY: 240,
  INVALID_INSTANCE: "invalid_instance"
};
var HttpStatus = {
  SUCCESS: 200,
  SUCCESS_RANGE_START: 200,
  SUCCESS_RANGE_END: 299,
  REDIRECT: 302,
  CLIENT_ERROR: 400,
  CLIENT_ERROR_RANGE_START: 400,
  BAD_REQUEST: 400,
  UNAUTHORIZED: 401,
  NOT_FOUND: 404,
  REQUEST_TIMEOUT: 408,
  TOO_MANY_REQUESTS: 429,
  CLIENT_ERROR_RANGE_END: 499,
  SERVER_ERROR: 500,
  SERVER_ERROR_RANGE_START: 500,
  SERVICE_UNAVAILABLE: 503,
  GATEWAY_TIMEOUT: 504,
  SERVER_ERROR_RANGE_END: 599,
  MULTI_SIDED_ERROR: 600
};
var OIDC_DEFAULT_SCOPES = [
  Constants.OPENID_SCOPE,
  Constants.PROFILE_SCOPE,
  Constants.OFFLINE_ACCESS_SCOPE
];
var OIDC_SCOPES = [...OIDC_DEFAULT_SCOPES, Constants.EMAIL_SCOPE];
var HeaderNames = {
  CONTENT_TYPE: "Content-Type",
  CONTENT_LENGTH: "Content-Length",
  RETRY_AFTER: "Retry-After",
  CCS_HEADER: "X-AnchorMailbox",
  WWWAuthenticate: "WWW-Authenticate",
  AuthenticationInfo: "Authentication-Info",
  X_MS_REQUEST_ID: "x-ms-request-id",
  X_MS_HTTP_VERSION: "x-ms-httpver"
};
var AADAuthorityConstants = {
  COMMON: "common",
  ORGANIZATIONS: "organizations",
  CONSUMERS: "consumers"
};
var ClaimsRequestKeys = {
  ACCESS_TOKEN: "access_token",
  XMS_CC: "xms_cc"
};
var PromptValue = {
  LOGIN: "login",
  SELECT_ACCOUNT: "select_account",
  CONSENT: "consent",
  NONE: "none",
  CREATE: "create",
  NO_SESSION: "no_session"
};
var CodeChallengeMethodValues = {
  PLAIN: "plain",
  S256: "S256"
};
var OAuthResponseType = {
  CODE: "code",
  IDTOKEN_TOKEN: "id_token token",
  IDTOKEN_TOKEN_REFRESHTOKEN: "id_token token refresh_token"
};
var ResponseMode = {
  QUERY: "query",
  FRAGMENT: "fragment",
  FORM_POST: "form_post"
};
var GrantType = {
  IMPLICIT_GRANT: "implicit",
  AUTHORIZATION_CODE_GRANT: "authorization_code",
  CLIENT_CREDENTIALS_GRANT: "client_credentials",
  RESOURCE_OWNER_PASSWORD_GRANT: "password",
  REFRESH_TOKEN_GRANT: "refresh_token",
  DEVICE_CODE_GRANT: "device_code",
  JWT_BEARER: "urn:ietf:params:oauth:grant-type:jwt-bearer"
};
var CacheAccountType = {
  MSSTS_ACCOUNT_TYPE: "MSSTS",
  ADFS_ACCOUNT_TYPE: "ADFS",
  MSAV1_ACCOUNT_TYPE: "MSA",
  GENERIC_ACCOUNT_TYPE: "Generic"
  // NTLM, Kerberos, FBA, Basic etc
};
var Separators = {
  CACHE_KEY_SEPARATOR: "-",
  CLIENT_INFO_SEPARATOR: "."
};
var CredentialType = {
  ID_TOKEN: "IdToken",
  ACCESS_TOKEN: "AccessToken",
  ACCESS_TOKEN_WITH_AUTH_SCHEME: "AccessToken_With_AuthScheme",
  REFRESH_TOKEN: "RefreshToken"
};
var APP_METADATA = "appmetadata";
var CLIENT_INFO = "client_info";
var THE_FAMILY_ID = "1";
var AUTHORITY_METADATA_CONSTANTS = {
  CACHE_KEY: "authority-metadata",
  REFRESH_TIME_SECONDS: 3600 * 24
  // 24 Hours
};
var AuthorityMetadataSource = {
  CONFIG: "config",
  CACHE: "cache",
  NETWORK: "network",
  HARDCODED_VALUES: "hardcoded_values"
};
var SERVER_TELEM_CONSTANTS = {
  SCHEMA_VERSION: 5,
  MAX_CUR_HEADER_BYTES: 80,
  MAX_LAST_HEADER_BYTES: 330,
  MAX_CACHED_ERRORS: 50,
  CACHE_KEY: "server-telemetry",
  CATEGORY_SEPARATOR: "|",
  VALUE_SEPARATOR: ",",
  OVERFLOW_TRUE: "1",
  OVERFLOW_FALSE: "0",
  UNKNOWN_ERROR: "unknown_error"
};
var AuthenticationScheme = {
  BEARER: "Bearer",
  POP: "pop",
  SSH: "ssh-cert"
};
var ThrottlingConstants = {
  // Default time to throttle RequestThumbprint in seconds
  DEFAULT_THROTTLE_TIME_SECONDS: 60,
  // Default maximum time to throttle in seconds, overrides what the server sends back
  DEFAULT_MAX_THROTTLE_TIME_SECONDS: 3600,
  // Prefix for storing throttling entries
  THROTTLING_PREFIX: "throttling",
  // Value assigned to the x-ms-lib-capability header to indicate to the server the library supports throttling
  X_MS_LIB_CAPABILITY_VALUE: "retry-after, h429"
};
var Errors = {
  INVALID_GRANT_ERROR: "invalid_grant",
  CLIENT_MISMATCH_ERROR: "client_mismatch"
};
var PasswordGrantConstants = {
  username: "username",
  password: "password"
};
var ResponseCodes = {
  httpSuccess: 200,
  httpBadRequest: 400
};
var RegionDiscoverySources = {
  FAILED_AUTO_DETECTION: "1",
  INTERNAL_CACHE: "2",
  ENVIRONMENT_VARIABLE: "3",
  IMDS: "4"
};
var RegionDiscoveryOutcomes = {
  CONFIGURED_MATCHES_DETECTED: "1",
  CONFIGURED_NO_AUTO_DETECTION: "2",
  CONFIGURED_NOT_DETECTED: "3",
  AUTO_DETECTION_REQUESTED_SUCCESSFUL: "4",
  AUTO_DETECTION_REQUESTED_FAILED: "5"
};
var CacheOutcome = {
  // When a token is found in the cache or the cache is not supposed to be hit when making the request
  NOT_APPLICABLE: "0",
  // When the token request goes to the identity provider because force_refresh was set to true. Also occurs if claims were requested
  FORCE_REFRESH_OR_CLAIMS: "1",
  // When the token request goes to the identity provider because no cached access token exists
  NO_CACHED_ACCESS_TOKEN: "2",
  // When the token request goes to the identity provider because cached access token expired
  CACHED_ACCESS_TOKEN_EXPIRED: "3",
  // When the token request goes to the identity provider because refresh_in was used and the existing token needs to be refreshed
  PROACTIVELY_REFRESHED: "4"
};
var DEFAULT_TOKEN_RENEWAL_OFFSET_SEC = 300;

// node_modules/@azure/msal-common/dist/error/AuthErrorCodes.mjs
var unexpectedError = "unexpected_error";
var postRequestFailed = "post_request_failed";

// node_modules/@azure/msal-common/dist/error/AuthError.mjs
var AuthErrorMessages = {
  [unexpectedError]: "Unexpected error in authentication.",
  [postRequestFailed]: "Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."
};
var AuthErrorMessage = {
  unexpectedError: {
    code: unexpectedError,
    desc: AuthErrorMessages[unexpectedError]
  },
  postRequestFailed: {
    code: postRequestFailed,
    desc: AuthErrorMessages[postRequestFailed]
  }
};
var AuthError = class _AuthError extends Error {
  constructor(errorCode, errorMessage, suberror) {
    const errorString = errorMessage ? `${errorCode}: ${errorMessage}` : errorCode;
    super(errorString);
    Object.setPrototypeOf(this, _AuthError.prototype);
    this.errorCode = errorCode || Constants.EMPTY_STRING;
    this.errorMessage = errorMessage || Constants.EMPTY_STRING;
    this.subError = suberror || Constants.EMPTY_STRING;
    this.name = "AuthError";
  }
  setCorrelationId(correlationId) {
    this.correlationId = correlationId;
  }
};

// node_modules/@azure/msal-common/dist/error/ClientAuthErrorCodes.mjs
var ClientAuthErrorCodes_exports = {};
__export(ClientAuthErrorCodes_exports, {
  authTimeNotFound: () => authTimeNotFound,
  authorizationCodeMissingFromServerResponse: () => authorizationCodeMissingFromServerResponse,
  bindingKeyNotRemoved: () => bindingKeyNotRemoved,
  cannotAppendScopeSet: () => cannotAppendScopeSet,
  cannotRemoveEmptyScope: () => cannotRemoveEmptyScope,
  clientInfoDecodingError: () => clientInfoDecodingError,
  clientInfoEmptyError: () => clientInfoEmptyError,
  deviceCodeExpired: () => deviceCodeExpired,
  deviceCodePollingCancelled: () => deviceCodePollingCancelled,
  deviceCodeUnknownError: () => deviceCodeUnknownError,
  emptyInputScopeSet: () => emptyInputScopeSet,
  endSessionEndpointNotSupported: () => endSessionEndpointNotSupported,
  endpointResolutionError: () => endpointResolutionError,
  hashNotDeserialized: () => hashNotDeserialized,
  invalidAssertion: () => invalidAssertion,
  invalidCacheEnvironment: () => invalidCacheEnvironment,
  invalidCacheRecord: () => invalidCacheRecord,
  invalidClientCredential: () => invalidClientCredential,
  invalidState: () => invalidState,
  keyIdMissing: () => keyIdMissing,
  maxAgeTranspired: () => maxAgeTranspired,
  methodNotImplemented: () => methodNotImplemented,
  missingTenantIdError: () => missingTenantIdError,
  multipleMatchingAccounts: () => multipleMatchingAccounts,
  multipleMatchingAppMetadata: () => multipleMatchingAppMetadata,
  multipleMatchingTokens: () => multipleMatchingTokens,
  nestedAppAuthBridgeDisabled: () => nestedAppAuthBridgeDisabled,
  networkError: () => networkError,
  noAccountFound: () => noAccountFound,
  noAccountInSilentRequest: () => noAccountInSilentRequest,
  noCryptoObject: () => noCryptoObject,
  noNetworkConnectivity: () => noNetworkConnectivity,
  nonceMismatch: () => nonceMismatch,
  nullOrEmptyToken: () => nullOrEmptyToken,
  openIdConfigError: () => openIdConfigError,
  requestCannotBeMade: () => requestCannotBeMade,
  stateMismatch: () => stateMismatch,
  stateNotFound: () => stateNotFound,
  tokenClaimsCnfRequiredForSignedJwt: () => tokenClaimsCnfRequiredForSignedJwt,
  tokenParsingError: () => tokenParsingError,
  tokenRefreshRequired: () => tokenRefreshRequired,
  unexpectedCredentialType: () => unexpectedCredentialType,
  userCanceled: () => userCanceled,
  userTimeoutReached: () => userTimeoutReached
});
var clientInfoDecodingError = "client_info_decoding_error";
var clientInfoEmptyError = "client_info_empty_error";
var tokenParsingError = "token_parsing_error";
var nullOrEmptyToken = "null_or_empty_token";
var endpointResolutionError = "endpoints_resolution_error";
var networkError = "network_error";
var openIdConfigError = "openid_config_error";
var hashNotDeserialized = "hash_not_deserialized";
var invalidState = "invalid_state";
var stateMismatch = "state_mismatch";
var stateNotFound = "state_not_found";
var nonceMismatch = "nonce_mismatch";
var authTimeNotFound = "auth_time_not_found";
var maxAgeTranspired = "max_age_transpired";
var multipleMatchingTokens = "multiple_matching_tokens";
var multipleMatchingAccounts = "multiple_matching_accounts";
var multipleMatchingAppMetadata = "multiple_matching_appMetadata";
var requestCannotBeMade = "request_cannot_be_made";
var cannotRemoveEmptyScope = "cannot_remove_empty_scope";
var cannotAppendScopeSet = "cannot_append_scopeset";
var emptyInputScopeSet = "empty_input_scopeset";
var deviceCodePollingCancelled = "device_code_polling_cancelled";
var deviceCodeExpired = "device_code_expired";
var deviceCodeUnknownError = "device_code_unknown_error";
var noAccountInSilentRequest = "no_account_in_silent_request";
var invalidCacheRecord = "invalid_cache_record";
var invalidCacheEnvironment = "invalid_cache_environment";
var noAccountFound = "no_account_found";
var noCryptoObject = "no_crypto_object";
var unexpectedCredentialType = "unexpected_credential_type";
var invalidAssertion = "invalid_assertion";
var invalidClientCredential = "invalid_client_credential";
var tokenRefreshRequired = "token_refresh_required";
var userTimeoutReached = "user_timeout_reached";
var tokenClaimsCnfRequiredForSignedJwt = "token_claims_cnf_required_for_signedjwt";
var authorizationCodeMissingFromServerResponse = "authorization_code_missing_from_server_response";
var bindingKeyNotRemoved = "binding_key_not_removed";
var endSessionEndpointNotSupported = "end_session_endpoint_not_supported";
var keyIdMissing = "key_id_missing";
var noNetworkConnectivity = "no_network_connectivity";
var userCanceled = "user_canceled";
var missingTenantIdError = "missing_tenant_id_error";
var methodNotImplemented = "method_not_implemented";
var nestedAppAuthBridgeDisabled = "nested_app_auth_bridge_disabled";

// node_modules/@azure/msal-common/dist/error/ClientAuthError.mjs
var ClientAuthErrorMessages = {
  [clientInfoDecodingError]: "The client info could not be parsed/decoded correctly",
  [clientInfoEmptyError]: "The client info was empty",
  [tokenParsingError]: "Token cannot be parsed",
  [nullOrEmptyToken]: "The token is null or empty",
  [endpointResolutionError]: "Endpoints cannot be resolved",
  [networkError]: "Network request failed",
  [openIdConfigError]: "Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",
  [hashNotDeserialized]: "The hash parameters could not be deserialized",
  [invalidState]: "State was not the expected format",
  [stateMismatch]: "State mismatch error",
  [stateNotFound]: "State not found",
  [nonceMismatch]: "Nonce mismatch error",
  [authTimeNotFound]: "Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",
  [maxAgeTranspired]: "Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",
  [multipleMatchingTokens]: "The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",
  [multipleMatchingAccounts]: "The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",
  [multipleMatchingAppMetadata]: "The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",
  [requestCannotBeMade]: "Token request cannot be made without authorization code or refresh token.",
  [cannotRemoveEmptyScope]: "Cannot remove null or empty scope from ScopeSet",
  [cannotAppendScopeSet]: "Cannot append ScopeSet",
  [emptyInputScopeSet]: "Empty input ScopeSet cannot be processed",
  [deviceCodePollingCancelled]: "Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",
  [deviceCodeExpired]: "Device code is expired.",
  [deviceCodeUnknownError]: "Device code stopped polling for unknown reasons.",
  [noAccountInSilentRequest]: "Please pass an account object, silent flow is not supported without account information",
  [invalidCacheRecord]: "Cache record object was null or undefined.",
  [invalidCacheEnvironment]: "Invalid environment when attempting to create cache entry",
  [noAccountFound]: "No account found in cache for given key.",
  [noCryptoObject]: "No crypto object detected.",
  [unexpectedCredentialType]: "Unexpected credential type.",
  [invalidAssertion]: "Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",
  [invalidClientCredential]: "Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",
  [tokenRefreshRequired]: "Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",
  [userTimeoutReached]: "User defined timeout for device code polling reached",
  [tokenClaimsCnfRequiredForSignedJwt]: "Cannot generate a POP jwt if the token_claims are not populated",
  [authorizationCodeMissingFromServerResponse]: "Server response does not contain an authorization code to proceed",
  [bindingKeyNotRemoved]: "Could not remove the credential's binding key from storage.",
  [endSessionEndpointNotSupported]: "The provided authority does not support logout",
  [keyIdMissing]: "A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",
  [noNetworkConnectivity]: "No network connectivity. Check your internet connection.",
  [userCanceled]: "User cancelled the flow.",
  [missingTenantIdError]: "A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",
  [methodNotImplemented]: "This method has not been implemented",
  [nestedAppAuthBridgeDisabled]: "The nested app auth bridge is disabled"
};
var ClientAuthErrorMessage = {
  clientInfoDecodingError: {
    code: clientInfoDecodingError,
    desc: ClientAuthErrorMessages[clientInfoDecodingError]
  },
  clientInfoEmptyError: {
    code: clientInfoEmptyError,
    desc: ClientAuthErrorMessages[clientInfoEmptyError]
  },
  tokenParsingError: {
    code: tokenParsingError,
    desc: ClientAuthErrorMessages[tokenParsingError]
  },
  nullOrEmptyToken: {
    code: nullOrEmptyToken,
    desc: ClientAuthErrorMessages[nullOrEmptyToken]
  },
  endpointResolutionError: {
    code: endpointResolutionError,
    desc: ClientAuthErrorMessages[endpointResolutionError]
  },
  networkError: {
    code: networkError,
    desc: ClientAuthErrorMessages[networkError]
  },
  unableToGetOpenidConfigError: {
    code: openIdConfigError,
    desc: ClientAuthErrorMessages[openIdConfigError]
  },
  hashNotDeserialized: {
    code: hashNotDeserialized,
    desc: ClientAuthErrorMessages[hashNotDeserialized]
  },
  invalidStateError: {
    code: invalidState,
    desc: ClientAuthErrorMessages[invalidState]
  },
  stateMismatchError: {
    code: stateMismatch,
    desc: ClientAuthErrorMessages[stateMismatch]
  },
  stateNotFoundError: {
    code: stateNotFound,
    desc: ClientAuthErrorMessages[stateNotFound]
  },
  nonceMismatchError: {
    code: nonceMismatch,
    desc: ClientAuthErrorMessages[nonceMismatch]
  },
  authTimeNotFoundError: {
    code: authTimeNotFound,
    desc: ClientAuthErrorMessages[authTimeNotFound]
  },
  maxAgeTranspired: {
    code: maxAgeTranspired,
    desc: ClientAuthErrorMessages[maxAgeTranspired]
  },
  multipleMatchingTokens: {
    code: multipleMatchingTokens,
    desc: ClientAuthErrorMessages[multipleMatchingTokens]
  },
  multipleMatchingAccounts: {
    code: multipleMatchingAccounts,
    desc: ClientAuthErrorMessages[multipleMatchingAccounts]
  },
  multipleMatchingAppMetadata: {
    code: multipleMatchingAppMetadata,
    desc: ClientAuthErrorMessages[multipleMatchingAppMetadata]
  },
  tokenRequestCannotBeMade: {
    code: requestCannotBeMade,
    desc: ClientAuthErrorMessages[requestCannotBeMade]
  },
  removeEmptyScopeError: {
    code: cannotRemoveEmptyScope,
    desc: ClientAuthErrorMessages[cannotRemoveEmptyScope]
  },
  appendScopeSetError: {
    code: cannotAppendScopeSet,
    desc: ClientAuthErrorMessages[cannotAppendScopeSet]
  },
  emptyInputScopeSetError: {
    code: emptyInputScopeSet,
    desc: ClientAuthErrorMessages[emptyInputScopeSet]
  },
  DeviceCodePollingCancelled: {
    code: deviceCodePollingCancelled,
    desc: ClientAuthErrorMessages[deviceCodePollingCancelled]
  },
  DeviceCodeExpired: {
    code: deviceCodeExpired,
    desc: ClientAuthErrorMessages[deviceCodeExpired]
  },
  DeviceCodeUnknownError: {
    code: deviceCodeUnknownError,
    desc: ClientAuthErrorMessages[deviceCodeUnknownError]
  },
  NoAccountInSilentRequest: {
    code: noAccountInSilentRequest,
    desc: ClientAuthErrorMessages[noAccountInSilentRequest]
  },
  invalidCacheRecord: {
    code: invalidCacheRecord,
    desc: ClientAuthErrorMessages[invalidCacheRecord]
  },
  invalidCacheEnvironment: {
    code: invalidCacheEnvironment,
    desc: ClientAuthErrorMessages[invalidCacheEnvironment]
  },
  noAccountFound: {
    code: noAccountFound,
    desc: ClientAuthErrorMessages[noAccountFound]
  },
  noCryptoObj: {
    code: noCryptoObject,
    desc: ClientAuthErrorMessages[noCryptoObject]
  },
  unexpectedCredentialType: {
    code: unexpectedCredentialType,
    desc: ClientAuthErrorMessages[unexpectedCredentialType]
  },
  invalidAssertion: {
    code: invalidAssertion,
    desc: ClientAuthErrorMessages[invalidAssertion]
  },
  invalidClientCredential: {
    code: invalidClientCredential,
    desc: ClientAuthErrorMessages[invalidClientCredential]
  },
  tokenRefreshRequired: {
    code: tokenRefreshRequired,
    desc: ClientAuthErrorMessages[tokenRefreshRequired]
  },
  userTimeoutReached: {
    code: userTimeoutReached,
    desc: ClientAuthErrorMessages[userTimeoutReached]
  },
  tokenClaimsRequired: {
    code: tokenClaimsCnfRequiredForSignedJwt,
    desc: ClientAuthErrorMessages[tokenClaimsCnfRequiredForSignedJwt]
  },
  noAuthorizationCodeFromServer: {
    code: authorizationCodeMissingFromServerResponse,
    desc: ClientAuthErrorMessages[authorizationCodeMissingFromServerResponse]
  },
  bindingKeyNotRemovedError: {
    code: bindingKeyNotRemoved,
    desc: ClientAuthErrorMessages[bindingKeyNotRemoved]
  },
  logoutNotSupported: {
    code: endSessionEndpointNotSupported,
    desc: ClientAuthErrorMessages[endSessionEndpointNotSupported]
  },
  keyIdMissing: {
    code: keyIdMissing,
    desc: ClientAuthErrorMessages[keyIdMissing]
  },
  noNetworkConnectivity: {
    code: noNetworkConnectivity,
    desc: ClientAuthErrorMessages[noNetworkConnectivity]
  },
  userCanceledError: {
    code: userCanceled,
    desc: ClientAuthErrorMessages[userCanceled]
  },
  missingTenantIdError: {
    code: missingTenantIdError,
    desc: ClientAuthErrorMessages[missingTenantIdError]
  },
  nestedAppAuthBridgeDisabled: {
    code: nestedAppAuthBridgeDisabled,
    desc: ClientAuthErrorMessages[nestedAppAuthBridgeDisabled]
  }
};
var ClientAuthError = class _ClientAuthError extends AuthError {
  constructor(errorCode, additionalMessage) {
    super(errorCode, additionalMessage ? `${ClientAuthErrorMessages[errorCode]}: ${additionalMessage}` : ClientAuthErrorMessages[errorCode]);
    this.name = "ClientAuthError";
    Object.setPrototypeOf(this, _ClientAuthError.prototype);
  }
};
function createClientAuthError(errorCode, additionalMessage) {
  return new ClientAuthError(errorCode, additionalMessage);
}

// node_modules/@azure/msal-common/dist/crypto/ICrypto.mjs
var DEFAULT_CRYPTO_IMPLEMENTATION = {
  createNewGuid: () => {
    throw createClientAuthError(methodNotImplemented);
  },
  base64Decode: () => {
    throw createClientAuthError(methodNotImplemented);
  },
  base64Encode: () => {
    throw createClientAuthError(methodNotImplemented);
  },
  base64UrlEncode: () => {
    throw createClientAuthError(methodNotImplemented);
  },
  encodeKid: () => {
    throw createClientAuthError(methodNotImplemented);
  },
  async getPublicKeyThumbprint() {
    throw createClientAuthError(methodNotImplemented);
  },
  async removeTokenBindingKey() {
    throw createClientAuthError(methodNotImplemented);
  },
  async clearKeystore() {
    throw createClientAuthError(methodNotImplemented);
  },
  async signJwt() {
    throw createClientAuthError(methodNotImplemented);
  },
  async hashString() {
    throw createClientAuthError(methodNotImplemented);
  }
};

// node_modules/@azure/msal-common/dist/logger/Logger.mjs
var LogLevel;
(function(LogLevel2) {
  LogLevel2[LogLevel2["Error"] = 0] = "Error";
  LogLevel2[LogLevel2["Warning"] = 1] = "Warning";
  LogLevel2[LogLevel2["Info"] = 2] = "Info";
  LogLevel2[LogLevel2["Verbose"] = 3] = "Verbose";
  LogLevel2[LogLevel2["Trace"] = 4] = "Trace";
})(LogLevel || (LogLevel = {}));
var Logger = class _Logger {
  constructor(loggerOptions, packageName, packageVersion) {
    this.level = LogLevel.Info;
    const defaultLoggerCallback = () => {
      return;
    };
    const setLoggerOptions = loggerOptions || _Logger.createDefaultLoggerOptions();
    this.localCallback = setLoggerOptions.loggerCallback || defaultLoggerCallback;
    this.piiLoggingEnabled = setLoggerOptions.piiLoggingEnabled || false;
    this.level = typeof setLoggerOptions.logLevel === "number" ? setLoggerOptions.logLevel : LogLevel.Info;
    this.correlationId = setLoggerOptions.correlationId || Constants.EMPTY_STRING;
    this.packageName = packageName || Constants.EMPTY_STRING;
    this.packageVersion = packageVersion || Constants.EMPTY_STRING;
  }
  static createDefaultLoggerOptions() {
    return {
      loggerCallback: () => {
      },
      piiLoggingEnabled: false,
      logLevel: LogLevel.Info
    };
  }
  /**
   * Create new Logger with existing configurations.
   */
  clone(packageName, packageVersion, correlationId) {
    return new _Logger({
      loggerCallback: this.localCallback,
      piiLoggingEnabled: this.piiLoggingEnabled,
      logLevel: this.level,
      correlationId: correlationId || this.correlationId
    }, packageName, packageVersion);
  }
  /**
   * Log message with required options.
   */
  logMessage(logMessage, options) {
    if (options.logLevel > this.level || !this.piiLoggingEnabled && options.containsPii) {
      return;
    }
    const timestamp = (/* @__PURE__ */ new Date()).toUTCString();
    const logHeader = `[${timestamp}] : [${options.correlationId || this.correlationId || ""}]`;
    const log = `${logHeader} : ${this.packageName}@${this.packageVersion} : ${LogLevel[options.logLevel]} - ${logMessage}`;
    this.executeCallback(options.logLevel, log, options.containsPii || false);
  }
  /**
   * Execute callback with message.
   */
  executeCallback(level, message, containsPii) {
    if (this.localCallback) {
      this.localCallback(level, message, containsPii);
    }
  }
  /**
   * Logs error messages.
   */
  error(message, correlationId) {
    this.logMessage(message, {
      logLevel: LogLevel.Error,
      containsPii: false,
      correlationId: correlationId || Constants.EMPTY_STRING
    });
  }
  /**
   * Logs error messages with PII.
   */
  errorPii(message, correlationId) {
    this.logMessage(message, {
      logLevel: LogLevel.Error,
      containsPii: true,
      correlationId: correlationId || Constants.EMPTY_STRING
    });
  }
  /**
   * Logs warning messages.
   */
  warning(message, correlationId) {
    this.logMessage(message, {
      logLevel: LogLevel.Warning,
      containsPii: false,
      correlationId: correlationId || Constants.EMPTY_STRING
    });
  }
  /**
   * Logs warning messages with PII.
   */
  warningPii(message, correlationId) {
    this.logMessage(message, {
      logLevel: LogLevel.Warning,
      containsPii: true,
      correlationId: correlationId || Constants.EMPTY_STRING
    });
  }
  /**
   * Logs info messages.
   */
  info(message, correlationId) {
    this.logMessage(message, {
      logLevel: LogLevel.Info,
      containsPii: false,
      correlationId: correlationId || Constants.EMPTY_STRING
    });
  }
  /**
   * Logs info messages with PII.
   */
  infoPii(message, correlationId) {
    this.logMessage(message, {
      logLevel: LogLevel.Info,
      containsPii: true,
      correlationId: correlationId || Constants.EMPTY_STRING
    });
  }
  /**
   * Logs verbose messages.
   */
  verbose(message, correlationId) {
    this.logMessage(message, {
      logLevel: LogLevel.Verbose,
      containsPii: false,
      correlationId: correlationId || Constants.EMPTY_STRING
    });
  }
  /**
   * Logs verbose messages with PII.
   */
  verbosePii(message, correlationId) {
    this.logMessage(message, {
      logLevel: LogLevel.Verbose,
      containsPii: true,
      correlationId: correlationId || Constants.EMPTY_STRING
    });
  }
  /**
   * Logs trace messages.
   */
  trace(message, correlationId) {
    this.logMessage(message, {
      logLevel: LogLevel.Trace,
      containsPii: false,
      correlationId: correlationId || Constants.EMPTY_STRING
    });
  }
  /**
   * Logs trace messages with PII.
   */
  tracePii(message, correlationId) {
    this.logMessage(message, {
      logLevel: LogLevel.Trace,
      containsPii: true,
      correlationId: correlationId || Constants.EMPTY_STRING
    });
  }
  /**
   * Returns whether PII Logging is enabled or not.
   */
  isPiiLoggingEnabled() {
    return this.piiLoggingEnabled || false;
  }
};

// node_modules/@azure/msal-common/dist/packageMetadata.mjs
var name = "@azure/msal-common";
var version = "15.4.0";

// node_modules/@azure/msal-common/dist/authority/AuthorityOptions.mjs
var AzureCloudInstance = {
  // AzureCloudInstance is not specified.
  None: "none",
  // Microsoft Azure public cloud
  AzurePublic: "https://login.microsoftonline.com",
  // Microsoft PPE
  AzurePpe: "https://login.windows-ppe.net",
  // Microsoft Chinese national/regional cloud
  AzureChina: "https://login.chinacloudapi.cn",
  // Microsoft German national/regional cloud ("Black Forest")
  AzureGermany: "https://login.microsoftonline.de",
  // US Government cloud
  AzureUsGovernment: "https://login.microsoftonline.us"
};

// node_modules/@azure/msal-common/dist/cache/utils/CacheHelpers.mjs
var CacheHelpers_exports = {};
__export(CacheHelpers_exports, {
  createAccessTokenEntity: () => createAccessTokenEntity,
  createIdTokenEntity: () => createIdTokenEntity,
  createRefreshTokenEntity: () => createRefreshTokenEntity,
  generateAppMetadataKey: () => generateAppMetadataKey,
  generateAuthorityMetadataExpiresAt: () => generateAuthorityMetadataExpiresAt,
  generateCredentialKey: () => generateCredentialKey,
  isAccessTokenEntity: () => isAccessTokenEntity,
  isAppMetadataEntity: () => isAppMetadataEntity,
  isAuthorityMetadataEntity: () => isAuthorityMetadataEntity,
  isAuthorityMetadataExpired: () => isAuthorityMetadataExpired,
  isCredentialEntity: () => isCredentialEntity,
  isIdTokenEntity: () => isIdTokenEntity,
  isRefreshTokenEntity: () => isRefreshTokenEntity,
  isServerTelemetryEntity: () => isServerTelemetryEntity,
  isThrottlingEntity: () => isThrottlingEntity,
  updateAuthorityEndpointMetadata: () => updateAuthorityEndpointMetadata,
  updateCloudDiscoveryMetadata: () => updateCloudDiscoveryMetadata
});

// node_modules/@azure/msal-common/dist/account/AuthToken.mjs
var AuthToken_exports = {};
__export(AuthToken_exports, {
  checkMaxAge: () => checkMaxAge,
  extractTokenClaims: () => extractTokenClaims,
  getJWSPayload: () => getJWSPayload
});
function extractTokenClaims(encodedToken, base64Decode) {
  const jswPayload = getJWSPayload(encodedToken);
  try {
    const base64Decoded = base64Decode(jswPayload);
    return JSON.parse(base64Decoded);
  } catch (err) {
    throw createClientAuthError(tokenParsingError);
  }
}
function getJWSPayload(authToken) {
  if (!authToken) {
    throw createClientAuthError(nullOrEmptyToken);
  }
  const tokenPartsRegex = /^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/;
  const matches = tokenPartsRegex.exec(authToken);
  if (!matches || matches.length < 4) {
    throw createClientAuthError(tokenParsingError);
  }
  return matches[2];
}
function checkMaxAge(authTime, maxAge) {
  const fiveMinuteSkew = 3e5;
  if (maxAge === 0 || Date.now() - fiveMinuteSkew > authTime + maxAge) {
    throw createClientAuthError(maxAgeTranspired);
  }
}

// node_modules/@azure/msal-common/dist/utils/TimeUtils.mjs
var TimeUtils_exports = {};
__export(TimeUtils_exports, {
  delay: () => delay,
  isTokenExpired: () => isTokenExpired,
  nowSeconds: () => nowSeconds,
  toDateFromSeconds: () => toDateFromSeconds,
  toSecondsFromDate: () => toSecondsFromDate,
  wasClockTurnedBack: () => wasClockTurnedBack
});
function nowSeconds() {
  return Math.round((/* @__PURE__ */ new Date()).getTime() / 1e3);
}
function toSecondsFromDate(date) {
  return date.getTime() / 1e3;
}
function toDateFromSeconds(seconds) {
  if (seconds) {
    return new Date(Number(seconds) * 1e3);
  }
  return /* @__PURE__ */ new Date();
}
function isTokenExpired(expiresOn, offset) {
  const expirationSec = Number(expiresOn) || 0;
  const offsetCurrentTimeSec = nowSeconds() + offset;
  return offsetCurrentTimeSec > expirationSec;
}
function wasClockTurnedBack(cachedAt) {
  const cachedAtSec = Number(cachedAt);
  return cachedAtSec > nowSeconds();
}
function delay(t, value) {
  return new Promise((resolve) => setTimeout(() => resolve(value), t));
}

// node_modules/@azure/msal-common/dist/cache/utils/CacheHelpers.mjs
function generateCredentialKey(credentialEntity) {
  const credentialKey = [
    generateAccountId(credentialEntity),
    generateCredentialId(credentialEntity),
    generateTarget(credentialEntity),
    generateClaimsHash(credentialEntity),
    generateScheme(credentialEntity)
  ];
  return credentialKey.join(Separators.CACHE_KEY_SEPARATOR).toLowerCase();
}
function createIdTokenEntity(homeAccountId, environment, idToken, clientId, tenantId) {
  const idTokenEntity = {
    credentialType: CredentialType.ID_TOKEN,
    homeAccountId,
    environment,
    clientId,
    secret: idToken,
    realm: tenantId
  };
  return idTokenEntity;
}
function createAccessTokenEntity(homeAccountId, environment, accessToken, clientId, tenantId, scopes, expiresOn, extExpiresOn, base64Decode, refreshOn, tokenType, userAssertionHash, keyId, requestedClaims, requestedClaimsHash) {
  var _a, _b;
  const atEntity = {
    homeAccountId,
    credentialType: CredentialType.ACCESS_TOKEN,
    secret: accessToken,
    cachedAt: nowSeconds().toString(),
    expiresOn: expiresOn.toString(),
    extendedExpiresOn: extExpiresOn.toString(),
    environment,
    clientId,
    realm: tenantId,
    target: scopes,
    tokenType: tokenType || AuthenticationScheme.BEARER
  };
  if (userAssertionHash) {
    atEntity.userAssertionHash = userAssertionHash;
  }
  if (refreshOn) {
    atEntity.refreshOn = refreshOn.toString();
  }
  if (requestedClaims) {
    atEntity.requestedClaims = requestedClaims;
    atEntity.requestedClaimsHash = requestedClaimsHash;
  }
  if (((_a = atEntity.tokenType) == null ? void 0 : _a.toLowerCase()) !== AuthenticationScheme.BEARER.toLowerCase()) {
    atEntity.credentialType = CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME;
    switch (atEntity.tokenType) {
      case AuthenticationScheme.POP:
        const tokenClaims = extractTokenClaims(accessToken, base64Decode);
        if (!((_b = tokenClaims == null ? void 0 : tokenClaims.cnf) == null ? void 0 : _b.kid)) {
          throw createClientAuthError(tokenClaimsCnfRequiredForSignedJwt);
        }
        atEntity.keyId = tokenClaims.cnf.kid;
        break;
      case AuthenticationScheme.SSH:
        atEntity.keyId = keyId;
    }
  }
  return atEntity;
}
function createRefreshTokenEntity(homeAccountId, environment, refreshToken, clientId, familyId, userAssertionHash, expiresOn) {
  const rtEntity = {
    credentialType: CredentialType.REFRESH_TOKEN,
    homeAccountId,
    environment,
    clientId,
    secret: refreshToken
  };
  if (userAssertionHash) {
    rtEntity.userAssertionHash = userAssertionHash;
  }
  if (familyId) {
    rtEntity.familyId = familyId;
  }
  if (expiresOn) {
    rtEntity.expiresOn = expiresOn.toString();
  }
  return rtEntity;
}
function isCredentialEntity(entity) {
  return entity.hasOwnProperty("homeAccountId") && entity.hasOwnProperty("environment") && entity.hasOwnProperty("credentialType") && entity.hasOwnProperty("clientId") && entity.hasOwnProperty("secret");
}
function isAccessTokenEntity(entity) {
  if (!entity) {
    return false;
  }
  return isCredentialEntity(entity) && entity.hasOwnProperty("realm") && entity.hasOwnProperty("target") && (entity["credentialType"] === CredentialType.ACCESS_TOKEN || entity["credentialType"] === CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME);
}
function isIdTokenEntity(entity) {
  if (!entity) {
    return false;
  }
  return isCredentialEntity(entity) && entity.hasOwnProperty("realm") && entity["credentialType"] === CredentialType.ID_TOKEN;
}
function isRefreshTokenEntity(entity) {
  if (!entity) {
    return false;
  }
  return isCredentialEntity(entity) && entity["credentialType"] === CredentialType.REFRESH_TOKEN;
}
function generateAccountId(credentialEntity) {
  const accountId = [
    credentialEntity.homeAccountId,
    credentialEntity.environment
  ];
  return accountId.join(Separators.CACHE_KEY_SEPARATOR).toLowerCase();
}
function generateCredentialId(credentialEntity) {
  const clientOrFamilyId = credentialEntity.credentialType === CredentialType.REFRESH_TOKEN ? credentialEntity.familyId || credentialEntity.clientId : credentialEntity.clientId;
  const credentialId = [
    credentialEntity.credentialType,
    clientOrFamilyId,
    credentialEntity.realm || ""
  ];
  return credentialId.join(Separators.CACHE_KEY_SEPARATOR).toLowerCase();
}
function generateTarget(credentialEntity) {
  return (credentialEntity.target || "").toLowerCase();
}
function generateClaimsHash(credentialEntity) {
  return (credentialEntity.requestedClaimsHash || "").toLowerCase();
}
function generateScheme(credentialEntity) {
  return credentialEntity.tokenType && credentialEntity.tokenType.toLowerCase() !== AuthenticationScheme.BEARER.toLowerCase() ? credentialEntity.tokenType.toLowerCase() : "";
}
function isServerTelemetryEntity(key, entity) {
  const validateKey = key.indexOf(SERVER_TELEM_CONSTANTS.CACHE_KEY) === 0;
  let validateEntity = true;
  if (entity) {
    validateEntity = entity.hasOwnProperty("failedRequests") && entity.hasOwnProperty("errors") && entity.hasOwnProperty("cacheHits");
  }
  return validateKey && validateEntity;
}
function isThrottlingEntity(key, entity) {
  let validateKey = false;
  if (key) {
    validateKey = key.indexOf(ThrottlingConstants.THROTTLING_PREFIX) === 0;
  }
  let validateEntity = true;
  if (entity) {
    validateEntity = entity.hasOwnProperty("throttleTime");
  }
  return validateKey && validateEntity;
}
function generateAppMetadataKey({ environment, clientId }) {
  const appMetaDataKeyArray = [
    APP_METADATA,
    environment,
    clientId
  ];
  return appMetaDataKeyArray.join(Separators.CACHE_KEY_SEPARATOR).toLowerCase();
}
function isAppMetadataEntity(key, entity) {
  if (!entity) {
    return false;
  }
  return key.indexOf(APP_METADATA) === 0 && entity.hasOwnProperty("clientId") && entity.hasOwnProperty("environment");
}
function isAuthorityMetadataEntity(key, entity) {
  if (!entity) {
    return false;
  }
  return key.indexOf(AUTHORITY_METADATA_CONSTANTS.CACHE_KEY) === 0 && entity.hasOwnProperty("aliases") && entity.hasOwnProperty("preferred_cache") && entity.hasOwnProperty("preferred_network") && entity.hasOwnProperty("canonical_authority") && entity.hasOwnProperty("authorization_endpoint") && entity.hasOwnProperty("token_endpoint") && entity.hasOwnProperty("issuer") && entity.hasOwnProperty("aliasesFromNetwork") && entity.hasOwnProperty("endpointsFromNetwork") && entity.hasOwnProperty("expiresAt") && entity.hasOwnProperty("jwks_uri");
}
function generateAuthorityMetadataExpiresAt() {
  return nowSeconds() + AUTHORITY_METADATA_CONSTANTS.REFRESH_TIME_SECONDS;
}
function updateAuthorityEndpointMetadata(authorityMetadata, updatedValues, fromNetwork) {
  authorityMetadata.authorization_endpoint = updatedValues.authorization_endpoint;
  authorityMetadata.token_endpoint = updatedValues.token_endpoint;
  authorityMetadata.end_session_endpoint = updatedValues.end_session_endpoint;
  authorityMetadata.issuer = updatedValues.issuer;
  authorityMetadata.endpointsFromNetwork = fromNetwork;
  authorityMetadata.jwks_uri = updatedValues.jwks_uri;
}
function updateCloudDiscoveryMetadata(authorityMetadata, updatedValues, fromNetwork) {
  authorityMetadata.aliases = updatedValues.aliases;
  authorityMetadata.preferred_cache = updatedValues.preferred_cache;
  authorityMetadata.preferred_network = updatedValues.preferred_network;
  authorityMetadata.aliasesFromNetwork = fromNetwork;
}
function isAuthorityMetadataExpired(metadata) {
  return metadata.expiresAt <= nowSeconds();
}

// node_modules/@azure/msal-common/dist/error/ClientConfigurationErrorCodes.mjs
var redirectUriEmpty = "redirect_uri_empty";
var claimsRequestParsingError = "claims_request_parsing_error";
var authorityUriInsecure = "authority_uri_insecure";
var urlParseError = "url_parse_error";
var urlEmptyError = "empty_url_error";
var emptyInputScopesError = "empty_input_scopes_error";
var invalidPromptValue = "invalid_prompt_value";
var invalidClaims = "invalid_claims";
var tokenRequestEmpty = "token_request_empty";
var logoutRequestEmpty = "logout_request_empty";
var invalidCodeChallengeMethod = "invalid_code_challenge_method";
var pkceParamsMissing = "pkce_params_missing";
var invalidCloudDiscoveryMetadata = "invalid_cloud_discovery_metadata";
var invalidAuthorityMetadata = "invalid_authority_metadata";
var untrustedAuthority = "untrusted_authority";
var missingSshJwk = "missing_ssh_jwk";
var missingSshKid = "missing_ssh_kid";
var missingNonceAuthenticationHeader = "missing_nonce_authentication_header";
var invalidAuthenticationHeader = "invalid_authentication_header";
var cannotSetOIDCOptions = "cannot_set_OIDCOptions";
var cannotAllowPlatformBroker = "cannot_allow_platform_broker";
var authorityMismatch = "authority_mismatch";

// node_modules/@azure/msal-common/dist/error/ClientConfigurationError.mjs
var ClientConfigurationErrorMessages = {
  [redirectUriEmpty]: "A redirect URI is required for all calls, and none has been set.",
  [claimsRequestParsingError]: "Could not parse the given claims request object.",
  [authorityUriInsecure]: "Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",
  [urlParseError]: "URL could not be parsed into appropriate segments.",
  [urlEmptyError]: "URL was empty or null.",
  [emptyInputScopesError]: "Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",
  [invalidPromptValue]: "Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",
  [invalidClaims]: "Given claims parameter must be a stringified JSON object.",
  [tokenRequestEmpty]: "Token request was empty and not found in cache.",
  [logoutRequestEmpty]: "The logout request was null or undefined.",
  [invalidCodeChallengeMethod]: 'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',
  [pkceParamsMissing]: "Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",
  [invalidCloudDiscoveryMetadata]: "Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",
  [invalidAuthorityMetadata]: "Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",
  [untrustedAuthority]: "The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",
  [missingSshJwk]: "Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",
  [missingSshKid]: "Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",
  [missingNonceAuthenticationHeader]: "Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",
  [invalidAuthenticationHeader]: "Invalid authentication header provided",
  [cannotSetOIDCOptions]: "Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",
  [cannotAllowPlatformBroker]: "Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",
  [authorityMismatch]: "Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."
};
var ClientConfigurationErrorMessage = {
  redirectUriNotSet: {
    code: redirectUriEmpty,
    desc: ClientConfigurationErrorMessages[redirectUriEmpty]
  },
  claimsRequestParsingError: {
    code: claimsRequestParsingError,
    desc: ClientConfigurationErrorMessages[claimsRequestParsingError]
  },
  authorityUriInsecure: {
    code: authorityUriInsecure,
    desc: ClientConfigurationErrorMessages[authorityUriInsecure]
  },
  urlParseError: {
    code: urlParseError,
    desc: ClientConfigurationErrorMessages[urlParseError]
  },
  urlEmptyError: {
    code: urlEmptyError,
    desc: ClientConfigurationErrorMessages[urlEmptyError]
  },
  emptyScopesError: {
    code: emptyInputScopesError,
    desc: ClientConfigurationErrorMessages[emptyInputScopesError]
  },
  invalidPrompt: {
    code: invalidPromptValue,
    desc: ClientConfigurationErrorMessages[invalidPromptValue]
  },
  invalidClaimsRequest: {
    code: invalidClaims,
    desc: ClientConfigurationErrorMessages[invalidClaims]
  },
  tokenRequestEmptyError: {
    code: tokenRequestEmpty,
    desc: ClientConfigurationErrorMessages[tokenRequestEmpty]
  },
  logoutRequestEmptyError: {
    code: logoutRequestEmpty,
    desc: ClientConfigurationErrorMessages[logoutRequestEmpty]
  },
  invalidCodeChallengeMethod: {
    code: invalidCodeChallengeMethod,
    desc: ClientConfigurationErrorMessages[invalidCodeChallengeMethod]
  },
  invalidCodeChallengeParams: {
    code: pkceParamsMissing,
    desc: ClientConfigurationErrorMessages[pkceParamsMissing]
  },
  invalidCloudDiscoveryMetadata: {
    code: invalidCloudDiscoveryMetadata,
    desc: ClientConfigurationErrorMessages[invalidCloudDiscoveryMetadata]
  },
  invalidAuthorityMetadata: {
    code: invalidAuthorityMetadata,
    desc: ClientConfigurationErrorMessages[invalidAuthorityMetadata]
  },
  untrustedAuthority: {
    code: untrustedAuthority,
    desc: ClientConfigurationErrorMessages[untrustedAuthority]
  },
  missingSshJwk: {
    code: missingSshJwk,
    desc: ClientConfigurationErrorMessages[missingSshJwk]
  },
  missingSshKid: {
    code: missingSshKid,
    desc: ClientConfigurationErrorMessages[missingSshKid]
  },
  missingNonceAuthenticationHeader: {
    code: missingNonceAuthenticationHeader,
    desc: ClientConfigurationErrorMessages[missingNonceAuthenticationHeader]
  },
  invalidAuthenticationHeader: {
    code: invalidAuthenticationHeader,
    desc: ClientConfigurationErrorMessages[invalidAuthenticationHeader]
  },
  cannotSetOIDCOptions: {
    code: cannotSetOIDCOptions,
    desc: ClientConfigurationErrorMessages[cannotSetOIDCOptions]
  },
  cannotAllowPlatformBroker: {
    code: cannotAllowPlatformBroker,
    desc: ClientConfigurationErrorMessages[cannotAllowPlatformBroker]
  },
  authorityMismatch: {
    code: authorityMismatch,
    desc: ClientConfigurationErrorMessages[authorityMismatch]
  }
};
var ClientConfigurationError = class _ClientConfigurationError extends AuthError {
  constructor(errorCode) {
    super(errorCode, ClientConfigurationErrorMessages[errorCode]);
    this.name = "ClientConfigurationError";
    Object.setPrototypeOf(this, _ClientConfigurationError.prototype);
  }
};
function createClientConfigurationError(errorCode) {
  return new ClientConfigurationError(errorCode);
}

// node_modules/@azure/msal-common/dist/utils/StringUtils.mjs
var StringUtils = class {
  /**
   * Check if stringified object is empty
   * @param strObj
   */
  static isEmptyObj(strObj) {
    if (strObj) {
      try {
        const obj = JSON.parse(strObj);
        return Object.keys(obj).length === 0;
      } catch (e) {
      }
    }
    return true;
  }
  static startsWith(str, search) {
    return str.indexOf(search) === 0;
  }
  static endsWith(str, search) {
    return str.length >= search.length && str.lastIndexOf(search) === str.length - search.length;
  }
  /**
   * Parses string into an object.
   *
   * @param query
   */
  static queryStringToObject(query) {
    const obj = {};
    const params = query.split("&");
    const decode = (s) => decodeURIComponent(s.replace(/\+/g, " "));
    params.forEach((pair) => {
      if (pair.trim()) {
        const [key, value] = pair.split(/=(.+)/g, 2);
        if (key && value) {
          obj[decode(key)] = decode(value);
        }
      }
    });
    return obj;
  }
  /**
   * Trims entries in an array.
   *
   * @param arr
   */
  static trimArrayEntries(arr) {
    return arr.map((entry) => entry.trim());
  }
  /**
   * Removes empty strings from array
   * @param arr
   */
  static removeEmptyStringsFromArray(arr) {
    return arr.filter((entry) => {
      return !!entry;
    });
  }
  /**
   * Attempts to parse a string into JSON
   * @param str
   */
  static jsonParseHelper(str) {
    try {
      return JSON.parse(str);
    } catch (e) {
      return null;
    }
  }
  /**
   * Tests if a given string matches a given pattern, with support for wildcards and queries.
   * @param pattern Wildcard pattern to string match. Supports "*" for wildcards and "?" for queries
   * @param input String to match against
   */
  static matchPattern(pattern, input) {
    const regex = new RegExp(pattern.replace(/\\/g, "\\\\").replace(/\*/g, "[^ ]*").replace(/\?/g, "\\?"));
    return regex.test(input);
  }
};

// node_modules/@azure/msal-common/dist/request/ScopeSet.mjs
var ScopeSet = class _ScopeSet {
  constructor(inputScopes) {
    const scopeArr = inputScopes ? StringUtils.trimArrayEntries([...inputScopes]) : [];
    const filteredInput = scopeArr ? StringUtils.removeEmptyStringsFromArray(scopeArr) : [];
    if (!filteredInput || !filteredInput.length) {
      throw createClientConfigurationError(emptyInputScopesError);
    }
    this.scopes = /* @__PURE__ */ new Set();
    filteredInput.forEach((scope) => this.scopes.add(scope));
  }
  /**
   * Factory method to create ScopeSet from space-delimited string
   * @param inputScopeString
   * @param appClientId
   * @param scopesRequired
   */
  static fromString(inputScopeString) {
    const scopeString = inputScopeString || Constants.EMPTY_STRING;
    const inputScopes = scopeString.split(" ");
    return new _ScopeSet(inputScopes);
  }
  /**
   * Creates the set of scopes to search for in cache lookups
   * @param inputScopeString
   * @returns
   */
  static createSearchScopes(inputScopeString) {
    const scopeSet = new _ScopeSet(inputScopeString);
    if (!scopeSet.containsOnlyOIDCScopes()) {
      scopeSet.removeOIDCScopes();
    } else {
      scopeSet.removeScope(Constants.OFFLINE_ACCESS_SCOPE);
    }
    return scopeSet;
  }
  /**
   * Check if a given scope is present in this set of scopes.
   * @param scope
   */
  containsScope(scope) {
    const lowerCaseScopes = this.printScopesLowerCase().split(" ");
    const lowerCaseScopesSet = new _ScopeSet(lowerCaseScopes);
    return scope ? lowerCaseScopesSet.scopes.has(scope.toLowerCase()) : false;
  }
  /**
   * Check if a set of scopes is present in this set of scopes.
   * @param scopeSet
   */
  containsScopeSet(scopeSet) {
    if (!scopeSet || scopeSet.scopes.size <= 0) {
      return false;
    }
    return this.scopes.size >= scopeSet.scopes.size && scopeSet.asArray().every((scope) => this.containsScope(scope));
  }
  /**
   * Check if set of scopes contains only the defaults
   */
  containsOnlyOIDCScopes() {
    let defaultScopeCount = 0;
    OIDC_SCOPES.forEach((defaultScope) => {
      if (this.containsScope(defaultScope)) {
        defaultScopeCount += 1;
      }
    });
    return this.scopes.size === defaultScopeCount;
  }
  /**
   * Appends single scope if passed
   * @param newScope
   */
  appendScope(newScope) {
    if (newScope) {
      this.scopes.add(newScope.trim());
    }
  }
  /**
   * Appends multiple scopes if passed
   * @param newScopes
   */
  appendScopes(newScopes) {
    try {
      newScopes.forEach((newScope) => this.appendScope(newScope));
    } catch (e) {
      throw createClientAuthError(cannotAppendScopeSet);
    }
  }
  /**
   * Removes element from set of scopes.
   * @param scope
   */
  removeScope(scope) {
    if (!scope) {
      throw createClientAuthError(cannotRemoveEmptyScope);
    }
    this.scopes.delete(scope.trim());
  }
  /**
   * Removes default scopes from set of scopes
   * Primarily used to prevent cache misses if the default scopes are not returned from the server
   */
  removeOIDCScopes() {
    OIDC_SCOPES.forEach((defaultScope) => {
      this.scopes.delete(defaultScope);
    });
  }
  /**
   * Combines an array of scopes with the current set of scopes.
   * @param otherScopes
   */
  unionScopeSets(otherScopes) {
    if (!otherScopes) {
      throw createClientAuthError(emptyInputScopeSet);
    }
    const unionScopes = /* @__PURE__ */ new Set();
    otherScopes.scopes.forEach((scope) => unionScopes.add(scope.toLowerCase()));
    this.scopes.forEach((scope) => unionScopes.add(scope.toLowerCase()));
    return unionScopes;
  }
  /**
   * Check if scopes intersect between this set and another.
   * @param otherScopes
   */
  intersectingScopeSets(otherScopes) {
    if (!otherScopes) {
      throw createClientAuthError(emptyInputScopeSet);
    }
    if (!otherScopes.containsOnlyOIDCScopes()) {
      otherScopes.removeOIDCScopes();
    }
    const unionScopes = this.unionScopeSets(otherScopes);
    const sizeOtherScopes = otherScopes.getScopeCount();
    const sizeThisScopes = this.getScopeCount();
    const sizeUnionScopes = unionScopes.size;
    return sizeUnionScopes < sizeThisScopes + sizeOtherScopes;
  }
  /**
   * Returns size of set of scopes.
   */
  getScopeCount() {
    return this.scopes.size;
  }
  /**
   * Returns the scopes as an array of string values
   */
  asArray() {
    const array = [];
    this.scopes.forEach((val) => array.push(val));
    return array;
  }
  /**
   * Prints scopes into a space-delimited string
   */
  printScopes() {
    if (this.scopes) {
      const scopeArr = this.asArray();
      return scopeArr.join(" ");
    }
    return Constants.EMPTY_STRING;
  }
  /**
   * Prints scopes into a space-delimited lower-case string (used for caching)
   */
  printScopesLowerCase() {
    return this.printScopes().toLowerCase();
  }
};

// node_modules/@azure/msal-common/dist/account/ClientInfo.mjs
function buildClientInfo(rawClientInfo, base64Decode) {
  if (!rawClientInfo) {
    throw createClientAuthError(clientInfoEmptyError);
  }
  try {
    const decodedClientInfo = base64Decode(rawClientInfo);
    return JSON.parse(decodedClientInfo);
  } catch (e) {
    throw createClientAuthError(clientInfoDecodingError);
  }
}
function buildClientInfoFromHomeAccountId(homeAccountId) {
  if (!homeAccountId) {
    throw createClientAuthError(clientInfoDecodingError);
  }
  const clientInfoParts = homeAccountId.split(Separators.CLIENT_INFO_SEPARATOR, 2);
  return {
    uid: clientInfoParts[0],
    utid: clientInfoParts.length < 2 ? Constants.EMPTY_STRING : clientInfoParts[1]
  };
}

// node_modules/@azure/msal-common/dist/account/AccountInfo.mjs
function tenantIdMatchesHomeTenant(tenantId, homeAccountId) {
  return !!tenantId && !!homeAccountId && tenantId === homeAccountId.split(".")[1];
}
function buildTenantProfile(homeAccountId, localAccountId, tenantId, idTokenClaims) {
  if (idTokenClaims) {
    const { oid, sub, tid, name: name3, tfp, acr } = idTokenClaims;
    const tenantId2 = tid || tfp || acr || "";
    return {
      tenantId: tenantId2,
      localAccountId: oid || sub || "",
      name: name3,
      isHomeTenant: tenantIdMatchesHomeTenant(tenantId2, homeAccountId)
    };
  } else {
    return {
      tenantId,
      localAccountId,
      isHomeTenant: tenantIdMatchesHomeTenant(tenantId, homeAccountId)
    };
  }
}
function updateAccountTenantProfileData(baseAccountInfo, tenantProfile, idTokenClaims, idTokenSecret) {
  let updatedAccountInfo = baseAccountInfo;
  if (tenantProfile) {
    const { isHomeTenant, ...tenantProfileOverride } = tenantProfile;
    updatedAccountInfo = { ...baseAccountInfo, ...tenantProfileOverride };
  }
  if (idTokenClaims) {
    const { isHomeTenant, ...claimsSourcedTenantProfile } = buildTenantProfile(baseAccountInfo.homeAccountId, baseAccountInfo.localAccountId, baseAccountInfo.tenantId, idTokenClaims);
    updatedAccountInfo = {
      ...updatedAccountInfo,
      ...claimsSourcedTenantProfile,
      idTokenClaims,
      idToken: idTokenSecret
    };
    return updatedAccountInfo;
  }
  return updatedAccountInfo;
}

// node_modules/@azure/msal-common/dist/authority/AuthorityType.mjs
var AuthorityType = {
  Default: 0,
  Adfs: 1,
  Dsts: 2,
  Ciam: 3
};

// node_modules/@azure/msal-common/dist/account/TokenClaims.mjs
function getTenantIdFromIdTokenClaims(idTokenClaims) {
  if (idTokenClaims) {
    const tenantId = idTokenClaims.tid || idTokenClaims.tfp || idTokenClaims.acr;
    return tenantId || null;
  }
  return null;
}

// node_modules/@azure/msal-common/dist/authority/ProtocolMode.mjs
var ProtocolMode = {
  /**
   * Auth Code + PKCE with Entra ID (formerly AAD) specific optimizations and features
   */
  AAD: "AAD",
  /**
   * Auth Code + PKCE without Entra ID specific optimizations and features. For use only with non-Microsoft owned authorities.
   * Support is limited for this mode.
   */
  OIDC: "OIDC",
  /**
   * Encrypted Authorize Response (EAR) with Entra ID specific optimizations and features
   */
  EAR: "EAR"
};

// node_modules/@azure/msal-common/dist/cache/entities/AccountEntity.mjs
var AccountEntity = class _AccountEntity {
  /**
   * Generate Account Id key component as per the schema: <home_account_id>-<environment>
   */
  generateAccountId() {
    const accountId = [this.homeAccountId, this.environment];
    return accountId.join(Separators.CACHE_KEY_SEPARATOR).toLowerCase();
  }
  /**
   * Generate Account Cache Key as per the schema: <home_account_id>-<environment>-<realm*>
   */
  generateAccountKey() {
    return _AccountEntity.generateAccountCacheKey({
      homeAccountId: this.homeAccountId,
      environment: this.environment,
      tenantId: this.realm,
      username: this.username,
      localAccountId: this.localAccountId
    });
  }
  /**
   * Returns the AccountInfo interface for this account.
   */
  getAccountInfo() {
    return {
      homeAccountId: this.homeAccountId,
      environment: this.environment,
      tenantId: this.realm,
      username: this.username,
      localAccountId: this.localAccountId,
      name: this.name,
      nativeAccountId: this.nativeAccountId,
      authorityType: this.authorityType,
      // Deserialize tenant profiles array into a Map
      tenantProfiles: new Map((this.tenantProfiles || []).map((tenantProfile) => {
        return [tenantProfile.tenantId, tenantProfile];
      }))
    };
  }
  /**
   * Returns true if the account entity is in single tenant format (outdated), false otherwise
   */
  isSingleTenant() {
    return !this.tenantProfiles;
  }
  /**
   * Generates account key from interface
   * @param accountInterface
   */
  static generateAccountCacheKey(accountInterface) {
    const homeTenantId = accountInterface.homeAccountId.split(".")[1];
    const accountKey = [
      accountInterface.homeAccountId,
      accountInterface.environment || "",
      homeTenantId || accountInterface.tenantId || ""
    ];
    return accountKey.join(Separators.CACHE_KEY_SEPARATOR).toLowerCase();
  }
  /**
   * Build Account cache from IdToken, clientInfo and authority/policy. Associated with AAD.
   * @param accountDetails
   */
  static createAccount(accountDetails, authority, base64Decode) {
    var _a, _b, _c, _d, _e, _f;
    const account = new _AccountEntity();
    if (authority.authorityType === AuthorityType.Adfs) {
      account.authorityType = CacheAccountType.ADFS_ACCOUNT_TYPE;
    } else if (authority.protocolMode === ProtocolMode.OIDC) {
      account.authorityType = CacheAccountType.GENERIC_ACCOUNT_TYPE;
    } else {
      account.authorityType = CacheAccountType.MSSTS_ACCOUNT_TYPE;
    }
    let clientInfo;
    if (accountDetails.clientInfo && base64Decode) {
      clientInfo = buildClientInfo(accountDetails.clientInfo, base64Decode);
    }
    account.clientInfo = accountDetails.clientInfo;
    account.homeAccountId = accountDetails.homeAccountId;
    account.nativeAccountId = accountDetails.nativeAccountId;
    const env = accountDetails.environment || authority && authority.getPreferredCache();
    if (!env) {
      throw createClientAuthError(invalidCacheEnvironment);
    }
    account.environment = env;
    account.realm = (clientInfo == null ? void 0 : clientInfo.utid) || getTenantIdFromIdTokenClaims(accountDetails.idTokenClaims) || "";
    account.localAccountId = (clientInfo == null ? void 0 : clientInfo.uid) || ((_a = accountDetails.idTokenClaims) == null ? void 0 : _a.oid) || ((_b = accountDetails.idTokenClaims) == null ? void 0 : _b.sub) || "";
    const preferredUsername = ((_c = accountDetails.idTokenClaims) == null ? void 0 : _c.preferred_username) || ((_d = accountDetails.idTokenClaims) == null ? void 0 : _d.upn);
    const email = ((_e = accountDetails.idTokenClaims) == null ? void 0 : _e.emails) ? accountDetails.idTokenClaims.emails[0] : null;
    account.username = preferredUsername || email || "";
    account.name = ((_f = accountDetails.idTokenClaims) == null ? void 0 : _f.name) || "";
    account.cloudGraphHostName = accountDetails.cloudGraphHostName;
    account.msGraphHost = accountDetails.msGraphHost;
    if (accountDetails.tenantProfiles) {
      account.tenantProfiles = accountDetails.tenantProfiles;
    } else {
      const tenantProfile = buildTenantProfile(accountDetails.homeAccountId, account.localAccountId, account.realm, accountDetails.idTokenClaims);
      account.tenantProfiles = [tenantProfile];
    }
    return account;
  }
  /**
   * Creates an AccountEntity object from AccountInfo
   * @param accountInfo
   * @param cloudGraphHostName
   * @param msGraphHost
   * @returns
   */
  static createFromAccountInfo(accountInfo, cloudGraphHostName, msGraphHost) {
    var _a;
    const account = new _AccountEntity();
    account.authorityType = accountInfo.authorityType || CacheAccountType.GENERIC_ACCOUNT_TYPE;
    account.homeAccountId = accountInfo.homeAccountId;
    account.localAccountId = accountInfo.localAccountId;
    account.nativeAccountId = accountInfo.nativeAccountId;
    account.realm = accountInfo.tenantId;
    account.environment = accountInfo.environment;
    account.username = accountInfo.username;
    account.name = accountInfo.name;
    account.cloudGraphHostName = cloudGraphHostName;
    account.msGraphHost = msGraphHost;
    account.tenantProfiles = Array.from(((_a = accountInfo.tenantProfiles) == null ? void 0 : _a.values()) || []);
    return account;
  }
  /**
   * Generate HomeAccountId from server response
   * @param serverClientInfo
   * @param authType
   */
  static generateHomeAccountId(serverClientInfo, authType, logger, cryptoObj, idTokenClaims) {
    if (!(authType === AuthorityType.Adfs || authType === AuthorityType.Dsts)) {
      if (serverClientInfo) {
        try {
          const clientInfo = buildClientInfo(serverClientInfo, cryptoObj.base64Decode);
          if (clientInfo.uid && clientInfo.utid) {
            return `${clientInfo.uid}.${clientInfo.utid}`;
          }
        } catch (e) {
        }
      }
      logger.warning("No client info in response");
    }
    return (idTokenClaims == null ? void 0 : idTokenClaims.sub) || "";
  }
  /**
   * Validates an entity: checks for all expected params
   * @param entity
   */
  static isAccountEntity(entity) {
    if (!entity) {
      return false;
    }
    return entity.hasOwnProperty("homeAccountId") && entity.hasOwnProperty("environment") && entity.hasOwnProperty("realm") && entity.hasOwnProperty("localAccountId") && entity.hasOwnProperty("username") && entity.hasOwnProperty("authorityType");
  }
  /**
   * Helper function to determine whether 2 accountInfo objects represent the same account
   * @param accountA
   * @param accountB
   * @param compareClaims - If set to true idTokenClaims will also be compared to determine account equality
   */
  static accountInfoIsEqual(accountA, accountB, compareClaims) {
    if (!accountA || !accountB) {
      return false;
    }
    let claimsMatch = true;
    if (compareClaims) {
      const accountAClaims = accountA.idTokenClaims || {};
      const accountBClaims = accountB.idTokenClaims || {};
      claimsMatch = accountAClaims.iat === accountBClaims.iat && accountAClaims.nonce === accountBClaims.nonce;
    }
    return accountA.homeAccountId === accountB.homeAccountId && accountA.localAccountId === accountB.localAccountId && accountA.username === accountB.username && accountA.tenantId === accountB.tenantId && accountA.environment === accountB.environment && accountA.nativeAccountId === accountB.nativeAccountId && claimsMatch;
  }
};

// node_modules/@azure/msal-common/dist/utils/UrlUtils.mjs
var UrlUtils_exports = {};
__export(UrlUtils_exports, {
  getDeserializedResponse: () => getDeserializedResponse,
  mapToQueryString: () => mapToQueryString,
  stripLeadingHashOrQuery: () => stripLeadingHashOrQuery
});
function stripLeadingHashOrQuery(responseString) {
  if (responseString.startsWith("#/")) {
    return responseString.substring(2);
  } else if (responseString.startsWith("#") || responseString.startsWith("?")) {
    return responseString.substring(1);
  }
  return responseString;
}
function getDeserializedResponse(responseString) {
  if (!responseString || responseString.indexOf("=") < 0) {
    return null;
  }
  try {
    const normalizedResponse = stripLeadingHashOrQuery(responseString);
    const deserializedHash = Object.fromEntries(new URLSearchParams(normalizedResponse));
    if (deserializedHash.code || deserializedHash.ear_jwe || deserializedHash.error || deserializedHash.error_description || deserializedHash.state) {
      return deserializedHash;
    }
  } catch (e) {
    throw createClientAuthError(hashNotDeserialized);
  }
  return null;
}
function mapToQueryString(parameters) {
  const queryParameterArray = new Array();
  parameters.forEach((value, key) => {
    queryParameterArray.push(`${key}=${encodeURIComponent(value)}`);
  });
  return queryParameterArray.join("&");
}

// node_modules/@azure/msal-common/dist/url/UrlString.mjs
var UrlString = class _UrlString {
  get urlString() {
    return this._urlString;
  }
  constructor(url) {
    this._urlString = url;
    if (!this._urlString) {
      throw createClientConfigurationError(urlEmptyError);
    }
    if (!url.includes("#")) {
      this._urlString = _UrlString.canonicalizeUri(url);
    }
  }
  /**
   * Ensure urls are lower case and end with a / character.
   * @param url
   */
  static canonicalizeUri(url) {
    if (url) {
      let lowerCaseUrl = url.toLowerCase();
      if (StringUtils.endsWith(lowerCaseUrl, "?")) {
        lowerCaseUrl = lowerCaseUrl.slice(0, -1);
      } else if (StringUtils.endsWith(lowerCaseUrl, "?/")) {
        lowerCaseUrl = lowerCaseUrl.slice(0, -2);
      }
      if (!StringUtils.endsWith(lowerCaseUrl, "/")) {
        lowerCaseUrl += "/";
      }
      return lowerCaseUrl;
    }
    return url;
  }
  /**
   * Throws if urlString passed is not a valid authority URI string.
   */
  validateAsUri() {
    let components;
    try {
      components = this.getUrlComponents();
    } catch (e) {
      throw createClientConfigurationError(urlParseError);
    }
    if (!components.HostNameAndPort || !components.PathSegments) {
      throw createClientConfigurationError(urlParseError);
    }
    if (!components.Protocol || components.Protocol.toLowerCase() !== "https:") {
      throw createClientConfigurationError(authorityUriInsecure);
    }
  }
  /**
   * Given a url and a query string return the url with provided query string appended
   * @param url
   * @param queryString
   */
  static appendQueryString(url, queryString) {
    if (!queryString) {
      return url;
    }
    return url.indexOf("?") < 0 ? `${url}?${queryString}` : `${url}&${queryString}`;
  }
  /**
   * Returns a url with the hash removed
   * @param url
   */
  static removeHashFromUrl(url) {
    return _UrlString.canonicalizeUri(url.split("#")[0]);
  }
  /**
   * Given a url like https://a:b/common/d?e=f#g, and a tenantId, returns https://a:b/tenantId/d
   * @param href The url
   * @param tenantId The tenant id to replace
   */
  replaceTenantPath(tenantId) {
    const urlObject = this.getUrlComponents();
    const pathArray = urlObject.PathSegments;
    if (tenantId && pathArray.length !== 0 && (pathArray[0] === AADAuthorityConstants.COMMON || pathArray[0] === AADAuthorityConstants.ORGANIZATIONS)) {
      pathArray[0] = tenantId;
    }
    return _UrlString.constructAuthorityUriFromObject(urlObject);
  }
  /**
   * Parses out the components from a url string.
   * @returns An object with the various components. Please cache this value insted of calling this multiple times on the same url.
   */
  getUrlComponents() {
    const regEx = RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?");
    const match = this.urlString.match(regEx);
    if (!match) {
      throw createClientConfigurationError(urlParseError);
    }
    const urlComponents = {
      Protocol: match[1],
      HostNameAndPort: match[4],
      AbsolutePath: match[5],
      QueryString: match[7]
    };
    let pathSegments = urlComponents.AbsolutePath.split("/");
    pathSegments = pathSegments.filter((val) => val && val.length > 0);
    urlComponents.PathSegments = pathSegments;
    if (urlComponents.QueryString && urlComponents.QueryString.endsWith("/")) {
      urlComponents.QueryString = urlComponents.QueryString.substring(0, urlComponents.QueryString.length - 1);
    }
    return urlComponents;
  }
  static getDomainFromUrl(url) {
    const regEx = RegExp("^([^:/?#]+://)?([^/?#]*)");
    const match = url.match(regEx);
    if (!match) {
      throw createClientConfigurationError(urlParseError);
    }
    return match[2];
  }
  static getAbsoluteUrl(relativeUrl, baseUrl) {
    if (relativeUrl[0] === Constants.FORWARD_SLASH) {
      const url = new _UrlString(baseUrl);
      const baseComponents = url.getUrlComponents();
      return baseComponents.Protocol + "//" + baseComponents.HostNameAndPort + relativeUrl;
    }
    return relativeUrl;
  }
  static constructAuthorityUriFromObject(urlObject) {
    return new _UrlString(urlObject.Protocol + "//" + urlObject.HostNameAndPort + "/" + urlObject.PathSegments.join("/"));
  }
  /**
   * Check if the hash of the URL string contains known properties
   * @deprecated This API will be removed in a future version
   */
  static hashContainsKnownProperties(response) {
    return !!getDeserializedResponse(response);
  }
};

// node_modules/@azure/msal-common/dist/authority/AuthorityMetadata.mjs
var rawMetdataJSON = {
  endpointMetadata: {
    "login.microsoftonline.com": {
      token_endpoint: "https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",
      jwks_uri: "https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",
      issuer: "https://login.microsoftonline.com/{tenantid}/v2.0",
      authorization_endpoint: "https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",
      end_session_endpoint: "https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"
    },
    "login.chinacloudapi.cn": {
      token_endpoint: "https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",
      jwks_uri: "https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",
      issuer: "https://login.partner.microsoftonline.cn/{tenantid}/v2.0",
      authorization_endpoint: "https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",
      end_session_endpoint: "https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"
    },
    "login.microsoftonline.us": {
      token_endpoint: "https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",
      jwks_uri: "https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",
      issuer: "https://login.microsoftonline.us/{tenantid}/v2.0",
      authorization_endpoint: "https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",
      end_session_endpoint: "https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"
    }
  },
  instanceDiscoveryMetadata: {
    tenant_discovery_endpoint: "https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",
    metadata: [
      {
        preferred_network: "login.microsoftonline.com",
        preferred_cache: "login.windows.net",
        aliases: [
          "login.microsoftonline.com",
          "login.windows.net",
          "login.microsoft.com",
          "sts.windows.net"
        ]
      },
      {
        preferred_network: "login.partner.microsoftonline.cn",
        preferred_cache: "login.partner.microsoftonline.cn",
        aliases: [
          "login.partner.microsoftonline.cn",
          "login.chinacloudapi.cn"
        ]
      },
      {
        preferred_network: "login.microsoftonline.de",
        preferred_cache: "login.microsoftonline.de",
        aliases: ["login.microsoftonline.de"]
      },
      {
        preferred_network: "login.microsoftonline.us",
        preferred_cache: "login.microsoftonline.us",
        aliases: [
          "login.microsoftonline.us",
          "login.usgovcloudapi.net"
        ]
      },
      {
        preferred_network: "login-us.microsoftonline.com",
        preferred_cache: "login-us.microsoftonline.com",
        aliases: ["login-us.microsoftonline.com"]
      }
    ]
  }
};
var EndpointMetadata = rawMetdataJSON.endpointMetadata;
var InstanceDiscoveryMetadata = rawMetdataJSON.instanceDiscoveryMetadata;
var InstanceDiscoveryMetadataAliases = /* @__PURE__ */ new Set();
InstanceDiscoveryMetadata.metadata.forEach((metadataEntry) => {
  metadataEntry.aliases.forEach((alias) => {
    InstanceDiscoveryMetadataAliases.add(alias);
  });
});
function getAliasesFromStaticSources(staticAuthorityOptions, logger) {
  var _a;
  let staticAliases;
  const canonicalAuthority = staticAuthorityOptions.canonicalAuthority;
  if (canonicalAuthority) {
    const authorityHost = new UrlString(canonicalAuthority).getUrlComponents().HostNameAndPort;
    staticAliases = getAliasesFromMetadata(authorityHost, (_a = staticAuthorityOptions.cloudDiscoveryMetadata) == null ? void 0 : _a.metadata, AuthorityMetadataSource.CONFIG, logger) || getAliasesFromMetadata(authorityHost, InstanceDiscoveryMetadata.metadata, AuthorityMetadataSource.HARDCODED_VALUES, logger) || staticAuthorityOptions.knownAuthorities;
  }
  return staticAliases || [];
}
function getAliasesFromMetadata(authorityHost, cloudDiscoveryMetadata, source, logger) {
  logger == null ? void 0 : logger.trace(`getAliasesFromMetadata called with source: ${source}`);
  if (authorityHost && cloudDiscoveryMetadata) {
    const metadata = getCloudDiscoveryMetadataFromNetworkResponse(cloudDiscoveryMetadata, authorityHost);
    if (metadata) {
      logger == null ? void 0 : logger.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${source}, returning aliases`);
      return metadata.aliases;
    } else {
      logger == null ? void 0 : logger.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${source}`);
    }
  }
  return null;
}
function getCloudDiscoveryMetadataFromHardcodedValues(authorityHost) {
  const metadata = getCloudDiscoveryMetadataFromNetworkResponse(InstanceDiscoveryMetadata.metadata, authorityHost);
  return metadata;
}
function getCloudDiscoveryMetadataFromNetworkResponse(response, authorityHost) {
  for (let i = 0; i < response.length; i++) {
    const metadata = response[i];
    if (metadata.aliases.includes(authorityHost)) {
      return metadata;
    }
  }
  return null;
}

// node_modules/@azure/msal-common/dist/error/CacheErrorCodes.mjs
var cacheQuotaExceededErrorCode = "cache_quota_exceeded";
var cacheUnknownErrorCode = "cache_error_unknown";

// node_modules/@azure/msal-common/dist/error/CacheError.mjs
var CacheErrorMessages = {
  [cacheQuotaExceededErrorCode]: "Exceeded cache storage capacity.",
  [cacheUnknownErrorCode]: "Unexpected error occurred when using cache storage."
};
var CacheError = class _CacheError extends Error {
  constructor(errorCode, errorMessage) {
    const message = errorMessage || (CacheErrorMessages[errorCode] ? CacheErrorMessages[errorCode] : CacheErrorMessages[cacheUnknownErrorCode]);
    super(`${errorCode}: ${message}`);
    Object.setPrototypeOf(this, _CacheError.prototype);
    this.name = "CacheError";
    this.errorCode = errorCode;
    this.errorMessage = message;
  }
};

// node_modules/@azure/msal-common/dist/cache/CacheManager.mjs
var CacheManager = class {
  constructor(clientId, cryptoImpl, logger, staticAuthorityOptions) {
    this.clientId = clientId;
    this.cryptoImpl = cryptoImpl;
    this.commonLogger = logger.clone(name, version);
    this.staticAuthorityOptions = staticAuthorityOptions;
  }
  /**
   * Returns all the accounts in the cache that match the optional filter. If no filter is provided, all accounts are returned.
   * @param accountFilter - (Optional) filter to narrow down the accounts returned
   * @returns Array of AccountInfo objects in cache
   */
  getAllAccounts(accountFilter) {
    return this.buildTenantProfiles(this.getAccountsFilteredBy(accountFilter || {}), accountFilter);
  }
  /**
   * Gets first tenanted AccountInfo object found based on provided filters
   */
  getAccountInfoFilteredBy(accountFilter) {
    const allAccounts = this.getAllAccounts(accountFilter);
    if (allAccounts.length > 1) {
      const sortedAccounts = allAccounts.sort((account) => {
        return account.idTokenClaims ? -1 : 1;
      });
      return sortedAccounts[0];
    } else if (allAccounts.length === 1) {
      return allAccounts[0];
    } else {
      return null;
    }
  }
  /**
   * Returns a single matching
   * @param accountFilter
   * @returns
   */
  getBaseAccountInfo(accountFilter) {
    const accountEntities = this.getAccountsFilteredBy(accountFilter);
    if (accountEntities.length > 0) {
      return accountEntities[0].getAccountInfo();
    } else {
      return null;
    }
  }
  /**
   * Matches filtered account entities with cached ID tokens that match the tenant profile-specific account filters
   * and builds the account info objects from the matching ID token's claims
   * @param cachedAccounts
   * @param accountFilter
   * @returns Array of AccountInfo objects that match account and tenant profile filters
   */
  buildTenantProfiles(cachedAccounts, accountFilter) {
    return cachedAccounts.flatMap((accountEntity) => {
      return this.getTenantProfilesFromAccountEntity(accountEntity, accountFilter == null ? void 0 : accountFilter.tenantId, accountFilter);
    });
  }
  getTenantedAccountInfoByFilter(accountInfo, tokenKeys, tenantProfile, tenantProfileFilter) {
    let tenantedAccountInfo = null;
    let idTokenClaims;
    if (tenantProfileFilter) {
      if (!this.tenantProfileMatchesFilter(tenantProfile, tenantProfileFilter)) {
        return null;
      }
    }
    const idToken = this.getIdToken(accountInfo, tokenKeys, tenantProfile.tenantId);
    if (idToken) {
      idTokenClaims = extractTokenClaims(idToken.secret, this.cryptoImpl.base64Decode);
      if (!this.idTokenClaimsMatchTenantProfileFilter(idTokenClaims, tenantProfileFilter)) {
        return null;
      }
    }
    tenantedAccountInfo = updateAccountTenantProfileData(accountInfo, tenantProfile, idTokenClaims, idToken == null ? void 0 : idToken.secret);
    return tenantedAccountInfo;
  }
  getTenantProfilesFromAccountEntity(accountEntity, targetTenantId, tenantProfileFilter) {
    const accountInfo = accountEntity.getAccountInfo();
    let searchTenantProfiles = accountInfo.tenantProfiles || /* @__PURE__ */ new Map();
    const tokenKeys = this.getTokenKeys();
    if (targetTenantId) {
      const tenantProfile = searchTenantProfiles.get(targetTenantId);
      if (tenantProfile) {
        searchTenantProfiles = /* @__PURE__ */ new Map([
          [targetTenantId, tenantProfile]
        ]);
      } else {
        return [];
      }
    }
    const matchingTenantProfiles = [];
    searchTenantProfiles.forEach((tenantProfile) => {
      const tenantedAccountInfo = this.getTenantedAccountInfoByFilter(accountInfo, tokenKeys, tenantProfile, tenantProfileFilter);
      if (tenantedAccountInfo) {
        matchingTenantProfiles.push(tenantedAccountInfo);
      }
    });
    return matchingTenantProfiles;
  }
  tenantProfileMatchesFilter(tenantProfile, tenantProfileFilter) {
    if (!!tenantProfileFilter.localAccountId && !this.matchLocalAccountIdFromTenantProfile(tenantProfile, tenantProfileFilter.localAccountId)) {
      return false;
    }
    if (!!tenantProfileFilter.name && !(tenantProfile.name === tenantProfileFilter.name)) {
      return false;
    }
    if (tenantProfileFilter.isHomeTenant !== void 0 && !(tenantProfile.isHomeTenant === tenantProfileFilter.isHomeTenant)) {
      return false;
    }
    return true;
  }
  idTokenClaimsMatchTenantProfileFilter(idTokenClaims, tenantProfileFilter) {
    if (tenantProfileFilter) {
      if (!!tenantProfileFilter.localAccountId && !this.matchLocalAccountIdFromTokenClaims(idTokenClaims, tenantProfileFilter.localAccountId)) {
        return false;
      }
      if (!!tenantProfileFilter.loginHint && !this.matchLoginHintFromTokenClaims(idTokenClaims, tenantProfileFilter.loginHint)) {
        return false;
      }
      if (!!tenantProfileFilter.username && !this.matchUsername(idTokenClaims.preferred_username, tenantProfileFilter.username)) {
        return false;
      }
      if (!!tenantProfileFilter.name && !this.matchName(idTokenClaims, tenantProfileFilter.name)) {
        return false;
      }
      if (!!tenantProfileFilter.sid && !this.matchSid(idTokenClaims, tenantProfileFilter.sid)) {
        return false;
      }
    }
    return true;
  }
  /**
   * saves a cache record
   * @param cacheRecord {CacheRecord}
   * @param storeInCache {?StoreInCache}
   * @param correlationId {?string} correlation id
   */
  async saveCacheRecord(cacheRecord, correlationId, storeInCache) {
    var _a, _b, _c, _d;
    if (!cacheRecord) {
      throw createClientAuthError(invalidCacheRecord);
    }
    try {
      if (!!cacheRecord.account) {
        await this.setAccount(cacheRecord.account, correlationId);
      }
      if (!!cacheRecord.idToken && (storeInCache == null ? void 0 : storeInCache.idToken) !== false) {
        await this.setIdTokenCredential(cacheRecord.idToken, correlationId);
      }
      if (!!cacheRecord.accessToken && (storeInCache == null ? void 0 : storeInCache.accessToken) !== false) {
        await this.saveAccessToken(cacheRecord.accessToken, correlationId);
      }
      if (!!cacheRecord.refreshToken && (storeInCache == null ? void 0 : storeInCache.refreshToken) !== false) {
        await this.setRefreshTokenCredential(cacheRecord.refreshToken, correlationId);
      }
      if (!!cacheRecord.appMetadata) {
        this.setAppMetadata(cacheRecord.appMetadata);
      }
    } catch (e) {
      (_a = this.commonLogger) == null ? void 0 : _a.error(`CacheManager.saveCacheRecord: failed`);
      if (e instanceof Error) {
        (_b = this.commonLogger) == null ? void 0 : _b.errorPii(`CacheManager.saveCacheRecord: ${e.message}`, correlationId);
        if (e.name === "QuotaExceededError" || e.name === "NS_ERROR_DOM_QUOTA_REACHED" || e.message.includes("exceeded the quota")) {
          (_c = this.commonLogger) == null ? void 0 : _c.error(`CacheManager.saveCacheRecord: exceeded storage quota`, correlationId);
          throw new CacheError(cacheQuotaExceededErrorCode);
        } else {
          throw new CacheError(e.name, e.message);
        }
      } else {
        (_d = this.commonLogger) == null ? void 0 : _d.errorPii(`CacheManager.saveCacheRecord: ${e}`, correlationId);
        throw new CacheError(cacheUnknownErrorCode);
      }
    }
  }
  /**
   * saves access token credential
   * @param credential
   */
  async saveAccessToken(credential, correlationId) {
    const accessTokenFilter = {
      clientId: credential.clientId,
      credentialType: credential.credentialType,
      environment: credential.environment,
      homeAccountId: credential.homeAccountId,
      realm: credential.realm,
      tokenType: credential.tokenType,
      requestedClaimsHash: credential.requestedClaimsHash
    };
    const tokenKeys = this.getTokenKeys();
    const currentScopes = ScopeSet.fromString(credential.target);
    const removedAccessTokens = [];
    tokenKeys.accessToken.forEach((key) => {
      if (!this.accessTokenKeyMatchesFilter(key, accessTokenFilter, false)) {
        return;
      }
      const tokenEntity = this.getAccessTokenCredential(key);
      if (tokenEntity && this.credentialMatchesFilter(tokenEntity, accessTokenFilter)) {
        const tokenScopeSet = ScopeSet.fromString(tokenEntity.target);
        if (tokenScopeSet.intersectingScopeSets(currentScopes)) {
          removedAccessTokens.push(this.removeAccessToken(key));
        }
      }
    });
    await Promise.all(removedAccessTokens);
    await this.setAccessTokenCredential(credential, correlationId);
  }
  /**
   * Retrieve account entities matching all provided tenant-agnostic filters; if no filter is set, get all account entities in the cache
   * Not checking for casing as keys are all generated in lower case, remember to convert to lower case if object properties are compared
   * @param accountFilter - An object containing Account properties to filter by
   */
  getAccountsFilteredBy(accountFilter) {
    const allAccountKeys = this.getAccountKeys();
    const matchingAccounts = [];
    allAccountKeys.forEach((cacheKey) => {
      var _a;
      if (!this.isAccountKey(cacheKey, accountFilter.homeAccountId)) {
        return;
      }
      const entity = this.getAccount(cacheKey, this.commonLogger);
      if (!entity) {
        return;
      }
      if (!!accountFilter.homeAccountId && !this.matchHomeAccountId(entity, accountFilter.homeAccountId)) {
        return;
      }
      if (!!accountFilter.username && !this.matchUsername(entity.username, accountFilter.username)) {
        return;
      }
      if (!!accountFilter.environment && !this.matchEnvironment(entity, accountFilter.environment)) {
        return;
      }
      if (!!accountFilter.realm && !this.matchRealm(entity, accountFilter.realm)) {
        return;
      }
      if (!!accountFilter.nativeAccountId && !this.matchNativeAccountId(entity, accountFilter.nativeAccountId)) {
        return;
      }
      if (!!accountFilter.authorityType && !this.matchAuthorityType(entity, accountFilter.authorityType)) {
        return;
      }
      const tenantProfileFilter = {
        localAccountId: accountFilter == null ? void 0 : accountFilter.localAccountId,
        name: accountFilter == null ? void 0 : accountFilter.name
      };
      const matchingTenantProfiles = (_a = entity.tenantProfiles) == null ? void 0 : _a.filter((tenantProfile) => {
        return this.tenantProfileMatchesFilter(tenantProfile, tenantProfileFilter);
      });
      if (matchingTenantProfiles && matchingTenantProfiles.length === 0) {
        return;
      }
      matchingAccounts.push(entity);
    });
    return matchingAccounts;
  }
  /**
   * Returns true if the given key matches our account key schema. Also matches homeAccountId and/or tenantId if provided
   * @param key
   * @param homeAccountId
   * @param tenantId
   * @returns
   */
  isAccountKey(key, homeAccountId, tenantId) {
    if (key.split(Separators.CACHE_KEY_SEPARATOR).length < 3) {
      return false;
    }
    if (homeAccountId && !key.toLowerCase().includes(homeAccountId.toLowerCase())) {
      return false;
    }
    if (tenantId && !key.toLowerCase().includes(tenantId.toLowerCase())) {
      return false;
    }
    return true;
  }
  /**
   * Returns true if the given key matches our credential key schema.
   * @param key
   */
  isCredentialKey(key) {
    if (key.split(Separators.CACHE_KEY_SEPARATOR).length < 6) {
      return false;
    }
    const lowerCaseKey = key.toLowerCase();
    if (lowerCaseKey.indexOf(CredentialType.ID_TOKEN.toLowerCase()) === -1 && lowerCaseKey.indexOf(CredentialType.ACCESS_TOKEN.toLowerCase()) === -1 && lowerCaseKey.indexOf(CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()) === -1 && lowerCaseKey.indexOf(CredentialType.REFRESH_TOKEN.toLowerCase()) === -1) {
      return false;
    }
    if (lowerCaseKey.indexOf(CredentialType.REFRESH_TOKEN.toLowerCase()) > -1) {
      const clientIdValidation = `${CredentialType.REFRESH_TOKEN}${Separators.CACHE_KEY_SEPARATOR}${this.clientId}${Separators.CACHE_KEY_SEPARATOR}`;
      const familyIdValidation = `${CredentialType.REFRESH_TOKEN}${Separators.CACHE_KEY_SEPARATOR}${THE_FAMILY_ID}${Separators.CACHE_KEY_SEPARATOR}`;
      if (lowerCaseKey.indexOf(clientIdValidation.toLowerCase()) === -1 && lowerCaseKey.indexOf(familyIdValidation.toLowerCase()) === -1) {
        return false;
      }
    } else if (lowerCaseKey.indexOf(this.clientId.toLowerCase()) === -1) {
      return false;
    }
    return true;
  }
  /**
   * Returns whether or not the given credential entity matches the filter
   * @param entity
   * @param filter
   * @returns
   */
  credentialMatchesFilter(entity, filter) {
    if (!!filter.clientId && !this.matchClientId(entity, filter.clientId)) {
      return false;
    }
    if (!!filter.userAssertionHash && !this.matchUserAssertionHash(entity, filter.userAssertionHash)) {
      return false;
    }
    if (typeof filter.homeAccountId === "string" && !this.matchHomeAccountId(entity, filter.homeAccountId)) {
      return false;
    }
    if (!!filter.environment && !this.matchEnvironment(entity, filter.environment)) {
      return false;
    }
    if (!!filter.realm && !this.matchRealm(entity, filter.realm)) {
      return false;
    }
    if (!!filter.credentialType && !this.matchCredentialType(entity, filter.credentialType)) {
      return false;
    }
    if (!!filter.familyId && !this.matchFamilyId(entity, filter.familyId)) {
      return false;
    }
    if (!!filter.target && !this.matchTarget(entity, filter.target)) {
      return false;
    }
    if (filter.requestedClaimsHash || entity.requestedClaimsHash) {
      if (entity.requestedClaimsHash !== filter.requestedClaimsHash) {
        return false;
      }
    }
    if (entity.credentialType === CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME) {
      if (!!filter.tokenType && !this.matchTokenType(entity, filter.tokenType)) {
        return false;
      }
      if (filter.tokenType === AuthenticationScheme.SSH) {
        if (filter.keyId && !this.matchKeyId(entity, filter.keyId)) {
          return false;
        }
      }
    }
    return true;
  }
  /**
   * retrieve appMetadata matching all provided filters; if no filter is set, get all appMetadata
   * @param filter
   */
  getAppMetadataFilteredBy(filter) {
    const allCacheKeys = this.getKeys();
    const matchingAppMetadata = {};
    allCacheKeys.forEach((cacheKey) => {
      if (!this.isAppMetadata(cacheKey)) {
        return;
      }
      const entity = this.getAppMetadata(cacheKey);
      if (!entity) {
        return;
      }
      if (!!filter.environment && !this.matchEnvironment(entity, filter.environment)) {
        return;
      }
      if (!!filter.clientId && !this.matchClientId(entity, filter.clientId)) {
        return;
      }
      matchingAppMetadata[cacheKey] = entity;
    });
    return matchingAppMetadata;
  }
  /**
   * retrieve authorityMetadata that contains a matching alias
   * @param filter
   */
  getAuthorityMetadataByAlias(host) {
    const allCacheKeys = this.getAuthorityMetadataKeys();
    let matchedEntity = null;
    allCacheKeys.forEach((cacheKey) => {
      if (!this.isAuthorityMetadata(cacheKey) || cacheKey.indexOf(this.clientId) === -1) {
        return;
      }
      const entity = this.getAuthorityMetadata(cacheKey);
      if (!entity) {
        return;
      }
      if (entity.aliases.indexOf(host) === -1) {
        return;
      }
      matchedEntity = entity;
    });
    return matchedEntity;
  }
  /**
   * Removes all accounts and related tokens from cache.
   */
  async removeAllAccounts() {
    const allAccountKeys = this.getAccountKeys();
    const removedAccounts = [];
    allAccountKeys.forEach((cacheKey) => {
      removedAccounts.push(this.removeAccount(cacheKey));
    });
    await Promise.all(removedAccounts);
  }
  /**
   * Removes the account and related tokens for a given account key
   * @param account
   */
  async removeAccount(accountKey) {
    const account = this.getAccount(accountKey, this.commonLogger);
    if (!account) {
      return;
    }
    await this.removeAccountContext(account);
    this.removeItem(accountKey);
  }
  /**
   * Removes credentials associated with the provided account
   * @param account
   */
  async removeAccountContext(account) {
    const allTokenKeys = this.getTokenKeys();
    const accountId = account.generateAccountId();
    const removedCredentials = [];
    allTokenKeys.idToken.forEach((key) => {
      if (key.indexOf(accountId) === 0) {
        this.removeIdToken(key);
      }
    });
    allTokenKeys.accessToken.forEach((key) => {
      if (key.indexOf(accountId) === 0) {
        removedCredentials.push(this.removeAccessToken(key));
      }
    });
    allTokenKeys.refreshToken.forEach((key) => {
      if (key.indexOf(accountId) === 0) {
        this.removeRefreshToken(key);
      }
    });
    await Promise.all(removedCredentials);
  }
  /**
   * returns a boolean if the given credential is removed
   * @param credential
   */
  async removeAccessToken(key) {
    const credential = this.getAccessTokenCredential(key);
    if (!credential) {
      return;
    }
    if (credential.credentialType.toLowerCase() === CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()) {
      if (credential.tokenType === AuthenticationScheme.POP) {
        const accessTokenWithAuthSchemeEntity = credential;
        const kid = accessTokenWithAuthSchemeEntity.keyId;
        if (kid) {
          try {
            await this.cryptoImpl.removeTokenBindingKey(kid);
          } catch (error) {
            throw createClientAuthError(bindingKeyNotRemoved);
          }
        }
      }
    }
    return this.removeItem(key);
  }
  /**
   * Removes all app metadata objects from cache.
   */
  removeAppMetadata() {
    const allCacheKeys = this.getKeys();
    allCacheKeys.forEach((cacheKey) => {
      if (this.isAppMetadata(cacheKey)) {
        this.removeItem(cacheKey);
      }
    });
    return true;
  }
  /**
   * Retrieve AccountEntity from cache
   * @param account
   */
  readAccountFromCache(account) {
    const accountKey = AccountEntity.generateAccountCacheKey(account);
    return this.getAccount(accountKey, this.commonLogger);
  }
  /**
   * Retrieve IdTokenEntity from cache
   * @param account {AccountInfo}
   * @param tokenKeys {?TokenKeys}
   * @param targetRealm {?string}
   * @param performanceClient {?IPerformanceClient}
   * @param correlationId {?string}
   */
  getIdToken(account, tokenKeys, targetRealm, performanceClient, correlationId) {
    this.commonLogger.trace("CacheManager - getIdToken called");
    const idTokenFilter = {
      homeAccountId: account.homeAccountId,
      environment: account.environment,
      credentialType: CredentialType.ID_TOKEN,
      clientId: this.clientId,
      realm: targetRealm
    };
    const idTokenMap = this.getIdTokensByFilter(idTokenFilter, tokenKeys);
    const numIdTokens = idTokenMap.size;
    if (numIdTokens < 1) {
      this.commonLogger.info("CacheManager:getIdToken - No token found");
      return null;
    } else if (numIdTokens > 1) {
      let tokensToBeRemoved = idTokenMap;
      if (!targetRealm) {
        const homeIdTokenMap = /* @__PURE__ */ new Map();
        idTokenMap.forEach((idToken, key) => {
          if (idToken.realm === account.tenantId) {
            homeIdTokenMap.set(key, idToken);
          }
        });
        const numHomeIdTokens = homeIdTokenMap.size;
        if (numHomeIdTokens < 1) {
          this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result");
          return idTokenMap.values().next().value;
        } else if (numHomeIdTokens === 1) {
          this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile");
          return homeIdTokenMap.values().next().value;
        } else {
          tokensToBeRemoved = homeIdTokenMap;
        }
      }
      this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them");
      tokensToBeRemoved.forEach((idToken, key) => {
        this.removeIdToken(key);
      });
      if (performanceClient && correlationId) {
        performanceClient.addFields({ multiMatchedID: idTokenMap.size }, correlationId);
      }
      return null;
    }
    this.commonLogger.info("CacheManager:getIdToken - Returning ID token");
    return idTokenMap.values().next().value;
  }
  /**
   * Gets all idTokens matching the given filter
   * @param filter
   * @returns
   */
  getIdTokensByFilter(filter, tokenKeys) {
    const idTokenKeys = tokenKeys && tokenKeys.idToken || this.getTokenKeys().idToken;
    const idTokens = /* @__PURE__ */ new Map();
    idTokenKeys.forEach((key) => {
      if (!this.idTokenKeyMatchesFilter(key, {
        clientId: this.clientId,
        ...filter
      })) {
        return;
      }
      const idToken = this.getIdTokenCredential(key);
      if (idToken && this.credentialMatchesFilter(idToken, filter)) {
        idTokens.set(key, idToken);
      }
    });
    return idTokens;
  }
  /**
   * Validate the cache key against filter before retrieving and parsing cache value
   * @param key
   * @param filter
   * @returns
   */
  idTokenKeyMatchesFilter(inputKey, filter) {
    const key = inputKey.toLowerCase();
    if (filter.clientId && key.indexOf(filter.clientId.toLowerCase()) === -1) {
      return false;
    }
    if (filter.homeAccountId && key.indexOf(filter.homeAccountId.toLowerCase()) === -1) {
      return false;
    }
    return true;
  }
  /**
   * Removes idToken from the cache
   * @param key
   */
  removeIdToken(key) {
    this.removeItem(key);
  }
  /**
   * Removes refresh token from the cache
   * @param key
   */
  removeRefreshToken(key) {
    this.removeItem(key);
  }
  /**
   * Retrieve AccessTokenEntity from cache
   * @param account {AccountInfo}
   * @param request {BaseAuthRequest}
   * @param tokenKeys {?TokenKeys}
   * @param performanceClient {?IPerformanceClient}
   * @param correlationId {?string}
   */
  getAccessToken(account, request, tokenKeys, targetRealm, performanceClient, correlationId) {
    this.commonLogger.trace("CacheManager - getAccessToken called");
    const scopes = ScopeSet.createSearchScopes(request.scopes);
    const authScheme = request.authenticationScheme || AuthenticationScheme.BEARER;
    const credentialType = authScheme && authScheme.toLowerCase() !== AuthenticationScheme.BEARER.toLowerCase() ? CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME : CredentialType.ACCESS_TOKEN;
    const accessTokenFilter = {
      homeAccountId: account.homeAccountId,
      environment: account.environment,
      credentialType,
      clientId: this.clientId,
      realm: targetRealm || account.tenantId,
      target: scopes,
      tokenType: authScheme,
      keyId: request.sshKid,
      requestedClaimsHash: request.requestedClaimsHash
    };
    const accessTokenKeys = tokenKeys && tokenKeys.accessToken || this.getTokenKeys().accessToken;
    const accessTokens = [];
    accessTokenKeys.forEach((key) => {
      if (this.accessTokenKeyMatchesFilter(key, accessTokenFilter, true)) {
        const accessToken = this.getAccessTokenCredential(key);
        if (accessToken && this.credentialMatchesFilter(accessToken, accessTokenFilter)) {
          accessTokens.push(accessToken);
        }
      }
    });
    const numAccessTokens = accessTokens.length;
    if (numAccessTokens < 1) {
      this.commonLogger.info("CacheManager:getAccessToken - No token found");
      return null;
    } else if (numAccessTokens > 1) {
      this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them");
      accessTokens.forEach((accessToken) => {
        void this.removeAccessToken(generateCredentialKey(accessToken));
      });
      if (performanceClient && correlationId) {
        performanceClient.addFields({ multiMatchedAT: accessTokens.length }, correlationId);
      }
      return null;
    }
    this.commonLogger.info("CacheManager:getAccessToken - Returning access token");
    return accessTokens[0];
  }
  /**
   * Validate the cache key against filter before retrieving and parsing cache value
   * @param key
   * @param filter
   * @param keyMustContainAllScopes
   * @returns
   */
  accessTokenKeyMatchesFilter(inputKey, filter, keyMustContainAllScopes) {
    const key = inputKey.toLowerCase();
    if (filter.clientId && key.indexOf(filter.clientId.toLowerCase()) === -1) {
      return false;
    }
    if (filter.homeAccountId && key.indexOf(filter.homeAccountId.toLowerCase()) === -1) {
      return false;
    }
    if (filter.realm && key.indexOf(filter.realm.toLowerCase()) === -1) {
      return false;
    }
    if (filter.requestedClaimsHash && key.indexOf(filter.requestedClaimsHash.toLowerCase()) === -1) {
      return false;
    }
    if (filter.target) {
      const scopes = filter.target.asArray();
      for (let i = 0; i < scopes.length; i++) {
        if (keyMustContainAllScopes && !key.includes(scopes[i].toLowerCase())) {
          return false;
        } else if (!keyMustContainAllScopes && key.includes(scopes[i].toLowerCase())) {
          return true;
        }
      }
    }
    return true;
  }
  /**
   * Gets all access tokens matching the filter
   * @param filter
   * @returns
   */
  getAccessTokensByFilter(filter) {
    const tokenKeys = this.getTokenKeys();
    const accessTokens = [];
    tokenKeys.accessToken.forEach((key) => {
      if (!this.accessTokenKeyMatchesFilter(key, filter, true)) {
        return;
      }
      const accessToken = this.getAccessTokenCredential(key);
      if (accessToken && this.credentialMatchesFilter(accessToken, filter)) {
        accessTokens.push(accessToken);
      }
    });
    return accessTokens;
  }
  /**
   * Helper to retrieve the appropriate refresh token from cache
   * @param account {AccountInfo}
   * @param familyRT {boolean}
   * @param tokenKeys {?TokenKeys}
   * @param performanceClient {?IPerformanceClient}
   * @param correlationId {?string}
   */
  getRefreshToken(account, familyRT, tokenKeys, performanceClient, correlationId) {
    this.commonLogger.trace("CacheManager - getRefreshToken called");
    const id = familyRT ? THE_FAMILY_ID : void 0;
    const refreshTokenFilter = {
      homeAccountId: account.homeAccountId,
      environment: account.environment,
      credentialType: CredentialType.REFRESH_TOKEN,
      clientId: this.clientId,
      familyId: id
    };
    const refreshTokenKeys = tokenKeys && tokenKeys.refreshToken || this.getTokenKeys().refreshToken;
    const refreshTokens = [];
    refreshTokenKeys.forEach((key) => {
      if (this.refreshTokenKeyMatchesFilter(key, refreshTokenFilter)) {
        const refreshToken = this.getRefreshTokenCredential(key);
        if (refreshToken && this.credentialMatchesFilter(refreshToken, refreshTokenFilter)) {
          refreshTokens.push(refreshToken);
        }
      }
    });
    const numRefreshTokens = refreshTokens.length;
    if (numRefreshTokens < 1) {
      this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found.");
      return null;
    }
    if (numRefreshTokens > 1 && performanceClient && correlationId) {
      performanceClient.addFields({ multiMatchedRT: numRefreshTokens }, correlationId);
    }
    this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token");
    return refreshTokens[0];
  }
  /**
   * Validate the cache key against filter before retrieving and parsing cache value
   * @param key
   * @param filter
   */
  refreshTokenKeyMatchesFilter(inputKey, filter) {
    const key = inputKey.toLowerCase();
    if (filter.familyId && key.indexOf(filter.familyId.toLowerCase()) === -1) {
      return false;
    }
    if (!filter.familyId && filter.clientId && key.indexOf(filter.clientId.toLowerCase()) === -1) {
      return false;
    }
    if (filter.homeAccountId && key.indexOf(filter.homeAccountId.toLowerCase()) === -1) {
      return false;
    }
    return true;
  }
  /**
   * Retrieve AppMetadataEntity from cache
   */
  readAppMetadataFromCache(environment) {
    const appMetadataFilter = {
      environment,
      clientId: this.clientId
    };
    const appMetadata = this.getAppMetadataFilteredBy(appMetadataFilter);
    const appMetadataEntries = Object.keys(appMetadata).map((key) => appMetadata[key]);
    const numAppMetadata = appMetadataEntries.length;
    if (numAppMetadata < 1) {
      return null;
    } else if (numAppMetadata > 1) {
      throw createClientAuthError(multipleMatchingAppMetadata);
    }
    return appMetadataEntries[0];
  }
  /**
   * Return the family_id value associated  with FOCI
   * @param environment
   * @param clientId
   */
  isAppMetadataFOCI(environment) {
    const appMetadata = this.readAppMetadataFromCache(environment);
    return !!(appMetadata && appMetadata.familyId === THE_FAMILY_ID);
  }
  /**
   * helper to match account ids
   * @param value
   * @param homeAccountId
   */
  matchHomeAccountId(entity, homeAccountId) {
    return !!(typeof entity.homeAccountId === "string" && homeAccountId === entity.homeAccountId);
  }
  /**
   * helper to match account ids
   * @param entity
   * @param localAccountId
   * @returns
   */
  matchLocalAccountIdFromTokenClaims(tokenClaims, localAccountId) {
    const idTokenLocalAccountId = tokenClaims.oid || tokenClaims.sub;
    return localAccountId === idTokenLocalAccountId;
  }
  matchLocalAccountIdFromTenantProfile(tenantProfile, localAccountId) {
    return tenantProfile.localAccountId === localAccountId;
  }
  /**
   * helper to match names
   * @param entity
   * @param name
   * @returns true if the downcased name properties are present and match in the filter and the entity
   */
  matchName(claims, name3) {
    var _a;
    return !!(name3.toLowerCase() === ((_a = claims.name) == null ? void 0 : _a.toLowerCase()));
  }
  /**
   * helper to match usernames
   * @param entity
   * @param username
   * @returns
   */
  matchUsername(cachedUsername, filterUsername) {
    return !!(cachedUsername && typeof cachedUsername === "string" && (filterUsername == null ? void 0 : filterUsername.toLowerCase()) === cachedUsername.toLowerCase());
  }
  /**
   * helper to match assertion
   * @param value
   * @param oboAssertion
   */
  matchUserAssertionHash(entity, userAssertionHash) {
    return !!(entity.userAssertionHash && userAssertionHash === entity.userAssertionHash);
  }
  /**
   * helper to match environment
   * @param value
   * @param environment
   */
  matchEnvironment(entity, environment) {
    if (this.staticAuthorityOptions) {
      const staticAliases = getAliasesFromStaticSources(this.staticAuthorityOptions, this.commonLogger);
      if (staticAliases.includes(environment) && staticAliases.includes(entity.environment)) {
        return true;
      }
    }
    const cloudMetadata = this.getAuthorityMetadataByAlias(environment);
    if (cloudMetadata && cloudMetadata.aliases.indexOf(entity.environment) > -1) {
      return true;
    }
    return false;
  }
  /**
   * helper to match credential type
   * @param entity
   * @param credentialType
   */
  matchCredentialType(entity, credentialType) {
    return entity.credentialType && credentialType.toLowerCase() === entity.credentialType.toLowerCase();
  }
  /**
   * helper to match client ids
   * @param entity
   * @param clientId
   */
  matchClientId(entity, clientId) {
    return !!(entity.clientId && clientId === entity.clientId);
  }
  /**
   * helper to match family ids
   * @param entity
   * @param familyId
   */
  matchFamilyId(entity, familyId) {
    return !!(entity.familyId && familyId === entity.familyId);
  }
  /**
   * helper to match realm
   * @param entity
   * @param realm
   */
  matchRealm(entity, realm) {
    var _a;
    return !!(((_a = entity.realm) == null ? void 0 : _a.toLowerCase()) === realm.toLowerCase());
  }
  /**
   * helper to match nativeAccountId
   * @param entity
   * @param nativeAccountId
   * @returns boolean indicating the match result
   */
  matchNativeAccountId(entity, nativeAccountId) {
    return !!(entity.nativeAccountId && nativeAccountId === entity.nativeAccountId);
  }
  /**
   * helper to match loginHint which can be either:
   * 1. login_hint ID token claim
   * 2. username in cached account object
   * 3. upn in ID token claims
   * @param entity
   * @param loginHint
   * @returns
   */
  matchLoginHintFromTokenClaims(tokenClaims, loginHint) {
    if (tokenClaims.login_hint === loginHint) {
      return true;
    }
    if (tokenClaims.preferred_username === loginHint) {
      return true;
    }
    if (tokenClaims.upn === loginHint) {
      return true;
    }
    return false;
  }
  /**
   * Helper to match sid
   * @param entity
   * @param sid
   * @returns true if the sid claim is present and matches the filter
   */
  matchSid(idTokenClaims, sid) {
    return idTokenClaims.sid === sid;
  }
  matchAuthorityType(entity, authorityType) {
    return !!(entity.authorityType && authorityType.toLowerCase() === entity.authorityType.toLowerCase());
  }
  /**
   * Returns true if the target scopes are a subset of the current entity's scopes, false otherwise.
   * @param entity
   * @param target
   */
  matchTarget(entity, target) {
    const isNotAccessTokenCredential = entity.credentialType !== CredentialType.ACCESS_TOKEN && entity.credentialType !== CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME;
    if (isNotAccessTokenCredential || !entity.target) {
      return false;
    }
    const entityScopeSet = ScopeSet.fromString(entity.target);
    return entityScopeSet.containsScopeSet(target);
  }
  /**
   * Returns true if the credential's tokenType or Authentication Scheme matches the one in the request, false otherwise
   * @param entity
   * @param tokenType
   */
  matchTokenType(entity, tokenType) {
    return !!(entity.tokenType && entity.tokenType === tokenType);
  }
  /**
   * Returns true if the credential's keyId matches the one in the request, false otherwise
   * @param entity
   * @param keyId
   */
  matchKeyId(entity, keyId) {
    return !!(entity.keyId && entity.keyId === keyId);
  }
  /**
   * returns if a given cache entity is of the type appmetadata
   * @param key
   */
  isAppMetadata(key) {
    return key.indexOf(APP_METADATA) !== -1;
  }
  /**
   * returns if a given cache entity is of the type authoritymetadata
   * @param key
   */
  isAuthorityMetadata(key) {
    return key.indexOf(AUTHORITY_METADATA_CONSTANTS.CACHE_KEY) !== -1;
  }
  /**
   * returns cache key used for cloud instance metadata
   */
  generateAuthorityMetadataCacheKey(authority) {
    return `${AUTHORITY_METADATA_CONSTANTS.CACHE_KEY}-${this.clientId}-${authority}`;
  }
  /**
   * Helper to convert serialized data to object
   * @param obj
   * @param json
   */
  static toObject(obj, json) {
    for (const propertyName in json) {
      obj[propertyName] = json[propertyName];
    }
    return obj;
  }
};
var DefaultStorageClass = class extends CacheManager {
  async setAccount() {
    throw createClientAuthError(methodNotImplemented);
  }
  getAccount() {
    throw createClientAuthError(methodNotImplemented);
  }
  async setIdTokenCredential() {
    throw createClientAuthError(methodNotImplemented);
  }
  getIdTokenCredential() {
    throw createClientAuthError(methodNotImplemented);
  }
  async setAccessTokenCredential() {
    throw createClientAuthError(methodNotImplemented);
  }
  getAccessTokenCredential() {
    throw createClientAuthError(methodNotImplemented);
  }
  async setRefreshTokenCredential() {
    throw createClientAuthError(methodNotImplemented);
  }
  getRefreshTokenCredential() {
    throw createClientAuthError(methodNotImplemented);
  }
  setAppMetadata() {
    throw createClientAuthError(methodNotImplemented);
  }
  getAppMetadata() {
    throw createClientAuthError(methodNotImplemented);
  }
  setServerTelemetry() {
    throw createClientAuthError(methodNotImplemented);
  }
  getServerTelemetry() {
    throw createClientAuthError(methodNotImplemented);
  }
  setAuthorityMetadata() {
    throw createClientAuthError(methodNotImplemented);
  }
  getAuthorityMetadata() {
    throw createClientAuthError(methodNotImplemented);
  }
  getAuthorityMetadataKeys() {
    throw createClientAuthError(methodNotImplemented);
  }
  setThrottlingCache() {
    throw createClientAuthError(methodNotImplemented);
  }
  getThrottlingCache() {
    throw createClientAuthError(methodNotImplemented);
  }
  removeItem() {
    throw createClientAuthError(methodNotImplemented);
  }
  getKeys() {
    throw createClientAuthError(methodNotImplemented);
  }
  getAccountKeys() {
    throw createClientAuthError(methodNotImplemented);
  }
  getTokenKeys() {
    throw createClientAuthError(methodNotImplemented);
  }
};

// node_modules/@azure/msal-common/dist/config/ClientConfiguration.mjs
var DEFAULT_SYSTEM_OPTIONS = {
  tokenRenewalOffsetSeconds: DEFAULT_TOKEN_RENEWAL_OFFSET_SEC,
  preventCorsPreflight: false
};
var DEFAULT_LOGGER_IMPLEMENTATION = {
  loggerCallback: () => {
  },
  piiLoggingEnabled: false,
  logLevel: LogLevel.Info,
  correlationId: Constants.EMPTY_STRING
};
var DEFAULT_CACHE_OPTIONS = {
  claimsBasedCachingEnabled: false
};
var DEFAULT_NETWORK_IMPLEMENTATION = {
  async sendGetRequestAsync() {
    throw createClientAuthError(methodNotImplemented);
  },
  async sendPostRequestAsync() {
    throw createClientAuthError(methodNotImplemented);
  }
};
var DEFAULT_LIBRARY_INFO = {
  sku: Constants.SKU,
  version,
  cpu: Constants.EMPTY_STRING,
  os: Constants.EMPTY_STRING
};
var DEFAULT_CLIENT_CREDENTIALS = {
  clientSecret: Constants.EMPTY_STRING,
  clientAssertion: void 0
};
var DEFAULT_AZURE_CLOUD_OPTIONS = {
  azureCloudInstance: AzureCloudInstance.None,
  tenant: `${Constants.DEFAULT_COMMON_TENANT}`
};
var DEFAULT_TELEMETRY_OPTIONS = {
  application: {
    appName: "",
    appVersion: ""
  }
};
function buildClientConfiguration({ authOptions: userAuthOptions, systemOptions: userSystemOptions, loggerOptions: userLoggerOption, cacheOptions: userCacheOptions, storageInterface: storageImplementation, networkInterface: networkImplementation, cryptoInterface: cryptoImplementation, clientCredentials, libraryInfo, telemetry, serverTelemetryManager, persistencePlugin, serializableCache }) {
  const loggerOptions = {
    ...DEFAULT_LOGGER_IMPLEMENTATION,
    ...userLoggerOption
  };
  return {
    authOptions: buildAuthOptions(userAuthOptions),
    systemOptions: { ...DEFAULT_SYSTEM_OPTIONS, ...userSystemOptions },
    loggerOptions,
    cacheOptions: { ...DEFAULT_CACHE_OPTIONS, ...userCacheOptions },
    storageInterface: storageImplementation || new DefaultStorageClass(userAuthOptions.clientId, DEFAULT_CRYPTO_IMPLEMENTATION, new Logger(loggerOptions)),
    networkInterface: networkImplementation || DEFAULT_NETWORK_IMPLEMENTATION,
    cryptoInterface: cryptoImplementation || DEFAULT_CRYPTO_IMPLEMENTATION,
    clientCredentials: clientCredentials || DEFAULT_CLIENT_CREDENTIALS,
    libraryInfo: { ...DEFAULT_LIBRARY_INFO, ...libraryInfo },
    telemetry: { ...DEFAULT_TELEMETRY_OPTIONS, ...telemetry },
    serverTelemetryManager: serverTelemetryManager || null,
    persistencePlugin: persistencePlugin || null,
    serializableCache: serializableCache || null
  };
}
function buildAuthOptions(authOptions) {
  return {
    clientCapabilities: [],
    azureCloudOptions: DEFAULT_AZURE_CLOUD_OPTIONS,
    skipAuthorityMetadataCache: false,
    instanceAware: false,
    ...authOptions
  };
}
function isOidcProtocolMode(config2) {
  return config2.authOptions.authority.options.protocolMode === ProtocolMode.OIDC;
}

// node_modules/@azure/msal-common/dist/account/CcsCredential.mjs
var CcsCredentialType = {
  HOME_ACCOUNT_ID: "home_account_id",
  UPN: "UPN"
};

// node_modules/@azure/msal-common/dist/request/RequestParameterBuilder.mjs
var RequestParameterBuilder_exports = {};
__export(RequestParameterBuilder_exports, {
  addApplicationTelemetry: () => addApplicationTelemetry,
  addAuthorizationCode: () => addAuthorizationCode,
  addBrokerParameters: () => addBrokerParameters,
  addCcsOid: () => addCcsOid,
  addCcsUpn: () => addCcsUpn,
  addClaims: () => addClaims,
  addClientAssertion: () => addClientAssertion,
  addClientAssertionType: () => addClientAssertionType,
  addClientCapabilitiesToClaims: () => addClientCapabilitiesToClaims,
  addClientId: () => addClientId,
  addClientInfo: () => addClientInfo,
  addClientSecret: () => addClientSecret,
  addCodeChallengeParams: () => addCodeChallengeParams,
  addCodeVerifier: () => addCodeVerifier,
  addCorrelationId: () => addCorrelationId,
  addDeviceCode: () => addDeviceCode,
  addDomainHint: () => addDomainHint,
  addEARParameters: () => addEARParameters,
  addExtraQueryParameters: () => addExtraQueryParameters,
  addGrantType: () => addGrantType,
  addIdTokenHint: () => addIdTokenHint,
  addInstanceAware: () => addInstanceAware,
  addLibraryInfo: () => addLibraryInfo,
  addLoginHint: () => addLoginHint,
  addLogoutHint: () => addLogoutHint,
  addNativeBroker: () => addNativeBroker,
  addNonce: () => addNonce,
  addOboAssertion: () => addOboAssertion,
  addPassword: () => addPassword,
  addPopToken: () => addPopToken,
  addPostLogoutRedirectUri: () => addPostLogoutRedirectUri,
  addPrompt: () => addPrompt,
  addRedirectUri: () => addRedirectUri,
  addRefreshToken: () => addRefreshToken,
  addRequestTokenUse: () => addRequestTokenUse,
  addResponseMode: () => addResponseMode,
  addResponseType: () => addResponseType,
  addScopes: () => addScopes,
  addServerTelemetry: () => addServerTelemetry,
  addSid: () => addSid,
  addSshJwk: () => addSshJwk,
  addState: () => addState,
  addThrottling: () => addThrottling,
  addUsername: () => addUsername,
  instrumentBrokerParams: () => instrumentBrokerParams
});

// node_modules/@azure/msal-common/dist/constants/AADServerParamKeys.mjs
var AADServerParamKeys_exports = {};
__export(AADServerParamKeys_exports, {
  ACCESS_TOKEN: () => ACCESS_TOKEN,
  BROKER_CLIENT_ID: () => BROKER_CLIENT_ID,
  BROKER_REDIRECT_URI: () => BROKER_REDIRECT_URI,
  CCS_HEADER: () => CCS_HEADER,
  CLAIMS: () => CLAIMS,
  CLIENT_ASSERTION: () => CLIENT_ASSERTION,
  CLIENT_ASSERTION_TYPE: () => CLIENT_ASSERTION_TYPE,
  CLIENT_ID: () => CLIENT_ID,
  CLIENT_INFO: () => CLIENT_INFO2,
  CLIENT_REQUEST_ID: () => CLIENT_REQUEST_ID,
  CLIENT_SECRET: () => CLIENT_SECRET,
  CODE: () => CODE,
  CODE_CHALLENGE: () => CODE_CHALLENGE,
  CODE_CHALLENGE_METHOD: () => CODE_CHALLENGE_METHOD,
  CODE_VERIFIER: () => CODE_VERIFIER,
  DEVICE_CODE: () => DEVICE_CODE,
  DOMAIN_HINT: () => DOMAIN_HINT,
  EAR_JWE_CRYPTO: () => EAR_JWE_CRYPTO,
  EAR_JWK: () => EAR_JWK,
  ERROR: () => ERROR,
  ERROR_DESCRIPTION: () => ERROR_DESCRIPTION,
  EXPIRES_IN: () => EXPIRES_IN,
  FOCI: () => FOCI,
  GRANT_TYPE: () => GRANT_TYPE,
  ID_TOKEN: () => ID_TOKEN,
  ID_TOKEN_HINT: () => ID_TOKEN_HINT,
  INSTANCE_AWARE: () => INSTANCE_AWARE,
  LOGIN_HINT: () => LOGIN_HINT,
  LOGOUT_HINT: () => LOGOUT_HINT,
  NATIVE_BROKER: () => NATIVE_BROKER,
  NONCE: () => NONCE,
  OBO_ASSERTION: () => OBO_ASSERTION,
  ON_BEHALF_OF: () => ON_BEHALF_OF,
  POST_LOGOUT_URI: () => POST_LOGOUT_URI,
  PROMPT: () => PROMPT,
  REDIRECT_URI: () => REDIRECT_URI,
  REFRESH_TOKEN: () => REFRESH_TOKEN,
  REFRESH_TOKEN_EXPIRES_IN: () => REFRESH_TOKEN_EXPIRES_IN,
  REQUESTED_TOKEN_USE: () => REQUESTED_TOKEN_USE,
  REQ_CNF: () => REQ_CNF,
  RESPONSE_MODE: () => RESPONSE_MODE,
  RESPONSE_TYPE: () => RESPONSE_TYPE,
  RETURN_SPA_CODE: () => RETURN_SPA_CODE,
  SCOPE: () => SCOPE,
  SESSION_STATE: () => SESSION_STATE,
  SID: () => SID,
  STATE: () => STATE,
  TOKEN_TYPE: () => TOKEN_TYPE,
  X_APP_NAME: () => X_APP_NAME,
  X_APP_VER: () => X_APP_VER,
  X_CLIENT_CPU: () => X_CLIENT_CPU,
  X_CLIENT_CURR_TELEM: () => X_CLIENT_CURR_TELEM,
  X_CLIENT_EXTRA_SKU: () => X_CLIENT_EXTRA_SKU,
  X_CLIENT_LAST_TELEM: () => X_CLIENT_LAST_TELEM,
  X_CLIENT_OS: () => X_CLIENT_OS,
  X_CLIENT_SKU: () => X_CLIENT_SKU,
  X_CLIENT_VER: () => X_CLIENT_VER,
  X_MS_LIB_CAPABILITY: () => X_MS_LIB_CAPABILITY
});
var CLIENT_ID = "client_id";
var REDIRECT_URI = "redirect_uri";
var RESPONSE_TYPE = "response_type";
var RESPONSE_MODE = "response_mode";
var GRANT_TYPE = "grant_type";
var CLAIMS = "claims";
var SCOPE = "scope";
var ERROR = "error";
var ERROR_DESCRIPTION = "error_description";
var ACCESS_TOKEN = "access_token";
var ID_TOKEN = "id_token";
var REFRESH_TOKEN = "refresh_token";
var EXPIRES_IN = "expires_in";
var REFRESH_TOKEN_EXPIRES_IN = "refresh_token_expires_in";
var STATE = "state";
var NONCE = "nonce";
var PROMPT = "prompt";
var SESSION_STATE = "session_state";
var CLIENT_INFO2 = "client_info";
var CODE = "code";
var CODE_CHALLENGE = "code_challenge";
var CODE_CHALLENGE_METHOD = "code_challenge_method";
var CODE_VERIFIER = "code_verifier";
var CLIENT_REQUEST_ID = "client-request-id";
var X_CLIENT_SKU = "x-client-SKU";
var X_CLIENT_VER = "x-client-VER";
var X_CLIENT_OS = "x-client-OS";
var X_CLIENT_CPU = "x-client-CPU";
var X_CLIENT_CURR_TELEM = "x-client-current-telemetry";
var X_CLIENT_LAST_TELEM = "x-client-last-telemetry";
var X_MS_LIB_CAPABILITY = "x-ms-lib-capability";
var X_APP_NAME = "x-app-name";
var X_APP_VER = "x-app-ver";
var POST_LOGOUT_URI = "post_logout_redirect_uri";
var ID_TOKEN_HINT = "id_token_hint";
var DEVICE_CODE = "device_code";
var CLIENT_SECRET = "client_secret";
var CLIENT_ASSERTION = "client_assertion";
var CLIENT_ASSERTION_TYPE = "client_assertion_type";
var TOKEN_TYPE = "token_type";
var REQ_CNF = "req_cnf";
var OBO_ASSERTION = "assertion";
var REQUESTED_TOKEN_USE = "requested_token_use";
var ON_BEHALF_OF = "on_behalf_of";
var FOCI = "foci";
var CCS_HEADER = "X-AnchorMailbox";
var RETURN_SPA_CODE = "return_spa_code";
var NATIVE_BROKER = "nativebroker";
var LOGOUT_HINT = "logout_hint";
var SID = "sid";
var LOGIN_HINT = "login_hint";
var DOMAIN_HINT = "domain_hint";
var X_CLIENT_EXTRA_SKU = "x-client-xtra-sku";
var BROKER_CLIENT_ID = "brk_client_id";
var BROKER_REDIRECT_URI = "brk_redirect_uri";
var INSTANCE_AWARE = "instance_aware";
var EAR_JWK = "ear_jwk";
var EAR_JWE_CRYPTO = "ear_jwe_crypto";

// node_modules/@azure/msal-common/dist/request/RequestParameterBuilder.mjs
function instrumentBrokerParams(parameters, correlationId, performanceClient) {
  if (!correlationId) {
    return;
  }
  const clientId = parameters.get(CLIENT_ID);
  if (clientId && parameters.has(BROKER_CLIENT_ID)) {
    performanceClient == null ? void 0 : performanceClient.addFields({
      embeddedClientId: clientId,
      embeddedRedirectUri: parameters.get(REDIRECT_URI)
    }, correlationId);
  }
}
function addResponseType(parameters, responseType) {
  parameters.set(RESPONSE_TYPE, responseType);
}
function addResponseMode(parameters, responseMode) {
  parameters.set(RESPONSE_MODE, responseMode ? responseMode : ResponseMode.QUERY);
}
function addNativeBroker(parameters) {
  parameters.set(NATIVE_BROKER, "1");
}
function addScopes(parameters, scopes, addOidcScopes = true, defaultScopes = OIDC_DEFAULT_SCOPES) {
  if (addOidcScopes && !defaultScopes.includes("openid") && !scopes.includes("openid")) {
    defaultScopes.push("openid");
  }
  const requestScopes = addOidcScopes ? [...scopes || [], ...defaultScopes] : scopes || [];
  const scopeSet = new ScopeSet(requestScopes);
  parameters.set(SCOPE, scopeSet.printScopes());
}
function addClientId(parameters, clientId) {
  parameters.set(CLIENT_ID, clientId);
}
function addRedirectUri(parameters, redirectUri) {
  parameters.set(REDIRECT_URI, redirectUri);
}
function addPostLogoutRedirectUri(parameters, redirectUri) {
  parameters.set(POST_LOGOUT_URI, redirectUri);
}
function addIdTokenHint(parameters, idTokenHint) {
  parameters.set(ID_TOKEN_HINT, idTokenHint);
}
function addDomainHint(parameters, domainHint) {
  parameters.set(DOMAIN_HINT, domainHint);
}
function addLoginHint(parameters, loginHint) {
  parameters.set(LOGIN_HINT, loginHint);
}
function addCcsUpn(parameters, loginHint) {
  parameters.set(HeaderNames.CCS_HEADER, `UPN:${loginHint}`);
}
function addCcsOid(parameters, clientInfo) {
  parameters.set(HeaderNames.CCS_HEADER, `Oid:${clientInfo.uid}@${clientInfo.utid}`);
}
function addSid(parameters, sid) {
  parameters.set(SID, sid);
}
function addClaims(parameters, claims, clientCapabilities) {
  const mergedClaims = addClientCapabilitiesToClaims(claims, clientCapabilities);
  try {
    JSON.parse(mergedClaims);
  } catch (e) {
    throw createClientConfigurationError(invalidClaims);
  }
  parameters.set(CLAIMS, mergedClaims);
}
function addCorrelationId(parameters, correlationId) {
  parameters.set(CLIENT_REQUEST_ID, correlationId);
}
function addLibraryInfo(parameters, libraryInfo) {
  parameters.set(X_CLIENT_SKU, libraryInfo.sku);
  parameters.set(X_CLIENT_VER, libraryInfo.version);
  if (libraryInfo.os) {
    parameters.set(X_CLIENT_OS, libraryInfo.os);
  }
  if (libraryInfo.cpu) {
    parameters.set(X_CLIENT_CPU, libraryInfo.cpu);
  }
}
function addApplicationTelemetry(parameters, appTelemetry) {
  if (appTelemetry == null ? void 0 : appTelemetry.appName) {
    parameters.set(X_APP_NAME, appTelemetry.appName);
  }
  if (appTelemetry == null ? void 0 : appTelemetry.appVersion) {
    parameters.set(X_APP_VER, appTelemetry.appVersion);
  }
}
function addPrompt(parameters, prompt) {
  parameters.set(PROMPT, prompt);
}
function addState(parameters, state) {
  if (state) {
    parameters.set(STATE, state);
  }
}
function addNonce(parameters, nonce) {
  parameters.set(NONCE, nonce);
}
function addCodeChallengeParams(parameters, codeChallenge, codeChallengeMethod) {
  if (codeChallenge && codeChallengeMethod) {
    parameters.set(CODE_CHALLENGE, codeChallenge);
    parameters.set(CODE_CHALLENGE_METHOD, codeChallengeMethod);
  } else {
    throw createClientConfigurationError(pkceParamsMissing);
  }
}
function addAuthorizationCode(parameters, code) {
  parameters.set(CODE, code);
}
function addDeviceCode(parameters, code) {
  parameters.set(DEVICE_CODE, code);
}
function addRefreshToken(parameters, refreshToken) {
  parameters.set(REFRESH_TOKEN, refreshToken);
}
function addCodeVerifier(parameters, codeVerifier) {
  parameters.set(CODE_VERIFIER, codeVerifier);
}
function addClientSecret(parameters, clientSecret) {
  parameters.set(CLIENT_SECRET, clientSecret);
}
function addClientAssertion(parameters, clientAssertion) {
  if (clientAssertion) {
    parameters.set(CLIENT_ASSERTION, clientAssertion);
  }
}
function addClientAssertionType(parameters, clientAssertionType) {
  if (clientAssertionType) {
    parameters.set(CLIENT_ASSERTION_TYPE, clientAssertionType);
  }
}
function addOboAssertion(parameters, oboAssertion) {
  parameters.set(OBO_ASSERTION, oboAssertion);
}
function addRequestTokenUse(parameters, tokenUse) {
  parameters.set(REQUESTED_TOKEN_USE, tokenUse);
}
function addGrantType(parameters, grantType) {
  parameters.set(GRANT_TYPE, grantType);
}
function addClientInfo(parameters) {
  parameters.set(CLIENT_INFO, "1");
}
function addInstanceAware(parameters) {
  if (!parameters.has(INSTANCE_AWARE)) {
    parameters.set(INSTANCE_AWARE, "true");
  }
}
function addExtraQueryParameters(parameters, eQParams) {
  Object.entries(eQParams).forEach(([key, value]) => {
    if (!parameters.has(key) && value) {
      parameters.set(key, value);
    }
  });
}
function addClientCapabilitiesToClaims(claims, clientCapabilities) {
  let mergedClaims;
  if (!claims) {
    mergedClaims = {};
  } else {
    try {
      mergedClaims = JSON.parse(claims);
    } catch (e) {
      throw createClientConfigurationError(invalidClaims);
    }
  }
  if (clientCapabilities && clientCapabilities.length > 0) {
    if (!mergedClaims.hasOwnProperty(ClaimsRequestKeys.ACCESS_TOKEN)) {
      mergedClaims[ClaimsRequestKeys.ACCESS_TOKEN] = {};
    }
    mergedClaims[ClaimsRequestKeys.ACCESS_TOKEN][ClaimsRequestKeys.XMS_CC] = {
      values: clientCapabilities
    };
  }
  return JSON.stringify(mergedClaims);
}
function addUsername(parameters, username) {
  parameters.set(PasswordGrantConstants.username, username);
}
function addPassword(parameters, password) {
  parameters.set(PasswordGrantConstants.password, password);
}
function addPopToken(parameters, cnfString) {
  if (cnfString) {
    parameters.set(TOKEN_TYPE, AuthenticationScheme.POP);
    parameters.set(REQ_CNF, cnfString);
  }
}
function addSshJwk(parameters, sshJwkString) {
  if (sshJwkString) {
    parameters.set(TOKEN_TYPE, AuthenticationScheme.SSH);
    parameters.set(REQ_CNF, sshJwkString);
  }
}
function addServerTelemetry(parameters, serverTelemetryManager) {
  parameters.set(X_CLIENT_CURR_TELEM, serverTelemetryManager.generateCurrentRequestHeaderValue());
  parameters.set(X_CLIENT_LAST_TELEM, serverTelemetryManager.generateLastRequestHeaderValue());
}
function addThrottling(parameters) {
  parameters.set(X_MS_LIB_CAPABILITY, ThrottlingConstants.X_MS_LIB_CAPABILITY_VALUE);
}
function addLogoutHint(parameters, logoutHint) {
  parameters.set(LOGOUT_HINT, logoutHint);
}
function addBrokerParameters(parameters, brokerClientId, brokerRedirectUri) {
  if (!parameters.has(BROKER_CLIENT_ID)) {
    parameters.set(BROKER_CLIENT_ID, brokerClientId);
  }
  if (!parameters.has(BROKER_REDIRECT_URI)) {
    parameters.set(BROKER_REDIRECT_URI, brokerRedirectUri);
  }
}
function addEARParameters(parameters, jwk) {
  parameters.set(EAR_JWK, encodeURIComponent(jwk));
  const jweCryptoB64Encoded = "eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0";
  parameters.set(EAR_JWE_CRYPTO, jweCryptoB64Encoded);
}

// node_modules/@azure/msal-common/dist/authority/AuthorityFactory.mjs
var AuthorityFactory_exports = {};
__export(AuthorityFactory_exports, {
  createDiscoveredInstance: () => createDiscoveredInstance
});

// node_modules/@azure/msal-common/dist/authority/OpenIdConfigResponse.mjs
function isOpenIdConfigResponse(response) {
  return response.hasOwnProperty("authorization_endpoint") && response.hasOwnProperty("token_endpoint") && response.hasOwnProperty("issuer") && response.hasOwnProperty("jwks_uri");
}

// node_modules/@azure/msal-common/dist/authority/CloudInstanceDiscoveryResponse.mjs
function isCloudInstanceDiscoveryResponse(response) {
  return response.hasOwnProperty("tenant_discovery_endpoint") && response.hasOwnProperty("metadata");
}

// node_modules/@azure/msal-common/dist/authority/CloudInstanceDiscoveryErrorResponse.mjs
function isCloudInstanceDiscoveryErrorResponse(response) {
  return response.hasOwnProperty("error") && response.hasOwnProperty("error_description");
}

// node_modules/@azure/msal-common/dist/telemetry/performance/PerformanceEvent.mjs
var PerformanceEvents = {
  /**
   * acquireTokenByCode API (msal-browser and msal-node).
   * Used to acquire tokens by trading an authorization code against the token endpoint.
   */
  AcquireTokenByCode: "acquireTokenByCode",
  /**
   * acquireTokenByRefreshToken API (msal-browser and msal-node).
   * Used to renew an access token using a refresh token against the token endpoint.
   */
  AcquireTokenByRefreshToken: "acquireTokenByRefreshToken",
  /**
   * acquireTokenSilent API (msal-browser and msal-node).
   * Used to silently acquire a new access token (from the cache or the network).
   */
  AcquireTokenSilent: "acquireTokenSilent",
  /**
   * acquireTokenSilentAsync (msal-browser).
   * Internal API for acquireTokenSilent.
   */
  AcquireTokenSilentAsync: "acquireTokenSilentAsync",
  /**
   * acquireTokenPopup (msal-browser).
   * Used to acquire a new access token interactively through pop ups
   */
  AcquireTokenPopup: "acquireTokenPopup",
  /**
   * acquireTokenPreRedirect (msal-browser).
   * First part of the redirect flow.
   * Used to acquire a new access token interactively through redirects.
   */
  AcquireTokenPreRedirect: "acquireTokenPreRedirect",
  /**
   * acquireTokenRedirect (msal-browser).
   * Second part of the redirect flow.
   * Used to acquire a new access token interactively through redirects.
   */
  AcquireTokenRedirect: "acquireTokenRedirect",
  /**
   * getPublicKeyThumbprint API in CryptoOpts class (msal-browser).
   * Used to generate a public/private keypair and generate a public key thumbprint for pop requests.
   */
  CryptoOptsGetPublicKeyThumbprint: "cryptoOptsGetPublicKeyThumbprint",
  /**
   * signJwt API in CryptoOpts class (msal-browser).
   * Used to signed a pop token.
   */
  CryptoOptsSignJwt: "cryptoOptsSignJwt",
  /**
   * acquireToken API in the SilentCacheClient class (msal-browser).
   * Used to read access tokens from the cache.
   */
  SilentCacheClientAcquireToken: "silentCacheClientAcquireToken",
  /**
   * acquireToken API in the SilentIframeClient class (msal-browser).
   * Used to acquire a new set of tokens from the authorize endpoint in a hidden iframe.
   */
  SilentIframeClientAcquireToken: "silentIframeClientAcquireToken",
  AwaitConcurrentIframe: "awaitConcurrentIframe",
  /**
   * acquireToken API in SilentRereshClient (msal-browser).
   * Used to acquire a new set of tokens from the token endpoint using a refresh token.
   */
  SilentRefreshClientAcquireToken: "silentRefreshClientAcquireToken",
  /**
   * ssoSilent API (msal-browser).
   * Used to silently acquire an authorization code and set of tokens using a hidden iframe.
   */
  SsoSilent: "ssoSilent",
  /**
   * getDiscoveredAuthority API in StandardInteractionClient class (msal-browser).
   * Used to load authority metadata for a request.
   */
  StandardInteractionClientGetDiscoveredAuthority: "standardInteractionClientGetDiscoveredAuthority",
  /**
   * acquireToken APIs in msal-browser.
   * Used to make an /authorize endpoint call with native brokering enabled.
   */
  FetchAccountIdWithNativeBroker: "fetchAccountIdWithNativeBroker",
  /**
   * acquireToken API in NativeInteractionClient class (msal-browser).
   * Used to acquire a token from Native component when native brokering is enabled.
   */
  NativeInteractionClientAcquireToken: "nativeInteractionClientAcquireToken",
  /**
   * Time spent creating default headers for requests to token endpoint
   */
  BaseClientCreateTokenRequestHeaders: "baseClientCreateTokenRequestHeaders",
  /**
   * Time spent sending/waiting for the response of a request to the token endpoint
   */
  NetworkClientSendPostRequestAsync: "networkClientSendPostRequestAsync",
  RefreshTokenClientExecutePostToTokenEndpoint: "refreshTokenClientExecutePostToTokenEndpoint",
  AuthorizationCodeClientExecutePostToTokenEndpoint: "authorizationCodeClientExecutePostToTokenEndpoint",
  /**
   * Used to measure the time taken for completing embedded-broker handshake (PW-Broker).
   */
  BrokerHandhshake: "brokerHandshake",
  /**
   * acquireTokenByRefreshToken API in BrokerClientApplication (PW-Broker) .
   */
  AcquireTokenByRefreshTokenInBroker: "acquireTokenByRefreshTokenInBroker",
  /**
   * Time taken for token acquisition by broker
   */
  AcquireTokenByBroker: "acquireTokenByBroker",
  /**
   * Time spent on the network for refresh token acquisition
   */
  RefreshTokenClientExecuteTokenRequest: "refreshTokenClientExecuteTokenRequest",
  /**
   * Time taken for acquiring refresh token , records RT size
   */
  RefreshTokenClientAcquireToken: "refreshTokenClientAcquireToken",
  /**
   * Time taken for acquiring cached refresh token
   */
  RefreshTokenClientAcquireTokenWithCachedRefreshToken: "refreshTokenClientAcquireTokenWithCachedRefreshToken",
  /**
   * acquireTokenByRefreshToken API in RefreshTokenClient (msal-common).
   */
  RefreshTokenClientAcquireTokenByRefreshToken: "refreshTokenClientAcquireTokenByRefreshToken",
  /**
   * Helper function to create token request body in RefreshTokenClient (msal-common).
   */
  RefreshTokenClientCreateTokenRequestBody: "refreshTokenClientCreateTokenRequestBody",
  /**
   * acquireTokenFromCache (msal-browser).
   * Internal API for acquiring token from cache
   */
  AcquireTokenFromCache: "acquireTokenFromCache",
  SilentFlowClientAcquireCachedToken: "silentFlowClientAcquireCachedToken",
  SilentFlowClientGenerateResultFromCacheRecord: "silentFlowClientGenerateResultFromCacheRecord",
  /**
   * acquireTokenBySilentIframe (msal-browser).
   * Internal API for acquiring token by silent Iframe
   */
  AcquireTokenBySilentIframe: "acquireTokenBySilentIframe",
  /**
   * Internal API for initializing base request in BaseInteractionClient (msal-browser)
   */
  InitializeBaseRequest: "initializeBaseRequest",
  /**
   * Internal API for initializing silent request in SilentCacheClient (msal-browser)
   */
  InitializeSilentRequest: "initializeSilentRequest",
  InitializeClientApplication: "initializeClientApplication",
  InitializeCache: "initializeCache",
  /**
   * Helper function in SilentIframeClient class (msal-browser).
   */
  SilentIframeClientTokenHelper: "silentIframeClientTokenHelper",
  /**
   * SilentHandler
   */
  SilentHandlerInitiateAuthRequest: "silentHandlerInitiateAuthRequest",
  SilentHandlerMonitorIframeForHash: "silentHandlerMonitorIframeForHash",
  SilentHandlerLoadFrame: "silentHandlerLoadFrame",
  SilentHandlerLoadFrameSync: "silentHandlerLoadFrameSync",
  /**
   * Helper functions in StandardInteractionClient class (msal-browser)
   */
  StandardInteractionClientCreateAuthCodeClient: "standardInteractionClientCreateAuthCodeClient",
  StandardInteractionClientGetClientConfiguration: "standardInteractionClientGetClientConfiguration",
  StandardInteractionClientInitializeAuthorizationRequest: "standardInteractionClientInitializeAuthorizationRequest",
  /**
   * getAuthCodeUrl API (msal-browser and msal-node).
   */
  GetAuthCodeUrl: "getAuthCodeUrl",
  GetStandardParams: "getStandardParams",
  /**
   * Functions from InteractionHandler (msal-browser)
   */
  HandleCodeResponseFromServer: "handleCodeResponseFromServer",
  HandleCodeResponse: "handleCodeResponse",
  HandleResponseEar: "handleResponseEar",
  HandleResponsePlatformBroker: "handleResponsePlatformBroker",
  HandleResponseCode: "handleResponseCode",
  UpdateTokenEndpointAuthority: "updateTokenEndpointAuthority",
  /**
   * APIs in Authorization Code Client (msal-common)
   */
  AuthClientAcquireToken: "authClientAcquireToken",
  AuthClientExecuteTokenRequest: "authClientExecuteTokenRequest",
  AuthClientCreateTokenRequestBody: "authClientCreateTokenRequestBody",
  /**
   * Generate functions in PopTokenGenerator (msal-common)
   */
  PopTokenGenerateCnf: "popTokenGenerateCnf",
  PopTokenGenerateKid: "popTokenGenerateKid",
  /**
   * handleServerTokenResponse API in ResponseHandler (msal-common)
   */
  HandleServerTokenResponse: "handleServerTokenResponse",
  DeserializeResponse: "deserializeResponse",
  /**
   * Authority functions
   */
  AuthorityFactoryCreateDiscoveredInstance: "authorityFactoryCreateDiscoveredInstance",
  AuthorityResolveEndpointsAsync: "authorityResolveEndpointsAsync",
  AuthorityResolveEndpointsFromLocalSources: "authorityResolveEndpointsFromLocalSources",
  AuthorityGetCloudDiscoveryMetadataFromNetwork: "authorityGetCloudDiscoveryMetadataFromNetwork",
  AuthorityUpdateCloudDiscoveryMetadata: "authorityUpdateCloudDiscoveryMetadata",
  AuthorityGetEndpointMetadataFromNetwork: "authorityGetEndpointMetadataFromNetwork",
  AuthorityUpdateEndpointMetadata: "authorityUpdateEndpointMetadata",
  AuthorityUpdateMetadataWithRegionalInformation: "authorityUpdateMetadataWithRegionalInformation",
  /**
   * Region Discovery functions
   */
  RegionDiscoveryDetectRegion: "regionDiscoveryDetectRegion",
  RegionDiscoveryGetRegionFromIMDS: "regionDiscoveryGetRegionFromIMDS",
  RegionDiscoveryGetCurrentVersion: "regionDiscoveryGetCurrentVersion",
  AcquireTokenByCodeAsync: "acquireTokenByCodeAsync",
  GetEndpointMetadataFromNetwork: "getEndpointMetadataFromNetwork",
  GetCloudDiscoveryMetadataFromNetworkMeasurement: "getCloudDiscoveryMetadataFromNetworkMeasurement",
  HandleRedirectPromiseMeasurement: "handleRedirectPromise",
  HandleNativeRedirectPromiseMeasurement: "handleNativeRedirectPromise",
  UpdateCloudDiscoveryMetadataMeasurement: "updateCloudDiscoveryMetadataMeasurement",
  UsernamePasswordClientAcquireToken: "usernamePasswordClientAcquireToken",
  NativeMessageHandlerHandshake: "nativeMessageHandlerHandshake",
  NativeGenerateAuthResult: "nativeGenerateAuthResult",
  RemoveHiddenIframe: "removeHiddenIframe",
  /**
   * Cache operations
   */
  ClearTokensAndKeysWithClaims: "clearTokensAndKeysWithClaims",
  CacheManagerGetRefreshToken: "cacheManagerGetRefreshToken",
  ImportExistingCache: "importExistingCache",
  SetUserData: "setUserData",
  LocalStorageUpdated: "localStorageUpdated",
  /**
   * Crypto Operations
   */
  GeneratePkceCodes: "generatePkceCodes",
  GenerateCodeVerifier: "generateCodeVerifier",
  GenerateCodeChallengeFromVerifier: "generateCodeChallengeFromVerifier",
  Sha256Digest: "sha256Digest",
  GetRandomValues: "getRandomValues",
  GenerateHKDF: "generateHKDF",
  GenerateBaseKey: "generateBaseKey",
  Base64Decode: "base64Decode",
  UrlEncodeArr: "urlEncodeArr",
  Encrypt: "encrypt",
  Decrypt: "decrypt",
  GenerateEarKey: "generateEarKey",
  DecryptEarResponse: "decryptEarResponse"
};
var PerformanceEventAbbreviations = /* @__PURE__ */ new Map([
  [PerformanceEvents.AcquireTokenByCode, "ATByCode"],
  [PerformanceEvents.AcquireTokenByRefreshToken, "ATByRT"],
  [PerformanceEvents.AcquireTokenSilent, "ATS"],
  [PerformanceEvents.AcquireTokenSilentAsync, "ATSAsync"],
  [PerformanceEvents.AcquireTokenPopup, "ATPopup"],
  [PerformanceEvents.AcquireTokenRedirect, "ATRedirect"],
  [
    PerformanceEvents.CryptoOptsGetPublicKeyThumbprint,
    "CryptoGetPKThumb"
  ],
  [PerformanceEvents.CryptoOptsSignJwt, "CryptoSignJwt"],
  [PerformanceEvents.SilentCacheClientAcquireToken, "SltCacheClientAT"],
  [PerformanceEvents.SilentIframeClientAcquireToken, "SltIframeClientAT"],
  [PerformanceEvents.SilentRefreshClientAcquireToken, "SltRClientAT"],
  [PerformanceEvents.SsoSilent, "SsoSlt"],
  [
    PerformanceEvents.StandardInteractionClientGetDiscoveredAuthority,
    "StdIntClientGetDiscAuth"
  ],
  [
    PerformanceEvents.FetchAccountIdWithNativeBroker,
    "FetchAccIdWithNtvBroker"
  ],
  [
    PerformanceEvents.NativeInteractionClientAcquireToken,
    "NtvIntClientAT"
  ],
  [
    PerformanceEvents.BaseClientCreateTokenRequestHeaders,
    "BaseClientCreateTReqHead"
  ],
  [
    PerformanceEvents.NetworkClientSendPostRequestAsync,
    "NetClientSendPost"
  ],
  [
    PerformanceEvents.RefreshTokenClientExecutePostToTokenEndpoint,
    "RTClientExecPost"
  ],
  [
    PerformanceEvents.AuthorizationCodeClientExecutePostToTokenEndpoint,
    "AuthCodeClientExecPost"
  ],
  [PerformanceEvents.BrokerHandhshake, "BrokerHandshake"],
  [
    PerformanceEvents.AcquireTokenByRefreshTokenInBroker,
    "ATByRTInBroker"
  ],
  [PerformanceEvents.AcquireTokenByBroker, "ATByBroker"],
  [
    PerformanceEvents.RefreshTokenClientExecuteTokenRequest,
    "RTClientExecTReq"
  ],
  [PerformanceEvents.RefreshTokenClientAcquireToken, "RTClientAT"],
  [
    PerformanceEvents.RefreshTokenClientAcquireTokenWithCachedRefreshToken,
    "RTClientATWithCachedRT"
  ],
  [
    PerformanceEvents.RefreshTokenClientAcquireTokenByRefreshToken,
    "RTClientATByRT"
  ],
  [
    PerformanceEvents.RefreshTokenClientCreateTokenRequestBody,
    "RTClientCreateTReqBody"
  ],
  [PerformanceEvents.AcquireTokenFromCache, "ATFromCache"],
  [
    PerformanceEvents.SilentFlowClientAcquireCachedToken,
    "SltFlowClientATCached"
  ],
  [
    PerformanceEvents.SilentFlowClientGenerateResultFromCacheRecord,
    "SltFlowClientGenResFromCache"
  ],
  [PerformanceEvents.AcquireTokenBySilentIframe, "ATBySltIframe"],
  [PerformanceEvents.InitializeBaseRequest, "InitBaseReq"],
  [PerformanceEvents.InitializeSilentRequest, "InitSltReq"],
  [
    PerformanceEvents.InitializeClientApplication,
    "InitClientApplication"
  ],
  [PerformanceEvents.InitializeCache, "InitCache"],
  [PerformanceEvents.ImportExistingCache, "importCache"],
  [PerformanceEvents.SetUserData, "setUserData"],
  [PerformanceEvents.LocalStorageUpdated, "localStorageUpdated"],
  [PerformanceEvents.SilentIframeClientTokenHelper, "SIClientTHelper"],
  [
    PerformanceEvents.SilentHandlerInitiateAuthRequest,
    "SHandlerInitAuthReq"
  ],
  [
    PerformanceEvents.SilentHandlerMonitorIframeForHash,
    "SltHandlerMonitorIframeForHash"
  ],
  [PerformanceEvents.SilentHandlerLoadFrame, "SHandlerLoadFrame"],
  [PerformanceEvents.SilentHandlerLoadFrameSync, "SHandlerLoadFrameSync"],
  [
    PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,
    "StdIntClientCreateAuthCodeClient"
  ],
  [
    PerformanceEvents.StandardInteractionClientGetClientConfiguration,
    "StdIntClientGetClientConf"
  ],
  [
    PerformanceEvents.StandardInteractionClientInitializeAuthorizationRequest,
    "StdIntClientInitAuthReq"
  ],
  [PerformanceEvents.GetAuthCodeUrl, "GetAuthCodeUrl"],
  [
    PerformanceEvents.HandleCodeResponseFromServer,
    "HandleCodeResFromServer"
  ],
  [PerformanceEvents.HandleCodeResponse, "HandleCodeResp"],
  [PerformanceEvents.HandleResponseEar, "HandleRespEar"],
  [PerformanceEvents.HandleResponseCode, "HandleRespCode"],
  [
    PerformanceEvents.HandleResponsePlatformBroker,
    "HandleRespPlatBroker"
  ],
  [PerformanceEvents.UpdateTokenEndpointAuthority, "UpdTEndpointAuth"],
  [PerformanceEvents.AuthClientAcquireToken, "AuthClientAT"],
  [PerformanceEvents.AuthClientExecuteTokenRequest, "AuthClientExecTReq"],
  [
    PerformanceEvents.AuthClientCreateTokenRequestBody,
    "AuthClientCreateTReqBody"
  ],
  [PerformanceEvents.PopTokenGenerateCnf, "PopTGenCnf"],
  [PerformanceEvents.PopTokenGenerateKid, "PopTGenKid"],
  [PerformanceEvents.HandleServerTokenResponse, "HandleServerTRes"],
  [PerformanceEvents.DeserializeResponse, "DeserializeRes"],
  [
    PerformanceEvents.AuthorityFactoryCreateDiscoveredInstance,
    "AuthFactCreateDiscInst"
  ],
  [
    PerformanceEvents.AuthorityResolveEndpointsAsync,
    "AuthResolveEndpointsAsync"
  ],
  [
    PerformanceEvents.AuthorityResolveEndpointsFromLocalSources,
    "AuthResolveEndpointsFromLocal"
  ],
  [
    PerformanceEvents.AuthorityGetCloudDiscoveryMetadataFromNetwork,
    "AuthGetCDMetaFromNet"
  ],
  [
    PerformanceEvents.AuthorityUpdateCloudDiscoveryMetadata,
    "AuthUpdCDMeta"
  ],
  [
    PerformanceEvents.AuthorityGetEndpointMetadataFromNetwork,
    "AuthUpdCDMetaFromNet"
  ],
  [
    PerformanceEvents.AuthorityUpdateEndpointMetadata,
    "AuthUpdEndpointMeta"
  ],
  [
    PerformanceEvents.AuthorityUpdateMetadataWithRegionalInformation,
    "AuthUpdMetaWithRegInfo"
  ],
  [PerformanceEvents.RegionDiscoveryDetectRegion, "RegDiscDetectReg"],
  [
    PerformanceEvents.RegionDiscoveryGetRegionFromIMDS,
    "RegDiscGetRegFromIMDS"
  ],
  [
    PerformanceEvents.RegionDiscoveryGetCurrentVersion,
    "RegDiscGetCurrentVer"
  ],
  [PerformanceEvents.AcquireTokenByCodeAsync, "ATByCodeAsync"],
  [
    PerformanceEvents.GetEndpointMetadataFromNetwork,
    "GetEndpointMetaFromNet"
  ],
  [
    PerformanceEvents.GetCloudDiscoveryMetadataFromNetworkMeasurement,
    "GetCDMetaFromNet"
  ],
  [
    PerformanceEvents.HandleRedirectPromiseMeasurement,
    "HandleRedirectPromise"
  ],
  [
    PerformanceEvents.HandleNativeRedirectPromiseMeasurement,
    "HandleNtvRedirectPromise"
  ],
  [
    PerformanceEvents.UpdateCloudDiscoveryMetadataMeasurement,
    "UpdateCDMeta"
  ],
  [
    PerformanceEvents.UsernamePasswordClientAcquireToken,
    "UserPassClientAT"
  ],
  [
    PerformanceEvents.NativeMessageHandlerHandshake,
    "NtvMsgHandlerHandshake"
  ],
  [PerformanceEvents.NativeGenerateAuthResult, "NtvGenAuthRes"],
  [PerformanceEvents.RemoveHiddenIframe, "RemoveHiddenIframe"],
  [
    PerformanceEvents.ClearTokensAndKeysWithClaims,
    "ClearTAndKeysWithClaims"
  ],
  [PerformanceEvents.CacheManagerGetRefreshToken, "CacheManagerGetRT"],
  [PerformanceEvents.GeneratePkceCodes, "GenPkceCodes"],
  [PerformanceEvents.GenerateCodeVerifier, "GenCodeVerifier"],
  [
    PerformanceEvents.GenerateCodeChallengeFromVerifier,
    "GenCodeChallengeFromVerifier"
  ],
  [PerformanceEvents.Sha256Digest, "Sha256Digest"],
  [PerformanceEvents.GetRandomValues, "GetRandomValues"],
  [PerformanceEvents.GenerateHKDF, "genHKDF"],
  [PerformanceEvents.GenerateBaseKey, "genBaseKey"],
  [PerformanceEvents.Base64Decode, "b64Decode"],
  [PerformanceEvents.UrlEncodeArr, "urlEncArr"],
  [PerformanceEvents.Encrypt, "encrypt"],
  [PerformanceEvents.Decrypt, "decrypt"],
  [PerformanceEvents.GenerateEarKey, "genEarKey"],
  [PerformanceEvents.DecryptEarResponse, "decryptEarResp"]
]);

// node_modules/@azure/msal-common/dist/utils/FunctionWrappers.mjs
var invoke = (callback, eventName, logger, telemetryClient, correlationId) => {
  return (...args) => {
    logger.trace(`Executing function ${eventName}`);
    const inProgressEvent = telemetryClient == null ? void 0 : telemetryClient.startMeasurement(eventName, correlationId);
    if (correlationId) {
      const eventCount = eventName + "CallCount";
      telemetryClient == null ? void 0 : telemetryClient.incrementFields({ [eventCount]: 1 }, correlationId);
    }
    try {
      const result = callback(...args);
      inProgressEvent == null ? void 0 : inProgressEvent.end({
        success: true
      });
      logger.trace(`Returning result from ${eventName}`);
      return result;
    } catch (e) {
      logger.trace(`Error occurred in ${eventName}`);
      try {
        logger.trace(JSON.stringify(e));
      } catch (e2) {
        logger.trace("Unable to print error message.");
      }
      inProgressEvent == null ? void 0 : inProgressEvent.end({
        success: false
      }, e);
      throw e;
    }
  };
};
var invokeAsync = (callback, eventName, logger, telemetryClient, correlationId) => {
  return (...args) => {
    logger.trace(`Executing function ${eventName}`);
    const inProgressEvent = telemetryClient == null ? void 0 : telemetryClient.startMeasurement(eventName, correlationId);
    if (correlationId) {
      const eventCount = eventName + "CallCount";
      telemetryClient == null ? void 0 : telemetryClient.incrementFields({ [eventCount]: 1 }, correlationId);
    }
    telemetryClient == null ? void 0 : telemetryClient.setPreQueueTime(eventName, correlationId);
    return callback(...args).then((response) => {
      logger.trace(`Returning result from ${eventName}`);
      inProgressEvent == null ? void 0 : inProgressEvent.end({
        success: true
      });
      return response;
    }).catch((e) => {
      logger.trace(`Error occurred in ${eventName}`);
      try {
        logger.trace(JSON.stringify(e));
      } catch (e2) {
        logger.trace("Unable to print error message.");
      }
      inProgressEvent == null ? void 0 : inProgressEvent.end({
        success: false
      }, e);
      throw e;
    });
  };
};

// node_modules/@azure/msal-common/dist/authority/RegionDiscovery.mjs
var RegionDiscovery = class _RegionDiscovery {
  constructor(networkInterface, logger, performanceClient, correlationId) {
    this.networkInterface = networkInterface;
    this.logger = logger;
    this.performanceClient = performanceClient;
    this.correlationId = correlationId;
  }
  /**
   * Detect the region from the application's environment.
   *
   * @returns Promise<string | null>
   */
  async detectRegion(environmentRegion, regionDiscoveryMetadata) {
    var _a;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.RegionDiscoveryDetectRegion, this.correlationId);
    let autodetectedRegionName = environmentRegion;
    if (!autodetectedRegionName) {
      const options = _RegionDiscovery.IMDS_OPTIONS;
      try {
        const localIMDSVersionResponse = await invokeAsync(this.getRegionFromIMDS.bind(this), PerformanceEvents.RegionDiscoveryGetRegionFromIMDS, this.logger, this.performanceClient, this.correlationId)(Constants.IMDS_VERSION, options);
        if (localIMDSVersionResponse.status === ResponseCodes.httpSuccess) {
          autodetectedRegionName = localIMDSVersionResponse.body;
          regionDiscoveryMetadata.region_source = RegionDiscoverySources.IMDS;
        }
        if (localIMDSVersionResponse.status === ResponseCodes.httpBadRequest) {
          const currentIMDSVersion = await invokeAsync(this.getCurrentVersion.bind(this), PerformanceEvents.RegionDiscoveryGetCurrentVersion, this.logger, this.performanceClient, this.correlationId)(options);
          if (!currentIMDSVersion) {
            regionDiscoveryMetadata.region_source = RegionDiscoverySources.FAILED_AUTO_DETECTION;
            return null;
          }
          const currentIMDSVersionResponse = await invokeAsync(this.getRegionFromIMDS.bind(this), PerformanceEvents.RegionDiscoveryGetRegionFromIMDS, this.logger, this.performanceClient, this.correlationId)(currentIMDSVersion, options);
          if (currentIMDSVersionResponse.status === ResponseCodes.httpSuccess) {
            autodetectedRegionName = currentIMDSVersionResponse.body;
            regionDiscoveryMetadata.region_source = RegionDiscoverySources.IMDS;
          }
        }
      } catch (e) {
        regionDiscoveryMetadata.region_source = RegionDiscoverySources.FAILED_AUTO_DETECTION;
        return null;
      }
    } else {
      regionDiscoveryMetadata.region_source = RegionDiscoverySources.ENVIRONMENT_VARIABLE;
    }
    if (!autodetectedRegionName) {
      regionDiscoveryMetadata.region_source = RegionDiscoverySources.FAILED_AUTO_DETECTION;
    }
    return autodetectedRegionName || null;
  }
  /**
   * Make the call to the IMDS endpoint
   *
   * @param imdsEndpointUrl
   * @returns Promise<NetworkResponse<string>>
   */
  async getRegionFromIMDS(version3, options) {
    var _a;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.RegionDiscoveryGetRegionFromIMDS, this.correlationId);
    return this.networkInterface.sendGetRequestAsync(`${Constants.IMDS_ENDPOINT}?api-version=${version3}&format=text`, options, Constants.IMDS_TIMEOUT);
  }
  /**
   * Get the most recent version of the IMDS endpoint available
   *
   * @returns Promise<string | null>
   */
  async getCurrentVersion(options) {
    var _a;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.RegionDiscoveryGetCurrentVersion, this.correlationId);
    try {
      const response = await this.networkInterface.sendGetRequestAsync(`${Constants.IMDS_ENDPOINT}?format=json`, options);
      if (response.status === ResponseCodes.httpBadRequest && response.body && response.body["newest-versions"] && response.body["newest-versions"].length > 0) {
        return response.body["newest-versions"][0];
      }
      return null;
    } catch (e) {
      return null;
    }
  }
};
RegionDiscovery.IMDS_OPTIONS = {
  headers: {
    Metadata: "true"
  }
};

// node_modules/@azure/msal-common/dist/authority/Authority.mjs
var Authority = class _Authority {
  constructor(authority, networkInterface, cacheManager, authorityOptions, logger, correlationId, performanceClient, managedIdentity) {
    this.canonicalAuthority = authority;
    this._canonicalAuthority.validateAsUri();
    this.networkInterface = networkInterface;
    this.cacheManager = cacheManager;
    this.authorityOptions = authorityOptions;
    this.regionDiscoveryMetadata = {
      region_used: void 0,
      region_source: void 0,
      region_outcome: void 0
    };
    this.logger = logger;
    this.performanceClient = performanceClient;
    this.correlationId = correlationId;
    this.managedIdentity = managedIdentity || false;
    this.regionDiscovery = new RegionDiscovery(networkInterface, this.logger, this.performanceClient, this.correlationId);
  }
  /**
   * Get {@link AuthorityType}
   * @param authorityUri {@link IUri}
   * @private
   */
  getAuthorityType(authorityUri) {
    if (authorityUri.HostNameAndPort.endsWith(Constants.CIAM_AUTH_URL)) {
      return AuthorityType.Ciam;
    }
    const pathSegments = authorityUri.PathSegments;
    if (pathSegments.length) {
      switch (pathSegments[0].toLowerCase()) {
        case Constants.ADFS:
          return AuthorityType.Adfs;
        case Constants.DSTS:
          return AuthorityType.Dsts;
      }
    }
    return AuthorityType.Default;
  }
  // See above for AuthorityType
  get authorityType() {
    return this.getAuthorityType(this.canonicalAuthorityUrlComponents);
  }
  /**
   * ProtocolMode enum representing the way endpoints are constructed.
   */
  get protocolMode() {
    return this.authorityOptions.protocolMode;
  }
  /**
   * Returns authorityOptions which can be used to reinstantiate a new authority instance
   */
  get options() {
    return this.authorityOptions;
  }
  /**
   * A URL that is the authority set by the developer
   */
  get canonicalAuthority() {
    return this._canonicalAuthority.urlString;
  }
  /**
   * Sets canonical authority.
   */
  set canonicalAuthority(url) {
    this._canonicalAuthority = new UrlString(url);
    this._canonicalAuthority.validateAsUri();
    this._canonicalAuthorityUrlComponents = null;
  }
  /**
   * Get authority components.
   */
  get canonicalAuthorityUrlComponents() {
    if (!this._canonicalAuthorityUrlComponents) {
      this._canonicalAuthorityUrlComponents = this._canonicalAuthority.getUrlComponents();
    }
    return this._canonicalAuthorityUrlComponents;
  }
  /**
   * Get hostname and port i.e. login.microsoftonline.com
   */
  get hostnameAndPort() {
    return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase();
  }
  /**
   * Get tenant for authority.
   */
  get tenant() {
    return this.canonicalAuthorityUrlComponents.PathSegments[0];
  }
  /**
   * OAuth /authorize endpoint for requests
   */
  get authorizationEndpoint() {
    if (this.discoveryComplete()) {
      return this.replacePath(this.metadata.authorization_endpoint);
    } else {
      throw createClientAuthError(endpointResolutionError);
    }
  }
  /**
   * OAuth /token endpoint for requests
   */
  get tokenEndpoint() {
    if (this.discoveryComplete()) {
      return this.replacePath(this.metadata.token_endpoint);
    } else {
      throw createClientAuthError(endpointResolutionError);
    }
  }
  get deviceCodeEndpoint() {
    if (this.discoveryComplete()) {
      return this.replacePath(this.metadata.token_endpoint.replace("/token", "/devicecode"));
    } else {
      throw createClientAuthError(endpointResolutionError);
    }
  }
  /**
   * OAuth logout endpoint for requests
   */
  get endSessionEndpoint() {
    if (this.discoveryComplete()) {
      if (!this.metadata.end_session_endpoint) {
        throw createClientAuthError(endSessionEndpointNotSupported);
      }
      return this.replacePath(this.metadata.end_session_endpoint);
    } else {
      throw createClientAuthError(endpointResolutionError);
    }
  }
  /**
   * OAuth issuer for requests
   */
  get selfSignedJwtAudience() {
    if (this.discoveryComplete()) {
      return this.replacePath(this.metadata.issuer);
    } else {
      throw createClientAuthError(endpointResolutionError);
    }
  }
  /**
   * Jwks_uri for token signing keys
   */
  get jwksUri() {
    if (this.discoveryComplete()) {
      return this.replacePath(this.metadata.jwks_uri);
    } else {
      throw createClientAuthError(endpointResolutionError);
    }
  }
  /**
   * Returns a flag indicating that tenant name can be replaced in authority {@link IUri}
   * @param authorityUri {@link IUri}
   * @private
   */
  canReplaceTenant(authorityUri) {
    return authorityUri.PathSegments.length === 1 && !_Authority.reservedTenantDomains.has(authorityUri.PathSegments[0]) && this.getAuthorityType(authorityUri) === AuthorityType.Default && this.protocolMode !== ProtocolMode.OIDC;
  }
  /**
   * Replaces tenant in url path with current tenant. Defaults to common.
   * @param urlString
   */
  replaceTenant(urlString) {
    return urlString.replace(/{tenant}|{tenantid}/g, this.tenant);
  }
  /**
   * Replaces path such as tenant or policy with the current tenant or policy.
   * @param urlString
   */
  replacePath(urlString) {
    let endpoint = urlString;
    const cachedAuthorityUrl = new UrlString(this.metadata.canonical_authority);
    const cachedAuthorityUrlComponents = cachedAuthorityUrl.getUrlComponents();
    const cachedAuthorityParts = cachedAuthorityUrlComponents.PathSegments;
    const currentAuthorityParts = this.canonicalAuthorityUrlComponents.PathSegments;
    currentAuthorityParts.forEach((currentPart, index) => {
      let cachedPart = cachedAuthorityParts[index];
      if (index === 0 && this.canReplaceTenant(cachedAuthorityUrlComponents)) {
        const tenantId = new UrlString(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];
        if (cachedPart !== tenantId) {
          this.logger.verbose(`Replacing tenant domain name ${cachedPart} with id ${tenantId}`);
          cachedPart = tenantId;
        }
      }
      if (currentPart !== cachedPart) {
        endpoint = endpoint.replace(`/${cachedPart}/`, `/${currentPart}/`);
      }
    });
    return this.replaceTenant(endpoint);
  }
  /**
   * The default open id configuration endpoint for any canonical authority.
   */
  get defaultOpenIdConfigurationEndpoint() {
    const canonicalAuthorityHost = this.hostnameAndPort;
    if (this.canonicalAuthority.endsWith("v2.0/") || this.authorityType === AuthorityType.Adfs || this.protocolMode === ProtocolMode.OIDC && !this.isAliasOfKnownMicrosoftAuthority(canonicalAuthorityHost)) {
      return `${this.canonicalAuthority}.well-known/openid-configuration`;
    }
    return `${this.canonicalAuthority}v2.0/.well-known/openid-configuration`;
  }
  /**
   * Boolean that returns whether or not tenant discovery has been completed.
   */
  discoveryComplete() {
    return !!this.metadata;
  }
  /**
   * Perform endpoint discovery to discover aliases, preferred_cache, preferred_network
   * and the /authorize, /token and logout endpoints.
   */
  async resolveEndpointsAsync() {
    var _a, _b;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.AuthorityResolveEndpointsAsync, this.correlationId);
    const metadataEntity = this.getCurrentMetadataEntity();
    const cloudDiscoverySource = await invokeAsync(this.updateCloudDiscoveryMetadata.bind(this), PerformanceEvents.AuthorityUpdateCloudDiscoveryMetadata, this.logger, this.performanceClient, this.correlationId)(metadataEntity);
    this.canonicalAuthority = this.canonicalAuthority.replace(this.hostnameAndPort, metadataEntity.preferred_network);
    const endpointSource = await invokeAsync(this.updateEndpointMetadata.bind(this), PerformanceEvents.AuthorityUpdateEndpointMetadata, this.logger, this.performanceClient, this.correlationId)(metadataEntity);
    this.updateCachedMetadata(metadataEntity, cloudDiscoverySource, {
      source: endpointSource
    });
    (_b = this.performanceClient) == null ? void 0 : _b.addFields({
      cloudDiscoverySource,
      authorityEndpointSource: endpointSource
    }, this.correlationId);
  }
  /**
   * Returns metadata entity from cache if it exists, otherwiser returns a new metadata entity built
   * from the configured canonical authority
   * @returns
   */
  getCurrentMetadataEntity() {
    let metadataEntity = this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);
    if (!metadataEntity) {
      metadataEntity = {
        aliases: [],
        preferred_cache: this.hostnameAndPort,
        preferred_network: this.hostnameAndPort,
        canonical_authority: this.canonicalAuthority,
        authorization_endpoint: "",
        token_endpoint: "",
        end_session_endpoint: "",
        issuer: "",
        aliasesFromNetwork: false,
        endpointsFromNetwork: false,
        expiresAt: generateAuthorityMetadataExpiresAt(),
        jwks_uri: ""
      };
    }
    return metadataEntity;
  }
  /**
   * Updates cached metadata based on metadata source and sets the instance's metadata
   * property to the same value
   * @param metadataEntity
   * @param cloudDiscoverySource
   * @param endpointMetadataResult
   */
  updateCachedMetadata(metadataEntity, cloudDiscoverySource, endpointMetadataResult) {
    if (cloudDiscoverySource !== AuthorityMetadataSource.CACHE && (endpointMetadataResult == null ? void 0 : endpointMetadataResult.source) !== AuthorityMetadataSource.CACHE) {
      metadataEntity.expiresAt = generateAuthorityMetadataExpiresAt();
      metadataEntity.canonical_authority = this.canonicalAuthority;
    }
    const cacheKey = this.cacheManager.generateAuthorityMetadataCacheKey(metadataEntity.preferred_cache);
    this.cacheManager.setAuthorityMetadata(cacheKey, metadataEntity);
    this.metadata = metadataEntity;
  }
  /**
   * Update AuthorityMetadataEntity with new endpoints and return where the information came from
   * @param metadataEntity
   */
  async updateEndpointMetadata(metadataEntity) {
    var _a, _b, _c;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.AuthorityUpdateEndpointMetadata, this.correlationId);
    const localMetadata = this.updateEndpointMetadataFromLocalSources(metadataEntity);
    if (localMetadata) {
      if (localMetadata.source === AuthorityMetadataSource.HARDCODED_VALUES) {
        if ((_b = this.authorityOptions.azureRegionConfiguration) == null ? void 0 : _b.azureRegion) {
          if (localMetadata.metadata) {
            const hardcodedMetadata = await invokeAsync(this.updateMetadataWithRegionalInformation.bind(this), PerformanceEvents.AuthorityUpdateMetadataWithRegionalInformation, this.logger, this.performanceClient, this.correlationId)(localMetadata.metadata);
            updateAuthorityEndpointMetadata(metadataEntity, hardcodedMetadata, false);
            metadataEntity.canonical_authority = this.canonicalAuthority;
          }
        }
      }
      return localMetadata.source;
    }
    let metadata = await invokeAsync(this.getEndpointMetadataFromNetwork.bind(this), PerformanceEvents.AuthorityGetEndpointMetadataFromNetwork, this.logger, this.performanceClient, this.correlationId)();
    if (metadata) {
      if ((_c = this.authorityOptions.azureRegionConfiguration) == null ? void 0 : _c.azureRegion) {
        metadata = await invokeAsync(this.updateMetadataWithRegionalInformation.bind(this), PerformanceEvents.AuthorityUpdateMetadataWithRegionalInformation, this.logger, this.performanceClient, this.correlationId)(metadata);
      }
      updateAuthorityEndpointMetadata(metadataEntity, metadata, true);
      return AuthorityMetadataSource.NETWORK;
    } else {
      throw createClientAuthError(openIdConfigError, this.defaultOpenIdConfigurationEndpoint);
    }
  }
  /**
   * Updates endpoint metadata from local sources and returns where the information was retrieved from and the metadata config
   * response if the source is hardcoded metadata
   * @param metadataEntity
   * @returns
   */
  updateEndpointMetadataFromLocalSources(metadataEntity) {
    this.logger.verbose("Attempting to get endpoint metadata from authority configuration");
    const configMetadata = this.getEndpointMetadataFromConfig();
    if (configMetadata) {
      this.logger.verbose("Found endpoint metadata in authority configuration");
      updateAuthorityEndpointMetadata(metadataEntity, configMetadata, false);
      return {
        source: AuthorityMetadataSource.CONFIG
      };
    }
    this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values.");
    if (this.authorityOptions.skipAuthorityMetadataCache) {
      this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");
    } else {
      const hardcodedMetadata = this.getEndpointMetadataFromHardcodedValues();
      if (hardcodedMetadata) {
        updateAuthorityEndpointMetadata(metadataEntity, hardcodedMetadata, false);
        return {
          source: AuthorityMetadataSource.HARDCODED_VALUES,
          metadata: hardcodedMetadata
        };
      } else {
        this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.");
      }
    }
    const metadataEntityExpired = isAuthorityMetadataExpired(metadataEntity);
    if (this.isAuthoritySameType(metadataEntity) && metadataEntity.endpointsFromNetwork && !metadataEntityExpired) {
      this.logger.verbose("Found endpoint metadata in the cache.");
      return { source: AuthorityMetadataSource.CACHE };
    } else if (metadataEntityExpired) {
      this.logger.verbose("The metadata entity is expired.");
    }
    return null;
  }
  /**
   * Compares the number of url components after the domain to determine if the cached
   * authority metadata can be used for the requested authority. Protects against same domain different
   * authority such as login.microsoftonline.com/tenant and login.microsoftonline.com/tfp/tenant/policy
   * @param metadataEntity
   */
  isAuthoritySameType(metadataEntity) {
    const cachedAuthorityUrl = new UrlString(metadataEntity.canonical_authority);
    const cachedParts = cachedAuthorityUrl.getUrlComponents().PathSegments;
    return cachedParts.length === this.canonicalAuthorityUrlComponents.PathSegments.length;
  }
  /**
   * Parse authorityMetadata config option
   */
  getEndpointMetadataFromConfig() {
    if (this.authorityOptions.authorityMetadata) {
      try {
        return JSON.parse(this.authorityOptions.authorityMetadata);
      } catch (e) {
        throw createClientConfigurationError(invalidAuthorityMetadata);
      }
    }
    return null;
  }
  /**
   * Gets OAuth endpoints from the given OpenID configuration endpoint.
   *
   * @param hasHardcodedMetadata boolean
   */
  async getEndpointMetadataFromNetwork() {
    var _a;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.AuthorityGetEndpointMetadataFromNetwork, this.correlationId);
    const options = {};
    const openIdConfigurationEndpoint = this.defaultOpenIdConfigurationEndpoint;
    this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${openIdConfigurationEndpoint}`);
    try {
      const response = await this.networkInterface.sendGetRequestAsync(openIdConfigurationEndpoint, options);
      const isValidResponse = isOpenIdConfigResponse(response.body);
      if (isValidResponse) {
        return response.body;
      } else {
        this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration`);
        return null;
      }
    } catch (e) {
      this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${e}`);
      return null;
    }
  }
  /**
   * Get OAuth endpoints for common authorities.
   */
  getEndpointMetadataFromHardcodedValues() {
    if (this.hostnameAndPort in EndpointMetadata) {
      return EndpointMetadata[this.hostnameAndPort];
    }
    return null;
  }
  /**
   * Update the retrieved metadata with regional information.
   * User selected Azure region will be used if configured.
   */
  async updateMetadataWithRegionalInformation(metadata) {
    var _a, _b, _c;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.AuthorityUpdateMetadataWithRegionalInformation, this.correlationId);
    const userConfiguredAzureRegion = (_b = this.authorityOptions.azureRegionConfiguration) == null ? void 0 : _b.azureRegion;
    if (userConfiguredAzureRegion) {
      if (userConfiguredAzureRegion !== Constants.AZURE_REGION_AUTO_DISCOVER_FLAG) {
        this.regionDiscoveryMetadata.region_outcome = RegionDiscoveryOutcomes.CONFIGURED_NO_AUTO_DETECTION;
        this.regionDiscoveryMetadata.region_used = userConfiguredAzureRegion;
        return _Authority.replaceWithRegionalInformation(metadata, userConfiguredAzureRegion);
      }
      const autodetectedRegionName = await invokeAsync(this.regionDiscovery.detectRegion.bind(this.regionDiscovery), PerformanceEvents.RegionDiscoveryDetectRegion, this.logger, this.performanceClient, this.correlationId)((_c = this.authorityOptions.azureRegionConfiguration) == null ? void 0 : _c.environmentRegion, this.regionDiscoveryMetadata);
      if (autodetectedRegionName) {
        this.regionDiscoveryMetadata.region_outcome = RegionDiscoveryOutcomes.AUTO_DETECTION_REQUESTED_SUCCESSFUL;
        this.regionDiscoveryMetadata.region_used = autodetectedRegionName;
        return _Authority.replaceWithRegionalInformation(metadata, autodetectedRegionName);
      }
      this.regionDiscoveryMetadata.region_outcome = RegionDiscoveryOutcomes.AUTO_DETECTION_REQUESTED_FAILED;
    }
    return metadata;
  }
  /**
   * Updates the AuthorityMetadataEntity with new aliases, preferred_network and preferred_cache
   * and returns where the information was retrieved from
   * @param metadataEntity
   * @returns AuthorityMetadataSource
   */
  async updateCloudDiscoveryMetadata(metadataEntity) {
    var _a;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.AuthorityUpdateCloudDiscoveryMetadata, this.correlationId);
    const localMetadataSource = this.updateCloudDiscoveryMetadataFromLocalSources(metadataEntity);
    if (localMetadataSource) {
      return localMetadataSource;
    }
    const metadata = await invokeAsync(this.getCloudDiscoveryMetadataFromNetwork.bind(this), PerformanceEvents.AuthorityGetCloudDiscoveryMetadataFromNetwork, this.logger, this.performanceClient, this.correlationId)();
    if (metadata) {
      updateCloudDiscoveryMetadata(metadataEntity, metadata, true);
      return AuthorityMetadataSource.NETWORK;
    }
    throw createClientConfigurationError(untrustedAuthority);
  }
  updateCloudDiscoveryMetadataFromLocalSources(metadataEntity) {
    this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration");
    this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities || Constants.NOT_APPLICABLE}`);
    this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata || Constants.NOT_APPLICABLE}`);
    this.logger.verbosePii(`Canonical Authority: ${metadataEntity.canonical_authority || Constants.NOT_APPLICABLE}`);
    const metadata = this.getCloudDiscoveryMetadataFromConfig();
    if (metadata) {
      this.logger.verbose("Found cloud discovery metadata in authority configuration");
      updateCloudDiscoveryMetadata(metadataEntity, metadata, false);
      return AuthorityMetadataSource.CONFIG;
    }
    this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values.");
    if (this.options.skipAuthorityMetadataCache) {
      this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");
    } else {
      const hardcodedMetadata = getCloudDiscoveryMetadataFromHardcodedValues(this.hostnameAndPort);
      if (hardcodedMetadata) {
        this.logger.verbose("Found cloud discovery metadata from hardcoded values.");
        updateCloudDiscoveryMetadata(metadataEntity, hardcodedMetadata, false);
        return AuthorityMetadataSource.HARDCODED_VALUES;
      }
      this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.");
    }
    const metadataEntityExpired = isAuthorityMetadataExpired(metadataEntity);
    if (this.isAuthoritySameType(metadataEntity) && metadataEntity.aliasesFromNetwork && !metadataEntityExpired) {
      this.logger.verbose("Found cloud discovery metadata in the cache.");
      return AuthorityMetadataSource.CACHE;
    } else if (metadataEntityExpired) {
      this.logger.verbose("The metadata entity is expired.");
    }
    return null;
  }
  /**
   * Parse cloudDiscoveryMetadata config or check knownAuthorities
   */
  getCloudDiscoveryMetadataFromConfig() {
    if (this.authorityType === AuthorityType.Ciam) {
      this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host.");
      return _Authority.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);
    }
    if (this.authorityOptions.cloudDiscoveryMetadata) {
      this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");
      try {
        this.logger.verbose("Attempting to parse the cloud discovery metadata.");
        const parsedResponse = JSON.parse(this.authorityOptions.cloudDiscoveryMetadata);
        const metadata = getCloudDiscoveryMetadataFromNetworkResponse(parsedResponse.metadata, this.hostnameAndPort);
        this.logger.verbose("Parsed the cloud discovery metadata.");
        if (metadata) {
          this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata.");
          return metadata;
        } else {
          this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.");
        }
      } catch (e) {
        this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error.");
        throw createClientConfigurationError(invalidCloudDiscoveryMetadata);
      }
    }
    if (this.isInKnownAuthorities()) {
      this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host.");
      return _Authority.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);
    }
    return null;
  }
  /**
   * Called to get metadata from network if CloudDiscoveryMetadata was not populated by config
   *
   * @param hasHardcodedMetadata boolean
   */
  async getCloudDiscoveryMetadataFromNetwork() {
    var _a;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.AuthorityGetCloudDiscoveryMetadataFromNetwork, this.correlationId);
    const instanceDiscoveryEndpoint = `${Constants.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`;
    const options = {};
    let match = null;
    try {
      const response = await this.networkInterface.sendGetRequestAsync(instanceDiscoveryEndpoint, options);
      let typedResponseBody;
      let metadata;
      if (isCloudInstanceDiscoveryResponse(response.body)) {
        typedResponseBody = response.body;
        metadata = typedResponseBody.metadata;
        this.logger.verbosePii(`tenant_discovery_endpoint is: ${typedResponseBody.tenant_discovery_endpoint}`);
      } else if (isCloudInstanceDiscoveryErrorResponse(response.body)) {
        this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${response.status}`);
        typedResponseBody = response.body;
        if (typedResponseBody.error === Constants.INVALID_INSTANCE) {
          this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance.");
          return null;
        }
        this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${typedResponseBody.error}`);
        this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${typedResponseBody.error_description}`);
        this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []");
        metadata = [];
      } else {
        this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse");
        return null;
      }
      this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request.");
      match = getCloudDiscoveryMetadataFromNetworkResponse(metadata, this.hostnameAndPort);
    } catch (error) {
      if (error instanceof AuthError) {
        this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${error.errorCode}
Error Description: ${error.errorMessage}`);
      } else {
        const typedError = error;
        this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${typedError.name}
Error Description: ${typedError.message}`);
      }
      return null;
    }
    if (!match) {
      this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request.");
      this.logger.verbose("Creating custom Authority for custom domain scenario.");
      match = _Authority.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);
    }
    return match;
  }
  /**
   * Helper function to determine if this host is included in the knownAuthorities config option
   */
  isInKnownAuthorities() {
    const matches = this.authorityOptions.knownAuthorities.filter((authority) => {
      return authority && UrlString.getDomainFromUrl(authority).toLowerCase() === this.hostnameAndPort;
    });
    return matches.length > 0;
  }
  /**
   * helper function to populate the authority based on azureCloudOptions
   * @param authorityString
   * @param azureCloudOptions
   */
  static generateAuthority(authorityString, azureCloudOptions) {
    let authorityAzureCloudInstance;
    if (azureCloudOptions && azureCloudOptions.azureCloudInstance !== AzureCloudInstance.None) {
      const tenant = azureCloudOptions.tenant ? azureCloudOptions.tenant : Constants.DEFAULT_COMMON_TENANT;
      authorityAzureCloudInstance = `${azureCloudOptions.azureCloudInstance}/${tenant}/`;
    }
    return authorityAzureCloudInstance ? authorityAzureCloudInstance : authorityString;
  }
  /**
   * Creates cloud discovery metadata object from a given host
   * @param host
   */
  static createCloudDiscoveryMetadataFromHost(host) {
    return {
      preferred_network: host,
      preferred_cache: host,
      aliases: [host]
    };
  }
  /**
   * helper function to generate environment from authority object
   */
  getPreferredCache() {
    if (this.managedIdentity) {
      return Constants.DEFAULT_AUTHORITY_HOST;
    } else if (this.discoveryComplete()) {
      return this.metadata.preferred_cache;
    } else {
      throw createClientAuthError(endpointResolutionError);
    }
  }
  /**
   * Returns whether or not the provided host is an alias of this authority instance
   * @param host
   */
  isAlias(host) {
    return this.metadata.aliases.indexOf(host) > -1;
  }
  /**
   * Returns whether or not the provided host is an alias of a known Microsoft authority for purposes of endpoint discovery
   * @param host
   */
  isAliasOfKnownMicrosoftAuthority(host) {
    return InstanceDiscoveryMetadataAliases.has(host);
  }
  /**
   * Checks whether the provided host is that of a public cloud authority
   *
   * @param authority string
   * @returns bool
   */
  static isPublicCloudAuthority(host) {
    return Constants.KNOWN_PUBLIC_CLOUDS.indexOf(host) >= 0;
  }
  /**
   * Rebuild the authority string with the region
   *
   * @param host string
   * @param region string
   */
  static buildRegionalAuthorityString(host, region, queryString) {
    const authorityUrlInstance = new UrlString(host);
    authorityUrlInstance.validateAsUri();
    const authorityUrlParts = authorityUrlInstance.getUrlComponents();
    let hostNameAndPort = `${region}.${authorityUrlParts.HostNameAndPort}`;
    if (this.isPublicCloudAuthority(authorityUrlParts.HostNameAndPort)) {
      hostNameAndPort = `${region}.${Constants.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`;
    }
    const url = UrlString.constructAuthorityUriFromObject({
      ...authorityUrlInstance.getUrlComponents(),
      HostNameAndPort: hostNameAndPort
    }).urlString;
    if (queryString)
      return `${url}?${queryString}`;
    return url;
  }
  /**
   * Replace the endpoints in the metadata object with their regional equivalents.
   *
   * @param metadata OpenIdConfigResponse
   * @param azureRegion string
   */
  static replaceWithRegionalInformation(metadata, azureRegion) {
    const regionalMetadata = { ...metadata };
    regionalMetadata.authorization_endpoint = _Authority.buildRegionalAuthorityString(regionalMetadata.authorization_endpoint, azureRegion);
    regionalMetadata.token_endpoint = _Authority.buildRegionalAuthorityString(regionalMetadata.token_endpoint, azureRegion);
    if (regionalMetadata.end_session_endpoint) {
      regionalMetadata.end_session_endpoint = _Authority.buildRegionalAuthorityString(regionalMetadata.end_session_endpoint, azureRegion);
    }
    return regionalMetadata;
  }
  /**
   * Transform CIAM_AUTHORIY as per the below rules:
   * If no path segments found and it is a CIAM authority (hostname ends with .ciamlogin.com), then transform it
   *
   * NOTE: The transformation path should go away once STS supports CIAM with the format: `tenantIdorDomain.ciamlogin.com`
   * `ciamlogin.com` can also change in the future and we should accommodate the same
   *
   * @param authority
   */
  static transformCIAMAuthority(authority) {
    let ciamAuthority = authority;
    const authorityUrl = new UrlString(authority);
    const authorityUrlComponents = authorityUrl.getUrlComponents();
    if (authorityUrlComponents.PathSegments.length === 0 && authorityUrlComponents.HostNameAndPort.endsWith(Constants.CIAM_AUTH_URL)) {
      const tenantIdOrDomain = authorityUrlComponents.HostNameAndPort.split(".")[0];
      ciamAuthority = `${ciamAuthority}${tenantIdOrDomain}${Constants.AAD_TENANT_DOMAIN_SUFFIX}`;
    }
    return ciamAuthority;
  }
};
Authority.reservedTenantDomains = /* @__PURE__ */ new Set([
  "{tenant}",
  "{tenantid}",
  AADAuthorityConstants.COMMON,
  AADAuthorityConstants.CONSUMERS,
  AADAuthorityConstants.ORGANIZATIONS
]);
function getTenantFromAuthorityString(authority) {
  var _a;
  const authorityUrl = new UrlString(authority);
  const authorityUrlComponents = authorityUrl.getUrlComponents();
  const tenantId = (_a = authorityUrlComponents.PathSegments.slice(-1)[0]) == null ? void 0 : _a.toLowerCase();
  switch (tenantId) {
    case AADAuthorityConstants.COMMON:
    case AADAuthorityConstants.ORGANIZATIONS:
    case AADAuthorityConstants.CONSUMERS:
      return void 0;
    default:
      return tenantId;
  }
}
function formatAuthorityUri(authorityUri) {
  return authorityUri.endsWith(Constants.FORWARD_SLASH) ? authorityUri : `${authorityUri}${Constants.FORWARD_SLASH}`;
}
function buildStaticAuthorityOptions(authOptions) {
  const rawCloudDiscoveryMetadata = authOptions.cloudDiscoveryMetadata;
  let cloudDiscoveryMetadata = void 0;
  if (rawCloudDiscoveryMetadata) {
    try {
      cloudDiscoveryMetadata = JSON.parse(rawCloudDiscoveryMetadata);
    } catch (e) {
      throw createClientConfigurationError(invalidCloudDiscoveryMetadata);
    }
  }
  return {
    canonicalAuthority: authOptions.authority ? formatAuthorityUri(authOptions.authority) : void 0,
    knownAuthorities: authOptions.knownAuthorities,
    cloudDiscoveryMetadata
  };
}

// node_modules/@azure/msal-common/dist/authority/AuthorityFactory.mjs
async function createDiscoveredInstance(authorityUri, networkClient, cacheManager, authorityOptions, logger, correlationId, performanceClient) {
  performanceClient == null ? void 0 : performanceClient.addQueueMeasurement(PerformanceEvents.AuthorityFactoryCreateDiscoveredInstance, correlationId);
  const authorityUriFinal = Authority.transformCIAMAuthority(formatAuthorityUri(authorityUri));
  const acquireTokenAuthority = new Authority(authorityUriFinal, networkClient, cacheManager, authorityOptions, logger, correlationId, performanceClient);
  try {
    await invokeAsync(acquireTokenAuthority.resolveEndpointsAsync.bind(acquireTokenAuthority), PerformanceEvents.AuthorityResolveEndpointsAsync, logger, performanceClient, correlationId)();
    return acquireTokenAuthority;
  } catch (e) {
    throw createClientAuthError(endpointResolutionError);
  }
}

// node_modules/@azure/msal-common/dist/error/ServerError.mjs
var ServerError = class _ServerError extends AuthError {
  constructor(errorCode, errorMessage, subError, errorNo, status) {
    super(errorCode, errorMessage, subError);
    this.name = "ServerError";
    this.errorNo = errorNo;
    this.status = status;
    Object.setPrototypeOf(this, _ServerError.prototype);
  }
};

// node_modules/@azure/msal-common/dist/network/RequestThumbprint.mjs
function getRequestThumbprint(clientId, request, homeAccountId) {
  var _a;
  return {
    clientId,
    authority: request.authority,
    scopes: request.scopes,
    homeAccountIdentifier: homeAccountId,
    claims: request.claims,
    authenticationScheme: request.authenticationScheme,
    resourceRequestMethod: request.resourceRequestMethod,
    resourceRequestUri: request.resourceRequestUri,
    shrClaims: request.shrClaims,
    sshKid: request.sshKid,
    embeddedClientId: request.embeddedClientId || ((_a = request.tokenBodyParameters) == null ? void 0 : _a.clientId)
  };
}

// node_modules/@azure/msal-common/dist/network/ThrottlingUtils.mjs
var ThrottlingUtils = class _ThrottlingUtils {
  /**
   * Prepares a RequestThumbprint to be stored as a key.
   * @param thumbprint
   */
  static generateThrottlingStorageKey(thumbprint) {
    return `${ThrottlingConstants.THROTTLING_PREFIX}.${JSON.stringify(thumbprint)}`;
  }
  /**
   * Performs necessary throttling checks before a network request.
   * @param cacheManager
   * @param thumbprint
   */
  static preProcess(cacheManager, thumbprint) {
    var _a;
    const key = _ThrottlingUtils.generateThrottlingStorageKey(thumbprint);
    const value = cacheManager.getThrottlingCache(key);
    if (value) {
      if (value.throttleTime < Date.now()) {
        cacheManager.removeItem(key);
        return;
      }
      throw new ServerError(((_a = value.errorCodes) == null ? void 0 : _a.join(" ")) || Constants.EMPTY_STRING, value.errorMessage, value.subError);
    }
  }
  /**
   * Performs necessary throttling checks after a network request.
   * @param cacheManager
   * @param thumbprint
   * @param response
   */
  static postProcess(cacheManager, thumbprint, response) {
    if (_ThrottlingUtils.checkResponseStatus(response) || _ThrottlingUtils.checkResponseForRetryAfter(response)) {
      const thumbprintValue = {
        throttleTime: _ThrottlingUtils.calculateThrottleTime(parseInt(response.headers[HeaderNames.RETRY_AFTER])),
        error: response.body.error,
        errorCodes: response.body.error_codes,
        errorMessage: response.body.error_description,
        subError: response.body.suberror
      };
      cacheManager.setThrottlingCache(_ThrottlingUtils.generateThrottlingStorageKey(thumbprint), thumbprintValue);
    }
  }
  /**
   * Checks a NetworkResponse object's status codes against 429 or 5xx
   * @param response
   */
  static checkResponseStatus(response) {
    return response.status === 429 || response.status >= 500 && response.status < 600;
  }
  /**
   * Checks a NetworkResponse object's RetryAfter header
   * @param response
   */
  static checkResponseForRetryAfter(response) {
    if (response.headers) {
      return response.headers.hasOwnProperty(HeaderNames.RETRY_AFTER) && (response.status < 200 || response.status >= 300);
    }
    return false;
  }
  /**
   * Calculates the Unix-time value for a throttle to expire given throttleTime in seconds.
   * @param throttleTime
   */
  static calculateThrottleTime(throttleTime) {
    const time = throttleTime <= 0 ? 0 : throttleTime;
    const currentSeconds = Date.now() / 1e3;
    return Math.floor(Math.min(currentSeconds + (time || ThrottlingConstants.DEFAULT_THROTTLE_TIME_SECONDS), currentSeconds + ThrottlingConstants.DEFAULT_MAX_THROTTLE_TIME_SECONDS) * 1e3);
  }
  static removeThrottle(cacheManager, clientId, request, homeAccountIdentifier) {
    const thumbprint = getRequestThumbprint(clientId, request, homeAccountIdentifier);
    const key = this.generateThrottlingStorageKey(thumbprint);
    cacheManager.removeItem(key);
  }
};

// node_modules/@azure/msal-common/dist/error/NetworkError.mjs
var NetworkError = class _NetworkError extends AuthError {
  constructor(error, httpStatus, responseHeaders) {
    super(error.errorCode, error.errorMessage, error.subError);
    Object.setPrototypeOf(this, _NetworkError.prototype);
    this.name = "NetworkError";
    this.error = error;
    this.httpStatus = httpStatus;
    this.responseHeaders = responseHeaders;
  }
};

// node_modules/@azure/msal-common/dist/client/BaseClient.mjs
var BaseClient = class {
  constructor(configuration, performanceClient) {
    this.config = buildClientConfiguration(configuration);
    this.logger = new Logger(this.config.loggerOptions, name, version);
    this.cryptoUtils = this.config.cryptoInterface;
    this.cacheManager = this.config.storageInterface;
    this.networkClient = this.config.networkInterface;
    this.serverTelemetryManager = this.config.serverTelemetryManager;
    this.authority = this.config.authOptions.authority;
    this.performanceClient = performanceClient;
  }
  /**
   * Creates default headers for requests to token endpoint
   */
  createTokenRequestHeaders(ccsCred) {
    const headers = {};
    headers[HeaderNames.CONTENT_TYPE] = Constants.URL_FORM_CONTENT_TYPE;
    if (!this.config.systemOptions.preventCorsPreflight && ccsCred) {
      switch (ccsCred.type) {
        case CcsCredentialType.HOME_ACCOUNT_ID:
          try {
            const clientInfo = buildClientInfoFromHomeAccountId(ccsCred.credential);
            headers[HeaderNames.CCS_HEADER] = `Oid:${clientInfo.uid}@${clientInfo.utid}`;
          } catch (e) {
            this.logger.verbose("Could not parse home account ID for CCS Header: " + e);
          }
          break;
        case CcsCredentialType.UPN:
          headers[HeaderNames.CCS_HEADER] = `UPN: ${ccsCred.credential}`;
          break;
      }
    }
    return headers;
  }
  /**
   * Http post to token endpoint
   * @param tokenEndpoint
   * @param queryString
   * @param headers
   * @param thumbprint
   */
  async executePostToTokenEndpoint(tokenEndpoint, queryString, headers, thumbprint, correlationId, queuedEvent) {
    var _a;
    if (queuedEvent) {
      (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(queuedEvent, correlationId);
    }
    const response = await this.sendPostRequest(thumbprint, tokenEndpoint, { body: queryString, headers }, correlationId);
    if (this.config.serverTelemetryManager && response.status < 500 && response.status !== 429) {
      this.config.serverTelemetryManager.clearTelemetryCache();
    }
    return response;
  }
  /**
   * Wraps sendPostRequestAsync with necessary preflight and postflight logic
   * @param thumbprint - Request thumbprint for throttling
   * @param tokenEndpoint - Endpoint to make the POST to
   * @param options - Body and Headers to include on the POST request
   * @param correlationId - CorrelationId for telemetry
   */
  async sendPostRequest(thumbprint, tokenEndpoint, options, correlationId) {
    var _a, _b, _c;
    ThrottlingUtils.preProcess(this.cacheManager, thumbprint);
    let response;
    try {
      response = await invokeAsync(this.networkClient.sendPostRequestAsync.bind(this.networkClient), PerformanceEvents.NetworkClientSendPostRequestAsync, this.logger, this.performanceClient, correlationId)(tokenEndpoint, options);
      const responseHeaders = response.headers || {};
      (_b = this.performanceClient) == null ? void 0 : _b.addFields({
        refreshTokenSize: ((_a = response.body.refresh_token) == null ? void 0 : _a.length) || 0,
        httpVerToken: responseHeaders[HeaderNames.X_MS_HTTP_VERSION] || "",
        requestId: responseHeaders[HeaderNames.X_MS_REQUEST_ID] || ""
      }, correlationId);
    } catch (e) {
      if (e instanceof NetworkError) {
        const responseHeaders = e.responseHeaders;
        if (responseHeaders) {
          (_c = this.performanceClient) == null ? void 0 : _c.addFields({
            httpVerToken: responseHeaders[HeaderNames.X_MS_HTTP_VERSION] || "",
            requestId: responseHeaders[HeaderNames.X_MS_REQUEST_ID] || "",
            contentTypeHeader: responseHeaders[HeaderNames.CONTENT_TYPE] || void 0,
            contentLengthHeader: responseHeaders[HeaderNames.CONTENT_LENGTH] || void 0,
            httpStatus: e.httpStatus
          }, correlationId);
        }
        throw e.error;
      }
      if (e instanceof AuthError) {
        throw e;
      } else {
        throw createClientAuthError(networkError);
      }
    }
    ThrottlingUtils.postProcess(this.cacheManager, thumbprint, response);
    return response;
  }
  /**
   * Updates the authority object of the client. Endpoint discovery must be completed.
   * @param updatedAuthority
   */
  async updateAuthority(cloudInstanceHostname, correlationId) {
    var _a;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.UpdateTokenEndpointAuthority, correlationId);
    const cloudInstanceAuthorityUri = `https://${cloudInstanceHostname}/${this.authority.tenant}/`;
    const cloudInstanceAuthority = await createDiscoveredInstance(cloudInstanceAuthorityUri, this.networkClient, this.cacheManager, this.authority.options, this.logger, correlationId, this.performanceClient);
    this.authority = cloudInstanceAuthority;
  }
  /**
   * Creates query string for the /token request
   * @param request
   */
  createTokenQueryParameters(request) {
    const parameters = /* @__PURE__ */ new Map();
    if (request.embeddedClientId) {
      addBrokerParameters(parameters, this.config.authOptions.clientId, this.config.authOptions.redirectUri);
    }
    if (request.tokenQueryParameters) {
      addExtraQueryParameters(parameters, request.tokenQueryParameters);
    }
    addCorrelationId(parameters, request.correlationId);
    instrumentBrokerParams(parameters, request.correlationId, this.performanceClient);
    return mapToQueryString(parameters);
  }
};

// node_modules/@azure/msal-common/dist/error/InteractionRequiredAuthErrorCodes.mjs
var noTokensFound = "no_tokens_found";
var nativeAccountUnavailable = "native_account_unavailable";
var refreshTokenExpired = "refresh_token_expired";
var interactionRequired = "interaction_required";
var consentRequired = "consent_required";
var loginRequired = "login_required";
var badToken = "bad_token";

// node_modules/@azure/msal-common/dist/error/InteractionRequiredAuthError.mjs
var InteractionRequiredServerErrorMessage = [
  interactionRequired,
  consentRequired,
  loginRequired,
  badToken
];
var InteractionRequiredAuthSubErrorMessage = [
  "message_only",
  "additional_action",
  "basic_action",
  "user_password_expired",
  "consent_required",
  "bad_token"
];
var InteractionRequiredAuthErrorMessages = {
  [noTokensFound]: "No refresh token found in the cache. Please sign-in.",
  [nativeAccountUnavailable]: "The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",
  [refreshTokenExpired]: "Refresh token has expired.",
  [badToken]: "Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."
};
var InteractionRequiredAuthErrorMessage = {
  noTokensFoundError: {
    code: noTokensFound,
    desc: InteractionRequiredAuthErrorMessages[noTokensFound]
  },
  native_account_unavailable: {
    code: nativeAccountUnavailable,
    desc: InteractionRequiredAuthErrorMessages[nativeAccountUnavailable]
  },
  bad_token: {
    code: badToken,
    desc: InteractionRequiredAuthErrorMessages[badToken]
  }
};
var InteractionRequiredAuthError = class _InteractionRequiredAuthError extends AuthError {
  constructor(errorCode, errorMessage, subError, timestamp, traceId, correlationId, claims, errorNo) {
    super(errorCode, errorMessage, subError);
    Object.setPrototypeOf(this, _InteractionRequiredAuthError.prototype);
    this.timestamp = timestamp || Constants.EMPTY_STRING;
    this.traceId = traceId || Constants.EMPTY_STRING;
    this.correlationId = correlationId || Constants.EMPTY_STRING;
    this.claims = claims || Constants.EMPTY_STRING;
    this.name = "InteractionRequiredAuthError";
    this.errorNo = errorNo;
  }
};
function isInteractionRequiredError(errorCode, errorString, subError) {
  const isInteractionRequiredErrorCode = !!errorCode && InteractionRequiredServerErrorMessage.indexOf(errorCode) > -1;
  const isInteractionRequiredSubError = !!subError && InteractionRequiredAuthSubErrorMessage.indexOf(subError) > -1;
  const isInteractionRequiredErrorDesc = !!errorString && InteractionRequiredServerErrorMessage.some((irErrorCode) => {
    return errorString.indexOf(irErrorCode) > -1;
  });
  return isInteractionRequiredErrorCode || isInteractionRequiredErrorDesc || isInteractionRequiredSubError;
}
function createInteractionRequiredAuthError(errorCode) {
  return new InteractionRequiredAuthError(errorCode, InteractionRequiredAuthErrorMessages[errorCode]);
}

// node_modules/@azure/msal-common/dist/utils/ProtocolUtils.mjs
var ProtocolUtils = class _ProtocolUtils {
  /**
   * Appends user state with random guid, or returns random guid.
   * @param userState
   * @param randomGuid
   */
  static setRequestState(cryptoObj, userState, meta) {
    const libraryState = _ProtocolUtils.generateLibraryState(cryptoObj, meta);
    return userState ? `${libraryState}${Constants.RESOURCE_DELIM}${userState}` : libraryState;
  }
  /**
   * Generates the state value used by the common library.
   * @param randomGuid
   * @param cryptoObj
   */
  static generateLibraryState(cryptoObj, meta) {
    if (!cryptoObj) {
      throw createClientAuthError(noCryptoObject);
    }
    const stateObj = {
      id: cryptoObj.createNewGuid()
    };
    if (meta) {
      stateObj.meta = meta;
    }
    const stateString = JSON.stringify(stateObj);
    return cryptoObj.base64Encode(stateString);
  }
  /**
   * Parses the state into the RequestStateObject, which contains the LibraryState info and the state passed by the user.
   * @param state
   * @param cryptoObj
   */
  static parseRequestState(cryptoObj, state) {
    if (!cryptoObj) {
      throw createClientAuthError(noCryptoObject);
    }
    if (!state) {
      throw createClientAuthError(invalidState);
    }
    try {
      const splitState = state.split(Constants.RESOURCE_DELIM);
      const libraryState = splitState[0];
      const userState = splitState.length > 1 ? splitState.slice(1).join(Constants.RESOURCE_DELIM) : Constants.EMPTY_STRING;
      const libraryStateString = cryptoObj.base64Decode(libraryState);
      const libraryStateObj = JSON.parse(libraryStateString);
      return {
        userRequestState: userState || Constants.EMPTY_STRING,
        libraryState: libraryStateObj
      };
    } catch (e) {
      throw createClientAuthError(invalidState);
    }
  }
};

// node_modules/@azure/msal-common/dist/crypto/PopTokenGenerator.mjs
var KeyLocation = {
  SW: "sw",
  UHW: "uhw"
};
var PopTokenGenerator = class {
  constructor(cryptoUtils, performanceClient) {
    this.cryptoUtils = cryptoUtils;
    this.performanceClient = performanceClient;
  }
  /**
   * Generates the req_cnf validated at the RP in the POP protocol for SHR parameters
   * and returns an object containing the keyid, the full req_cnf string and the req_cnf string hash
   * @param request
   * @returns
   */
  async generateCnf(request, logger) {
    var _a;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.PopTokenGenerateCnf, request.correlationId);
    const reqCnf = await invokeAsync(this.generateKid.bind(this), PerformanceEvents.PopTokenGenerateCnf, logger, this.performanceClient, request.correlationId)(request);
    const reqCnfString = this.cryptoUtils.base64UrlEncode(JSON.stringify(reqCnf));
    return {
      kid: reqCnf.kid,
      reqCnfString
    };
  }
  /**
   * Generates key_id for a SHR token request
   * @param request
   * @returns
   */
  async generateKid(request) {
    var _a;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.PopTokenGenerateKid, request.correlationId);
    const kidThumbprint = await this.cryptoUtils.getPublicKeyThumbprint(request);
    return {
      kid: kidThumbprint,
      xms_ksl: KeyLocation.SW
    };
  }
  /**
   * Signs the POP access_token with the local generated key-pair
   * @param accessToken
   * @param request
   * @returns
   */
  async signPopToken(accessToken, keyId, request) {
    return this.signPayload(accessToken, keyId, request);
  }
  /**
   * Utility function to generate the signed JWT for an access_token
   * @param payload
   * @param kid
   * @param request
   * @param claims
   * @returns
   */
  async signPayload(payload, keyId, request, claims) {
    const { resourceRequestMethod, resourceRequestUri, shrClaims, shrNonce, shrOptions } = request;
    const resourceUrlString = resourceRequestUri ? new UrlString(resourceRequestUri) : void 0;
    const resourceUrlComponents = resourceUrlString == null ? void 0 : resourceUrlString.getUrlComponents();
    return this.cryptoUtils.signJwt({
      at: payload,
      ts: nowSeconds(),
      m: resourceRequestMethod == null ? void 0 : resourceRequestMethod.toUpperCase(),
      u: resourceUrlComponents == null ? void 0 : resourceUrlComponents.HostNameAndPort,
      nonce: shrNonce || this.cryptoUtils.createNewGuid(),
      p: resourceUrlComponents == null ? void 0 : resourceUrlComponents.AbsolutePath,
      q: (resourceUrlComponents == null ? void 0 : resourceUrlComponents.QueryString) ? [[], resourceUrlComponents.QueryString] : void 0,
      client_claims: shrClaims || void 0,
      ...claims
    }, keyId, shrOptions, request.correlationId);
  }
};

// node_modules/@azure/msal-common/dist/cache/persistence/TokenCacheContext.mjs
var TokenCacheContext = class {
  constructor(tokenCache, hasChanged) {
    this.cache = tokenCache;
    this.hasChanged = hasChanged;
  }
  /**
   * boolean which indicates the changes in cache
   */
  get cacheHasChanged() {
    return this.hasChanged;
  }
  /**
   * function to retrieve the token cache
   */
  get tokenCache() {
    return this.cache;
  }
};

// node_modules/@azure/msal-common/dist/response/ResponseHandler.mjs
var ResponseHandler = class _ResponseHandler {
  constructor(clientId, cacheStorage, cryptoObj, logger, serializableCache, persistencePlugin, performanceClient) {
    this.clientId = clientId;
    this.cacheStorage = cacheStorage;
    this.cryptoObj = cryptoObj;
    this.logger = logger;
    this.serializableCache = serializableCache;
    this.persistencePlugin = persistencePlugin;
    this.performanceClient = performanceClient;
  }
  /**
   * Function which validates server authorization token response.
   * @param serverResponse
   * @param refreshAccessToken
   */
  validateTokenResponse(serverResponse, refreshAccessToken) {
    var _a;
    if (serverResponse.error || serverResponse.error_description || serverResponse.suberror) {
      const errString = `Error(s): ${serverResponse.error_codes || Constants.NOT_AVAILABLE} - Timestamp: ${serverResponse.timestamp || Constants.NOT_AVAILABLE} - Description: ${serverResponse.error_description || Constants.NOT_AVAILABLE} - Correlation ID: ${serverResponse.correlation_id || Constants.NOT_AVAILABLE} - Trace ID: ${serverResponse.trace_id || Constants.NOT_AVAILABLE}`;
      const serverErrorNo = ((_a = serverResponse.error_codes) == null ? void 0 : _a.length) ? serverResponse.error_codes[0] : void 0;
      const serverError = new ServerError(serverResponse.error, errString, serverResponse.suberror, serverErrorNo, serverResponse.status);
      if (refreshAccessToken && serverResponse.status && serverResponse.status >= HttpStatus.SERVER_ERROR_RANGE_START && serverResponse.status <= HttpStatus.SERVER_ERROR_RANGE_END) {
        this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${serverError}`);
        return;
      } else if (refreshAccessToken && serverResponse.status && serverResponse.status >= HttpStatus.CLIENT_ERROR_RANGE_START && serverResponse.status <= HttpStatus.CLIENT_ERROR_RANGE_END) {
        this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${serverError}`);
        return;
      }
      if (isInteractionRequiredError(serverResponse.error, serverResponse.error_description, serverResponse.suberror)) {
        throw new InteractionRequiredAuthError(serverResponse.error, serverResponse.error_description, serverResponse.suberror, serverResponse.timestamp || Constants.EMPTY_STRING, serverResponse.trace_id || Constants.EMPTY_STRING, serverResponse.correlation_id || Constants.EMPTY_STRING, serverResponse.claims || Constants.EMPTY_STRING, serverErrorNo);
      }
      throw serverError;
    }
  }
  /**
   * Returns a constructed token response based on given string. Also manages the cache updates and cleanups.
   * @param serverTokenResponse
   * @param authority
   */
  async handleServerTokenResponse(serverTokenResponse, authority, reqTimestamp, request, authCodePayload, userAssertionHash, handlingRefreshTokenResponse, forceCacheRefreshTokenResponse, serverRequestId) {
    var _a;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.HandleServerTokenResponse, serverTokenResponse.correlation_id);
    let idTokenClaims;
    if (serverTokenResponse.id_token) {
      idTokenClaims = extractTokenClaims(serverTokenResponse.id_token || Constants.EMPTY_STRING, this.cryptoObj.base64Decode);
      if (authCodePayload && authCodePayload.nonce) {
        if (idTokenClaims.nonce !== authCodePayload.nonce) {
          throw createClientAuthError(nonceMismatch);
        }
      }
      if (request.maxAge || request.maxAge === 0) {
        const authTime = idTokenClaims.auth_time;
        if (!authTime) {
          throw createClientAuthError(authTimeNotFound);
        }
        checkMaxAge(authTime, request.maxAge);
      }
    }
    this.homeAccountIdentifier = AccountEntity.generateHomeAccountId(serverTokenResponse.client_info || Constants.EMPTY_STRING, authority.authorityType, this.logger, this.cryptoObj, idTokenClaims);
    let requestStateObj;
    if (!!authCodePayload && !!authCodePayload.state) {
      requestStateObj = ProtocolUtils.parseRequestState(this.cryptoObj, authCodePayload.state);
    }
    serverTokenResponse.key_id = serverTokenResponse.key_id || request.sshKid || void 0;
    const cacheRecord = this.generateCacheRecord(serverTokenResponse, authority, reqTimestamp, request, idTokenClaims, userAssertionHash, authCodePayload);
    let cacheContext;
    try {
      if (this.persistencePlugin && this.serializableCache) {
        this.logger.verbose("Persistence enabled, calling beforeCacheAccess");
        cacheContext = new TokenCacheContext(this.serializableCache, true);
        await this.persistencePlugin.beforeCacheAccess(cacheContext);
      }
      if (handlingRefreshTokenResponse && !forceCacheRefreshTokenResponse && cacheRecord.account) {
        const key = cacheRecord.account.generateAccountKey();
        const account = this.cacheStorage.getAccount(key);
        if (!account) {
          this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache");
          return await _ResponseHandler.generateAuthenticationResult(this.cryptoObj, authority, cacheRecord, false, request, idTokenClaims, requestStateObj, void 0, serverRequestId);
        }
      }
      await this.cacheStorage.saveCacheRecord(cacheRecord, request.correlationId, request.storeInCache);
    } finally {
      if (this.persistencePlugin && this.serializableCache && cacheContext) {
        this.logger.verbose("Persistence enabled, calling afterCacheAccess");
        await this.persistencePlugin.afterCacheAccess(cacheContext);
      }
    }
    return _ResponseHandler.generateAuthenticationResult(this.cryptoObj, authority, cacheRecord, false, request, idTokenClaims, requestStateObj, serverTokenResponse, serverRequestId);
  }
  /**
   * Generates CacheRecord
   * @param serverTokenResponse
   * @param idTokenObj
   * @param authority
   */
  generateCacheRecord(serverTokenResponse, authority, reqTimestamp, request, idTokenClaims, userAssertionHash, authCodePayload) {
    const env = authority.getPreferredCache();
    if (!env) {
      throw createClientAuthError(invalidCacheEnvironment);
    }
    const claimsTenantId = getTenantIdFromIdTokenClaims(idTokenClaims);
    let cachedIdToken;
    let cachedAccount;
    if (serverTokenResponse.id_token && !!idTokenClaims) {
      cachedIdToken = createIdTokenEntity(this.homeAccountIdentifier, env, serverTokenResponse.id_token, this.clientId, claimsTenantId || "");
      cachedAccount = buildAccountToCache(
        this.cacheStorage,
        authority,
        this.homeAccountIdentifier,
        this.cryptoObj.base64Decode,
        idTokenClaims,
        serverTokenResponse.client_info,
        env,
        claimsTenantId,
        authCodePayload,
        void 0,
        // nativeAccountId
        this.logger
      );
    }
    let cachedAccessToken = null;
    if (serverTokenResponse.access_token) {
      const responseScopes = serverTokenResponse.scope ? ScopeSet.fromString(serverTokenResponse.scope) : new ScopeSet(request.scopes || []);
      const expiresIn = (typeof serverTokenResponse.expires_in === "string" ? parseInt(serverTokenResponse.expires_in, 10) : serverTokenResponse.expires_in) || 0;
      const extExpiresIn = (typeof serverTokenResponse.ext_expires_in === "string" ? parseInt(serverTokenResponse.ext_expires_in, 10) : serverTokenResponse.ext_expires_in) || 0;
      const refreshIn = (typeof serverTokenResponse.refresh_in === "string" ? parseInt(serverTokenResponse.refresh_in, 10) : serverTokenResponse.refresh_in) || void 0;
      const tokenExpirationSeconds = reqTimestamp + expiresIn;
      const extendedTokenExpirationSeconds = tokenExpirationSeconds + extExpiresIn;
      const refreshOnSeconds = refreshIn && refreshIn > 0 ? reqTimestamp + refreshIn : void 0;
      cachedAccessToken = createAccessTokenEntity(this.homeAccountIdentifier, env, serverTokenResponse.access_token, this.clientId, claimsTenantId || authority.tenant || "", responseScopes.printScopes(), tokenExpirationSeconds, extendedTokenExpirationSeconds, this.cryptoObj.base64Decode, refreshOnSeconds, serverTokenResponse.token_type, userAssertionHash, serverTokenResponse.key_id, request.claims, request.requestedClaimsHash);
    }
    let cachedRefreshToken = null;
    if (serverTokenResponse.refresh_token) {
      let rtExpiresOn;
      if (serverTokenResponse.refresh_token_expires_in) {
        const rtExpiresIn = typeof serverTokenResponse.refresh_token_expires_in === "string" ? parseInt(serverTokenResponse.refresh_token_expires_in, 10) : serverTokenResponse.refresh_token_expires_in;
        rtExpiresOn = reqTimestamp + rtExpiresIn;
      }
      cachedRefreshToken = createRefreshTokenEntity(this.homeAccountIdentifier, env, serverTokenResponse.refresh_token, this.clientId, serverTokenResponse.foci, userAssertionHash, rtExpiresOn);
    }
    let cachedAppMetadata = null;
    if (serverTokenResponse.foci) {
      cachedAppMetadata = {
        clientId: this.clientId,
        environment: env,
        familyId: serverTokenResponse.foci
      };
    }
    return {
      account: cachedAccount,
      idToken: cachedIdToken,
      accessToken: cachedAccessToken,
      refreshToken: cachedRefreshToken,
      appMetadata: cachedAppMetadata
    };
  }
  /**
   * Creates an @AuthenticationResult from @CacheRecord , @IdToken , and a boolean that states whether or not the result is from cache.
   *
   * Optionally takes a state string that is set as-is in the response.
   *
   * @param cacheRecord
   * @param idTokenObj
   * @param fromTokenCache
   * @param stateString
   */
  static async generateAuthenticationResult(cryptoObj, authority, cacheRecord, fromTokenCache, request, idTokenClaims, requestState, serverTokenResponse, requestId) {
    var _a, _b, _c, _d, _e;
    let accessToken = Constants.EMPTY_STRING;
    let responseScopes = [];
    let expiresOn = null;
    let extExpiresOn;
    let refreshOn;
    let familyId = Constants.EMPTY_STRING;
    if (cacheRecord.accessToken) {
      if (cacheRecord.accessToken.tokenType === AuthenticationScheme.POP && !request.popKid) {
        const popTokenGenerator = new PopTokenGenerator(cryptoObj);
        const { secret, keyId } = cacheRecord.accessToken;
        if (!keyId) {
          throw createClientAuthError(keyIdMissing);
        }
        accessToken = await popTokenGenerator.signPopToken(secret, keyId, request);
      } else {
        accessToken = cacheRecord.accessToken.secret;
      }
      responseScopes = ScopeSet.fromString(cacheRecord.accessToken.target).asArray();
      expiresOn = toDateFromSeconds(cacheRecord.accessToken.expiresOn);
      extExpiresOn = toDateFromSeconds(cacheRecord.accessToken.extendedExpiresOn);
      if (cacheRecord.accessToken.refreshOn) {
        refreshOn = toDateFromSeconds(cacheRecord.accessToken.refreshOn);
      }
    }
    if (cacheRecord.appMetadata) {
      familyId = cacheRecord.appMetadata.familyId === THE_FAMILY_ID ? THE_FAMILY_ID : "";
    }
    const uid = (idTokenClaims == null ? void 0 : idTokenClaims.oid) || (idTokenClaims == null ? void 0 : idTokenClaims.sub) || "";
    const tid = (idTokenClaims == null ? void 0 : idTokenClaims.tid) || "";
    if ((serverTokenResponse == null ? void 0 : serverTokenResponse.spa_accountid) && !!cacheRecord.account) {
      cacheRecord.account.nativeAccountId = serverTokenResponse == null ? void 0 : serverTokenResponse.spa_accountid;
    }
    const accountInfo = cacheRecord.account ? updateAccountTenantProfileData(
      cacheRecord.account.getAccountInfo(),
      void 0,
      // tenantProfile optional
      idTokenClaims,
      (_a = cacheRecord.idToken) == null ? void 0 : _a.secret
    ) : null;
    return {
      authority: authority.canonicalAuthority,
      uniqueId: uid,
      tenantId: tid,
      scopes: responseScopes,
      account: accountInfo,
      idToken: ((_b = cacheRecord == null ? void 0 : cacheRecord.idToken) == null ? void 0 : _b.secret) || "",
      idTokenClaims: idTokenClaims || {},
      accessToken,
      fromCache: fromTokenCache,
      expiresOn,
      extExpiresOn,
      refreshOn,
      correlationId: request.correlationId,
      requestId: requestId || Constants.EMPTY_STRING,
      familyId,
      tokenType: ((_c = cacheRecord.accessToken) == null ? void 0 : _c.tokenType) || Constants.EMPTY_STRING,
      state: requestState ? requestState.userRequestState : Constants.EMPTY_STRING,
      cloudGraphHostName: ((_d = cacheRecord.account) == null ? void 0 : _d.cloudGraphHostName) || Constants.EMPTY_STRING,
      msGraphHost: ((_e = cacheRecord.account) == null ? void 0 : _e.msGraphHost) || Constants.EMPTY_STRING,
      code: serverTokenResponse == null ? void 0 : serverTokenResponse.spa_code,
      fromNativeBroker: false
    };
  }
};
function buildAccountToCache(cacheStorage, authority, homeAccountId, base64Decode, idTokenClaims, clientInfo, environment, claimsTenantId, authCodePayload, nativeAccountId, logger) {
  logger == null ? void 0 : logger.verbose("setCachedAccount called");
  const accountKeys = cacheStorage.getAccountKeys();
  const baseAccountKey = accountKeys.find((accountKey) => {
    return accountKey.startsWith(homeAccountId);
  });
  let cachedAccount = null;
  if (baseAccountKey) {
    cachedAccount = cacheStorage.getAccount(baseAccountKey);
  }
  const baseAccount = cachedAccount || AccountEntity.createAccount({
    homeAccountId,
    idTokenClaims,
    clientInfo,
    environment,
    cloudGraphHostName: authCodePayload == null ? void 0 : authCodePayload.cloud_graph_host_name,
    msGraphHost: authCodePayload == null ? void 0 : authCodePayload.msgraph_host,
    nativeAccountId
  }, authority, base64Decode);
  const tenantProfiles = baseAccount.tenantProfiles || [];
  const tenantId = claimsTenantId || baseAccount.realm;
  if (tenantId && !tenantProfiles.find((tenantProfile) => {
    return tenantProfile.tenantId === tenantId;
  })) {
    const newTenantProfile = buildTenantProfile(homeAccountId, baseAccount.localAccountId, tenantId, idTokenClaims);
    tenantProfiles.push(newTenantProfile);
  }
  baseAccount.tenantProfiles = tenantProfiles;
  return baseAccount;
}

// node_modules/@azure/msal-common/dist/request/RequestValidator.mjs
var RequestValidator = class {
  /**
   * Utility to check if the `redirectUri` in the request is a non-null value
   * @param redirectUri
   */
  static validateRedirectUri(redirectUri) {
    if (!redirectUri) {
      throw createClientConfigurationError(redirectUriEmpty);
    }
  }
  /**
   * Utility to validate prompt sent by the user in the request
   * @param prompt
   */
  static validatePrompt(prompt) {
    const promptValues = [];
    for (const value in PromptValue) {
      promptValues.push(PromptValue[value]);
    }
    if (promptValues.indexOf(prompt) < 0) {
      throw createClientConfigurationError(invalidPromptValue);
    }
  }
  static validateClaims(claims) {
    try {
      JSON.parse(claims);
    } catch (e) {
      throw createClientConfigurationError(invalidClaims);
    }
  }
  /**
   * Utility to validate code_challenge and code_challenge_method
   * @param codeChallenge
   * @param codeChallengeMethod
   */
  static validateCodeChallengeParams(codeChallenge, codeChallengeMethod) {
    if (!codeChallenge || !codeChallengeMethod) {
      throw createClientConfigurationError(pkceParamsMissing);
    } else {
      this.validateCodeChallengeMethod(codeChallengeMethod);
    }
  }
  /**
   * Utility to validate code_challenge_method
   * @param codeChallengeMethod
   */
  static validateCodeChallengeMethod(codeChallengeMethod) {
    if ([
      CodeChallengeMethodValues.PLAIN,
      CodeChallengeMethodValues.S256
    ].indexOf(codeChallengeMethod) < 0) {
      throw createClientConfigurationError(invalidCodeChallengeMethod);
    }
  }
};

// node_modules/@azure/msal-common/dist/utils/ClientAssertionUtils.mjs
async function getClientAssertion(clientAssertion, clientId, tokenEndpoint) {
  if (typeof clientAssertion === "string") {
    return clientAssertion;
  } else {
    const config2 = {
      clientId,
      tokenEndpoint
    };
    return clientAssertion(config2);
  }
}

// node_modules/@azure/msal-common/dist/client/AuthorizationCodeClient.mjs
var AuthorizationCodeClient = class extends BaseClient {
  constructor(configuration, performanceClient) {
    var _a;
    super(configuration, performanceClient);
    this.includeRedirectUri = true;
    this.oidcDefaultScopes = (_a = this.config.authOptions.authority.options.OIDCOptions) == null ? void 0 : _a.defaultScopes;
  }
  /**
   * API to acquire a token in exchange of 'authorization_code` acquired by the user in the first leg of the
   * authorization_code_grant
   * @param request
   */
  async acquireToken(request, authCodePayload) {
    var _a, _b;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.AuthClientAcquireToken, request.correlationId);
    if (!request.code) {
      throw createClientAuthError(requestCannotBeMade);
    }
    const reqTimestamp = nowSeconds();
    const response = await invokeAsync(this.executeTokenRequest.bind(this), PerformanceEvents.AuthClientExecuteTokenRequest, this.logger, this.performanceClient, request.correlationId)(this.authority, request);
    const requestId = (_b = response.headers) == null ? void 0 : _b[HeaderNames.X_MS_REQUEST_ID];
    const responseHandler = new ResponseHandler(this.config.authOptions.clientId, this.cacheManager, this.cryptoUtils, this.logger, this.config.serializableCache, this.config.persistencePlugin, this.performanceClient);
    responseHandler.validateTokenResponse(response.body);
    return invokeAsync(responseHandler.handleServerTokenResponse.bind(responseHandler), PerformanceEvents.HandleServerTokenResponse, this.logger, this.performanceClient, request.correlationId)(response.body, this.authority, reqTimestamp, request, authCodePayload, void 0, void 0, void 0, requestId);
  }
  /**
   * Used to log out the current user, and redirect the user to the postLogoutRedirectUri.
   * Default behaviour is to redirect the user to `window.location.href`.
   * @param authorityUri
   */
  getLogoutUri(logoutRequest) {
    if (!logoutRequest) {
      throw createClientConfigurationError(logoutRequestEmpty);
    }
    const queryString = this.createLogoutUrlQueryString(logoutRequest);
    return UrlString.appendQueryString(this.authority.endSessionEndpoint, queryString);
  }
  /**
   * Executes POST request to token endpoint
   * @param authority
   * @param request
   */
  async executeTokenRequest(authority, request) {
    var _a;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.AuthClientExecuteTokenRequest, request.correlationId);
    const queryParametersString = this.createTokenQueryParameters(request);
    const endpoint = UrlString.appendQueryString(authority.tokenEndpoint, queryParametersString);
    const requestBody = await invokeAsync(this.createTokenRequestBody.bind(this), PerformanceEvents.AuthClientCreateTokenRequestBody, this.logger, this.performanceClient, request.correlationId)(request);
    let ccsCredential = void 0;
    if (request.clientInfo) {
      try {
        const clientInfo = buildClientInfo(request.clientInfo, this.cryptoUtils.base64Decode);
        ccsCredential = {
          credential: `${clientInfo.uid}${Separators.CLIENT_INFO_SEPARATOR}${clientInfo.utid}`,
          type: CcsCredentialType.HOME_ACCOUNT_ID
        };
      } catch (e) {
        this.logger.verbose("Could not parse client info for CCS Header: " + e);
      }
    }
    const headers = this.createTokenRequestHeaders(ccsCredential || request.ccsCredential);
    const thumbprint = getRequestThumbprint(this.config.authOptions.clientId, request);
    return invokeAsync(this.executePostToTokenEndpoint.bind(this), PerformanceEvents.AuthorizationCodeClientExecutePostToTokenEndpoint, this.logger, this.performanceClient, request.correlationId)(endpoint, requestBody, headers, thumbprint, request.correlationId, PerformanceEvents.AuthorizationCodeClientExecutePostToTokenEndpoint);
  }
  /**
   * Generates a map for all the params to be sent to the service
   * @param request
   */
  async createTokenRequestBody(request) {
    var _a, _b;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.AuthClientCreateTokenRequestBody, request.correlationId);
    const parameters = /* @__PURE__ */ new Map();
    addClientId(parameters, request.embeddedClientId || ((_b = request.tokenBodyParameters) == null ? void 0 : _b[CLIENT_ID]) || this.config.authOptions.clientId);
    if (!this.includeRedirectUri) {
      RequestValidator.validateRedirectUri(request.redirectUri);
    } else {
      addRedirectUri(parameters, request.redirectUri);
    }
    addScopes(parameters, request.scopes, true, this.oidcDefaultScopes);
    addAuthorizationCode(parameters, request.code);
    addLibraryInfo(parameters, this.config.libraryInfo);
    addApplicationTelemetry(parameters, this.config.telemetry.application);
    addThrottling(parameters);
    if (this.serverTelemetryManager && !isOidcProtocolMode(this.config)) {
      addServerTelemetry(parameters, this.serverTelemetryManager);
    }
    if (request.codeVerifier) {
      addCodeVerifier(parameters, request.codeVerifier);
    }
    if (this.config.clientCredentials.clientSecret) {
      addClientSecret(parameters, this.config.clientCredentials.clientSecret);
    }
    if (this.config.clientCredentials.clientAssertion) {
      const clientAssertion = this.config.clientCredentials.clientAssertion;
      addClientAssertion(parameters, await getClientAssertion(clientAssertion.assertion, this.config.authOptions.clientId, request.resourceRequestUri));
      addClientAssertionType(parameters, clientAssertion.assertionType);
    }
    addGrantType(parameters, GrantType.AUTHORIZATION_CODE_GRANT);
    addClientInfo(parameters);
    if (request.authenticationScheme === AuthenticationScheme.POP) {
      const popTokenGenerator = new PopTokenGenerator(this.cryptoUtils, this.performanceClient);
      let reqCnfData;
      if (!request.popKid) {
        const generatedReqCnfData = await invokeAsync(popTokenGenerator.generateCnf.bind(popTokenGenerator), PerformanceEvents.PopTokenGenerateCnf, this.logger, this.performanceClient, request.correlationId)(request, this.logger);
        reqCnfData = generatedReqCnfData.reqCnfString;
      } else {
        reqCnfData = this.cryptoUtils.encodeKid(request.popKid);
      }
      addPopToken(parameters, reqCnfData);
    } else if (request.authenticationScheme === AuthenticationScheme.SSH) {
      if (request.sshJwk) {
        addSshJwk(parameters, request.sshJwk);
      } else {
        throw createClientConfigurationError(missingSshJwk);
      }
    }
    if (!StringUtils.isEmptyObj(request.claims) || this.config.authOptions.clientCapabilities && this.config.authOptions.clientCapabilities.length > 0) {
      addClaims(parameters, request.claims, this.config.authOptions.clientCapabilities);
    }
    let ccsCred = void 0;
    if (request.clientInfo) {
      try {
        const clientInfo = buildClientInfo(request.clientInfo, this.cryptoUtils.base64Decode);
        ccsCred = {
          credential: `${clientInfo.uid}${Separators.CLIENT_INFO_SEPARATOR}${clientInfo.utid}`,
          type: CcsCredentialType.HOME_ACCOUNT_ID
        };
      } catch (e) {
        this.logger.verbose("Could not parse client info for CCS Header: " + e);
      }
    } else {
      ccsCred = request.ccsCredential;
    }
    if (this.config.systemOptions.preventCorsPreflight && ccsCred) {
      switch (ccsCred.type) {
        case CcsCredentialType.HOME_ACCOUNT_ID:
          try {
            const clientInfo = buildClientInfoFromHomeAccountId(ccsCred.credential);
            addCcsOid(parameters, clientInfo);
          } catch (e) {
            this.logger.verbose("Could not parse home account ID for CCS Header: " + e);
          }
          break;
        case CcsCredentialType.UPN:
          addCcsUpn(parameters, ccsCred.credential);
          break;
      }
    }
    if (request.embeddedClientId) {
      addBrokerParameters(parameters, this.config.authOptions.clientId, this.config.authOptions.redirectUri);
    }
    if (request.tokenBodyParameters) {
      addExtraQueryParameters(parameters, request.tokenBodyParameters);
    }
    if (request.enableSpaAuthorizationCode && (!request.tokenBodyParameters || !request.tokenBodyParameters[RETURN_SPA_CODE])) {
      addExtraQueryParameters(parameters, {
        [RETURN_SPA_CODE]: "1"
      });
    }
    instrumentBrokerParams(parameters, request.correlationId, this.performanceClient);
    return mapToQueryString(parameters);
  }
  /**
   * This API validates the `EndSessionRequest` and creates a URL
   * @param request
   */
  createLogoutUrlQueryString(request) {
    const parameters = /* @__PURE__ */ new Map();
    if (request.postLogoutRedirectUri) {
      addPostLogoutRedirectUri(parameters, request.postLogoutRedirectUri);
    }
    if (request.correlationId) {
      addCorrelationId(parameters, request.correlationId);
    }
    if (request.idTokenHint) {
      addIdTokenHint(parameters, request.idTokenHint);
    }
    if (request.state) {
      addState(parameters, request.state);
    }
    if (request.logoutHint) {
      addLogoutHint(parameters, request.logoutHint);
    }
    if (request.extraQueryParameters) {
      addExtraQueryParameters(parameters, request.extraQueryParameters);
    }
    if (this.config.authOptions.instanceAware) {
      addInstanceAware(parameters);
    }
    return mapToQueryString(parameters);
  }
};

// node_modules/@azure/msal-common/dist/client/RefreshTokenClient.mjs
var DEFAULT_REFRESH_TOKEN_EXPIRATION_OFFSET_SECONDS = 300;
var RefreshTokenClient = class extends BaseClient {
  constructor(configuration, performanceClient) {
    super(configuration, performanceClient);
  }
  async acquireToken(request) {
    var _a, _b;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.RefreshTokenClientAcquireToken, request.correlationId);
    const reqTimestamp = nowSeconds();
    const response = await invokeAsync(this.executeTokenRequest.bind(this), PerformanceEvents.RefreshTokenClientExecuteTokenRequest, this.logger, this.performanceClient, request.correlationId)(request, this.authority);
    const requestId = (_b = response.headers) == null ? void 0 : _b[HeaderNames.X_MS_REQUEST_ID];
    const responseHandler = new ResponseHandler(this.config.authOptions.clientId, this.cacheManager, this.cryptoUtils, this.logger, this.config.serializableCache, this.config.persistencePlugin);
    responseHandler.validateTokenResponse(response.body);
    return invokeAsync(responseHandler.handleServerTokenResponse.bind(responseHandler), PerformanceEvents.HandleServerTokenResponse, this.logger, this.performanceClient, request.correlationId)(response.body, this.authority, reqTimestamp, request, void 0, void 0, true, request.forceCache, requestId);
  }
  /**
   * Gets cached refresh token and attaches to request, then calls acquireToken API
   * @param request
   */
  async acquireTokenByRefreshToken(request) {
    var _a;
    if (!request) {
      throw createClientConfigurationError(tokenRequestEmpty);
    }
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.RefreshTokenClientAcquireTokenByRefreshToken, request.correlationId);
    if (!request.account) {
      throw createClientAuthError(noAccountInSilentRequest);
    }
    const isFOCI = this.cacheManager.isAppMetadataFOCI(request.account.environment);
    if (isFOCI) {
      try {
        return await invokeAsync(this.acquireTokenWithCachedRefreshToken.bind(this), PerformanceEvents.RefreshTokenClientAcquireTokenWithCachedRefreshToken, this.logger, this.performanceClient, request.correlationId)(request, true);
      } catch (e) {
        const noFamilyRTInCache = e instanceof InteractionRequiredAuthError && e.errorCode === noTokensFound;
        const clientMismatchErrorWithFamilyRT = e instanceof ServerError && e.errorCode === Errors.INVALID_GRANT_ERROR && e.subError === Errors.CLIENT_MISMATCH_ERROR;
        if (noFamilyRTInCache || clientMismatchErrorWithFamilyRT) {
          return invokeAsync(this.acquireTokenWithCachedRefreshToken.bind(this), PerformanceEvents.RefreshTokenClientAcquireTokenWithCachedRefreshToken, this.logger, this.performanceClient, request.correlationId)(request, false);
        } else {
          throw e;
        }
      }
    }
    return invokeAsync(this.acquireTokenWithCachedRefreshToken.bind(this), PerformanceEvents.RefreshTokenClientAcquireTokenWithCachedRefreshToken, this.logger, this.performanceClient, request.correlationId)(request, false);
  }
  /**
   * makes a network call to acquire tokens by exchanging RefreshToken available in userCache; throws if refresh token is not cached
   * @param request
   */
  async acquireTokenWithCachedRefreshToken(request, foci) {
    var _a, _b, _c;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.RefreshTokenClientAcquireTokenWithCachedRefreshToken, request.correlationId);
    const refreshToken = invoke(this.cacheManager.getRefreshToken.bind(this.cacheManager), PerformanceEvents.CacheManagerGetRefreshToken, this.logger, this.performanceClient, request.correlationId)(request.account, foci, void 0, this.performanceClient, request.correlationId);
    if (!refreshToken) {
      throw createInteractionRequiredAuthError(noTokensFound);
    }
    if (refreshToken.expiresOn && isTokenExpired(refreshToken.expiresOn, request.refreshTokenExpirationOffsetSeconds || DEFAULT_REFRESH_TOKEN_EXPIRATION_OFFSET_SECONDS)) {
      (_b = this.performanceClient) == null ? void 0 : _b.addFields({ rtExpiresOnMs: Number(refreshToken.expiresOn) }, request.correlationId);
      throw createInteractionRequiredAuthError(refreshTokenExpired);
    }
    const refreshTokenRequest = {
      ...request,
      refreshToken: refreshToken.secret,
      authenticationScheme: request.authenticationScheme || AuthenticationScheme.BEARER,
      ccsCredential: {
        credential: request.account.homeAccountId,
        type: CcsCredentialType.HOME_ACCOUNT_ID
      }
    };
    try {
      return await invokeAsync(this.acquireToken.bind(this), PerformanceEvents.RefreshTokenClientAcquireToken, this.logger, this.performanceClient, request.correlationId)(refreshTokenRequest);
    } catch (e) {
      if (e instanceof InteractionRequiredAuthError) {
        (_c = this.performanceClient) == null ? void 0 : _c.addFields({ rtExpiresOnMs: Number(refreshToken.expiresOn) }, request.correlationId);
        if (e.subError === badToken) {
          this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");
          const badRefreshTokenKey = generateCredentialKey(refreshToken);
          this.cacheManager.removeRefreshToken(badRefreshTokenKey);
        }
      }
      throw e;
    }
  }
  /**
   * Constructs the network message and makes a NW call to the underlying secure token service
   * @param request
   * @param authority
   */
  async executeTokenRequest(request, authority) {
    var _a;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.RefreshTokenClientExecuteTokenRequest, request.correlationId);
    const queryParametersString = this.createTokenQueryParameters(request);
    const endpoint = UrlString.appendQueryString(authority.tokenEndpoint, queryParametersString);
    const requestBody = await invokeAsync(this.createTokenRequestBody.bind(this), PerformanceEvents.RefreshTokenClientCreateTokenRequestBody, this.logger, this.performanceClient, request.correlationId)(request);
    const headers = this.createTokenRequestHeaders(request.ccsCredential);
    const thumbprint = getRequestThumbprint(this.config.authOptions.clientId, request);
    return invokeAsync(this.executePostToTokenEndpoint.bind(this), PerformanceEvents.RefreshTokenClientExecutePostToTokenEndpoint, this.logger, this.performanceClient, request.correlationId)(endpoint, requestBody, headers, thumbprint, request.correlationId, PerformanceEvents.RefreshTokenClientExecutePostToTokenEndpoint);
  }
  /**
   * Helper function to create the token request body
   * @param request
   */
  async createTokenRequestBody(request) {
    var _a, _b, _c;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.RefreshTokenClientCreateTokenRequestBody, request.correlationId);
    const parameters = /* @__PURE__ */ new Map();
    addClientId(parameters, request.embeddedClientId || ((_b = request.tokenBodyParameters) == null ? void 0 : _b[CLIENT_ID]) || this.config.authOptions.clientId);
    if (request.redirectUri) {
      addRedirectUri(parameters, request.redirectUri);
    }
    addScopes(parameters, request.scopes, true, (_c = this.config.authOptions.authority.options.OIDCOptions) == null ? void 0 : _c.defaultScopes);
    addGrantType(parameters, GrantType.REFRESH_TOKEN_GRANT);
    addClientInfo(parameters);
    addLibraryInfo(parameters, this.config.libraryInfo);
    addApplicationTelemetry(parameters, this.config.telemetry.application);
    addThrottling(parameters);
    if (this.serverTelemetryManager && !isOidcProtocolMode(this.config)) {
      addServerTelemetry(parameters, this.serverTelemetryManager);
    }
    addRefreshToken(parameters, request.refreshToken);
    if (this.config.clientCredentials.clientSecret) {
      addClientSecret(parameters, this.config.clientCredentials.clientSecret);
    }
    if (this.config.clientCredentials.clientAssertion) {
      const clientAssertion = this.config.clientCredentials.clientAssertion;
      addClientAssertion(parameters, await getClientAssertion(clientAssertion.assertion, this.config.authOptions.clientId, request.resourceRequestUri));
      addClientAssertionType(parameters, clientAssertion.assertionType);
    }
    if (request.authenticationScheme === AuthenticationScheme.POP) {
      const popTokenGenerator = new PopTokenGenerator(this.cryptoUtils, this.performanceClient);
      let reqCnfData;
      if (!request.popKid) {
        const generatedReqCnfData = await invokeAsync(popTokenGenerator.generateCnf.bind(popTokenGenerator), PerformanceEvents.PopTokenGenerateCnf, this.logger, this.performanceClient, request.correlationId)(request, this.logger);
        reqCnfData = generatedReqCnfData.reqCnfString;
      } else {
        reqCnfData = this.cryptoUtils.encodeKid(request.popKid);
      }
      addPopToken(parameters, reqCnfData);
    } else if (request.authenticationScheme === AuthenticationScheme.SSH) {
      if (request.sshJwk) {
        addSshJwk(parameters, request.sshJwk);
      } else {
        throw createClientConfigurationError(missingSshJwk);
      }
    }
    if (!StringUtils.isEmptyObj(request.claims) || this.config.authOptions.clientCapabilities && this.config.authOptions.clientCapabilities.length > 0) {
      addClaims(parameters, request.claims, this.config.authOptions.clientCapabilities);
    }
    if (this.config.systemOptions.preventCorsPreflight && request.ccsCredential) {
      switch (request.ccsCredential.type) {
        case CcsCredentialType.HOME_ACCOUNT_ID:
          try {
            const clientInfo = buildClientInfoFromHomeAccountId(request.ccsCredential.credential);
            addCcsOid(parameters, clientInfo);
          } catch (e) {
            this.logger.verbose("Could not parse home account ID for CCS Header: " + e);
          }
          break;
        case CcsCredentialType.UPN:
          addCcsUpn(parameters, request.ccsCredential.credential);
          break;
      }
    }
    if (request.embeddedClientId) {
      addBrokerParameters(parameters, this.config.authOptions.clientId, this.config.authOptions.redirectUri);
    }
    if (request.tokenBodyParameters) {
      addExtraQueryParameters(parameters, request.tokenBodyParameters);
    }
    instrumentBrokerParams(parameters, request.correlationId, this.performanceClient);
    return mapToQueryString(parameters);
  }
};

// node_modules/@azure/msal-common/dist/client/SilentFlowClient.mjs
var SilentFlowClient = class extends BaseClient {
  constructor(configuration, performanceClient) {
    super(configuration, performanceClient);
  }
  /**
   * Retrieves token from cache or throws an error if it must be refreshed.
   * @param request
   */
  async acquireCachedToken(request) {
    var _a;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.SilentFlowClientAcquireCachedToken, request.correlationId);
    let lastCacheOutcome = CacheOutcome.NOT_APPLICABLE;
    if (request.forceRefresh || !this.config.cacheOptions.claimsBasedCachingEnabled && !StringUtils.isEmptyObj(request.claims)) {
      this.setCacheOutcome(CacheOutcome.FORCE_REFRESH_OR_CLAIMS, request.correlationId);
      throw createClientAuthError(tokenRefreshRequired);
    }
    if (!request.account) {
      throw createClientAuthError(noAccountInSilentRequest);
    }
    const requestTenantId = request.account.tenantId || getTenantFromAuthorityString(request.authority);
    const tokenKeys = this.cacheManager.getTokenKeys();
    const cachedAccessToken = this.cacheManager.getAccessToken(request.account, request, tokenKeys, requestTenantId, this.performanceClient, request.correlationId);
    if (!cachedAccessToken) {
      this.setCacheOutcome(CacheOutcome.NO_CACHED_ACCESS_TOKEN, request.correlationId);
      throw createClientAuthError(tokenRefreshRequired);
    } else if (wasClockTurnedBack(cachedAccessToken.cachedAt) || isTokenExpired(cachedAccessToken.expiresOn, this.config.systemOptions.tokenRenewalOffsetSeconds)) {
      this.setCacheOutcome(CacheOutcome.CACHED_ACCESS_TOKEN_EXPIRED, request.correlationId);
      throw createClientAuthError(tokenRefreshRequired);
    } else if (cachedAccessToken.refreshOn && isTokenExpired(cachedAccessToken.refreshOn, 0)) {
      lastCacheOutcome = CacheOutcome.PROACTIVELY_REFRESHED;
    }
    const environment = request.authority || this.authority.getPreferredCache();
    const cacheRecord = {
      account: this.cacheManager.readAccountFromCache(request.account),
      accessToken: cachedAccessToken,
      idToken: this.cacheManager.getIdToken(request.account, tokenKeys, requestTenantId, this.performanceClient, request.correlationId),
      refreshToken: null,
      appMetadata: this.cacheManager.readAppMetadataFromCache(environment)
    };
    this.setCacheOutcome(lastCacheOutcome, request.correlationId);
    if (this.config.serverTelemetryManager) {
      this.config.serverTelemetryManager.incrementCacheHits();
    }
    return [
      await invokeAsync(this.generateResultFromCacheRecord.bind(this), PerformanceEvents.SilentFlowClientGenerateResultFromCacheRecord, this.logger, this.performanceClient, request.correlationId)(cacheRecord, request),
      lastCacheOutcome
    ];
  }
  setCacheOutcome(cacheOutcome, correlationId) {
    var _a, _b;
    (_a = this.serverTelemetryManager) == null ? void 0 : _a.setCacheOutcome(cacheOutcome);
    (_b = this.performanceClient) == null ? void 0 : _b.addFields({
      cacheOutcome
    }, correlationId);
    if (cacheOutcome !== CacheOutcome.NOT_APPLICABLE) {
      this.logger.info(`Token refresh is required due to cache outcome: ${cacheOutcome}`);
    }
  }
  /**
   * Helper function to build response object from the CacheRecord
   * @param cacheRecord
   */
  async generateResultFromCacheRecord(cacheRecord, request) {
    var _a;
    (_a = this.performanceClient) == null ? void 0 : _a.addQueueMeasurement(PerformanceEvents.SilentFlowClientGenerateResultFromCacheRecord, request.correlationId);
    let idTokenClaims;
    if (cacheRecord.idToken) {
      idTokenClaims = extractTokenClaims(cacheRecord.idToken.secret, this.config.cryptoInterface.base64Decode);
    }
    if (request.maxAge || request.maxAge === 0) {
      const authTime = idTokenClaims == null ? void 0 : idTokenClaims.auth_time;
      if (!authTime) {
        throw createClientAuthError(authTimeNotFound);
      }
      checkMaxAge(authTime, request.maxAge);
    }
    return ResponseHandler.generateAuthenticationResult(this.cryptoUtils, this.authority, cacheRecord, true, request, idTokenClaims);
  }
};

// node_modules/@azure/msal-common/dist/protocol/Authorize.mjs
var Authorize_exports = {};
__export(Authorize_exports, {
  getAuthorizationCodePayload: () => getAuthorizationCodePayload,
  getAuthorizeUrl: () => getAuthorizeUrl,
  getStandardAuthorizeRequestParameters: () => getStandardAuthorizeRequestParameters,
  validateAuthorizationResponse: () => validateAuthorizationResponse
});
function getStandardAuthorizeRequestParameters(authOptions, request, logger, performanceClient) {
  var _a, _b;
  const correlationId = request.correlationId;
  const parameters = /* @__PURE__ */ new Map();
  addClientId(parameters, request.embeddedClientId || ((_a = request.extraQueryParameters) == null ? void 0 : _a[CLIENT_ID]) || authOptions.clientId);
  const requestScopes = [
    ...request.scopes || [],
    ...request.extraScopesToConsent || []
  ];
  addScopes(parameters, requestScopes, true, (_b = authOptions.authority.options.OIDCOptions) == null ? void 0 : _b.defaultScopes);
  addRedirectUri(parameters, request.redirectUri);
  addCorrelationId(parameters, correlationId);
  addResponseMode(parameters, request.responseMode);
  addClientInfo(parameters);
  if (request.prompt) {
    addPrompt(parameters, request.prompt);
    performanceClient == null ? void 0 : performanceClient.addFields({ prompt: request.prompt }, correlationId);
  }
  if (request.domainHint) {
    addDomainHint(parameters, request.domainHint);
    performanceClient == null ? void 0 : performanceClient.addFields({ domainHintFromRequest: true }, correlationId);
  }
  if (request.prompt !== PromptValue.SELECT_ACCOUNT) {
    if (request.sid && request.prompt === PromptValue.NONE) {
      logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request");
      addSid(parameters, request.sid);
      performanceClient == null ? void 0 : performanceClient.addFields({ sidFromRequest: true }, correlationId);
    } else if (request.account) {
      const accountSid = extractAccountSid(request.account);
      let accountLoginHintClaim = extractLoginHint(request.account);
      if (accountLoginHintClaim && request.domainHint) {
        logger.warning(`AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint`);
        accountLoginHintClaim = null;
      }
      if (accountLoginHintClaim) {
        logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account");
        addLoginHint(parameters, accountLoginHintClaim);
        performanceClient == null ? void 0 : performanceClient.addFields({ loginHintFromClaim: true }, correlationId);
        try {
          const clientInfo = buildClientInfoFromHomeAccountId(request.account.homeAccountId);
          addCcsOid(parameters, clientInfo);
        } catch (e) {
          logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header");
        }
      } else if (accountSid && request.prompt === PromptValue.NONE) {
        logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account");
        addSid(parameters, accountSid);
        performanceClient == null ? void 0 : performanceClient.addFields({ sidFromClaim: true }, correlationId);
        try {
          const clientInfo = buildClientInfoFromHomeAccountId(request.account.homeAccountId);
          addCcsOid(parameters, clientInfo);
        } catch (e) {
          logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header");
        }
      } else if (request.loginHint) {
        logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request");
        addLoginHint(parameters, request.loginHint);
        addCcsUpn(parameters, request.loginHint);
        performanceClient == null ? void 0 : performanceClient.addFields({ loginHintFromRequest: true }, correlationId);
      } else if (request.account.username) {
        logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account");
        addLoginHint(parameters, request.account.username);
        performanceClient == null ? void 0 : performanceClient.addFields({ loginHintFromUpn: true }, correlationId);
        try {
          const clientInfo = buildClientInfoFromHomeAccountId(request.account.homeAccountId);
          addCcsOid(parameters, clientInfo);
        } catch (e) {
          logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header");
        }
      }
    } else if (request.loginHint) {
      logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request");
      addLoginHint(parameters, request.loginHint);
      addCcsUpn(parameters, request.loginHint);
      performanceClient == null ? void 0 : performanceClient.addFields({ loginHintFromRequest: true }, correlationId);
    }
  } else {
    logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");
  }
  if (request.nonce) {
    addNonce(parameters, request.nonce);
  }
  if (request.state) {
    addState(parameters, request.state);
  }
  if (request.claims || authOptions.clientCapabilities && authOptions.clientCapabilities.length > 0) {
    addClaims(parameters, request.claims, authOptions.clientCapabilities);
  }
  if (request.embeddedClientId) {
    addBrokerParameters(parameters, authOptions.clientId, authOptions.redirectUri);
  }
  if (authOptions.instanceAware && (!request.extraQueryParameters || !Object.keys(request.extraQueryParameters).includes(INSTANCE_AWARE))) {
    addInstanceAware(parameters);
  }
  return parameters;
}
function getAuthorizeUrl(authority, requestParameters) {
  const queryString = mapToQueryString(requestParameters);
  return UrlString.appendQueryString(authority.authorizationEndpoint, queryString);
}
function getAuthorizationCodePayload(serverParams, cachedState) {
  validateAuthorizationResponse(serverParams, cachedState);
  if (!serverParams.code) {
    throw createClientAuthError(authorizationCodeMissingFromServerResponse);
  }
  return serverParams;
}
function validateAuthorizationResponse(serverResponse, requestState) {
  if (!serverResponse.state || !requestState) {
    throw serverResponse.state ? createClientAuthError(stateNotFound, "Cached State") : createClientAuthError(stateNotFound, "Server State");
  }
  let decodedServerResponseState;
  let decodedRequestState;
  try {
    decodedServerResponseState = decodeURIComponent(serverResponse.state);
  } catch (e) {
    throw createClientAuthError(invalidState, serverResponse.state);
  }
  try {
    decodedRequestState = decodeURIComponent(requestState);
  } catch (e) {
    throw createClientAuthError(invalidState, serverResponse.state);
  }
  if (decodedServerResponseState !== decodedRequestState) {
    throw createClientAuthError(stateMismatch);
  }
  if (serverResponse.error || serverResponse.error_description || serverResponse.suberror) {
    const serverErrorNo = parseServerErrorNo(serverResponse);
    if (isInteractionRequiredError(serverResponse.error, serverResponse.error_description, serverResponse.suberror)) {
      throw new InteractionRequiredAuthError(serverResponse.error || "", serverResponse.error_description, serverResponse.suberror, serverResponse.timestamp || "", serverResponse.trace_id || "", serverResponse.correlation_id || "", serverResponse.claims || "", serverErrorNo);
    }
    throw new ServerError(serverResponse.error || "", serverResponse.error_description, serverResponse.suberror, serverErrorNo);
  }
}
function parseServerErrorNo(serverResponse) {
  var _a, _b;
  const errorCodePrefix = "code=";
  const errorCodePrefixIndex = (_a = serverResponse.error_uri) == null ? void 0 : _a.lastIndexOf(errorCodePrefix);
  return errorCodePrefixIndex && errorCodePrefixIndex >= 0 ? (_b = serverResponse.error_uri) == null ? void 0 : _b.substring(errorCodePrefixIndex + errorCodePrefix.length) : void 0;
}
function extractAccountSid(account) {
  var _a;
  return ((_a = account.idTokenClaims) == null ? void 0 : _a.sid) || null;
}
function extractLoginHint(account) {
  var _a;
  return ((_a = account.idTokenClaims) == null ? void 0 : _a.login_hint) || null;
}

// node_modules/@azure/msal-common/dist/telemetry/server/ServerTelemetryManager.mjs
var skuGroupSeparator = ",";
var skuValueSeparator = "|";
function makeExtraSkuString(params) {
  const { skus, libraryName, libraryVersion, extensionName, extensionVersion } = params;
  const skuMap = /* @__PURE__ */ new Map([
    [0, [libraryName, libraryVersion]],
    [2, [extensionName, extensionVersion]]
  ]);
  let skuArr = [];
  if (skus == null ? void 0 : skus.length) {
    skuArr = skus.split(skuGroupSeparator);
    if (skuArr.length < 4) {
      return skus;
    }
  } else {
    skuArr = Array.from({ length: 4 }, () => skuValueSeparator);
  }
  skuMap.forEach((value, key) => {
    var _a, _b;
    if (value.length === 2 && ((_a = value[0]) == null ? void 0 : _a.length) && ((_b = value[1]) == null ? void 0 : _b.length)) {
      setSku({
        skuArr,
        index: key,
        skuName: value[0],
        skuVersion: value[1]
      });
    }
  });
  return skuArr.join(skuGroupSeparator);
}
function setSku(params) {
  const { skuArr, index, skuName, skuVersion } = params;
  if (index >= skuArr.length) {
    return;
  }
  skuArr[index] = [skuName, skuVersion].join(skuValueSeparator);
}
var ServerTelemetryManager = class _ServerTelemetryManager {
  constructor(telemetryRequest, cacheManager) {
    this.cacheOutcome = CacheOutcome.NOT_APPLICABLE;
    this.cacheManager = cacheManager;
    this.apiId = telemetryRequest.apiId;
    this.correlationId = telemetryRequest.correlationId;
    this.wrapperSKU = telemetryRequest.wrapperSKU || Constants.EMPTY_STRING;
    this.wrapperVer = telemetryRequest.wrapperVer || Constants.EMPTY_STRING;
    this.telemetryCacheKey = SERVER_TELEM_CONSTANTS.CACHE_KEY + Separators.CACHE_KEY_SEPARATOR + telemetryRequest.clientId;
  }
  /**
   * API to add MSER Telemetry to request
   */
  generateCurrentRequestHeaderValue() {
    const request = `${this.apiId}${SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR}${this.cacheOutcome}`;
    const platformFieldsArr = [this.wrapperSKU, this.wrapperVer];
    const nativeBrokerErrorCode = this.getNativeBrokerErrorCode();
    if (nativeBrokerErrorCode == null ? void 0 : nativeBrokerErrorCode.length) {
      platformFieldsArr.push(`broker_error=${nativeBrokerErrorCode}`);
    }
    const platformFields = platformFieldsArr.join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR);
    const regionDiscoveryFields = this.getRegionDiscoveryFields();
    const requestWithRegionDiscoveryFields = [
      request,
      regionDiscoveryFields
    ].join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR);
    return [
      SERVER_TELEM_CONSTANTS.SCHEMA_VERSION,
      requestWithRegionDiscoveryFields,
      platformFields
    ].join(SERVER_TELEM_CONSTANTS.CATEGORY_SEPARATOR);
  }
  /**
   * API to add MSER Telemetry for the last failed request
   */
  generateLastRequestHeaderValue() {
    const lastRequests = this.getLastRequests();
    const maxErrors = _ServerTelemetryManager.maxErrorsToSend(lastRequests);
    const failedRequests = lastRequests.failedRequests.slice(0, 2 * maxErrors).join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR);
    const errors = lastRequests.errors.slice(0, maxErrors).join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR);
    const errorCount = lastRequests.errors.length;
    const overflow = maxErrors < errorCount ? SERVER_TELEM_CONSTANTS.OVERFLOW_TRUE : SERVER_TELEM_CONSTANTS.OVERFLOW_FALSE;
    const platformFields = [errorCount, overflow].join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR);
    return [
      SERVER_TELEM_CONSTANTS.SCHEMA_VERSION,
      lastRequests.cacheHits,
      failedRequests,
      errors,
      platformFields
    ].join(SERVER_TELEM_CONSTANTS.CATEGORY_SEPARATOR);
  }
  /**
   * API to cache token failures for MSER data capture
   * @param error
   */
  cacheFailedRequest(error) {
    const lastRequests = this.getLastRequests();
    if (lastRequests.errors.length >= SERVER_TELEM_CONSTANTS.MAX_CACHED_ERRORS) {
      lastRequests.failedRequests.shift();
      lastRequests.failedRequests.shift();
      lastRequests.errors.shift();
    }
    lastRequests.failedRequests.push(this.apiId, this.correlationId);
    if (error instanceof Error && !!error && error.toString()) {
      if (error instanceof AuthError) {
        if (error.subError) {
          lastRequests.errors.push(error.subError);
        } else if (error.errorCode) {
          lastRequests.errors.push(error.errorCode);
        } else {
          lastRequests.errors.push(error.toString());
        }
      } else {
        lastRequests.errors.push(error.toString());
      }
    } else {
      lastRequests.errors.push(SERVER_TELEM_CONSTANTS.UNKNOWN_ERROR);
    }
    this.cacheManager.setServerTelemetry(this.telemetryCacheKey, lastRequests);
    return;
  }
  /**
   * Update server telemetry cache entry by incrementing cache hit counter
   */
  incrementCacheHits() {
    const lastRequests = this.getLastRequests();
    lastRequests.cacheHits += 1;
    this.cacheManager.setServerTelemetry(this.telemetryCacheKey, lastRequests);
    return lastRequests.cacheHits;
  }
  /**
   * Get the server telemetry entity from cache or initialize a new one
   */
  getLastRequests() {
    const initialValue = {
      failedRequests: [],
      errors: [],
      cacheHits: 0
    };
    const lastRequests = this.cacheManager.getServerTelemetry(this.telemetryCacheKey);
    return lastRequests || initialValue;
  }
  /**
   * Remove server telemetry cache entry
   */
  clearTelemetryCache() {
    const lastRequests = this.getLastRequests();
    const numErrorsFlushed = _ServerTelemetryManager.maxErrorsToSend(lastRequests);
    const errorCount = lastRequests.errors.length;
    if (numErrorsFlushed === errorCount) {
      this.cacheManager.removeItem(this.telemetryCacheKey);
    } else {
      const serverTelemEntity = {
        failedRequests: lastRequests.failedRequests.slice(numErrorsFlushed * 2),
        errors: lastRequests.errors.slice(numErrorsFlushed),
        cacheHits: 0
      };
      this.cacheManager.setServerTelemetry(this.telemetryCacheKey, serverTelemEntity);
    }
  }
  /**
   * Returns the maximum number of errors that can be flushed to the server in the next network request
   * @param serverTelemetryEntity
   */
  static maxErrorsToSend(serverTelemetryEntity) {
    let i;
    let maxErrors = 0;
    let dataSize = 0;
    const errorCount = serverTelemetryEntity.errors.length;
    for (i = 0; i < errorCount; i++) {
      const apiId = serverTelemetryEntity.failedRequests[2 * i] || Constants.EMPTY_STRING;
      const correlationId = serverTelemetryEntity.failedRequests[2 * i + 1] || Constants.EMPTY_STRING;
      const errorCode = serverTelemetryEntity.errors[i] || Constants.EMPTY_STRING;
      dataSize += apiId.toString().length + correlationId.toString().length + errorCode.length + 3;
      if (dataSize < SERVER_TELEM_CONSTANTS.MAX_LAST_HEADER_BYTES) {
        maxErrors += 1;
      } else {
        break;
      }
    }
    return maxErrors;
  }
  /**
   * Get the region discovery fields
   *
   * @returns string
   */
  getRegionDiscoveryFields() {
    const regionDiscoveryFields = [];
    regionDiscoveryFields.push(this.regionUsed || Constants.EMPTY_STRING);
    regionDiscoveryFields.push(this.regionSource || Constants.EMPTY_STRING);
    regionDiscoveryFields.push(this.regionOutcome || Constants.EMPTY_STRING);
    return regionDiscoveryFields.join(",");
  }
  /**
   * Update the region discovery metadata
   *
   * @param regionDiscoveryMetadata
   * @returns void
   */
  updateRegionDiscoveryMetadata(regionDiscoveryMetadata) {
    this.regionUsed = regionDiscoveryMetadata.region_used;
    this.regionSource = regionDiscoveryMetadata.region_source;
    this.regionOutcome = regionDiscoveryMetadata.region_outcome;
  }
  /**
   * Set cache outcome
   */
  setCacheOutcome(cacheOutcome) {
    this.cacheOutcome = cacheOutcome;
  }
  setNativeBrokerErrorCode(errorCode) {
    const lastRequests = this.getLastRequests();
    lastRequests.nativeBrokerErrorCode = errorCode;
    this.cacheManager.setServerTelemetry(this.telemetryCacheKey, lastRequests);
  }
  getNativeBrokerErrorCode() {
    return this.getLastRequests().nativeBrokerErrorCode;
  }
  clearNativeBrokerErrorCode() {
    const lastRequests = this.getLastRequests();
    delete lastRequests.nativeBrokerErrorCode;
    this.cacheManager.setServerTelemetry(this.telemetryCacheKey, lastRequests);
  }
  static makeExtraSkuString(params) {
    return makeExtraSkuString(params);
  }
};

// node_modules/@azure/msal-node/dist/cache/serializer/Deserializer.mjs
var Deserializer = class {
  /**
   * Parse the JSON blob in memory and deserialize the content
   * @param cachedJson - JSON blob cache
   */
  static deserializeJSONBlob(jsonFile) {
    const deserializedCache = !jsonFile ? {} : JSON.parse(jsonFile);
    return deserializedCache;
  }
  /**
   * Deserializes accounts to AccountEntity objects
   * @param accounts - accounts of type SerializedAccountEntity
   */
  static deserializeAccounts(accounts) {
    const accountObjects = {};
    if (accounts) {
      Object.keys(accounts).map(function(key) {
        var _a;
        const serializedAcc = accounts[key];
        const mappedAcc = {
          homeAccountId: serializedAcc.home_account_id,
          environment: serializedAcc.environment,
          realm: serializedAcc.realm,
          localAccountId: serializedAcc.local_account_id,
          username: serializedAcc.username,
          authorityType: serializedAcc.authority_type,
          name: serializedAcc.name,
          clientInfo: serializedAcc.client_info,
          lastModificationTime: serializedAcc.last_modification_time,
          lastModificationApp: serializedAcc.last_modification_app,
          tenantProfiles: (_a = serializedAcc.tenantProfiles) == null ? void 0 : _a.map((serializedTenantProfile) => {
            return JSON.parse(serializedTenantProfile);
          })
        };
        const account = new AccountEntity();
        CacheManager.toObject(account, mappedAcc);
        accountObjects[key] = account;
      });
    }
    return accountObjects;
  }
  /**
   * Deserializes id tokens to IdTokenEntity objects
   * @param idTokens - credentials of type SerializedIdTokenEntity
   */
  static deserializeIdTokens(idTokens) {
    const idObjects = {};
    if (idTokens) {
      Object.keys(idTokens).map(function(key) {
        const serializedIdT = idTokens[key];
        const idToken = {
          homeAccountId: serializedIdT.home_account_id,
          environment: serializedIdT.environment,
          credentialType: serializedIdT.credential_type,
          clientId: serializedIdT.client_id,
          secret: serializedIdT.secret,
          realm: serializedIdT.realm
        };
        idObjects[key] = idToken;
      });
    }
    return idObjects;
  }
  /**
   * Deserializes access tokens to AccessTokenEntity objects
   * @param accessTokens - access tokens of type SerializedAccessTokenEntity
   */
  static deserializeAccessTokens(accessTokens) {
    const atObjects = {};
    if (accessTokens) {
      Object.keys(accessTokens).map(function(key) {
        const serializedAT = accessTokens[key];
        const accessToken = {
          homeAccountId: serializedAT.home_account_id,
          environment: serializedAT.environment,
          credentialType: serializedAT.credential_type,
          clientId: serializedAT.client_id,
          secret: serializedAT.secret,
          realm: serializedAT.realm,
          target: serializedAT.target,
          cachedAt: serializedAT.cached_at,
          expiresOn: serializedAT.expires_on,
          extendedExpiresOn: serializedAT.extended_expires_on,
          refreshOn: serializedAT.refresh_on,
          keyId: serializedAT.key_id,
          tokenType: serializedAT.token_type,
          requestedClaims: serializedAT.requestedClaims,
          requestedClaimsHash: serializedAT.requestedClaimsHash,
          userAssertionHash: serializedAT.userAssertionHash
        };
        atObjects[key] = accessToken;
      });
    }
    return atObjects;
  }
  /**
   * Deserializes refresh tokens to RefreshTokenEntity objects
   * @param refreshTokens - refresh tokens of type SerializedRefreshTokenEntity
   */
  static deserializeRefreshTokens(refreshTokens) {
    const rtObjects = {};
    if (refreshTokens) {
      Object.keys(refreshTokens).map(function(key) {
        const serializedRT = refreshTokens[key];
        const refreshToken = {
          homeAccountId: serializedRT.home_account_id,
          environment: serializedRT.environment,
          credentialType: serializedRT.credential_type,
          clientId: serializedRT.client_id,
          secret: serializedRT.secret,
          familyId: serializedRT.family_id,
          target: serializedRT.target,
          realm: serializedRT.realm
        };
        rtObjects[key] = refreshToken;
      });
    }
    return rtObjects;
  }
  /**
   * Deserializes appMetadata to AppMetaData objects
   * @param appMetadata - app metadata of type SerializedAppMetadataEntity
   */
  static deserializeAppMetadata(appMetadata) {
    const appMetadataObjects = {};
    if (appMetadata) {
      Object.keys(appMetadata).map(function(key) {
        const serializedAmdt = appMetadata[key];
        appMetadataObjects[key] = {
          clientId: serializedAmdt.client_id,
          environment: serializedAmdt.environment,
          familyId: serializedAmdt.family_id
        };
      });
    }
    return appMetadataObjects;
  }
  /**
   * Deserialize an inMemory Cache
   * @param jsonCache - JSON blob cache
   */
  static deserializeAllCache(jsonCache) {
    return {
      accounts: jsonCache.Account ? this.deserializeAccounts(jsonCache.Account) : {},
      idTokens: jsonCache.IdToken ? this.deserializeIdTokens(jsonCache.IdToken) : {},
      accessTokens: jsonCache.AccessToken ? this.deserializeAccessTokens(jsonCache.AccessToken) : {},
      refreshTokens: jsonCache.RefreshToken ? this.deserializeRefreshTokens(jsonCache.RefreshToken) : {},
      appMetadata: jsonCache.AppMetadata ? this.deserializeAppMetadata(jsonCache.AppMetadata) : {}
    };
  }
};

// node_modules/@azure/msal-node/dist/utils/Constants.mjs
var MANAGED_IDENTITY_DEFAULT_TENANT = "managed_identity";
var DEFAULT_AUTHORITY_FOR_MANAGED_IDENTITY = `https://login.microsoftonline.com/${MANAGED_IDENTITY_DEFAULT_TENANT}/`;
var ManagedIdentityEnvironmentVariableNames = {
  AZURE_POD_IDENTITY_AUTHORITY_HOST: "AZURE_POD_IDENTITY_AUTHORITY_HOST",
  IDENTITY_ENDPOINT: "IDENTITY_ENDPOINT",
  IDENTITY_HEADER: "IDENTITY_HEADER",
  IDENTITY_SERVER_THUMBPRINT: "IDENTITY_SERVER_THUMBPRINT",
  IMDS_ENDPOINT: "IMDS_ENDPOINT",
  MSI_ENDPOINT: "MSI_ENDPOINT",
  MSI_SECRET: "MSI_SECRET"
};
var ManagedIdentityIdType = {
  SYSTEM_ASSIGNED: "system-assigned",
  USER_ASSIGNED_CLIENT_ID: "user-assigned-client-id",
  USER_ASSIGNED_RESOURCE_ID: "user-assigned-resource-id",
  USER_ASSIGNED_OBJECT_ID: "user-assigned-object-id"
};
var HttpMethod = {
  GET: "get",
  POST: "post"
};
var ProxyStatus = {
  SUCCESS: HttpStatus.SUCCESS,
  SUCCESS_RANGE_START: HttpStatus.SUCCESS_RANGE_START,
  SUCCESS_RANGE_END: HttpStatus.SUCCESS_RANGE_END,
  SERVER_ERROR: HttpStatus.SERVER_ERROR
};
var REGION_ENVIRONMENT_VARIABLE = "REGION_NAME";
var MSAL_FORCE_REGION = "MSAL_FORCE_REGION";
var RANDOM_OCTET_SIZE = 32;
var Hash = {
  SHA256: "sha256"
};
var CharSet = {
  CV_CHARSET: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~"
};
var Constants2 = {
  MSAL_SKU: "msal.js.node",
  JWT_BEARER_ASSERTION_TYPE: "urn:ietf:params:oauth:client-assertion-type:jwt-bearer",
  AUTHORIZATION_PENDING: "authorization_pending",
  HTTP_PROTOCOL: "http://",
  LOCALHOST: "localhost"
};
var ApiId = {
  acquireTokenSilent: 62,
  acquireTokenByUsernamePassword: 371,
  acquireTokenByDeviceCode: 671,
  acquireTokenByClientCredential: 771,
  acquireTokenByCode: 871,
  acquireTokenByRefreshToken: 872
};
var JwtConstants = {
  ALGORITHM: "alg",
  RSA_256: "RS256",
  PSS_256: "PS256",
  X5T_256: "x5t#S256",
  X5T: "x5t",
  X5C: "x5c",
  AUDIENCE: "aud",
  EXPIRATION_TIME: "exp",
  ISSUER: "iss",
  SUBJECT: "sub",
  NOT_BEFORE: "nbf",
  JWT_ID: "jti"
};
var MANAGED_IDENTITY_HTTP_STATUS_CODES_TO_RETRY_ON = [
  HttpStatus.NOT_FOUND,
  HttpStatus.REQUEST_TIMEOUT,
  HttpStatus.TOO_MANY_REQUESTS,
  HttpStatus.SERVER_ERROR,
  HttpStatus.SERVICE_UNAVAILABLE,
  HttpStatus.GATEWAY_TIMEOUT
];

// node_modules/@azure/msal-node/dist/utils/NetworkUtils.mjs
var NetworkUtils = class {
  static getNetworkResponse(headers, body, statusCode) {
    return {
      headers,
      body,
      status: statusCode
    };
  }
  /*
   * Utility function that converts a URL object into an ordinary options object as expected by the
   * http.request and https.request APIs.
   * https://github.com/nodejs/node/blob/main/lib/internal/url.js#L1090
   */
  static urlToHttpOptions(url) {
    const options = {
      protocol: url.protocol,
      hostname: url.hostname && url.hostname.startsWith("[") ? url.hostname.slice(1, -1) : url.hostname,
      hash: url.hash,
      search: url.search,
      pathname: url.pathname,
      path: `${url.pathname || ""}${url.search || ""}`,
      href: url.href
    };
    if (url.port !== "") {
      options.port = Number(url.port);
    }
    if (url.username || url.password) {
      options.auth = `${decodeURIComponent(url.username)}:${decodeURIComponent(url.password)}`;
    }
    return options;
  }
};

// node_modules/@azure/msal-node/dist/network/HttpClient.mjs
var import_http = __toESM(require("http"), 1);
var import_https = __toESM(require("https"), 1);
var HttpClient = class {
  constructor(proxyUrl, customAgentOptions) {
    this.proxyUrl = proxyUrl || "";
    this.customAgentOptions = customAgentOptions || {};
  }
  /**
   * Http Get request
   * @param url
   * @param options
   */
  async sendGetRequestAsync(url, options, timeout) {
    if (this.proxyUrl) {
      return networkRequestViaProxy(url, this.proxyUrl, HttpMethod.GET, options, this.customAgentOptions, timeout);
    } else {
      return networkRequestViaHttps(url, HttpMethod.GET, options, this.customAgentOptions, timeout);
    }
  }
  /**
   * Http Post request
   * @param url
   * @param options
   */
  async sendPostRequestAsync(url, options) {
    if (this.proxyUrl) {
      return networkRequestViaProxy(url, this.proxyUrl, HttpMethod.POST, options, this.customAgentOptions);
    } else {
      return networkRequestViaHttps(url, HttpMethod.POST, options, this.customAgentOptions);
    }
  }
};
var networkRequestViaProxy = (destinationUrlString, proxyUrlString, httpMethod, options, agentOptions, timeout) => {
  const destinationUrl = new URL(destinationUrlString);
  const proxyUrl = new URL(proxyUrlString);
  const headers = (options == null ? void 0 : options.headers) || {};
  const tunnelRequestOptions = {
    host: proxyUrl.hostname,
    port: proxyUrl.port,
    method: "CONNECT",
    path: destinationUrl.hostname,
    headers
  };
  if (agentOptions && Object.keys(agentOptions).length) {
    tunnelRequestOptions.agent = new import_http.default.Agent(agentOptions);
  }
  let postRequestStringContent = "";
  if (httpMethod === HttpMethod.POST) {
    const body = (options == null ? void 0 : options.body) || "";
    postRequestStringContent = `Content-Type: application/x-www-form-urlencoded\r
Content-Length: ${body.length}\r
\r
${body}`;
  } else {
    if (timeout) {
      tunnelRequestOptions.timeout = timeout;
    }
  }
  const outgoingRequestString = `${httpMethod.toUpperCase()} ${destinationUrl.href} HTTP/1.1\r
Host: ${destinationUrl.host}\r
Connection: close\r
` + postRequestStringContent + "\r\n";
  return new Promise((resolve, reject) => {
    const request = import_http.default.request(tunnelRequestOptions);
    if (timeout) {
      request.on("timeout", () => {
        request.destroy();
        reject(new Error("Request time out"));
      });
    }
    request.end();
    request.on("connect", (response, socket) => {
      const proxyStatusCode = (response == null ? void 0 : response.statusCode) || ProxyStatus.SERVER_ERROR;
      if (proxyStatusCode < ProxyStatus.SUCCESS_RANGE_START || proxyStatusCode > ProxyStatus.SUCCESS_RANGE_END) {
        request.destroy();
        socket.destroy();
        reject(new Error(`Error connecting to proxy. Http status code: ${response.statusCode}. Http status message: ${(response == null ? void 0 : response.statusMessage) || "Unknown"}`));
      }
      socket.write(outgoingRequestString);
      const data = [];
      socket.on("data", (chunk) => {
        data.push(chunk);
      });
      socket.on("end", () => {
        const dataString = Buffer.concat([...data]).toString();
        const dataStringArray = dataString.split("\r\n");
        const httpStatusCode = parseInt(dataStringArray[0].split(" ")[1]);
        const statusMessage = dataStringArray[0].split(" ").slice(2).join(" ");
        const body = dataStringArray[dataStringArray.length - 1];
        const headersArray = dataStringArray.slice(1, dataStringArray.length - 2);
        const entries = /* @__PURE__ */ new Map();
        headersArray.forEach((header) => {
          const headerKeyValue = header.split(new RegExp(/:\s(.*)/s));
          const headerKey = headerKeyValue[0];
          let headerValue = headerKeyValue[1];
          try {
            const object = JSON.parse(headerValue);
            if (object && typeof object === "object") {
              headerValue = object;
            }
          } catch (e) {
          }
          entries.set(headerKey, headerValue);
        });
        const headers2 = Object.fromEntries(entries);
        const parsedHeaders = headers2;
        const networkResponse = NetworkUtils.getNetworkResponse(parsedHeaders, parseBody(httpStatusCode, statusMessage, parsedHeaders, body), httpStatusCode);
        if ((httpStatusCode < HttpStatus.SUCCESS_RANGE_START || httpStatusCode > HttpStatus.SUCCESS_RANGE_END) && // do not destroy the request for the device code flow
        networkResponse.body["error"] !== Constants2.AUTHORIZATION_PENDING) {
          request.destroy();
        }
        resolve(networkResponse);
      });
      socket.on("error", (chunk) => {
        request.destroy();
        socket.destroy();
        reject(new Error(chunk.toString()));
      });
    });
    request.on("error", (chunk) => {
      request.destroy();
      reject(new Error(chunk.toString()));
    });
  });
};
var networkRequestViaHttps = (urlString, httpMethod, options, agentOptions, timeout) => {
  const isPostRequest = httpMethod === HttpMethod.POST;
  const body = (options == null ? void 0 : options.body) || "";
  const url = new URL(urlString);
  const headers = (options == null ? void 0 : options.headers) || {};
  const customOptions = {
    method: httpMethod,
    headers,
    ...NetworkUtils.urlToHttpOptions(url)
  };
  if (agentOptions && Object.keys(agentOptions).length) {
    customOptions.agent = new import_https.default.Agent(agentOptions);
  }
  if (isPostRequest) {
    customOptions.headers = {
      ...customOptions.headers,
      "Content-Length": body.length
    };
  } else {
    if (timeout) {
      customOptions.timeout = timeout;
    }
  }
  return new Promise((resolve, reject) => {
    let request;
    if (customOptions.protocol === "http:") {
      request = import_http.default.request(customOptions);
    } else {
      request = import_https.default.request(customOptions);
    }
    if (isPostRequest) {
      request.write(body);
    }
    if (timeout) {
      request.on("timeout", () => {
        request.destroy();
        reject(new Error("Request time out"));
      });
    }
    request.end();
    request.on("response", (response) => {
      const headers2 = response.headers;
      const statusCode = response.statusCode;
      const statusMessage = response.statusMessage;
      const data = [];
      response.on("data", (chunk) => {
        data.push(chunk);
      });
      response.on("end", () => {
        const body2 = Buffer.concat([...data]).toString();
        const parsedHeaders = headers2;
        const networkResponse = NetworkUtils.getNetworkResponse(parsedHeaders, parseBody(statusCode, statusMessage, parsedHeaders, body2), statusCode);
        if ((statusCode < HttpStatus.SUCCESS_RANGE_START || statusCode > HttpStatus.SUCCESS_RANGE_END) && // do not destroy the request for the device code flow
        networkResponse.body["error"] !== Constants2.AUTHORIZATION_PENDING) {
          request.destroy();
        }
        resolve(networkResponse);
      });
    });
    request.on("error", (chunk) => {
      request.destroy();
      reject(new Error(chunk.toString()));
    });
  });
};
var parseBody = (statusCode, statusMessage, headers, body) => {
  let parsedBody;
  try {
    parsedBody = JSON.parse(body);
  } catch (error) {
    let errorType;
    let errorDescriptionHelper;
    if (statusCode >= HttpStatus.CLIENT_ERROR_RANGE_START && statusCode <= HttpStatus.CLIENT_ERROR_RANGE_END) {
      errorType = "client_error";
      errorDescriptionHelper = "A client";
    } else if (statusCode >= HttpStatus.SERVER_ERROR_RANGE_START && statusCode <= HttpStatus.SERVER_ERROR_RANGE_END) {
      errorType = "server_error";
      errorDescriptionHelper = "A server";
    } else {
      errorType = "unknown_error";
      errorDescriptionHelper = "An unknown";
    }
    parsedBody = {
      error: errorType,
      error_description: `${errorDescriptionHelper} error occured.
Http status code: ${statusCode}
Http status message: ${statusMessage || "Unknown"}
Headers: ${JSON.stringify(headers)}`
    };
  }
  return parsedBody;
};

// node_modules/@azure/msal-node/dist/error/ManagedIdentityErrorCodes.mjs
var invalidFileExtension = "invalid_file_extension";
var invalidFilePath = "invalid_file_path";
var invalidManagedIdentityIdType = "invalid_managed_identity_id_type";
var invalidSecret = "invalid_secret";
var missingId = "missing_client_id";
var networkUnavailable = "network_unavailable";
var platformNotSupported = "platform_not_supported";
var unableToCreateAzureArc = "unable_to_create_azure_arc";
var unableToCreateCloudShell = "unable_to_create_cloud_shell";
var unableToCreateSource = "unable_to_create_source";
var unableToReadSecretFile = "unable_to_read_secret_file";
var userAssignedNotAvailableAtRuntime = "user_assigned_not_available_at_runtime";
var wwwAuthenticateHeaderMissing = "www_authenticate_header_missing";
var wwwAuthenticateHeaderUnsupportedFormat = "www_authenticate_header_unsupported_format";
var MsiEnvironmentVariableUrlMalformedErrorCodes = {
  [ManagedIdentityEnvironmentVariableNames.AZURE_POD_IDENTITY_AUTHORITY_HOST]: "azure_pod_identity_authority_host_url_malformed",
  [ManagedIdentityEnvironmentVariableNames.IDENTITY_ENDPOINT]: "identity_endpoint_url_malformed",
  [ManagedIdentityEnvironmentVariableNames.IMDS_ENDPOINT]: "imds_endpoint_url_malformed",
  [ManagedIdentityEnvironmentVariableNames.MSI_ENDPOINT]: "msi_endpoint_url_malformed"
};

// node_modules/@azure/msal-node/dist/error/ManagedIdentityError.mjs
var ManagedIdentityErrorMessages = {
  [invalidFileExtension]: "The file path in the WWW-Authenticate header does not contain a .key file.",
  [invalidFilePath]: "The file path in the WWW-Authenticate header is not in a valid Windows or Linux Format.",
  [invalidManagedIdentityIdType]: "More than one ManagedIdentityIdType was provided.",
  [invalidSecret]: "The secret in the file on the file path in the WWW-Authenticate header is greater than 4096 bytes.",
  [platformNotSupported]: "The platform is not supported by Azure Arc. Azure Arc only supports Windows and Linux.",
  [missingId]: "A ManagedIdentityId id was not provided.",
  [MsiEnvironmentVariableUrlMalformedErrorCodes.AZURE_POD_IDENTITY_AUTHORITY_HOST]: `The Managed Identity's '${ManagedIdentityEnvironmentVariableNames.AZURE_POD_IDENTITY_AUTHORITY_HOST}' environment variable is malformed.`,
  [MsiEnvironmentVariableUrlMalformedErrorCodes.IDENTITY_ENDPOINT]: `The Managed Identity's '${ManagedIdentityEnvironmentVariableNames.IDENTITY_ENDPOINT}' environment variable is malformed.`,
  [MsiEnvironmentVariableUrlMalformedErrorCodes.IMDS_ENDPOINT]: `The Managed Identity's '${ManagedIdentityEnvironmentVariableNames.IMDS_ENDPOINT}' environment variable is malformed.`,
  [MsiEnvironmentVariableUrlMalformedErrorCodes.MSI_ENDPOINT]: `The Managed Identity's '${ManagedIdentityEnvironmentVariableNames.MSI_ENDPOINT}' environment variable is malformed.`,
  [networkUnavailable]: "Authentication unavailable. The request to the managed identity endpoint timed out.",
  [unableToCreateAzureArc]: "Azure Arc Managed Identities can only be system assigned.",
  [unableToCreateCloudShell]: "Cloud Shell Managed Identities can only be system assigned.",
  [unableToCreateSource]: "Unable to create a Managed Identity source based on environment variables.",
  [unableToReadSecretFile]: "Unable to read the secret file.",
  [userAssignedNotAvailableAtRuntime]: "Service Fabric user assigned managed identity ClientId or ResourceId is not configurable at runtime.",
  [wwwAuthenticateHeaderMissing]: "A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is missing.",
  [wwwAuthenticateHeaderUnsupportedFormat]: "A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is in an unsupported format."
};
var ManagedIdentityError = class _ManagedIdentityError extends AuthError {
  constructor(errorCode) {
    super(errorCode, ManagedIdentityErrorMessages[errorCode]);
    this.name = "ManagedIdentityError";
    Object.setPrototypeOf(this, _ManagedIdentityError.prototype);
  }
};
function createManagedIdentityError(errorCode) {
  return new ManagedIdentityError(errorCode);
}

// node_modules/@azure/msal-node/dist/error/NodeAuthError.mjs
var NodeAuthErrorMessage = {
  invalidLoopbackAddressType: {
    code: "invalid_loopback_server_address_type",
    desc: "Loopback server address is not type string. This is unexpected."
  },
  unableToLoadRedirectUri: {
    code: "unable_to_load_redirectUrl",
    desc: "Loopback server callback was invoked without a url. This is unexpected."
  },
  noAuthCodeInResponse: {
    code: "no_auth_code_in_response",
    desc: "No auth code found in the server response. Please check your network trace to determine what happened."
  },
  noLoopbackServerExists: {
    code: "no_loopback_server_exists",
    desc: "No loopback server exists yet."
  },
  loopbackServerAlreadyExists: {
    code: "loopback_server_already_exists",
    desc: "Loopback server already exists. Cannot create another."
  },
  loopbackServerTimeout: {
    code: "loopback_server_timeout",
    desc: "Timed out waiting for auth code listener to be registered."
  },
  stateNotFoundError: {
    code: "state_not_found",
    desc: "State not found. Please verify that the request originated from msal."
  },
  thumbprintMissing: {
    code: "thumbprint_missing_from_client_certificate",
    desc: "Client certificate does not contain a SHA-1 or SHA-256 thumbprint."
  }
};
var NodeAuthError = class _NodeAuthError extends AuthError {
  constructor(errorCode, errorMessage) {
    super(errorCode, errorMessage);
    this.name = "NodeAuthError";
  }
  /**
   * Creates an error thrown if loopback server address is of type string.
   */
  static createInvalidLoopbackAddressTypeError() {
    return new _NodeAuthError(NodeAuthErrorMessage.invalidLoopbackAddressType.code, `${NodeAuthErrorMessage.invalidLoopbackAddressType.desc}`);
  }
  /**
   * Creates an error thrown if the loopback server is unable to get a url.
   */
  static createUnableToLoadRedirectUrlError() {
    return new _NodeAuthError(NodeAuthErrorMessage.unableToLoadRedirectUri.code, `${NodeAuthErrorMessage.unableToLoadRedirectUri.desc}`);
  }
  /**
   * Creates an error thrown if the server response does not contain an auth code.
   */
  static createNoAuthCodeInResponseError() {
    return new _NodeAuthError(NodeAuthErrorMessage.noAuthCodeInResponse.code, `${NodeAuthErrorMessage.noAuthCodeInResponse.desc}`);
  }
  /**
   * Creates an error thrown if the loopback server has not been spun up yet.
   */
  static createNoLoopbackServerExistsError() {
    return new _NodeAuthError(NodeAuthErrorMessage.noLoopbackServerExists.code, `${NodeAuthErrorMessage.noLoopbackServerExists.desc}`);
  }
  /**
   * Creates an error thrown if a loopback server already exists when attempting to create another one.
   */
  static createLoopbackServerAlreadyExistsError() {
    return new _NodeAuthError(NodeAuthErrorMessage.loopbackServerAlreadyExists.code, `${NodeAuthErrorMessage.loopbackServerAlreadyExists.desc}`);
  }
  /**
   * Creates an error thrown if the loopback server times out registering the auth code listener.
   */
  static createLoopbackServerTimeoutError() {
    return new _NodeAuthError(NodeAuthErrorMessage.loopbackServerTimeout.code, `${NodeAuthErrorMessage.loopbackServerTimeout.desc}`);
  }
  /**
   * Creates an error thrown when the state is not present.
   */
  static createStateNotFoundError() {
    return new _NodeAuthError(NodeAuthErrorMessage.stateNotFoundError.code, NodeAuthErrorMessage.stateNotFoundError.desc);
  }
  /**
   * Creates an error thrown when client certificate was provided, but neither the SHA-1 or SHA-256 thumbprints were provided
   */
  static createThumbprintMissingError() {
    return new _NodeAuthError(NodeAuthErrorMessage.thumbprintMissing.code, NodeAuthErrorMessage.thumbprintMissing.desc);
  }
};

// node_modules/@azure/msal-node/dist/config/Configuration.mjs
var DEFAULT_AUTH_OPTIONS = {
  clientId: Constants.EMPTY_STRING,
  authority: Constants.DEFAULT_AUTHORITY,
  clientSecret: Constants.EMPTY_STRING,
  clientAssertion: Constants.EMPTY_STRING,
  clientCertificate: {
    thumbprint: Constants.EMPTY_STRING,
    thumbprintSha256: Constants.EMPTY_STRING,
    privateKey: Constants.EMPTY_STRING,
    x5c: Constants.EMPTY_STRING
  },
  knownAuthorities: [],
  cloudDiscoveryMetadata: Constants.EMPTY_STRING,
  authorityMetadata: Constants.EMPTY_STRING,
  clientCapabilities: [],
  protocolMode: ProtocolMode.AAD,
  azureCloudOptions: {
    azureCloudInstance: AzureCloudInstance.None,
    tenant: Constants.EMPTY_STRING
  },
  skipAuthorityMetadataCache: false
};
var DEFAULT_CACHE_OPTIONS2 = {
  claimsBasedCachingEnabled: false
};
var DEFAULT_LOGGER_OPTIONS = {
  loggerCallback: () => {
  },
  piiLoggingEnabled: false,
  logLevel: LogLevel.Info
};
var DEFAULT_SYSTEM_OPTIONS2 = {
  loggerOptions: DEFAULT_LOGGER_OPTIONS,
  networkClient: new HttpClient(),
  proxyUrl: Constants.EMPTY_STRING,
  customAgentOptions: {},
  disableInternalRetries: false
};
var DEFAULT_TELEMETRY_OPTIONS2 = {
  application: {
    appName: Constants.EMPTY_STRING,
    appVersion: Constants.EMPTY_STRING
  }
};
function buildAppConfiguration({ auth, broker, cache, system, telemetry }) {
  const systemOptions = {
    ...DEFAULT_SYSTEM_OPTIONS2,
    networkClient: new HttpClient(system == null ? void 0 : system.proxyUrl, system == null ? void 0 : system.customAgentOptions),
    loggerOptions: (system == null ? void 0 : system.loggerOptions) || DEFAULT_LOGGER_OPTIONS,
    disableInternalRetries: (system == null ? void 0 : system.disableInternalRetries) || false
  };
  if (!!auth.clientCertificate && !!!auth.clientCertificate.thumbprint && !!!auth.clientCertificate.thumbprintSha256) {
    throw NodeAuthError.createStateNotFoundError();
  }
  return {
    auth: { ...DEFAULT_AUTH_OPTIONS, ...auth },
    broker: { ...broker },
    cache: { ...DEFAULT_CACHE_OPTIONS2, ...cache },
    system: { ...systemOptions, ...system },
    telemetry: { ...DEFAULT_TELEMETRY_OPTIONS2, ...telemetry }
  };
}

// node_modules/uuid/dist/esm-browser/rng.js
var getRandomValues;
var rnds8 = new Uint8Array(16);
function rng() {
  if (!getRandomValues) {
    getRandomValues = typeof crypto !== "undefined" && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== "undefined" && typeof msCrypto.getRandomValues === "function" && msCrypto.getRandomValues.bind(msCrypto);
    if (!getRandomValues) {
      throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");
    }
  }
  return getRandomValues(rnds8);
}

// node_modules/uuid/dist/esm-browser/regex.js
var regex_default = /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;

// node_modules/uuid/dist/esm-browser/validate.js
function validate(uuid) {
  return typeof uuid === "string" && regex_default.test(uuid);
}
var validate_default = validate;

// node_modules/uuid/dist/esm-browser/stringify.js
var byteToHex = [];
for (i = 0; i < 256; ++i) {
  byteToHex.push((i + 256).toString(16).substr(1));
}
var i;
function stringify(arr) {
  var offset = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + "-" + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + "-" + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + "-" + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + "-" + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();
  if (!validate_default(uuid)) {
    throw TypeError("Stringified UUID is invalid");
  }
  return uuid;
}
var stringify_default = stringify;

// node_modules/uuid/dist/esm-browser/v4.js
function v4(options, buf, offset) {
  options = options || {};
  var rnds = options.random || (options.rng || rng)();
  rnds[6] = rnds[6] & 15 | 64;
  rnds[8] = rnds[8] & 63 | 128;
  if (buf) {
    offset = offset || 0;
    for (var i = 0; i < 16; ++i) {
      buf[offset + i] = rnds[i];
    }
    return buf;
  }
  return stringify_default(rnds);
}
var v4_default = v4;

// node_modules/@azure/msal-node/dist/crypto/GuidGenerator.mjs
var GuidGenerator = class {
  /**
   *
   * RFC4122: The version 4 UUID is meant for generating UUIDs from truly-random or pseudo-random numbers.
   * uuidv4 generates guids from cryprtographically-string random
   */
  generateGuid() {
    return v4_default();
  }
  /**
   * verifies if a string is  GUID
   * @param guid
   */
  isGuid(guid) {
    const regexGuid = /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;
    return regexGuid.test(guid);
  }
};

// node_modules/@azure/msal-node/dist/utils/EncodingUtils.mjs
var EncodingUtils = class _EncodingUtils {
  /**
   * 'utf8': Multibyte encoded Unicode characters. Many web pages and other document formats use UTF-8.
   * 'base64': Base64 encoding.
   *
   * @param str text
   */
  static base64Encode(str, encoding) {
    return Buffer.from(str, encoding).toString("base64");
  }
  /**
   * encode a URL
   * @param str
   */
  static base64EncodeUrl(str, encoding) {
    return _EncodingUtils.base64Encode(str, encoding).replace(/=/g, Constants.EMPTY_STRING).replace(/\+/g, "-").replace(/\//g, "_");
  }
  /**
   * 'utf8': Multibyte encoded Unicode characters. Many web pages and other document formats use UTF-8.
   * 'base64': Base64 encoding.
   *
   * @param base64Str Base64 encoded text
   */
  static base64Decode(base64Str) {
    return Buffer.from(base64Str, "base64").toString("utf8");
  }
  /**
   * @param base64Str Base64 encoded Url
   */
  static base64DecodeUrl(base64Str) {
    let str = base64Str.replace(/-/g, "+").replace(/_/g, "/");
    while (str.length % 4) {
      str += "=";
    }
    return _EncodingUtils.base64Decode(str);
  }
};

// node_modules/@azure/msal-node/dist/crypto/HashUtils.mjs
var import_crypto = __toESM(require("crypto"), 1);
var HashUtils = class {
  /**
   * generate 'SHA256' hash
   * @param buffer
   */
  sha256(buffer) {
    return import_crypto.default.createHash(Hash.SHA256).update(buffer).digest();
  }
};

// node_modules/@azure/msal-node/dist/crypto/PkceGenerator.mjs
var import_crypto2 = __toESM(require("crypto"), 1);
var PkceGenerator = class {
  constructor() {
    this.hashUtils = new HashUtils();
  }
  /**
   * generates the codeVerfier and the challenge from the codeVerfier
   * reference: https://tools.ietf.org/html/rfc7636#section-4.1 and https://tools.ietf.org/html/rfc7636#section-4.2
   */
  async generatePkceCodes() {
    const verifier = this.generateCodeVerifier();
    const challenge = this.generateCodeChallengeFromVerifier(verifier);
    return { verifier, challenge };
  }
  /**
   * generates the codeVerfier; reference: https://tools.ietf.org/html/rfc7636#section-4.1
   */
  generateCodeVerifier() {
    const charArr = [];
    const maxNumber = 256 - 256 % CharSet.CV_CHARSET.length;
    while (charArr.length <= RANDOM_OCTET_SIZE) {
      const byte = import_crypto2.default.randomBytes(1)[0];
      if (byte >= maxNumber) {
        continue;
      }
      const index = byte % CharSet.CV_CHARSET.length;
      charArr.push(CharSet.CV_CHARSET[index]);
    }
    const verifier = charArr.join(Constants.EMPTY_STRING);
    return EncodingUtils.base64EncodeUrl(verifier);
  }
  /**
   * generate the challenge from the codeVerfier; reference: https://tools.ietf.org/html/rfc7636#section-4.2
   * @param codeVerifier
   */
  generateCodeChallengeFromVerifier(codeVerifier) {
    return EncodingUtils.base64EncodeUrl(this.hashUtils.sha256(codeVerifier).toString("base64"), "base64");
  }
};

// node_modules/@azure/msal-node/dist/crypto/CryptoProvider.mjs
var CryptoProvider = class {
  constructor() {
    this.pkceGenerator = new PkceGenerator();
    this.guidGenerator = new GuidGenerator();
    this.hashUtils = new HashUtils();
  }
  /**
   * base64 URL safe encoded string
   */
  base64UrlEncode() {
    throw new Error("Method not implemented.");
  }
  /**
   * Stringifies and base64Url encodes input public key
   * @param inputKid - public key id
   * @returns Base64Url encoded public key
   */
  encodeKid() {
    throw new Error("Method not implemented.");
  }
  /**
   * Creates a new random GUID - used to populate state and nonce.
   * @returns string (GUID)
   */
  createNewGuid() {
    return this.guidGenerator.generateGuid();
  }
  /**
   * Encodes input string to base64.
   * @param input - string to be encoded
   */
  base64Encode(input) {
    return EncodingUtils.base64Encode(input);
  }
  /**
   * Decodes input string from base64.
   * @param input - string to be decoded
   */
  base64Decode(input) {
    return EncodingUtils.base64Decode(input);
  }
  /**
   * Generates PKCE codes used in Authorization Code Flow.
   */
  generatePkceCodes() {
    return this.pkceGenerator.generatePkceCodes();
  }
  /**
   * Generates a keypair, stores it and returns a thumbprint - not yet implemented for node
   */
  getPublicKeyThumbprint() {
    throw new Error("Method not implemented.");
  }
  /**
   * Removes cryptographic keypair from key store matching the keyId passed in
   * @param kid - public key id
   */
  removeTokenBindingKey() {
    throw new Error("Method not implemented.");
  }
  /**
   * Removes all cryptographic keys from Keystore
   */
  clearKeystore() {
    throw new Error("Method not implemented.");
  }
  /**
   * Signs the given object as a jwt payload with private key retrieved by given kid - currently not implemented for node
   */
  signJwt() {
    throw new Error("Method not implemented.");
  }
  /**
   * Returns the SHA-256 hash of an input string
   */
  async hashString(plainText) {
    return EncodingUtils.base64EncodeUrl(this.hashUtils.sha256(plainText).toString("base64"), "base64");
  }
};

// node_modules/@azure/msal-node/dist/cache/NodeStorage.mjs
var NodeStorage = class extends CacheManager {
  constructor(logger, clientId, cryptoImpl, staticAuthorityOptions) {
    super(clientId, cryptoImpl, logger, staticAuthorityOptions);
    this.cache = {};
    this.changeEmitters = [];
    this.logger = logger;
  }
  /**
   * Queue up callbacks
   * @param func - a callback function for cache change indication
   */
  registerChangeEmitter(func) {
    this.changeEmitters.push(func);
  }
  /**
   * Invoke the callback when cache changes
   */
  emitChange() {
    this.changeEmitters.forEach((func) => func.call(null));
  }
  /**
   * Converts cacheKVStore to InMemoryCache
   * @param cache - key value store
   */
  cacheToInMemoryCache(cache) {
    const inMemoryCache = {
      accounts: {},
      idTokens: {},
      accessTokens: {},
      refreshTokens: {},
      appMetadata: {}
    };
    for (const key in cache) {
      const value = cache[key];
      if (typeof value !== "object") {
        continue;
      }
      if (value instanceof AccountEntity) {
        inMemoryCache.accounts[key] = value;
      } else if (CacheHelpers_exports.isIdTokenEntity(value)) {
        inMemoryCache.idTokens[key] = value;
      } else if (CacheHelpers_exports.isAccessTokenEntity(value)) {
        inMemoryCache.accessTokens[key] = value;
      } else if (CacheHelpers_exports.isRefreshTokenEntity(value)) {
        inMemoryCache.refreshTokens[key] = value;
      } else if (CacheHelpers_exports.isAppMetadataEntity(key, value)) {
        inMemoryCache.appMetadata[key] = value;
      } else {
        continue;
      }
    }
    return inMemoryCache;
  }
  /**
   * converts inMemoryCache to CacheKVStore
   * @param inMemoryCache - kvstore map for inmemory
   */
  inMemoryCacheToCache(inMemoryCache) {
    let cache = this.getCache();
    cache = {
      ...cache,
      ...inMemoryCache.accounts,
      ...inMemoryCache.idTokens,
      ...inMemoryCache.accessTokens,
      ...inMemoryCache.refreshTokens,
      ...inMemoryCache.appMetadata
    };
    return cache;
  }
  /**
   * gets the current in memory cache for the client
   */
  getInMemoryCache() {
    this.logger.trace("Getting in-memory cache");
    const inMemoryCache = this.cacheToInMemoryCache(this.getCache());
    return inMemoryCache;
  }
  /**
   * sets the current in memory cache for the client
   * @param inMemoryCache - key value map in memory
   */
  setInMemoryCache(inMemoryCache) {
    this.logger.trace("Setting in-memory cache");
    const cache = this.inMemoryCacheToCache(inMemoryCache);
    this.setCache(cache);
    this.emitChange();
  }
  /**
   * get the current cache key-value store
   */
  getCache() {
    this.logger.trace("Getting cache key-value store");
    return this.cache;
  }
  /**
   * sets the current cache (key value store)
   * @param cacheMap - key value map
   */
  setCache(cache) {
    this.logger.trace("Setting cache key value store");
    this.cache = cache;
    this.emitChange();
  }
  /**
   * Gets cache item with given key.
   * @param key - lookup key for the cache entry
   */
  getItem(key) {
    this.logger.tracePii(`Item key: ${key}`);
    const cache = this.getCache();
    return cache[key];
  }
  /**
   * Gets cache item with given key-value
   * @param key - lookup key for the cache entry
   * @param value - value of the cache entry
   */
  setItem(key, value) {
    this.logger.tracePii(`Item key: ${key}`);
    const cache = this.getCache();
    cache[key] = value;
    this.setCache(cache);
  }
  getAccountKeys() {
    const inMemoryCache = this.getInMemoryCache();
    const accountKeys = Object.keys(inMemoryCache.accounts);
    return accountKeys;
  }
  getTokenKeys() {
    const inMemoryCache = this.getInMemoryCache();
    const tokenKeys = {
      idToken: Object.keys(inMemoryCache.idTokens),
      accessToken: Object.keys(inMemoryCache.accessTokens),
      refreshToken: Object.keys(inMemoryCache.refreshTokens)
    };
    return tokenKeys;
  }
  /**
   * Reads account from cache, builds it into an account entity and returns it.
   * @param accountKey - lookup key to fetch cache type AccountEntity
   * @returns
   */
  getAccount(accountKey) {
    const cachedAccount = this.getItem(accountKey);
    return cachedAccount ? Object.assign(new AccountEntity(), this.getItem(accountKey)) : null;
  }
  /**
   * set account entity
   * @param account - cache value to be set of type AccountEntity
   */
  async setAccount(account) {
    const accountKey = account.generateAccountKey();
    this.setItem(accountKey, account);
  }
  /**
   * fetch the idToken credential
   * @param idTokenKey - lookup key to fetch cache type IdTokenEntity
   */
  getIdTokenCredential(idTokenKey) {
    const idToken = this.getItem(idTokenKey);
    if (CacheHelpers_exports.isIdTokenEntity(idToken)) {
      return idToken;
    }
    return null;
  }
  /**
   * set idToken credential
   * @param idToken - cache value to be set of type IdTokenEntity
   */
  async setIdTokenCredential(idToken) {
    const idTokenKey = CacheHelpers_exports.generateCredentialKey(idToken);
    this.setItem(idTokenKey, idToken);
  }
  /**
   * fetch the accessToken credential
   * @param accessTokenKey - lookup key to fetch cache type AccessTokenEntity
   */
  getAccessTokenCredential(accessTokenKey) {
    const accessToken = this.getItem(accessTokenKey);
    if (CacheHelpers_exports.isAccessTokenEntity(accessToken)) {
      return accessToken;
    }
    return null;
  }
  /**
   * set accessToken credential
   * @param accessToken -  cache value to be set of type AccessTokenEntity
   */
  async setAccessTokenCredential(accessToken) {
    const accessTokenKey = CacheHelpers_exports.generateCredentialKey(accessToken);
    this.setItem(accessTokenKey, accessToken);
  }
  /**
   * fetch the refreshToken credential
   * @param refreshTokenKey - lookup key to fetch cache type RefreshTokenEntity
   */
  getRefreshTokenCredential(refreshTokenKey) {
    const refreshToken = this.getItem(refreshTokenKey);
    if (CacheHelpers_exports.isRefreshTokenEntity(refreshToken)) {
      return refreshToken;
    }
    return null;
  }
  /**
   * set refreshToken credential
   * @param refreshToken - cache value to be set of type RefreshTokenEntity
   */
  async setRefreshTokenCredential(refreshToken) {
    const refreshTokenKey = CacheHelpers_exports.generateCredentialKey(refreshToken);
    this.setItem(refreshTokenKey, refreshToken);
  }
  /**
   * fetch appMetadata entity from the platform cache
   * @param appMetadataKey - lookup key to fetch cache type AppMetadataEntity
   */
  getAppMetadata(appMetadataKey) {
    const appMetadata = this.getItem(appMetadataKey);
    if (CacheHelpers_exports.isAppMetadataEntity(appMetadataKey, appMetadata)) {
      return appMetadata;
    }
    return null;
  }
  /**
   * set appMetadata entity to the platform cache
   * @param appMetadata - cache value to be set of type AppMetadataEntity
   */
  setAppMetadata(appMetadata) {
    const appMetadataKey = CacheHelpers_exports.generateAppMetadataKey(appMetadata);
    this.setItem(appMetadataKey, appMetadata);
  }
  /**
   * fetch server telemetry entity from the platform cache
   * @param serverTelemetrykey - lookup key to fetch cache type ServerTelemetryEntity
   */
  getServerTelemetry(serverTelemetrykey) {
    const serverTelemetryEntity = this.getItem(serverTelemetrykey);
    if (serverTelemetryEntity && CacheHelpers_exports.isServerTelemetryEntity(serverTelemetrykey, serverTelemetryEntity)) {
      return serverTelemetryEntity;
    }
    return null;
  }
  /**
   * set server telemetry entity to the platform cache
   * @param serverTelemetryKey - lookup key to fetch cache type ServerTelemetryEntity
   * @param serverTelemetry - cache value to be set of type ServerTelemetryEntity
   */
  setServerTelemetry(serverTelemetryKey, serverTelemetry) {
    this.setItem(serverTelemetryKey, serverTelemetry);
  }
  /**
   * fetch authority metadata entity from the platform cache
   * @param key - lookup key to fetch cache type AuthorityMetadataEntity
   */
  getAuthorityMetadata(key) {
    const authorityMetadataEntity = this.getItem(key);
    if (authorityMetadataEntity && CacheHelpers_exports.isAuthorityMetadataEntity(key, authorityMetadataEntity)) {
      return authorityMetadataEntity;
    }
    return null;
  }
  /**
   * Get all authority metadata keys
   */
  getAuthorityMetadataKeys() {
    return this.getKeys().filter((key) => {
      return this.isAuthorityMetadata(key);
    });
  }
  /**
   * set authority metadata entity to the platform cache
   * @param key - lookup key to fetch cache type AuthorityMetadataEntity
   * @param metadata - cache value to be set of type AuthorityMetadataEntity
   */
  setAuthorityMetadata(key, metadata) {
    this.setItem(key, metadata);
  }
  /**
   * fetch throttling entity from the platform cache
   * @param throttlingCacheKey - lookup key to fetch cache type ThrottlingEntity
   */
  getThrottlingCache(throttlingCacheKey) {
    const throttlingCache = this.getItem(throttlingCacheKey);
    if (throttlingCache && CacheHelpers_exports.isThrottlingEntity(throttlingCacheKey, throttlingCache)) {
      return throttlingCache;
    }
    return null;
  }
  /**
   * set throttling entity to the platform cache
   * @param throttlingCacheKey - lookup key to fetch cache type ThrottlingEntity
   * @param throttlingCache - cache value to be set of type ThrottlingEntity
   */
  setThrottlingCache(throttlingCacheKey, throttlingCache) {
    this.setItem(throttlingCacheKey, throttlingCache);
  }
  /**
   * Removes the cache item from memory with the given key.
   * @param key - lookup key to remove a cache entity
   * @param inMemory - key value map of the cache
   */
  removeItem(key) {
    this.logger.tracePii(`Item key: ${key}`);
    let result = false;
    const cache = this.getCache();
    if (!!cache[key]) {
      delete cache[key];
      result = true;
    }
    if (result) {
      this.setCache(cache);
      this.emitChange();
    }
    return result;
  }
  /**
   * Remove account entity from the platform cache if it's outdated
   * @param accountKey - lookup key to fetch cache type AccountEntity
   */
  removeOutdatedAccount(accountKey) {
    this.removeItem(accountKey);
  }
  /**
   * Checks whether key is in cache.
   * @param key - look up key for a cache entity
   */
  containsKey(key) {
    return this.getKeys().includes(key);
  }
  /**
   * Gets all keys in window.
   */
  getKeys() {
    this.logger.trace("Retrieving all cache keys");
    const cache = this.getCache();
    return [...Object.keys(cache)];
  }
  /**
   * Clears all cache entries created by MSAL (except tokens).
   */
  clear() {
    this.logger.trace("Clearing cache entries created by MSAL");
    const cacheKeys = this.getKeys();
    cacheKeys.forEach((key) => {
      this.removeItem(key);
    });
    this.emitChange();
  }
  /**
   * Initialize in memory cache from an exisiting cache vault
   * @param cache - blob formatted cache (JSON)
   */
  static generateInMemoryCache(cache) {
    return Deserializer.deserializeAllCache(Deserializer.deserializeJSONBlob(cache));
  }
  /**
   * retrieves the final JSON
   * @param inMemoryCache - itemised cache read from the JSON
   */
  static generateJsonCache(inMemoryCache) {
    return Serializer.serializeAllCache(inMemoryCache);
  }
  /**
   * Updates a credential's cache key if the current cache key is outdated
   */
  updateCredentialCacheKey(currentCacheKey, credential) {
    const updatedCacheKey = CacheHelpers_exports.generateCredentialKey(credential);
    if (currentCacheKey !== updatedCacheKey) {
      const cacheItem = this.getItem(currentCacheKey);
      if (cacheItem) {
        this.removeItem(currentCacheKey);
        this.setItem(updatedCacheKey, cacheItem);
        this.logger.verbose(`Updated an outdated ${credential.credentialType} cache key`);
        return updatedCacheKey;
      } else {
        this.logger.error(`Attempted to update an outdated ${credential.credentialType} cache key but no item matching the outdated key was found in storage`);
      }
    }
    return currentCacheKey;
  }
};

// node_modules/@azure/msal-node/dist/cache/TokenCache.mjs
var defaultSerializedCache = {
  Account: {},
  IdToken: {},
  AccessToken: {},
  RefreshToken: {},
  AppMetadata: {}
};
var TokenCache = class {
  constructor(storage, logger, cachePlugin) {
    this.cacheHasChanged = false;
    this.storage = storage;
    this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this));
    if (cachePlugin) {
      this.persistence = cachePlugin;
    }
    this.logger = logger;
  }
  /**
   * Set to true if cache state has changed since last time serialize or writeToPersistence was called
   */
  hasChanged() {
    return this.cacheHasChanged;
  }
  /**
   * Serializes in memory cache to JSON
   */
  serialize() {
    this.logger.trace("Serializing in-memory cache");
    let finalState = Serializer.serializeAllCache(this.storage.getInMemoryCache());
    if (this.cacheSnapshot) {
      this.logger.trace("Reading cache snapshot from disk");
      finalState = this.mergeState(JSON.parse(this.cacheSnapshot), finalState);
    } else {
      this.logger.trace("No cache snapshot to merge");
    }
    this.cacheHasChanged = false;
    return JSON.stringify(finalState);
  }
  /**
   * Deserializes JSON to in-memory cache. JSON should be in MSAL cache schema format
   * @param cache - blob formatted cache
   */
  deserialize(cache) {
    this.logger.trace("Deserializing JSON to in-memory cache");
    this.cacheSnapshot = cache;
    if (this.cacheSnapshot) {
      this.logger.trace("Reading cache snapshot from disk");
      const deserializedCache = Deserializer.deserializeAllCache(this.overlayDefaults(JSON.parse(this.cacheSnapshot)));
      this.storage.setInMemoryCache(deserializedCache);
    } else {
      this.logger.trace("No cache snapshot to deserialize");
    }
  }
  /**
   * Fetches the cache key-value map
   */
  getKVStore() {
    return this.storage.getCache();
  }
  /**
   * Gets cache snapshot in CacheKVStore format
   */
  getCacheSnapshot() {
    const deserializedPersistentStorage = NodeStorage.generateInMemoryCache(this.cacheSnapshot);
    return this.storage.inMemoryCacheToCache(deserializedPersistentStorage);
  }
  /**
   * API that retrieves all accounts currently in cache to the user
   */
  async getAllAccounts() {
    this.logger.trace("getAllAccounts called");
    let cacheContext;
    try {
      if (this.persistence) {
        cacheContext = new TokenCacheContext(this, false);
        await this.persistence.beforeCacheAccess(cacheContext);
      }
      return this.storage.getAllAccounts();
    } finally {
      if (this.persistence && cacheContext) {
        await this.persistence.afterCacheAccess(cacheContext);
      }
    }
  }
  /**
   * Returns the signed in account matching homeAccountId.
   * (the account object is created at the time of successful login)
   * or null when no matching account is found
   * @param homeAccountId - unique identifier for an account (uid.utid)
   */
  async getAccountByHomeId(homeAccountId) {
    const allAccounts = await this.getAllAccounts();
    if (homeAccountId && allAccounts && allAccounts.length) {
      return allAccounts.filter((accountObj) => accountObj.homeAccountId === homeAccountId)[0] || null;
    } else {
      return null;
    }
  }
  /**
   * Returns the signed in account matching localAccountId.
   * (the account object is created at the time of successful login)
   * or null when no matching account is found
   * @param localAccountId - unique identifier of an account (sub/obj when homeAccountId cannot be populated)
   */
  async getAccountByLocalId(localAccountId) {
    const allAccounts = await this.getAllAccounts();
    if (localAccountId && allAccounts && allAccounts.length) {
      return allAccounts.filter((accountObj) => accountObj.localAccountId === localAccountId)[0] || null;
    } else {
      return null;
    }
  }
  /**
   * API to remove a specific account and the relevant data from cache
   * @param account - AccountInfo passed by the user
   */
  async removeAccount(account) {
    this.logger.trace("removeAccount called");
    let cacheContext;
    try {
      if (this.persistence) {
        cacheContext = new TokenCacheContext(this, true);
        await this.persistence.beforeCacheAccess(cacheContext);
      }
      await this.storage.removeAccount(AccountEntity.generateAccountCacheKey(account));
    } finally {
      if (this.persistence && cacheContext) {
        await this.persistence.afterCacheAccess(cacheContext);
      }
    }
  }
  /**
   * Overwrites in-memory cache with persistent cache
   */
  async overwriteCache() {
    if (!this.persistence) {
      this.logger.info("No persistence layer specified, cache cannot be overwritten");
      return;
    }
    this.logger.info("Overwriting in-memory cache with persistent cache");
    this.storage.clear();
    const cacheContext = new TokenCacheContext(this, false);
    await this.persistence.beforeCacheAccess(cacheContext);
    const cacheSnapshot = this.getCacheSnapshot();
    this.storage.setCache(cacheSnapshot);
    await this.persistence.afterCacheAccess(cacheContext);
  }
  /**
   * Called when the cache has changed state.
   */
  handleChangeEvent() {
    this.cacheHasChanged = true;
  }
  /**
   * Merge in memory cache with the cache snapshot.
   * @param oldState - cache before changes
   * @param currentState - current cache state in the library
   */
  mergeState(oldState, currentState) {
    this.logger.trace("Merging in-memory cache with cache snapshot");
    const stateAfterRemoval = this.mergeRemovals(oldState, currentState);
    return this.mergeUpdates(stateAfterRemoval, currentState);
  }
  /**
   * Deep update of oldState based on newState values
   * @param oldState - cache before changes
   * @param newState - updated cache
   */
  mergeUpdates(oldState, newState) {
    Object.keys(newState).forEach((newKey) => {
      const newValue = newState[newKey];
      if (!oldState.hasOwnProperty(newKey)) {
        if (newValue !== null) {
          oldState[newKey] = newValue;
        }
      } else {
        const newValueNotNull = newValue !== null;
        const newValueIsObject = typeof newValue === "object";
        const newValueIsNotArray = !Array.isArray(newValue);
        const oldStateNotUndefinedOrNull = typeof oldState[newKey] !== "undefined" && oldState[newKey] !== null;
        if (newValueNotNull && newValueIsObject && newValueIsNotArray && oldStateNotUndefinedOrNull) {
          this.mergeUpdates(oldState[newKey], newValue);
        } else {
          oldState[newKey] = newValue;
        }
      }
    });
    return oldState;
  }
  /**
   * Removes entities in oldState that the were removed from newState. If there are any unknown values in root of
   * oldState that are not recognized, they are left untouched.
   * @param oldState - cache before changes
   * @param newState - updated cache
   */
  mergeRemovals(oldState, newState) {
    this.logger.trace("Remove updated entries in cache");
    const accounts = oldState.Account ? this.mergeRemovalsDict(oldState.Account, newState.Account) : oldState.Account;
    const accessTokens = oldState.AccessToken ? this.mergeRemovalsDict(oldState.AccessToken, newState.AccessToken) : oldState.AccessToken;
    const refreshTokens = oldState.RefreshToken ? this.mergeRemovalsDict(oldState.RefreshToken, newState.RefreshToken) : oldState.RefreshToken;
    const idTokens = oldState.IdToken ? this.mergeRemovalsDict(oldState.IdToken, newState.IdToken) : oldState.IdToken;
    const appMetadata = oldState.AppMetadata ? this.mergeRemovalsDict(oldState.AppMetadata, newState.AppMetadata) : oldState.AppMetadata;
    return {
      ...oldState,
      Account: accounts,
      AccessToken: accessTokens,
      RefreshToken: refreshTokens,
      IdToken: idTokens,
      AppMetadata: appMetadata
    };
  }
  /**
   * Helper to merge new cache with the old one
   * @param oldState - cache before changes
   * @param newState - updated cache
   */
  mergeRemovalsDict(oldState, newState) {
    const finalState = { ...oldState };
    Object.keys(oldState).forEach((oldKey) => {
      if (!newState || !newState.hasOwnProperty(oldKey)) {
        delete finalState[oldKey];
      }
    });
    return finalState;
  }
  /**
   * Helper to overlay as a part of cache merge
   * @param passedInCache - cache read from the blob
   */
  overlayDefaults(passedInCache) {
    this.logger.trace("Overlaying input cache with the default cache");
    return {
      Account: {
        ...defaultSerializedCache.Account,
        ...passedInCache.Account
      },
      IdToken: {
        ...defaultSerializedCache.IdToken,
        ...passedInCache.IdToken
      },
      AccessToken: {
        ...defaultSerializedCache.AccessToken,
        ...passedInCache.AccessToken
      },
      RefreshToken: {
        ...defaultSerializedCache.RefreshToken,
        ...passedInCache.RefreshToken
      },
      AppMetadata: {
        ...defaultSerializedCache.AppMetadata,
        ...passedInCache.AppMetadata
      }
    };
  }
};

// node_modules/@azure/msal-node/dist/client/ClientAssertion.mjs
var import_jsonwebtoken = __toESM(require_jsonwebtoken(), 1);
var ClientAssertion = class _ClientAssertion {
  /**
   * Initialize the ClientAssertion class from the clientAssertion passed by the user
   * @param assertion - refer https://tools.ietf.org/html/rfc7521
   */
  static fromAssertion(assertion) {
    const clientAssertion = new _ClientAssertion();
    clientAssertion.jwt = assertion;
    return clientAssertion;
  }
  /**
   * @deprecated Use fromCertificateWithSha256Thumbprint instead, with a SHA-256 thumprint
   * Initialize the ClientAssertion class from the certificate passed by the user
   * @param thumbprint - identifier of a certificate
   * @param privateKey - secret key
   * @param publicCertificate - electronic document provided to prove the ownership of the public key
   */
  static fromCertificate(thumbprint, privateKey, publicCertificate) {
    const clientAssertion = new _ClientAssertion();
    clientAssertion.privateKey = privateKey;
    clientAssertion.thumbprint = thumbprint;
    clientAssertion.useSha256 = false;
    if (publicCertificate) {
      clientAssertion.publicCertificate = this.parseCertificate(publicCertificate);
    }
    return clientAssertion;
  }
  /**
   * Initialize the ClientAssertion class from the certificate passed by the user
   * @param thumbprint - identifier of a certificate
   * @param privateKey - secret key
   * @param publicCertificate - electronic document provided to prove the ownership of the public key
   */
  static fromCertificateWithSha256Thumbprint(thumbprint, privateKey, publicCertificate) {
    const clientAssertion = new _ClientAssertion();
    clientAssertion.privateKey = privateKey;
    clientAssertion.thumbprint = thumbprint;
    clientAssertion.useSha256 = true;
    if (publicCertificate) {
      clientAssertion.publicCertificate = this.parseCertificate(publicCertificate);
    }
    return clientAssertion;
  }
  /**
   * Update JWT for certificate based clientAssertion, if passed by the user, uses it as is
   * @param cryptoProvider - library's crypto helper
   * @param issuer - iss claim
   * @param jwtAudience - aud claim
   */
  getJwt(cryptoProvider, issuer, jwtAudience) {
    if (this.privateKey && this.thumbprint) {
      if (this.jwt && !this.isExpired() && issuer === this.issuer && jwtAudience === this.jwtAudience) {
        return this.jwt;
      }
      return this.createJwt(cryptoProvider, issuer, jwtAudience);
    }
    if (this.jwt) {
      return this.jwt;
    }
    throw createClientAuthError(ClientAuthErrorCodes_exports.invalidAssertion);
  }
  /**
   * JWT format and required claims specified: https://tools.ietf.org/html/rfc7523#section-3
   */
  createJwt(cryptoProvider, issuer, jwtAudience) {
    this.issuer = issuer;
    this.jwtAudience = jwtAudience;
    const issuedAt = TimeUtils_exports.nowSeconds();
    this.expirationTime = issuedAt + 600;
    const algorithm = this.useSha256 ? JwtConstants.PSS_256 : JwtConstants.RSA_256;
    const header = {
      alg: algorithm
    };
    const thumbprintHeader = this.useSha256 ? JwtConstants.X5T_256 : JwtConstants.X5T;
    Object.assign(header, {
      [thumbprintHeader]: EncodingUtils.base64EncodeUrl(this.thumbprint, "hex")
    });
    if (this.publicCertificate) {
      Object.assign(header, {
        [JwtConstants.X5C]: this.publicCertificate
      });
    }
    const payload = {
      [JwtConstants.AUDIENCE]: this.jwtAudience,
      [JwtConstants.EXPIRATION_TIME]: this.expirationTime,
      [JwtConstants.ISSUER]: this.issuer,
      [JwtConstants.SUBJECT]: this.issuer,
      [JwtConstants.NOT_BEFORE]: issuedAt,
      [JwtConstants.JWT_ID]: cryptoProvider.createNewGuid()
    };
    this.jwt = import_jsonwebtoken.default.sign(payload, this.privateKey, { header });
    return this.jwt;
  }
  /**
   * Utility API to check expiration
   */
  isExpired() {
    return this.expirationTime < TimeUtils_exports.nowSeconds();
  }
  /**
   * Extracts the raw certs from a given certificate string and returns them in an array.
   * @param publicCertificate - electronic document provided to prove the ownership of the public key
   */
  static parseCertificate(publicCertificate) {
    const regexToFindCerts = /-----BEGIN CERTIFICATE-----\r*\n(.+?)\r*\n-----END CERTIFICATE-----/gs;
    const certs = [];
    let matches;
    while ((matches = regexToFindCerts.exec(publicCertificate)) !== null) {
      certs.push(matches[1].replace(/\r*\n/g, Constants.EMPTY_STRING));
    }
    return certs;
  }
};

// node_modules/@azure/msal-node/dist/packageMetadata.mjs
var name2 = "@azure/msal-node";
var version2 = "3.4.1";

// node_modules/@azure/msal-node/dist/client/UsernamePasswordClient.mjs
var UsernamePasswordClient = class extends BaseClient {
  constructor(configuration) {
    super(configuration);
  }
  /**
   * API to acquire a token by passing the username and password to the service in exchage of credentials
   * password_grant
   * @param request - CommonUsernamePasswordRequest
   */
  async acquireToken(request) {
    this.logger.info("in acquireToken call in username-password client");
    const reqTimestamp = TimeUtils_exports.nowSeconds();
    const response = await this.executeTokenRequest(this.authority, request);
    const responseHandler = new ResponseHandler(this.config.authOptions.clientId, this.cacheManager, this.cryptoUtils, this.logger, this.config.serializableCache, this.config.persistencePlugin);
    responseHandler.validateTokenResponse(response.body);
    const tokenResponse = responseHandler.handleServerTokenResponse(response.body, this.authority, reqTimestamp, request);
    return tokenResponse;
  }
  /**
   * Executes POST request to token endpoint
   * @param authority - authority object
   * @param request - CommonUsernamePasswordRequest provided by the developer
   */
  async executeTokenRequest(authority, request) {
    const queryParametersString = this.createTokenQueryParameters(request);
    const endpoint = UrlString.appendQueryString(authority.tokenEndpoint, queryParametersString);
    const requestBody = await this.createTokenRequestBody(request);
    const headers = this.createTokenRequestHeaders({
      credential: request.username,
      type: CcsCredentialType.UPN
    });
    const thumbprint = {
      clientId: this.config.authOptions.clientId,
      authority: authority.canonicalAuthority,
      scopes: request.scopes,
      claims: request.claims,
      authenticationScheme: request.authenticationScheme,
      resourceRequestMethod: request.resourceRequestMethod,
      resourceRequestUri: request.resourceRequestUri,
      shrClaims: request.shrClaims,
      sshKid: request.sshKid
    };
    return this.executePostToTokenEndpoint(endpoint, requestBody, headers, thumbprint, request.correlationId);
  }
  /**
   * Generates a map for all the params to be sent to the service
   * @param request - CommonUsernamePasswordRequest provided by the developer
   */
  async createTokenRequestBody(request) {
    const parameters = /* @__PURE__ */ new Map();
    RequestParameterBuilder_exports.addClientId(parameters, this.config.authOptions.clientId);
    RequestParameterBuilder_exports.addUsername(parameters, request.username);
    RequestParameterBuilder_exports.addPassword(parameters, request.password);
    RequestParameterBuilder_exports.addScopes(parameters, request.scopes);
    RequestParameterBuilder_exports.addResponseType(parameters, OAuthResponseType.IDTOKEN_TOKEN);
    RequestParameterBuilder_exports.addGrantType(parameters, GrantType.RESOURCE_OWNER_PASSWORD_GRANT);
    RequestParameterBuilder_exports.addClientInfo(parameters);
    RequestParameterBuilder_exports.addLibraryInfo(parameters, this.config.libraryInfo);
    RequestParameterBuilder_exports.addApplicationTelemetry(parameters, this.config.telemetry.application);
    RequestParameterBuilder_exports.addThrottling(parameters);
    if (this.serverTelemetryManager) {
      RequestParameterBuilder_exports.addServerTelemetry(parameters, this.serverTelemetryManager);
    }
    const correlationId = request.correlationId || this.config.cryptoInterface.createNewGuid();
    RequestParameterBuilder_exports.addCorrelationId(parameters, correlationId);
    if (this.config.clientCredentials.clientSecret) {
      RequestParameterBuilder_exports.addClientSecret(parameters, this.config.clientCredentials.clientSecret);
    }
    const clientAssertion = this.config.clientCredentials.clientAssertion;
    if (clientAssertion) {
      RequestParameterBuilder_exports.addClientAssertion(parameters, await getClientAssertion(clientAssertion.assertion, this.config.authOptions.clientId, request.resourceRequestUri));
      RequestParameterBuilder_exports.addClientAssertionType(parameters, clientAssertion.assertionType);
    }
    if (!StringUtils.isEmptyObj(request.claims) || this.config.authOptions.clientCapabilities && this.config.authOptions.clientCapabilities.length > 0) {
      RequestParameterBuilder_exports.addClaims(parameters, request.claims, this.config.authOptions.clientCapabilities);
    }
    if (this.config.systemOptions.preventCorsPreflight && request.username) {
      RequestParameterBuilder_exports.addCcsUpn(parameters, request.username);
    }
    return UrlUtils_exports.mapToQueryString(parameters);
  }
};

// node_modules/@azure/msal-node/dist/protocol/Authorize.mjs
function getAuthCodeRequestUrl(config2, authority, request, logger) {
  const parameters = Authorize_exports.getStandardAuthorizeRequestParameters({
    ...config2.auth,
    authority,
    redirectUri: request.redirectUri || ""
  }, request, logger);
  RequestParameterBuilder_exports.addLibraryInfo(parameters, {
    sku: Constants2.MSAL_SKU,
    version: version2,
    cpu: process.arch || "",
    os: process.platform || ""
  });
  if (config2.auth.protocolMode !== ProtocolMode.OIDC) {
    RequestParameterBuilder_exports.addApplicationTelemetry(parameters, config2.telemetry.application);
  }
  RequestParameterBuilder_exports.addResponseType(parameters, OAuthResponseType.CODE);
  if (request.codeChallenge && request.codeChallengeMethod) {
    RequestParameterBuilder_exports.addCodeChallengeParams(parameters, request.codeChallenge, request.codeChallengeMethod);
  }
  RequestParameterBuilder_exports.addExtraQueryParameters(parameters, request.extraQueryParameters || {});
  return Authorize_exports.getAuthorizeUrl(authority, parameters);
}

// node_modules/@azure/msal-node/dist/client/ClientApplication.mjs
var ClientApplication = class {
  /**
   * Constructor for the ClientApplication
   */
  constructor(configuration) {
    this.config = buildAppConfiguration(configuration);
    this.cryptoProvider = new CryptoProvider();
    this.logger = new Logger(this.config.system.loggerOptions, name2, version2);
    this.storage = new NodeStorage(this.logger, this.config.auth.clientId, this.cryptoProvider, buildStaticAuthorityOptions(this.config.auth));
    this.tokenCache = new TokenCache(this.storage, this.logger, this.config.cache.cachePlugin);
  }
  /**
   * Creates the URL of the authorization request, letting the user input credentials and consent to the
   * application. The URL targets the /authorize endpoint of the authority configured in the
   * application object.
   *
   * Once the user inputs their credentials and consents, the authority will send a response to the redirect URI
   * sent in the request and should contain an authorization code, which can then be used to acquire tokens via
   * `acquireTokenByCode(AuthorizationCodeRequest)`.
   */
  async getAuthCodeUrl(request) {
    this.logger.info("getAuthCodeUrl called", request.correlationId);
    const validRequest = {
      ...request,
      ...await this.initializeBaseRequest(request),
      responseMode: request.responseMode || ResponseMode.QUERY,
      authenticationScheme: AuthenticationScheme.BEARER,
      state: request.state || "",
      nonce: request.nonce || ""
    };
    const discoveredAuthority = await this.createAuthority(validRequest.authority, validRequest.correlationId, void 0, request.azureCloudOptions);
    return getAuthCodeRequestUrl(this.config, discoveredAuthority, validRequest, this.logger);
  }
  /**
   * Acquires a token by exchanging the Authorization Code received from the first step of OAuth2.0
   * Authorization Code flow.
   *
   * `getAuthCodeUrl(AuthorizationCodeUrlRequest)` can be used to create the URL for the first step of OAuth2.0
   * Authorization Code flow. Ensure that values for redirectUri and scopes in AuthorizationCodeUrlRequest and
   * AuthorizationCodeRequest are the same.
   */
  async acquireTokenByCode(request, authCodePayLoad) {
    this.logger.info("acquireTokenByCode called");
    if (request.state && authCodePayLoad) {
      this.logger.info("acquireTokenByCode - validating state");
      this.validateState(request.state, authCodePayLoad.state || "");
      authCodePayLoad = { ...authCodePayLoad, state: "" };
    }
    const validRequest = {
      ...request,
      ...await this.initializeBaseRequest(request),
      authenticationScheme: AuthenticationScheme.BEARER
    };
    const serverTelemetryManager = this.initializeServerTelemetryManager(ApiId.acquireTokenByCode, validRequest.correlationId);
    try {
      const discoveredAuthority = await this.createAuthority(validRequest.authority, validRequest.correlationId, void 0, request.azureCloudOptions);
      const authClientConfig = await this.buildOauthClientConfiguration(discoveredAuthority, validRequest.correlationId, validRequest.redirectUri, serverTelemetryManager);
      const authorizationCodeClient = new AuthorizationCodeClient(authClientConfig);
      this.logger.verbose("Auth code client created", validRequest.correlationId);
      return await authorizationCodeClient.acquireToken(validRequest, authCodePayLoad);
    } catch (e) {
      if (e instanceof AuthError) {
        e.setCorrelationId(validRequest.correlationId);
      }
      serverTelemetryManager.cacheFailedRequest(e);
      throw e;
    }
  }
  /**
   * Acquires a token by exchanging the refresh token provided for a new set of tokens.
   *
   * This API is provided only for scenarios where you would like to migrate from ADAL to MSAL. Otherwise, it is
   * recommended that you use `acquireTokenSilent()` for silent scenarios. When using `acquireTokenSilent()`, MSAL will
   * handle the caching and refreshing of tokens automatically.
   */
  async acquireTokenByRefreshToken(request) {
    this.logger.info("acquireTokenByRefreshToken called", request.correlationId);
    const validRequest = {
      ...request,
      ...await this.initializeBaseRequest(request),
      authenticationScheme: AuthenticationScheme.BEARER
    };
    const serverTelemetryManager = this.initializeServerTelemetryManager(ApiId.acquireTokenByRefreshToken, validRequest.correlationId);
    try {
      const discoveredAuthority = await this.createAuthority(validRequest.authority, validRequest.correlationId, void 0, request.azureCloudOptions);
      const refreshTokenClientConfig = await this.buildOauthClientConfiguration(discoveredAuthority, validRequest.correlationId, validRequest.redirectUri || "", serverTelemetryManager);
      const refreshTokenClient = new RefreshTokenClient(refreshTokenClientConfig);
      this.logger.verbose("Refresh token client created", validRequest.correlationId);
      return await refreshTokenClient.acquireToken(validRequest);
    } catch (e) {
      if (e instanceof AuthError) {
        e.setCorrelationId(validRequest.correlationId);
      }
      serverTelemetryManager.cacheFailedRequest(e);
      throw e;
    }
  }
  /**
   * Acquires a token silently when a user specifies the account the token is requested for.
   *
   * This API expects the user to provide an account object and looks into the cache to retrieve the token if present.
   * There is also an optional "forceRefresh" boolean the user can send to bypass the cache for access_token and id_token.
   * In case the refresh_token is expired or not found, an error is thrown
   * and the guidance is for the user to call any interactive token acquisition API (eg: `acquireTokenByCode()`).
   */
  async acquireTokenSilent(request) {
    const validRequest = {
      ...request,
      ...await this.initializeBaseRequest(request),
      forceRefresh: request.forceRefresh || false
    };
    const serverTelemetryManager = this.initializeServerTelemetryManager(ApiId.acquireTokenSilent, validRequest.correlationId, validRequest.forceRefresh);
    try {
      const discoveredAuthority = await this.createAuthority(validRequest.authority, validRequest.correlationId, void 0, request.azureCloudOptions);
      const clientConfiguration = await this.buildOauthClientConfiguration(discoveredAuthority, validRequest.correlationId, validRequest.redirectUri || "", serverTelemetryManager);
      const silentFlowClient = new SilentFlowClient(clientConfiguration);
      this.logger.verbose("Silent flow client created", validRequest.correlationId);
      try {
        await this.tokenCache.overwriteCache();
        return await this.acquireCachedTokenSilent(validRequest, silentFlowClient, clientConfiguration);
      } catch (error) {
        if (error instanceof ClientAuthError && error.errorCode === ClientAuthErrorCodes_exports.tokenRefreshRequired) {
          const refreshTokenClient = new RefreshTokenClient(clientConfiguration);
          return refreshTokenClient.acquireTokenByRefreshToken(validRequest);
        }
        throw error;
      }
    } catch (error) {
      if (error instanceof AuthError) {
        error.setCorrelationId(validRequest.correlationId);
      }
      serverTelemetryManager.cacheFailedRequest(error);
      throw error;
    }
  }
  async acquireCachedTokenSilent(validRequest, silentFlowClient, clientConfiguration) {
    var _a;
    const [authResponse, cacheOutcome] = await silentFlowClient.acquireCachedToken({
      ...validRequest,
      scopes: ((_a = validRequest.scopes) == null ? void 0 : _a.length) ? validRequest.scopes : [...OIDC_DEFAULT_SCOPES]
    });
    if (cacheOutcome === CacheOutcome.PROACTIVELY_REFRESHED) {
      this.logger.info("ClientApplication:acquireCachedTokenSilent - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");
      const refreshTokenClient = new RefreshTokenClient(clientConfiguration);
      try {
        await refreshTokenClient.acquireTokenByRefreshToken(validRequest);
      } catch (e) {
      }
    }
    return authResponse;
  }
  /**
   * Acquires tokens with password grant by exchanging client applications username and password for credentials
   *
   * The latest OAuth 2.0 Security Best Current Practice disallows the password grant entirely.
   * More details on this recommendation at https://tools.ietf.org/html/draft-ietf-oauth-security-topics-13#section-3.4
   * Microsoft's documentation and recommendations are at:
   * https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-authentication-flows#usernamepassword
   *
   * @param request - UsenamePasswordRequest
   * @deprecated - Use a more secure flow instead
   */
  async acquireTokenByUsernamePassword(request) {
    this.logger.info("acquireTokenByUsernamePassword called", request.correlationId);
    const validRequest = {
      ...request,
      ...await this.initializeBaseRequest(request)
    };
    const serverTelemetryManager = this.initializeServerTelemetryManager(ApiId.acquireTokenByUsernamePassword, validRequest.correlationId);
    try {
      const discoveredAuthority = await this.createAuthority(validRequest.authority, validRequest.correlationId, void 0, request.azureCloudOptions);
      const usernamePasswordClientConfig = await this.buildOauthClientConfiguration(discoveredAuthority, validRequest.correlationId, "", serverTelemetryManager);
      const usernamePasswordClient = new UsernamePasswordClient(usernamePasswordClientConfig);
      this.logger.verbose("Username password client created", validRequest.correlationId);
      return await usernamePasswordClient.acquireToken(validRequest);
    } catch (e) {
      if (e instanceof AuthError) {
        e.setCorrelationId(validRequest.correlationId);
      }
      serverTelemetryManager.cacheFailedRequest(e);
      throw e;
    }
  }
  /**
   * Gets the token cache for the application.
   */
  getTokenCache() {
    this.logger.info("getTokenCache called");
    return this.tokenCache;
  }
  /**
   * Validates OIDC state by comparing the user cached state with the state received from the server.
   *
   * This API is provided for scenarios where you would use OAuth2.0 state parameter to mitigate against
   * CSRF attacks.
   * For more information about state, visit https://datatracker.ietf.org/doc/html/rfc6819#section-3.6.
   * @param state - Unique GUID generated by the user that is cached by the user and sent to the server during the first leg of the flow
   * @param cachedState - This string is sent back by the server with the authorization code
   */
  validateState(state, cachedState) {
    if (!state) {
      throw NodeAuthError.createStateNotFoundError();
    }
    if (state !== cachedState) {
      throw createClientAuthError(ClientAuthErrorCodes_exports.stateMismatch);
    }
  }
  /**
   * Returns the logger instance
   */
  getLogger() {
    return this.logger;
  }
  /**
   * Replaces the default logger set in configurations with new Logger with new configurations
   * @param logger - Logger instance
   */
  setLogger(logger) {
    this.logger = logger;
  }
  /**
   * Builds the common configuration to be passed to the common component based on the platform configurarion
   * @param authority - user passed authority in configuration
   * @param serverTelemetryManager - initializes servertelemetry if passed
   */
  async buildOauthClientConfiguration(discoveredAuthority, requestCorrelationId, redirectUri, serverTelemetryManager) {
    this.logger.verbose("buildOauthClientConfiguration called", requestCorrelationId);
    this.logger.info(`Building oauth client configuration with the following authority: ${discoveredAuthority.tokenEndpoint}.`, requestCorrelationId);
    serverTelemetryManager == null ? void 0 : serverTelemetryManager.updateRegionDiscoveryMetadata(discoveredAuthority.regionDiscoveryMetadata);
    const clientConfiguration = {
      authOptions: {
        clientId: this.config.auth.clientId,
        authority: discoveredAuthority,
        clientCapabilities: this.config.auth.clientCapabilities,
        redirectUri
      },
      loggerOptions: {
        logLevel: this.config.system.loggerOptions.logLevel,
        loggerCallback: this.config.system.loggerOptions.loggerCallback,
        piiLoggingEnabled: this.config.system.loggerOptions.piiLoggingEnabled,
        correlationId: requestCorrelationId
      },
      cacheOptions: {
        claimsBasedCachingEnabled: this.config.cache.claimsBasedCachingEnabled
      },
      cryptoInterface: this.cryptoProvider,
      networkInterface: this.config.system.networkClient,
      storageInterface: this.storage,
      serverTelemetryManager,
      clientCredentials: {
        clientSecret: this.clientSecret,
        clientAssertion: await this.getClientAssertion(discoveredAuthority)
      },
      libraryInfo: {
        sku: Constants2.MSAL_SKU,
        version: version2,
        cpu: process.arch || Constants.EMPTY_STRING,
        os: process.platform || Constants.EMPTY_STRING
      },
      telemetry: this.config.telemetry,
      persistencePlugin: this.config.cache.cachePlugin,
      serializableCache: this.tokenCache
    };
    return clientConfiguration;
  }
  async getClientAssertion(authority) {
    if (this.developerProvidedClientAssertion) {
      this.clientAssertion = ClientAssertion.fromAssertion(await getClientAssertion(this.developerProvidedClientAssertion, this.config.auth.clientId, authority.tokenEndpoint));
    }
    return this.clientAssertion && {
      assertion: this.clientAssertion.getJwt(this.cryptoProvider, this.config.auth.clientId, authority.tokenEndpoint),
      assertionType: Constants2.JWT_BEARER_ASSERTION_TYPE
    };
  }
  /**
   * Generates a request with the default scopes & generates a correlationId.
   * @param authRequest - BaseAuthRequest for initialization
   */
  async initializeBaseRequest(authRequest) {
    this.logger.verbose("initializeRequestScopes called", authRequest.correlationId);
    if (authRequest.authenticationScheme && authRequest.authenticationScheme === AuthenticationScheme.POP) {
      this.logger.verbose("Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request", authRequest.correlationId);
    }
    authRequest.authenticationScheme = AuthenticationScheme.BEARER;
    if (this.config.cache.claimsBasedCachingEnabled && authRequest.claims && // Checks for empty stringified object "{}" which doesn't qualify as requested claims
    !StringUtils.isEmptyObj(authRequest.claims)) {
      authRequest.requestedClaimsHash = await this.cryptoProvider.hashString(authRequest.claims);
    }
    return {
      ...authRequest,
      scopes: [
        ...authRequest && authRequest.scopes || [],
        ...OIDC_DEFAULT_SCOPES
      ],
      correlationId: authRequest && authRequest.correlationId || this.cryptoProvider.createNewGuid(),
      authority: authRequest.authority || this.config.auth.authority
    };
  }
  /**
   * Initializes the server telemetry payload
   * @param apiId - Id for a specific request
   * @param correlationId - GUID
   * @param forceRefresh - boolean to indicate network call
   */
  initializeServerTelemetryManager(apiId, correlationId, forceRefresh) {
    const telemetryPayload = {
      clientId: this.config.auth.clientId,
      correlationId,
      apiId,
      forceRefresh: forceRefresh || false
    };
    return new ServerTelemetryManager(telemetryPayload, this.storage);
  }
  /**
   * Create authority instance. If authority not passed in request, default to authority set on the application
   * object. If no authority set in application object, then default to common authority.
   * @param authorityString - authority from user configuration
   */
  async createAuthority(authorityString, requestCorrelationId, azureRegionConfiguration, azureCloudOptions) {
    this.logger.verbose("createAuthority called", requestCorrelationId);
    const authorityUrl = Authority.generateAuthority(authorityString, azureCloudOptions || this.config.auth.azureCloudOptions);
    const authorityOptions = {
      protocolMode: this.config.auth.protocolMode,
      knownAuthorities: this.config.auth.knownAuthorities,
      cloudDiscoveryMetadata: this.config.auth.cloudDiscoveryMetadata,
      authorityMetadata: this.config.auth.authorityMetadata,
      azureRegionConfiguration,
      skipAuthorityMetadataCache: this.config.auth.skipAuthorityMetadataCache
    };
    return AuthorityFactory_exports.createDiscoveredInstance(authorityUrl, this.config.system.networkClient, this.storage, authorityOptions, this.logger, requestCorrelationId);
  }
  /**
   * Clear the cache
   */
  clearCache() {
    this.storage.clear();
  }
};

// node_modules/@azure/msal-node/dist/network/LoopbackClient.mjs
var import_http2 = __toESM(require("http"), 1);

// node_modules/@azure/msal-node/dist/client/ClientCredentialClient.mjs
var ClientCredentialClient = class extends BaseClient {
  constructor(configuration, appTokenProvider) {
    super(configuration);
    this.appTokenProvider = appTokenProvider;
  }
  /**
   * Public API to acquire a token with ClientCredential Flow for Confidential clients
   * @param request - CommonClientCredentialRequest provided by the developer
   */
  async acquireToken(request) {
    if (request.skipCache || request.claims) {
      return this.executeTokenRequest(request, this.authority);
    }
    const [cachedAuthenticationResult, lastCacheOutcome] = await this.getCachedAuthenticationResult(request, this.config, this.cryptoUtils, this.authority, this.cacheManager, this.serverTelemetryManager);
    if (cachedAuthenticationResult) {
      if (lastCacheOutcome === CacheOutcome.PROACTIVELY_REFRESHED) {
        this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");
        const refreshAccessToken = true;
        await this.executeTokenRequest(request, this.authority, refreshAccessToken);
      }
      return cachedAuthenticationResult;
    } else {
      return this.executeTokenRequest(request, this.authority);
    }
  }
  /**
   * looks up cache if the tokens are cached already
   */
  async getCachedAuthenticationResult(request, config2, cryptoUtils, authority, cacheManager, serverTelemetryManager) {
    var _a, _b;
    const clientConfiguration = config2;
    const managedIdentityConfiguration = config2;
    let lastCacheOutcome = CacheOutcome.NOT_APPLICABLE;
    let cacheContext;
    if (clientConfiguration.serializableCache && clientConfiguration.persistencePlugin) {
      cacheContext = new TokenCacheContext(clientConfiguration.serializableCache, false);
      await clientConfiguration.persistencePlugin.beforeCacheAccess(cacheContext);
    }
    const cachedAccessToken = this.readAccessTokenFromCache(authority, ((_a = managedIdentityConfiguration.managedIdentityId) == null ? void 0 : _a.id) || clientConfiguration.authOptions.clientId, new ScopeSet(request.scopes || []), cacheManager);
    if (clientConfiguration.serializableCache && clientConfiguration.persistencePlugin && cacheContext) {
      await clientConfiguration.persistencePlugin.afterCacheAccess(cacheContext);
    }
    if (!cachedAccessToken) {
      serverTelemetryManager == null ? void 0 : serverTelemetryManager.setCacheOutcome(CacheOutcome.NO_CACHED_ACCESS_TOKEN);
      return [null, CacheOutcome.NO_CACHED_ACCESS_TOKEN];
    }
    if (TimeUtils_exports.isTokenExpired(cachedAccessToken.expiresOn, ((_b = clientConfiguration.systemOptions) == null ? void 0 : _b.tokenRenewalOffsetSeconds) || DEFAULT_TOKEN_RENEWAL_OFFSET_SEC)) {
      serverTelemetryManager == null ? void 0 : serverTelemetryManager.setCacheOutcome(CacheOutcome.CACHED_ACCESS_TOKEN_EXPIRED);
      return [null, CacheOutcome.CACHED_ACCESS_TOKEN_EXPIRED];
    }
    if (cachedAccessToken.refreshOn && TimeUtils_exports.isTokenExpired(cachedAccessToken.refreshOn.toString(), 0)) {
      lastCacheOutcome = CacheOutcome.PROACTIVELY_REFRESHED;
      serverTelemetryManager == null ? void 0 : serverTelemetryManager.setCacheOutcome(CacheOutcome.PROACTIVELY_REFRESHED);
    }
    return [
      await ResponseHandler.generateAuthenticationResult(cryptoUtils, authority, {
        account: null,
        idToken: null,
        accessToken: cachedAccessToken,
        refreshToken: null,
        appMetadata: null
      }, true, request),
      lastCacheOutcome
    ];
  }
  /**
   * Reads access token from the cache
   */
  readAccessTokenFromCache(authority, id, scopeSet, cacheManager) {
    const accessTokenFilter = {
      homeAccountId: Constants.EMPTY_STRING,
      environment: authority.canonicalAuthorityUrlComponents.HostNameAndPort,
      credentialType: CredentialType.ACCESS_TOKEN,
      clientId: id,
      realm: authority.tenant,
      target: ScopeSet.createSearchScopes(scopeSet.asArray())
    };
    const accessTokens = cacheManager.getAccessTokensByFilter(accessTokenFilter);
    if (accessTokens.length < 1) {
      return null;
    } else if (accessTokens.length > 1) {
      throw createClientAuthError(ClientAuthErrorCodes_exports.multipleMatchingTokens);
    }
    return accessTokens[0];
  }
  /**
   * Makes a network call to request the token from the service
   * @param request - CommonClientCredentialRequest provided by the developer
   * @param authority - authority object
   */
  async executeTokenRequest(request, authority, refreshAccessToken) {
    let serverTokenResponse;
    let reqTimestamp;
    if (this.appTokenProvider) {
      this.logger.info("Using appTokenProvider extensibility.");
      const appTokenPropviderParameters = {
        correlationId: request.correlationId,
        tenantId: this.config.authOptions.authority.tenant,
        scopes: request.scopes,
        claims: request.claims
      };
      reqTimestamp = TimeUtils_exports.nowSeconds();
      const appTokenProviderResult = await this.appTokenProvider(appTokenPropviderParameters);
      serverTokenResponse = {
        access_token: appTokenProviderResult.accessToken,
        expires_in: appTokenProviderResult.expiresInSeconds,
        refresh_in: appTokenProviderResult.refreshInSeconds,
        token_type: AuthenticationScheme.BEARER
      };
    } else {
      const queryParametersString = this.createTokenQueryParameters(request);
      const endpoint = UrlString.appendQueryString(authority.tokenEndpoint, queryParametersString);
      const requestBody = await this.createTokenRequestBody(request);
      const headers = this.createTokenRequestHeaders();
      const thumbprint = {
        clientId: this.config.authOptions.clientId,
        authority: request.authority,
        scopes: request.scopes,
        claims: request.claims,
        authenticationScheme: request.authenticationScheme,
        resourceRequestMethod: request.resourceRequestMethod,
        resourceRequestUri: request.resourceRequestUri,
        shrClaims: request.shrClaims,
        sshKid: request.sshKid
      };
      this.logger.info("Sending token request to endpoint: " + authority.tokenEndpoint);
      reqTimestamp = TimeUtils_exports.nowSeconds();
      const response = await this.executePostToTokenEndpoint(endpoint, requestBody, headers, thumbprint, request.correlationId);
      serverTokenResponse = response.body;
      serverTokenResponse.status = response.status;
    }
    const responseHandler = new ResponseHandler(this.config.authOptions.clientId, this.cacheManager, this.cryptoUtils, this.logger, this.config.serializableCache, this.config.persistencePlugin);
    responseHandler.validateTokenResponse(serverTokenResponse, refreshAccessToken);
    const tokenResponse = await responseHandler.handleServerTokenResponse(serverTokenResponse, this.authority, reqTimestamp, request);
    return tokenResponse;
  }
  /**
   * generate the request to the server in the acceptable format
   * @param request - CommonClientCredentialRequest provided by the developer
   */
  async createTokenRequestBody(request) {
    const parameters = /* @__PURE__ */ new Map();
    RequestParameterBuilder_exports.addClientId(parameters, this.config.authOptions.clientId);
    RequestParameterBuilder_exports.addScopes(parameters, request.scopes, false);
    RequestParameterBuilder_exports.addGrantType(parameters, GrantType.CLIENT_CREDENTIALS_GRANT);
    RequestParameterBuilder_exports.addLibraryInfo(parameters, this.config.libraryInfo);
    RequestParameterBuilder_exports.addApplicationTelemetry(parameters, this.config.telemetry.application);
    RequestParameterBuilder_exports.addThrottling(parameters);
    if (this.serverTelemetryManager) {
      RequestParameterBuilder_exports.addServerTelemetry(parameters, this.serverTelemetryManager);
    }
    const correlationId = request.correlationId || this.config.cryptoInterface.createNewGuid();
    RequestParameterBuilder_exports.addCorrelationId(parameters, correlationId);
    if (this.config.clientCredentials.clientSecret) {
      RequestParameterBuilder_exports.addClientSecret(parameters, this.config.clientCredentials.clientSecret);
    }
    const clientAssertion = request.clientAssertion || this.config.clientCredentials.clientAssertion;
    if (clientAssertion) {
      RequestParameterBuilder_exports.addClientAssertion(parameters, await getClientAssertion(clientAssertion.assertion, this.config.authOptions.clientId, request.resourceRequestUri));
      RequestParameterBuilder_exports.addClientAssertionType(parameters, clientAssertion.assertionType);
    }
    if (!StringUtils.isEmptyObj(request.claims) || this.config.authOptions.clientCapabilities && this.config.authOptions.clientCapabilities.length > 0) {
      RequestParameterBuilder_exports.addClaims(parameters, request.claims, this.config.authOptions.clientCapabilities);
    }
    return UrlUtils_exports.mapToQueryString(parameters);
  }
};

// node_modules/@azure/msal-node/dist/client/OnBehalfOfClient.mjs
var OnBehalfOfClient = class extends BaseClient {
  constructor(configuration) {
    super(configuration);
  }
  /**
   * Public API to acquire tokens with on behalf of flow
   * @param request - developer provided CommonOnBehalfOfRequest
   */
  async acquireToken(request) {
    this.scopeSet = new ScopeSet(request.scopes || []);
    this.userAssertionHash = await this.cryptoUtils.hashString(request.oboAssertion);
    if (request.skipCache || request.claims) {
      return this.executeTokenRequest(request, this.authority, this.userAssertionHash);
    }
    try {
      return await this.getCachedAuthenticationResult(request);
    } catch (e) {
      return await this.executeTokenRequest(request, this.authority, this.userAssertionHash);
    }
  }
  /**
   * look up cache for tokens
   * Find idtoken in the cache
   * Find accessToken based on user assertion and account info in the cache
   * Please note we are not yet supported OBO tokens refreshed with long lived RT. User will have to send a new assertion if the current access token expires
   * This is to prevent security issues when the assertion changes over time, however, longlived RT helps retaining the session
   * @param request - developer provided CommonOnBehalfOfRequest
   */
  async getCachedAuthenticationResult(request) {
    var _a, _b;
    const cachedAccessToken = this.readAccessTokenFromCacheForOBO(this.config.authOptions.clientId, request);
    if (!cachedAccessToken) {
      (_a = this.serverTelemetryManager) == null ? void 0 : _a.setCacheOutcome(CacheOutcome.NO_CACHED_ACCESS_TOKEN);
      this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties.");
      throw createClientAuthError(ClientAuthErrorCodes_exports.tokenRefreshRequired);
    } else if (TimeUtils_exports.isTokenExpired(cachedAccessToken.expiresOn, this.config.systemOptions.tokenRenewalOffsetSeconds)) {
      (_b = this.serverTelemetryManager) == null ? void 0 : _b.setCacheOutcome(CacheOutcome.CACHED_ACCESS_TOKEN_EXPIRED);
      this.logger.info(`OnbehalfofFlow:getCachedAuthenticationResult - Cached access token is expired or will expire within ${this.config.systemOptions.tokenRenewalOffsetSeconds} seconds.`);
      throw createClientAuthError(ClientAuthErrorCodes_exports.tokenRefreshRequired);
    }
    const cachedIdToken = this.readIdTokenFromCacheForOBO(cachedAccessToken.homeAccountId);
    let idTokenClaims;
    let cachedAccount = null;
    if (cachedIdToken) {
      idTokenClaims = AuthToken_exports.extractTokenClaims(cachedIdToken.secret, EncodingUtils.base64Decode);
      const localAccountId = idTokenClaims.oid || idTokenClaims.sub;
      const accountInfo = {
        homeAccountId: cachedIdToken.homeAccountId,
        environment: cachedIdToken.environment,
        tenantId: cachedIdToken.realm,
        username: Constants.EMPTY_STRING,
        localAccountId: localAccountId || Constants.EMPTY_STRING
      };
      cachedAccount = this.cacheManager.readAccountFromCache(accountInfo);
    }
    if (this.config.serverTelemetryManager) {
      this.config.serverTelemetryManager.incrementCacheHits();
    }
    return ResponseHandler.generateAuthenticationResult(this.cryptoUtils, this.authority, {
      account: cachedAccount,
      accessToken: cachedAccessToken,
      idToken: cachedIdToken,
      refreshToken: null,
      appMetadata: null
    }, true, request, idTokenClaims);
  }
  /**
   * read idtoken from cache, this is a specific implementation for OBO as the requirements differ from a generic lookup in the cacheManager
   * Certain use cases of OBO flow do not expect an idToken in the cache/or from the service
   * @param atHomeAccountId - account id
   */
  readIdTokenFromCacheForOBO(atHomeAccountId) {
    const idTokenFilter = {
      homeAccountId: atHomeAccountId,
      environment: this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,
      credentialType: CredentialType.ID_TOKEN,
      clientId: this.config.authOptions.clientId,
      realm: this.authority.tenant
    };
    const idTokenMap = this.cacheManager.getIdTokensByFilter(idTokenFilter);
    if (Object.values(idTokenMap).length < 1) {
      return null;
    }
    return Object.values(idTokenMap)[0];
  }
  /**
   * Fetches the cached access token based on incoming assertion
   * @param clientId - client id
   * @param request - developer provided CommonOnBehalfOfRequest
   */
  readAccessTokenFromCacheForOBO(clientId, request) {
    const authScheme = request.authenticationScheme || AuthenticationScheme.BEARER;
    const credentialType = authScheme && authScheme.toLowerCase() !== AuthenticationScheme.BEARER.toLowerCase() ? CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME : CredentialType.ACCESS_TOKEN;
    const accessTokenFilter = {
      credentialType,
      clientId,
      target: ScopeSet.createSearchScopes(this.scopeSet.asArray()),
      tokenType: authScheme,
      keyId: request.sshKid,
      requestedClaimsHash: request.requestedClaimsHash,
      userAssertionHash: this.userAssertionHash
    };
    const accessTokens = this.cacheManager.getAccessTokensByFilter(accessTokenFilter);
    const numAccessTokens = accessTokens.length;
    if (numAccessTokens < 1) {
      return null;
    } else if (numAccessTokens > 1) {
      throw createClientAuthError(ClientAuthErrorCodes_exports.multipleMatchingTokens);
    }
    return accessTokens[0];
  }
  /**
   * Make a network call to the server requesting credentials
   * @param request - developer provided CommonOnBehalfOfRequest
   * @param authority - authority object
   */
  async executeTokenRequest(request, authority, userAssertionHash) {
    const queryParametersString = this.createTokenQueryParameters(request);
    const endpoint = UrlString.appendQueryString(authority.tokenEndpoint, queryParametersString);
    const requestBody = await this.createTokenRequestBody(request);
    const headers = this.createTokenRequestHeaders();
    const thumbprint = {
      clientId: this.config.authOptions.clientId,
      authority: request.authority,
      scopes: request.scopes,
      claims: request.claims,
      authenticationScheme: request.authenticationScheme,
      resourceRequestMethod: request.resourceRequestMethod,
      resourceRequestUri: request.resourceRequestUri,
      shrClaims: request.shrClaims,
      sshKid: request.sshKid
    };
    const reqTimestamp = TimeUtils_exports.nowSeconds();
    const response = await this.executePostToTokenEndpoint(endpoint, requestBody, headers, thumbprint, request.correlationId);
    const responseHandler = new ResponseHandler(this.config.authOptions.clientId, this.cacheManager, this.cryptoUtils, this.logger, this.config.serializableCache, this.config.persistencePlugin);
    responseHandler.validateTokenResponse(response.body);
    const tokenResponse = await responseHandler.handleServerTokenResponse(response.body, this.authority, reqTimestamp, request, void 0, userAssertionHash);
    return tokenResponse;
  }
  /**
   * generate a server request in accepable format
   * @param request - developer provided CommonOnBehalfOfRequest
   */
  async createTokenRequestBody(request) {
    const parameters = /* @__PURE__ */ new Map();
    RequestParameterBuilder_exports.addClientId(parameters, this.config.authOptions.clientId);
    RequestParameterBuilder_exports.addScopes(parameters, request.scopes);
    RequestParameterBuilder_exports.addGrantType(parameters, GrantType.JWT_BEARER);
    RequestParameterBuilder_exports.addClientInfo(parameters);
    RequestParameterBuilder_exports.addLibraryInfo(parameters, this.config.libraryInfo);
    RequestParameterBuilder_exports.addApplicationTelemetry(parameters, this.config.telemetry.application);
    RequestParameterBuilder_exports.addThrottling(parameters);
    if (this.serverTelemetryManager) {
      RequestParameterBuilder_exports.addServerTelemetry(parameters, this.serverTelemetryManager);
    }
    const correlationId = request.correlationId || this.config.cryptoInterface.createNewGuid();
    RequestParameterBuilder_exports.addCorrelationId(parameters, correlationId);
    RequestParameterBuilder_exports.addRequestTokenUse(parameters, AADServerParamKeys_exports.ON_BEHALF_OF);
    RequestParameterBuilder_exports.addOboAssertion(parameters, request.oboAssertion);
    if (this.config.clientCredentials.clientSecret) {
      RequestParameterBuilder_exports.addClientSecret(parameters, this.config.clientCredentials.clientSecret);
    }
    const clientAssertion = this.config.clientCredentials.clientAssertion;
    if (clientAssertion) {
      RequestParameterBuilder_exports.addClientAssertion(parameters, await getClientAssertion(clientAssertion.assertion, this.config.authOptions.clientId, request.resourceRequestUri));
      RequestParameterBuilder_exports.addClientAssertionType(parameters, clientAssertion.assertionType);
    }
    if (request.claims || this.config.authOptions.clientCapabilities && this.config.authOptions.clientCapabilities.length > 0) {
      RequestParameterBuilder_exports.addClaims(parameters, request.claims, this.config.authOptions.clientCapabilities);
    }
    return UrlUtils_exports.mapToQueryString(parameters);
  }
};

// node_modules/@azure/msal-node/dist/client/ConfidentialClientApplication.mjs
var ConfidentialClientApplication = class extends ClientApplication {
  /**
   * Constructor for the ConfidentialClientApplication
   *
   * Required attributes in the Configuration object are:
   * - clientID: the application ID of your application. You can obtain one by registering your application with our application registration portal
   * - authority: the authority URL for your application.
   * - client credential: Must set either client secret, certificate, or assertion for confidential clients. You can obtain a client secret from the application registration portal.
   *
   * In Azure AD, authority is a URL indicating of the form https://login.microsoftonline.com/\{Enter_the_Tenant_Info_Here\}.
   * If your application supports Accounts in one organizational directory, replace "Enter_the_Tenant_Info_Here" value with the Tenant Id or Tenant name (for example, contoso.microsoft.com).
   * If your application supports Accounts in any organizational directory, replace "Enter_the_Tenant_Info_Here" value with organizations.
   * If your application supports Accounts in any organizational directory and personal Microsoft accounts, replace "Enter_the_Tenant_Info_Here" value with common.
   * To restrict support to Personal Microsoft accounts only, replace "Enter_the_Tenant_Info_Here" value with consumers.
   *
   * In Azure B2C, authority is of the form https://\{instance\}/tfp/\{tenant\}/\{policyName\}/
   * Full B2C functionality will be available in this library in future versions.
   *
   * @param Configuration - configuration object for the MSAL ConfidentialClientApplication instance
   */
  constructor(configuration) {
    var _a, _b, _c;
    super(configuration);
    const clientSecretNotEmpty = !!this.config.auth.clientSecret;
    const clientAssertionNotEmpty = !!this.config.auth.clientAssertion;
    const certificateNotEmpty = (!!((_a = this.config.auth.clientCertificate) == null ? void 0 : _a.thumbprint) || !!((_b = this.config.auth.clientCertificate) == null ? void 0 : _b.thumbprintSha256)) && !!((_c = this.config.auth.clientCertificate) == null ? void 0 : _c.privateKey);
    if (this.appTokenProvider) {
      return;
    }
    if (clientSecretNotEmpty && clientAssertionNotEmpty || clientAssertionNotEmpty && certificateNotEmpty || clientSecretNotEmpty && certificateNotEmpty) {
      throw createClientAuthError(ClientAuthErrorCodes_exports.invalidClientCredential);
    }
    if (this.config.auth.clientSecret) {
      this.clientSecret = this.config.auth.clientSecret;
      return;
    }
    if (this.config.auth.clientAssertion) {
      this.developerProvidedClientAssertion = this.config.auth.clientAssertion;
      return;
    }
    if (!certificateNotEmpty) {
      throw createClientAuthError(ClientAuthErrorCodes_exports.invalidClientCredential);
    } else {
      this.clientAssertion = !!this.config.auth.clientCertificate.thumbprintSha256 ? ClientAssertion.fromCertificateWithSha256Thumbprint(this.config.auth.clientCertificate.thumbprintSha256, this.config.auth.clientCertificate.privateKey, this.config.auth.clientCertificate.x5c) : ClientAssertion.fromCertificate(
        // guaranteed to be a string, due to prior error checking in this function
        this.config.auth.clientCertificate.thumbprint,
        this.config.auth.clientCertificate.privateKey,
        this.config.auth.clientCertificate.x5c
      );
    }
    this.appTokenProvider = void 0;
  }
  /**
   * This extensibility point only works for the client_credential flow, i.e. acquireTokenByClientCredential and
   * is meant for Azure SDK to enhance Managed Identity support.
   *
   * @param IAppTokenProvider  - Extensibility interface, which allows the app developer to return a token from a custom source.
   */
  SetAppTokenProvider(provider) {
    this.appTokenProvider = provider;
  }
  /**
   * Acquires tokens from the authority for the application (not for an end user).
   */
  async acquireTokenByClientCredential(request) {
    this.logger.info("acquireTokenByClientCredential called", request.correlationId);
    let clientAssertion;
    if (request.clientAssertion) {
      clientAssertion = {
        assertion: await getClientAssertion(
          request.clientAssertion,
          this.config.auth.clientId
          // tokenEndpoint will be undefined. resourceRequestUri is omitted in ClientCredentialRequest
        ),
        assertionType: Constants2.JWT_BEARER_ASSERTION_TYPE
      };
    }
    const baseRequest = await this.initializeBaseRequest(request);
    const validBaseRequest = {
      ...baseRequest,
      scopes: baseRequest.scopes.filter((scope) => !OIDC_DEFAULT_SCOPES.includes(scope))
    };
    const validRequest = {
      ...request,
      ...validBaseRequest,
      clientAssertion
    };
    const authority = new UrlString(validRequest.authority);
    const tenantId = authority.getUrlComponents().PathSegments[0];
    if (Object.values(AADAuthorityConstants).includes(tenantId)) {
      throw createClientAuthError(ClientAuthErrorCodes_exports.missingTenantIdError);
    }
    const ENV_MSAL_FORCE_REGION = process.env[MSAL_FORCE_REGION];
    let region;
    if (validRequest.azureRegion !== "DisableMsalForceRegion") {
      if (!validRequest.azureRegion && ENV_MSAL_FORCE_REGION) {
        region = ENV_MSAL_FORCE_REGION;
      } else {
        region = validRequest.azureRegion;
      }
    }
    const azureRegionConfiguration = {
      azureRegion: region,
      environmentRegion: process.env[REGION_ENVIRONMENT_VARIABLE]
    };
    const serverTelemetryManager = this.initializeServerTelemetryManager(ApiId.acquireTokenByClientCredential, validRequest.correlationId, validRequest.skipCache);
    try {
      const discoveredAuthority = await this.createAuthority(validRequest.authority, validRequest.correlationId, azureRegionConfiguration, request.azureCloudOptions);
      const clientCredentialConfig = await this.buildOauthClientConfiguration(discoveredAuthority, validRequest.correlationId, "", serverTelemetryManager);
      const clientCredentialClient = new ClientCredentialClient(clientCredentialConfig, this.appTokenProvider);
      this.logger.verbose("Client credential client created", validRequest.correlationId);
      return await clientCredentialClient.acquireToken(validRequest);
    } catch (e) {
      if (e instanceof AuthError) {
        e.setCorrelationId(validRequest.correlationId);
      }
      serverTelemetryManager.cacheFailedRequest(e);
      throw e;
    }
  }
  /**
   * Acquires tokens from the authority for the application.
   *
   * Used in scenarios where the current app is a middle-tier service which was called with a token
   * representing an end user. The current app can use the token (oboAssertion) to request another
   * token to access downstream web API, on behalf of that user.
   *
   * The current middle-tier app has no user interaction to obtain consent.
   * See how to gain consent upfront for your middle-tier app from this article.
   * https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-on-behalf-of-flow#gaining-consent-for-the-middle-tier-application
   */
  async acquireTokenOnBehalfOf(request) {
    this.logger.info("acquireTokenOnBehalfOf called", request.correlationId);
    const validRequest = {
      ...request,
      ...await this.initializeBaseRequest(request)
    };
    try {
      const discoveredAuthority = await this.createAuthority(validRequest.authority, validRequest.correlationId, void 0, request.azureCloudOptions);
      const onBehalfOfConfig = await this.buildOauthClientConfiguration(discoveredAuthority, validRequest.correlationId, "", void 0);
      const oboClient = new OnBehalfOfClient(onBehalfOfConfig);
      this.logger.verbose("On behalf of client created", validRequest.correlationId);
      return await oboClient.acquireToken(validRequest);
    } catch (e) {
      if (e instanceof AuthError) {
        e.setCorrelationId(validRequest.correlationId);
      }
      throw e;
    }
  }
};

// node_modules/@azure/msal-node/dist/utils/TimeUtils.mjs
function isIso8601(dateString) {
  if (typeof dateString !== "string") {
    return false;
  }
  const date = new Date(dateString);
  return !isNaN(date.getTime()) && date.toISOString() === dateString;
}

// node_modules/@azure/msal-node/dist/network/HttpClientWithRetries.mjs
var HttpClientWithRetries = class {
  constructor(httpClientNoRetries, retryPolicy) {
    this.httpClientNoRetries = httpClientNoRetries;
    this.retryPolicy = retryPolicy;
  }
  async sendNetworkRequestAsyncHelper(httpMethod, url, options) {
    if (httpMethod === HttpMethod.GET) {
      return this.httpClientNoRetries.sendGetRequestAsync(url, options);
    } else {
      return this.httpClientNoRetries.sendPostRequestAsync(url, options);
    }
  }
  async sendNetworkRequestAsync(httpMethod, url, options) {
    let response = await this.sendNetworkRequestAsyncHelper(httpMethod, url, options);
    let currentRetry = 0;
    while (await this.retryPolicy.pauseForRetry(response.status, currentRetry, response.headers[HeaderNames.RETRY_AFTER])) {
      response = await this.sendNetworkRequestAsyncHelper(httpMethod, url, options);
      currentRetry++;
    }
    return response;
  }
  async sendGetRequestAsync(url, options) {
    return this.sendNetworkRequestAsync(HttpMethod.GET, url, options);
  }
  async sendPostRequestAsync(url, options) {
    return this.sendNetworkRequestAsync(HttpMethod.POST, url, options);
  }
};

// node_modules/@azure/msal-node/dist/client/ManagedIdentitySources/BaseManagedIdentitySource.mjs
var ManagedIdentityUserAssignedIdQueryParameterNames = {
  MANAGED_IDENTITY_CLIENT_ID: "client_id",
  MANAGED_IDENTITY_OBJECT_ID: "object_id",
  MANAGED_IDENTITY_RESOURCE_ID_IMDS: "msi_res_id",
  MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS: "mi_res_id"
};
var BaseManagedIdentitySource = class {
  constructor(logger, nodeStorage, networkClient, cryptoProvider, disableInternalRetries) {
    this.logger = logger;
    this.nodeStorage = nodeStorage;
    this.networkClient = networkClient;
    this.cryptoProvider = cryptoProvider;
    this.disableInternalRetries = disableInternalRetries;
  }
  async getServerTokenResponseAsync(response, _networkClient, _networkRequest, _networkRequestOptions) {
    return this.getServerTokenResponse(response);
  }
  getServerTokenResponse(response) {
    var _a, _b;
    let refreshIn, expiresIn;
    if (response.body.expires_on) {
      if (isIso8601(response.body.expires_on)) {
        response.body.expires_on = new Date(response.body.expires_on).getTime() / 1e3;
      }
      expiresIn = response.body.expires_on - TimeUtils_exports.nowSeconds();
      if (expiresIn > 2 * 3600) {
        refreshIn = expiresIn / 2;
      }
    }
    const serverTokenResponse = {
      status: response.status,
      // success
      access_token: response.body.access_token,
      expires_in: expiresIn,
      scope: response.body.resource,
      token_type: response.body.token_type,
      refresh_in: refreshIn,
      // error
      correlation_id: response.body.correlation_id || response.body.correlationId,
      error: typeof response.body.error === "string" ? response.body.error : (_a = response.body.error) == null ? void 0 : _a.code,
      error_description: response.body.message || (typeof response.body.error === "string" ? response.body.error_description : (_b = response.body.error) == null ? void 0 : _b.message),
      error_codes: response.body.error_codes,
      timestamp: response.body.timestamp,
      trace_id: response.body.trace_id
    };
    return serverTokenResponse;
  }
  async acquireTokenWithManagedIdentity(managedIdentityRequest, managedIdentityId, fakeAuthority, refreshAccessToken) {
    const networkRequest = this.createRequest(managedIdentityRequest.resource, managedIdentityId);
    const headers = networkRequest.headers;
    headers[HeaderNames.CONTENT_TYPE] = Constants.URL_FORM_CONTENT_TYPE;
    const networkRequestOptions = { headers };
    if (Object.keys(networkRequest.bodyParameters).length) {
      networkRequestOptions.body = networkRequest.computeParametersBodyString();
    }
    const networkClientHelper = this.disableInternalRetries ? this.networkClient : new HttpClientWithRetries(this.networkClient, networkRequest.retryPolicy);
    const reqTimestamp = TimeUtils_exports.nowSeconds();
    let response;
    try {
      if (networkRequest.httpMethod === HttpMethod.POST) {
        response = await networkClientHelper.sendPostRequestAsync(networkRequest.computeUri(), networkRequestOptions);
      } else {
        response = await networkClientHelper.sendGetRequestAsync(networkRequest.computeUri(), networkRequestOptions);
      }
    } catch (error) {
      if (error instanceof AuthError) {
        throw error;
      } else {
        throw createClientAuthError(ClientAuthErrorCodes_exports.networkError);
      }
    }
    const responseHandler = new ResponseHandler(managedIdentityId.id, this.nodeStorage, this.cryptoProvider, this.logger, null, null);
    const serverTokenResponse = await this.getServerTokenResponseAsync(response, networkClientHelper, networkRequest, networkRequestOptions);
    responseHandler.validateTokenResponse(serverTokenResponse, refreshAccessToken);
    return responseHandler.handleServerTokenResponse(serverTokenResponse, fakeAuthority, reqTimestamp, managedIdentityRequest);
  }
  getManagedIdentityUserAssignedIdQueryParameterKey(managedIdentityIdType, imds) {
    switch (managedIdentityIdType) {
      case ManagedIdentityIdType.USER_ASSIGNED_CLIENT_ID:
        this.logger.info("[Managed Identity] Adding user assigned client id to the request.");
        return ManagedIdentityUserAssignedIdQueryParameterNames.MANAGED_IDENTITY_CLIENT_ID;
      case ManagedIdentityIdType.USER_ASSIGNED_RESOURCE_ID:
        this.logger.info("[Managed Identity] Adding user assigned resource id to the request.");
        return imds ? ManagedIdentityUserAssignedIdQueryParameterNames.MANAGED_IDENTITY_RESOURCE_ID_IMDS : ManagedIdentityUserAssignedIdQueryParameterNames.MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS;
      case ManagedIdentityIdType.USER_ASSIGNED_OBJECT_ID:
        this.logger.info("[Managed Identity] Adding user assigned object id to the request.");
        return ManagedIdentityUserAssignedIdQueryParameterNames.MANAGED_IDENTITY_OBJECT_ID;
      default:
        throw createManagedIdentityError(invalidManagedIdentityIdType);
    }
  }
};
BaseManagedIdentitySource.getValidatedEnvVariableUrlString = (envVariableStringName, envVariable, sourceName, logger) => {
  try {
    return new UrlString(envVariable).urlString;
  } catch (error) {
    logger.info(`[Managed Identity] ${sourceName} managed identity is unavailable because the '${envVariableStringName}' environment variable is malformed.`);
    throw createManagedIdentityError(MsiEnvironmentVariableUrlMalformedErrorCodes[envVariableStringName]);
  }
};

// node_modules/@azure/msal-node/dist/client/ManagedIdentitySources/AzureArc.mjs
var import_fs = require("fs");
var import_path = __toESM(require("path"), 1);
var SUPPORTED_AZURE_ARC_PLATFORMS = {
  win32: `${process.env["ProgramData"]}\\AzureConnectedMachineAgent\\Tokens\\`,
  linux: "/var/opt/azcmagent/tokens/"
};
var AZURE_ARC_FILE_DETECTION = {
  win32: `${process.env["ProgramFiles"]}\\AzureConnectedMachineAgent\\himds.exe`,
  linux: "/opt/azcmagent/bin/himds"
};

// node_modules/@azure/msal-node/dist/client/ManagedIdentitySources/Imds.mjs
var IMDS_TOKEN_PATH = "/metadata/identity/oauth2/token";
var DEFAULT_IMDS_ENDPOINT = `http://169.254.169.254${IMDS_TOKEN_PATH}`;

// src/auth.ts
var import_remote = __toESM(require_renderer2());
var fs = __toESM(require("fs"));
var AUTHORITY = "https://login.microsoftonline.com/consumers";
var REDIRECT_URI2 = "http://localhost:5000";
var SCOPES = ["Tasks.ReadWrite", "offline_access"];
var AuthManager = class {
  /**
   * Creates an instance of AuthManager.
   * @param clientId - The client ID of your Azure AD application.
   * @param clientSecret - The client secret of your Azure AD application.
   * @param redirectUrl - The redirect URL registered in your Azure AD app.
   * @param tokenFilePath - Path to the file where the token cache will be stored.
   */
  constructor(clientId, clientSecret, redirectUrl, tokenFilePath) {
    this.clientId = clientId;
    this.clientSecret = clientSecret;
    this.redirectUrl = redirectUrl;
    this.tokenFilePath = tokenFilePath;
    this.initClient();
  }
  /**
   * Initializes the MSAL client with the given configuration.
   */
  initClient() {
    const config2 = {
      auth: {
        clientId: this.clientId,
        authority: AUTHORITY,
        clientSecret: this.clientSecret
      }
    };
    this.cca = new ConfidentialClientApplication(config2);
  }
  /**
   * Saves the current token cache to disk.
   */
  saveTokenCache() {
    const tokenCacheSerialized = this.cca.getTokenCache().serialize();
    fs.writeFileSync(this.tokenFilePath, tokenCacheSerialized);
  }
  /**
   * Performs an interactive login to acquire an access token.
   * Opens a BrowserWindow to let the user sign in.
   * @returns A promise that resolves with an object containing a valid access token.
   */
  async getAccessToken() {
    return new Promise((resolve, reject) => {
      const authUrl = `${AUTHORITY}/oauth2/v2.0/authorize?client_id=${this.clientId}&response_type=code&redirect_uri=${encodeURIComponent(REDIRECT_URI2)}&response_mode=query&scope=${encodeURIComponent(SCOPES.join(" "))}&prompt=consent`;
      const authWindow = new import_remote.BrowserWindow({
        width: 600,
        height: 700,
        webPreferences: {
          nodeIntegration: false,
          contextIsolation: true
        }
      });
      authWindow.loadURL(authUrl);
      authWindow.webContents.on("will-redirect", async (event, url) => {
        try {
          const redirectURL = new URL(url);
          const error = redirectURL.searchParams.get("error");
          if (error) throw new Error("OAuth error: " + error);
          const authCode = redirectURL.searchParams.get("code");
          if (!authCode) return;
          event.preventDefault();
          authWindow.close();
          const tokenRequest = {
            code: authCode,
            scopes: SCOPES,
            redirectUri: REDIRECT_URI2
          };
          const tokenResponse = await this.cca.acquireTokenByCode(tokenRequest);
          if (!tokenResponse)
            throw new Error("No token response received.");
          this.saveTokenCache();
          resolve({ accessToken: tokenResponse.accessToken });
        } catch (err) {
          if (!authWindow.isDestroyed()) authWindow.close();
          reject(err);
        }
      });
    });
  }
  /**
   * Refreshes the access token using the refresh token stored in the token cache.
   * @returns A promise that resolves with an object containing a new access token.
   */
  async refreshAccessTokenWithCCA() {
    if (!fs.existsSync(this.tokenFilePath)) {
      throw new Error("No token cache found. Please login first.");
    }
    const cacheData = fs.readFileSync(this.tokenFilePath, "utf8");
    this.cca.getTokenCache().deserialize(cacheData);
    const tokenCacheSerialized = this.cca.getTokenCache().serialize();
    const parsedCache = JSON.parse(tokenCacheSerialized);
    if (!parsedCache.RefreshToken) {
      throw new Error("No refresh token found in the cache.");
    }
    const refreshTokenObject = parsedCache.RefreshToken;
    const refreshTokenKey = Object.keys(refreshTokenObject)[0];
    const refreshToken = refreshTokenObject[refreshTokenKey].secret;
    const tokenRequest = {
      refreshToken,
      scopes: SCOPES,
      redirectUri: REDIRECT_URI2
    };
    try {
      const tokenResponse = await this.cca.acquireTokenByRefreshToken(tokenRequest);
      if (!tokenResponse)
        throw new Error("No token response received from refresh.");
      this.saveTokenCache();
      return { accessToken: tokenResponse.accessToken };
    } catch (error) {
      throw error;
    }
  }
  /**
   * Returns a valid access token by checking the token cache.
   * If a token is available, it refreshes it; otherwise, it performs an interactive login.
   * @returns A promise that resolves with an object containing a valid access token.
   */
  async getToken() {
    if (fs.existsSync(this.tokenFilePath)) {
      return this.refreshAccessTokenWithCCA();
    } else {
      return this.getAccessToken();
    }
  }
};

// src/task-title-modal.ts
var import_obsidian4 = require("obsidian");
var TaskTitleModal = class extends import_obsidian4.Modal {
  /**
   * Constructs the modal.
   * @param app - The Obsidian app instance.
   * @param onSubmit - A callback that receives the entered task title.
   */
  constructor(app, onSubmit) {
    super(app);
    this.onSubmit = onSubmit;
  }
  /**
   * Called when the modal is opened. Renders the input UI and centers it.
   */
  onOpen() {
    const { contentEl } = this;
    contentEl.style.display = "flex";
    contentEl.style.flexDirection = "column";
    contentEl.style.alignItems = "center";
    contentEl.style.justifyContent = "center";
    contentEl.style.gap = "10px";
    contentEl.style.minHeight = "100px";
    contentEl.createEl("h2", { text: "Enter Task Title" });
    const inputEl = contentEl.createEl("input", {
      type: "text",
      placeholder: "Task Title"
    });
    inputEl.style.width = "100%";
    inputEl.focus();
    inputEl.onkeydown = (e) => {
      if (e.key === "Enter") {
        this.result = inputEl.value;
        this.close();
        this.onSubmit(this.result);
      }
    };
  }
  /**
   * Called when the modal is closed. Clears the content.
   */
  onClose() {
    this.contentEl.empty();
  }
};

// src/select-modal.ts
var import_obsidian5 = require("obsidian");
var GenericSelectModal = class extends import_obsidian5.FuzzySuggestModal {
  constructor(app, items, getText, onSelect) {
    super(app);
    this.items = items;
    this.getText = getText;
    this.onSelect = onSelect;
  }
  getItems() {
    return this.items;
  }
  getItemText(item) {
    return this.getText(item);
  }
  async onChooseItem(item) {
    await this.onSelect(item);
  }
};

// src/main.ts
var TaskSyncerPlugin = class extends import_obsidian6.Plugin {
  constructor() {
    super(...arguments);
    this.sidebarView = null;
    this.taskCache = null;
  }
  /**
   * Displays a notification to the user.
   * @param message - The message to display.
   * @param type - The type of notification ("error", "warning", "success", "info").
   */
  notify(message, type = "info") {
    let prefix = "";
    switch (type) {
      case "error":
        prefix = "\u274C ";
        break;
      case "warning":
        prefix = "\u26A0\uFE0F ";
        break;
      case "success":
        prefix = "\u2705 ";
        break;
    }
    new import_obsidian6.Notice(prefix + message);
  }
  /**
   * Called when the plugin is activated.
   * Loads environment variables, settings, registers views and commands, and initializes authentication.
   */
  async onload() {
    const basePath = this.app.vault.adapter.basePath;
    const pluginPath = path2.join(
      basePath,
      ".obsidian/plugins/sync-obsidian-todo-plugin"
    );
    dotenv.config({ path: path2.join(pluginPath, ".env"), override: true });
    await this.loadSettings();
    this.addSettingTab(new MyTodoSettingTab(this.app, this));
    this.registerView(VIEW_TYPE_TODO_SIDEBAR, (leaf) => {
      const view = new TaskSidebarView(leaf, this);
      this.sidebarView = view;
      return view;
    });
    this.initializeCommand();
    this.tokenFilePath = `${pluginPath}/token_cache.json`;
    if (this.settings.clientId && this.settings.clientSecret) {
      this.authManager = new AuthManager(
        this.settings.clientId,
        this.settings.clientSecret,
        this.settings.redirectUrl,
        this.tokenFilePath
      );
    }
    if (fs2.existsSync(this.tokenFilePath)) {
      const cacheData = fs2.readFileSync(this.tokenFilePath, "utf8");
      this.authManager.cca.getTokenCache().deserialize(cacheData);
      console.log("Token cache loaded from file.");
    }
    this.injectStyles();
    this.notify("Microsoft To-Do Plugin Loaded!", "info");
  }
  /**
   * Initializes the MSAL client and registers commands/ribbon icons.
   */
  initializeCommand() {
    this.addCommand({
      id: "open-microsoft-todo-sidebar",
      name: "Open Microsoft To-Do Sidebar",
      callback: async () => {
        this.activateSidebar();
      }
    });
    this.addCommand({
      id: "login-microsoft-todo",
      name: "Login to Microsoft To-Do (Interactive)",
      callback: async () => {
        try {
          this.notify("Logging in...");
          await this.authManager.getAccessToken();
          this.notify("Logged in successfully!", "success");
        } catch (error) {
          console.error("Authentication error:", error);
          this.notify(
            "Error logining in! Check the console for details.",
            "error"
          );
        }
      }
    });
    this.addCommand({
      id: "refresh-microsoft-todo-token",
      name: "Refresh Microsoft To-Do Token",
      callback: async () => {
        try {
          const tokenData = await this.authManager.refreshAccessTokenWithCCA();
          this.notify("Token refreshed successfully!", "success");
          console.log("New Access Token:", tokenData.accessToken);
        } catch (error) {
          console.error("Error refreshing token:", error);
          this.notify(
            "Error refreshing token. Check the console for details.",
            "error"
          );
        }
      }
    });
    this.addCommand({
      id: "get-tasks-from-selected-list",
      name: "Get Tasks from Selected List",
      callback: async () => {
        try {
          this.notify("Fetching tasks...");
          await this.getTasksFromSelectedList();
          this.notify("Tasks fetched successfully!", "success");
        } catch (error) {
          console.error(
            "Error fetching tasks from selected list:",
            error
          );
          this.notify(
            "Error fetching tasks. Check the console for details.",
            "error"
          );
        }
      }
    });
    this.addCommand({
      id: "push-all-tasks-from-note",
      name: "Push All Tasks from Note to Microsoft To-Do",
      callback: async () => {
        try {
          this.notify("Syncing tasks to Microsoft To-Do...");
          const tasksCount = await this.pushTasksFromNote();
          this.notify(
            `Tasks synced successfully! ${tasksCount} new tasks added.`,
            "success"
          );
          await this.refreshViewAndCache();
        } catch (error) {
          console.error("Error pushing tasks:", error);
          this.notify(
            "Error pushing tasks. Check the console for details.",
            "error"
          );
        }
      }
    });
    this.addCommand({
      id: "push-one-task",
      name: "Create and push Task",
      callback: async () => {
        new TaskTitleModal(this.app, async (taskTitle) => {
          try {
            this.notify("Pushing tasks to Microsoft To-Do...");
            await this.pushOneTask(taskTitle);
            this.notify(`Tasks pushed successfully!`, "success");
            await this.refreshViewAndCache();
          } catch (error) {
            console.error("Error pushing tasks:", error);
            this.notify(
              "Error pushing tasks. Check the console for details.",
              "error"
            );
          }
        }).open();
      }
    });
    this.addCommand({
      id: "show-not-started-tasks",
      name: "Show Tasks List",
      callback: async () => {
        try {
          await this.openTaskCompleteModal();
        } catch (error) {
          console.error("Error completing task:", error);
          this.notify(
            "Error completing task. Check the console for details.",
            "error"
          );
        }
      }
    });
    this.addCommand({
      id: "select-task-list",
      name: "Select Task List",
      callback: async () => {
        try {
          this.notify("Selecting task list...");
          await this.openTaskListsModal();
          this.notify("Task list selected successfully!", "success");
        } catch (error) {
          console.error("Error selecting task list:", error);
          this.notify(
            "Error selecting task list. Check the console for details.",
            "error"
          );
        }
      }
    });
    this.addCommand({
      id: "organize-tasks",
      name: "Organize Tasks from All Notes",
      callback: async () => {
        try {
          await this.gatherTasks();
          this.notify("Tasks organized successfully!", "success");
        } catch (error) {
          console.error("Error organizing tasks:", error);
          this.notify(
            "Error organizing tasks. Check the console for details.",
            "error"
          );
        }
      }
    });
    this.addCommand({
      id: "delete-completed-tasks",
      name: "Delete Completed Tasks",
      callback: async () => {
        try {
          this.notify("Deleting completed tasks...");
          const deletedCount = await this.deleteAllCompletedTasks();
          this.notify(
            `${deletedCount} completed tasks deleted successfully!`,
            "success"
          );
        } catch (error) {
          console.error("Error deleting completed tasks:", error);
          this.notify(
            "Error deleting tasks. Check the console for details.",
            "error"
          );
        }
      }
    });
    this.addCommand({
      id: "testing",
      name: "Testing",
      callback: async () => {
        try {
          console.log("Testing");
          this.notify("Testing...", "success");
        } catch (error) {
          console.error("Error testing:", error);
        }
      }
    });
  }
  /**
   * Injects custom CSS styles into the document.
   */
  injectStyles() {
    const style = document.createElement("style");
    style.textContent = `
		.task-line {
			display: flex;
			align-items: center;
			gap: 8px;
			padding: 2px 0;
		}

		.task-line input[type="checkbox"] {
			margin: 0;
			transform: scale(1.1);
		}

		.task-line span {
			font-size: 14px;
		}
	`;
    document.head.appendChild(style);
  }
  /**
   * Activates the sidebar view.
   */
  async activateSidebar() {
    const rightLeaf = this.app.workspace.getRightLeaf(false);
    if (!rightLeaf) {
      console.warn("No right leaf available.");
      return;
    }
    await rightLeaf.setViewState({
      type: VIEW_TYPE_TODO_SIDEBAR,
      active: true
    });
    this.app.workspace.revealLeaf(rightLeaf);
  }
  /**
   * Loads plugin settings from the Obsidian vault.
   */
  async loadSettings() {
    this.settings = Object.assign(
      {},
      DEFAULT_SETTINGS,
      await this.loadData()
    );
  }
  /**
   * Saves plugin settings to the Obsidian vault.
   */
  async saveSettings() {
    await this.saveData(this.settings);
  }
  async getAccessToken() {
    try {
      const tokenData = await this.authManager.getToken();
      return tokenData.accessToken;
    } catch (error) {
      console.error("Error fetching access token:", error);
      throw error;
    }
  }
  /**
   * Fetches available Microsoft To-Do task lists and updates the plugin settings.
   */
  async loadAvailableTaskLists() {
    this.notify("Loading task lists...");
    try {
      const accessToken = await this.getAccessToken();
      const listArray = await fetchTaskLists(accessToken);
      console.log("Fetched Task Lists:", listArray);
      this.settings.taskLists = listArray.map((list) => ({
        id: list.id,
        title: list.title
      }));
      this.notify("Task lists loaded successfully!", "success");
    } catch (err) {
      console.error("Error loading task lists:", err);
      this.notify(
        "Error loading task lists. Check the console for details.",
        "error"
      );
    }
  }
  /**
   * Get task lists using access token with fetchTaskLists api function.
   * @returns A TaskList interface with fetched task lists.
   * */
  async getTaskLists() {
    try {
      const accessToken = await this.getAccessToken();
      const taskLists = await fetchTaskLists(accessToken);
      return taskLists;
    } catch (error) {
      console.error("Error fetching task lists:", error);
      throw error;
    }
  }
  /**
   * Fetches tasks from the selected Microsoft To‑Do list.
   * @returns A map of task title to an object containing task details.
   */
  async getTasksFromSelectedList() {
    if (!this.settings.selectedTaskListId) {
      throw new Error(
        "No task list selected. Please choose one in settings."
      );
    }
    if (this.taskCache && this.taskCache.tasks) {
      console.log("Using cached tasks:", this.taskCache.tasks);
      return new Map(this.taskCache.tasks);
    }
    try {
      return await this.refreshTaskCache();
    } catch (error) {
      console.error("Error fetching tasks:", error);
      throw error;
    }
  }
  /**
   * Pushes tasks from the active note to Microsoft To‑Do.
   * @returns The number of new tasks created.
   */
  async pushTasksFromNote() {
    if (!this.settings.selectedTaskListId) {
      throw new Error(
        "No task list selected. Please choose one in settings."
      );
    }
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) {
      throw new Error("No active file found.");
    }
    const fileContent = await this.app.vault.read(activeFile);
    const taskRegex = /^-\s*\[( |x)\]\s+(.+)$/gm;
    const noteTasks = [];
    let match;
    while ((match = taskRegex.exec(fileContent)) !== null) {
      const complete = match[1] === "x";
      const title = match[2].trim();
      noteTasks.push({ title, complete });
    }
    if (noteTasks.length === 0) {
      throw new Error("No tasks found in the active note.");
    }
    try {
      const accessToken = await this.getAccessToken();
      const existingTasks = await fetchTasks(this.settings, accessToken);
      let newTasksCount = 0;
      for (const task of noteTasks) {
        const existingTask = existingTasks.get(task.title);
        if (existingTask) {
          if (task.complete && existingTask.status !== "completed") {
            await updateTask(
              this.settings,
              accessToken,
              existingTask.id,
              true
            );
          } else {
            console.log(`Task already exists: ${task.title}`);
          }
          continue;
        }
        const initialStatus = task.complete ? "completed" : "notStarted";
        await createTask(
          this.settings,
          accessToken,
          task.title,
          initialStatus
        );
        newTasksCount++;
      }
      console.log("Synced Tasks:", noteTasks);
      return newTasksCount;
    } catch (error) {
      console.error("Error syncing tasks:", error);
      throw error;
    }
  }
  /**
   * Pushes a single task to selected list in Microsoft To‑Do.
   * @param task - The task title text to push.
   */
  async pushOneTask(task) {
    if (!this.settings.selectedTaskListId) {
      throw new Error(
        "No task list selected. Please choose one in settings."
      );
    }
    try {
      const accessToken = await this.getAccessToken();
      const existingTasks = await fetchTasks(this.settings, accessToken);
      const existingTask = existingTasks.get(task);
      if (existingTask) {
        console.log(`Task already exists: ${task}`);
      }
      await createTask(this.settings, accessToken, task);
      await this.refreshViewAndCache();
      console.log("Synced Tasks:", task);
    } catch (error) {
      console.error("Error syncing tasks:", error);
      throw error;
    }
  }
  /**
   * Gathers tasks from all markdown files in the vault and updates (or creates) a consolidated note.
   * @returns A map of task text to its current state.
   */
  async gatherTasks() {
    const noteName = "Tasks List.md";
    const markdownFiles = this.app.vault.getMarkdownFiles();
    const tasksMap = /* @__PURE__ */ new Map();
    const taskRegex = /^\s*-\s*\[( |x)\]\s+(.*)$/gm;
    for (const file of markdownFiles) {
      const content = await this.app.vault.read(file);
      let match;
      while ((match = taskRegex.exec(content)) !== null) {
        const currentState = match[1] === "x" ? "[x]" : "[ ]";
        const taskText = match[2].trim();
        if (tasksMap.has(taskText)) {
          if (currentState === "[x]") {
            tasksMap.set(taskText, "[x]");
          }
        } else {
          tasksMap.set(taskText, currentState);
        }
      }
    }
    const finalTasks = Array.from(tasksMap.entries()).map(
      ([taskText, state]) => `- ${state} ${taskText}`
    );
    const newContent = finalTasks.join("\n");
    const targetFile = this.app.vault.getAbstractFileByPath(noteName);
    if (!targetFile) {
      await this.app.vault.create(noteName, newContent);
    } else if (targetFile instanceof import_obsidian6.TFile) {
      await this.app.vault.modify(targetFile, newContent);
    } else {
      throw new Error("Unexpected file type for Tasks List");
    }
    return tasksMap;
  }
  /**
   * Open a interactive window for the user to interact and select a target task list.
   */
  async openTaskListsModal() {
    const tasksLists = this.settings.taskLists;
    console.log("Task Lists:", tasksLists);
    new GenericSelectModal(
      this.app,
      tasksLists,
      (taskList) => taskList.title,
      async (taskList) => {
        this.settings.selectedTaskListId = taskList.id;
        await this.saveSettings();
        await this.refreshViewAndCache();
      }
    ).open();
  }
  /**
   * Open a interactive window for the user to interact and select to complete task items.
   */
  async openTaskCompleteModal() {
    const tasksMap = await this.getTasksFromSelectedList();
    const notStartedTasks = Array.from(tasksMap.values()).filter(
      (task) => task.status !== "completed"
    );
    new GenericSelectModal(
      this.app,
      notStartedTasks,
      (task) => task.status !== "completed" ? task.title : "",
      async (task) => {
        const accessToken = await this.getAccessToken();
        await updateTask(this.settings, accessToken, task.id, true);
        this.notify(
          `Task "${task.title}" marked as complete and synced.`,
          "success"
        );
        await this.refreshViewAndCache();
      }
    ).open();
  }
  /**
   * Fetch task using api function and store in the cache for quick access.
   */
  async refreshTaskCache() {
    if (!this.settings.selectedTaskListId) {
      throw new Error(
        "No task list selected. Please choose one in settings."
      );
    }
    try {
      const accessToken = await this.getAccessToken();
      const tasks = await fetchTasks(this.settings, accessToken);
      console.log("Fetched Tasks:", tasks);
      const currentData = await this.loadData() || {};
      currentData.tasks = Array.from(tasks.entries());
      await this.saveData(currentData);
      this.taskCache = currentData;
      return tasks;
    } catch (error) {
      console.error("Error fetching tasks:", error);
      throw error;
    }
  }
  /**
   * Use the deleteTask api function to delete all completed task in the targeted task list.
   * @returns Amount of deleted tasks.
   */
  async deleteAllCompletedTasks() {
    if (!this.settings.selectedTaskListId) {
      throw new Error(
        "No task list selected. Please choose one in settings."
      );
    }
    let deletedTasksCount = 0;
    try {
      const accessToken = await this.getAccessToken();
      const tasks = await this.getTasksFromSelectedList();
      const completedTasks = Array.from(tasks.values()).filter(
        (task) => task.status === "completed"
      );
      for (const task of completedTasks) {
        console.log("Deleting Task:", task);
        await deleteTask(this.settings, accessToken, task.id);
        deletedTasksCount++;
      }
      this.refreshViewAndCache();
      return deletedTasksCount;
    } catch (error) {
      console.error("Error deleting tasks:", error);
      return deletedTasksCount;
    }
  }
  /**
   * Refreshes the sidebar view and task cache to display the latest tasks.
   */
  async refreshViewAndCache() {
    const tasks = await this.refreshTaskCache();
    if (this.sidebarView) {
      await this.sidebarView.render(tasks);
    } else {
      console.warn("Sidebar view is not active.");
    }
  }
};
/*! Bundled license information:

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@azure/msal-node/dist/cache/serializer/Serializer.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-common/dist/utils/Constants.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/error/AuthErrorCodes.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/error/AuthError.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/error/ClientAuthErrorCodes.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/error/ClientAuthError.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/crypto/ICrypto.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/logger/Logger.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/packageMetadata.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/authority/AuthorityOptions.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/account/AuthToken.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/utils/TimeUtils.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/cache/utils/CacheHelpers.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/error/ClientConfigurationErrorCodes.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/error/ClientConfigurationError.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/utils/StringUtils.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/request/ScopeSet.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/account/ClientInfo.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/account/AccountInfo.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/authority/AuthorityType.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/account/TokenClaims.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/authority/ProtocolMode.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/cache/entities/AccountEntity.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/utils/UrlUtils.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/url/UrlString.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/authority/AuthorityMetadata.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/error/CacheErrorCodes.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/error/CacheError.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/cache/CacheManager.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/config/ClientConfiguration.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/account/CcsCredential.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/constants/AADServerParamKeys.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/request/RequestParameterBuilder.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/authority/OpenIdConfigResponse.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/authority/CloudInstanceDiscoveryResponse.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/authority/CloudInstanceDiscoveryErrorResponse.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/telemetry/performance/PerformanceEvent.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/utils/FunctionWrappers.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/authority/RegionDiscovery.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/authority/Authority.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/authority/AuthorityFactory.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/error/ServerError.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/network/RequestThumbprint.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/network/ThrottlingUtils.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/error/NetworkError.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/client/BaseClient.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/error/InteractionRequiredAuthErrorCodes.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/error/InteractionRequiredAuthError.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/utils/ProtocolUtils.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/crypto/PopTokenGenerator.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/cache/persistence/TokenCacheContext.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/response/ResponseHandler.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/request/RequestValidator.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/utils/ClientAssertionUtils.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/client/AuthorizationCodeClient.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/client/RefreshTokenClient.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/client/SilentFlowClient.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/protocol/Authorize.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/telemetry/server/ServerTelemetryManager.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-common/dist/index-node.mjs:
  (*! @azure/msal-common v15.4.0 2025-03-25 *)

@azure/msal-node/dist/cache/serializer/Deserializer.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/internals.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/utils/Constants.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/utils/NetworkUtils.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/network/HttpClient.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/error/ManagedIdentityErrorCodes.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/error/ManagedIdentityError.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/config/ManagedIdentityId.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/error/NodeAuthError.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/config/Configuration.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/crypto/GuidGenerator.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/utils/EncodingUtils.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/crypto/HashUtils.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/crypto/PkceGenerator.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/crypto/CryptoProvider.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/cache/NodeStorage.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/cache/TokenCache.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/ClientAssertion.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/packageMetadata.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/UsernamePasswordClient.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/protocol/Authorize.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/ClientApplication.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/network/LoopbackClient.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/DeviceCodeClient.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/PublicClientApplication.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/ClientCredentialClient.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/OnBehalfOfClient.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/ConfidentialClientApplication.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/utils/TimeUtils.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/network/HttpClientWithRetries.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/ManagedIdentitySources/BaseManagedIdentitySource.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/retry/LinearRetryPolicy.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/config/ManagedIdentityRequestParameters.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/ManagedIdentitySources/AppService.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/ManagedIdentitySources/AzureArc.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/ManagedIdentitySources/CloudShell.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/ManagedIdentitySources/Imds.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/ManagedIdentitySources/ServiceFabric.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/ManagedIdentitySources/MachineLearning.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/ManagedIdentityClient.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/client/ManagedIdentityApplication.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/cache/distributed/DistributedCachePlugin.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)

@azure/msal-node/dist/index.mjs:
  (*! @azure/msal-node v3.4.1 2025-03-25 *)
*/
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL2RvdGVudi9wYWNrYWdlLmpzb24iLCAibm9kZV9tb2R1bGVzL2RvdGVudi9saWIvbWFpbi5qcyIsICJub2RlX21vZHVsZXMvc2FmZS1idWZmZXIvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL2p3cy9saWIvZGF0YS1zdHJlYW0uanMiLCAibm9kZV9tb2R1bGVzL2J1ZmZlci1lcXVhbC1jb25zdGFudC10aW1lL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9lY2RzYS1zaWctZm9ybWF0dGVyL3NyYy9wYXJhbS1ieXRlcy1mb3ItYWxnLmpzIiwgIm5vZGVfbW9kdWxlcy9lY2RzYS1zaWctZm9ybWF0dGVyL3NyYy9lY2RzYS1zaWctZm9ybWF0dGVyLmpzIiwgIm5vZGVfbW9kdWxlcy9qd2EvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL2p3cy9saWIvdG9zdHJpbmcuanMiLCAibm9kZV9tb2R1bGVzL2p3cy9saWIvc2lnbi1zdHJlYW0uanMiLCAibm9kZV9tb2R1bGVzL2p3cy9saWIvdmVyaWZ5LXN0cmVhbS5qcyIsICJub2RlX21vZHVsZXMvandzL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9qc29ud2VidG9rZW4vZGVjb2RlLmpzIiwgIm5vZGVfbW9kdWxlcy9qc29ud2VidG9rZW4vbGliL0pzb25XZWJUb2tlbkVycm9yLmpzIiwgIm5vZGVfbW9kdWxlcy9qc29ud2VidG9rZW4vbGliL05vdEJlZm9yZUVycm9yLmpzIiwgIm5vZGVfbW9kdWxlcy9qc29ud2VidG9rZW4vbGliL1Rva2VuRXhwaXJlZEVycm9yLmpzIiwgIm5vZGVfbW9kdWxlcy9tcy9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvanNvbndlYnRva2VuL2xpYi90aW1lc3Bhbi5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL2ludGVybmFsL2NvbnN0YW50cy5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL2ludGVybmFsL2RlYnVnLmpzIiwgIm5vZGVfbW9kdWxlcy9zZW12ZXIvaW50ZXJuYWwvcmUuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9pbnRlcm5hbC9wYXJzZS1vcHRpb25zLmpzIiwgIm5vZGVfbW9kdWxlcy9zZW12ZXIvaW50ZXJuYWwvaWRlbnRpZmllcnMuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9jbGFzc2VzL3NlbXZlci5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL2Z1bmN0aW9ucy9wYXJzZS5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL2Z1bmN0aW9ucy92YWxpZC5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL2Z1bmN0aW9ucy9jbGVhbi5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL2Z1bmN0aW9ucy9pbmMuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9mdW5jdGlvbnMvZGlmZi5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL2Z1bmN0aW9ucy9tYWpvci5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL2Z1bmN0aW9ucy9taW5vci5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL2Z1bmN0aW9ucy9wYXRjaC5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL2Z1bmN0aW9ucy9wcmVyZWxlYXNlLmpzIiwgIm5vZGVfbW9kdWxlcy9zZW12ZXIvZnVuY3Rpb25zL2NvbXBhcmUuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9mdW5jdGlvbnMvcmNvbXBhcmUuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9mdW5jdGlvbnMvY29tcGFyZS1sb29zZS5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL2Z1bmN0aW9ucy9jb21wYXJlLWJ1aWxkLmpzIiwgIm5vZGVfbW9kdWxlcy9zZW12ZXIvZnVuY3Rpb25zL3NvcnQuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9mdW5jdGlvbnMvcnNvcnQuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9mdW5jdGlvbnMvZ3QuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9mdW5jdGlvbnMvbHQuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9mdW5jdGlvbnMvZXEuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9mdW5jdGlvbnMvbmVxLmpzIiwgIm5vZGVfbW9kdWxlcy9zZW12ZXIvZnVuY3Rpb25zL2d0ZS5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL2Z1bmN0aW9ucy9sdGUuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9mdW5jdGlvbnMvY21wLmpzIiwgIm5vZGVfbW9kdWxlcy9zZW12ZXIvZnVuY3Rpb25zL2NvZXJjZS5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL2ludGVybmFsL2xydWNhY2hlLmpzIiwgIm5vZGVfbW9kdWxlcy9zZW12ZXIvY2xhc3Nlcy9yYW5nZS5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL2NsYXNzZXMvY29tcGFyYXRvci5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL2Z1bmN0aW9ucy9zYXRpc2ZpZXMuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9yYW5nZXMvdG8tY29tcGFyYXRvcnMuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9yYW5nZXMvbWF4LXNhdGlzZnlpbmcuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9yYW5nZXMvbWluLXNhdGlzZnlpbmcuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9yYW5nZXMvbWluLXZlcnNpb24uanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9yYW5nZXMvdmFsaWQuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9yYW5nZXMvb3V0c2lkZS5qcyIsICJub2RlX21vZHVsZXMvc2VtdmVyL3Jhbmdlcy9ndHIuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9yYW5nZXMvbHRyLmpzIiwgIm5vZGVfbW9kdWxlcy9zZW12ZXIvcmFuZ2VzL2ludGVyc2VjdHMuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9yYW5nZXMvc2ltcGxpZnkuanMiLCAibm9kZV9tb2R1bGVzL3NlbXZlci9yYW5nZXMvc3Vic2V0LmpzIiwgIm5vZGVfbW9kdWxlcy9zZW12ZXIvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL2pzb253ZWJ0b2tlbi9saWIvYXN5bW1ldHJpY0tleURldGFpbHNTdXBwb3J0ZWQuanMiLCAibm9kZV9tb2R1bGVzL2pzb253ZWJ0b2tlbi9saWIvcnNhUHNzS2V5RGV0YWlsc1N1cHBvcnRlZC5qcyIsICJub2RlX21vZHVsZXMvanNvbndlYnRva2VuL2xpYi92YWxpZGF0ZUFzeW1tZXRyaWNLZXkuanMiLCAibm9kZV9tb2R1bGVzL2pzb253ZWJ0b2tlbi9saWIvcHNTdXBwb3J0ZWQuanMiLCAibm9kZV9tb2R1bGVzL2pzb253ZWJ0b2tlbi92ZXJpZnkuanMiLCAibm9kZV9tb2R1bGVzL2xvZGFzaC5pbmNsdWRlcy9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvbG9kYXNoLmlzYm9vbGVhbi9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvbG9kYXNoLmlzaW50ZWdlci9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvbG9kYXNoLmlzbnVtYmVyL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9sb2Rhc2guaXNwbGFpbm9iamVjdC9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvbG9kYXNoLmlzc3RyaW5nL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9sb2Rhc2gub25jZS9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvanNvbndlYnRva2VuL3NpZ24uanMiLCAibm9kZV9tb2R1bGVzL2pzb253ZWJ0b2tlbi9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvQGVsZWN0cm9uL3JlbW90ZS9kaXN0L3NyYy9yZW5kZXJlci9jYWxsYmFja3MtcmVnaXN0cnkuanMiLCAibm9kZV9tb2R1bGVzL0BlbGVjdHJvbi9yZW1vdGUvZGlzdC9zcmMvY29tbW9uL3R5cGUtdXRpbHMuanMiLCAibm9kZV9tb2R1bGVzL0BlbGVjdHJvbi9yZW1vdGUvZGlzdC9zcmMvY29tbW9uL2dldC1lbGVjdHJvbi1iaW5kaW5nLmpzIiwgIm5vZGVfbW9kdWxlcy9AZWxlY3Ryb24vcmVtb3RlL2Rpc3Qvc3JjL2NvbW1vbi9tb2R1bGUtbmFtZXMuanMiLCAibm9kZV9tb2R1bGVzL0BlbGVjdHJvbi9yZW1vdGUvZGlzdC9zcmMvcmVuZGVyZXIvcmVtb3RlLmpzIiwgIm5vZGVfbW9kdWxlcy9AZWxlY3Ryb24vcmVtb3RlL2Rpc3Qvc3JjL3JlbmRlcmVyL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9AZWxlY3Ryb24vcmVtb3RlL3JlbmRlcmVyL2luZGV4LmpzIiwgInNyYy9tYWluLnRzIiwgInNyYy9zZXR0aW5nLnRzIiwgInNyYy9yaWdodC1zaWRlYmFyLXZpZXcudHMiLCAic3JjL2FwaS50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtbm9kZS9zcmMvY2FjaGUvc2VyaWFsaXplci9TZXJpYWxpemVyLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL3V0aWxzL0NvbnN0YW50cy50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy9lcnJvci9BdXRoRXJyb3JDb2Rlcy50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy9lcnJvci9BdXRoRXJyb3IudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLWNvbW1vbi9zcmMvZXJyb3IvQ2xpZW50QXV0aEVycm9yQ29kZXMudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLWNvbW1vbi9zcmMvZXJyb3IvQ2xpZW50QXV0aEVycm9yLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2NyeXB0by9JQ3J5cHRvLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2xvZ2dlci9Mb2dnZXIudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLWNvbW1vbi9zcmMvcGFja2FnZU1ldGFkYXRhLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2F1dGhvcml0eS9BdXRob3JpdHlPcHRpb25zLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2FjY291bnQvQXV0aFRva2VuLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL3V0aWxzL1RpbWVVdGlscy50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy9jYWNoZS91dGlscy9DYWNoZUhlbHBlcnMudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLWNvbW1vbi9zcmMvZXJyb3IvQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLWNvbW1vbi9zcmMvZXJyb3IvQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL3V0aWxzL1N0cmluZ1V0aWxzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL3JlcXVlc3QvU2NvcGVTZXQudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLWNvbW1vbi9zcmMvYWNjb3VudC9DbGllbnRJbmZvLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2FjY291bnQvQWNjb3VudEluZm8udHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLWNvbW1vbi9zcmMvYXV0aG9yaXR5L0F1dGhvcml0eVR5cGUudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLWNvbW1vbi9zcmMvYWNjb3VudC9Ub2tlbkNsYWltcy50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy9hdXRob3JpdHkvUHJvdG9jb2xNb2RlLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2NhY2hlL2VudGl0aWVzL0FjY291bnRFbnRpdHkudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLWNvbW1vbi9zcmMvdXRpbHMvVXJsVXRpbHMudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLWNvbW1vbi9zcmMvdXJsL1VybFN0cmluZy50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy9hdXRob3JpdHkvQXV0aG9yaXR5TWV0YWRhdGEudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLWNvbW1vbi9zcmMvZXJyb3IvQ2FjaGVFcnJvckNvZGVzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2Vycm9yL0NhY2hlRXJyb3IudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLWNvbW1vbi9zcmMvY2FjaGUvQ2FjaGVNYW5hZ2VyLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2NvbmZpZy9DbGllbnRDb25maWd1cmF0aW9uLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2FjY291bnQvQ2NzQ3JlZGVudGlhbC50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy9jb25zdGFudHMvQUFEU2VydmVyUGFyYW1LZXlzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL3JlcXVlc3QvUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLWNvbW1vbi9zcmMvYXV0aG9yaXR5L09wZW5JZENvbmZpZ1Jlc3BvbnNlLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2F1dGhvcml0eS9DbG91ZEluc3RhbmNlRGlzY292ZXJ5UmVzcG9uc2UudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLWNvbW1vbi9zcmMvYXV0aG9yaXR5L0Nsb3VkSW5zdGFuY2VEaXNjb3ZlcnlFcnJvclJlc3BvbnNlLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL3RlbGVtZXRyeS9wZXJmb3JtYW5jZS9QZXJmb3JtYW5jZUV2ZW50LnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL3V0aWxzL0Z1bmN0aW9uV3JhcHBlcnMudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLWNvbW1vbi9zcmMvYXV0aG9yaXR5L1JlZ2lvbkRpc2NvdmVyeS50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy9hdXRob3JpdHkvQXV0aG9yaXR5LnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2F1dGhvcml0eS9BdXRob3JpdHlGYWN0b3J5LnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2Vycm9yL1NlcnZlckVycm9yLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL25ldHdvcmsvUmVxdWVzdFRodW1icHJpbnQudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLWNvbW1vbi9zcmMvbmV0d29yay9UaHJvdHRsaW5nVXRpbHMudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLWNvbW1vbi9zcmMvZXJyb3IvTmV0d29ya0Vycm9yLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2NsaWVudC9CYXNlQ2xpZW50LnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2Vycm9yL0ludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3JDb2Rlcy50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy9lcnJvci9JbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL3V0aWxzL1Byb3RvY29sVXRpbHMudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLWNvbW1vbi9zcmMvY3J5cHRvL1BvcFRva2VuR2VuZXJhdG9yLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2NhY2hlL3BlcnNpc3RlbmNlL1Rva2VuQ2FjaGVDb250ZXh0LnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL3Jlc3BvbnNlL1Jlc3BvbnNlSGFuZGxlci50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtY29tbW9uL3NyYy9yZXF1ZXN0L1JlcXVlc3RWYWxpZGF0b3IudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLWNvbW1vbi9zcmMvdXRpbHMvQ2xpZW50QXNzZXJ0aW9uVXRpbHMudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLWNvbW1vbi9zcmMvY2xpZW50L0F1dGhvcml6YXRpb25Db2RlQ2xpZW50LnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL2NsaWVudC9SZWZyZXNoVG9rZW5DbGllbnQudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLWNvbW1vbi9zcmMvY2xpZW50L1NpbGVudEZsb3dDbGllbnQudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLWNvbW1vbi9zcmMvcHJvdG9jb2wvQXV0aG9yaXplLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1jb21tb24vc3JjL3RlbGVtZXRyeS9zZXJ2ZXIvU2VydmVyVGVsZW1ldHJ5TWFuYWdlci50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtbm9kZS9zcmMvY2FjaGUvc2VyaWFsaXplci9EZXNlcmlhbGl6ZXIudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLW5vZGUvc3JjL3V0aWxzL0NvbnN0YW50cy50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtbm9kZS9zcmMvdXRpbHMvTmV0d29ya1V0aWxzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1ub2RlL3NyYy9uZXR3b3JrL0h0dHBDbGllbnQudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLW5vZGUvc3JjL2Vycm9yL01hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLW5vZGUvc3JjL2Vycm9yL01hbmFnZWRJZGVudGl0eUVycm9yLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1ub2RlL3NyYy9lcnJvci9Ob2RlQXV0aEVycm9yLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1ub2RlL3NyYy9jb25maWcvQ29uZmlndXJhdGlvbi50cyIsICJub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3JuZy5qcyIsICJub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3JlZ2V4LmpzIiwgIm5vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvdmFsaWRhdGUuanMiLCAibm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9zdHJpbmdpZnkuanMiLCAibm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci92NC5qcyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtbm9kZS9zcmMvY3J5cHRvL0d1aWRHZW5lcmF0b3IudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLW5vZGUvc3JjL3V0aWxzL0VuY29kaW5nVXRpbHMudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLW5vZGUvc3JjL2NyeXB0by9IYXNoVXRpbHMudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLW5vZGUvc3JjL2NyeXB0by9Qa2NlR2VuZXJhdG9yLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1ub2RlL3NyYy9jcnlwdG8vQ3J5cHRvUHJvdmlkZXIudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLW5vZGUvc3JjL2NhY2hlL05vZGVTdG9yYWdlLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1ub2RlL3NyYy9jYWNoZS9Ub2tlbkNhY2hlLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1ub2RlL3NyYy9jbGllbnQvQ2xpZW50QXNzZXJ0aW9uLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1ub2RlL3NyYy9wYWNrYWdlTWV0YWRhdGEudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLW5vZGUvc3JjL2NsaWVudC9Vc2VybmFtZVBhc3N3b3JkQ2xpZW50LnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1ub2RlL3NyYy9wcm90b2NvbC9BdXRob3JpemUudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLW5vZGUvc3JjL2NsaWVudC9DbGllbnRBcHBsaWNhdGlvbi50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtbm9kZS9zcmMvY2xpZW50L0NsaWVudENyZWRlbnRpYWxDbGllbnQudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLW5vZGUvc3JjL2NsaWVudC9PbkJlaGFsZk9mQ2xpZW50LnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1ub2RlL3NyYy9jbGllbnQvQ29uZmlkZW50aWFsQ2xpZW50QXBwbGljYXRpb24udHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLW5vZGUvc3JjL3V0aWxzL1RpbWVVdGlscy50cyIsICJub2RlX21vZHVsZXMvQGF6dXJlL21zYWwtbm9kZS9zcmMvbmV0d29yay9IdHRwQ2xpZW50V2l0aFJldHJpZXMudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLW5vZGUvc3JjL2NsaWVudC9NYW5hZ2VkSWRlbnRpdHlTb3VyY2VzL0Jhc2VNYW5hZ2VkSWRlbnRpdHlTb3VyY2UudHMiLCAibm9kZV9tb2R1bGVzL0BhenVyZS9tc2FsLW5vZGUvc3JjL2NsaWVudC9NYW5hZ2VkSWRlbnRpdHlTb3VyY2VzL0F6dXJlQXJjLnRzIiwgIm5vZGVfbW9kdWxlcy9AYXp1cmUvbXNhbC1ub2RlL3NyYy9jbGllbnQvTWFuYWdlZElkZW50aXR5U291cmNlcy9JbWRzLnRzIiwgInNyYy9hdXRoLnRzIiwgInNyYy90YXNrLXRpdGxlLW1vZGFsLnRzIiwgInNyYy9zZWxlY3QtbW9kYWwudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIntcbiAgXCJuYW1lXCI6IFwiZG90ZW52XCIsXG4gIFwidmVyc2lvblwiOiBcIjE2LjQuN1wiLFxuICBcImRlc2NyaXB0aW9uXCI6IFwiTG9hZHMgZW52aXJvbm1lbnQgdmFyaWFibGVzIGZyb20gLmVudiBmaWxlXCIsXG4gIFwibWFpblwiOiBcImxpYi9tYWluLmpzXCIsXG4gIFwidHlwZXNcIjogXCJsaWIvbWFpbi5kLnRzXCIsXG4gIFwiZXhwb3J0c1wiOiB7XG4gICAgXCIuXCI6IHtcbiAgICAgIFwidHlwZXNcIjogXCIuL2xpYi9tYWluLmQudHNcIixcbiAgICAgIFwicmVxdWlyZVwiOiBcIi4vbGliL21haW4uanNcIixcbiAgICAgIFwiZGVmYXVsdFwiOiBcIi4vbGliL21haW4uanNcIlxuICAgIH0sXG4gICAgXCIuL2NvbmZpZ1wiOiBcIi4vY29uZmlnLmpzXCIsXG4gICAgXCIuL2NvbmZpZy5qc1wiOiBcIi4vY29uZmlnLmpzXCIsXG4gICAgXCIuL2xpYi9lbnYtb3B0aW9uc1wiOiBcIi4vbGliL2Vudi1vcHRpb25zLmpzXCIsXG4gICAgXCIuL2xpYi9lbnYtb3B0aW9ucy5qc1wiOiBcIi4vbGliL2Vudi1vcHRpb25zLmpzXCIsXG4gICAgXCIuL2xpYi9jbGktb3B0aW9uc1wiOiBcIi4vbGliL2NsaS1vcHRpb25zLmpzXCIsXG4gICAgXCIuL2xpYi9jbGktb3B0aW9ucy5qc1wiOiBcIi4vbGliL2NsaS1vcHRpb25zLmpzXCIsXG4gICAgXCIuL3BhY2thZ2UuanNvblwiOiBcIi4vcGFja2FnZS5qc29uXCJcbiAgfSxcbiAgXCJzY3JpcHRzXCI6IHtcbiAgICBcImR0cy1jaGVja1wiOiBcInRzYyAtLXByb2plY3QgdGVzdHMvdHlwZXMvdHNjb25maWcuanNvblwiLFxuICAgIFwibGludFwiOiBcInN0YW5kYXJkXCIsXG4gICAgXCJwcmV0ZXN0XCI6IFwibnBtIHJ1biBsaW50ICYmIG5wbSBydW4gZHRzLWNoZWNrXCIsXG4gICAgXCJ0ZXN0XCI6IFwidGFwIHJ1biAtLWFsbG93LWVtcHR5LWNvdmVyYWdlIC0tZGlzYWJsZS1jb3ZlcmFnZSAtLXRpbWVvdXQ9NjAwMDBcIixcbiAgICBcInRlc3Q6Y292ZXJhZ2VcIjogXCJ0YXAgcnVuIC0tc2hvdy1mdWxsLWNvdmVyYWdlIC0tdGltZW91dD02MDAwMCAtLWNvdmVyYWdlLXJlcG9ydD1sY292XCIsXG4gICAgXCJwcmVyZWxlYXNlXCI6IFwibnBtIHRlc3RcIixcbiAgICBcInJlbGVhc2VcIjogXCJzdGFuZGFyZC12ZXJzaW9uXCJcbiAgfSxcbiAgXCJyZXBvc2l0b3J5XCI6IHtcbiAgICBcInR5cGVcIjogXCJnaXRcIixcbiAgICBcInVybFwiOiBcImdpdDovL2dpdGh1Yi5jb20vbW90ZG90bGEvZG90ZW52LmdpdFwiXG4gIH0sXG4gIFwiZnVuZGluZ1wiOiBcImh0dHBzOi8vZG90ZW52eC5jb21cIixcbiAgXCJrZXl3b3Jkc1wiOiBbXG4gICAgXCJkb3RlbnZcIixcbiAgICBcImVudlwiLFxuICAgIFwiLmVudlwiLFxuICAgIFwiZW52aXJvbm1lbnRcIixcbiAgICBcInZhcmlhYmxlc1wiLFxuICAgIFwiY29uZmlnXCIsXG4gICAgXCJzZXR0aW5nc1wiXG4gIF0sXG4gIFwicmVhZG1lRmlsZW5hbWVcIjogXCJSRUFETUUubWRcIixcbiAgXCJsaWNlbnNlXCI6IFwiQlNELTItQ2xhdXNlXCIsXG4gIFwiZGV2RGVwZW5kZW5jaWVzXCI6IHtcbiAgICBcIkB0eXBlcy9ub2RlXCI6IFwiXjE4LjExLjNcIixcbiAgICBcImRlY2FjaGVcIjogXCJeNC42LjJcIixcbiAgICBcInNpbm9uXCI6IFwiXjE0LjAuMVwiLFxuICAgIFwic3RhbmRhcmRcIjogXCJeMTcuMC4wXCIsXG4gICAgXCJzdGFuZGFyZC12ZXJzaW9uXCI6IFwiXjkuNS4wXCIsXG4gICAgXCJ0YXBcIjogXCJeMTkuMi4wXCIsXG4gICAgXCJ0eXBlc2NyaXB0XCI6IFwiXjQuOC40XCJcbiAgfSxcbiAgXCJlbmdpbmVzXCI6IHtcbiAgICBcIm5vZGVcIjogXCI+PTEyXCJcbiAgfSxcbiAgXCJicm93c2VyXCI6IHtcbiAgICBcImZzXCI6IGZhbHNlXG4gIH1cbn1cbiIsICJjb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJylcbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJylcbmNvbnN0IG9zID0gcmVxdWlyZSgnb3MnKVxuY29uc3QgY3J5cHRvID0gcmVxdWlyZSgnY3J5cHRvJylcbmNvbnN0IHBhY2thZ2VKc29uID0gcmVxdWlyZSgnLi4vcGFja2FnZS5qc29uJylcblxuY29uc3QgdmVyc2lvbiA9IHBhY2thZ2VKc29uLnZlcnNpb25cblxuY29uc3QgTElORSA9IC8oPzpefF4pXFxzKig/OmV4cG9ydFxccyspPyhbXFx3Li1dKykoPzpcXHMqPVxccyo/fDpcXHMrPykoXFxzKicoPzpcXFxcJ3xbXiddKSonfFxccypcIig/OlxcXFxcInxbXlwiXSkqXCJ8XFxzKmAoPzpcXFxcYHxbXmBdKSpgfFteI1xcclxcbl0rKT9cXHMqKD86Iy4qKT8oPzokfCQpL21nXG5cbi8vIFBhcnNlIHNyYyBpbnRvIGFuIE9iamVjdFxuZnVuY3Rpb24gcGFyc2UgKHNyYykge1xuICBjb25zdCBvYmogPSB7fVxuXG4gIC8vIENvbnZlcnQgYnVmZmVyIHRvIHN0cmluZ1xuICBsZXQgbGluZXMgPSBzcmMudG9TdHJpbmcoKVxuXG4gIC8vIENvbnZlcnQgbGluZSBicmVha3MgdG8gc2FtZSBmb3JtYXRcbiAgbGluZXMgPSBsaW5lcy5yZXBsYWNlKC9cXHJcXG4/L21nLCAnXFxuJylcblxuICBsZXQgbWF0Y2hcbiAgd2hpbGUgKChtYXRjaCA9IExJTkUuZXhlYyhsaW5lcykpICE9IG51bGwpIHtcbiAgICBjb25zdCBrZXkgPSBtYXRjaFsxXVxuXG4gICAgLy8gRGVmYXVsdCB1bmRlZmluZWQgb3IgbnVsbCB0byBlbXB0eSBzdHJpbmdcbiAgICBsZXQgdmFsdWUgPSAobWF0Y2hbMl0gfHwgJycpXG5cbiAgICAvLyBSZW1vdmUgd2hpdGVzcGFjZVxuICAgIHZhbHVlID0gdmFsdWUudHJpbSgpXG5cbiAgICAvLyBDaGVjayBpZiBkb3VibGUgcXVvdGVkXG4gICAgY29uc3QgbWF5YmVRdW90ZSA9IHZhbHVlWzBdXG5cbiAgICAvLyBSZW1vdmUgc3Vycm91bmRpbmcgcXVvdGVzXG4gICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9eKFsnXCJgXSkoW1xcc1xcU10qKVxcMSQvbWcsICckMicpXG5cbiAgICAvLyBFeHBhbmQgbmV3bGluZXMgaWYgZG91YmxlIHF1b3RlZFxuICAgIGlmIChtYXliZVF1b3RlID09PSAnXCInKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL1xcXFxuL2csICdcXG4nKVxuICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9cXFxcci9nLCAnXFxyJylcbiAgICB9XG5cbiAgICAvLyBBZGQgdG8gb2JqZWN0XG4gICAgb2JqW2tleV0gPSB2YWx1ZVxuICB9XG5cbiAgcmV0dXJuIG9ialxufVxuXG5mdW5jdGlvbiBfcGFyc2VWYXVsdCAob3B0aW9ucykge1xuICBjb25zdCB2YXVsdFBhdGggPSBfdmF1bHRQYXRoKG9wdGlvbnMpXG5cbiAgLy8gUGFyc2UgLmVudi52YXVsdFxuICBjb25zdCByZXN1bHQgPSBEb3RlbnZNb2R1bGUuY29uZmlnRG90ZW52KHsgcGF0aDogdmF1bHRQYXRoIH0pXG4gIGlmICghcmVzdWx0LnBhcnNlZCkge1xuICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcihgTUlTU0lOR19EQVRBOiBDYW5ub3QgcGFyc2UgJHt2YXVsdFBhdGh9IGZvciBhbiB1bmtub3duIHJlYXNvbmApXG4gICAgZXJyLmNvZGUgPSAnTUlTU0lOR19EQVRBJ1xuICAgIHRocm93IGVyclxuICB9XG5cbiAgLy8gaGFuZGxlIHNjZW5hcmlvIGZvciBjb21tYSBzZXBhcmF0ZWQga2V5cyAtIGZvciB1c2Ugd2l0aCBrZXkgcm90YXRpb25cbiAgLy8gZXhhbXBsZTogRE9URU5WX0tFWT1cImRvdGVudjovLzprZXlfMTIzNEBkb3RlbnZ4LmNvbS92YXVsdC8uZW52LnZhdWx0P2Vudmlyb25tZW50PXByb2QsZG90ZW52Oi8vOmtleV83ODkwQGRvdGVudnguY29tL3ZhdWx0Ly5lbnYudmF1bHQ/ZW52aXJvbm1lbnQ9cHJvZFwiXG4gIGNvbnN0IGtleXMgPSBfZG90ZW52S2V5KG9wdGlvbnMpLnNwbGl0KCcsJylcbiAgY29uc3QgbGVuZ3RoID0ga2V5cy5sZW5ndGhcblxuICBsZXQgZGVjcnlwdGVkXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICB0cnkge1xuICAgICAgLy8gR2V0IGZ1bGwga2V5XG4gICAgICBjb25zdCBrZXkgPSBrZXlzW2ldLnRyaW0oKVxuXG4gICAgICAvLyBHZXQgaW5zdHJ1Y3Rpb25zIGZvciBkZWNyeXB0XG4gICAgICBjb25zdCBhdHRycyA9IF9pbnN0cnVjdGlvbnMocmVzdWx0LCBrZXkpXG5cbiAgICAgIC8vIERlY3J5cHRcbiAgICAgIGRlY3J5cHRlZCA9IERvdGVudk1vZHVsZS5kZWNyeXB0KGF0dHJzLmNpcGhlcnRleHQsIGF0dHJzLmtleSlcblxuICAgICAgYnJlYWtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gbGFzdCBrZXlcbiAgICAgIGlmIChpICsgMSA+PSBsZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgZXJyb3JcbiAgICAgIH1cbiAgICAgIC8vIHRyeSBuZXh0IGtleVxuICAgIH1cbiAgfVxuXG4gIC8vIFBhcnNlIGRlY3J5cHRlZCAuZW52IHN0cmluZ1xuICByZXR1cm4gRG90ZW52TW9kdWxlLnBhcnNlKGRlY3J5cHRlZClcbn1cblxuZnVuY3Rpb24gX2xvZyAobWVzc2FnZSkge1xuICBjb25zb2xlLmxvZyhgW2RvdGVudkAke3ZlcnNpb259XVtJTkZPXSAke21lc3NhZ2V9YClcbn1cblxuZnVuY3Rpb24gX3dhcm4gKG1lc3NhZ2UpIHtcbiAgY29uc29sZS5sb2coYFtkb3RlbnZAJHt2ZXJzaW9ufV1bV0FSTl0gJHttZXNzYWdlfWApXG59XG5cbmZ1bmN0aW9uIF9kZWJ1ZyAobWVzc2FnZSkge1xuICBjb25zb2xlLmxvZyhgW2RvdGVudkAke3ZlcnNpb259XVtERUJVR10gJHttZXNzYWdlfWApXG59XG5cbmZ1bmN0aW9uIF9kb3RlbnZLZXkgKG9wdGlvbnMpIHtcbiAgLy8gcHJpb3JpdGl6ZSBkZXZlbG9wZXIgZGlyZWN0bHkgc2V0dGluZyBvcHRpb25zLkRPVEVOVl9LRVlcbiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5ET1RFTlZfS0VZICYmIG9wdGlvbnMuRE9URU5WX0tFWS5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIG9wdGlvbnMuRE9URU5WX0tFWVxuICB9XG5cbiAgLy8gc2Vjb25kYXJ5IGluZnJhIGFscmVhZHkgY29udGFpbnMgYSBET1RFTlZfS0VZIGVudmlyb25tZW50IHZhcmlhYmxlXG4gIGlmIChwcm9jZXNzLmVudi5ET1RFTlZfS0VZICYmIHByb2Nlc3MuZW52LkRPVEVOVl9LRVkubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBwcm9jZXNzLmVudi5ET1RFTlZfS0VZXG4gIH1cblxuICAvLyBmYWxsYmFjayB0byBlbXB0eSBzdHJpbmdcbiAgcmV0dXJuICcnXG59XG5cbmZ1bmN0aW9uIF9pbnN0cnVjdGlvbnMgKHJlc3VsdCwgZG90ZW52S2V5KSB7XG4gIC8vIFBhcnNlIERPVEVOVl9LRVkuIEZvcm1hdCBpcyBhIFVSSVxuICBsZXQgdXJpXG4gIHRyeSB7XG4gICAgdXJpID0gbmV3IFVSTChkb3RlbnZLZXkpXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaWYgKGVycm9yLmNvZGUgPT09ICdFUlJfSU5WQUxJRF9VUkwnKSB7XG4gICAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoJ0lOVkFMSURfRE9URU5WX0tFWTogV3JvbmcgZm9ybWF0LiBNdXN0IGJlIGluIHZhbGlkIHVyaSBmb3JtYXQgbGlrZSBkb3RlbnY6Ly86a2V5XzEyMzRAZG90ZW52eC5jb20vdmF1bHQvLmVudi52YXVsdD9lbnZpcm9ubWVudD1kZXZlbG9wbWVudCcpXG4gICAgICBlcnIuY29kZSA9ICdJTlZBTElEX0RPVEVOVl9LRVknXG4gICAgICB0aHJvdyBlcnJcbiAgICB9XG5cbiAgICB0aHJvdyBlcnJvclxuICB9XG5cbiAgLy8gR2V0IGRlY3J5cHQga2V5XG4gIGNvbnN0IGtleSA9IHVyaS5wYXNzd29yZFxuICBpZiAoIWtleSkge1xuICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcignSU5WQUxJRF9ET1RFTlZfS0VZOiBNaXNzaW5nIGtleSBwYXJ0JylcbiAgICBlcnIuY29kZSA9ICdJTlZBTElEX0RPVEVOVl9LRVknXG4gICAgdGhyb3cgZXJyXG4gIH1cblxuICAvLyBHZXQgZW52aXJvbm1lbnRcbiAgY29uc3QgZW52aXJvbm1lbnQgPSB1cmkuc2VhcmNoUGFyYW1zLmdldCgnZW52aXJvbm1lbnQnKVxuICBpZiAoIWVudmlyb25tZW50KSB7XG4gICAgY29uc3QgZXJyID0gbmV3IEVycm9yKCdJTlZBTElEX0RPVEVOVl9LRVk6IE1pc3NpbmcgZW52aXJvbm1lbnQgcGFydCcpXG4gICAgZXJyLmNvZGUgPSAnSU5WQUxJRF9ET1RFTlZfS0VZJ1xuICAgIHRocm93IGVyclxuICB9XG5cbiAgLy8gR2V0IGNpcGhlcnRleHQgcGF5bG9hZFxuICBjb25zdCBlbnZpcm9ubWVudEtleSA9IGBET1RFTlZfVkFVTFRfJHtlbnZpcm9ubWVudC50b1VwcGVyQ2FzZSgpfWBcbiAgY29uc3QgY2lwaGVydGV4dCA9IHJlc3VsdC5wYXJzZWRbZW52aXJvbm1lbnRLZXldIC8vIERPVEVOVl9WQVVMVF9QUk9EVUNUSU9OXG4gIGlmICghY2lwaGVydGV4dCkge1xuICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcihgTk9UX0ZPVU5EX0RPVEVOVl9FTlZJUk9OTUVOVDogQ2Fubm90IGxvY2F0ZSBlbnZpcm9ubWVudCAke2Vudmlyb25tZW50S2V5fSBpbiB5b3VyIC5lbnYudmF1bHQgZmlsZS5gKVxuICAgIGVyci5jb2RlID0gJ05PVF9GT1VORF9ET1RFTlZfRU5WSVJPTk1FTlQnXG4gICAgdGhyb3cgZXJyXG4gIH1cblxuICByZXR1cm4geyBjaXBoZXJ0ZXh0LCBrZXkgfVxufVxuXG5mdW5jdGlvbiBfdmF1bHRQYXRoIChvcHRpb25zKSB7XG4gIGxldCBwb3NzaWJsZVZhdWx0UGF0aCA9IG51bGxcblxuICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnBhdGggJiYgb3B0aW9ucy5wYXRoLmxlbmd0aCA+IDApIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zLnBhdGgpKSB7XG4gICAgICBmb3IgKGNvbnN0IGZpbGVwYXRoIG9mIG9wdGlvbnMucGF0aCkge1xuICAgICAgICBpZiAoZnMuZXhpc3RzU3luYyhmaWxlcGF0aCkpIHtcbiAgICAgICAgICBwb3NzaWJsZVZhdWx0UGF0aCA9IGZpbGVwYXRoLmVuZHNXaXRoKCcudmF1bHQnKSA/IGZpbGVwYXRoIDogYCR7ZmlsZXBhdGh9LnZhdWx0YFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHBvc3NpYmxlVmF1bHRQYXRoID0gb3B0aW9ucy5wYXRoLmVuZHNXaXRoKCcudmF1bHQnKSA/IG9wdGlvbnMucGF0aCA6IGAke29wdGlvbnMucGF0aH0udmF1bHRgXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHBvc3NpYmxlVmF1bHRQYXRoID0gcGF0aC5yZXNvbHZlKHByb2Nlc3MuY3dkKCksICcuZW52LnZhdWx0JylcbiAgfVxuXG4gIGlmIChmcy5leGlzdHNTeW5jKHBvc3NpYmxlVmF1bHRQYXRoKSkge1xuICAgIHJldHVybiBwb3NzaWJsZVZhdWx0UGF0aFxuICB9XG5cbiAgcmV0dXJuIG51bGxcbn1cblxuZnVuY3Rpb24gX3Jlc29sdmVIb21lIChlbnZQYXRoKSB7XG4gIHJldHVybiBlbnZQYXRoWzBdID09PSAnficgPyBwYXRoLmpvaW4ob3MuaG9tZWRpcigpLCBlbnZQYXRoLnNsaWNlKDEpKSA6IGVudlBhdGhcbn1cblxuZnVuY3Rpb24gX2NvbmZpZ1ZhdWx0IChvcHRpb25zKSB7XG4gIF9sb2coJ0xvYWRpbmcgZW52IGZyb20gZW5jcnlwdGVkIC5lbnYudmF1bHQnKVxuXG4gIGNvbnN0IHBhcnNlZCA9IERvdGVudk1vZHVsZS5fcGFyc2VWYXVsdChvcHRpb25zKVxuXG4gIGxldCBwcm9jZXNzRW52ID0gcHJvY2Vzcy5lbnZcbiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5wcm9jZXNzRW52ICE9IG51bGwpIHtcbiAgICBwcm9jZXNzRW52ID0gb3B0aW9ucy5wcm9jZXNzRW52XG4gIH1cblxuICBEb3RlbnZNb2R1bGUucG9wdWxhdGUocHJvY2Vzc0VudiwgcGFyc2VkLCBvcHRpb25zKVxuXG4gIHJldHVybiB7IHBhcnNlZCB9XG59XG5cbmZ1bmN0aW9uIGNvbmZpZ0RvdGVudiAob3B0aW9ucykge1xuICBjb25zdCBkb3RlbnZQYXRoID0gcGF0aC5yZXNvbHZlKHByb2Nlc3MuY3dkKCksICcuZW52JylcbiAgbGV0IGVuY29kaW5nID0gJ3V0ZjgnXG4gIGNvbnN0IGRlYnVnID0gQm9vbGVhbihvcHRpb25zICYmIG9wdGlvbnMuZGVidWcpXG5cbiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5lbmNvZGluZykge1xuICAgIGVuY29kaW5nID0gb3B0aW9ucy5lbmNvZGluZ1xuICB9IGVsc2Uge1xuICAgIGlmIChkZWJ1Zykge1xuICAgICAgX2RlYnVnKCdObyBlbmNvZGluZyBpcyBzcGVjaWZpZWQuIFVURi04IGlzIHVzZWQgYnkgZGVmYXVsdCcpXG4gICAgfVxuICB9XG5cbiAgbGV0IG9wdGlvblBhdGhzID0gW2RvdGVudlBhdGhdIC8vIGRlZmF1bHQsIGxvb2sgZm9yIC5lbnZcbiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5wYXRoKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KG9wdGlvbnMucGF0aCkpIHtcbiAgICAgIG9wdGlvblBhdGhzID0gW19yZXNvbHZlSG9tZShvcHRpb25zLnBhdGgpXVxuICAgIH0gZWxzZSB7XG4gICAgICBvcHRpb25QYXRocyA9IFtdIC8vIHJlc2V0IGRlZmF1bHRcbiAgICAgIGZvciAoY29uc3QgZmlsZXBhdGggb2Ygb3B0aW9ucy5wYXRoKSB7XG4gICAgICAgIG9wdGlvblBhdGhzLnB1c2goX3Jlc29sdmVIb21lKGZpbGVwYXRoKSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBCdWlsZCB0aGUgcGFyc2VkIGRhdGEgaW4gYSB0ZW1wb3Jhcnkgb2JqZWN0IChiZWNhdXNlIHdlIG5lZWQgdG8gcmV0dXJuIGl0KS4gIE9uY2Ugd2UgaGF2ZSB0aGUgZmluYWxcbiAgLy8gcGFyc2VkIGRhdGEsIHdlIHdpbGwgY29tYmluZSBpdCB3aXRoIHByb2Nlc3MuZW52IChvciBvcHRpb25zLnByb2Nlc3NFbnYgaWYgcHJvdmlkZWQpLlxuICBsZXQgbGFzdEVycm9yXG4gIGNvbnN0IHBhcnNlZEFsbCA9IHt9XG4gIGZvciAoY29uc3QgcGF0aCBvZiBvcHRpb25QYXRocykge1xuICAgIHRyeSB7XG4gICAgICAvLyBTcGVjaWZ5aW5nIGFuIGVuY29kaW5nIHJldHVybnMgYSBzdHJpbmcgaW5zdGVhZCBvZiBhIGJ1ZmZlclxuICAgICAgY29uc3QgcGFyc2VkID0gRG90ZW52TW9kdWxlLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhwYXRoLCB7IGVuY29kaW5nIH0pKVxuXG4gICAgICBEb3RlbnZNb2R1bGUucG9wdWxhdGUocGFyc2VkQWxsLCBwYXJzZWQsIG9wdGlvbnMpXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKGRlYnVnKSB7XG4gICAgICAgIF9kZWJ1ZyhgRmFpbGVkIHRvIGxvYWQgJHtwYXRofSAke2UubWVzc2FnZX1gKVxuICAgICAgfVxuICAgICAgbGFzdEVycm9yID0gZVxuICAgIH1cbiAgfVxuXG4gIGxldCBwcm9jZXNzRW52ID0gcHJvY2Vzcy5lbnZcbiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5wcm9jZXNzRW52ICE9IG51bGwpIHtcbiAgICBwcm9jZXNzRW52ID0gb3B0aW9ucy5wcm9jZXNzRW52XG4gIH1cblxuICBEb3RlbnZNb2R1bGUucG9wdWxhdGUocHJvY2Vzc0VudiwgcGFyc2VkQWxsLCBvcHRpb25zKVxuXG4gIGlmIChsYXN0RXJyb3IpIHtcbiAgICByZXR1cm4geyBwYXJzZWQ6IHBhcnNlZEFsbCwgZXJyb3I6IGxhc3RFcnJvciB9XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHsgcGFyc2VkOiBwYXJzZWRBbGwgfVxuICB9XG59XG5cbi8vIFBvcHVsYXRlcyBwcm9jZXNzLmVudiBmcm9tIC5lbnYgZmlsZVxuZnVuY3Rpb24gY29uZmlnIChvcHRpb25zKSB7XG4gIC8vIGZhbGxiYWNrIHRvIG9yaWdpbmFsIGRvdGVudiBpZiBET1RFTlZfS0VZIGlzIG5vdCBzZXRcbiAgaWYgKF9kb3RlbnZLZXkob3B0aW9ucykubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIERvdGVudk1vZHVsZS5jb25maWdEb3RlbnYob3B0aW9ucylcbiAgfVxuXG4gIGNvbnN0IHZhdWx0UGF0aCA9IF92YXVsdFBhdGgob3B0aW9ucylcblxuICAvLyBkb3RlbnZLZXkgZXhpc3RzIGJ1dCAuZW52LnZhdWx0IGZpbGUgZG9lcyBub3QgZXhpc3RcbiAgaWYgKCF2YXVsdFBhdGgpIHtcbiAgICBfd2FybihgWW91IHNldCBET1RFTlZfS0VZIGJ1dCB5b3UgYXJlIG1pc3NpbmcgYSAuZW52LnZhdWx0IGZpbGUgYXQgJHt2YXVsdFBhdGh9LiBEaWQgeW91IGZvcmdldCB0byBidWlsZCBpdD9gKVxuXG4gICAgcmV0dXJuIERvdGVudk1vZHVsZS5jb25maWdEb3RlbnYob3B0aW9ucylcbiAgfVxuXG4gIHJldHVybiBEb3RlbnZNb2R1bGUuX2NvbmZpZ1ZhdWx0KG9wdGlvbnMpXG59XG5cbmZ1bmN0aW9uIGRlY3J5cHQgKGVuY3J5cHRlZCwga2V5U3RyKSB7XG4gIGNvbnN0IGtleSA9IEJ1ZmZlci5mcm9tKGtleVN0ci5zbGljZSgtNjQpLCAnaGV4JylcbiAgbGV0IGNpcGhlcnRleHQgPSBCdWZmZXIuZnJvbShlbmNyeXB0ZWQsICdiYXNlNjQnKVxuXG4gIGNvbnN0IG5vbmNlID0gY2lwaGVydGV4dC5zdWJhcnJheSgwLCAxMilcbiAgY29uc3QgYXV0aFRhZyA9IGNpcGhlcnRleHQuc3ViYXJyYXkoLTE2KVxuICBjaXBoZXJ0ZXh0ID0gY2lwaGVydGV4dC5zdWJhcnJheSgxMiwgLTE2KVxuXG4gIHRyeSB7XG4gICAgY29uc3QgYWVzZ2NtID0gY3J5cHRvLmNyZWF0ZURlY2lwaGVyaXYoJ2Flcy0yNTYtZ2NtJywga2V5LCBub25jZSlcbiAgICBhZXNnY20uc2V0QXV0aFRhZyhhdXRoVGFnKVxuICAgIHJldHVybiBgJHthZXNnY20udXBkYXRlKGNpcGhlcnRleHQpfSR7YWVzZ2NtLmZpbmFsKCl9YFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnN0IGlzUmFuZ2UgPSBlcnJvciBpbnN0YW5jZW9mIFJhbmdlRXJyb3JcbiAgICBjb25zdCBpbnZhbGlkS2V5TGVuZ3RoID0gZXJyb3IubWVzc2FnZSA9PT0gJ0ludmFsaWQga2V5IGxlbmd0aCdcbiAgICBjb25zdCBkZWNyeXB0aW9uRmFpbGVkID0gZXJyb3IubWVzc2FnZSA9PT0gJ1Vuc3VwcG9ydGVkIHN0YXRlIG9yIHVuYWJsZSB0byBhdXRoZW50aWNhdGUgZGF0YSdcblxuICAgIGlmIChpc1JhbmdlIHx8IGludmFsaWRLZXlMZW5ndGgpIHtcbiAgICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcignSU5WQUxJRF9ET1RFTlZfS0VZOiBJdCBtdXN0IGJlIDY0IGNoYXJhY3RlcnMgbG9uZyAob3IgbW9yZSknKVxuICAgICAgZXJyLmNvZGUgPSAnSU5WQUxJRF9ET1RFTlZfS0VZJ1xuICAgICAgdGhyb3cgZXJyXG4gICAgfSBlbHNlIGlmIChkZWNyeXB0aW9uRmFpbGVkKSB7XG4gICAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoJ0RFQ1JZUFRJT05fRkFJTEVEOiBQbGVhc2UgY2hlY2sgeW91ciBET1RFTlZfS0VZJylcbiAgICAgIGVyci5jb2RlID0gJ0RFQ1JZUFRJT05fRkFJTEVEJ1xuICAgICAgdGhyb3cgZXJyXG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG59XG5cbi8vIFBvcHVsYXRlIHByb2Nlc3MuZW52IHdpdGggcGFyc2VkIHZhbHVlc1xuZnVuY3Rpb24gcG9wdWxhdGUgKHByb2Nlc3NFbnYsIHBhcnNlZCwgb3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IGRlYnVnID0gQm9vbGVhbihvcHRpb25zICYmIG9wdGlvbnMuZGVidWcpXG4gIGNvbnN0IG92ZXJyaWRlID0gQm9vbGVhbihvcHRpb25zICYmIG9wdGlvbnMub3ZlcnJpZGUpXG5cbiAgaWYgKHR5cGVvZiBwYXJzZWQgIT09ICdvYmplY3QnKSB7XG4gICAgY29uc3QgZXJyID0gbmV3IEVycm9yKCdPQkpFQ1RfUkVRVUlSRUQ6IFBsZWFzZSBjaGVjayB0aGUgcHJvY2Vzc0VudiBhcmd1bWVudCBiZWluZyBwYXNzZWQgdG8gcG9wdWxhdGUnKVxuICAgIGVyci5jb2RlID0gJ09CSkVDVF9SRVFVSVJFRCdcbiAgICB0aHJvdyBlcnJcbiAgfVxuXG4gIC8vIFNldCBwcm9jZXNzLmVudlxuICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhwYXJzZWQpKSB7XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChwcm9jZXNzRW52LCBrZXkpKSB7XG4gICAgICBpZiAob3ZlcnJpZGUgPT09IHRydWUpIHtcbiAgICAgICAgcHJvY2Vzc0VudltrZXldID0gcGFyc2VkW2tleV1cbiAgICAgIH1cblxuICAgICAgaWYgKGRlYnVnKSB7XG4gICAgICAgIGlmIChvdmVycmlkZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgIF9kZWJ1ZyhgXCIke2tleX1cIiBpcyBhbHJlYWR5IGRlZmluZWQgYW5kIFdBUyBvdmVyd3JpdHRlbmApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX2RlYnVnKGBcIiR7a2V5fVwiIGlzIGFscmVhZHkgZGVmaW5lZCBhbmQgd2FzIE5PVCBvdmVyd3JpdHRlbmApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcHJvY2Vzc0VudltrZXldID0gcGFyc2VkW2tleV1cbiAgICB9XG4gIH1cbn1cblxuY29uc3QgRG90ZW52TW9kdWxlID0ge1xuICBjb25maWdEb3RlbnYsXG4gIF9jb25maWdWYXVsdCxcbiAgX3BhcnNlVmF1bHQsXG4gIGNvbmZpZyxcbiAgZGVjcnlwdCxcbiAgcGFyc2UsXG4gIHBvcHVsYXRlXG59XG5cbm1vZHVsZS5leHBvcnRzLmNvbmZpZ0RvdGVudiA9IERvdGVudk1vZHVsZS5jb25maWdEb3RlbnZcbm1vZHVsZS5leHBvcnRzLl9jb25maWdWYXVsdCA9IERvdGVudk1vZHVsZS5fY29uZmlnVmF1bHRcbm1vZHVsZS5leHBvcnRzLl9wYXJzZVZhdWx0ID0gRG90ZW52TW9kdWxlLl9wYXJzZVZhdWx0XG5tb2R1bGUuZXhwb3J0cy5jb25maWcgPSBEb3RlbnZNb2R1bGUuY29uZmlnXG5tb2R1bGUuZXhwb3J0cy5kZWNyeXB0ID0gRG90ZW52TW9kdWxlLmRlY3J5cHRcbm1vZHVsZS5leHBvcnRzLnBhcnNlID0gRG90ZW52TW9kdWxlLnBhcnNlXG5tb2R1bGUuZXhwb3J0cy5wb3B1bGF0ZSA9IERvdGVudk1vZHVsZS5wb3B1bGF0ZVxuXG5tb2R1bGUuZXhwb3J0cyA9IERvdGVudk1vZHVsZVxuIiwgIi8qISBzYWZlLWJ1ZmZlci4gTUlUIExpY2Vuc2UuIEZlcm9zcyBBYm91a2hhZGlqZWggPGh0dHBzOi8vZmVyb3NzLm9yZy9vcGVuc291cmNlPiAqL1xuLyogZXNsaW50LWRpc2FibGUgbm9kZS9uby1kZXByZWNhdGVkLWFwaSAqL1xudmFyIGJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpXG52YXIgQnVmZmVyID0gYnVmZmVyLkJ1ZmZlclxuXG4vLyBhbHRlcm5hdGl2ZSB0byB1c2luZyBPYmplY3Qua2V5cyBmb3Igb2xkIGJyb3dzZXJzXG5mdW5jdGlvbiBjb3B5UHJvcHMgKHNyYywgZHN0KSB7XG4gIGZvciAodmFyIGtleSBpbiBzcmMpIHtcbiAgICBkc3Rba2V5XSA9IHNyY1trZXldXG4gIH1cbn1cbmlmIChCdWZmZXIuZnJvbSAmJiBCdWZmZXIuYWxsb2MgJiYgQnVmZmVyLmFsbG9jVW5zYWZlICYmIEJ1ZmZlci5hbGxvY1Vuc2FmZVNsb3cpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSBidWZmZXJcbn0gZWxzZSB7XG4gIC8vIENvcHkgcHJvcGVydGllcyBmcm9tIHJlcXVpcmUoJ2J1ZmZlcicpXG4gIGNvcHlQcm9wcyhidWZmZXIsIGV4cG9ydHMpXG4gIGV4cG9ydHMuQnVmZmVyID0gU2FmZUJ1ZmZlclxufVxuXG5mdW5jdGlvbiBTYWZlQnVmZmVyIChhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gQnVmZmVyKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxufVxuXG5TYWZlQnVmZmVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQnVmZmVyLnByb3RvdHlwZSlcblxuLy8gQ29weSBzdGF0aWMgbWV0aG9kcyBmcm9tIEJ1ZmZlclxuY29weVByb3BzKEJ1ZmZlciwgU2FmZUJ1ZmZlcilcblxuU2FmZUJ1ZmZlci5mcm9tID0gZnVuY3Rpb24gKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG4gIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3Qgbm90IGJlIGEgbnVtYmVyJylcbiAgfVxuICByZXR1cm4gQnVmZmVyKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxufVxuXG5TYWZlQnVmZmVyLmFsbG9jID0gZnVuY3Rpb24gKHNpemUsIGZpbGwsIGVuY29kaW5nKSB7XG4gIGlmICh0eXBlb2Ygc2l6ZSAhPT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyJylcbiAgfVxuICB2YXIgYnVmID0gQnVmZmVyKHNpemUpXG4gIGlmIChmaWxsICE9PSB1bmRlZmluZWQpIHtcbiAgICBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnc3RyaW5nJykge1xuICAgICAgYnVmLmZpbGwoZmlsbCwgZW5jb2RpbmcpXG4gICAgfSBlbHNlIHtcbiAgICAgIGJ1Zi5maWxsKGZpbGwpXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGJ1Zi5maWxsKDApXG4gIH1cbiAgcmV0dXJuIGJ1ZlxufVxuXG5TYWZlQnVmZmVyLmFsbG9jVW5zYWZlID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBudW1iZXInKVxuICB9XG4gIHJldHVybiBCdWZmZXIoc2l6ZSlcbn1cblxuU2FmZUJ1ZmZlci5hbGxvY1Vuc2FmZVNsb3cgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICBpZiAodHlwZW9mIHNpemUgIT09ICdudW1iZXInKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIG51bWJlcicpXG4gIH1cbiAgcmV0dXJuIGJ1ZmZlci5TbG93QnVmZmVyKHNpemUpXG59XG4iLCAiLypnbG9iYWwgbW9kdWxlLCBwcm9jZXNzKi9cbnZhciBCdWZmZXIgPSByZXF1aXJlKCdzYWZlLWJ1ZmZlcicpLkJ1ZmZlcjtcbnZhciBTdHJlYW0gPSByZXF1aXJlKCdzdHJlYW0nKTtcbnZhciB1dGlsID0gcmVxdWlyZSgndXRpbCcpO1xuXG5mdW5jdGlvbiBEYXRhU3RyZWFtKGRhdGEpIHtcbiAgdGhpcy5idWZmZXIgPSBudWxsO1xuICB0aGlzLndyaXRhYmxlID0gdHJ1ZTtcbiAgdGhpcy5yZWFkYWJsZSA9IHRydWU7XG5cbiAgLy8gTm8gaW5wdXRcbiAgaWYgKCFkYXRhKSB7XG4gICAgdGhpcy5idWZmZXIgPSBCdWZmZXIuYWxsb2MoMCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyBTdHJlYW1cbiAgaWYgKHR5cGVvZiBkYXRhLnBpcGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICB0aGlzLmJ1ZmZlciA9IEJ1ZmZlci5hbGxvYygwKTtcbiAgICBkYXRhLnBpcGUodGhpcyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyBCdWZmZXIgb3IgU3RyaW5nXG4gIC8vIG9yIE9iamVjdCAoYXNzdW1lZGx5IGEgcGFzc3dvcmRlZCBrZXkpXG4gIGlmIChkYXRhLmxlbmd0aCB8fCB0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcpIHtcbiAgICB0aGlzLmJ1ZmZlciA9IGRhdGE7XG4gICAgdGhpcy53cml0YWJsZSA9IGZhbHNlO1xuICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5lbWl0KCdlbmQnLCBkYXRhKTtcbiAgICAgIHRoaXMucmVhZGFibGUgPSBmYWxzZTtcbiAgICAgIHRoaXMuZW1pdCgnY2xvc2UnKTtcbiAgICB9LmJpbmQodGhpcykpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5leHBlY3RlZCBkYXRhIHR5cGUgKCcrIHR5cGVvZiBkYXRhICsgJyknKTtcbn1cbnV0aWwuaW5oZXJpdHMoRGF0YVN0cmVhbSwgU3RyZWFtKTtcblxuRGF0YVN0cmVhbS5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiB3cml0ZShkYXRhKSB7XG4gIHRoaXMuYnVmZmVyID0gQnVmZmVyLmNvbmNhdChbdGhpcy5idWZmZXIsIEJ1ZmZlci5mcm9tKGRhdGEpXSk7XG4gIHRoaXMuZW1pdCgnZGF0YScsIGRhdGEpO1xufTtcblxuRGF0YVN0cmVhbS5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24gZW5kKGRhdGEpIHtcbiAgaWYgKGRhdGEpXG4gICAgdGhpcy53cml0ZShkYXRhKTtcbiAgdGhpcy5lbWl0KCdlbmQnLCBkYXRhKTtcbiAgdGhpcy5lbWl0KCdjbG9zZScpO1xuICB0aGlzLndyaXRhYmxlID0gZmFsc2U7XG4gIHRoaXMucmVhZGFibGUgPSBmYWxzZTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRGF0YVN0cmVhbTtcbiIsICIvKmpzaGludCBub2RlOnRydWUgKi9cbid1c2Ugc3RyaWN0JztcbnZhciBCdWZmZXIgPSByZXF1aXJlKCdidWZmZXInKS5CdWZmZXI7IC8vIGJyb3dzZXJpZnlcbnZhciBTbG93QnVmZmVyID0gcmVxdWlyZSgnYnVmZmVyJykuU2xvd0J1ZmZlcjtcblxubW9kdWxlLmV4cG9ydHMgPSBidWZmZXJFcTtcblxuZnVuY3Rpb24gYnVmZmVyRXEoYSwgYikge1xuXG4gIC8vIHNob3J0Y3V0dGluZyBvbiB0eXBlIGlzIG5lY2Vzc2FyeSBmb3IgY29ycmVjdG5lc3NcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYSkgfHwgIUJ1ZmZlci5pc0J1ZmZlcihiKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIGJ1ZmZlciBzaXplcyBzaG91bGQgYmUgd2VsbC1rbm93biBpbmZvcm1hdGlvbiwgc28gZGVzcGl0ZSB0aGlzXG4gIC8vIHNob3J0Y3V0dGluZywgaXQgZG9lc24ndCBsZWFrIGFueSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgKmNvbnRlbnRzKiBvZiB0aGVcbiAgLy8gYnVmZmVycy5cbiAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHZhciBjID0gMDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKSB7XG4gICAgLypqc2hpbnQgYml0d2lzZTpmYWxzZSAqL1xuICAgIGMgfD0gYVtpXSBeIGJbaV07IC8vIFhPUlxuICB9XG4gIHJldHVybiBjID09PSAwO1xufVxuXG5idWZmZXJFcS5pbnN0YWxsID0gZnVuY3Rpb24oKSB7XG4gIEJ1ZmZlci5wcm90b3R5cGUuZXF1YWwgPSBTbG93QnVmZmVyLnByb3RvdHlwZS5lcXVhbCA9IGZ1bmN0aW9uIGVxdWFsKHRoYXQpIHtcbiAgICByZXR1cm4gYnVmZmVyRXEodGhpcywgdGhhdCk7XG4gIH07XG59O1xuXG52YXIgb3JpZ0J1ZkVxdWFsID0gQnVmZmVyLnByb3RvdHlwZS5lcXVhbDtcbnZhciBvcmlnU2xvd0J1ZkVxdWFsID0gU2xvd0J1ZmZlci5wcm90b3R5cGUuZXF1YWw7XG5idWZmZXJFcS5yZXN0b3JlID0gZnVuY3Rpb24oKSB7XG4gIEJ1ZmZlci5wcm90b3R5cGUuZXF1YWwgPSBvcmlnQnVmRXF1YWw7XG4gIFNsb3dCdWZmZXIucHJvdG90eXBlLmVxdWFsID0gb3JpZ1Nsb3dCdWZFcXVhbDtcbn07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBnZXRQYXJhbVNpemUoa2V5U2l6ZSkge1xuXHR2YXIgcmVzdWx0ID0gKChrZXlTaXplIC8gOCkgfCAwKSArIChrZXlTaXplICUgOCA9PT0gMCA/IDAgOiAxKTtcblx0cmV0dXJuIHJlc3VsdDtcbn1cblxudmFyIHBhcmFtQnl0ZXNGb3JBbGcgPSB7XG5cdEVTMjU2OiBnZXRQYXJhbVNpemUoMjU2KSxcblx0RVMzODQ6IGdldFBhcmFtU2l6ZSgzODQpLFxuXHRFUzUxMjogZ2V0UGFyYW1TaXplKDUyMSlcbn07XG5cbmZ1bmN0aW9uIGdldFBhcmFtQnl0ZXNGb3JBbGcoYWxnKSB7XG5cdHZhciBwYXJhbUJ5dGVzID0gcGFyYW1CeXRlc0ZvckFsZ1thbGddO1xuXHRpZiAocGFyYW1CeXRlcykge1xuXHRcdHJldHVybiBwYXJhbUJ5dGVzO1xuXHR9XG5cblx0dGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGFsZ29yaXRobSBcIicgKyBhbGcgKyAnXCInKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRQYXJhbUJ5dGVzRm9yQWxnO1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ3NhZmUtYnVmZmVyJykuQnVmZmVyO1xuXG52YXIgZ2V0UGFyYW1CeXRlc0ZvckFsZyA9IHJlcXVpcmUoJy4vcGFyYW0tYnl0ZXMtZm9yLWFsZycpO1xuXG52YXIgTUFYX09DVEVUID0gMHg4MCxcblx0Q0xBU1NfVU5JVkVSU0FMID0gMCxcblx0UFJJTUlUSVZFX0JJVCA9IDB4MjAsXG5cdFRBR19TRVEgPSAweDEwLFxuXHRUQUdfSU5UID0gMHgwMixcblx0RU5DT0RFRF9UQUdfU0VRID0gKFRBR19TRVEgfCBQUklNSVRJVkVfQklUKSB8IChDTEFTU19VTklWRVJTQUwgPDwgNiksXG5cdEVOQ09ERURfVEFHX0lOVCA9IFRBR19JTlQgfCAoQ0xBU1NfVU5JVkVSU0FMIDw8IDYpO1xuXG5mdW5jdGlvbiBiYXNlNjRVcmwoYmFzZTY0KSB7XG5cdHJldHVybiBiYXNlNjRcblx0XHQucmVwbGFjZSgvPS9nLCAnJylcblx0XHQucmVwbGFjZSgvXFwrL2csICctJylcblx0XHQucmVwbGFjZSgvXFwvL2csICdfJyk7XG59XG5cbmZ1bmN0aW9uIHNpZ25hdHVyZUFzQnVmZmVyKHNpZ25hdHVyZSkge1xuXHRpZiAoQnVmZmVyLmlzQnVmZmVyKHNpZ25hdHVyZSkpIHtcblx0XHRyZXR1cm4gc2lnbmF0dXJlO1xuXHR9IGVsc2UgaWYgKCdzdHJpbmcnID09PSB0eXBlb2Ygc2lnbmF0dXJlKSB7XG5cdFx0cmV0dXJuIEJ1ZmZlci5mcm9tKHNpZ25hdHVyZSwgJ2Jhc2U2NCcpO1xuXHR9XG5cblx0dGhyb3cgbmV3IFR5cGVFcnJvcignRUNEU0Egc2lnbmF0dXJlIG11c3QgYmUgYSBCYXNlNjQgc3RyaW5nIG9yIGEgQnVmZmVyJyk7XG59XG5cbmZ1bmN0aW9uIGRlclRvSm9zZShzaWduYXR1cmUsIGFsZykge1xuXHRzaWduYXR1cmUgPSBzaWduYXR1cmVBc0J1ZmZlcihzaWduYXR1cmUpO1xuXHR2YXIgcGFyYW1CeXRlcyA9IGdldFBhcmFtQnl0ZXNGb3JBbGcoYWxnKTtcblxuXHQvLyB0aGUgREVSIGVuY29kZWQgcGFyYW0gc2hvdWxkIGF0IG1vc3QgYmUgdGhlIHBhcmFtIHNpemUsIHBsdXMgYSBwYWRkaW5nXG5cdC8vIHplcm8sIHNpbmNlIGR1ZSB0byBiZWluZyBhIHNpZ25lZCBpbnRlZ2VyXG5cdHZhciBtYXhFbmNvZGVkUGFyYW1MZW5ndGggPSBwYXJhbUJ5dGVzICsgMTtcblxuXHR2YXIgaW5wdXRMZW5ndGggPSBzaWduYXR1cmUubGVuZ3RoO1xuXG5cdHZhciBvZmZzZXQgPSAwO1xuXHRpZiAoc2lnbmF0dXJlW29mZnNldCsrXSAhPT0gRU5DT0RFRF9UQUdfU0VRKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgZmluZCBleHBlY3RlZCBcInNlcVwiJyk7XG5cdH1cblxuXHR2YXIgc2VxTGVuZ3RoID0gc2lnbmF0dXJlW29mZnNldCsrXTtcblx0aWYgKHNlcUxlbmd0aCA9PT0gKE1BWF9PQ1RFVCB8IDEpKSB7XG5cdFx0c2VxTGVuZ3RoID0gc2lnbmF0dXJlW29mZnNldCsrXTtcblx0fVxuXG5cdGlmIChpbnB1dExlbmd0aCAtIG9mZnNldCA8IHNlcUxlbmd0aCkge1xuXHRcdHRocm93IG5ldyBFcnJvcignXCJzZXFcIiBzcGVjaWZpZWQgbGVuZ3RoIG9mIFwiJyArIHNlcUxlbmd0aCArICdcIiwgb25seSBcIicgKyAoaW5wdXRMZW5ndGggLSBvZmZzZXQpICsgJ1wiIHJlbWFpbmluZycpO1xuXHR9XG5cblx0aWYgKHNpZ25hdHVyZVtvZmZzZXQrK10gIT09IEVOQ09ERURfVEFHX0lOVCkge1xuXHRcdHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGZpbmQgZXhwZWN0ZWQgXCJpbnRcIiBmb3IgXCJyXCInKTtcblx0fVxuXG5cdHZhciByTGVuZ3RoID0gc2lnbmF0dXJlW29mZnNldCsrXTtcblxuXHRpZiAoaW5wdXRMZW5ndGggLSBvZmZzZXQgLSAyIDwgckxlbmd0aCkge1xuXHRcdHRocm93IG5ldyBFcnJvcignXCJyXCIgc3BlY2lmaWVkIGxlbmd0aCBvZiBcIicgKyByTGVuZ3RoICsgJ1wiLCBvbmx5IFwiJyArIChpbnB1dExlbmd0aCAtIG9mZnNldCAtIDIpICsgJ1wiIGF2YWlsYWJsZScpO1xuXHR9XG5cblx0aWYgKG1heEVuY29kZWRQYXJhbUxlbmd0aCA8IHJMZW5ndGgpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoJ1wiclwiIHNwZWNpZmllZCBsZW5ndGggb2YgXCInICsgckxlbmd0aCArICdcIiwgbWF4IG9mIFwiJyArIG1heEVuY29kZWRQYXJhbUxlbmd0aCArICdcIiBpcyBhY2NlcHRhYmxlJyk7XG5cdH1cblxuXHR2YXIgck9mZnNldCA9IG9mZnNldDtcblx0b2Zmc2V0ICs9IHJMZW5ndGg7XG5cblx0aWYgKHNpZ25hdHVyZVtvZmZzZXQrK10gIT09IEVOQ09ERURfVEFHX0lOVCkge1xuXHRcdHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGZpbmQgZXhwZWN0ZWQgXCJpbnRcIiBmb3IgXCJzXCInKTtcblx0fVxuXG5cdHZhciBzTGVuZ3RoID0gc2lnbmF0dXJlW29mZnNldCsrXTtcblxuXHRpZiAoaW5wdXRMZW5ndGggLSBvZmZzZXQgIT09IHNMZW5ndGgpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoJ1wic1wiIHNwZWNpZmllZCBsZW5ndGggb2YgXCInICsgc0xlbmd0aCArICdcIiwgZXhwZWN0ZWQgXCInICsgKGlucHV0TGVuZ3RoIC0gb2Zmc2V0KSArICdcIicpO1xuXHR9XG5cblx0aWYgKG1heEVuY29kZWRQYXJhbUxlbmd0aCA8IHNMZW5ndGgpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoJ1wic1wiIHNwZWNpZmllZCBsZW5ndGggb2YgXCInICsgc0xlbmd0aCArICdcIiwgbWF4IG9mIFwiJyArIG1heEVuY29kZWRQYXJhbUxlbmd0aCArICdcIiBpcyBhY2NlcHRhYmxlJyk7XG5cdH1cblxuXHR2YXIgc09mZnNldCA9IG9mZnNldDtcblx0b2Zmc2V0ICs9IHNMZW5ndGg7XG5cblx0aWYgKG9mZnNldCAhPT0gaW5wdXRMZW5ndGgpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIHRvIGNvbnN1bWUgZW50aXJlIGJ1ZmZlciwgYnV0IFwiJyArIChpbnB1dExlbmd0aCAtIG9mZnNldCkgKyAnXCIgYnl0ZXMgcmVtYWluJyk7XG5cdH1cblxuXHR2YXIgclBhZGRpbmcgPSBwYXJhbUJ5dGVzIC0gckxlbmd0aCxcblx0XHRzUGFkZGluZyA9IHBhcmFtQnl0ZXMgLSBzTGVuZ3RoO1xuXG5cdHZhciBkc3QgPSBCdWZmZXIuYWxsb2NVbnNhZmUoclBhZGRpbmcgKyByTGVuZ3RoICsgc1BhZGRpbmcgKyBzTGVuZ3RoKTtcblxuXHRmb3IgKG9mZnNldCA9IDA7IG9mZnNldCA8IHJQYWRkaW5nOyArK29mZnNldCkge1xuXHRcdGRzdFtvZmZzZXRdID0gMDtcblx0fVxuXHRzaWduYXR1cmUuY29weShkc3QsIG9mZnNldCwgck9mZnNldCArIE1hdGgubWF4KC1yUGFkZGluZywgMCksIHJPZmZzZXQgKyByTGVuZ3RoKTtcblxuXHRvZmZzZXQgPSBwYXJhbUJ5dGVzO1xuXG5cdGZvciAodmFyIG8gPSBvZmZzZXQ7IG9mZnNldCA8IG8gKyBzUGFkZGluZzsgKytvZmZzZXQpIHtcblx0XHRkc3Rbb2Zmc2V0XSA9IDA7XG5cdH1cblx0c2lnbmF0dXJlLmNvcHkoZHN0LCBvZmZzZXQsIHNPZmZzZXQgKyBNYXRoLm1heCgtc1BhZGRpbmcsIDApLCBzT2Zmc2V0ICsgc0xlbmd0aCk7XG5cblx0ZHN0ID0gZHN0LnRvU3RyaW5nKCdiYXNlNjQnKTtcblx0ZHN0ID0gYmFzZTY0VXJsKGRzdCk7XG5cblx0cmV0dXJuIGRzdDtcbn1cblxuZnVuY3Rpb24gY291bnRQYWRkaW5nKGJ1Ziwgc3RhcnQsIHN0b3ApIHtcblx0dmFyIHBhZGRpbmcgPSAwO1xuXHR3aGlsZSAoc3RhcnQgKyBwYWRkaW5nIDwgc3RvcCAmJiBidWZbc3RhcnQgKyBwYWRkaW5nXSA9PT0gMCkge1xuXHRcdCsrcGFkZGluZztcblx0fVxuXG5cdHZhciBuZWVkc1NpZ24gPSBidWZbc3RhcnQgKyBwYWRkaW5nXSA+PSBNQVhfT0NURVQ7XG5cdGlmIChuZWVkc1NpZ24pIHtcblx0XHQtLXBhZGRpbmc7XG5cdH1cblxuXHRyZXR1cm4gcGFkZGluZztcbn1cblxuZnVuY3Rpb24gam9zZVRvRGVyKHNpZ25hdHVyZSwgYWxnKSB7XG5cdHNpZ25hdHVyZSA9IHNpZ25hdHVyZUFzQnVmZmVyKHNpZ25hdHVyZSk7XG5cdHZhciBwYXJhbUJ5dGVzID0gZ2V0UGFyYW1CeXRlc0ZvckFsZyhhbGcpO1xuXG5cdHZhciBzaWduYXR1cmVCeXRlcyA9IHNpZ25hdHVyZS5sZW5ndGg7XG5cdGlmIChzaWduYXR1cmVCeXRlcyAhPT0gcGFyYW1CeXRlcyAqIDIpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdcIicgKyBhbGcgKyAnXCIgc2lnbmF0dXJlcyBtdXN0IGJlIFwiJyArIHBhcmFtQnl0ZXMgKiAyICsgJ1wiIGJ5dGVzLCBzYXcgXCInICsgc2lnbmF0dXJlQnl0ZXMgKyAnXCInKTtcblx0fVxuXG5cdHZhciByUGFkZGluZyA9IGNvdW50UGFkZGluZyhzaWduYXR1cmUsIDAsIHBhcmFtQnl0ZXMpO1xuXHR2YXIgc1BhZGRpbmcgPSBjb3VudFBhZGRpbmcoc2lnbmF0dXJlLCBwYXJhbUJ5dGVzLCBzaWduYXR1cmUubGVuZ3RoKTtcblx0dmFyIHJMZW5ndGggPSBwYXJhbUJ5dGVzIC0gclBhZGRpbmc7XG5cdHZhciBzTGVuZ3RoID0gcGFyYW1CeXRlcyAtIHNQYWRkaW5nO1xuXG5cdHZhciByc0J5dGVzID0gMSArIDEgKyByTGVuZ3RoICsgMSArIDEgKyBzTGVuZ3RoO1xuXG5cdHZhciBzaG9ydExlbmd0aCA9IHJzQnl0ZXMgPCBNQVhfT0NURVQ7XG5cblx0dmFyIGRzdCA9IEJ1ZmZlci5hbGxvY1Vuc2FmZSgoc2hvcnRMZW5ndGggPyAyIDogMykgKyByc0J5dGVzKTtcblxuXHR2YXIgb2Zmc2V0ID0gMDtcblx0ZHN0W29mZnNldCsrXSA9IEVOQ09ERURfVEFHX1NFUTtcblx0aWYgKHNob3J0TGVuZ3RoKSB7XG5cdFx0Ly8gQml0IDggaGFzIHZhbHVlIFwiMFwiXG5cdFx0Ly8gYml0cyA3LTEgZ2l2ZSB0aGUgbGVuZ3RoLlxuXHRcdGRzdFtvZmZzZXQrK10gPSByc0J5dGVzO1xuXHR9IGVsc2Uge1xuXHRcdC8vIEJpdCA4IG9mIGZpcnN0IG9jdGV0IGhhcyB2YWx1ZSBcIjFcIlxuXHRcdC8vIGJpdHMgNy0xIGdpdmUgdGhlIG51bWJlciBvZiBhZGRpdGlvbmFsIGxlbmd0aCBvY3RldHMuXG5cdFx0ZHN0W29mZnNldCsrXSA9IE1BWF9PQ1RFVFx0fCAxO1xuXHRcdC8vIGxlbmd0aCwgYmFzZSAyNTZcblx0XHRkc3Rbb2Zmc2V0KytdID0gcnNCeXRlcyAmIDB4ZmY7XG5cdH1cblx0ZHN0W29mZnNldCsrXSA9IEVOQ09ERURfVEFHX0lOVDtcblx0ZHN0W29mZnNldCsrXSA9IHJMZW5ndGg7XG5cdGlmIChyUGFkZGluZyA8IDApIHtcblx0XHRkc3Rbb2Zmc2V0KytdID0gMDtcblx0XHRvZmZzZXQgKz0gc2lnbmF0dXJlLmNvcHkoZHN0LCBvZmZzZXQsIDAsIHBhcmFtQnl0ZXMpO1xuXHR9IGVsc2Uge1xuXHRcdG9mZnNldCArPSBzaWduYXR1cmUuY29weShkc3QsIG9mZnNldCwgclBhZGRpbmcsIHBhcmFtQnl0ZXMpO1xuXHR9XG5cdGRzdFtvZmZzZXQrK10gPSBFTkNPREVEX1RBR19JTlQ7XG5cdGRzdFtvZmZzZXQrK10gPSBzTGVuZ3RoO1xuXHRpZiAoc1BhZGRpbmcgPCAwKSB7XG5cdFx0ZHN0W29mZnNldCsrXSA9IDA7XG5cdFx0c2lnbmF0dXJlLmNvcHkoZHN0LCBvZmZzZXQsIHBhcmFtQnl0ZXMpO1xuXHR9IGVsc2Uge1xuXHRcdHNpZ25hdHVyZS5jb3B5KGRzdCwgb2Zmc2V0LCBwYXJhbUJ5dGVzICsgc1BhZGRpbmcpO1xuXHR9XG5cblx0cmV0dXJuIGRzdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cdGRlclRvSm9zZTogZGVyVG9Kb3NlLFxuXHRqb3NlVG9EZXI6IGpvc2VUb0RlclxufTtcbiIsICJ2YXIgYnVmZmVyRXF1YWwgPSByZXF1aXJlKCdidWZmZXItZXF1YWwtY29uc3RhbnQtdGltZScpO1xudmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ3NhZmUtYnVmZmVyJykuQnVmZmVyO1xudmFyIGNyeXB0byA9IHJlcXVpcmUoJ2NyeXB0bycpO1xudmFyIGZvcm1hdEVjZHNhID0gcmVxdWlyZSgnZWNkc2Etc2lnLWZvcm1hdHRlcicpO1xudmFyIHV0aWwgPSByZXF1aXJlKCd1dGlsJyk7XG5cbnZhciBNU0dfSU5WQUxJRF9BTEdPUklUSE0gPSAnXCIlc1wiIGlzIG5vdCBhIHZhbGlkIGFsZ29yaXRobS5cXG4gIFN1cHBvcnRlZCBhbGdvcml0aG1zIGFyZTpcXG4gIFwiSFMyNTZcIiwgXCJIUzM4NFwiLCBcIkhTNTEyXCIsIFwiUlMyNTZcIiwgXCJSUzM4NFwiLCBcIlJTNTEyXCIsIFwiUFMyNTZcIiwgXCJQUzM4NFwiLCBcIlBTNTEyXCIsIFwiRVMyNTZcIiwgXCJFUzM4NFwiLCBcIkVTNTEyXCIgYW5kIFwibm9uZVwiLidcbnZhciBNU0dfSU5WQUxJRF9TRUNSRVQgPSAnc2VjcmV0IG11c3QgYmUgYSBzdHJpbmcgb3IgYnVmZmVyJztcbnZhciBNU0dfSU5WQUxJRF9WRVJJRklFUl9LRVkgPSAna2V5IG11c3QgYmUgYSBzdHJpbmcgb3IgYSBidWZmZXInO1xudmFyIE1TR19JTlZBTElEX1NJR05FUl9LRVkgPSAna2V5IG11c3QgYmUgYSBzdHJpbmcsIGEgYnVmZmVyIG9yIGFuIG9iamVjdCc7XG5cbnZhciBzdXBwb3J0c0tleU9iamVjdHMgPSB0eXBlb2YgY3J5cHRvLmNyZWF0ZVB1YmxpY0tleSA9PT0gJ2Z1bmN0aW9uJztcbmlmIChzdXBwb3J0c0tleU9iamVjdHMpIHtcbiAgTVNHX0lOVkFMSURfVkVSSUZJRVJfS0VZICs9ICcgb3IgYSBLZXlPYmplY3QnO1xuICBNU0dfSU5WQUxJRF9TRUNSRVQgKz0gJ29yIGEgS2V5T2JqZWN0Jztcbn1cblxuZnVuY3Rpb24gY2hlY2tJc1B1YmxpY0tleShrZXkpIHtcbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihrZXkpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBrZXkgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKCFzdXBwb3J0c0tleU9iamVjdHMpIHtcbiAgICB0aHJvdyB0eXBlRXJyb3IoTVNHX0lOVkFMSURfVkVSSUZJRVJfS0VZKTtcbiAgfVxuXG4gIGlmICh0eXBlb2Yga2V5ICE9PSAnb2JqZWN0Jykge1xuICAgIHRocm93IHR5cGVFcnJvcihNU0dfSU5WQUxJRF9WRVJJRklFUl9LRVkpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBrZXkudHlwZSAhPT0gJ3N0cmluZycpIHtcbiAgICB0aHJvdyB0eXBlRXJyb3IoTVNHX0lOVkFMSURfVkVSSUZJRVJfS0VZKTtcbiAgfVxuXG4gIGlmICh0eXBlb2Yga2V5LmFzeW1tZXRyaWNLZXlUeXBlICE9PSAnc3RyaW5nJykge1xuICAgIHRocm93IHR5cGVFcnJvcihNU0dfSU5WQUxJRF9WRVJJRklFUl9LRVkpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBrZXkuZXhwb3J0ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgdHlwZUVycm9yKE1TR19JTlZBTElEX1ZFUklGSUVSX0tFWSk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGNoZWNrSXNQcml2YXRlS2V5KGtleSkge1xuICBpZiAoQnVmZmVyLmlzQnVmZmVyKGtleSkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAodHlwZW9mIGtleSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAodHlwZW9mIGtleSA9PT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB0aHJvdyB0eXBlRXJyb3IoTVNHX0lOVkFMSURfU0lHTkVSX0tFWSk7XG59O1xuXG5mdW5jdGlvbiBjaGVja0lzU2VjcmV0S2V5KGtleSkge1xuICBpZiAoQnVmZmVyLmlzQnVmZmVyKGtleSkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAodHlwZW9mIGtleSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4ga2V5O1xuICB9XG5cbiAgaWYgKCFzdXBwb3J0c0tleU9iamVjdHMpIHtcbiAgICB0aHJvdyB0eXBlRXJyb3IoTVNHX0lOVkFMSURfU0VDUkVUKTtcbiAgfVxuXG4gIGlmICh0eXBlb2Yga2V5ICE9PSAnb2JqZWN0Jykge1xuICAgIHRocm93IHR5cGVFcnJvcihNU0dfSU5WQUxJRF9TRUNSRVQpO1xuICB9XG5cbiAgaWYgKGtleS50eXBlICE9PSAnc2VjcmV0Jykge1xuICAgIHRocm93IHR5cGVFcnJvcihNU0dfSU5WQUxJRF9TRUNSRVQpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBrZXkuZXhwb3J0ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgdHlwZUVycm9yKE1TR19JTlZBTElEX1NFQ1JFVCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZnJvbUJhc2U2NChiYXNlNjQpIHtcbiAgcmV0dXJuIGJhc2U2NFxuICAgIC5yZXBsYWNlKC89L2csICcnKVxuICAgIC5yZXBsYWNlKC9cXCsvZywgJy0nKVxuICAgIC5yZXBsYWNlKC9cXC8vZywgJ18nKTtcbn1cblxuZnVuY3Rpb24gdG9CYXNlNjQoYmFzZTY0dXJsKSB7XG4gIGJhc2U2NHVybCA9IGJhc2U2NHVybC50b1N0cmluZygpO1xuXG4gIHZhciBwYWRkaW5nID0gNCAtIGJhc2U2NHVybC5sZW5ndGggJSA0O1xuICBpZiAocGFkZGluZyAhPT0gNCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFkZGluZzsgKytpKSB7XG4gICAgICBiYXNlNjR1cmwgKz0gJz0nO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBiYXNlNjR1cmxcbiAgICAucmVwbGFjZSgvXFwtL2csICcrJylcbiAgICAucmVwbGFjZSgvXy9nLCAnLycpO1xufVxuXG5mdW5jdGlvbiB0eXBlRXJyb3IodGVtcGxhdGUpIHtcbiAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gIHZhciBlcnJNc2cgPSB1dGlsLmZvcm1hdC5iaW5kKHV0aWwsIHRlbXBsYXRlKS5hcHBseShudWxsLCBhcmdzKTtcbiAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoZXJyTXNnKTtcbn1cblxuZnVuY3Rpb24gYnVmZmVyT3JTdHJpbmcob2JqKSB7XG4gIHJldHVybiBCdWZmZXIuaXNCdWZmZXIob2JqKSB8fCB0eXBlb2Ygb2JqID09PSAnc3RyaW5nJztcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplSW5wdXQodGhpbmcpIHtcbiAgaWYgKCFidWZmZXJPclN0cmluZyh0aGluZykpXG4gICAgdGhpbmcgPSBKU09OLnN0cmluZ2lmeSh0aGluZyk7XG4gIHJldHVybiB0aGluZztcbn1cblxuZnVuY3Rpb24gY3JlYXRlSG1hY1NpZ25lcihiaXRzKSB7XG4gIHJldHVybiBmdW5jdGlvbiBzaWduKHRoaW5nLCBzZWNyZXQpIHtcbiAgICBjaGVja0lzU2VjcmV0S2V5KHNlY3JldCk7XG4gICAgdGhpbmcgPSBub3JtYWxpemVJbnB1dCh0aGluZyk7XG4gICAgdmFyIGhtYWMgPSBjcnlwdG8uY3JlYXRlSG1hYygnc2hhJyArIGJpdHMsIHNlY3JldCk7XG4gICAgdmFyIHNpZyA9IChobWFjLnVwZGF0ZSh0aGluZyksIGhtYWMuZGlnZXN0KCdiYXNlNjQnKSlcbiAgICByZXR1cm4gZnJvbUJhc2U2NChzaWcpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUhtYWNWZXJpZmllcihiaXRzKSB7XG4gIHJldHVybiBmdW5jdGlvbiB2ZXJpZnkodGhpbmcsIHNpZ25hdHVyZSwgc2VjcmV0KSB7XG4gICAgdmFyIGNvbXB1dGVkU2lnID0gY3JlYXRlSG1hY1NpZ25lcihiaXRzKSh0aGluZywgc2VjcmV0KTtcbiAgICByZXR1cm4gYnVmZmVyRXF1YWwoQnVmZmVyLmZyb20oc2lnbmF0dXJlKSwgQnVmZmVyLmZyb20oY29tcHV0ZWRTaWcpKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVLZXlTaWduZXIoYml0cykge1xuIHJldHVybiBmdW5jdGlvbiBzaWduKHRoaW5nLCBwcml2YXRlS2V5KSB7XG4gICAgY2hlY2tJc1ByaXZhdGVLZXkocHJpdmF0ZUtleSk7XG4gICAgdGhpbmcgPSBub3JtYWxpemVJbnB1dCh0aGluZyk7XG4gICAgLy8gRXZlbiB0aG91Z2ggd2UgYXJlIHNwZWNpZnlpbmcgXCJSU0FcIiBoZXJlLCB0aGlzIHdvcmtzIHdpdGggRUNEU0FcbiAgICAvLyBrZXlzIGFzIHdlbGwuXG4gICAgdmFyIHNpZ25lciA9IGNyeXB0by5jcmVhdGVTaWduKCdSU0EtU0hBJyArIGJpdHMpO1xuICAgIHZhciBzaWcgPSAoc2lnbmVyLnVwZGF0ZSh0aGluZyksIHNpZ25lci5zaWduKHByaXZhdGVLZXksICdiYXNlNjQnKSk7XG4gICAgcmV0dXJuIGZyb21CYXNlNjQoc2lnKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVLZXlWZXJpZmllcihiaXRzKSB7XG4gIHJldHVybiBmdW5jdGlvbiB2ZXJpZnkodGhpbmcsIHNpZ25hdHVyZSwgcHVibGljS2V5KSB7XG4gICAgY2hlY2tJc1B1YmxpY0tleShwdWJsaWNLZXkpO1xuICAgIHRoaW5nID0gbm9ybWFsaXplSW5wdXQodGhpbmcpO1xuICAgIHNpZ25hdHVyZSA9IHRvQmFzZTY0KHNpZ25hdHVyZSk7XG4gICAgdmFyIHZlcmlmaWVyID0gY3J5cHRvLmNyZWF0ZVZlcmlmeSgnUlNBLVNIQScgKyBiaXRzKTtcbiAgICB2ZXJpZmllci51cGRhdGUodGhpbmcpO1xuICAgIHJldHVybiB2ZXJpZmllci52ZXJpZnkocHVibGljS2V5LCBzaWduYXR1cmUsICdiYXNlNjQnKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVQU1NLZXlTaWduZXIoYml0cykge1xuICByZXR1cm4gZnVuY3Rpb24gc2lnbih0aGluZywgcHJpdmF0ZUtleSkge1xuICAgIGNoZWNrSXNQcml2YXRlS2V5KHByaXZhdGVLZXkpO1xuICAgIHRoaW5nID0gbm9ybWFsaXplSW5wdXQodGhpbmcpO1xuICAgIHZhciBzaWduZXIgPSBjcnlwdG8uY3JlYXRlU2lnbignUlNBLVNIQScgKyBiaXRzKTtcbiAgICB2YXIgc2lnID0gKHNpZ25lci51cGRhdGUodGhpbmcpLCBzaWduZXIuc2lnbih7XG4gICAgICBrZXk6IHByaXZhdGVLZXksXG4gICAgICBwYWRkaW5nOiBjcnlwdG8uY29uc3RhbnRzLlJTQV9QS0NTMV9QU1NfUEFERElORyxcbiAgICAgIHNhbHRMZW5ndGg6IGNyeXB0by5jb25zdGFudHMuUlNBX1BTU19TQUxUTEVOX0RJR0VTVFxuICAgIH0sICdiYXNlNjQnKSk7XG4gICAgcmV0dXJuIGZyb21CYXNlNjQoc2lnKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVQU1NLZXlWZXJpZmllcihiaXRzKSB7XG4gIHJldHVybiBmdW5jdGlvbiB2ZXJpZnkodGhpbmcsIHNpZ25hdHVyZSwgcHVibGljS2V5KSB7XG4gICAgY2hlY2tJc1B1YmxpY0tleShwdWJsaWNLZXkpO1xuICAgIHRoaW5nID0gbm9ybWFsaXplSW5wdXQodGhpbmcpO1xuICAgIHNpZ25hdHVyZSA9IHRvQmFzZTY0KHNpZ25hdHVyZSk7XG4gICAgdmFyIHZlcmlmaWVyID0gY3J5cHRvLmNyZWF0ZVZlcmlmeSgnUlNBLVNIQScgKyBiaXRzKTtcbiAgICB2ZXJpZmllci51cGRhdGUodGhpbmcpO1xuICAgIHJldHVybiB2ZXJpZmllci52ZXJpZnkoe1xuICAgICAga2V5OiBwdWJsaWNLZXksXG4gICAgICBwYWRkaW5nOiBjcnlwdG8uY29uc3RhbnRzLlJTQV9QS0NTMV9QU1NfUEFERElORyxcbiAgICAgIHNhbHRMZW5ndGg6IGNyeXB0by5jb25zdGFudHMuUlNBX1BTU19TQUxUTEVOX0RJR0VTVFxuICAgIH0sIHNpZ25hdHVyZSwgJ2Jhc2U2NCcpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUVDRFNBU2lnbmVyKGJpdHMpIHtcbiAgdmFyIGlubmVyID0gY3JlYXRlS2V5U2lnbmVyKGJpdHMpO1xuICByZXR1cm4gZnVuY3Rpb24gc2lnbigpIHtcbiAgICB2YXIgc2lnbmF0dXJlID0gaW5uZXIuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICBzaWduYXR1cmUgPSBmb3JtYXRFY2RzYS5kZXJUb0pvc2Uoc2lnbmF0dXJlLCAnRVMnICsgYml0cyk7XG4gICAgcmV0dXJuIHNpZ25hdHVyZTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRUNEU0FWZXJpZmVyKGJpdHMpIHtcbiAgdmFyIGlubmVyID0gY3JlYXRlS2V5VmVyaWZpZXIoYml0cyk7XG4gIHJldHVybiBmdW5jdGlvbiB2ZXJpZnkodGhpbmcsIHNpZ25hdHVyZSwgcHVibGljS2V5KSB7XG4gICAgc2lnbmF0dXJlID0gZm9ybWF0RWNkc2Euam9zZVRvRGVyKHNpZ25hdHVyZSwgJ0VTJyArIGJpdHMpLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgICB2YXIgcmVzdWx0ID0gaW5uZXIodGhpbmcsIHNpZ25hdHVyZSwgcHVibGljS2V5KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVOb25lU2lnbmVyKCkge1xuICByZXR1cm4gZnVuY3Rpb24gc2lnbigpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlTm9uZVZlcmlmaWVyKCkge1xuICByZXR1cm4gZnVuY3Rpb24gdmVyaWZ5KHRoaW5nLCBzaWduYXR1cmUpIHtcbiAgICByZXR1cm4gc2lnbmF0dXJlID09PSAnJztcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGp3YShhbGdvcml0aG0pIHtcbiAgdmFyIHNpZ25lckZhY3RvcmllcyA9IHtcbiAgICBoczogY3JlYXRlSG1hY1NpZ25lcixcbiAgICByczogY3JlYXRlS2V5U2lnbmVyLFxuICAgIHBzOiBjcmVhdGVQU1NLZXlTaWduZXIsXG4gICAgZXM6IGNyZWF0ZUVDRFNBU2lnbmVyLFxuICAgIG5vbmU6IGNyZWF0ZU5vbmVTaWduZXIsXG4gIH1cbiAgdmFyIHZlcmlmaWVyRmFjdG9yaWVzID0ge1xuICAgIGhzOiBjcmVhdGVIbWFjVmVyaWZpZXIsXG4gICAgcnM6IGNyZWF0ZUtleVZlcmlmaWVyLFxuICAgIHBzOiBjcmVhdGVQU1NLZXlWZXJpZmllcixcbiAgICBlczogY3JlYXRlRUNEU0FWZXJpZmVyLFxuICAgIG5vbmU6IGNyZWF0ZU5vbmVWZXJpZmllcixcbiAgfVxuICB2YXIgbWF0Y2ggPSBhbGdvcml0aG0ubWF0Y2goL14oUlN8UFN8RVN8SFMpKDI1NnwzODR8NTEyKSR8Xihub25lKSQvaSk7XG4gIGlmICghbWF0Y2gpXG4gICAgdGhyb3cgdHlwZUVycm9yKE1TR19JTlZBTElEX0FMR09SSVRITSwgYWxnb3JpdGhtKTtcbiAgdmFyIGFsZ28gPSAobWF0Y2hbMV0gfHwgbWF0Y2hbM10pLnRvTG93ZXJDYXNlKCk7XG4gIHZhciBiaXRzID0gbWF0Y2hbMl07XG5cbiAgcmV0dXJuIHtcbiAgICBzaWduOiBzaWduZXJGYWN0b3JpZXNbYWxnb10oYml0cyksXG4gICAgdmVyaWZ5OiB2ZXJpZmllckZhY3Rvcmllc1thbGdvXShiaXRzKSxcbiAgfVxufTtcbiIsICIvKmdsb2JhbCBtb2R1bGUqL1xudmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpLkJ1ZmZlcjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0b1N0cmluZyhvYmopIHtcbiAgaWYgKHR5cGVvZiBvYmogPT09ICdzdHJpbmcnKVxuICAgIHJldHVybiBvYmo7XG4gIGlmICh0eXBlb2Ygb2JqID09PSAnbnVtYmVyJyB8fCBCdWZmZXIuaXNCdWZmZXIob2JqKSlcbiAgICByZXR1cm4gb2JqLnRvU3RyaW5nKCk7XG4gIHJldHVybiBKU09OLnN0cmluZ2lmeShvYmopO1xufTtcbiIsICIvKmdsb2JhbCBtb2R1bGUqL1xudmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ3NhZmUtYnVmZmVyJykuQnVmZmVyO1xudmFyIERhdGFTdHJlYW0gPSByZXF1aXJlKCcuL2RhdGEtc3RyZWFtJyk7XG52YXIgandhID0gcmVxdWlyZSgnandhJyk7XG52YXIgU3RyZWFtID0gcmVxdWlyZSgnc3RyZWFtJyk7XG52YXIgdG9TdHJpbmcgPSByZXF1aXJlKCcuL3Rvc3RyaW5nJyk7XG52YXIgdXRpbCA9IHJlcXVpcmUoJ3V0aWwnKTtcblxuZnVuY3Rpb24gYmFzZTY0dXJsKHN0cmluZywgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIEJ1ZmZlclxuICAgIC5mcm9tKHN0cmluZywgZW5jb2RpbmcpXG4gICAgLnRvU3RyaW5nKCdiYXNlNjQnKVxuICAgIC5yZXBsYWNlKC89L2csICcnKVxuICAgIC5yZXBsYWNlKC9cXCsvZywgJy0nKVxuICAgIC5yZXBsYWNlKC9cXC8vZywgJ18nKTtcbn1cblxuZnVuY3Rpb24gandzU2VjdXJlZElucHV0KGhlYWRlciwgcGF5bG9hZCwgZW5jb2RpbmcpIHtcbiAgZW5jb2RpbmcgPSBlbmNvZGluZyB8fCAndXRmOCc7XG4gIHZhciBlbmNvZGVkSGVhZGVyID0gYmFzZTY0dXJsKHRvU3RyaW5nKGhlYWRlciksICdiaW5hcnknKTtcbiAgdmFyIGVuY29kZWRQYXlsb2FkID0gYmFzZTY0dXJsKHRvU3RyaW5nKHBheWxvYWQpLCBlbmNvZGluZyk7XG4gIHJldHVybiB1dGlsLmZvcm1hdCgnJXMuJXMnLCBlbmNvZGVkSGVhZGVyLCBlbmNvZGVkUGF5bG9hZCk7XG59XG5cbmZ1bmN0aW9uIGp3c1NpZ24ob3B0cykge1xuICB2YXIgaGVhZGVyID0gb3B0cy5oZWFkZXI7XG4gIHZhciBwYXlsb2FkID0gb3B0cy5wYXlsb2FkO1xuICB2YXIgc2VjcmV0T3JLZXkgPSBvcHRzLnNlY3JldCB8fCBvcHRzLnByaXZhdGVLZXk7XG4gIHZhciBlbmNvZGluZyA9IG9wdHMuZW5jb2Rpbmc7XG4gIHZhciBhbGdvID0gandhKGhlYWRlci5hbGcpO1xuICB2YXIgc2VjdXJlZElucHV0ID0gandzU2VjdXJlZElucHV0KGhlYWRlciwgcGF5bG9hZCwgZW5jb2RpbmcpO1xuICB2YXIgc2lnbmF0dXJlID0gYWxnby5zaWduKHNlY3VyZWRJbnB1dCwgc2VjcmV0T3JLZXkpO1xuICByZXR1cm4gdXRpbC5mb3JtYXQoJyVzLiVzJywgc2VjdXJlZElucHV0LCBzaWduYXR1cmUpO1xufVxuXG5mdW5jdGlvbiBTaWduU3RyZWFtKG9wdHMpIHtcbiAgdmFyIHNlY3JldCA9IG9wdHMuc2VjcmV0fHxvcHRzLnByaXZhdGVLZXl8fG9wdHMua2V5O1xuICB2YXIgc2VjcmV0U3RyZWFtID0gbmV3IERhdGFTdHJlYW0oc2VjcmV0KTtcbiAgdGhpcy5yZWFkYWJsZSA9IHRydWU7XG4gIHRoaXMuaGVhZGVyID0gb3B0cy5oZWFkZXI7XG4gIHRoaXMuZW5jb2RpbmcgPSBvcHRzLmVuY29kaW5nO1xuICB0aGlzLnNlY3JldCA9IHRoaXMucHJpdmF0ZUtleSA9IHRoaXMua2V5ID0gc2VjcmV0U3RyZWFtO1xuICB0aGlzLnBheWxvYWQgPSBuZXcgRGF0YVN0cmVhbShvcHRzLnBheWxvYWQpO1xuICB0aGlzLnNlY3JldC5vbmNlKCdjbG9zZScsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMucGF5bG9hZC53cml0YWJsZSAmJiB0aGlzLnJlYWRhYmxlKVxuICAgICAgdGhpcy5zaWduKCk7XG4gIH0uYmluZCh0aGlzKSk7XG5cbiAgdGhpcy5wYXlsb2FkLm9uY2UoJ2Nsb3NlJywgZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5zZWNyZXQud3JpdGFibGUgJiYgdGhpcy5yZWFkYWJsZSlcbiAgICAgIHRoaXMuc2lnbigpO1xuICB9LmJpbmQodGhpcykpO1xufVxudXRpbC5pbmhlcml0cyhTaWduU3RyZWFtLCBTdHJlYW0pO1xuXG5TaWduU3RyZWFtLnByb3RvdHlwZS5zaWduID0gZnVuY3Rpb24gc2lnbigpIHtcbiAgdHJ5IHtcbiAgICB2YXIgc2lnbmF0dXJlID0gandzU2lnbih7XG4gICAgICBoZWFkZXI6IHRoaXMuaGVhZGVyLFxuICAgICAgcGF5bG9hZDogdGhpcy5wYXlsb2FkLmJ1ZmZlcixcbiAgICAgIHNlY3JldDogdGhpcy5zZWNyZXQuYnVmZmVyLFxuICAgICAgZW5jb2Rpbmc6IHRoaXMuZW5jb2RpbmdcbiAgICB9KTtcbiAgICB0aGlzLmVtaXQoJ2RvbmUnLCBzaWduYXR1cmUpO1xuICAgIHRoaXMuZW1pdCgnZGF0YScsIHNpZ25hdHVyZSk7XG4gICAgdGhpcy5lbWl0KCdlbmQnKTtcbiAgICB0aGlzLnJlYWRhYmxlID0gZmFsc2U7XG4gICAgcmV0dXJuIHNpZ25hdHVyZTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRoaXMucmVhZGFibGUgPSBmYWxzZTtcbiAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZSk7XG4gICAgdGhpcy5lbWl0KCdjbG9zZScpO1xuICB9XG59O1xuXG5TaWduU3RyZWFtLnNpZ24gPSBqd3NTaWduO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNpZ25TdHJlYW07XG4iLCAiLypnbG9iYWwgbW9kdWxlKi9cbnZhciBCdWZmZXIgPSByZXF1aXJlKCdzYWZlLWJ1ZmZlcicpLkJ1ZmZlcjtcbnZhciBEYXRhU3RyZWFtID0gcmVxdWlyZSgnLi9kYXRhLXN0cmVhbScpO1xudmFyIGp3YSA9IHJlcXVpcmUoJ2p3YScpO1xudmFyIFN0cmVhbSA9IHJlcXVpcmUoJ3N0cmVhbScpO1xudmFyIHRvU3RyaW5nID0gcmVxdWlyZSgnLi90b3N0cmluZycpO1xudmFyIHV0aWwgPSByZXF1aXJlKCd1dGlsJyk7XG52YXIgSldTX1JFR0VYID0gL15bYS16QS1aMC05XFwtX10rP1xcLlthLXpBLVowLTlcXC1fXSs/XFwuKFthLXpBLVowLTlcXC1fXSspPyQvO1xuXG5mdW5jdGlvbiBpc09iamVjdCh0aGluZykge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHRoaW5nKSA9PT0gJ1tvYmplY3QgT2JqZWN0XSc7XG59XG5cbmZ1bmN0aW9uIHNhZmVKc29uUGFyc2UodGhpbmcpIHtcbiAgaWYgKGlzT2JqZWN0KHRoaW5nKSlcbiAgICByZXR1cm4gdGhpbmc7XG4gIHRyeSB7IHJldHVybiBKU09OLnBhcnNlKHRoaW5nKTsgfVxuICBjYXRjaCAoZSkgeyByZXR1cm4gdW5kZWZpbmVkOyB9XG59XG5cbmZ1bmN0aW9uIGhlYWRlckZyb21KV1MoandzU2lnKSB7XG4gIHZhciBlbmNvZGVkSGVhZGVyID0gandzU2lnLnNwbGl0KCcuJywgMSlbMF07XG4gIHJldHVybiBzYWZlSnNvblBhcnNlKEJ1ZmZlci5mcm9tKGVuY29kZWRIZWFkZXIsICdiYXNlNjQnKS50b1N0cmluZygnYmluYXJ5JykpO1xufVxuXG5mdW5jdGlvbiBzZWN1cmVkSW5wdXRGcm9tSldTKGp3c1NpZykge1xuICByZXR1cm4gandzU2lnLnNwbGl0KCcuJywgMikuam9pbignLicpO1xufVxuXG5mdW5jdGlvbiBzaWduYXR1cmVGcm9tSldTKGp3c1NpZykge1xuICByZXR1cm4gandzU2lnLnNwbGl0KCcuJylbMl07XG59XG5cbmZ1bmN0aW9uIHBheWxvYWRGcm9tSldTKGp3c1NpZywgZW5jb2RpbmcpIHtcbiAgZW5jb2RpbmcgPSBlbmNvZGluZyB8fCAndXRmOCc7XG4gIHZhciBwYXlsb2FkID0gandzU2lnLnNwbGl0KCcuJylbMV07XG4gIHJldHVybiBCdWZmZXIuZnJvbShwYXlsb2FkLCAnYmFzZTY0JykudG9TdHJpbmcoZW5jb2RpbmcpO1xufVxuXG5mdW5jdGlvbiBpc1ZhbGlkSndzKHN0cmluZykge1xuICByZXR1cm4gSldTX1JFR0VYLnRlc3Qoc3RyaW5nKSAmJiAhIWhlYWRlckZyb21KV1Moc3RyaW5nKTtcbn1cblxuZnVuY3Rpb24gandzVmVyaWZ5KGp3c1NpZywgYWxnb3JpdGhtLCBzZWNyZXRPcktleSkge1xuICBpZiAoIWFsZ29yaXRobSkge1xuICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoXCJNaXNzaW5nIGFsZ29yaXRobSBwYXJhbWV0ZXIgZm9yIGp3cy52ZXJpZnlcIik7XG4gICAgZXJyLmNvZGUgPSBcIk1JU1NJTkdfQUxHT1JJVEhNXCI7XG4gICAgdGhyb3cgZXJyO1xuICB9XG4gIGp3c1NpZyA9IHRvU3RyaW5nKGp3c1NpZyk7XG4gIHZhciBzaWduYXR1cmUgPSBzaWduYXR1cmVGcm9tSldTKGp3c1NpZyk7XG4gIHZhciBzZWN1cmVkSW5wdXQgPSBzZWN1cmVkSW5wdXRGcm9tSldTKGp3c1NpZyk7XG4gIHZhciBhbGdvID0gandhKGFsZ29yaXRobSk7XG4gIHJldHVybiBhbGdvLnZlcmlmeShzZWN1cmVkSW5wdXQsIHNpZ25hdHVyZSwgc2VjcmV0T3JLZXkpO1xufVxuXG5mdW5jdGlvbiBqd3NEZWNvZGUoandzU2lnLCBvcHRzKSB7XG4gIG9wdHMgPSBvcHRzIHx8IHt9O1xuICBqd3NTaWcgPSB0b1N0cmluZyhqd3NTaWcpO1xuXG4gIGlmICghaXNWYWxpZEp3cyhqd3NTaWcpKVxuICAgIHJldHVybiBudWxsO1xuXG4gIHZhciBoZWFkZXIgPSBoZWFkZXJGcm9tSldTKGp3c1NpZyk7XG5cbiAgaWYgKCFoZWFkZXIpXG4gICAgcmV0dXJuIG51bGw7XG5cbiAgdmFyIHBheWxvYWQgPSBwYXlsb2FkRnJvbUpXUyhqd3NTaWcpO1xuICBpZiAoaGVhZGVyLnR5cCA9PT0gJ0pXVCcgfHwgb3B0cy5qc29uKVxuICAgIHBheWxvYWQgPSBKU09OLnBhcnNlKHBheWxvYWQsIG9wdHMuZW5jb2RpbmcpO1xuXG4gIHJldHVybiB7XG4gICAgaGVhZGVyOiBoZWFkZXIsXG4gICAgcGF5bG9hZDogcGF5bG9hZCxcbiAgICBzaWduYXR1cmU6IHNpZ25hdHVyZUZyb21KV1MoandzU2lnKVxuICB9O1xufVxuXG5mdW5jdGlvbiBWZXJpZnlTdHJlYW0ob3B0cykge1xuICBvcHRzID0gb3B0cyB8fCB7fTtcbiAgdmFyIHNlY3JldE9yS2V5ID0gb3B0cy5zZWNyZXR8fG9wdHMucHVibGljS2V5fHxvcHRzLmtleTtcbiAgdmFyIHNlY3JldFN0cmVhbSA9IG5ldyBEYXRhU3RyZWFtKHNlY3JldE9yS2V5KTtcbiAgdGhpcy5yZWFkYWJsZSA9IHRydWU7XG4gIHRoaXMuYWxnb3JpdGhtID0gb3B0cy5hbGdvcml0aG07XG4gIHRoaXMuZW5jb2RpbmcgPSBvcHRzLmVuY29kaW5nO1xuICB0aGlzLnNlY3JldCA9IHRoaXMucHVibGljS2V5ID0gdGhpcy5rZXkgPSBzZWNyZXRTdHJlYW07XG4gIHRoaXMuc2lnbmF0dXJlID0gbmV3IERhdGFTdHJlYW0ob3B0cy5zaWduYXR1cmUpO1xuICB0aGlzLnNlY3JldC5vbmNlKCdjbG9zZScsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuc2lnbmF0dXJlLndyaXRhYmxlICYmIHRoaXMucmVhZGFibGUpXG4gICAgICB0aGlzLnZlcmlmeSgpO1xuICB9LmJpbmQodGhpcykpO1xuXG4gIHRoaXMuc2lnbmF0dXJlLm9uY2UoJ2Nsb3NlJywgZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5zZWNyZXQud3JpdGFibGUgJiYgdGhpcy5yZWFkYWJsZSlcbiAgICAgIHRoaXMudmVyaWZ5KCk7XG4gIH0uYmluZCh0aGlzKSk7XG59XG51dGlsLmluaGVyaXRzKFZlcmlmeVN0cmVhbSwgU3RyZWFtKTtcblZlcmlmeVN0cmVhbS5wcm90b3R5cGUudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KCkge1xuICB0cnkge1xuICAgIHZhciB2YWxpZCA9IGp3c1ZlcmlmeSh0aGlzLnNpZ25hdHVyZS5idWZmZXIsIHRoaXMuYWxnb3JpdGhtLCB0aGlzLmtleS5idWZmZXIpO1xuICAgIHZhciBvYmogPSBqd3NEZWNvZGUodGhpcy5zaWduYXR1cmUuYnVmZmVyLCB0aGlzLmVuY29kaW5nKTtcbiAgICB0aGlzLmVtaXQoJ2RvbmUnLCB2YWxpZCwgb2JqKTtcbiAgICB0aGlzLmVtaXQoJ2RhdGEnLCB2YWxpZCk7XG4gICAgdGhpcy5lbWl0KCdlbmQnKTtcbiAgICB0aGlzLnJlYWRhYmxlID0gZmFsc2U7XG4gICAgcmV0dXJuIHZhbGlkO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdGhpcy5yZWFkYWJsZSA9IGZhbHNlO1xuICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlKTtcbiAgICB0aGlzLmVtaXQoJ2Nsb3NlJyk7XG4gIH1cbn07XG5cblZlcmlmeVN0cmVhbS5kZWNvZGUgPSBqd3NEZWNvZGU7XG5WZXJpZnlTdHJlYW0uaXNWYWxpZCA9IGlzVmFsaWRKd3M7XG5WZXJpZnlTdHJlYW0udmVyaWZ5ID0gandzVmVyaWZ5O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFZlcmlmeVN0cmVhbTtcbiIsICIvKmdsb2JhbCBleHBvcnRzKi9cbnZhciBTaWduU3RyZWFtID0gcmVxdWlyZSgnLi9saWIvc2lnbi1zdHJlYW0nKTtcbnZhciBWZXJpZnlTdHJlYW0gPSByZXF1aXJlKCcuL2xpYi92ZXJpZnktc3RyZWFtJyk7XG5cbnZhciBBTEdPUklUSE1TID0gW1xuICAnSFMyNTYnLCAnSFMzODQnLCAnSFM1MTInLFxuICAnUlMyNTYnLCAnUlMzODQnLCAnUlM1MTInLFxuICAnUFMyNTYnLCAnUFMzODQnLCAnUFM1MTInLFxuICAnRVMyNTYnLCAnRVMzODQnLCAnRVM1MTInXG5dO1xuXG5leHBvcnRzLkFMR09SSVRITVMgPSBBTEdPUklUSE1TO1xuZXhwb3J0cy5zaWduID0gU2lnblN0cmVhbS5zaWduO1xuZXhwb3J0cy52ZXJpZnkgPSBWZXJpZnlTdHJlYW0udmVyaWZ5O1xuZXhwb3J0cy5kZWNvZGUgPSBWZXJpZnlTdHJlYW0uZGVjb2RlO1xuZXhwb3J0cy5pc1ZhbGlkID0gVmVyaWZ5U3RyZWFtLmlzVmFsaWQ7XG5leHBvcnRzLmNyZWF0ZVNpZ24gPSBmdW5jdGlvbiBjcmVhdGVTaWduKG9wdHMpIHtcbiAgcmV0dXJuIG5ldyBTaWduU3RyZWFtKG9wdHMpO1xufTtcbmV4cG9ydHMuY3JlYXRlVmVyaWZ5ID0gZnVuY3Rpb24gY3JlYXRlVmVyaWZ5KG9wdHMpIHtcbiAgcmV0dXJuIG5ldyBWZXJpZnlTdHJlYW0ob3B0cyk7XG59O1xuIiwgInZhciBqd3MgPSByZXF1aXJlKCdqd3MnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoand0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICB2YXIgZGVjb2RlZCA9IGp3cy5kZWNvZGUoand0LCBvcHRpb25zKTtcbiAgaWYgKCFkZWNvZGVkKSB7IHJldHVybiBudWxsOyB9XG4gIHZhciBwYXlsb2FkID0gZGVjb2RlZC5wYXlsb2FkO1xuXG4gIC8vdHJ5IHBhcnNlIHRoZSBwYXlsb2FkXG4gIGlmKHR5cGVvZiBwYXlsb2FkID09PSAnc3RyaW5nJykge1xuICAgIHRyeSB7XG4gICAgICB2YXIgb2JqID0gSlNPTi5wYXJzZShwYXlsb2FkKTtcbiAgICAgIGlmKG9iaiAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jykge1xuICAgICAgICBwYXlsb2FkID0gb2JqO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHsgfVxuICB9XG5cbiAgLy9yZXR1cm4gaGVhZGVyIGlmIGBjb21wbGV0ZWAgb3B0aW9uIGlzIGVuYWJsZWQuICBoZWFkZXIgaW5jbHVkZXMgY2xhaW1zXG4gIC8vc3VjaCBhcyBga2lkYCBhbmQgYGFsZ2AgdXNlZCB0byBzZWxlY3QgdGhlIGtleSB3aXRoaW4gYSBKV0tTIG5lZWRlZCB0b1xuICAvL3ZlcmlmeSB0aGUgc2lnbmF0dXJlXG4gIGlmIChvcHRpb25zLmNvbXBsZXRlID09PSB0cnVlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGhlYWRlcjogZGVjb2RlZC5oZWFkZXIsXG4gICAgICBwYXlsb2FkOiBwYXlsb2FkLFxuICAgICAgc2lnbmF0dXJlOiBkZWNvZGVkLnNpZ25hdHVyZVxuICAgIH07XG4gIH1cbiAgcmV0dXJuIHBheWxvYWQ7XG59O1xuIiwgInZhciBKc29uV2ViVG9rZW5FcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlLCBlcnJvcikge1xuICBFcnJvci5jYWxsKHRoaXMsIG1lc3NhZ2UpO1xuICBpZihFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xuICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHRoaXMuY29uc3RydWN0b3IpO1xuICB9XG4gIHRoaXMubmFtZSA9ICdKc29uV2ViVG9rZW5FcnJvcic7XG4gIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gIGlmIChlcnJvcikgdGhpcy5pbm5lciA9IGVycm9yO1xufTtcblxuSnNvbldlYlRva2VuRXJyb3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO1xuSnNvbldlYlRva2VuRXJyb3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gSnNvbldlYlRva2VuRXJyb3I7XG5cbm1vZHVsZS5leHBvcnRzID0gSnNvbldlYlRva2VuRXJyb3I7XG4iLCAidmFyIEpzb25XZWJUb2tlbkVycm9yID0gcmVxdWlyZSgnLi9Kc29uV2ViVG9rZW5FcnJvcicpO1xuXG52YXIgTm90QmVmb3JlRXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSwgZGF0ZSkge1xuICBKc29uV2ViVG9rZW5FcnJvci5jYWxsKHRoaXMsIG1lc3NhZ2UpO1xuICB0aGlzLm5hbWUgPSAnTm90QmVmb3JlRXJyb3InO1xuICB0aGlzLmRhdGUgPSBkYXRlO1xufTtcblxuTm90QmVmb3JlRXJyb3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShKc29uV2ViVG9rZW5FcnJvci5wcm90b3R5cGUpO1xuXG5Ob3RCZWZvcmVFcnJvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBOb3RCZWZvcmVFcnJvcjtcblxubW9kdWxlLmV4cG9ydHMgPSBOb3RCZWZvcmVFcnJvcjsiLCAidmFyIEpzb25XZWJUb2tlbkVycm9yID0gcmVxdWlyZSgnLi9Kc29uV2ViVG9rZW5FcnJvcicpO1xuXG52YXIgVG9rZW5FeHBpcmVkRXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSwgZXhwaXJlZEF0KSB7XG4gIEpzb25XZWJUb2tlbkVycm9yLmNhbGwodGhpcywgbWVzc2FnZSk7XG4gIHRoaXMubmFtZSA9ICdUb2tlbkV4cGlyZWRFcnJvcic7XG4gIHRoaXMuZXhwaXJlZEF0ID0gZXhwaXJlZEF0O1xufTtcblxuVG9rZW5FeHBpcmVkRXJyb3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShKc29uV2ViVG9rZW5FcnJvci5wcm90b3R5cGUpO1xuXG5Ub2tlbkV4cGlyZWRFcnJvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBUb2tlbkV4cGlyZWRFcnJvcjtcblxubW9kdWxlLmV4cG9ydHMgPSBUb2tlbkV4cGlyZWRFcnJvcjsiLCAiLyoqXG4gKiBIZWxwZXJzLlxuICovXG5cbnZhciBzID0gMTAwMDtcbnZhciBtID0gcyAqIDYwO1xudmFyIGggPSBtICogNjA7XG52YXIgZCA9IGggKiAyNDtcbnZhciB3ID0gZCAqIDc7XG52YXIgeSA9IGQgKiAzNjUuMjU7XG5cbi8qKlxuICogUGFyc2Ugb3IgZm9ybWF0IHRoZSBnaXZlbiBgdmFsYC5cbiAqXG4gKiBPcHRpb25zOlxuICpcbiAqICAtIGBsb25nYCB2ZXJib3NlIGZvcm1hdHRpbmcgW2ZhbHNlXVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfE51bWJlcn0gdmFsXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gKiBAdGhyb3dzIHtFcnJvcn0gdGhyb3cgYW4gZXJyb3IgaWYgdmFsIGlzIG5vdCBhIG5vbi1lbXB0eSBzdHJpbmcgb3IgYSBudW1iZXJcbiAqIEByZXR1cm4ge1N0cmluZ3xOdW1iZXJ9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHZhbCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsO1xuICBpZiAodHlwZSA9PT0gJ3N0cmluZycgJiYgdmFsLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gcGFyc2UodmFsKTtcbiAgfSBlbHNlIGlmICh0eXBlID09PSAnbnVtYmVyJyAmJiBpc0Zpbml0ZSh2YWwpKSB7XG4gICAgcmV0dXJuIG9wdGlvbnMubG9uZyA/IGZtdExvbmcodmFsKSA6IGZtdFNob3J0KHZhbCk7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKFxuICAgICd2YWwgaXMgbm90IGEgbm9uLWVtcHR5IHN0cmluZyBvciBhIHZhbGlkIG51bWJlci4gdmFsPScgK1xuICAgICAgSlNPTi5zdHJpbmdpZnkodmFsKVxuICApO1xufTtcblxuLyoqXG4gKiBQYXJzZSB0aGUgZ2l2ZW4gYHN0cmAgYW5kIHJldHVybiBtaWxsaXNlY29uZHMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7TnVtYmVyfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gcGFyc2Uoc3RyKSB7XG4gIHN0ciA9IFN0cmluZyhzdHIpO1xuICBpZiAoc3RyLmxlbmd0aCA+IDEwMCkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgbWF0Y2ggPSAvXigtPyg/OlxcZCspP1xcLj9cXGQrKSAqKG1pbGxpc2Vjb25kcz98bXNlY3M/fG1zfHNlY29uZHM/fHNlY3M/fHN8bWludXRlcz98bWlucz98bXxob3Vycz98aHJzP3xofGRheXM/fGR8d2Vla3M/fHd8eWVhcnM/fHlycz98eSk/JC9pLmV4ZWMoXG4gICAgc3RyXG4gICk7XG4gIGlmICghbWF0Y2gpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIG4gPSBwYXJzZUZsb2F0KG1hdGNoWzFdKTtcbiAgdmFyIHR5cGUgPSAobWF0Y2hbMl0gfHwgJ21zJykudG9Mb3dlckNhc2UoKTtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAneWVhcnMnOlxuICAgIGNhc2UgJ3llYXInOlxuICAgIGNhc2UgJ3lycyc6XG4gICAgY2FzZSAneXInOlxuICAgIGNhc2UgJ3knOlxuICAgICAgcmV0dXJuIG4gKiB5O1xuICAgIGNhc2UgJ3dlZWtzJzpcbiAgICBjYXNlICd3ZWVrJzpcbiAgICBjYXNlICd3JzpcbiAgICAgIHJldHVybiBuICogdztcbiAgICBjYXNlICdkYXlzJzpcbiAgICBjYXNlICdkYXknOlxuICAgIGNhc2UgJ2QnOlxuICAgICAgcmV0dXJuIG4gKiBkO1xuICAgIGNhc2UgJ2hvdXJzJzpcbiAgICBjYXNlICdob3VyJzpcbiAgICBjYXNlICdocnMnOlxuICAgIGNhc2UgJ2hyJzpcbiAgICBjYXNlICdoJzpcbiAgICAgIHJldHVybiBuICogaDtcbiAgICBjYXNlICdtaW51dGVzJzpcbiAgICBjYXNlICdtaW51dGUnOlxuICAgIGNhc2UgJ21pbnMnOlxuICAgIGNhc2UgJ21pbic6XG4gICAgY2FzZSAnbSc6XG4gICAgICByZXR1cm4gbiAqIG07XG4gICAgY2FzZSAnc2Vjb25kcyc6XG4gICAgY2FzZSAnc2Vjb25kJzpcbiAgICBjYXNlICdzZWNzJzpcbiAgICBjYXNlICdzZWMnOlxuICAgIGNhc2UgJ3MnOlxuICAgICAgcmV0dXJuIG4gKiBzO1xuICAgIGNhc2UgJ21pbGxpc2Vjb25kcyc6XG4gICAgY2FzZSAnbWlsbGlzZWNvbmQnOlxuICAgIGNhc2UgJ21zZWNzJzpcbiAgICBjYXNlICdtc2VjJzpcbiAgICBjYXNlICdtcyc6XG4gICAgICByZXR1cm4gbjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuXG4vKipcbiAqIFNob3J0IGZvcm1hdCBmb3IgYG1zYC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbXNcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGZtdFNob3J0KG1zKSB7XG4gIHZhciBtc0FicyA9IE1hdGguYWJzKG1zKTtcbiAgaWYgKG1zQWJzID49IGQpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIGQpICsgJ2QnO1xuICB9XG4gIGlmIChtc0FicyA+PSBoKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBoKSArICdoJztcbiAgfVxuICBpZiAobXNBYnMgPj0gbSkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gbSkgKyAnbSc7XG4gIH1cbiAgaWYgKG1zQWJzID49IHMpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIHMpICsgJ3MnO1xuICB9XG4gIHJldHVybiBtcyArICdtcyc7XG59XG5cbi8qKlxuICogTG9uZyBmb3JtYXQgZm9yIGBtc2AuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG1zXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBmbXRMb25nKG1zKSB7XG4gIHZhciBtc0FicyA9IE1hdGguYWJzKG1zKTtcbiAgaWYgKG1zQWJzID49IGQpIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgZCwgJ2RheScpO1xuICB9XG4gIGlmIChtc0FicyA+PSBoKSB7XG4gICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIGgsICdob3VyJyk7XG4gIH1cbiAgaWYgKG1zQWJzID49IG0pIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgbSwgJ21pbnV0ZScpO1xuICB9XG4gIGlmIChtc0FicyA+PSBzKSB7XG4gICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIHMsICdzZWNvbmQnKTtcbiAgfVxuICByZXR1cm4gbXMgKyAnIG1zJztcbn1cblxuLyoqXG4gKiBQbHVyYWxpemF0aW9uIGhlbHBlci5cbiAqL1xuXG5mdW5jdGlvbiBwbHVyYWwobXMsIG1zQWJzLCBuLCBuYW1lKSB7XG4gIHZhciBpc1BsdXJhbCA9IG1zQWJzID49IG4gKiAxLjU7XG4gIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gbikgKyAnICcgKyBuYW1lICsgKGlzUGx1cmFsID8gJ3MnIDogJycpO1xufVxuIiwgInZhciBtcyA9IHJlcXVpcmUoJ21zJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHRpbWUsIGlhdCkge1xuICB2YXIgdGltZXN0YW1wID0gaWF0IHx8IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApO1xuXG4gIGlmICh0eXBlb2YgdGltZSA9PT0gJ3N0cmluZycpIHtcbiAgICB2YXIgbWlsbGlzZWNvbmRzID0gbXModGltZSk7XG4gICAgaWYgKHR5cGVvZiBtaWxsaXNlY29uZHMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJldHVybiBNYXRoLmZsb29yKHRpbWVzdGFtcCArIG1pbGxpc2Vjb25kcyAvIDEwMDApO1xuICB9IGVsc2UgaWYgKHR5cGVvZiB0aW1lID09PSAnbnVtYmVyJykge1xuICAgIHJldHVybiB0aW1lc3RhbXAgKyB0aW1lO1xuICB9IGVsc2Uge1xuICAgIHJldHVybjtcbiAgfVxuXG59OyIsICIvLyBOb3RlOiB0aGlzIGlzIHRoZSBzZW12ZXIub3JnIHZlcnNpb24gb2YgdGhlIHNwZWMgdGhhdCBpdCBpbXBsZW1lbnRzXG4vLyBOb3QgbmVjZXNzYXJpbHkgdGhlIHBhY2thZ2UgdmVyc2lvbiBvZiB0aGlzIGNvZGUuXG5jb25zdCBTRU1WRVJfU1BFQ19WRVJTSU9OID0gJzIuMC4wJ1xuXG5jb25zdCBNQVhfTEVOR1RIID0gMjU2XG5jb25zdCBNQVhfU0FGRV9JTlRFR0VSID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgfHxcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIDkwMDcxOTkyNTQ3NDA5OTFcblxuLy8gTWF4IHNhZmUgc2VnbWVudCBsZW5ndGggZm9yIGNvZXJjaW9uLlxuY29uc3QgTUFYX1NBRkVfQ09NUE9ORU5UX0xFTkdUSCA9IDE2XG5cbi8vIE1heCBzYWZlIGxlbmd0aCBmb3IgYSBidWlsZCBpZGVudGlmaWVyLiBUaGUgbWF4IGxlbmd0aCBtaW51cyA2IGNoYXJhY3RlcnMgZm9yXG4vLyB0aGUgc2hvcnRlc3QgdmVyc2lvbiB3aXRoIGEgYnVpbGQgMC4wLjArQlVJTEQuXG5jb25zdCBNQVhfU0FGRV9CVUlMRF9MRU5HVEggPSBNQVhfTEVOR1RIIC0gNlxuXG5jb25zdCBSRUxFQVNFX1RZUEVTID0gW1xuICAnbWFqb3InLFxuICAncHJlbWFqb3InLFxuICAnbWlub3InLFxuICAncHJlbWlub3InLFxuICAncGF0Y2gnLFxuICAncHJlcGF0Y2gnLFxuICAncHJlcmVsZWFzZScsXG5dXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBNQVhfTEVOR1RILFxuICBNQVhfU0FGRV9DT01QT05FTlRfTEVOR1RILFxuICBNQVhfU0FGRV9CVUlMRF9MRU5HVEgsXG4gIE1BWF9TQUZFX0lOVEVHRVIsXG4gIFJFTEVBU0VfVFlQRVMsXG4gIFNFTVZFUl9TUEVDX1ZFUlNJT04sXG4gIEZMQUdfSU5DTFVERV9QUkVSRUxFQVNFOiAwYjAwMSxcbiAgRkxBR19MT09TRTogMGIwMTAsXG59XG4iLCAiY29uc3QgZGVidWcgPSAoXG4gIHR5cGVvZiBwcm9jZXNzID09PSAnb2JqZWN0JyAmJlxuICBwcm9jZXNzLmVudiAmJlxuICBwcm9jZXNzLmVudi5OT0RFX0RFQlVHICYmXG4gIC9cXGJzZW12ZXJcXGIvaS50ZXN0KHByb2Nlc3MuZW52Lk5PREVfREVCVUcpXG4pID8gKC4uLmFyZ3MpID0+IGNvbnNvbGUuZXJyb3IoJ1NFTVZFUicsIC4uLmFyZ3MpXG4gIDogKCkgPT4ge31cblxubW9kdWxlLmV4cG9ydHMgPSBkZWJ1Z1xuIiwgImNvbnN0IHtcbiAgTUFYX1NBRkVfQ09NUE9ORU5UX0xFTkdUSCxcbiAgTUFYX1NBRkVfQlVJTERfTEVOR1RILFxuICBNQVhfTEVOR1RILFxufSA9IHJlcXVpcmUoJy4vY29uc3RhbnRzJylcbmNvbnN0IGRlYnVnID0gcmVxdWlyZSgnLi9kZWJ1ZycpXG5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSB7fVxuXG4vLyBUaGUgYWN0dWFsIHJlZ2V4cHMgZ28gb24gZXhwb3J0cy5yZVxuY29uc3QgcmUgPSBleHBvcnRzLnJlID0gW11cbmNvbnN0IHNhZmVSZSA9IGV4cG9ydHMuc2FmZVJlID0gW11cbmNvbnN0IHNyYyA9IGV4cG9ydHMuc3JjID0gW11cbmNvbnN0IHNhZmVTcmMgPSBleHBvcnRzLnNhZmVTcmMgPSBbXVxuY29uc3QgdCA9IGV4cG9ydHMudCA9IHt9XG5sZXQgUiA9IDBcblxuY29uc3QgTEVUVEVSREFTSE5VTUJFUiA9ICdbYS16QS1aMC05LV0nXG5cbi8vIFJlcGxhY2Ugc29tZSBncmVlZHkgcmVnZXggdG9rZW5zIHRvIHByZXZlbnQgcmVnZXggZG9zIGlzc3Vlcy4gVGhlc2UgcmVnZXggYXJlXG4vLyB1c2VkIGludGVybmFsbHkgdmlhIHRoZSBzYWZlUmUgb2JqZWN0IHNpbmNlIGFsbCBpbnB1dHMgaW4gdGhpcyBsaWJyYXJ5IGdldFxuLy8gbm9ybWFsaXplZCBmaXJzdCB0byB0cmltIGFuZCBjb2xsYXBzZSBhbGwgZXh0cmEgd2hpdGVzcGFjZS4gVGhlIG9yaWdpbmFsXG4vLyByZWdleGVzIGFyZSBleHBvcnRlZCBmb3IgdXNlcmxhbmQgY29uc3VtcHRpb24gYW5kIGxvd2VyIGxldmVsIHVzYWdlLiBBXG4vLyBmdXR1cmUgYnJlYWtpbmcgY2hhbmdlIGNvdWxkIGV4cG9ydCB0aGUgc2FmZXIgcmVnZXggb25seSB3aXRoIGEgbm90ZSB0aGF0XG4vLyBhbGwgaW5wdXQgc2hvdWxkIGhhdmUgZXh0cmEgd2hpdGVzcGFjZSByZW1vdmVkLlxuY29uc3Qgc2FmZVJlZ2V4UmVwbGFjZW1lbnRzID0gW1xuICBbJ1xcXFxzJywgMV0sXG4gIFsnXFxcXGQnLCBNQVhfTEVOR1RIXSxcbiAgW0xFVFRFUkRBU0hOVU1CRVIsIE1BWF9TQUZFX0JVSUxEX0xFTkdUSF0sXG5dXG5cbmNvbnN0IG1ha2VTYWZlUmVnZXggPSAodmFsdWUpID0+IHtcbiAgZm9yIChjb25zdCBbdG9rZW4sIG1heF0gb2Ygc2FmZVJlZ2V4UmVwbGFjZW1lbnRzKSB7XG4gICAgdmFsdWUgPSB2YWx1ZVxuICAgICAgLnNwbGl0KGAke3Rva2VufSpgKS5qb2luKGAke3Rva2VufXswLCR7bWF4fX1gKVxuICAgICAgLnNwbGl0KGAke3Rva2VufStgKS5qb2luKGAke3Rva2VufXsxLCR7bWF4fX1gKVxuICB9XG4gIHJldHVybiB2YWx1ZVxufVxuXG5jb25zdCBjcmVhdGVUb2tlbiA9IChuYW1lLCB2YWx1ZSwgaXNHbG9iYWwpID0+IHtcbiAgY29uc3Qgc2FmZSA9IG1ha2VTYWZlUmVnZXgodmFsdWUpXG4gIGNvbnN0IGluZGV4ID0gUisrXG4gIGRlYnVnKG5hbWUsIGluZGV4LCB2YWx1ZSlcbiAgdFtuYW1lXSA9IGluZGV4XG4gIHNyY1tpbmRleF0gPSB2YWx1ZVxuICBzYWZlU3JjW2luZGV4XSA9IHNhZmVcbiAgcmVbaW5kZXhdID0gbmV3IFJlZ0V4cCh2YWx1ZSwgaXNHbG9iYWwgPyAnZycgOiB1bmRlZmluZWQpXG4gIHNhZmVSZVtpbmRleF0gPSBuZXcgUmVnRXhwKHNhZmUsIGlzR2xvYmFsID8gJ2cnIDogdW5kZWZpbmVkKVxufVxuXG4vLyBUaGUgZm9sbG93aW5nIFJlZ3VsYXIgRXhwcmVzc2lvbnMgY2FuIGJlIHVzZWQgZm9yIHRva2VuaXppbmcsXG4vLyB2YWxpZGF0aW5nLCBhbmQgcGFyc2luZyBTZW1WZXIgdmVyc2lvbiBzdHJpbmdzLlxuXG4vLyAjIyBOdW1lcmljIElkZW50aWZpZXJcbi8vIEEgc2luZ2xlIGAwYCwgb3IgYSBub24temVybyBkaWdpdCBmb2xsb3dlZCBieSB6ZXJvIG9yIG1vcmUgZGlnaXRzLlxuXG5jcmVhdGVUb2tlbignTlVNRVJJQ0lERU5USUZJRVInLCAnMHxbMS05XVxcXFxkKicpXG5jcmVhdGVUb2tlbignTlVNRVJJQ0lERU5USUZJRVJMT09TRScsICdcXFxcZCsnKVxuXG4vLyAjIyBOb24tbnVtZXJpYyBJZGVudGlmaWVyXG4vLyBaZXJvIG9yIG1vcmUgZGlnaXRzLCBmb2xsb3dlZCBieSBhIGxldHRlciBvciBoeXBoZW4sIGFuZCB0aGVuIHplcm8gb3Jcbi8vIG1vcmUgbGV0dGVycywgZGlnaXRzLCBvciBoeXBoZW5zLlxuXG5jcmVhdGVUb2tlbignTk9OTlVNRVJJQ0lERU5USUZJRVInLCBgXFxcXGQqW2EtekEtWi1dJHtMRVRURVJEQVNITlVNQkVSfSpgKVxuXG4vLyAjIyBNYWluIFZlcnNpb25cbi8vIFRocmVlIGRvdC1zZXBhcmF0ZWQgbnVtZXJpYyBpZGVudGlmaWVycy5cblxuY3JlYXRlVG9rZW4oJ01BSU5WRVJTSU9OJywgYCgke3NyY1t0Lk5VTUVSSUNJREVOVElGSUVSXX0pXFxcXC5gICtcbiAgICAgICAgICAgICAgICAgICBgKCR7c3JjW3QuTlVNRVJJQ0lERU5USUZJRVJdfSlcXFxcLmAgK1xuICAgICAgICAgICAgICAgICAgIGAoJHtzcmNbdC5OVU1FUklDSURFTlRJRklFUl19KWApXG5cbmNyZWF0ZVRva2VuKCdNQUlOVkVSU0lPTkxPT1NFJywgYCgke3NyY1t0Lk5VTUVSSUNJREVOVElGSUVSTE9PU0VdfSlcXFxcLmAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYCgke3NyY1t0Lk5VTUVSSUNJREVOVElGSUVSTE9PU0VdfSlcXFxcLmAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYCgke3NyY1t0Lk5VTUVSSUNJREVOVElGSUVSTE9PU0VdfSlgKVxuXG4vLyAjIyBQcmUtcmVsZWFzZSBWZXJzaW9uIElkZW50aWZpZXJcbi8vIEEgbnVtZXJpYyBpZGVudGlmaWVyLCBvciBhIG5vbi1udW1lcmljIGlkZW50aWZpZXIuXG5cbmNyZWF0ZVRva2VuKCdQUkVSRUxFQVNFSURFTlRJRklFUicsIGAoPzoke3NyY1t0Lk5VTUVSSUNJREVOVElGSUVSXVxufXwke3NyY1t0Lk5PTk5VTUVSSUNJREVOVElGSUVSXX0pYClcblxuY3JlYXRlVG9rZW4oJ1BSRVJFTEVBU0VJREVOVElGSUVSTE9PU0UnLCBgKD86JHtzcmNbdC5OVU1FUklDSURFTlRJRklFUkxPT1NFXVxufXwke3NyY1t0Lk5PTk5VTUVSSUNJREVOVElGSUVSXX0pYClcblxuLy8gIyMgUHJlLXJlbGVhc2UgVmVyc2lvblxuLy8gSHlwaGVuLCBmb2xsb3dlZCBieSBvbmUgb3IgbW9yZSBkb3Qtc2VwYXJhdGVkIHByZS1yZWxlYXNlIHZlcnNpb25cbi8vIGlkZW50aWZpZXJzLlxuXG5jcmVhdGVUb2tlbignUFJFUkVMRUFTRScsIGAoPzotKCR7c3JjW3QuUFJFUkVMRUFTRUlERU5USUZJRVJdXG59KD86XFxcXC4ke3NyY1t0LlBSRVJFTEVBU0VJREVOVElGSUVSXX0pKikpYClcblxuY3JlYXRlVG9rZW4oJ1BSRVJFTEVBU0VMT09TRScsIGAoPzotPygke3NyY1t0LlBSRVJFTEVBU0VJREVOVElGSUVSTE9PU0VdXG59KD86XFxcXC4ke3NyY1t0LlBSRVJFTEVBU0VJREVOVElGSUVSTE9PU0VdfSkqKSlgKVxuXG4vLyAjIyBCdWlsZCBNZXRhZGF0YSBJZGVudGlmaWVyXG4vLyBBbnkgY29tYmluYXRpb24gb2YgZGlnaXRzLCBsZXR0ZXJzLCBvciBoeXBoZW5zLlxuXG5jcmVhdGVUb2tlbignQlVJTERJREVOVElGSUVSJywgYCR7TEVUVEVSREFTSE5VTUJFUn0rYClcblxuLy8gIyMgQnVpbGQgTWV0YWRhdGFcbi8vIFBsdXMgc2lnbiwgZm9sbG93ZWQgYnkgb25lIG9yIG1vcmUgcGVyaW9kLXNlcGFyYXRlZCBidWlsZCBtZXRhZGF0YVxuLy8gaWRlbnRpZmllcnMuXG5cbmNyZWF0ZVRva2VuKCdCVUlMRCcsIGAoPzpcXFxcKygke3NyY1t0LkJVSUxESURFTlRJRklFUl1cbn0oPzpcXFxcLiR7c3JjW3QuQlVJTERJREVOVElGSUVSXX0pKikpYClcblxuLy8gIyMgRnVsbCBWZXJzaW9uIFN0cmluZ1xuLy8gQSBtYWluIHZlcnNpb24sIGZvbGxvd2VkIG9wdGlvbmFsbHkgYnkgYSBwcmUtcmVsZWFzZSB2ZXJzaW9uIGFuZFxuLy8gYnVpbGQgbWV0YWRhdGEuXG5cbi8vIE5vdGUgdGhhdCB0aGUgb25seSBtYWpvciwgbWlub3IsIHBhdGNoLCBhbmQgcHJlLXJlbGVhc2Ugc2VjdGlvbnMgb2Zcbi8vIHRoZSB2ZXJzaW9uIHN0cmluZyBhcmUgY2FwdHVyaW5nIGdyb3Vwcy4gIFRoZSBidWlsZCBtZXRhZGF0YSBpcyBub3QgYVxuLy8gY2FwdHVyaW5nIGdyb3VwLCBiZWNhdXNlIGl0IHNob3VsZCBub3QgZXZlciBiZSB1c2VkIGluIHZlcnNpb25cbi8vIGNvbXBhcmlzb24uXG5cbmNyZWF0ZVRva2VuKCdGVUxMUExBSU4nLCBgdj8ke3NyY1t0Lk1BSU5WRVJTSU9OXVxufSR7c3JjW3QuUFJFUkVMRUFTRV19PyR7XG4gIHNyY1t0LkJVSUxEXX0/YClcblxuY3JlYXRlVG9rZW4oJ0ZVTEwnLCBgXiR7c3JjW3QuRlVMTFBMQUlOXX0kYClcblxuLy8gbGlrZSBmdWxsLCBidXQgYWxsb3dzIHYxLjIuMyBhbmQgPTEuMi4zLCB3aGljaCBwZW9wbGUgZG8gc29tZXRpbWVzLlxuLy8gYWxzbywgMS4wLjBhbHBoYTEgKHByZXJlbGVhc2Ugd2l0aG91dCB0aGUgaHlwaGVuKSB3aGljaCBpcyBwcmV0dHlcbi8vIGNvbW1vbiBpbiB0aGUgbnBtIHJlZ2lzdHJ5LlxuY3JlYXRlVG9rZW4oJ0xPT1NFUExBSU4nLCBgW3Y9XFxcXHNdKiR7c3JjW3QuTUFJTlZFUlNJT05MT09TRV1cbn0ke3NyY1t0LlBSRVJFTEVBU0VMT09TRV19PyR7XG4gIHNyY1t0LkJVSUxEXX0/YClcblxuY3JlYXRlVG9rZW4oJ0xPT1NFJywgYF4ke3NyY1t0LkxPT1NFUExBSU5dfSRgKVxuXG5jcmVhdGVUb2tlbignR1RMVCcsICcoKD86PHw+KT89PyknKVxuXG4vLyBTb21ldGhpbmcgbGlrZSBcIjIuKlwiIG9yIFwiMS4yLnhcIi5cbi8vIE5vdGUgdGhhdCBcIngueFwiIGlzIGEgdmFsaWQgeFJhbmdlIGlkZW50aWZlciwgbWVhbmluZyBcImFueSB2ZXJzaW9uXCJcbi8vIE9ubHkgdGhlIGZpcnN0IGl0ZW0gaXMgc3RyaWN0bHkgcmVxdWlyZWQuXG5jcmVhdGVUb2tlbignWFJBTkdFSURFTlRJRklFUkxPT1NFJywgYCR7c3JjW3QuTlVNRVJJQ0lERU5USUZJRVJMT09TRV19fHh8WHxcXFxcKmApXG5jcmVhdGVUb2tlbignWFJBTkdFSURFTlRJRklFUicsIGAke3NyY1t0Lk5VTUVSSUNJREVOVElGSUVSXX18eHxYfFxcXFwqYClcblxuY3JlYXRlVG9rZW4oJ1hSQU5HRVBMQUlOJywgYFt2PVxcXFxzXSooJHtzcmNbdC5YUkFOR0VJREVOVElGSUVSXX0pYCArXG4gICAgICAgICAgICAgICAgICAgYCg/OlxcXFwuKCR7c3JjW3QuWFJBTkdFSURFTlRJRklFUl19KWAgK1xuICAgICAgICAgICAgICAgICAgIGAoPzpcXFxcLigke3NyY1t0LlhSQU5HRUlERU5USUZJRVJdfSlgICtcbiAgICAgICAgICAgICAgICAgICBgKD86JHtzcmNbdC5QUkVSRUxFQVNFXX0pPyR7XG4gICAgICAgICAgICAgICAgICAgICBzcmNbdC5CVUlMRF19P2AgK1xuICAgICAgICAgICAgICAgICAgIGApPyk/YClcblxuY3JlYXRlVG9rZW4oJ1hSQU5HRVBMQUlOTE9PU0UnLCBgW3Y9XFxcXHNdKigke3NyY1t0LlhSQU5HRUlERU5USUZJRVJMT09TRV19KWAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYCg/OlxcXFwuKCR7c3JjW3QuWFJBTkdFSURFTlRJRklFUkxPT1NFXX0pYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgKD86XFxcXC4oJHtzcmNbdC5YUkFOR0VJREVOVElGSUVSTE9PU0VdfSlgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGAoPzoke3NyY1t0LlBSRVJFTEVBU0VMT09TRV19KT8ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzcmNbdC5CVUlMRF19P2AgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYCk/KT9gKVxuXG5jcmVhdGVUb2tlbignWFJBTkdFJywgYF4ke3NyY1t0LkdUTFRdfVxcXFxzKiR7c3JjW3QuWFJBTkdFUExBSU5dfSRgKVxuY3JlYXRlVG9rZW4oJ1hSQU5HRUxPT1NFJywgYF4ke3NyY1t0LkdUTFRdfVxcXFxzKiR7c3JjW3QuWFJBTkdFUExBSU5MT09TRV19JGApXG5cbi8vIENvZXJjaW9uLlxuLy8gRXh0cmFjdCBhbnl0aGluZyB0aGF0IGNvdWxkIGNvbmNlaXZhYmx5IGJlIGEgcGFydCBvZiBhIHZhbGlkIHNlbXZlclxuY3JlYXRlVG9rZW4oJ0NPRVJDRVBMQUlOJywgYCR7JyhefFteXFxcXGRdKScgK1xuICAgICAgICAgICAgICAnKFxcXFxkezEsJ30ke01BWF9TQUZFX0NPTVBPTkVOVF9MRU5HVEh9fSlgICtcbiAgICAgICAgICAgICAgYCg/OlxcXFwuKFxcXFxkezEsJHtNQVhfU0FGRV9DT01QT05FTlRfTEVOR1RIfX0pKT9gICtcbiAgICAgICAgICAgICAgYCg/OlxcXFwuKFxcXFxkezEsJHtNQVhfU0FGRV9DT01QT05FTlRfTEVOR1RIfX0pKT9gKVxuY3JlYXRlVG9rZW4oJ0NPRVJDRScsIGAke3NyY1t0LkNPRVJDRVBMQUlOXX0oPzokfFteXFxcXGRdKWApXG5jcmVhdGVUb2tlbignQ09FUkNFRlVMTCcsIHNyY1t0LkNPRVJDRVBMQUlOXSArXG4gICAgICAgICAgICAgIGAoPzoke3NyY1t0LlBSRVJFTEVBU0VdfSk/YCArXG4gICAgICAgICAgICAgIGAoPzoke3NyY1t0LkJVSUxEXX0pP2AgK1xuICAgICAgICAgICAgICBgKD86JHxbXlxcXFxkXSlgKVxuY3JlYXRlVG9rZW4oJ0NPRVJDRVJUTCcsIHNyY1t0LkNPRVJDRV0sIHRydWUpXG5jcmVhdGVUb2tlbignQ09FUkNFUlRMRlVMTCcsIHNyY1t0LkNPRVJDRUZVTExdLCB0cnVlKVxuXG4vLyBUaWxkZSByYW5nZXMuXG4vLyBNZWFuaW5nIGlzIFwicmVhc29uYWJseSBhdCBvciBncmVhdGVyIHRoYW5cIlxuY3JlYXRlVG9rZW4oJ0xPTkVUSUxERScsICcoPzp+Pj8pJylcblxuY3JlYXRlVG9rZW4oJ1RJTERFVFJJTScsIGAoXFxcXHMqKSR7c3JjW3QuTE9ORVRJTERFXX1cXFxccytgLCB0cnVlKVxuZXhwb3J0cy50aWxkZVRyaW1SZXBsYWNlID0gJyQxfidcblxuY3JlYXRlVG9rZW4oJ1RJTERFJywgYF4ke3NyY1t0LkxPTkVUSUxERV19JHtzcmNbdC5YUkFOR0VQTEFJTl19JGApXG5jcmVhdGVUb2tlbignVElMREVMT09TRScsIGBeJHtzcmNbdC5MT05FVElMREVdfSR7c3JjW3QuWFJBTkdFUExBSU5MT09TRV19JGApXG5cbi8vIENhcmV0IHJhbmdlcy5cbi8vIE1lYW5pbmcgaXMgXCJhdCBsZWFzdCBhbmQgYmFja3dhcmRzIGNvbXBhdGlibGUgd2l0aFwiXG5jcmVhdGVUb2tlbignTE9ORUNBUkVUJywgJyg/OlxcXFxeKScpXG5cbmNyZWF0ZVRva2VuKCdDQVJFVFRSSU0nLCBgKFxcXFxzKikke3NyY1t0LkxPTkVDQVJFVF19XFxcXHMrYCwgdHJ1ZSlcbmV4cG9ydHMuY2FyZXRUcmltUmVwbGFjZSA9ICckMV4nXG5cbmNyZWF0ZVRva2VuKCdDQVJFVCcsIGBeJHtzcmNbdC5MT05FQ0FSRVRdfSR7c3JjW3QuWFJBTkdFUExBSU5dfSRgKVxuY3JlYXRlVG9rZW4oJ0NBUkVUTE9PU0UnLCBgXiR7c3JjW3QuTE9ORUNBUkVUXX0ke3NyY1t0LlhSQU5HRVBMQUlOTE9PU0VdfSRgKVxuXG4vLyBBIHNpbXBsZSBndC9sdC9lcSB0aGluZywgb3IganVzdCBcIlwiIHRvIGluZGljYXRlIFwiYW55IHZlcnNpb25cIlxuY3JlYXRlVG9rZW4oJ0NPTVBBUkFUT1JMT09TRScsIGBeJHtzcmNbdC5HVExUXX1cXFxccyooJHtzcmNbdC5MT09TRVBMQUlOXX0pJHxeJGApXG5jcmVhdGVUb2tlbignQ09NUEFSQVRPUicsIGBeJHtzcmNbdC5HVExUXX1cXFxccyooJHtzcmNbdC5GVUxMUExBSU5dfSkkfF4kYClcblxuLy8gQW4gZXhwcmVzc2lvbiB0byBzdHJpcCBhbnkgd2hpdGVzcGFjZSBiZXR3ZWVuIHRoZSBndGx0IGFuZCB0aGUgdGhpbmdcbi8vIGl0IG1vZGlmaWVzLCBzbyB0aGF0IGA+IDEuMi4zYCA9PT4gYD4xLjIuM2BcbmNyZWF0ZVRva2VuKCdDT01QQVJBVE9SVFJJTScsIGAoXFxcXHMqKSR7c3JjW3QuR1RMVF1cbn1cXFxccyooJHtzcmNbdC5MT09TRVBMQUlOXX18JHtzcmNbdC5YUkFOR0VQTEFJTl19KWAsIHRydWUpXG5leHBvcnRzLmNvbXBhcmF0b3JUcmltUmVwbGFjZSA9ICckMSQyJDMnXG5cbi8vIFNvbWV0aGluZyBsaWtlIGAxLjIuMyAtIDEuMi40YFxuLy8gTm90ZSB0aGF0IHRoZXNlIGFsbCB1c2UgdGhlIGxvb3NlIGZvcm0sIGJlY2F1c2UgdGhleSdsbCBiZVxuLy8gY2hlY2tlZCBhZ2FpbnN0IGVpdGhlciB0aGUgc3RyaWN0IG9yIGxvb3NlIGNvbXBhcmF0b3IgZm9ybVxuLy8gbGF0ZXIuXG5jcmVhdGVUb2tlbignSFlQSEVOUkFOR0UnLCBgXlxcXFxzKigke3NyY1t0LlhSQU5HRVBMQUlOXX0pYCArXG4gICAgICAgICAgICAgICAgICAgYFxcXFxzKy1cXFxccytgICtcbiAgICAgICAgICAgICAgICAgICBgKCR7c3JjW3QuWFJBTkdFUExBSU5dfSlgICtcbiAgICAgICAgICAgICAgICAgICBgXFxcXHMqJGApXG5cbmNyZWF0ZVRva2VuKCdIWVBIRU5SQU5HRUxPT1NFJywgYF5cXFxccyooJHtzcmNbdC5YUkFOR0VQTEFJTkxPT1NFXX0pYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgXFxcXHMrLVxcXFxzK2AgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYCgke3NyY1t0LlhSQU5HRVBMQUlOTE9PU0VdfSlgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBcXFxccyokYClcblxuLy8gU3RhciByYW5nZXMgYmFzaWNhbGx5IGp1c3QgYWxsb3cgYW55dGhpbmcgYXQgYWxsLlxuY3JlYXRlVG9rZW4oJ1NUQVInLCAnKDx8Pik/PT9cXFxccypcXFxcKicpXG4vLyA+PTAuMC4wIGlzIGxpa2UgYSBzdGFyXG5jcmVhdGVUb2tlbignR1RFMCcsICdeXFxcXHMqPj1cXFxccyowXFxcXC4wXFxcXC4wXFxcXHMqJCcpXG5jcmVhdGVUb2tlbignR1RFMFBSRScsICdeXFxcXHMqPj1cXFxccyowXFxcXC4wXFxcXC4wLTBcXFxccyokJylcbiIsICIvLyBwYXJzZSBvdXQganVzdCB0aGUgb3B0aW9ucyB3ZSBjYXJlIGFib3V0XG5jb25zdCBsb29zZU9wdGlvbiA9IE9iamVjdC5mcmVlemUoeyBsb29zZTogdHJ1ZSB9KVxuY29uc3QgZW1wdHlPcHRzID0gT2JqZWN0LmZyZWV6ZSh7IH0pXG5jb25zdCBwYXJzZU9wdGlvbnMgPSBvcHRpb25zID0+IHtcbiAgaWYgKCFvcHRpb25zKSB7XG4gICAgcmV0dXJuIGVtcHR5T3B0c1xuICB9XG5cbiAgaWYgKHR5cGVvZiBvcHRpb25zICE9PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiBsb29zZU9wdGlvblxuICB9XG5cbiAgcmV0dXJuIG9wdGlvbnNcbn1cbm1vZHVsZS5leHBvcnRzID0gcGFyc2VPcHRpb25zXG4iLCAiY29uc3QgbnVtZXJpYyA9IC9eWzAtOV0rJC9cbmNvbnN0IGNvbXBhcmVJZGVudGlmaWVycyA9IChhLCBiKSA9PiB7XG4gIGNvbnN0IGFudW0gPSBudW1lcmljLnRlc3QoYSlcbiAgY29uc3QgYm51bSA9IG51bWVyaWMudGVzdChiKVxuXG4gIGlmIChhbnVtICYmIGJudW0pIHtcbiAgICBhID0gK2FcbiAgICBiID0gK2JcbiAgfVxuXG4gIHJldHVybiBhID09PSBiID8gMFxuICAgIDogKGFudW0gJiYgIWJudW0pID8gLTFcbiAgICA6IChibnVtICYmICFhbnVtKSA/IDFcbiAgICA6IGEgPCBiID8gLTFcbiAgICA6IDFcbn1cblxuY29uc3QgcmNvbXBhcmVJZGVudGlmaWVycyA9IChhLCBiKSA9PiBjb21wYXJlSWRlbnRpZmllcnMoYiwgYSlcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNvbXBhcmVJZGVudGlmaWVycyxcbiAgcmNvbXBhcmVJZGVudGlmaWVycyxcbn1cbiIsICJjb25zdCBkZWJ1ZyA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2RlYnVnJylcbmNvbnN0IHsgTUFYX0xFTkdUSCwgTUFYX1NBRkVfSU5URUdFUiB9ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvY29uc3RhbnRzJylcbmNvbnN0IHsgc2FmZVJlOiByZSwgc2FmZVNyYzogc3JjLCB0IH0gPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9yZScpXG5cbmNvbnN0IHBhcnNlT3B0aW9ucyA9IHJlcXVpcmUoJy4uL2ludGVybmFsL3BhcnNlLW9wdGlvbnMnKVxuY29uc3QgeyBjb21wYXJlSWRlbnRpZmllcnMgfSA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2lkZW50aWZpZXJzJylcbmNsYXNzIFNlbVZlciB7XG4gIGNvbnN0cnVjdG9yICh2ZXJzaW9uLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IHBhcnNlT3B0aW9ucyhvcHRpb25zKVxuXG4gICAgaWYgKHZlcnNpb24gaW5zdGFuY2VvZiBTZW1WZXIpIHtcbiAgICAgIGlmICh2ZXJzaW9uLmxvb3NlID09PSAhIW9wdGlvbnMubG9vc2UgJiZcbiAgICAgICAgdmVyc2lvbi5pbmNsdWRlUHJlcmVsZWFzZSA9PT0gISFvcHRpb25zLmluY2x1ZGVQcmVyZWxlYXNlKSB7XG4gICAgICAgIHJldHVybiB2ZXJzaW9uXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2ZXJzaW9uID0gdmVyc2lvbi52ZXJzaW9uXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdmVyc2lvbiAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgdmVyc2lvbi4gTXVzdCBiZSBhIHN0cmluZy4gR290IHR5cGUgXCIke3R5cGVvZiB2ZXJzaW9ufVwiLmApXG4gICAgfVxuXG4gICAgaWYgKHZlcnNpb24ubGVuZ3RoID4gTUFYX0xFTkdUSCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgYHZlcnNpb24gaXMgbG9uZ2VyIHRoYW4gJHtNQVhfTEVOR1RIfSBjaGFyYWN0ZXJzYFxuICAgICAgKVxuICAgIH1cblxuICAgIGRlYnVnKCdTZW1WZXInLCB2ZXJzaW9uLCBvcHRpb25zKVxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnNcbiAgICB0aGlzLmxvb3NlID0gISFvcHRpb25zLmxvb3NlXG4gICAgLy8gdGhpcyBpc24ndCBhY3R1YWxseSByZWxldmFudCBmb3IgdmVyc2lvbnMsIGJ1dCBrZWVwIGl0IHNvIHRoYXQgd2VcbiAgICAvLyBkb24ndCBydW4gaW50byB0cm91YmxlIHBhc3NpbmcgdGhpcy5vcHRpb25zIGFyb3VuZC5cbiAgICB0aGlzLmluY2x1ZGVQcmVyZWxlYXNlID0gISFvcHRpb25zLmluY2x1ZGVQcmVyZWxlYXNlXG5cbiAgICBjb25zdCBtID0gdmVyc2lvbi50cmltKCkubWF0Y2gob3B0aW9ucy5sb29zZSA/IHJlW3QuTE9PU0VdIDogcmVbdC5GVUxMXSlcblxuICAgIGlmICghbSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCBWZXJzaW9uOiAke3ZlcnNpb259YClcbiAgICB9XG5cbiAgICB0aGlzLnJhdyA9IHZlcnNpb25cblxuICAgIC8vIHRoZXNlIGFyZSBhY3R1YWxseSBudW1iZXJzXG4gICAgdGhpcy5tYWpvciA9ICttWzFdXG4gICAgdGhpcy5taW5vciA9ICttWzJdXG4gICAgdGhpcy5wYXRjaCA9ICttWzNdXG5cbiAgICBpZiAodGhpcy5tYWpvciA+IE1BWF9TQUZFX0lOVEVHRVIgfHwgdGhpcy5tYWpvciA8IDApIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgbWFqb3IgdmVyc2lvbicpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMubWlub3IgPiBNQVhfU0FGRV9JTlRFR0VSIHx8IHRoaXMubWlub3IgPCAwKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIG1pbm9yIHZlcnNpb24nKVxuICAgIH1cblxuICAgIGlmICh0aGlzLnBhdGNoID4gTUFYX1NBRkVfSU5URUdFUiB8fCB0aGlzLnBhdGNoIDwgMCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBwYXRjaCB2ZXJzaW9uJylcbiAgICB9XG5cbiAgICAvLyBudW1iZXJpZnkgYW55IHByZXJlbGVhc2UgbnVtZXJpYyBpZHNcbiAgICBpZiAoIW1bNF0pIHtcbiAgICAgIHRoaXMucHJlcmVsZWFzZSA9IFtdXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucHJlcmVsZWFzZSA9IG1bNF0uc3BsaXQoJy4nKS5tYXAoKGlkKSA9PiB7XG4gICAgICAgIGlmICgvXlswLTldKyQvLnRlc3QoaWQpKSB7XG4gICAgICAgICAgY29uc3QgbnVtID0gK2lkXG4gICAgICAgICAgaWYgKG51bSA+PSAwICYmIG51bSA8IE1BWF9TQUZFX0lOVEVHRVIpIHtcbiAgICAgICAgICAgIHJldHVybiBudW1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlkXG4gICAgICB9KVxuICAgIH1cblxuICAgIHRoaXMuYnVpbGQgPSBtWzVdID8gbVs1XS5zcGxpdCgnLicpIDogW11cbiAgICB0aGlzLmZvcm1hdCgpXG4gIH1cblxuICBmb3JtYXQgKCkge1xuICAgIHRoaXMudmVyc2lvbiA9IGAke3RoaXMubWFqb3J9LiR7dGhpcy5taW5vcn0uJHt0aGlzLnBhdGNofWBcbiAgICBpZiAodGhpcy5wcmVyZWxlYXNlLmxlbmd0aCkge1xuICAgICAgdGhpcy52ZXJzaW9uICs9IGAtJHt0aGlzLnByZXJlbGVhc2Uuam9pbignLicpfWBcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudmVyc2lvblxuICB9XG5cbiAgdG9TdHJpbmcgKCkge1xuICAgIHJldHVybiB0aGlzLnZlcnNpb25cbiAgfVxuXG4gIGNvbXBhcmUgKG90aGVyKSB7XG4gICAgZGVidWcoJ1NlbVZlci5jb21wYXJlJywgdGhpcy52ZXJzaW9uLCB0aGlzLm9wdGlvbnMsIG90aGVyKVxuICAgIGlmICghKG90aGVyIGluc3RhbmNlb2YgU2VtVmVyKSkge1xuICAgICAgaWYgKHR5cGVvZiBvdGhlciA9PT0gJ3N0cmluZycgJiYgb3RoZXIgPT09IHRoaXMudmVyc2lvbikge1xuICAgICAgICByZXR1cm4gMFxuICAgICAgfVxuICAgICAgb3RoZXIgPSBuZXcgU2VtVmVyKG90aGVyLCB0aGlzLm9wdGlvbnMpXG4gICAgfVxuXG4gICAgaWYgKG90aGVyLnZlcnNpb24gPT09IHRoaXMudmVyc2lvbikge1xuICAgICAgcmV0dXJuIDBcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5jb21wYXJlTWFpbihvdGhlcikgfHwgdGhpcy5jb21wYXJlUHJlKG90aGVyKVxuICB9XG5cbiAgY29tcGFyZU1haW4gKG90aGVyKSB7XG4gICAgaWYgKCEob3RoZXIgaW5zdGFuY2VvZiBTZW1WZXIpKSB7XG4gICAgICBvdGhlciA9IG5ldyBTZW1WZXIob3RoZXIsIHRoaXMub3B0aW9ucylcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgY29tcGFyZUlkZW50aWZpZXJzKHRoaXMubWFqb3IsIG90aGVyLm1ham9yKSB8fFxuICAgICAgY29tcGFyZUlkZW50aWZpZXJzKHRoaXMubWlub3IsIG90aGVyLm1pbm9yKSB8fFxuICAgICAgY29tcGFyZUlkZW50aWZpZXJzKHRoaXMucGF0Y2gsIG90aGVyLnBhdGNoKVxuICAgIClcbiAgfVxuXG4gIGNvbXBhcmVQcmUgKG90aGVyKSB7XG4gICAgaWYgKCEob3RoZXIgaW5zdGFuY2VvZiBTZW1WZXIpKSB7XG4gICAgICBvdGhlciA9IG5ldyBTZW1WZXIob3RoZXIsIHRoaXMub3B0aW9ucylcbiAgICB9XG5cbiAgICAvLyBOT1QgaGF2aW5nIGEgcHJlcmVsZWFzZSBpcyA+IGhhdmluZyBvbmVcbiAgICBpZiAodGhpcy5wcmVyZWxlYXNlLmxlbmd0aCAmJiAhb3RoZXIucHJlcmVsZWFzZS5sZW5ndGgpIHtcbiAgICAgIHJldHVybiAtMVxuICAgIH0gZWxzZSBpZiAoIXRoaXMucHJlcmVsZWFzZS5sZW5ndGggJiYgb3RoZXIucHJlcmVsZWFzZS5sZW5ndGgpIHtcbiAgICAgIHJldHVybiAxXG4gICAgfSBlbHNlIGlmICghdGhpcy5wcmVyZWxlYXNlLmxlbmd0aCAmJiAhb3RoZXIucHJlcmVsZWFzZS5sZW5ndGgpIHtcbiAgICAgIHJldHVybiAwXG4gICAgfVxuXG4gICAgbGV0IGkgPSAwXG4gICAgZG8ge1xuICAgICAgY29uc3QgYSA9IHRoaXMucHJlcmVsZWFzZVtpXVxuICAgICAgY29uc3QgYiA9IG90aGVyLnByZXJlbGVhc2VbaV1cbiAgICAgIGRlYnVnKCdwcmVyZWxlYXNlIGNvbXBhcmUnLCBpLCBhLCBiKVxuICAgICAgaWYgKGEgPT09IHVuZGVmaW5lZCAmJiBiID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIDBcbiAgICAgIH0gZWxzZSBpZiAoYiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiAxXG4gICAgICB9IGVsc2UgaWYgKGEgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gLTFcbiAgICAgIH0gZWxzZSBpZiAoYSA9PT0gYikge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGNvbXBhcmVJZGVudGlmaWVycyhhLCBiKVxuICAgICAgfVxuICAgIH0gd2hpbGUgKCsraSlcbiAgfVxuXG4gIGNvbXBhcmVCdWlsZCAob3RoZXIpIHtcbiAgICBpZiAoIShvdGhlciBpbnN0YW5jZW9mIFNlbVZlcikpIHtcbiAgICAgIG90aGVyID0gbmV3IFNlbVZlcihvdGhlciwgdGhpcy5vcHRpb25zKVxuICAgIH1cblxuICAgIGxldCBpID0gMFxuICAgIGRvIHtcbiAgICAgIGNvbnN0IGEgPSB0aGlzLmJ1aWxkW2ldXG4gICAgICBjb25zdCBiID0gb3RoZXIuYnVpbGRbaV1cbiAgICAgIGRlYnVnKCdidWlsZCBjb21wYXJlJywgaSwgYSwgYilcbiAgICAgIGlmIChhID09PSB1bmRlZmluZWQgJiYgYiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiAwXG4gICAgICB9IGVsc2UgaWYgKGIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gMVxuICAgICAgfSBlbHNlIGlmIChhID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIC0xXG4gICAgICB9IGVsc2UgaWYgKGEgPT09IGIpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBjb21wYXJlSWRlbnRpZmllcnMoYSwgYilcbiAgICAgIH1cbiAgICB9IHdoaWxlICgrK2kpXG4gIH1cblxuICAvLyBwcmVtaW5vciB3aWxsIGJ1bXAgdGhlIHZlcnNpb24gdXAgdG8gdGhlIG5leHQgbWlub3IgcmVsZWFzZSwgYW5kIGltbWVkaWF0ZWx5XG4gIC8vIGRvd24gdG8gcHJlLXJlbGVhc2UuIHByZW1ham9yIGFuZCBwcmVwYXRjaCB3b3JrIHRoZSBzYW1lIHdheS5cbiAgaW5jIChyZWxlYXNlLCBpZGVudGlmaWVyLCBpZGVudGlmaWVyQmFzZSkge1xuICAgIGlmIChyZWxlYXNlLnN0YXJ0c1dpdGgoJ3ByZScpKSB7XG4gICAgICBpZiAoIWlkZW50aWZpZXIgJiYgaWRlbnRpZmllckJhc2UgPT09IGZhbHNlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBpbmNyZW1lbnQgYXJndW1lbnQ6IGlkZW50aWZpZXIgaXMgZW1wdHknKVxuICAgICAgfVxuICAgICAgLy8gQXZvaWQgYW4gaW52YWxpZCBzZW12ZXIgcmVzdWx0c1xuICAgICAgaWYgKGlkZW50aWZpZXIpIHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBSZWdFeHAoYF4ke3RoaXMub3B0aW9ucy5sb29zZSA/IHNyY1t0LlBSRVJFTEVBU0VMT09TRV0gOiBzcmNbdC5QUkVSRUxFQVNFXX0kYClcbiAgICAgICAgY29uc3QgbWF0Y2ggPSBgLSR7aWRlbnRpZmllcn1gLm1hdGNoKHIpXG4gICAgICAgIGlmICghbWF0Y2ggfHwgbWF0Y2hbMV0gIT09IGlkZW50aWZpZXIpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGludmFsaWQgaWRlbnRpZmllcjogJHtpZGVudGlmaWVyfWApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBzd2l0Y2ggKHJlbGVhc2UpIHtcbiAgICAgIGNhc2UgJ3ByZW1ham9yJzpcbiAgICAgICAgdGhpcy5wcmVyZWxlYXNlLmxlbmd0aCA9IDBcbiAgICAgICAgdGhpcy5wYXRjaCA9IDBcbiAgICAgICAgdGhpcy5taW5vciA9IDBcbiAgICAgICAgdGhpcy5tYWpvcisrXG4gICAgICAgIHRoaXMuaW5jKCdwcmUnLCBpZGVudGlmaWVyLCBpZGVudGlmaWVyQmFzZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3ByZW1pbm9yJzpcbiAgICAgICAgdGhpcy5wcmVyZWxlYXNlLmxlbmd0aCA9IDBcbiAgICAgICAgdGhpcy5wYXRjaCA9IDBcbiAgICAgICAgdGhpcy5taW5vcisrXG4gICAgICAgIHRoaXMuaW5jKCdwcmUnLCBpZGVudGlmaWVyLCBpZGVudGlmaWVyQmFzZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3ByZXBhdGNoJzpcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBhbHJlYWR5IGEgcHJlcmVsZWFzZSwgaXQgd2lsbCBidW1wIHRvIHRoZSBuZXh0IHZlcnNpb25cbiAgICAgICAgLy8gZHJvcCBhbnkgcHJlcmVsZWFzZXMgdGhhdCBtaWdodCBhbHJlYWR5IGV4aXN0LCBzaW5jZSB0aGV5IGFyZSBub3RcbiAgICAgICAgLy8gcmVsZXZhbnQgYXQgdGhpcyBwb2ludC5cbiAgICAgICAgdGhpcy5wcmVyZWxlYXNlLmxlbmd0aCA9IDBcbiAgICAgICAgdGhpcy5pbmMoJ3BhdGNoJywgaWRlbnRpZmllciwgaWRlbnRpZmllckJhc2UpXG4gICAgICAgIHRoaXMuaW5jKCdwcmUnLCBpZGVudGlmaWVyLCBpZGVudGlmaWVyQmFzZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIC8vIElmIHRoZSBpbnB1dCBpcyBhIG5vbi1wcmVyZWxlYXNlIHZlcnNpb24sIHRoaXMgYWN0cyB0aGUgc2FtZSBhc1xuICAgICAgLy8gcHJlcGF0Y2guXG4gICAgICBjYXNlICdwcmVyZWxlYXNlJzpcbiAgICAgICAgaWYgKHRoaXMucHJlcmVsZWFzZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aGlzLmluYygncGF0Y2gnLCBpZGVudGlmaWVyLCBpZGVudGlmaWVyQmFzZSlcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmluYygncHJlJywgaWRlbnRpZmllciwgaWRlbnRpZmllckJhc2UpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdyZWxlYXNlJzpcbiAgICAgICAgaWYgKHRoaXMucHJlcmVsZWFzZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHZlcnNpb24gJHt0aGlzLnJhd30gaXMgbm90IGEgcHJlcmVsZWFzZWApXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcmVyZWxlYXNlLmxlbmd0aCA9IDBcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAnbWFqb3InOlxuICAgICAgICAvLyBJZiB0aGlzIGlzIGEgcHJlLW1ham9yIHZlcnNpb24sIGJ1bXAgdXAgdG8gdGhlIHNhbWUgbWFqb3IgdmVyc2lvbi5cbiAgICAgICAgLy8gT3RoZXJ3aXNlIGluY3JlbWVudCBtYWpvci5cbiAgICAgICAgLy8gMS4wLjAtNSBidW1wcyB0byAxLjAuMFxuICAgICAgICAvLyAxLjEuMCBidW1wcyB0byAyLjAuMFxuICAgICAgICBpZiAoXG4gICAgICAgICAgdGhpcy5taW5vciAhPT0gMCB8fFxuICAgICAgICAgIHRoaXMucGF0Y2ggIT09IDAgfHxcbiAgICAgICAgICB0aGlzLnByZXJlbGVhc2UubGVuZ3RoID09PSAwXG4gICAgICAgICkge1xuICAgICAgICAgIHRoaXMubWFqb3IrK1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubWlub3IgPSAwXG4gICAgICAgIHRoaXMucGF0Y2ggPSAwXG4gICAgICAgIHRoaXMucHJlcmVsZWFzZSA9IFtdXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdtaW5vcic6XG4gICAgICAgIC8vIElmIHRoaXMgaXMgYSBwcmUtbWlub3IgdmVyc2lvbiwgYnVtcCB1cCB0byB0aGUgc2FtZSBtaW5vciB2ZXJzaW9uLlxuICAgICAgICAvLyBPdGhlcndpc2UgaW5jcmVtZW50IG1pbm9yLlxuICAgICAgICAvLyAxLjIuMC01IGJ1bXBzIHRvIDEuMi4wXG4gICAgICAgIC8vIDEuMi4xIGJ1bXBzIHRvIDEuMy4wXG4gICAgICAgIGlmICh0aGlzLnBhdGNoICE9PSAwIHx8IHRoaXMucHJlcmVsZWFzZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aGlzLm1pbm9yKytcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBhdGNoID0gMFxuICAgICAgICB0aGlzLnByZXJlbGVhc2UgPSBbXVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAncGF0Y2gnOlxuICAgICAgICAvLyBJZiB0aGlzIGlzIG5vdCBhIHByZS1yZWxlYXNlIHZlcnNpb24sIGl0IHdpbGwgaW5jcmVtZW50IHRoZSBwYXRjaC5cbiAgICAgICAgLy8gSWYgaXQgaXMgYSBwcmUtcmVsZWFzZSBpdCB3aWxsIGJ1bXAgdXAgdG8gdGhlIHNhbWUgcGF0Y2ggdmVyc2lvbi5cbiAgICAgICAgLy8gMS4yLjAtNSBwYXRjaGVzIHRvIDEuMi4wXG4gICAgICAgIC8vIDEuMi4wIHBhdGNoZXMgdG8gMS4yLjFcbiAgICAgICAgaWYgKHRoaXMucHJlcmVsZWFzZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aGlzLnBhdGNoKytcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByZXJlbGVhc2UgPSBbXVxuICAgICAgICBicmVha1xuICAgICAgLy8gVGhpcyBwcm9iYWJseSBzaG91bGRuJ3QgYmUgdXNlZCBwdWJsaWNseS5cbiAgICAgIC8vIDEuMC4wICdwcmUnIHdvdWxkIGJlY29tZSAxLjAuMC0wIHdoaWNoIGlzIHRoZSB3cm9uZyBkaXJlY3Rpb24uXG4gICAgICBjYXNlICdwcmUnOiB7XG4gICAgICAgIGNvbnN0IGJhc2UgPSBOdW1iZXIoaWRlbnRpZmllckJhc2UpID8gMSA6IDBcblxuICAgICAgICBpZiAodGhpcy5wcmVyZWxlYXNlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMucHJlcmVsZWFzZSA9IFtiYXNlXVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxldCBpID0gdGhpcy5wcmVyZWxlYXNlLmxlbmd0aFxuICAgICAgICAgIHdoaWxlICgtLWkgPj0gMCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnByZXJlbGVhc2VbaV0gPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgIHRoaXMucHJlcmVsZWFzZVtpXSsrXG4gICAgICAgICAgICAgIGkgPSAtMlxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaSA9PT0gLTEpIHtcbiAgICAgICAgICAgIC8vIGRpZG4ndCBpbmNyZW1lbnQgYW55dGhpbmdcbiAgICAgICAgICAgIGlmIChpZGVudGlmaWVyID09PSB0aGlzLnByZXJlbGVhc2Uuam9pbignLicpICYmIGlkZW50aWZpZXJCYXNlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgaW5jcmVtZW50IGFyZ3VtZW50OiBpZGVudGlmaWVyIGFscmVhZHkgZXhpc3RzJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJlcmVsZWFzZS5wdXNoKGJhc2UpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpZGVudGlmaWVyKSB7XG4gICAgICAgICAgLy8gMS4yLjAtYmV0YS4xIGJ1bXBzIHRvIDEuMi4wLWJldGEuMixcbiAgICAgICAgICAvLyAxLjIuMC1iZXRhLmZvb2JseiBvciAxLjIuMC1iZXRhIGJ1bXBzIHRvIDEuMi4wLWJldGEuMFxuICAgICAgICAgIGxldCBwcmVyZWxlYXNlID0gW2lkZW50aWZpZXIsIGJhc2VdXG4gICAgICAgICAgaWYgKGlkZW50aWZpZXJCYXNlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcHJlcmVsZWFzZSA9IFtpZGVudGlmaWVyXVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY29tcGFyZUlkZW50aWZpZXJzKHRoaXMucHJlcmVsZWFzZVswXSwgaWRlbnRpZmllcikgPT09IDApIHtcbiAgICAgICAgICAgIGlmIChpc05hTih0aGlzLnByZXJlbGVhc2VbMV0pKSB7XG4gICAgICAgICAgICAgIHRoaXMucHJlcmVsZWFzZSA9IHByZXJlbGVhc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcmVyZWxlYXNlID0gcHJlcmVsZWFzZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIGluY3JlbWVudCBhcmd1bWVudDogJHtyZWxlYXNlfWApXG4gICAgfVxuICAgIHRoaXMucmF3ID0gdGhpcy5mb3JtYXQoKVxuICAgIGlmICh0aGlzLmJ1aWxkLmxlbmd0aCkge1xuICAgICAgdGhpcy5yYXcgKz0gYCske3RoaXMuYnVpbGQuam9pbignLicpfWBcbiAgICB9XG4gICAgcmV0dXJuIHRoaXNcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFNlbVZlclxuIiwgImNvbnN0IFNlbVZlciA9IHJlcXVpcmUoJy4uL2NsYXNzZXMvc2VtdmVyJylcbmNvbnN0IHBhcnNlID0gKHZlcnNpb24sIG9wdGlvbnMsIHRocm93RXJyb3JzID0gZmFsc2UpID0+IHtcbiAgaWYgKHZlcnNpb24gaW5zdGFuY2VvZiBTZW1WZXIpIHtcbiAgICByZXR1cm4gdmVyc2lvblxuICB9XG4gIHRyeSB7XG4gICAgcmV0dXJuIG5ldyBTZW1WZXIodmVyc2lvbiwgb3B0aW9ucylcbiAgfSBjYXRjaCAoZXIpIHtcbiAgICBpZiAoIXRocm93RXJyb3JzKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgICB0aHJvdyBlclxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcGFyc2VcbiIsICJjb25zdCBwYXJzZSA9IHJlcXVpcmUoJy4vcGFyc2UnKVxuY29uc3QgdmFsaWQgPSAodmVyc2lvbiwgb3B0aW9ucykgPT4ge1xuICBjb25zdCB2ID0gcGFyc2UodmVyc2lvbiwgb3B0aW9ucylcbiAgcmV0dXJuIHYgPyB2LnZlcnNpb24gOiBudWxsXG59XG5tb2R1bGUuZXhwb3J0cyA9IHZhbGlkXG4iLCAiY29uc3QgcGFyc2UgPSByZXF1aXJlKCcuL3BhcnNlJylcbmNvbnN0IGNsZWFuID0gKHZlcnNpb24sIG9wdGlvbnMpID0+IHtcbiAgY29uc3QgcyA9IHBhcnNlKHZlcnNpb24udHJpbSgpLnJlcGxhY2UoL15bPXZdKy8sICcnKSwgb3B0aW9ucylcbiAgcmV0dXJuIHMgPyBzLnZlcnNpb24gOiBudWxsXG59XG5tb2R1bGUuZXhwb3J0cyA9IGNsZWFuXG4iLCAiY29uc3QgU2VtVmVyID0gcmVxdWlyZSgnLi4vY2xhc3Nlcy9zZW12ZXInKVxuXG5jb25zdCBpbmMgPSAodmVyc2lvbiwgcmVsZWFzZSwgb3B0aW9ucywgaWRlbnRpZmllciwgaWRlbnRpZmllckJhc2UpID0+IHtcbiAgaWYgKHR5cGVvZiAob3B0aW9ucykgPT09ICdzdHJpbmcnKSB7XG4gICAgaWRlbnRpZmllckJhc2UgPSBpZGVudGlmaWVyXG4gICAgaWRlbnRpZmllciA9IG9wdGlvbnNcbiAgICBvcHRpb25zID0gdW5kZWZpbmVkXG4gIH1cblxuICB0cnkge1xuICAgIHJldHVybiBuZXcgU2VtVmVyKFxuICAgICAgdmVyc2lvbiBpbnN0YW5jZW9mIFNlbVZlciA/IHZlcnNpb24udmVyc2lvbiA6IHZlcnNpb24sXG4gICAgICBvcHRpb25zXG4gICAgKS5pbmMocmVsZWFzZSwgaWRlbnRpZmllciwgaWRlbnRpZmllckJhc2UpLnZlcnNpb25cbiAgfSBjYXRjaCAoZXIpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IGluY1xuIiwgImNvbnN0IHBhcnNlID0gcmVxdWlyZSgnLi9wYXJzZS5qcycpXG5cbmNvbnN0IGRpZmYgPSAodmVyc2lvbjEsIHZlcnNpb24yKSA9PiB7XG4gIGNvbnN0IHYxID0gcGFyc2UodmVyc2lvbjEsIG51bGwsIHRydWUpXG4gIGNvbnN0IHYyID0gcGFyc2UodmVyc2lvbjIsIG51bGwsIHRydWUpXG4gIGNvbnN0IGNvbXBhcmlzb24gPSB2MS5jb21wYXJlKHYyKVxuXG4gIGlmIChjb21wYXJpc29uID09PSAwKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGNvbnN0IHYxSGlnaGVyID0gY29tcGFyaXNvbiA+IDBcbiAgY29uc3QgaGlnaFZlcnNpb24gPSB2MUhpZ2hlciA/IHYxIDogdjJcbiAgY29uc3QgbG93VmVyc2lvbiA9IHYxSGlnaGVyID8gdjIgOiB2MVxuICBjb25zdCBoaWdoSGFzUHJlID0gISFoaWdoVmVyc2lvbi5wcmVyZWxlYXNlLmxlbmd0aFxuICBjb25zdCBsb3dIYXNQcmUgPSAhIWxvd1ZlcnNpb24ucHJlcmVsZWFzZS5sZW5ndGhcblxuICBpZiAobG93SGFzUHJlICYmICFoaWdoSGFzUHJlKSB7XG4gICAgLy8gR29pbmcgZnJvbSBwcmVyZWxlYXNlIC0+IG5vIHByZXJlbGVhc2UgcmVxdWlyZXMgc29tZSBzcGVjaWFsIGNhc2luZ1xuXG4gICAgLy8gSWYgdGhlIGxvdyB2ZXJzaW9uIGhhcyBvbmx5IGEgbWFqb3IsIHRoZW4gaXQgd2lsbCBhbHdheXMgYmUgYSBtYWpvclxuICAgIC8vIFNvbWUgZXhhbXBsZXM6XG4gICAgLy8gMS4wLjAtMSAtPiAxLjAuMFxuICAgIC8vIDEuMC4wLTEgLT4gMS4xLjFcbiAgICAvLyAxLjAuMC0xIC0+IDIuMC4wXG4gICAgaWYgKCFsb3dWZXJzaW9uLnBhdGNoICYmICFsb3dWZXJzaW9uLm1pbm9yKSB7XG4gICAgICByZXR1cm4gJ21ham9yJ1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBtYWluIHBhcnQgaGFzIG5vIGRpZmZlcmVuY2VcbiAgICBpZiAobG93VmVyc2lvbi5jb21wYXJlTWFpbihoaWdoVmVyc2lvbikgPT09IDApIHtcbiAgICAgIGlmIChsb3dWZXJzaW9uLm1pbm9yICYmICFsb3dWZXJzaW9uLnBhdGNoKSB7XG4gICAgICAgIHJldHVybiAnbWlub3InXG4gICAgICB9XG4gICAgICByZXR1cm4gJ3BhdGNoJ1xuICAgIH1cbiAgfVxuXG4gIC8vIGFkZCB0aGUgYHByZWAgcHJlZml4IGlmIHdlIGFyZSBnb2luZyB0byBhIHByZXJlbGVhc2UgdmVyc2lvblxuICBjb25zdCBwcmVmaXggPSBoaWdoSGFzUHJlID8gJ3ByZScgOiAnJ1xuXG4gIGlmICh2MS5tYWpvciAhPT0gdjIubWFqb3IpIHtcbiAgICByZXR1cm4gcHJlZml4ICsgJ21ham9yJ1xuICB9XG5cbiAgaWYgKHYxLm1pbm9yICE9PSB2Mi5taW5vcikge1xuICAgIHJldHVybiBwcmVmaXggKyAnbWlub3InXG4gIH1cblxuICBpZiAodjEucGF0Y2ggIT09IHYyLnBhdGNoKSB7XG4gICAgcmV0dXJuIHByZWZpeCArICdwYXRjaCdcbiAgfVxuXG4gIC8vIGhpZ2ggYW5kIGxvdyBhcmUgcHJlbGVhc2VzXG4gIHJldHVybiAncHJlcmVsZWFzZSdcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBkaWZmXG4iLCAiY29uc3QgU2VtVmVyID0gcmVxdWlyZSgnLi4vY2xhc3Nlcy9zZW12ZXInKVxuY29uc3QgbWFqb3IgPSAoYSwgbG9vc2UpID0+IG5ldyBTZW1WZXIoYSwgbG9vc2UpLm1ham9yXG5tb2R1bGUuZXhwb3J0cyA9IG1ham9yXG4iLCAiY29uc3QgU2VtVmVyID0gcmVxdWlyZSgnLi4vY2xhc3Nlcy9zZW12ZXInKVxuY29uc3QgbWlub3IgPSAoYSwgbG9vc2UpID0+IG5ldyBTZW1WZXIoYSwgbG9vc2UpLm1pbm9yXG5tb2R1bGUuZXhwb3J0cyA9IG1pbm9yXG4iLCAiY29uc3QgU2VtVmVyID0gcmVxdWlyZSgnLi4vY2xhc3Nlcy9zZW12ZXInKVxuY29uc3QgcGF0Y2ggPSAoYSwgbG9vc2UpID0+IG5ldyBTZW1WZXIoYSwgbG9vc2UpLnBhdGNoXG5tb2R1bGUuZXhwb3J0cyA9IHBhdGNoXG4iLCAiY29uc3QgcGFyc2UgPSByZXF1aXJlKCcuL3BhcnNlJylcbmNvbnN0IHByZXJlbGVhc2UgPSAodmVyc2lvbiwgb3B0aW9ucykgPT4ge1xuICBjb25zdCBwYXJzZWQgPSBwYXJzZSh2ZXJzaW9uLCBvcHRpb25zKVxuICByZXR1cm4gKHBhcnNlZCAmJiBwYXJzZWQucHJlcmVsZWFzZS5sZW5ndGgpID8gcGFyc2VkLnByZXJlbGVhc2UgOiBudWxsXG59XG5tb2R1bGUuZXhwb3J0cyA9IHByZXJlbGVhc2VcbiIsICJjb25zdCBTZW1WZXIgPSByZXF1aXJlKCcuLi9jbGFzc2VzL3NlbXZlcicpXG5jb25zdCBjb21wYXJlID0gKGEsIGIsIGxvb3NlKSA9PlxuICBuZXcgU2VtVmVyKGEsIGxvb3NlKS5jb21wYXJlKG5ldyBTZW1WZXIoYiwgbG9vc2UpKVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNvbXBhcmVcbiIsICJjb25zdCBjb21wYXJlID0gcmVxdWlyZSgnLi9jb21wYXJlJylcbmNvbnN0IHJjb21wYXJlID0gKGEsIGIsIGxvb3NlKSA9PiBjb21wYXJlKGIsIGEsIGxvb3NlKVxubW9kdWxlLmV4cG9ydHMgPSByY29tcGFyZVxuIiwgImNvbnN0IGNvbXBhcmUgPSByZXF1aXJlKCcuL2NvbXBhcmUnKVxuY29uc3QgY29tcGFyZUxvb3NlID0gKGEsIGIpID0+IGNvbXBhcmUoYSwgYiwgdHJ1ZSlcbm1vZHVsZS5leHBvcnRzID0gY29tcGFyZUxvb3NlXG4iLCAiY29uc3QgU2VtVmVyID0gcmVxdWlyZSgnLi4vY2xhc3Nlcy9zZW12ZXInKVxuY29uc3QgY29tcGFyZUJ1aWxkID0gKGEsIGIsIGxvb3NlKSA9PiB7XG4gIGNvbnN0IHZlcnNpb25BID0gbmV3IFNlbVZlcihhLCBsb29zZSlcbiAgY29uc3QgdmVyc2lvbkIgPSBuZXcgU2VtVmVyKGIsIGxvb3NlKVxuICByZXR1cm4gdmVyc2lvbkEuY29tcGFyZSh2ZXJzaW9uQikgfHwgdmVyc2lvbkEuY29tcGFyZUJ1aWxkKHZlcnNpb25CKVxufVxubW9kdWxlLmV4cG9ydHMgPSBjb21wYXJlQnVpbGRcbiIsICJjb25zdCBjb21wYXJlQnVpbGQgPSByZXF1aXJlKCcuL2NvbXBhcmUtYnVpbGQnKVxuY29uc3Qgc29ydCA9IChsaXN0LCBsb29zZSkgPT4gbGlzdC5zb3J0KChhLCBiKSA9PiBjb21wYXJlQnVpbGQoYSwgYiwgbG9vc2UpKVxubW9kdWxlLmV4cG9ydHMgPSBzb3J0XG4iLCAiY29uc3QgY29tcGFyZUJ1aWxkID0gcmVxdWlyZSgnLi9jb21wYXJlLWJ1aWxkJylcbmNvbnN0IHJzb3J0ID0gKGxpc3QsIGxvb3NlKSA9PiBsaXN0LnNvcnQoKGEsIGIpID0+IGNvbXBhcmVCdWlsZChiLCBhLCBsb29zZSkpXG5tb2R1bGUuZXhwb3J0cyA9IHJzb3J0XG4iLCAiY29uc3QgY29tcGFyZSA9IHJlcXVpcmUoJy4vY29tcGFyZScpXG5jb25zdCBndCA9IChhLCBiLCBsb29zZSkgPT4gY29tcGFyZShhLCBiLCBsb29zZSkgPiAwXG5tb2R1bGUuZXhwb3J0cyA9IGd0XG4iLCAiY29uc3QgY29tcGFyZSA9IHJlcXVpcmUoJy4vY29tcGFyZScpXG5jb25zdCBsdCA9IChhLCBiLCBsb29zZSkgPT4gY29tcGFyZShhLCBiLCBsb29zZSkgPCAwXG5tb2R1bGUuZXhwb3J0cyA9IGx0XG4iLCAiY29uc3QgY29tcGFyZSA9IHJlcXVpcmUoJy4vY29tcGFyZScpXG5jb25zdCBlcSA9IChhLCBiLCBsb29zZSkgPT4gY29tcGFyZShhLCBiLCBsb29zZSkgPT09IDBcbm1vZHVsZS5leHBvcnRzID0gZXFcbiIsICJjb25zdCBjb21wYXJlID0gcmVxdWlyZSgnLi9jb21wYXJlJylcbmNvbnN0IG5lcSA9IChhLCBiLCBsb29zZSkgPT4gY29tcGFyZShhLCBiLCBsb29zZSkgIT09IDBcbm1vZHVsZS5leHBvcnRzID0gbmVxXG4iLCAiY29uc3QgY29tcGFyZSA9IHJlcXVpcmUoJy4vY29tcGFyZScpXG5jb25zdCBndGUgPSAoYSwgYiwgbG9vc2UpID0+IGNvbXBhcmUoYSwgYiwgbG9vc2UpID49IDBcbm1vZHVsZS5leHBvcnRzID0gZ3RlXG4iLCAiY29uc3QgY29tcGFyZSA9IHJlcXVpcmUoJy4vY29tcGFyZScpXG5jb25zdCBsdGUgPSAoYSwgYiwgbG9vc2UpID0+IGNvbXBhcmUoYSwgYiwgbG9vc2UpIDw9IDBcbm1vZHVsZS5leHBvcnRzID0gbHRlXG4iLCAiY29uc3QgZXEgPSByZXF1aXJlKCcuL2VxJylcbmNvbnN0IG5lcSA9IHJlcXVpcmUoJy4vbmVxJylcbmNvbnN0IGd0ID0gcmVxdWlyZSgnLi9ndCcpXG5jb25zdCBndGUgPSByZXF1aXJlKCcuL2d0ZScpXG5jb25zdCBsdCA9IHJlcXVpcmUoJy4vbHQnKVxuY29uc3QgbHRlID0gcmVxdWlyZSgnLi9sdGUnKVxuXG5jb25zdCBjbXAgPSAoYSwgb3AsIGIsIGxvb3NlKSA9PiB7XG4gIHN3aXRjaCAob3ApIHtcbiAgICBjYXNlICc9PT0nOlxuICAgICAgaWYgKHR5cGVvZiBhID09PSAnb2JqZWN0Jykge1xuICAgICAgICBhID0gYS52ZXJzaW9uXG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGIgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGIgPSBiLnZlcnNpb25cbiAgICAgIH1cbiAgICAgIHJldHVybiBhID09PSBiXG5cbiAgICBjYXNlICchPT0nOlxuICAgICAgaWYgKHR5cGVvZiBhID09PSAnb2JqZWN0Jykge1xuICAgICAgICBhID0gYS52ZXJzaW9uXG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGIgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGIgPSBiLnZlcnNpb25cbiAgICAgIH1cbiAgICAgIHJldHVybiBhICE9PSBiXG5cbiAgICBjYXNlICcnOlxuICAgIGNhc2UgJz0nOlxuICAgIGNhc2UgJz09JzpcbiAgICAgIHJldHVybiBlcShhLCBiLCBsb29zZSlcblxuICAgIGNhc2UgJyE9JzpcbiAgICAgIHJldHVybiBuZXEoYSwgYiwgbG9vc2UpXG5cbiAgICBjYXNlICc+JzpcbiAgICAgIHJldHVybiBndChhLCBiLCBsb29zZSlcblxuICAgIGNhc2UgJz49JzpcbiAgICAgIHJldHVybiBndGUoYSwgYiwgbG9vc2UpXG5cbiAgICBjYXNlICc8JzpcbiAgICAgIHJldHVybiBsdChhLCBiLCBsb29zZSlcblxuICAgIGNhc2UgJzw9JzpcbiAgICAgIHJldHVybiBsdGUoYSwgYiwgbG9vc2UpXG5cbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCBvcGVyYXRvcjogJHtvcH1gKVxuICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IGNtcFxuIiwgImNvbnN0IFNlbVZlciA9IHJlcXVpcmUoJy4uL2NsYXNzZXMvc2VtdmVyJylcbmNvbnN0IHBhcnNlID0gcmVxdWlyZSgnLi9wYXJzZScpXG5jb25zdCB7IHNhZmVSZTogcmUsIHQgfSA9IHJlcXVpcmUoJy4uL2ludGVybmFsL3JlJylcblxuY29uc3QgY29lcmNlID0gKHZlcnNpb24sIG9wdGlvbnMpID0+IHtcbiAgaWYgKHZlcnNpb24gaW5zdGFuY2VvZiBTZW1WZXIpIHtcbiAgICByZXR1cm4gdmVyc2lvblxuICB9XG5cbiAgaWYgKHR5cGVvZiB2ZXJzaW9uID09PSAnbnVtYmVyJykge1xuICAgIHZlcnNpb24gPSBTdHJpbmcodmVyc2lvbilcbiAgfVxuXG4gIGlmICh0eXBlb2YgdmVyc2lvbiAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge31cblxuICBsZXQgbWF0Y2ggPSBudWxsXG4gIGlmICghb3B0aW9ucy5ydGwpIHtcbiAgICBtYXRjaCA9IHZlcnNpb24ubWF0Y2gob3B0aW9ucy5pbmNsdWRlUHJlcmVsZWFzZSA/IHJlW3QuQ09FUkNFRlVMTF0gOiByZVt0LkNPRVJDRV0pXG4gIH0gZWxzZSB7XG4gICAgLy8gRmluZCB0aGUgcmlnaHQtbW9zdCBjb2VyY2libGUgc3RyaW5nIHRoYXQgZG9lcyBub3Qgc2hhcmVcbiAgICAvLyBhIHRlcm1pbnVzIHdpdGggYSBtb3JlIGxlZnQtd2FyZCBjb2VyY2libGUgc3RyaW5nLlxuICAgIC8vIEVnLCAnMS4yLjMuNCcgd2FudHMgdG8gY29lcmNlICcyLjMuNCcsIG5vdCAnMy40JyBvciAnNCdcbiAgICAvLyBXaXRoIGluY2x1ZGVQcmVyZWxlYXNlIG9wdGlvbiBzZXQsICcxLjIuMy40LXJjJyB3YW50cyB0byBjb2VyY2UgJzIuMy40LXJjJywgbm90ICcyLjMuNCdcbiAgICAvL1xuICAgIC8vIFdhbGsgdGhyb3VnaCB0aGUgc3RyaW5nIGNoZWNraW5nIHdpdGggYSAvZyByZWdleHBcbiAgICAvLyBNYW51YWxseSBzZXQgdGhlIGluZGV4IHNvIGFzIHRvIHBpY2sgdXAgb3ZlcmxhcHBpbmcgbWF0Y2hlcy5cbiAgICAvLyBTdG9wIHdoZW4gd2UgZ2V0IGEgbWF0Y2ggdGhhdCBlbmRzIGF0IHRoZSBzdHJpbmcgZW5kLCBzaW5jZSBub1xuICAgIC8vIGNvZXJjaWJsZSBzdHJpbmcgY2FuIGJlIG1vcmUgcmlnaHQtd2FyZCB3aXRob3V0IHRoZSBzYW1lIHRlcm1pbnVzLlxuICAgIGNvbnN0IGNvZXJjZVJ0bFJlZ2V4ID0gb3B0aW9ucy5pbmNsdWRlUHJlcmVsZWFzZSA/IHJlW3QuQ09FUkNFUlRMRlVMTF0gOiByZVt0LkNPRVJDRVJUTF1cbiAgICBsZXQgbmV4dFxuICAgIHdoaWxlICgobmV4dCA9IGNvZXJjZVJ0bFJlZ2V4LmV4ZWModmVyc2lvbikpICYmXG4gICAgICAgICghbWF0Y2ggfHwgbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGggIT09IHZlcnNpb24ubGVuZ3RoKVxuICAgICkge1xuICAgICAgaWYgKCFtYXRjaCB8fFxuICAgICAgICAgICAgbmV4dC5pbmRleCArIG5leHRbMF0ubGVuZ3RoICE9PSBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aCkge1xuICAgICAgICBtYXRjaCA9IG5leHRcbiAgICAgIH1cbiAgICAgIGNvZXJjZVJ0bFJlZ2V4Lmxhc3RJbmRleCA9IG5leHQuaW5kZXggKyBuZXh0WzFdLmxlbmd0aCArIG5leHRbMl0ubGVuZ3RoXG4gICAgfVxuICAgIC8vIGxlYXZlIGl0IGluIGEgY2xlYW4gc3RhdGVcbiAgICBjb2VyY2VSdGxSZWdleC5sYXN0SW5kZXggPSAtMVxuICB9XG5cbiAgaWYgKG1hdGNoID09PSBudWxsKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGNvbnN0IG1ham9yID0gbWF0Y2hbMl1cbiAgY29uc3QgbWlub3IgPSBtYXRjaFszXSB8fCAnMCdcbiAgY29uc3QgcGF0Y2ggPSBtYXRjaFs0XSB8fCAnMCdcbiAgY29uc3QgcHJlcmVsZWFzZSA9IG9wdGlvbnMuaW5jbHVkZVByZXJlbGVhc2UgJiYgbWF0Y2hbNV0gPyBgLSR7bWF0Y2hbNV19YCA6ICcnXG4gIGNvbnN0IGJ1aWxkID0gb3B0aW9ucy5pbmNsdWRlUHJlcmVsZWFzZSAmJiBtYXRjaFs2XSA/IGArJHttYXRjaFs2XX1gIDogJydcblxuICByZXR1cm4gcGFyc2UoYCR7bWFqb3J9LiR7bWlub3J9LiR7cGF0Y2h9JHtwcmVyZWxlYXNlfSR7YnVpbGR9YCwgb3B0aW9ucylcbn1cbm1vZHVsZS5leHBvcnRzID0gY29lcmNlXG4iLCAiY2xhc3MgTFJVQ2FjaGUge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgdGhpcy5tYXggPSAxMDAwXG4gICAgdGhpcy5tYXAgPSBuZXcgTWFwKClcbiAgfVxuXG4gIGdldCAoa2V5KSB7XG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLm1hcC5nZXQoa2V5KVxuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFJlbW92ZSB0aGUga2V5IGZyb20gdGhlIG1hcCBhbmQgYWRkIGl0IHRvIHRoZSBlbmRcbiAgICAgIHRoaXMubWFwLmRlbGV0ZShrZXkpXG4gICAgICB0aGlzLm1hcC5zZXQoa2V5LCB2YWx1ZSlcbiAgICAgIHJldHVybiB2YWx1ZVxuICAgIH1cbiAgfVxuXG4gIGRlbGV0ZSAoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMubWFwLmRlbGV0ZShrZXkpXG4gIH1cblxuICBzZXQgKGtleSwgdmFsdWUpIHtcbiAgICBjb25zdCBkZWxldGVkID0gdGhpcy5kZWxldGUoa2V5KVxuXG4gICAgaWYgKCFkZWxldGVkICYmIHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIElmIGNhY2hlIGlzIGZ1bGwsIGRlbGV0ZSB0aGUgbGVhc3QgcmVjZW50bHkgdXNlZCBpdGVtXG4gICAgICBpZiAodGhpcy5tYXAuc2l6ZSA+PSB0aGlzLm1heCkge1xuICAgICAgICBjb25zdCBmaXJzdEtleSA9IHRoaXMubWFwLmtleXMoKS5uZXh0KCkudmFsdWVcbiAgICAgICAgdGhpcy5kZWxldGUoZmlyc3RLZXkpXG4gICAgICB9XG5cbiAgICAgIHRoaXMubWFwLnNldChrZXksIHZhbHVlKVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBMUlVDYWNoZVxuIiwgImNvbnN0IFNQQUNFX0NIQVJBQ1RFUlMgPSAvXFxzKy9nXG5cbi8vIGhvaXN0ZWQgY2xhc3MgZm9yIGN5Y2xpYyBkZXBlbmRlbmN5XG5jbGFzcyBSYW5nZSB7XG4gIGNvbnN0cnVjdG9yIChyYW5nZSwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBwYXJzZU9wdGlvbnMob3B0aW9ucylcblxuICAgIGlmIChyYW5nZSBpbnN0YW5jZW9mIFJhbmdlKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHJhbmdlLmxvb3NlID09PSAhIW9wdGlvbnMubG9vc2UgJiZcbiAgICAgICAgcmFuZ2UuaW5jbHVkZVByZXJlbGVhc2UgPT09ICEhb3B0aW9ucy5pbmNsdWRlUHJlcmVsZWFzZVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiByYW5nZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSYW5nZShyYW5nZS5yYXcsIG9wdGlvbnMpXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHJhbmdlIGluc3RhbmNlb2YgQ29tcGFyYXRvcikge1xuICAgICAgLy8ganVzdCBwdXQgaXQgaW4gdGhlIHNldCBhbmQgcmV0dXJuXG4gICAgICB0aGlzLnJhdyA9IHJhbmdlLnZhbHVlXG4gICAgICB0aGlzLnNldCA9IFtbcmFuZ2VdXVxuICAgICAgdGhpcy5mb3JtYXR0ZWQgPSB1bmRlZmluZWRcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9uc1xuICAgIHRoaXMubG9vc2UgPSAhIW9wdGlvbnMubG9vc2VcbiAgICB0aGlzLmluY2x1ZGVQcmVyZWxlYXNlID0gISFvcHRpb25zLmluY2x1ZGVQcmVyZWxlYXNlXG5cbiAgICAvLyBGaXJzdCByZWR1Y2UgYWxsIHdoaXRlc3BhY2UgYXMgbXVjaCBhcyBwb3NzaWJsZSBzbyB3ZSBkbyBub3QgaGF2ZSB0byByZWx5XG4gICAgLy8gb24gcG90ZW50aWFsbHkgc2xvdyByZWdleGVzIGxpa2UgXFxzKi4gVGhpcyBpcyB0aGVuIHN0b3JlZCBhbmQgdXNlZCBmb3JcbiAgICAvLyBmdXR1cmUgZXJyb3IgbWVzc2FnZXMgYXMgd2VsbC5cbiAgICB0aGlzLnJhdyA9IHJhbmdlLnRyaW0oKS5yZXBsYWNlKFNQQUNFX0NIQVJBQ1RFUlMsICcgJylcblxuICAgIC8vIEZpcnN0LCBzcGxpdCBvbiB8fFxuICAgIHRoaXMuc2V0ID0gdGhpcy5yYXdcbiAgICAgIC5zcGxpdCgnfHwnKVxuICAgICAgLy8gbWFwIHRoZSByYW5nZSB0byBhIDJkIGFycmF5IG9mIGNvbXBhcmF0b3JzXG4gICAgICAubWFwKHIgPT4gdGhpcy5wYXJzZVJhbmdlKHIudHJpbSgpKSlcbiAgICAgIC8vIHRocm93IG91dCBhbnkgY29tcGFyYXRvciBsaXN0cyB0aGF0IGFyZSBlbXB0eVxuICAgICAgLy8gdGhpcyBnZW5lcmFsbHkgbWVhbnMgdGhhdCBpdCB3YXMgbm90IGEgdmFsaWQgcmFuZ2UsIHdoaWNoIGlzIGFsbG93ZWRcbiAgICAgIC8vIGluIGxvb3NlIG1vZGUsIGJ1dCB3aWxsIHN0aWxsIHRocm93IGlmIHRoZSBXSE9MRSByYW5nZSBpcyBpbnZhbGlkLlxuICAgICAgLmZpbHRlcihjID0+IGMubGVuZ3RoKVxuXG4gICAgaWYgKCF0aGlzLnNldC5sZW5ndGgpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgU2VtVmVyIFJhbmdlOiAke3RoaXMucmF3fWApXG4gICAgfVxuXG4gICAgLy8gaWYgd2UgaGF2ZSBhbnkgdGhhdCBhcmUgbm90IHRoZSBudWxsIHNldCwgdGhyb3cgb3V0IG51bGwgc2V0cy5cbiAgICBpZiAodGhpcy5zZXQubGVuZ3RoID4gMSkge1xuICAgICAgLy8ga2VlcCB0aGUgZmlyc3Qgb25lLCBpbiBjYXNlIHRoZXkncmUgYWxsIG51bGwgc2V0c1xuICAgICAgY29uc3QgZmlyc3QgPSB0aGlzLnNldFswXVxuICAgICAgdGhpcy5zZXQgPSB0aGlzLnNldC5maWx0ZXIoYyA9PiAhaXNOdWxsU2V0KGNbMF0pKVxuICAgICAgaWYgKHRoaXMuc2V0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aGlzLnNldCA9IFtmaXJzdF1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5zZXQubGVuZ3RoID4gMSkge1xuICAgICAgICAvLyBpZiB3ZSBoYXZlIGFueSB0aGF0IGFyZSAqLCB0aGVuIHRoZSByYW5nZSBpcyBqdXN0ICpcbiAgICAgICAgZm9yIChjb25zdCBjIG9mIHRoaXMuc2V0KSB7XG4gICAgICAgICAgaWYgKGMubGVuZ3RoID09PSAxICYmIGlzQW55KGNbMF0pKSB7XG4gICAgICAgICAgICB0aGlzLnNldCA9IFtjXVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmZvcm1hdHRlZCA9IHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IHJhbmdlICgpIHtcbiAgICBpZiAodGhpcy5mb3JtYXR0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5mb3JtYXR0ZWQgPSAnJ1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNldC5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgICB0aGlzLmZvcm1hdHRlZCArPSAnfHwnXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29tcHMgPSB0aGlzLnNldFtpXVxuICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGNvbXBzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgaWYgKGsgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLmZvcm1hdHRlZCArPSAnICdcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5mb3JtYXR0ZWQgKz0gY29tcHNba10udG9TdHJpbmcoKS50cmltKClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5mb3JtYXR0ZWRcbiAgfVxuXG4gIGZvcm1hdCAoKSB7XG4gICAgcmV0dXJuIHRoaXMucmFuZ2VcbiAgfVxuXG4gIHRvU3RyaW5nICgpIHtcbiAgICByZXR1cm4gdGhpcy5yYW5nZVxuICB9XG5cbiAgcGFyc2VSYW5nZSAocmFuZ2UpIHtcbiAgICAvLyBtZW1vaXplIHJhbmdlIHBhcnNpbmcgZm9yIHBlcmZvcm1hbmNlLlxuICAgIC8vIHRoaXMgaXMgYSB2ZXJ5IGhvdCBwYXRoLCBhbmQgZnVsbHkgZGV0ZXJtaW5pc3RpYy5cbiAgICBjb25zdCBtZW1vT3B0cyA9XG4gICAgICAodGhpcy5vcHRpb25zLmluY2x1ZGVQcmVyZWxlYXNlICYmIEZMQUdfSU5DTFVERV9QUkVSRUxFQVNFKSB8XG4gICAgICAodGhpcy5vcHRpb25zLmxvb3NlICYmIEZMQUdfTE9PU0UpXG4gICAgY29uc3QgbWVtb0tleSA9IG1lbW9PcHRzICsgJzonICsgcmFuZ2VcbiAgICBjb25zdCBjYWNoZWQgPSBjYWNoZS5nZXQobWVtb0tleSlcbiAgICBpZiAoY2FjaGVkKSB7XG4gICAgICByZXR1cm4gY2FjaGVkXG4gICAgfVxuXG4gICAgY29uc3QgbG9vc2UgPSB0aGlzLm9wdGlvbnMubG9vc2VcbiAgICAvLyBgMS4yLjMgLSAxLjIuNGAgPT4gYD49MS4yLjMgPD0xLjIuNGBcbiAgICBjb25zdCBociA9IGxvb3NlID8gcmVbdC5IWVBIRU5SQU5HRUxPT1NFXSA6IHJlW3QuSFlQSEVOUkFOR0VdXG4gICAgcmFuZ2UgPSByYW5nZS5yZXBsYWNlKGhyLCBoeXBoZW5SZXBsYWNlKHRoaXMub3B0aW9ucy5pbmNsdWRlUHJlcmVsZWFzZSkpXG4gICAgZGVidWcoJ2h5cGhlbiByZXBsYWNlJywgcmFuZ2UpXG5cbiAgICAvLyBgPiAxLjIuMyA8IDEuMi41YCA9PiBgPjEuMi4zIDwxLjIuNWBcbiAgICByYW5nZSA9IHJhbmdlLnJlcGxhY2UocmVbdC5DT01QQVJBVE9SVFJJTV0sIGNvbXBhcmF0b3JUcmltUmVwbGFjZSlcbiAgICBkZWJ1ZygnY29tcGFyYXRvciB0cmltJywgcmFuZ2UpXG5cbiAgICAvLyBgfiAxLjIuM2AgPT4gYH4xLjIuM2BcbiAgICByYW5nZSA9IHJhbmdlLnJlcGxhY2UocmVbdC5USUxERVRSSU1dLCB0aWxkZVRyaW1SZXBsYWNlKVxuICAgIGRlYnVnKCd0aWxkZSB0cmltJywgcmFuZ2UpXG5cbiAgICAvLyBgXiAxLjIuM2AgPT4gYF4xLjIuM2BcbiAgICByYW5nZSA9IHJhbmdlLnJlcGxhY2UocmVbdC5DQVJFVFRSSU1dLCBjYXJldFRyaW1SZXBsYWNlKVxuICAgIGRlYnVnKCdjYXJldCB0cmltJywgcmFuZ2UpXG5cbiAgICAvLyBBdCB0aGlzIHBvaW50LCB0aGUgcmFuZ2UgaXMgY29tcGxldGVseSB0cmltbWVkIGFuZFxuICAgIC8vIHJlYWR5IHRvIGJlIHNwbGl0IGludG8gY29tcGFyYXRvcnMuXG5cbiAgICBsZXQgcmFuZ2VMaXN0ID0gcmFuZ2VcbiAgICAgIC5zcGxpdCgnICcpXG4gICAgICAubWFwKGNvbXAgPT4gcGFyc2VDb21wYXJhdG9yKGNvbXAsIHRoaXMub3B0aW9ucykpXG4gICAgICAuam9pbignICcpXG4gICAgICAuc3BsaXQoL1xccysvKVxuICAgICAgLy8gPj0wLjAuMCBpcyBlcXVpdmFsZW50IHRvICpcbiAgICAgIC5tYXAoY29tcCA9PiByZXBsYWNlR1RFMChjb21wLCB0aGlzLm9wdGlvbnMpKVxuXG4gICAgaWYgKGxvb3NlKSB7XG4gICAgICAvLyBpbiBsb29zZSBtb2RlLCB0aHJvdyBvdXQgYW55IHRoYXQgYXJlIG5vdCB2YWxpZCBjb21wYXJhdG9yc1xuICAgICAgcmFuZ2VMaXN0ID0gcmFuZ2VMaXN0LmZpbHRlcihjb21wID0+IHtcbiAgICAgICAgZGVidWcoJ2xvb3NlIGludmFsaWQgZmlsdGVyJywgY29tcCwgdGhpcy5vcHRpb25zKVxuICAgICAgICByZXR1cm4gISFjb21wLm1hdGNoKHJlW3QuQ09NUEFSQVRPUkxPT1NFXSlcbiAgICAgIH0pXG4gICAgfVxuICAgIGRlYnVnKCdyYW5nZSBsaXN0JywgcmFuZ2VMaXN0KVxuXG4gICAgLy8gaWYgYW55IGNvbXBhcmF0b3JzIGFyZSB0aGUgbnVsbCBzZXQsIHRoZW4gcmVwbGFjZSB3aXRoIEpVU1QgbnVsbCBzZXRcbiAgICAvLyBpZiBtb3JlIHRoYW4gb25lIGNvbXBhcmF0b3IsIHJlbW92ZSBhbnkgKiBjb21wYXJhdG9yc1xuICAgIC8vIGFsc28sIGRvbid0IGluY2x1ZGUgdGhlIHNhbWUgY29tcGFyYXRvciBtb3JlIHRoYW4gb25jZVxuICAgIGNvbnN0IHJhbmdlTWFwID0gbmV3IE1hcCgpXG4gICAgY29uc3QgY29tcGFyYXRvcnMgPSByYW5nZUxpc3QubWFwKGNvbXAgPT4gbmV3IENvbXBhcmF0b3IoY29tcCwgdGhpcy5vcHRpb25zKSlcbiAgICBmb3IgKGNvbnN0IGNvbXAgb2YgY29tcGFyYXRvcnMpIHtcbiAgICAgIGlmIChpc051bGxTZXQoY29tcCkpIHtcbiAgICAgICAgcmV0dXJuIFtjb21wXVxuICAgICAgfVxuICAgICAgcmFuZ2VNYXAuc2V0KGNvbXAudmFsdWUsIGNvbXApXG4gICAgfVxuICAgIGlmIChyYW5nZU1hcC5zaXplID4gMSAmJiByYW5nZU1hcC5oYXMoJycpKSB7XG4gICAgICByYW5nZU1hcC5kZWxldGUoJycpXG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gWy4uLnJhbmdlTWFwLnZhbHVlcygpXVxuICAgIGNhY2hlLnNldChtZW1vS2V5LCByZXN1bHQpXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgaW50ZXJzZWN0cyAocmFuZ2UsIG9wdGlvbnMpIHtcbiAgICBpZiAoIShyYW5nZSBpbnN0YW5jZW9mIFJhbmdlKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignYSBSYW5nZSBpcyByZXF1aXJlZCcpXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuc2V0LnNvbWUoKHRoaXNDb21wYXJhdG9ycykgPT4ge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgaXNTYXRpc2ZpYWJsZSh0aGlzQ29tcGFyYXRvcnMsIG9wdGlvbnMpICYmXG4gICAgICAgIHJhbmdlLnNldC5zb21lKChyYW5nZUNvbXBhcmF0b3JzKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIGlzU2F0aXNmaWFibGUocmFuZ2VDb21wYXJhdG9ycywgb3B0aW9ucykgJiZcbiAgICAgICAgICAgIHRoaXNDb21wYXJhdG9ycy5ldmVyeSgodGhpc0NvbXBhcmF0b3IpID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIHJhbmdlQ29tcGFyYXRvcnMuZXZlcnkoKHJhbmdlQ29tcGFyYXRvcikgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzQ29tcGFyYXRvci5pbnRlcnNlY3RzKHJhbmdlQ29tcGFyYXRvciwgb3B0aW9ucylcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKVxuICAgICAgICB9KVxuICAgICAgKVxuICAgIH0pXG4gIH1cblxuICAvLyBpZiBBTlkgb2YgdGhlIHNldHMgbWF0Y2ggQUxMIG9mIGl0cyBjb21wYXJhdG9ycywgdGhlbiBwYXNzXG4gIHRlc3QgKHZlcnNpb24pIHtcbiAgICBpZiAoIXZlcnNpb24pIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdmVyc2lvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZlcnNpb24gPSBuZXcgU2VtVmVyKHZlcnNpb24sIHRoaXMub3B0aW9ucylcbiAgICAgIH0gY2F0Y2ggKGVyKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zZXQubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0ZXN0U2V0KHRoaXMuc2V0W2ldLCB2ZXJzaW9uLCB0aGlzLm9wdGlvbnMpKSB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmFuZ2VcblxuY29uc3QgTFJVID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvbHJ1Y2FjaGUnKVxuY29uc3QgY2FjaGUgPSBuZXcgTFJVKClcblxuY29uc3QgcGFyc2VPcHRpb25zID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvcGFyc2Utb3B0aW9ucycpXG5jb25zdCBDb21wYXJhdG9yID0gcmVxdWlyZSgnLi9jb21wYXJhdG9yJylcbmNvbnN0IGRlYnVnID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvZGVidWcnKVxuY29uc3QgU2VtVmVyID0gcmVxdWlyZSgnLi9zZW12ZXInKVxuY29uc3Qge1xuICBzYWZlUmU6IHJlLFxuICB0LFxuICBjb21wYXJhdG9yVHJpbVJlcGxhY2UsXG4gIHRpbGRlVHJpbVJlcGxhY2UsXG4gIGNhcmV0VHJpbVJlcGxhY2UsXG59ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvcmUnKVxuY29uc3QgeyBGTEFHX0lOQ0xVREVfUFJFUkVMRUFTRSwgRkxBR19MT09TRSB9ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvY29uc3RhbnRzJylcblxuY29uc3QgaXNOdWxsU2V0ID0gYyA9PiBjLnZhbHVlID09PSAnPDAuMC4wLTAnXG5jb25zdCBpc0FueSA9IGMgPT4gYy52YWx1ZSA9PT0gJydcblxuLy8gdGFrZSBhIHNldCBvZiBjb21wYXJhdG9ycyBhbmQgZGV0ZXJtaW5lIHdoZXRoZXIgdGhlcmVcbi8vIGV4aXN0cyBhIHZlcnNpb24gd2hpY2ggY2FuIHNhdGlzZnkgaXRcbmNvbnN0IGlzU2F0aXNmaWFibGUgPSAoY29tcGFyYXRvcnMsIG9wdGlvbnMpID0+IHtcbiAgbGV0IHJlc3VsdCA9IHRydWVcbiAgY29uc3QgcmVtYWluaW5nQ29tcGFyYXRvcnMgPSBjb21wYXJhdG9ycy5zbGljZSgpXG4gIGxldCB0ZXN0Q29tcGFyYXRvciA9IHJlbWFpbmluZ0NvbXBhcmF0b3JzLnBvcCgpXG5cbiAgd2hpbGUgKHJlc3VsdCAmJiByZW1haW5pbmdDb21wYXJhdG9ycy5sZW5ndGgpIHtcbiAgICByZXN1bHQgPSByZW1haW5pbmdDb21wYXJhdG9ycy5ldmVyeSgob3RoZXJDb21wYXJhdG9yKSA9PiB7XG4gICAgICByZXR1cm4gdGVzdENvbXBhcmF0b3IuaW50ZXJzZWN0cyhvdGhlckNvbXBhcmF0b3IsIG9wdGlvbnMpXG4gICAgfSlcblxuICAgIHRlc3RDb21wYXJhdG9yID0gcmVtYWluaW5nQ29tcGFyYXRvcnMucG9wKClcbiAgfVxuXG4gIHJldHVybiByZXN1bHRcbn1cblxuLy8gY29tcHJpc2VkIG9mIHhyYW5nZXMsIHRpbGRlcywgc3RhcnMsIGFuZCBndGx0J3MgYXQgdGhpcyBwb2ludC5cbi8vIGFscmVhZHkgcmVwbGFjZWQgdGhlIGh5cGhlbiByYW5nZXNcbi8vIHR1cm4gaW50byBhIHNldCBvZiBKVVNUIGNvbXBhcmF0b3JzLlxuY29uc3QgcGFyc2VDb21wYXJhdG9yID0gKGNvbXAsIG9wdGlvbnMpID0+IHtcbiAgZGVidWcoJ2NvbXAnLCBjb21wLCBvcHRpb25zKVxuICBjb21wID0gcmVwbGFjZUNhcmV0cyhjb21wLCBvcHRpb25zKVxuICBkZWJ1ZygnY2FyZXQnLCBjb21wKVxuICBjb21wID0gcmVwbGFjZVRpbGRlcyhjb21wLCBvcHRpb25zKVxuICBkZWJ1ZygndGlsZGVzJywgY29tcClcbiAgY29tcCA9IHJlcGxhY2VYUmFuZ2VzKGNvbXAsIG9wdGlvbnMpXG4gIGRlYnVnKCd4cmFuZ2UnLCBjb21wKVxuICBjb21wID0gcmVwbGFjZVN0YXJzKGNvbXAsIG9wdGlvbnMpXG4gIGRlYnVnKCdzdGFycycsIGNvbXApXG4gIHJldHVybiBjb21wXG59XG5cbmNvbnN0IGlzWCA9IGlkID0+ICFpZCB8fCBpZC50b0xvd2VyQ2FzZSgpID09PSAneCcgfHwgaWQgPT09ICcqJ1xuXG4vLyB+LCB+PiAtLT4gKiAoYW55LCBraW5kYSBzaWxseSlcbi8vIH4yLCB+Mi54LCB+Mi54LngsIH4+Miwgfj4yLnggfj4yLngueCAtLT4gPj0yLjAuMCA8My4wLjAtMFxuLy8gfjIuMCwgfjIuMC54LCB+PjIuMCwgfj4yLjAueCAtLT4gPj0yLjAuMCA8Mi4xLjAtMFxuLy8gfjEuMiwgfjEuMi54LCB+PjEuMiwgfj4xLjIueCAtLT4gPj0xLjIuMCA8MS4zLjAtMFxuLy8gfjEuMi4zLCB+PjEuMi4zIC0tPiA+PTEuMi4zIDwxLjMuMC0wXG4vLyB+MS4yLjAsIH4+MS4yLjAgLS0+ID49MS4yLjAgPDEuMy4wLTBcbi8vIH4wLjAuMSAtLT4gPj0wLjAuMSA8MC4xLjAtMFxuY29uc3QgcmVwbGFjZVRpbGRlcyA9IChjb21wLCBvcHRpb25zKSA9PiB7XG4gIHJldHVybiBjb21wXG4gICAgLnRyaW0oKVxuICAgIC5zcGxpdCgvXFxzKy8pXG4gICAgLm1hcCgoYykgPT4gcmVwbGFjZVRpbGRlKGMsIG9wdGlvbnMpKVxuICAgIC5qb2luKCcgJylcbn1cblxuY29uc3QgcmVwbGFjZVRpbGRlID0gKGNvbXAsIG9wdGlvbnMpID0+IHtcbiAgY29uc3QgciA9IG9wdGlvbnMubG9vc2UgPyByZVt0LlRJTERFTE9PU0VdIDogcmVbdC5USUxERV1cbiAgcmV0dXJuIGNvbXAucmVwbGFjZShyLCAoXywgTSwgbSwgcCwgcHIpID0+IHtcbiAgICBkZWJ1ZygndGlsZGUnLCBjb21wLCBfLCBNLCBtLCBwLCBwcilcbiAgICBsZXQgcmV0XG5cbiAgICBpZiAoaXNYKE0pKSB7XG4gICAgICByZXQgPSAnJ1xuICAgIH0gZWxzZSBpZiAoaXNYKG0pKSB7XG4gICAgICByZXQgPSBgPj0ke019LjAuMCA8JHsrTSArIDF9LjAuMC0wYFxuICAgIH0gZWxzZSBpZiAoaXNYKHApKSB7XG4gICAgICAvLyB+MS4yID09ID49MS4yLjAgPDEuMy4wLTBcbiAgICAgIHJldCA9IGA+PSR7TX0uJHttfS4wIDwke019LiR7K20gKyAxfS4wLTBgXG4gICAgfSBlbHNlIGlmIChwcikge1xuICAgICAgZGVidWcoJ3JlcGxhY2VUaWxkZSBwcicsIHByKVxuICAgICAgcmV0ID0gYD49JHtNfS4ke219LiR7cH0tJHtwclxuICAgICAgfSA8JHtNfS4keyttICsgMX0uMC0wYFxuICAgIH0gZWxzZSB7XG4gICAgICAvLyB+MS4yLjMgPT0gPj0xLjIuMyA8MS4zLjAtMFxuICAgICAgcmV0ID0gYD49JHtNfS4ke219LiR7cFxuICAgICAgfSA8JHtNfS4keyttICsgMX0uMC0wYFxuICAgIH1cblxuICAgIGRlYnVnKCd0aWxkZSByZXR1cm4nLCByZXQpXG4gICAgcmV0dXJuIHJldFxuICB9KVxufVxuXG4vLyBeIC0tPiAqIChhbnksIGtpbmRhIHNpbGx5KVxuLy8gXjIsIF4yLngsIF4yLngueCAtLT4gPj0yLjAuMCA8My4wLjAtMFxuLy8gXjIuMCwgXjIuMC54IC0tPiA+PTIuMC4wIDwzLjAuMC0wXG4vLyBeMS4yLCBeMS4yLnggLS0+ID49MS4yLjAgPDIuMC4wLTBcbi8vIF4xLjIuMyAtLT4gPj0xLjIuMyA8Mi4wLjAtMFxuLy8gXjEuMi4wIC0tPiA+PTEuMi4wIDwyLjAuMC0wXG4vLyBeMC4wLjEgLS0+ID49MC4wLjEgPDAuMC4yLTBcbi8vIF4wLjEuMCAtLT4gPj0wLjEuMCA8MC4yLjAtMFxuY29uc3QgcmVwbGFjZUNhcmV0cyA9IChjb21wLCBvcHRpb25zKSA9PiB7XG4gIHJldHVybiBjb21wXG4gICAgLnRyaW0oKVxuICAgIC5zcGxpdCgvXFxzKy8pXG4gICAgLm1hcCgoYykgPT4gcmVwbGFjZUNhcmV0KGMsIG9wdGlvbnMpKVxuICAgIC5qb2luKCcgJylcbn1cblxuY29uc3QgcmVwbGFjZUNhcmV0ID0gKGNvbXAsIG9wdGlvbnMpID0+IHtcbiAgZGVidWcoJ2NhcmV0JywgY29tcCwgb3B0aW9ucylcbiAgY29uc3QgciA9IG9wdGlvbnMubG9vc2UgPyByZVt0LkNBUkVUTE9PU0VdIDogcmVbdC5DQVJFVF1cbiAgY29uc3QgeiA9IG9wdGlvbnMuaW5jbHVkZVByZXJlbGVhc2UgPyAnLTAnIDogJydcbiAgcmV0dXJuIGNvbXAucmVwbGFjZShyLCAoXywgTSwgbSwgcCwgcHIpID0+IHtcbiAgICBkZWJ1ZygnY2FyZXQnLCBjb21wLCBfLCBNLCBtLCBwLCBwcilcbiAgICBsZXQgcmV0XG5cbiAgICBpZiAoaXNYKE0pKSB7XG4gICAgICByZXQgPSAnJ1xuICAgIH0gZWxzZSBpZiAoaXNYKG0pKSB7XG4gICAgICByZXQgPSBgPj0ke019LjAuMCR7en0gPCR7K00gKyAxfS4wLjAtMGBcbiAgICB9IGVsc2UgaWYgKGlzWChwKSkge1xuICAgICAgaWYgKE0gPT09ICcwJykge1xuICAgICAgICByZXQgPSBgPj0ke019LiR7bX0uMCR7en0gPCR7TX0uJHsrbSArIDF9LjAtMGBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldCA9IGA+PSR7TX0uJHttfS4wJHt6fSA8JHsrTSArIDF9LjAuMC0wYFxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocHIpIHtcbiAgICAgIGRlYnVnKCdyZXBsYWNlQ2FyZXQgcHInLCBwcilcbiAgICAgIGlmIChNID09PSAnMCcpIHtcbiAgICAgICAgaWYgKG0gPT09ICcwJykge1xuICAgICAgICAgIHJldCA9IGA+PSR7TX0uJHttfS4ke3B9LSR7cHJcbiAgICAgICAgICB9IDwke019LiR7bX0uJHsrcCArIDF9LTBgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0ID0gYD49JHtNfS4ke219LiR7cH0tJHtwclxuICAgICAgICAgIH0gPCR7TX0uJHsrbSArIDF9LjAtMGBcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0ID0gYD49JHtNfS4ke219LiR7cH0tJHtwclxuICAgICAgICB9IDwkeytNICsgMX0uMC4wLTBgXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnKCdubyBwcicpXG4gICAgICBpZiAoTSA9PT0gJzAnKSB7XG4gICAgICAgIGlmIChtID09PSAnMCcpIHtcbiAgICAgICAgICByZXQgPSBgPj0ke019LiR7bX0uJHtwXG4gICAgICAgICAgfSR7en0gPCR7TX0uJHttfS4keytwICsgMX0tMGBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXQgPSBgPj0ke019LiR7bX0uJHtwXG4gICAgICAgICAgfSR7en0gPCR7TX0uJHsrbSArIDF9LjAtMGBcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0ID0gYD49JHtNfS4ke219LiR7cFxuICAgICAgICB9IDwkeytNICsgMX0uMC4wLTBgXG4gICAgICB9XG4gICAgfVxuXG4gICAgZGVidWcoJ2NhcmV0IHJldHVybicsIHJldClcbiAgICByZXR1cm4gcmV0XG4gIH0pXG59XG5cbmNvbnN0IHJlcGxhY2VYUmFuZ2VzID0gKGNvbXAsIG9wdGlvbnMpID0+IHtcbiAgZGVidWcoJ3JlcGxhY2VYUmFuZ2VzJywgY29tcCwgb3B0aW9ucylcbiAgcmV0dXJuIGNvbXBcbiAgICAuc3BsaXQoL1xccysvKVxuICAgIC5tYXAoKGMpID0+IHJlcGxhY2VYUmFuZ2UoYywgb3B0aW9ucykpXG4gICAgLmpvaW4oJyAnKVxufVxuXG5jb25zdCByZXBsYWNlWFJhbmdlID0gKGNvbXAsIG9wdGlvbnMpID0+IHtcbiAgY29tcCA9IGNvbXAudHJpbSgpXG4gIGNvbnN0IHIgPSBvcHRpb25zLmxvb3NlID8gcmVbdC5YUkFOR0VMT09TRV0gOiByZVt0LlhSQU5HRV1cbiAgcmV0dXJuIGNvbXAucmVwbGFjZShyLCAocmV0LCBndGx0LCBNLCBtLCBwLCBwcikgPT4ge1xuICAgIGRlYnVnKCd4UmFuZ2UnLCBjb21wLCByZXQsIGd0bHQsIE0sIG0sIHAsIHByKVxuICAgIGNvbnN0IHhNID0gaXNYKE0pXG4gICAgY29uc3QgeG0gPSB4TSB8fCBpc1gobSlcbiAgICBjb25zdCB4cCA9IHhtIHx8IGlzWChwKVxuICAgIGNvbnN0IGFueVggPSB4cFxuXG4gICAgaWYgKGd0bHQgPT09ICc9JyAmJiBhbnlYKSB7XG4gICAgICBndGx0ID0gJydcbiAgICB9XG5cbiAgICAvLyBpZiB3ZSdyZSBpbmNsdWRpbmcgcHJlcmVsZWFzZXMgaW4gdGhlIG1hdGNoLCB0aGVuIHdlIG5lZWRcbiAgICAvLyB0byBmaXggdGhpcyB0byAtMCwgdGhlIGxvd2VzdCBwb3NzaWJsZSBwcmVyZWxlYXNlIHZhbHVlXG4gICAgcHIgPSBvcHRpb25zLmluY2x1ZGVQcmVyZWxlYXNlID8gJy0wJyA6ICcnXG5cbiAgICBpZiAoeE0pIHtcbiAgICAgIGlmIChndGx0ID09PSAnPicgfHwgZ3RsdCA9PT0gJzwnKSB7XG4gICAgICAgIC8vIG5vdGhpbmcgaXMgYWxsb3dlZFxuICAgICAgICByZXQgPSAnPDAuMC4wLTAnXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBub3RoaW5nIGlzIGZvcmJpZGRlblxuICAgICAgICByZXQgPSAnKidcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGd0bHQgJiYgYW55WCkge1xuICAgICAgLy8gd2Uga25vdyBwYXRjaCBpcyBhbiB4LCBiZWNhdXNlIHdlIGhhdmUgYW55IHggYXQgYWxsLlxuICAgICAgLy8gcmVwbGFjZSBYIHdpdGggMFxuICAgICAgaWYgKHhtKSB7XG4gICAgICAgIG0gPSAwXG4gICAgICB9XG4gICAgICBwID0gMFxuXG4gICAgICBpZiAoZ3RsdCA9PT0gJz4nKSB7XG4gICAgICAgIC8vID4xID0+ID49Mi4wLjBcbiAgICAgICAgLy8gPjEuMiA9PiA+PTEuMy4wXG4gICAgICAgIGd0bHQgPSAnPj0nXG4gICAgICAgIGlmICh4bSkge1xuICAgICAgICAgIE0gPSArTSArIDFcbiAgICAgICAgICBtID0gMFxuICAgICAgICAgIHAgPSAwXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbSA9ICttICsgMVxuICAgICAgICAgIHAgPSAwXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZ3RsdCA9PT0gJzw9Jykge1xuICAgICAgICAvLyA8PTAuNy54IGlzIGFjdHVhbGx5IDwwLjguMCwgc2luY2UgYW55IDAuNy54IHNob3VsZFxuICAgICAgICAvLyBwYXNzLiAgU2ltaWxhcmx5LCA8PTcueCBpcyBhY3R1YWxseSA8OC4wLjAsIGV0Yy5cbiAgICAgICAgZ3RsdCA9ICc8J1xuICAgICAgICBpZiAoeG0pIHtcbiAgICAgICAgICBNID0gK00gKyAxXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbSA9ICttICsgMVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChndGx0ID09PSAnPCcpIHtcbiAgICAgICAgcHIgPSAnLTAnXG4gICAgICB9XG5cbiAgICAgIHJldCA9IGAke2d0bHQgKyBNfS4ke219LiR7cH0ke3ByfWBcbiAgICB9IGVsc2UgaWYgKHhtKSB7XG4gICAgICByZXQgPSBgPj0ke019LjAuMCR7cHJ9IDwkeytNICsgMX0uMC4wLTBgXG4gICAgfSBlbHNlIGlmICh4cCkge1xuICAgICAgcmV0ID0gYD49JHtNfS4ke219LjAke3ByXG4gICAgICB9IDwke019LiR7K20gKyAxfS4wLTBgXG4gICAgfVxuXG4gICAgZGVidWcoJ3hSYW5nZSByZXR1cm4nLCByZXQpXG5cbiAgICByZXR1cm4gcmV0XG4gIH0pXG59XG5cbi8vIEJlY2F1c2UgKiBpcyBBTkQtZWQgd2l0aCBldmVyeXRoaW5nIGVsc2UgaW4gdGhlIGNvbXBhcmF0b3IsXG4vLyBhbmQgJycgbWVhbnMgXCJhbnkgdmVyc2lvblwiLCBqdXN0IHJlbW92ZSB0aGUgKnMgZW50aXJlbHkuXG5jb25zdCByZXBsYWNlU3RhcnMgPSAoY29tcCwgb3B0aW9ucykgPT4ge1xuICBkZWJ1ZygncmVwbGFjZVN0YXJzJywgY29tcCwgb3B0aW9ucylcbiAgLy8gTG9vc2VuZXNzIGlzIGlnbm9yZWQgaGVyZS4gIHN0YXIgaXMgYWx3YXlzIGFzIGxvb3NlIGFzIGl0IGdldHMhXG4gIHJldHVybiBjb21wXG4gICAgLnRyaW0oKVxuICAgIC5yZXBsYWNlKHJlW3QuU1RBUl0sICcnKVxufVxuXG5jb25zdCByZXBsYWNlR1RFMCA9IChjb21wLCBvcHRpb25zKSA9PiB7XG4gIGRlYnVnKCdyZXBsYWNlR1RFMCcsIGNvbXAsIG9wdGlvbnMpXG4gIHJldHVybiBjb21wXG4gICAgLnRyaW0oKVxuICAgIC5yZXBsYWNlKHJlW29wdGlvbnMuaW5jbHVkZVByZXJlbGVhc2UgPyB0LkdURTBQUkUgOiB0LkdURTBdLCAnJylcbn1cblxuLy8gVGhpcyBmdW5jdGlvbiBpcyBwYXNzZWQgdG8gc3RyaW5nLnJlcGxhY2UocmVbdC5IWVBIRU5SQU5HRV0pXG4vLyBNLCBtLCBwYXRjaCwgcHJlcmVsZWFzZSwgYnVpbGRcbi8vIDEuMiAtIDMuNC41ID0+ID49MS4yLjAgPD0zLjQuNVxuLy8gMS4yLjMgLSAzLjQgPT4gPj0xLjIuMCA8My41LjAtMCBBbnkgMy40Lnggd2lsbCBkb1xuLy8gMS4yIC0gMy40ID0+ID49MS4yLjAgPDMuNS4wLTBcbi8vIFRPRE8gYnVpbGQ/XG5jb25zdCBoeXBoZW5SZXBsYWNlID0gaW5jUHIgPT4gKCQwLFxuICBmcm9tLCBmTSwgZm0sIGZwLCBmcHIsIGZiLFxuICB0bywgdE0sIHRtLCB0cCwgdHByKSA9PiB7XG4gIGlmIChpc1goZk0pKSB7XG4gICAgZnJvbSA9ICcnXG4gIH0gZWxzZSBpZiAoaXNYKGZtKSkge1xuICAgIGZyb20gPSBgPj0ke2ZNfS4wLjAke2luY1ByID8gJy0wJyA6ICcnfWBcbiAgfSBlbHNlIGlmIChpc1goZnApKSB7XG4gICAgZnJvbSA9IGA+PSR7Zk19LiR7Zm19LjAke2luY1ByID8gJy0wJyA6ICcnfWBcbiAgfSBlbHNlIGlmIChmcHIpIHtcbiAgICBmcm9tID0gYD49JHtmcm9tfWBcbiAgfSBlbHNlIHtcbiAgICBmcm9tID0gYD49JHtmcm9tfSR7aW5jUHIgPyAnLTAnIDogJyd9YFxuICB9XG5cbiAgaWYgKGlzWCh0TSkpIHtcbiAgICB0byA9ICcnXG4gIH0gZWxzZSBpZiAoaXNYKHRtKSkge1xuICAgIHRvID0gYDwkeyt0TSArIDF9LjAuMC0wYFxuICB9IGVsc2UgaWYgKGlzWCh0cCkpIHtcbiAgICB0byA9IGA8JHt0TX0uJHsrdG0gKyAxfS4wLTBgXG4gIH0gZWxzZSBpZiAodHByKSB7XG4gICAgdG8gPSBgPD0ke3RNfS4ke3RtfS4ke3RwfS0ke3Rwcn1gXG4gIH0gZWxzZSBpZiAoaW5jUHIpIHtcbiAgICB0byA9IGA8JHt0TX0uJHt0bX0uJHsrdHAgKyAxfS0wYFxuICB9IGVsc2Uge1xuICAgIHRvID0gYDw9JHt0b31gXG4gIH1cblxuICByZXR1cm4gYCR7ZnJvbX0gJHt0b31gLnRyaW0oKVxufVxuXG5jb25zdCB0ZXN0U2V0ID0gKHNldCwgdmVyc2lvbiwgb3B0aW9ucykgPT4ge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHNldC5sZW5ndGg7IGkrKykge1xuICAgIGlmICghc2V0W2ldLnRlc3QodmVyc2lvbikpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIGlmICh2ZXJzaW9uLnByZXJlbGVhc2UubGVuZ3RoICYmICFvcHRpb25zLmluY2x1ZGVQcmVyZWxlYXNlKSB7XG4gICAgLy8gRmluZCB0aGUgc2V0IG9mIHZlcnNpb25zIHRoYXQgYXJlIGFsbG93ZWQgdG8gaGF2ZSBwcmVyZWxlYXNlc1xuICAgIC8vIEZvciBleGFtcGxlLCBeMS4yLjMtcHIuMSBkZXN1Z2FycyB0byA+PTEuMi4zLXByLjEgPDIuMC4wXG4gICAgLy8gVGhhdCBzaG91bGQgYWxsb3cgYDEuMi4zLXByLjJgIHRvIHBhc3MuXG4gICAgLy8gSG93ZXZlciwgYDEuMi40LWFscGhhLm5vdHJlYWR5YCBzaG91bGQgTk9UIGJlIGFsbG93ZWQsXG4gICAgLy8gZXZlbiB0aG91Z2ggaXQncyB3aXRoaW4gdGhlIHJhbmdlIHNldCBieSB0aGUgY29tcGFyYXRvcnMuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZXQubGVuZ3RoOyBpKyspIHtcbiAgICAgIGRlYnVnKHNldFtpXS5zZW12ZXIpXG4gICAgICBpZiAoc2V0W2ldLnNlbXZlciA9PT0gQ29tcGFyYXRvci5BTlkpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgaWYgKHNldFtpXS5zZW12ZXIucHJlcmVsZWFzZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IGFsbG93ZWQgPSBzZXRbaV0uc2VtdmVyXG4gICAgICAgIGlmIChhbGxvd2VkLm1ham9yID09PSB2ZXJzaW9uLm1ham9yICYmXG4gICAgICAgICAgICBhbGxvd2VkLm1pbm9yID09PSB2ZXJzaW9uLm1pbm9yICYmXG4gICAgICAgICAgICBhbGxvd2VkLnBhdGNoID09PSB2ZXJzaW9uLnBhdGNoKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFZlcnNpb24gaGFzIGEgLXByZSwgYnV0IGl0J3Mgbm90IG9uZSBvZiB0aGUgb25lcyB3ZSBsaWtlLlxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgcmV0dXJuIHRydWVcbn1cbiIsICJjb25zdCBBTlkgPSBTeW1ib2woJ1NlbVZlciBBTlknKVxuLy8gaG9pc3RlZCBjbGFzcyBmb3IgY3ljbGljIGRlcGVuZGVuY3lcbmNsYXNzIENvbXBhcmF0b3Ige1xuICBzdGF0aWMgZ2V0IEFOWSAoKSB7XG4gICAgcmV0dXJuIEFOWVxuICB9XG5cbiAgY29uc3RydWN0b3IgKGNvbXAsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gcGFyc2VPcHRpb25zKG9wdGlvbnMpXG5cbiAgICBpZiAoY29tcCBpbnN0YW5jZW9mIENvbXBhcmF0b3IpIHtcbiAgICAgIGlmIChjb21wLmxvb3NlID09PSAhIW9wdGlvbnMubG9vc2UpIHtcbiAgICAgICAgcmV0dXJuIGNvbXBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbXAgPSBjb21wLnZhbHVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29tcCA9IGNvbXAudHJpbSgpLnNwbGl0KC9cXHMrLykuam9pbignICcpXG4gICAgZGVidWcoJ2NvbXBhcmF0b3InLCBjb21wLCBvcHRpb25zKVxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnNcbiAgICB0aGlzLmxvb3NlID0gISFvcHRpb25zLmxvb3NlXG4gICAgdGhpcy5wYXJzZShjb21wKVxuXG4gICAgaWYgKHRoaXMuc2VtdmVyID09PSBBTlkpIHtcbiAgICAgIHRoaXMudmFsdWUgPSAnJ1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnZhbHVlID0gdGhpcy5vcGVyYXRvciArIHRoaXMuc2VtdmVyLnZlcnNpb25cbiAgICB9XG5cbiAgICBkZWJ1ZygnY29tcCcsIHRoaXMpXG4gIH1cblxuICBwYXJzZSAoY29tcCkge1xuICAgIGNvbnN0IHIgPSB0aGlzLm9wdGlvbnMubG9vc2UgPyByZVt0LkNPTVBBUkFUT1JMT09TRV0gOiByZVt0LkNPTVBBUkFUT1JdXG4gICAgY29uc3QgbSA9IGNvbXAubWF0Y2gocilcblxuICAgIGlmICghbSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCBjb21wYXJhdG9yOiAke2NvbXB9YClcbiAgICB9XG5cbiAgICB0aGlzLm9wZXJhdG9yID0gbVsxXSAhPT0gdW5kZWZpbmVkID8gbVsxXSA6ICcnXG4gICAgaWYgKHRoaXMub3BlcmF0b3IgPT09ICc9Jykge1xuICAgICAgdGhpcy5vcGVyYXRvciA9ICcnXG4gICAgfVxuXG4gICAgLy8gaWYgaXQgbGl0ZXJhbGx5IGlzIGp1c3QgJz4nIG9yICcnIHRoZW4gYWxsb3cgYW55dGhpbmcuXG4gICAgaWYgKCFtWzJdKSB7XG4gICAgICB0aGlzLnNlbXZlciA9IEFOWVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNlbXZlciA9IG5ldyBTZW1WZXIobVsyXSwgdGhpcy5vcHRpb25zLmxvb3NlKVxuICAgIH1cbiAgfVxuXG4gIHRvU3RyaW5nICgpIHtcbiAgICByZXR1cm4gdGhpcy52YWx1ZVxuICB9XG5cbiAgdGVzdCAodmVyc2lvbikge1xuICAgIGRlYnVnKCdDb21wYXJhdG9yLnRlc3QnLCB2ZXJzaW9uLCB0aGlzLm9wdGlvbnMubG9vc2UpXG5cbiAgICBpZiAodGhpcy5zZW12ZXIgPT09IEFOWSB8fCB2ZXJzaW9uID09PSBBTlkpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB2ZXJzaW9uID09PSAnc3RyaW5nJykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmVyc2lvbiA9IG5ldyBTZW1WZXIodmVyc2lvbiwgdGhpcy5vcHRpb25zKVxuICAgICAgfSBjYXRjaCAoZXIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNtcCh2ZXJzaW9uLCB0aGlzLm9wZXJhdG9yLCB0aGlzLnNlbXZlciwgdGhpcy5vcHRpb25zKVxuICB9XG5cbiAgaW50ZXJzZWN0cyAoY29tcCwgb3B0aW9ucykge1xuICAgIGlmICghKGNvbXAgaW5zdGFuY2VvZiBDb21wYXJhdG9yKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignYSBDb21wYXJhdG9yIGlzIHJlcXVpcmVkJylcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcGVyYXRvciA9PT0gJycpIHtcbiAgICAgIGlmICh0aGlzLnZhbHVlID09PSAnJykge1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBSYW5nZShjb21wLnZhbHVlLCBvcHRpb25zKS50ZXN0KHRoaXMudmFsdWUpXG4gICAgfSBlbHNlIGlmIChjb21wLm9wZXJhdG9yID09PSAnJykge1xuICAgICAgaWYgKGNvbXAudmFsdWUgPT09ICcnKSB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IFJhbmdlKHRoaXMudmFsdWUsIG9wdGlvbnMpLnRlc3QoY29tcC5zZW12ZXIpXG4gICAgfVxuXG4gICAgb3B0aW9ucyA9IHBhcnNlT3B0aW9ucyhvcHRpb25zKVxuXG4gICAgLy8gU3BlY2lhbCBjYXNlcyB3aGVyZSBub3RoaW5nIGNhbiBwb3NzaWJseSBiZSBsb3dlclxuICAgIGlmIChvcHRpb25zLmluY2x1ZGVQcmVyZWxlYXNlICYmXG4gICAgICAodGhpcy52YWx1ZSA9PT0gJzwwLjAuMC0wJyB8fCBjb21wLnZhbHVlID09PSAnPDAuMC4wLTAnKSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGlmICghb3B0aW9ucy5pbmNsdWRlUHJlcmVsZWFzZSAmJlxuICAgICAgKHRoaXMudmFsdWUuc3RhcnRzV2l0aCgnPDAuMC4wJykgfHwgY29tcC52YWx1ZS5zdGFydHNXaXRoKCc8MC4wLjAnKSkpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIC8vIFNhbWUgZGlyZWN0aW9uIGluY3JlYXNpbmcgKD4gb3IgPj0pXG4gICAgaWYgKHRoaXMub3BlcmF0b3Iuc3RhcnRzV2l0aCgnPicpICYmIGNvbXAub3BlcmF0b3Iuc3RhcnRzV2l0aCgnPicpKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICAvLyBTYW1lIGRpcmVjdGlvbiBkZWNyZWFzaW5nICg8IG9yIDw9KVxuICAgIGlmICh0aGlzLm9wZXJhdG9yLnN0YXJ0c1dpdGgoJzwnKSAmJiBjb21wLm9wZXJhdG9yLnN0YXJ0c1dpdGgoJzwnKSkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgLy8gc2FtZSBTZW1WZXIgYW5kIGJvdGggc2lkZXMgYXJlIGluY2x1c2l2ZSAoPD0gb3IgPj0pXG4gICAgaWYgKFxuICAgICAgKHRoaXMuc2VtdmVyLnZlcnNpb24gPT09IGNvbXAuc2VtdmVyLnZlcnNpb24pICYmXG4gICAgICB0aGlzLm9wZXJhdG9yLmluY2x1ZGVzKCc9JykgJiYgY29tcC5vcGVyYXRvci5pbmNsdWRlcygnPScpKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICAvLyBvcHBvc2l0ZSBkaXJlY3Rpb25zIGxlc3MgdGhhblxuICAgIGlmIChjbXAodGhpcy5zZW12ZXIsICc8JywgY29tcC5zZW12ZXIsIG9wdGlvbnMpICYmXG4gICAgICB0aGlzLm9wZXJhdG9yLnN0YXJ0c1dpdGgoJz4nKSAmJiBjb21wLm9wZXJhdG9yLnN0YXJ0c1dpdGgoJzwnKSkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgLy8gb3Bwb3NpdGUgZGlyZWN0aW9ucyBncmVhdGVyIHRoYW5cbiAgICBpZiAoY21wKHRoaXMuc2VtdmVyLCAnPicsIGNvbXAuc2VtdmVyLCBvcHRpb25zKSAmJlxuICAgICAgdGhpcy5vcGVyYXRvci5zdGFydHNXaXRoKCc8JykgJiYgY29tcC5vcGVyYXRvci5zdGFydHNXaXRoKCc+JykpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQ29tcGFyYXRvclxuXG5jb25zdCBwYXJzZU9wdGlvbnMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9wYXJzZS1vcHRpb25zJylcbmNvbnN0IHsgc2FmZVJlOiByZSwgdCB9ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvcmUnKVxuY29uc3QgY21wID0gcmVxdWlyZSgnLi4vZnVuY3Rpb25zL2NtcCcpXG5jb25zdCBkZWJ1ZyA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2RlYnVnJylcbmNvbnN0IFNlbVZlciA9IHJlcXVpcmUoJy4vc2VtdmVyJylcbmNvbnN0IFJhbmdlID0gcmVxdWlyZSgnLi9yYW5nZScpXG4iLCAiY29uc3QgUmFuZ2UgPSByZXF1aXJlKCcuLi9jbGFzc2VzL3JhbmdlJylcbmNvbnN0IHNhdGlzZmllcyA9ICh2ZXJzaW9uLCByYW5nZSwgb3B0aW9ucykgPT4ge1xuICB0cnkge1xuICAgIHJhbmdlID0gbmV3IFJhbmdlKHJhbmdlLCBvcHRpb25zKVxuICB9IGNhdGNoIChlcikge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIHJldHVybiByYW5nZS50ZXN0KHZlcnNpb24pXG59XG5tb2R1bGUuZXhwb3J0cyA9IHNhdGlzZmllc1xuIiwgImNvbnN0IFJhbmdlID0gcmVxdWlyZSgnLi4vY2xhc3Nlcy9yYW5nZScpXG5cbi8vIE1vc3RseSBqdXN0IGZvciB0ZXN0aW5nIGFuZCBsZWdhY3kgQVBJIHJlYXNvbnNcbmNvbnN0IHRvQ29tcGFyYXRvcnMgPSAocmFuZ2UsIG9wdGlvbnMpID0+XG4gIG5ldyBSYW5nZShyYW5nZSwgb3B0aW9ucykuc2V0XG4gICAgLm1hcChjb21wID0+IGNvbXAubWFwKGMgPT4gYy52YWx1ZSkuam9pbignICcpLnRyaW0oKS5zcGxpdCgnICcpKVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRvQ29tcGFyYXRvcnNcbiIsICJjb25zdCBTZW1WZXIgPSByZXF1aXJlKCcuLi9jbGFzc2VzL3NlbXZlcicpXG5jb25zdCBSYW5nZSA9IHJlcXVpcmUoJy4uL2NsYXNzZXMvcmFuZ2UnKVxuXG5jb25zdCBtYXhTYXRpc2Z5aW5nID0gKHZlcnNpb25zLCByYW5nZSwgb3B0aW9ucykgPT4ge1xuICBsZXQgbWF4ID0gbnVsbFxuICBsZXQgbWF4U1YgPSBudWxsXG4gIGxldCByYW5nZU9iaiA9IG51bGxcbiAgdHJ5IHtcbiAgICByYW5nZU9iaiA9IG5ldyBSYW5nZShyYW5nZSwgb3B0aW9ucylcbiAgfSBjYXRjaCAoZXIpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIHZlcnNpb25zLmZvckVhY2goKHYpID0+IHtcbiAgICBpZiAocmFuZ2VPYmoudGVzdCh2KSkge1xuICAgICAgLy8gc2F0aXNmaWVzKHYsIHJhbmdlLCBvcHRpb25zKVxuICAgICAgaWYgKCFtYXggfHwgbWF4U1YuY29tcGFyZSh2KSA9PT0gLTEpIHtcbiAgICAgICAgLy8gY29tcGFyZShtYXgsIHYsIHRydWUpXG4gICAgICAgIG1heCA9IHZcbiAgICAgICAgbWF4U1YgPSBuZXcgU2VtVmVyKG1heCwgb3B0aW9ucylcbiAgICAgIH1cbiAgICB9XG4gIH0pXG4gIHJldHVybiBtYXhcbn1cbm1vZHVsZS5leHBvcnRzID0gbWF4U2F0aXNmeWluZ1xuIiwgImNvbnN0IFNlbVZlciA9IHJlcXVpcmUoJy4uL2NsYXNzZXMvc2VtdmVyJylcbmNvbnN0IFJhbmdlID0gcmVxdWlyZSgnLi4vY2xhc3Nlcy9yYW5nZScpXG5jb25zdCBtaW5TYXRpc2Z5aW5nID0gKHZlcnNpb25zLCByYW5nZSwgb3B0aW9ucykgPT4ge1xuICBsZXQgbWluID0gbnVsbFxuICBsZXQgbWluU1YgPSBudWxsXG4gIGxldCByYW5nZU9iaiA9IG51bGxcbiAgdHJ5IHtcbiAgICByYW5nZU9iaiA9IG5ldyBSYW5nZShyYW5nZSwgb3B0aW9ucylcbiAgfSBjYXRjaCAoZXIpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIHZlcnNpb25zLmZvckVhY2goKHYpID0+IHtcbiAgICBpZiAocmFuZ2VPYmoudGVzdCh2KSkge1xuICAgICAgLy8gc2F0aXNmaWVzKHYsIHJhbmdlLCBvcHRpb25zKVxuICAgICAgaWYgKCFtaW4gfHwgbWluU1YuY29tcGFyZSh2KSA9PT0gMSkge1xuICAgICAgICAvLyBjb21wYXJlKG1pbiwgdiwgdHJ1ZSlcbiAgICAgICAgbWluID0gdlxuICAgICAgICBtaW5TViA9IG5ldyBTZW1WZXIobWluLCBvcHRpb25zKVxuICAgICAgfVxuICAgIH1cbiAgfSlcbiAgcmV0dXJuIG1pblxufVxubW9kdWxlLmV4cG9ydHMgPSBtaW5TYXRpc2Z5aW5nXG4iLCAiY29uc3QgU2VtVmVyID0gcmVxdWlyZSgnLi4vY2xhc3Nlcy9zZW12ZXInKVxuY29uc3QgUmFuZ2UgPSByZXF1aXJlKCcuLi9jbGFzc2VzL3JhbmdlJylcbmNvbnN0IGd0ID0gcmVxdWlyZSgnLi4vZnVuY3Rpb25zL2d0JylcblxuY29uc3QgbWluVmVyc2lvbiA9IChyYW5nZSwgbG9vc2UpID0+IHtcbiAgcmFuZ2UgPSBuZXcgUmFuZ2UocmFuZ2UsIGxvb3NlKVxuXG4gIGxldCBtaW52ZXIgPSBuZXcgU2VtVmVyKCcwLjAuMCcpXG4gIGlmIChyYW5nZS50ZXN0KG1pbnZlcikpIHtcbiAgICByZXR1cm4gbWludmVyXG4gIH1cblxuICBtaW52ZXIgPSBuZXcgU2VtVmVyKCcwLjAuMC0wJylcbiAgaWYgKHJhbmdlLnRlc3QobWludmVyKSkge1xuICAgIHJldHVybiBtaW52ZXJcbiAgfVxuXG4gIG1pbnZlciA9IG51bGxcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCByYW5nZS5zZXQubGVuZ3RoOyArK2kpIHtcbiAgICBjb25zdCBjb21wYXJhdG9ycyA9IHJhbmdlLnNldFtpXVxuXG4gICAgbGV0IHNldE1pbiA9IG51bGxcbiAgICBjb21wYXJhdG9ycy5mb3JFYWNoKChjb21wYXJhdG9yKSA9PiB7XG4gICAgICAvLyBDbG9uZSB0byBhdm9pZCBtYW5pcHVsYXRpbmcgdGhlIGNvbXBhcmF0b3IncyBzZW12ZXIgb2JqZWN0LlxuICAgICAgY29uc3QgY29tcHZlciA9IG5ldyBTZW1WZXIoY29tcGFyYXRvci5zZW12ZXIudmVyc2lvbilcbiAgICAgIHN3aXRjaCAoY29tcGFyYXRvci5vcGVyYXRvcikge1xuICAgICAgICBjYXNlICc+JzpcbiAgICAgICAgICBpZiAoY29tcHZlci5wcmVyZWxlYXNlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29tcHZlci5wYXRjaCsrXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbXB2ZXIucHJlcmVsZWFzZS5wdXNoKDApXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbXB2ZXIucmF3ID0gY29tcHZlci5mb3JtYXQoKVxuICAgICAgICAgIC8qIGZhbGx0aHJvdWdoICovXG4gICAgICAgIGNhc2UgJyc6XG4gICAgICAgIGNhc2UgJz49JzpcbiAgICAgICAgICBpZiAoIXNldE1pbiB8fCBndChjb21wdmVyLCBzZXRNaW4pKSB7XG4gICAgICAgICAgICBzZXRNaW4gPSBjb21wdmVyXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJzwnOlxuICAgICAgICBjYXNlICc8PSc6XG4gICAgICAgICAgLyogSWdub3JlIG1heGltdW0gdmVyc2lvbnMgKi9cbiAgICAgICAgICBicmVha1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCBvcGVyYXRpb246ICR7Y29tcGFyYXRvci5vcGVyYXRvcn1gKVxuICAgICAgfVxuICAgIH0pXG4gICAgaWYgKHNldE1pbiAmJiAoIW1pbnZlciB8fCBndChtaW52ZXIsIHNldE1pbikpKSB7XG4gICAgICBtaW52ZXIgPSBzZXRNaW5cbiAgICB9XG4gIH1cblxuICBpZiAobWludmVyICYmIHJhbmdlLnRlc3QobWludmVyKSkge1xuICAgIHJldHVybiBtaW52ZXJcbiAgfVxuXG4gIHJldHVybiBudWxsXG59XG5tb2R1bGUuZXhwb3J0cyA9IG1pblZlcnNpb25cbiIsICJjb25zdCBSYW5nZSA9IHJlcXVpcmUoJy4uL2NsYXNzZXMvcmFuZ2UnKVxuY29uc3QgdmFsaWRSYW5nZSA9IChyYW5nZSwgb3B0aW9ucykgPT4ge1xuICB0cnkge1xuICAgIC8vIFJldHVybiAnKicgaW5zdGVhZCBvZiAnJyBzbyB0aGF0IHRydXRoaW5lc3Mgd29ya3MuXG4gICAgLy8gVGhpcyB3aWxsIHRocm93IGlmIGl0J3MgaW52YWxpZCBhbnl3YXlcbiAgICByZXR1cm4gbmV3IFJhbmdlKHJhbmdlLCBvcHRpb25zKS5yYW5nZSB8fCAnKidcbiAgfSBjYXRjaCAoZXIpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IHZhbGlkUmFuZ2VcbiIsICJjb25zdCBTZW1WZXIgPSByZXF1aXJlKCcuLi9jbGFzc2VzL3NlbXZlcicpXG5jb25zdCBDb21wYXJhdG9yID0gcmVxdWlyZSgnLi4vY2xhc3Nlcy9jb21wYXJhdG9yJylcbmNvbnN0IHsgQU5ZIH0gPSBDb21wYXJhdG9yXG5jb25zdCBSYW5nZSA9IHJlcXVpcmUoJy4uL2NsYXNzZXMvcmFuZ2UnKVxuY29uc3Qgc2F0aXNmaWVzID0gcmVxdWlyZSgnLi4vZnVuY3Rpb25zL3NhdGlzZmllcycpXG5jb25zdCBndCA9IHJlcXVpcmUoJy4uL2Z1bmN0aW9ucy9ndCcpXG5jb25zdCBsdCA9IHJlcXVpcmUoJy4uL2Z1bmN0aW9ucy9sdCcpXG5jb25zdCBsdGUgPSByZXF1aXJlKCcuLi9mdW5jdGlvbnMvbHRlJylcbmNvbnN0IGd0ZSA9IHJlcXVpcmUoJy4uL2Z1bmN0aW9ucy9ndGUnKVxuXG5jb25zdCBvdXRzaWRlID0gKHZlcnNpb24sIHJhbmdlLCBoaWxvLCBvcHRpb25zKSA9PiB7XG4gIHZlcnNpb24gPSBuZXcgU2VtVmVyKHZlcnNpb24sIG9wdGlvbnMpXG4gIHJhbmdlID0gbmV3IFJhbmdlKHJhbmdlLCBvcHRpb25zKVxuXG4gIGxldCBndGZuLCBsdGVmbiwgbHRmbiwgY29tcCwgZWNvbXBcbiAgc3dpdGNoIChoaWxvKSB7XG4gICAgY2FzZSAnPic6XG4gICAgICBndGZuID0gZ3RcbiAgICAgIGx0ZWZuID0gbHRlXG4gICAgICBsdGZuID0gbHRcbiAgICAgIGNvbXAgPSAnPidcbiAgICAgIGVjb21wID0gJz49J1xuICAgICAgYnJlYWtcbiAgICBjYXNlICc8JzpcbiAgICAgIGd0Zm4gPSBsdFxuICAgICAgbHRlZm4gPSBndGVcbiAgICAgIGx0Zm4gPSBndFxuICAgICAgY29tcCA9ICc8J1xuICAgICAgZWNvbXAgPSAnPD0nXG4gICAgICBicmVha1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdNdXN0IHByb3ZpZGUgYSBoaWxvIHZhbCBvZiBcIjxcIiBvciBcIj5cIicpXG4gIH1cblxuICAvLyBJZiBpdCBzYXRpc2ZpZXMgdGhlIHJhbmdlIGl0IGlzIG5vdCBvdXRzaWRlXG4gIGlmIChzYXRpc2ZpZXModmVyc2lvbiwgcmFuZ2UsIG9wdGlvbnMpKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICAvLyBGcm9tIG5vdyBvbiwgdmFyaWFibGUgdGVybXMgYXJlIGFzIGlmIHdlJ3JlIGluIFwiZ3RyXCIgbW9kZS5cbiAgLy8gYnV0IG5vdGUgdGhhdCBldmVyeXRoaW5nIGlzIGZsaXBwZWQgZm9yIHRoZSBcImx0clwiIGZ1bmN0aW9uLlxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcmFuZ2Uuc2V0Lmxlbmd0aDsgKytpKSB7XG4gICAgY29uc3QgY29tcGFyYXRvcnMgPSByYW5nZS5zZXRbaV1cblxuICAgIGxldCBoaWdoID0gbnVsbFxuICAgIGxldCBsb3cgPSBudWxsXG5cbiAgICBjb21wYXJhdG9ycy5mb3JFYWNoKChjb21wYXJhdG9yKSA9PiB7XG4gICAgICBpZiAoY29tcGFyYXRvci5zZW12ZXIgPT09IEFOWSkge1xuICAgICAgICBjb21wYXJhdG9yID0gbmV3IENvbXBhcmF0b3IoJz49MC4wLjAnKVxuICAgICAgfVxuICAgICAgaGlnaCA9IGhpZ2ggfHwgY29tcGFyYXRvclxuICAgICAgbG93ID0gbG93IHx8IGNvbXBhcmF0b3JcbiAgICAgIGlmIChndGZuKGNvbXBhcmF0b3Iuc2VtdmVyLCBoaWdoLnNlbXZlciwgb3B0aW9ucykpIHtcbiAgICAgICAgaGlnaCA9IGNvbXBhcmF0b3JcbiAgICAgIH0gZWxzZSBpZiAobHRmbihjb21wYXJhdG9yLnNlbXZlciwgbG93LnNlbXZlciwgb3B0aW9ucykpIHtcbiAgICAgICAgbG93ID0gY29tcGFyYXRvclxuICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyBJZiB0aGUgZWRnZSB2ZXJzaW9uIGNvbXBhcmF0b3IgaGFzIGEgb3BlcmF0b3IgdGhlbiBvdXIgdmVyc2lvblxuICAgIC8vIGlzbid0IG91dHNpZGUgaXRcbiAgICBpZiAoaGlnaC5vcGVyYXRvciA9PT0gY29tcCB8fCBoaWdoLm9wZXJhdG9yID09PSBlY29tcCkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIGxvd2VzdCB2ZXJzaW9uIGNvbXBhcmF0b3IgaGFzIGFuIG9wZXJhdG9yIGFuZCBvdXIgdmVyc2lvblxuICAgIC8vIGlzIGxlc3MgdGhhbiBpdCB0aGVuIGl0IGlzbid0IGhpZ2hlciB0aGFuIHRoZSByYW5nZVxuICAgIGlmICgoIWxvdy5vcGVyYXRvciB8fCBsb3cub3BlcmF0b3IgPT09IGNvbXApICYmXG4gICAgICAgIGx0ZWZuKHZlcnNpb24sIGxvdy5zZW12ZXIpKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9IGVsc2UgaWYgKGxvdy5vcGVyYXRvciA9PT0gZWNvbXAgJiYgbHRmbih2ZXJzaW9uLCBsb3cuc2VtdmVyKSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlXG59XG5cbm1vZHVsZS5leHBvcnRzID0gb3V0c2lkZVxuIiwgIi8vIERldGVybWluZSBpZiB2ZXJzaW9uIGlzIGdyZWF0ZXIgdGhhbiBhbGwgdGhlIHZlcnNpb25zIHBvc3NpYmxlIGluIHRoZSByYW5nZS5cbmNvbnN0IG91dHNpZGUgPSByZXF1aXJlKCcuL291dHNpZGUnKVxuY29uc3QgZ3RyID0gKHZlcnNpb24sIHJhbmdlLCBvcHRpb25zKSA9PiBvdXRzaWRlKHZlcnNpb24sIHJhbmdlLCAnPicsIG9wdGlvbnMpXG5tb2R1bGUuZXhwb3J0cyA9IGd0clxuIiwgImNvbnN0IG91dHNpZGUgPSByZXF1aXJlKCcuL291dHNpZGUnKVxuLy8gRGV0ZXJtaW5lIGlmIHZlcnNpb24gaXMgbGVzcyB0aGFuIGFsbCB0aGUgdmVyc2lvbnMgcG9zc2libGUgaW4gdGhlIHJhbmdlXG5jb25zdCBsdHIgPSAodmVyc2lvbiwgcmFuZ2UsIG9wdGlvbnMpID0+IG91dHNpZGUodmVyc2lvbiwgcmFuZ2UsICc8Jywgb3B0aW9ucylcbm1vZHVsZS5leHBvcnRzID0gbHRyXG4iLCAiY29uc3QgUmFuZ2UgPSByZXF1aXJlKCcuLi9jbGFzc2VzL3JhbmdlJylcbmNvbnN0IGludGVyc2VjdHMgPSAocjEsIHIyLCBvcHRpb25zKSA9PiB7XG4gIHIxID0gbmV3IFJhbmdlKHIxLCBvcHRpb25zKVxuICByMiA9IG5ldyBSYW5nZShyMiwgb3B0aW9ucylcbiAgcmV0dXJuIHIxLmludGVyc2VjdHMocjIsIG9wdGlvbnMpXG59XG5tb2R1bGUuZXhwb3J0cyA9IGludGVyc2VjdHNcbiIsICIvLyBnaXZlbiBhIHNldCBvZiB2ZXJzaW9ucyBhbmQgYSByYW5nZSwgY3JlYXRlIGEgXCJzaW1wbGlmaWVkXCIgcmFuZ2Vcbi8vIHRoYXQgaW5jbHVkZXMgdGhlIHNhbWUgdmVyc2lvbnMgdGhhdCB0aGUgb3JpZ2luYWwgcmFuZ2UgZG9lc1xuLy8gSWYgdGhlIG9yaWdpbmFsIHJhbmdlIGlzIHNob3J0ZXIgdGhhbiB0aGUgc2ltcGxpZmllZCBvbmUsIHJldHVybiB0aGF0LlxuY29uc3Qgc2F0aXNmaWVzID0gcmVxdWlyZSgnLi4vZnVuY3Rpb25zL3NhdGlzZmllcy5qcycpXG5jb25zdCBjb21wYXJlID0gcmVxdWlyZSgnLi4vZnVuY3Rpb25zL2NvbXBhcmUuanMnKVxubW9kdWxlLmV4cG9ydHMgPSAodmVyc2lvbnMsIHJhbmdlLCBvcHRpb25zKSA9PiB7XG4gIGNvbnN0IHNldCA9IFtdXG4gIGxldCBmaXJzdCA9IG51bGxcbiAgbGV0IHByZXYgPSBudWxsXG4gIGNvbnN0IHYgPSB2ZXJzaW9ucy5zb3J0KChhLCBiKSA9PiBjb21wYXJlKGEsIGIsIG9wdGlvbnMpKVxuICBmb3IgKGNvbnN0IHZlcnNpb24gb2Ygdikge1xuICAgIGNvbnN0IGluY2x1ZGVkID0gc2F0aXNmaWVzKHZlcnNpb24sIHJhbmdlLCBvcHRpb25zKVxuICAgIGlmIChpbmNsdWRlZCkge1xuICAgICAgcHJldiA9IHZlcnNpb25cbiAgICAgIGlmICghZmlyc3QpIHtcbiAgICAgICAgZmlyc3QgPSB2ZXJzaW9uXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChwcmV2KSB7XG4gICAgICAgIHNldC5wdXNoKFtmaXJzdCwgcHJldl0pXG4gICAgICB9XG4gICAgICBwcmV2ID0gbnVsbFxuICAgICAgZmlyc3QgPSBudWxsXG4gICAgfVxuICB9XG4gIGlmIChmaXJzdCkge1xuICAgIHNldC5wdXNoKFtmaXJzdCwgbnVsbF0pXG4gIH1cblxuICBjb25zdCByYW5nZXMgPSBbXVxuICBmb3IgKGNvbnN0IFttaW4sIG1heF0gb2Ygc2V0KSB7XG4gICAgaWYgKG1pbiA9PT0gbWF4KSB7XG4gICAgICByYW5nZXMucHVzaChtaW4pXG4gICAgfSBlbHNlIGlmICghbWF4ICYmIG1pbiA9PT0gdlswXSkge1xuICAgICAgcmFuZ2VzLnB1c2goJyonKVxuICAgIH0gZWxzZSBpZiAoIW1heCkge1xuICAgICAgcmFuZ2VzLnB1c2goYD49JHttaW59YClcbiAgICB9IGVsc2UgaWYgKG1pbiA9PT0gdlswXSkge1xuICAgICAgcmFuZ2VzLnB1c2goYDw9JHttYXh9YClcbiAgICB9IGVsc2Uge1xuICAgICAgcmFuZ2VzLnB1c2goYCR7bWlufSAtICR7bWF4fWApXG4gICAgfVxuICB9XG4gIGNvbnN0IHNpbXBsaWZpZWQgPSByYW5nZXMuam9pbignIHx8ICcpXG4gIGNvbnN0IG9yaWdpbmFsID0gdHlwZW9mIHJhbmdlLnJhdyA9PT0gJ3N0cmluZycgPyByYW5nZS5yYXcgOiBTdHJpbmcocmFuZ2UpXG4gIHJldHVybiBzaW1wbGlmaWVkLmxlbmd0aCA8IG9yaWdpbmFsLmxlbmd0aCA/IHNpbXBsaWZpZWQgOiByYW5nZVxufVxuIiwgImNvbnN0IFJhbmdlID0gcmVxdWlyZSgnLi4vY2xhc3Nlcy9yYW5nZS5qcycpXG5jb25zdCBDb21wYXJhdG9yID0gcmVxdWlyZSgnLi4vY2xhc3Nlcy9jb21wYXJhdG9yLmpzJylcbmNvbnN0IHsgQU5ZIH0gPSBDb21wYXJhdG9yXG5jb25zdCBzYXRpc2ZpZXMgPSByZXF1aXJlKCcuLi9mdW5jdGlvbnMvc2F0aXNmaWVzLmpzJylcbmNvbnN0IGNvbXBhcmUgPSByZXF1aXJlKCcuLi9mdW5jdGlvbnMvY29tcGFyZS5qcycpXG5cbi8vIENvbXBsZXggcmFuZ2UgYHIxIHx8IHIyIHx8IC4uLmAgaXMgYSBzdWJzZXQgb2YgYFIxIHx8IFIyIHx8IC4uLmAgaWZmOlxuLy8gLSBFdmVyeSBzaW1wbGUgcmFuZ2UgYHIxLCByMiwgLi4uYCBpcyBhIG51bGwgc2V0LCBPUlxuLy8gLSBFdmVyeSBzaW1wbGUgcmFuZ2UgYHIxLCByMiwgLi4uYCB3aGljaCBpcyBub3QgYSBudWxsIHNldCBpcyBhIHN1YnNldCBvZlxuLy8gICBzb21lIGBSMSwgUjIsIC4uLmBcbi8vXG4vLyBTaW1wbGUgcmFuZ2UgYGMxIGMyIC4uLmAgaXMgYSBzdWJzZXQgb2Ygc2ltcGxlIHJhbmdlIGBDMSBDMiAuLi5gIGlmZjpcbi8vIC0gSWYgYyBpcyBvbmx5IHRoZSBBTlkgY29tcGFyYXRvclxuLy8gICAtIElmIEMgaXMgb25seSB0aGUgQU5ZIGNvbXBhcmF0b3IsIHJldHVybiB0cnVlXG4vLyAgIC0gRWxzZSBpZiBpbiBwcmVyZWxlYXNlIG1vZGUsIHJldHVybiBmYWxzZVxuLy8gICAtIGVsc2UgcmVwbGFjZSBjIHdpdGggYFs+PTAuMC4wXWBcbi8vIC0gSWYgQyBpcyBvbmx5IHRoZSBBTlkgY29tcGFyYXRvclxuLy8gICAtIGlmIGluIHByZXJlbGVhc2UgbW9kZSwgcmV0dXJuIHRydWVcbi8vICAgLSBlbHNlIHJlcGxhY2UgQyB3aXRoIGBbPj0wLjAuMF1gXG4vLyAtIExldCBFUSBiZSB0aGUgc2V0IG9mID0gY29tcGFyYXRvcnMgaW4gY1xuLy8gLSBJZiBFUSBpcyBtb3JlIHRoYW4gb25lLCByZXR1cm4gdHJ1ZSAobnVsbCBzZXQpXG4vLyAtIExldCBHVCBiZSB0aGUgaGlnaGVzdCA+IG9yID49IGNvbXBhcmF0b3IgaW4gY1xuLy8gLSBMZXQgTFQgYmUgdGhlIGxvd2VzdCA8IG9yIDw9IGNvbXBhcmF0b3IgaW4gY1xuLy8gLSBJZiBHVCBhbmQgTFQsIGFuZCBHVC5zZW12ZXIgPiBMVC5zZW12ZXIsIHJldHVybiB0cnVlIChudWxsIHNldClcbi8vIC0gSWYgYW55IEMgaXMgYSA9IHJhbmdlLCBhbmQgR1Qgb3IgTFQgYXJlIHNldCwgcmV0dXJuIGZhbHNlXG4vLyAtIElmIEVRXG4vLyAgIC0gSWYgR1QsIGFuZCBFUSBkb2VzIG5vdCBzYXRpc2Z5IEdULCByZXR1cm4gdHJ1ZSAobnVsbCBzZXQpXG4vLyAgIC0gSWYgTFQsIGFuZCBFUSBkb2VzIG5vdCBzYXRpc2Z5IExULCByZXR1cm4gdHJ1ZSAobnVsbCBzZXQpXG4vLyAgIC0gSWYgRVEgc2F0aXNmaWVzIGV2ZXJ5IEMsIHJldHVybiB0cnVlXG4vLyAgIC0gRWxzZSByZXR1cm4gZmFsc2Vcbi8vIC0gSWYgR1Rcbi8vICAgLSBJZiBHVC5zZW12ZXIgaXMgbG93ZXIgdGhhbiBhbnkgPiBvciA+PSBjb21wIGluIEMsIHJldHVybiBmYWxzZVxuLy8gICAtIElmIEdUIGlzID49LCBhbmQgR1Quc2VtdmVyIGRvZXMgbm90IHNhdGlzZnkgZXZlcnkgQywgcmV0dXJuIGZhbHNlXG4vLyAgIC0gSWYgR1Quc2VtdmVyIGhhcyBhIHByZXJlbGVhc2UsIGFuZCBub3QgaW4gcHJlcmVsZWFzZSBtb2RlXG4vLyAgICAgLSBJZiBubyBDIGhhcyBhIHByZXJlbGVhc2UgYW5kIHRoZSBHVC5zZW12ZXIgdHVwbGUsIHJldHVybiBmYWxzZVxuLy8gLSBJZiBMVFxuLy8gICAtIElmIExULnNlbXZlciBpcyBncmVhdGVyIHRoYW4gYW55IDwgb3IgPD0gY29tcCBpbiBDLCByZXR1cm4gZmFsc2Vcbi8vICAgLSBJZiBMVCBpcyA8PSwgYW5kIExULnNlbXZlciBkb2VzIG5vdCBzYXRpc2Z5IGV2ZXJ5IEMsIHJldHVybiBmYWxzZVxuLy8gICAtIElmIEdULnNlbXZlciBoYXMgYSBwcmVyZWxlYXNlLCBhbmQgbm90IGluIHByZXJlbGVhc2UgbW9kZVxuLy8gICAgIC0gSWYgbm8gQyBoYXMgYSBwcmVyZWxlYXNlIGFuZCB0aGUgTFQuc2VtdmVyIHR1cGxlLCByZXR1cm4gZmFsc2Vcbi8vIC0gRWxzZSByZXR1cm4gdHJ1ZVxuXG5jb25zdCBzdWJzZXQgPSAoc3ViLCBkb20sIG9wdGlvbnMgPSB7fSkgPT4ge1xuICBpZiAoc3ViID09PSBkb20pIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgc3ViID0gbmV3IFJhbmdlKHN1Yiwgb3B0aW9ucylcbiAgZG9tID0gbmV3IFJhbmdlKGRvbSwgb3B0aW9ucylcbiAgbGV0IHNhd05vbk51bGwgPSBmYWxzZVxuXG4gIE9VVEVSOiBmb3IgKGNvbnN0IHNpbXBsZVN1YiBvZiBzdWIuc2V0KSB7XG4gICAgZm9yIChjb25zdCBzaW1wbGVEb20gb2YgZG9tLnNldCkge1xuICAgICAgY29uc3QgaXNTdWIgPSBzaW1wbGVTdWJzZXQoc2ltcGxlU3ViLCBzaW1wbGVEb20sIG9wdGlvbnMpXG4gICAgICBzYXdOb25OdWxsID0gc2F3Tm9uTnVsbCB8fCBpc1N1YiAhPT0gbnVsbFxuICAgICAgaWYgKGlzU3ViKSB7XG4gICAgICAgIGNvbnRpbnVlIE9VVEVSXG4gICAgICB9XG4gICAgfVxuICAgIC8vIHRoZSBudWxsIHNldCBpcyBhIHN1YnNldCBvZiBldmVyeXRoaW5nLCBidXQgbnVsbCBzaW1wbGUgcmFuZ2VzIGluXG4gICAgLy8gYSBjb21wbGV4IHJhbmdlIHNob3VsZCBiZSBpZ25vcmVkLiAgc28gaWYgd2Ugc2F3IGEgbm9uLW51bGwgcmFuZ2UsXG4gICAgLy8gdGhlbiB3ZSBrbm93IHRoaXMgaXNuJ3QgYSBzdWJzZXQsIGJ1dCBpZiBFVkVSWSBzaW1wbGUgcmFuZ2Ugd2FzIG51bGwsXG4gICAgLy8gdGhlbiBpdCBpcyBhIHN1YnNldC5cbiAgICBpZiAoc2F3Tm9uTnVsbCkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlXG59XG5cbmNvbnN0IG1pbmltdW1WZXJzaW9uV2l0aFByZVJlbGVhc2UgPSBbbmV3IENvbXBhcmF0b3IoJz49MC4wLjAtMCcpXVxuY29uc3QgbWluaW11bVZlcnNpb24gPSBbbmV3IENvbXBhcmF0b3IoJz49MC4wLjAnKV1cblxuY29uc3Qgc2ltcGxlU3Vic2V0ID0gKHN1YiwgZG9tLCBvcHRpb25zKSA9PiB7XG4gIGlmIChzdWIgPT09IGRvbSkge1xuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBpZiAoc3ViLmxlbmd0aCA9PT0gMSAmJiBzdWJbMF0uc2VtdmVyID09PSBBTlkpIHtcbiAgICBpZiAoZG9tLmxlbmd0aCA9PT0gMSAmJiBkb21bMF0uc2VtdmVyID09PSBBTlkpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfSBlbHNlIGlmIChvcHRpb25zLmluY2x1ZGVQcmVyZWxlYXNlKSB7XG4gICAgICBzdWIgPSBtaW5pbXVtVmVyc2lvbldpdGhQcmVSZWxlYXNlXG4gICAgfSBlbHNlIHtcbiAgICAgIHN1YiA9IG1pbmltdW1WZXJzaW9uXG4gICAgfVxuICB9XG5cbiAgaWYgKGRvbS5sZW5ndGggPT09IDEgJiYgZG9tWzBdLnNlbXZlciA9PT0gQU5ZKSB7XG4gICAgaWYgKG9wdGlvbnMuaW5jbHVkZVByZXJlbGVhc2UpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfSBlbHNlIHtcbiAgICAgIGRvbSA9IG1pbmltdW1WZXJzaW9uXG4gICAgfVxuICB9XG5cbiAgY29uc3QgZXFTZXQgPSBuZXcgU2V0KClcbiAgbGV0IGd0LCBsdFxuICBmb3IgKGNvbnN0IGMgb2Ygc3ViKSB7XG4gICAgaWYgKGMub3BlcmF0b3IgPT09ICc+JyB8fCBjLm9wZXJhdG9yID09PSAnPj0nKSB7XG4gICAgICBndCA9IGhpZ2hlckdUKGd0LCBjLCBvcHRpb25zKVxuICAgIH0gZWxzZSBpZiAoYy5vcGVyYXRvciA9PT0gJzwnIHx8IGMub3BlcmF0b3IgPT09ICc8PScpIHtcbiAgICAgIGx0ID0gbG93ZXJMVChsdCwgYywgb3B0aW9ucylcbiAgICB9IGVsc2Uge1xuICAgICAgZXFTZXQuYWRkKGMuc2VtdmVyKVxuICAgIH1cbiAgfVxuXG4gIGlmIChlcVNldC5zaXplID4gMSkge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBsZXQgZ3RsdENvbXBcbiAgaWYgKGd0ICYmIGx0KSB7XG4gICAgZ3RsdENvbXAgPSBjb21wYXJlKGd0LnNlbXZlciwgbHQuc2VtdmVyLCBvcHRpb25zKVxuICAgIGlmIChndGx0Q29tcCA+IDApIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfSBlbHNlIGlmIChndGx0Q29tcCA9PT0gMCAmJiAoZ3Qub3BlcmF0b3IgIT09ICc+PScgfHwgbHQub3BlcmF0b3IgIT09ICc8PScpKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIC8vIHdpbGwgaXRlcmF0ZSBvbmUgb3IgemVybyB0aW1lc1xuICBmb3IgKGNvbnN0IGVxIG9mIGVxU2V0KSB7XG4gICAgaWYgKGd0ICYmICFzYXRpc2ZpZXMoZXEsIFN0cmluZyhndCksIG9wdGlvbnMpKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIGlmIChsdCAmJiAhc2F0aXNmaWVzKGVxLCBTdHJpbmcobHQpLCBvcHRpb25zKSkge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGMgb2YgZG9tKSB7XG4gICAgICBpZiAoIXNhdGlzZmllcyhlcSwgU3RyaW5nKGMpLCBvcHRpb25zKSkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgbGV0IGhpZ2hlciwgbG93ZXJcbiAgbGV0IGhhc0RvbUxULCBoYXNEb21HVFxuICAvLyBpZiB0aGUgc3Vic2V0IGhhcyBhIHByZXJlbGVhc2UsIHdlIG5lZWQgYSBjb21wYXJhdG9yIGluIHRoZSBzdXBlcnNldFxuICAvLyB3aXRoIHRoZSBzYW1lIHR1cGxlIGFuZCBhIHByZXJlbGVhc2UsIG9yIGl0J3Mgbm90IGEgc3Vic2V0XG4gIGxldCBuZWVkRG9tTFRQcmUgPSBsdCAmJlxuICAgICFvcHRpb25zLmluY2x1ZGVQcmVyZWxlYXNlICYmXG4gICAgbHQuc2VtdmVyLnByZXJlbGVhc2UubGVuZ3RoID8gbHQuc2VtdmVyIDogZmFsc2VcbiAgbGV0IG5lZWREb21HVFByZSA9IGd0ICYmXG4gICAgIW9wdGlvbnMuaW5jbHVkZVByZXJlbGVhc2UgJiZcbiAgICBndC5zZW12ZXIucHJlcmVsZWFzZS5sZW5ndGggPyBndC5zZW12ZXIgOiBmYWxzZVxuICAvLyBleGNlcHRpb246IDwxLjIuMy0wIGlzIHRoZSBzYW1lIGFzIDwxLjIuM1xuICBpZiAobmVlZERvbUxUUHJlICYmIG5lZWREb21MVFByZS5wcmVyZWxlYXNlLmxlbmd0aCA9PT0gMSAmJlxuICAgICAgbHQub3BlcmF0b3IgPT09ICc8JyAmJiBuZWVkRG9tTFRQcmUucHJlcmVsZWFzZVswXSA9PT0gMCkge1xuICAgIG5lZWREb21MVFByZSA9IGZhbHNlXG4gIH1cblxuICBmb3IgKGNvbnN0IGMgb2YgZG9tKSB7XG4gICAgaGFzRG9tR1QgPSBoYXNEb21HVCB8fCBjLm9wZXJhdG9yID09PSAnPicgfHwgYy5vcGVyYXRvciA9PT0gJz49J1xuICAgIGhhc0RvbUxUID0gaGFzRG9tTFQgfHwgYy5vcGVyYXRvciA9PT0gJzwnIHx8IGMub3BlcmF0b3IgPT09ICc8PSdcbiAgICBpZiAoZ3QpIHtcbiAgICAgIGlmIChuZWVkRG9tR1RQcmUpIHtcbiAgICAgICAgaWYgKGMuc2VtdmVyLnByZXJlbGVhc2UgJiYgYy5zZW12ZXIucHJlcmVsZWFzZS5sZW5ndGggJiZcbiAgICAgICAgICAgIGMuc2VtdmVyLm1ham9yID09PSBuZWVkRG9tR1RQcmUubWFqb3IgJiZcbiAgICAgICAgICAgIGMuc2VtdmVyLm1pbm9yID09PSBuZWVkRG9tR1RQcmUubWlub3IgJiZcbiAgICAgICAgICAgIGMuc2VtdmVyLnBhdGNoID09PSBuZWVkRG9tR1RQcmUucGF0Y2gpIHtcbiAgICAgICAgICBuZWVkRG9tR1RQcmUgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoYy5vcGVyYXRvciA9PT0gJz4nIHx8IGMub3BlcmF0b3IgPT09ICc+PScpIHtcbiAgICAgICAgaGlnaGVyID0gaGlnaGVyR1QoZ3QsIGMsIG9wdGlvbnMpXG4gICAgICAgIGlmIChoaWdoZXIgPT09IGMgJiYgaGlnaGVyICE9PSBndCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGd0Lm9wZXJhdG9yID09PSAnPj0nICYmICFzYXRpc2ZpZXMoZ3Quc2VtdmVyLCBTdHJpbmcoYyksIG9wdGlvbnMpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAobHQpIHtcbiAgICAgIGlmIChuZWVkRG9tTFRQcmUpIHtcbiAgICAgICAgaWYgKGMuc2VtdmVyLnByZXJlbGVhc2UgJiYgYy5zZW12ZXIucHJlcmVsZWFzZS5sZW5ndGggJiZcbiAgICAgICAgICAgIGMuc2VtdmVyLm1ham9yID09PSBuZWVkRG9tTFRQcmUubWFqb3IgJiZcbiAgICAgICAgICAgIGMuc2VtdmVyLm1pbm9yID09PSBuZWVkRG9tTFRQcmUubWlub3IgJiZcbiAgICAgICAgICAgIGMuc2VtdmVyLnBhdGNoID09PSBuZWVkRG9tTFRQcmUucGF0Y2gpIHtcbiAgICAgICAgICBuZWVkRG9tTFRQcmUgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoYy5vcGVyYXRvciA9PT0gJzwnIHx8IGMub3BlcmF0b3IgPT09ICc8PScpIHtcbiAgICAgICAgbG93ZXIgPSBsb3dlckxUKGx0LCBjLCBvcHRpb25zKVxuICAgICAgICBpZiAobG93ZXIgPT09IGMgJiYgbG93ZXIgIT09IGx0KSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAobHQub3BlcmF0b3IgPT09ICc8PScgJiYgIXNhdGlzZmllcyhsdC5zZW12ZXIsIFN0cmluZyhjKSwgb3B0aW9ucykpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuICAgIGlmICghYy5vcGVyYXRvciAmJiAobHQgfHwgZ3QpICYmIGd0bHRDb21wICE9PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICAvLyBpZiB0aGVyZSB3YXMgYSA8IG9yID4sIGFuZCBub3RoaW5nIGluIHRoZSBkb20sIHRoZW4gbXVzdCBiZSBmYWxzZVxuICAvLyBVTkxFU1MgaXQgd2FzIGxpbWl0ZWQgYnkgYW5vdGhlciByYW5nZSBpbiB0aGUgb3RoZXIgZGlyZWN0aW9uLlxuICAvLyBFZywgPjEuMC4wIDwxLjAuMSBpcyBzdGlsbCBhIHN1YnNldCBvZiA8Mi4wLjBcbiAgaWYgKGd0ICYmIGhhc0RvbUxUICYmICFsdCAmJiBndGx0Q29tcCAhPT0gMCkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgaWYgKGx0ICYmIGhhc0RvbUdUICYmICFndCAmJiBndGx0Q29tcCAhPT0gMCkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgLy8gd2UgbmVlZGVkIGEgcHJlcmVsZWFzZSByYW5nZSBpbiBhIHNwZWNpZmljIHR1cGxlLCBidXQgZGlkbid0IGdldCBvbmVcbiAgLy8gdGhlbiB0aGlzIGlzbid0IGEgc3Vic2V0LiAgZWcgPj0xLjIuMy1wcmUgaXMgbm90IGEgc3Vic2V0IG9mID49MS4wLjAsXG4gIC8vIGJlY2F1c2UgaXQgaW5jbHVkZXMgcHJlcmVsZWFzZXMgaW4gdGhlIDEuMi4zIHR1cGxlXG4gIGlmIChuZWVkRG9tR1RQcmUgfHwgbmVlZERvbUxUUHJlKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICByZXR1cm4gdHJ1ZVxufVxuXG4vLyA+PTEuMi4zIGlzIGxvd2VyIHRoYW4gPjEuMi4zXG5jb25zdCBoaWdoZXJHVCA9IChhLCBiLCBvcHRpb25zKSA9PiB7XG4gIGlmICghYSkge1xuICAgIHJldHVybiBiXG4gIH1cbiAgY29uc3QgY29tcCA9IGNvbXBhcmUoYS5zZW12ZXIsIGIuc2VtdmVyLCBvcHRpb25zKVxuICByZXR1cm4gY29tcCA+IDAgPyBhXG4gICAgOiBjb21wIDwgMCA/IGJcbiAgICA6IGIub3BlcmF0b3IgPT09ICc+JyAmJiBhLm9wZXJhdG9yID09PSAnPj0nID8gYlxuICAgIDogYVxufVxuXG4vLyA8PTEuMi4zIGlzIGhpZ2hlciB0aGFuIDwxLjIuM1xuY29uc3QgbG93ZXJMVCA9IChhLCBiLCBvcHRpb25zKSA9PiB7XG4gIGlmICghYSkge1xuICAgIHJldHVybiBiXG4gIH1cbiAgY29uc3QgY29tcCA9IGNvbXBhcmUoYS5zZW12ZXIsIGIuc2VtdmVyLCBvcHRpb25zKVxuICByZXR1cm4gY29tcCA8IDAgPyBhXG4gICAgOiBjb21wID4gMCA/IGJcbiAgICA6IGIub3BlcmF0b3IgPT09ICc8JyAmJiBhLm9wZXJhdG9yID09PSAnPD0nID8gYlxuICAgIDogYVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHN1YnNldFxuIiwgIi8vIGp1c3QgcHJlLWxvYWQgYWxsIHRoZSBzdHVmZiB0aGF0IGluZGV4LmpzIGxhemlseSBleHBvcnRzXG5jb25zdCBpbnRlcm5hbFJlID0gcmVxdWlyZSgnLi9pbnRlcm5hbC9yZScpXG5jb25zdCBjb25zdGFudHMgPSByZXF1aXJlKCcuL2ludGVybmFsL2NvbnN0YW50cycpXG5jb25zdCBTZW1WZXIgPSByZXF1aXJlKCcuL2NsYXNzZXMvc2VtdmVyJylcbmNvbnN0IGlkZW50aWZpZXJzID0gcmVxdWlyZSgnLi9pbnRlcm5hbC9pZGVudGlmaWVycycpXG5jb25zdCBwYXJzZSA9IHJlcXVpcmUoJy4vZnVuY3Rpb25zL3BhcnNlJylcbmNvbnN0IHZhbGlkID0gcmVxdWlyZSgnLi9mdW5jdGlvbnMvdmFsaWQnKVxuY29uc3QgY2xlYW4gPSByZXF1aXJlKCcuL2Z1bmN0aW9ucy9jbGVhbicpXG5jb25zdCBpbmMgPSByZXF1aXJlKCcuL2Z1bmN0aW9ucy9pbmMnKVxuY29uc3QgZGlmZiA9IHJlcXVpcmUoJy4vZnVuY3Rpb25zL2RpZmYnKVxuY29uc3QgbWFqb3IgPSByZXF1aXJlKCcuL2Z1bmN0aW9ucy9tYWpvcicpXG5jb25zdCBtaW5vciA9IHJlcXVpcmUoJy4vZnVuY3Rpb25zL21pbm9yJylcbmNvbnN0IHBhdGNoID0gcmVxdWlyZSgnLi9mdW5jdGlvbnMvcGF0Y2gnKVxuY29uc3QgcHJlcmVsZWFzZSA9IHJlcXVpcmUoJy4vZnVuY3Rpb25zL3ByZXJlbGVhc2UnKVxuY29uc3QgY29tcGFyZSA9IHJlcXVpcmUoJy4vZnVuY3Rpb25zL2NvbXBhcmUnKVxuY29uc3QgcmNvbXBhcmUgPSByZXF1aXJlKCcuL2Z1bmN0aW9ucy9yY29tcGFyZScpXG5jb25zdCBjb21wYXJlTG9vc2UgPSByZXF1aXJlKCcuL2Z1bmN0aW9ucy9jb21wYXJlLWxvb3NlJylcbmNvbnN0IGNvbXBhcmVCdWlsZCA9IHJlcXVpcmUoJy4vZnVuY3Rpb25zL2NvbXBhcmUtYnVpbGQnKVxuY29uc3Qgc29ydCA9IHJlcXVpcmUoJy4vZnVuY3Rpb25zL3NvcnQnKVxuY29uc3QgcnNvcnQgPSByZXF1aXJlKCcuL2Z1bmN0aW9ucy9yc29ydCcpXG5jb25zdCBndCA9IHJlcXVpcmUoJy4vZnVuY3Rpb25zL2d0JylcbmNvbnN0IGx0ID0gcmVxdWlyZSgnLi9mdW5jdGlvbnMvbHQnKVxuY29uc3QgZXEgPSByZXF1aXJlKCcuL2Z1bmN0aW9ucy9lcScpXG5jb25zdCBuZXEgPSByZXF1aXJlKCcuL2Z1bmN0aW9ucy9uZXEnKVxuY29uc3QgZ3RlID0gcmVxdWlyZSgnLi9mdW5jdGlvbnMvZ3RlJylcbmNvbnN0IGx0ZSA9IHJlcXVpcmUoJy4vZnVuY3Rpb25zL2x0ZScpXG5jb25zdCBjbXAgPSByZXF1aXJlKCcuL2Z1bmN0aW9ucy9jbXAnKVxuY29uc3QgY29lcmNlID0gcmVxdWlyZSgnLi9mdW5jdGlvbnMvY29lcmNlJylcbmNvbnN0IENvbXBhcmF0b3IgPSByZXF1aXJlKCcuL2NsYXNzZXMvY29tcGFyYXRvcicpXG5jb25zdCBSYW5nZSA9IHJlcXVpcmUoJy4vY2xhc3Nlcy9yYW5nZScpXG5jb25zdCBzYXRpc2ZpZXMgPSByZXF1aXJlKCcuL2Z1bmN0aW9ucy9zYXRpc2ZpZXMnKVxuY29uc3QgdG9Db21wYXJhdG9ycyA9IHJlcXVpcmUoJy4vcmFuZ2VzL3RvLWNvbXBhcmF0b3JzJylcbmNvbnN0IG1heFNhdGlzZnlpbmcgPSByZXF1aXJlKCcuL3Jhbmdlcy9tYXgtc2F0aXNmeWluZycpXG5jb25zdCBtaW5TYXRpc2Z5aW5nID0gcmVxdWlyZSgnLi9yYW5nZXMvbWluLXNhdGlzZnlpbmcnKVxuY29uc3QgbWluVmVyc2lvbiA9IHJlcXVpcmUoJy4vcmFuZ2VzL21pbi12ZXJzaW9uJylcbmNvbnN0IHZhbGlkUmFuZ2UgPSByZXF1aXJlKCcuL3Jhbmdlcy92YWxpZCcpXG5jb25zdCBvdXRzaWRlID0gcmVxdWlyZSgnLi9yYW5nZXMvb3V0c2lkZScpXG5jb25zdCBndHIgPSByZXF1aXJlKCcuL3Jhbmdlcy9ndHInKVxuY29uc3QgbHRyID0gcmVxdWlyZSgnLi9yYW5nZXMvbHRyJylcbmNvbnN0IGludGVyc2VjdHMgPSByZXF1aXJlKCcuL3Jhbmdlcy9pbnRlcnNlY3RzJylcbmNvbnN0IHNpbXBsaWZ5UmFuZ2UgPSByZXF1aXJlKCcuL3Jhbmdlcy9zaW1wbGlmeScpXG5jb25zdCBzdWJzZXQgPSByZXF1aXJlKCcuL3Jhbmdlcy9zdWJzZXQnKVxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHBhcnNlLFxuICB2YWxpZCxcbiAgY2xlYW4sXG4gIGluYyxcbiAgZGlmZixcbiAgbWFqb3IsXG4gIG1pbm9yLFxuICBwYXRjaCxcbiAgcHJlcmVsZWFzZSxcbiAgY29tcGFyZSxcbiAgcmNvbXBhcmUsXG4gIGNvbXBhcmVMb29zZSxcbiAgY29tcGFyZUJ1aWxkLFxuICBzb3J0LFxuICByc29ydCxcbiAgZ3QsXG4gIGx0LFxuICBlcSxcbiAgbmVxLFxuICBndGUsXG4gIGx0ZSxcbiAgY21wLFxuICBjb2VyY2UsXG4gIENvbXBhcmF0b3IsXG4gIFJhbmdlLFxuICBzYXRpc2ZpZXMsXG4gIHRvQ29tcGFyYXRvcnMsXG4gIG1heFNhdGlzZnlpbmcsXG4gIG1pblNhdGlzZnlpbmcsXG4gIG1pblZlcnNpb24sXG4gIHZhbGlkUmFuZ2UsXG4gIG91dHNpZGUsXG4gIGd0cixcbiAgbHRyLFxuICBpbnRlcnNlY3RzLFxuICBzaW1wbGlmeVJhbmdlLFxuICBzdWJzZXQsXG4gIFNlbVZlcixcbiAgcmU6IGludGVybmFsUmUucmUsXG4gIHNyYzogaW50ZXJuYWxSZS5zcmMsXG4gIHRva2VuczogaW50ZXJuYWxSZS50LFxuICBTRU1WRVJfU1BFQ19WRVJTSU9OOiBjb25zdGFudHMuU0VNVkVSX1NQRUNfVkVSU0lPTixcbiAgUkVMRUFTRV9UWVBFUzogY29uc3RhbnRzLlJFTEVBU0VfVFlQRVMsXG4gIGNvbXBhcmVJZGVudGlmaWVyczogaWRlbnRpZmllcnMuY29tcGFyZUlkZW50aWZpZXJzLFxuICByY29tcGFyZUlkZW50aWZpZXJzOiBpZGVudGlmaWVycy5yY29tcGFyZUlkZW50aWZpZXJzLFxufVxuIiwgImNvbnN0IHNlbXZlciA9IHJlcXVpcmUoJ3NlbXZlcicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHNlbXZlci5zYXRpc2ZpZXMocHJvY2Vzcy52ZXJzaW9uLCAnPj0xNS43LjAnKTtcbiIsICJjb25zdCBzZW12ZXIgPSByZXF1aXJlKCdzZW12ZXInKTtcblxubW9kdWxlLmV4cG9ydHMgPSBzZW12ZXIuc2F0aXNmaWVzKHByb2Nlc3MudmVyc2lvbiwgJz49MTYuOS4wJyk7XG4iLCAiY29uc3QgQVNZTU1FVFJJQ19LRVlfREVUQUlMU19TVVBQT1JURUQgPSByZXF1aXJlKCcuL2FzeW1tZXRyaWNLZXlEZXRhaWxzU3VwcG9ydGVkJyk7XG5jb25zdCBSU0FfUFNTX0tFWV9ERVRBSUxTX1NVUFBPUlRFRCA9IHJlcXVpcmUoJy4vcnNhUHNzS2V5RGV0YWlsc1N1cHBvcnRlZCcpO1xuXG5jb25zdCBhbGxvd2VkQWxnb3JpdGhtc0ZvcktleXMgPSB7XG4gICdlYyc6IFsnRVMyNTYnLCAnRVMzODQnLCAnRVM1MTInXSxcbiAgJ3JzYSc6IFsnUlMyNTYnLCAnUFMyNTYnLCAnUlMzODQnLCAnUFMzODQnLCAnUlM1MTInLCAnUFM1MTInXSxcbiAgJ3JzYS1wc3MnOiBbJ1BTMjU2JywgJ1BTMzg0JywgJ1BTNTEyJ11cbn07XG5cbmNvbnN0IGFsbG93ZWRDdXJ2ZXMgPSB7XG4gIEVTMjU2OiAncHJpbWUyNTZ2MScsXG4gIEVTMzg0OiAnc2VjcDM4NHIxJyxcbiAgRVM1MTI6ICdzZWNwNTIxcjEnLFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihhbGdvcml0aG0sIGtleSkge1xuICBpZiAoIWFsZ29yaXRobSB8fCAha2V5KSByZXR1cm47XG5cbiAgY29uc3Qga2V5VHlwZSA9IGtleS5hc3ltbWV0cmljS2V5VHlwZTtcbiAgaWYgKCFrZXlUeXBlKSByZXR1cm47XG5cbiAgY29uc3QgYWxsb3dlZEFsZ29yaXRobXMgPSBhbGxvd2VkQWxnb3JpdGhtc0ZvcktleXNba2V5VHlwZV07XG5cbiAgaWYgKCFhbGxvd2VkQWxnb3JpdGhtcykge1xuICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBrZXkgdHlwZSBcIiR7a2V5VHlwZX1cIi5gKTtcbiAgfVxuXG4gIGlmICghYWxsb3dlZEFsZ29yaXRobXMuaW5jbHVkZXMoYWxnb3JpdGhtKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgXCJhbGdcIiBwYXJhbWV0ZXIgZm9yIFwiJHtrZXlUeXBlfVwiIGtleSB0eXBlIG11c3QgYmUgb25lIG9mOiAke2FsbG93ZWRBbGdvcml0aG1zLmpvaW4oJywgJyl9LmApXG4gIH1cblxuICAvKlxuICAgKiBJZ25vcmUgdGhlIG5leHQgYmxvY2sgZnJvbSB0ZXN0IGNvdmVyYWdlIGJlY2F1c2UgaXQgZ2V0cyBleGVjdXRlZFxuICAgKiBjb25kaXRpb25hbGx5IGRlcGVuZGluZyBvbiB0aGUgTm9kZSB2ZXJzaW9uLiBOb3QgaWdub3JpbmcgaXQgd291bGRcbiAgICogcHJldmVudCB1cyBmcm9tIHJlYWNoaW5nIHRoZSB0YXJnZXQgJSBvZiBjb3ZlcmFnZSBmb3IgdmVyc2lvbnMgb2ZcbiAgICogTm9kZSB1bmRlciAxNS43LjAuXG4gICAqL1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICBpZiAoQVNZTU1FVFJJQ19LRVlfREVUQUlMU19TVVBQT1JURUQpIHtcbiAgICBzd2l0Y2ggKGtleVR5cGUpIHtcbiAgICBjYXNlICdlYyc6XG4gICAgICBjb25zdCBrZXlDdXJ2ZSA9IGtleS5hc3ltbWV0cmljS2V5RGV0YWlscy5uYW1lZEN1cnZlO1xuICAgICAgY29uc3QgYWxsb3dlZEN1cnZlID0gYWxsb3dlZEN1cnZlc1thbGdvcml0aG1dO1xuXG4gICAgICBpZiAoa2V5Q3VydmUgIT09IGFsbG93ZWRDdXJ2ZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFwiYWxnXCIgcGFyYW1ldGVyIFwiJHthbGdvcml0aG19XCIgcmVxdWlyZXMgY3VydmUgXCIke2FsbG93ZWRDdXJ2ZX1cIi5gKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAncnNhLXBzcyc6XG4gICAgICBpZiAoUlNBX1BTU19LRVlfREVUQUlMU19TVVBQT1JURUQpIHtcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gcGFyc2VJbnQoYWxnb3JpdGhtLnNsaWNlKC0zKSwgMTApO1xuICAgICAgICBjb25zdCB7IGhhc2hBbGdvcml0aG0sIG1nZjFIYXNoQWxnb3JpdGhtLCBzYWx0TGVuZ3RoIH0gPSBrZXkuYXN5bW1ldHJpY0tleURldGFpbHM7XG5cbiAgICAgICAgaWYgKGhhc2hBbGdvcml0aG0gIT09IGBzaGEke2xlbmd0aH1gIHx8IG1nZjFIYXNoQWxnb3JpdGhtICE9PSBoYXNoQWxnb3JpdGhtKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGtleSBmb3IgdGhpcyBvcGVyYXRpb24sIGl0cyBSU0EtUFNTIHBhcmFtZXRlcnMgZG8gbm90IG1lZXQgdGhlIHJlcXVpcmVtZW50cyBvZiBcImFsZ1wiICR7YWxnb3JpdGhtfS5gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzYWx0TGVuZ3RoICE9PSB1bmRlZmluZWQgJiYgc2FsdExlbmd0aCA+IGxlbmd0aCA+PiAzKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGtleSBmb3IgdGhpcyBvcGVyYXRpb24sIGl0cyBSU0EtUFNTIHBhcmFtZXRlciBzYWx0TGVuZ3RoIGRvZXMgbm90IG1lZXQgdGhlIHJlcXVpcmVtZW50cyBvZiBcImFsZ1wiICR7YWxnb3JpdGhtfS5gKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbn1cbiIsICJ2YXIgc2VtdmVyID0gcmVxdWlyZSgnc2VtdmVyJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gc2VtdmVyLnNhdGlzZmllcyhwcm9jZXNzLnZlcnNpb24sICdeNi4xMi4wIHx8ID49OC4wLjAnKTtcbiIsICJjb25zdCBKc29uV2ViVG9rZW5FcnJvciA9IHJlcXVpcmUoJy4vbGliL0pzb25XZWJUb2tlbkVycm9yJyk7XG5jb25zdCBOb3RCZWZvcmVFcnJvciA9IHJlcXVpcmUoJy4vbGliL05vdEJlZm9yZUVycm9yJyk7XG5jb25zdCBUb2tlbkV4cGlyZWRFcnJvciA9IHJlcXVpcmUoJy4vbGliL1Rva2VuRXhwaXJlZEVycm9yJyk7XG5jb25zdCBkZWNvZGUgPSByZXF1aXJlKCcuL2RlY29kZScpO1xuY29uc3QgdGltZXNwYW4gPSByZXF1aXJlKCcuL2xpYi90aW1lc3BhbicpO1xuY29uc3QgdmFsaWRhdGVBc3ltbWV0cmljS2V5ID0gcmVxdWlyZSgnLi9saWIvdmFsaWRhdGVBc3ltbWV0cmljS2V5Jyk7XG5jb25zdCBQU19TVVBQT1JURUQgPSByZXF1aXJlKCcuL2xpYi9wc1N1cHBvcnRlZCcpO1xuY29uc3QgandzID0gcmVxdWlyZSgnandzJyk7XG5jb25zdCB7S2V5T2JqZWN0LCBjcmVhdGVTZWNyZXRLZXksIGNyZWF0ZVB1YmxpY0tleX0gPSByZXF1aXJlKFwiY3J5cHRvXCIpO1xuXG5jb25zdCBQVUJfS0VZX0FMR1MgPSBbJ1JTMjU2JywgJ1JTMzg0JywgJ1JTNTEyJ107XG5jb25zdCBFQ19LRVlfQUxHUyA9IFsnRVMyNTYnLCAnRVMzODQnLCAnRVM1MTInXTtcbmNvbnN0IFJTQV9LRVlfQUxHUyA9IFsnUlMyNTYnLCAnUlMzODQnLCAnUlM1MTInXTtcbmNvbnN0IEhTX0FMR1MgPSBbJ0hTMjU2JywgJ0hTMzg0JywgJ0hTNTEyJ107XG5cbmlmIChQU19TVVBQT1JURUQpIHtcbiAgUFVCX0tFWV9BTEdTLnNwbGljZShQVUJfS0VZX0FMR1MubGVuZ3RoLCAwLCAnUFMyNTYnLCAnUFMzODQnLCAnUFM1MTInKTtcbiAgUlNBX0tFWV9BTEdTLnNwbGljZShSU0FfS0VZX0FMR1MubGVuZ3RoLCAwLCAnUFMyNTYnLCAnUFMzODQnLCAnUFM1MTInKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoand0U3RyaW5nLCBzZWNyZXRPclB1YmxpY0tleSwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgaWYgKCh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykgJiYgIWNhbGxiYWNrKSB7XG4gICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuXG4gIGlmICghb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuXG4gIC8vY2xvbmUgdGhpcyBvYmplY3Qgc2luY2Ugd2UgYXJlIGdvaW5nIHRvIG11dGF0ZSBpdC5cbiAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpO1xuXG4gIGxldCBkb25lO1xuXG4gIGlmIChjYWxsYmFjaykge1xuICAgIGRvbmUgPSBjYWxsYmFjaztcbiAgfSBlbHNlIHtcbiAgICBkb25lID0gZnVuY3Rpb24oZXJyLCBkYXRhKSB7XG4gICAgICBpZiAoZXJyKSB0aHJvdyBlcnI7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9O1xuICB9XG5cbiAgaWYgKG9wdGlvbnMuY2xvY2tUaW1lc3RhbXAgJiYgdHlwZW9mIG9wdGlvbnMuY2xvY2tUaW1lc3RhbXAgIT09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIGRvbmUobmV3IEpzb25XZWJUb2tlbkVycm9yKCdjbG9ja1RpbWVzdGFtcCBtdXN0IGJlIGEgbnVtYmVyJykpO1xuICB9XG5cbiAgaWYgKG9wdGlvbnMubm9uY2UgIT09IHVuZGVmaW5lZCAmJiAodHlwZW9mIG9wdGlvbnMubm9uY2UgIT09ICdzdHJpbmcnIHx8IG9wdGlvbnMubm9uY2UudHJpbSgpID09PSAnJykpIHtcbiAgICByZXR1cm4gZG9uZShuZXcgSnNvbldlYlRva2VuRXJyb3IoJ25vbmNlIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nJykpO1xuICB9XG5cbiAgaWYgKG9wdGlvbnMuYWxsb3dJbnZhbGlkQXN5bW1ldHJpY0tleVR5cGVzICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9wdGlvbnMuYWxsb3dJbnZhbGlkQXN5bW1ldHJpY0tleVR5cGVzICE9PSAnYm9vbGVhbicpIHtcbiAgICByZXR1cm4gZG9uZShuZXcgSnNvbldlYlRva2VuRXJyb3IoJ2FsbG93SW52YWxpZEFzeW1tZXRyaWNLZXlUeXBlcyBtdXN0IGJlIGEgYm9vbGVhbicpKTtcbiAgfVxuXG4gIGNvbnN0IGNsb2NrVGltZXN0YW1wID0gb3B0aW9ucy5jbG9ja1RpbWVzdGFtcCB8fCBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwKTtcblxuICBpZiAoIWp3dFN0cmluZyl7XG4gICAgcmV0dXJuIGRvbmUobmV3IEpzb25XZWJUb2tlbkVycm9yKCdqd3QgbXVzdCBiZSBwcm92aWRlZCcpKTtcbiAgfVxuXG4gIGlmICh0eXBlb2Ygand0U3RyaW5nICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBkb25lKG5ldyBKc29uV2ViVG9rZW5FcnJvcignand0IG11c3QgYmUgYSBzdHJpbmcnKSk7XG4gIH1cblxuICBjb25zdCBwYXJ0cyA9IGp3dFN0cmluZy5zcGxpdCgnLicpO1xuXG4gIGlmIChwYXJ0cy5sZW5ndGggIT09IDMpe1xuICAgIHJldHVybiBkb25lKG5ldyBKc29uV2ViVG9rZW5FcnJvcignand0IG1hbGZvcm1lZCcpKTtcbiAgfVxuXG4gIGxldCBkZWNvZGVkVG9rZW47XG5cbiAgdHJ5IHtcbiAgICBkZWNvZGVkVG9rZW4gPSBkZWNvZGUoand0U3RyaW5nLCB7IGNvbXBsZXRlOiB0cnVlIH0pO1xuICB9IGNhdGNoKGVycikge1xuICAgIHJldHVybiBkb25lKGVycik7XG4gIH1cblxuICBpZiAoIWRlY29kZWRUb2tlbikge1xuICAgIHJldHVybiBkb25lKG5ldyBKc29uV2ViVG9rZW5FcnJvcignaW52YWxpZCB0b2tlbicpKTtcbiAgfVxuXG4gIGNvbnN0IGhlYWRlciA9IGRlY29kZWRUb2tlbi5oZWFkZXI7XG4gIGxldCBnZXRTZWNyZXQ7XG5cbiAgaWYodHlwZW9mIHNlY3JldE9yUHVibGljS2V5ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgaWYoIWNhbGxiYWNrKSB7XG4gICAgICByZXR1cm4gZG9uZShuZXcgSnNvbldlYlRva2VuRXJyb3IoJ3ZlcmlmeSBtdXN0IGJlIGNhbGxlZCBhc3luY2hyb25vdXMgaWYgc2VjcmV0IG9yIHB1YmxpYyBrZXkgaXMgcHJvdmlkZWQgYXMgYSBjYWxsYmFjaycpKTtcbiAgICB9XG5cbiAgICBnZXRTZWNyZXQgPSBzZWNyZXRPclB1YmxpY0tleTtcbiAgfVxuICBlbHNlIHtcbiAgICBnZXRTZWNyZXQgPSBmdW5jdGlvbihoZWFkZXIsIHNlY3JldENhbGxiYWNrKSB7XG4gICAgICByZXR1cm4gc2VjcmV0Q2FsbGJhY2sobnVsbCwgc2VjcmV0T3JQdWJsaWNLZXkpO1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gZ2V0U2VjcmV0KGhlYWRlciwgZnVuY3Rpb24oZXJyLCBzZWNyZXRPclB1YmxpY0tleSkge1xuICAgIGlmKGVycikge1xuICAgICAgcmV0dXJuIGRvbmUobmV3IEpzb25XZWJUb2tlbkVycm9yKCdlcnJvciBpbiBzZWNyZXQgb3IgcHVibGljIGtleSBjYWxsYmFjazogJyArIGVyci5tZXNzYWdlKSk7XG4gICAgfVxuXG4gICAgY29uc3QgaGFzU2lnbmF0dXJlID0gcGFydHNbMl0udHJpbSgpICE9PSAnJztcblxuICAgIGlmICghaGFzU2lnbmF0dXJlICYmIHNlY3JldE9yUHVibGljS2V5KXtcbiAgICAgIHJldHVybiBkb25lKG5ldyBKc29uV2ViVG9rZW5FcnJvcignand0IHNpZ25hdHVyZSBpcyByZXF1aXJlZCcpKTtcbiAgICB9XG5cbiAgICBpZiAoaGFzU2lnbmF0dXJlICYmICFzZWNyZXRPclB1YmxpY0tleSkge1xuICAgICAgcmV0dXJuIGRvbmUobmV3IEpzb25XZWJUb2tlbkVycm9yKCdzZWNyZXQgb3IgcHVibGljIGtleSBtdXN0IGJlIHByb3ZpZGVkJykpO1xuICAgIH1cblxuICAgIGlmICghaGFzU2lnbmF0dXJlICYmICFvcHRpb25zLmFsZ29yaXRobXMpIHtcbiAgICAgIHJldHVybiBkb25lKG5ldyBKc29uV2ViVG9rZW5FcnJvcigncGxlYXNlIHNwZWNpZnkgXCJub25lXCIgaW4gXCJhbGdvcml0aG1zXCIgdG8gdmVyaWZ5IHVuc2lnbmVkIHRva2VucycpKTtcbiAgICB9XG5cbiAgICBpZiAoc2VjcmV0T3JQdWJsaWNLZXkgIT0gbnVsbCAmJiAhKHNlY3JldE9yUHVibGljS2V5IGluc3RhbmNlb2YgS2V5T2JqZWN0KSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc2VjcmV0T3JQdWJsaWNLZXkgPSBjcmVhdGVQdWJsaWNLZXkoc2VjcmV0T3JQdWJsaWNLZXkpO1xuICAgICAgfSBjYXRjaCAoXykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHNlY3JldE9yUHVibGljS2V5ID0gY3JlYXRlU2VjcmV0S2V5KHR5cGVvZiBzZWNyZXRPclB1YmxpY0tleSA9PT0gJ3N0cmluZycgPyBCdWZmZXIuZnJvbShzZWNyZXRPclB1YmxpY0tleSkgOiBzZWNyZXRPclB1YmxpY0tleSk7XG4gICAgICAgIH0gY2F0Y2ggKF8pIHtcbiAgICAgICAgICByZXR1cm4gZG9uZShuZXcgSnNvbldlYlRva2VuRXJyb3IoJ3NlY3JldE9yUHVibGljS2V5IGlzIG5vdCB2YWxpZCBrZXkgbWF0ZXJpYWwnKSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghb3B0aW9ucy5hbGdvcml0aG1zKSB7XG4gICAgICBpZiAoc2VjcmV0T3JQdWJsaWNLZXkudHlwZSA9PT0gJ3NlY3JldCcpIHtcbiAgICAgICAgb3B0aW9ucy5hbGdvcml0aG1zID0gSFNfQUxHUztcbiAgICAgIH0gZWxzZSBpZiAoWydyc2EnLCAncnNhLXBzcyddLmluY2x1ZGVzKHNlY3JldE9yUHVibGljS2V5LmFzeW1tZXRyaWNLZXlUeXBlKSkge1xuICAgICAgICBvcHRpb25zLmFsZ29yaXRobXMgPSBSU0FfS0VZX0FMR1NcbiAgICAgIH0gZWxzZSBpZiAoc2VjcmV0T3JQdWJsaWNLZXkuYXN5bW1ldHJpY0tleVR5cGUgPT09ICdlYycpIHtcbiAgICAgICAgb3B0aW9ucy5hbGdvcml0aG1zID0gRUNfS0VZX0FMR1NcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9wdGlvbnMuYWxnb3JpdGhtcyA9IFBVQl9LRVlfQUxHU1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmFsZ29yaXRobXMuaW5kZXhPZihkZWNvZGVkVG9rZW4uaGVhZGVyLmFsZykgPT09IC0xKSB7XG4gICAgICByZXR1cm4gZG9uZShuZXcgSnNvbldlYlRva2VuRXJyb3IoJ2ludmFsaWQgYWxnb3JpdGhtJykpO1xuICAgIH1cblxuICAgIGlmIChoZWFkZXIuYWxnLnN0YXJ0c1dpdGgoJ0hTJykgJiYgc2VjcmV0T3JQdWJsaWNLZXkudHlwZSAhPT0gJ3NlY3JldCcpIHtcbiAgICAgIHJldHVybiBkb25lKG5ldyBKc29uV2ViVG9rZW5FcnJvcigoYHNlY3JldE9yUHVibGljS2V5IG11c3QgYmUgYSBzeW1tZXRyaWMga2V5IHdoZW4gdXNpbmcgJHtoZWFkZXIuYWxnfWApKSlcbiAgICB9IGVsc2UgaWYgKC9eKD86UlN8UFN8RVMpLy50ZXN0KGhlYWRlci5hbGcpICYmIHNlY3JldE9yUHVibGljS2V5LnR5cGUgIT09ICdwdWJsaWMnKSB7XG4gICAgICByZXR1cm4gZG9uZShuZXcgSnNvbldlYlRva2VuRXJyb3IoKGBzZWNyZXRPclB1YmxpY0tleSBtdXN0IGJlIGFuIGFzeW1tZXRyaWMga2V5IHdoZW4gdXNpbmcgJHtoZWFkZXIuYWxnfWApKSlcbiAgICB9XG5cbiAgICBpZiAoIW9wdGlvbnMuYWxsb3dJbnZhbGlkQXN5bW1ldHJpY0tleVR5cGVzKSB7XG4gICAgICB0cnkge1xuICAgICAgICB2YWxpZGF0ZUFzeW1tZXRyaWNLZXkoaGVhZGVyLmFsZywgc2VjcmV0T3JQdWJsaWNLZXkpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZG9uZShlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgdmFsaWQ7XG5cbiAgICB0cnkge1xuICAgICAgdmFsaWQgPSBqd3MudmVyaWZ5KGp3dFN0cmluZywgZGVjb2RlZFRva2VuLmhlYWRlci5hbGcsIHNlY3JldE9yUHVibGljS2V5KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gZG9uZShlKTtcbiAgICB9XG5cbiAgICBpZiAoIXZhbGlkKSB7XG4gICAgICByZXR1cm4gZG9uZShuZXcgSnNvbldlYlRva2VuRXJyb3IoJ2ludmFsaWQgc2lnbmF0dXJlJykpO1xuICAgIH1cblxuICAgIGNvbnN0IHBheWxvYWQgPSBkZWNvZGVkVG9rZW4ucGF5bG9hZDtcblxuICAgIGlmICh0eXBlb2YgcGF5bG9hZC5uYmYgIT09ICd1bmRlZmluZWQnICYmICFvcHRpb25zLmlnbm9yZU5vdEJlZm9yZSkge1xuICAgICAgaWYgKHR5cGVvZiBwYXlsb2FkLm5iZiAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgcmV0dXJuIGRvbmUobmV3IEpzb25XZWJUb2tlbkVycm9yKCdpbnZhbGlkIG5iZiB2YWx1ZScpKTtcbiAgICAgIH1cbiAgICAgIGlmIChwYXlsb2FkLm5iZiA+IGNsb2NrVGltZXN0YW1wICsgKG9wdGlvbnMuY2xvY2tUb2xlcmFuY2UgfHwgMCkpIHtcbiAgICAgICAgcmV0dXJuIGRvbmUobmV3IE5vdEJlZm9yZUVycm9yKCdqd3Qgbm90IGFjdGl2ZScsIG5ldyBEYXRlKHBheWxvYWQubmJmICogMTAwMCkpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHBheWxvYWQuZXhwICE9PSAndW5kZWZpbmVkJyAmJiAhb3B0aW9ucy5pZ25vcmVFeHBpcmF0aW9uKSB7XG4gICAgICBpZiAodHlwZW9mIHBheWxvYWQuZXhwICE9PSAnbnVtYmVyJykge1xuICAgICAgICByZXR1cm4gZG9uZShuZXcgSnNvbldlYlRva2VuRXJyb3IoJ2ludmFsaWQgZXhwIHZhbHVlJykpO1xuICAgICAgfVxuICAgICAgaWYgKGNsb2NrVGltZXN0YW1wID49IHBheWxvYWQuZXhwICsgKG9wdGlvbnMuY2xvY2tUb2xlcmFuY2UgfHwgMCkpIHtcbiAgICAgICAgcmV0dXJuIGRvbmUobmV3IFRva2VuRXhwaXJlZEVycm9yKCdqd3QgZXhwaXJlZCcsIG5ldyBEYXRlKHBheWxvYWQuZXhwICogMTAwMCkpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5hdWRpZW5jZSkge1xuICAgICAgY29uc3QgYXVkaWVuY2VzID0gQXJyYXkuaXNBcnJheShvcHRpb25zLmF1ZGllbmNlKSA/IG9wdGlvbnMuYXVkaWVuY2UgOiBbb3B0aW9ucy5hdWRpZW5jZV07XG4gICAgICBjb25zdCB0YXJnZXQgPSBBcnJheS5pc0FycmF5KHBheWxvYWQuYXVkKSA/IHBheWxvYWQuYXVkIDogW3BheWxvYWQuYXVkXTtcblxuICAgICAgY29uc3QgbWF0Y2ggPSB0YXJnZXQuc29tZShmdW5jdGlvbiAodGFyZ2V0QXVkaWVuY2UpIHtcbiAgICAgICAgcmV0dXJuIGF1ZGllbmNlcy5zb21lKGZ1bmN0aW9uIChhdWRpZW5jZSkge1xuICAgICAgICAgIHJldHVybiBhdWRpZW5jZSBpbnN0YW5jZW9mIFJlZ0V4cCA/IGF1ZGllbmNlLnRlc3QodGFyZ2V0QXVkaWVuY2UpIDogYXVkaWVuY2UgPT09IHRhcmdldEF1ZGllbmNlO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgIHJldHVybiBkb25lKG5ldyBKc29uV2ViVG9rZW5FcnJvcignand0IGF1ZGllbmNlIGludmFsaWQuIGV4cGVjdGVkOiAnICsgYXVkaWVuY2VzLmpvaW4oJyBvciAnKSkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmlzc3Vlcikge1xuICAgICAgY29uc3QgaW52YWxpZF9pc3N1ZXIgPVxuICAgICAgICAgICAgICAodHlwZW9mIG9wdGlvbnMuaXNzdWVyID09PSAnc3RyaW5nJyAmJiBwYXlsb2FkLmlzcyAhPT0gb3B0aW9ucy5pc3N1ZXIpIHx8XG4gICAgICAgICAgICAgIChBcnJheS5pc0FycmF5KG9wdGlvbnMuaXNzdWVyKSAmJiBvcHRpb25zLmlzc3Vlci5pbmRleE9mKHBheWxvYWQuaXNzKSA9PT0gLTEpO1xuXG4gICAgICBpZiAoaW52YWxpZF9pc3N1ZXIpIHtcbiAgICAgICAgcmV0dXJuIGRvbmUobmV3IEpzb25XZWJUb2tlbkVycm9yKCdqd3QgaXNzdWVyIGludmFsaWQuIGV4cGVjdGVkOiAnICsgb3B0aW9ucy5pc3N1ZXIpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5zdWJqZWN0KSB7XG4gICAgICBpZiAocGF5bG9hZC5zdWIgIT09IG9wdGlvbnMuc3ViamVjdCkge1xuICAgICAgICByZXR1cm4gZG9uZShuZXcgSnNvbldlYlRva2VuRXJyb3IoJ2p3dCBzdWJqZWN0IGludmFsaWQuIGV4cGVjdGVkOiAnICsgb3B0aW9ucy5zdWJqZWN0KSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuand0aWQpIHtcbiAgICAgIGlmIChwYXlsb2FkLmp0aSAhPT0gb3B0aW9ucy5qd3RpZCkge1xuICAgICAgICByZXR1cm4gZG9uZShuZXcgSnNvbldlYlRva2VuRXJyb3IoJ2p3dCBqd3RpZCBpbnZhbGlkLiBleHBlY3RlZDogJyArIG9wdGlvbnMuand0aWQpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5ub25jZSkge1xuICAgICAgaWYgKHBheWxvYWQubm9uY2UgIT09IG9wdGlvbnMubm9uY2UpIHtcbiAgICAgICAgcmV0dXJuIGRvbmUobmV3IEpzb25XZWJUb2tlbkVycm9yKCdqd3Qgbm9uY2UgaW52YWxpZC4gZXhwZWN0ZWQ6ICcgKyBvcHRpb25zLm5vbmNlKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMubWF4QWdlKSB7XG4gICAgICBpZiAodHlwZW9mIHBheWxvYWQuaWF0ICE9PSAnbnVtYmVyJykge1xuICAgICAgICByZXR1cm4gZG9uZShuZXcgSnNvbldlYlRva2VuRXJyb3IoJ2lhdCByZXF1aXJlZCB3aGVuIG1heEFnZSBpcyBzcGVjaWZpZWQnKSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG1heEFnZVRpbWVzdGFtcCA9IHRpbWVzcGFuKG9wdGlvbnMubWF4QWdlLCBwYXlsb2FkLmlhdCk7XG4gICAgICBpZiAodHlwZW9mIG1heEFnZVRpbWVzdGFtcCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIGRvbmUobmV3IEpzb25XZWJUb2tlbkVycm9yKCdcIm1heEFnZVwiIHNob3VsZCBiZSBhIG51bWJlciBvZiBzZWNvbmRzIG9yIHN0cmluZyByZXByZXNlbnRpbmcgYSB0aW1lc3BhbiBlZzogXCIxZFwiLCBcIjIwaFwiLCA2MCcpKTtcbiAgICAgIH1cbiAgICAgIGlmIChjbG9ja1RpbWVzdGFtcCA+PSBtYXhBZ2VUaW1lc3RhbXAgKyAob3B0aW9ucy5jbG9ja1RvbGVyYW5jZSB8fCAwKSkge1xuICAgICAgICByZXR1cm4gZG9uZShuZXcgVG9rZW5FeHBpcmVkRXJyb3IoJ21heEFnZSBleGNlZWRlZCcsIG5ldyBEYXRlKG1heEFnZVRpbWVzdGFtcCAqIDEwMDApKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuY29tcGxldGUgPT09IHRydWUpIHtcbiAgICAgIGNvbnN0IHNpZ25hdHVyZSA9IGRlY29kZWRUb2tlbi5zaWduYXR1cmU7XG5cbiAgICAgIHJldHVybiBkb25lKG51bGwsIHtcbiAgICAgICAgaGVhZGVyOiBoZWFkZXIsXG4gICAgICAgIHBheWxvYWQ6IHBheWxvYWQsXG4gICAgICAgIHNpZ25hdHVyZTogc2lnbmF0dXJlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gZG9uZShudWxsLCBwYXlsb2FkKTtcbiAgfSk7XG59O1xuIiwgIi8qKlxuICogbG9kYXNoIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyA8aHR0cHM6Ly9qcXVlcnkub3JnLz5cbiAqIFJlbGVhc2VkIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqL1xuXG4vKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cbnZhciBJTkZJTklUWSA9IDEgLyAwLFxuICAgIE1BWF9TQUZFX0lOVEVHRVIgPSA5MDA3MTk5MjU0NzQwOTkxLFxuICAgIE1BWF9JTlRFR0VSID0gMS43OTc2OTMxMzQ4NjIzMTU3ZSszMDgsXG4gICAgTkFOID0gMCAvIDA7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBhcmdzVGFnID0gJ1tvYmplY3QgQXJndW1lbnRzXScsXG4gICAgZnVuY1RhZyA9ICdbb2JqZWN0IEZ1bmN0aW9uXScsXG4gICAgZ2VuVGFnID0gJ1tvYmplY3QgR2VuZXJhdG9yRnVuY3Rpb25dJyxcbiAgICBzdHJpbmdUYWcgPSAnW29iamVjdCBTdHJpbmddJyxcbiAgICBzeW1ib2xUYWcgPSAnW29iamVjdCBTeW1ib2xdJztcblxuLyoqIFVzZWQgdG8gbWF0Y2ggbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZS4gKi9cbnZhciByZVRyaW0gPSAvXlxccyt8XFxzKyQvZztcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGJhZCBzaWduZWQgaGV4YWRlY2ltYWwgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzQmFkSGV4ID0gL15bLStdMHhbMC05YS1mXSskL2k7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBiaW5hcnkgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzQmluYXJ5ID0gL14wYlswMV0rJC9pO1xuXG4vKiogVXNlZCB0byBkZXRlY3Qgb2N0YWwgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzT2N0YWwgPSAvXjBvWzAtN10rJC9pO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgdW5zaWduZWQgaW50ZWdlciB2YWx1ZXMuICovXG52YXIgcmVJc1VpbnQgPSAvXig/OjB8WzEtOV1cXGQqKSQvO1xuXG4vKiogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgd2l0aG91dCBhIGRlcGVuZGVuY3kgb24gYHJvb3RgLiAqL1xudmFyIGZyZWVQYXJzZUludCA9IHBhcnNlSW50O1xuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5tYXBgIGZvciBhcnJheXMgd2l0aG91dCBzdXBwb3J0IGZvciBpdGVyYXRlZVxuICogc2hvcnRoYW5kcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheX0gW2FycmF5XSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IG1hcHBlZCBhcnJheS5cbiAqL1xuZnVuY3Rpb24gYXJyYXlNYXAoYXJyYXksIGl0ZXJhdGVlKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwLFxuICAgICAgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTtcblxuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHJlc3VsdFtpbmRleF0gPSBpdGVyYXRlZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5maW5kSW5kZXhgIGFuZCBgXy5maW5kTGFzdEluZGV4YCB3aXRob3V0XG4gKiBzdXBwb3J0IGZvciBpdGVyYXRlZSBzaG9ydGhhbmRzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaW5zcGVjdC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IGZyb21JbmRleCBUaGUgaW5kZXggdG8gc2VhcmNoIGZyb20uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtmcm9tUmlnaHRdIFNwZWNpZnkgaXRlcmF0aW5nIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBtYXRjaGVkIHZhbHVlLCBlbHNlIGAtMWAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VGaW5kSW5kZXgoYXJyYXksIHByZWRpY2F0ZSwgZnJvbUluZGV4LCBmcm9tUmlnaHQpIHtcbiAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgIGluZGV4ID0gZnJvbUluZGV4ICsgKGZyb21SaWdodCA/IDEgOiAtMSk7XG5cbiAgd2hpbGUgKChmcm9tUmlnaHQgPyBpbmRleC0tIDogKytpbmRleCA8IGxlbmd0aCkpIHtcbiAgICBpZiAocHJlZGljYXRlKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSkge1xuICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH1cbiAgfVxuICByZXR1cm4gLTE7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaW5kZXhPZmAgd2l0aG91dCBgZnJvbUluZGV4YCBib3VuZHMgY2hlY2tzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaW5zcGVjdC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNlYXJjaCBmb3IuXG4gKiBAcGFyYW0ge251bWJlcn0gZnJvbUluZGV4IFRoZSBpbmRleCB0byBzZWFyY2ggZnJvbS5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBtYXRjaGVkIHZhbHVlLCBlbHNlIGAtMWAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VJbmRleE9mKGFycmF5LCB2YWx1ZSwgZnJvbUluZGV4KSB7XG4gIGlmICh2YWx1ZSAhPT0gdmFsdWUpIHtcbiAgICByZXR1cm4gYmFzZUZpbmRJbmRleChhcnJheSwgYmFzZUlzTmFOLCBmcm9tSW5kZXgpO1xuICB9XG4gIHZhciBpbmRleCA9IGZyb21JbmRleCAtIDEsXG4gICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICBpZiAoYXJyYXlbaW5kZXhdID09PSB2YWx1ZSkge1xuICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH1cbiAgfVxuICByZXR1cm4gLTE7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNOYU5gIHdpdGhvdXQgc3VwcG9ydCBmb3IgbnVtYmVyIG9iamVjdHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYE5hTmAsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYmFzZUlzTmFOKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPT0gdmFsdWU7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8udGltZXNgIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kc1xuICogb3IgbWF4IGFycmF5IGxlbmd0aCBjaGVja3MuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBudW1iZXIgb2YgdGltZXMgdG8gaW52b2tlIGBpdGVyYXRlZWAuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiByZXN1bHRzLlxuICovXG5mdW5jdGlvbiBiYXNlVGltZXMobiwgaXRlcmF0ZWUpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICByZXN1bHQgPSBBcnJheShuKTtcblxuICB3aGlsZSAoKytpbmRleCA8IG4pIHtcbiAgICByZXN1bHRbaW5kZXhdID0gaXRlcmF0ZWUoaW5kZXgpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8udmFsdWVzYCBhbmQgYF8udmFsdWVzSW5gIHdoaWNoIGNyZWF0ZXMgYW5cbiAqIGFycmF5IG9mIGBvYmplY3RgIHByb3BlcnR5IHZhbHVlcyBjb3JyZXNwb25kaW5nIHRvIHRoZSBwcm9wZXJ0eSBuYW1lc1xuICogb2YgYHByb3BzYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtBcnJheX0gcHJvcHMgVGhlIHByb3BlcnR5IG5hbWVzIHRvIGdldCB2YWx1ZXMgZm9yLlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgdmFsdWVzLlxuICovXG5mdW5jdGlvbiBiYXNlVmFsdWVzKG9iamVjdCwgcHJvcHMpIHtcbiAgcmV0dXJuIGFycmF5TWFwKHByb3BzLCBmdW5jdGlvbihrZXkpIHtcbiAgICByZXR1cm4gb2JqZWN0W2tleV07XG4gIH0pO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB1bmFyeSBmdW5jdGlvbiB0aGF0IGludm9rZXMgYGZ1bmNgIHdpdGggaXRzIGFyZ3VtZW50IHRyYW5zZm9ybWVkLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byB3cmFwLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gdHJhbnNmb3JtIFRoZSBhcmd1bWVudCB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gb3ZlckFyZyhmdW5jLCB0cmFuc2Zvcm0pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGFyZykge1xuICAgIHJldHVybiBmdW5jKHRyYW5zZm9ybShhcmcpKTtcbiAgfTtcbn1cblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xudmFyIHByb3BlcnR5SXNFbnVtZXJhYmxlID0gb2JqZWN0UHJvdG8ucHJvcGVydHlJc0VudW1lcmFibGU7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVLZXlzID0gb3ZlckFyZyhPYmplY3Qua2V5cywgT2JqZWN0KSxcbiAgICBuYXRpdmVNYXggPSBNYXRoLm1heDtcblxuLyoqXG4gKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIHRoZSBhcnJheS1saWtlIGB2YWx1ZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtib29sZWFufSBpbmhlcml0ZWQgU3BlY2lmeSByZXR1cm5pbmcgaW5oZXJpdGVkIHByb3BlcnR5IG5hbWVzLlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAqL1xuZnVuY3Rpb24gYXJyYXlMaWtlS2V5cyh2YWx1ZSwgaW5oZXJpdGVkKSB7XG4gIC8vIFNhZmFyaSA4LjEgbWFrZXMgYGFyZ3VtZW50cy5jYWxsZWVgIGVudW1lcmFibGUgaW4gc3RyaWN0IG1vZGUuXG4gIC8vIFNhZmFyaSA5IG1ha2VzIGBhcmd1bWVudHMubGVuZ3RoYCBlbnVtZXJhYmxlIGluIHN0cmljdCBtb2RlLlxuICB2YXIgcmVzdWx0ID0gKGlzQXJyYXkodmFsdWUpIHx8IGlzQXJndW1lbnRzKHZhbHVlKSlcbiAgICA/IGJhc2VUaW1lcyh2YWx1ZS5sZW5ndGgsIFN0cmluZylcbiAgICA6IFtdO1xuXG4gIHZhciBsZW5ndGggPSByZXN1bHQubGVuZ3RoLFxuICAgICAgc2tpcEluZGV4ZXMgPSAhIWxlbmd0aDtcblxuICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHtcbiAgICBpZiAoKGluaGVyaXRlZCB8fCBoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCBrZXkpKSAmJlxuICAgICAgICAhKHNraXBJbmRleGVzICYmIChrZXkgPT0gJ2xlbmd0aCcgfHwgaXNJbmRleChrZXksIGxlbmd0aCkpKSkge1xuICAgICAgcmVzdWx0LnB1c2goa2V5KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5rZXlzYCB3aGljaCBkb2Vzbid0IHRyZWF0IHNwYXJzZSBhcnJheXMgYXMgZGVuc2UuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG4gKi9cbmZ1bmN0aW9uIGJhc2VLZXlzKG9iamVjdCkge1xuICBpZiAoIWlzUHJvdG90eXBlKG9iamVjdCkpIHtcbiAgICByZXR1cm4gbmF0aXZlS2V5cyhvYmplY3QpO1xuICB9XG4gIHZhciByZXN1bHQgPSBbXTtcbiAgZm9yICh2YXIga2V5IGluIE9iamVjdChvYmplY3QpKSB7XG4gICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpICYmIGtleSAhPSAnY29uc3RydWN0b3InKSB7XG4gICAgICByZXN1bHQucHVzaChrZXkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBpbmRleC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aD1NQVhfU0FGRV9JTlRFR0VSXSBUaGUgdXBwZXIgYm91bmRzIG9mIGEgdmFsaWQgaW5kZXguXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGluZGV4LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzSW5kZXgodmFsdWUsIGxlbmd0aCkge1xuICBsZW5ndGggPSBsZW5ndGggPT0gbnVsbCA/IE1BWF9TQUZFX0lOVEVHRVIgOiBsZW5ndGg7XG4gIHJldHVybiAhIWxlbmd0aCAmJlxuICAgICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgfHwgcmVJc1VpbnQudGVzdCh2YWx1ZSkpICYmXG4gICAgKHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPCBsZW5ndGgpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGxpa2VseSBhIHByb3RvdHlwZSBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBwcm90b3R5cGUsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNQcm90b3R5cGUodmFsdWUpIHtcbiAgdmFyIEN0b3IgPSB2YWx1ZSAmJiB2YWx1ZS5jb25zdHJ1Y3RvcixcbiAgICAgIHByb3RvID0gKHR5cGVvZiBDdG9yID09ICdmdW5jdGlvbicgJiYgQ3Rvci5wcm90b3R5cGUpIHx8IG9iamVjdFByb3RvO1xuXG4gIHJldHVybiB2YWx1ZSA9PT0gcHJvdG87XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgaW4gYGNvbGxlY3Rpb25gLiBJZiBgY29sbGVjdGlvbmAgaXMgYSBzdHJpbmcsIGl0J3NcbiAqIGNoZWNrZWQgZm9yIGEgc3Vic3RyaW5nIG9mIGB2YWx1ZWAsIG90aGVyd2lzZVxuICogW2BTYW1lVmFsdWVaZXJvYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtc2FtZXZhbHVlemVybylcbiAqIGlzIHVzZWQgZm9yIGVxdWFsaXR5IGNvbXBhcmlzb25zLiBJZiBgZnJvbUluZGV4YCBpcyBuZWdhdGl2ZSwgaXQncyB1c2VkIGFzXG4gKiB0aGUgb2Zmc2V0IGZyb20gdGhlIGVuZCBvZiBgY29sbGVjdGlvbmAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpbnNwZWN0LlxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2VhcmNoIGZvci5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbZnJvbUluZGV4PTBdIFRoZSBpbmRleCB0byBzZWFyY2ggZnJvbS5cbiAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBFbmFibGVzIHVzZSBhcyBhbiBpdGVyYXRlZSBmb3IgbWV0aG9kcyBsaWtlIGBfLnJlZHVjZWAuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBmb3VuZCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmluY2x1ZGVzKFsxLCAyLCAzXSwgMSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pbmNsdWRlcyhbMSwgMiwgM10sIDEsIDIpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmluY2x1ZGVzKHsgJ2EnOiAxLCAnYic6IDIgfSwgMSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pbmNsdWRlcygnYWJjZCcsICdiYycpO1xuICogLy8gPT4gdHJ1ZVxuICovXG5mdW5jdGlvbiBpbmNsdWRlcyhjb2xsZWN0aW9uLCB2YWx1ZSwgZnJvbUluZGV4LCBndWFyZCkge1xuICBjb2xsZWN0aW9uID0gaXNBcnJheUxpa2UoY29sbGVjdGlvbikgPyBjb2xsZWN0aW9uIDogdmFsdWVzKGNvbGxlY3Rpb24pO1xuICBmcm9tSW5kZXggPSAoZnJvbUluZGV4ICYmICFndWFyZCkgPyB0b0ludGVnZXIoZnJvbUluZGV4KSA6IDA7XG5cbiAgdmFyIGxlbmd0aCA9IGNvbGxlY3Rpb24ubGVuZ3RoO1xuICBpZiAoZnJvbUluZGV4IDwgMCkge1xuICAgIGZyb21JbmRleCA9IG5hdGl2ZU1heChsZW5ndGggKyBmcm9tSW5kZXgsIDApO1xuICB9XG4gIHJldHVybiBpc1N0cmluZyhjb2xsZWN0aW9uKVxuICAgID8gKGZyb21JbmRleCA8PSBsZW5ndGggJiYgY29sbGVjdGlvbi5pbmRleE9mKHZhbHVlLCBmcm9tSW5kZXgpID4gLTEpXG4gICAgOiAoISFsZW5ndGggJiYgYmFzZUluZGV4T2YoY29sbGVjdGlvbiwgdmFsdWUsIGZyb21JbmRleCkgPiAtMSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgbGlrZWx5IGFuIGBhcmd1bWVudHNgIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBgYXJndW1lbnRzYCBvYmplY3QsXG4gKiAgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQXJndW1lbnRzKGZ1bmN0aW9uKCkgeyByZXR1cm4gYXJndW1lbnRzOyB9KCkpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcmd1bWVudHMoWzEsIDIsIDNdKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQXJndW1lbnRzKHZhbHVlKSB7XG4gIC8vIFNhZmFyaSA4LjEgbWFrZXMgYGFyZ3VtZW50cy5jYWxsZWVgIGVudW1lcmFibGUgaW4gc3RyaWN0IG1vZGUuXG4gIHJldHVybiBpc0FycmF5TGlrZU9iamVjdCh2YWx1ZSkgJiYgaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgJ2NhbGxlZScpICYmXG4gICAgKCFwcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHZhbHVlLCAnY2FsbGVlJykgfHwgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gYXJnc1RhZyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhbiBgQXJyYXlgIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBhcnJheSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQXJyYXkoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXkoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNBcnJheSgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNBcnJheShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqL1xudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UuIEEgdmFsdWUgaXMgY29uc2lkZXJlZCBhcnJheS1saWtlIGlmIGl0J3NcbiAqIG5vdCBhIGZ1bmN0aW9uIGFuZCBoYXMgYSBgdmFsdWUubGVuZ3RoYCB0aGF0J3MgYW4gaW50ZWdlciBncmVhdGVyIHRoYW4gb3JcbiAqIGVxdWFsIHRvIGAwYCBhbmQgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIGBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUmAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5TGlrZShkb2N1bWVudC5ib2R5LmNoaWxkcmVuKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlKCdhYmMnKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiBpc0xlbmd0aCh2YWx1ZS5sZW5ndGgpICYmICFpc0Z1bmN0aW9uKHZhbHVlKTtcbn1cblxuLyoqXG4gKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmlzQXJyYXlMaWtlYCBleGNlcHQgdGhhdCBpdCBhbHNvIGNoZWNrcyBpZiBgdmFsdWVgXG4gKiBpcyBhbiBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gYXJyYXktbGlrZSBvYmplY3QsXG4gKiAgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlT2JqZWN0KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5TGlrZU9iamVjdChkb2N1bWVudC5ib2R5LmNoaWxkcmVuKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlT2JqZWN0KCdhYmMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc0FycmF5TGlrZU9iamVjdChfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheUxpa2VPYmplY3QodmFsdWUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaXNBcnJheUxpa2UodmFsdWUpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgRnVuY3Rpb25gIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIGZ1bmN0aW9uLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNGdW5jdGlvbihfKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzRnVuY3Rpb24oL2FiYy8pO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNGdW5jdGlvbih2YWx1ZSkge1xuICAvLyBUaGUgdXNlIG9mIGBPYmplY3QjdG9TdHJpbmdgIGF2b2lkcyBpc3N1ZXMgd2l0aCB0aGUgYHR5cGVvZmAgb3BlcmF0b3JcbiAgLy8gaW4gU2FmYXJpIDgtOSB3aGljaCByZXR1cm5zICdvYmplY3QnIGZvciB0eXBlZCBhcnJheSBhbmQgb3RoZXIgY29uc3RydWN0b3JzLlxuICB2YXIgdGFnID0gaXNPYmplY3QodmFsdWUpID8gb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgOiAnJztcbiAgcmV0dXJuIHRhZyA9PSBmdW5jVGFnIHx8IHRhZyA9PSBnZW5UYWc7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGxlbmd0aC5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgbG9vc2VseSBiYXNlZCBvblxuICogW2BUb0xlbmd0aGBdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXRvbGVuZ3RoKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGxlbmd0aCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzTGVuZ3RoKDMpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNMZW5ndGgoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNMZW5ndGgoSW5maW5pdHkpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzTGVuZ3RoKCczJyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdudW1iZXInICYmXG4gICAgdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8PSBNQVhfU0FGRV9JTlRFR0VSO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZVxuICogW2xhbmd1YWdlIHR5cGVdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1lY21hc2NyaXB0LWxhbmd1YWdlLXR5cGVzKVxuICogb2YgYE9iamVjdGAuIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0KHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChfLm5vb3ApO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGBcbiAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTdHJpbmdgIHByaW1pdGl2ZSBvciBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQHNpbmNlIDAuMS4wXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBzdHJpbmcsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc1N0cmluZygnYWJjJyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1N0cmluZygxKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzU3RyaW5nKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycgfHxcbiAgICAoIWlzQXJyYXkodmFsdWUpICYmIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3RyaW5nVGFnKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFN5bWJvbGAgcHJpbWl0aXZlIG9yIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHN5bWJvbCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzU3ltYm9sKFN5bWJvbC5pdGVyYXRvcik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1N5bWJvbCgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N5bWJvbCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzeW1ib2wnIHx8XG4gICAgKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3ltYm9sVGFnKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgZmluaXRlIG51bWJlci5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMTIuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgbnVtYmVyLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRvRmluaXRlKDMuMik7XG4gKiAvLyA9PiAzLjJcbiAqXG4gKiBfLnRvRmluaXRlKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gNWUtMzI0XG4gKlxuICogXy50b0Zpbml0ZShJbmZpbml0eSk7XG4gKiAvLyA9PiAxLjc5NzY5MzEzNDg2MjMxNTdlKzMwOFxuICpcbiAqIF8udG9GaW5pdGUoJzMuMicpO1xuICogLy8gPT4gMy4yXG4gKi9cbmZ1bmN0aW9uIHRvRmluaXRlKHZhbHVlKSB7XG4gIGlmICghdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IDAgPyB2YWx1ZSA6IDA7XG4gIH1cbiAgdmFsdWUgPSB0b051bWJlcih2YWx1ZSk7XG4gIGlmICh2YWx1ZSA9PT0gSU5GSU5JVFkgfHwgdmFsdWUgPT09IC1JTkZJTklUWSkge1xuICAgIHZhciBzaWduID0gKHZhbHVlIDwgMCA/IC0xIDogMSk7XG4gICAgcmV0dXJuIHNpZ24gKiBNQVhfSU5URUdFUjtcbiAgfVxuICByZXR1cm4gdmFsdWUgPT09IHZhbHVlID8gdmFsdWUgOiAwO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYW4gaW50ZWdlci5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgbG9vc2VseSBiYXNlZCBvblxuICogW2BUb0ludGVnZXJgXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtdG9pbnRlZ2VyKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBpbnRlZ2VyLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRvSW50ZWdlcigzLjIpO1xuICogLy8gPT4gM1xuICpcbiAqIF8udG9JbnRlZ2VyKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gMFxuICpcbiAqIF8udG9JbnRlZ2VyKEluZmluaXR5KTtcbiAqIC8vID0+IDEuNzk3NjkzMTM0ODYyMzE1N2UrMzA4XG4gKlxuICogXy50b0ludGVnZXIoJzMuMicpO1xuICogLy8gPT4gM1xuICovXG5mdW5jdGlvbiB0b0ludGVnZXIodmFsdWUpIHtcbiAgdmFyIHJlc3VsdCA9IHRvRmluaXRlKHZhbHVlKSxcbiAgICAgIHJlbWFpbmRlciA9IHJlc3VsdCAlIDE7XG5cbiAgcmV0dXJuIHJlc3VsdCA9PT0gcmVzdWx0ID8gKHJlbWFpbmRlciA/IHJlc3VsdCAtIHJlbWFpbmRlciA6IHJlc3VsdCkgOiAwO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBudW1iZXIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBudW1iZXIuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udG9OdW1iZXIoMy4yKTtcbiAqIC8vID0+IDMuMlxuICpcbiAqIF8udG9OdW1iZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiA1ZS0zMjRcbiAqXG4gKiBfLnRvTnVtYmVyKEluZmluaXR5KTtcbiAqIC8vID0+IEluZmluaXR5XG4gKlxuICogXy50b051bWJlcignMy4yJyk7XG4gKiAvLyA9PiAzLjJcbiAqL1xuZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgcmV0dXJuIE5BTjtcbiAgfVxuICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgdmFyIG90aGVyID0gdHlwZW9mIHZhbHVlLnZhbHVlT2YgPT0gJ2Z1bmN0aW9uJyA/IHZhbHVlLnZhbHVlT2YoKSA6IHZhbHVlO1xuICAgIHZhbHVlID0gaXNPYmplY3Qob3RoZXIpID8gKG90aGVyICsgJycpIDogb3RoZXI7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogK3ZhbHVlO1xuICB9XG4gIHZhbHVlID0gdmFsdWUucmVwbGFjZShyZVRyaW0sICcnKTtcbiAgdmFyIGlzQmluYXJ5ID0gcmVJc0JpbmFyeS50ZXN0KHZhbHVlKTtcbiAgcmV0dXJuIChpc0JpbmFyeSB8fCByZUlzT2N0YWwudGVzdCh2YWx1ZSkpXG4gICAgPyBmcmVlUGFyc2VJbnQodmFsdWUuc2xpY2UoMiksIGlzQmluYXJ5ID8gMiA6IDgpXG4gICAgOiAocmVJc0JhZEhleC50ZXN0KHZhbHVlKSA/IE5BTiA6ICt2YWx1ZSk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBhcnJheSBvZiB0aGUgb3duIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMgb2YgYG9iamVjdGAuXG4gKlxuICogKipOb3RlOioqIE5vbi1vYmplY3QgdmFsdWVzIGFyZSBjb2VyY2VkIHRvIG9iamVjdHMuIFNlZSB0aGVcbiAqIFtFUyBzcGVjXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3Qua2V5cylcbiAqIGZvciBtb3JlIGRldGFpbHMuXG4gKlxuICogQHN0YXRpY1xuICogQHNpbmNlIDAuMS4wXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IE9iamVjdFxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAqIEBleGFtcGxlXG4gKlxuICogZnVuY3Rpb24gRm9vKCkge1xuICogICB0aGlzLmEgPSAxO1xuICogICB0aGlzLmIgPSAyO1xuICogfVxuICpcbiAqIEZvby5wcm90b3R5cGUuYyA9IDM7XG4gKlxuICogXy5rZXlzKG5ldyBGb28pO1xuICogLy8gPT4gWydhJywgJ2InXSAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuICpcbiAqIF8ua2V5cygnaGknKTtcbiAqIC8vID0+IFsnMCcsICcxJ11cbiAqL1xuZnVuY3Rpb24ga2V5cyhvYmplY3QpIHtcbiAgcmV0dXJuIGlzQXJyYXlMaWtlKG9iamVjdCkgPyBhcnJheUxpa2VLZXlzKG9iamVjdCkgOiBiYXNlS2V5cyhvYmplY3QpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdGhlIG93biBlbnVtZXJhYmxlIHN0cmluZyBrZXllZCBwcm9wZXJ0eSB2YWx1ZXMgb2YgYG9iamVjdGAuXG4gKlxuICogKipOb3RlOioqIE5vbi1vYmplY3QgdmFsdWVzIGFyZSBjb2VyY2VkIHRvIG9iamVjdHMuXG4gKlxuICogQHN0YXRpY1xuICogQHNpbmNlIDAuMS4wXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IE9iamVjdFxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSB2YWx1ZXMuXG4gKiBAZXhhbXBsZVxuICpcbiAqIGZ1bmN0aW9uIEZvbygpIHtcbiAqICAgdGhpcy5hID0gMTtcbiAqICAgdGhpcy5iID0gMjtcbiAqIH1cbiAqXG4gKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuICpcbiAqIF8udmFsdWVzKG5ldyBGb28pO1xuICogLy8gPT4gWzEsIDJdIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gKlxuICogXy52YWx1ZXMoJ2hpJyk7XG4gKiAvLyA9PiBbJ2gnLCAnaSddXG4gKi9cbmZ1bmN0aW9uIHZhbHVlcyhvYmplY3QpIHtcbiAgcmV0dXJuIG9iamVjdCA/IGJhc2VWYWx1ZXMob2JqZWN0LCBrZXlzKG9iamVjdCkpIDogW107XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaW5jbHVkZXM7XG4iLCAiLyoqXG4gKiBsb2Rhc2ggMy4wLjMgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCAyMDEyLTIwMTYgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IDIwMDktMjAxNiBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqL1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgYm9vbFRhZyA9ICdbb2JqZWN0IEJvb2xlYW5dJztcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYm9vbGVhbiBwcmltaXRpdmUgb3Igb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQm9vbGVhbihmYWxzZSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0Jvb2xlYW4obnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0Jvb2xlYW4odmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09PSB0cnVlIHx8IHZhbHVlID09PSBmYWxzZSB8fFxuICAgIChpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IGJvb2xUYWcpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNCb29sZWFuO1xuIiwgIi8qKlxuICogbG9kYXNoIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyA8aHR0cHM6Ly9qcXVlcnkub3JnLz5cbiAqIFJlbGVhc2VkIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqL1xuXG4vKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cbnZhciBJTkZJTklUWSA9IDEgLyAwLFxuICAgIE1BWF9JTlRFR0VSID0gMS43OTc2OTMxMzQ4NjIzMTU3ZSszMDgsXG4gICAgTkFOID0gMCAvIDA7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBzeW1ib2xUYWcgPSAnW29iamVjdCBTeW1ib2xdJztcblxuLyoqIFVzZWQgdG8gbWF0Y2ggbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZS4gKi9cbnZhciByZVRyaW0gPSAvXlxccyt8XFxzKyQvZztcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGJhZCBzaWduZWQgaGV4YWRlY2ltYWwgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzQmFkSGV4ID0gL15bLStdMHhbMC05YS1mXSskL2k7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBiaW5hcnkgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzQmluYXJ5ID0gL14wYlswMV0rJC9pO1xuXG4vKiogVXNlZCB0byBkZXRlY3Qgb2N0YWwgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzT2N0YWwgPSAvXjBvWzAtN10rJC9pO1xuXG4vKiogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgd2l0aG91dCBhIGRlcGVuZGVuY3kgb24gYHJvb3RgLiAqL1xudmFyIGZyZWVQYXJzZUludCA9IHBhcnNlSW50O1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhbiBpbnRlZ2VyLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBiYXNlZCBvblxuICogW2BOdW1iZXIuaXNJbnRlZ2VyYF0oaHR0cHM6Ly9tZG4uaW8vTnVtYmVyL2lzSW50ZWdlcikuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gaW50ZWdlciwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzSW50ZWdlcigzKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzSW50ZWdlcihOdW1iZXIuTUlOX1ZBTFVFKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc0ludGVnZXIoSW5maW5pdHkpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzSW50ZWdlcignMycpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNJbnRlZ2VyKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiYgdmFsdWUgPT0gdG9JbnRlZ2VyKHZhbHVlKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGVcbiAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcylcbiAqIG9mIGBPYmplY3RgLiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdCh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoXy5ub29wKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgXG4gKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdExpa2Uoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc09iamVjdExpa2UobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgU3ltYm9sYCBwcmltaXRpdmUgb3Igb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgc3ltYm9sLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNTeW1ib2woU3ltYm9sLml0ZXJhdG9yKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzU3ltYm9sKCdhYmMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzU3ltYm9sKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3N5bWJvbCcgfHxcbiAgICAoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzeW1ib2xUYWcpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBmaW5pdGUgbnVtYmVyLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4xMi4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBudW1iZXIuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udG9GaW5pdGUoMy4yKTtcbiAqIC8vID0+IDMuMlxuICpcbiAqIF8udG9GaW5pdGUoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiA1ZS0zMjRcbiAqXG4gKiBfLnRvRmluaXRlKEluZmluaXR5KTtcbiAqIC8vID0+IDEuNzk3NjkzMTM0ODYyMzE1N2UrMzA4XG4gKlxuICogXy50b0Zpbml0ZSgnMy4yJyk7XG4gKiAvLyA9PiAzLjJcbiAqL1xuZnVuY3Rpb24gdG9GaW5pdGUodmFsdWUpIHtcbiAgaWYgKCF2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogMDtcbiAgfVxuICB2YWx1ZSA9IHRvTnVtYmVyKHZhbHVlKTtcbiAgaWYgKHZhbHVlID09PSBJTkZJTklUWSB8fCB2YWx1ZSA9PT0gLUlORklOSVRZKSB7XG4gICAgdmFyIHNpZ24gPSAodmFsdWUgPCAwID8gLTEgOiAxKTtcbiAgICByZXR1cm4gc2lnbiAqIE1BWF9JTlRFR0VSO1xuICB9XG4gIHJldHVybiB2YWx1ZSA9PT0gdmFsdWUgPyB2YWx1ZSA6IDA7XG59XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhbiBpbnRlZ2VyLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBsb29zZWx5IGJhc2VkIG9uXG4gKiBbYFRvSW50ZWdlcmBdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy10b2ludGVnZXIpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb252ZXJ0LlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgY29udmVydGVkIGludGVnZXIuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udG9JbnRlZ2VyKDMuMik7XG4gKiAvLyA9PiAzXG4gKlxuICogXy50b0ludGVnZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiAwXG4gKlxuICogXy50b0ludGVnZXIoSW5maW5pdHkpO1xuICogLy8gPT4gMS43OTc2OTMxMzQ4NjIzMTU3ZSszMDhcbiAqXG4gKiBfLnRvSW50ZWdlcignMy4yJyk7XG4gKiAvLyA9PiAzXG4gKi9cbmZ1bmN0aW9uIHRvSW50ZWdlcih2YWx1ZSkge1xuICB2YXIgcmVzdWx0ID0gdG9GaW5pdGUodmFsdWUpLFxuICAgICAgcmVtYWluZGVyID0gcmVzdWx0ICUgMTtcblxuICByZXR1cm4gcmVzdWx0ID09PSByZXN1bHQgPyAocmVtYWluZGVyID8gcmVzdWx0IC0gcmVtYWluZGVyIDogcmVzdWx0KSA6IDA7XG59XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIG51bWJlci5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIG51bWJlci5cbiAqIEBleGFtcGxlXG4gKlxuICogXy50b051bWJlcigzLjIpO1xuICogLy8gPT4gMy4yXG4gKlxuICogXy50b051bWJlcihOdW1iZXIuTUlOX1ZBTFVFKTtcbiAqIC8vID0+IDVlLTMyNFxuICpcbiAqIF8udG9OdW1iZXIoSW5maW5pdHkpO1xuICogLy8gPT4gSW5maW5pdHlcbiAqXG4gKiBfLnRvTnVtYmVyKCczLjInKTtcbiAqIC8vID0+IDMuMlxuICovXG5mdW5jdGlvbiB0b051bWJlcih2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmIChpc1N5bWJvbCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gTkFOO1xuICB9XG4gIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcbiAgICB2YXIgb3RoZXIgPSB0eXBlb2YgdmFsdWUudmFsdWVPZiA9PSAnZnVuY3Rpb24nID8gdmFsdWUudmFsdWVPZigpIDogdmFsdWU7XG4gICAgdmFsdWUgPSBpc09iamVjdChvdGhlcikgPyAob3RoZXIgKyAnJykgOiBvdGhlcjtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSAwID8gdmFsdWUgOiArdmFsdWU7XG4gIH1cbiAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKHJlVHJpbSwgJycpO1xuICB2YXIgaXNCaW5hcnkgPSByZUlzQmluYXJ5LnRlc3QodmFsdWUpO1xuICByZXR1cm4gKGlzQmluYXJ5IHx8IHJlSXNPY3RhbC50ZXN0KHZhbHVlKSlcbiAgICA/IGZyZWVQYXJzZUludCh2YWx1ZS5zbGljZSgyKSwgaXNCaW5hcnkgPyAyIDogOClcbiAgICA6IChyZUlzQmFkSGV4LnRlc3QodmFsdWUpID8gTkFOIDogK3ZhbHVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0ludGVnZXI7XG4iLCAiLyoqXG4gKiBsb2Rhc2ggMy4wLjMgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCAyMDEyLTIwMTYgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IDIwMDktMjAxNiBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqL1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgbnVtYmVyVGFnID0gJ1tvYmplY3QgTnVtYmVyXSc7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZSBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgXG4gKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYE51bWJlcmAgcHJpbWl0aXZlIG9yIG9iamVjdC5cbiAqXG4gKiAqKk5vdGU6KiogVG8gZXhjbHVkZSBgSW5maW5pdHlgLCBgLUluZmluaXR5YCwgYW5kIGBOYU5gLCB3aGljaCBhcmUgY2xhc3NpZmllZFxuICogYXMgbnVtYmVycywgdXNlIHRoZSBgXy5pc0Zpbml0ZWAgbWV0aG9kLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzTnVtYmVyKDMpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNOdW1iZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc051bWJlcihJbmZpbml0eSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc051bWJlcignMycpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNOdW1iZXIodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyB8fFxuICAgIChpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IG51bWJlclRhZyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNOdW1iZXI7XG4iLCAiLyoqXG4gKiBsb2Rhc2ggKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIDxodHRwczovL2pxdWVyeS5vcmcvPlxuICogUmVsZWFzZWQgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICovXG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RUYWcgPSAnW29iamVjdCBPYmplY3RdJztcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIGhvc3Qgb2JqZWN0IGluIElFIDwgOS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIGhvc3Qgb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzSG9zdE9iamVjdCh2YWx1ZSkge1xuICAvLyBNYW55IGhvc3Qgb2JqZWN0cyBhcmUgYE9iamVjdGAgb2JqZWN0cyB0aGF0IGNhbiBjb2VyY2UgdG8gc3RyaW5nc1xuICAvLyBkZXNwaXRlIGhhdmluZyBpbXByb3Blcmx5IGRlZmluZWQgYHRvU3RyaW5nYCBtZXRob2RzLlxuICB2YXIgcmVzdWx0ID0gZmFsc2U7XG4gIGlmICh2YWx1ZSAhPSBudWxsICYmIHR5cGVvZiB2YWx1ZS50b1N0cmluZyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJlc3VsdCA9ICEhKHZhbHVlICsgJycpO1xuICAgIH0gY2F0Y2ggKGUpIHt9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgdW5hcnkgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGBmdW5jYCB3aXRoIGl0cyBhcmd1bWVudCB0cmFuc2Zvcm1lZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gd3JhcC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHRyYW5zZm9ybSBUaGUgYXJndW1lbnQgdHJhbnNmb3JtLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIG92ZXJBcmcoZnVuYywgdHJhbnNmb3JtKSB7XG4gIHJldHVybiBmdW5jdGlvbihhcmcpIHtcbiAgICByZXR1cm4gZnVuYyh0cmFuc2Zvcm0oYXJnKSk7XG4gIH07XG59XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBmdW5jUHJvdG8gPSBGdW5jdGlvbi5wcm90b3R5cGUsXG4gICAgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byByZXNvbHZlIHRoZSBkZWNvbXBpbGVkIHNvdXJjZSBvZiBmdW5jdGlvbnMuICovXG52YXIgZnVuY1RvU3RyaW5nID0gZnVuY1Byb3RvLnRvU3RyaW5nO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKiogVXNlZCB0byBpbmZlciB0aGUgYE9iamVjdGAgY29uc3RydWN0b3IuICovXG52YXIgb2JqZWN0Q3RvclN0cmluZyA9IGZ1bmNUb1N0cmluZy5jYWxsKE9iamVjdCk7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZVxuICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi9cbnZhciBnZXRQcm90b3R5cGUgPSBvdmVyQXJnKE9iamVjdC5nZXRQcm90b3R5cGVPZiwgT2JqZWN0KTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGBcbiAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBwbGFpbiBvYmplY3QsIHRoYXQgaXMsIGFuIG9iamVjdCBjcmVhdGVkIGJ5IHRoZVxuICogYE9iamVjdGAgY29uc3RydWN0b3Igb3Igb25lIHdpdGggYSBgW1tQcm90b3R5cGVdXWAgb2YgYG51bGxgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC44LjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcGxhaW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIGZ1bmN0aW9uIEZvbygpIHtcbiAqICAgdGhpcy5hID0gMTtcbiAqIH1cbiAqXG4gKiBfLmlzUGxhaW5PYmplY3QobmV3IEZvbyk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNQbGFpbk9iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzUGxhaW5PYmplY3QoeyAneCc6IDAsICd5JzogMCB9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzUGxhaW5PYmplY3QoT2JqZWN0LmNyZWF0ZShudWxsKSk7XG4gKiAvLyA9PiB0cnVlXG4gKi9cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3QodmFsdWUpIHtcbiAgaWYgKCFpc09iamVjdExpa2UodmFsdWUpIHx8XG4gICAgICBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSAhPSBvYmplY3RUYWcgfHwgaXNIb3N0T2JqZWN0KHZhbHVlKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgcHJvdG8gPSBnZXRQcm90b3R5cGUodmFsdWUpO1xuICBpZiAocHJvdG8gPT09IG51bGwpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICB2YXIgQ3RvciA9IGhhc093blByb3BlcnR5LmNhbGwocHJvdG8sICdjb25zdHJ1Y3RvcicpICYmIHByb3RvLmNvbnN0cnVjdG9yO1xuICByZXR1cm4gKHR5cGVvZiBDdG9yID09ICdmdW5jdGlvbicgJiZcbiAgICBDdG9yIGluc3RhbmNlb2YgQ3RvciAmJiBmdW5jVG9TdHJpbmcuY2FsbChDdG9yKSA9PSBvYmplY3RDdG9yU3RyaW5nKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc1BsYWluT2JqZWN0O1xuIiwgIi8qKlxuICogbG9kYXNoIDQuMC4xIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgMjAxMi0yMDE2IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCAyMDA5LTIwMTYgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKi9cblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIHN0cmluZ1RhZyA9ICdbb2JqZWN0IFN0cmluZ10nO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYW4gYEFycmF5YCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEB0eXBlIEZ1bmN0aW9uXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQXJyYXkoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXkoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNBcnJheSgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNBcnJheShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqL1xudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTdHJpbmdgIHByaW1pdGl2ZSBvciBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNTdHJpbmcoJ2FiYycpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNTdHJpbmcoMSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N0cmluZyh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzdHJpbmcnIHx8XG4gICAgKCFpc0FycmF5KHZhbHVlKSAmJiBpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN0cmluZ1RhZyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNTdHJpbmc7XG4iLCAiLyoqXG4gKiBsb2Rhc2ggKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIDxodHRwczovL2pxdWVyeS5vcmcvPlxuICogUmVsZWFzZWQgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICovXG5cbi8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG52YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXG4vKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cbnZhciBJTkZJTklUWSA9IDEgLyAwLFxuICAgIE1BWF9JTlRFR0VSID0gMS43OTc2OTMxMzQ4NjIzMTU3ZSszMDgsXG4gICAgTkFOID0gMCAvIDA7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBzeW1ib2xUYWcgPSAnW29iamVjdCBTeW1ib2xdJztcblxuLyoqIFVzZWQgdG8gbWF0Y2ggbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZS4gKi9cbnZhciByZVRyaW0gPSAvXlxccyt8XFxzKyQvZztcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGJhZCBzaWduZWQgaGV4YWRlY2ltYWwgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzQmFkSGV4ID0gL15bLStdMHhbMC05YS1mXSskL2k7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBiaW5hcnkgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzQmluYXJ5ID0gL14wYlswMV0rJC9pO1xuXG4vKiogVXNlZCB0byBkZXRlY3Qgb2N0YWwgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzT2N0YWwgPSAvXjBvWzAtN10rJC9pO1xuXG4vKiogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgd2l0aG91dCBhIGRlcGVuZGVuY3kgb24gYHJvb3RgLiAqL1xudmFyIGZyZWVQYXJzZUludCA9IHBhcnNlSW50O1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGBmdW5jYCwgd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgYW5kIGFyZ3VtZW50c1xuICogb2YgdGhlIGNyZWF0ZWQgZnVuY3Rpb24sIHdoaWxlIGl0J3MgY2FsbGVkIGxlc3MgdGhhbiBgbmAgdGltZXMuIFN1YnNlcXVlbnRcbiAqIGNhbGxzIHRvIHRoZSBjcmVhdGVkIGZ1bmN0aW9uIHJldHVybiB0aGUgcmVzdWx0IG9mIHRoZSBsYXN0IGBmdW5jYCBpbnZvY2F0aW9uLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMy4wLjBcbiAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIG51bWJlciBvZiBjYWxscyBhdCB3aGljaCBgZnVuY2AgaXMgbm8gbG9uZ2VyIGludm9rZWQuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byByZXN0cmljdC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHJlc3RyaWN0ZWQgZnVuY3Rpb24uXG4gKiBAZXhhbXBsZVxuICpcbiAqIGpRdWVyeShlbGVtZW50KS5vbignY2xpY2snLCBfLmJlZm9yZSg1LCBhZGRDb250YWN0VG9MaXN0KSk7XG4gKiAvLyA9PiBBbGxvd3MgYWRkaW5nIHVwIHRvIDQgY29udGFjdHMgdG8gdGhlIGxpc3QuXG4gKi9cbmZ1bmN0aW9uIGJlZm9yZShuLCBmdW5jKSB7XG4gIHZhciByZXN1bHQ7XG4gIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICB9XG4gIG4gPSB0b0ludGVnZXIobik7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICBpZiAoLS1uID4gMCkge1xuICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICBpZiAobiA8PSAxKSB7XG4gICAgICBmdW5jID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGlzIHJlc3RyaWN0ZWQgdG8gaW52b2tpbmcgYGZ1bmNgIG9uY2UuIFJlcGVhdCBjYWxsc1xuICogdG8gdGhlIGZ1bmN0aW9uIHJldHVybiB0aGUgdmFsdWUgb2YgdGhlIGZpcnN0IGludm9jYXRpb24uIFRoZSBgZnVuY2AgaXNcbiAqIGludm9rZWQgd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgYW5kIGFyZ3VtZW50cyBvZiB0aGUgY3JlYXRlZCBmdW5jdGlvbi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHJlc3RyaWN0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgcmVzdHJpY3RlZCBmdW5jdGlvbi5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIGluaXRpYWxpemUgPSBfLm9uY2UoY3JlYXRlQXBwbGljYXRpb24pO1xuICogaW5pdGlhbGl6ZSgpO1xuICogaW5pdGlhbGl6ZSgpO1xuICogLy8gPT4gYGNyZWF0ZUFwcGxpY2F0aW9uYCBpcyBpbnZva2VkIG9uY2VcbiAqL1xuZnVuY3Rpb24gb25jZShmdW5jKSB7XG4gIHJldHVybiBiZWZvcmUoMiwgZnVuYyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlXG4gKiBbbGFuZ3VhZ2UgdHlwZV0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLWVjbWFzY3JpcHQtbGFuZ3VhZ2UtdHlwZXMpXG4gKiBvZiBgT2JqZWN0YC4gKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3Qoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KF8ubm9vcCk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFN5bWJvbGAgcHJpbWl0aXZlIG9yIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHN5bWJvbCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzU3ltYm9sKFN5bWJvbC5pdGVyYXRvcik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1N5bWJvbCgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N5bWJvbCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzeW1ib2wnIHx8XG4gICAgKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3ltYm9sVGFnKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgZmluaXRlIG51bWJlci5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMTIuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgbnVtYmVyLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRvRmluaXRlKDMuMik7XG4gKiAvLyA9PiAzLjJcbiAqXG4gKiBfLnRvRmluaXRlKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gNWUtMzI0XG4gKlxuICogXy50b0Zpbml0ZShJbmZpbml0eSk7XG4gKiAvLyA9PiAxLjc5NzY5MzEzNDg2MjMxNTdlKzMwOFxuICpcbiAqIF8udG9GaW5pdGUoJzMuMicpO1xuICogLy8gPT4gMy4yXG4gKi9cbmZ1bmN0aW9uIHRvRmluaXRlKHZhbHVlKSB7XG4gIGlmICghdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IDAgPyB2YWx1ZSA6IDA7XG4gIH1cbiAgdmFsdWUgPSB0b051bWJlcih2YWx1ZSk7XG4gIGlmICh2YWx1ZSA9PT0gSU5GSU5JVFkgfHwgdmFsdWUgPT09IC1JTkZJTklUWSkge1xuICAgIHZhciBzaWduID0gKHZhbHVlIDwgMCA/IC0xIDogMSk7XG4gICAgcmV0dXJuIHNpZ24gKiBNQVhfSU5URUdFUjtcbiAgfVxuICByZXR1cm4gdmFsdWUgPT09IHZhbHVlID8gdmFsdWUgOiAwO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYW4gaW50ZWdlci5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgbG9vc2VseSBiYXNlZCBvblxuICogW2BUb0ludGVnZXJgXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtdG9pbnRlZ2VyKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBpbnRlZ2VyLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRvSW50ZWdlcigzLjIpO1xuICogLy8gPT4gM1xuICpcbiAqIF8udG9JbnRlZ2VyKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gMFxuICpcbiAqIF8udG9JbnRlZ2VyKEluZmluaXR5KTtcbiAqIC8vID0+IDEuNzk3NjkzMTM0ODYyMzE1N2UrMzA4XG4gKlxuICogXy50b0ludGVnZXIoJzMuMicpO1xuICogLy8gPT4gM1xuICovXG5mdW5jdGlvbiB0b0ludGVnZXIodmFsdWUpIHtcbiAgdmFyIHJlc3VsdCA9IHRvRmluaXRlKHZhbHVlKSxcbiAgICAgIHJlbWFpbmRlciA9IHJlc3VsdCAlIDE7XG5cbiAgcmV0dXJuIHJlc3VsdCA9PT0gcmVzdWx0ID8gKHJlbWFpbmRlciA/IHJlc3VsdCAtIHJlbWFpbmRlciA6IHJlc3VsdCkgOiAwO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBudW1iZXIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBudW1iZXIuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udG9OdW1iZXIoMy4yKTtcbiAqIC8vID0+IDMuMlxuICpcbiAqIF8udG9OdW1iZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiA1ZS0zMjRcbiAqXG4gKiBfLnRvTnVtYmVyKEluZmluaXR5KTtcbiAqIC8vID0+IEluZmluaXR5XG4gKlxuICogXy50b051bWJlcignMy4yJyk7XG4gKiAvLyA9PiAzLjJcbiAqL1xuZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgcmV0dXJuIE5BTjtcbiAgfVxuICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgdmFyIG90aGVyID0gdHlwZW9mIHZhbHVlLnZhbHVlT2YgPT0gJ2Z1bmN0aW9uJyA/IHZhbHVlLnZhbHVlT2YoKSA6IHZhbHVlO1xuICAgIHZhbHVlID0gaXNPYmplY3Qob3RoZXIpID8gKG90aGVyICsgJycpIDogb3RoZXI7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogK3ZhbHVlO1xuICB9XG4gIHZhbHVlID0gdmFsdWUucmVwbGFjZShyZVRyaW0sICcnKTtcbiAgdmFyIGlzQmluYXJ5ID0gcmVJc0JpbmFyeS50ZXN0KHZhbHVlKTtcbiAgcmV0dXJuIChpc0JpbmFyeSB8fCByZUlzT2N0YWwudGVzdCh2YWx1ZSkpXG4gICAgPyBmcmVlUGFyc2VJbnQodmFsdWUuc2xpY2UoMiksIGlzQmluYXJ5ID8gMiA6IDgpXG4gICAgOiAocmVJc0JhZEhleC50ZXN0KHZhbHVlKSA/IE5BTiA6ICt2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gb25jZTtcbiIsICJjb25zdCB0aW1lc3BhbiA9IHJlcXVpcmUoJy4vbGliL3RpbWVzcGFuJyk7XG5jb25zdCBQU19TVVBQT1JURUQgPSByZXF1aXJlKCcuL2xpYi9wc1N1cHBvcnRlZCcpO1xuY29uc3QgdmFsaWRhdGVBc3ltbWV0cmljS2V5ID0gcmVxdWlyZSgnLi9saWIvdmFsaWRhdGVBc3ltbWV0cmljS2V5Jyk7XG5jb25zdCBqd3MgPSByZXF1aXJlKCdqd3MnKTtcbmNvbnN0IGluY2x1ZGVzID0gcmVxdWlyZSgnbG9kYXNoLmluY2x1ZGVzJyk7XG5jb25zdCBpc0Jvb2xlYW4gPSByZXF1aXJlKCdsb2Rhc2guaXNib29sZWFuJyk7XG5jb25zdCBpc0ludGVnZXIgPSByZXF1aXJlKCdsb2Rhc2guaXNpbnRlZ2VyJyk7XG5jb25zdCBpc051bWJlciA9IHJlcXVpcmUoJ2xvZGFzaC5pc251bWJlcicpO1xuY29uc3QgaXNQbGFpbk9iamVjdCA9IHJlcXVpcmUoJ2xvZGFzaC5pc3BsYWlub2JqZWN0Jyk7XG5jb25zdCBpc1N0cmluZyA9IHJlcXVpcmUoJ2xvZGFzaC5pc3N0cmluZycpO1xuY29uc3Qgb25jZSA9IHJlcXVpcmUoJ2xvZGFzaC5vbmNlJyk7XG5jb25zdCB7IEtleU9iamVjdCwgY3JlYXRlU2VjcmV0S2V5LCBjcmVhdGVQcml2YXRlS2V5IH0gPSByZXF1aXJlKCdjcnlwdG8nKVxuXG5jb25zdCBTVVBQT1JURURfQUxHUyA9IFsnUlMyNTYnLCAnUlMzODQnLCAnUlM1MTInLCAnRVMyNTYnLCAnRVMzODQnLCAnRVM1MTInLCAnSFMyNTYnLCAnSFMzODQnLCAnSFM1MTInLCAnbm9uZSddO1xuaWYgKFBTX1NVUFBPUlRFRCkge1xuICBTVVBQT1JURURfQUxHUy5zcGxpY2UoMywgMCwgJ1BTMjU2JywgJ1BTMzg0JywgJ1BTNTEyJyk7XG59XG5cbmNvbnN0IHNpZ25fb3B0aW9uc19zY2hlbWEgPSB7XG4gIGV4cGlyZXNJbjogeyBpc1ZhbGlkOiBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gaXNJbnRlZ2VyKHZhbHVlKSB8fCAoaXNTdHJpbmcodmFsdWUpICYmIHZhbHVlKTsgfSwgbWVzc2FnZTogJ1wiZXhwaXJlc0luXCIgc2hvdWxkIGJlIGEgbnVtYmVyIG9mIHNlY29uZHMgb3Igc3RyaW5nIHJlcHJlc2VudGluZyBhIHRpbWVzcGFuJyB9LFxuICBub3RCZWZvcmU6IHsgaXNWYWxpZDogZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIGlzSW50ZWdlcih2YWx1ZSkgfHwgKGlzU3RyaW5nKHZhbHVlKSAmJiB2YWx1ZSk7IH0sIG1lc3NhZ2U6ICdcIm5vdEJlZm9yZVwiIHNob3VsZCBiZSBhIG51bWJlciBvZiBzZWNvbmRzIG9yIHN0cmluZyByZXByZXNlbnRpbmcgYSB0aW1lc3BhbicgfSxcbiAgYXVkaWVuY2U6IHsgaXNWYWxpZDogZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIGlzU3RyaW5nKHZhbHVlKSB8fCBBcnJheS5pc0FycmF5KHZhbHVlKTsgfSwgbWVzc2FnZTogJ1wiYXVkaWVuY2VcIiBtdXN0IGJlIGEgc3RyaW5nIG9yIGFycmF5JyB9LFxuICBhbGdvcml0aG06IHsgaXNWYWxpZDogaW5jbHVkZXMuYmluZChudWxsLCBTVVBQT1JURURfQUxHUyksIG1lc3NhZ2U6ICdcImFsZ29yaXRobVwiIG11c3QgYmUgYSB2YWxpZCBzdHJpbmcgZW51bSB2YWx1ZScgfSxcbiAgaGVhZGVyOiB7IGlzVmFsaWQ6IGlzUGxhaW5PYmplY3QsIG1lc3NhZ2U6ICdcImhlYWRlclwiIG11c3QgYmUgYW4gb2JqZWN0JyB9LFxuICBlbmNvZGluZzogeyBpc1ZhbGlkOiBpc1N0cmluZywgbWVzc2FnZTogJ1wiZW5jb2RpbmdcIiBtdXN0IGJlIGEgc3RyaW5nJyB9LFxuICBpc3N1ZXI6IHsgaXNWYWxpZDogaXNTdHJpbmcsIG1lc3NhZ2U6ICdcImlzc3VlclwiIG11c3QgYmUgYSBzdHJpbmcnIH0sXG4gIHN1YmplY3Q6IHsgaXNWYWxpZDogaXNTdHJpbmcsIG1lc3NhZ2U6ICdcInN1YmplY3RcIiBtdXN0IGJlIGEgc3RyaW5nJyB9LFxuICBqd3RpZDogeyBpc1ZhbGlkOiBpc1N0cmluZywgbWVzc2FnZTogJ1wiand0aWRcIiBtdXN0IGJlIGEgc3RyaW5nJyB9LFxuICBub1RpbWVzdGFtcDogeyBpc1ZhbGlkOiBpc0Jvb2xlYW4sIG1lc3NhZ2U6ICdcIm5vVGltZXN0YW1wXCIgbXVzdCBiZSBhIGJvb2xlYW4nIH0sXG4gIGtleWlkOiB7IGlzVmFsaWQ6IGlzU3RyaW5nLCBtZXNzYWdlOiAnXCJrZXlpZFwiIG11c3QgYmUgYSBzdHJpbmcnIH0sXG4gIG11dGF0ZVBheWxvYWQ6IHsgaXNWYWxpZDogaXNCb29sZWFuLCBtZXNzYWdlOiAnXCJtdXRhdGVQYXlsb2FkXCIgbXVzdCBiZSBhIGJvb2xlYW4nIH0sXG4gIGFsbG93SW5zZWN1cmVLZXlTaXplczogeyBpc1ZhbGlkOiBpc0Jvb2xlYW4sIG1lc3NhZ2U6ICdcImFsbG93SW5zZWN1cmVLZXlTaXplc1wiIG11c3QgYmUgYSBib29sZWFuJ30sXG4gIGFsbG93SW52YWxpZEFzeW1tZXRyaWNLZXlUeXBlczogeyBpc1ZhbGlkOiBpc0Jvb2xlYW4sIG1lc3NhZ2U6ICdcImFsbG93SW52YWxpZEFzeW1tZXRyaWNLZXlUeXBlc1wiIG11c3QgYmUgYSBib29sZWFuJ31cbn07XG5cbmNvbnN0IHJlZ2lzdGVyZWRfY2xhaW1zX3NjaGVtYSA9IHtcbiAgaWF0OiB7IGlzVmFsaWQ6IGlzTnVtYmVyLCBtZXNzYWdlOiAnXCJpYXRcIiBzaG91bGQgYmUgYSBudW1iZXIgb2Ygc2Vjb25kcycgfSxcbiAgZXhwOiB7IGlzVmFsaWQ6IGlzTnVtYmVyLCBtZXNzYWdlOiAnXCJleHBcIiBzaG91bGQgYmUgYSBudW1iZXIgb2Ygc2Vjb25kcycgfSxcbiAgbmJmOiB7IGlzVmFsaWQ6IGlzTnVtYmVyLCBtZXNzYWdlOiAnXCJuYmZcIiBzaG91bGQgYmUgYSBudW1iZXIgb2Ygc2Vjb25kcycgfVxufTtcblxuZnVuY3Rpb24gdmFsaWRhdGUoc2NoZW1hLCBhbGxvd1Vua25vd24sIG9iamVjdCwgcGFyYW1ldGVyTmFtZSkge1xuICBpZiAoIWlzUGxhaW5PYmplY3Qob2JqZWN0KSkge1xuICAgIHRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgXCInICsgcGFyYW1ldGVyTmFtZSArICdcIiB0byBiZSBhIHBsYWluIG9iamVjdC4nKTtcbiAgfVxuICBPYmplY3Qua2V5cyhvYmplY3QpXG4gICAgLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgICBjb25zdCB2YWxpZGF0b3IgPSBzY2hlbWFba2V5XTtcbiAgICAgIGlmICghdmFsaWRhdG9yKSB7XG4gICAgICAgIGlmICghYWxsb3dVbmtub3duKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdcIicgKyBrZXkgKyAnXCIgaXMgbm90IGFsbG93ZWQgaW4gXCInICsgcGFyYW1ldGVyTmFtZSArICdcIicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICghdmFsaWRhdG9yLmlzVmFsaWQob2JqZWN0W2tleV0pKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcih2YWxpZGF0b3IubWVzc2FnZSk7XG4gICAgICB9XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlT3B0aW9ucyhvcHRpb25zKSB7XG4gIHJldHVybiB2YWxpZGF0ZShzaWduX29wdGlvbnNfc2NoZW1hLCBmYWxzZSwgb3B0aW9ucywgJ29wdGlvbnMnKTtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVQYXlsb2FkKHBheWxvYWQpIHtcbiAgcmV0dXJuIHZhbGlkYXRlKHJlZ2lzdGVyZWRfY2xhaW1zX3NjaGVtYSwgdHJ1ZSwgcGF5bG9hZCwgJ3BheWxvYWQnKTtcbn1cblxuY29uc3Qgb3B0aW9uc190b19wYXlsb2FkID0ge1xuICAnYXVkaWVuY2UnOiAnYXVkJyxcbiAgJ2lzc3Vlcic6ICdpc3MnLFxuICAnc3ViamVjdCc6ICdzdWInLFxuICAnand0aWQnOiAnanRpJ1xufTtcblxuY29uc3Qgb3B0aW9uc19mb3Jfb2JqZWN0cyA9IFtcbiAgJ2V4cGlyZXNJbicsXG4gICdub3RCZWZvcmUnLFxuICAnbm9UaW1lc3RhbXAnLFxuICAnYXVkaWVuY2UnLFxuICAnaXNzdWVyJyxcbiAgJ3N1YmplY3QnLFxuICAnand0aWQnLFxuXTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAocGF5bG9hZCwgc2VjcmV0T3JQcml2YXRlS2V5LCBvcHRpb25zLCBjYWxsYmFjaykge1xuICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgb3B0aW9ucyA9IHt9O1xuICB9IGVsc2Uge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICB9XG5cbiAgY29uc3QgaXNPYmplY3RQYXlsb2FkID0gdHlwZW9mIHBheWxvYWQgPT09ICdvYmplY3QnICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAhQnVmZmVyLmlzQnVmZmVyKHBheWxvYWQpO1xuXG4gIGNvbnN0IGhlYWRlciA9IE9iamVjdC5hc3NpZ24oe1xuICAgIGFsZzogb3B0aW9ucy5hbGdvcml0aG0gfHwgJ0hTMjU2JyxcbiAgICB0eXA6IGlzT2JqZWN0UGF5bG9hZCA/ICdKV1QnIDogdW5kZWZpbmVkLFxuICAgIGtpZDogb3B0aW9ucy5rZXlpZFxuICB9LCBvcHRpb25zLmhlYWRlcik7XG5cbiAgZnVuY3Rpb24gZmFpbHVyZShlcnIpIHtcbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpO1xuICAgIH1cbiAgICB0aHJvdyBlcnI7XG4gIH1cblxuICBpZiAoIXNlY3JldE9yUHJpdmF0ZUtleSAmJiBvcHRpb25zLmFsZ29yaXRobSAhPT0gJ25vbmUnKSB7XG4gICAgcmV0dXJuIGZhaWx1cmUobmV3IEVycm9yKCdzZWNyZXRPclByaXZhdGVLZXkgbXVzdCBoYXZlIGEgdmFsdWUnKSk7XG4gIH1cblxuICBpZiAoc2VjcmV0T3JQcml2YXRlS2V5ICE9IG51bGwgJiYgIShzZWNyZXRPclByaXZhdGVLZXkgaW5zdGFuY2VvZiBLZXlPYmplY3QpKSB7XG4gICAgdHJ5IHtcbiAgICAgIHNlY3JldE9yUHJpdmF0ZUtleSA9IGNyZWF0ZVByaXZhdGVLZXkoc2VjcmV0T3JQcml2YXRlS2V5KVxuICAgIH0gY2F0Y2ggKF8pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHNlY3JldE9yUHJpdmF0ZUtleSA9IGNyZWF0ZVNlY3JldEtleSh0eXBlb2Ygc2VjcmV0T3JQcml2YXRlS2V5ID09PSAnc3RyaW5nJyA/IEJ1ZmZlci5mcm9tKHNlY3JldE9yUHJpdmF0ZUtleSkgOiBzZWNyZXRPclByaXZhdGVLZXkpXG4gICAgICB9IGNhdGNoIChfKSB7XG4gICAgICAgIHJldHVybiBmYWlsdXJlKG5ldyBFcnJvcignc2VjcmV0T3JQcml2YXRlS2V5IGlzIG5vdCB2YWxpZCBrZXkgbWF0ZXJpYWwnKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKGhlYWRlci5hbGcuc3RhcnRzV2l0aCgnSFMnKSAmJiBzZWNyZXRPclByaXZhdGVLZXkudHlwZSAhPT0gJ3NlY3JldCcpIHtcbiAgICByZXR1cm4gZmFpbHVyZShuZXcgRXJyb3IoKGBzZWNyZXRPclByaXZhdGVLZXkgbXVzdCBiZSBhIHN5bW1ldHJpYyBrZXkgd2hlbiB1c2luZyAke2hlYWRlci5hbGd9YCkpKVxuICB9IGVsc2UgaWYgKC9eKD86UlN8UFN8RVMpLy50ZXN0KGhlYWRlci5hbGcpKSB7XG4gICAgaWYgKHNlY3JldE9yUHJpdmF0ZUtleS50eXBlICE9PSAncHJpdmF0ZScpIHtcbiAgICAgIHJldHVybiBmYWlsdXJlKG5ldyBFcnJvcigoYHNlY3JldE9yUHJpdmF0ZUtleSBtdXN0IGJlIGFuIGFzeW1tZXRyaWMga2V5IHdoZW4gdXNpbmcgJHtoZWFkZXIuYWxnfWApKSlcbiAgICB9XG4gICAgaWYgKCFvcHRpb25zLmFsbG93SW5zZWN1cmVLZXlTaXplcyAmJlxuICAgICAgIWhlYWRlci5hbGcuc3RhcnRzV2l0aCgnRVMnKSAmJlxuICAgICAgc2VjcmV0T3JQcml2YXRlS2V5LmFzeW1tZXRyaWNLZXlEZXRhaWxzICE9PSB1bmRlZmluZWQgJiYgLy9LZXlPYmplY3QuYXN5bW1ldHJpY0tleURldGFpbHMgaXMgc3VwcG9ydGVkIGluIE5vZGUgMTUrXG4gICAgICBzZWNyZXRPclByaXZhdGVLZXkuYXN5bW1ldHJpY0tleURldGFpbHMubW9kdWx1c0xlbmd0aCA8IDIwNDgpIHtcbiAgICAgIHJldHVybiBmYWlsdXJlKG5ldyBFcnJvcihgc2VjcmV0T3JQcml2YXRlS2V5IGhhcyBhIG1pbmltdW0ga2V5IHNpemUgb2YgMjA0OCBiaXRzIGZvciAke2hlYWRlci5hbGd9YCkpO1xuICAgIH1cbiAgfVxuXG4gIGlmICh0eXBlb2YgcGF5bG9hZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gZmFpbHVyZShuZXcgRXJyb3IoJ3BheWxvYWQgaXMgcmVxdWlyZWQnKSk7XG4gIH0gZWxzZSBpZiAoaXNPYmplY3RQYXlsb2FkKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhbGlkYXRlUGF5bG9hZChwYXlsb2FkKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gZmFpbHVyZShlcnJvcik7XG4gICAgfVxuICAgIGlmICghb3B0aW9ucy5tdXRhdGVQYXlsb2FkKSB7XG4gICAgICBwYXlsb2FkID0gT2JqZWN0LmFzc2lnbih7fSxwYXlsb2FkKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgaW52YWxpZF9vcHRpb25zID0gb3B0aW9uc19mb3Jfb2JqZWN0cy5maWx0ZXIoZnVuY3Rpb24gKG9wdCkge1xuICAgICAgcmV0dXJuIHR5cGVvZiBvcHRpb25zW29wdF0gIT09ICd1bmRlZmluZWQnO1xuICAgIH0pO1xuXG4gICAgaWYgKGludmFsaWRfb3B0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gZmFpbHVyZShuZXcgRXJyb3IoJ2ludmFsaWQgJyArIGludmFsaWRfb3B0aW9ucy5qb2luKCcsJykgKyAnIG9wdGlvbiBmb3IgJyArICh0eXBlb2YgcGF5bG9hZCApICsgJyBwYXlsb2FkJykpO1xuICAgIH1cbiAgfVxuXG4gIGlmICh0eXBlb2YgcGF5bG9hZC5leHAgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBvcHRpb25zLmV4cGlyZXNJbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gZmFpbHVyZShuZXcgRXJyb3IoJ0JhZCBcIm9wdGlvbnMuZXhwaXJlc0luXCIgb3B0aW9uIHRoZSBwYXlsb2FkIGFscmVhZHkgaGFzIGFuIFwiZXhwXCIgcHJvcGVydHkuJykpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBwYXlsb2FkLm5iZiAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIG9wdGlvbnMubm90QmVmb3JlICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBmYWlsdXJlKG5ldyBFcnJvcignQmFkIFwib3B0aW9ucy5ub3RCZWZvcmVcIiBvcHRpb24gdGhlIHBheWxvYWQgYWxyZWFkeSBoYXMgYW4gXCJuYmZcIiBwcm9wZXJ0eS4nKSk7XG4gIH1cblxuICB0cnkge1xuICAgIHZhbGlkYXRlT3B0aW9ucyhvcHRpb25zKTtcbiAgfVxuICBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gZmFpbHVyZShlcnJvcik7XG4gIH1cblxuICBpZiAoIW9wdGlvbnMuYWxsb3dJbnZhbGlkQXN5bW1ldHJpY0tleVR5cGVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhbGlkYXRlQXN5bW1ldHJpY0tleShoZWFkZXIuYWxnLCBzZWNyZXRPclByaXZhdGVLZXkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gZmFpbHVyZShlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgdGltZXN0YW1wID0gcGF5bG9hZC5pYXQgfHwgTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCk7XG5cbiAgaWYgKG9wdGlvbnMubm9UaW1lc3RhbXApIHtcbiAgICBkZWxldGUgcGF5bG9hZC5pYXQ7XG4gIH0gZWxzZSBpZiAoaXNPYmplY3RQYXlsb2FkKSB7XG4gICAgcGF5bG9hZC5pYXQgPSB0aW1lc3RhbXA7XG4gIH1cblxuICBpZiAodHlwZW9mIG9wdGlvbnMubm90QmVmb3JlICE9PSAndW5kZWZpbmVkJykge1xuICAgIHRyeSB7XG4gICAgICBwYXlsb2FkLm5iZiA9IHRpbWVzcGFuKG9wdGlvbnMubm90QmVmb3JlLCB0aW1lc3RhbXApO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICByZXR1cm4gZmFpbHVyZShlcnIpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHBheWxvYWQubmJmID09PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuIGZhaWx1cmUobmV3IEVycm9yKCdcIm5vdEJlZm9yZVwiIHNob3VsZCBiZSBhIG51bWJlciBvZiBzZWNvbmRzIG9yIHN0cmluZyByZXByZXNlbnRpbmcgYSB0aW1lc3BhbiBlZzogXCIxZFwiLCBcIjIwaFwiLCA2MCcpKTtcbiAgICB9XG4gIH1cblxuICBpZiAodHlwZW9mIG9wdGlvbnMuZXhwaXJlc0luICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgcGF5bG9hZCA9PT0gJ29iamVjdCcpIHtcbiAgICB0cnkge1xuICAgICAgcGF5bG9hZC5leHAgPSB0aW1lc3BhbihvcHRpb25zLmV4cGlyZXNJbiwgdGltZXN0YW1wKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgcmV0dXJuIGZhaWx1cmUoZXJyKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBwYXlsb2FkLmV4cCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVybiBmYWlsdXJlKG5ldyBFcnJvcignXCJleHBpcmVzSW5cIiBzaG91bGQgYmUgYSBudW1iZXIgb2Ygc2Vjb25kcyBvciBzdHJpbmcgcmVwcmVzZW50aW5nIGEgdGltZXNwYW4gZWc6IFwiMWRcIiwgXCIyMGhcIiwgNjAnKSk7XG4gICAgfVxuICB9XG5cbiAgT2JqZWN0LmtleXMob3B0aW9uc190b19wYXlsb2FkKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICBjb25zdCBjbGFpbSA9IG9wdGlvbnNfdG9fcGF5bG9hZFtrZXldO1xuICAgIGlmICh0eXBlb2Ygb3B0aW9uc1trZXldICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKHR5cGVvZiBwYXlsb2FkW2NsYWltXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIGZhaWx1cmUobmV3IEVycm9yKCdCYWQgXCJvcHRpb25zLicgKyBrZXkgKyAnXCIgb3B0aW9uLiBUaGUgcGF5bG9hZCBhbHJlYWR5IGhhcyBhbiBcIicgKyBjbGFpbSArICdcIiBwcm9wZXJ0eS4nKSk7XG4gICAgICB9XG4gICAgICBwYXlsb2FkW2NsYWltXSA9IG9wdGlvbnNba2V5XTtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IGVuY29kaW5nID0gb3B0aW9ucy5lbmNvZGluZyB8fCAndXRmOCc7XG5cbiAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNhbGxiYWNrID0gY2FsbGJhY2sgJiYgb25jZShjYWxsYmFjayk7XG5cbiAgICBqd3MuY3JlYXRlU2lnbih7XG4gICAgICBoZWFkZXI6IGhlYWRlcixcbiAgICAgIHByaXZhdGVLZXk6IHNlY3JldE9yUHJpdmF0ZUtleSxcbiAgICAgIHBheWxvYWQ6IHBheWxvYWQsXG4gICAgICBlbmNvZGluZzogZW5jb2RpbmdcbiAgICB9KS5vbmNlKCdlcnJvcicsIGNhbGxiYWNrKVxuICAgICAgLm9uY2UoJ2RvbmUnLCBmdW5jdGlvbiAoc2lnbmF0dXJlKSB7XG4gICAgICAgIC8vIFRPRE86IFJlbW92ZSBpbiBmYXZvciBvZiB0aGUgbW9kdWx1cyBsZW5ndGggY2hlY2sgYmVmb3JlIHNpZ25pbmcgb25jZSBub2RlIDE1KyBpcyB0aGUgbWluaW11bSBzdXBwb3J0ZWQgdmVyc2lvblxuICAgICAgICBpZighb3B0aW9ucy5hbGxvd0luc2VjdXJlS2V5U2l6ZXMgJiYgL14oPzpSU3xQUykvLnRlc3QoaGVhZGVyLmFsZykgJiYgc2lnbmF0dXJlLmxlbmd0aCA8IDI1Nikge1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoYHNlY3JldE9yUHJpdmF0ZUtleSBoYXMgYSBtaW5pbXVtIGtleSBzaXplIG9mIDIwNDggYml0cyBmb3IgJHtoZWFkZXIuYWxnfWApKVxuICAgICAgICB9XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHNpZ25hdHVyZSk7XG4gICAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBsZXQgc2lnbmF0dXJlID0gandzLnNpZ24oe2hlYWRlcjogaGVhZGVyLCBwYXlsb2FkOiBwYXlsb2FkLCBzZWNyZXQ6IHNlY3JldE9yUHJpdmF0ZUtleSwgZW5jb2Rpbmc6IGVuY29kaW5nfSk7XG4gICAgLy8gVE9ETzogUmVtb3ZlIGluIGZhdm9yIG9mIHRoZSBtb2R1bHVzIGxlbmd0aCBjaGVjayBiZWZvcmUgc2lnbmluZyBvbmNlIG5vZGUgMTUrIGlzIHRoZSBtaW5pbXVtIHN1cHBvcnRlZCB2ZXJzaW9uXG4gICAgaWYoIW9wdGlvbnMuYWxsb3dJbnNlY3VyZUtleVNpemVzICYmIC9eKD86UlN8UFMpLy50ZXN0KGhlYWRlci5hbGcpICYmIHNpZ25hdHVyZS5sZW5ndGggPCAyNTYpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgc2VjcmV0T3JQcml2YXRlS2V5IGhhcyBhIG1pbmltdW0ga2V5IHNpemUgb2YgMjA0OCBiaXRzIGZvciAke2hlYWRlci5hbGd9YClcbiAgICB9XG4gICAgcmV0dXJuIHNpZ25hdHVyZVxuICB9XG59O1xuIiwgIm1vZHVsZS5leHBvcnRzID0ge1xuICBkZWNvZGU6IHJlcXVpcmUoJy4vZGVjb2RlJyksXG4gIHZlcmlmeTogcmVxdWlyZSgnLi92ZXJpZnknKSxcbiAgc2lnbjogcmVxdWlyZSgnLi9zaWduJyksXG4gIEpzb25XZWJUb2tlbkVycm9yOiByZXF1aXJlKCcuL2xpYi9Kc29uV2ViVG9rZW5FcnJvcicpLFxuICBOb3RCZWZvcmVFcnJvcjogcmVxdWlyZSgnLi9saWIvTm90QmVmb3JlRXJyb3InKSxcbiAgVG9rZW5FeHBpcmVkRXJyb3I6IHJlcXVpcmUoJy4vbGliL1Rva2VuRXhwaXJlZEVycm9yJyksXG59O1xuIiwgIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5DYWxsYmFja3NSZWdpc3RyeSA9IHZvaWQgMDtcbmNsYXNzIENhbGxiYWNrc1JlZ2lzdHJ5IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5uZXh0SWQgPSAwO1xuICAgICAgICB0aGlzLmNhbGxiYWNrcyA9IHt9O1xuICAgICAgICB0aGlzLmNhbGxiYWNrSWRzID0gbmV3IFdlYWtNYXAoKTtcbiAgICAgICAgdGhpcy5sb2NhdGlvbkluZm8gPSBuZXcgV2Vha01hcCgpO1xuICAgIH1cbiAgICBhZGQoY2FsbGJhY2spIHtcbiAgICAgICAgLy8gVGhlIGNhbGxiYWNrIGlzIGFscmVhZHkgYWRkZWQuXG4gICAgICAgIGxldCBpZCA9IHRoaXMuY2FsbGJhY2tJZHMuZ2V0KGNhbGxiYWNrKTtcbiAgICAgICAgaWYgKGlkICE9IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gaWQ7XG4gICAgICAgIGlkID0gdGhpcy5uZXh0SWQgKz0gMTtcbiAgICAgICAgdGhpcy5jYWxsYmFja3NbaWRdID0gY2FsbGJhY2s7XG4gICAgICAgIHRoaXMuY2FsbGJhY2tJZHMuc2V0KGNhbGxiYWNrLCBpZCk7XG4gICAgICAgIC8vIENhcHR1cmUgdGhlIGxvY2F0aW9uIG9mIHRoZSBmdW5jdGlvbiBhbmQgcHV0IGl0IGluIHRoZSBJRCBzdHJpbmcsXG4gICAgICAgIC8vIHNvIHRoYXQgcmVsZWFzZSBlcnJvcnMgY2FuIGJlIHRyYWNrZWQgZG93biBlYXNpbHkuXG4gICAgICAgIGNvbnN0IHJlZ2V4cCA9IC9hdCAoLiopL2dpO1xuICAgICAgICBjb25zdCBzdGFja1N0cmluZyA9IChuZXcgRXJyb3IoKSkuc3RhY2s7XG4gICAgICAgIGlmICghc3RhY2tTdHJpbmcpXG4gICAgICAgICAgICByZXR1cm4gaWQ7XG4gICAgICAgIGxldCBmaWxlbmFtZUFuZExpbmU7XG4gICAgICAgIGxldCBtYXRjaDtcbiAgICAgICAgd2hpbGUgKChtYXRjaCA9IHJlZ2V4cC5leGVjKHN0YWNrU3RyaW5nKSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IGxvY2F0aW9uID0gbWF0Y2hbMV07XG4gICAgICAgICAgICBpZiAobG9jYXRpb24uaW5jbHVkZXMoJyhuYXRpdmUpJykpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBpZiAobG9jYXRpb24uaW5jbHVkZXMoJyg8YW5vbnltb3VzPiknKSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGlmIChsb2NhdGlvbi5pbmNsdWRlcygnY2FsbGJhY2tzLXJlZ2lzdHJ5LmpzJykpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBpZiAobG9jYXRpb24uaW5jbHVkZXMoJ3JlbW90ZS5qcycpKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKGxvY2F0aW9uLmluY2x1ZGVzKCdAZWxlY3Ryb24vcmVtb3RlL2Rpc3QnKSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGNvbnN0IHJlZiA9IC8oW14vXildKilcXCk/JC9naS5leGVjKGxvY2F0aW9uKTtcbiAgICAgICAgICAgIGlmIChyZWYpXG4gICAgICAgICAgICAgICAgZmlsZW5hbWVBbmRMaW5lID0gcmVmWzFdO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sb2NhdGlvbkluZm8uc2V0KGNhbGxiYWNrLCBmaWxlbmFtZUFuZExpbmUpO1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgfVxuICAgIGdldChpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxsYmFja3NbaWRdIHx8IGZ1bmN0aW9uICgpIHsgfTtcbiAgICB9XG4gICAgZ2V0TG9jYXRpb24oY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYXRpb25JbmZvLmdldChjYWxsYmFjayk7XG4gICAgfVxuICAgIGFwcGx5KGlkLCAuLi5hcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldChpZCkuYXBwbHkoZ2xvYmFsLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgcmVtb3ZlKGlkKSB7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrID0gdGhpcy5jYWxsYmFja3NbaWRdO1xuICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHRoaXMuY2FsbGJhY2tJZHMuZGVsZXRlKGNhbGxiYWNrKTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNhbGxiYWNrc1tpZF07XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLkNhbGxiYWNrc1JlZ2lzdHJ5ID0gQ2FsbGJhY2tzUmVnaXN0cnk7XG4iLCAiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmRlc2VyaWFsaXplID0gZXhwb3J0cy5zZXJpYWxpemUgPSBleHBvcnRzLmlzU2VyaWFsaXphYmxlT2JqZWN0ID0gZXhwb3J0cy5pc1Byb21pc2UgPSB2b2lkIDA7XG5jb25zdCBlbGVjdHJvbl8xID0gcmVxdWlyZShcImVsZWN0cm9uXCIpO1xuZnVuY3Rpb24gaXNQcm9taXNlKHZhbCkge1xuICAgIHJldHVybiAodmFsICYmXG4gICAgICAgIHZhbC50aGVuICYmXG4gICAgICAgIHZhbC50aGVuIGluc3RhbmNlb2YgRnVuY3Rpb24gJiZcbiAgICAgICAgdmFsLmNvbnN0cnVjdG9yICYmXG4gICAgICAgIHZhbC5jb25zdHJ1Y3Rvci5yZWplY3QgJiZcbiAgICAgICAgdmFsLmNvbnN0cnVjdG9yLnJlamVjdCBpbnN0YW5jZW9mIEZ1bmN0aW9uICYmXG4gICAgICAgIHZhbC5jb25zdHJ1Y3Rvci5yZXNvbHZlICYmXG4gICAgICAgIHZhbC5jb25zdHJ1Y3Rvci5yZXNvbHZlIGluc3RhbmNlb2YgRnVuY3Rpb24pO1xufVxuZXhwb3J0cy5pc1Byb21pc2UgPSBpc1Byb21pc2U7XG5jb25zdCBzZXJpYWxpemFibGVUeXBlcyA9IFtcbiAgICBCb29sZWFuLFxuICAgIE51bWJlcixcbiAgICBTdHJpbmcsXG4gICAgRGF0ZSxcbiAgICBFcnJvcixcbiAgICBSZWdFeHAsXG4gICAgQXJyYXlCdWZmZXJcbl07XG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2ViX1dvcmtlcnNfQVBJL1N0cnVjdHVyZWRfY2xvbmVfYWxnb3JpdGhtI1N1cHBvcnRlZF90eXBlc1xuZnVuY3Rpb24gaXNTZXJpYWxpemFibGVPYmplY3QodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IG51bGwgfHwgQXJyYXlCdWZmZXIuaXNWaWV3KHZhbHVlKSB8fCBzZXJpYWxpemFibGVUeXBlcy5zb21lKHR5cGUgPT4gdmFsdWUgaW5zdGFuY2VvZiB0eXBlKTtcbn1cbmV4cG9ydHMuaXNTZXJpYWxpemFibGVPYmplY3QgPSBpc1NlcmlhbGl6YWJsZU9iamVjdDtcbmNvbnN0IG9iamVjdE1hcCA9IGZ1bmN0aW9uIChzb3VyY2UsIG1hcHBlcikge1xuICAgIGNvbnN0IHNvdXJjZUVudHJpZXMgPSBPYmplY3QuZW50cmllcyhzb3VyY2UpO1xuICAgIGNvbnN0IHRhcmdldEVudHJpZXMgPSBzb3VyY2VFbnRyaWVzLm1hcCgoW2tleSwgdmFsXSkgPT4gW2tleSwgbWFwcGVyKHZhbCldKTtcbiAgICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKHRhcmdldEVudHJpZXMpO1xufTtcbmZ1bmN0aW9uIHNlcmlhbGl6ZU5hdGl2ZUltYWdlKGltYWdlKSB7XG4gICAgY29uc3QgcmVwcmVzZW50YXRpb25zID0gW107XG4gICAgY29uc3Qgc2NhbGVGYWN0b3JzID0gaW1hZ2UuZ2V0U2NhbGVGYWN0b3JzKCk7XG4gICAgLy8gVXNlIEJ1ZmZlciB3aGVuIHRoZXJlJ3Mgb25seSBvbmUgcmVwcmVzZW50YXRpb24gZm9yIGJldHRlciBwZXJmLlxuICAgIC8vIFRoaXMgYXZvaWRzIGNvbXByZXNzaW5nIHRvL2Zyb20gUE5HIHdoZXJlIGl0J3Mgbm90IG5lY2Vzc2FyeSB0b1xuICAgIC8vIGVuc3VyZSB1bmlxdWVuZXNzIG9mIGRhdGFVUkxzIChzaW5jZSB0aGVyZSdzIG9ubHkgb25lKS5cbiAgICBpZiAoc2NhbGVGYWN0b3JzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBjb25zdCBzY2FsZUZhY3RvciA9IHNjYWxlRmFjdG9yc1swXTtcbiAgICAgICAgY29uc3Qgc2l6ZSA9IGltYWdlLmdldFNpemUoc2NhbGVGYWN0b3IpO1xuICAgICAgICBjb25zdCBidWZmZXIgPSBpbWFnZS50b0JpdG1hcCh7IHNjYWxlRmFjdG9yIH0pO1xuICAgICAgICByZXByZXNlbnRhdGlvbnMucHVzaCh7IHNjYWxlRmFjdG9yLCBzaXplLCBidWZmZXIgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBDb25zdHJ1Y3QgZnJvbSBkYXRhVVJMcyB0byBlbnN1cmUgdGhhdCB0aGV5IGFyZSBub3QgbG9zdCBpbiBjcmVhdGlvbi5cbiAgICAgICAgZm9yIChjb25zdCBzY2FsZUZhY3RvciBvZiBzY2FsZUZhY3RvcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHNpemUgPSBpbWFnZS5nZXRTaXplKHNjYWxlRmFjdG9yKTtcbiAgICAgICAgICAgIGNvbnN0IGRhdGFVUkwgPSBpbWFnZS50b0RhdGFVUkwoeyBzY2FsZUZhY3RvciB9KTtcbiAgICAgICAgICAgIHJlcHJlc2VudGF0aW9ucy5wdXNoKHsgc2NhbGVGYWN0b3IsIHNpemUsIGRhdGFVUkwgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgX19FTEVDVFJPTl9TRVJJQUxJWkVEX05hdGl2ZUltYWdlX186IHRydWUsIHJlcHJlc2VudGF0aW9ucyB9O1xufVxuZnVuY3Rpb24gZGVzZXJpYWxpemVOYXRpdmVJbWFnZSh2YWx1ZSkge1xuICAgIGNvbnN0IGltYWdlID0gZWxlY3Ryb25fMS5uYXRpdmVJbWFnZS5jcmVhdGVFbXB0eSgpO1xuICAgIC8vIFVzZSBCdWZmZXIgd2hlbiB0aGVyZSdzIG9ubHkgb25lIHJlcHJlc2VudGF0aW9uIGZvciBiZXR0ZXIgcGVyZi5cbiAgICAvLyBUaGlzIGF2b2lkcyBjb21wcmVzc2luZyB0by9mcm9tIFBORyB3aGVyZSBpdCdzIG5vdCBuZWNlc3NhcnkgdG9cbiAgICAvLyBlbnN1cmUgdW5pcXVlbmVzcyBvZiBkYXRhVVJMcyAoc2luY2UgdGhlcmUncyBvbmx5IG9uZSkuXG4gICAgaWYgKHZhbHVlLnJlcHJlc2VudGF0aW9ucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgY29uc3QgeyBidWZmZXIsIHNpemUsIHNjYWxlRmFjdG9yIH0gPSB2YWx1ZS5yZXByZXNlbnRhdGlvbnNbMF07XG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gc2l6ZTtcbiAgICAgICAgaW1hZ2UuYWRkUmVwcmVzZW50YXRpb24oeyBidWZmZXIsIHNjYWxlRmFjdG9yLCB3aWR0aCwgaGVpZ2h0IH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gQ29uc3RydWN0IGZyb20gZGF0YVVSTHMgdG8gZW5zdXJlIHRoYXQgdGhleSBhcmUgbm90IGxvc3QgaW4gY3JlYXRpb24uXG4gICAgICAgIGZvciAoY29uc3QgcmVwIG9mIHZhbHVlLnJlcHJlc2VudGF0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgeyBkYXRhVVJMLCBzaXplLCBzY2FsZUZhY3RvciB9ID0gcmVwO1xuICAgICAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBzaXplO1xuICAgICAgICAgICAgaW1hZ2UuYWRkUmVwcmVzZW50YXRpb24oeyBkYXRhVVJMLCBzY2FsZUZhY3Rvciwgd2lkdGgsIGhlaWdodCB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaW1hZ2U7XG59XG5mdW5jdGlvbiBzZXJpYWxpemUodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgJiYgdmFsdWUuY29uc3RydWN0b3IgJiYgdmFsdWUuY29uc3RydWN0b3IubmFtZSA9PT0gJ05hdGl2ZUltYWdlJykge1xuICAgICAgICByZXR1cm4gc2VyaWFsaXplTmF0aXZlSW1hZ2UodmFsdWUpO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlLm1hcChzZXJpYWxpemUpO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc1NlcmlhbGl6YWJsZU9iamVjdCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIE9iamVjdCkge1xuICAgICAgICByZXR1cm4gb2JqZWN0TWFwKHZhbHVlLCBzZXJpYWxpemUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbn1cbmV4cG9ydHMuc2VyaWFsaXplID0gc2VyaWFsaXplO1xuZnVuY3Rpb24gZGVzZXJpYWxpemUodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgJiYgdmFsdWUuX19FTEVDVFJPTl9TRVJJQUxJWkVEX05hdGl2ZUltYWdlX18pIHtcbiAgICAgICAgcmV0dXJuIGRlc2VyaWFsaXplTmF0aXZlSW1hZ2UodmFsdWUpO1xuICAgIH1cbiAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWUubWFwKGRlc2VyaWFsaXplKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNTZXJpYWxpemFibGVPYmplY3QodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBPYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIG9iamVjdE1hcCh2YWx1ZSwgZGVzZXJpYWxpemUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbn1cbmV4cG9ydHMuZGVzZXJpYWxpemUgPSBkZXNlcmlhbGl6ZTtcbiIsICJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZ2V0RWxlY3Ryb25CaW5kaW5nID0gdm9pZCAwO1xuY29uc3QgZ2V0RWxlY3Ryb25CaW5kaW5nID0gKG5hbWUpID0+IHtcbiAgICBpZiAocHJvY2Vzcy5fbGlua2VkQmluZGluZykge1xuICAgICAgICByZXR1cm4gcHJvY2Vzcy5fbGlua2VkQmluZGluZygnZWxlY3Ryb25fY29tbW9uXycgKyBuYW1lKTtcbiAgICB9XG4gICAgZWxzZSBpZiAocHJvY2Vzcy5lbGVjdHJvbkJpbmRpbmcpIHtcbiAgICAgICAgcmV0dXJuIHByb2Nlc3MuZWxlY3Ryb25CaW5kaW5nKG5hbWUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufTtcbmV4cG9ydHMuZ2V0RWxlY3Ryb25CaW5kaW5nID0gZ2V0RWxlY3Ryb25CaW5kaW5nO1xuIiwgIlwidXNlIHN0cmljdFwiO1xudmFyIF9hLCBfYjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuYnJvd3Nlck1vZHVsZU5hbWVzID0gZXhwb3J0cy5jb21tb25Nb2R1bGVOYW1lcyA9IHZvaWQgMDtcbmNvbnN0IGdldF9lbGVjdHJvbl9iaW5kaW5nXzEgPSByZXF1aXJlKFwiLi9nZXQtZWxlY3Ryb24tYmluZGluZ1wiKTtcbmV4cG9ydHMuY29tbW9uTW9kdWxlTmFtZXMgPSBbXG4gICAgJ2NsaXBib2FyZCcsXG4gICAgJ25hdGl2ZUltYWdlJyxcbiAgICAnc2hlbGwnLFxuXTtcbmV4cG9ydHMuYnJvd3Nlck1vZHVsZU5hbWVzID0gW1xuICAgICdhcHAnLFxuICAgICdhdXRvVXBkYXRlcicsXG4gICAgJ0Jhc2VXaW5kb3cnLFxuICAgICdCcm93c2VyVmlldycsXG4gICAgJ0Jyb3dzZXJXaW5kb3cnLFxuICAgICdjb250ZW50VHJhY2luZycsXG4gICAgJ2NyYXNoUmVwb3J0ZXInLFxuICAgICdkaWFsb2cnLFxuICAgICdnbG9iYWxTaG9ydGN1dCcsXG4gICAgJ2lwY01haW4nLFxuICAgICdpbkFwcFB1cmNoYXNlJyxcbiAgICAnTWVudScsXG4gICAgJ01lbnVJdGVtJyxcbiAgICAnbmF0aXZlVGhlbWUnLFxuICAgICduZXQnLFxuICAgICduZXRMb2cnLFxuICAgICdNZXNzYWdlQ2hhbm5lbE1haW4nLFxuICAgICdOb3RpZmljYXRpb24nLFxuICAgICdwb3dlck1vbml0b3InLFxuICAgICdwb3dlclNhdmVCbG9ja2VyJyxcbiAgICAncHJvdG9jb2wnLFxuICAgICdwdXNoTm90aWZpY2F0aW9ucycsXG4gICAgJ3NhZmVTdG9yYWdlJyxcbiAgICAnc2NyZWVuJyxcbiAgICAnc2Vzc2lvbicsXG4gICAgJ1NoYXJlTWVudScsXG4gICAgJ3N5c3RlbVByZWZlcmVuY2VzJyxcbiAgICAnVG9wTGV2ZWxXaW5kb3cnLFxuICAgICdUb3VjaEJhcicsXG4gICAgJ1RyYXknLFxuICAgICd1dGlsaXR5UHJvY2VzcycsXG4gICAgJ1ZpZXcnLFxuICAgICd3ZWJDb250ZW50cycsXG4gICAgJ1dlYkNvbnRlbnRzVmlldycsXG4gICAgJ3dlYkZyYW1lTWFpbicsXG5dLmNvbmNhdChleHBvcnRzLmNvbW1vbk1vZHVsZU5hbWVzKTtcbmNvbnN0IGZlYXR1cmVzID0gZ2V0X2VsZWN0cm9uX2JpbmRpbmdfMS5nZXRFbGVjdHJvbkJpbmRpbmcoJ2ZlYXR1cmVzJyk7XG5pZiAoKChfYSA9IGZlYXR1cmVzID09PSBudWxsIHx8IGZlYXR1cmVzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmZWF0dXJlcy5pc0Rlc2t0b3BDYXB0dXJlckVuYWJsZWQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jYWxsKGZlYXR1cmVzKSkgIT09IGZhbHNlKSB7XG4gICAgZXhwb3J0cy5icm93c2VyTW9kdWxlTmFtZXMucHVzaCgnZGVza3RvcENhcHR1cmVyJyk7XG59XG5pZiAoKChfYiA9IGZlYXR1cmVzID09PSBudWxsIHx8IGZlYXR1cmVzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmZWF0dXJlcy5pc1ZpZXdBcGlFbmFibGVkKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2FsbChmZWF0dXJlcykpICE9PSBmYWxzZSkge1xuICAgIGV4cG9ydHMuYnJvd3Nlck1vZHVsZU5hbWVzLnB1c2goJ0ltYWdlVmlldycpO1xufVxuIiwgIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5jcmVhdGVGdW5jdGlvbldpdGhSZXR1cm5WYWx1ZSA9IGV4cG9ydHMuZ2V0R2xvYmFsID0gZXhwb3J0cy5nZXRDdXJyZW50V2ViQ29udGVudHMgPSBleHBvcnRzLmdldEN1cnJlbnRXaW5kb3cgPSBleHBvcnRzLmdldEJ1aWx0aW4gPSB2b2lkIDA7XG5jb25zdCBjYWxsYmFja3NfcmVnaXN0cnlfMSA9IHJlcXVpcmUoXCIuL2NhbGxiYWNrcy1yZWdpc3RyeVwiKTtcbmNvbnN0IHR5cGVfdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi9jb21tb24vdHlwZS11dGlsc1wiKTtcbmNvbnN0IGVsZWN0cm9uXzEgPSByZXF1aXJlKFwiZWxlY3Ryb25cIik7XG5jb25zdCBtb2R1bGVfbmFtZXNfMSA9IHJlcXVpcmUoXCIuLi9jb21tb24vbW9kdWxlLW5hbWVzXCIpO1xuY29uc3QgZ2V0X2VsZWN0cm9uX2JpbmRpbmdfMSA9IHJlcXVpcmUoXCIuLi9jb21tb24vZ2V0LWVsZWN0cm9uLWJpbmRpbmdcIik7XG5jb25zdCB7IFByb21pc2UgfSA9IGdsb2JhbDtcbmNvbnN0IGNhbGxiYWNrc1JlZ2lzdHJ5ID0gbmV3IGNhbGxiYWNrc19yZWdpc3RyeV8xLkNhbGxiYWNrc1JlZ2lzdHJ5KCk7XG5jb25zdCByZW1vdGVPYmplY3RDYWNoZSA9IG5ldyBNYXAoKTtcbmNvbnN0IGZpbmFsaXphdGlvblJlZ2lzdHJ5ID0gbmV3IEZpbmFsaXphdGlvblJlZ2lzdHJ5KChpZCkgPT4ge1xuICAgIGNvbnN0IHJlZiA9IHJlbW90ZU9iamVjdENhY2hlLmdldChpZCk7XG4gICAgaWYgKHJlZiAhPT0gdW5kZWZpbmVkICYmIHJlZi5kZXJlZigpID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmVtb3RlT2JqZWN0Q2FjaGUuZGVsZXRlKGlkKTtcbiAgICAgICAgZWxlY3Ryb25fMS5pcGNSZW5kZXJlci5zZW5kKFwiUkVNT1RFX0JST1dTRVJfREVSRUZFUkVOQ0VcIiAvKiBCUk9XU0VSX0RFUkVGRVJFTkNFICovLCBjb250ZXh0SWQsIGlkLCAwKTtcbiAgICB9XG59KTtcbmNvbnN0IGVsZWN0cm9uSWRzID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IGlzUmV0dXJuVmFsdWUgPSBuZXcgV2Vha1NldCgpO1xuZnVuY3Rpb24gZ2V0Q2FjaGVkUmVtb3RlT2JqZWN0KGlkKSB7XG4gICAgY29uc3QgcmVmID0gcmVtb3RlT2JqZWN0Q2FjaGUuZ2V0KGlkKTtcbiAgICBpZiAocmVmICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgZGVyZWYgPSByZWYuZGVyZWYoKTtcbiAgICAgICAgaWYgKGRlcmVmICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm4gZGVyZWY7XG4gICAgfVxufVxuZnVuY3Rpb24gc2V0Q2FjaGVkUmVtb3RlT2JqZWN0KGlkLCB2YWx1ZSkge1xuICAgIGNvbnN0IHdyID0gbmV3IFdlYWtSZWYodmFsdWUpO1xuICAgIHJlbW90ZU9iamVjdENhY2hlLnNldChpZCwgd3IpO1xuICAgIGZpbmFsaXphdGlvblJlZ2lzdHJ5LnJlZ2lzdGVyKHZhbHVlLCBpZCk7XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuZnVuY3Rpb24gZ2V0Q29udGV4dElkKCkge1xuICAgIGNvbnN0IHY4VXRpbCA9IGdldF9lbGVjdHJvbl9iaW5kaW5nXzEuZ2V0RWxlY3Ryb25CaW5kaW5nKCd2OF91dGlsJyk7XG4gICAgaWYgKHY4VXRpbCkge1xuICAgICAgICByZXR1cm4gdjhVdGlsLmdldEhpZGRlblZhbHVlKGdsb2JhbCwgJ2NvbnRleHRJZCcpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFbGVjdHJvbiA+PXYxMy4wLjAtYmV0YS42IHJlcXVpcmVkIHRvIHN1cHBvcnQgc2FuZGJveGVkIHJlbmRlcmVycycpO1xuICAgIH1cbn1cbi8vIEFuIHVuaXF1ZSBJRCB0aGF0IGNhbiByZXByZXNlbnQgY3VycmVudCBjb250ZXh0LlxuY29uc3QgY29udGV4dElkID0gcHJvY2Vzcy5jb250ZXh0SWQgfHwgZ2V0Q29udGV4dElkKCk7XG4vLyBOb3RpZnkgdGhlIG1haW4gcHJvY2VzcyB3aGVuIGN1cnJlbnQgY29udGV4dCBpcyBnb2luZyB0byBiZSByZWxlYXNlZC5cbi8vIE5vdGUgdGhhdCB3aGVuIHRoZSByZW5kZXJlciBwcm9jZXNzIGlzIGRlc3Ryb3llZCwgdGhlIG1lc3NhZ2UgbWF5IG5vdCBiZVxuLy8gc2VudCwgd2UgYWxzbyBsaXN0ZW4gdG8gdGhlIFwicmVuZGVyLXZpZXctZGVsZXRlZFwiIGV2ZW50IGluIHRoZSBtYWluIHByb2Nlc3Ncbi8vIHRvIGd1YXJkIHRoYXQgc2l0dWF0aW9uLlxucHJvY2Vzcy5vbignZXhpdCcsICgpID0+IHtcbiAgICBjb25zdCBjb21tYW5kID0gXCJSRU1PVEVfQlJPV1NFUl9DT05URVhUX1JFTEVBU0VcIiAvKiBCUk9XU0VSX0NPTlRFWFRfUkVMRUFTRSAqLztcbiAgICBlbGVjdHJvbl8xLmlwY1JlbmRlcmVyLnNlbmQoY29tbWFuZCwgY29udGV4dElkKTtcbn0pO1xuY29uc3QgSVNfUkVNT1RFX1BST1hZID0gU3ltYm9sKCdpcy1yZW1vdGUtcHJveHknKTtcbi8vIENvbnZlcnQgdGhlIGFyZ3VtZW50cyBvYmplY3QgaW50byBhbiBhcnJheSBvZiBtZXRhIGRhdGEuXG5mdW5jdGlvbiB3cmFwQXJncyhhcmdzLCB2aXNpdGVkID0gbmV3IFNldCgpKSB7XG4gICAgY29uc3QgdmFsdWVUb01ldGEgPSAodmFsdWUpID0+IHtcbiAgICAgICAgLy8gQ2hlY2sgZm9yIGNpcmN1bGFyIHJlZmVyZW5jZS5cbiAgICAgICAgaWYgKHZpc2l0ZWQuaGFzKHZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAndmFsdWUnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBudWxsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWx1ZSAmJiB2YWx1ZS5jb25zdHJ1Y3RvciAmJiB2YWx1ZS5jb25zdHJ1Y3Rvci5uYW1lID09PSAnTmF0aXZlSW1hZ2UnKSB7XG4gICAgICAgICAgICByZXR1cm4geyB0eXBlOiAnbmF0aXZlaW1hZ2UnLCB2YWx1ZTogdHlwZV91dGlsc18xLnNlcmlhbGl6ZSh2YWx1ZSkgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgdmlzaXRlZC5hZGQodmFsdWUpO1xuICAgICAgICAgICAgY29uc3QgbWV0YSA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnYXJyYXknLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB3cmFwQXJncyh2YWx1ZSwgdmlzaXRlZClcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2aXNpdGVkLmRlbGV0ZSh2YWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gbWV0YTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEJ1ZmZlcikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnYnVmZmVyJyxcbiAgICAgICAgICAgICAgICB2YWx1ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlX3V0aWxzXzEuaXNTZXJpYWxpemFibGVPYmplY3QodmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICd2YWx1ZScsXG4gICAgICAgICAgICAgICAgdmFsdWVcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgaWYgKHR5cGVfdXRpbHNfMS5pc1Byb21pc2UodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3Byb21pc2UnLFxuICAgICAgICAgICAgICAgICAgICB0aGVuOiB2YWx1ZVRvTWV0YShmdW5jdGlvbiAob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlbGVjdHJvbklkcy5oYXModmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3JlbW90ZS1vYmplY3QnLFxuICAgICAgICAgICAgICAgICAgICBpZDogZWxlY3Ryb25JZHMuZ2V0KHZhbHVlKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBtZXRhID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgICAgICAgIG5hbWU6IHZhbHVlLmNvbnN0cnVjdG9yID8gdmFsdWUuY29uc3RydWN0b3IubmFtZSA6ICcnLFxuICAgICAgICAgICAgICAgIG1lbWJlcnM6IFtdXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmlzaXRlZC5hZGQodmFsdWUpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBwcm9wIGluIHZhbHVlKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZ3VhcmQtZm9yLWluXG4gICAgICAgICAgICAgICAgbWV0YS5tZW1iZXJzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBwcm9wLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVUb01ldGEodmFsdWVbcHJvcF0pXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2aXNpdGVkLmRlbGV0ZSh2YWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gbWV0YTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicgJiYgaXNSZXR1cm5WYWx1ZS5oYXModmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbi13aXRoLXJldHVybi12YWx1ZScsXG4gICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlVG9NZXRhKHZhbHVlKCkpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgICAgICAgICAgIGlkOiBjYWxsYmFja3NSZWdpc3RyeS5hZGQodmFsdWUpLFxuICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBjYWxsYmFja3NSZWdpc3RyeS5nZXRMb2NhdGlvbih2YWx1ZSksXG4gICAgICAgICAgICAgICAgbGVuZ3RoOiB2YWx1ZS5sZW5ndGhcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICd2YWx1ZScsXG4gICAgICAgICAgICAgICAgdmFsdWVcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBhcmdzLm1hcCh2YWx1ZVRvTWV0YSk7XG59XG4vLyBQb3B1bGF0ZSBvYmplY3QncyBtZW1iZXJzIGZyb20gZGVzY3JpcHRvcnMuXG4vLyBUaGUgfHJlZnwgd2lsbCBiZSBrZXB0IHJlZmVyZW5jZWQgYnkgfG1lbWJlcnN8LlxuLy8gVGhpcyBtYXRjaGVzIHxnZXRPYmplY3RNZW1lYmVyc3wgaW4gcnBjLXNlcnZlci5cbmZ1bmN0aW9uIHNldE9iamVjdE1lbWJlcnMocmVmLCBvYmplY3QsIG1ldGFJZCwgbWVtYmVycykge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShtZW1iZXJzKSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGZvciAoY29uc3QgbWVtYmVyIG9mIG1lbWJlcnMpIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIG1lbWJlci5uYW1lKSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBjb25zdCBkZXNjcmlwdG9yID0geyBlbnVtZXJhYmxlOiBtZW1iZXIuZW51bWVyYWJsZSB9O1xuICAgICAgICBpZiAobWVtYmVyLnR5cGUgPT09ICdtZXRob2QnKSB7XG4gICAgICAgICAgICBjb25zdCByZW1vdGVNZW1iZXJGdW5jdGlvbiA9IGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNvbW1hbmQ7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMgJiYgdGhpcy5jb25zdHJ1Y3RvciA9PT0gcmVtb3RlTWVtYmVyRnVuY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY29tbWFuZCA9IFwiUkVNT1RFX0JST1dTRVJfTUVNQkVSX0NPTlNUUlVDVE9SXCIgLyogQlJPV1NFUl9NRU1CRVJfQ09OU1RSVUNUT1IgKi87XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb21tYW5kID0gXCJSRU1PVEVfQlJPV1NFUl9NRU1CRVJfQ0FMTFwiIC8qIEJST1dTRVJfTUVNQkVSX0NBTEwgKi87XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJldCA9IGVsZWN0cm9uXzEuaXBjUmVuZGVyZXIuc2VuZFN5bmMoY29tbWFuZCwgY29udGV4dElkLCBtZXRhSWQsIG1lbWJlci5uYW1lLCB3cmFwQXJncyhhcmdzKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1ldGFUb1ZhbHVlKHJldCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbGV0IGRlc2NyaXB0b3JGdW5jdGlvbiA9IHByb3h5RnVuY3Rpb25Qcm9wZXJ0aWVzKHJlbW90ZU1lbWJlckZ1bmN0aW9uLCBtZXRhSWQsIG1lbWJlci5uYW1lKTtcbiAgICAgICAgICAgIGRlc2NyaXB0b3IuZ2V0ID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGRlc2NyaXB0b3JGdW5jdGlvbi5yZWYgPSByZWY7IC8vIFRoZSBtZW1iZXIgc2hvdWxkIHJlZmVyZW5jZSBpdHMgb2JqZWN0LlxuICAgICAgICAgICAgICAgIHJldHVybiBkZXNjcmlwdG9yRnVuY3Rpb247XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gRW5hYmxlIG1vbmtleS1wYXRjaCB0aGUgbWV0aG9kXG4gICAgICAgICAgICBkZXNjcmlwdG9yLnNldCA9ICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGRlc2NyaXB0b3JGdW5jdGlvbiA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobWVtYmVyLnR5cGUgPT09ICdnZXQnKSB7XG4gICAgICAgICAgICBkZXNjcmlwdG9yLmdldCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb21tYW5kID0gXCJSRU1PVEVfQlJPV1NFUl9NRU1CRVJfR0VUXCIgLyogQlJPV1NFUl9NRU1CRVJfR0VUICovO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGEgPSBlbGVjdHJvbl8xLmlwY1JlbmRlcmVyLnNlbmRTeW5jKGNvbW1hbmQsIGNvbnRleHRJZCwgbWV0YUlkLCBtZW1iZXIubmFtZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1ldGFUb1ZhbHVlKG1ldGEpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChtZW1iZXIud3JpdGFibGUpIHtcbiAgICAgICAgICAgICAgICBkZXNjcmlwdG9yLnNldCA9ICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhcmdzID0gd3JhcEFyZ3MoW3ZhbHVlXSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbW1hbmQgPSBcIlJFTU9URV9CUk9XU0VSX01FTUJFUl9TRVRcIiAvKiBCUk9XU0VSX01FTUJFUl9TRVQgKi87XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1ldGEgPSBlbGVjdHJvbl8xLmlwY1JlbmRlcmVyLnNlbmRTeW5jKGNvbW1hbmQsIGNvbnRleHRJZCwgbWV0YUlkLCBtZW1iZXIubmFtZSwgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXRhICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRhVG9WYWx1ZShtZXRhKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iamVjdCwgbWVtYmVyLm5hbWUsIGRlc2NyaXB0b3IpO1xuICAgIH1cbn1cbi8vIFBvcHVsYXRlIG9iamVjdCdzIHByb3RvdHlwZSBmcm9tIGRlc2NyaXB0b3IuXG4vLyBUaGlzIG1hdGNoZXMgfGdldE9iamVjdFByb3RvdHlwZXwgaW4gcnBjLXNlcnZlci5cbmZ1bmN0aW9uIHNldE9iamVjdFByb3RvdHlwZShyZWYsIG9iamVjdCwgbWV0YUlkLCBkZXNjcmlwdG9yKSB7XG4gICAgaWYgKGRlc2NyaXB0b3IgPT09IG51bGwpXG4gICAgICAgIHJldHVybjtcbiAgICBjb25zdCBwcm90byA9IHt9O1xuICAgIHNldE9iamVjdE1lbWJlcnMocmVmLCBwcm90bywgbWV0YUlkLCBkZXNjcmlwdG9yLm1lbWJlcnMpO1xuICAgIHNldE9iamVjdFByb3RvdHlwZShyZWYsIHByb3RvLCBtZXRhSWQsIGRlc2NyaXB0b3IucHJvdG8pO1xuICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihvYmplY3QsIHByb3RvKTtcbn1cbi8vIFdyYXAgZnVuY3Rpb24gaW4gUHJveHkgZm9yIGFjY2Vzc2luZyByZW1vdGUgcHJvcGVydGllc1xuZnVuY3Rpb24gcHJveHlGdW5jdGlvblByb3BlcnRpZXMocmVtb3RlTWVtYmVyRnVuY3Rpb24sIG1ldGFJZCwgbmFtZSkge1xuICAgIGxldCBsb2FkZWQgPSBmYWxzZTtcbiAgICAvLyBMYXppbHkgbG9hZCBmdW5jdGlvbiBwcm9wZXJ0aWVzXG4gICAgY29uc3QgbG9hZFJlbW90ZVByb3BlcnRpZXMgPSAoKSA9PiB7XG4gICAgICAgIGlmIChsb2FkZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxvYWRlZCA9IHRydWU7XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSBcIlJFTU9URV9CUk9XU0VSX01FTUJFUl9HRVRcIiAvKiBCUk9XU0VSX01FTUJFUl9HRVQgKi87XG4gICAgICAgIGNvbnN0IG1ldGEgPSBlbGVjdHJvbl8xLmlwY1JlbmRlcmVyLnNlbmRTeW5jKGNvbW1hbmQsIGNvbnRleHRJZCwgbWV0YUlkLCBuYW1lKTtcbiAgICAgICAgc2V0T2JqZWN0TWVtYmVycyhyZW1vdGVNZW1iZXJGdW5jdGlvbiwgcmVtb3RlTWVtYmVyRnVuY3Rpb24sIG1ldGEuaWQsIG1ldGEubWVtYmVycyk7XG4gICAgfTtcbiAgICByZXR1cm4gbmV3IFByb3h5KHJlbW90ZU1lbWJlckZ1bmN0aW9uLCB7XG4gICAgICAgIHNldDogKHRhcmdldCwgcHJvcGVydHksIHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBpZiAocHJvcGVydHkgIT09ICdyZWYnKVxuICAgICAgICAgICAgICAgIGxvYWRSZW1vdGVQcm9wZXJ0aWVzKCk7XG4gICAgICAgICAgICB0YXJnZXRbcHJvcGVydHldID0gdmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0OiAodGFyZ2V0LCBwcm9wZXJ0eSkgPT4ge1xuICAgICAgICAgICAgaWYgKHByb3BlcnR5ID09PSBJU19SRU1PVEVfUFJPWFkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0YXJnZXQsIHByb3BlcnR5KSlcbiAgICAgICAgICAgICAgICBsb2FkUmVtb3RlUHJvcGVydGllcygpO1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSB0YXJnZXRbcHJvcGVydHldO1xuICAgICAgICAgICAgaWYgKHByb3BlcnR5ID09PSAndG9TdHJpbmcnICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS5iaW5kKHRhcmdldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIG93bktleXM6ICh0YXJnZXQpID0+IHtcbiAgICAgICAgICAgIGxvYWRSZW1vdGVQcm9wZXJ0aWVzKCk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGFyZ2V0KTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOiAodGFyZ2V0LCBwcm9wZXJ0eSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBwcm9wZXJ0eSk7XG4gICAgICAgICAgICBpZiAoZGVzY3JpcHRvcilcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVzY3JpcHRvcjtcbiAgICAgICAgICAgIGxvYWRSZW1vdGVQcm9wZXJ0aWVzKCk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIHByb3BlcnR5KTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLy8gQ29udmVydCBtZXRhIGRhdGEgZnJvbSBicm93c2VyIGludG8gcmVhbCB2YWx1ZS5cbmZ1bmN0aW9uIG1ldGFUb1ZhbHVlKG1ldGEpIHtcbiAgICBpZiAoIW1ldGEpXG4gICAgICAgIHJldHVybiB7fTtcbiAgICBpZiAobWV0YS50eXBlID09PSAndmFsdWUnKSB7XG4gICAgICAgIHJldHVybiBtZXRhLnZhbHVlO1xuICAgIH1cbiAgICBlbHNlIGlmIChtZXRhLnR5cGUgPT09ICdhcnJheScpIHtcbiAgICAgICAgcmV0dXJuIG1ldGEubWVtYmVycy5tYXAoKG1lbWJlcikgPT4gbWV0YVRvVmFsdWUobWVtYmVyKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKG1ldGEudHlwZSA9PT0gJ25hdGl2ZWltYWdlJykge1xuICAgICAgICByZXR1cm4gdHlwZV91dGlsc18xLmRlc2VyaWFsaXplKG1ldGEudmFsdWUpO1xuICAgIH1cbiAgICBlbHNlIGlmIChtZXRhLnR5cGUgPT09ICdidWZmZXInKSB7XG4gICAgICAgIHJldHVybiBCdWZmZXIuZnJvbShtZXRhLnZhbHVlLmJ1ZmZlciwgbWV0YS52YWx1ZS5ieXRlT2Zmc2V0LCBtZXRhLnZhbHVlLmJ5dGVMZW5ndGgpO1xuICAgIH1cbiAgICBlbHNlIGlmIChtZXRhLnR5cGUgPT09ICdwcm9taXNlJykge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHsgdGhlbjogbWV0YVRvVmFsdWUobWV0YS50aGVuKSB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAobWV0YS50eXBlID09PSAnZXJyb3InKSB7XG4gICAgICAgIHJldHVybiBtZXRhVG9FcnJvcihtZXRhKTtcbiAgICB9XG4gICAgZWxzZSBpZiAobWV0YS50eXBlID09PSAnZXhjZXB0aW9uJykge1xuICAgICAgICBpZiAobWV0YS52YWx1ZS50eXBlID09PSAnZXJyb3InKSB7XG4gICAgICAgICAgICB0aHJvdyBtZXRhVG9FcnJvcihtZXRhLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCB2YWx1ZSB0eXBlIGluIGV4Y2VwdGlvbjogJHttZXRhLnZhbHVlLnR5cGV9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxldCByZXQ7XG4gICAgICAgIGlmICgnaWQnIGluIG1ldGEpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlZCA9IGdldENhY2hlZFJlbW90ZU9iamVjdChtZXRhLmlkKTtcbiAgICAgICAgICAgIGlmIChjYWNoZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gQSBzaGFkb3cgY2xhc3MgdG8gcmVwcmVzZW50IHRoZSByZW1vdGUgZnVuY3Rpb24gb2JqZWN0LlxuICAgICAgICBpZiAobWV0YS50eXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjb25zdCByZW1vdGVGdW5jdGlvbiA9IGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNvbW1hbmQ7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMgJiYgdGhpcy5jb25zdHJ1Y3RvciA9PT0gcmVtb3RlRnVuY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY29tbWFuZCA9IFwiUkVNT1RFX0JST1dTRVJfQ09OU1RSVUNUT1JcIiAvKiBCUk9XU0VSX0NPTlNUUlVDVE9SICovO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29tbWFuZCA9IFwiUkVNT1RFX0JST1dTRVJfRlVOQ1RJT05fQ0FMTFwiIC8qIEJST1dTRVJfRlVOQ1RJT05fQ0FMTCAqLztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgb2JqID0gZWxlY3Ryb25fMS5pcGNSZW5kZXJlci5zZW5kU3luYyhjb21tYW5kLCBjb250ZXh0SWQsIG1ldGEuaWQsIHdyYXBBcmdzKGFyZ3MpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWV0YVRvVmFsdWUob2JqKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXQgPSByZW1vdGVGdW5jdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldCA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIHNldE9iamVjdE1lbWJlcnMocmV0LCByZXQsIG1ldGEuaWQsIG1ldGEubWVtYmVycyk7XG4gICAgICAgIHNldE9iamVjdFByb3RvdHlwZShyZXQsIHJldCwgbWV0YS5pZCwgbWV0YS5wcm90byk7XG4gICAgICAgIGlmIChyZXQuY29uc3RydWN0b3IgJiYgcmV0LmNvbnN0cnVjdG9yW0lTX1JFTU9URV9QUk9YWV0pIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZXQuY29uc3RydWN0b3IsICduYW1lJywgeyB2YWx1ZTogbWV0YS5uYW1lIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRyYWNrIGRlbGVnYXRlIG9iaidzIGxpZmV0aW1lICYgdGVsbCBicm93c2VyIHRvIGNsZWFuIHVwIHdoZW4gb2JqZWN0IGlzIEdDZWQuXG4gICAgICAgIGVsZWN0cm9uSWRzLnNldChyZXQsIG1ldGEuaWQpO1xuICAgICAgICBzZXRDYWNoZWRSZW1vdGVPYmplY3QobWV0YS5pZCwgcmV0KTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG59XG5mdW5jdGlvbiBtZXRhVG9FcnJvcihtZXRhKSB7XG4gICAgY29uc3Qgb2JqID0gbWV0YS52YWx1ZTtcbiAgICBmb3IgKGNvbnN0IHsgbmFtZSwgdmFsdWUgfSBvZiBtZXRhLm1lbWJlcnMpIHtcbiAgICAgICAgb2JqW25hbWVdID0gbWV0YVRvVmFsdWUodmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gb2JqO1xufVxuZnVuY3Rpb24gaGFzU2VuZGVySWQoaW5wdXQpIHtcbiAgICByZXR1cm4gdHlwZW9mIGlucHV0LnNlbmRlcklkID09PSBcIm51bWJlclwiO1xufVxuZnVuY3Rpb24gaGFuZGxlTWVzc2FnZShjaGFubmVsLCBoYW5kbGVyKSB7XG4gICAgZWxlY3Ryb25fMS5pcGNSZW5kZXJlci5vbihjaGFubmVsLCAoZXZlbnQsIHBhc3NlZENvbnRleHRJZCwgaWQsIC4uLmFyZ3MpID0+IHtcbiAgICAgICAgaWYgKGhhc1NlbmRlcklkKGV2ZW50KSkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnNlbmRlcklkICE9PSAwICYmIGV2ZW50LnNlbmRlcklkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBNZXNzYWdlICR7Y2hhbm5lbH0gc2VudCBieSB1bmV4cGVjdGVkIFdlYkNvbnRlbnRzICgke2V2ZW50LnNlbmRlcklkfSlgKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhc3NlZENvbnRleHRJZCA9PT0gY29udGV4dElkKSB7XG4gICAgICAgICAgICBoYW5kbGVyKGlkLCAuLi5hcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIE1lc3NhZ2Ugc2VudCB0byBhbiB1bi1leGlzdCBjb250ZXh0LCBub3RpZnkgdGhlIGVycm9yIHRvIG1haW4gcHJvY2Vzcy5cbiAgICAgICAgICAgIGVsZWN0cm9uXzEuaXBjUmVuZGVyZXIuc2VuZChcIlJFTU9URV9CUk9XU0VSX1dST05HX0NPTlRFWFRfRVJST1JcIiAvKiBCUk9XU0VSX1dST05HX0NPTlRFWFRfRVJST1IgKi8sIGNvbnRleHRJZCwgcGFzc2VkQ29udGV4dElkLCBpZCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbmNvbnN0IGVuYWJsZVN0YWNrcyA9IHByb2Nlc3MuYXJndi5pbmNsdWRlcygnLS1lbmFibGUtYXBpLWZpbHRlcmluZy1sb2dnaW5nJyk7XG5mdW5jdGlvbiBnZXRDdXJyZW50U3RhY2soKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0geyBzdGFjazogdW5kZWZpbmVkIH07XG4gICAgaWYgKGVuYWJsZVN0YWNrcykge1xuICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0YXJnZXQsIGdldEN1cnJlbnRTdGFjayk7XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQuc3RhY2s7XG59XG4vLyBCcm93c2VyIGNhbGxzIGEgY2FsbGJhY2sgaW4gcmVuZGVyZXIuXG5oYW5kbGVNZXNzYWdlKFwiUkVNT1RFX1JFTkRFUkVSX0NBTExCQUNLXCIgLyogUkVOREVSRVJfQ0FMTEJBQ0sgKi8sIChpZCwgYXJncykgPT4ge1xuICAgIGNhbGxiYWNrc1JlZ2lzdHJ5LmFwcGx5KGlkLCBtZXRhVG9WYWx1ZShhcmdzKSk7XG59KTtcbi8vIEEgY2FsbGJhY2sgaW4gYnJvd3NlciBpcyByZWxlYXNlZC5cbmhhbmRsZU1lc3NhZ2UoXCJSRU1PVEVfUkVOREVSRVJfUkVMRUFTRV9DQUxMQkFDS1wiIC8qIFJFTkRFUkVSX1JFTEVBU0VfQ0FMTEJBQ0sgKi8sIChpZCkgPT4ge1xuICAgIGNhbGxiYWNrc1JlZ2lzdHJ5LnJlbW92ZShpZCk7XG59KTtcbmV4cG9ydHMucmVxdWlyZSA9IChtb2R1bGUpID0+IHtcbiAgICBjb25zdCBjb21tYW5kID0gXCJSRU1PVEVfQlJPV1NFUl9SRVFVSVJFXCIgLyogQlJPV1NFUl9SRVFVSVJFICovO1xuICAgIGNvbnN0IG1ldGEgPSBlbGVjdHJvbl8xLmlwY1JlbmRlcmVyLnNlbmRTeW5jKGNvbW1hbmQsIGNvbnRleHRJZCwgbW9kdWxlLCBnZXRDdXJyZW50U3RhY2soKSk7XG4gICAgcmV0dXJuIG1ldGFUb1ZhbHVlKG1ldGEpO1xufTtcbi8vIEFsaWFzIHRvIHJlbW90ZS5yZXF1aXJlKCdlbGVjdHJvbicpLnh4eC5cbmZ1bmN0aW9uIGdldEJ1aWx0aW4obW9kdWxlKSB7XG4gICAgY29uc3QgY29tbWFuZCA9IFwiUkVNT1RFX0JST1dTRVJfR0VUX0JVSUxUSU5cIiAvKiBCUk9XU0VSX0dFVF9CVUlMVElOICovO1xuICAgIGNvbnN0IG1ldGEgPSBlbGVjdHJvbl8xLmlwY1JlbmRlcmVyLnNlbmRTeW5jKGNvbW1hbmQsIGNvbnRleHRJZCwgbW9kdWxlLCBnZXRDdXJyZW50U3RhY2soKSk7XG4gICAgcmV0dXJuIG1ldGFUb1ZhbHVlKG1ldGEpO1xufVxuZXhwb3J0cy5nZXRCdWlsdGluID0gZ2V0QnVpbHRpbjtcbmZ1bmN0aW9uIGdldEN1cnJlbnRXaW5kb3coKSB7XG4gICAgY29uc3QgY29tbWFuZCA9IFwiUkVNT1RFX0JST1dTRVJfR0VUX0NVUlJFTlRfV0lORE9XXCIgLyogQlJPV1NFUl9HRVRfQ1VSUkVOVF9XSU5ET1cgKi87XG4gICAgY29uc3QgbWV0YSA9IGVsZWN0cm9uXzEuaXBjUmVuZGVyZXIuc2VuZFN5bmMoY29tbWFuZCwgY29udGV4dElkLCBnZXRDdXJyZW50U3RhY2soKSk7XG4gICAgcmV0dXJuIG1ldGFUb1ZhbHVlKG1ldGEpO1xufVxuZXhwb3J0cy5nZXRDdXJyZW50V2luZG93ID0gZ2V0Q3VycmVudFdpbmRvdztcbi8vIEdldCBjdXJyZW50IFdlYkNvbnRlbnRzIG9iamVjdC5cbmZ1bmN0aW9uIGdldEN1cnJlbnRXZWJDb250ZW50cygpIHtcbiAgICBjb25zdCBjb21tYW5kID0gXCJSRU1PVEVfQlJPV1NFUl9HRVRfQ1VSUkVOVF9XRUJfQ09OVEVOVFNcIiAvKiBCUk9XU0VSX0dFVF9DVVJSRU5UX1dFQl9DT05URU5UUyAqLztcbiAgICBjb25zdCBtZXRhID0gZWxlY3Ryb25fMS5pcGNSZW5kZXJlci5zZW5kU3luYyhjb21tYW5kLCBjb250ZXh0SWQsIGdldEN1cnJlbnRTdGFjaygpKTtcbiAgICByZXR1cm4gbWV0YVRvVmFsdWUobWV0YSk7XG59XG5leHBvcnRzLmdldEN1cnJlbnRXZWJDb250ZW50cyA9IGdldEN1cnJlbnRXZWJDb250ZW50cztcbi8vIEdldCBhIGdsb2JhbCBvYmplY3QgaW4gYnJvd3Nlci5cbmZ1bmN0aW9uIGdldEdsb2JhbChuYW1lKSB7XG4gICAgY29uc3QgY29tbWFuZCA9IFwiUkVNT1RFX0JST1dTRVJfR0VUX0dMT0JBTFwiIC8qIEJST1dTRVJfR0VUX0dMT0JBTCAqLztcbiAgICBjb25zdCBtZXRhID0gZWxlY3Ryb25fMS5pcGNSZW5kZXJlci5zZW5kU3luYyhjb21tYW5kLCBjb250ZXh0SWQsIG5hbWUsIGdldEN1cnJlbnRTdGFjaygpKTtcbiAgICByZXR1cm4gbWV0YVRvVmFsdWUobWV0YSk7XG59XG5leHBvcnRzLmdldEdsb2JhbCA9IGdldEdsb2JhbDtcbi8vIEdldCB0aGUgcHJvY2VzcyBvYmplY3QgaW4gYnJvd3Nlci5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAncHJvY2VzcycsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogKCkgPT4gZXhwb3J0cy5nZXRHbG9iYWwoJ3Byb2Nlc3MnKVxufSk7XG4vLyBDcmVhdGUgYSBmdW5jdGlvbiB0aGF0IHdpbGwgcmV0dXJuIHRoZSBzcGVjaWZpZWQgdmFsdWUgd2hlbiBjYWxsZWQgaW4gYnJvd3Nlci5cbmZ1bmN0aW9uIGNyZWF0ZUZ1bmN0aW9uV2l0aFJldHVyblZhbHVlKHJldHVyblZhbHVlKSB7XG4gICAgY29uc3QgZnVuYyA9ICgpID0+IHJldHVyblZhbHVlO1xuICAgIGlzUmV0dXJuVmFsdWUuYWRkKGZ1bmMpO1xuICAgIHJldHVybiBmdW5jO1xufVxuZXhwb3J0cy5jcmVhdGVGdW5jdGlvbldpdGhSZXR1cm5WYWx1ZSA9IGNyZWF0ZUZ1bmN0aW9uV2l0aFJldHVyblZhbHVlO1xuY29uc3QgYWRkQnVpbHRpblByb3BlcnR5ID0gKG5hbWUpID0+IHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBnZXQ6ICgpID0+IGV4cG9ydHMuZ2V0QnVpbHRpbihuYW1lKVxuICAgIH0pO1xufTtcbm1vZHVsZV9uYW1lc18xLmJyb3dzZXJNb2R1bGVOYW1lc1xuICAgIC5mb3JFYWNoKGFkZEJ1aWx0aW5Qcm9wZXJ0eSk7XG4iLCAiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfSk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fZXhwb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19leHBvcnRTdGFyKSB8fCBmdW5jdGlvbihtLCBleHBvcnRzKSB7XG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChleHBvcnRzLCBwKSkgX19jcmVhdGVCaW5kaW5nKGV4cG9ydHMsIG0sIHApO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmlmIChwcm9jZXNzLnR5cGUgPT09ICdicm93c2VyJylcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFwiQGVsZWN0cm9uL3JlbW90ZVwiIGNhbm5vdCBiZSByZXF1aXJlZCBpbiB0aGUgYnJvd3NlciBwcm9jZXNzLiBJbnN0ZWFkIHJlcXVpcmUoXCJAZWxlY3Ryb24vcmVtb3RlL21haW5cIikuYCk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vcmVtb3RlXCIpLCBleHBvcnRzKTtcbiIsICJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4uL2Rpc3Qvc3JjL3JlbmRlcmVyJylcbiIsICJpbXBvcnQgeyBQbHVnaW4sIE5vdGljZSwgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCAqIGFzIGZzIGZyb20gXCJmc1wiO1xuaW1wb3J0ICogYXMgZG90ZW52IGZyb20gXCJkb3RlbnZcIjtcbmltcG9ydCAqIGFzIHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7XG5cdE15VG9kb1NldHRpbmdUYWIsXG5cdERFRkFVTFRfU0VUVElOR1MsXG5cdE15VG9kb1NldHRpbmdzLFxufSBmcm9tIFwic3JjL3NldHRpbmdcIjtcbmltcG9ydCB7XG5cdFZJRVdfVFlQRV9UT0RPX1NJREVCQVIsXG5cdFRhc2tTaWRlYmFyVmlldyxcbn0gZnJvbSBcInNyYy9yaWdodC1zaWRlYmFyLXZpZXdcIjtcbmltcG9ydCB7XG5cdGZldGNoVGFza3MsXG5cdGNyZWF0ZVRhc2ssXG5cdHVwZGF0ZVRhc2ssXG5cdGZldGNoVGFza0xpc3RzLFxuXHRkZWxldGVUYXNrLFxufSBmcm9tIFwic3JjL2FwaVwiO1xuaW1wb3J0IHsgQXV0aE1hbmFnZXIgfSBmcm9tIFwic3JjL2F1dGhcIjtcbmltcG9ydCB7IFRhc2tUaXRsZU1vZGFsIH0gZnJvbSBcInNyYy90YXNrLXRpdGxlLW1vZGFsXCI7XG5pbXBvcnQgeyBHZW5lcmljU2VsZWN0TW9kYWwgfSBmcm9tIFwic3JjL3NlbGVjdC1tb2RhbFwiO1xuXG4vKipcbiAqIEludGVyZmFjZSBmb3IgdGhlIHRhc2sgY2FjaGUuXG4gKi9cbmludGVyZmFjZSBUYXNrQ2FjaGUge1xuXHR0YXNrczogQXJyYXk8W3N0cmluZywgeyB0aXRsZTogc3RyaW5nOyBzdGF0dXM6IHN0cmluZzsgaWQ6IHN0cmluZyB9XT47XG5cdGxhc3RVcGRhdGVkOiBudW1iZXI7XG59XG5cbi8qKlxuICogSW50ZXJmYWNlIGZvciB0YXNrIGl0ZW0uXG4gKi9cbmludGVyZmFjZSBUYXNrSXRlbSB7XG5cdHRpdGxlOiBzdHJpbmc7XG5cdHN0YXR1czogc3RyaW5nO1xuXHRpZDogc3RyaW5nO1xufVxuXG4vKipcbiAqICBJbnRlcmZhY2UgZm9yIHRhc2sgbGlzdHMuXG4gKi9cbmludGVyZmFjZSBUYXNrTGlzdCB7XG5cdHRpdGxlOiBzdHJpbmc7XG5cdGlkOiBzdHJpbmc7XG59XG5cbi8qKlxuICogTWFpbiBwbHVnaW4gY2xhc3MgZm9yIHN5bmNpbmcgdGFza3MgYmV0d2VlbiBPYnNpZGlhbiBhbmQgTWljcm9zb2Z0IFRvXHUyMDExRG8uXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRhc2tTeW5jZXJQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuXHRzZXR0aW5nczogTXlUb2RvU2V0dGluZ3M7XG5cdHNpZGViYXJWaWV3OiBUYXNrU2lkZWJhclZpZXcgfCBudWxsID0gbnVsbDtcblx0dG9rZW5GaWxlUGF0aDogc3RyaW5nO1xuXHRhdXRoTWFuYWdlcjogQXV0aE1hbmFnZXI7XG5cdHRhc2tDYWNoZTogVGFza0NhY2hlIHwgbnVsbCA9IG51bGw7XG5cblx0LyoqXG5cdCAqIERpc3BsYXlzIGEgbm90aWZpY2F0aW9uIHRvIHRoZSB1c2VyLlxuXHQgKiBAcGFyYW0gbWVzc2FnZSAtIFRoZSBtZXNzYWdlIHRvIGRpc3BsYXkuXG5cdCAqIEBwYXJhbSB0eXBlIC0gVGhlIHR5cGUgb2Ygbm90aWZpY2F0aW9uIChcImVycm9yXCIsIFwid2FybmluZ1wiLCBcInN1Y2Nlc3NcIiwgXCJpbmZvXCIpLlxuXHQgKi9cblx0cHJpdmF0ZSBub3RpZnkoXG5cdFx0bWVzc2FnZTogc3RyaW5nLFxuXHRcdHR5cGU6IFwiZXJyb3JcIiB8IFwid2FybmluZ1wiIHwgXCJzdWNjZXNzXCIgfCBcImluZm9cIiA9IFwiaW5mb1wiLFxuXHQpOiB2b2lkIHtcblx0XHRsZXQgcHJlZml4ID0gXCJcIjtcblx0XHRzd2l0Y2ggKHR5cGUpIHtcblx0XHRcdGNhc2UgXCJlcnJvclwiOlxuXHRcdFx0XHRwcmVmaXggPSBcIlx1Mjc0QyBcIjtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwid2FybmluZ1wiOlxuXHRcdFx0XHRwcmVmaXggPSBcIlx1MjZBMFx1RkUwRiBcIjtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwic3VjY2Vzc1wiOlxuXHRcdFx0XHRwcmVmaXggPSBcIlx1MjcwNSBcIjtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHQvLyBGb3IgaW5mbyB3ZSBsZWF2ZSBpdCBhcyBpcy5cblx0XHR9XG5cdFx0bmV3IE5vdGljZShwcmVmaXggKyBtZXNzYWdlKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDYWxsZWQgd2hlbiB0aGUgcGx1Z2luIGlzIGFjdGl2YXRlZC5cblx0ICogTG9hZHMgZW52aXJvbm1lbnQgdmFyaWFibGVzLCBzZXR0aW5ncywgcmVnaXN0ZXJzIHZpZXdzIGFuZCBjb21tYW5kcywgYW5kIGluaXRpYWxpemVzIGF1dGhlbnRpY2F0aW9uLlxuXHQgKi9cblx0YXN5bmMgb25sb2FkKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdC8vIDAuIExvYWQgZW52aXJvbm1lbnQgdmFyaWFibGVzIGZyb20gdGhlIHBsdWdpbidzIC5lbnYgZmlsZS5cblx0XHRjb25zdCBiYXNlUGF0aCA9ICh0aGlzLmFwcC52YXVsdC5hZGFwdGVyIGFzIGFueSkuYmFzZVBhdGg7XG5cdFx0Y29uc3QgcGx1Z2luUGF0aCA9IHBhdGguam9pbihcblx0XHRcdGJhc2VQYXRoLFxuXHRcdFx0XCIub2JzaWRpYW4vcGx1Z2lucy9zeW5jLW9ic2lkaWFuLXRvZG8tcGx1Z2luXCIsXG5cdFx0KTtcblx0XHRkb3RlbnYuY29uZmlnKHsgcGF0aDogcGF0aC5qb2luKHBsdWdpblBhdGgsIFwiLmVudlwiKSwgb3ZlcnJpZGU6IHRydWUgfSk7XG5cblx0XHQvLyAxLiBMb2FkIHN0b3JlZCBzZXR0aW5ncyAob3IgZGVmYXVsdCBzZXR0aW5ncyBpZiBub25lIGV4aXN0KS5cblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG5cdFx0Ly8gMi4gQWRkIHRoZSBzZXR0aW5ncyB0YWIuXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBNeVRvZG9TZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG5cblx0XHQvLyAzLiBSZWdpc3RlciB0aGUgc2lkZWJhciB2aWV3LlxuXHRcdHRoaXMucmVnaXN0ZXJWaWV3KFZJRVdfVFlQRV9UT0RPX1NJREVCQVIsIChsZWFmKSA9PiB7XG5cdFx0XHRjb25zdCB2aWV3ID0gbmV3IFRhc2tTaWRlYmFyVmlldyhsZWFmLCB0aGlzKTtcblx0XHRcdHRoaXMuc2lkZWJhclZpZXcgPSB2aWV3O1xuXHRcdFx0cmV0dXJuIHZpZXc7XG5cdFx0fSk7XG5cblx0XHQvLyA0LiBJbml0aWFsaXplIGNvcmUgY29tcG9uZW50cyAoTVNBTCBjbGllbnQsIGNvbW1hbmRzLCBldGMuKS5cblx0XHR0aGlzLmluaXRpYWxpemVDb21tYW5kKCk7XG5cblx0XHQvLyA1LiBJbml0aWFsaXplIHRoZSBNU0FMIGNsaWVudFxuXHRcdHRoaXMudG9rZW5GaWxlUGF0aCA9IGAke3BsdWdpblBhdGh9L3Rva2VuX2NhY2hlLmpzb25gO1xuXHRcdGlmICh0aGlzLnNldHRpbmdzLmNsaWVudElkICYmIHRoaXMuc2V0dGluZ3MuY2xpZW50U2VjcmV0KSB7XG5cdFx0XHR0aGlzLmF1dGhNYW5hZ2VyID0gbmV3IEF1dGhNYW5hZ2VyKFxuXHRcdFx0XHR0aGlzLnNldHRpbmdzLmNsaWVudElkLFxuXHRcdFx0XHR0aGlzLnNldHRpbmdzLmNsaWVudFNlY3JldCxcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5yZWRpcmVjdFVybCxcblx0XHRcdFx0dGhpcy50b2tlbkZpbGVQYXRoLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHQvLyA2LiBTZXQgdXAgdGhlIHRva2VuIGNhY2hlLlxuXHRcdGlmIChmcy5leGlzdHNTeW5jKHRoaXMudG9rZW5GaWxlUGF0aCkpIHtcblx0XHRcdGNvbnN0IGNhY2hlRGF0YSA9IGZzLnJlYWRGaWxlU3luYyh0aGlzLnRva2VuRmlsZVBhdGgsIFwidXRmOFwiKTtcblx0XHRcdHRoaXMuYXV0aE1hbmFnZXIuY2NhLmdldFRva2VuQ2FjaGUoKS5kZXNlcmlhbGl6ZShjYWNoZURhdGEpO1xuXHRcdFx0Y29uc29sZS5sb2coXCJUb2tlbiBjYWNoZSBsb2FkZWQgZnJvbSBmaWxlLlwiKTtcblx0XHR9XG5cblx0XHQvLyA3LiBSZWdpc3RlciBzdHlsZXNcblx0XHQvLyB0aGlzLnJlZ2lzdGVyU3R5bGVzKHBsdWdpblBhdGgpO1xuXHRcdHRoaXMuaW5qZWN0U3R5bGVzKCk7XG5cdFx0dGhpcy5ub3RpZnkoXCJNaWNyb3NvZnQgVG8tRG8gUGx1Z2luIExvYWRlZCFcIiwgXCJpbmZvXCIpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEluaXRpYWxpemVzIHRoZSBNU0FMIGNsaWVudCBhbmQgcmVnaXN0ZXJzIGNvbW1hbmRzL3JpYmJvbiBpY29ucy5cblx0ICovXG5cdGluaXRpYWxpemVDb21tYW5kKCk6IHZvaWQge1xuXHRcdC8vIFJlZ2lzdGVyIGNvbW1hbmQgdG8gb3BlbiB0aGUgc2lkZWJhci5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwib3Blbi1taWNyb3NvZnQtdG9kby1zaWRlYmFyXCIsXG5cdFx0XHRuYW1lOiBcIk9wZW4gTWljcm9zb2Z0IFRvLURvIFNpZGViYXJcIixcblx0XHRcdGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuYWN0aXZhdGVTaWRlYmFyKCk7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0Ly8gUmVnaXN0ZXIgaW50ZXJhY3RpdmUgbG9naW4gY29tbWFuZC5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwibG9naW4tbWljcm9zb2Z0LXRvZG9cIixcblx0XHRcdG5hbWU6IFwiTG9naW4gdG8gTWljcm9zb2Z0IFRvLURvIChJbnRlcmFjdGl2ZSlcIixcblx0XHRcdGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0dGhpcy5ub3RpZnkoXCJMb2dnaW5nIGluLi4uXCIpO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMuYXV0aE1hbmFnZXIuZ2V0QWNjZXNzVG9rZW4oKTtcblx0XHRcdFx0XHR0aGlzLm5vdGlmeShcIkxvZ2dlZCBpbiBzdWNjZXNzZnVsbHkhXCIsIFwic3VjY2Vzc1wiKTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiQXV0aGVudGljYXRpb24gZXJyb3I6XCIsIGVycm9yKTtcblx0XHRcdFx0XHR0aGlzLm5vdGlmeShcblx0XHRcdFx0XHRcdFwiRXJyb3IgbG9naW5pbmcgaW4hIENoZWNrIHRoZSBjb25zb2xlIGZvciBkZXRhaWxzLlwiLFxuXHRcdFx0XHRcdFx0XCJlcnJvclwiLFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHQvLyBSZWdpc3RlciB0b2tlbiByZWZyZXNoIGNvbW1hbmQuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcInJlZnJlc2gtbWljcm9zb2Z0LXRvZG8tdG9rZW5cIixcblx0XHRcdG5hbWU6IFwiUmVmcmVzaCBNaWNyb3NvZnQgVG8tRG8gVG9rZW5cIixcblx0XHRcdGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Y29uc3QgdG9rZW5EYXRhID1cblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXV0aE1hbmFnZXIucmVmcmVzaEFjY2Vzc1Rva2VuV2l0aENDQSgpO1xuXHRcdFx0XHRcdHRoaXMubm90aWZ5KFwiVG9rZW4gcmVmcmVzaGVkIHN1Y2Nlc3NmdWxseSFcIiwgXCJzdWNjZXNzXCIpO1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiTmV3IEFjY2VzcyBUb2tlbjpcIiwgdG9rZW5EYXRhLmFjY2Vzc1Rva2VuKTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3IgcmVmcmVzaGluZyB0b2tlbjpcIiwgZXJyb3IpO1xuXHRcdFx0XHRcdHRoaXMubm90aWZ5KFxuXHRcdFx0XHRcdFx0XCJFcnJvciByZWZyZXNoaW5nIHRva2VuLiBDaGVjayB0aGUgY29uc29sZSBmb3IgZGV0YWlscy5cIixcblx0XHRcdFx0XHRcdFwiZXJyb3JcIixcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0Ly8gUmVnaXN0ZXIgY29tbWFuZCB0byBmZXRjaCB0YXNrIGZyb20gc2VsZWN0ZWQgbGlzdC5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwiZ2V0LXRhc2tzLWZyb20tc2VsZWN0ZWQtbGlzdFwiLFxuXHRcdFx0bmFtZTogXCJHZXQgVGFza3MgZnJvbSBTZWxlY3RlZCBMaXN0XCIsXG5cdFx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHRoaXMubm90aWZ5KFwiRmV0Y2hpbmcgdGFza3MuLi5cIik7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5nZXRUYXNrc0Zyb21TZWxlY3RlZExpc3QoKTtcblx0XHRcdFx0XHR0aGlzLm5vdGlmeShcIlRhc2tzIGZldGNoZWQgc3VjY2Vzc2Z1bGx5IVwiLCBcInN1Y2Nlc3NcIik7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihcblx0XHRcdFx0XHRcdFwiRXJyb3IgZmV0Y2hpbmcgdGFza3MgZnJvbSBzZWxlY3RlZCBsaXN0OlwiLFxuXHRcdFx0XHRcdFx0ZXJyb3IsXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR0aGlzLm5vdGlmeShcblx0XHRcdFx0XHRcdFwiRXJyb3IgZmV0Y2hpbmcgdGFza3MuIENoZWNrIHRoZSBjb25zb2xlIGZvciBkZXRhaWxzLlwiLFxuXHRcdFx0XHRcdFx0XCJlcnJvclwiLFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHQvLyBSZWdpc3RlciBjb21tYW5kIHRvIHN5bmMgdGFzayBsaXN0cyBmb3IgdGhlIGN1cnJlbnQgbm90ZS5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwicHVzaC1hbGwtdGFza3MtZnJvbS1ub3RlXCIsXG5cdFx0XHRuYW1lOiBcIlB1c2ggQWxsIFRhc2tzIGZyb20gTm90ZSB0byBNaWNyb3NvZnQgVG8tRG9cIixcblx0XHRcdGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0dGhpcy5ub3RpZnkoXCJTeW5jaW5nIHRhc2tzIHRvIE1pY3Jvc29mdCBUby1Eby4uLlwiKTtcblx0XHRcdFx0XHRjb25zdCB0YXNrc0NvdW50ID0gYXdhaXQgdGhpcy5wdXNoVGFza3NGcm9tTm90ZSgpO1xuXHRcdFx0XHRcdHRoaXMubm90aWZ5KFxuXHRcdFx0XHRcdFx0YFRhc2tzIHN5bmNlZCBzdWNjZXNzZnVsbHkhICR7dGFza3NDb3VudH0gbmV3IHRhc2tzIGFkZGVkLmAsXG5cdFx0XHRcdFx0XHRcInN1Y2Nlc3NcIixcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucmVmcmVzaFZpZXdBbmRDYWNoZSgpO1xuXHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciBwdXNoaW5nIHRhc2tzOlwiLCBlcnJvcik7XG5cdFx0XHRcdFx0dGhpcy5ub3RpZnkoXG5cdFx0XHRcdFx0XHRcIkVycm9yIHB1c2hpbmcgdGFza3MuIENoZWNrIHRoZSBjb25zb2xlIGZvciBkZXRhaWxzLlwiLFxuXHRcdFx0XHRcdFx0XCJlcnJvclwiLFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwicHVzaC1vbmUtdGFza1wiLFxuXHRcdFx0bmFtZTogXCJDcmVhdGUgYW5kIHB1c2ggVGFza1wiLFxuXHRcdFx0Y2FsbGJhY2s6IGFzeW5jICgpID0+IHtcblx0XHRcdFx0bmV3IFRhc2tUaXRsZU1vZGFsKHRoaXMuYXBwLCBhc3luYyAodGFza1RpdGxlOiBzdHJpbmcpID0+IHtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0dGhpcy5ub3RpZnkoXCJQdXNoaW5nIHRhc2tzIHRvIE1pY3Jvc29mdCBUby1Eby4uLlwiKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucHVzaE9uZVRhc2sodGFza1RpdGxlKTtcblx0XHRcdFx0XHRcdHRoaXMubm90aWZ5KGBUYXNrcyBwdXNoZWQgc3VjY2Vzc2Z1bGx5IWAsIFwic3VjY2Vzc1wiKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucmVmcmVzaFZpZXdBbmRDYWNoZSgpO1xuXHRcdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3IgcHVzaGluZyB0YXNrczpcIiwgZXJyb3IpO1xuXHRcdFx0XHRcdFx0dGhpcy5ub3RpZnkoXG5cdFx0XHRcdFx0XHRcdFwiRXJyb3IgcHVzaGluZyB0YXNrcy4gQ2hlY2sgdGhlIGNvbnNvbGUgZm9yIGRldGFpbHMuXCIsXG5cdFx0XHRcdFx0XHRcdFwiZXJyb3JcIixcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KS5vcGVuKCk7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcInNob3ctbm90LXN0YXJ0ZWQtdGFza3NcIixcblx0XHRcdG5hbWU6IFwiU2hvdyBUYXNrcyBMaXN0XCIsXG5cdFx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMub3BlblRhc2tDb21wbGV0ZU1vZGFsKCk7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIGNvbXBsZXRpbmcgdGFzazpcIiwgZXJyb3IpO1xuXHRcdFx0XHRcdHRoaXMubm90aWZ5KFxuXHRcdFx0XHRcdFx0XCJFcnJvciBjb21wbGV0aW5nIHRhc2suIENoZWNrIHRoZSBjb25zb2xlIGZvciBkZXRhaWxzLlwiLFxuXHRcdFx0XHRcdFx0XCJlcnJvclwiLFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwic2VsZWN0LXRhc2stbGlzdFwiLFxuXHRcdFx0bmFtZTogXCJTZWxlY3QgVGFzayBMaXN0XCIsXG5cdFx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHRoaXMubm90aWZ5KFwiU2VsZWN0aW5nIHRhc2sgbGlzdC4uLlwiKTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLm9wZW5UYXNrTGlzdHNNb2RhbCgpO1xuXHRcdFx0XHRcdHRoaXMubm90aWZ5KFwiVGFzayBsaXN0IHNlbGVjdGVkIHN1Y2Nlc3NmdWxseSFcIiwgXCJzdWNjZXNzXCIpO1xuXHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciBzZWxlY3RpbmcgdGFzayBsaXN0OlwiLCBlcnJvcik7XG5cdFx0XHRcdFx0dGhpcy5ub3RpZnkoXG5cdFx0XHRcdFx0XHRcIkVycm9yIHNlbGVjdGluZyB0YXNrIGxpc3QuIENoZWNrIHRoZSBjb25zb2xlIGZvciBkZXRhaWxzLlwiLFxuXHRcdFx0XHRcdFx0XCJlcnJvclwiLFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwib3JnYW5pemUtdGFza3NcIixcblx0XHRcdG5hbWU6IFwiT3JnYW5pemUgVGFza3MgZnJvbSBBbGwgTm90ZXNcIixcblx0XHRcdGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5nYXRoZXJUYXNrcygpO1xuXHRcdFx0XHRcdHRoaXMubm90aWZ5KFwiVGFza3Mgb3JnYW5pemVkIHN1Y2Nlc3NmdWxseSFcIiwgXCJzdWNjZXNzXCIpO1xuXHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciBvcmdhbml6aW5nIHRhc2tzOlwiLCBlcnJvcik7XG5cdFx0XHRcdFx0dGhpcy5ub3RpZnkoXG5cdFx0XHRcdFx0XHRcIkVycm9yIG9yZ2FuaXppbmcgdGFza3MuIENoZWNrIHRoZSBjb25zb2xlIGZvciBkZXRhaWxzLlwiLFxuXHRcdFx0XHRcdFx0XCJlcnJvclwiLFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwiZGVsZXRlLWNvbXBsZXRlZC10YXNrc1wiLFxuXHRcdFx0bmFtZTogXCJEZWxldGUgQ29tcGxldGVkIFRhc2tzXCIsXG5cdFx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHRoaXMubm90aWZ5KFwiRGVsZXRpbmcgY29tcGxldGVkIHRhc2tzLi4uXCIpO1xuXHRcdFx0XHRcdGNvbnN0IGRlbGV0ZWRDb3VudCA9IGF3YWl0IHRoaXMuZGVsZXRlQWxsQ29tcGxldGVkVGFza3MoKTtcblx0XHRcdFx0XHR0aGlzLm5vdGlmeShcblx0XHRcdFx0XHRcdGAke2RlbGV0ZWRDb3VudH0gY29tcGxldGVkIHRhc2tzIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5IWAsXG5cdFx0XHRcdFx0XHRcInN1Y2Nlc3NcIixcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkZWxldGluZyBjb21wbGV0ZWQgdGFza3M6XCIsIGVycm9yKTtcblx0XHRcdFx0XHR0aGlzLm5vdGlmeShcblx0XHRcdFx0XHRcdFwiRXJyb3IgZGVsZXRpbmcgdGFza3MuIENoZWNrIHRoZSBjb25zb2xlIGZvciBkZXRhaWxzLlwiLFxuXHRcdFx0XHRcdFx0XCJlcnJvclwiLFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwidGVzdGluZ1wiLFxuXHRcdFx0bmFtZTogXCJUZXN0aW5nXCIsXG5cdFx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiVGVzdGluZ1wiKTtcblx0XHRcdFx0XHR0aGlzLm5vdGlmeShcIlRlc3RpbmcuLi5cIiwgXCJzdWNjZXNzXCIpO1xuXHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciB0ZXN0aW5nOlwiLCBlcnJvcik7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogSW5qZWN0cyBjdXN0b20gQ1NTIHN0eWxlcyBpbnRvIHRoZSBkb2N1bWVudC5cblx0ICovXG5cdGluamVjdFN0eWxlcygpIHtcblx0XHRjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcblx0XHRzdHlsZS50ZXh0Q29udGVudCA9IGBcblx0XHQudGFzay1saW5lIHtcblx0XHRcdGRpc3BsYXk6IGZsZXg7XG5cdFx0XHRhbGlnbi1pdGVtczogY2VudGVyO1xuXHRcdFx0Z2FwOiA4cHg7XG5cdFx0XHRwYWRkaW5nOiAycHggMDtcblx0XHR9XG5cblx0XHQudGFzay1saW5lIGlucHV0W3R5cGU9XCJjaGVja2JveFwiXSB7XG5cdFx0XHRtYXJnaW46IDA7XG5cdFx0XHR0cmFuc2Zvcm06IHNjYWxlKDEuMSk7XG5cdFx0fVxuXG5cdFx0LnRhc2stbGluZSBzcGFuIHtcblx0XHRcdGZvbnQtc2l6ZTogMTRweDtcblx0XHR9XG5cdGA7XG5cdFx0ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XG5cdH1cblxuXHQvKipcblx0ICogQWN0aXZhdGVzIHRoZSBzaWRlYmFyIHZpZXcuXG5cdCAqL1xuXHRhc3luYyBhY3RpdmF0ZVNpZGViYXIoKSB7XG5cdFx0Y29uc3QgcmlnaHRMZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSk7XG5cdFx0aWYgKCFyaWdodExlYWYpIHtcblx0XHRcdGNvbnNvbGUud2FybihcIk5vIHJpZ2h0IGxlYWYgYXZhaWxhYmxlLlwiKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRhd2FpdCByaWdodExlYWYuc2V0Vmlld1N0YXRlKHtcblx0XHRcdHR5cGU6IFZJRVdfVFlQRV9UT0RPX1NJREVCQVIsXG5cdFx0XHRhY3RpdmU6IHRydWUsXG5cdFx0fSk7XG5cblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihyaWdodExlYWYpO1xuXHR9XG5cdC8qKlxuXHQgKiBMb2FkcyBwbHVnaW4gc2V0dGluZ3MgZnJvbSB0aGUgT2JzaWRpYW4gdmF1bHQuXG5cdCAqL1xuXHRhc3luYyBsb2FkU2V0dGluZ3MoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oXG5cdFx0XHR7fSxcblx0XHRcdERFRkFVTFRfU0VUVElOR1MsXG5cdFx0XHRhd2FpdCB0aGlzLmxvYWREYXRhKCksXG5cdFx0KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBTYXZlcyBwbHVnaW4gc2V0dGluZ3MgdG8gdGhlIE9ic2lkaWFuIHZhdWx0LlxuXHQgKi9cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdH1cblxuXHRhc3luYyBnZXRBY2Nlc3NUb2tlbigpOiBQcm9taXNlPHN0cmluZz4ge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCB0b2tlbkRhdGEgPSBhd2FpdCB0aGlzLmF1dGhNYW5hZ2VyLmdldFRva2VuKCk7XG5cdFx0XHRyZXR1cm4gdG9rZW5EYXRhLmFjY2Vzc1Rva2VuO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgYWNjZXNzIHRva2VuOlwiLCBlcnJvcik7XG5cdFx0XHR0aHJvdyBlcnJvcjtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogRmV0Y2hlcyBhdmFpbGFibGUgTWljcm9zb2Z0IFRvLURvIHRhc2sgbGlzdHMgYW5kIHVwZGF0ZXMgdGhlIHBsdWdpbiBzZXR0aW5ncy5cblx0ICovXG5cdGFzeW5jIGxvYWRBdmFpbGFibGVUYXNrTGlzdHMoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0dGhpcy5ub3RpZnkoXCJMb2FkaW5nIHRhc2sgbGlzdHMuLi5cIik7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGFjY2Vzc1Rva2VuID0gYXdhaXQgdGhpcy5nZXRBY2Nlc3NUb2tlbigpO1xuXHRcdFx0Y29uc3QgbGlzdEFycmF5ID0gYXdhaXQgZmV0Y2hUYXNrTGlzdHMoYWNjZXNzVG9rZW4pO1xuXHRcdFx0Y29uc29sZS5sb2coXCJGZXRjaGVkIFRhc2sgTGlzdHM6XCIsIGxpc3RBcnJheSk7XG5cblx0XHRcdHRoaXMuc2V0dGluZ3MudGFza0xpc3RzID0gbGlzdEFycmF5Lm1hcCgobGlzdCkgPT4gKHtcblx0XHRcdFx0aWQ6IGxpc3QuaWQsXG5cdFx0XHRcdHRpdGxlOiBsaXN0LnRpdGxlLFxuXHRcdFx0fSkpO1xuXG5cdFx0XHR0aGlzLm5vdGlmeShcIlRhc2sgbGlzdHMgbG9hZGVkIHN1Y2Nlc3NmdWxseSFcIiwgXCJzdWNjZXNzXCIpO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIGxvYWRpbmcgdGFzayBsaXN0czpcIiwgZXJyKTtcblx0XHRcdHRoaXMubm90aWZ5KFxuXHRcdFx0XHRcIkVycm9yIGxvYWRpbmcgdGFzayBsaXN0cy4gQ2hlY2sgdGhlIGNvbnNvbGUgZm9yIGRldGFpbHMuXCIsXG5cdFx0XHRcdFwiZXJyb3JcIixcblx0XHRcdCk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEdldCB0YXNrIGxpc3RzIHVzaW5nIGFjY2VzcyB0b2tlbiB3aXRoIGZldGNoVGFza0xpc3RzIGFwaSBmdW5jdGlvbi5cblx0ICogQHJldHVybnMgQSBUYXNrTGlzdCBpbnRlcmZhY2Ugd2l0aCBmZXRjaGVkIHRhc2sgbGlzdHMuXG5cdCAqICovXG5cdGFzeW5jIGdldFRhc2tMaXN0cygpOiBQcm9taXNlPFRhc2tMaXN0W10+IHtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgYWNjZXNzVG9rZW4gPSBhd2FpdCB0aGlzLmdldEFjY2Vzc1Rva2VuKCk7XG5cdFx0XHRjb25zdCB0YXNrTGlzdHMgPSBhd2FpdCBmZXRjaFRhc2tMaXN0cyhhY2Nlc3NUb2tlbik7XG5cdFx0XHRyZXR1cm4gdGFza0xpc3RzO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgdGFzayBsaXN0czpcIiwgZXJyb3IpO1xuXHRcdFx0dGhyb3cgZXJyb3I7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEZldGNoZXMgdGFza3MgZnJvbSB0aGUgc2VsZWN0ZWQgTWljcm9zb2Z0IFRvXHUyMDExRG8gbGlzdC5cblx0ICogQHJldHVybnMgQSBtYXAgb2YgdGFzayB0aXRsZSB0byBhbiBvYmplY3QgY29udGFpbmluZyB0YXNrIGRldGFpbHMuXG5cdCAqL1xuXHRhc3luYyBnZXRUYXNrc0Zyb21TZWxlY3RlZExpc3QoKTogUHJvbWlzZTxcblx0XHRNYXA8c3RyaW5nLCB7IHRpdGxlOiBzdHJpbmc7IHN0YXR1czogc3RyaW5nOyBpZDogc3RyaW5nIH0+XG5cdD4ge1xuXHRcdGlmICghdGhpcy5zZXR0aW5ncy5zZWxlY3RlZFRhc2tMaXN0SWQpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcblx0XHRcdFx0XCJObyB0YXNrIGxpc3Qgc2VsZWN0ZWQuIFBsZWFzZSBjaG9vc2Ugb25lIGluIHNldHRpbmdzLlwiLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRpZiAodGhpcy50YXNrQ2FjaGUgJiYgdGhpcy50YXNrQ2FjaGUudGFza3MpIHtcblx0XHRcdGNvbnNvbGUubG9nKFwiVXNpbmcgY2FjaGVkIHRhc2tzOlwiLCB0aGlzLnRhc2tDYWNoZS50YXNrcyk7XG5cdFx0XHRyZXR1cm4gbmV3IE1hcCh0aGlzLnRhc2tDYWNoZS50YXNrcyk7XG5cdFx0fVxuXHRcdHRyeSB7XG5cdFx0XHRyZXR1cm4gYXdhaXQgdGhpcy5yZWZyZXNoVGFza0NhY2hlKCk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyB0YXNrczpcIiwgZXJyb3IpO1xuXHRcdFx0dGhyb3cgZXJyb3I7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFB1c2hlcyB0YXNrcyBmcm9tIHRoZSBhY3RpdmUgbm90ZSB0byBNaWNyb3NvZnQgVG9cdTIwMTFEby5cblx0ICogQHJldHVybnMgVGhlIG51bWJlciBvZiBuZXcgdGFza3MgY3JlYXRlZC5cblx0ICovXG5cdGFzeW5jIHB1c2hUYXNrc0Zyb21Ob3RlKCk6IFByb21pc2U8bnVtYmVyPiB7XG5cdFx0Ly8gRW5zdXJlIGEgdGFzayBsaXN0IGlzIHNlbGVjdGVkLlxuXHRcdGlmICghdGhpcy5zZXR0aW5ncy5zZWxlY3RlZFRhc2tMaXN0SWQpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcblx0XHRcdFx0XCJObyB0YXNrIGxpc3Qgc2VsZWN0ZWQuIFBsZWFzZSBjaG9vc2Ugb25lIGluIHNldHRpbmdzLlwiLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHQvLyBHZXQgdGhlIGFjdGl2ZSBub3RlLlxuXHRcdGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuXHRcdGlmICghYWN0aXZlRmlsZSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiTm8gYWN0aXZlIGZpbGUgZm91bmQuXCIpO1xuXHRcdH1cblxuXHRcdC8vIFJlYWQgbm90ZSBjb250ZW50IGFuZCBleHRyYWN0IHRhc2tzIHVzaW5nIGEgcmVnZXguXG5cdFx0Y29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGFjdGl2ZUZpbGUpO1xuXHRcdGNvbnN0IHRhc2tSZWdleCA9IC9eLVxccypcXFsoIHx4KVxcXVxccysoLispJC9nbTtcblx0XHRjb25zdCBub3RlVGFza3M6IEFycmF5PHsgdGl0bGU6IHN0cmluZzsgY29tcGxldGU6IGJvb2xlYW4gfT4gPSBbXTtcblx0XHRsZXQgbWF0Y2g7XG5cdFx0d2hpbGUgKChtYXRjaCA9IHRhc2tSZWdleC5leGVjKGZpbGVDb250ZW50KSkgIT09IG51bGwpIHtcblx0XHRcdGNvbnN0IGNvbXBsZXRlID0gbWF0Y2hbMV0gPT09IFwieFwiO1xuXHRcdFx0Y29uc3QgdGl0bGUgPSBtYXRjaFsyXS50cmltKCk7XG5cdFx0XHRub3RlVGFza3MucHVzaCh7IHRpdGxlLCBjb21wbGV0ZSB9KTtcblx0XHR9XG5cdFx0aWYgKG5vdGVUYXNrcy5sZW5ndGggPT09IDApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIk5vIHRhc2tzIGZvdW5kIGluIHRoZSBhY3RpdmUgbm90ZS5cIik7XG5cdFx0fVxuXG5cdFx0dHJ5IHtcblx0XHRcdC8vIEdldCBhIGZyZXNoIGFjY2VzcyB0b2tlbi5cblx0XHRcdGNvbnN0IGFjY2Vzc1Rva2VuID0gYXdhaXQgdGhpcy5nZXRBY2Nlc3NUb2tlbigpO1xuXHRcdFx0Ly8gRmV0Y2ggZXhpc3RpbmcgdGFza3MgZnJvbSBNaWNyb3NvZnQgVG9cdTIwMTFEbyB2aWEgQVBJLlxuXHRcdFx0Y29uc3QgZXhpc3RpbmdUYXNrcyA9IGF3YWl0IGZldGNoVGFza3ModGhpcy5zZXR0aW5ncywgYWNjZXNzVG9rZW4pO1xuXHRcdFx0bGV0IG5ld1Rhc2tzQ291bnQgPSAwO1xuXG5cdFx0XHQvLyBMb29wIG92ZXIgZWFjaCBub3RlIHRhc2suXG5cdFx0XHRmb3IgKGNvbnN0IHRhc2sgb2Ygbm90ZVRhc2tzKSB7XG5cdFx0XHRcdGNvbnN0IGV4aXN0aW5nVGFzayA9IGV4aXN0aW5nVGFza3MuZ2V0KHRhc2sudGl0bGUpO1xuXHRcdFx0XHRpZiAoZXhpc3RpbmdUYXNrKSB7XG5cdFx0XHRcdFx0Ly8gSWYgdGhlIHRhc2sgZXhpc3RzIGFuZCB0aGUgbm90ZSBtYXJrcyBpdCBhcyBjb21wbGV0ZSB3aGlsZSBpdHMgc3RhdHVzIGlzIG5vdCBjb21wbGV0ZSwgdXBkYXRlIGl0LlxuXHRcdFx0XHRcdGlmICh0YXNrLmNvbXBsZXRlICYmIGV4aXN0aW5nVGFzay5zdGF0dXMgIT09IFwiY29tcGxldGVkXCIpIHtcblx0XHRcdFx0XHRcdGF3YWl0IHVwZGF0ZVRhc2soXG5cdFx0XHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MsXG5cdFx0XHRcdFx0XHRcdGFjY2Vzc1Rva2VuLFxuXHRcdFx0XHRcdFx0XHRleGlzdGluZ1Rhc2suaWQsXG5cdFx0XHRcdFx0XHRcdHRydWUsXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhgVGFzayBhbHJlYWR5IGV4aXN0czogJHt0YXNrLnRpdGxlfWApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIElmIHRoZSB0YXNrIGRvZXNuJ3QgZXhpc3QsIGNyZWF0ZSBpdCB3aXRoIHRoZSBhcHByb3ByaWF0ZSBzdGF0dXMuXG5cdFx0XHRcdGNvbnN0IGluaXRpYWxTdGF0dXMgPSB0YXNrLmNvbXBsZXRlXG5cdFx0XHRcdFx0PyBcImNvbXBsZXRlZFwiXG5cdFx0XHRcdFx0OiBcIm5vdFN0YXJ0ZWRcIjtcblx0XHRcdFx0YXdhaXQgY3JlYXRlVGFzayhcblx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLFxuXHRcdFx0XHRcdGFjY2Vzc1Rva2VuLFxuXHRcdFx0XHRcdHRhc2sudGl0bGUsXG5cdFx0XHRcdFx0aW5pdGlhbFN0YXR1cyxcblx0XHRcdFx0KTtcblx0XHRcdFx0bmV3VGFza3NDb3VudCsrO1xuXHRcdFx0fVxuXHRcdFx0Y29uc29sZS5sb2coXCJTeW5jZWQgVGFza3M6XCIsIG5vdGVUYXNrcyk7XG5cdFx0XHRyZXR1cm4gbmV3VGFza3NDb3VudDtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIHN5bmNpbmcgdGFza3M6XCIsIGVycm9yKTtcblx0XHRcdHRocm93IGVycm9yO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBQdXNoZXMgYSBzaW5nbGUgdGFzayB0byBzZWxlY3RlZCBsaXN0IGluIE1pY3Jvc29mdCBUb1x1MjAxMURvLlxuXHQgKiBAcGFyYW0gdGFzayAtIFRoZSB0YXNrIHRpdGxlIHRleHQgdG8gcHVzaC5cblx0ICovXG5cdGFzeW5jIHB1c2hPbmVUYXNrKHRhc2s6IHN0cmluZykge1xuXHRcdGlmICghdGhpcy5zZXR0aW5ncy5zZWxlY3RlZFRhc2tMaXN0SWQpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcblx0XHRcdFx0XCJObyB0YXNrIGxpc3Qgc2VsZWN0ZWQuIFBsZWFzZSBjaG9vc2Ugb25lIGluIHNldHRpbmdzLlwiLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgYWNjZXNzVG9rZW4gPSBhd2FpdCB0aGlzLmdldEFjY2Vzc1Rva2VuKCk7XG5cdFx0XHRjb25zdCBleGlzdGluZ1Rhc2tzID0gYXdhaXQgZmV0Y2hUYXNrcyh0aGlzLnNldHRpbmdzLCBhY2Nlc3NUb2tlbik7XG5cdFx0XHRjb25zdCBleGlzdGluZ1Rhc2sgPSBleGlzdGluZ1Rhc2tzLmdldCh0YXNrKTtcblxuXHRcdFx0aWYgKGV4aXN0aW5nVGFzaykge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhgVGFzayBhbHJlYWR5IGV4aXN0czogJHt0YXNrfWApO1xuXHRcdFx0fVxuXG5cdFx0XHRhd2FpdCBjcmVhdGVUYXNrKHRoaXMuc2V0dGluZ3MsIGFjY2Vzc1Rva2VuLCB0YXNrKTtcblx0XHRcdGF3YWl0IHRoaXMucmVmcmVzaFZpZXdBbmRDYWNoZSgpO1xuXHRcdFx0Y29uc29sZS5sb2coXCJTeW5jZWQgVGFza3M6XCIsIHRhc2spO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3Igc3luY2luZyB0YXNrczpcIiwgZXJyb3IpO1xuXHRcdFx0dGhyb3cgZXJyb3I7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEdhdGhlcnMgdGFza3MgZnJvbSBhbGwgbWFya2Rvd24gZmlsZXMgaW4gdGhlIHZhdWx0IGFuZCB1cGRhdGVzIChvciBjcmVhdGVzKSBhIGNvbnNvbGlkYXRlZCBub3RlLlxuXHQgKiBAcmV0dXJucyBBIG1hcCBvZiB0YXNrIHRleHQgdG8gaXRzIGN1cnJlbnQgc3RhdGUuXG5cdCAqL1xuXHRhc3luYyBnYXRoZXJUYXNrcygpOiBQcm9taXNlPE1hcDxzdHJpbmcsIHN0cmluZz4+IHtcblx0XHRjb25zdCBub3RlTmFtZSA9IFwiVGFza3MgTGlzdC5tZFwiO1xuXHRcdGNvbnN0IG1hcmtkb3duRmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG5cdFx0Y29uc3QgdGFza3NNYXAgPSBuZXcgTWFwPHN0cmluZywgc3RyaW5nPigpO1xuXG5cdFx0Ly8gUmVnZXggdG8gbWF0Y2ggYm90aCB1bmRvbmUgKC0gWyBdKSBhbmQgZG9uZSAoLSBbeF0pIHRhc2tzLCBhbGxvd2luZyBvcHRpb25hbCBsZWFkaW5nIHNwYWNlcy5cblx0XHRjb25zdCB0YXNrUmVnZXggPSAvXlxccyotXFxzKlxcWyggfHgpXFxdXFxzKyguKikkL2dtO1xuXG5cdFx0Ly8gTG9vcCB0aHJvdWdoIGV2ZXJ5IGZpbGUgaW4gdGhlIHZhdWx0LlxuXHRcdGZvciAoY29uc3QgZmlsZSBvZiBtYXJrZG93bkZpbGVzKSB7XG5cdFx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcblx0XHRcdGxldCBtYXRjaDtcblx0XHRcdHdoaWxlICgobWF0Y2ggPSB0YXNrUmVnZXguZXhlYyhjb250ZW50KSkgIT09IG51bGwpIHtcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coXCJNYXRjaDpcIiwgbWF0Y2gpO1xuXHRcdFx0XHQvLyBtYXRjaFsxXSBpcyBlaXRoZXIgXCIgXCIgKHVuZG9uZSkgb3IgXCJ4XCIgKGRvbmUpXG5cdFx0XHRcdC8vIG1hdGNoWzJdIGlzIHRoZSB0YXNrIHRleHRcblx0XHRcdFx0Y29uc3QgY3VycmVudFN0YXRlID0gbWF0Y2hbMV0gPT09IFwieFwiID8gXCJbeF1cIiA6IFwiWyBdXCI7XG5cdFx0XHRcdGNvbnN0IHRhc2tUZXh0ID0gbWF0Y2hbMl0udHJpbSgpO1xuXG5cdFx0XHRcdC8vIElmIHRoZSB0YXNrIGFscmVhZHkgZXhpc3RzIGFuZCBhbnkgb2NjdXJyZW5jZSBpcyBkb25lLCBtYXJrIGl0IGFzIGRvbmUuXG5cdFx0XHRcdGlmICh0YXNrc01hcC5oYXModGFza1RleHQpKSB7XG5cdFx0XHRcdFx0aWYgKGN1cnJlbnRTdGF0ZSA9PT0gXCJbeF1cIikge1xuXHRcdFx0XHRcdFx0dGFza3NNYXAuc2V0KHRhc2tUZXh0LCBcIlt4XVwiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGFza3NNYXAuc2V0KHRhc2tUZXh0LCBjdXJyZW50U3RhdGUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQnVpbGQgdGhlIG5ldyBjb25zb2xpZGF0ZWQgY29udGVudC5cblx0XHRjb25zdCBmaW5hbFRhc2tzID0gQXJyYXkuZnJvbSh0YXNrc01hcC5lbnRyaWVzKCkpLm1hcChcblx0XHRcdChbdGFza1RleHQsIHN0YXRlXSkgPT4gYC0gJHtzdGF0ZX0gJHt0YXNrVGV4dH1gLFxuXHRcdCk7XG5cdFx0Y29uc3QgbmV3Q29udGVudCA9IGZpbmFsVGFza3Muam9pbihcIlxcblwiKTtcblxuXHRcdC8vIFVwZGF0ZSBvciBjcmVhdGUgdGhlIGNvbnNvbGlkYXRlZCBub3RlLlxuXHRcdGNvbnN0IHRhcmdldEZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobm90ZU5hbWUpO1xuXHRcdGlmICghdGFyZ2V0RmlsZSkge1xuXHRcdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKG5vdGVOYW1lLCBuZXdDb250ZW50KTtcblx0XHR9IGVsc2UgaWYgKHRhcmdldEZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuXHRcdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KHRhcmdldEZpbGUsIG5ld0NvbnRlbnQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIGZpbGUgdHlwZSBmb3IgVGFza3MgTGlzdFwiKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGFza3NNYXA7XG5cdH1cblxuXHQvKipcblx0ICogT3BlbiBhIGludGVyYWN0aXZlIHdpbmRvdyBmb3IgdGhlIHVzZXIgdG8gaW50ZXJhY3QgYW5kIHNlbGVjdCBhIHRhcmdldCB0YXNrIGxpc3QuXG5cdCAqL1xuXHRhc3luYyBvcGVuVGFza0xpc3RzTW9kYWwoKSB7XG5cdFx0Y29uc3QgdGFza3NMaXN0cyA9IHRoaXMuc2V0dGluZ3MudGFza0xpc3RzO1xuXG5cdFx0Y29uc29sZS5sb2coXCJUYXNrIExpc3RzOlwiLCB0YXNrc0xpc3RzKTtcblx0XHRuZXcgR2VuZXJpY1NlbGVjdE1vZGFsPFRhc2tMaXN0Pihcblx0XHRcdHRoaXMuYXBwLFxuXHRcdFx0dGFza3NMaXN0cyxcblx0XHRcdCh0YXNrTGlzdCkgPT4gdGFza0xpc3QudGl0bGUsXG5cdFx0XHRhc3luYyAodGFza0xpc3Q6IFRhc2tMaXN0KSA9PiB7XG5cdFx0XHRcdHRoaXMuc2V0dGluZ3Muc2VsZWN0ZWRUYXNrTGlzdElkID0gdGFza0xpc3QuaWQ7XG5cdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdGF3YWl0IHRoaXMucmVmcmVzaFZpZXdBbmRDYWNoZSgpO1xuXHRcdFx0fSxcblx0XHQpLm9wZW4oKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBPcGVuIGEgaW50ZXJhY3RpdmUgd2luZG93IGZvciB0aGUgdXNlciB0byBpbnRlcmFjdCBhbmQgc2VsZWN0IHRvIGNvbXBsZXRlIHRhc2sgaXRlbXMuXG5cdCAqL1xuXHRhc3luYyBvcGVuVGFza0NvbXBsZXRlTW9kYWwoKSB7XG5cdFx0Y29uc3QgdGFza3NNYXAgPSBhd2FpdCB0aGlzLmdldFRhc2tzRnJvbVNlbGVjdGVkTGlzdCgpO1xuXHRcdGNvbnN0IG5vdFN0YXJ0ZWRUYXNrcyA9IEFycmF5LmZyb20odGFza3NNYXAudmFsdWVzKCkpLmZpbHRlcihcblx0XHRcdCh0YXNrKSA9PiB0YXNrLnN0YXR1cyAhPT0gXCJjb21wbGV0ZWRcIixcblx0XHQpO1xuXG5cdFx0bmV3IEdlbmVyaWNTZWxlY3RNb2RhbDxUYXNrSXRlbT4oXG5cdFx0XHR0aGlzLmFwcCxcblx0XHRcdG5vdFN0YXJ0ZWRUYXNrcyxcblx0XHRcdCh0YXNrKSA9PiAodGFzay5zdGF0dXMgIT09IFwiY29tcGxldGVkXCIgPyB0YXNrLnRpdGxlIDogXCJcIiksXG5cdFx0XHRhc3luYyAodGFzazogeyB0aXRsZTogc3RyaW5nOyBzdGF0dXM6IHN0cmluZzsgaWQ6IHN0cmluZyB9KSA9PiB7XG5cdFx0XHRcdGNvbnN0IGFjY2Vzc1Rva2VuID0gYXdhaXQgdGhpcy5nZXRBY2Nlc3NUb2tlbigpO1xuXG5cdFx0XHRcdGF3YWl0IHVwZGF0ZVRhc2sodGhpcy5zZXR0aW5ncywgYWNjZXNzVG9rZW4sIHRhc2suaWQsIHRydWUpO1xuXHRcdFx0XHR0aGlzLm5vdGlmeShcblx0XHRcdFx0XHRgVGFzayBcIiR7dGFzay50aXRsZX1cIiBtYXJrZWQgYXMgY29tcGxldGUgYW5kIHN5bmNlZC5gLFxuXHRcdFx0XHRcdFwic3VjY2Vzc1wiLFxuXHRcdFx0XHQpO1xuXG5cdFx0XHRcdGF3YWl0IHRoaXMucmVmcmVzaFZpZXdBbmRDYWNoZSgpO1xuXHRcdFx0fSxcblx0XHQpLm9wZW4oKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBGZXRjaCB0YXNrIHVzaW5nIGFwaSBmdW5jdGlvbiBhbmQgc3RvcmUgaW4gdGhlIGNhY2hlIGZvciBxdWljayBhY2Nlc3MuXG5cdCAqL1xuXHRhc3luYyByZWZyZXNoVGFza0NhY2hlKCk6IFByb21pc2U8XG5cdFx0TWFwPHN0cmluZywgeyB0aXRsZTogc3RyaW5nOyBzdGF0dXM6IHN0cmluZzsgaWQ6IHN0cmluZyB9PlxuXHQ+IHtcblx0XHRpZiAoIXRoaXMuc2V0dGluZ3Muc2VsZWN0ZWRUYXNrTGlzdElkKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXG5cdFx0XHRcdFwiTm8gdGFzayBsaXN0IHNlbGVjdGVkLiBQbGVhc2UgY2hvb3NlIG9uZSBpbiBzZXR0aW5ncy5cIixcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGFjY2Vzc1Rva2VuID0gYXdhaXQgdGhpcy5nZXRBY2Nlc3NUb2tlbigpO1xuXHRcdFx0Y29uc3QgdGFza3MgPSBhd2FpdCBmZXRjaFRhc2tzKHRoaXMuc2V0dGluZ3MsIGFjY2Vzc1Rva2VuKTtcblx0XHRcdGNvbnNvbGUubG9nKFwiRmV0Y2hlZCBUYXNrczpcIiwgdGFza3MpO1xuXG5cdFx0XHQvLyBMb2FkIHRoZSBjdXJyZW50IGRhdGEgKG9yIGluaXRpYWxpemUgYXMgYW4gZW1wdHkgb2JqZWN0IGlmIG5vdGhpbmcgZXhpc3RzKVxuXHRcdFx0Y29uc3QgY3VycmVudERhdGEgPSAoYXdhaXQgdGhpcy5sb2FkRGF0YSgpKSB8fCB7fTtcblxuXHRcdFx0Ly8gVXBkYXRlIG9ubHkgdGhlIHRhc2tzIHNlY3Rpb25cblx0XHRcdGN1cnJlbnREYXRhLnRhc2tzID0gQXJyYXkuZnJvbSh0YXNrcy5lbnRyaWVzKCkpO1xuXG5cdFx0XHQvLyBTYXZlIHRoZSB1cGRhdGVkIGRhdGEgYmFjayB3aXRob3V0IG92ZXJ3cml0aW5nIGFueSBvdGhlciBwcm9wZXJ0aWVzXG5cdFx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKGN1cnJlbnREYXRhKTtcblxuXHRcdFx0Ly8gT3B0aW9uYWxseSB1cGRhdGUgeW91ciBpbi1tZW1vcnkgY2FjaGUgdG9vXG5cdFx0XHR0aGlzLnRhc2tDYWNoZSA9IGN1cnJlbnREYXRhO1xuXHRcdFx0cmV0dXJuIHRhc2tzO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgdGFza3M6XCIsIGVycm9yKTtcblx0XHRcdHRocm93IGVycm9yO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBVc2UgdGhlIGRlbGV0ZVRhc2sgYXBpIGZ1bmN0aW9uIHRvIGRlbGV0ZSBhbGwgY29tcGxldGVkIHRhc2sgaW4gdGhlIHRhcmdldGVkIHRhc2sgbGlzdC5cblx0ICogQHJldHVybnMgQW1vdW50IG9mIGRlbGV0ZWQgdGFza3MuXG5cdCAqL1xuXHRhc3luYyBkZWxldGVBbGxDb21wbGV0ZWRUYXNrcygpOiBQcm9taXNlPG51bWJlcj4ge1xuXHRcdGlmICghdGhpcy5zZXR0aW5ncy5zZWxlY3RlZFRhc2tMaXN0SWQpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcblx0XHRcdFx0XCJObyB0YXNrIGxpc3Qgc2VsZWN0ZWQuIFBsZWFzZSBjaG9vc2Ugb25lIGluIHNldHRpbmdzLlwiLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRsZXQgZGVsZXRlZFRhc2tzQ291bnQgPSAwO1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBhY2Nlc3NUb2tlbiA9IGF3YWl0IHRoaXMuZ2V0QWNjZXNzVG9rZW4oKTtcblx0XHRcdGNvbnN0IHRhc2tzID0gYXdhaXQgdGhpcy5nZXRUYXNrc0Zyb21TZWxlY3RlZExpc3QoKTtcblx0XHRcdGNvbnN0IGNvbXBsZXRlZFRhc2tzID0gQXJyYXkuZnJvbSh0YXNrcy52YWx1ZXMoKSkuZmlsdGVyKFxuXHRcdFx0XHQodGFzaykgPT4gdGFzay5zdGF0dXMgPT09IFwiY29tcGxldGVkXCIsXG5cdFx0XHQpO1xuXG5cdFx0XHRmb3IgKGNvbnN0IHRhc2sgb2YgY29tcGxldGVkVGFza3MpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJEZWxldGluZyBUYXNrOlwiLCB0YXNrKTtcblx0XHRcdFx0YXdhaXQgZGVsZXRlVGFzayh0aGlzLnNldHRpbmdzLCBhY2Nlc3NUb2tlbiwgdGFzay5pZCk7XG5cdFx0XHRcdGRlbGV0ZWRUYXNrc0NvdW50Kys7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMucmVmcmVzaFZpZXdBbmRDYWNoZSgpO1xuXHRcdFx0cmV0dXJuIGRlbGV0ZWRUYXNrc0NvdW50O1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3IgZGVsZXRpbmcgdGFza3M6XCIsIGVycm9yKTtcblx0XHRcdHJldHVybiBkZWxldGVkVGFza3NDb3VudDtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogUmVmcmVzaGVzIHRoZSBzaWRlYmFyIHZpZXcgYW5kIHRhc2sgY2FjaGUgdG8gZGlzcGxheSB0aGUgbGF0ZXN0IHRhc2tzLlxuXHQgKi9cblx0YXN5bmMgcmVmcmVzaFZpZXdBbmRDYWNoZSgpIHtcblx0XHRjb25zdCB0YXNrcyA9IGF3YWl0IHRoaXMucmVmcmVzaFRhc2tDYWNoZSgpO1xuXHRcdGlmICh0aGlzLnNpZGViYXJWaWV3KSB7XG5cdFx0XHRhd2FpdCB0aGlzLnNpZGViYXJWaWV3LnJlbmRlcih0YXNrcyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnNvbGUud2FybihcIlNpZGViYXIgdmlldyBpcyBub3QgYWN0aXZlLlwiKTtcblx0XHR9XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBUYXNrU3luY2VyUGx1Z2luIGZyb20gXCJzcmMvbWFpblwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIE15VG9kb1NldHRpbmdzIHtcblx0c2VsZWN0ZWRUYXNrTGlzdElkOiBzdHJpbmc7XG5cdC8vIEEgbGlzdCBvZiBhdmFpbGFibGUgdGFzayBsaXN0cywgZWFjaCB3aXRoIGFuIGlkIGFuZCBkaXNwbGF5IG5hbWUuXG5cdHRhc2tMaXN0czogQXJyYXk8eyBpZDogc3RyaW5nOyB0aXRsZTogc3RyaW5nIH0+O1xuXHRjbGllbnRJZDogc3RyaW5nO1xuXHRjbGllbnRTZWNyZXQ6IHN0cmluZztcblx0cmVkaXJlY3RVcmw6IHN0cmluZztcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE15VG9kb1NldHRpbmdzID0ge1xuXHRzZWxlY3RlZFRhc2tMaXN0SWQ6IFwiXCIsXG5cdHRhc2tMaXN0czogW10sXG5cdGNsaWVudElkOiBcIlwiLFxuXHRjbGllbnRTZWNyZXQ6IFwiXCIsXG5cdHJlZGlyZWN0VXJsOiBcImh0dHA6Ly9sb2NhbGhvc3Q6NTAwMFwiLFxufTtcblxuZXhwb3J0IGNsYXNzIE15VG9kb1NldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblx0cGx1Z2luOiBUYXNrU3luY2VyUGx1Z2luO1xuXHRzZXR0aW5nczogTXlUb2RvU2V0dGluZ3M7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogVGFza1N5bmNlclBsdWdpbikge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0XHR0aGlzLnNldHRpbmdzID0gcGx1Z2luLnNldHRpbmdzO1xuXHR9XG5cblx0ZGlzcGxheSgpOiB2b2lkIHtcblx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IFwiTWljcm9zb2Z0IFRvXHUyMDExRG8gU2V0dGluZ3NcIiB9KTtcblxuXHRcdC8vIEFkZCBhIHNlY3Rpb24gZm9yIGVudGVyaW5nIGNsaWVudCBJRCBhbmQgc2VjcmV0LlxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJDbGllbnQgRGV0YWlsc1wiKVxuXHRcdFx0LnNldERlc2MoXG5cdFx0XHRcdFwiRW50ZXIgdGhlIGNsaWVudCBJRCBhbmQgY2xpZW50IHNlY3JldCBvZiB5b3VyIEF6dXJlIEFEIGFwcC5cIixcblx0XHRcdClcblx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PlxuXHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiQ2xpZW50IElEXCIpXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNsaWVudElkKVxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNsaWVudElkID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9KSxcblx0XHRcdClcblx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PlxuXHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiQ2xpZW50IFNlY3JldFwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jbGllbnRTZWNyZXQpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY2xpZW50U2VjcmV0ID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9KSxcblx0XHRcdCk7XG5cblx0XHQvLyBBZGQgYSBzZWN0aW9uIGZvciBVUkwgdG8gcmVkaXJlY3QgdG8gYWZ0ZXIgYXV0aGVudGljYXRpb24uXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIlJlZGlyZWN0IFVSTFwiKVxuXHRcdFx0LnNldERlc2MoXCJFbnRlciB0aGUgVVJMIHRvIHJlZGlyZWN0IHRvIGFmdGVyIGF1dGhlbnRpY2F0aW9uLlwiKVxuXHRcdFx0LmFkZFRleHQoKHRleHQpID0+XG5cdFx0XHRcdHRleHRcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCJodHRwOi8vbG9jYWxob3N0OjUwMDBcIilcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVkaXJlY3RVcmwpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucmVkaXJlY3RVcmwgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdH0pLFxuXHRcdFx0KTtcblxuXHRcdC8vIEFkZCBhIGJ1dHRvbiB0byBnZXQgdGhlIHRhc2sgbGlzdHMuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIkdldCBUYXNrIExpc3RzXCIpXG5cdFx0XHQuc2V0RGVzYyhcIkNsaWNrIHRvIGdldCB0aGUgbGlzdCBvZiBhdmFpbGFibGUgdGFzayBsaXN0cy5cIilcblx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xuXHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dChcIkdldCBUYXNrIExpc3RzXCIpLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmxvYWRBdmFpbGFibGVUYXNrTGlzdHMoKTtcblx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblxuXHRcdC8vIEFkZCBhIGRyb3Bkb3duIHRvIHNlbGVjdCB0aGUgdGFza1xuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJUYXNrIExpc3RcIilcblx0XHRcdC5zZXREZXNjKFxuXHRcdFx0XHRcIlNlbGVjdCB0aGUgTWljcm9zb2Z0IFRvXHUyMDExRG8gbGlzdCB0byBzdG9yZSB5b3VyIE9ic2lkaWFuIHRhc2tzLlwiLFxuXHRcdFx0KVxuXHRcdFx0LmFkZERyb3Bkb3duKChkcm9wKSA9PiB7XG5cdFx0XHRcdC8vIEFkZCBhIGRlZmF1bHQgb3B0aW9uLlxuXHRcdFx0XHRkcm9wLmFkZE9wdGlvbihcIlwiLCBcIlNlbGVjdCBhIHRhc2sgbGlzdFwiKTtcblxuXHRcdFx0XHQvLyBQb3B1bGF0ZSBkcm9wZG93biB3aXRoIGF2YWlsYWJsZSB0YXNrIGxpc3RzLlxuXHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy50YXNrTGlzdHMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MudGFza0xpc3RzLmZvckVhY2goKGxpc3QpID0+IHtcblx0XHRcdFx0XHRcdGRyb3AuYWRkT3B0aW9uKGxpc3QuaWQsIGxpc3QudGl0bGUpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIE9wdGlvbmFsbHksIGluZm9ybSB0aGUgdXNlciBubyB0YXNrIGxpc3RzIGFyZSBhdmFpbGFibGUuXG5cdFx0XHRcdFx0ZHJvcC5hZGRPcHRpb24oXCJub25lXCIsIFwiTm8gdGFzayBsaXN0cyBhdmFpbGFibGVcIik7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBTZXQgdGhlIGN1cnJlbnQgdmFsdWUuXG5cdFx0XHRcdGRyb3Auc2V0VmFsdWUodGhpcy5zZXR0aW5ncy5zZWxlY3RlZFRhc2tMaXN0SWQpO1xuXHRcdFx0XHRkcm9wLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5zZWxlY3RlZFRhc2tMaXN0SWQgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0fVxufVxuIiwgImltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgdHlwZSBUYXNrU3luY2VyUGx1Z2luIGZyb20gXCJzcmMvbWFpblwiO1xuXG5leHBvcnQgY29uc3QgVklFV19UWVBFX1RPRE9fU0lERUJBUiA9IFwidGFza3Mtc3luY2VyLXNpZGViYXJcIjtcblxuZXhwb3J0IGNsYXNzIFRhc2tTaWRlYmFyVmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcblx0cGx1Z2luOiBUYXNrU3luY2VyUGx1Z2luO1xuXG5cdGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogVGFza1N5bmNlclBsdWdpbikge1xuXHRcdHN1cGVyKGxlYWYpO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0Z2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gVklFV19UWVBFX1RPRE9fU0lERUJBUjtcblx0fVxuXG5cdGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIFwiVG8tRG8gVGFza3NcIjtcblx0fVxuXG5cdGFzeW5jIG9uT3BlbigpIHtcblx0XHRjb25zdCB0YXNrcyA9IGF3YWl0IHRoaXMucGx1Z2luLnJlZnJlc2hUYXNrQ2FjaGUoKTtcblx0XHRhd2FpdCB0aGlzLnJlbmRlcih0YXNrcyk7XG5cdH1cblxuXHRhc3luYyByZW5kZXIoXG5cdFx0dGFza3M6IE1hcDxzdHJpbmcsIHsgdGl0bGU6IHN0cmluZzsgc3RhdHVzOiBzdHJpbmc7IGlkOiBzdHJpbmcgfT4sXG5cdCkge1xuXHRcdGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV07XG5cdFx0Y29udGFpbmVyLmVtcHR5KCk7XG5cblx0XHRjb25zdCByZWZyZXNoQnRuID0gY29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IFwiUmVmcmVzaCBUYXNrc1wiLFxuXHRcdH0pO1xuXHRcdHJlZnJlc2hCdG4ub25jbGljayA9ICgpID0+IHRoaXMucmVuZGVyKHRhc2tzKTtcblxuXHRcdGNvbnRhaW5lci5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJUYXNrc1wiIH0pO1xuXG5cdFx0aWYgKHRhc2tzLnNpemUgPT09IDApIHtcblx0XHRcdGNvbnRhaW5lci5jcmVhdGVFbChcInBcIiwge1xuXHRcdFx0XHR0ZXh0OiBcIk5vIHRhc2tzIGZvdW5kIG9yIG5vdCBhdXRoZW50aWNhdGVkLlwiLFxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0QXJyYXkuZnJvbSh0YXNrcy52YWx1ZXMoKSlcblx0XHRcdC5zb3J0KChhLCBiKSA9PiB7XG5cdFx0XHRcdC8vIE1vdmUgY29tcGxldGVkIHRhc2tzIHRvIHRoZSBib3R0b21cblx0XHRcdFx0aWYgKGEuc3RhdHVzID09PSBcImNvbXBsZXRlZFwiICYmIGIuc3RhdHVzICE9PSBcImNvbXBsZXRlZFwiKVxuXHRcdFx0XHRcdHJldHVybiAxO1xuXHRcdFx0XHRpZiAoYS5zdGF0dXMgIT09IFwiY29tcGxldGVkXCIgJiYgYi5zdGF0dXMgPT09IFwiY29tcGxldGVkXCIpXG5cdFx0XHRcdFx0cmV0dXJuIC0xO1xuXHRcdFx0XHRyZXR1cm4gMDsgLy8gS2VlcCBvcmlnaW5hbCBvcmRlciBvdGhlcndpc2Vcblx0XHRcdH0pXG5cdFx0XHQuZm9yRWFjaCgodGFzaykgPT4ge1xuXHRcdFx0XHRjb25zdCBsaW5lID0gY29udGFpbmVyLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcInRhc2stbGluZVwiIH0pO1xuXG5cdFx0XHRcdGNvbnN0IGNoZWNrYm94ID0gbGluZS5jcmVhdGVFbChcImlucHV0XCIsIHtcblx0XHRcdFx0XHR0eXBlOiBcImNoZWNrYm94XCIsXG5cdFx0XHRcdH0pIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG5cblx0XHRcdFx0Y2hlY2tib3guY2hlY2tlZCA9IHRhc2suc3RhdHVzID09PSBcImNvbXBsZXRlZFwiO1xuXHRcdFx0XHRjaGVja2JveC5kaXNhYmxlZCA9IHRydWU7XG5cblx0XHRcdFx0bGluZS5jcmVhdGVFbChcInNwYW5cIiwge1xuXHRcdFx0XHRcdHRleHQ6IHRhc2sudGl0bGUsXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdH1cblx0YXN5bmMgb25DbG9zZSgpIHtcblx0XHQvLyBPcHRpb25hbCBjbGVhbnVwXG5cdH1cbn1cbiIsICJpbXBvcnQgeyByZXF1ZXN0VXJsIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBNeVRvZG9TZXR0aW5ncyB9IGZyb20gXCJzcmMvc2V0dGluZ1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIE1TVGFzayB7XG5cdHRpdGxlOiBzdHJpbmc7XG5cdHN0YXR1czogc3RyaW5nO1xuXHRpZDogc3RyaW5nO1xufVxuXG4vKipcbiAqIEZldGNoZXMgdGFza3MgZnJvbSB0aGUgc2VsZWN0ZWQgTWljcm9zb2Z0IFRvXHUyMDExRG8gbGlzdC5cbiAqIEBwYXJhbSBzZXR0aW5ncyBQbHVnaW4gc2V0dGluZ3MgdGhhdCBjb250YWluIHRoZSBzZWxlY3RlZCB0YXNrIGxpc3QgSUQuXG4gKiBAcGFyYW0gYWNjZXNzVG9rZW4gQSB2YWxpZCBhY2Nlc3MgdG9rZW4uXG4gKiBAcmV0dXJucyBBIG1hcCBvZiB0YXNrIHRpdGxlIHRvIE1TVGFzay5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoVGFza3MoXG5cdHNldHRpbmdzOiBNeVRvZG9TZXR0aW5ncyxcblx0YWNjZXNzVG9rZW46IHN0cmluZyxcbik6IFByb21pc2U8TWFwPHN0cmluZywgTVNUYXNrPj4ge1xuXHRjb25zdCB0YXNrcyA9IG5ldyBNYXA8c3RyaW5nLCBNU1Rhc2s+KCk7XG5cdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XG5cdFx0dXJsOiBgaHR0cHM6Ly9ncmFwaC5taWNyb3NvZnQuY29tL3YxLjAvbWUvdG9kby9saXN0cy8ke3NldHRpbmdzLnNlbGVjdGVkVGFza0xpc3RJZH0vdGFza3NgLFxuXHRcdG1ldGhvZDogXCJHRVRcIixcblx0XHRoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthY2Nlc3NUb2tlbn1gIH0sXG5cdH0pO1xuXG5cdGlmIChyZXNwb25zZS5zdGF0dXMgIT09IDIwMCkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBmZXRjaCB0YXNrczogXCIgKyByZXNwb25zZS50ZXh0KTtcblx0fVxuXG5cdGNvbnN0IGRhdGEgPSByZXNwb25zZS5qc29uO1xuXHRpZiAoZGF0YS52YWx1ZSAmJiBBcnJheS5pc0FycmF5KGRhdGEudmFsdWUpKSB7XG5cdFx0Zm9yIChjb25zdCB0YXNrIG9mIGRhdGEudmFsdWUpIHtcblx0XHRcdGNvbnN0IHRpdGxlID0gdGFzay50aXRsZS50cmltKCk7XG5cdFx0XHR0YXNrcy5zZXQodGl0bGUsIHsgdGl0bGUsIHN0YXR1czogdGFzay5zdGF0dXMsIGlkOiB0YXNrLmlkIH0pO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiB0YXNrcztcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHRhc2sgaW4gTWljcm9zb2Z0IFRvXHUyMDExRG8uXG4gKiBAcGFyYW0gc2V0dGluZ3MgUGx1Z2luIHNldHRpbmdzIGNvbnRhaW5pbmcgdGhlIHNlbGVjdGVkIHRhc2sgbGlzdCBJRC5cbiAqIEBwYXJhbSBhY2Nlc3NUb2tlbiBBIHZhbGlkIGFjY2VzcyB0b2tlbi5cbiAqIEBwYXJhbSB0YXNrVGl0bGUgVGhlIHRpdGxlIG9mIHRoZSB0YXNrIHRvIGNyZWF0ZS5cbiAqIEBwYXJhbSBzdGF0dXMgT3B0aW9uYWwgaW5pdGlhbCBzdGF0dXMgKFwiY29tcGxldGVkXCIgb3IgXCJub3RTdGFydGVkXCIpLiBEZWZhdWx0cyB0byBcIm5vdFN0YXJ0ZWRcIi5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVRhc2soXG5cdHNldHRpbmdzOiBNeVRvZG9TZXR0aW5ncyxcblx0YWNjZXNzVG9rZW46IHN0cmluZyxcblx0dGFza1RpdGxlOiBzdHJpbmcsXG5cdHN0YXR1czogc3RyaW5nID0gXCJub3RTdGFydGVkXCIsXG4pOiBQcm9taXNlPHZvaWQ+IHtcblx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcblx0XHR1cmw6IGBodHRwczovL2dyYXBoLm1pY3Jvc29mdC5jb20vdjEuMC9tZS90b2RvL2xpc3RzLyR7c2V0dGluZ3Muc2VsZWN0ZWRUYXNrTGlzdElkfS90YXNrc2AsXG5cdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRoZWFkZXJzOiB7XG5cdFx0XHRBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YWNjZXNzVG9rZW59YCxcblx0XHRcdFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuXHRcdH0sXG5cdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkoe1xuXHRcdFx0dGl0bGU6IHRhc2tUaXRsZSxcblx0XHRcdHN0YXR1czogc3RhdHVzLFxuXHRcdH0pLFxuXHR9KTtcblxuXHRpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDEpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgdGFzazogJHtyZXNwb25zZS50ZXh0fWApO1xuXHR9XG59XG5cbi8qKlxuICogVXBkYXRlcyBhbiBleGlzdGluZyB0YXNrJ3Mgc3RhdHVzLlxuICogQHBhcmFtIHNldHRpbmdzIFBsdWdpbiBzZXR0aW5ncyBjb250YWluaW5nIHRoZSBzZWxlY3RlZCB0YXNrIGxpc3QgSUQuXG4gKiBAcGFyYW0gYWNjZXNzVG9rZW4gQSB2YWxpZCBhY2Nlc3MgdG9rZW4uXG4gKiBAcGFyYW0gdGFza0lkIFRoZSBJRCBvZiB0aGUgdGFzayB0byB1cGRhdGUuXG4gKiBAcGFyYW0gY29tcGxldGUgV2hldGhlciB0byBtYXJrIHRoZSB0YXNrIGFzIGNvbXBsZXRlLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVGFzayhcblx0c2V0dGluZ3M6IE15VG9kb1NldHRpbmdzLFxuXHRhY2Nlc3NUb2tlbjogc3RyaW5nLFxuXHR0YXNrSWQ6IHN0cmluZyxcblx0Y29tcGxldGU6IGJvb2xlYW4sXG4pOiBQcm9taXNlPHZvaWQ+IHtcblx0Y29uc3QgbmV3U3RhdHVzID0gY29tcGxldGUgPyBcImNvbXBsZXRlZFwiIDogXCJub3RTdGFydGVkXCI7XG5cdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XG5cdFx0dXJsOiBgaHR0cHM6Ly9ncmFwaC5taWNyb3NvZnQuY29tL3YxLjAvbWUvdG9kby9saXN0cy8ke3NldHRpbmdzLnNlbGVjdGVkVGFza0xpc3RJZH0vdGFza3MvJHt0YXNrSWR9YCxcblx0XHRtZXRob2Q6IFwiUEFUQ0hcIixcblx0XHRoZWFkZXJzOiB7XG5cdFx0XHRBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YWNjZXNzVG9rZW59YCxcblx0XHRcdFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuXHRcdH0sXG5cdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkoeyBzdGF0dXM6IG5ld1N0YXR1cyB9KSxcblx0fSk7XG5cblx0aWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gdXBkYXRlIHRhc2s6ICR7cmVzcG9uc2UudGV4dH1gKTtcblx0fVxufVxuXG4vKipcbiAqIEZldGNoZXMgdGhlIGF2YWlsYWJsZSBNaWNyb3NvZnQgVG9cdTIwMTFEbyB0YXNrIGxpc3RzLlxuICogQHBhcmFtIGFjY2Vzc1Rva2VuIEEgdmFsaWQgYWNjZXNzIHRva2VuLlxuICogQHJldHVybnMgQSBtYXAgd2hlcmUgZWFjaCBrZXkgaXMgdGhlIHRhc2sgbGlzdCB0aXRsZSBhbmQgdGhlIHZhbHVlIGlzIGFuIG9iamVjdCBjb250YWluaW5nIHRpdGxlLCBzdGF0dXMgKGRlZmF1bHQpLCBhbmQgaWQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaFRhc2tMaXN0cyhcblx0YWNjZXNzVG9rZW46IHN0cmluZyxcbik6IFByb21pc2U8QXJyYXk8eyB0aXRsZTogc3RyaW5nOyBpZDogc3RyaW5nIH0+PiB7XG5cdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XG5cdFx0dXJsOiBcImh0dHBzOi8vZ3JhcGgubWljcm9zb2Z0LmNvbS92MS4wL21lL3RvZG8vbGlzdHNcIixcblx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0aGVhZGVyczogeyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YWNjZXNzVG9rZW59YCB9LFxuXHR9KTtcblxuXHRpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggdGFzayBsaXN0czogXCIgKyByZXNwb25zZS50ZXh0KTtcblx0fVxuXG5cdGNvbnN0IGRhdGEgPSByZXNwb25zZS5qc29uO1xuXHRjb25zdCB0YXNrTGlzdHMgPSBuZXcgQXJyYXk8eyB0aXRsZTogc3RyaW5nOyBpZDogc3RyaW5nIH0+KCk7XG5cblx0Y29uc29sZS5sb2coXCJUYXNrIGxpc3RzIGRhdGE6XCIsIGRhdGEpO1xuXHRpZiAoZGF0YS52YWx1ZSAmJiBBcnJheS5pc0FycmF5KGRhdGEudmFsdWUpKSB7XG5cdFx0Zm9yIChjb25zdCBsaXN0IG9mIGRhdGEudmFsdWUpIHtcblx0XHRcdHRhc2tMaXN0cy5wdXNoKHsgdGl0bGU6IGxpc3QuZGlzcGxheU5hbWUsIGlkOiBsaXN0LmlkIH0pO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiB0YXNrTGlzdHM7XG59XG5cbi8qKlxuICogRGVsZXRlcyBhIHRhc2sgZnJvbSBNaWNyb3NvZnQgVG9cdTIwMTFEby5cbiAqIEBwYXJhbSBzZXR0aW5ncyBQbHVnaW4gc2V0dGluZ3MgY29udGFpbmluZyB0aGUgc2VsZWN0ZWQgdGFzayBsaXN0IElELlxuICogQHBhcmFtIGFjY2Vzc1Rva2VuIEEgdmFsaWQgYWNjZXNzIHRva2VuLlxuICogQHBhcmFtIHRhc2tJZCBUaGUgSUQgb2YgdGhlIHRhc2sgdG8gZGVsZXRlLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlVGFzayhcblx0c2V0dGluZ3M6IE15VG9kb1NldHRpbmdzLFxuXHRhY2Nlc3NUb2tlbjogc3RyaW5nLFxuXHR0YXNrSWQ6IHN0cmluZyxcbik6IFByb21pc2U8dm9pZD4ge1xuXHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuXHRcdHVybDogYGh0dHBzOi8vZ3JhcGgubWljcm9zb2Z0LmNvbS92MS4wL21lL3RvZG8vbGlzdHMvJHtzZXR0aW5ncy5zZWxlY3RlZFRhc2tMaXN0SWR9L3Rhc2tzLyR7dGFza0lkfWAsXG5cdFx0bWV0aG9kOiBcIkRFTEVURVwiLFxuXHRcdGhlYWRlcnM6IHtcblx0XHRcdEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthY2Nlc3NUb2tlbn1gLFxuXHRcdFx0XCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG5cdFx0fSxcblx0fSk7XG5cblx0aWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gMjA0KSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZGVsZXRlIHRhc2s6ICR7cmVzcG9uc2UudGV4dH1gKTtcblx0fVxufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICAgIEFjY291bnRDYWNoZSxcbiAgICBJZFRva2VuQ2FjaGUsXG4gICAgQWNjZXNzVG9rZW5DYWNoZSxcbiAgICBSZWZyZXNoVG9rZW5DYWNoZSxcbiAgICBBcHBNZXRhZGF0YUNhY2hlLFxufSBmcm9tIFwiQGF6dXJlL21zYWwtY29tbW9uL25vZGVcIjtcbmltcG9ydCB7XG4gICAgSW5NZW1vcnlDYWNoZSxcbiAgICBKc29uQ2FjaGUsXG4gICAgU2VyaWFsaXplZEFjY291bnRFbnRpdHksXG4gICAgU2VyaWFsaXplZElkVG9rZW5FbnRpdHksXG4gICAgU2VyaWFsaXplZEFjY2Vzc1Rva2VuRW50aXR5LFxuICAgIFNlcmlhbGl6ZWRSZWZyZXNoVG9rZW5FbnRpdHksXG4gICAgU2VyaWFsaXplZEFwcE1ldGFkYXRhRW50aXR5LFxufSBmcm9tIFwiLi9TZXJpYWxpemVyVHlwZXMuanNcIjtcblxuLyoqXG4gKiBUaGlzIGNsYXNzIHNlcmlhbGl6ZXMgY2FjaGUgZW50aXRpZXMgdG8gYmUgc2F2ZWQgaW50byBpbi1tZW1vcnkgb2JqZWN0IHR5cGVzIGRlZmluZWQgaW50ZXJuYWxseVxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBjbGFzcyBTZXJpYWxpemVyIHtcbiAgICAvKipcbiAgICAgKiBzZXJpYWxpemUgdGhlIEpTT04gYmxvYlxuICAgICAqIEBwYXJhbSBkYXRhIC0gSlNPTiBibG9iIGNhY2hlXG4gICAgICovXG4gICAgc3RhdGljIHNlcmlhbGl6ZUpTT05CbG9iKGRhdGE6IEpzb25DYWNoZSk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXJpYWxpemUgQWNjb3VudHNcbiAgICAgKiBAcGFyYW0gYWNjQ2FjaGUgLSBjYWNoZSBvZiBhY2NvdW50c1xuICAgICAqL1xuICAgIHN0YXRpYyBzZXJpYWxpemVBY2NvdW50cyhcbiAgICAgICAgYWNjQ2FjaGU6IEFjY291bnRDYWNoZVxuICAgICk6IFJlY29yZDxzdHJpbmcsIFNlcmlhbGl6ZWRBY2NvdW50RW50aXR5PiB7XG4gICAgICAgIGNvbnN0IGFjY291bnRzOiBSZWNvcmQ8c3RyaW5nLCBTZXJpYWxpemVkQWNjb3VudEVudGl0eT4gPSB7fTtcbiAgICAgICAgT2JqZWN0LmtleXMoYWNjQ2FjaGUpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICBjb25zdCBhY2NvdW50RW50aXR5ID0gYWNjQ2FjaGVba2V5XTtcbiAgICAgICAgICAgIGFjY291bnRzW2tleV0gPSB7XG4gICAgICAgICAgICAgICAgaG9tZV9hY2NvdW50X2lkOiBhY2NvdW50RW50aXR5LmhvbWVBY2NvdW50SWQsXG4gICAgICAgICAgICAgICAgZW52aXJvbm1lbnQ6IGFjY291bnRFbnRpdHkuZW52aXJvbm1lbnQsXG4gICAgICAgICAgICAgICAgcmVhbG06IGFjY291bnRFbnRpdHkucmVhbG0sXG4gICAgICAgICAgICAgICAgbG9jYWxfYWNjb3VudF9pZDogYWNjb3VudEVudGl0eS5sb2NhbEFjY291bnRJZCxcbiAgICAgICAgICAgICAgICB1c2VybmFtZTogYWNjb3VudEVudGl0eS51c2VybmFtZSxcbiAgICAgICAgICAgICAgICBhdXRob3JpdHlfdHlwZTogYWNjb3VudEVudGl0eS5hdXRob3JpdHlUeXBlLFxuICAgICAgICAgICAgICAgIG5hbWU6IGFjY291bnRFbnRpdHkubmFtZSxcbiAgICAgICAgICAgICAgICBjbGllbnRfaW5mbzogYWNjb3VudEVudGl0eS5jbGllbnRJbmZvLFxuICAgICAgICAgICAgICAgIGxhc3RfbW9kaWZpY2F0aW9uX3RpbWU6IGFjY291bnRFbnRpdHkubGFzdE1vZGlmaWNhdGlvblRpbWUsXG4gICAgICAgICAgICAgICAgbGFzdF9tb2RpZmljYXRpb25fYXBwOiBhY2NvdW50RW50aXR5Lmxhc3RNb2RpZmljYXRpb25BcHAsXG4gICAgICAgICAgICAgICAgdGVuYW50UHJvZmlsZXM6IGFjY291bnRFbnRpdHkudGVuYW50UHJvZmlsZXM/Lm1hcChcbiAgICAgICAgICAgICAgICAgICAgKHRlbmFudFByb2ZpbGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0ZW5hbnRQcm9maWxlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gYWNjb3VudHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2VyaWFsaXplIElkVG9rZW5zXG4gICAgICogQHBhcmFtIGlkVENhY2hlIC0gY2FjaGUgb2YgSUQgdG9rZW5zXG4gICAgICovXG4gICAgc3RhdGljIHNlcmlhbGl6ZUlkVG9rZW5zKFxuICAgICAgICBpZFRDYWNoZTogSWRUb2tlbkNhY2hlXG4gICAgKTogUmVjb3JkPHN0cmluZywgU2VyaWFsaXplZElkVG9rZW5FbnRpdHk+IHtcbiAgICAgICAgY29uc3QgaWRUb2tlbnM6IFJlY29yZDxzdHJpbmcsIFNlcmlhbGl6ZWRJZFRva2VuRW50aXR5PiA9IHt9O1xuICAgICAgICBPYmplY3Qua2V5cyhpZFRDYWNoZSkubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIGNvbnN0IGlkVEVudGl0eSA9IGlkVENhY2hlW2tleV07XG4gICAgICAgICAgICBpZFRva2Vuc1trZXldID0ge1xuICAgICAgICAgICAgICAgIGhvbWVfYWNjb3VudF9pZDogaWRURW50aXR5LmhvbWVBY2NvdW50SWQsXG4gICAgICAgICAgICAgICAgZW52aXJvbm1lbnQ6IGlkVEVudGl0eS5lbnZpcm9ubWVudCxcbiAgICAgICAgICAgICAgICBjcmVkZW50aWFsX3R5cGU6IGlkVEVudGl0eS5jcmVkZW50aWFsVHlwZSxcbiAgICAgICAgICAgICAgICBjbGllbnRfaWQ6IGlkVEVudGl0eS5jbGllbnRJZCxcbiAgICAgICAgICAgICAgICBzZWNyZXQ6IGlkVEVudGl0eS5zZWNyZXQsXG4gICAgICAgICAgICAgICAgcmVhbG06IGlkVEVudGl0eS5yZWFsbSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBpZFRva2VucztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXJpYWxpemVzIEFjY2Vzc1Rva2Vuc1xuICAgICAqIEBwYXJhbSBhdENhY2hlIC0gY2FjaGUgb2YgYWNjZXNzIHRva2Vuc1xuICAgICAqL1xuICAgIHN0YXRpYyBzZXJpYWxpemVBY2Nlc3NUb2tlbnMoXG4gICAgICAgIGF0Q2FjaGU6IEFjY2Vzc1Rva2VuQ2FjaGVcbiAgICApOiBSZWNvcmQ8c3RyaW5nLCBTZXJpYWxpemVkQWNjZXNzVG9rZW5FbnRpdHk+IHtcbiAgICAgICAgY29uc3QgYWNjZXNzVG9rZW5zOiBSZWNvcmQ8c3RyaW5nLCBTZXJpYWxpemVkQWNjZXNzVG9rZW5FbnRpdHk+ID0ge307XG4gICAgICAgIE9iamVjdC5rZXlzKGF0Q2FjaGUpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICBjb25zdCBhdEVudGl0eSA9IGF0Q2FjaGVba2V5XTtcbiAgICAgICAgICAgIGFjY2Vzc1Rva2Vuc1trZXldID0ge1xuICAgICAgICAgICAgICAgIGhvbWVfYWNjb3VudF9pZDogYXRFbnRpdHkuaG9tZUFjY291bnRJZCxcbiAgICAgICAgICAgICAgICBlbnZpcm9ubWVudDogYXRFbnRpdHkuZW52aXJvbm1lbnQsXG4gICAgICAgICAgICAgICAgY3JlZGVudGlhbF90eXBlOiBhdEVudGl0eS5jcmVkZW50aWFsVHlwZSxcbiAgICAgICAgICAgICAgICBjbGllbnRfaWQ6IGF0RW50aXR5LmNsaWVudElkLFxuICAgICAgICAgICAgICAgIHNlY3JldDogYXRFbnRpdHkuc2VjcmV0LFxuICAgICAgICAgICAgICAgIHJlYWxtOiBhdEVudGl0eS5yZWFsbSxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IGF0RW50aXR5LnRhcmdldCxcbiAgICAgICAgICAgICAgICBjYWNoZWRfYXQ6IGF0RW50aXR5LmNhY2hlZEF0LFxuICAgICAgICAgICAgICAgIGV4cGlyZXNfb246IGF0RW50aXR5LmV4cGlyZXNPbixcbiAgICAgICAgICAgICAgICBleHRlbmRlZF9leHBpcmVzX29uOiBhdEVudGl0eS5leHRlbmRlZEV4cGlyZXNPbixcbiAgICAgICAgICAgICAgICByZWZyZXNoX29uOiBhdEVudGl0eS5yZWZyZXNoT24sXG4gICAgICAgICAgICAgICAga2V5X2lkOiBhdEVudGl0eS5rZXlJZCxcbiAgICAgICAgICAgICAgICB0b2tlbl90eXBlOiBhdEVudGl0eS50b2tlblR5cGUsXG4gICAgICAgICAgICAgICAgcmVxdWVzdGVkQ2xhaW1zOiBhdEVudGl0eS5yZXF1ZXN0ZWRDbGFpbXMsXG4gICAgICAgICAgICAgICAgcmVxdWVzdGVkQ2xhaW1zSGFzaDogYXRFbnRpdHkucmVxdWVzdGVkQ2xhaW1zSGFzaCxcbiAgICAgICAgICAgICAgICB1c2VyQXNzZXJ0aW9uSGFzaDogYXRFbnRpdHkudXNlckFzc2VydGlvbkhhc2gsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gYWNjZXNzVG9rZW5zO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNlcmlhbGl6ZSByZWZyZXNoVG9rZW5zXG4gICAgICogQHBhcmFtIHJ0Q2FjaGUgLSBjYWNoZSBvZiByZWZyZXNoIHRva2Vuc1xuICAgICAqL1xuICAgIHN0YXRpYyBzZXJpYWxpemVSZWZyZXNoVG9rZW5zKFxuICAgICAgICBydENhY2hlOiBSZWZyZXNoVG9rZW5DYWNoZVxuICAgICk6IFJlY29yZDxzdHJpbmcsIFNlcmlhbGl6ZWRSZWZyZXNoVG9rZW5FbnRpdHk+IHtcbiAgICAgICAgY29uc3QgcmVmcmVzaFRva2VuczogUmVjb3JkPHN0cmluZywgU2VyaWFsaXplZFJlZnJlc2hUb2tlbkVudGl0eT4gPSB7fTtcbiAgICAgICAgT2JqZWN0LmtleXMocnRDYWNoZSkubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIGNvbnN0IHJ0RW50aXR5ID0gcnRDYWNoZVtrZXldO1xuICAgICAgICAgICAgcmVmcmVzaFRva2Vuc1trZXldID0ge1xuICAgICAgICAgICAgICAgIGhvbWVfYWNjb3VudF9pZDogcnRFbnRpdHkuaG9tZUFjY291bnRJZCxcbiAgICAgICAgICAgICAgICBlbnZpcm9ubWVudDogcnRFbnRpdHkuZW52aXJvbm1lbnQsXG4gICAgICAgICAgICAgICAgY3JlZGVudGlhbF90eXBlOiBydEVudGl0eS5jcmVkZW50aWFsVHlwZSxcbiAgICAgICAgICAgICAgICBjbGllbnRfaWQ6IHJ0RW50aXR5LmNsaWVudElkLFxuICAgICAgICAgICAgICAgIHNlY3JldDogcnRFbnRpdHkuc2VjcmV0LFxuICAgICAgICAgICAgICAgIGZhbWlseV9pZDogcnRFbnRpdHkuZmFtaWx5SWQsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBydEVudGl0eS50YXJnZXQsXG4gICAgICAgICAgICAgICAgcmVhbG06IHJ0RW50aXR5LnJlYWxtLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlZnJlc2hUb2tlbnM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2VyaWFsaXplIGFtZHRDYWNoZVxuICAgICAqIEBwYXJhbSBhbWR0Q2FjaGUgLSBjYWNoZSBvZiBhcHAgbWV0YWRhdGFcbiAgICAgKi9cbiAgICBzdGF0aWMgc2VyaWFsaXplQXBwTWV0YWRhdGEoXG4gICAgICAgIGFtZHRDYWNoZTogQXBwTWV0YWRhdGFDYWNoZVxuICAgICk6IFJlY29yZDxzdHJpbmcsIFNlcmlhbGl6ZWRBcHBNZXRhZGF0YUVudGl0eT4ge1xuICAgICAgICBjb25zdCBhcHBNZXRhZGF0YTogUmVjb3JkPHN0cmluZywgU2VyaWFsaXplZEFwcE1ldGFkYXRhRW50aXR5PiA9IHt9O1xuICAgICAgICBPYmplY3Qua2V5cyhhbWR0Q2FjaGUpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICBjb25zdCBhbWR0RW50aXR5ID0gYW1kdENhY2hlW2tleV07XG4gICAgICAgICAgICBhcHBNZXRhZGF0YVtrZXldID0ge1xuICAgICAgICAgICAgICAgIGNsaWVudF9pZDogYW1kdEVudGl0eS5jbGllbnRJZCxcbiAgICAgICAgICAgICAgICBlbnZpcm9ubWVudDogYW1kdEVudGl0eS5lbnZpcm9ubWVudCxcbiAgICAgICAgICAgICAgICBmYW1pbHlfaWQ6IGFtZHRFbnRpdHkuZmFtaWx5SWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gYXBwTWV0YWRhdGE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2VyaWFsaXplIHRoZSBjYWNoZVxuICAgICAqIEBwYXJhbSBpbk1lbUNhY2hlIC0gaXRlbWlzZWQgY2FjaGUgcmVhZCBmcm9tIHRoZSBKU09OXG4gICAgICovXG4gICAgc3RhdGljIHNlcmlhbGl6ZUFsbENhY2hlKGluTWVtQ2FjaGU6IEluTWVtb3J5Q2FjaGUpOiBKc29uQ2FjaGUge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgQWNjb3VudDogdGhpcy5zZXJpYWxpemVBY2NvdW50cyhpbk1lbUNhY2hlLmFjY291bnRzKSxcbiAgICAgICAgICAgIElkVG9rZW46IHRoaXMuc2VyaWFsaXplSWRUb2tlbnMoaW5NZW1DYWNoZS5pZFRva2VucyksXG4gICAgICAgICAgICBBY2Nlc3NUb2tlbjogdGhpcy5zZXJpYWxpemVBY2Nlc3NUb2tlbnMoaW5NZW1DYWNoZS5hY2Nlc3NUb2tlbnMpLFxuICAgICAgICAgICAgUmVmcmVzaFRva2VuOiB0aGlzLnNlcmlhbGl6ZVJlZnJlc2hUb2tlbnMoaW5NZW1DYWNoZS5yZWZyZXNoVG9rZW5zKSxcbiAgICAgICAgICAgIEFwcE1ldGFkYXRhOiB0aGlzLnNlcmlhbGl6ZUFwcE1ldGFkYXRhKGluTWVtQ2FjaGUuYXBwTWV0YWRhdGEpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuZXhwb3J0IGNvbnN0IENvbnN0YW50cyA9IHtcbiAgICBMSUJSQVJZX05BTUU6IFwiTVNBTC5KU1wiLFxuICAgIFNLVTogXCJtc2FsLmpzLmNvbW1vblwiLFxuICAgIC8vIFByZWZpeCBmb3IgYWxsIGxpYnJhcnkgY2FjaGUgZW50cmllc1xuICAgIENBQ0hFX1BSRUZJWDogXCJtc2FsXCIsXG4gICAgLy8gZGVmYXVsdCBhdXRob3JpdHlcbiAgICBERUZBVUxUX0FVVEhPUklUWTogXCJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vY29tbW9uL1wiLFxuICAgIERFRkFVTFRfQVVUSE9SSVRZX0hPU1Q6IFwibG9naW4ubWljcm9zb2Z0b25saW5lLmNvbVwiLFxuICAgIERFRkFVTFRfQ09NTU9OX1RFTkFOVDogXCJjb21tb25cIixcbiAgICAvLyBBREZTIFN0cmluZ1xuICAgIEFERlM6IFwiYWRmc1wiLFxuICAgIERTVFM6IFwiZHN0c3YyXCIsXG4gICAgLy8gRGVmYXVsdCBBQUQgSW5zdGFuY2UgRGlzY292ZXJ5IEVuZHBvaW50XG4gICAgQUFEX0lOU1RBTkNFX0RJU0NPVkVSWV9FTkRQVDpcbiAgICAgICAgXCJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vY29tbW9uL2Rpc2NvdmVyeS9pbnN0YW5jZT9hcGktdmVyc2lvbj0xLjEmYXV0aG9yaXphdGlvbl9lbmRwb2ludD1cIixcbiAgICAvLyBDSUFNIFVSTFxuICAgIENJQU1fQVVUSF9VUkw6IFwiLmNpYW1sb2dpbi5jb21cIixcbiAgICBBQURfVEVOQU5UX0RPTUFJTl9TVUZGSVg6IFwiLm9ubWljcm9zb2Z0LmNvbVwiLFxuICAgIC8vIFJlc291cmNlIGRlbGltaXRlciAtIHVzZWQgZm9yIGNlcnRhaW4gY2FjaGUgZW50cmllc1xuICAgIFJFU09VUkNFX0RFTElNOiBcInxcIixcbiAgICAvLyBQbGFjZWhvbGRlciBmb3Igbm9uLWV4aXN0ZW50IGFjY291bnQgaWRzL29iamVjdHNcbiAgICBOT19BQ0NPVU5UOiBcIk5PX0FDQ09VTlRcIixcbiAgICAvLyBDbGFpbXNcbiAgICBDTEFJTVM6IFwiY2xhaW1zXCIsXG4gICAgLy8gQ29uc3VtZXIgVVRJRFxuICAgIENPTlNVTUVSX1VUSUQ6IFwiOTE4ODA0MGQtNmM2Ny00YzViLWIxMTItMzZhMzA0YjY2ZGFkXCIsXG4gICAgLy8gRGVmYXVsdCBzY29wZXNcbiAgICBPUEVOSURfU0NPUEU6IFwib3BlbmlkXCIsXG4gICAgUFJPRklMRV9TQ09QRTogXCJwcm9maWxlXCIsXG4gICAgT0ZGTElORV9BQ0NFU1NfU0NPUEU6IFwib2ZmbGluZV9hY2Nlc3NcIixcbiAgICBFTUFJTF9TQ09QRTogXCJlbWFpbFwiLFxuICAgIENPREVfR1JBTlRfVFlQRTogXCJhdXRob3JpemF0aW9uX2NvZGVcIixcbiAgICBSVF9HUkFOVF9UWVBFOiBcInJlZnJlc2hfdG9rZW5cIixcbiAgICBTMjU2X0NPREVfQ0hBTExFTkdFX01FVEhPRDogXCJTMjU2XCIsXG4gICAgVVJMX0ZPUk1fQ09OVEVOVF9UWVBFOiBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PXV0Zi04XCIsXG4gICAgQVVUSE9SSVpBVElPTl9QRU5ESU5HOiBcImF1dGhvcml6YXRpb25fcGVuZGluZ1wiLFxuICAgIE5PVF9ERUZJTkVEOiBcIm5vdF9kZWZpbmVkXCIsXG4gICAgRU1QVFlfU1RSSU5HOiBcIlwiLFxuICAgIE5PVF9BUFBMSUNBQkxFOiBcIk4vQVwiLFxuICAgIE5PVF9BVkFJTEFCTEU6IFwiTm90IEF2YWlsYWJsZVwiLFxuICAgIEZPUldBUkRfU0xBU0g6IFwiL1wiLFxuICAgIElNRFNfRU5EUE9JTlQ6IFwiaHR0cDovLzE2OS4yNTQuMTY5LjI1NC9tZXRhZGF0YS9pbnN0YW5jZS9jb21wdXRlL2xvY2F0aW9uXCIsXG4gICAgSU1EU19WRVJTSU9OOiBcIjIwMjAtMDYtMDFcIixcbiAgICBJTURTX1RJTUVPVVQ6IDIwMDAsXG4gICAgQVpVUkVfUkVHSU9OX0FVVE9fRElTQ09WRVJfRkxBRzogXCJUcnlBdXRvRGV0ZWN0XCIsXG4gICAgUkVHSU9OQUxfQVVUSF9QVUJMSUNfQ0xPVURfU1VGRklYOiBcImxvZ2luLm1pY3Jvc29mdC5jb21cIixcbiAgICBLTk9XTl9QVUJMSUNfQ0xPVURTOiBbXG4gICAgICAgIFwibG9naW4ubWljcm9zb2Z0b25saW5lLmNvbVwiLFxuICAgICAgICBcImxvZ2luLndpbmRvd3MubmV0XCIsXG4gICAgICAgIFwibG9naW4ubWljcm9zb2Z0LmNvbVwiLFxuICAgICAgICBcInN0cy53aW5kb3dzLm5ldFwiLFxuICAgIF0sXG4gICAgU0hSX05PTkNFX1ZBTElESVRZOiAyNDAsXG4gICAgSU5WQUxJRF9JTlNUQU5DRTogXCJpbnZhbGlkX2luc3RhbmNlXCIsXG59O1xuXG5leHBvcnQgY29uc3QgSHR0cFN0YXR1cyA9IHtcbiAgICBTVUNDRVNTOiAyMDAsXG4gICAgU1VDQ0VTU19SQU5HRV9TVEFSVDogMjAwLFxuICAgIFNVQ0NFU1NfUkFOR0VfRU5EOiAyOTksXG4gICAgUkVESVJFQ1Q6IDMwMixcbiAgICBDTElFTlRfRVJST1I6IDQwMCxcbiAgICBDTElFTlRfRVJST1JfUkFOR0VfU1RBUlQ6IDQwMCxcbiAgICBCQURfUkVRVUVTVDogNDAwLFxuICAgIFVOQVVUSE9SSVpFRDogNDAxLFxuICAgIE5PVF9GT1VORDogNDA0LFxuICAgIFJFUVVFU1RfVElNRU9VVDogNDA4LFxuICAgIFRPT19NQU5ZX1JFUVVFU1RTOiA0MjksXG4gICAgQ0xJRU5UX0VSUk9SX1JBTkdFX0VORDogNDk5LFxuICAgIFNFUlZFUl9FUlJPUjogNTAwLFxuICAgIFNFUlZFUl9FUlJPUl9SQU5HRV9TVEFSVDogNTAwLFxuICAgIFNFUlZJQ0VfVU5BVkFJTEFCTEU6IDUwMyxcbiAgICBHQVRFV0FZX1RJTUVPVVQ6IDUwNCxcbiAgICBTRVJWRVJfRVJST1JfUkFOR0VfRU5EOiA1OTksXG4gICAgTVVMVElfU0lERURfRVJST1I6IDYwMCxcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBIdHRwU3RhdHVzID0gKHR5cGVvZiBIdHRwU3RhdHVzKVtrZXlvZiB0eXBlb2YgSHR0cFN0YXR1c107XG5cbmV4cG9ydCBjb25zdCBPSURDX0RFRkFVTFRfU0NPUEVTID0gW1xuICAgIENvbnN0YW50cy5PUEVOSURfU0NPUEUsXG4gICAgQ29uc3RhbnRzLlBST0ZJTEVfU0NPUEUsXG4gICAgQ29uc3RhbnRzLk9GRkxJTkVfQUNDRVNTX1NDT1BFLFxuXTtcblxuZXhwb3J0IGNvbnN0IE9JRENfU0NPUEVTID0gWy4uLk9JRENfREVGQVVMVF9TQ09QRVMsIENvbnN0YW50cy5FTUFJTF9TQ09QRV07XG5cbi8qKlxuICogUmVxdWVzdCBoZWFkZXIgbmFtZXNcbiAqL1xuZXhwb3J0IGNvbnN0IEhlYWRlck5hbWVzID0ge1xuICAgIENPTlRFTlRfVFlQRTogXCJDb250ZW50LVR5cGVcIixcbiAgICBDT05URU5UX0xFTkdUSDogXCJDb250ZW50LUxlbmd0aFwiLFxuICAgIFJFVFJZX0FGVEVSOiBcIlJldHJ5LUFmdGVyXCIsXG4gICAgQ0NTX0hFQURFUjogXCJYLUFuY2hvck1haWxib3hcIixcbiAgICBXV1dBdXRoZW50aWNhdGU6IFwiV1dXLUF1dGhlbnRpY2F0ZVwiLFxuICAgIEF1dGhlbnRpY2F0aW9uSW5mbzogXCJBdXRoZW50aWNhdGlvbi1JbmZvXCIsXG4gICAgWF9NU19SRVFVRVNUX0lEOiBcIngtbXMtcmVxdWVzdC1pZFwiLFxuICAgIFhfTVNfSFRUUF9WRVJTSU9OOiBcIngtbXMtaHR0cHZlclwiLFxufSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIEhlYWRlck5hbWVzID0gKHR5cGVvZiBIZWFkZXJOYW1lcylba2V5b2YgdHlwZW9mIEhlYWRlck5hbWVzXTtcblxuLyoqXG4gKiBQZXJzaXN0ZW50IGNhY2hlIGtleXMgTVNBTCB3aGljaCBzdGF5IHdoaWxlIHVzZXIgaXMgbG9nZ2VkIGluLlxuICovXG5leHBvcnQgY29uc3QgUGVyc2lzdGVudENhY2hlS2V5cyA9IHtcbiAgICBBQ1RJVkVfQUNDT1VOVF9GSUxURVJTOiBcImFjdGl2ZS1hY2NvdW50LWZpbHRlcnNcIiwgLy8gbmV3IGNhY2hlIGVudHJ5IGZvciBhY3RpdmVfYWNjb3VudCBmb3IgYSBtb3JlIHJvYnVzdCB2ZXJzaW9uIGZvciBicm93c2VyXG59IGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgUGVyc2lzdGVudENhY2hlS2V5cyA9XG4gICAgKHR5cGVvZiBQZXJzaXN0ZW50Q2FjaGVLZXlzKVtrZXlvZiB0eXBlb2YgUGVyc2lzdGVudENhY2hlS2V5c107XG5cbi8qKlxuICogU3RyaW5nIGNvbnN0YW50cyByZWxhdGVkIHRvIEFBRCBBdXRob3JpdHlcbiAqL1xuZXhwb3J0IGNvbnN0IEFBREF1dGhvcml0eUNvbnN0YW50cyA9IHtcbiAgICBDT01NT046IFwiY29tbW9uXCIsXG4gICAgT1JHQU5JWkFUSU9OUzogXCJvcmdhbml6YXRpb25zXCIsXG4gICAgQ09OU1VNRVJTOiBcImNvbnN1bWVyc1wiLFxufSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIEFBREF1dGhvcml0eUNvbnN0YW50cyA9XG4gICAgKHR5cGVvZiBBQURBdXRob3JpdHlDb25zdGFudHMpW2tleW9mIHR5cGVvZiBBQURBdXRob3JpdHlDb25zdGFudHNdO1xuXG4vKipcbiAqIENsYWltcyByZXF1ZXN0IGtleXNcbiAqL1xuZXhwb3J0IGNvbnN0IENsYWltc1JlcXVlc3RLZXlzID0ge1xuICAgIEFDQ0VTU19UT0tFTjogXCJhY2Nlc3NfdG9rZW5cIixcbiAgICBYTVNfQ0M6IFwieG1zX2NjXCIsXG59IGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgQ2xhaW1zUmVxdWVzdEtleXMgPVxuICAgICh0eXBlb2YgQ2xhaW1zUmVxdWVzdEtleXMpW2tleW9mIHR5cGVvZiBDbGFpbXNSZXF1ZXN0S2V5c107XG5cbi8qKlxuICogd2UgY29uc2lkZXJlZCBtYWtpbmcgdGhpcyBcImVudW1cIiBpbiB0aGUgcmVxdWVzdCBpbnN0ZWFkIG9mIHN0cmluZywgaG93ZXZlciBpdCBsb29rcyBsaWtlIHRoZSBhbGxvd2VkIGxpc3Qgb2ZcbiAqIHByb21wdCB2YWx1ZXMga2VwdCBjaGFuZ2luZyBvdmVyIHBhc3QgY291cGxlIG9mIHllYXJzLiBUaGVyZSBhcmUgc29tZSB1bmRvY3VtZW50ZWQgcHJvbXB0IHZhbHVlcyBmb3Igc29tZVxuICogaW50ZXJuYWwgcGFydG5lcnMgdG9vLCBoZW5jZSB0aGUgY2hvaWNlIG9mIGdlbmVyaWMgXCJzdHJpbmdcIiB0eXBlIGluc3RlYWQgb2YgdGhlIFwiZW51bVwiXG4gKi9cbmV4cG9ydCBjb25zdCBQcm9tcHRWYWx1ZSA9IHtcbiAgICBMT0dJTjogXCJsb2dpblwiLFxuICAgIFNFTEVDVF9BQ0NPVU5UOiBcInNlbGVjdF9hY2NvdW50XCIsXG4gICAgQ09OU0VOVDogXCJjb25zZW50XCIsXG4gICAgTk9ORTogXCJub25lXCIsXG4gICAgQ1JFQVRFOiBcImNyZWF0ZVwiLFxuICAgIE5PX1NFU1NJT046IFwibm9fc2Vzc2lvblwiLFxufTtcblxuLyoqXG4gKiBhbGxvd2VkIHZhbHVlcyBmb3IgY29kZVZlcmlmaWVyXG4gKi9cbmV4cG9ydCBjb25zdCBDb2RlQ2hhbGxlbmdlTWV0aG9kVmFsdWVzID0ge1xuICAgIFBMQUlOOiBcInBsYWluXCIsXG4gICAgUzI1NjogXCJTMjU2XCIsXG59O1xuXG4vKipcbiAqIEFsbG93ZWQgdmFsdWVzIGZvciByZXNwb25zZV90eXBlXG4gKi9cbmV4cG9ydCBjb25zdCBPQXV0aFJlc3BvbnNlVHlwZSA9IHtcbiAgICBDT0RFOiBcImNvZGVcIixcbiAgICBJRFRPS0VOX1RPS0VOOiBcImlkX3Rva2VuIHRva2VuXCIsXG4gICAgSURUT0tFTl9UT0tFTl9SRUZSRVNIVE9LRU46IFwiaWRfdG9rZW4gdG9rZW4gcmVmcmVzaF90b2tlblwiLFxufSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIE9BdXRoUmVzcG9uc2VUeXBlID1cbiAgICAodHlwZW9mIE9BdXRoUmVzcG9uc2VUeXBlKVtrZXlvZiB0eXBlb2YgT0F1dGhSZXNwb25zZVR5cGVdO1xuXG4vKipcbiAqIGFsbG93ZWQgdmFsdWVzIGZvciBzZXJ2ZXIgcmVzcG9uc2UgdHlwZVxuICogQGRlcHJlY2F0ZWQgVXNlIFJlc3BvbnNlTW9kZSBpbnN0ZWFkXG4gKi9cbmV4cG9ydCBjb25zdCBTZXJ2ZXJSZXNwb25zZVR5cGUgPSB7XG4gICAgUVVFUlk6IFwicXVlcnlcIixcbiAgICBGUkFHTUVOVDogXCJmcmFnbWVudFwiLFxufSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIFNlcnZlclJlc3BvbnNlVHlwZSA9XG4gICAgKHR5cGVvZiBTZXJ2ZXJSZXNwb25zZVR5cGUpW2tleW9mIHR5cGVvZiBTZXJ2ZXJSZXNwb25zZVR5cGVdO1xuXG4vKipcbiAqIGFsbG93ZWQgdmFsdWVzIGZvciByZXNwb25zZV9tb2RlXG4gKi9cbmV4cG9ydCBjb25zdCBSZXNwb25zZU1vZGUgPSB7XG4gICAgUVVFUlk6IFwicXVlcnlcIixcbiAgICBGUkFHTUVOVDogXCJmcmFnbWVudFwiLFxuICAgIEZPUk1fUE9TVDogXCJmb3JtX3Bvc3RcIixcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBSZXNwb25zZU1vZGUgPSAodHlwZW9mIFJlc3BvbnNlTW9kZSlba2V5b2YgdHlwZW9mIFJlc3BvbnNlTW9kZV07XG5cbi8qKlxuICogYWxsb3dlZCBncmFudF90eXBlXG4gKi9cbmV4cG9ydCBjb25zdCBHcmFudFR5cGUgPSB7XG4gICAgSU1QTElDSVRfR1JBTlQ6IFwiaW1wbGljaXRcIixcbiAgICBBVVRIT1JJWkFUSU9OX0NPREVfR1JBTlQ6IFwiYXV0aG9yaXphdGlvbl9jb2RlXCIsXG4gICAgQ0xJRU5UX0NSRURFTlRJQUxTX0dSQU5UOiBcImNsaWVudF9jcmVkZW50aWFsc1wiLFxuICAgIFJFU09VUkNFX09XTkVSX1BBU1NXT1JEX0dSQU5UOiBcInBhc3N3b3JkXCIsXG4gICAgUkVGUkVTSF9UT0tFTl9HUkFOVDogXCJyZWZyZXNoX3Rva2VuXCIsXG4gICAgREVWSUNFX0NPREVfR1JBTlQ6IFwiZGV2aWNlX2NvZGVcIixcbiAgICBKV1RfQkVBUkVSOiBcInVybjppZXRmOnBhcmFtczpvYXV0aDpncmFudC10eXBlOmp3dC1iZWFyZXJcIixcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBHcmFudFR5cGUgPSAodHlwZW9mIEdyYW50VHlwZSlba2V5b2YgdHlwZW9mIEdyYW50VHlwZV07XG5cbi8qKlxuICogQWNjb3VudCB0eXBlcyBpbiBDYWNoZVxuICovXG5leHBvcnQgY29uc3QgQ2FjaGVBY2NvdW50VHlwZSA9IHtcbiAgICBNU1NUU19BQ0NPVU5UX1RZUEU6IFwiTVNTVFNcIixcbiAgICBBREZTX0FDQ09VTlRfVFlQRTogXCJBREZTXCIsXG4gICAgTVNBVjFfQUNDT1VOVF9UWVBFOiBcIk1TQVwiLFxuICAgIEdFTkVSSUNfQUNDT1VOVF9UWVBFOiBcIkdlbmVyaWNcIiwgLy8gTlRMTSwgS2VyYmVyb3MsIEZCQSwgQmFzaWMgZXRjXG59IGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgQ2FjaGVBY2NvdW50VHlwZSA9XG4gICAgKHR5cGVvZiBDYWNoZUFjY291bnRUeXBlKVtrZXlvZiB0eXBlb2YgQ2FjaGVBY2NvdW50VHlwZV07XG5cbi8qKlxuICogU2VwYXJhdG9ycyB1c2VkIGluIGNhY2hlXG4gKi9cbmV4cG9ydCBjb25zdCBTZXBhcmF0b3JzID0ge1xuICAgIENBQ0hFX0tFWV9TRVBBUkFUT1I6IFwiLVwiLFxuICAgIENMSUVOVF9JTkZPX1NFUEFSQVRPUjogXCIuXCIsXG59IGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgU2VwYXJhdG9ycyA9ICh0eXBlb2YgU2VwYXJhdG9ycylba2V5b2YgdHlwZW9mIFNlcGFyYXRvcnNdO1xuXG4vKipcbiAqIENyZWRlbnRpYWwgVHlwZSBzdG9yZWQgaW4gdGhlIGNhY2hlXG4gKi9cbmV4cG9ydCBjb25zdCBDcmVkZW50aWFsVHlwZSA9IHtcbiAgICBJRF9UT0tFTjogXCJJZFRva2VuXCIsXG4gICAgQUNDRVNTX1RPS0VOOiBcIkFjY2Vzc1Rva2VuXCIsXG4gICAgQUNDRVNTX1RPS0VOX1dJVEhfQVVUSF9TQ0hFTUU6IFwiQWNjZXNzVG9rZW5fV2l0aF9BdXRoU2NoZW1lXCIsXG4gICAgUkVGUkVTSF9UT0tFTjogXCJSZWZyZXNoVG9rZW5cIixcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBDcmVkZW50aWFsVHlwZSA9XG4gICAgKHR5cGVvZiBDcmVkZW50aWFsVHlwZSlba2V5b2YgdHlwZW9mIENyZWRlbnRpYWxUeXBlXTtcblxuLyoqXG4gKiBDb21iaW5lIGFsbCBjYWNoZSB0eXBlc1xuICovXG5leHBvcnQgY29uc3QgQ2FjaGVUeXBlID0ge1xuICAgIEFERlM6IDEwMDEsXG4gICAgTVNBOiAxMDAyLFxuICAgIE1TU1RTOiAxMDAzLFxuICAgIEdFTkVSSUM6IDEwMDQsXG4gICAgQUNDRVNTX1RPS0VOOiAyMDAxLFxuICAgIFJFRlJFU0hfVE9LRU46IDIwMDIsXG4gICAgSURfVE9LRU46IDIwMDMsXG4gICAgQVBQX01FVEFEQVRBOiAzMDAxLFxuICAgIFVOREVGSU5FRDogOTk5OSxcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBDYWNoZVR5cGUgPSAodHlwZW9mIENhY2hlVHlwZSlba2V5b2YgdHlwZW9mIENhY2hlVHlwZV07XG5cbi8qKlxuICogTW9yZSBDYWNoZSByZWxhdGVkIGNvbnN0YW50c1xuICovXG5leHBvcnQgY29uc3QgQVBQX01FVEFEQVRBID0gXCJhcHBtZXRhZGF0YVwiO1xuZXhwb3J0IGNvbnN0IENMSUVOVF9JTkZPID0gXCJjbGllbnRfaW5mb1wiO1xuZXhwb3J0IGNvbnN0IFRIRV9GQU1JTFlfSUQgPSBcIjFcIjtcblxuZXhwb3J0IGNvbnN0IEFVVEhPUklUWV9NRVRBREFUQV9DT05TVEFOVFMgPSB7XG4gICAgQ0FDSEVfS0VZOiBcImF1dGhvcml0eS1tZXRhZGF0YVwiLFxuICAgIFJFRlJFU0hfVElNRV9TRUNPTkRTOiAzNjAwICogMjQsIC8vIDI0IEhvdXJzXG59O1xuXG5leHBvcnQgY29uc3QgQXV0aG9yaXR5TWV0YWRhdGFTb3VyY2UgPSB7XG4gICAgQ09ORklHOiBcImNvbmZpZ1wiLFxuICAgIENBQ0hFOiBcImNhY2hlXCIsXG4gICAgTkVUV09SSzogXCJuZXR3b3JrXCIsXG4gICAgSEFSRENPREVEX1ZBTFVFUzogXCJoYXJkY29kZWRfdmFsdWVzXCIsXG59IGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgQXV0aG9yaXR5TWV0YWRhdGFTb3VyY2UgPVxuICAgICh0eXBlb2YgQXV0aG9yaXR5TWV0YWRhdGFTb3VyY2UpW2tleW9mIHR5cGVvZiBBdXRob3JpdHlNZXRhZGF0YVNvdXJjZV07XG5cbmV4cG9ydCBjb25zdCBTRVJWRVJfVEVMRU1fQ09OU1RBTlRTID0ge1xuICAgIFNDSEVNQV9WRVJTSU9OOiA1LFxuICAgIE1BWF9DVVJfSEVBREVSX0JZVEVTOiA4MCwgLy8gRVNUUyBsaW1pdCBpcyAxMDBCLCBzZXQgdG8gODAgdG8gcHJvdmlkZSBhIDIwQiBidWZmZXJcbiAgICBNQVhfTEFTVF9IRUFERVJfQllURVM6IDMzMCwgLy8gRVNUUyBsaW1pdCBpcyAzNTBCLCBzZXQgdG8gMzMwIHRvIHByb3ZpZGUgYSAyMEIgYnVmZmVyLFxuICAgIE1BWF9DQUNIRURfRVJST1JTOiA1MCwgLy8gTGltaXQgdGhlIG51bWJlciBvZiBlcnJvcnMgdGhhdCBjYW4gYmUgc3RvcmVkIHRvIHByZXZlbnQgdW5jb250cm9sbGVkIHNpemUgZ2FpbnNcbiAgICBDQUNIRV9LRVk6IFwic2VydmVyLXRlbGVtZXRyeVwiLFxuICAgIENBVEVHT1JZX1NFUEFSQVRPUjogXCJ8XCIsXG4gICAgVkFMVUVfU0VQQVJBVE9SOiBcIixcIixcbiAgICBPVkVSRkxPV19UUlVFOiBcIjFcIixcbiAgICBPVkVSRkxPV19GQUxTRTogXCIwXCIsXG4gICAgVU5LTk9XTl9FUlJPUjogXCJ1bmtub3duX2Vycm9yXCIsXG59O1xuXG4vKipcbiAqIFR5cGUgb2YgdGhlIGF1dGhlbnRpY2F0aW9uIHJlcXVlc3RcbiAqL1xuZXhwb3J0IGNvbnN0IEF1dGhlbnRpY2F0aW9uU2NoZW1lID0ge1xuICAgIEJFQVJFUjogXCJCZWFyZXJcIixcbiAgICBQT1A6IFwicG9wXCIsXG4gICAgU1NIOiBcInNzaC1jZXJ0XCIsXG59IGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgQXV0aGVudGljYXRpb25TY2hlbWUgPVxuICAgICh0eXBlb2YgQXV0aGVudGljYXRpb25TY2hlbWUpW2tleW9mIHR5cGVvZiBBdXRoZW50aWNhdGlvblNjaGVtZV07XG5cbi8qKlxuICogQ29uc3RhbnRzIHJlbGF0ZWQgdG8gdGhyb3R0bGluZ1xuICovXG5leHBvcnQgY29uc3QgVGhyb3R0bGluZ0NvbnN0YW50cyA9IHtcbiAgICAvLyBEZWZhdWx0IHRpbWUgdG8gdGhyb3R0bGUgUmVxdWVzdFRodW1icHJpbnQgaW4gc2Vjb25kc1xuICAgIERFRkFVTFRfVEhST1RUTEVfVElNRV9TRUNPTkRTOiA2MCxcbiAgICAvLyBEZWZhdWx0IG1heGltdW0gdGltZSB0byB0aHJvdHRsZSBpbiBzZWNvbmRzLCBvdmVycmlkZXMgd2hhdCB0aGUgc2VydmVyIHNlbmRzIGJhY2tcbiAgICBERUZBVUxUX01BWF9USFJPVFRMRV9USU1FX1NFQ09ORFM6IDM2MDAsXG4gICAgLy8gUHJlZml4IGZvciBzdG9yaW5nIHRocm90dGxpbmcgZW50cmllc1xuICAgIFRIUk9UVExJTkdfUFJFRklYOiBcInRocm90dGxpbmdcIixcbiAgICAvLyBWYWx1ZSBhc3NpZ25lZCB0byB0aGUgeC1tcy1saWItY2FwYWJpbGl0eSBoZWFkZXIgdG8gaW5kaWNhdGUgdG8gdGhlIHNlcnZlciB0aGUgbGlicmFyeSBzdXBwb3J0cyB0aHJvdHRsaW5nXG4gICAgWF9NU19MSUJfQ0FQQUJJTElUWV9WQUxVRTogXCJyZXRyeS1hZnRlciwgaDQyOVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IEVycm9ycyA9IHtcbiAgICBJTlZBTElEX0dSQU5UX0VSUk9SOiBcImludmFsaWRfZ3JhbnRcIixcbiAgICBDTElFTlRfTUlTTUFUQ0hfRVJST1I6IFwiY2xpZW50X21pc21hdGNoXCIsXG59O1xuXG4vKipcbiAqIFBhc3N3b3JkIGdyYW50IHBhcmFtZXRlcnNcbiAqL1xuZXhwb3J0IGNvbnN0IFBhc3N3b3JkR3JhbnRDb25zdGFudHMgPSB7XG4gICAgdXNlcm5hbWU6IFwidXNlcm5hbWVcIixcbiAgICBwYXNzd29yZDogXCJwYXNzd29yZFwiLFxufSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIFBhc3N3b3JkR3JhbnRDb25zdGFudHMgPVxuICAgICh0eXBlb2YgUGFzc3dvcmRHcmFudENvbnN0YW50cylba2V5b2YgdHlwZW9mIFBhc3N3b3JkR3JhbnRDb25zdGFudHNdO1xuXG4vKipcbiAqIFJlc3BvbnNlIGNvZGVzXG4gKi9cbmV4cG9ydCBjb25zdCBSZXNwb25zZUNvZGVzID0ge1xuICAgIGh0dHBTdWNjZXNzOiAyMDAsXG4gICAgaHR0cEJhZFJlcXVlc3Q6IDQwMCxcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBSZXNwb25zZUNvZGVzID0gKHR5cGVvZiBSZXNwb25zZUNvZGVzKVtrZXlvZiB0eXBlb2YgUmVzcG9uc2VDb2Rlc107XG5cbi8qKlxuICogUmVnaW9uIERpc2NvdmVyeSBTb3VyY2VzXG4gKi9cbmV4cG9ydCBjb25zdCBSZWdpb25EaXNjb3ZlcnlTb3VyY2VzID0ge1xuICAgIEZBSUxFRF9BVVRPX0RFVEVDVElPTjogXCIxXCIsXG4gICAgSU5URVJOQUxfQ0FDSEU6IFwiMlwiLFxuICAgIEVOVklST05NRU5UX1ZBUklBQkxFOiBcIjNcIixcbiAgICBJTURTOiBcIjRcIixcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBSZWdpb25EaXNjb3ZlcnlTb3VyY2VzID1cbiAgICAodHlwZW9mIFJlZ2lvbkRpc2NvdmVyeVNvdXJjZXMpW2tleW9mIHR5cGVvZiBSZWdpb25EaXNjb3ZlcnlTb3VyY2VzXTtcblxuLyoqXG4gKiBSZWdpb24gRGlzY292ZXJ5IE91dGNvbWVzXG4gKi9cbmV4cG9ydCBjb25zdCBSZWdpb25EaXNjb3ZlcnlPdXRjb21lcyA9IHtcbiAgICBDT05GSUdVUkVEX01BVENIRVNfREVURUNURUQ6IFwiMVwiLFxuICAgIENPTkZJR1VSRURfTk9fQVVUT19ERVRFQ1RJT046IFwiMlwiLFxuICAgIENPTkZJR1VSRURfTk9UX0RFVEVDVEVEOiBcIjNcIixcbiAgICBBVVRPX0RFVEVDVElPTl9SRVFVRVNURURfU1VDQ0VTU0ZVTDogXCI0XCIsXG4gICAgQVVUT19ERVRFQ1RJT05fUkVRVUVTVEVEX0ZBSUxFRDogXCI1XCIsXG59IGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgUmVnaW9uRGlzY292ZXJ5T3V0Y29tZXMgPVxuICAgICh0eXBlb2YgUmVnaW9uRGlzY292ZXJ5T3V0Y29tZXMpW2tleW9mIHR5cGVvZiBSZWdpb25EaXNjb3ZlcnlPdXRjb21lc107XG5cbi8qKlxuICogU3BlY2lmaWVzIHRoZSByZWFzb24gZm9yIGZldGNoaW5nIHRoZSBhY2Nlc3MgdG9rZW4gZnJvbSB0aGUgaWRlbnRpdHkgcHJvdmlkZXJcbiAqL1xuZXhwb3J0IGNvbnN0IENhY2hlT3V0Y29tZSA9IHtcbiAgICAvLyBXaGVuIGEgdG9rZW4gaXMgZm91bmQgaW4gdGhlIGNhY2hlIG9yIHRoZSBjYWNoZSBpcyBub3Qgc3VwcG9zZWQgdG8gYmUgaGl0IHdoZW4gbWFraW5nIHRoZSByZXF1ZXN0XG4gICAgTk9UX0FQUExJQ0FCTEU6IFwiMFwiLFxuICAgIC8vIFdoZW4gdGhlIHRva2VuIHJlcXVlc3QgZ29lcyB0byB0aGUgaWRlbnRpdHkgcHJvdmlkZXIgYmVjYXVzZSBmb3JjZV9yZWZyZXNoIHdhcyBzZXQgdG8gdHJ1ZS4gQWxzbyBvY2N1cnMgaWYgY2xhaW1zIHdlcmUgcmVxdWVzdGVkXG4gICAgRk9SQ0VfUkVGUkVTSF9PUl9DTEFJTVM6IFwiMVwiLFxuICAgIC8vIFdoZW4gdGhlIHRva2VuIHJlcXVlc3QgZ29lcyB0byB0aGUgaWRlbnRpdHkgcHJvdmlkZXIgYmVjYXVzZSBubyBjYWNoZWQgYWNjZXNzIHRva2VuIGV4aXN0c1xuICAgIE5PX0NBQ0hFRF9BQ0NFU1NfVE9LRU46IFwiMlwiLFxuICAgIC8vIFdoZW4gdGhlIHRva2VuIHJlcXVlc3QgZ29lcyB0byB0aGUgaWRlbnRpdHkgcHJvdmlkZXIgYmVjYXVzZSBjYWNoZWQgYWNjZXNzIHRva2VuIGV4cGlyZWRcbiAgICBDQUNIRURfQUNDRVNTX1RPS0VOX0VYUElSRUQ6IFwiM1wiLFxuICAgIC8vIFdoZW4gdGhlIHRva2VuIHJlcXVlc3QgZ29lcyB0byB0aGUgaWRlbnRpdHkgcHJvdmlkZXIgYmVjYXVzZSByZWZyZXNoX2luIHdhcyB1c2VkIGFuZCB0aGUgZXhpc3RpbmcgdG9rZW4gbmVlZHMgdG8gYmUgcmVmcmVzaGVkXG4gICAgUFJPQUNUSVZFTFlfUkVGUkVTSEVEOiBcIjRcIixcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBDYWNoZU91dGNvbWUgPSAodHlwZW9mIENhY2hlT3V0Y29tZSlba2V5b2YgdHlwZW9mIENhY2hlT3V0Y29tZV07XG5cbmV4cG9ydCBjb25zdCBKc29uV2ViVG9rZW5UeXBlcyA9IHtcbiAgICBKd3Q6IFwiSldUXCIsXG4gICAgSndrOiBcIkpXS1wiLFxuICAgIFBvcDogXCJwb3BcIixcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBKc29uV2ViVG9rZW5UeXBlcyA9XG4gICAgKHR5cGVvZiBKc29uV2ViVG9rZW5UeXBlcylba2V5b2YgdHlwZW9mIEpzb25XZWJUb2tlblR5cGVzXTtcblxuZXhwb3J0IGNvbnN0IE9ORV9EQVlfSU5fTVMgPSA4NjQwMDAwMDtcblxuLy8gVG9rZW4gcmVuZXdhbCBvZmZzZXQgZGVmYXVsdCBpbiBzZWNvbmRzXG5leHBvcnQgY29uc3QgREVGQVVMVF9UT0tFTl9SRU5FV0FMX09GRlNFVF9TRUMgPSAzMDA7XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQXV0aEVycm9yTWVzc2FnZSBjbGFzcyBjb250YWluaW5nIHN0cmluZyBjb25zdGFudHMgdXNlZCBieSBlcnJvciBjb2RlcyBhbmQgbWVzc2FnZXMuXG4gKi9cbmV4cG9ydCBjb25zdCB1bmV4cGVjdGVkRXJyb3IgPSBcInVuZXhwZWN0ZWRfZXJyb3JcIjtcbmV4cG9ydCBjb25zdCBwb3N0UmVxdWVzdEZhaWxlZCA9IFwicG9zdF9yZXF1ZXN0X2ZhaWxlZFwiO1xuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDb25zdGFudHMgfSBmcm9tIFwiLi4vdXRpbHMvQ29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgKiBhcyBBdXRoRXJyb3JDb2RlcyBmcm9tIFwiLi9BdXRoRXJyb3JDb2Rlcy5qc1wiO1xuZXhwb3J0IHsgQXV0aEVycm9yQ29kZXMgfTtcblxuZXhwb3J0IGNvbnN0IEF1dGhFcnJvck1lc3NhZ2VzID0ge1xuICAgIFtBdXRoRXJyb3JDb2Rlcy51bmV4cGVjdGVkRXJyb3JdOiBcIlVuZXhwZWN0ZWQgZXJyb3IgaW4gYXV0aGVudGljYXRpb24uXCIsXG4gICAgW0F1dGhFcnJvckNvZGVzLnBvc3RSZXF1ZXN0RmFpbGVkXTpcbiAgICAgICAgXCJQb3N0IHJlcXVlc3QgZmFpbGVkIGZyb20gdGhlIG5ldHdvcmssIGNvdWxkIGJlIGEgNHh4LzV4eCBvciBhIG5ldHdvcmsgdW5hdmFpbGFiaWxpdHkuIFBsZWFzZSBjaGVjayB0aGUgZXhhY3QgZXJyb3IgY29kZSBmb3IgZGV0YWlscy5cIixcbn07XG5cbi8qKlxuICogQXV0aEVycm9yTWVzc2FnZSBjbGFzcyBjb250YWluaW5nIHN0cmluZyBjb25zdGFudHMgdXNlZCBieSBlcnJvciBjb2RlcyBhbmQgbWVzc2FnZXMuXG4gKiBAZGVwcmVjYXRlZCBVc2UgQXV0aEVycm9yQ29kZXMgaW5zdGVhZFxuICovXG5leHBvcnQgY29uc3QgQXV0aEVycm9yTWVzc2FnZSA9IHtcbiAgICB1bmV4cGVjdGVkRXJyb3I6IHtcbiAgICAgICAgY29kZTogQXV0aEVycm9yQ29kZXMudW5leHBlY3RlZEVycm9yLFxuICAgICAgICBkZXNjOiBBdXRoRXJyb3JNZXNzYWdlc1tBdXRoRXJyb3JDb2Rlcy51bmV4cGVjdGVkRXJyb3JdLFxuICAgIH0sXG4gICAgcG9zdFJlcXVlc3RGYWlsZWQ6IHtcbiAgICAgICAgY29kZTogQXV0aEVycm9yQ29kZXMucG9zdFJlcXVlc3RGYWlsZWQsXG4gICAgICAgIGRlc2M6IEF1dGhFcnJvck1lc3NhZ2VzW0F1dGhFcnJvckNvZGVzLnBvc3RSZXF1ZXN0RmFpbGVkXSxcbiAgICB9LFxufTtcblxuLyoqXG4gKiBHZW5lcmFsIGVycm9yIGNsYXNzIHRocm93biBieSB0aGUgTVNBTC5qcyBsaWJyYXJ5LlxuICovXG5leHBvcnQgY2xhc3MgQXV0aEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIC8qKlxuICAgICAqIFNob3J0IHN0cmluZyBkZW5vdGluZyBlcnJvclxuICAgICAqL1xuICAgIGVycm9yQ29kZTogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogRGV0YWlsZWQgZGVzY3JpcHRpb24gb2YgZXJyb3JcbiAgICAgKi9cbiAgICBlcnJvck1lc3NhZ2U6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIERlc2NyaWJlcyB0aGUgc3ViY2xhc3Mgb2YgYW4gZXJyb3JcbiAgICAgKi9cbiAgICBzdWJFcnJvcjogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogQ29ycmVsYXRpb25JZCBhc3NvY2lhdGVkIHdpdGggdGhlIGVycm9yXG4gICAgICovXG4gICAgY29ycmVsYXRpb25JZDogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoZXJyb3JDb2RlPzogc3RyaW5nLCBlcnJvck1lc3NhZ2U/OiBzdHJpbmcsIHN1YmVycm9yPzogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IGVycm9yU3RyaW5nID0gZXJyb3JNZXNzYWdlXG4gICAgICAgICAgICA/IGAke2Vycm9yQ29kZX06ICR7ZXJyb3JNZXNzYWdlfWBcbiAgICAgICAgICAgIDogZXJyb3JDb2RlO1xuICAgICAgICBzdXBlcihlcnJvclN0cmluZyk7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBBdXRoRXJyb3IucHJvdG90eXBlKTtcblxuICAgICAgICB0aGlzLmVycm9yQ29kZSA9IGVycm9yQ29kZSB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HO1xuICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9IGVycm9yTWVzc2FnZSB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HO1xuICAgICAgICB0aGlzLnN1YkVycm9yID0gc3ViZXJyb3IgfHwgQ29uc3RhbnRzLkVNUFRZX1NUUklORztcbiAgICAgICAgdGhpcy5uYW1lID0gXCJBdXRoRXJyb3JcIjtcbiAgICB9XG5cbiAgICBzZXRDb3JyZWxhdGlvbklkKGNvcnJlbGF0aW9uSWQ6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLmNvcnJlbGF0aW9uSWQgPSBjb3JyZWxhdGlvbklkO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUF1dGhFcnJvcihcbiAgICBjb2RlOiBzdHJpbmcsXG4gICAgYWRkaXRpb25hbE1lc3NhZ2U/OiBzdHJpbmdcbik6IEF1dGhFcnJvciB7XG4gICAgcmV0dXJuIG5ldyBBdXRoRXJyb3IoXG4gICAgICAgIGNvZGUsXG4gICAgICAgIGFkZGl0aW9uYWxNZXNzYWdlXG4gICAgICAgICAgICA/IGAke0F1dGhFcnJvck1lc3NhZ2VzW2NvZGVdfSAke2FkZGl0aW9uYWxNZXNzYWdlfWBcbiAgICAgICAgICAgIDogQXV0aEVycm9yTWVzc2FnZXNbY29kZV1cbiAgICApO1xufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5leHBvcnQgY29uc3QgY2xpZW50SW5mb0RlY29kaW5nRXJyb3IgPSBcImNsaWVudF9pbmZvX2RlY29kaW5nX2Vycm9yXCI7XG5leHBvcnQgY29uc3QgY2xpZW50SW5mb0VtcHR5RXJyb3IgPSBcImNsaWVudF9pbmZvX2VtcHR5X2Vycm9yXCI7XG5leHBvcnQgY29uc3QgdG9rZW5QYXJzaW5nRXJyb3IgPSBcInRva2VuX3BhcnNpbmdfZXJyb3JcIjtcbmV4cG9ydCBjb25zdCBudWxsT3JFbXB0eVRva2VuID0gXCJudWxsX29yX2VtcHR5X3Rva2VuXCI7XG5leHBvcnQgY29uc3QgZW5kcG9pbnRSZXNvbHV0aW9uRXJyb3IgPSBcImVuZHBvaW50c19yZXNvbHV0aW9uX2Vycm9yXCI7XG5leHBvcnQgY29uc3QgbmV0d29ya0Vycm9yID0gXCJuZXR3b3JrX2Vycm9yXCI7XG5leHBvcnQgY29uc3Qgb3BlbklkQ29uZmlnRXJyb3IgPSBcIm9wZW5pZF9jb25maWdfZXJyb3JcIjtcbmV4cG9ydCBjb25zdCBoYXNoTm90RGVzZXJpYWxpemVkID0gXCJoYXNoX25vdF9kZXNlcmlhbGl6ZWRcIjtcbmV4cG9ydCBjb25zdCBpbnZhbGlkU3RhdGUgPSBcImludmFsaWRfc3RhdGVcIjtcbmV4cG9ydCBjb25zdCBzdGF0ZU1pc21hdGNoID0gXCJzdGF0ZV9taXNtYXRjaFwiO1xuZXhwb3J0IGNvbnN0IHN0YXRlTm90Rm91bmQgPSBcInN0YXRlX25vdF9mb3VuZFwiO1xuZXhwb3J0IGNvbnN0IG5vbmNlTWlzbWF0Y2ggPSBcIm5vbmNlX21pc21hdGNoXCI7XG5leHBvcnQgY29uc3QgYXV0aFRpbWVOb3RGb3VuZCA9IFwiYXV0aF90aW1lX25vdF9mb3VuZFwiO1xuZXhwb3J0IGNvbnN0IG1heEFnZVRyYW5zcGlyZWQgPSBcIm1heF9hZ2VfdHJhbnNwaXJlZFwiO1xuZXhwb3J0IGNvbnN0IG11bHRpcGxlTWF0Y2hpbmdUb2tlbnMgPSBcIm11bHRpcGxlX21hdGNoaW5nX3Rva2Vuc1wiO1xuZXhwb3J0IGNvbnN0IG11bHRpcGxlTWF0Y2hpbmdBY2NvdW50cyA9IFwibXVsdGlwbGVfbWF0Y2hpbmdfYWNjb3VudHNcIjtcbmV4cG9ydCBjb25zdCBtdWx0aXBsZU1hdGNoaW5nQXBwTWV0YWRhdGEgPSBcIm11bHRpcGxlX21hdGNoaW5nX2FwcE1ldGFkYXRhXCI7XG5leHBvcnQgY29uc3QgcmVxdWVzdENhbm5vdEJlTWFkZSA9IFwicmVxdWVzdF9jYW5ub3RfYmVfbWFkZVwiO1xuZXhwb3J0IGNvbnN0IGNhbm5vdFJlbW92ZUVtcHR5U2NvcGUgPSBcImNhbm5vdF9yZW1vdmVfZW1wdHlfc2NvcGVcIjtcbmV4cG9ydCBjb25zdCBjYW5ub3RBcHBlbmRTY29wZVNldCA9IFwiY2Fubm90X2FwcGVuZF9zY29wZXNldFwiO1xuZXhwb3J0IGNvbnN0IGVtcHR5SW5wdXRTY29wZVNldCA9IFwiZW1wdHlfaW5wdXRfc2NvcGVzZXRcIjtcbmV4cG9ydCBjb25zdCBkZXZpY2VDb2RlUG9sbGluZ0NhbmNlbGxlZCA9IFwiZGV2aWNlX2NvZGVfcG9sbGluZ19jYW5jZWxsZWRcIjtcbmV4cG9ydCBjb25zdCBkZXZpY2VDb2RlRXhwaXJlZCA9IFwiZGV2aWNlX2NvZGVfZXhwaXJlZFwiO1xuZXhwb3J0IGNvbnN0IGRldmljZUNvZGVVbmtub3duRXJyb3IgPSBcImRldmljZV9jb2RlX3Vua25vd25fZXJyb3JcIjtcbmV4cG9ydCBjb25zdCBub0FjY291bnRJblNpbGVudFJlcXVlc3QgPSBcIm5vX2FjY291bnRfaW5fc2lsZW50X3JlcXVlc3RcIjtcbmV4cG9ydCBjb25zdCBpbnZhbGlkQ2FjaGVSZWNvcmQgPSBcImludmFsaWRfY2FjaGVfcmVjb3JkXCI7XG5leHBvcnQgY29uc3QgaW52YWxpZENhY2hlRW52aXJvbm1lbnQgPSBcImludmFsaWRfY2FjaGVfZW52aXJvbm1lbnRcIjtcbmV4cG9ydCBjb25zdCBub0FjY291bnRGb3VuZCA9IFwibm9fYWNjb3VudF9mb3VuZFwiO1xuZXhwb3J0IGNvbnN0IG5vQ3J5cHRvT2JqZWN0ID0gXCJub19jcnlwdG9fb2JqZWN0XCI7XG5leHBvcnQgY29uc3QgdW5leHBlY3RlZENyZWRlbnRpYWxUeXBlID0gXCJ1bmV4cGVjdGVkX2NyZWRlbnRpYWxfdHlwZVwiO1xuZXhwb3J0IGNvbnN0IGludmFsaWRBc3NlcnRpb24gPSBcImludmFsaWRfYXNzZXJ0aW9uXCI7XG5leHBvcnQgY29uc3QgaW52YWxpZENsaWVudENyZWRlbnRpYWwgPSBcImludmFsaWRfY2xpZW50X2NyZWRlbnRpYWxcIjtcbmV4cG9ydCBjb25zdCB0b2tlblJlZnJlc2hSZXF1aXJlZCA9IFwidG9rZW5fcmVmcmVzaF9yZXF1aXJlZFwiO1xuZXhwb3J0IGNvbnN0IHVzZXJUaW1lb3V0UmVhY2hlZCA9IFwidXNlcl90aW1lb3V0X3JlYWNoZWRcIjtcbmV4cG9ydCBjb25zdCB0b2tlbkNsYWltc0NuZlJlcXVpcmVkRm9yU2lnbmVkSnd0ID1cbiAgICBcInRva2VuX2NsYWltc19jbmZfcmVxdWlyZWRfZm9yX3NpZ25lZGp3dFwiO1xuZXhwb3J0IGNvbnN0IGF1dGhvcml6YXRpb25Db2RlTWlzc2luZ0Zyb21TZXJ2ZXJSZXNwb25zZSA9XG4gICAgXCJhdXRob3JpemF0aW9uX2NvZGVfbWlzc2luZ19mcm9tX3NlcnZlcl9yZXNwb25zZVwiO1xuZXhwb3J0IGNvbnN0IGJpbmRpbmdLZXlOb3RSZW1vdmVkID0gXCJiaW5kaW5nX2tleV9ub3RfcmVtb3ZlZFwiO1xuZXhwb3J0IGNvbnN0IGVuZFNlc3Npb25FbmRwb2ludE5vdFN1cHBvcnRlZCA9XG4gICAgXCJlbmRfc2Vzc2lvbl9lbmRwb2ludF9ub3Rfc3VwcG9ydGVkXCI7XG5leHBvcnQgY29uc3Qga2V5SWRNaXNzaW5nID0gXCJrZXlfaWRfbWlzc2luZ1wiO1xuZXhwb3J0IGNvbnN0IG5vTmV0d29ya0Nvbm5lY3Rpdml0eSA9IFwibm9fbmV0d29ya19jb25uZWN0aXZpdHlcIjtcbmV4cG9ydCBjb25zdCB1c2VyQ2FuY2VsZWQgPSBcInVzZXJfY2FuY2VsZWRcIjtcbmV4cG9ydCBjb25zdCBtaXNzaW5nVGVuYW50SWRFcnJvciA9IFwibWlzc2luZ190ZW5hbnRfaWRfZXJyb3JcIjtcbmV4cG9ydCBjb25zdCBtZXRob2ROb3RJbXBsZW1lbnRlZCA9IFwibWV0aG9kX25vdF9pbXBsZW1lbnRlZFwiO1xuZXhwb3J0IGNvbnN0IG5lc3RlZEFwcEF1dGhCcmlkZ2VEaXNhYmxlZCA9IFwibmVzdGVkX2FwcF9hdXRoX2JyaWRnZV9kaXNhYmxlZFwiO1xuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBBdXRoRXJyb3IgfSBmcm9tIFwiLi9BdXRoRXJyb3IuanNcIjtcbmltcG9ydCAqIGFzIENsaWVudEF1dGhFcnJvckNvZGVzIGZyb20gXCIuL0NsaWVudEF1dGhFcnJvckNvZGVzLmpzXCI7XG5leHBvcnQgeyBDbGllbnRBdXRoRXJyb3JDb2RlcyB9OyAvLyBBbGxvdyBpbXBvcnRpbmcgYXMgXCJDbGllbnRBdXRoRXJyb3JDb2Rlc1wiO1xuXG4vKipcbiAqIENsaWVudEF1dGhFcnJvck1lc3NhZ2UgY2xhc3MgY29udGFpbmluZyBzdHJpbmcgY29uc3RhbnRzIHVzZWQgYnkgZXJyb3IgY29kZXMgYW5kIG1lc3NhZ2VzLlxuICovXG5cbmV4cG9ydCBjb25zdCBDbGllbnRBdXRoRXJyb3JNZXNzYWdlcyA9IHtcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMuY2xpZW50SW5mb0RlY29kaW5nRXJyb3JdOlxuICAgICAgICBcIlRoZSBjbGllbnQgaW5mbyBjb3VsZCBub3QgYmUgcGFyc2VkL2RlY29kZWQgY29ycmVjdGx5XCIsXG4gICAgW0NsaWVudEF1dGhFcnJvckNvZGVzLmNsaWVudEluZm9FbXB0eUVycm9yXTogXCJUaGUgY2xpZW50IGluZm8gd2FzIGVtcHR5XCIsXG4gICAgW0NsaWVudEF1dGhFcnJvckNvZGVzLnRva2VuUGFyc2luZ0Vycm9yXTogXCJUb2tlbiBjYW5ub3QgYmUgcGFyc2VkXCIsXG4gICAgW0NsaWVudEF1dGhFcnJvckNvZGVzLm51bGxPckVtcHR5VG9rZW5dOiBcIlRoZSB0b2tlbiBpcyBudWxsIG9yIGVtcHR5XCIsXG4gICAgW0NsaWVudEF1dGhFcnJvckNvZGVzLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yXTpcbiAgICAgICAgXCJFbmRwb2ludHMgY2Fubm90IGJlIHJlc29sdmVkXCIsXG4gICAgW0NsaWVudEF1dGhFcnJvckNvZGVzLm5ldHdvcmtFcnJvcl06IFwiTmV0d29yayByZXF1ZXN0IGZhaWxlZFwiLFxuICAgIFtDbGllbnRBdXRoRXJyb3JDb2Rlcy5vcGVuSWRDb25maWdFcnJvcl06XG4gICAgICAgIFwiQ291bGQgbm90IHJldHJpZXZlIGVuZHBvaW50cy4gQ2hlY2sgeW91ciBhdXRob3JpdHkgYW5kIHZlcmlmeSB0aGUgLndlbGwta25vd24vb3BlbmlkLWNvbmZpZ3VyYXRpb24gZW5kcG9pbnQgcmV0dXJucyB0aGUgcmVxdWlyZWQgZW5kcG9pbnRzLlwiLFxuICAgIFtDbGllbnRBdXRoRXJyb3JDb2Rlcy5oYXNoTm90RGVzZXJpYWxpemVkXTpcbiAgICAgICAgXCJUaGUgaGFzaCBwYXJhbWV0ZXJzIGNvdWxkIG5vdCBiZSBkZXNlcmlhbGl6ZWRcIixcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZFN0YXRlXTogXCJTdGF0ZSB3YXMgbm90IHRoZSBleHBlY3RlZCBmb3JtYXRcIixcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMuc3RhdGVNaXNtYXRjaF06IFwiU3RhdGUgbWlzbWF0Y2ggZXJyb3JcIixcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMuc3RhdGVOb3RGb3VuZF06IFwiU3RhdGUgbm90IGZvdW5kXCIsXG4gICAgW0NsaWVudEF1dGhFcnJvckNvZGVzLm5vbmNlTWlzbWF0Y2hdOiBcIk5vbmNlIG1pc21hdGNoIGVycm9yXCIsXG4gICAgW0NsaWVudEF1dGhFcnJvckNvZGVzLmF1dGhUaW1lTm90Rm91bmRdOlxuICAgICAgICBcIk1heCBBZ2Ugd2FzIHJlcXVlc3RlZCBhbmQgdGhlIElEIHRva2VuIGlzIG1pc3NpbmcgdGhlIGF1dGhfdGltZSB2YXJpYWJsZS5cIiArXG4gICAgICAgIFwiIGF1dGhfdGltZSBpcyBhbiBvcHRpb25hbCBjbGFpbSBhbmQgaXMgbm90IGVuYWJsZWQgYnkgZGVmYXVsdCAtIGl0IG11c3QgYmUgZW5hYmxlZC5cIiArXG4gICAgICAgIFwiIFNlZSBodHRwczovL2FrYS5tcy9tc2FsanMvb3B0aW9uYWwtY2xhaW1zIGZvciBtb3JlIGluZm9ybWF0aW9uLlwiLFxuICAgIFtDbGllbnRBdXRoRXJyb3JDb2Rlcy5tYXhBZ2VUcmFuc3BpcmVkXTpcbiAgICAgICAgXCJNYXggQWdlIGlzIHNldCB0byAwLCBvciB0b28gbXVjaCB0aW1lIGhhcyBlbGFwc2VkIHNpbmNlIHRoZSBsYXN0IGVuZC11c2VyIGF1dGhlbnRpY2F0aW9uLlwiLFxuICAgIFtDbGllbnRBdXRoRXJyb3JDb2Rlcy5tdWx0aXBsZU1hdGNoaW5nVG9rZW5zXTpcbiAgICAgICAgXCJUaGUgY2FjaGUgY29udGFpbnMgbXVsdGlwbGUgdG9rZW5zIHNhdGlzZnlpbmcgdGhlIHJlcXVpcmVtZW50cy4gXCIgK1xuICAgICAgICBcIkNhbGwgQWNxdWlyZVRva2VuIGFnYWluIHByb3ZpZGluZyBtb3JlIHJlcXVpcmVtZW50cyBzdWNoIGFzIGF1dGhvcml0eSBvciBhY2NvdW50LlwiLFxuICAgIFtDbGllbnRBdXRoRXJyb3JDb2Rlcy5tdWx0aXBsZU1hdGNoaW5nQWNjb3VudHNdOlxuICAgICAgICBcIlRoZSBjYWNoZSBjb250YWlucyBtdWx0aXBsZSBhY2NvdW50cyBzYXRpc2Z5aW5nIHRoZSBnaXZlbiBwYXJhbWV0ZXJzLiBQbGVhc2UgcGFzcyBtb3JlIGluZm8gdG8gb2J0YWluIHRoZSBjb3JyZWN0IGFjY291bnRcIixcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMubXVsdGlwbGVNYXRjaGluZ0FwcE1ldGFkYXRhXTpcbiAgICAgICAgXCJUaGUgY2FjaGUgY29udGFpbnMgbXVsdGlwbGUgYXBwTWV0YWRhdGEgc2F0aXNmeWluZyB0aGUgZ2l2ZW4gcGFyYW1ldGVycy4gUGxlYXNlIHBhc3MgbW9yZSBpbmZvIHRvIG9idGFpbiB0aGUgY29ycmVjdCBhcHBNZXRhZGF0YVwiLFxuICAgIFtDbGllbnRBdXRoRXJyb3JDb2Rlcy5yZXF1ZXN0Q2Fubm90QmVNYWRlXTpcbiAgICAgICAgXCJUb2tlbiByZXF1ZXN0IGNhbm5vdCBiZSBtYWRlIHdpdGhvdXQgYXV0aG9yaXphdGlvbiBjb2RlIG9yIHJlZnJlc2ggdG9rZW4uXCIsXG4gICAgW0NsaWVudEF1dGhFcnJvckNvZGVzLmNhbm5vdFJlbW92ZUVtcHR5U2NvcGVdOlxuICAgICAgICBcIkNhbm5vdCByZW1vdmUgbnVsbCBvciBlbXB0eSBzY29wZSBmcm9tIFNjb3BlU2V0XCIsXG4gICAgW0NsaWVudEF1dGhFcnJvckNvZGVzLmNhbm5vdEFwcGVuZFNjb3BlU2V0XTogXCJDYW5ub3QgYXBwZW5kIFNjb3BlU2V0XCIsXG4gICAgW0NsaWVudEF1dGhFcnJvckNvZGVzLmVtcHR5SW5wdXRTY29wZVNldF06XG4gICAgICAgIFwiRW1wdHkgaW5wdXQgU2NvcGVTZXQgY2Fubm90IGJlIHByb2Nlc3NlZFwiLFxuICAgIFtDbGllbnRBdXRoRXJyb3JDb2Rlcy5kZXZpY2VDb2RlUG9sbGluZ0NhbmNlbGxlZF06XG4gICAgICAgIFwiQ2FsbGVyIGhhcyBjYW5jZWxsZWQgdG9rZW4gZW5kcG9pbnQgcG9sbGluZyBkdXJpbmcgZGV2aWNlIGNvZGUgZmxvdyBieSBzZXR0aW5nIERldmljZUNvZGVSZXF1ZXN0LmNhbmNlbCA9IHRydWUuXCIsXG4gICAgW0NsaWVudEF1dGhFcnJvckNvZGVzLmRldmljZUNvZGVFeHBpcmVkXTogXCJEZXZpY2UgY29kZSBpcyBleHBpcmVkLlwiLFxuICAgIFtDbGllbnRBdXRoRXJyb3JDb2Rlcy5kZXZpY2VDb2RlVW5rbm93bkVycm9yXTpcbiAgICAgICAgXCJEZXZpY2UgY29kZSBzdG9wcGVkIHBvbGxpbmcgZm9yIHVua25vd24gcmVhc29ucy5cIixcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMubm9BY2NvdW50SW5TaWxlbnRSZXF1ZXN0XTpcbiAgICAgICAgXCJQbGVhc2UgcGFzcyBhbiBhY2NvdW50IG9iamVjdCwgc2lsZW50IGZsb3cgaXMgbm90IHN1cHBvcnRlZCB3aXRob3V0IGFjY291bnQgaW5mb3JtYXRpb25cIixcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZENhY2hlUmVjb3JkXTpcbiAgICAgICAgXCJDYWNoZSByZWNvcmQgb2JqZWN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZC5cIixcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZENhY2hlRW52aXJvbm1lbnRdOlxuICAgICAgICBcIkludmFsaWQgZW52aXJvbm1lbnQgd2hlbiBhdHRlbXB0aW5nIHRvIGNyZWF0ZSBjYWNoZSBlbnRyeVwiLFxuICAgIFtDbGllbnRBdXRoRXJyb3JDb2Rlcy5ub0FjY291bnRGb3VuZF06XG4gICAgICAgIFwiTm8gYWNjb3VudCBmb3VuZCBpbiBjYWNoZSBmb3IgZ2l2ZW4ga2V5LlwiLFxuICAgIFtDbGllbnRBdXRoRXJyb3JDb2Rlcy5ub0NyeXB0b09iamVjdF06IFwiTm8gY3J5cHRvIG9iamVjdCBkZXRlY3RlZC5cIixcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMudW5leHBlY3RlZENyZWRlbnRpYWxUeXBlXTpcbiAgICAgICAgXCJVbmV4cGVjdGVkIGNyZWRlbnRpYWwgdHlwZS5cIixcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZEFzc2VydGlvbl06XG4gICAgICAgIFwiQ2xpZW50IGFzc2VydGlvbiBtdXN0IG1lZXQgcmVxdWlyZW1lbnRzIGRlc2NyaWJlZCBpbiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNzUxNVwiLFxuICAgIFtDbGllbnRBdXRoRXJyb3JDb2Rlcy5pbnZhbGlkQ2xpZW50Q3JlZGVudGlhbF06XG4gICAgICAgIFwiQ2xpZW50IGNyZWRlbnRpYWwgKHNlY3JldCwgY2VydGlmaWNhdGUsIG9yIGFzc2VydGlvbikgbXVzdCBub3QgYmUgZW1wdHkgd2hlbiBjcmVhdGluZyBhIGNvbmZpZGVudGlhbCBjbGllbnQuIEFuIGFwcGxpY2F0aW9uIHNob3VsZCBhdCBtb3N0IGhhdmUgb25lIGNyZWRlbnRpYWxcIixcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMudG9rZW5SZWZyZXNoUmVxdWlyZWRdOlxuICAgICAgICBcIkNhbm5vdCByZXR1cm4gdG9rZW4gZnJvbSBjYWNoZSBiZWNhdXNlIGl0IG11c3QgYmUgcmVmcmVzaGVkLiBUaGlzIG1heSBiZSBkdWUgdG8gb25lIG9mIHRoZSBmb2xsb3dpbmcgcmVhc29uczogZm9yY2VSZWZyZXNoIHBhcmFtZXRlciBpcyBzZXQgdG8gdHJ1ZSwgY2xhaW1zIGhhdmUgYmVlbiByZXF1ZXN0ZWQsIHRoZXJlIGlzIG5vIGNhY2hlZCBhY2Nlc3MgdG9rZW4gb3IgaXQgaXMgZXhwaXJlZC5cIixcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMudXNlclRpbWVvdXRSZWFjaGVkXTpcbiAgICAgICAgXCJVc2VyIGRlZmluZWQgdGltZW91dCBmb3IgZGV2aWNlIGNvZGUgcG9sbGluZyByZWFjaGVkXCIsXG4gICAgW0NsaWVudEF1dGhFcnJvckNvZGVzLnRva2VuQ2xhaW1zQ25mUmVxdWlyZWRGb3JTaWduZWRKd3RdOlxuICAgICAgICBcIkNhbm5vdCBnZW5lcmF0ZSBhIFBPUCBqd3QgaWYgdGhlIHRva2VuX2NsYWltcyBhcmUgbm90IHBvcHVsYXRlZFwiLFxuICAgIFtDbGllbnRBdXRoRXJyb3JDb2Rlcy5hdXRob3JpemF0aW9uQ29kZU1pc3NpbmdGcm9tU2VydmVyUmVzcG9uc2VdOlxuICAgICAgICBcIlNlcnZlciByZXNwb25zZSBkb2VzIG5vdCBjb250YWluIGFuIGF1dGhvcml6YXRpb24gY29kZSB0byBwcm9jZWVkXCIsXG4gICAgW0NsaWVudEF1dGhFcnJvckNvZGVzLmJpbmRpbmdLZXlOb3RSZW1vdmVkXTpcbiAgICAgICAgXCJDb3VsZCBub3QgcmVtb3ZlIHRoZSBjcmVkZW50aWFsJ3MgYmluZGluZyBrZXkgZnJvbSBzdG9yYWdlLlwiLFxuICAgIFtDbGllbnRBdXRoRXJyb3JDb2Rlcy5lbmRTZXNzaW9uRW5kcG9pbnROb3RTdXBwb3J0ZWRdOlxuICAgICAgICBcIlRoZSBwcm92aWRlZCBhdXRob3JpdHkgZG9lcyBub3Qgc3VwcG9ydCBsb2dvdXRcIixcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMua2V5SWRNaXNzaW5nXTpcbiAgICAgICAgXCJBIGtleUlkIHZhbHVlIGlzIG1pc3NpbmcgZnJvbSB0aGUgcmVxdWVzdGVkIGJvdW5kIHRva2VuJ3MgY2FjaGUgcmVjb3JkIGFuZCBpcyByZXF1aXJlZCB0byBtYXRjaCB0aGUgdG9rZW4gdG8gaXQncyBzdG9yZWQgYmluZGluZyBrZXkuXCIsXG4gICAgW0NsaWVudEF1dGhFcnJvckNvZGVzLm5vTmV0d29ya0Nvbm5lY3Rpdml0eV06XG4gICAgICAgIFwiTm8gbmV0d29yayBjb25uZWN0aXZpdHkuIENoZWNrIHlvdXIgaW50ZXJuZXQgY29ubmVjdGlvbi5cIixcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMudXNlckNhbmNlbGVkXTogXCJVc2VyIGNhbmNlbGxlZCB0aGUgZmxvdy5cIixcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMubWlzc2luZ1RlbmFudElkRXJyb3JdOlxuICAgICAgICBcIkEgdGVuYW50IGlkIC0gbm90IGNvbW1vbiwgb3JnYW5pemF0aW9ucywgb3IgY29uc3VtZXJzIC0gbXVzdCBiZSBzcGVjaWZpZWQgd2hlbiB1c2luZyB0aGUgY2xpZW50X2NyZWRlbnRpYWxzIGZsb3cuXCIsXG4gICAgW0NsaWVudEF1dGhFcnJvckNvZGVzLm1ldGhvZE5vdEltcGxlbWVudGVkXTpcbiAgICAgICAgXCJUaGlzIG1ldGhvZCBoYXMgbm90IGJlZW4gaW1wbGVtZW50ZWRcIixcbiAgICBbQ2xpZW50QXV0aEVycm9yQ29kZXMubmVzdGVkQXBwQXV0aEJyaWRnZURpc2FibGVkXTpcbiAgICAgICAgXCJUaGUgbmVzdGVkIGFwcCBhdXRoIGJyaWRnZSBpcyBkaXNhYmxlZFwiLFxufTtcblxuLyoqXG4gKiBTdHJpbmcgY29uc3RhbnRzIHVzZWQgYnkgZXJyb3IgY29kZXMgYW5kIG1lc3NhZ2VzLlxuICogQGRlcHJlY2F0ZWQgVXNlIENsaWVudEF1dGhFcnJvckNvZGVzIGluc3RlYWRcbiAqL1xuZXhwb3J0IGNvbnN0IENsaWVudEF1dGhFcnJvck1lc3NhZ2UgPSB7XG4gICAgY2xpZW50SW5mb0RlY29kaW5nRXJyb3I6IHtcbiAgICAgICAgY29kZTogQ2xpZW50QXV0aEVycm9yQ29kZXMuY2xpZW50SW5mb0RlY29kaW5nRXJyb3IsXG4gICAgICAgIGRlc2M6IENsaWVudEF1dGhFcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuY2xpZW50SW5mb0RlY29kaW5nRXJyb3JcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIGNsaWVudEluZm9FbXB0eUVycm9yOiB7XG4gICAgICAgIGNvZGU6IENsaWVudEF1dGhFcnJvckNvZGVzLmNsaWVudEluZm9FbXB0eUVycm9yLFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLmNsaWVudEluZm9FbXB0eUVycm9yXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICB0b2tlblBhcnNpbmdFcnJvcjoge1xuICAgICAgICBjb2RlOiBDbGllbnRBdXRoRXJyb3JDb2Rlcy50b2tlblBhcnNpbmdFcnJvcixcbiAgICAgICAgZGVzYzogQ2xpZW50QXV0aEVycm9yTWVzc2FnZXNbQ2xpZW50QXV0aEVycm9yQ29kZXMudG9rZW5QYXJzaW5nRXJyb3JdLFxuICAgIH0sXG4gICAgbnVsbE9yRW1wdHlUb2tlbjoge1xuICAgICAgICBjb2RlOiBDbGllbnRBdXRoRXJyb3JDb2Rlcy5udWxsT3JFbXB0eVRva2VuLFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tDbGllbnRBdXRoRXJyb3JDb2Rlcy5udWxsT3JFbXB0eVRva2VuXSxcbiAgICB9LFxuICAgIGVuZHBvaW50UmVzb2x1dGlvbkVycm9yOiB7XG4gICAgICAgIGNvZGU6IENsaWVudEF1dGhFcnJvckNvZGVzLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yLFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBuZXR3b3JrRXJyb3I6IHtcbiAgICAgICAgY29kZTogQ2xpZW50QXV0aEVycm9yQ29kZXMubmV0d29ya0Vycm9yLFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tDbGllbnRBdXRoRXJyb3JDb2Rlcy5uZXR3b3JrRXJyb3JdLFxuICAgIH0sXG4gICAgdW5hYmxlVG9HZXRPcGVuaWRDb25maWdFcnJvcjoge1xuICAgICAgICBjb2RlOiBDbGllbnRBdXRoRXJyb3JDb2Rlcy5vcGVuSWRDb25maWdFcnJvcixcbiAgICAgICAgZGVzYzogQ2xpZW50QXV0aEVycm9yTWVzc2FnZXNbQ2xpZW50QXV0aEVycm9yQ29kZXMub3BlbklkQ29uZmlnRXJyb3JdLFxuICAgIH0sXG4gICAgaGFzaE5vdERlc2VyaWFsaXplZDoge1xuICAgICAgICBjb2RlOiBDbGllbnRBdXRoRXJyb3JDb2Rlcy5oYXNoTm90RGVzZXJpYWxpemVkLFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tDbGllbnRBdXRoRXJyb3JDb2Rlcy5oYXNoTm90RGVzZXJpYWxpemVkXSxcbiAgICB9LFxuICAgIGludmFsaWRTdGF0ZUVycm9yOiB7XG4gICAgICAgIGNvZGU6IENsaWVudEF1dGhFcnJvckNvZGVzLmludmFsaWRTdGF0ZSxcbiAgICAgICAgZGVzYzogQ2xpZW50QXV0aEVycm9yTWVzc2FnZXNbQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZFN0YXRlXSxcbiAgICB9LFxuICAgIHN0YXRlTWlzbWF0Y2hFcnJvcjoge1xuICAgICAgICBjb2RlOiBDbGllbnRBdXRoRXJyb3JDb2Rlcy5zdGF0ZU1pc21hdGNoLFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tDbGllbnRBdXRoRXJyb3JDb2Rlcy5zdGF0ZU1pc21hdGNoXSxcbiAgICB9LFxuICAgIHN0YXRlTm90Rm91bmRFcnJvcjoge1xuICAgICAgICBjb2RlOiBDbGllbnRBdXRoRXJyb3JDb2Rlcy5zdGF0ZU5vdEZvdW5kLFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tDbGllbnRBdXRoRXJyb3JDb2Rlcy5zdGF0ZU5vdEZvdW5kXSxcbiAgICB9LFxuICAgIG5vbmNlTWlzbWF0Y2hFcnJvcjoge1xuICAgICAgICBjb2RlOiBDbGllbnRBdXRoRXJyb3JDb2Rlcy5ub25jZU1pc21hdGNoLFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tDbGllbnRBdXRoRXJyb3JDb2Rlcy5ub25jZU1pc21hdGNoXSxcbiAgICB9LFxuICAgIGF1dGhUaW1lTm90Rm91bmRFcnJvcjoge1xuICAgICAgICBjb2RlOiBDbGllbnRBdXRoRXJyb3JDb2Rlcy5hdXRoVGltZU5vdEZvdW5kLFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tDbGllbnRBdXRoRXJyb3JDb2Rlcy5hdXRoVGltZU5vdEZvdW5kXSxcbiAgICB9LFxuICAgIG1heEFnZVRyYW5zcGlyZWQ6IHtcbiAgICAgICAgY29kZTogQ2xpZW50QXV0aEVycm9yQ29kZXMubWF4QWdlVHJhbnNwaXJlZCxcbiAgICAgICAgZGVzYzogQ2xpZW50QXV0aEVycm9yTWVzc2FnZXNbQ2xpZW50QXV0aEVycm9yQ29kZXMubWF4QWdlVHJhbnNwaXJlZF0sXG4gICAgfSxcbiAgICBtdWx0aXBsZU1hdGNoaW5nVG9rZW5zOiB7XG4gICAgICAgIGNvZGU6IENsaWVudEF1dGhFcnJvckNvZGVzLm11bHRpcGxlTWF0Y2hpbmdUb2tlbnMsXG4gICAgICAgIGRlc2M6IENsaWVudEF1dGhFcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMubXVsdGlwbGVNYXRjaGluZ1Rva2Vuc1xuICAgICAgICBdLFxuICAgIH0sXG4gICAgbXVsdGlwbGVNYXRjaGluZ0FjY291bnRzOiB7XG4gICAgICAgIGNvZGU6IENsaWVudEF1dGhFcnJvckNvZGVzLm11bHRpcGxlTWF0Y2hpbmdBY2NvdW50cyxcbiAgICAgICAgZGVzYzogQ2xpZW50QXV0aEVycm9yTWVzc2FnZXNbXG4gICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy5tdWx0aXBsZU1hdGNoaW5nQWNjb3VudHNcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIG11bHRpcGxlTWF0Y2hpbmdBcHBNZXRhZGF0YToge1xuICAgICAgICBjb2RlOiBDbGllbnRBdXRoRXJyb3JDb2Rlcy5tdWx0aXBsZU1hdGNoaW5nQXBwTWV0YWRhdGEsXG4gICAgICAgIGRlc2M6IENsaWVudEF1dGhFcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMubXVsdGlwbGVNYXRjaGluZ0FwcE1ldGFkYXRhXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICB0b2tlblJlcXVlc3RDYW5ub3RCZU1hZGU6IHtcbiAgICAgICAgY29kZTogQ2xpZW50QXV0aEVycm9yQ29kZXMucmVxdWVzdENhbm5vdEJlTWFkZSxcbiAgICAgICAgZGVzYzogQ2xpZW50QXV0aEVycm9yTWVzc2FnZXNbQ2xpZW50QXV0aEVycm9yQ29kZXMucmVxdWVzdENhbm5vdEJlTWFkZV0sXG4gICAgfSxcbiAgICByZW1vdmVFbXB0eVNjb3BlRXJyb3I6IHtcbiAgICAgICAgY29kZTogQ2xpZW50QXV0aEVycm9yQ29kZXMuY2Fubm90UmVtb3ZlRW1wdHlTY29wZSxcbiAgICAgICAgZGVzYzogQ2xpZW50QXV0aEVycm9yTWVzc2FnZXNbXG4gICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy5jYW5ub3RSZW1vdmVFbXB0eVNjb3BlXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBhcHBlbmRTY29wZVNldEVycm9yOiB7XG4gICAgICAgIGNvZGU6IENsaWVudEF1dGhFcnJvckNvZGVzLmNhbm5vdEFwcGVuZFNjb3BlU2V0LFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLmNhbm5vdEFwcGVuZFNjb3BlU2V0XG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBlbXB0eUlucHV0U2NvcGVTZXRFcnJvcjoge1xuICAgICAgICBjb2RlOiBDbGllbnRBdXRoRXJyb3JDb2Rlcy5lbXB0eUlucHV0U2NvcGVTZXQsXG4gICAgICAgIGRlc2M6IENsaWVudEF1dGhFcnJvck1lc3NhZ2VzW0NsaWVudEF1dGhFcnJvckNvZGVzLmVtcHR5SW5wdXRTY29wZVNldF0sXG4gICAgfSxcbiAgICBEZXZpY2VDb2RlUG9sbGluZ0NhbmNlbGxlZDoge1xuICAgICAgICBjb2RlOiBDbGllbnRBdXRoRXJyb3JDb2Rlcy5kZXZpY2VDb2RlUG9sbGluZ0NhbmNlbGxlZCxcbiAgICAgICAgZGVzYzogQ2xpZW50QXV0aEVycm9yTWVzc2FnZXNbXG4gICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy5kZXZpY2VDb2RlUG9sbGluZ0NhbmNlbGxlZFxuICAgICAgICBdLFxuICAgIH0sXG4gICAgRGV2aWNlQ29kZUV4cGlyZWQ6IHtcbiAgICAgICAgY29kZTogQ2xpZW50QXV0aEVycm9yQ29kZXMuZGV2aWNlQ29kZUV4cGlyZWQsXG4gICAgICAgIGRlc2M6IENsaWVudEF1dGhFcnJvck1lc3NhZ2VzW0NsaWVudEF1dGhFcnJvckNvZGVzLmRldmljZUNvZGVFeHBpcmVkXSxcbiAgICB9LFxuICAgIERldmljZUNvZGVVbmtub3duRXJyb3I6IHtcbiAgICAgICAgY29kZTogQ2xpZW50QXV0aEVycm9yQ29kZXMuZGV2aWNlQ29kZVVua25vd25FcnJvcixcbiAgICAgICAgZGVzYzogQ2xpZW50QXV0aEVycm9yTWVzc2FnZXNbXG4gICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy5kZXZpY2VDb2RlVW5rbm93bkVycm9yXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBOb0FjY291bnRJblNpbGVudFJlcXVlc3Q6IHtcbiAgICAgICAgY29kZTogQ2xpZW50QXV0aEVycm9yQ29kZXMubm9BY2NvdW50SW5TaWxlbnRSZXF1ZXN0LFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLm5vQWNjb3VudEluU2lsZW50UmVxdWVzdFxuICAgICAgICBdLFxuICAgIH0sXG4gICAgaW52YWxpZENhY2hlUmVjb3JkOiB7XG4gICAgICAgIGNvZGU6IENsaWVudEF1dGhFcnJvckNvZGVzLmludmFsaWRDYWNoZVJlY29yZCxcbiAgICAgICAgZGVzYzogQ2xpZW50QXV0aEVycm9yTWVzc2FnZXNbQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZENhY2hlUmVjb3JkXSxcbiAgICB9LFxuICAgIGludmFsaWRDYWNoZUVudmlyb25tZW50OiB7XG4gICAgICAgIGNvZGU6IENsaWVudEF1dGhFcnJvckNvZGVzLmludmFsaWRDYWNoZUVudmlyb25tZW50LFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLmludmFsaWRDYWNoZUVudmlyb25tZW50XG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBub0FjY291bnRGb3VuZDoge1xuICAgICAgICBjb2RlOiBDbGllbnRBdXRoRXJyb3JDb2Rlcy5ub0FjY291bnRGb3VuZCxcbiAgICAgICAgZGVzYzogQ2xpZW50QXV0aEVycm9yTWVzc2FnZXNbQ2xpZW50QXV0aEVycm9yQ29kZXMubm9BY2NvdW50Rm91bmRdLFxuICAgIH0sXG4gICAgbm9DcnlwdG9PYmo6IHtcbiAgICAgICAgY29kZTogQ2xpZW50QXV0aEVycm9yQ29kZXMubm9DcnlwdG9PYmplY3QsXG4gICAgICAgIGRlc2M6IENsaWVudEF1dGhFcnJvck1lc3NhZ2VzW0NsaWVudEF1dGhFcnJvckNvZGVzLm5vQ3J5cHRvT2JqZWN0XSxcbiAgICB9LFxuICAgIHVuZXhwZWN0ZWRDcmVkZW50aWFsVHlwZToge1xuICAgICAgICBjb2RlOiBDbGllbnRBdXRoRXJyb3JDb2Rlcy51bmV4cGVjdGVkQ3JlZGVudGlhbFR5cGUsXG4gICAgICAgIGRlc2M6IENsaWVudEF1dGhFcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMudW5leHBlY3RlZENyZWRlbnRpYWxUeXBlXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBpbnZhbGlkQXNzZXJ0aW9uOiB7XG4gICAgICAgIGNvZGU6IENsaWVudEF1dGhFcnJvckNvZGVzLmludmFsaWRBc3NlcnRpb24sXG4gICAgICAgIGRlc2M6IENsaWVudEF1dGhFcnJvck1lc3NhZ2VzW0NsaWVudEF1dGhFcnJvckNvZGVzLmludmFsaWRBc3NlcnRpb25dLFxuICAgIH0sXG4gICAgaW52YWxpZENsaWVudENyZWRlbnRpYWw6IHtcbiAgICAgICAgY29kZTogQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZENsaWVudENyZWRlbnRpYWwsXG4gICAgICAgIGRlc2M6IENsaWVudEF1dGhFcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZENsaWVudENyZWRlbnRpYWxcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIHRva2VuUmVmcmVzaFJlcXVpcmVkOiB7XG4gICAgICAgIGNvZGU6IENsaWVudEF1dGhFcnJvckNvZGVzLnRva2VuUmVmcmVzaFJlcXVpcmVkLFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLnRva2VuUmVmcmVzaFJlcXVpcmVkXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICB1c2VyVGltZW91dFJlYWNoZWQ6IHtcbiAgICAgICAgY29kZTogQ2xpZW50QXV0aEVycm9yQ29kZXMudXNlclRpbWVvdXRSZWFjaGVkLFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tDbGllbnRBdXRoRXJyb3JDb2Rlcy51c2VyVGltZW91dFJlYWNoZWRdLFxuICAgIH0sXG4gICAgdG9rZW5DbGFpbXNSZXF1aXJlZDoge1xuICAgICAgICBjb2RlOiBDbGllbnRBdXRoRXJyb3JDb2Rlcy50b2tlbkNsYWltc0NuZlJlcXVpcmVkRm9yU2lnbmVkSnd0LFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLnRva2VuQ2xhaW1zQ25mUmVxdWlyZWRGb3JTaWduZWRKd3RcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIG5vQXV0aG9yaXphdGlvbkNvZGVGcm9tU2VydmVyOiB7XG4gICAgICAgIGNvZGU6IENsaWVudEF1dGhFcnJvckNvZGVzLmF1dGhvcml6YXRpb25Db2RlTWlzc2luZ0Zyb21TZXJ2ZXJSZXNwb25zZSxcbiAgICAgICAgZGVzYzogQ2xpZW50QXV0aEVycm9yTWVzc2FnZXNbXG4gICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy5hdXRob3JpemF0aW9uQ29kZU1pc3NpbmdGcm9tU2VydmVyUmVzcG9uc2VcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIGJpbmRpbmdLZXlOb3RSZW1vdmVkRXJyb3I6IHtcbiAgICAgICAgY29kZTogQ2xpZW50QXV0aEVycm9yQ29kZXMuYmluZGluZ0tleU5vdFJlbW92ZWQsXG4gICAgICAgIGRlc2M6IENsaWVudEF1dGhFcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuYmluZGluZ0tleU5vdFJlbW92ZWRcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIGxvZ291dE5vdFN1cHBvcnRlZDoge1xuICAgICAgICBjb2RlOiBDbGllbnRBdXRoRXJyb3JDb2Rlcy5lbmRTZXNzaW9uRW5kcG9pbnROb3RTdXBwb3J0ZWQsXG4gICAgICAgIGRlc2M6IENsaWVudEF1dGhFcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuZW5kU2Vzc2lvbkVuZHBvaW50Tm90U3VwcG9ydGVkXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBrZXlJZE1pc3Npbmc6IHtcbiAgICAgICAgY29kZTogQ2xpZW50QXV0aEVycm9yQ29kZXMua2V5SWRNaXNzaW5nLFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tDbGllbnRBdXRoRXJyb3JDb2Rlcy5rZXlJZE1pc3NpbmddLFxuICAgIH0sXG4gICAgbm9OZXR3b3JrQ29ubmVjdGl2aXR5OiB7XG4gICAgICAgIGNvZGU6IENsaWVudEF1dGhFcnJvckNvZGVzLm5vTmV0d29ya0Nvbm5lY3Rpdml0eSxcbiAgICAgICAgZGVzYzogQ2xpZW50QXV0aEVycm9yTWVzc2FnZXNbXG4gICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy5ub05ldHdvcmtDb25uZWN0aXZpdHlcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIHVzZXJDYW5jZWxlZEVycm9yOiB7XG4gICAgICAgIGNvZGU6IENsaWVudEF1dGhFcnJvckNvZGVzLnVzZXJDYW5jZWxlZCxcbiAgICAgICAgZGVzYzogQ2xpZW50QXV0aEVycm9yTWVzc2FnZXNbQ2xpZW50QXV0aEVycm9yQ29kZXMudXNlckNhbmNlbGVkXSxcbiAgICB9LFxuICAgIG1pc3NpbmdUZW5hbnRJZEVycm9yOiB7XG4gICAgICAgIGNvZGU6IENsaWVudEF1dGhFcnJvckNvZGVzLm1pc3NpbmdUZW5hbnRJZEVycm9yLFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLm1pc3NpbmdUZW5hbnRJZEVycm9yXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBuZXN0ZWRBcHBBdXRoQnJpZGdlRGlzYWJsZWQ6IHtcbiAgICAgICAgY29kZTogQ2xpZW50QXV0aEVycm9yQ29kZXMubmVzdGVkQXBwQXV0aEJyaWRnZURpc2FibGVkLFxuICAgICAgICBkZXNjOiBDbGllbnRBdXRoRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLm5lc3RlZEFwcEF1dGhCcmlkZ2VEaXNhYmxlZFxuICAgICAgICBdLFxuICAgIH0sXG59O1xuXG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIHRoZXJlIGlzIGFuIGVycm9yIGluIHRoZSBjbGllbnQgY29kZSBydW5uaW5nIG9uIHRoZSBicm93c2VyLlxuICovXG5leHBvcnQgY2xhc3MgQ2xpZW50QXV0aEVycm9yIGV4dGVuZHMgQXV0aEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihlcnJvckNvZGU6IHN0cmluZywgYWRkaXRpb25hbE1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoXG4gICAgICAgICAgICBlcnJvckNvZGUsXG4gICAgICAgICAgICBhZGRpdGlvbmFsTWVzc2FnZVxuICAgICAgICAgICAgICAgID8gYCR7Q2xpZW50QXV0aEVycm9yTWVzc2FnZXNbZXJyb3JDb2RlXX06ICR7YWRkaXRpb25hbE1lc3NhZ2V9YFxuICAgICAgICAgICAgICAgIDogQ2xpZW50QXV0aEVycm9yTWVzc2FnZXNbZXJyb3JDb2RlXVxuICAgICAgICApO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIkNsaWVudEF1dGhFcnJvclwiO1xuXG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBDbGllbnRBdXRoRXJyb3IucHJvdG90eXBlKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgZXJyb3JDb2RlOiBzdHJpbmcsXG4gICAgYWRkaXRpb25hbE1lc3NhZ2U/OiBzdHJpbmdcbik6IENsaWVudEF1dGhFcnJvciB7XG4gICAgcmV0dXJuIG5ldyBDbGllbnRBdXRoRXJyb3IoZXJyb3JDb2RlLCBhZGRpdGlvbmFsTWVzc2FnZSk7XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gICAgQ2xpZW50QXV0aEVycm9yQ29kZXMsXG4gICAgY3JlYXRlQ2xpZW50QXV0aEVycm9yLFxufSBmcm9tIFwiLi4vZXJyb3IvQ2xpZW50QXV0aEVycm9yLmpzXCI7XG5pbXBvcnQgeyBCYXNlQXV0aFJlcXVlc3QgfSBmcm9tIFwiLi4vcmVxdWVzdC9CYXNlQXV0aFJlcXVlc3QuanNcIjtcbmltcG9ydCB7IFNock9wdGlvbnMsIFNpZ25lZEh0dHBSZXF1ZXN0IH0gZnJvbSBcIi4vU2lnbmVkSHR0cFJlcXVlc3QuanNcIjtcblxuLyoqXG4gKiBUaGUgUGtjZUNvZGVzIHR5cGUgZGVzY3JpYmVzIHRoZSBzdHJ1Y3R1cmVcbiAqIG9mIG9iamVjdHMgdGhhdCBjb250YWluIFBLQ0UgY29kZVxuICogY2hhbGxlbmdlIGFuZCB2ZXJpZmllciBwYWlyc1xuICovXG5leHBvcnQgdHlwZSBQa2NlQ29kZXMgPSB7XG4gICAgdmVyaWZpZXI6IHN0cmluZztcbiAgICBjaGFsbGVuZ2U6IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIFNpZ25lZEh0dHBSZXF1ZXN0UGFyYW1ldGVycyA9IFBpY2s8XG4gICAgQmFzZUF1dGhSZXF1ZXN0LFxuICAgIHwgXCJyZXNvdXJjZVJlcXVlc3RNZXRob2RcIlxuICAgIHwgXCJyZXNvdXJjZVJlcXVlc3RVcmlcIlxuICAgIHwgXCJzaHJDbGFpbXNcIlxuICAgIHwgXCJzaHJOb25jZVwiXG4gICAgfCBcInNock9wdGlvbnNcIlxuPiAmIHtcbiAgICBjb3JyZWxhdGlvbklkPzogc3RyaW5nO1xufTtcblxuLyoqXG4gKiBJbnRlcmZhY2UgZm9yIGNyeXB0byBmdW5jdGlvbnMgdXNlZCBieSBsaWJyYXJ5XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUNyeXB0byB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGd1aWQgcmFuZG9tbHkuXG4gICAgICovXG4gICAgY3JlYXRlTmV3R3VpZCgpOiBzdHJpbmc7XG4gICAgLyoqXG4gICAgICogYmFzZTY0IEVuY29kZSBzdHJpbmdcbiAgICAgKiBAcGFyYW0gaW5wdXRcbiAgICAgKi9cbiAgICBiYXNlNjRFbmNvZGUoaW5wdXQ6IHN0cmluZyk6IHN0cmluZztcbiAgICAvKipcbiAgICAgKiBiYXNlNjQgZGVjb2RlIHN0cmluZ1xuICAgICAqIEBwYXJhbSBpbnB1dFxuICAgICAqL1xuICAgIGJhc2U2NERlY29kZShpbnB1dDogc3RyaW5nKTogc3RyaW5nO1xuICAgIC8qKlxuICAgICAqIGJhc2U2NCBVUkwgc2FmZSBlbmNvZGVkIHN0cmluZ1xuICAgICAqL1xuICAgIGJhc2U2NFVybEVuY29kZShpbnB1dDogc3RyaW5nKTogc3RyaW5nO1xuICAgIC8qKlxuICAgICAqIFN0cmluZ2lmaWVzIGFuZCBiYXNlNjRVcmwgZW5jb2RlcyBpbnB1dCBwdWJsaWMga2V5XG4gICAgICogQHBhcmFtIGlucHV0S2lkXG4gICAgICogQHJldHVybnMgQmFzZTY0VXJsIGVuY29kZWQgcHVibGljIGtleVxuICAgICAqL1xuICAgIGVuY29kZUtpZChpbnB1dEtpZDogc3RyaW5nKTogc3RyaW5nO1xuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBhbiBKV0sgUlNBIFMyNTYgVGh1bWJwcmludFxuICAgICAqIEBwYXJhbSByZXF1ZXN0XG4gICAgICovXG4gICAgZ2V0UHVibGljS2V5VGh1bWJwcmludChcbiAgICAgICAgcmVxdWVzdDogU2lnbmVkSHR0cFJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgKTogUHJvbWlzZTxzdHJpbmc+O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgY3J5cHRvZ3JhcGhpYyBrZXlwYWlyIGZyb20ga2V5IHN0b3JlIG1hdGNoaW5nIHRoZSBrZXlJZCBwYXNzZWQgaW5cbiAgICAgKiBAcGFyYW0ga2lkXG4gICAgICovXG4gICAgcmVtb3ZlVG9rZW5CaW5kaW5nS2V5KGtpZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPjtcbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGFsbCBjcnlwdG9ncmFwaGljIGtleXMgZnJvbSBJbmRleGVkREIgc3RvcmFnZVxuICAgICAqL1xuICAgIGNsZWFyS2V5c3RvcmUoKTogUHJvbWlzZTxib29sZWFuPjtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc2lnbmVkIHByb29mLW9mLXBvc3Nlc3Npb24gdG9rZW4gd2l0aCBhIGdpdmVuIGFjY2VzIHRva2VuIHRoYXQgY29udGFpbnMgYSBjbmYgY2xhaW0gd2l0aCB0aGUgcmVxdWlyZWQga2lkLlxuICAgICAqIEBwYXJhbSBhY2Nlc3NUb2tlblxuICAgICAqL1xuICAgIHNpZ25Kd3QoXG4gICAgICAgIHBheWxvYWQ6IFNpZ25lZEh0dHBSZXF1ZXN0LFxuICAgICAgICBraWQ6IHN0cmluZyxcbiAgICAgICAgc2hyT3B0aW9ucz86IFNock9wdGlvbnMsXG4gICAgICAgIGNvcnJlbGF0aW9uSWQ/OiBzdHJpbmdcbiAgICApOiBQcm9taXNlPHN0cmluZz47XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgU0hBLTI1NiBoYXNoIG9mIGFuIGlucHV0IHN0cmluZ1xuICAgICAqIEBwYXJhbSBwbGFpblRleHRcbiAgICAgKi9cbiAgICBoYXNoU3RyaW5nKHBsYWluVGV4dDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+O1xufVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9DUllQVE9fSU1QTEVNRU5UQVRJT046IElDcnlwdG8gPSB7XG4gICAgY3JlYXRlTmV3R3VpZDogKCk6IHN0cmluZyA9PiB7XG4gICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JDb2Rlcy5tZXRob2ROb3RJbXBsZW1lbnRlZCk7XG4gICAgfSxcbiAgICBiYXNlNjREZWNvZGU6ICgpOiBzdHJpbmcgPT4ge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubWV0aG9kTm90SW1wbGVtZW50ZWQpO1xuICAgIH0sXG4gICAgYmFzZTY0RW5jb2RlOiAoKTogc3RyaW5nID0+IHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvckNvZGVzLm1ldGhvZE5vdEltcGxlbWVudGVkKTtcbiAgICB9LFxuICAgIGJhc2U2NFVybEVuY29kZTogKCk6IHN0cmluZyA9PiB7XG4gICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JDb2Rlcy5tZXRob2ROb3RJbXBsZW1lbnRlZCk7XG4gICAgfSxcbiAgICBlbmNvZGVLaWQ6ICgpOiBzdHJpbmcgPT4ge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubWV0aG9kTm90SW1wbGVtZW50ZWQpO1xuICAgIH0sXG4gICAgYXN5bmMgZ2V0UHVibGljS2V5VGh1bWJwcmludCgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubWV0aG9kTm90SW1wbGVtZW50ZWQpO1xuICAgIH0sXG4gICAgYXN5bmMgcmVtb3ZlVG9rZW5CaW5kaW5nS2V5KCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubWV0aG9kTm90SW1wbGVtZW50ZWQpO1xuICAgIH0sXG4gICAgYXN5bmMgY2xlYXJLZXlzdG9yZSgpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvckNvZGVzLm1ldGhvZE5vdEltcGxlbWVudGVkKTtcbiAgICB9LFxuICAgIGFzeW5jIHNpZ25Kd3QoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvckNvZGVzLm1ldGhvZE5vdEltcGxlbWVudGVkKTtcbiAgICB9LFxuICAgIGFzeW5jIGhhc2hTdHJpbmcoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvckNvZGVzLm1ldGhvZE5vdEltcGxlbWVudGVkKTtcbiAgICB9LFxufTtcbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgTG9nZ2VyT3B0aW9ucyB9IGZyb20gXCIuLi9jb25maWcvQ2xpZW50Q29uZmlndXJhdGlvbi5qc1wiO1xuaW1wb3J0IHsgQ29uc3RhbnRzIH0gZnJvbSBcIi4uL3V0aWxzL0NvbnN0YW50cy5qc1wiO1xuXG4vKipcbiAqIE9wdGlvbnMgZm9yIGxvZ2dlciBtZXNzYWdlcy5cbiAqL1xuZXhwb3J0IHR5cGUgTG9nZ2VyTWVzc2FnZU9wdGlvbnMgPSB7XG4gICAgbG9nTGV2ZWw6IExvZ0xldmVsO1xuICAgIGNvbnRhaW5zUGlpPzogYm9vbGVhbjtcbiAgICBjb250ZXh0Pzogc3RyaW5nO1xuICAgIGNvcnJlbGF0aW9uSWQ/OiBzdHJpbmc7XG59O1xuXG4vKipcbiAqIExvZyBtZXNzYWdlIGxldmVsLlxuICovXG5leHBvcnQgZW51bSBMb2dMZXZlbCB7XG4gICAgRXJyb3IsXG4gICAgV2FybmluZyxcbiAgICBJbmZvLFxuICAgIFZlcmJvc2UsXG4gICAgVHJhY2UsXG59XG5cbi8qKlxuICogQ2FsbGJhY2sgdG8gc2VuZCB0aGUgbWVzc2FnZXMgdG8uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUxvZ2dlckNhbGxiYWNrIHtcbiAgICAobGV2ZWw6IExvZ0xldmVsLCBtZXNzYWdlOiBzdHJpbmcsIGNvbnRhaW5zUGlpOiBib29sZWFuKTogdm9pZDtcbn1cblxuLyoqXG4gKiBDbGFzcyB3aGljaCBmYWNpbGl0YXRlcyBsb2dnaW5nIG9mIG1lc3NhZ2VzIHRvIGEgc3BlY2lmaWMgcGxhY2UuXG4gKi9cbmV4cG9ydCBjbGFzcyBMb2dnZXIge1xuICAgIC8vIENvcnJlbGF0aW9uIElEIGZvciByZXF1ZXN0LCB1c3VhbGx5IHNldCBieSB1c2VyLlxuICAgIHByaXZhdGUgY29ycmVsYXRpb25JZDogc3RyaW5nO1xuXG4gICAgLy8gQ3VycmVudCBsb2cgbGV2ZWwsIGRlZmF1bHRzIHRvIGluZm8uXG4gICAgcHJpdmF0ZSBsZXZlbDogTG9nTGV2ZWwgPSBMb2dMZXZlbC5JbmZvO1xuXG4gICAgLy8gQm9vbGVhbiBkZXNjcmliaW5nIHdoZXRoZXIgUElJIGxvZ2dpbmcgaXMgYWxsb3dlZC5cbiAgICBwcml2YXRlIHBpaUxvZ2dpbmdFbmFibGVkOiBib29sZWFuO1xuXG4gICAgLy8gQ2FsbGJhY2sgdG8gc2VuZCBtZXNzYWdlcyB0by5cbiAgICBwcml2YXRlIGxvY2FsQ2FsbGJhY2s6IElMb2dnZXJDYWxsYmFjaztcblxuICAgIC8vIFBhY2thZ2UgbmFtZSBpbXBsZW1lbnRpbmcgdGhpcyBsb2dnZXJcbiAgICBwcml2YXRlIHBhY2thZ2VOYW1lOiBzdHJpbmc7XG5cbiAgICAvLyBQYWNrYWdlIHZlcnNpb24gaW1wbGVtZW50aW5nIHRoaXMgbG9nZ2VyXG4gICAgcHJpdmF0ZSBwYWNrYWdlVmVyc2lvbjogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGxvZ2dlck9wdGlvbnM6IExvZ2dlck9wdGlvbnMsXG4gICAgICAgIHBhY2thZ2VOYW1lPzogc3RyaW5nLFxuICAgICAgICBwYWNrYWdlVmVyc2lvbj86IHN0cmluZ1xuICAgICkge1xuICAgICAgICBjb25zdCBkZWZhdWx0TG9nZ2VyQ2FsbGJhY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHNldExvZ2dlck9wdGlvbnMgPVxuICAgICAgICAgICAgbG9nZ2VyT3B0aW9ucyB8fCBMb2dnZXIuY3JlYXRlRGVmYXVsdExvZ2dlck9wdGlvbnMoKTtcbiAgICAgICAgdGhpcy5sb2NhbENhbGxiYWNrID1cbiAgICAgICAgICAgIHNldExvZ2dlck9wdGlvbnMubG9nZ2VyQ2FsbGJhY2sgfHwgZGVmYXVsdExvZ2dlckNhbGxiYWNrO1xuICAgICAgICB0aGlzLnBpaUxvZ2dpbmdFbmFibGVkID0gc2V0TG9nZ2VyT3B0aW9ucy5waWlMb2dnaW5nRW5hYmxlZCB8fCBmYWxzZTtcbiAgICAgICAgdGhpcy5sZXZlbCA9XG4gICAgICAgICAgICB0eXBlb2Ygc2V0TG9nZ2VyT3B0aW9ucy5sb2dMZXZlbCA9PT0gXCJudW1iZXJcIlxuICAgICAgICAgICAgICAgID8gc2V0TG9nZ2VyT3B0aW9ucy5sb2dMZXZlbFxuICAgICAgICAgICAgICAgIDogTG9nTGV2ZWwuSW5mbztcbiAgICAgICAgdGhpcy5jb3JyZWxhdGlvbklkID1cbiAgICAgICAgICAgIHNldExvZ2dlck9wdGlvbnMuY29ycmVsYXRpb25JZCB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HO1xuICAgICAgICB0aGlzLnBhY2thZ2VOYW1lID0gcGFja2FnZU5hbWUgfHwgQ29uc3RhbnRzLkVNUFRZX1NUUklORztcbiAgICAgICAgdGhpcy5wYWNrYWdlVmVyc2lvbiA9IHBhY2thZ2VWZXJzaW9uIHx8IENvbnN0YW50cy5FTVBUWV9TVFJJTkc7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgY3JlYXRlRGVmYXVsdExvZ2dlck9wdGlvbnMoKTogTG9nZ2VyT3B0aW9ucyB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBsb2dnZXJDYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGFsbG93IHVzZXJzIHRvIG5vdCBzZXQgbG9nZ2VyQ2FsbGJhY2tcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwaWlMb2dnaW5nRW5hYmxlZDogZmFsc2UsXG4gICAgICAgICAgICBsb2dMZXZlbDogTG9nTGV2ZWwuSW5mbyxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgbmV3IExvZ2dlciB3aXRoIGV4aXN0aW5nIGNvbmZpZ3VyYXRpb25zLlxuICAgICAqL1xuICAgIHB1YmxpYyBjbG9uZShcbiAgICAgICAgcGFja2FnZU5hbWU6IHN0cmluZyxcbiAgICAgICAgcGFja2FnZVZlcnNpb246IHN0cmluZyxcbiAgICAgICAgY29ycmVsYXRpb25JZD86IHN0cmluZ1xuICAgICk6IExvZ2dlciB7XG4gICAgICAgIHJldHVybiBuZXcgTG9nZ2VyKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGxvZ2dlckNhbGxiYWNrOiB0aGlzLmxvY2FsQ2FsbGJhY2ssXG4gICAgICAgICAgICAgICAgcGlpTG9nZ2luZ0VuYWJsZWQ6IHRoaXMucGlpTG9nZ2luZ0VuYWJsZWQsXG4gICAgICAgICAgICAgICAgbG9nTGV2ZWw6IHRoaXMubGV2ZWwsXG4gICAgICAgICAgICAgICAgY29ycmVsYXRpb25JZDogY29ycmVsYXRpb25JZCB8fCB0aGlzLmNvcnJlbGF0aW9uSWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGFja2FnZU5hbWUsXG4gICAgICAgICAgICBwYWNrYWdlVmVyc2lvblxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvZyBtZXNzYWdlIHdpdGggcmVxdWlyZWQgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBwcml2YXRlIGxvZ01lc3NhZ2UoXG4gICAgICAgIGxvZ01lc3NhZ2U6IHN0cmluZyxcbiAgICAgICAgb3B0aW9uczogTG9nZ2VyTWVzc2FnZU9wdGlvbnNcbiAgICApOiB2b2lkIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgb3B0aW9ucy5sb2dMZXZlbCA+IHRoaXMubGV2ZWwgfHxcbiAgICAgICAgICAgICghdGhpcy5waWlMb2dnaW5nRW5hYmxlZCAmJiBvcHRpb25zLmNvbnRhaW5zUGlpKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvVVRDU3RyaW5nKCk7XG5cbiAgICAgICAgLy8gQWRkIGNvcnJlbGF0aW9uSWQgdG8gbG9ncyBpZiBzZXQsIGNvcnJlbGF0aW9uSWQgcHJvdmlkZWQgb24gbG9nIG1lc3NhZ2VzIHRha2UgcHJlY2VkZW5jZVxuICAgICAgICBjb25zdCBsb2dIZWFkZXIgPSBgWyR7dGltZXN0YW1wfV0gOiBbJHtcbiAgICAgICAgICAgIG9wdGlvbnMuY29ycmVsYXRpb25JZCB8fCB0aGlzLmNvcnJlbGF0aW9uSWQgfHwgXCJcIlxuICAgICAgICB9XWA7XG5cbiAgICAgICAgY29uc3QgbG9nID0gYCR7bG9nSGVhZGVyfSA6ICR7dGhpcy5wYWNrYWdlTmFtZX1AJHtcbiAgICAgICAgICAgIHRoaXMucGFja2FnZVZlcnNpb25cbiAgICAgICAgfSA6ICR7TG9nTGV2ZWxbb3B0aW9ucy5sb2dMZXZlbF19IC0gJHtsb2dNZXNzYWdlfWA7XG4gICAgICAgIC8vIGRlYnVnKGBtc2FsOiR7TG9nTGV2ZWxbb3B0aW9ucy5sb2dMZXZlbF19JHtvcHRpb25zLmNvbnRhaW5zUGlpID8gXCItUGlpXCI6IENvbnN0YW50cy5FTVBUWV9TVFJJTkd9JHtvcHRpb25zLmNvbnRleHQgPyBgOiR7b3B0aW9ucy5jb250ZXh0fWAgOiBDb25zdGFudHMuRU1QVFlfU1RSSU5HfWApKGxvZ01lc3NhZ2UpO1xuICAgICAgICB0aGlzLmV4ZWN1dGVDYWxsYmFjayhcbiAgICAgICAgICAgIG9wdGlvbnMubG9nTGV2ZWwsXG4gICAgICAgICAgICBsb2csXG4gICAgICAgICAgICBvcHRpb25zLmNvbnRhaW5zUGlpIHx8IGZhbHNlXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXhlY3V0ZSBjYWxsYmFjayB3aXRoIG1lc3NhZ2UuXG4gICAgICovXG4gICAgZXhlY3V0ZUNhbGxiYWNrKFxuICAgICAgICBsZXZlbDogTG9nTGV2ZWwsXG4gICAgICAgIG1lc3NhZ2U6IHN0cmluZyxcbiAgICAgICAgY29udGFpbnNQaWk6IGJvb2xlYW5cbiAgICApOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMubG9jYWxDYWxsYmFjaykge1xuICAgICAgICAgICAgdGhpcy5sb2NhbENhbGxiYWNrKGxldmVsLCBtZXNzYWdlLCBjb250YWluc1BpaSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2dzIGVycm9yIG1lc3NhZ2VzLlxuICAgICAqL1xuICAgIGVycm9yKG1lc3NhZ2U6IHN0cmluZywgY29ycmVsYXRpb25JZD86IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLmxvZ01lc3NhZ2UobWVzc2FnZSwge1xuICAgICAgICAgICAgbG9nTGV2ZWw6IExvZ0xldmVsLkVycm9yLFxuICAgICAgICAgICAgY29udGFpbnNQaWk6IGZhbHNlLFxuICAgICAgICAgICAgY29ycmVsYXRpb25JZDogY29ycmVsYXRpb25JZCB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2dzIGVycm9yIG1lc3NhZ2VzIHdpdGggUElJLlxuICAgICAqL1xuICAgIGVycm9yUGlpKG1lc3NhZ2U6IHN0cmluZywgY29ycmVsYXRpb25JZD86IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLmxvZ01lc3NhZ2UobWVzc2FnZSwge1xuICAgICAgICAgICAgbG9nTGV2ZWw6IExvZ0xldmVsLkVycm9yLFxuICAgICAgICAgICAgY29udGFpbnNQaWk6IHRydWUsXG4gICAgICAgICAgICBjb3JyZWxhdGlvbklkOiBjb3JyZWxhdGlvbklkIHx8IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvZ3Mgd2FybmluZyBtZXNzYWdlcy5cbiAgICAgKi9cbiAgICB3YXJuaW5nKG1lc3NhZ2U6IHN0cmluZywgY29ycmVsYXRpb25JZD86IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLmxvZ01lc3NhZ2UobWVzc2FnZSwge1xuICAgICAgICAgICAgbG9nTGV2ZWw6IExvZ0xldmVsLldhcm5pbmcsXG4gICAgICAgICAgICBjb250YWluc1BpaTogZmFsc2UsXG4gICAgICAgICAgICBjb3JyZWxhdGlvbklkOiBjb3JyZWxhdGlvbklkIHx8IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvZ3Mgd2FybmluZyBtZXNzYWdlcyB3aXRoIFBJSS5cbiAgICAgKi9cbiAgICB3YXJuaW5nUGlpKG1lc3NhZ2U6IHN0cmluZywgY29ycmVsYXRpb25JZD86IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLmxvZ01lc3NhZ2UobWVzc2FnZSwge1xuICAgICAgICAgICAgbG9nTGV2ZWw6IExvZ0xldmVsLldhcm5pbmcsXG4gICAgICAgICAgICBjb250YWluc1BpaTogdHJ1ZSxcbiAgICAgICAgICAgIGNvcnJlbGF0aW9uSWQ6IGNvcnJlbGF0aW9uSWQgfHwgQ29uc3RhbnRzLkVNUFRZX1NUUklORyxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9ncyBpbmZvIG1lc3NhZ2VzLlxuICAgICAqL1xuICAgIGluZm8obWVzc2FnZTogc3RyaW5nLCBjb3JyZWxhdGlvbklkPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMubG9nTWVzc2FnZShtZXNzYWdlLCB7XG4gICAgICAgICAgICBsb2dMZXZlbDogTG9nTGV2ZWwuSW5mbyxcbiAgICAgICAgICAgIGNvbnRhaW5zUGlpOiBmYWxzZSxcbiAgICAgICAgICAgIGNvcnJlbGF0aW9uSWQ6IGNvcnJlbGF0aW9uSWQgfHwgQ29uc3RhbnRzLkVNUFRZX1NUUklORyxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9ncyBpbmZvIG1lc3NhZ2VzIHdpdGggUElJLlxuICAgICAqL1xuICAgIGluZm9QaWkobWVzc2FnZTogc3RyaW5nLCBjb3JyZWxhdGlvbklkPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMubG9nTWVzc2FnZShtZXNzYWdlLCB7XG4gICAgICAgICAgICBsb2dMZXZlbDogTG9nTGV2ZWwuSW5mbyxcbiAgICAgICAgICAgIGNvbnRhaW5zUGlpOiB0cnVlLFxuICAgICAgICAgICAgY29ycmVsYXRpb25JZDogY29ycmVsYXRpb25JZCB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2dzIHZlcmJvc2UgbWVzc2FnZXMuXG4gICAgICovXG4gICAgdmVyYm9zZShtZXNzYWdlOiBzdHJpbmcsIGNvcnJlbGF0aW9uSWQ/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5sb2dNZXNzYWdlKG1lc3NhZ2UsIHtcbiAgICAgICAgICAgIGxvZ0xldmVsOiBMb2dMZXZlbC5WZXJib3NlLFxuICAgICAgICAgICAgY29udGFpbnNQaWk6IGZhbHNlLFxuICAgICAgICAgICAgY29ycmVsYXRpb25JZDogY29ycmVsYXRpb25JZCB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2dzIHZlcmJvc2UgbWVzc2FnZXMgd2l0aCBQSUkuXG4gICAgICovXG4gICAgdmVyYm9zZVBpaShtZXNzYWdlOiBzdHJpbmcsIGNvcnJlbGF0aW9uSWQ/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5sb2dNZXNzYWdlKG1lc3NhZ2UsIHtcbiAgICAgICAgICAgIGxvZ0xldmVsOiBMb2dMZXZlbC5WZXJib3NlLFxuICAgICAgICAgICAgY29udGFpbnNQaWk6IHRydWUsXG4gICAgICAgICAgICBjb3JyZWxhdGlvbklkOiBjb3JyZWxhdGlvbklkIHx8IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvZ3MgdHJhY2UgbWVzc2FnZXMuXG4gICAgICovXG4gICAgdHJhY2UobWVzc2FnZTogc3RyaW5nLCBjb3JyZWxhdGlvbklkPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMubG9nTWVzc2FnZShtZXNzYWdlLCB7XG4gICAgICAgICAgICBsb2dMZXZlbDogTG9nTGV2ZWwuVHJhY2UsXG4gICAgICAgICAgICBjb250YWluc1BpaTogZmFsc2UsXG4gICAgICAgICAgICBjb3JyZWxhdGlvbklkOiBjb3JyZWxhdGlvbklkIHx8IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvZ3MgdHJhY2UgbWVzc2FnZXMgd2l0aCBQSUkuXG4gICAgICovXG4gICAgdHJhY2VQaWkobWVzc2FnZTogc3RyaW5nLCBjb3JyZWxhdGlvbklkPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMubG9nTWVzc2FnZShtZXNzYWdlLCB7XG4gICAgICAgICAgICBsb2dMZXZlbDogTG9nTGV2ZWwuVHJhY2UsXG4gICAgICAgICAgICBjb250YWluc1BpaTogdHJ1ZSxcbiAgICAgICAgICAgIGNvcnJlbGF0aW9uSWQ6IGNvcnJlbGF0aW9uSWQgfHwgQ29uc3RhbnRzLkVNUFRZX1NUUklORyxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIFBJSSBMb2dnaW5nIGlzIGVuYWJsZWQgb3Igbm90LlxuICAgICAqL1xuICAgIGlzUGlpTG9nZ2luZ0VuYWJsZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnBpaUxvZ2dpbmdFbmFibGVkIHx8IGZhbHNlO1xuICAgIH1cbn1cbiIsICIvKiBlc2xpbnQtZGlzYWJsZSBoZWFkZXIvaGVhZGVyICovXG5leHBvcnQgY29uc3QgbmFtZSA9IFwiQGF6dXJlL21zYWwtY29tbW9uXCI7XG5leHBvcnQgY29uc3QgdmVyc2lvbiA9IFwiMTUuNC4wXCI7XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IFByb3RvY29sTW9kZSB9IGZyb20gXCIuL1Byb3RvY29sTW9kZS5qc1wiO1xuaW1wb3J0IHsgT0lEQ09wdGlvbnMgfSBmcm9tIFwiLi9PSURDT3B0aW9ucy5qc1wiO1xuaW1wb3J0IHsgQXp1cmVSZWdpb25Db25maWd1cmF0aW9uIH0gZnJvbSBcIi4vQXp1cmVSZWdpb25Db25maWd1cmF0aW9uLmpzXCI7XG5pbXBvcnQgeyBDbG91ZEluc3RhbmNlRGlzY292ZXJ5UmVzcG9uc2UgfSBmcm9tIFwiLi9DbG91ZEluc3RhbmNlRGlzY292ZXJ5UmVzcG9uc2UuanNcIjtcblxuZXhwb3J0IHR5cGUgQXV0aG9yaXR5T3B0aW9ucyA9IHtcbiAgICBwcm90b2NvbE1vZGU6IFByb3RvY29sTW9kZTtcbiAgICBPSURDT3B0aW9ucz86IE9JRENPcHRpb25zIHwgbnVsbDtcbiAgICBrbm93bkF1dGhvcml0aWVzOiBBcnJheTxzdHJpbmc+O1xuICAgIGNsb3VkRGlzY292ZXJ5TWV0YWRhdGE6IHN0cmluZztcbiAgICBhdXRob3JpdHlNZXRhZGF0YTogc3RyaW5nO1xuICAgIHNraXBBdXRob3JpdHlNZXRhZGF0YUNhY2hlPzogYm9vbGVhbjtcbiAgICBhenVyZVJlZ2lvbkNvbmZpZ3VyYXRpb24/OiBBenVyZVJlZ2lvbkNvbmZpZ3VyYXRpb247XG4gICAgYXV0aG9yaXR5Pzogc3RyaW5nO1xufTtcblxuZXhwb3J0IHR5cGUgU3RhdGljQXV0aG9yaXR5T3B0aW9ucyA9IFBhcnRpYWw8XG4gICAgUGljazxBdXRob3JpdHlPcHRpb25zLCBcImtub3duQXV0aG9yaXRpZXNcIj5cbj4gJiB7XG4gICAgY2Fub25pY2FsQXV0aG9yaXR5Pzogc3RyaW5nO1xuICAgIGNsb3VkRGlzY292ZXJ5TWV0YWRhdGE/OiBDbG91ZEluc3RhbmNlRGlzY292ZXJ5UmVzcG9uc2U7XG59O1xuXG5leHBvcnQgY29uc3QgQXp1cmVDbG91ZEluc3RhbmNlID0ge1xuICAgIC8vIEF6dXJlQ2xvdWRJbnN0YW5jZSBpcyBub3Qgc3BlY2lmaWVkLlxuICAgIE5vbmU6IFwibm9uZVwiLFxuXG4gICAgLy8gTWljcm9zb2Z0IEF6dXJlIHB1YmxpYyBjbG91ZFxuICAgIEF6dXJlUHVibGljOiBcImh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbVwiLFxuXG4gICAgLy8gTWljcm9zb2Z0IFBQRVxuICAgIEF6dXJlUHBlOiBcImh0dHBzOi8vbG9naW4ud2luZG93cy1wcGUubmV0XCIsXG5cbiAgICAvLyBNaWNyb3NvZnQgQ2hpbmVzZSBuYXRpb25hbC9yZWdpb25hbCBjbG91ZFxuICAgIEF6dXJlQ2hpbmE6IFwiaHR0cHM6Ly9sb2dpbi5jaGluYWNsb3VkYXBpLmNuXCIsXG5cbiAgICAvLyBNaWNyb3NvZnQgR2VybWFuIG5hdGlvbmFsL3JlZ2lvbmFsIGNsb3VkIChcIkJsYWNrIEZvcmVzdFwiKVxuICAgIEF6dXJlR2VybWFueTogXCJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5kZVwiLFxuXG4gICAgLy8gVVMgR292ZXJubWVudCBjbG91ZFxuICAgIEF6dXJlVXNHb3Zlcm5tZW50OiBcImh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLnVzXCIsXG59IGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgQXp1cmVDbG91ZEluc3RhbmNlID1cbiAgICAodHlwZW9mIEF6dXJlQ2xvdWRJbnN0YW5jZSlba2V5b2YgdHlwZW9mIEF6dXJlQ2xvdWRJbnN0YW5jZV07XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IFRva2VuQ2xhaW1zIH0gZnJvbSBcIi4vVG9rZW5DbGFpbXMuanNcIjtcbmltcG9ydCB7XG4gICAgY3JlYXRlQ2xpZW50QXV0aEVycm9yLFxuICAgIENsaWVudEF1dGhFcnJvckNvZGVzLFxufSBmcm9tIFwiLi4vZXJyb3IvQ2xpZW50QXV0aEVycm9yLmpzXCI7XG5cbi8qKlxuICogRXh0cmFjdCB0b2tlbiBieSBkZWNvZGluZyB0aGUgcmF3VG9rZW5cbiAqXG4gKiBAcGFyYW0gZW5jb2RlZFRva2VuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0VG9rZW5DbGFpbXMoXG4gICAgZW5jb2RlZFRva2VuOiBzdHJpbmcsXG4gICAgYmFzZTY0RGVjb2RlOiAoaW5wdXQ6IHN0cmluZykgPT4gc3RyaW5nXG4pOiBUb2tlbkNsYWltcyB7XG4gICAgY29uc3QganN3UGF5bG9hZCA9IGdldEpXU1BheWxvYWQoZW5jb2RlZFRva2VuKTtcblxuICAgIC8vIHRva2VuIHdpbGwgYmUgZGVjb2RlZCB0byBnZXQgdGhlIHVzZXJuYW1lXG4gICAgdHJ5IHtcbiAgICAgICAgLy8gYmFzZTY0RGVjb2RlKCkgc2hvdWxkIHRocm93IGFuIGVycm9yIGlmIHRoZXJlIGlzIGFuIGlzc3VlXG4gICAgICAgIGNvbnN0IGJhc2U2NERlY29kZWQgPSBiYXNlNjREZWNvZGUoanN3UGF5bG9hZCk7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGJhc2U2NERlY29kZWQpIGFzIFRva2VuQ2xhaW1zO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMudG9rZW5QYXJzaW5nRXJyb3IpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBkZWNvZGUgYSBKV1RcbiAqXG4gKiBAcGFyYW0gYXV0aFRva2VuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRKV1NQYXlsb2FkKGF1dGhUb2tlbjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoIWF1dGhUb2tlbikge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubnVsbE9yRW1wdHlUb2tlbik7XG4gICAgfVxuICAgIGNvbnN0IHRva2VuUGFydHNSZWdleCA9IC9eKFteXFwuXFxzXSopXFwuKFteXFwuXFxzXSspXFwuKFteXFwuXFxzXSopJC87XG4gICAgY29uc3QgbWF0Y2hlcyA9IHRva2VuUGFydHNSZWdleC5leGVjKGF1dGhUb2tlbik7XG4gICAgaWYgKCFtYXRjaGVzIHx8IG1hdGNoZXMubGVuZ3RoIDwgNCkge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMudG9rZW5QYXJzaW5nRXJyb3IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBjb25zdCBjcmFja2VkVG9rZW4gPSB7XG4gICAgICogIGhlYWRlcjogbWF0Y2hlc1sxXSxcbiAgICAgKiAgSldTUGF5bG9hZDogbWF0Y2hlc1syXSxcbiAgICAgKiAgSldTU2lnOiBtYXRjaGVzWzNdLFxuICAgICAqIH07XG4gICAgICovXG5cbiAgICByZXR1cm4gbWF0Y2hlc1syXTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgdGhlIHRva2VuJ3MgbWF4X2FnZSBoYXMgdHJhbnNwaXJlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tNYXhBZ2UoYXV0aFRpbWU6IG51bWJlciwgbWF4QWdlOiBudW1iZXIpOiB2b2lkIHtcbiAgICAvKlxuICAgICAqIHBlciBodHRwczovL29wZW5pZC5uZXQvc3BlY3Mvb3BlbmlkLWNvbm5lY3QtY29yZS0xXzAuaHRtbCNBdXRoUmVxdWVzdFxuICAgICAqIFRvIGZvcmNlIGFuIGltbWVkaWF0ZSByZS1hdXRoZW50aWNhdGlvbjogSWYgYW4gYXBwIHJlcXVpcmVzIHRoYXQgYSB1c2VyIHJlLWF1dGhlbnRpY2F0ZSBwcmlvciB0byBhY2Nlc3MsXG4gICAgICogcHJvdmlkZSBhIHZhbHVlIG9mIDAgZm9yIHRoZSBtYXhfYWdlIHBhcmFtZXRlciBhbmQgdGhlIEFTIHdpbGwgZm9yY2UgYSBmcmVzaCBsb2dpbi5cbiAgICAgKi9cbiAgICBjb25zdCBmaXZlTWludXRlU2tldyA9IDMwMDAwMDsgLy8gZml2ZSBtaW51dGVzIGluIG1pbGxpc2Vjb25kc1xuICAgIGlmIChtYXhBZ2UgPT09IDAgfHwgRGF0ZS5ub3coKSAtIGZpdmVNaW51dGVTa2V3ID4gYXV0aFRpbWUgKyBtYXhBZ2UpIHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvckNvZGVzLm1heEFnZVRyYW5zcGlyZWQpO1xuICAgIH1cbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBVdGlsaXR5IGZ1bmN0aW9ucyBmb3IgbWFuYWdpbmcgZGF0ZSBhbmQgdGltZSBvcGVyYXRpb25zLlxuICovXG5cbi8qKlxuICogcmV0dXJuIHRoZSBjdXJyZW50IHRpbWUgaW4gVW5peCB0aW1lIChzZWNvbmRzKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5vd1NlY29uZHMoKTogbnVtYmVyIHtcbiAgICAvLyBEYXRlLmdldFRpbWUoKSByZXR1cm5zIGluIG1pbGxpc2Vjb25kcy5cbiAgICByZXR1cm4gTWF0aC5yb3VuZChuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDAuMCk7XG59XG5cbi8qKlxuICogQ29udmVydHMgSlMgRGF0ZSBvYmplY3QgdG8gc2Vjb25kc1xuICogQHBhcmFtIGRhdGUgRGF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9TZWNvbmRzRnJvbURhdGUoZGF0ZTogRGF0ZSk6IG51bWJlciB7XG4gICAgLy8gQ29udmVydCBkYXRlIHRvIHNlY29uZHNcbiAgICByZXR1cm4gZGF0ZS5nZXRUaW1lKCkgLyAxMDAwO1xufVxuXG4vKipcbiAqIENvbnZlcnQgc2Vjb25kcyB0byBKUyBEYXRlIG9iamVjdC4gU2Vjb25kcyBjYW4gYmUgaW4gYSBudW1iZXIgb3Igc3RyaW5nIGZvcm1hdCBvciB1bmRlZmluZWQgKHdpbGwgc3RpbGwgcmV0dXJuIGEgZGF0ZSkuXG4gKiBAcGFyYW0gc2Vjb25kc1xuICovXG5leHBvcnQgZnVuY3Rpb24gdG9EYXRlRnJvbVNlY29uZHMoc2Vjb25kczogbnVtYmVyIHwgc3RyaW5nIHwgdW5kZWZpbmVkKTogRGF0ZSB7XG4gICAgaWYgKHNlY29uZHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKE51bWJlcihzZWNvbmRzKSAqIDEwMDApO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IERhdGUoKTtcbn1cblxuLyoqXG4gKiBjaGVjayBpZiBhIHRva2VuIGlzIGV4cGlyZWQgYmFzZWQgb24gZ2l2ZW4gVVRDIHRpbWUgaW4gc2Vjb25kcy5cbiAqIEBwYXJhbSBleHBpcmVzT25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVG9rZW5FeHBpcmVkKGV4cGlyZXNPbjogc3RyaW5nLCBvZmZzZXQ6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIC8vIGNoZWNrIGZvciBhY2Nlc3MgdG9rZW4gZXhwaXJ5XG4gICAgY29uc3QgZXhwaXJhdGlvblNlYyA9IE51bWJlcihleHBpcmVzT24pIHx8IDA7XG4gICAgY29uc3Qgb2Zmc2V0Q3VycmVudFRpbWVTZWMgPSBub3dTZWNvbmRzKCkgKyBvZmZzZXQ7XG5cbiAgICAvLyBJZiBjdXJyZW50IHRpbWUgKyBvZmZzZXQgaXMgZ3JlYXRlciB0aGFuIHRva2VuIGV4cGlyYXRpb24gdGltZSwgdGhlbiB0b2tlbiBpcyBleHBpcmVkLlxuICAgIHJldHVybiBvZmZzZXRDdXJyZW50VGltZVNlYyA+IGV4cGlyYXRpb25TZWM7XG59XG5cbi8qKlxuICogSWYgdGhlIGN1cnJlbnQgdGltZSBpcyBlYXJsaWVyIHRoYW4gdGhlIHRpbWUgdGhhdCBhIHRva2VuIHdhcyBjYWNoZWQgYXQsIHdlIG11c3QgZGlzY2FyZCB0aGUgdG9rZW5cbiAqIGkuZS4gVGhlIHN5c3RlbSBjbG9jayB3YXMgdHVybmVkIGJhY2sgYWZ0ZXIgYWNxdWlyaW5nIHRoZSBjYWNoZWQgdG9rZW5cbiAqIEBwYXJhbSBjYWNoZWRBdFxuICogQHBhcmFtIG9mZnNldFxuICovXG5leHBvcnQgZnVuY3Rpb24gd2FzQ2xvY2tUdXJuZWRCYWNrKGNhY2hlZEF0OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBjYWNoZWRBdFNlYyA9IE51bWJlcihjYWNoZWRBdCk7XG5cbiAgICByZXR1cm4gY2FjaGVkQXRTZWMgPiBub3dTZWNvbmRzKCk7XG59XG5cbi8qKlxuICogV2FpdHMgZm9yIHQgbnVtYmVyIG9mIG1pbGxpc2Vjb25kc1xuICogQHBhcmFtIHQgbnVtYmVyXG4gKiBAcGFyYW0gdmFsdWUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVsYXk8VD4odDogbnVtYmVyLCB2YWx1ZT86IFQpOiBQcm9taXNlPFQgfCB2b2lkPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KCgpID0+IHJlc29sdmUodmFsdWUpLCB0KSk7XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGV4dHJhY3RUb2tlbkNsYWltcyB9IGZyb20gXCIuLi8uLi9hY2NvdW50L0F1dGhUb2tlbi5qc1wiO1xuaW1wb3J0IHsgVG9rZW5DbGFpbXMgfSBmcm9tIFwiLi4vLi4vYWNjb3VudC9Ub2tlbkNsYWltcy5qc1wiO1xuaW1wb3J0IHsgQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YSB9IGZyb20gXCIuLi8uLi9hdXRob3JpdHkvQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YS5qc1wiO1xuaW1wb3J0IHsgT3BlbklkQ29uZmlnUmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vYXV0aG9yaXR5L09wZW5JZENvbmZpZ1Jlc3BvbnNlLmpzXCI7XG5pbXBvcnQge1xuICAgIENsaWVudEF1dGhFcnJvckNvZGVzLFxuICAgIGNyZWF0ZUNsaWVudEF1dGhFcnJvcixcbn0gZnJvbSBcIi4uLy4uL2Vycm9yL0NsaWVudEF1dGhFcnJvci5qc1wiO1xuaW1wb3J0IHtcbiAgICBBUFBfTUVUQURBVEEsXG4gICAgQVVUSE9SSVRZX01FVEFEQVRBX0NPTlNUQU5UUyxcbiAgICBBdXRoZW50aWNhdGlvblNjaGVtZSxcbiAgICBDcmVkZW50aWFsVHlwZSxcbiAgICBTRVJWRVJfVEVMRU1fQ09OU1RBTlRTLFxuICAgIFNlcGFyYXRvcnMsXG4gICAgVGhyb3R0bGluZ0NvbnN0YW50cyxcbn0gZnJvbSBcIi4uLy4uL3V0aWxzL0NvbnN0YW50cy5qc1wiO1xuaW1wb3J0ICogYXMgVGltZVV0aWxzIGZyb20gXCIuLi8uLi91dGlscy9UaW1lVXRpbHMuanNcIjtcbmltcG9ydCB7IEFjY2Vzc1Rva2VuRW50aXR5IH0gZnJvbSBcIi4uL2VudGl0aWVzL0FjY2Vzc1Rva2VuRW50aXR5LmpzXCI7XG5pbXBvcnQgeyBBcHBNZXRhZGF0YUVudGl0eSB9IGZyb20gXCIuLi9lbnRpdGllcy9BcHBNZXRhZGF0YUVudGl0eS5qc1wiO1xuaW1wb3J0IHsgQXV0aG9yaXR5TWV0YWRhdGFFbnRpdHkgfSBmcm9tIFwiLi4vZW50aXRpZXMvQXV0aG9yaXR5TWV0YWRhdGFFbnRpdHkuanNcIjtcbmltcG9ydCB7IENyZWRlbnRpYWxFbnRpdHkgfSBmcm9tIFwiLi4vZW50aXRpZXMvQ3JlZGVudGlhbEVudGl0eS5qc1wiO1xuaW1wb3J0IHsgSWRUb2tlbkVudGl0eSB9IGZyb20gXCIuLi9lbnRpdGllcy9JZFRva2VuRW50aXR5LmpzXCI7XG5pbXBvcnQgeyBSZWZyZXNoVG9rZW5FbnRpdHkgfSBmcm9tIFwiLi4vZW50aXRpZXMvUmVmcmVzaFRva2VuRW50aXR5LmpzXCI7XG5cbi8qKlxuICogQ2FjaGUgS2V5OiA8aG9tZV9hY2NvdW50X2lkPi08ZW52aXJvbm1lbnQ+LTxjcmVkZW50aWFsX3R5cGU+LTxjbGllbnRfaWQgb3IgZmFtaWx5SWQ+LTxyZWFsbT4tPHNjb3Blcz4tPGNsYWltcyBoYXNoPi08c2NoZW1lPlxuICogSWRUb2tlbiBFeGFtcGxlOiB1aWQudXRpZC1sb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tLWlkdG9rZW4tYXBwX2NsaWVudF9pZC1jb250b3NvLmNvbVxuICogQWNjZXNzVG9rZW4gRXhhbXBsZTogdWlkLnV0aWQtbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbS1hY2Nlc3N0b2tlbi1hcHBfY2xpZW50X2lkLWNvbnRvc28uY29tLXNjb3BlMSBzY29wZTItLXBvcFxuICogUmVmcmVzaFRva2VuIEV4YW1wbGU6IHVpZC51dGlkLWxvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20tcmVmcmVzaHRva2VuLTEtY29udG9zby5jb21cbiAqIEBwYXJhbSBjcmVkZW50aWFsRW50aXR5XG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVDcmVkZW50aWFsS2V5KFxuICAgIGNyZWRlbnRpYWxFbnRpdHk6IENyZWRlbnRpYWxFbnRpdHlcbik6IHN0cmluZyB7XG4gICAgY29uc3QgY3JlZGVudGlhbEtleSA9IFtcbiAgICAgICAgZ2VuZXJhdGVBY2NvdW50SWQoY3JlZGVudGlhbEVudGl0eSksXG4gICAgICAgIGdlbmVyYXRlQ3JlZGVudGlhbElkKGNyZWRlbnRpYWxFbnRpdHkpLFxuICAgICAgICBnZW5lcmF0ZVRhcmdldChjcmVkZW50aWFsRW50aXR5KSxcbiAgICAgICAgZ2VuZXJhdGVDbGFpbXNIYXNoKGNyZWRlbnRpYWxFbnRpdHkpLFxuICAgICAgICBnZW5lcmF0ZVNjaGVtZShjcmVkZW50aWFsRW50aXR5KSxcbiAgICBdO1xuXG4gICAgcmV0dXJuIGNyZWRlbnRpYWxLZXkuam9pbihTZXBhcmF0b3JzLkNBQ0hFX0tFWV9TRVBBUkFUT1IpLnRvTG93ZXJDYXNlKCk7XG59XG5cbi8qKlxuICogQ3JlYXRlIElkVG9rZW5FbnRpdHlcbiAqIEBwYXJhbSBob21lQWNjb3VudElkXG4gKiBAcGFyYW0gYXV0aGVudGljYXRpb25SZXN1bHRcbiAqIEBwYXJhbSBjbGllbnRJZFxuICogQHBhcmFtIGF1dGhvcml0eVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSWRUb2tlbkVudGl0eShcbiAgICBob21lQWNjb3VudElkOiBzdHJpbmcsXG4gICAgZW52aXJvbm1lbnQ6IHN0cmluZyxcbiAgICBpZFRva2VuOiBzdHJpbmcsXG4gICAgY2xpZW50SWQ6IHN0cmluZyxcbiAgICB0ZW5hbnRJZDogc3RyaW5nXG4pOiBJZFRva2VuRW50aXR5IHtcbiAgICBjb25zdCBpZFRva2VuRW50aXR5OiBJZFRva2VuRW50aXR5ID0ge1xuICAgICAgICBjcmVkZW50aWFsVHlwZTogQ3JlZGVudGlhbFR5cGUuSURfVE9LRU4sXG4gICAgICAgIGhvbWVBY2NvdW50SWQ6IGhvbWVBY2NvdW50SWQsXG4gICAgICAgIGVudmlyb25tZW50OiBlbnZpcm9ubWVudCxcbiAgICAgICAgY2xpZW50SWQ6IGNsaWVudElkLFxuICAgICAgICBzZWNyZXQ6IGlkVG9rZW4sXG4gICAgICAgIHJlYWxtOiB0ZW5hbnRJZCxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGlkVG9rZW5FbnRpdHk7XG59XG5cbi8qKlxuICogQ3JlYXRlIEFjY2Vzc1Rva2VuRW50aXR5XG4gKiBAcGFyYW0gaG9tZUFjY291bnRJZFxuICogQHBhcmFtIGVudmlyb25tZW50XG4gKiBAcGFyYW0gYWNjZXNzVG9rZW5cbiAqIEBwYXJhbSBjbGllbnRJZFxuICogQHBhcmFtIHRlbmFudElkXG4gKiBAcGFyYW0gc2NvcGVzXG4gKiBAcGFyYW0gZXhwaXJlc09uXG4gKiBAcGFyYW0gZXh0RXhwaXJlc09uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBY2Nlc3NUb2tlbkVudGl0eShcbiAgICBob21lQWNjb3VudElkOiBzdHJpbmcsXG4gICAgZW52aXJvbm1lbnQ6IHN0cmluZyxcbiAgICBhY2Nlc3NUb2tlbjogc3RyaW5nLFxuICAgIGNsaWVudElkOiBzdHJpbmcsXG4gICAgdGVuYW50SWQ6IHN0cmluZyxcbiAgICBzY29wZXM6IHN0cmluZyxcbiAgICBleHBpcmVzT246IG51bWJlcixcbiAgICBleHRFeHBpcmVzT246IG51bWJlcixcbiAgICBiYXNlNjREZWNvZGU6IChpbnB1dDogc3RyaW5nKSA9PiBzdHJpbmcsXG4gICAgcmVmcmVzaE9uPzogbnVtYmVyLFxuICAgIHRva2VuVHlwZT86IEF1dGhlbnRpY2F0aW9uU2NoZW1lLFxuICAgIHVzZXJBc3NlcnRpb25IYXNoPzogc3RyaW5nLFxuICAgIGtleUlkPzogc3RyaW5nLFxuICAgIHJlcXVlc3RlZENsYWltcz86IHN0cmluZyxcbiAgICByZXF1ZXN0ZWRDbGFpbXNIYXNoPzogc3RyaW5nXG4pOiBBY2Nlc3NUb2tlbkVudGl0eSB7XG4gICAgY29uc3QgYXRFbnRpdHk6IEFjY2Vzc1Rva2VuRW50aXR5ID0ge1xuICAgICAgICBob21lQWNjb3VudElkOiBob21lQWNjb3VudElkLFxuICAgICAgICBjcmVkZW50aWFsVHlwZTogQ3JlZGVudGlhbFR5cGUuQUNDRVNTX1RPS0VOLFxuICAgICAgICBzZWNyZXQ6IGFjY2Vzc1Rva2VuLFxuICAgICAgICBjYWNoZWRBdDogVGltZVV0aWxzLm5vd1NlY29uZHMoKS50b1N0cmluZygpLFxuICAgICAgICBleHBpcmVzT246IGV4cGlyZXNPbi50b1N0cmluZygpLFxuICAgICAgICBleHRlbmRlZEV4cGlyZXNPbjogZXh0RXhwaXJlc09uLnRvU3RyaW5nKCksXG4gICAgICAgIGVudmlyb25tZW50OiBlbnZpcm9ubWVudCxcbiAgICAgICAgY2xpZW50SWQ6IGNsaWVudElkLFxuICAgICAgICByZWFsbTogdGVuYW50SWQsXG4gICAgICAgIHRhcmdldDogc2NvcGVzLFxuICAgICAgICB0b2tlblR5cGU6IHRva2VuVHlwZSB8fCBBdXRoZW50aWNhdGlvblNjaGVtZS5CRUFSRVIsXG4gICAgfTtcblxuICAgIGlmICh1c2VyQXNzZXJ0aW9uSGFzaCkge1xuICAgICAgICBhdEVudGl0eS51c2VyQXNzZXJ0aW9uSGFzaCA9IHVzZXJBc3NlcnRpb25IYXNoO1xuICAgIH1cblxuICAgIGlmIChyZWZyZXNoT24pIHtcbiAgICAgICAgYXRFbnRpdHkucmVmcmVzaE9uID0gcmVmcmVzaE9uLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3RlZENsYWltcykge1xuICAgICAgICBhdEVudGl0eS5yZXF1ZXN0ZWRDbGFpbXMgPSByZXF1ZXN0ZWRDbGFpbXM7XG4gICAgICAgIGF0RW50aXR5LnJlcXVlc3RlZENsYWltc0hhc2ggPSByZXF1ZXN0ZWRDbGFpbXNIYXNoO1xuICAgIH1cblxuICAgIC8qXG4gICAgICogQ3JlYXRlIEFjY2VzcyBUb2tlbiBXaXRoIEF1dGggU2NoZW1lIGluc3RlYWQgb2YgcmVndWxhciBhY2Nlc3MgdG9rZW5cbiAgICAgKiBDYXN0IHRvIGxvd2VyIHRvIGhhbmRsZSBcImJlYXJlclwiIGZyb20gQURGU1xuICAgICAqL1xuICAgIGlmIChcbiAgICAgICAgYXRFbnRpdHkudG9rZW5UeXBlPy50b0xvd2VyQ2FzZSgpICE9PVxuICAgICAgICBBdXRoZW50aWNhdGlvblNjaGVtZS5CRUFSRVIudG9Mb3dlckNhc2UoKVxuICAgICkge1xuICAgICAgICBhdEVudGl0eS5jcmVkZW50aWFsVHlwZSA9IENyZWRlbnRpYWxUeXBlLkFDQ0VTU19UT0tFTl9XSVRIX0FVVEhfU0NIRU1FO1xuICAgICAgICBzd2l0Y2ggKGF0RW50aXR5LnRva2VuVHlwZSkge1xuICAgICAgICAgICAgY2FzZSBBdXRoZW50aWNhdGlvblNjaGVtZS5QT1A6XG4gICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIGtleUlkIGlzIHByZXNlbnQgYW5kIGFkZCBpdCB0byBjcmVkZW50aWFsXG4gICAgICAgICAgICAgICAgY29uc3QgdG9rZW5DbGFpbXM6IFRva2VuQ2xhaW1zIHwgbnVsbCA9IGV4dHJhY3RUb2tlbkNsYWltcyhcbiAgICAgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIGJhc2U2NERlY29kZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgaWYgKCF0b2tlbkNsYWltcz8uY25mPy5raWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMudG9rZW5DbGFpbXNDbmZSZXF1aXJlZEZvclNpZ25lZEp3dFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhdEVudGl0eS5rZXlJZCA9IHRva2VuQ2xhaW1zLmNuZi5raWQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEF1dGhlbnRpY2F0aW9uU2NoZW1lLlNTSDpcbiAgICAgICAgICAgICAgICBhdEVudGl0eS5rZXlJZCA9IGtleUlkO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGF0RW50aXR5O1xufVxuXG4vKipcbiAqIENyZWF0ZSBSZWZyZXNoVG9rZW5FbnRpdHlcbiAqIEBwYXJhbSBob21lQWNjb3VudElkXG4gKiBAcGFyYW0gYXV0aGVudGljYXRpb25SZXN1bHRcbiAqIEBwYXJhbSBjbGllbnRJZFxuICogQHBhcmFtIGF1dGhvcml0eVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmVmcmVzaFRva2VuRW50aXR5KFxuICAgIGhvbWVBY2NvdW50SWQ6IHN0cmluZyxcbiAgICBlbnZpcm9ubWVudDogc3RyaW5nLFxuICAgIHJlZnJlc2hUb2tlbjogc3RyaW5nLFxuICAgIGNsaWVudElkOiBzdHJpbmcsXG4gICAgZmFtaWx5SWQ/OiBzdHJpbmcsXG4gICAgdXNlckFzc2VydGlvbkhhc2g/OiBzdHJpbmcsXG4gICAgZXhwaXJlc09uPzogbnVtYmVyXG4pOiBSZWZyZXNoVG9rZW5FbnRpdHkge1xuICAgIGNvbnN0IHJ0RW50aXR5OiBSZWZyZXNoVG9rZW5FbnRpdHkgPSB7XG4gICAgICAgIGNyZWRlbnRpYWxUeXBlOiBDcmVkZW50aWFsVHlwZS5SRUZSRVNIX1RPS0VOLFxuICAgICAgICBob21lQWNjb3VudElkOiBob21lQWNjb3VudElkLFxuICAgICAgICBlbnZpcm9ubWVudDogZW52aXJvbm1lbnQsXG4gICAgICAgIGNsaWVudElkOiBjbGllbnRJZCxcbiAgICAgICAgc2VjcmV0OiByZWZyZXNoVG9rZW4sXG4gICAgfTtcblxuICAgIGlmICh1c2VyQXNzZXJ0aW9uSGFzaCkge1xuICAgICAgICBydEVudGl0eS51c2VyQXNzZXJ0aW9uSGFzaCA9IHVzZXJBc3NlcnRpb25IYXNoO1xuICAgIH1cblxuICAgIGlmIChmYW1pbHlJZCkge1xuICAgICAgICBydEVudGl0eS5mYW1pbHlJZCA9IGZhbWlseUlkO1xuICAgIH1cblxuICAgIGlmIChleHBpcmVzT24pIHtcbiAgICAgICAgcnRFbnRpdHkuZXhwaXJlc09uID0gZXhwaXJlc09uLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJ0RW50aXR5O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNDcmVkZW50aWFsRW50aXR5KGVudGl0eTogb2JqZWN0KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgZW50aXR5Lmhhc093blByb3BlcnR5KFwiaG9tZUFjY291bnRJZFwiKSAmJlxuICAgICAgICBlbnRpdHkuaGFzT3duUHJvcGVydHkoXCJlbnZpcm9ubWVudFwiKSAmJlxuICAgICAgICBlbnRpdHkuaGFzT3duUHJvcGVydHkoXCJjcmVkZW50aWFsVHlwZVwiKSAmJlxuICAgICAgICBlbnRpdHkuaGFzT3duUHJvcGVydHkoXCJjbGllbnRJZFwiKSAmJlxuICAgICAgICBlbnRpdHkuaGFzT3duUHJvcGVydHkoXCJzZWNyZXRcIilcbiAgICApO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyBhbiBlbnRpdHk6IGNoZWNrcyBmb3IgYWxsIGV4cGVjdGVkIHBhcmFtc1xuICogQHBhcmFtIGVudGl0eVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNBY2Nlc3NUb2tlbkVudGl0eShlbnRpdHk6IG9iamVjdCk6IGJvb2xlYW4ge1xuICAgIGlmICghZW50aXR5KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICBpc0NyZWRlbnRpYWxFbnRpdHkoZW50aXR5KSAmJlxuICAgICAgICBlbnRpdHkuaGFzT3duUHJvcGVydHkoXCJyZWFsbVwiKSAmJlxuICAgICAgICBlbnRpdHkuaGFzT3duUHJvcGVydHkoXCJ0YXJnZXRcIikgJiZcbiAgICAgICAgKGVudGl0eVtcImNyZWRlbnRpYWxUeXBlXCJdID09PSBDcmVkZW50aWFsVHlwZS5BQ0NFU1NfVE9LRU4gfHxcbiAgICAgICAgICAgIGVudGl0eVtcImNyZWRlbnRpYWxUeXBlXCJdID09PVxuICAgICAgICAgICAgICAgIENyZWRlbnRpYWxUeXBlLkFDQ0VTU19UT0tFTl9XSVRIX0FVVEhfU0NIRU1FKVxuICAgICk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIGFuIGVudGl0eTogY2hlY2tzIGZvciBhbGwgZXhwZWN0ZWQgcGFyYW1zXG4gKiBAcGFyYW0gZW50aXR5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0lkVG9rZW5FbnRpdHkoZW50aXR5OiBvYmplY3QpOiBib29sZWFuIHtcbiAgICBpZiAoIWVudGl0eSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgaXNDcmVkZW50aWFsRW50aXR5KGVudGl0eSkgJiZcbiAgICAgICAgZW50aXR5Lmhhc093blByb3BlcnR5KFwicmVhbG1cIikgJiZcbiAgICAgICAgZW50aXR5W1wiY3JlZGVudGlhbFR5cGVcIl0gPT09IENyZWRlbnRpYWxUeXBlLklEX1RPS0VOXG4gICAgKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgYW4gZW50aXR5OiBjaGVja3MgZm9yIGFsbCBleHBlY3RlZCBwYXJhbXNcbiAqIEBwYXJhbSBlbnRpdHlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzUmVmcmVzaFRva2VuRW50aXR5KGVudGl0eTogb2JqZWN0KTogYm9vbGVhbiB7XG4gICAgaWYgKCFlbnRpdHkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgIGlzQ3JlZGVudGlhbEVudGl0eShlbnRpdHkpICYmXG4gICAgICAgIGVudGl0eVtcImNyZWRlbnRpYWxUeXBlXCJdID09PSBDcmVkZW50aWFsVHlwZS5SRUZSRVNIX1RPS0VOXG4gICAgKTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSBBY2NvdW50IElkIGtleSBjb21wb25lbnQgYXMgcGVyIHRoZSBzY2hlbWE6IDxob21lX2FjY291bnRfaWQ+LTxlbnZpcm9ubWVudD5cbiAqL1xuZnVuY3Rpb24gZ2VuZXJhdGVBY2NvdW50SWQoY3JlZGVudGlhbEVudGl0eTogQ3JlZGVudGlhbEVudGl0eSk6IHN0cmluZyB7XG4gICAgY29uc3QgYWNjb3VudElkOiBBcnJheTxzdHJpbmc+ID0gW1xuICAgICAgICBjcmVkZW50aWFsRW50aXR5LmhvbWVBY2NvdW50SWQsXG4gICAgICAgIGNyZWRlbnRpYWxFbnRpdHkuZW52aXJvbm1lbnQsXG4gICAgXTtcbiAgICByZXR1cm4gYWNjb3VudElkLmpvaW4oU2VwYXJhdG9ycy5DQUNIRV9LRVlfU0VQQVJBVE9SKS50b0xvd2VyQ2FzZSgpO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlIENyZWRlbnRpYWwgSWQga2V5IGNvbXBvbmVudCBhcyBwZXIgdGhlIHNjaGVtYTogPGNyZWRlbnRpYWxfdHlwZT4tPGNsaWVudF9pZD4tPHJlYWxtPlxuICovXG5mdW5jdGlvbiBnZW5lcmF0ZUNyZWRlbnRpYWxJZChjcmVkZW50aWFsRW50aXR5OiBDcmVkZW50aWFsRW50aXR5KTogc3RyaW5nIHtcbiAgICBjb25zdCBjbGllbnRPckZhbWlseUlkID1cbiAgICAgICAgY3JlZGVudGlhbEVudGl0eS5jcmVkZW50aWFsVHlwZSA9PT0gQ3JlZGVudGlhbFR5cGUuUkVGUkVTSF9UT0tFTlxuICAgICAgICAgICAgPyBjcmVkZW50aWFsRW50aXR5LmZhbWlseUlkIHx8IGNyZWRlbnRpYWxFbnRpdHkuY2xpZW50SWRcbiAgICAgICAgICAgIDogY3JlZGVudGlhbEVudGl0eS5jbGllbnRJZDtcbiAgICBjb25zdCBjcmVkZW50aWFsSWQ6IEFycmF5PHN0cmluZz4gPSBbXG4gICAgICAgIGNyZWRlbnRpYWxFbnRpdHkuY3JlZGVudGlhbFR5cGUsXG4gICAgICAgIGNsaWVudE9yRmFtaWx5SWQsXG4gICAgICAgIGNyZWRlbnRpYWxFbnRpdHkucmVhbG0gfHwgXCJcIixcbiAgICBdO1xuXG4gICAgcmV0dXJuIGNyZWRlbnRpYWxJZC5qb2luKFNlcGFyYXRvcnMuQ0FDSEVfS0VZX1NFUEFSQVRPUikudG9Mb3dlckNhc2UoKTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSB0YXJnZXQga2V5IGNvbXBvbmVudCBhcyBwZXIgc2NoZW1hOiA8dGFyZ2V0PlxuICovXG5mdW5jdGlvbiBnZW5lcmF0ZVRhcmdldChjcmVkZW50aWFsRW50aXR5OiBDcmVkZW50aWFsRW50aXR5KTogc3RyaW5nIHtcbiAgICByZXR1cm4gKGNyZWRlbnRpYWxFbnRpdHkudGFyZ2V0IHx8IFwiXCIpLnRvTG93ZXJDYXNlKCk7XG59XG5cbi8qKlxuICogR2VuZXJhdGUgcmVxdWVzdGVkIGNsYWltcyBrZXkgY29tcG9uZW50IGFzIHBlciBzY2hlbWE6IDxyZXF1ZXN0ZWRDbGFpbXM+XG4gKi9cbmZ1bmN0aW9uIGdlbmVyYXRlQ2xhaW1zSGFzaChjcmVkZW50aWFsRW50aXR5OiBDcmVkZW50aWFsRW50aXR5KTogc3RyaW5nIHtcbiAgICByZXR1cm4gKGNyZWRlbnRpYWxFbnRpdHkucmVxdWVzdGVkQ2xhaW1zSGFzaCB8fCBcIlwiKS50b0xvd2VyQ2FzZSgpO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlIHNjaGVtZSBrZXkgY29tcG9uZW5ldCBhcyBwZXIgc2NoZW1hOiA8c2NoZW1lPlxuICovXG5mdW5jdGlvbiBnZW5lcmF0ZVNjaGVtZShjcmVkZW50aWFsRW50aXR5OiBDcmVkZW50aWFsRW50aXR5KTogc3RyaW5nIHtcbiAgICAvKlxuICAgICAqIFBvUCBUb2tlbnMgYW5kIFNTSCBjZXJ0cyBpbmNsdWRlIHNjaGVtZSBpbiBjYWNoZSBrZXlcbiAgICAgKiBDYXN0IHRvIGxvd2VyY2FzZSB0byBoYW5kbGUgXCJiZWFyZXJcIiBmcm9tIEFERlNcbiAgICAgKi9cbiAgICByZXR1cm4gY3JlZGVudGlhbEVudGl0eS50b2tlblR5cGUgJiZcbiAgICAgICAgY3JlZGVudGlhbEVudGl0eS50b2tlblR5cGUudG9Mb3dlckNhc2UoKSAhPT1cbiAgICAgICAgICAgIEF1dGhlbnRpY2F0aW9uU2NoZW1lLkJFQVJFUi50b0xvd2VyQ2FzZSgpXG4gICAgICAgID8gY3JlZGVudGlhbEVudGl0eS50b2tlblR5cGUudG9Mb3dlckNhc2UoKVxuICAgICAgICA6IFwiXCI7XG59XG5cbi8qKlxuICogdmFsaWRhdGVzIGlmIGEgZ2l2ZW4gY2FjaGUgZW50cnkgaXMgXCJUZWxlbWV0cnlcIiwgcGFyc2VzIDxrZXksdmFsdWU+XG4gKiBAcGFyYW0ga2V5XG4gKiBAcGFyYW0gZW50aXR5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1NlcnZlclRlbGVtZXRyeUVudGl0eShrZXk6IHN0cmluZywgZW50aXR5Pzogb2JqZWN0KTogYm9vbGVhbiB7XG4gICAgY29uc3QgdmFsaWRhdGVLZXk6IGJvb2xlYW4gPVxuICAgICAgICBrZXkuaW5kZXhPZihTRVJWRVJfVEVMRU1fQ09OU1RBTlRTLkNBQ0hFX0tFWSkgPT09IDA7XG4gICAgbGV0IHZhbGlkYXRlRW50aXR5OiBib29sZWFuID0gdHJ1ZTtcblxuICAgIGlmIChlbnRpdHkpIHtcbiAgICAgICAgdmFsaWRhdGVFbnRpdHkgPVxuICAgICAgICAgICAgZW50aXR5Lmhhc093blByb3BlcnR5KFwiZmFpbGVkUmVxdWVzdHNcIikgJiZcbiAgICAgICAgICAgIGVudGl0eS5oYXNPd25Qcm9wZXJ0eShcImVycm9yc1wiKSAmJlxuICAgICAgICAgICAgZW50aXR5Lmhhc093blByb3BlcnR5KFwiY2FjaGVIaXRzXCIpO1xuICAgIH1cblxuICAgIHJldHVybiB2YWxpZGF0ZUtleSAmJiB2YWxpZGF0ZUVudGl0eTtcbn1cblxuLyoqXG4gKiB2YWxpZGF0ZXMgaWYgYSBnaXZlbiBjYWNoZSBlbnRyeSBpcyBcIlRocm90dGxpbmdcIiwgcGFyc2VzIDxrZXksdmFsdWU+XG4gKiBAcGFyYW0ga2V5XG4gKiBAcGFyYW0gZW50aXR5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1Rocm90dGxpbmdFbnRpdHkoa2V5OiBzdHJpbmcsIGVudGl0eT86IG9iamVjdCk6IGJvb2xlYW4ge1xuICAgIGxldCB2YWxpZGF0ZUtleTogYm9vbGVhbiA9IGZhbHNlO1xuICAgIGlmIChrZXkpIHtcbiAgICAgICAgdmFsaWRhdGVLZXkgPSBrZXkuaW5kZXhPZihUaHJvdHRsaW5nQ29uc3RhbnRzLlRIUk9UVExJTkdfUFJFRklYKSA9PT0gMDtcbiAgICB9XG5cbiAgICBsZXQgdmFsaWRhdGVFbnRpdHk6IGJvb2xlYW4gPSB0cnVlO1xuICAgIGlmIChlbnRpdHkpIHtcbiAgICAgICAgdmFsaWRhdGVFbnRpdHkgPSBlbnRpdHkuaGFzT3duUHJvcGVydHkoXCJ0aHJvdHRsZVRpbWVcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbGlkYXRlS2V5ICYmIHZhbGlkYXRlRW50aXR5O1xufVxuXG4vKipcbiAqIEdlbmVyYXRlIEFwcE1ldGFkYXRhIENhY2hlIEtleSBhcyBwZXIgdGhlIHNjaGVtYTogYXBwbWV0YWRhdGEtPGVudmlyb25tZW50Pi08Y2xpZW50X2lkPlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVBcHBNZXRhZGF0YUtleSh7XG4gICAgZW52aXJvbm1lbnQsXG4gICAgY2xpZW50SWQsXG59OiBBcHBNZXRhZGF0YUVudGl0eSk6IHN0cmluZyB7XG4gICAgY29uc3QgYXBwTWV0YURhdGFLZXlBcnJheTogQXJyYXk8c3RyaW5nPiA9IFtcbiAgICAgICAgQVBQX01FVEFEQVRBLFxuICAgICAgICBlbnZpcm9ubWVudCxcbiAgICAgICAgY2xpZW50SWQsXG4gICAgXTtcbiAgICByZXR1cm4gYXBwTWV0YURhdGFLZXlBcnJheVxuICAgICAgICAuam9pbihTZXBhcmF0b3JzLkNBQ0hFX0tFWV9TRVBBUkFUT1IpXG4gICAgICAgIC50b0xvd2VyQ2FzZSgpO1xufVxuXG4vKlxuICogVmFsaWRhdGVzIGFuIGVudGl0eTogY2hlY2tzIGZvciBhbGwgZXhwZWN0ZWQgcGFyYW1zXG4gKiBAcGFyYW0gZW50aXR5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0FwcE1ldGFkYXRhRW50aXR5KGtleTogc3RyaW5nLCBlbnRpdHk6IG9iamVjdCk6IGJvb2xlYW4ge1xuICAgIGlmICghZW50aXR5KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICBrZXkuaW5kZXhPZihBUFBfTUVUQURBVEEpID09PSAwICYmXG4gICAgICAgIGVudGl0eS5oYXNPd25Qcm9wZXJ0eShcImNsaWVudElkXCIpICYmXG4gICAgICAgIGVudGl0eS5oYXNPd25Qcm9wZXJ0eShcImVudmlyb25tZW50XCIpXG4gICAgKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgYW4gZW50aXR5OiBjaGVja3MgZm9yIGFsbCBleHBlY3RlZCBwYXJhbXNcbiAqIEBwYXJhbSBlbnRpdHlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQXV0aG9yaXR5TWV0YWRhdGFFbnRpdHkoXG4gICAga2V5OiBzdHJpbmcsXG4gICAgZW50aXR5OiBvYmplY3Rcbik6IGJvb2xlYW4ge1xuICAgIGlmICghZW50aXR5KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICBrZXkuaW5kZXhPZihBVVRIT1JJVFlfTUVUQURBVEFfQ09OU1RBTlRTLkNBQ0hFX0tFWSkgPT09IDAgJiZcbiAgICAgICAgZW50aXR5Lmhhc093blByb3BlcnR5KFwiYWxpYXNlc1wiKSAmJlxuICAgICAgICBlbnRpdHkuaGFzT3duUHJvcGVydHkoXCJwcmVmZXJyZWRfY2FjaGVcIikgJiZcbiAgICAgICAgZW50aXR5Lmhhc093blByb3BlcnR5KFwicHJlZmVycmVkX25ldHdvcmtcIikgJiZcbiAgICAgICAgZW50aXR5Lmhhc093blByb3BlcnR5KFwiY2Fub25pY2FsX2F1dGhvcml0eVwiKSAmJlxuICAgICAgICBlbnRpdHkuaGFzT3duUHJvcGVydHkoXCJhdXRob3JpemF0aW9uX2VuZHBvaW50XCIpICYmXG4gICAgICAgIGVudGl0eS5oYXNPd25Qcm9wZXJ0eShcInRva2VuX2VuZHBvaW50XCIpICYmXG4gICAgICAgIGVudGl0eS5oYXNPd25Qcm9wZXJ0eShcImlzc3VlclwiKSAmJlxuICAgICAgICBlbnRpdHkuaGFzT3duUHJvcGVydHkoXCJhbGlhc2VzRnJvbU5ldHdvcmtcIikgJiZcbiAgICAgICAgZW50aXR5Lmhhc093blByb3BlcnR5KFwiZW5kcG9pbnRzRnJvbU5ldHdvcmtcIikgJiZcbiAgICAgICAgZW50aXR5Lmhhc093blByb3BlcnR5KFwiZXhwaXJlc0F0XCIpICYmXG4gICAgICAgIGVudGl0eS5oYXNPd25Qcm9wZXJ0eShcImp3a3NfdXJpXCIpXG4gICAgKTtcbn1cblxuLyoqXG4gKiBSZXNldCB0aGUgZXhpcmVzQXQgdmFsdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlQXV0aG9yaXR5TWV0YWRhdGFFeHBpcmVzQXQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gKFxuICAgICAgICBUaW1lVXRpbHMubm93U2Vjb25kcygpICtcbiAgICAgICAgQVVUSE9SSVRZX01FVEFEQVRBX0NPTlNUQU5UUy5SRUZSRVNIX1RJTUVfU0VDT05EU1xuICAgICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVBdXRob3JpdHlFbmRwb2ludE1ldGFkYXRhKFxuICAgIGF1dGhvcml0eU1ldGFkYXRhOiBBdXRob3JpdHlNZXRhZGF0YUVudGl0eSxcbiAgICB1cGRhdGVkVmFsdWVzOiBPcGVuSWRDb25maWdSZXNwb25zZSxcbiAgICBmcm9tTmV0d29yazogYm9vbGVhblxuKTogdm9pZCB7XG4gICAgYXV0aG9yaXR5TWV0YWRhdGEuYXV0aG9yaXphdGlvbl9lbmRwb2ludCA9XG4gICAgICAgIHVwZGF0ZWRWYWx1ZXMuYXV0aG9yaXphdGlvbl9lbmRwb2ludDtcbiAgICBhdXRob3JpdHlNZXRhZGF0YS50b2tlbl9lbmRwb2ludCA9IHVwZGF0ZWRWYWx1ZXMudG9rZW5fZW5kcG9pbnQ7XG4gICAgYXV0aG9yaXR5TWV0YWRhdGEuZW5kX3Nlc3Npb25fZW5kcG9pbnQgPSB1cGRhdGVkVmFsdWVzLmVuZF9zZXNzaW9uX2VuZHBvaW50O1xuICAgIGF1dGhvcml0eU1ldGFkYXRhLmlzc3VlciA9IHVwZGF0ZWRWYWx1ZXMuaXNzdWVyO1xuICAgIGF1dGhvcml0eU1ldGFkYXRhLmVuZHBvaW50c0Zyb21OZXR3b3JrID0gZnJvbU5ldHdvcms7XG4gICAgYXV0aG9yaXR5TWV0YWRhdGEuandrc191cmkgPSB1cGRhdGVkVmFsdWVzLmp3a3NfdXJpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YShcbiAgICBhdXRob3JpdHlNZXRhZGF0YTogQXV0aG9yaXR5TWV0YWRhdGFFbnRpdHksXG4gICAgdXBkYXRlZFZhbHVlczogQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YSxcbiAgICBmcm9tTmV0d29yazogYm9vbGVhblxuKTogdm9pZCB7XG4gICAgYXV0aG9yaXR5TWV0YWRhdGEuYWxpYXNlcyA9IHVwZGF0ZWRWYWx1ZXMuYWxpYXNlcztcbiAgICBhdXRob3JpdHlNZXRhZGF0YS5wcmVmZXJyZWRfY2FjaGUgPSB1cGRhdGVkVmFsdWVzLnByZWZlcnJlZF9jYWNoZTtcbiAgICBhdXRob3JpdHlNZXRhZGF0YS5wcmVmZXJyZWRfbmV0d29yayA9IHVwZGF0ZWRWYWx1ZXMucHJlZmVycmVkX25ldHdvcms7XG4gICAgYXV0aG9yaXR5TWV0YWRhdGEuYWxpYXNlc0Zyb21OZXR3b3JrID0gZnJvbU5ldHdvcms7XG59XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgZGF0YSBuZWVkcyB0byBiZSByZWZyZXNoZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQXV0aG9yaXR5TWV0YWRhdGFFeHBpcmVkKFxuICAgIG1ldGFkYXRhOiBBdXRob3JpdHlNZXRhZGF0YUVudGl0eVxuKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIG1ldGFkYXRhLmV4cGlyZXNBdCA8PSBUaW1lVXRpbHMubm93U2Vjb25kcygpO1xufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5leHBvcnQgY29uc3QgcmVkaXJlY3RVcmlFbXB0eSA9IFwicmVkaXJlY3RfdXJpX2VtcHR5XCI7XG5leHBvcnQgY29uc3QgY2xhaW1zUmVxdWVzdFBhcnNpbmdFcnJvciA9IFwiY2xhaW1zX3JlcXVlc3RfcGFyc2luZ19lcnJvclwiO1xuZXhwb3J0IGNvbnN0IGF1dGhvcml0eVVyaUluc2VjdXJlID0gXCJhdXRob3JpdHlfdXJpX2luc2VjdXJlXCI7XG5leHBvcnQgY29uc3QgdXJsUGFyc2VFcnJvciA9IFwidXJsX3BhcnNlX2Vycm9yXCI7XG5leHBvcnQgY29uc3QgdXJsRW1wdHlFcnJvciA9IFwiZW1wdHlfdXJsX2Vycm9yXCI7XG5leHBvcnQgY29uc3QgZW1wdHlJbnB1dFNjb3Blc0Vycm9yID0gXCJlbXB0eV9pbnB1dF9zY29wZXNfZXJyb3JcIjtcbmV4cG9ydCBjb25zdCBpbnZhbGlkUHJvbXB0VmFsdWUgPSBcImludmFsaWRfcHJvbXB0X3ZhbHVlXCI7XG5leHBvcnQgY29uc3QgaW52YWxpZENsYWltcyA9IFwiaW52YWxpZF9jbGFpbXNcIjtcbmV4cG9ydCBjb25zdCB0b2tlblJlcXVlc3RFbXB0eSA9IFwidG9rZW5fcmVxdWVzdF9lbXB0eVwiO1xuZXhwb3J0IGNvbnN0IGxvZ291dFJlcXVlc3RFbXB0eSA9IFwibG9nb3V0X3JlcXVlc3RfZW1wdHlcIjtcbmV4cG9ydCBjb25zdCBpbnZhbGlkQ29kZUNoYWxsZW5nZU1ldGhvZCA9IFwiaW52YWxpZF9jb2RlX2NoYWxsZW5nZV9tZXRob2RcIjtcbmV4cG9ydCBjb25zdCBwa2NlUGFyYW1zTWlzc2luZyA9IFwicGtjZV9wYXJhbXNfbWlzc2luZ1wiO1xuZXhwb3J0IGNvbnN0IGludmFsaWRDbG91ZERpc2NvdmVyeU1ldGFkYXRhID0gXCJpbnZhbGlkX2Nsb3VkX2Rpc2NvdmVyeV9tZXRhZGF0YVwiO1xuZXhwb3J0IGNvbnN0IGludmFsaWRBdXRob3JpdHlNZXRhZGF0YSA9IFwiaW52YWxpZF9hdXRob3JpdHlfbWV0YWRhdGFcIjtcbmV4cG9ydCBjb25zdCB1bnRydXN0ZWRBdXRob3JpdHkgPSBcInVudHJ1c3RlZF9hdXRob3JpdHlcIjtcbmV4cG9ydCBjb25zdCBtaXNzaW5nU3NoSndrID0gXCJtaXNzaW5nX3NzaF9qd2tcIjtcbmV4cG9ydCBjb25zdCBtaXNzaW5nU3NoS2lkID0gXCJtaXNzaW5nX3NzaF9raWRcIjtcbmV4cG9ydCBjb25zdCBtaXNzaW5nTm9uY2VBdXRoZW50aWNhdGlvbkhlYWRlciA9XG4gICAgXCJtaXNzaW5nX25vbmNlX2F1dGhlbnRpY2F0aW9uX2hlYWRlclwiO1xuZXhwb3J0IGNvbnN0IGludmFsaWRBdXRoZW50aWNhdGlvbkhlYWRlciA9IFwiaW52YWxpZF9hdXRoZW50aWNhdGlvbl9oZWFkZXJcIjtcbmV4cG9ydCBjb25zdCBjYW5ub3RTZXRPSURDT3B0aW9ucyA9IFwiY2Fubm90X3NldF9PSURDT3B0aW9uc1wiO1xuZXhwb3J0IGNvbnN0IGNhbm5vdEFsbG93UGxhdGZvcm1Ccm9rZXIgPSBcImNhbm5vdF9hbGxvd19wbGF0Zm9ybV9icm9rZXJcIjtcbmV4cG9ydCBjb25zdCBhdXRob3JpdHlNaXNtYXRjaCA9IFwiYXV0aG9yaXR5X21pc21hdGNoXCI7XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEF1dGhFcnJvciB9IGZyb20gXCIuL0F1dGhFcnJvci5qc1wiO1xuaW1wb3J0ICogYXMgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMgZnJvbSBcIi4vQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuanNcIjtcbmV4cG9ydCB7IENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzIH07XG5cbmV4cG9ydCBjb25zdCBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlcyA9IHtcbiAgICBbQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMucmVkaXJlY3RVcmlFbXB0eV06XG4gICAgICAgIFwiQSByZWRpcmVjdCBVUkkgaXMgcmVxdWlyZWQgZm9yIGFsbCBjYWxscywgYW5kIG5vbmUgaGFzIGJlZW4gc2V0LlwiLFxuICAgIFtDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5jbGFpbXNSZXF1ZXN0UGFyc2luZ0Vycm9yXTpcbiAgICAgICAgXCJDb3VsZCBub3QgcGFyc2UgdGhlIGdpdmVuIGNsYWltcyByZXF1ZXN0IG9iamVjdC5cIixcbiAgICBbQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuYXV0aG9yaXR5VXJpSW5zZWN1cmVdOlxuICAgICAgICBcIkF1dGhvcml0eSBVUklzIG11c3QgdXNlIGh0dHBzLiAgUGxlYXNlIHNlZSBoZXJlIGZvciB2YWxpZCBhdXRob3JpdHkgY29uZmlndXJhdGlvbiBvcHRpb25zOiBodHRwczovL2RvY3MubWljcm9zb2Z0LmNvbS9lbi11cy9henVyZS9hY3RpdmUtZGlyZWN0b3J5L2RldmVsb3AvbXNhbC1qcy1pbml0aWFsaXppbmctY2xpZW50LWFwcGxpY2F0aW9ucyNjb25maWd1cmF0aW9uLW9wdGlvbnNcIixcbiAgICBbQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMudXJsUGFyc2VFcnJvcl06XG4gICAgICAgIFwiVVJMIGNvdWxkIG5vdCBiZSBwYXJzZWQgaW50byBhcHByb3ByaWF0ZSBzZWdtZW50cy5cIixcbiAgICBbQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMudXJsRW1wdHlFcnJvcl06IFwiVVJMIHdhcyBlbXB0eSBvciBudWxsLlwiLFxuICAgIFtDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5lbXB0eUlucHV0U2NvcGVzRXJyb3JdOlxuICAgICAgICBcIlNjb3BlcyBjYW5ub3QgYmUgcGFzc2VkIGFzIG51bGwsIHVuZGVmaW5lZCBvciBlbXB0eSBhcnJheSBiZWNhdXNlIHRoZXkgYXJlIHJlcXVpcmVkIHRvIG9idGFpbiBhbiBhY2Nlc3MgdG9rZW4uXCIsXG4gICAgW0NsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmludmFsaWRQcm9tcHRWYWx1ZV06XG4gICAgICAgIFwiUGxlYXNlIHNlZSBoZXJlIGZvciB2YWxpZCBjb25maWd1cmF0aW9uIG9wdGlvbnM6IGh0dHBzOi8vYXp1cmVhZC5naXRodWIuaW8vbWljcm9zb2Z0LWF1dGhlbnRpY2F0aW9uLWxpYnJhcnktZm9yLWpzL3JlZi9tb2R1bGVzL19henVyZV9tc2FsX2NvbW1vbi5odG1sI2NvbW1vbmF1dGhvcml6YXRpb251cmxyZXF1ZXN0XCIsXG4gICAgW0NsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmludmFsaWRDbGFpbXNdOlxuICAgICAgICBcIkdpdmVuIGNsYWltcyBwYXJhbWV0ZXIgbXVzdCBiZSBhIHN0cmluZ2lmaWVkIEpTT04gb2JqZWN0LlwiLFxuICAgIFtDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy50b2tlblJlcXVlc3RFbXB0eV06XG4gICAgICAgIFwiVG9rZW4gcmVxdWVzdCB3YXMgZW1wdHkgYW5kIG5vdCBmb3VuZCBpbiBjYWNoZS5cIixcbiAgICBbQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMubG9nb3V0UmVxdWVzdEVtcHR5XTpcbiAgICAgICAgXCJUaGUgbG9nb3V0IHJlcXVlc3Qgd2FzIG51bGwgb3IgdW5kZWZpbmVkLlwiLFxuICAgIFtDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5pbnZhbGlkQ29kZUNoYWxsZW5nZU1ldGhvZF06XG4gICAgICAgICdjb2RlX2NoYWxsZW5nZV9tZXRob2QgcGFzc2VkIGlzIGludmFsaWQuIFZhbGlkIHZhbHVlcyBhcmUgXCJwbGFpblwiIGFuZCBcIlMyNTZcIi4nLFxuICAgIFtDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5wa2NlUGFyYW1zTWlzc2luZ106XG4gICAgICAgIFwiQm90aCBwYXJhbXM6IGNvZGVfY2hhbGxlbmdlIGFuZCBjb2RlX2NoYWxsZW5nZV9tZXRob2QgYXJlIHRvIGJlIHBhc3NlZCBpZiB0byBiZSBzZW50IGluIHRoZSByZXF1ZXN0XCIsXG4gICAgW0NsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmludmFsaWRDbG91ZERpc2NvdmVyeU1ldGFkYXRhXTpcbiAgICAgICAgXCJJbnZhbGlkIGNsb3VkRGlzY292ZXJ5TWV0YWRhdGEgcHJvdmlkZWQuIE11c3QgYmUgYSBzdHJpbmdpZmllZCBKU09OIG9iamVjdCBjb250YWluaW5nIHRlbmFudF9kaXNjb3ZlcnlfZW5kcG9pbnQgYW5kIG1ldGFkYXRhIGZpZWxkc1wiLFxuICAgIFtDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5pbnZhbGlkQXV0aG9yaXR5TWV0YWRhdGFdOlxuICAgICAgICBcIkludmFsaWQgYXV0aG9yaXR5TWV0YWRhdGEgcHJvdmlkZWQuIE11c3QgYnkgYSBzdHJpbmdpZmllZCBKU09OIG9iamVjdCBjb250YWluaW5nIGF1dGhvcml6YXRpb25fZW5kcG9pbnQsIHRva2VuX2VuZHBvaW50LCBpc3N1ZXIgZmllbGRzLlwiLFxuICAgIFtDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy51bnRydXN0ZWRBdXRob3JpdHldOlxuICAgICAgICBcIlRoZSBwcm92aWRlZCBhdXRob3JpdHkgaXMgbm90IGEgdHJ1c3RlZCBhdXRob3JpdHkuIFBsZWFzZSBpbmNsdWRlIHRoaXMgYXV0aG9yaXR5IGluIHRoZSBrbm93bkF1dGhvcml0aWVzIGNvbmZpZyBwYXJhbWV0ZXIuXCIsXG4gICAgW0NsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLm1pc3NpbmdTc2hKd2tdOlxuICAgICAgICBcIk1pc3Npbmcgc3NoSndrIGluIFNTSCBjZXJ0aWZpY2F0ZSByZXF1ZXN0LiBBIHN0cmluZ2lmaWVkIEpTT04gV2ViIEtleSBpcyByZXF1aXJlZCB3aGVuIHVzaW5nIHRoZSBTU0ggYXV0aGVudGljYXRpb24gc2NoZW1lLlwiLFxuICAgIFtDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5taXNzaW5nU3NoS2lkXTpcbiAgICAgICAgXCJNaXNzaW5nIHNzaEtpZCBpbiBTU0ggY2VydGlmaWNhdGUgcmVxdWVzdC4gQSBzdHJpbmcgdGhhdCB1bmlxdWVseSBpZGVudGlmaWVzIHRoZSBwdWJsaWMgU1NIIGtleSBpcyByZXF1aXJlZCB3aGVuIHVzaW5nIHRoZSBTU0ggYXV0aGVudGljYXRpb24gc2NoZW1lLlwiLFxuICAgIFtDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5taXNzaW5nTm9uY2VBdXRoZW50aWNhdGlvbkhlYWRlcl06XG4gICAgICAgIFwiVW5hYmxlIHRvIGZpbmQgYW4gYXV0aGVudGljYXRpb24gaGVhZGVyIGNvbnRhaW5pbmcgc2VydmVyIG5vbmNlLiBFaXRoZXIgdGhlIEF1dGhlbnRpY2F0aW9uLUluZm8gb3IgV1dXLUF1dGhlbnRpY2F0ZSBoZWFkZXJzIG11c3QgYmUgcHJlc2VudCBpbiBvcmRlciB0byBvYnRhaW4gYSBzZXJ2ZXIgbm9uY2UuXCIsXG4gICAgW0NsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmludmFsaWRBdXRoZW50aWNhdGlvbkhlYWRlcl06XG4gICAgICAgIFwiSW52YWxpZCBhdXRoZW50aWNhdGlvbiBoZWFkZXIgcHJvdmlkZWRcIixcbiAgICBbQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuY2Fubm90U2V0T0lEQ09wdGlvbnNdOlxuICAgICAgICBcIkNhbm5vdCBzZXQgT0lEQ09wdGlvbnMgcGFyYW1ldGVyLiBQbGVhc2UgY2hhbmdlIHRoZSBwcm90b2NvbCBtb2RlIHRvIE9JREMgb3IgdXNlIGEgbm9uLU1pY3Jvc29mdCBhdXRob3JpdHkuXCIsXG4gICAgW0NsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmNhbm5vdEFsbG93UGxhdGZvcm1Ccm9rZXJdOlxuICAgICAgICBcIkNhbm5vdCBzZXQgYWxsb3dQbGF0Zm9ybUJyb2tlciBwYXJhbWV0ZXIgdG8gdHJ1ZSB3aGVuIG5vdCBpbiBBQUQgcHJvdG9jb2wgbW9kZS5cIixcbiAgICBbQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuYXV0aG9yaXR5TWlzbWF0Y2hdOlxuICAgICAgICBcIkF1dGhvcml0eSBtaXNtYXRjaCBlcnJvci4gQXV0aG9yaXR5IHByb3ZpZGVkIGluIGxvZ2luIHJlcXVlc3Qgb3IgUHVibGljQ2xpZW50QXBwbGljYXRpb24gY29uZmlnIGRvZXMgbm90IG1hdGNoIHRoZSBlbnZpcm9ubWVudCBvZiB0aGUgcHJvdmlkZWQgYWNjb3VudC4gUGxlYXNlIHVzZSBhIG1hdGNoaW5nIGFjY291bnQgb3IgbWFrZSBhbiBpbnRlcmFjdGl2ZSByZXF1ZXN0IHRvIGxvZ2luIHRvIHRoaXMgYXV0aG9yaXR5LlwiLFxufTtcblxuLyoqXG4gKiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlIGNsYXNzIGNvbnRhaW5pbmcgc3RyaW5nIGNvbnN0YW50cyB1c2VkIGJ5IGVycm9yIGNvZGVzIGFuZCBtZXNzYWdlcy5cbiAqIEBkZXByZWNhdGVkIFVzZSBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2RlcyBpbnN0ZWFkXG4gKi9cbmV4cG9ydCBjb25zdCBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlID0ge1xuICAgIHJlZGlyZWN0VXJpTm90U2V0OiB7XG4gICAgICAgIGNvZGU6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLnJlZGlyZWN0VXJpRW1wdHksXG4gICAgICAgIGRlc2M6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMucmVkaXJlY3RVcmlFbXB0eVxuICAgICAgICBdLFxuICAgIH0sXG4gICAgY2xhaW1zUmVxdWVzdFBhcnNpbmdFcnJvcjoge1xuICAgICAgICBjb2RlOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5jbGFpbXNSZXF1ZXN0UGFyc2luZ0Vycm9yLFxuICAgICAgICBkZXNjOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmNsYWltc1JlcXVlc3RQYXJzaW5nRXJyb3JcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIGF1dGhvcml0eVVyaUluc2VjdXJlOiB7XG4gICAgICAgIGNvZGU6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmF1dGhvcml0eVVyaUluc2VjdXJlLFxuICAgICAgICBkZXNjOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmF1dGhvcml0eVVyaUluc2VjdXJlXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICB1cmxQYXJzZUVycm9yOiB7XG4gICAgICAgIGNvZGU6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLnVybFBhcnNlRXJyb3IsXG4gICAgICAgIGRlc2M6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMudXJsUGFyc2VFcnJvclxuICAgICAgICBdLFxuICAgIH0sXG4gICAgdXJsRW1wdHlFcnJvcjoge1xuICAgICAgICBjb2RlOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy51cmxFbXB0eUVycm9yLFxuICAgICAgICBkZXNjOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLnVybEVtcHR5RXJyb3JcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIGVtcHR5U2NvcGVzRXJyb3I6IHtcbiAgICAgICAgY29kZTogQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuZW1wdHlJbnB1dFNjb3Blc0Vycm9yLFxuICAgICAgICBkZXNjOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmVtcHR5SW5wdXRTY29wZXNFcnJvclxuICAgICAgICBdLFxuICAgIH0sXG4gICAgaW52YWxpZFByb21wdDoge1xuICAgICAgICBjb2RlOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5pbnZhbGlkUHJvbXB0VmFsdWUsXG4gICAgICAgIGRlc2M6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuaW52YWxpZFByb21wdFZhbHVlXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBpbnZhbGlkQ2xhaW1zUmVxdWVzdDoge1xuICAgICAgICBjb2RlOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5pbnZhbGlkQ2xhaW1zLFxuICAgICAgICBkZXNjOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmludmFsaWRDbGFpbXNcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIHRva2VuUmVxdWVzdEVtcHR5RXJyb3I6IHtcbiAgICAgICAgY29kZTogQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMudG9rZW5SZXF1ZXN0RW1wdHksXG4gICAgICAgIGRlc2M6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMudG9rZW5SZXF1ZXN0RW1wdHlcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIGxvZ291dFJlcXVlc3RFbXB0eUVycm9yOiB7XG4gICAgICAgIGNvZGU6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmxvZ291dFJlcXVlc3RFbXB0eSxcbiAgICAgICAgZGVzYzogQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yTWVzc2FnZXNbXG4gICAgICAgICAgICBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5sb2dvdXRSZXF1ZXN0RW1wdHlcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIGludmFsaWRDb2RlQ2hhbGxlbmdlTWV0aG9kOiB7XG4gICAgICAgIGNvZGU6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmludmFsaWRDb2RlQ2hhbGxlbmdlTWV0aG9kLFxuICAgICAgICBkZXNjOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmludmFsaWRDb2RlQ2hhbGxlbmdlTWV0aG9kXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBpbnZhbGlkQ29kZUNoYWxsZW5nZVBhcmFtczoge1xuICAgICAgICBjb2RlOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5wa2NlUGFyYW1zTWlzc2luZyxcbiAgICAgICAgZGVzYzogQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yTWVzc2FnZXNbXG4gICAgICAgICAgICBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5wa2NlUGFyYW1zTWlzc2luZ1xuICAgICAgICBdLFxuICAgIH0sXG4gICAgaW52YWxpZENsb3VkRGlzY292ZXJ5TWV0YWRhdGE6IHtcbiAgICAgICAgY29kZTogQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuaW52YWxpZENsb3VkRGlzY292ZXJ5TWV0YWRhdGEsXG4gICAgICAgIGRlc2M6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuaW52YWxpZENsb3VkRGlzY292ZXJ5TWV0YWRhdGFcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIGludmFsaWRBdXRob3JpdHlNZXRhZGF0YToge1xuICAgICAgICBjb2RlOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5pbnZhbGlkQXV0aG9yaXR5TWV0YWRhdGEsXG4gICAgICAgIGRlc2M6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuaW52YWxpZEF1dGhvcml0eU1ldGFkYXRhXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICB1bnRydXN0ZWRBdXRob3JpdHk6IHtcbiAgICAgICAgY29kZTogQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMudW50cnVzdGVkQXV0aG9yaXR5LFxuICAgICAgICBkZXNjOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLnVudHJ1c3RlZEF1dGhvcml0eVxuICAgICAgICBdLFxuICAgIH0sXG4gICAgbWlzc2luZ1NzaEp3azoge1xuICAgICAgICBjb2RlOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5taXNzaW5nU3NoSndrLFxuICAgICAgICBkZXNjOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLm1pc3NpbmdTc2hKd2tcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIG1pc3NpbmdTc2hLaWQ6IHtcbiAgICAgICAgY29kZTogQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMubWlzc2luZ1NzaEtpZCxcbiAgICAgICAgZGVzYzogQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yTWVzc2FnZXNbXG4gICAgICAgICAgICBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5taXNzaW5nU3NoS2lkXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBtaXNzaW5nTm9uY2VBdXRoZW50aWNhdGlvbkhlYWRlcjoge1xuICAgICAgICBjb2RlOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5taXNzaW5nTm9uY2VBdXRoZW50aWNhdGlvbkhlYWRlcixcbiAgICAgICAgZGVzYzogQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yTWVzc2FnZXNbXG4gICAgICAgICAgICBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5taXNzaW5nTm9uY2VBdXRoZW50aWNhdGlvbkhlYWRlclxuICAgICAgICBdLFxuICAgIH0sXG4gICAgaW52YWxpZEF1dGhlbnRpY2F0aW9uSGVhZGVyOiB7XG4gICAgICAgIGNvZGU6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmludmFsaWRBdXRoZW50aWNhdGlvbkhlYWRlcixcbiAgICAgICAgZGVzYzogQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yTWVzc2FnZXNbXG4gICAgICAgICAgICBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5pbnZhbGlkQXV0aGVudGljYXRpb25IZWFkZXJcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIGNhbm5vdFNldE9JRENPcHRpb25zOiB7XG4gICAgICAgIGNvZGU6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmNhbm5vdFNldE9JRENPcHRpb25zLFxuICAgICAgICBkZXNjOiBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JNZXNzYWdlc1tcbiAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmNhbm5vdFNldE9JRENPcHRpb25zXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBjYW5ub3RBbGxvd1BsYXRmb3JtQnJva2VyOiB7XG4gICAgICAgIGNvZGU6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmNhbm5vdEFsbG93UGxhdGZvcm1Ccm9rZXIsXG4gICAgICAgIGRlc2M6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuY2Fubm90QWxsb3dQbGF0Zm9ybUJyb2tlclxuICAgICAgICBdLFxuICAgIH0sXG4gICAgYXV0aG9yaXR5TWlzbWF0Y2g6IHtcbiAgICAgICAgY29kZTogQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuYXV0aG9yaXR5TWlzbWF0Y2gsXG4gICAgICAgIGRlc2M6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuYXV0aG9yaXR5TWlzbWF0Y2hcbiAgICAgICAgXSxcbiAgICB9LFxufTtcblxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiB0aGVyZSBpcyBhbiBlcnJvciBpbiBjb25maWd1cmF0aW9uIG9mIHRoZSBNU0FMLmpzIGxpYnJhcnkuXG4gKi9cbmV4cG9ydCBjbGFzcyBDbGllbnRDb25maWd1cmF0aW9uRXJyb3IgZXh0ZW5kcyBBdXRoRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKGVycm9yQ29kZTogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKGVycm9yQ29kZSwgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yTWVzc2FnZXNbZXJyb3JDb2RlXSk7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yXCI7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBDbGllbnRDb25maWd1cmF0aW9uRXJyb3IucHJvdG90eXBlKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDbGllbnRDb25maWd1cmF0aW9uRXJyb3IoXG4gICAgZXJyb3JDb2RlOiBzdHJpbmdcbik6IENsaWVudENvbmZpZ3VyYXRpb25FcnJvciB7XG4gICAgcmV0dXJuIG5ldyBDbGllbnRDb25maWd1cmF0aW9uRXJyb3IoZXJyb3JDb2RlKTtcbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBTdHJpbmdVdGlscyB7XG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgc3RyaW5naWZpZWQgb2JqZWN0IGlzIGVtcHR5XG4gICAgICogQHBhcmFtIHN0ck9ialxuICAgICAqL1xuICAgIHN0YXRpYyBpc0VtcHR5T2JqKHN0ck9iaj86IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoc3RyT2JqKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9iaiA9IEpTT04ucGFyc2Uoc3RyT2JqKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5sZW5ndGggPT09IDA7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHN0YXRpYyBzdGFydHNXaXRoKHN0cjogc3RyaW5nLCBzZWFyY2g6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gc3RyLmluZGV4T2Yoc2VhcmNoKSA9PT0gMDtcbiAgICB9XG5cbiAgICBzdGF0aWMgZW5kc1dpdGgoc3RyOiBzdHJpbmcsIHNlYXJjaDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICBzdHIubGVuZ3RoID49IHNlYXJjaC5sZW5ndGggJiZcbiAgICAgICAgICAgIHN0ci5sYXN0SW5kZXhPZihzZWFyY2gpID09PSBzdHIubGVuZ3RoIC0gc2VhcmNoLmxlbmd0aFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBzdHJpbmcgaW50byBhbiBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcXVlcnlcbiAgICAgKi9cbiAgICBzdGF0aWMgcXVlcnlTdHJpbmdUb09iamVjdDxUPihxdWVyeTogc3RyaW5nKTogVCB7XG4gICAgICAgIGNvbnN0IG9iajoge30gPSB7fTtcbiAgICAgICAgY29uc3QgcGFyYW1zID0gcXVlcnkuc3BsaXQoXCImXCIpO1xuICAgICAgICBjb25zdCBkZWNvZGUgPSAoczogc3RyaW5nKSA9PiBkZWNvZGVVUklDb21wb25lbnQocy5yZXBsYWNlKC9cXCsvZywgXCIgXCIpKTtcbiAgICAgICAgcGFyYW1zLmZvckVhY2goKHBhaXIpID0+IHtcbiAgICAgICAgICAgIGlmIChwYWlyLnRyaW0oKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IHBhaXIuc3BsaXQoLz0oLispL2csIDIpOyAvLyBTcGxpdCBvbiB0aGUgZmlyc3Qgb2NjdXJlbmNlIG9mIHRoZSAnPScgY2hhcmFjdGVyXG4gICAgICAgICAgICAgICAgaWYgKGtleSAmJiB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBvYmpbZGVjb2RlKGtleSldID0gZGVjb2RlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gb2JqIGFzIFQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpbXMgZW50cmllcyBpbiBhbiBhcnJheS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhcnJcbiAgICAgKi9cbiAgICBzdGF0aWMgdHJpbUFycmF5RW50cmllcyhhcnI6IEFycmF5PHN0cmluZz4pOiBBcnJheTxzdHJpbmc+IHtcbiAgICAgICAgcmV0dXJuIGFyci5tYXAoKGVudHJ5KSA9PiBlbnRyeS50cmltKCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgZW1wdHkgc3RyaW5ncyBmcm9tIGFycmF5XG4gICAgICogQHBhcmFtIGFyclxuICAgICAqL1xuICAgIHN0YXRpYyByZW1vdmVFbXB0eVN0cmluZ3NGcm9tQXJyYXkoYXJyOiBBcnJheTxzdHJpbmc+KTogQXJyYXk8c3RyaW5nPiB7XG4gICAgICAgIHJldHVybiBhcnIuZmlsdGVyKChlbnRyeSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuICEhZW50cnk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEF0dGVtcHRzIHRvIHBhcnNlIGEgc3RyaW5nIGludG8gSlNPTlxuICAgICAqIEBwYXJhbSBzdHJcbiAgICAgKi9cbiAgICBzdGF0aWMganNvblBhcnNlSGVscGVyPFQ+KHN0cjogc3RyaW5nKTogVCB8IG51bGwge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2Uoc3RyKSBhcyBUO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRlc3RzIGlmIGEgZ2l2ZW4gc3RyaW5nIG1hdGNoZXMgYSBnaXZlbiBwYXR0ZXJuLCB3aXRoIHN1cHBvcnQgZm9yIHdpbGRjYXJkcyBhbmQgcXVlcmllcy5cbiAgICAgKiBAcGFyYW0gcGF0dGVybiBXaWxkY2FyZCBwYXR0ZXJuIHRvIHN0cmluZyBtYXRjaC4gU3VwcG9ydHMgXCIqXCIgZm9yIHdpbGRjYXJkcyBhbmQgXCI/XCIgZm9yIHF1ZXJpZXNcbiAgICAgKiBAcGFyYW0gaW5wdXQgU3RyaW5nIHRvIG1hdGNoIGFnYWluc3RcbiAgICAgKi9cbiAgICBzdGF0aWMgbWF0Y2hQYXR0ZXJuKHBhdHRlcm46IHN0cmluZywgaW5wdXQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICAvKipcbiAgICAgICAgICogV2lsZGNhcmQgc3VwcG9ydDogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzMxMTcyNDgvNDg4ODU1OVxuICAgICAgICAgKiBRdWVyaWVzOiByZXBsYWNlcyBcIj9cIiBpbiBzdHJpbmcgd2l0aCBlc2NhcGVkIFwiXFw/XCIgZm9yIHJlZ2V4IHRlc3RcbiAgICAgICAgICovXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBzZWN1cml0eS9kZXRlY3Qtbm9uLWxpdGVyYWwtcmVnZXhwXG4gICAgICAgIGNvbnN0IHJlZ2V4OiBSZWdFeHAgPSBuZXcgUmVnRXhwKFxuICAgICAgICAgICAgcGF0dGVyblxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXFxcL2csIFwiXFxcXFxcXFxcIilcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFwqL2csIFwiW14gXSpcIilcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFw/L2csIFwiXFxcXD9cIilcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gcmVnZXgudGVzdChpbnB1dCk7XG4gICAgfVxufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICAgIGNyZWF0ZUNsaWVudENvbmZpZ3VyYXRpb25FcnJvcixcbiAgICBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcyxcbn0gZnJvbSBcIi4uL2Vycm9yL0NsaWVudENvbmZpZ3VyYXRpb25FcnJvci5qc1wiO1xuaW1wb3J0IHsgU3RyaW5nVXRpbHMgfSBmcm9tIFwiLi4vdXRpbHMvU3RyaW5nVXRpbHMuanNcIjtcbmltcG9ydCB7XG4gICAgQ2xpZW50QXV0aEVycm9yQ29kZXMsXG4gICAgY3JlYXRlQ2xpZW50QXV0aEVycm9yLFxufSBmcm9tIFwiLi4vZXJyb3IvQ2xpZW50QXV0aEVycm9yLmpzXCI7XG5pbXBvcnQgeyBDb25zdGFudHMsIE9JRENfU0NPUEVTIH0gZnJvbSBcIi4uL3V0aWxzL0NvbnN0YW50cy5qc1wiO1xuXG4vKipcbiAqIFRoZSBTY29wZVNldCBjbGFzcyBjcmVhdGVzIGEgc2V0IG9mIHNjb3Blcy4gU2NvcGVzIGFyZSBjYXNlLWluc2Vuc2l0aXZlLCB1bmlxdWUgdmFsdWVzLCBzbyB0aGUgU2V0IG9iamVjdCBpbiBKUyBtYWtlc1xuICogdGhlIG1vc3Qgc2Vuc2UgdG8gaW1wbGVtZW50IGZvciB0aGlzIGNsYXNzLiBBbGwgc2NvcGVzIGFyZSB0cmltbWVkIGFuZCBjb252ZXJ0ZWQgdG8gbG93ZXIgY2FzZSBzdHJpbmdzIGluIGludGVyc2VjdGlvbiBhbmQgdW5pb24gZnVuY3Rpb25zXG4gKiB0byBlbnN1cmUgdW5pcXVlbmVzcyBvZiBzdHJpbmdzLlxuICovXG5leHBvcnQgY2xhc3MgU2NvcGVTZXQge1xuICAgIC8vIFNjb3BlcyBhcyBhIFNldCBvZiBzdHJpbmdzXG4gICAgcHJpdmF0ZSBzY29wZXM6IFNldDxzdHJpbmc+O1xuXG4gICAgY29uc3RydWN0b3IoaW5wdXRTY29wZXM6IEFycmF5PHN0cmluZz4pIHtcbiAgICAgICAgLy8gRmlsdGVyIGVtcHR5IHN0cmluZyBhbmQgbnVsbC91bmRlZmluZWQgYXJyYXkgaXRlbXNcbiAgICAgICAgY29uc3Qgc2NvcGVBcnIgPSBpbnB1dFNjb3Blc1xuICAgICAgICAgICAgPyBTdHJpbmdVdGlscy50cmltQXJyYXlFbnRyaWVzKFsuLi5pbnB1dFNjb3Blc10pXG4gICAgICAgICAgICA6IFtdO1xuICAgICAgICBjb25zdCBmaWx0ZXJlZElucHV0ID0gc2NvcGVBcnJcbiAgICAgICAgICAgID8gU3RyaW5nVXRpbHMucmVtb3ZlRW1wdHlTdHJpbmdzRnJvbUFycmF5KHNjb3BlQXJyKVxuICAgICAgICAgICAgOiBbXTtcblxuICAgICAgICAvLyBDaGVjayBpZiBzY29wZXMgYXJyYXkgaGFzIGF0IGxlYXN0IG9uZSBtZW1iZXJcbiAgICAgICAgaWYgKCFmaWx0ZXJlZElucHV0IHx8ICFmaWx0ZXJlZElucHV0Lmxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yKFxuICAgICAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmVtcHR5SW5wdXRTY29wZXNFcnJvclxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2NvcGVzID0gbmV3IFNldDxzdHJpbmc+KCk7IC8vIEl0ZXJhdG9yIGluIGNvbnN0cnVjdG9yIG5vdCBzdXBwb3J0ZWQgYnkgSUUxMVxuICAgICAgICBmaWx0ZXJlZElucHV0LmZvckVhY2goKHNjb3BlKSA9PiB0aGlzLnNjb3Blcy5hZGQoc2NvcGUpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGYWN0b3J5IG1ldGhvZCB0byBjcmVhdGUgU2NvcGVTZXQgZnJvbSBzcGFjZS1kZWxpbWl0ZWQgc3RyaW5nXG4gICAgICogQHBhcmFtIGlucHV0U2NvcGVTdHJpbmdcbiAgICAgKiBAcGFyYW0gYXBwQ2xpZW50SWRcbiAgICAgKiBAcGFyYW0gc2NvcGVzUmVxdWlyZWRcbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbVN0cmluZyhpbnB1dFNjb3BlU3RyaW5nOiBzdHJpbmcpOiBTY29wZVNldCB7XG4gICAgICAgIGNvbnN0IHNjb3BlU3RyaW5nID0gaW5wdXRTY29wZVN0cmluZyB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HO1xuICAgICAgICBjb25zdCBpbnB1dFNjb3BlczogQXJyYXk8c3RyaW5nPiA9IHNjb3BlU3RyaW5nLnNwbGl0KFwiIFwiKTtcbiAgICAgICAgcmV0dXJuIG5ldyBTY29wZVNldChpbnB1dFNjb3Blcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyB0aGUgc2V0IG9mIHNjb3BlcyB0byBzZWFyY2ggZm9yIGluIGNhY2hlIGxvb2t1cHNcbiAgICAgKiBAcGFyYW0gaW5wdXRTY29wZVN0cmluZ1xuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZVNlYXJjaFNjb3BlcyhpbnB1dFNjb3BlU3RyaW5nOiBBcnJheTxzdHJpbmc+KTogU2NvcGVTZXQge1xuICAgICAgICBjb25zdCBzY29wZVNldCA9IG5ldyBTY29wZVNldChpbnB1dFNjb3BlU3RyaW5nKTtcbiAgICAgICAgaWYgKCFzY29wZVNldC5jb250YWluc09ubHlPSURDU2NvcGVzKCkpIHtcbiAgICAgICAgICAgIHNjb3BlU2V0LnJlbW92ZU9JRENTY29wZXMoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNjb3BlU2V0LnJlbW92ZVNjb3BlKENvbnN0YW50cy5PRkZMSU5FX0FDQ0VTU19TQ09QRSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2NvcGVTZXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgYSBnaXZlbiBzY29wZSBpcyBwcmVzZW50IGluIHRoaXMgc2V0IG9mIHNjb3Blcy5cbiAgICAgKiBAcGFyYW0gc2NvcGVcbiAgICAgKi9cbiAgICBjb250YWluc1Njb3BlKHNjb3BlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgbG93ZXJDYXNlU2NvcGVzID0gdGhpcy5wcmludFNjb3Blc0xvd2VyQ2FzZSgpLnNwbGl0KFwiIFwiKTtcbiAgICAgICAgY29uc3QgbG93ZXJDYXNlU2NvcGVzU2V0ID0gbmV3IFNjb3BlU2V0KGxvd2VyQ2FzZVNjb3Blcyk7XG4gICAgICAgIC8vIGNvbXBhcmUgbG93ZXJjYXNlIHNjb3Blc1xuICAgICAgICByZXR1cm4gc2NvcGVcbiAgICAgICAgICAgID8gbG93ZXJDYXNlU2NvcGVzU2V0LnNjb3Blcy5oYXMoc2NvcGUudG9Mb3dlckNhc2UoKSlcbiAgICAgICAgICAgIDogZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgYSBzZXQgb2Ygc2NvcGVzIGlzIHByZXNlbnQgaW4gdGhpcyBzZXQgb2Ygc2NvcGVzLlxuICAgICAqIEBwYXJhbSBzY29wZVNldFxuICAgICAqL1xuICAgIGNvbnRhaW5zU2NvcGVTZXQoc2NvcGVTZXQ6IFNjb3BlU2V0KTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghc2NvcGVTZXQgfHwgc2NvcGVTZXQuc2NvcGVzLnNpemUgPD0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIHRoaXMuc2NvcGVzLnNpemUgPj0gc2NvcGVTZXQuc2NvcGVzLnNpemUgJiZcbiAgICAgICAgICAgIHNjb3BlU2V0LmFzQXJyYXkoKS5ldmVyeSgoc2NvcGUpID0+IHRoaXMuY29udGFpbnNTY29wZShzY29wZSkpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgc2V0IG9mIHNjb3BlcyBjb250YWlucyBvbmx5IHRoZSBkZWZhdWx0c1xuICAgICAqL1xuICAgIGNvbnRhaW5zT25seU9JRENTY29wZXMoKTogYm9vbGVhbiB7XG4gICAgICAgIGxldCBkZWZhdWx0U2NvcGVDb3VudCA9IDA7XG4gICAgICAgIE9JRENfU0NPUEVTLmZvckVhY2goKGRlZmF1bHRTY29wZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5jb250YWluc1Njb3BlKGRlZmF1bHRTY29wZSkpIHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0U2NvcGVDb3VudCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdGhpcy5zY29wZXMuc2l6ZSA9PT0gZGVmYXVsdFNjb3BlQ291bnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXBwZW5kcyBzaW5nbGUgc2NvcGUgaWYgcGFzc2VkXG4gICAgICogQHBhcmFtIG5ld1Njb3BlXG4gICAgICovXG4gICAgYXBwZW5kU2NvcGUobmV3U2NvcGU6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZiAobmV3U2NvcGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2NvcGVzLmFkZChuZXdTY29wZS50cmltKCkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXBwZW5kcyBtdWx0aXBsZSBzY29wZXMgaWYgcGFzc2VkXG4gICAgICogQHBhcmFtIG5ld1Njb3Blc1xuICAgICAqL1xuICAgIGFwcGVuZFNjb3BlcyhuZXdTY29wZXM6IEFycmF5PHN0cmluZz4pOiB2b2lkIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG5ld1Njb3Blcy5mb3JFYWNoKChuZXdTY29wZSkgPT4gdGhpcy5hcHBlbmRTY29wZShuZXdTY29wZSkpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuY2Fubm90QXBwZW5kU2NvcGVTZXRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGVsZW1lbnQgZnJvbSBzZXQgb2Ygc2NvcGVzLlxuICAgICAqIEBwYXJhbSBzY29wZVxuICAgICAqL1xuICAgIHJlbW92ZVNjb3BlKHNjb3BlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgaWYgKCFzY29wZSkge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKFxuICAgICAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLmNhbm5vdFJlbW92ZUVtcHR5U2NvcGVcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zY29wZXMuZGVsZXRlKHNjb3BlLnRyaW0oKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBkZWZhdWx0IHNjb3BlcyBmcm9tIHNldCBvZiBzY29wZXNcbiAgICAgKiBQcmltYXJpbHkgdXNlZCB0byBwcmV2ZW50IGNhY2hlIG1pc3NlcyBpZiB0aGUgZGVmYXVsdCBzY29wZXMgYXJlIG5vdCByZXR1cm5lZCBmcm9tIHRoZSBzZXJ2ZXJcbiAgICAgKi9cbiAgICByZW1vdmVPSURDU2NvcGVzKCk6IHZvaWQge1xuICAgICAgICBPSURDX1NDT1BFUy5mb3JFYWNoKChkZWZhdWx0U2NvcGU6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgdGhpcy5zY29wZXMuZGVsZXRlKGRlZmF1bHRTY29wZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbWJpbmVzIGFuIGFycmF5IG9mIHNjb3BlcyB3aXRoIHRoZSBjdXJyZW50IHNldCBvZiBzY29wZXMuXG4gICAgICogQHBhcmFtIG90aGVyU2NvcGVzXG4gICAgICovXG4gICAgdW5pb25TY29wZVNldHMob3RoZXJTY29wZXM6IFNjb3BlU2V0KTogU2V0PHN0cmluZz4ge1xuICAgICAgICBpZiAoIW90aGVyU2NvcGVzKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuZW1wdHlJbnB1dFNjb3BlU2V0XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVuaW9uU2NvcGVzID0gbmV3IFNldDxzdHJpbmc+KCk7IC8vIEl0ZXJhdG9yIGluIGNvbnN0cnVjdG9yIG5vdCBzdXBwb3J0ZWQgaW4gSUUxMVxuICAgICAgICBvdGhlclNjb3Blcy5zY29wZXMuZm9yRWFjaCgoc2NvcGUpID0+XG4gICAgICAgICAgICB1bmlvblNjb3Blcy5hZGQoc2NvcGUudG9Mb3dlckNhc2UoKSlcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5zY29wZXMuZm9yRWFjaCgoc2NvcGUpID0+IHVuaW9uU2NvcGVzLmFkZChzY29wZS50b0xvd2VyQ2FzZSgpKSk7XG4gICAgICAgIHJldHVybiB1bmlvblNjb3BlcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBzY29wZXMgaW50ZXJzZWN0IGJldHdlZW4gdGhpcyBzZXQgYW5kIGFub3RoZXIuXG4gICAgICogQHBhcmFtIG90aGVyU2NvcGVzXG4gICAgICovXG4gICAgaW50ZXJzZWN0aW5nU2NvcGVTZXRzKG90aGVyU2NvcGVzOiBTY29wZVNldCk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoIW90aGVyU2NvcGVzKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuZW1wdHlJbnB1dFNjb3BlU2V0XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRG8gbm90IGFsbG93IE9JREMgc2NvcGVzIHRvIGJlIHRoZSBvbmx5IGludGVyc2VjdGluZyBzY29wZXNcbiAgICAgICAgaWYgKCFvdGhlclNjb3Blcy5jb250YWluc09ubHlPSURDU2NvcGVzKCkpIHtcbiAgICAgICAgICAgIG90aGVyU2NvcGVzLnJlbW92ZU9JRENTY29wZXMoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1bmlvblNjb3BlcyA9IHRoaXMudW5pb25TY29wZVNldHMob3RoZXJTY29wZXMpO1xuICAgICAgICBjb25zdCBzaXplT3RoZXJTY29wZXMgPSBvdGhlclNjb3Blcy5nZXRTY29wZUNvdW50KCk7XG4gICAgICAgIGNvbnN0IHNpemVUaGlzU2NvcGVzID0gdGhpcy5nZXRTY29wZUNvdW50KCk7XG4gICAgICAgIGNvbnN0IHNpemVVbmlvblNjb3BlcyA9IHVuaW9uU2NvcGVzLnNpemU7XG4gICAgICAgIHJldHVybiBzaXplVW5pb25TY29wZXMgPCBzaXplVGhpc1Njb3BlcyArIHNpemVPdGhlclNjb3BlcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHNpemUgb2Ygc2V0IG9mIHNjb3Blcy5cbiAgICAgKi9cbiAgICBnZXRTY29wZUNvdW50KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjb3Blcy5zaXplO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHNjb3BlcyBhcyBhbiBhcnJheSBvZiBzdHJpbmcgdmFsdWVzXG4gICAgICovXG4gICAgYXNBcnJheSgpOiBBcnJheTxzdHJpbmc+IHtcbiAgICAgICAgY29uc3QgYXJyYXk6IEFycmF5PHN0cmluZz4gPSBbXTtcbiAgICAgICAgdGhpcy5zY29wZXMuZm9yRWFjaCgodmFsKSA9PiBhcnJheS5wdXNoKHZhbCkpO1xuICAgICAgICByZXR1cm4gYXJyYXk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHJpbnRzIHNjb3BlcyBpbnRvIGEgc3BhY2UtZGVsaW1pdGVkIHN0cmluZ1xuICAgICAqL1xuICAgIHByaW50U2NvcGVzKCk6IHN0cmluZyB7XG4gICAgICAgIGlmICh0aGlzLnNjb3Blcykge1xuICAgICAgICAgICAgY29uc3Qgc2NvcGVBcnIgPSB0aGlzLmFzQXJyYXkoKTtcbiAgICAgICAgICAgIHJldHVybiBzY29wZUFyci5qb2luKFwiIFwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQ29uc3RhbnRzLkVNUFRZX1NUUklORztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcmludHMgc2NvcGVzIGludG8gYSBzcGFjZS1kZWxpbWl0ZWQgbG93ZXItY2FzZSBzdHJpbmcgKHVzZWQgZm9yIGNhY2hpbmcpXG4gICAgICovXG4gICAgcHJpbnRTY29wZXNMb3dlckNhc2UoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpbnRTY29wZXMoKS50b0xvd2VyQ2FzZSgpO1xuICAgIH1cbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgICBjcmVhdGVDbGllbnRBdXRoRXJyb3IsXG4gICAgQ2xpZW50QXV0aEVycm9yQ29kZXMsXG59IGZyb20gXCIuLi9lcnJvci9DbGllbnRBdXRoRXJyb3IuanNcIjtcbmltcG9ydCB7IFNlcGFyYXRvcnMsIENvbnN0YW50cyB9IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcblxuLyoqXG4gKiBDbGllbnQgaW5mbyBvYmplY3Qgd2hpY2ggY29uc2lzdHMgb2YgdHdvIElEcy4gTmVlZCB0byBhZGQgbW9yZSBpbmZvIGhlcmUuXG4gKi9cbmV4cG9ydCB0eXBlIENsaWVudEluZm8gPSB7XG4gICAgdWlkOiBzdHJpbmc7XG4gICAgdXRpZDogc3RyaW5nO1xufTtcblxuLyoqXG4gKiBGdW5jdGlvbiB0byBidWlsZCBhIGNsaWVudCBpbmZvIG9iamVjdCBmcm9tIHNlcnZlciBjbGllbnRJbmZvIHN0cmluZ1xuICogQHBhcmFtIHJhd0NsaWVudEluZm9cbiAqIEBwYXJhbSBjcnlwdG9cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkQ2xpZW50SW5mbyhcbiAgICByYXdDbGllbnRJbmZvOiBzdHJpbmcsXG4gICAgYmFzZTY0RGVjb2RlOiAoaW5wdXQ6IHN0cmluZykgPT4gc3RyaW5nXG4pOiBDbGllbnRJbmZvIHtcbiAgICBpZiAoIXJhd0NsaWVudEluZm8pIHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvckNvZGVzLmNsaWVudEluZm9FbXB0eUVycm9yKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgICBjb25zdCBkZWNvZGVkQ2xpZW50SW5mbzogc3RyaW5nID0gYmFzZTY0RGVjb2RlKHJhd0NsaWVudEluZm8pO1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShkZWNvZGVkQ2xpZW50SW5mbykgYXMgQ2xpZW50SW5mbztcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihcbiAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLmNsaWVudEluZm9EZWNvZGluZ0Vycm9yXG4gICAgICAgICk7XG4gICAgfVxufVxuXG4vKipcbiAqIEZ1bmN0aW9uIHRvIGJ1aWxkIGEgY2xpZW50IGluZm8gb2JqZWN0IGZyb20gY2FjaGVkIGhvbWVBY2NvdW50SWQgc3RyaW5nXG4gKiBAcGFyYW0gaG9tZUFjY291bnRJZFxuICovXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRDbGllbnRJbmZvRnJvbUhvbWVBY2NvdW50SWQoXG4gICAgaG9tZUFjY291bnRJZDogc3RyaW5nXG4pOiBDbGllbnRJbmZvIHtcbiAgICBpZiAoIWhvbWVBY2NvdW50SWQpIHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKFxuICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuY2xpZW50SW5mb0RlY29kaW5nRXJyb3JcbiAgICAgICAgKTtcbiAgICB9XG4gICAgY29uc3QgY2xpZW50SW5mb1BhcnRzOiBzdHJpbmdbXSA9IGhvbWVBY2NvdW50SWQuc3BsaXQoXG4gICAgICAgIFNlcGFyYXRvcnMuQ0xJRU5UX0lORk9fU0VQQVJBVE9SLFxuICAgICAgICAyXG4gICAgKTtcbiAgICByZXR1cm4ge1xuICAgICAgICB1aWQ6IGNsaWVudEluZm9QYXJ0c1swXSxcbiAgICAgICAgdXRpZDpcbiAgICAgICAgICAgIGNsaWVudEluZm9QYXJ0cy5sZW5ndGggPCAyXG4gICAgICAgICAgICAgICAgPyBDb25zdGFudHMuRU1QVFlfU1RSSU5HXG4gICAgICAgICAgICAgICAgOiBjbGllbnRJbmZvUGFydHNbMV0sXG4gICAgfTtcbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgVG9rZW5DbGFpbXMgfSBmcm9tIFwiLi9Ub2tlbkNsYWltcy5qc1wiO1xuLyoqXG4gKiBBY2NvdW50IG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgc2lnbmF0dXJlOlxuICogLSBob21lQWNjb3VudElkICAgICAgICAgIC0gSG9tZSBhY2NvdW50IGlkZW50aWZpZXIgZm9yIHRoaXMgYWNjb3VudCBvYmplY3RcbiAqIC0gZW52aXJvbm1lbnQgICAgICAgICAgICAtIEVudGl0eSB3aGljaCBpc3N1ZWQgdGhlIHRva2VuIHJlcHJlc2VudGVkIGJ5IHRoZSBkb21haW4gb2YgdGhlIGlzc3VlciAoZS5nLiBsb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tKVxuICogLSB0ZW5hbnRJZCAgICAgICAgICAgICAgIC0gRnVsbCB0ZW5hbnQgb3Igb3JnYW5pemF0aW9uYWwgaWQgdGhhdCB0aGlzIGFjY291bnQgYmVsb25ncyB0b1xuICogLSB1c2VybmFtZSAgICAgICAgICAgICAgIC0gcHJlZmVycmVkX3VzZXJuYW1lIGNsYWltIG9mIHRoZSBpZF90b2tlbiB0aGF0IHJlcHJlc2VudHMgdGhpcyBhY2NvdW50XG4gKiAtIGxvY2FsQWNjb3VudElkICAgICAgICAgLSBMb2NhbCwgdGVuYW50LXNwZWNpZmljIGFjY291bnQgaWRlbnRpZmVyIGZvciB0aGlzIGFjY291bnQgb2JqZWN0LCB1c3VhbGx5IHVzZWQgaW4gbGVnYWN5IGNhc2VzXG4gKiAtIG5hbWUgICAgICAgICAgICAgICAgICAgLSBGdWxsIG5hbWUgZm9yIHRoZSBhY2NvdW50LCBpbmNsdWRpbmcgZ2l2ZW4gbmFtZSBhbmQgZmFtaWx5IG5hbWVcbiAqIC0gaWRUb2tlbiAgICAgICAgICAgICAgICAtIHJhdyBJRCB0b2tlblxuICogLSBpZFRva2VuQ2xhaW1zICAgICAgICAgIC0gT2JqZWN0IGNvbnRhaW5zIGNsYWltcyBmcm9tIElEIHRva2VuXG4gKiAtIG5hdGl2ZUFjY291bnRJZCAgICAgICAgLSBUaGUgdXNlcidzIG5hdGl2ZSBhY2NvdW50IElEXG4gKiAtIHRlbmFudFByb2ZpbGVzICAgICAgICAgLSBNYXAgb2YgdGVuYW50IHByb2ZpbGUgb2JqZWN0cyBmb3IgZWFjaCB0ZW5hbnQgdGhhdCB0aGUgYWNjb3VudCBoYXMgYXV0aGVudGljYXRlZCB3aXRoIGluIHRoZSBicm93c2VyXG4gKi9cbmV4cG9ydCB0eXBlIEFjY291bnRJbmZvID0ge1xuICAgIGhvbWVBY2NvdW50SWQ6IHN0cmluZztcbiAgICBlbnZpcm9ubWVudDogc3RyaW5nO1xuICAgIHRlbmFudElkOiBzdHJpbmc7XG4gICAgdXNlcm5hbWU6IHN0cmluZztcbiAgICBsb2NhbEFjY291bnRJZDogc3RyaW5nO1xuICAgIG5hbWU/OiBzdHJpbmc7XG4gICAgaWRUb2tlbj86IHN0cmluZztcbiAgICBpZFRva2VuQ2xhaW1zPzogVG9rZW5DbGFpbXMgJiB7XG4gICAgICAgIFtrZXk6IHN0cmluZ106XG4gICAgICAgICAgICB8IHN0cmluZ1xuICAgICAgICAgICAgfCBudW1iZXJcbiAgICAgICAgICAgIHwgc3RyaW5nW11cbiAgICAgICAgICAgIHwgb2JqZWN0XG4gICAgICAgICAgICB8IHVuZGVmaW5lZFxuICAgICAgICAgICAgfCB1bmtub3duO1xuICAgIH07XG4gICAgbmF0aXZlQWNjb3VudElkPzogc3RyaW5nO1xuICAgIGF1dGhvcml0eVR5cGU/OiBzdHJpbmc7XG4gICAgdGVuYW50UHJvZmlsZXM/OiBNYXA8c3RyaW5nLCBUZW5hbnRQcm9maWxlPjtcbn07XG5cbi8qKlxuICogQWNjb3VudCBkZXRhaWxzIHRoYXQgdmFyeSBhY3Jvc3MgdGVuYW50cyBmb3IgdGhlIHNhbWUgdXNlclxuICovXG5leHBvcnQgdHlwZSBUZW5hbnRQcm9maWxlID0gUGljazxcbiAgICBBY2NvdW50SW5mbyxcbiAgICBcInRlbmFudElkXCIgfCBcImxvY2FsQWNjb3VudElkXCIgfCBcIm5hbWVcIlxuPiAmIHtcbiAgICAvKipcbiAgICAgKiAtIGlzSG9tZVRlbmFudCAgICAgICAgICAgLSBUcnVlIGlmIHRoaXMgaXMgdGhlIGhvbWUgdGVuYW50IHByb2ZpbGUgb2YgdGhlIGFjY291bnQsIGZhbHNlIGlmIGl0J3MgYSBndWVzdCB0ZW5hbnQgcHJvZmlsZVxuICAgICAqL1xuICAgIGlzSG9tZVRlbmFudD86IGJvb2xlYW47XG59O1xuXG5leHBvcnQgdHlwZSBBY3RpdmVBY2NvdW50RmlsdGVycyA9IHtcbiAgICBob21lQWNjb3VudElkOiBzdHJpbmc7XG4gICAgbG9jYWxBY2NvdW50SWQ6IHN0cmluZztcbiAgICB0ZW5hbnRJZD86IHN0cmluZztcbn07XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRlbmFudElkIG1hdGNoZXMgdGhlIHV0aWQgcG9ydGlvbiBvZiBob21lQWNjb3VudElkXG4gKiBAcGFyYW0gdGVuYW50SWRcbiAqIEBwYXJhbSBob21lQWNjb3VudElkXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gdGVuYW50SWRNYXRjaGVzSG9tZVRlbmFudChcbiAgICB0ZW5hbnRJZD86IHN0cmluZyxcbiAgICBob21lQWNjb3VudElkPzogc3RyaW5nXG4pOiBib29sZWFuIHtcbiAgICByZXR1cm4gKFxuICAgICAgICAhIXRlbmFudElkICYmXG4gICAgICAgICEhaG9tZUFjY291bnRJZCAmJlxuICAgICAgICB0ZW5hbnRJZCA9PT0gaG9tZUFjY291bnRJZC5zcGxpdChcIi5cIilbMV1cbiAgICApO1xufVxuXG4vKipcbiAqIEJ1aWxkIHRlbmFudCBwcm9maWxlXG4gKiBAcGFyYW0gaG9tZUFjY291bnRJZCAtIEhvbWUgYWNjb3VudCBpZGVudGlmaWVyIGZvciB0aGlzIGFjY291bnQgb2JqZWN0XG4gKiBAcGFyYW0gbG9jYWxBY2NvdW50SWQgLSBMb2NhbCBhY2NvdW50IGlkZW50aWZlciBmb3IgdGhpcyBhY2NvdW50IG9iamVjdFxuICogQHBhcmFtIHRlbmFudElkIC0gRnVsbCB0ZW5hbnQgb3Igb3JnYW5pemF0aW9uYWwgaWQgdGhhdCB0aGlzIGFjY291bnQgYmVsb25ncyB0b1xuICogQHBhcmFtIGlkVG9rZW5DbGFpbXMgLSBDbGFpbXMgZnJvbSB0aGUgSUQgdG9rZW5cbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBidWlsZFRlbmFudFByb2ZpbGUoXG4gICAgaG9tZUFjY291bnRJZDogc3RyaW5nLFxuICAgIGxvY2FsQWNjb3VudElkOiBzdHJpbmcsXG4gICAgdGVuYW50SWQ6IHN0cmluZyxcbiAgICBpZFRva2VuQ2xhaW1zPzogVG9rZW5DbGFpbXNcbik6IFRlbmFudFByb2ZpbGUge1xuICAgIGlmIChpZFRva2VuQ2xhaW1zKSB7XG4gICAgICAgIGNvbnN0IHsgb2lkLCBzdWIsIHRpZCwgbmFtZSwgdGZwLCBhY3IgfSA9IGlkVG9rZW5DbGFpbXM7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNpbmNlIHRoZXJlIGlzIG5vIHdheSB0byBkZXRlcm1pbmUgaWYgdGhlIGF1dGhvcml0eSBpcyBBQUQgb3IgQjJDLCB3ZSBleGhhdXN0IGFsbCB0aGUgcG9zc2libGUgY2xhaW1zIHRoYXQgY2FuIHNlcnZlIGFzIHRlbmFudCBJRCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJlY2VkZW5jZTpcbiAgICAgICAgICogdGlkIC0gVGVuYW50SUQgY2xhaW0gdGhhdCBpZGVudGlmaWVzIHRoZSB0ZW5hbnQgdGhhdCBpc3N1ZWQgdGhlIHRva2VuIGluIEFBRC4gRXhwZWN0ZWQgaW4gYWxsIEFBRCBJRCB0b2tlbnMsIG5vdCBwcmVzZW50IGluIEIyQyBJRCBUb2tlbnMuXG4gICAgICAgICAqIHRmcCAtIFRydXN0IEZyYW1ld29yayBQb2xpY3kgY2xhaW0gdGhhdCBpZGVudGlmaWVzIHRoZSBwb2xpY3kgdGhhdCB3YXMgdXNlZCB0byBhdXRoZW50aWNhdGUgdGhlIHVzZXIuIEZ1bmN0aW9ucyBhcyB0ZW5hbnQgZm9yIEIyQyBzY2VuYXJpb3MuXG4gICAgICAgICAqIGFjciAtIEF1dGhlbnRpY2F0aW9uIENvbnRleHQgQ2xhc3MgUmVmZXJlbmNlIGNsYWltIHVzZWQgb25seSB3aXRoIG9sZGVyIEIyQyBwb2xpY2llcy4gRmFsbGJhY2sgaW4gY2FzZSB0ZnAgaXMgbm90IHByZXNlbnQsIGJ1dCBsaWtlbHkgd29uJ3QgYmUgcHJlc2VudCBhbnl3YXkuXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCB0ZW5hbnRJZCA9IHRpZCB8fCB0ZnAgfHwgYWNyIHx8IFwiXCI7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRlbmFudElkOiB0ZW5hbnRJZCxcbiAgICAgICAgICAgIGxvY2FsQWNjb3VudElkOiBvaWQgfHwgc3ViIHx8IFwiXCIsXG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgaXNIb21lVGVuYW50OiB0ZW5hbnRJZE1hdGNoZXNIb21lVGVuYW50KHRlbmFudElkLCBob21lQWNjb3VudElkKSxcbiAgICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGVuYW50SWQsXG4gICAgICAgICAgICBsb2NhbEFjY291bnRJZCxcbiAgICAgICAgICAgIGlzSG9tZVRlbmFudDogdGVuYW50SWRNYXRjaGVzSG9tZVRlbmFudCh0ZW5hbnRJZCwgaG9tZUFjY291bnRJZCksXG4gICAgICAgIH07XG4gICAgfVxufVxuXG4vKipcbiAqIFJlcGxhY2VzIGFjY291bnQgaW5mbyB0aGF0IHZhcmllcyBieSB0ZW5hbnQgcHJvZmlsZSBzb3VyY2VkIGZyb20gdGhlIElEIHRva2VuIGNsYWltcyBwYXNzZWQgaW4gd2l0aCB0aGUgdGVuYW50LXNwZWNpZmljIGFjY291bnQgaW5mb1xuICogQHBhcmFtIGJhc2VBY2NvdW50SW5mb1xuICogQHBhcmFtIGlkVG9rZW5DbGFpbXNcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVBY2NvdW50VGVuYW50UHJvZmlsZURhdGEoXG4gICAgYmFzZUFjY291bnRJbmZvOiBBY2NvdW50SW5mbyxcbiAgICB0ZW5hbnRQcm9maWxlPzogVGVuYW50UHJvZmlsZSxcbiAgICBpZFRva2VuQ2xhaW1zPzogVG9rZW5DbGFpbXMsXG4gICAgaWRUb2tlblNlY3JldD86IHN0cmluZ1xuKTogQWNjb3VudEluZm8ge1xuICAgIGxldCB1cGRhdGVkQWNjb3VudEluZm8gPSBiYXNlQWNjb3VudEluZm87XG4gICAgLy8gVGVuYW50IFByb2ZpbGUgb3ZlcnJpZGVzIHBhc3NlZCBpbiBhY2NvdW50IGluZm9cbiAgICBpZiAodGVuYW50UHJvZmlsZSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgICAgIGNvbnN0IHsgaXNIb21lVGVuYW50LCAuLi50ZW5hbnRQcm9maWxlT3ZlcnJpZGUgfSA9IHRlbmFudFByb2ZpbGU7XG4gICAgICAgIHVwZGF0ZWRBY2NvdW50SW5mbyA9IHsgLi4uYmFzZUFjY291bnRJbmZvLCAuLi50ZW5hbnRQcm9maWxlT3ZlcnJpZGUgfTtcbiAgICB9XG5cbiAgICAvLyBJRCB0b2tlbiBjbGFpbXMgb3ZlcnJpZGUgcGFzc2VkIGluIGFjY291bnQgaW5mbyBhbmQgdGVuYW50IHByb2ZpbGVcbiAgICBpZiAoaWRUb2tlbkNsYWltcykge1xuICAgICAgICAvLyBJZ25vcmUgaXNIb21lVGVuYW50LCBsb2dpbkhpbnQsIGFuZCBzaWQgd2hpY2ggYXJlIHBhcnQgb2YgdGVuYW50IHByb2ZpbGUgYnV0IG5vdCBiYXNlIGFjY291bnQgaW5mb1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgICAgIGNvbnN0IHsgaXNIb21lVGVuYW50LCAuLi5jbGFpbXNTb3VyY2VkVGVuYW50UHJvZmlsZSB9ID1cbiAgICAgICAgICAgIGJ1aWxkVGVuYW50UHJvZmlsZShcbiAgICAgICAgICAgICAgICBiYXNlQWNjb3VudEluZm8uaG9tZUFjY291bnRJZCxcbiAgICAgICAgICAgICAgICBiYXNlQWNjb3VudEluZm8ubG9jYWxBY2NvdW50SWQsXG4gICAgICAgICAgICAgICAgYmFzZUFjY291bnRJbmZvLnRlbmFudElkLFxuICAgICAgICAgICAgICAgIGlkVG9rZW5DbGFpbXNcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgdXBkYXRlZEFjY291bnRJbmZvID0ge1xuICAgICAgICAgICAgLi4udXBkYXRlZEFjY291bnRJbmZvLFxuICAgICAgICAgICAgLi4uY2xhaW1zU291cmNlZFRlbmFudFByb2ZpbGUsXG4gICAgICAgICAgICBpZFRva2VuQ2xhaW1zOiBpZFRva2VuQ2xhaW1zLFxuICAgICAgICAgICAgaWRUb2tlbjogaWRUb2tlblNlY3JldCxcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gdXBkYXRlZEFjY291bnRJbmZvO1xuICAgIH1cblxuICAgIHJldHVybiB1cGRhdGVkQWNjb3VudEluZm87XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQXV0aG9yaXR5IHR5cGVzIHN1cHBvcnRlZCBieSBNU0FMLlxuICovXG5leHBvcnQgY29uc3QgQXV0aG9yaXR5VHlwZSA9IHtcbiAgICBEZWZhdWx0OiAwLFxuICAgIEFkZnM6IDEsXG4gICAgRHN0czogMixcbiAgICBDaWFtOiAzLFxufSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIEF1dGhvcml0eVR5cGUgPSAodHlwZW9mIEF1dGhvcml0eVR5cGUpW2tleW9mIHR5cGVvZiBBdXRob3JpdHlUeXBlXTtcbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBUeXBlIHdoaWNoIGRlc2NyaWJlcyBJZCBUb2tlbiBjbGFpbXMga25vd24gYnkgTVNBTC5cbiAqL1xuZXhwb3J0IHR5cGUgVG9rZW5DbGFpbXMgPSB7XG4gICAgLyoqXG4gICAgICogQXVkaWVuY2VcbiAgICAgKi9cbiAgICBhdWQ/OiBzdHJpbmc7XG4gICAgLyoqXG4gICAgICogSXNzdWVyXG4gICAgICovXG4gICAgaXNzPzogc3RyaW5nO1xuICAgIC8qKlxuICAgICAqIElzc3VlZCBhdFxuICAgICAqL1xuICAgIGlhdD86IG51bWJlcjtcbiAgICAvKipcbiAgICAgKiBOb3QgdmFsaWQgYmVmb3JlXG4gICAgICovXG4gICAgbmJmPzogbnVtYmVyO1xuICAgIC8qKlxuICAgICAqIEltbXV0YWJsZSBvYmplY3QgaWRlbnRpZmllciwgdGhpcyBJRCB1bmlxdWVseSBpZGVudGlmaWVzIHRoZSB1c2VyIGFjcm9zcyBhcHBsaWNhdGlvbnNcbiAgICAgKi9cbiAgICBvaWQ/OiBzdHJpbmc7XG4gICAgLyoqXG4gICAgICogSW1tdXRhYmxlIHN1YmplY3QgaWRlbnRpZmllciwgdGhpcyBpcyBhIHBhaXJ3aXNlIGlkZW50aWZpZXIgLSBpdCBpcyB1bmlxdWUgdG8gYSBwYXJ0aWN1bGFyIGFwcGxpY2F0aW9uIElEXG4gICAgICovXG4gICAgc3ViPzogc3RyaW5nO1xuICAgIC8qKlxuICAgICAqIFVzZXJzJyB0ZW5hbnQgb3IgJzkxODgwNDBkLTZjNjctNGM1Yi1iMTEyLTM2YTMwNGI2NmRhZCcgZm9yIHBlcnNvbmFsIGFjY291bnRzLlxuICAgICAqL1xuICAgIHRpZD86IHN0cmluZztcbiAgICAvKipcbiAgICAgKiBUcnVzdGVkIEZyYW1ld29yayBQb2xpY3kgKEIyQykgVGhlIG5hbWUgb2YgdGhlIHBvbGljeSB0aGF0IHdhcyB1c2VkIHRvIGFjcXVpcmUgdGhlIElEIHRva2VuLlxuICAgICAqL1xuICAgIHRmcD86IHN0cmluZztcbiAgICAvKipcbiAgICAgKiBBdXRoZW50aWNhdGlvbiBDb250ZXh0IENsYXNzIFJlZmVyZW5jZSAoQjJDKSBVc2VkIG9ubHkgd2l0aCBvbGRlciBwb2xpY2llcy5cbiAgICAgKi9cbiAgICBhY3I/OiBzdHJpbmc7XG4gICAgdmVyPzogc3RyaW5nO1xuICAgIHVwbj86IHN0cmluZztcbiAgICBwcmVmZXJyZWRfdXNlcm5hbWU/OiBzdHJpbmc7XG4gICAgbG9naW5faGludD86IHN0cmluZztcbiAgICBlbWFpbHM/OiBzdHJpbmdbXTtcbiAgICBuYW1lPzogc3RyaW5nO1xuICAgIG5vbmNlPzogc3RyaW5nO1xuICAgIC8qKlxuICAgICAqIEV4cGlyYXRpb25cbiAgICAgKi9cbiAgICBleHA/OiBudW1iZXI7XG4gICAgaG9tZV9vaWQ/OiBzdHJpbmc7XG4gICAgc2lkPzogc3RyaW5nO1xuICAgIGNsb3VkX2luc3RhbmNlX2hvc3RfbmFtZT86IHN0cmluZztcbiAgICBjbmY/OiB7XG4gICAgICAgIGtpZDogc3RyaW5nO1xuICAgIH07XG4gICAgeDVjX2NhPzogc3RyaW5nW107XG4gICAgdHM/OiBudW1iZXI7XG4gICAgYXQ/OiBzdHJpbmc7XG4gICAgdT86IHN0cmluZztcbiAgICBwPzogc3RyaW5nO1xuICAgIG0/OiBzdHJpbmc7XG4gICAgcm9sZXM/OiBzdHJpbmdbXTtcbiAgICBhbXI/OiBzdHJpbmdbXTtcbiAgICBpZHA/OiBzdHJpbmc7XG4gICAgYXV0aF90aW1lPzogbnVtYmVyO1xuICAgIC8qKlxuICAgICAqIFx0UmVnaW9uIG9mIHRoZSByZXNvdXJjZSB0ZW5hbnRcbiAgICAgKi9cbiAgICB0ZW5hbnRfcmVnaW9uX3Njb3BlPzogc3RyaW5nO1xuICAgIHRlbmFudF9yZWdpb25fc3ViX3Njb3BlPzogc3RyaW5nO1xufTtcblxuLyoqXG4gKiBHZXRzIHRlbmFudElkIGZyb20gYXZhaWxhYmxlIElEIHRva2VuIGNsYWltcyB0byBzZXQgYXMgY3JlZGVudGlhbCByZWFsbSB3aXRoIHRoZSBmb2xsb3dpbmcgcHJlY2VkZW5jZTpcbiAqIDEuIHRpZCAtIGlmIHRoZSB0b2tlbiBpcyBhY3F1aXJlZCBmcm9tIGFuIEF6dXJlIEFEIHRlbmFudCB0aWQgd2lsbCBiZSBwcmVzZW50XG4gKiAyLiB0ZnAgLSBpZiB0aGUgdG9rZW4gaXMgYWNxdWlyZWQgZnJvbSBhIG1vZGVybiBCMkMgdGVuYW50IHRmcCBzaG91bGQgYmUgcHJlc2VudFxuICogMy4gYWNyIC0gaWYgdGhlIHRva2VuIGlzIGFjcXVpcmVkIGZyb20gYSBsZWdhY3kgQjJDIHRlbmFudCBhY3Igc2hvdWxkIGJlIHByZXNlbnRcbiAqIERvd25jYXNlZCB0byBtYXRjaCB0aGUgcmVhbG0gY2FzZS1pbnNlbnNpdGl2ZSBjb21wYXJpc29uIHJlcXVpcmVtZW50c1xuICogQHBhcmFtIGlkVG9rZW5DbGFpbXNcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUZW5hbnRJZEZyb21JZFRva2VuQ2xhaW1zKFxuICAgIGlkVG9rZW5DbGFpbXM/OiBUb2tlbkNsYWltc1xuKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgaWYgKGlkVG9rZW5DbGFpbXMpIHtcbiAgICAgICAgY29uc3QgdGVuYW50SWQgPVxuICAgICAgICAgICAgaWRUb2tlbkNsYWltcy50aWQgfHwgaWRUb2tlbkNsYWltcy50ZnAgfHwgaWRUb2tlbkNsYWltcy5hY3I7XG4gICAgICAgIHJldHVybiB0ZW5hbnRJZCB8fCBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBQcm90b2NvbCBtb2RlcyBzdXBwb3J0ZWQgYnkgTVNBTC5cbiAqL1xuZXhwb3J0IGNvbnN0IFByb3RvY29sTW9kZSA9IHtcbiAgICAvKipcbiAgICAgKiBBdXRoIENvZGUgKyBQS0NFIHdpdGggRW50cmEgSUQgKGZvcm1lcmx5IEFBRCkgc3BlY2lmaWMgb3B0aW1pemF0aW9ucyBhbmQgZmVhdHVyZXNcbiAgICAgKi9cbiAgICBBQUQ6IFwiQUFEXCIsXG4gICAgLyoqXG4gICAgICogQXV0aCBDb2RlICsgUEtDRSB3aXRob3V0IEVudHJhIElEIHNwZWNpZmljIG9wdGltaXphdGlvbnMgYW5kIGZlYXR1cmVzLiBGb3IgdXNlIG9ubHkgd2l0aCBub24tTWljcm9zb2Z0IG93bmVkIGF1dGhvcml0aWVzLlxuICAgICAqIFN1cHBvcnQgaXMgbGltaXRlZCBmb3IgdGhpcyBtb2RlLlxuICAgICAqL1xuICAgIE9JREM6IFwiT0lEQ1wiLFxuICAgIC8qKlxuICAgICAqIEVuY3J5cHRlZCBBdXRob3JpemUgUmVzcG9uc2UgKEVBUikgd2l0aCBFbnRyYSBJRCBzcGVjaWZpYyBvcHRpbWl6YXRpb25zIGFuZCBmZWF0dXJlc1xuICAgICAqL1xuICAgIEVBUjogXCJFQVJcIixcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBQcm90b2NvbE1vZGUgPSAodHlwZW9mIFByb3RvY29sTW9kZSlba2V5b2YgdHlwZW9mIFByb3RvY29sTW9kZV07XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENhY2hlQWNjb3VudFR5cGUsIFNlcGFyYXRvcnMgfSBmcm9tIFwiLi4vLi4vdXRpbHMvQ29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBBdXRob3JpdHkgfSBmcm9tIFwiLi4vLi4vYXV0aG9yaXR5L0F1dGhvcml0eS5qc1wiO1xuaW1wb3J0IHsgSUNyeXB0byB9IGZyb20gXCIuLi8uLi9jcnlwdG8vSUNyeXB0by5qc1wiO1xuaW1wb3J0IHsgQ2xpZW50SW5mbywgYnVpbGRDbGllbnRJbmZvIH0gZnJvbSBcIi4uLy4uL2FjY291bnQvQ2xpZW50SW5mby5qc1wiO1xuaW1wb3J0IHtcbiAgICBBY2NvdW50SW5mbyxcbiAgICBUZW5hbnRQcm9maWxlLFxuICAgIGJ1aWxkVGVuYW50UHJvZmlsZSxcbn0gZnJvbSBcIi4uLy4uL2FjY291bnQvQWNjb3VudEluZm8uanNcIjtcbmltcG9ydCB7XG4gICAgY3JlYXRlQ2xpZW50QXV0aEVycm9yLFxuICAgIENsaWVudEF1dGhFcnJvckNvZGVzLFxufSBmcm9tIFwiLi4vLi4vZXJyb3IvQ2xpZW50QXV0aEVycm9yLmpzXCI7XG5pbXBvcnQgeyBBdXRob3JpdHlUeXBlIH0gZnJvbSBcIi4uLy4uL2F1dGhvcml0eS9BdXRob3JpdHlUeXBlLmpzXCI7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiLi4vLi4vbG9nZ2VyL0xvZ2dlci5qc1wiO1xuaW1wb3J0IHtcbiAgICBUb2tlbkNsYWltcyxcbiAgICBnZXRUZW5hbnRJZEZyb21JZFRva2VuQ2xhaW1zLFxufSBmcm9tIFwiLi4vLi4vYWNjb3VudC9Ub2tlbkNsYWltcy5qc1wiO1xuaW1wb3J0IHsgUHJvdG9jb2xNb2RlIH0gZnJvbSBcIi4uLy4uL2F1dGhvcml0eS9Qcm90b2NvbE1vZGUuanNcIjtcblxuLyoqXG4gKiBUeXBlIHRoYXQgZGVmaW5lcyByZXF1aXJlZCBhbmQgb3B0aW9uYWwgcGFyYW1ldGVycyBmb3IgYW4gQWNjb3VudCBmaWVsZCAoYmFzZWQgb24gdW5pdmVyc2FsIGNhY2hlIHNjaGVtYSBpbXBsZW1lbnRlZCBieSBhbGwgTVNBTHMpLlxuICpcbiAqIEtleSA6IFZhbHVlIFNjaGVtYVxuICpcbiAqIEtleTogPGhvbWVfYWNjb3VudF9pZD4tPGVudmlyb25tZW50Pi08cmVhbG0qPlxuICpcbiAqIFZhbHVlIFNjaGVtYTpcbiAqIHtcbiAqICAgICAgaG9tZUFjY291bnRJZDogaG9tZSBhY2NvdW50IGlkZW50aWZpZXIgZm9yIHRoZSBhdXRoIHNjaGVtZSxcbiAqICAgICAgZW52aXJvbm1lbnQ6IGVudGl0eSB0aGF0IGlzc3VlZCB0aGUgdG9rZW4sIHJlcHJlc2VudGVkIGFzIGEgZnVsbCBob3N0XG4gKiAgICAgIHJlYWxtOiBGdWxsIHRlbmFudCBvciBvcmdhbml6YXRpb25hbCBpZGVudGlmaWVyIHRoYXQgdGhlIGFjY291bnQgYmVsb25ncyB0b1xuICogICAgICBsb2NhbEFjY291bnRJZDogT3JpZ2luYWwgdGVuYW50LXNwZWNpZmljIGFjY291bnRJRCwgdXN1YWxseSB1c2VkIGZvciBsZWdhY3kgY2FzZXNcbiAqICAgICAgdXNlcm5hbWU6IHByaW1hcnkgdXNlcm5hbWUgdGhhdCByZXByZXNlbnRzIHRoZSB1c2VyLCB1c3VhbGx5IGNvcnJlc3BvbmRzIHRvIHByZWZlcnJlZF91c2VybmFtZSBpbiB0aGUgdjIgZW5kcHRcbiAqICAgICAgYXV0aG9yaXR5VHlwZTogQWNjb3VudHMgYXV0aG9yaXR5IHR5cGUgYXMgYSBzdHJpbmdcbiAqICAgICAgbmFtZTogRnVsbCBuYW1lIGZvciB0aGUgYWNjb3VudCwgaW5jbHVkaW5nIGdpdmVuIG5hbWUgYW5kIGZhbWlseSBuYW1lLFxuICogICAgICBsYXN0TW9kaWZpY2F0aW9uVGltZTogbGFzdCB0aW1lIHRoaXMgZW50aXR5IHdhcyBtb2RpZmllZCBpbiB0aGUgY2FjaGVcbiAqICAgICAgbGFzdE1vZGlmaWNhdGlvbkFwcDpcbiAqICAgICAgbmF0aXZlQWNjb3VudElkOiBBY2NvdW50IGlkZW50aWZpZXIgb24gdGhlIG5hdGl2ZSBkZXZpY2VcbiAqICAgICAgdGVuYW50UHJvZmlsZXM6IEFycmF5IG9mIHRlbmFudCBwcm9maWxlIG9iamVjdHMgZm9yIGVhY2ggdGVuYW50IHRoYXQgdGhlIGFjY291bnQgaGFzIGF1dGhlbnRpY2F0ZWQgd2l0aCBpbiB0aGUgYnJvd3NlclxuICogfVxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBjbGFzcyBBY2NvdW50RW50aXR5IHtcbiAgICBob21lQWNjb3VudElkOiBzdHJpbmc7XG4gICAgZW52aXJvbm1lbnQ6IHN0cmluZztcbiAgICByZWFsbTogc3RyaW5nO1xuICAgIGxvY2FsQWNjb3VudElkOiBzdHJpbmc7XG4gICAgdXNlcm5hbWU6IHN0cmluZztcbiAgICBhdXRob3JpdHlUeXBlOiBzdHJpbmc7XG4gICAgY2xpZW50SW5mbz86IHN0cmluZztcbiAgICBuYW1lPzogc3RyaW5nO1xuICAgIGxhc3RNb2RpZmljYXRpb25UaW1lPzogc3RyaW5nO1xuICAgIGxhc3RNb2RpZmljYXRpb25BcHA/OiBzdHJpbmc7XG4gICAgY2xvdWRHcmFwaEhvc3ROYW1lPzogc3RyaW5nO1xuICAgIG1zR3JhcGhIb3N0Pzogc3RyaW5nO1xuICAgIG5hdGl2ZUFjY291bnRJZD86IHN0cmluZztcbiAgICB0ZW5hbnRQcm9maWxlcz86IEFycmF5PFRlbmFudFByb2ZpbGU+O1xuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGUgQWNjb3VudCBJZCBrZXkgY29tcG9uZW50IGFzIHBlciB0aGUgc2NoZW1hOiA8aG9tZV9hY2NvdW50X2lkPi08ZW52aXJvbm1lbnQ+XG4gICAgICovXG4gICAgZ2VuZXJhdGVBY2NvdW50SWQoKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgYWNjb3VudElkOiBBcnJheTxzdHJpbmc+ID0gW3RoaXMuaG9tZUFjY291bnRJZCwgdGhpcy5lbnZpcm9ubWVudF07XG4gICAgICAgIHJldHVybiBhY2NvdW50SWQuam9pbihTZXBhcmF0b3JzLkNBQ0hFX0tFWV9TRVBBUkFUT1IpLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGUgQWNjb3VudCBDYWNoZSBLZXkgYXMgcGVyIHRoZSBzY2hlbWE6IDxob21lX2FjY291bnRfaWQ+LTxlbnZpcm9ubWVudD4tPHJlYWxtKj5cbiAgICAgKi9cbiAgICBnZW5lcmF0ZUFjY291bnRLZXkoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIEFjY291bnRFbnRpdHkuZ2VuZXJhdGVBY2NvdW50Q2FjaGVLZXkoe1xuICAgICAgICAgICAgaG9tZUFjY291bnRJZDogdGhpcy5ob21lQWNjb3VudElkLFxuICAgICAgICAgICAgZW52aXJvbm1lbnQ6IHRoaXMuZW52aXJvbm1lbnQsXG4gICAgICAgICAgICB0ZW5hbnRJZDogdGhpcy5yZWFsbSxcbiAgICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLnVzZXJuYW1lLFxuICAgICAgICAgICAgbG9jYWxBY2NvdW50SWQ6IHRoaXMubG9jYWxBY2NvdW50SWQsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIEFjY291bnRJbmZvIGludGVyZmFjZSBmb3IgdGhpcyBhY2NvdW50LlxuICAgICAqL1xuICAgIGdldEFjY291bnRJbmZvKCk6IEFjY291bnRJbmZvIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGhvbWVBY2NvdW50SWQ6IHRoaXMuaG9tZUFjY291bnRJZCxcbiAgICAgICAgICAgIGVudmlyb25tZW50OiB0aGlzLmVudmlyb25tZW50LFxuICAgICAgICAgICAgdGVuYW50SWQ6IHRoaXMucmVhbG0sXG4gICAgICAgICAgICB1c2VybmFtZTogdGhpcy51c2VybmFtZSxcbiAgICAgICAgICAgIGxvY2FsQWNjb3VudElkOiB0aGlzLmxvY2FsQWNjb3VudElkLFxuICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgbmF0aXZlQWNjb3VudElkOiB0aGlzLm5hdGl2ZUFjY291bnRJZCxcbiAgICAgICAgICAgIGF1dGhvcml0eVR5cGU6IHRoaXMuYXV0aG9yaXR5VHlwZSxcbiAgICAgICAgICAgIC8vIERlc2VyaWFsaXplIHRlbmFudCBwcm9maWxlcyBhcnJheSBpbnRvIGEgTWFwXG4gICAgICAgICAgICB0ZW5hbnRQcm9maWxlczogbmV3IE1hcChcbiAgICAgICAgICAgICAgICAodGhpcy50ZW5hbnRQcm9maWxlcyB8fCBbXSkubWFwKCh0ZW5hbnRQcm9maWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbdGVuYW50UHJvZmlsZS50ZW5hbnRJZCwgdGVuYW50UHJvZmlsZV07XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICksXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBhY2NvdW50IGVudGl0eSBpcyBpbiBzaW5nbGUgdGVuYW50IGZvcm1hdCAob3V0ZGF0ZWQpLCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKi9cbiAgICBpc1NpbmdsZVRlbmFudCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLnRlbmFudFByb2ZpbGVzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBhY2NvdW50IGtleSBmcm9tIGludGVyZmFjZVxuICAgICAqIEBwYXJhbSBhY2NvdW50SW50ZXJmYWNlXG4gICAgICovXG4gICAgc3RhdGljIGdlbmVyYXRlQWNjb3VudENhY2hlS2V5KGFjY291bnRJbnRlcmZhY2U6IEFjY291bnRJbmZvKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgaG9tZVRlbmFudElkID0gYWNjb3VudEludGVyZmFjZS5ob21lQWNjb3VudElkLnNwbGl0KFwiLlwiKVsxXTtcbiAgICAgICAgY29uc3QgYWNjb3VudEtleSA9IFtcbiAgICAgICAgICAgIGFjY291bnRJbnRlcmZhY2UuaG9tZUFjY291bnRJZCxcbiAgICAgICAgICAgIGFjY291bnRJbnRlcmZhY2UuZW52aXJvbm1lbnQgfHwgXCJcIixcbiAgICAgICAgICAgIGhvbWVUZW5hbnRJZCB8fCBhY2NvdW50SW50ZXJmYWNlLnRlbmFudElkIHx8IFwiXCIsXG4gICAgICAgIF07XG5cbiAgICAgICAgcmV0dXJuIGFjY291bnRLZXkuam9pbihTZXBhcmF0b3JzLkNBQ0hFX0tFWV9TRVBBUkFUT1IpLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQnVpbGQgQWNjb3VudCBjYWNoZSBmcm9tIElkVG9rZW4sIGNsaWVudEluZm8gYW5kIGF1dGhvcml0eS9wb2xpY3kuIEFzc29jaWF0ZWQgd2l0aCBBQUQuXG4gICAgICogQHBhcmFtIGFjY291bnREZXRhaWxzXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZUFjY291bnQoXG4gICAgICAgIGFjY291bnREZXRhaWxzOiB7XG4gICAgICAgICAgICBob21lQWNjb3VudElkOiBzdHJpbmc7XG4gICAgICAgICAgICBpZFRva2VuQ2xhaW1zPzogVG9rZW5DbGFpbXM7XG4gICAgICAgICAgICBjbGllbnRJbmZvPzogc3RyaW5nO1xuICAgICAgICAgICAgY2xvdWRHcmFwaEhvc3ROYW1lPzogc3RyaW5nO1xuICAgICAgICAgICAgbXNHcmFwaEhvc3Q/OiBzdHJpbmc7XG4gICAgICAgICAgICBlbnZpcm9ubWVudD86IHN0cmluZztcbiAgICAgICAgICAgIG5hdGl2ZUFjY291bnRJZD86IHN0cmluZztcbiAgICAgICAgICAgIHRlbmFudFByb2ZpbGVzPzogQXJyYXk8VGVuYW50UHJvZmlsZT47XG4gICAgICAgIH0sXG4gICAgICAgIGF1dGhvcml0eTogQXV0aG9yaXR5LFxuICAgICAgICBiYXNlNjREZWNvZGU/OiAoaW5wdXQ6IHN0cmluZykgPT4gc3RyaW5nXG4gICAgKTogQWNjb3VudEVudGl0eSB7XG4gICAgICAgIGNvbnN0IGFjY291bnQ6IEFjY291bnRFbnRpdHkgPSBuZXcgQWNjb3VudEVudGl0eSgpO1xuXG4gICAgICAgIGlmIChhdXRob3JpdHkuYXV0aG9yaXR5VHlwZSA9PT0gQXV0aG9yaXR5VHlwZS5BZGZzKSB7XG4gICAgICAgICAgICBhY2NvdW50LmF1dGhvcml0eVR5cGUgPSBDYWNoZUFjY291bnRUeXBlLkFERlNfQUNDT1VOVF9UWVBFO1xuICAgICAgICB9IGVsc2UgaWYgKGF1dGhvcml0eS5wcm90b2NvbE1vZGUgPT09IFByb3RvY29sTW9kZS5PSURDKSB7XG4gICAgICAgICAgICBhY2NvdW50LmF1dGhvcml0eVR5cGUgPSBDYWNoZUFjY291bnRUeXBlLkdFTkVSSUNfQUNDT1VOVF9UWVBFO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYWNjb3VudC5hdXRob3JpdHlUeXBlID0gQ2FjaGVBY2NvdW50VHlwZS5NU1NUU19BQ0NPVU5UX1RZUEU7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY2xpZW50SW5mbzogQ2xpZW50SW5mbyB8IHVuZGVmaW5lZDtcblxuICAgICAgICBpZiAoYWNjb3VudERldGFpbHMuY2xpZW50SW5mbyAmJiBiYXNlNjREZWNvZGUpIHtcbiAgICAgICAgICAgIGNsaWVudEluZm8gPSBidWlsZENsaWVudEluZm8oXG4gICAgICAgICAgICAgICAgYWNjb3VudERldGFpbHMuY2xpZW50SW5mbyxcbiAgICAgICAgICAgICAgICBiYXNlNjREZWNvZGVcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBhY2NvdW50LmNsaWVudEluZm8gPSBhY2NvdW50RGV0YWlscy5jbGllbnRJbmZvO1xuICAgICAgICBhY2NvdW50LmhvbWVBY2NvdW50SWQgPSBhY2NvdW50RGV0YWlscy5ob21lQWNjb3VudElkO1xuICAgICAgICBhY2NvdW50Lm5hdGl2ZUFjY291bnRJZCA9IGFjY291bnREZXRhaWxzLm5hdGl2ZUFjY291bnRJZDtcblxuICAgICAgICBjb25zdCBlbnYgPVxuICAgICAgICAgICAgYWNjb3VudERldGFpbHMuZW52aXJvbm1lbnQgfHxcbiAgICAgICAgICAgIChhdXRob3JpdHkgJiYgYXV0aG9yaXR5LmdldFByZWZlcnJlZENhY2hlKCkpO1xuXG4gICAgICAgIGlmICghZW52KSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZENhY2hlRW52aXJvbm1lbnRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBhY2NvdW50LmVudmlyb25tZW50ID0gZW52O1xuICAgICAgICAvLyBub24gQUFEIHNjZW5hcmlvcyBjYW4gaGF2ZSBlbXB0eSByZWFsbVxuICAgICAgICBhY2NvdW50LnJlYWxtID1cbiAgICAgICAgICAgIGNsaWVudEluZm8/LnV0aWQgfHxcbiAgICAgICAgICAgIGdldFRlbmFudElkRnJvbUlkVG9rZW5DbGFpbXMoYWNjb3VudERldGFpbHMuaWRUb2tlbkNsYWltcykgfHxcbiAgICAgICAgICAgIFwiXCI7XG5cbiAgICAgICAgLy8gSG93IGRvIHlvdSBhY2NvdW50IGZvciBNU0EgQ0lEIGhlcmU/XG4gICAgICAgIGFjY291bnQubG9jYWxBY2NvdW50SWQgPVxuICAgICAgICAgICAgY2xpZW50SW5mbz8udWlkIHx8XG4gICAgICAgICAgICBhY2NvdW50RGV0YWlscy5pZFRva2VuQ2xhaW1zPy5vaWQgfHxcbiAgICAgICAgICAgIGFjY291bnREZXRhaWxzLmlkVG9rZW5DbGFpbXM/LnN1YiB8fFxuICAgICAgICAgICAgXCJcIjtcblxuICAgICAgICAvKlxuICAgICAgICAgKiBJbiBCMkMgc2NlbmFyaW9zIHRoZSBlbWFpbHMgY2xhaW0gaXMgdXNlZCBpbnN0ZWFkIG9mIHByZWZlcnJlZF91c2VybmFtZSBhbmQgaXQgaXMgYW4gYXJyYXkuXG4gICAgICAgICAqIEluIG1vc3QgY2FzZXMgaXQgd2lsbCBjb250YWluIGEgc2luZ2xlIGVtYWlsLiBUaGlzIGZpZWxkIHNob3VsZCBub3QgYmUgcmVsaWVkIHVwb24gaWYgYSBjdXN0b21cbiAgICAgICAgICogcG9saWN5IGlzIGNvbmZpZ3VyZWQgdG8gcmV0dXJuIG1vcmUgdGhhbiAxIGVtYWlsLlxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3QgcHJlZmVycmVkVXNlcm5hbWUgPVxuICAgICAgICAgICAgYWNjb3VudERldGFpbHMuaWRUb2tlbkNsYWltcz8ucHJlZmVycmVkX3VzZXJuYW1lIHx8XG4gICAgICAgICAgICBhY2NvdW50RGV0YWlscy5pZFRva2VuQ2xhaW1zPy51cG47XG4gICAgICAgIGNvbnN0IGVtYWlsID0gYWNjb3VudERldGFpbHMuaWRUb2tlbkNsYWltcz8uZW1haWxzXG4gICAgICAgICAgICA/IGFjY291bnREZXRhaWxzLmlkVG9rZW5DbGFpbXMuZW1haWxzWzBdXG4gICAgICAgICAgICA6IG51bGw7XG5cbiAgICAgICAgYWNjb3VudC51c2VybmFtZSA9IHByZWZlcnJlZFVzZXJuYW1lIHx8IGVtYWlsIHx8IFwiXCI7XG4gICAgICAgIGFjY291bnQubmFtZSA9IGFjY291bnREZXRhaWxzLmlkVG9rZW5DbGFpbXM/Lm5hbWUgfHwgXCJcIjtcblxuICAgICAgICBhY2NvdW50LmNsb3VkR3JhcGhIb3N0TmFtZSA9IGFjY291bnREZXRhaWxzLmNsb3VkR3JhcGhIb3N0TmFtZTtcbiAgICAgICAgYWNjb3VudC5tc0dyYXBoSG9zdCA9IGFjY291bnREZXRhaWxzLm1zR3JhcGhIb3N0O1xuXG4gICAgICAgIGlmIChhY2NvdW50RGV0YWlscy50ZW5hbnRQcm9maWxlcykge1xuICAgICAgICAgICAgYWNjb3VudC50ZW5hbnRQcm9maWxlcyA9IGFjY291bnREZXRhaWxzLnRlbmFudFByb2ZpbGVzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdGVuYW50UHJvZmlsZSA9IGJ1aWxkVGVuYW50UHJvZmlsZShcbiAgICAgICAgICAgICAgICBhY2NvdW50RGV0YWlscy5ob21lQWNjb3VudElkLFxuICAgICAgICAgICAgICAgIGFjY291bnQubG9jYWxBY2NvdW50SWQsXG4gICAgICAgICAgICAgICAgYWNjb3VudC5yZWFsbSxcbiAgICAgICAgICAgICAgICBhY2NvdW50RGV0YWlscy5pZFRva2VuQ2xhaW1zXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgYWNjb3VudC50ZW5hbnRQcm9maWxlcyA9IFt0ZW5hbnRQcm9maWxlXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhY2NvdW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gQWNjb3VudEVudGl0eSBvYmplY3QgZnJvbSBBY2NvdW50SW5mb1xuICAgICAqIEBwYXJhbSBhY2NvdW50SW5mb1xuICAgICAqIEBwYXJhbSBjbG91ZEdyYXBoSG9zdE5hbWVcbiAgICAgKiBAcGFyYW0gbXNHcmFwaEhvc3RcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVGcm9tQWNjb3VudEluZm8oXG4gICAgICAgIGFjY291bnRJbmZvOiBBY2NvdW50SW5mbyxcbiAgICAgICAgY2xvdWRHcmFwaEhvc3ROYW1lPzogc3RyaW5nLFxuICAgICAgICBtc0dyYXBoSG9zdD86IHN0cmluZ1xuICAgICk6IEFjY291bnRFbnRpdHkge1xuICAgICAgICBjb25zdCBhY2NvdW50OiBBY2NvdW50RW50aXR5ID0gbmV3IEFjY291bnRFbnRpdHkoKTtcblxuICAgICAgICBhY2NvdW50LmF1dGhvcml0eVR5cGUgPVxuICAgICAgICAgICAgYWNjb3VudEluZm8uYXV0aG9yaXR5VHlwZSB8fCBDYWNoZUFjY291bnRUeXBlLkdFTkVSSUNfQUNDT1VOVF9UWVBFO1xuICAgICAgICBhY2NvdW50LmhvbWVBY2NvdW50SWQgPSBhY2NvdW50SW5mby5ob21lQWNjb3VudElkO1xuICAgICAgICBhY2NvdW50LmxvY2FsQWNjb3VudElkID0gYWNjb3VudEluZm8ubG9jYWxBY2NvdW50SWQ7XG4gICAgICAgIGFjY291bnQubmF0aXZlQWNjb3VudElkID0gYWNjb3VudEluZm8ubmF0aXZlQWNjb3VudElkO1xuXG4gICAgICAgIGFjY291bnQucmVhbG0gPSBhY2NvdW50SW5mby50ZW5hbnRJZDtcbiAgICAgICAgYWNjb3VudC5lbnZpcm9ubWVudCA9IGFjY291bnRJbmZvLmVudmlyb25tZW50O1xuXG4gICAgICAgIGFjY291bnQudXNlcm5hbWUgPSBhY2NvdW50SW5mby51c2VybmFtZTtcbiAgICAgICAgYWNjb3VudC5uYW1lID0gYWNjb3VudEluZm8ubmFtZTtcblxuICAgICAgICBhY2NvdW50LmNsb3VkR3JhcGhIb3N0TmFtZSA9IGNsb3VkR3JhcGhIb3N0TmFtZTtcbiAgICAgICAgYWNjb3VudC5tc0dyYXBoSG9zdCA9IG1zR3JhcGhIb3N0O1xuICAgICAgICAvLyBTZXJpYWxpemUgdGVuYW50IHByb2ZpbGVzIG1hcCBpbnRvIGFuIGFycmF5XG4gICAgICAgIGFjY291bnQudGVuYW50UHJvZmlsZXMgPSBBcnJheS5mcm9tKFxuICAgICAgICAgICAgYWNjb3VudEluZm8udGVuYW50UHJvZmlsZXM/LnZhbHVlcygpIHx8IFtdXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIGFjY291bnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGUgSG9tZUFjY291bnRJZCBmcm9tIHNlcnZlciByZXNwb25zZVxuICAgICAqIEBwYXJhbSBzZXJ2ZXJDbGllbnRJbmZvXG4gICAgICogQHBhcmFtIGF1dGhUeXBlXG4gICAgICovXG4gICAgc3RhdGljIGdlbmVyYXRlSG9tZUFjY291bnRJZChcbiAgICAgICAgc2VydmVyQ2xpZW50SW5mbzogc3RyaW5nLFxuICAgICAgICBhdXRoVHlwZTogQXV0aG9yaXR5VHlwZSxcbiAgICAgICAgbG9nZ2VyOiBMb2dnZXIsXG4gICAgICAgIGNyeXB0b09iajogSUNyeXB0byxcbiAgICAgICAgaWRUb2tlbkNsYWltcz86IFRva2VuQ2xhaW1zXG4gICAgKTogc3RyaW5nIHtcbiAgICAgICAgLy8gc2luY2UgQURGUy9EU1RTIGRvIG5vdCBoYXZlIHRpZCBhbmQgZG9lcyBub3Qgc2V0IGNsaWVudF9pbmZvXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICEoXG4gICAgICAgICAgICAgICAgYXV0aFR5cGUgPT09IEF1dGhvcml0eVR5cGUuQWRmcyB8fFxuICAgICAgICAgICAgICAgIGF1dGhUeXBlID09PSBBdXRob3JpdHlUeXBlLkRzdHNcbiAgICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBmb3IgY2FzZXMgd2hlcmUgdGhlcmUgaXMgY2xpZW50SW5mb1xuICAgICAgICAgICAgaWYgKHNlcnZlckNsaWVudEluZm8pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjbGllbnRJbmZvID0gYnVpbGRDbGllbnRJbmZvKFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyQ2xpZW50SW5mbyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyeXB0b09iai5iYXNlNjREZWNvZGVcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNsaWVudEluZm8udWlkICYmIGNsaWVudEluZm8udXRpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGAke2NsaWVudEluZm8udWlkfS4ke2NsaWVudEluZm8udXRpZH1gO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxvZ2dlci53YXJuaW5nKFwiTm8gY2xpZW50IGluZm8gaW4gcmVzcG9uc2VcIik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBkZWZhdWx0IHRvIFwic3ViXCIgY2xhaW1cbiAgICAgICAgcmV0dXJuIGlkVG9rZW5DbGFpbXM/LnN1YiB8fCBcIlwiO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlcyBhbiBlbnRpdHk6IGNoZWNrcyBmb3IgYWxsIGV4cGVjdGVkIHBhcmFtc1xuICAgICAqIEBwYXJhbSBlbnRpdHlcbiAgICAgKi9cbiAgICBzdGF0aWMgaXNBY2NvdW50RW50aXR5KGVudGl0eTogb2JqZWN0KTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghZW50aXR5KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgZW50aXR5Lmhhc093blByb3BlcnR5KFwiaG9tZUFjY291bnRJZFwiKSAmJlxuICAgICAgICAgICAgZW50aXR5Lmhhc093blByb3BlcnR5KFwiZW52aXJvbm1lbnRcIikgJiZcbiAgICAgICAgICAgIGVudGl0eS5oYXNPd25Qcm9wZXJ0eShcInJlYWxtXCIpICYmXG4gICAgICAgICAgICBlbnRpdHkuaGFzT3duUHJvcGVydHkoXCJsb2NhbEFjY291bnRJZFwiKSAmJlxuICAgICAgICAgICAgZW50aXR5Lmhhc093blByb3BlcnR5KFwidXNlcm5hbWVcIikgJiZcbiAgICAgICAgICAgIGVudGl0eS5oYXNPd25Qcm9wZXJ0eShcImF1dGhvcml0eVR5cGVcIilcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIHdoZXRoZXIgMiBhY2NvdW50SW5mbyBvYmplY3RzIHJlcHJlc2VudCB0aGUgc2FtZSBhY2NvdW50XG4gICAgICogQHBhcmFtIGFjY291bnRBXG4gICAgICogQHBhcmFtIGFjY291bnRCXG4gICAgICogQHBhcmFtIGNvbXBhcmVDbGFpbXMgLSBJZiBzZXQgdG8gdHJ1ZSBpZFRva2VuQ2xhaW1zIHdpbGwgYWxzbyBiZSBjb21wYXJlZCB0byBkZXRlcm1pbmUgYWNjb3VudCBlcXVhbGl0eVxuICAgICAqL1xuICAgIHN0YXRpYyBhY2NvdW50SW5mb0lzRXF1YWwoXG4gICAgICAgIGFjY291bnRBOiBBY2NvdW50SW5mbyB8IG51bGwsXG4gICAgICAgIGFjY291bnRCOiBBY2NvdW50SW5mbyB8IG51bGwsXG4gICAgICAgIGNvbXBhcmVDbGFpbXM/OiBib29sZWFuXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghYWNjb3VudEEgfHwgIWFjY291bnRCKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY2xhaW1zTWF0Y2ggPSB0cnVlOyAvLyBkZWZhdWx0IHRvIHRydWUgc28gYXMgdG8gbm90IGZhaWwgY29tcGFyaXNvbiBiZWxvdyBpZiBjb21wYXJlQ2xhaW1zOiBmYWxzZVxuICAgICAgICBpZiAoY29tcGFyZUNsYWltcykge1xuICAgICAgICAgICAgY29uc3QgYWNjb3VudEFDbGFpbXMgPSAoYWNjb3VudEEuaWRUb2tlbkNsYWltcyB8fFxuICAgICAgICAgICAgICAgIHt9KSBhcyBUb2tlbkNsYWltcztcbiAgICAgICAgICAgIGNvbnN0IGFjY291bnRCQ2xhaW1zID0gKGFjY291bnRCLmlkVG9rZW5DbGFpbXMgfHxcbiAgICAgICAgICAgICAgICB7fSkgYXMgVG9rZW5DbGFpbXM7XG5cbiAgICAgICAgICAgIC8vIGlzc3VlZCBhdCB0aW1lc3RhbXAgYW5kIG5vbmNlIGFyZSBleHBlY3RlZCB0byBjaGFuZ2UgZWFjaCB0aW1lIGEgbmV3IGlkIHRva2VuIGlzIGFjcXVpcmVkXG4gICAgICAgICAgICBjbGFpbXNNYXRjaCA9XG4gICAgICAgICAgICAgICAgYWNjb3VudEFDbGFpbXMuaWF0ID09PSBhY2NvdW50QkNsYWltcy5pYXQgJiZcbiAgICAgICAgICAgICAgICBhY2NvdW50QUNsYWltcy5ub25jZSA9PT0gYWNjb3VudEJDbGFpbXMubm9uY2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgYWNjb3VudEEuaG9tZUFjY291bnRJZCA9PT0gYWNjb3VudEIuaG9tZUFjY291bnRJZCAmJlxuICAgICAgICAgICAgYWNjb3VudEEubG9jYWxBY2NvdW50SWQgPT09IGFjY291bnRCLmxvY2FsQWNjb3VudElkICYmXG4gICAgICAgICAgICBhY2NvdW50QS51c2VybmFtZSA9PT0gYWNjb3VudEIudXNlcm5hbWUgJiZcbiAgICAgICAgICAgIGFjY291bnRBLnRlbmFudElkID09PSBhY2NvdW50Qi50ZW5hbnRJZCAmJlxuICAgICAgICAgICAgYWNjb3VudEEuZW52aXJvbm1lbnQgPT09IGFjY291bnRCLmVudmlyb25tZW50ICYmXG4gICAgICAgICAgICBhY2NvdW50QS5uYXRpdmVBY2NvdW50SWQgPT09IGFjY291bnRCLm5hdGl2ZUFjY291bnRJZCAmJlxuICAgICAgICAgICAgY2xhaW1zTWF0Y2hcbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEF1dGhvcml6ZVJlc3BvbnNlIH0gZnJvbSBcIi4uL3Jlc3BvbnNlL0F1dGhvcml6ZVJlc3BvbnNlLmpzXCI7XG5pbXBvcnQge1xuICAgIENsaWVudEF1dGhFcnJvckNvZGVzLFxuICAgIGNyZWF0ZUNsaWVudEF1dGhFcnJvcixcbn0gZnJvbSBcIi4uL2Vycm9yL0NsaWVudEF1dGhFcnJvci5qc1wiO1xuXG4vKipcbiAqIFBhcnNlcyBoYXNoIHN0cmluZyBmcm9tIGdpdmVuIHN0cmluZy4gUmV0dXJucyBlbXB0eSBzdHJpbmcgaWYgbm8gaGFzaCBzeW1ib2wgaXMgZm91bmQuXG4gKiBAcGFyYW0gaGFzaFN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gc3RyaXBMZWFkaW5nSGFzaE9yUXVlcnkocmVzcG9uc2VTdHJpbmc6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKHJlc3BvbnNlU3RyaW5nLnN0YXJ0c1dpdGgoXCIjL1wiKSkge1xuICAgICAgICByZXR1cm4gcmVzcG9uc2VTdHJpbmcuc3Vic3RyaW5nKDIpO1xuICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIHJlc3BvbnNlU3RyaW5nLnN0YXJ0c1dpdGgoXCIjXCIpIHx8XG4gICAgICAgIHJlc3BvbnNlU3RyaW5nLnN0YXJ0c1dpdGgoXCI/XCIpXG4gICAgKSB7XG4gICAgICAgIHJldHVybiByZXNwb25zZVN0cmluZy5zdWJzdHJpbmcoMSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3BvbnNlU3RyaW5nO1xufVxuXG4vKipcbiAqIFJldHVybnMgVVJMIGhhc2ggYXMgc2VydmVyIGF1dGggY29kZSByZXNwb25zZSBvYmplY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREZXNlcmlhbGl6ZWRSZXNwb25zZShcbiAgICByZXNwb25zZVN0cmluZzogc3RyaW5nXG4pOiBBdXRob3JpemVSZXNwb25zZSB8IG51bGwge1xuICAgIC8vIENoZWNrIGlmIGdpdmVuIGhhc2ggaXMgZW1wdHlcbiAgICBpZiAoIXJlc3BvbnNlU3RyaW5nIHx8IHJlc3BvbnNlU3RyaW5nLmluZGV4T2YoXCI9XCIpIDwgMCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gU3RyaXAgdGhlICMgb3IgPyBzeW1ib2wgaWYgcHJlc2VudFxuICAgICAgICBjb25zdCBub3JtYWxpemVkUmVzcG9uc2UgPSBzdHJpcExlYWRpbmdIYXNoT3JRdWVyeShyZXNwb25zZVN0cmluZyk7XG4gICAgICAgIC8vIElmICMgc3ltYm9sIHdhcyBub3QgcHJlc2VudCwgYWJvdmUgd2lsbCByZXR1cm4gZW1wdHkgc3RyaW5nLCBzbyBnaXZlIG9yaWdpbmFsIGhhc2ggdmFsdWVcbiAgICAgICAgY29uc3QgZGVzZXJpYWxpemVkSGFzaDogQXV0aG9yaXplUmVzcG9uc2UgPSBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgICAgICBuZXcgVVJMU2VhcmNoUGFyYW1zKG5vcm1hbGl6ZWRSZXNwb25zZSlcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBDaGVjayBmb3Iga25vd24gcmVzcG9uc2UgcHJvcGVydGllc1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICBkZXNlcmlhbGl6ZWRIYXNoLmNvZGUgfHxcbiAgICAgICAgICAgIGRlc2VyaWFsaXplZEhhc2guZWFyX2p3ZSB8fFxuICAgICAgICAgICAgZGVzZXJpYWxpemVkSGFzaC5lcnJvciB8fFxuICAgICAgICAgICAgZGVzZXJpYWxpemVkSGFzaC5lcnJvcl9kZXNjcmlwdGlvbiB8fFxuICAgICAgICAgICAgZGVzZXJpYWxpemVkSGFzaC5zdGF0ZVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBkZXNlcmlhbGl6ZWRIYXNoO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMuaGFzaE5vdERlc2VyaWFsaXplZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogVXRpbGl0eSB0byBjcmVhdGUgYSBVUkwgZnJvbSB0aGUgcGFyYW1zIG1hcFxuICovXG5leHBvcnQgZnVuY3Rpb24gbWFwVG9RdWVyeVN0cmluZyhwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+KTogc3RyaW5nIHtcbiAgICBjb25zdCBxdWVyeVBhcmFtZXRlckFycmF5OiBBcnJheTxzdHJpbmc+ID0gbmV3IEFycmF5PHN0cmluZz4oKTtcblxuICAgIHBhcmFtZXRlcnMuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuICAgICAgICBxdWVyeVBhcmFtZXRlckFycmF5LnB1c2goYCR7a2V5fT0ke2VuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSl9YCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcXVlcnlQYXJhbWV0ZXJBcnJheS5qb2luKFwiJlwiKTtcbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgICBjcmVhdGVDbGllbnRDb25maWd1cmF0aW9uRXJyb3IsXG4gICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMsXG59IGZyb20gXCIuLi9lcnJvci9DbGllbnRDb25maWd1cmF0aW9uRXJyb3IuanNcIjtcbmltcG9ydCB7IFN0cmluZ1V0aWxzIH0gZnJvbSBcIi4uL3V0aWxzL1N0cmluZ1V0aWxzLmpzXCI7XG5pbXBvcnQgeyBJVXJpIH0gZnJvbSBcIi4vSVVyaS5qc1wiO1xuaW1wb3J0IHsgQUFEQXV0aG9yaXR5Q29uc3RhbnRzLCBDb25zdGFudHMgfSBmcm9tIFwiLi4vdXRpbHMvQ29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgKiBhcyBVcmxVdGlscyBmcm9tIFwiLi4vdXRpbHMvVXJsVXRpbHMuanNcIjtcblxuLyoqXG4gKiBVcmwgb2JqZWN0IGNsYXNzIHdoaWNoIGNhbiBwZXJmb3JtIHZhcmlvdXMgdHJhbnNmb3JtYXRpb25zIG9uIHVybCBzdHJpbmdzLlxuICovXG5leHBvcnQgY2xhc3MgVXJsU3RyaW5nIHtcbiAgICAvLyBpbnRlcm5hbCB1cmwgc3RyaW5nIGZpZWxkXG4gICAgcHJpdmF0ZSBfdXJsU3RyaW5nOiBzdHJpbmc7XG4gICAgcHVibGljIGdldCB1cmxTdHJpbmcoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VybFN0cmluZztcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZykge1xuICAgICAgICB0aGlzLl91cmxTdHJpbmcgPSB1cmw7XG4gICAgICAgIGlmICghdGhpcy5fdXJsU3RyaW5nKSB7XG4gICAgICAgICAgICAvLyBUaHJvd3MgZXJyb3IgaWYgdXJsIGlzIGVtcHR5XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRDb25maWd1cmF0aW9uRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMudXJsRW1wdHlFcnJvclxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdXJsLmluY2x1ZGVzKFwiI1wiKSkge1xuICAgICAgICAgICAgdGhpcy5fdXJsU3RyaW5nID0gVXJsU3RyaW5nLmNhbm9uaWNhbGl6ZVVyaSh1cmwpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW5zdXJlIHVybHMgYXJlIGxvd2VyIGNhc2UgYW5kIGVuZCB3aXRoIGEgLyBjaGFyYWN0ZXIuXG4gICAgICogQHBhcmFtIHVybFxuICAgICAqL1xuICAgIHN0YXRpYyBjYW5vbmljYWxpemVVcmkodXJsOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBpZiAodXJsKSB7XG4gICAgICAgICAgICBsZXQgbG93ZXJDYXNlVXJsID0gdXJsLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgICAgIGlmIChTdHJpbmdVdGlscy5lbmRzV2l0aChsb3dlckNhc2VVcmwsIFwiP1wiKSkge1xuICAgICAgICAgICAgICAgIGxvd2VyQ2FzZVVybCA9IGxvd2VyQ2FzZVVybC5zbGljZSgwLCAtMSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFN0cmluZ1V0aWxzLmVuZHNXaXRoKGxvd2VyQ2FzZVVybCwgXCI/L1wiKSkge1xuICAgICAgICAgICAgICAgIGxvd2VyQ2FzZVVybCA9IGxvd2VyQ2FzZVVybC5zbGljZSgwLCAtMik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghU3RyaW5nVXRpbHMuZW5kc1dpdGgobG93ZXJDYXNlVXJsLCBcIi9cIikpIHtcbiAgICAgICAgICAgICAgICBsb3dlckNhc2VVcmwgKz0gXCIvXCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBsb3dlckNhc2VVcmw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdXJsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRocm93cyBpZiB1cmxTdHJpbmcgcGFzc2VkIGlzIG5vdCBhIHZhbGlkIGF1dGhvcml0eSBVUkkgc3RyaW5nLlxuICAgICAqL1xuICAgIHZhbGlkYXRlQXNVcmkoKTogdm9pZCB7XG4gICAgICAgIC8vIEF0dGVtcHRzIHRvIHBhcnNlIHVybCBmb3IgdXJpIGNvbXBvbmVudHNcbiAgICAgICAgbGV0IGNvbXBvbmVudHM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb21wb25lbnRzID0gdGhpcy5nZXRVcmxDb21wb25lbnRzKCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudENvbmZpZ3VyYXRpb25FcnJvcihcbiAgICAgICAgICAgICAgICBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy51cmxQYXJzZUVycm9yXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVGhyb3cgZXJyb3IgaWYgVVJJIG9yIHBhdGggc2VnbWVudHMgYXJlIG5vdCBwYXJzZWFibGUuXG4gICAgICAgIGlmICghY29tcG9uZW50cy5Ib3N0TmFtZUFuZFBvcnQgfHwgIWNvbXBvbmVudHMuUGF0aFNlZ21lbnRzKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRDb25maWd1cmF0aW9uRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMudXJsUGFyc2VFcnJvclxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRocm93IGVycm9yIGlmIHVyaSBpcyBpbnNlY3VyZS5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIWNvbXBvbmVudHMuUHJvdG9jb2wgfHxcbiAgICAgICAgICAgIGNvbXBvbmVudHMuUHJvdG9jb2wudG9Mb3dlckNhc2UoKSAhPT0gXCJodHRwczpcIlxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudENvbmZpZ3VyYXRpb25FcnJvcihcbiAgICAgICAgICAgICAgICBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5hdXRob3JpdHlVcmlJbnNlY3VyZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdpdmVuIGEgdXJsIGFuZCBhIHF1ZXJ5IHN0cmluZyByZXR1cm4gdGhlIHVybCB3aXRoIHByb3ZpZGVkIHF1ZXJ5IHN0cmluZyBhcHBlbmRlZFxuICAgICAqIEBwYXJhbSB1cmxcbiAgICAgKiBAcGFyYW0gcXVlcnlTdHJpbmdcbiAgICAgKi9cbiAgICBzdGF0aWMgYXBwZW5kUXVlcnlTdHJpbmcodXJsOiBzdHJpbmcsIHF1ZXJ5U3RyaW5nOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBpZiAoIXF1ZXJ5U3RyaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gdXJsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVybC5pbmRleE9mKFwiP1wiKSA8IDBcbiAgICAgICAgICAgID8gYCR7dXJsfT8ke3F1ZXJ5U3RyaW5nfWBcbiAgICAgICAgICAgIDogYCR7dXJsfSYke3F1ZXJ5U3RyaW5nfWA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHVybCB3aXRoIHRoZSBoYXNoIHJlbW92ZWRcbiAgICAgKiBAcGFyYW0gdXJsXG4gICAgICovXG4gICAgc3RhdGljIHJlbW92ZUhhc2hGcm9tVXJsKHVybDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIFVybFN0cmluZy5jYW5vbmljYWxpemVVcmkodXJsLnNwbGl0KFwiI1wiKVswXSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2l2ZW4gYSB1cmwgbGlrZSBodHRwczovL2E6Yi9jb21tb24vZD9lPWYjZywgYW5kIGEgdGVuYW50SWQsIHJldHVybnMgaHR0cHM6Ly9hOmIvdGVuYW50SWQvZFxuICAgICAqIEBwYXJhbSBocmVmIFRoZSB1cmxcbiAgICAgKiBAcGFyYW0gdGVuYW50SWQgVGhlIHRlbmFudCBpZCB0byByZXBsYWNlXG4gICAgICovXG4gICAgcmVwbGFjZVRlbmFudFBhdGgodGVuYW50SWQ6IHN0cmluZyk6IFVybFN0cmluZyB7XG4gICAgICAgIGNvbnN0IHVybE9iamVjdCA9IHRoaXMuZ2V0VXJsQ29tcG9uZW50cygpO1xuICAgICAgICBjb25zdCBwYXRoQXJyYXkgPSB1cmxPYmplY3QuUGF0aFNlZ21lbnRzO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0ZW5hbnRJZCAmJlxuICAgICAgICAgICAgcGF0aEFycmF5Lmxlbmd0aCAhPT0gMCAmJlxuICAgICAgICAgICAgKHBhdGhBcnJheVswXSA9PT0gQUFEQXV0aG9yaXR5Q29uc3RhbnRzLkNPTU1PTiB8fFxuICAgICAgICAgICAgICAgIHBhdGhBcnJheVswXSA9PT0gQUFEQXV0aG9yaXR5Q29uc3RhbnRzLk9SR0FOSVpBVElPTlMpXG4gICAgICAgICkge1xuICAgICAgICAgICAgcGF0aEFycmF5WzBdID0gdGVuYW50SWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFVybFN0cmluZy5jb25zdHJ1Y3RBdXRob3JpdHlVcmlGcm9tT2JqZWN0KHVybE9iamVjdCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyc2VzIG91dCB0aGUgY29tcG9uZW50cyBmcm9tIGEgdXJsIHN0cmluZy5cbiAgICAgKiBAcmV0dXJucyBBbiBvYmplY3Qgd2l0aCB0aGUgdmFyaW91cyBjb21wb25lbnRzLiBQbGVhc2UgY2FjaGUgdGhpcyB2YWx1ZSBpbnN0ZWQgb2YgY2FsbGluZyB0aGlzIG11bHRpcGxlIHRpbWVzIG9uIHRoZSBzYW1lIHVybC5cbiAgICAgKi9cbiAgICBnZXRVcmxDb21wb25lbnRzKCk6IElVcmkge1xuICAgICAgICAvLyBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9jdXJ0aXN6LzExMTM5YjJjZmNhZWY0YTI2MWUwXG4gICAgICAgIGNvbnN0IHJlZ0V4ID0gUmVnRXhwKFxuICAgICAgICAgICAgXCJeKChbXjovPyNdKyk6KT8oLy8oW14vPyNdKikpPyhbXj8jXSopKFxcXFw/KFteI10qKSk/KCMoLiopKT9cIlxuICAgICAgICApO1xuXG4gICAgICAgIC8vIElmIHVybCBzdHJpbmcgZG9lcyBub3QgbWF0Y2ggcmVnRXgsIHdlIHRocm93IGFuIGVycm9yXG4gICAgICAgIGNvbnN0IG1hdGNoID0gdGhpcy51cmxTdHJpbmcubWF0Y2gocmVnRXgpO1xuICAgICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRDb25maWd1cmF0aW9uRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMudXJsUGFyc2VFcnJvclxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVybCBjb21wb25lbnQgb2JqZWN0XG4gICAgICAgIGNvbnN0IHVybENvbXBvbmVudHMgPSB7XG4gICAgICAgICAgICBQcm90b2NvbDogbWF0Y2hbMV0sXG4gICAgICAgICAgICBIb3N0TmFtZUFuZFBvcnQ6IG1hdGNoWzRdLFxuICAgICAgICAgICAgQWJzb2x1dGVQYXRoOiBtYXRjaFs1XSxcbiAgICAgICAgICAgIFF1ZXJ5U3RyaW5nOiBtYXRjaFs3XSxcbiAgICAgICAgfSBhcyBJVXJpO1xuXG4gICAgICAgIGxldCBwYXRoU2VnbWVudHMgPSB1cmxDb21wb25lbnRzLkFic29sdXRlUGF0aC5zcGxpdChcIi9cIik7XG4gICAgICAgIHBhdGhTZWdtZW50cyA9IHBhdGhTZWdtZW50cy5maWx0ZXIoKHZhbCkgPT4gdmFsICYmIHZhbC5sZW5ndGggPiAwKTsgLy8gcmVtb3ZlIGVtcHR5IGVsZW1lbnRzXG4gICAgICAgIHVybENvbXBvbmVudHMuUGF0aFNlZ21lbnRzID0gcGF0aFNlZ21lbnRzO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHVybENvbXBvbmVudHMuUXVlcnlTdHJpbmcgJiZcbiAgICAgICAgICAgIHVybENvbXBvbmVudHMuUXVlcnlTdHJpbmcuZW5kc1dpdGgoXCIvXCIpXG4gICAgICAgICkge1xuICAgICAgICAgICAgdXJsQ29tcG9uZW50cy5RdWVyeVN0cmluZyA9IHVybENvbXBvbmVudHMuUXVlcnlTdHJpbmcuc3Vic3RyaW5nKFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgdXJsQ29tcG9uZW50cy5RdWVyeVN0cmluZy5sZW5ndGggLSAxXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1cmxDb21wb25lbnRzO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXREb21haW5Gcm9tVXJsKHVybDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgcmVnRXggPSBSZWdFeHAoXCJeKFteOi8/I10rOi8vKT8oW14vPyNdKilcIik7XG5cbiAgICAgICAgY29uc3QgbWF0Y2ggPSB1cmwubWF0Y2gocmVnRXgpO1xuXG4gICAgICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudENvbmZpZ3VyYXRpb25FcnJvcihcbiAgICAgICAgICAgICAgICBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy51cmxQYXJzZUVycm9yXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG1hdGNoWzJdO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRBYnNvbHV0ZVVybChyZWxhdGl2ZVVybDogc3RyaW5nLCBiYXNlVXJsOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBpZiAocmVsYXRpdmVVcmxbMF0gPT09IENvbnN0YW50cy5GT1JXQVJEX1NMQVNIKSB7XG4gICAgICAgICAgICBjb25zdCB1cmwgPSBuZXcgVXJsU3RyaW5nKGJhc2VVcmwpO1xuICAgICAgICAgICAgY29uc3QgYmFzZUNvbXBvbmVudHMgPSB1cmwuZ2V0VXJsQ29tcG9uZW50cygpO1xuXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIGJhc2VDb21wb25lbnRzLlByb3RvY29sICtcbiAgICAgICAgICAgICAgICBcIi8vXCIgK1xuICAgICAgICAgICAgICAgIGJhc2VDb21wb25lbnRzLkhvc3ROYW1lQW5kUG9ydCArXG4gICAgICAgICAgICAgICAgcmVsYXRpdmVVcmxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVsYXRpdmVVcmw7XG4gICAgfVxuXG4gICAgc3RhdGljIGNvbnN0cnVjdEF1dGhvcml0eVVyaUZyb21PYmplY3QodXJsT2JqZWN0OiBJVXJpKTogVXJsU3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVcmxTdHJpbmcoXG4gICAgICAgICAgICB1cmxPYmplY3QuUHJvdG9jb2wgK1xuICAgICAgICAgICAgICAgIFwiLy9cIiArXG4gICAgICAgICAgICAgICAgdXJsT2JqZWN0Lkhvc3ROYW1lQW5kUG9ydCArXG4gICAgICAgICAgICAgICAgXCIvXCIgK1xuICAgICAgICAgICAgICAgIHVybE9iamVjdC5QYXRoU2VnbWVudHMuam9pbihcIi9cIilcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiB0aGUgaGFzaCBvZiB0aGUgVVJMIHN0cmluZyBjb250YWlucyBrbm93biBwcm9wZXJ0aWVzXG4gICAgICogQGRlcHJlY2F0ZWQgVGhpcyBBUEkgd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIHZlcnNpb25cbiAgICAgKi9cbiAgICBzdGF0aWMgaGFzaENvbnRhaW5zS25vd25Qcm9wZXJ0aWVzKHJlc3BvbnNlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICEhVXJsVXRpbHMuZ2V0RGVzZXJpYWxpemVkUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgIH1cbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4uL2xvZ2dlci9Mb2dnZXIuanNcIjtcbmltcG9ydCB7IFVybFN0cmluZyB9IGZyb20gXCIuLi91cmwvVXJsU3RyaW5nLmpzXCI7XG5pbXBvcnQgeyBBdXRob3JpdHlNZXRhZGF0YVNvdXJjZSB9IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcbmltcG9ydCB7IFN0YXRpY0F1dGhvcml0eU9wdGlvbnMgfSBmcm9tIFwiLi9BdXRob3JpdHlPcHRpb25zLmpzXCI7XG5pbXBvcnQgeyBDbG91ZERpc2NvdmVyeU1ldGFkYXRhIH0gZnJvbSBcIi4vQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YS5qc1wiO1xuaW1wb3J0IHsgQ2xvdWRJbnN0YW5jZURpc2NvdmVyeVJlc3BvbnNlIH0gZnJvbSBcIi4vQ2xvdWRJbnN0YW5jZURpc2NvdmVyeVJlc3BvbnNlLmpzXCI7XG5pbXBvcnQgeyBPcGVuSWRDb25maWdSZXNwb25zZSB9IGZyb20gXCIuL09wZW5JZENvbmZpZ1Jlc3BvbnNlLmpzXCI7XG5cbnR5cGUgUmF3TWV0YWRhdGEgPSB7XG4gICAgZW5kcG9pbnRNZXRhZGF0YTogeyBba2V5OiBzdHJpbmddOiBPcGVuSWRDb25maWdSZXNwb25zZSB9O1xuICAgIGluc3RhbmNlRGlzY292ZXJ5TWV0YWRhdGE6IENsb3VkSW5zdGFuY2VEaXNjb3ZlcnlSZXNwb25zZTtcbn07XG5cbmV4cG9ydCBjb25zdCByYXdNZXRkYXRhSlNPTjogUmF3TWV0YWRhdGEgPSB7XG4gICAgZW5kcG9pbnRNZXRhZGF0YToge1xuICAgICAgICBcImxvZ2luLm1pY3Jvc29mdG9ubGluZS5jb21cIjoge1xuICAgICAgICAgICAgdG9rZW5fZW5kcG9pbnQ6XG4gICAgICAgICAgICAgICAgXCJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20ve3RlbmFudGlkfS9vYXV0aDIvdjIuMC90b2tlblwiLFxuICAgICAgICAgICAgandrc191cmk6XG4gICAgICAgICAgICAgICAgXCJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20ve3RlbmFudGlkfS9kaXNjb3ZlcnkvdjIuMC9rZXlzXCIsXG4gICAgICAgICAgICBpc3N1ZXI6IFwiaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tL3t0ZW5hbnRpZH0vdjIuMFwiLFxuICAgICAgICAgICAgYXV0aG9yaXphdGlvbl9lbmRwb2ludDpcbiAgICAgICAgICAgICAgICBcImh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbS97dGVuYW50aWR9L29hdXRoMi92Mi4wL2F1dGhvcml6ZVwiLFxuICAgICAgICAgICAgZW5kX3Nlc3Npb25fZW5kcG9pbnQ6XG4gICAgICAgICAgICAgICAgXCJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20ve3RlbmFudGlkfS9vYXV0aDIvdjIuMC9sb2dvdXRcIixcbiAgICAgICAgfSxcbiAgICAgICAgXCJsb2dpbi5jaGluYWNsb3VkYXBpLmNuXCI6IHtcbiAgICAgICAgICAgIHRva2VuX2VuZHBvaW50OlxuICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly9sb2dpbi5jaGluYWNsb3VkYXBpLmNuL3t0ZW5hbnRpZH0vb2F1dGgyL3YyLjAvdG9rZW5cIixcbiAgICAgICAgICAgIGp3a3NfdXJpOlxuICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly9sb2dpbi5jaGluYWNsb3VkYXBpLmNuL3t0ZW5hbnRpZH0vZGlzY292ZXJ5L3YyLjAva2V5c1wiLFxuICAgICAgICAgICAgaXNzdWVyOiBcImh0dHBzOi8vbG9naW4ucGFydG5lci5taWNyb3NvZnRvbmxpbmUuY24ve3RlbmFudGlkfS92Mi4wXCIsXG4gICAgICAgICAgICBhdXRob3JpemF0aW9uX2VuZHBvaW50OlxuICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly9sb2dpbi5jaGluYWNsb3VkYXBpLmNuL3t0ZW5hbnRpZH0vb2F1dGgyL3YyLjAvYXV0aG9yaXplXCIsXG4gICAgICAgICAgICBlbmRfc2Vzc2lvbl9lbmRwb2ludDpcbiAgICAgICAgICAgICAgICBcImh0dHBzOi8vbG9naW4uY2hpbmFjbG91ZGFwaS5jbi97dGVuYW50aWR9L29hdXRoMi92Mi4wL2xvZ291dFwiLFxuICAgICAgICB9LFxuICAgICAgICBcImxvZ2luLm1pY3Jvc29mdG9ubGluZS51c1wiOiB7XG4gICAgICAgICAgICB0b2tlbl9lbmRwb2ludDpcbiAgICAgICAgICAgICAgICBcImh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLnVzL3t0ZW5hbnRpZH0vb2F1dGgyL3YyLjAvdG9rZW5cIixcbiAgICAgICAgICAgIGp3a3NfdXJpOlxuICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUudXMve3RlbmFudGlkfS9kaXNjb3ZlcnkvdjIuMC9rZXlzXCIsXG4gICAgICAgICAgICBpc3N1ZXI6IFwiaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUudXMve3RlbmFudGlkfS92Mi4wXCIsXG4gICAgICAgICAgICBhdXRob3JpemF0aW9uX2VuZHBvaW50OlxuICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUudXMve3RlbmFudGlkfS9vYXV0aDIvdjIuMC9hdXRob3JpemVcIixcbiAgICAgICAgICAgIGVuZF9zZXNzaW9uX2VuZHBvaW50OlxuICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUudXMve3RlbmFudGlkfS9vYXV0aDIvdjIuMC9sb2dvdXRcIixcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIGluc3RhbmNlRGlzY292ZXJ5TWV0YWRhdGE6IHtcbiAgICAgICAgdGVuYW50X2Rpc2NvdmVyeV9lbmRwb2ludDpcbiAgICAgICAgICAgIFwiaHR0cHM6Ly97Y2Fub25pY2FsQXV0aG9yaXR5fS92Mi4wLy53ZWxsLWtub3duL29wZW5pZC1jb25maWd1cmF0aW9uXCIsXG4gICAgICAgIG1ldGFkYXRhOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJlZmVycmVkX25ldHdvcms6IFwibG9naW4ubWljcm9zb2Z0b25saW5lLmNvbVwiLFxuICAgICAgICAgICAgICAgIHByZWZlcnJlZF9jYWNoZTogXCJsb2dpbi53aW5kb3dzLm5ldFwiLFxuICAgICAgICAgICAgICAgIGFsaWFzZXM6IFtcbiAgICAgICAgICAgICAgICAgICAgXCJsb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tXCIsXG4gICAgICAgICAgICAgICAgICAgIFwibG9naW4ud2luZG93cy5uZXRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJsb2dpbi5taWNyb3NvZnQuY29tXCIsXG4gICAgICAgICAgICAgICAgICAgIFwic3RzLndpbmRvd3MubmV0XCIsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJlZmVycmVkX25ldHdvcms6IFwibG9naW4ucGFydG5lci5taWNyb3NvZnRvbmxpbmUuY25cIixcbiAgICAgICAgICAgICAgICBwcmVmZXJyZWRfY2FjaGU6IFwibG9naW4ucGFydG5lci5taWNyb3NvZnRvbmxpbmUuY25cIixcbiAgICAgICAgICAgICAgICBhbGlhc2VzOiBbXG4gICAgICAgICAgICAgICAgICAgIFwibG9naW4ucGFydG5lci5taWNyb3NvZnRvbmxpbmUuY25cIixcbiAgICAgICAgICAgICAgICAgICAgXCJsb2dpbi5jaGluYWNsb3VkYXBpLmNuXCIsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJlZmVycmVkX25ldHdvcms6IFwibG9naW4ubWljcm9zb2Z0b25saW5lLmRlXCIsXG4gICAgICAgICAgICAgICAgcHJlZmVycmVkX2NhY2hlOiBcImxvZ2luLm1pY3Jvc29mdG9ubGluZS5kZVwiLFxuICAgICAgICAgICAgICAgIGFsaWFzZXM6IFtcImxvZ2luLm1pY3Jvc29mdG9ubGluZS5kZVwiXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJlZmVycmVkX25ldHdvcms6IFwibG9naW4ubWljcm9zb2Z0b25saW5lLnVzXCIsXG4gICAgICAgICAgICAgICAgcHJlZmVycmVkX2NhY2hlOiBcImxvZ2luLm1pY3Jvc29mdG9ubGluZS51c1wiLFxuICAgICAgICAgICAgICAgIGFsaWFzZXM6IFtcbiAgICAgICAgICAgICAgICAgICAgXCJsb2dpbi5taWNyb3NvZnRvbmxpbmUudXNcIixcbiAgICAgICAgICAgICAgICAgICAgXCJsb2dpbi51c2dvdmNsb3VkYXBpLm5ldFwiLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHByZWZlcnJlZF9uZXR3b3JrOiBcImxvZ2luLXVzLm1pY3Jvc29mdG9ubGluZS5jb21cIixcbiAgICAgICAgICAgICAgICBwcmVmZXJyZWRfY2FjaGU6IFwibG9naW4tdXMubWljcm9zb2Z0b25saW5lLmNvbVwiLFxuICAgICAgICAgICAgICAgIGFsaWFzZXM6IFtcImxvZ2luLXVzLm1pY3Jvc29mdG9ubGluZS5jb21cIl0sXG4gICAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgIH0sXG59O1xuXG5leHBvcnQgY29uc3QgRW5kcG9pbnRNZXRhZGF0YSA9IHJhd01ldGRhdGFKU09OLmVuZHBvaW50TWV0YWRhdGE7XG5leHBvcnQgY29uc3QgSW5zdGFuY2VEaXNjb3ZlcnlNZXRhZGF0YSA9XG4gICAgcmF3TWV0ZGF0YUpTT04uaW5zdGFuY2VEaXNjb3ZlcnlNZXRhZGF0YTtcblxuZXhwb3J0IGNvbnN0IEluc3RhbmNlRGlzY292ZXJ5TWV0YWRhdGFBbGlhc2VzOiBTZXQ8U3RyaW5nPiA9IG5ldyBTZXQoKTtcbkluc3RhbmNlRGlzY292ZXJ5TWV0YWRhdGEubWV0YWRhdGEuZm9yRWFjaChcbiAgICAobWV0YWRhdGFFbnRyeTogQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YSkgPT4ge1xuICAgICAgICBtZXRhZGF0YUVudHJ5LmFsaWFzZXMuZm9yRWFjaCgoYWxpYXM6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgSW5zdGFuY2VEaXNjb3ZlcnlNZXRhZGF0YUFsaWFzZXMuYWRkKGFsaWFzKTtcbiAgICAgICAgfSk7XG4gICAgfVxuKTtcblxuLyoqXG4gKiBBdHRlbXB0cyB0byBnZXQgYW4gYWxpYXNlcyBhcnJheSBmcm9tIHRoZSBzdGF0aWMgYXV0aG9yaXR5IG1ldGFkYXRhIHNvdXJjZXMgYmFzZWQgb24gdGhlIGNhbm9uaWNhbCBhdXRob3JpdHkgaG9zdFxuICogQHBhcmFtIHN0YXRpY0F1dGhvcml0eU9wdGlvbnNcbiAqIEBwYXJhbSBsb2dnZXJcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBbGlhc2VzRnJvbVN0YXRpY1NvdXJjZXMoXG4gICAgc3RhdGljQXV0aG9yaXR5T3B0aW9uczogU3RhdGljQXV0aG9yaXR5T3B0aW9ucyxcbiAgICBsb2dnZXI/OiBMb2dnZXJcbik6IHN0cmluZ1tdIHtcbiAgICBsZXQgc3RhdGljQWxpYXNlczogc3RyaW5nW10gfCB1bmRlZmluZWQ7XG4gICAgY29uc3QgY2Fub25pY2FsQXV0aG9yaXR5ID0gc3RhdGljQXV0aG9yaXR5T3B0aW9ucy5jYW5vbmljYWxBdXRob3JpdHk7XG4gICAgaWYgKGNhbm9uaWNhbEF1dGhvcml0eSkge1xuICAgICAgICBjb25zdCBhdXRob3JpdHlIb3N0ID0gbmV3IFVybFN0cmluZyhcbiAgICAgICAgICAgIGNhbm9uaWNhbEF1dGhvcml0eVxuICAgICAgICApLmdldFVybENvbXBvbmVudHMoKS5Ib3N0TmFtZUFuZFBvcnQ7XG4gICAgICAgIHN0YXRpY0FsaWFzZXMgPVxuICAgICAgICAgICAgZ2V0QWxpYXNlc0Zyb21NZXRhZGF0YShcbiAgICAgICAgICAgICAgICBhdXRob3JpdHlIb3N0LFxuICAgICAgICAgICAgICAgIHN0YXRpY0F1dGhvcml0eU9wdGlvbnMuY2xvdWREaXNjb3ZlcnlNZXRhZGF0YT8ubWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgQXV0aG9yaXR5TWV0YWRhdGFTb3VyY2UuQ09ORklHLFxuICAgICAgICAgICAgICAgIGxvZ2dlclxuICAgICAgICAgICAgKSB8fFxuICAgICAgICAgICAgZ2V0QWxpYXNlc0Zyb21NZXRhZGF0YShcbiAgICAgICAgICAgICAgICBhdXRob3JpdHlIb3N0LFxuICAgICAgICAgICAgICAgIEluc3RhbmNlRGlzY292ZXJ5TWV0YWRhdGEubWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgQXV0aG9yaXR5TWV0YWRhdGFTb3VyY2UuSEFSRENPREVEX1ZBTFVFUyxcbiAgICAgICAgICAgICAgICBsb2dnZXJcbiAgICAgICAgICAgICkgfHxcbiAgICAgICAgICAgIHN0YXRpY0F1dGhvcml0eU9wdGlvbnMua25vd25BdXRob3JpdGllcztcbiAgICB9XG5cbiAgICByZXR1cm4gc3RhdGljQWxpYXNlcyB8fCBbXTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFsaWFzZXMgZm9yIGZyb20gdGhlIHJhdyBjbG91ZCBkaXNjb3ZlcnkgbWV0YWRhdGEgcGFzc2VkIGluXG4gKiBAcGFyYW0gYXV0aG9yaXR5SG9zdFxuICogQHBhcmFtIHJhd0Nsb3VkRGlzY292ZXJ5TWV0YWRhdGFcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBbGlhc2VzRnJvbU1ldGFkYXRhKFxuICAgIGF1dGhvcml0eUhvc3Q/OiBzdHJpbmcsXG4gICAgY2xvdWREaXNjb3ZlcnlNZXRhZGF0YT86IENsb3VkRGlzY292ZXJ5TWV0YWRhdGFbXSxcbiAgICBzb3VyY2U/OiBBdXRob3JpdHlNZXRhZGF0YVNvdXJjZSxcbiAgICBsb2dnZXI/OiBMb2dnZXJcbik6IHN0cmluZ1tdIHwgbnVsbCB7XG4gICAgbG9nZ2VyPy50cmFjZShgZ2V0QWxpYXNlc0Zyb21NZXRhZGF0YSBjYWxsZWQgd2l0aCBzb3VyY2U6ICR7c291cmNlfWApO1xuICAgIGlmIChhdXRob3JpdHlIb3N0ICYmIGNsb3VkRGlzY292ZXJ5TWV0YWRhdGEpIHtcbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBnZXRDbG91ZERpc2NvdmVyeU1ldGFkYXRhRnJvbU5ldHdvcmtSZXNwb25zZShcbiAgICAgICAgICAgIGNsb3VkRGlzY292ZXJ5TWV0YWRhdGEsXG4gICAgICAgICAgICBhdXRob3JpdHlIb3N0XG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKG1ldGFkYXRhKSB7XG4gICAgICAgICAgICBsb2dnZXI/LnRyYWNlKFxuICAgICAgICAgICAgICAgIGBnZXRBbGlhc2VzRnJvbU1ldGFkYXRhOiBmb3VuZCBjbG91ZCBkaXNjb3ZlcnkgbWV0YWRhdGEgaW4gJHtzb3VyY2V9LCByZXR1cm5pbmcgYWxpYXNlc2BcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm4gbWV0YWRhdGEuYWxpYXNlcztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxvZ2dlcj8udHJhY2UoXG4gICAgICAgICAgICAgICAgYGdldEFsaWFzZXNGcm9tTWV0YWRhdGE6IGRpZCBub3QgZmluZCBjbG91ZCBkaXNjb3ZlcnkgbWV0YWRhdGEgaW4gJHtzb3VyY2V9YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIEdldCBjbG91ZCBkaXNjb3ZlcnkgbWV0YWRhdGEgZm9yIGNvbW1vbiBhdXRob3JpdGllc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2xvdWREaXNjb3ZlcnlNZXRhZGF0YUZyb21IYXJkY29kZWRWYWx1ZXMoXG4gICAgYXV0aG9yaXR5SG9zdDogc3RyaW5nXG4pOiBDbG91ZERpc2NvdmVyeU1ldGFkYXRhIHwgbnVsbCB7XG4gICAgY29uc3QgbWV0YWRhdGEgPSBnZXRDbG91ZERpc2NvdmVyeU1ldGFkYXRhRnJvbU5ldHdvcmtSZXNwb25zZShcbiAgICAgICAgSW5zdGFuY2VEaXNjb3ZlcnlNZXRhZGF0YS5tZXRhZGF0YSxcbiAgICAgICAgYXV0aG9yaXR5SG9zdFxuICAgICk7XG4gICAgcmV0dXJuIG1ldGFkYXRhO1xufVxuXG4vKipcbiAqIFNlYXJjaGVzIGluc3RhbmNlIGRpc2NvdmVyeSBuZXR3b3JrIHJlc3BvbnNlIGZvciB0aGUgZW50cnkgdGhhdCBjb250YWlucyB0aGUgaG9zdCBpbiB0aGUgYWxpYXNlcyBsaXN0XG4gKiBAcGFyYW0gcmVzcG9uc2VcbiAqIEBwYXJhbSBhdXRob3JpdHlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENsb3VkRGlzY292ZXJ5TWV0YWRhdGFGcm9tTmV0d29ya1Jlc3BvbnNlKFxuICAgIHJlc3BvbnNlOiBDbG91ZERpc2NvdmVyeU1ldGFkYXRhW10sXG4gICAgYXV0aG9yaXR5SG9zdDogc3RyaW5nXG4pOiBDbG91ZERpc2NvdmVyeU1ldGFkYXRhIHwgbnVsbCB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXNwb25zZS5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IHJlc3BvbnNlW2ldO1xuICAgICAgICBpZiAobWV0YWRhdGEuYWxpYXNlcy5pbmNsdWRlcyhhdXRob3JpdHlIb3N0KSkge1xuICAgICAgICAgICAgcmV0dXJuIG1ldGFkYXRhO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmV4cG9ydCBjb25zdCBjYWNoZVF1b3RhRXhjZWVkZWRFcnJvckNvZGUgPSBcImNhY2hlX3F1b3RhX2V4Y2VlZGVkXCI7XG5leHBvcnQgY29uc3QgY2FjaGVVbmtub3duRXJyb3JDb2RlID0gXCJjYWNoZV9lcnJvcl91bmtub3duXCI7XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCAqIGFzIENhY2hlRXJyb3JDb2RlcyBmcm9tIFwiLi9DYWNoZUVycm9yQ29kZXMuanNcIjtcbmV4cG9ydCB7IENhY2hlRXJyb3JDb2RlcyB9O1xuXG5leHBvcnQgY29uc3QgQ2FjaGVFcnJvck1lc3NhZ2VzID0ge1xuICAgIFtDYWNoZUVycm9yQ29kZXMuY2FjaGVRdW90YUV4Y2VlZGVkRXJyb3JDb2RlXTpcbiAgICAgICAgXCJFeGNlZWRlZCBjYWNoZSBzdG9yYWdlIGNhcGFjaXR5LlwiLFxuICAgIFtDYWNoZUVycm9yQ29kZXMuY2FjaGVVbmtub3duRXJyb3JDb2RlXTpcbiAgICAgICAgXCJVbmV4cGVjdGVkIGVycm9yIG9jY3VycmVkIHdoZW4gdXNpbmcgY2FjaGUgc3RvcmFnZS5cIixcbn07XG5cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gdGhlcmUgaXMgYW4gZXJyb3Igd2l0aCB0aGUgY2FjaGVcbiAqL1xuZXhwb3J0IGNsYXNzIENhY2hlRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgLyoqXG4gICAgICogU2hvcnQgc3RyaW5nIGRlbm90aW5nIGVycm9yXG4gICAgICovXG4gICAgZXJyb3JDb2RlOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBEZXRhaWxlZCBkZXNjcmlwdGlvbiBvZiBlcnJvclxuICAgICAqL1xuICAgIGVycm9yTWVzc2FnZTogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoZXJyb3JDb2RlOiBzdHJpbmcsIGVycm9yTWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBjb25zdCBtZXNzYWdlID1cbiAgICAgICAgICAgIGVycm9yTWVzc2FnZSB8fFxuICAgICAgICAgICAgKENhY2hlRXJyb3JNZXNzYWdlc1tlcnJvckNvZGVdXG4gICAgICAgICAgICAgICAgPyBDYWNoZUVycm9yTWVzc2FnZXNbZXJyb3JDb2RlXVxuICAgICAgICAgICAgICAgIDogQ2FjaGVFcnJvck1lc3NhZ2VzW0NhY2hlRXJyb3JDb2Rlcy5jYWNoZVVua25vd25FcnJvckNvZGVdKTtcblxuICAgICAgICBzdXBlcihgJHtlcnJvckNvZGV9OiAke21lc3NhZ2V9YCk7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBDYWNoZUVycm9yLnByb3RvdHlwZSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gXCJDYWNoZUVycm9yXCI7XG4gICAgICAgIHRoaXMuZXJyb3JDb2RlID0gZXJyb3JDb2RlO1xuICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgfVxufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICAgIEFjY291bnRGaWx0ZXIsXG4gICAgQ3JlZGVudGlhbEZpbHRlcixcbiAgICBWYWxpZENyZWRlbnRpYWxUeXBlLFxuICAgIEFwcE1ldGFkYXRhRmlsdGVyLFxuICAgIEFwcE1ldGFkYXRhQ2FjaGUsXG4gICAgVG9rZW5LZXlzLFxuICAgIFRlbmFudFByb2ZpbGVGaWx0ZXIsXG59IGZyb20gXCIuL3V0aWxzL0NhY2hlVHlwZXMuanNcIjtcbmltcG9ydCB7IENhY2hlUmVjb3JkIH0gZnJvbSBcIi4vZW50aXRpZXMvQ2FjaGVSZWNvcmQuanNcIjtcbmltcG9ydCB7XG4gICAgQ3JlZGVudGlhbFR5cGUsXG4gICAgQVBQX01FVEFEQVRBLFxuICAgIFRIRV9GQU1JTFlfSUQsXG4gICAgQVVUSE9SSVRZX01FVEFEQVRBX0NPTlNUQU5UUyxcbiAgICBBdXRoZW50aWNhdGlvblNjaGVtZSxcbiAgICBTZXBhcmF0b3JzLFxufSBmcm9tIFwiLi4vdXRpbHMvQ29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBDcmVkZW50aWFsRW50aXR5IH0gZnJvbSBcIi4vZW50aXRpZXMvQ3JlZGVudGlhbEVudGl0eS5qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVDcmVkZW50aWFsS2V5IH0gZnJvbSBcIi4vdXRpbHMvQ2FjaGVIZWxwZXJzLmpzXCI7XG5pbXBvcnQgeyBTY29wZVNldCB9IGZyb20gXCIuLi9yZXF1ZXN0L1Njb3BlU2V0LmpzXCI7XG5pbXBvcnQgeyBBY2NvdW50RW50aXR5IH0gZnJvbSBcIi4vZW50aXRpZXMvQWNjb3VudEVudGl0eS5qc1wiO1xuaW1wb3J0IHsgQWNjZXNzVG9rZW5FbnRpdHkgfSBmcm9tIFwiLi9lbnRpdGllcy9BY2Nlc3NUb2tlbkVudGl0eS5qc1wiO1xuaW1wb3J0IHsgSWRUb2tlbkVudGl0eSB9IGZyb20gXCIuL2VudGl0aWVzL0lkVG9rZW5FbnRpdHkuanNcIjtcbmltcG9ydCB7IFJlZnJlc2hUb2tlbkVudGl0eSB9IGZyb20gXCIuL2VudGl0aWVzL1JlZnJlc2hUb2tlbkVudGl0eS5qc1wiO1xuaW1wb3J0IHsgSUNhY2hlTWFuYWdlciB9IGZyb20gXCIuL2ludGVyZmFjZS9JQ2FjaGVNYW5hZ2VyLmpzXCI7XG5pbXBvcnQge1xuICAgIGNyZWF0ZUNsaWVudEF1dGhFcnJvcixcbiAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcyxcbn0gZnJvbSBcIi4uL2Vycm9yL0NsaWVudEF1dGhFcnJvci5qc1wiO1xuaW1wb3J0IHtcbiAgICBBY2NvdW50SW5mbyxcbiAgICBUZW5hbnRQcm9maWxlLFxuICAgIHVwZGF0ZUFjY291bnRUZW5hbnRQcm9maWxlRGF0YSxcbn0gZnJvbSBcIi4uL2FjY291bnQvQWNjb3VudEluZm8uanNcIjtcbmltcG9ydCB7IEFwcE1ldGFkYXRhRW50aXR5IH0gZnJvbSBcIi4vZW50aXRpZXMvQXBwTWV0YWRhdGFFbnRpdHkuanNcIjtcbmltcG9ydCB7IFNlcnZlclRlbGVtZXRyeUVudGl0eSB9IGZyb20gXCIuL2VudGl0aWVzL1NlcnZlclRlbGVtZXRyeUVudGl0eS5qc1wiO1xuaW1wb3J0IHsgVGhyb3R0bGluZ0VudGl0eSB9IGZyb20gXCIuL2VudGl0aWVzL1Rocm90dGxpbmdFbnRpdHkuanNcIjtcbmltcG9ydCB7IGV4dHJhY3RUb2tlbkNsYWltcyB9IGZyb20gXCIuLi9hY2NvdW50L0F1dGhUb2tlbi5qc1wiO1xuaW1wb3J0IHsgSUNyeXB0byB9IGZyb20gXCIuLi9jcnlwdG8vSUNyeXB0by5qc1wiO1xuaW1wb3J0IHsgQXV0aG9yaXR5TWV0YWRhdGFFbnRpdHkgfSBmcm9tIFwiLi9lbnRpdGllcy9BdXRob3JpdHlNZXRhZGF0YUVudGl0eS5qc1wiO1xuaW1wb3J0IHsgQmFzZUF1dGhSZXF1ZXN0IH0gZnJvbSBcIi4uL3JlcXVlc3QvQmFzZUF1dGhSZXF1ZXN0LmpzXCI7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiLi4vbG9nZ2VyL0xvZ2dlci5qc1wiO1xuaW1wb3J0IHsgbmFtZSwgdmVyc2lvbiB9IGZyb20gXCIuLi9wYWNrYWdlTWV0YWRhdGEuanNcIjtcbmltcG9ydCB7IFN0b3JlSW5DYWNoZSB9IGZyb20gXCIuLi9yZXF1ZXN0L1N0b3JlSW5DYWNoZS5qc1wiO1xuaW1wb3J0IHsgZ2V0QWxpYXNlc0Zyb21TdGF0aWNTb3VyY2VzIH0gZnJvbSBcIi4uL2F1dGhvcml0eS9BdXRob3JpdHlNZXRhZGF0YS5qc1wiO1xuaW1wb3J0IHsgU3RhdGljQXV0aG9yaXR5T3B0aW9ucyB9IGZyb20gXCIuLi9hdXRob3JpdHkvQXV0aG9yaXR5T3B0aW9ucy5qc1wiO1xuaW1wb3J0IHsgVG9rZW5DbGFpbXMgfSBmcm9tIFwiLi4vYWNjb3VudC9Ub2tlbkNsYWltcy5qc1wiO1xuaW1wb3J0IHsgSVBlcmZvcm1hbmNlQ2xpZW50IH0gZnJvbSBcIi4uL3RlbGVtZXRyeS9wZXJmb3JtYW5jZS9JUGVyZm9ybWFuY2VDbGllbnQuanNcIjtcbmltcG9ydCB7IENhY2hlRXJyb3IsIENhY2hlRXJyb3JDb2RlcyB9IGZyb20gXCIuLi9lcnJvci9DYWNoZUVycm9yLmpzXCI7XG5cbi8qKlxuICogSW50ZXJmYWNlIGNsYXNzIHdoaWNoIGltcGxlbWVudCBjYWNoZSBzdG9yYWdlIGZ1bmN0aW9ucyB1c2VkIGJ5IE1TQUwgdG8gcGVyZm9ybSB2YWxpZGl0eSBjaGVja3MsIGFuZCBzdG9yZSB0b2tlbnMuXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIENhY2hlTWFuYWdlciBpbXBsZW1lbnRzIElDYWNoZU1hbmFnZXIge1xuICAgIHByb3RlY3RlZCBjbGllbnRJZDogc3RyaW5nO1xuICAgIHByb3RlY3RlZCBjcnlwdG9JbXBsOiBJQ3J5cHRvO1xuICAgIC8vIEluc3RhbmNlIG9mIGxvZ2dlciBmb3IgZnVuY3Rpb25zIGRlZmluZWQgaW4gdGhlIG1zYWwtY29tbW9uIGxheWVyXG4gICAgcHJpdmF0ZSBjb21tb25Mb2dnZXI6IExvZ2dlcjtcbiAgICBwcml2YXRlIHN0YXRpY0F1dGhvcml0eU9wdGlvbnM/OiBTdGF0aWNBdXRob3JpdHlPcHRpb25zO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGNsaWVudElkOiBzdHJpbmcsXG4gICAgICAgIGNyeXB0b0ltcGw6IElDcnlwdG8sXG4gICAgICAgIGxvZ2dlcjogTG9nZ2VyLFxuICAgICAgICBzdGF0aWNBdXRob3JpdHlPcHRpb25zPzogU3RhdGljQXV0aG9yaXR5T3B0aW9uc1xuICAgICkge1xuICAgICAgICB0aGlzLmNsaWVudElkID0gY2xpZW50SWQ7XG4gICAgICAgIHRoaXMuY3J5cHRvSW1wbCA9IGNyeXB0b0ltcGw7XG4gICAgICAgIHRoaXMuY29tbW9uTG9nZ2VyID0gbG9nZ2VyLmNsb25lKG5hbWUsIHZlcnNpb24pO1xuICAgICAgICB0aGlzLnN0YXRpY0F1dGhvcml0eU9wdGlvbnMgPSBzdGF0aWNBdXRob3JpdHlPcHRpb25zO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGZldGNoIHRoZSBhY2NvdW50IGVudGl0eSBmcm9tIHRoZSBwbGF0Zm9ybSBjYWNoZVxuICAgICAqICBAcGFyYW0gYWNjb3VudEtleVxuICAgICAqL1xuICAgIGFic3RyYWN0IGdldEFjY291bnQoXG4gICAgICAgIGFjY291bnRLZXk6IHN0cmluZyxcbiAgICAgICAgbG9nZ2VyPzogTG9nZ2VyXG4gICAgKTogQWNjb3VudEVudGl0eSB8IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBzZXQgYWNjb3VudCBlbnRpdHkgaW4gdGhlIHBsYXRmb3JtIGNhY2hlXG4gICAgICogQHBhcmFtIGFjY291bnRcbiAgICAgKiBAcGFyYW0gY29ycmVsYXRpb25JZFxuICAgICAqL1xuICAgIGFic3RyYWN0IHNldEFjY291bnQoXG4gICAgICAgIGFjY291bnQ6IEFjY291bnRFbnRpdHksXG4gICAgICAgIGNvcnJlbGF0aW9uSWQ6IHN0cmluZ1xuICAgICk6IFByb21pc2U8dm9pZD47XG5cbiAgICAvKipcbiAgICAgKiBmZXRjaCB0aGUgaWRUb2tlbiBlbnRpdHkgZnJvbSB0aGUgcGxhdGZvcm0gY2FjaGVcbiAgICAgKiBAcGFyYW0gaWRUb2tlbktleVxuICAgICAqL1xuICAgIGFic3RyYWN0IGdldElkVG9rZW5DcmVkZW50aWFsKGlkVG9rZW5LZXk6IHN0cmluZyk6IElkVG9rZW5FbnRpdHkgfCBudWxsO1xuXG4gICAgLyoqXG4gICAgICogc2V0IGlkVG9rZW4gZW50aXR5IHRvIHRoZSBwbGF0Zm9ybSBjYWNoZVxuICAgICAqIEBwYXJhbSBpZFRva2VuXG4gICAgICogQHBhcmFtIGNvcnJlbGF0aW9uSWRcbiAgICAgKi9cbiAgICBhYnN0cmFjdCBzZXRJZFRva2VuQ3JlZGVudGlhbChcbiAgICAgICAgaWRUb2tlbjogSWRUb2tlbkVudGl0eSxcbiAgICAgICAgY29ycmVsYXRpb25JZDogc3RyaW5nXG4gICAgKTogUHJvbWlzZTx2b2lkPjtcblxuICAgIC8qKlxuICAgICAqIGZldGNoIHRoZSBpZFRva2VuIGVudGl0eSBmcm9tIHRoZSBwbGF0Zm9ybSBjYWNoZVxuICAgICAqIEBwYXJhbSBhY2Nlc3NUb2tlbktleVxuICAgICAqL1xuICAgIGFic3RyYWN0IGdldEFjY2Vzc1Rva2VuQ3JlZGVudGlhbChcbiAgICAgICAgYWNjZXNzVG9rZW5LZXk6IHN0cmluZ1xuICAgICk6IEFjY2Vzc1Rva2VuRW50aXR5IHwgbnVsbDtcblxuICAgIC8qKlxuICAgICAqIHNldCBhY2Nlc3NUb2tlbiBlbnRpdHkgdG8gdGhlIHBsYXRmb3JtIGNhY2hlXG4gICAgICogQHBhcmFtIGFjY2Vzc1Rva2VuXG4gICAgICogQHBhcmFtIGNvcnJlbGF0aW9uSWRcbiAgICAgKi9cbiAgICBhYnN0cmFjdCBzZXRBY2Nlc3NUb2tlbkNyZWRlbnRpYWwoXG4gICAgICAgIGFjY2Vzc1Rva2VuOiBBY2Nlc3NUb2tlbkVudGl0eSxcbiAgICAgICAgY29ycmVsYXRpb25JZDogc3RyaW5nXG4gICAgKTogUHJvbWlzZTx2b2lkPjtcblxuICAgIC8qKlxuICAgICAqIGZldGNoIHRoZSBpZFRva2VuIGVudGl0eSBmcm9tIHRoZSBwbGF0Zm9ybSBjYWNoZVxuICAgICAqIEBwYXJhbSByZWZyZXNoVG9rZW5LZXlcbiAgICAgKi9cbiAgICBhYnN0cmFjdCBnZXRSZWZyZXNoVG9rZW5DcmVkZW50aWFsKFxuICAgICAgICByZWZyZXNoVG9rZW5LZXk6IHN0cmluZ1xuICAgICk6IFJlZnJlc2hUb2tlbkVudGl0eSB8IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBzZXQgcmVmcmVzaFRva2VuIGVudGl0eSB0byB0aGUgcGxhdGZvcm0gY2FjaGVcbiAgICAgKiBAcGFyYW0gcmVmcmVzaFRva2VuXG4gICAgICogQHBhcmFtIGNvcnJlbGF0aW9uSWRcbiAgICAgKi9cbiAgICBhYnN0cmFjdCBzZXRSZWZyZXNoVG9rZW5DcmVkZW50aWFsKFxuICAgICAgICByZWZyZXNoVG9rZW46IFJlZnJlc2hUb2tlbkVudGl0eSxcbiAgICAgICAgY29ycmVsYXRpb25JZDogc3RyaW5nXG4gICAgKTogUHJvbWlzZTx2b2lkPjtcblxuICAgIC8qKlxuICAgICAqIGZldGNoIGFwcE1ldGFkYXRhIGVudGl0eSBmcm9tIHRoZSBwbGF0Zm9ybSBjYWNoZVxuICAgICAqIEBwYXJhbSBhcHBNZXRhZGF0YUtleVxuICAgICAqL1xuICAgIGFic3RyYWN0IGdldEFwcE1ldGFkYXRhKGFwcE1ldGFkYXRhS2V5OiBzdHJpbmcpOiBBcHBNZXRhZGF0YUVudGl0eSB8IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBzZXQgYXBwTWV0YWRhdGEgZW50aXR5IHRvIHRoZSBwbGF0Zm9ybSBjYWNoZVxuICAgICAqIEBwYXJhbSBhcHBNZXRhZGF0YVxuICAgICAqL1xuICAgIGFic3RyYWN0IHNldEFwcE1ldGFkYXRhKGFwcE1ldGFkYXRhOiBBcHBNZXRhZGF0YUVudGl0eSk6IHZvaWQ7XG5cbiAgICAvKipcbiAgICAgKiBmZXRjaCBzZXJ2ZXIgdGVsZW1ldHJ5IGVudGl0eSBmcm9tIHRoZSBwbGF0Zm9ybSBjYWNoZVxuICAgICAqIEBwYXJhbSBzZXJ2ZXJUZWxlbWV0cnlLZXlcbiAgICAgKi9cbiAgICBhYnN0cmFjdCBnZXRTZXJ2ZXJUZWxlbWV0cnkoXG4gICAgICAgIHNlcnZlclRlbGVtZXRyeUtleTogc3RyaW5nXG4gICAgKTogU2VydmVyVGVsZW1ldHJ5RW50aXR5IHwgbnVsbDtcblxuICAgIC8qKlxuICAgICAqIHNldCBzZXJ2ZXIgdGVsZW1ldHJ5IGVudGl0eSB0byB0aGUgcGxhdGZvcm0gY2FjaGVcbiAgICAgKiBAcGFyYW0gc2VydmVyVGVsZW1ldHJ5S2V5XG4gICAgICogQHBhcmFtIHNlcnZlclRlbGVtZXRyeVxuICAgICAqL1xuICAgIGFic3RyYWN0IHNldFNlcnZlclRlbGVtZXRyeShcbiAgICAgICAgc2VydmVyVGVsZW1ldHJ5S2V5OiBzdHJpbmcsXG4gICAgICAgIHNlcnZlclRlbGVtZXRyeTogU2VydmVyVGVsZW1ldHJ5RW50aXR5XG4gICAgKTogdm9pZDtcblxuICAgIC8qKlxuICAgICAqIGZldGNoIGNsb3VkIGRpc2NvdmVyeSBtZXRhZGF0YSBlbnRpdHkgZnJvbSB0aGUgcGxhdGZvcm0gY2FjaGVcbiAgICAgKiBAcGFyYW0ga2V5XG4gICAgICovXG4gICAgYWJzdHJhY3QgZ2V0QXV0aG9yaXR5TWV0YWRhdGEoa2V5OiBzdHJpbmcpOiBBdXRob3JpdHlNZXRhZGF0YUVudGl0eSB8IG51bGw7XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIGFic3RyYWN0IGdldEF1dGhvcml0eU1ldGFkYXRhS2V5cygpOiBBcnJheTxzdHJpbmc+O1xuXG4gICAgLyoqXG4gICAgICogc2V0IGNsb3VkIGRpc2NvdmVyeSBtZXRhZGF0YSBlbnRpdHkgdG8gdGhlIHBsYXRmb3JtIGNhY2hlXG4gICAgICogQHBhcmFtIGtleVxuICAgICAqIEBwYXJhbSB2YWx1ZVxuICAgICAqL1xuICAgIGFic3RyYWN0IHNldEF1dGhvcml0eU1ldGFkYXRhKFxuICAgICAgICBrZXk6IHN0cmluZyxcbiAgICAgICAgdmFsdWU6IEF1dGhvcml0eU1ldGFkYXRhRW50aXR5XG4gICAgKTogdm9pZDtcblxuICAgIC8qKlxuICAgICAqIGZldGNoIHRocm90dGxpbmcgZW50aXR5IGZyb20gdGhlIHBsYXRmb3JtIGNhY2hlXG4gICAgICogQHBhcmFtIHRocm90dGxpbmdDYWNoZUtleVxuICAgICAqL1xuICAgIGFic3RyYWN0IGdldFRocm90dGxpbmdDYWNoZShcbiAgICAgICAgdGhyb3R0bGluZ0NhY2hlS2V5OiBzdHJpbmdcbiAgICApOiBUaHJvdHRsaW5nRW50aXR5IHwgbnVsbDtcblxuICAgIC8qKlxuICAgICAqIHNldCB0aHJvdHRsaW5nIGVudGl0eSB0byB0aGUgcGxhdGZvcm0gY2FjaGVcbiAgICAgKiBAcGFyYW0gdGhyb3R0bGluZ0NhY2hlS2V5XG4gICAgICogQHBhcmFtIHRocm90dGxpbmdDYWNoZVxuICAgICAqL1xuICAgIGFic3RyYWN0IHNldFRocm90dGxpbmdDYWNoZShcbiAgICAgICAgdGhyb3R0bGluZ0NhY2hlS2V5OiBzdHJpbmcsXG4gICAgICAgIHRocm90dGxpbmdDYWNoZTogVGhyb3R0bGluZ0VudGl0eVxuICAgICk6IHZvaWQ7XG5cbiAgICAvKipcbiAgICAgKiBGdW5jdGlvbiB0byByZW1vdmUgYW4gaXRlbSBmcm9tIGNhY2hlIGdpdmVuIGl0cyBrZXkuXG4gICAgICogQHBhcmFtIGtleVxuICAgICAqL1xuICAgIGFic3RyYWN0IHJlbW92ZUl0ZW0oa2V5OiBzdHJpbmcpOiB2b2lkO1xuXG4gICAgLyoqXG4gICAgICogRnVuY3Rpb24gd2hpY2ggcmV0cmlldmVzIGFsbCBjdXJyZW50IGtleXMgZnJvbSB0aGUgY2FjaGUuXG4gICAgICovXG4gICAgYWJzdHJhY3QgZ2V0S2V5cygpOiBzdHJpbmdbXTtcblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHdoaWNoIHJldHJpZXZlcyBhbGwgYWNjb3VudCBrZXlzIGZyb20gdGhlIGNhY2hlXG4gICAgICovXG4gICAgYWJzdHJhY3QgZ2V0QWNjb3VudEtleXMoKTogc3RyaW5nW107XG5cbiAgICAvKipcbiAgICAgKiBGdW5jdGlvbiB3aGljaCByZXRyaWV2ZXMgYWxsIHRva2VuIGtleXMgZnJvbSB0aGUgY2FjaGVcbiAgICAgKi9cbiAgICBhYnN0cmFjdCBnZXRUb2tlbktleXMoKTogVG9rZW5LZXlzO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbGwgdGhlIGFjY291bnRzIGluIHRoZSBjYWNoZSB0aGF0IG1hdGNoIHRoZSBvcHRpb25hbCBmaWx0ZXIuIElmIG5vIGZpbHRlciBpcyBwcm92aWRlZCwgYWxsIGFjY291bnRzIGFyZSByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0gYWNjb3VudEZpbHRlciAtIChPcHRpb25hbCkgZmlsdGVyIHRvIG5hcnJvdyBkb3duIHRoZSBhY2NvdW50cyByZXR1cm5lZFxuICAgICAqIEByZXR1cm5zIEFycmF5IG9mIEFjY291bnRJbmZvIG9iamVjdHMgaW4gY2FjaGVcbiAgICAgKi9cbiAgICBnZXRBbGxBY2NvdW50cyhhY2NvdW50RmlsdGVyPzogQWNjb3VudEZpbHRlcik6IEFjY291bnRJbmZvW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5idWlsZFRlbmFudFByb2ZpbGVzKFxuICAgICAgICAgICAgdGhpcy5nZXRBY2NvdW50c0ZpbHRlcmVkQnkoYWNjb3VudEZpbHRlciB8fCB7fSksXG4gICAgICAgICAgICBhY2NvdW50RmlsdGVyXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBmaXJzdCB0ZW5hbnRlZCBBY2NvdW50SW5mbyBvYmplY3QgZm91bmQgYmFzZWQgb24gcHJvdmlkZWQgZmlsdGVyc1xuICAgICAqL1xuICAgIGdldEFjY291bnRJbmZvRmlsdGVyZWRCeShhY2NvdW50RmlsdGVyOiBBY2NvdW50RmlsdGVyKTogQWNjb3VudEluZm8gfCBudWxsIHtcbiAgICAgICAgY29uc3QgYWxsQWNjb3VudHMgPSB0aGlzLmdldEFsbEFjY291bnRzKGFjY291bnRGaWx0ZXIpO1xuICAgICAgICBpZiAoYWxsQWNjb3VudHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgLy8gSWYgb25lIG9yIG1vcmUgYWNjb3VudHMgYXJlIGZvdW5kLCBwcmlvcml0aXplIGFjY291bnRzIHRoYXQgaGF2ZSBhbiBJRCB0b2tlblxuICAgICAgICAgICAgY29uc3Qgc29ydGVkQWNjb3VudHMgPSBhbGxBY2NvdW50cy5zb3J0KChhY2NvdW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjY291bnQuaWRUb2tlbkNsYWltcyA/IC0xIDogMTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHNvcnRlZEFjY291bnRzWzBdO1xuICAgICAgICB9IGVsc2UgaWYgKGFsbEFjY291bnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgLy8gSWYgb25seSBvbmUgYWNjb3VudCBpcyBmb3VuZCwgcmV0dXJuIGl0IHJlZ2FyZGxlc3Mgb2Ygd2hldGhlciBhIG1hdGNoaW5nIElEIHRva2VuIHdhcyBmb3VuZFxuICAgICAgICAgICAgcmV0dXJuIGFsbEFjY291bnRzWzBdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc2luZ2xlIG1hdGNoaW5nXG4gICAgICogQHBhcmFtIGFjY291bnRGaWx0ZXJcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIGdldEJhc2VBY2NvdW50SW5mbyhhY2NvdW50RmlsdGVyOiBBY2NvdW50RmlsdGVyKTogQWNjb3VudEluZm8gfCBudWxsIHtcbiAgICAgICAgY29uc3QgYWNjb3VudEVudGl0aWVzID0gdGhpcy5nZXRBY2NvdW50c0ZpbHRlcmVkQnkoYWNjb3VudEZpbHRlcik7XG4gICAgICAgIGlmIChhY2NvdW50RW50aXRpZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGFjY291bnRFbnRpdGllc1swXS5nZXRBY2NvdW50SW5mbygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYXRjaGVzIGZpbHRlcmVkIGFjY291bnQgZW50aXRpZXMgd2l0aCBjYWNoZWQgSUQgdG9rZW5zIHRoYXQgbWF0Y2ggdGhlIHRlbmFudCBwcm9maWxlLXNwZWNpZmljIGFjY291bnQgZmlsdGVyc1xuICAgICAqIGFuZCBidWlsZHMgdGhlIGFjY291bnQgaW5mbyBvYmplY3RzIGZyb20gdGhlIG1hdGNoaW5nIElEIHRva2VuJ3MgY2xhaW1zXG4gICAgICogQHBhcmFtIGNhY2hlZEFjY291bnRzXG4gICAgICogQHBhcmFtIGFjY291bnRGaWx0ZXJcbiAgICAgKiBAcmV0dXJucyBBcnJheSBvZiBBY2NvdW50SW5mbyBvYmplY3RzIHRoYXQgbWF0Y2ggYWNjb3VudCBhbmQgdGVuYW50IHByb2ZpbGUgZmlsdGVyc1xuICAgICAqL1xuICAgIHByaXZhdGUgYnVpbGRUZW5hbnRQcm9maWxlcyhcbiAgICAgICAgY2FjaGVkQWNjb3VudHM6IEFjY291bnRFbnRpdHlbXSxcbiAgICAgICAgYWNjb3VudEZpbHRlcj86IEFjY291bnRGaWx0ZXJcbiAgICApOiBBY2NvdW50SW5mb1tdIHtcbiAgICAgICAgcmV0dXJuIGNhY2hlZEFjY291bnRzLmZsYXRNYXAoKGFjY291bnRFbnRpdHkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRlbmFudFByb2ZpbGVzRnJvbUFjY291bnRFbnRpdHkoXG4gICAgICAgICAgICAgICAgYWNjb3VudEVudGl0eSxcbiAgICAgICAgICAgICAgICBhY2NvdW50RmlsdGVyPy50ZW5hbnRJZCxcbiAgICAgICAgICAgICAgICBhY2NvdW50RmlsdGVyXG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFRlbmFudGVkQWNjb3VudEluZm9CeUZpbHRlcihcbiAgICAgICAgYWNjb3VudEluZm86IEFjY291bnRJbmZvLFxuICAgICAgICB0b2tlbktleXM6IFRva2VuS2V5cyxcbiAgICAgICAgdGVuYW50UHJvZmlsZTogVGVuYW50UHJvZmlsZSxcbiAgICAgICAgdGVuYW50UHJvZmlsZUZpbHRlcj86IFRlbmFudFByb2ZpbGVGaWx0ZXJcbiAgICApOiBBY2NvdW50SW5mbyB8IG51bGwge1xuICAgICAgICBsZXQgdGVuYW50ZWRBY2NvdW50SW5mbzogQWNjb3VudEluZm8gfCBudWxsID0gbnVsbDtcbiAgICAgICAgbGV0IGlkVG9rZW5DbGFpbXM6IFRva2VuQ2xhaW1zIHwgdW5kZWZpbmVkO1xuXG4gICAgICAgIGlmICh0ZW5hbnRQcm9maWxlRmlsdGVyKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgIXRoaXMudGVuYW50UHJvZmlsZU1hdGNoZXNGaWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgIHRlbmFudFByb2ZpbGUsXG4gICAgICAgICAgICAgICAgICAgIHRlbmFudFByb2ZpbGVGaWx0ZXJcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGlkVG9rZW4gPSB0aGlzLmdldElkVG9rZW4oXG4gICAgICAgICAgICBhY2NvdW50SW5mbyxcbiAgICAgICAgICAgIHRva2VuS2V5cyxcbiAgICAgICAgICAgIHRlbmFudFByb2ZpbGUudGVuYW50SWRcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoaWRUb2tlbikge1xuICAgICAgICAgICAgaWRUb2tlbkNsYWltcyA9IGV4dHJhY3RUb2tlbkNsYWltcyhcbiAgICAgICAgICAgICAgICBpZFRva2VuLnNlY3JldCxcbiAgICAgICAgICAgICAgICB0aGlzLmNyeXB0b0ltcGwuYmFzZTY0RGVjb2RlXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgIXRoaXMuaWRUb2tlbkNsYWltc01hdGNoVGVuYW50UHJvZmlsZUZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgaWRUb2tlbkNsYWltcyxcbiAgICAgICAgICAgICAgICAgICAgdGVuYW50UHJvZmlsZUZpbHRlclxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIC8vIElEIHRva2VuIHNvdXJjZWQgY2xhaW1zIGRvbid0IG1hdGNoIHNvIHRoaXMgdGVuYW50IHByb2ZpbGUgaXMgbm90IGEgbWF0Y2hcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV4cGFuZCB0ZW5hbnQgcHJvZmlsZSBpbnRvIGFjY291bnQgaW5mbyBiYXNlZCBvbiBtYXRjaGluZyB0ZW5hbnQgcHJvZmlsZSBhbmQgaWYgYXZhaWxhYmxlIG1hdGNoaW5nIElEIHRva2VuIGNsYWltc1xuICAgICAgICB0ZW5hbnRlZEFjY291bnRJbmZvID0gdXBkYXRlQWNjb3VudFRlbmFudFByb2ZpbGVEYXRhKFxuICAgICAgICAgICAgYWNjb3VudEluZm8sXG4gICAgICAgICAgICB0ZW5hbnRQcm9maWxlLFxuICAgICAgICAgICAgaWRUb2tlbkNsYWltcyxcbiAgICAgICAgICAgIGlkVG9rZW4/LnNlY3JldFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiB0ZW5hbnRlZEFjY291bnRJbmZvO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0VGVuYW50UHJvZmlsZXNGcm9tQWNjb3VudEVudGl0eShcbiAgICAgICAgYWNjb3VudEVudGl0eTogQWNjb3VudEVudGl0eSxcbiAgICAgICAgdGFyZ2V0VGVuYW50SWQ/OiBzdHJpbmcsXG4gICAgICAgIHRlbmFudFByb2ZpbGVGaWx0ZXI/OiBUZW5hbnRQcm9maWxlRmlsdGVyXG4gICAgKTogQWNjb3VudEluZm9bXSB7XG4gICAgICAgIGNvbnN0IGFjY291bnRJbmZvID0gYWNjb3VudEVudGl0eS5nZXRBY2NvdW50SW5mbygpO1xuICAgICAgICBsZXQgc2VhcmNoVGVuYW50UHJvZmlsZXM6IE1hcDxzdHJpbmcsIFRlbmFudFByb2ZpbGU+ID1cbiAgICAgICAgICAgIGFjY291bnRJbmZvLnRlbmFudFByb2ZpbGVzIHx8IG5ldyBNYXA8c3RyaW5nLCBUZW5hbnRQcm9maWxlPigpO1xuICAgICAgICBjb25zdCB0b2tlbktleXMgPSB0aGlzLmdldFRva2VuS2V5cygpO1xuXG4gICAgICAgIC8vIElmIGEgdGVuYW50IElEIHdhcyBwcm92aWRlZCwgb25seSByZXR1cm4gdGhlIHRlbmFudCBwcm9maWxlIGZvciB0aGF0IHRlbmFudCBJRCBpZiBpdCBleGlzdHNcbiAgICAgICAgaWYgKHRhcmdldFRlbmFudElkKSB7XG4gICAgICAgICAgICBjb25zdCB0ZW5hbnRQcm9maWxlID0gc2VhcmNoVGVuYW50UHJvZmlsZXMuZ2V0KHRhcmdldFRlbmFudElkKTtcbiAgICAgICAgICAgIGlmICh0ZW5hbnRQcm9maWxlKSB7XG4gICAgICAgICAgICAgICAgLy8gUmVkdWNlIHNlYXJjaCBmaWVsZCB0byBqdXN0IHRoaXMgdGVuYW50IHByb2ZpbGVcbiAgICAgICAgICAgICAgICBzZWFyY2hUZW5hbnRQcm9maWxlcyA9IG5ldyBNYXA8c3RyaW5nLCBUZW5hbnRQcm9maWxlPihbXG4gICAgICAgICAgICAgICAgICAgIFt0YXJnZXRUZW5hbnRJZCwgdGVuYW50UHJvZmlsZV0sXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIE5vIHRlbmFudCBwcm9maWxlIGZvciBzZWFyY2ggdGVuYW50IElELCByZXR1cm4gZW1wdHkgYXJyYXlcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBtYXRjaGluZ1RlbmFudFByb2ZpbGVzOiBBY2NvdW50SW5mb1tdID0gW107XG4gICAgICAgIHNlYXJjaFRlbmFudFByb2ZpbGVzLmZvckVhY2goKHRlbmFudFByb2ZpbGU6IFRlbmFudFByb2ZpbGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRlbmFudGVkQWNjb3VudEluZm8gPSB0aGlzLmdldFRlbmFudGVkQWNjb3VudEluZm9CeUZpbHRlcihcbiAgICAgICAgICAgICAgICBhY2NvdW50SW5mbyxcbiAgICAgICAgICAgICAgICB0b2tlbktleXMsXG4gICAgICAgICAgICAgICAgdGVuYW50UHJvZmlsZSxcbiAgICAgICAgICAgICAgICB0ZW5hbnRQcm9maWxlRmlsdGVyXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKHRlbmFudGVkQWNjb3VudEluZm8pIHtcbiAgICAgICAgICAgICAgICBtYXRjaGluZ1RlbmFudFByb2ZpbGVzLnB1c2godGVuYW50ZWRBY2NvdW50SW5mbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBtYXRjaGluZ1RlbmFudFByb2ZpbGVzO1xuICAgIH1cblxuICAgIHByaXZhdGUgdGVuYW50UHJvZmlsZU1hdGNoZXNGaWx0ZXIoXG4gICAgICAgIHRlbmFudFByb2ZpbGU6IFRlbmFudFByb2ZpbGUsXG4gICAgICAgIHRlbmFudFByb2ZpbGVGaWx0ZXI6IFRlbmFudFByb2ZpbGVGaWx0ZXJcbiAgICApOiBib29sZWFuIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgISF0ZW5hbnRQcm9maWxlRmlsdGVyLmxvY2FsQWNjb3VudElkICYmXG4gICAgICAgICAgICAhdGhpcy5tYXRjaExvY2FsQWNjb3VudElkRnJvbVRlbmFudFByb2ZpbGUoXG4gICAgICAgICAgICAgICAgdGVuYW50UHJvZmlsZSxcbiAgICAgICAgICAgICAgICB0ZW5hbnRQcm9maWxlRmlsdGVyLmxvY2FsQWNjb3VudElkXG4gICAgICAgICAgICApXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgISF0ZW5hbnRQcm9maWxlRmlsdGVyLm5hbWUgJiZcbiAgICAgICAgICAgICEodGVuYW50UHJvZmlsZS5uYW1lID09PSB0ZW5hbnRQcm9maWxlRmlsdGVyLm5hbWUpXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGVuYW50UHJvZmlsZUZpbHRlci5pc0hvbWVUZW5hbnQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgISh0ZW5hbnRQcm9maWxlLmlzSG9tZVRlbmFudCA9PT0gdGVuYW50UHJvZmlsZUZpbHRlci5pc0hvbWVUZW5hbnQpXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpZFRva2VuQ2xhaW1zTWF0Y2hUZW5hbnRQcm9maWxlRmlsdGVyKFxuICAgICAgICBpZFRva2VuQ2xhaW1zOiBUb2tlbkNsYWltcyxcbiAgICAgICAgdGVuYW50UHJvZmlsZUZpbHRlcj86IFRlbmFudFByb2ZpbGVGaWx0ZXJcbiAgICApOiBib29sZWFuIHtcbiAgICAgICAgLy8gVGVuYW50IFByb2ZpbGUgZmlsdGVyaW5nXG4gICAgICAgIGlmICh0ZW5hbnRQcm9maWxlRmlsdGVyKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgISF0ZW5hbnRQcm9maWxlRmlsdGVyLmxvY2FsQWNjb3VudElkICYmXG4gICAgICAgICAgICAgICAgIXRoaXMubWF0Y2hMb2NhbEFjY291bnRJZEZyb21Ub2tlbkNsYWltcyhcbiAgICAgICAgICAgICAgICAgICAgaWRUb2tlbkNsYWltcyxcbiAgICAgICAgICAgICAgICAgICAgdGVuYW50UHJvZmlsZUZpbHRlci5sb2NhbEFjY291bnRJZFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICEhdGVuYW50UHJvZmlsZUZpbHRlci5sb2dpbkhpbnQgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5tYXRjaExvZ2luSGludEZyb21Ub2tlbkNsYWltcyhcbiAgICAgICAgICAgICAgICAgICAgaWRUb2tlbkNsYWltcyxcbiAgICAgICAgICAgICAgICAgICAgdGVuYW50UHJvZmlsZUZpbHRlci5sb2dpbkhpbnRcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhIXRlbmFudFByb2ZpbGVGaWx0ZXIudXNlcm5hbWUgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5tYXRjaFVzZXJuYW1lKFxuICAgICAgICAgICAgICAgICAgICBpZFRva2VuQ2xhaW1zLnByZWZlcnJlZF91c2VybmFtZSxcbiAgICAgICAgICAgICAgICAgICAgdGVuYW50UHJvZmlsZUZpbHRlci51c2VybmFtZVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICEhdGVuYW50UHJvZmlsZUZpbHRlci5uYW1lICYmXG4gICAgICAgICAgICAgICAgIXRoaXMubWF0Y2hOYW1lKGlkVG9rZW5DbGFpbXMsIHRlbmFudFByb2ZpbGVGaWx0ZXIubmFtZSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICEhdGVuYW50UHJvZmlsZUZpbHRlci5zaWQgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5tYXRjaFNpZChpZFRva2VuQ2xhaW1zLCB0ZW5hbnRQcm9maWxlRmlsdGVyLnNpZClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHNhdmVzIGEgY2FjaGUgcmVjb3JkXG4gICAgICogQHBhcmFtIGNhY2hlUmVjb3JkIHtDYWNoZVJlY29yZH1cbiAgICAgKiBAcGFyYW0gc3RvcmVJbkNhY2hlIHs/U3RvcmVJbkNhY2hlfVxuICAgICAqIEBwYXJhbSBjb3JyZWxhdGlvbklkIHs/c3RyaW5nfSBjb3JyZWxhdGlvbiBpZFxuICAgICAqL1xuICAgIGFzeW5jIHNhdmVDYWNoZVJlY29yZChcbiAgICAgICAgY2FjaGVSZWNvcmQ6IENhY2hlUmVjb3JkLFxuICAgICAgICBjb3JyZWxhdGlvbklkOiBzdHJpbmcsXG4gICAgICAgIHN0b3JlSW5DYWNoZT86IFN0b3JlSW5DYWNoZVxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoIWNhY2hlUmVjb3JkKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZENhY2hlUmVjb3JkXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICghIWNhY2hlUmVjb3JkLmFjY291bnQpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNldEFjY291bnQoY2FjaGVSZWNvcmQuYWNjb3VudCwgY29ycmVsYXRpb25JZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghIWNhY2hlUmVjb3JkLmlkVG9rZW4gJiYgc3RvcmVJbkNhY2hlPy5pZFRva2VuICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0SWRUb2tlbkNyZWRlbnRpYWwoXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlUmVjb3JkLmlkVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIGNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgISFjYWNoZVJlY29yZC5hY2Nlc3NUb2tlbiAmJlxuICAgICAgICAgICAgICAgIHN0b3JlSW5DYWNoZT8uYWNjZXNzVG9rZW4gIT09IGZhbHNlXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBY2Nlc3NUb2tlbihcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVSZWNvcmQuYWNjZXNzVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIGNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgISFjYWNoZVJlY29yZC5yZWZyZXNoVG9rZW4gJiZcbiAgICAgICAgICAgICAgICBzdG9yZUluQ2FjaGU/LnJlZnJlc2hUb2tlbiAhPT0gZmFsc2VcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0UmVmcmVzaFRva2VuQ3JlZGVudGlhbChcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVSZWNvcmQucmVmcmVzaFRva2VuLFxuICAgICAgICAgICAgICAgICAgICBjb3JyZWxhdGlvbklkXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCEhY2FjaGVSZWNvcmQuYXBwTWV0YWRhdGEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEFwcE1ldGFkYXRhKGNhY2hlUmVjb3JkLmFwcE1ldGFkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZTogdW5rbm93bikge1xuICAgICAgICAgICAgdGhpcy5jb21tb25Mb2dnZXI/LmVycm9yKGBDYWNoZU1hbmFnZXIuc2F2ZUNhY2hlUmVjb3JkOiBmYWlsZWRgKTtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1vbkxvZ2dlcj8uZXJyb3JQaWkoXG4gICAgICAgICAgICAgICAgICAgIGBDYWNoZU1hbmFnZXIuc2F2ZUNhY2hlUmVjb3JkOiAke2UubWVzc2FnZX1gLFxuICAgICAgICAgICAgICAgICAgICBjb3JyZWxhdGlvbklkXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgZS5uYW1lID09PSBcIlF1b3RhRXhjZWVkZWRFcnJvclwiIHx8XG4gICAgICAgICAgICAgICAgICAgIGUubmFtZSA9PT0gXCJOU19FUlJPUl9ET01fUVVPVEFfUkVBQ0hFRFwiIHx8XG4gICAgICAgICAgICAgICAgICAgIGUubWVzc2FnZS5pbmNsdWRlcyhcImV4Y2VlZGVkIHRoZSBxdW90YVwiKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbW1vbkxvZ2dlcj8uZXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICAgICBgQ2FjaGVNYW5hZ2VyLnNhdmVDYWNoZVJlY29yZDogZXhjZWVkZWQgc3RvcmFnZSBxdW90YWAsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3JyZWxhdGlvbklkXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBDYWNoZUVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgQ2FjaGVFcnJvckNvZGVzLmNhY2hlUXVvdGFFeGNlZWRlZEVycm9yQ29kZVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBDYWNoZUVycm9yKGUubmFtZSwgZS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbW9uTG9nZ2VyPy5lcnJvclBpaShcbiAgICAgICAgICAgICAgICAgICAgYENhY2hlTWFuYWdlci5zYXZlQ2FjaGVSZWNvcmQ6ICR7ZX1gLFxuICAgICAgICAgICAgICAgICAgICBjb3JyZWxhdGlvbklkXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ2FjaGVFcnJvcihDYWNoZUVycm9yQ29kZXMuY2FjaGVVbmtub3duRXJyb3JDb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHNhdmVzIGFjY2VzcyB0b2tlbiBjcmVkZW50aWFsXG4gICAgICogQHBhcmFtIGNyZWRlbnRpYWxcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIHNhdmVBY2Nlc3NUb2tlbihcbiAgICAgICAgY3JlZGVudGlhbDogQWNjZXNzVG9rZW5FbnRpdHksXG4gICAgICAgIGNvcnJlbGF0aW9uSWQ6IHN0cmluZ1xuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbkZpbHRlcjogQ3JlZGVudGlhbEZpbHRlciA9IHtcbiAgICAgICAgICAgIGNsaWVudElkOiBjcmVkZW50aWFsLmNsaWVudElkLFxuICAgICAgICAgICAgY3JlZGVudGlhbFR5cGU6IGNyZWRlbnRpYWwuY3JlZGVudGlhbFR5cGUsXG4gICAgICAgICAgICBlbnZpcm9ubWVudDogY3JlZGVudGlhbC5lbnZpcm9ubWVudCxcbiAgICAgICAgICAgIGhvbWVBY2NvdW50SWQ6IGNyZWRlbnRpYWwuaG9tZUFjY291bnRJZCxcbiAgICAgICAgICAgIHJlYWxtOiBjcmVkZW50aWFsLnJlYWxtLFxuICAgICAgICAgICAgdG9rZW5UeXBlOiBjcmVkZW50aWFsLnRva2VuVHlwZSxcbiAgICAgICAgICAgIHJlcXVlc3RlZENsYWltc0hhc2g6IGNyZWRlbnRpYWwucmVxdWVzdGVkQ2xhaW1zSGFzaCxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCB0b2tlbktleXMgPSB0aGlzLmdldFRva2VuS2V5cygpO1xuICAgICAgICBjb25zdCBjdXJyZW50U2NvcGVzID0gU2NvcGVTZXQuZnJvbVN0cmluZyhjcmVkZW50aWFsLnRhcmdldCk7XG5cbiAgICAgICAgY29uc3QgcmVtb3ZlZEFjY2Vzc1Rva2VuczogQXJyYXk8UHJvbWlzZTx2b2lkPj4gPSBbXTtcbiAgICAgICAgdG9rZW5LZXlzLmFjY2Vzc1Rva2VuLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICF0aGlzLmFjY2Vzc1Rva2VuS2V5TWF0Y2hlc0ZpbHRlcihrZXksIGFjY2Vzc1Rva2VuRmlsdGVyLCBmYWxzZSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgdG9rZW5FbnRpdHkgPSB0aGlzLmdldEFjY2Vzc1Rva2VuQ3JlZGVudGlhbChrZXkpO1xuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgdG9rZW5FbnRpdHkgJiZcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWRlbnRpYWxNYXRjaGVzRmlsdGVyKHRva2VuRW50aXR5LCBhY2Nlc3NUb2tlbkZpbHRlcilcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuU2NvcGVTZXQgPSBTY29wZVNldC5mcm9tU3RyaW5nKHRva2VuRW50aXR5LnRhcmdldCk7XG4gICAgICAgICAgICAgICAgaWYgKHRva2VuU2NvcGVTZXQuaW50ZXJzZWN0aW5nU2NvcGVTZXRzKGN1cnJlbnRTY29wZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZWRBY2Nlc3NUb2tlbnMucHVzaCh0aGlzLnJlbW92ZUFjY2Vzc1Rva2VuKGtleSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHJlbW92ZWRBY2Nlc3NUb2tlbnMpO1xuICAgICAgICBhd2FpdCB0aGlzLnNldEFjY2Vzc1Rva2VuQ3JlZGVudGlhbChjcmVkZW50aWFsLCBjb3JyZWxhdGlvbklkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSBhY2NvdW50IGVudGl0aWVzIG1hdGNoaW5nIGFsbCBwcm92aWRlZCB0ZW5hbnQtYWdub3N0aWMgZmlsdGVyczsgaWYgbm8gZmlsdGVyIGlzIHNldCwgZ2V0IGFsbCBhY2NvdW50IGVudGl0aWVzIGluIHRoZSBjYWNoZVxuICAgICAqIE5vdCBjaGVja2luZyBmb3IgY2FzaW5nIGFzIGtleXMgYXJlIGFsbCBnZW5lcmF0ZWQgaW4gbG93ZXIgY2FzZSwgcmVtZW1iZXIgdG8gY29udmVydCB0byBsb3dlciBjYXNlIGlmIG9iamVjdCBwcm9wZXJ0aWVzIGFyZSBjb21wYXJlZFxuICAgICAqIEBwYXJhbSBhY2NvdW50RmlsdGVyIC0gQW4gb2JqZWN0IGNvbnRhaW5pbmcgQWNjb3VudCBwcm9wZXJ0aWVzIHRvIGZpbHRlciBieVxuICAgICAqL1xuICAgIGdldEFjY291bnRzRmlsdGVyZWRCeShhY2NvdW50RmlsdGVyOiBBY2NvdW50RmlsdGVyKTogQWNjb3VudEVudGl0eVtdIHtcbiAgICAgICAgY29uc3QgYWxsQWNjb3VudEtleXMgPSB0aGlzLmdldEFjY291bnRLZXlzKCk7XG4gICAgICAgIGNvbnN0IG1hdGNoaW5nQWNjb3VudHM6IEFjY291bnRFbnRpdHlbXSA9IFtdO1xuICAgICAgICBhbGxBY2NvdW50S2V5cy5mb3JFYWNoKChjYWNoZUtleSkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQWNjb3VudEtleShjYWNoZUtleSwgYWNjb3VudEZpbHRlci5ob21lQWNjb3VudElkKSkge1xuICAgICAgICAgICAgICAgIC8vIERvbid0IHBhcnNlIHZhbHVlIGlmIHRoZSBrZXkgZG9lc24ndCBtYXRjaCB0aGUgYWNjb3VudCBmaWx0ZXJzXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBlbnRpdHk6IEFjY291bnRFbnRpdHkgfCBudWxsID0gdGhpcy5nZXRBY2NvdW50KFxuICAgICAgICAgICAgICAgIGNhY2hlS2V5LFxuICAgICAgICAgICAgICAgIHRoaXMuY29tbW9uTG9nZ2VyXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyBNYXRjaCBiYXNlIGFjY291bnQgZmllbGRzXG5cbiAgICAgICAgICAgIGlmICghZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgISFhY2NvdW50RmlsdGVyLmhvbWVBY2NvdW50SWQgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5tYXRjaEhvbWVBY2NvdW50SWQoZW50aXR5LCBhY2NvdW50RmlsdGVyLmhvbWVBY2NvdW50SWQpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhIWFjY291bnRGaWx0ZXIudXNlcm5hbWUgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5tYXRjaFVzZXJuYW1lKGVudGl0eS51c2VybmFtZSwgYWNjb3VudEZpbHRlci51c2VybmFtZSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICEhYWNjb3VudEZpbHRlci5lbnZpcm9ubWVudCAmJlxuICAgICAgICAgICAgICAgICF0aGlzLm1hdGNoRW52aXJvbm1lbnQoZW50aXR5LCBhY2NvdW50RmlsdGVyLmVudmlyb25tZW50KVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgISFhY2NvdW50RmlsdGVyLnJlYWxtICYmXG4gICAgICAgICAgICAgICAgIXRoaXMubWF0Y2hSZWFsbShlbnRpdHksIGFjY291bnRGaWx0ZXIucmVhbG0pXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhIWFjY291bnRGaWx0ZXIubmF0aXZlQWNjb3VudElkICYmXG4gICAgICAgICAgICAgICAgIXRoaXMubWF0Y2hOYXRpdmVBY2NvdW50SWQoXG4gICAgICAgICAgICAgICAgICAgIGVudGl0eSxcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudEZpbHRlci5uYXRpdmVBY2NvdW50SWRcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhIWFjY291bnRGaWx0ZXIuYXV0aG9yaXR5VHlwZSAmJlxuICAgICAgICAgICAgICAgICF0aGlzLm1hdGNoQXV0aG9yaXR5VHlwZShlbnRpdHksIGFjY291bnRGaWx0ZXIuYXV0aG9yaXR5VHlwZSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSWYgYXQgbGVhc3Qgb25lIHRlbmFudCBwcm9maWxlIG1hdGNoZXMgdGhlIHRlbmFudCBwcm9maWxlIGZpbHRlciwgYWRkIHRoZSBhY2NvdW50IHRvIHRoZSBsaXN0IG9mIG1hdGNoaW5nIGFjY291bnRzXG4gICAgICAgICAgICBjb25zdCB0ZW5hbnRQcm9maWxlRmlsdGVyOiBUZW5hbnRQcm9maWxlRmlsdGVyID0ge1xuICAgICAgICAgICAgICAgIGxvY2FsQWNjb3VudElkOiBhY2NvdW50RmlsdGVyPy5sb2NhbEFjY291bnRJZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBhY2NvdW50RmlsdGVyPy5uYW1lLFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc3QgbWF0Y2hpbmdUZW5hbnRQcm9maWxlcyA9IGVudGl0eS50ZW5hbnRQcm9maWxlcz8uZmlsdGVyKFxuICAgICAgICAgICAgICAgICh0ZW5hbnRQcm9maWxlOiBUZW5hbnRQcm9maWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRlbmFudFByb2ZpbGVNYXRjaGVzRmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgdGVuYW50UHJvZmlsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbmFudFByb2ZpbGVGaWx0ZXJcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAobWF0Y2hpbmdUZW5hbnRQcm9maWxlcyAmJiBtYXRjaGluZ1RlbmFudFByb2ZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIC8vIE5vIHRlbmFudCBwcm9maWxlIGZvciB0aGlzIGFjY291bnQgbWF0Y2hlcyBmaWx0ZXIsIGRvbid0IGFkZCB0byBsaXN0IG9mIG1hdGNoaW5nIGFjY291bnRzXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBtYXRjaGluZ0FjY291bnRzLnB1c2goZW50aXR5KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIG1hdGNoaW5nQWNjb3VudHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBrZXkgbWF0Y2hlcyBvdXIgYWNjb3VudCBrZXkgc2NoZW1hLiBBbHNvIG1hdGNoZXMgaG9tZUFjY291bnRJZCBhbmQvb3IgdGVuYW50SWQgaWYgcHJvdmlkZWRcbiAgICAgKiBAcGFyYW0ga2V5XG4gICAgICogQHBhcmFtIGhvbWVBY2NvdW50SWRcbiAgICAgKiBAcGFyYW0gdGVuYW50SWRcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIGlzQWNjb3VudEtleShcbiAgICAgICAga2V5OiBzdHJpbmcsXG4gICAgICAgIGhvbWVBY2NvdW50SWQ/OiBzdHJpbmcsXG4gICAgICAgIHRlbmFudElkPzogc3RyaW5nXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIGlmIChrZXkuc3BsaXQoU2VwYXJhdG9ycy5DQUNIRV9LRVlfU0VQQVJBVE9SKS5sZW5ndGggPCAzKSB7XG4gICAgICAgICAgICAvLyBBY2NvdW50IGNhY2hlIGtleXMgY29udGFpbiAzIGl0ZW1zIHNlcGFyYXRlZCBieSAnLScgKGVhY2ggaXRlbSBtYXkgYWxzbyBjb250YWluICctJylcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGhvbWVBY2NvdW50SWQgJiZcbiAgICAgICAgICAgICFrZXkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhob21lQWNjb3VudElkLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRlbmFudElkICYmICFrZXkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh0ZW5hbnRJZC50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRG8gbm90IGNoZWNrIGVudmlyb25tZW50IGFzIGFsaWFzaW5nIGNhbiBjYXVzZSBmYWxzZSBuZWdhdGl2ZXNcblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIGtleSBtYXRjaGVzIG91ciBjcmVkZW50aWFsIGtleSBzY2hlbWEuXG4gICAgICogQHBhcmFtIGtleVxuICAgICAqL1xuICAgIGlzQ3JlZGVudGlhbEtleShrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoa2V5LnNwbGl0KFNlcGFyYXRvcnMuQ0FDSEVfS0VZX1NFUEFSQVRPUikubGVuZ3RoIDwgNikge1xuICAgICAgICAgICAgLy8gQ3JlZGVudGlhbCBjYWNoZSBrZXlzIGNvbnRhaW4gNiBpdGVtcyBzZXBhcmF0ZWQgYnkgJy0nIChlYWNoIGl0ZW0gbWF5IGFsc28gY29udGFpbiAnLScpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb3dlckNhc2VLZXkgPSBrZXkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgLy8gQ3JlZGVudGlhbCBrZXlzIG11c3QgaW5kaWNhdGUgd2hhdCBjcmVkZW50aWFsIHR5cGUgdGhleSByZXByZXNlbnRcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgbG93ZXJDYXNlS2V5LmluZGV4T2YoQ3JlZGVudGlhbFR5cGUuSURfVE9LRU4udG9Mb3dlckNhc2UoKSkgPT09XG4gICAgICAgICAgICAgICAgLTEgJiZcbiAgICAgICAgICAgIGxvd2VyQ2FzZUtleS5pbmRleE9mKENyZWRlbnRpYWxUeXBlLkFDQ0VTU19UT0tFTi50b0xvd2VyQ2FzZSgpKSA9PT1cbiAgICAgICAgICAgICAgICAtMSAmJlxuICAgICAgICAgICAgbG93ZXJDYXNlS2V5LmluZGV4T2YoXG4gICAgICAgICAgICAgICAgQ3JlZGVudGlhbFR5cGUuQUNDRVNTX1RPS0VOX1dJVEhfQVVUSF9TQ0hFTUUudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgKSA9PT0gLTEgJiZcbiAgICAgICAgICAgIGxvd2VyQ2FzZUtleS5pbmRleE9mKENyZWRlbnRpYWxUeXBlLlJFRlJFU0hfVE9LRU4udG9Mb3dlckNhc2UoKSkgPT09XG4gICAgICAgICAgICAgICAgLTFcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBsb3dlckNhc2VLZXkuaW5kZXhPZihDcmVkZW50aWFsVHlwZS5SRUZSRVNIX1RPS0VOLnRvTG93ZXJDYXNlKCkpID5cbiAgICAgICAgICAgIC0xXG4gICAgICAgICkge1xuICAgICAgICAgICAgLy8gUmVmcmVzaCB0b2tlbnMgbXVzdCBjb250YWluIHRoZSBjbGllbnQgaWQgb3IgZmFtaWx5IGlkXG4gICAgICAgICAgICBjb25zdCBjbGllbnRJZFZhbGlkYXRpb24gPSBgJHtDcmVkZW50aWFsVHlwZS5SRUZSRVNIX1RPS0VOfSR7U2VwYXJhdG9ycy5DQUNIRV9LRVlfU0VQQVJBVE9SfSR7dGhpcy5jbGllbnRJZH0ke1NlcGFyYXRvcnMuQ0FDSEVfS0VZX1NFUEFSQVRPUn1gO1xuICAgICAgICAgICAgY29uc3QgZmFtaWx5SWRWYWxpZGF0aW9uID0gYCR7Q3JlZGVudGlhbFR5cGUuUkVGUkVTSF9UT0tFTn0ke1NlcGFyYXRvcnMuQ0FDSEVfS0VZX1NFUEFSQVRPUn0ke1RIRV9GQU1JTFlfSUR9JHtTZXBhcmF0b3JzLkNBQ0hFX0tFWV9TRVBBUkFUT1J9YDtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBsb3dlckNhc2VLZXkuaW5kZXhPZihjbGllbnRJZFZhbGlkYXRpb24udG9Mb3dlckNhc2UoKSkgPT09IC0xICYmXG4gICAgICAgICAgICAgICAgbG93ZXJDYXNlS2V5LmluZGV4T2YoZmFtaWx5SWRWYWxpZGF0aW9uLnRvTG93ZXJDYXNlKCkpID09PSAtMVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGxvd2VyQ2FzZUtleS5pbmRleE9mKHRoaXMuY2xpZW50SWQudG9Mb3dlckNhc2UoKSkgPT09IC0xKSB7XG4gICAgICAgICAgICAvLyBUb2tlbnMgbXVzdCBjb250YWluIHRoZSBjbGllbnRJZFxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgZ2l2ZW4gY3JlZGVudGlhbCBlbnRpdHkgbWF0Y2hlcyB0aGUgZmlsdGVyXG4gICAgICogQHBhcmFtIGVudGl0eVxuICAgICAqIEBwYXJhbSBmaWx0ZXJcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIGNyZWRlbnRpYWxNYXRjaGVzRmlsdGVyKFxuICAgICAgICBlbnRpdHk6IFZhbGlkQ3JlZGVudGlhbFR5cGUsXG4gICAgICAgIGZpbHRlcjogQ3JlZGVudGlhbEZpbHRlclxuICAgICk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoISFmaWx0ZXIuY2xpZW50SWQgJiYgIXRoaXMubWF0Y2hDbGllbnRJZChlbnRpdHksIGZpbHRlci5jbGllbnRJZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICEhZmlsdGVyLnVzZXJBc3NlcnRpb25IYXNoICYmXG4gICAgICAgICAgICAhdGhpcy5tYXRjaFVzZXJBc3NlcnRpb25IYXNoKGVudGl0eSwgZmlsdGVyLnVzZXJBc3NlcnRpb25IYXNoKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qXG4gICAgICAgICAqIGhvbWVBY2NvdW50SWQgY2FuIGJlIHVuZGVmaW5lZCwgYW5kIHdlIHdhbnQgdG8gZmlsdGVyIG91dCBjYWNoZWQgaXRlbXMgdGhhdCBoYXZlIGEgaG9tZUFjY291bnRJZCBvZiBcIlwiXG4gICAgICAgICAqIGJlY2F1c2Ugd2UgZG9uJ3Qgd2FudCBhIGNsaWVudF9jcmVkZW50aWFsIHJlcXVlc3QgdG8gcmV0dXJuIGEgY2FjaGVkIHRva2VuIHRoYXQgaGFzIGEgaG9tZUFjY291bnRJZFxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgdHlwZW9mIGZpbHRlci5ob21lQWNjb3VudElkID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgICAgICAhdGhpcy5tYXRjaEhvbWVBY2NvdW50SWQoZW50aXR5LCBmaWx0ZXIuaG9tZUFjY291bnRJZClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhIWZpbHRlci5lbnZpcm9ubWVudCAmJlxuICAgICAgICAgICAgIXRoaXMubWF0Y2hFbnZpcm9ubWVudChlbnRpdHksIGZpbHRlci5lbnZpcm9ubWVudClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoISFmaWx0ZXIucmVhbG0gJiYgIXRoaXMubWF0Y2hSZWFsbShlbnRpdHksIGZpbHRlci5yZWFsbSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICEhZmlsdGVyLmNyZWRlbnRpYWxUeXBlICYmXG4gICAgICAgICAgICAhdGhpcy5tYXRjaENyZWRlbnRpYWxUeXBlKGVudGl0eSwgZmlsdGVyLmNyZWRlbnRpYWxUeXBlKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghIWZpbHRlci5mYW1pbHlJZCAmJiAhdGhpcy5tYXRjaEZhbWlseUlkKGVudGl0eSwgZmlsdGVyLmZhbWlseUlkKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLypcbiAgICAgICAgICogaWRUb2tlbnMgZG8gbm90IGhhdmUgXCJ0YXJnZXRcIiwgdGFyZ2V0IHNwZWNpZmljIHJlZnJlc2hUb2tlbnMgZG8gZXhpc3QgZm9yIHNvbWUgdHlwZXMgb2YgYXV0aGVudGljYXRpb25cbiAgICAgICAgICogUmVzb3VyY2Ugc3BlY2lmaWMgcmVmcmVzaCB0b2tlbnMgY2FzZSB3aWxsIGJlIGFkZGVkIHdoZW4gdGhlIHN1cHBvcnQgaXMgZGVlbWVkIG5lY2Vzc2FyeVxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKCEhZmlsdGVyLnRhcmdldCAmJiAhdGhpcy5tYXRjaFRhcmdldChlbnRpdHksIGZpbHRlci50YXJnZXQpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiByZXF1ZXN0IE9SIGNhY2hlZCBlbnRpdHkgaGFzIHJlcXVlc3RlZCBDbGFpbXMgSGFzaCwgY2hlY2sgaWYgdGhleSBtYXRjaFxuICAgICAgICBpZiAoZmlsdGVyLnJlcXVlc3RlZENsYWltc0hhc2ggfHwgZW50aXR5LnJlcXVlc3RlZENsYWltc0hhc2gpIHtcbiAgICAgICAgICAgIC8vIERvbid0IG1hdGNoIGlmIGVpdGhlciBpcyB1bmRlZmluZWQgb3IgdGhleSBhcmUgZGlmZmVyZW50XG4gICAgICAgICAgICBpZiAoZW50aXR5LnJlcXVlc3RlZENsYWltc0hhc2ggIT09IGZpbHRlci5yZXF1ZXN0ZWRDbGFpbXNIYXNoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWNjZXNzIFRva2VuIHdpdGggQXV0aCBTY2hlbWUgc3BlY2lmaWMgbWF0Y2hpbmdcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgZW50aXR5LmNyZWRlbnRpYWxUeXBlID09PVxuICAgICAgICAgICAgQ3JlZGVudGlhbFR5cGUuQUNDRVNTX1RPS0VOX1dJVEhfQVVUSF9TQ0hFTUVcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgISFmaWx0ZXIudG9rZW5UeXBlICYmXG4gICAgICAgICAgICAgICAgIXRoaXMubWF0Y2hUb2tlblR5cGUoZW50aXR5LCBmaWx0ZXIudG9rZW5UeXBlKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBLZXlJZCAoc3NoS2lkKSBpbiByZXF1ZXN0IG11c3QgbWF0Y2ggY2FjaGVkIFNTSCBjZXJ0aWZpY2F0ZSBrZXlJZCBiZWNhdXNlIFNTSCBjZXJ0IGlzIGJvdW5kIHRvIGEgc3BlY2lmaWMga2V5XG4gICAgICAgICAgICBpZiAoZmlsdGVyLnRva2VuVHlwZSA9PT0gQXV0aGVudGljYXRpb25TY2hlbWUuU1NIKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbHRlci5rZXlJZCAmJiAhdGhpcy5tYXRjaEtleUlkKGVudGl0eSwgZmlsdGVyLmtleUlkKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcmV0cmlldmUgYXBwTWV0YWRhdGEgbWF0Y2hpbmcgYWxsIHByb3ZpZGVkIGZpbHRlcnM7IGlmIG5vIGZpbHRlciBpcyBzZXQsIGdldCBhbGwgYXBwTWV0YWRhdGFcbiAgICAgKiBAcGFyYW0gZmlsdGVyXG4gICAgICovXG4gICAgZ2V0QXBwTWV0YWRhdGFGaWx0ZXJlZEJ5KGZpbHRlcjogQXBwTWV0YWRhdGFGaWx0ZXIpOiBBcHBNZXRhZGF0YUNhY2hlIHtcbiAgICAgICAgY29uc3QgYWxsQ2FjaGVLZXlzID0gdGhpcy5nZXRLZXlzKCk7XG4gICAgICAgIGNvbnN0IG1hdGNoaW5nQXBwTWV0YWRhdGE6IEFwcE1ldGFkYXRhQ2FjaGUgPSB7fTtcblxuICAgICAgICBhbGxDYWNoZUtleXMuZm9yRWFjaCgoY2FjaGVLZXkpID0+IHtcbiAgICAgICAgICAgIC8vIGRvbid0IHBhcnNlIGFueSBub24tYXBwTWV0YWRhdGEgdHlwZSBjYWNoZSBlbnRpdGllc1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQXBwTWV0YWRhdGEoY2FjaGVLZXkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBdHRlbXB0IHJldHJpZXZhbFxuICAgICAgICAgICAgY29uc3QgZW50aXR5ID0gdGhpcy5nZXRBcHBNZXRhZGF0YShjYWNoZUtleSk7XG5cbiAgICAgICAgICAgIGlmICghZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgISFmaWx0ZXIuZW52aXJvbm1lbnQgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5tYXRjaEVudmlyb25tZW50KGVudGl0eSwgZmlsdGVyLmVudmlyb25tZW50KVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgISFmaWx0ZXIuY2xpZW50SWQgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5tYXRjaENsaWVudElkKGVudGl0eSwgZmlsdGVyLmNsaWVudElkKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBtYXRjaGluZ0FwcE1ldGFkYXRhW2NhY2hlS2V5XSA9IGVudGl0eTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIG1hdGNoaW5nQXBwTWV0YWRhdGE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcmV0cmlldmUgYXV0aG9yaXR5TWV0YWRhdGEgdGhhdCBjb250YWlucyBhIG1hdGNoaW5nIGFsaWFzXG4gICAgICogQHBhcmFtIGZpbHRlclxuICAgICAqL1xuICAgIGdldEF1dGhvcml0eU1ldGFkYXRhQnlBbGlhcyhob3N0OiBzdHJpbmcpOiBBdXRob3JpdHlNZXRhZGF0YUVudGl0eSB8IG51bGwge1xuICAgICAgICBjb25zdCBhbGxDYWNoZUtleXMgPSB0aGlzLmdldEF1dGhvcml0eU1ldGFkYXRhS2V5cygpO1xuICAgICAgICBsZXQgbWF0Y2hlZEVudGl0eSA9IG51bGw7XG5cbiAgICAgICAgYWxsQ2FjaGVLZXlzLmZvckVhY2goKGNhY2hlS2V5KSA9PiB7XG4gICAgICAgICAgICAvLyBkb24ndCBwYXJzZSBhbnkgbm9uLWF1dGhvcml0eU1ldGFkYXRhIHR5cGUgY2FjaGUgZW50aXRpZXNcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhdGhpcy5pc0F1dGhvcml0eU1ldGFkYXRhKGNhY2hlS2V5KSB8fFxuICAgICAgICAgICAgICAgIGNhY2hlS2V5LmluZGV4T2YodGhpcy5jbGllbnRJZCkgPT09IC0xXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEF0dGVtcHQgcmV0cmlldmFsXG4gICAgICAgICAgICBjb25zdCBlbnRpdHkgPSB0aGlzLmdldEF1dGhvcml0eU1ldGFkYXRhKGNhY2hlS2V5KTtcblxuICAgICAgICAgICAgaWYgKCFlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChlbnRpdHkuYWxpYXNlcy5pbmRleE9mKGhvc3QpID09PSAtMSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbWF0Y2hlZEVudGl0eSA9IGVudGl0eTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIG1hdGNoZWRFbnRpdHk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhbGwgYWNjb3VudHMgYW5kIHJlbGF0ZWQgdG9rZW5zIGZyb20gY2FjaGUuXG4gICAgICovXG4gICAgYXN5bmMgcmVtb3ZlQWxsQWNjb3VudHMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGFsbEFjY291bnRLZXlzID0gdGhpcy5nZXRBY2NvdW50S2V5cygpO1xuICAgICAgICBjb25zdCByZW1vdmVkQWNjb3VudHM6IEFycmF5PFByb21pc2U8dm9pZD4+ID0gW107XG5cbiAgICAgICAgYWxsQWNjb3VudEtleXMuZm9yRWFjaCgoY2FjaGVLZXkpID0+IHtcbiAgICAgICAgICAgIHJlbW92ZWRBY2NvdW50cy5wdXNoKHRoaXMucmVtb3ZlQWNjb3VudChjYWNoZUtleSkpO1xuICAgICAgICB9KTtcblxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChyZW1vdmVkQWNjb3VudHMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIGFjY291bnQgYW5kIHJlbGF0ZWQgdG9rZW5zIGZvciBhIGdpdmVuIGFjY291bnQga2V5XG4gICAgICogQHBhcmFtIGFjY291bnRcbiAgICAgKi9cbiAgICBhc3luYyByZW1vdmVBY2NvdW50KGFjY291bnRLZXk6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBhY2NvdW50ID0gdGhpcy5nZXRBY2NvdW50KGFjY291bnRLZXksIHRoaXMuY29tbW9uTG9nZ2VyKTtcbiAgICAgICAgaWYgKCFhY2NvdW50KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5yZW1vdmVBY2NvdW50Q29udGV4dChhY2NvdW50KTtcbiAgICAgICAgdGhpcy5yZW1vdmVJdGVtKGFjY291bnRLZXkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgY3JlZGVudGlhbHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBwcm92aWRlZCBhY2NvdW50XG4gICAgICogQHBhcmFtIGFjY291bnRcbiAgICAgKi9cbiAgICBhc3luYyByZW1vdmVBY2NvdW50Q29udGV4dChhY2NvdW50OiBBY2NvdW50RW50aXR5KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGFsbFRva2VuS2V5cyA9IHRoaXMuZ2V0VG9rZW5LZXlzKCk7XG4gICAgICAgIGNvbnN0IGFjY291bnRJZCA9IGFjY291bnQuZ2VuZXJhdGVBY2NvdW50SWQoKTtcbiAgICAgICAgY29uc3QgcmVtb3ZlZENyZWRlbnRpYWxzOiBBcnJheTxQcm9taXNlPHZvaWQ+PiA9IFtdO1xuXG4gICAgICAgIGFsbFRva2VuS2V5cy5pZFRva2VuLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgaWYgKGtleS5pbmRleE9mKGFjY291bnRJZCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUlkVG9rZW4oa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgYWxsVG9rZW5LZXlzLmFjY2Vzc1Rva2VuLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgaWYgKGtleS5pbmRleE9mKGFjY291bnRJZCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZW1vdmVkQ3JlZGVudGlhbHMucHVzaCh0aGlzLnJlbW92ZUFjY2Vzc1Rva2VuKGtleSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBhbGxUb2tlbktleXMucmVmcmVzaFRva2VuLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgaWYgKGtleS5pbmRleE9mKGFjY291bnRJZCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVJlZnJlc2hUb2tlbihrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChyZW1vdmVkQ3JlZGVudGlhbHMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgYSBib29sZWFuIGlmIHRoZSBnaXZlbiBjcmVkZW50aWFsIGlzIHJlbW92ZWRcbiAgICAgKiBAcGFyYW0gY3JlZGVudGlhbFxuICAgICAqL1xuICAgIGFzeW5jIHJlbW92ZUFjY2Vzc1Rva2VuKGtleTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGNyZWRlbnRpYWwgPSB0aGlzLmdldEFjY2Vzc1Rva2VuQ3JlZGVudGlhbChrZXkpO1xuICAgICAgICBpZiAoIWNyZWRlbnRpYWwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlbW92ZSBUb2tlbiBCaW5kaW5nIEtleSBmcm9tIGtleSBzdG9yZSBmb3IgUG9QIFRva2VucyBDcmVkZW50aWFsc1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICBjcmVkZW50aWFsLmNyZWRlbnRpYWxUeXBlLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICBDcmVkZW50aWFsVHlwZS5BQ0NFU1NfVE9LRU5fV0lUSF9BVVRIX1NDSEVNRS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICkge1xuICAgICAgICAgICAgaWYgKGNyZWRlbnRpYWwudG9rZW5UeXBlID09PSBBdXRoZW50aWNhdGlvblNjaGVtZS5QT1ApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbldpdGhBdXRoU2NoZW1lRW50aXR5ID1cbiAgICAgICAgICAgICAgICAgICAgY3JlZGVudGlhbCBhcyBBY2Nlc3NUb2tlbkVudGl0eTtcbiAgICAgICAgICAgICAgICBjb25zdCBraWQgPSBhY2Nlc3NUb2tlbldpdGhBdXRoU2NoZW1lRW50aXR5LmtleUlkO1xuXG4gICAgICAgICAgICAgICAgaWYgKGtpZCkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jcnlwdG9JbXBsLnJlbW92ZVRva2VuQmluZGluZ0tleShraWQpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLmJpbmRpbmdLZXlOb3RSZW1vdmVkXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlSXRlbShrZXkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYWxsIGFwcCBtZXRhZGF0YSBvYmplY3RzIGZyb20gY2FjaGUuXG4gICAgICovXG4gICAgcmVtb3ZlQXBwTWV0YWRhdGEoKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGFsbENhY2hlS2V5cyA9IHRoaXMuZ2V0S2V5cygpO1xuICAgICAgICBhbGxDYWNoZUtleXMuZm9yRWFjaCgoY2FjaGVLZXkpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQXBwTWV0YWRhdGEoY2FjaGVLZXkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVJdGVtKGNhY2hlS2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmUgQWNjb3VudEVudGl0eSBmcm9tIGNhY2hlXG4gICAgICogQHBhcmFtIGFjY291bnRcbiAgICAgKi9cbiAgICByZWFkQWNjb3VudEZyb21DYWNoZShhY2NvdW50OiBBY2NvdW50SW5mbyk6IEFjY291bnRFbnRpdHkgfCBudWxsIHtcbiAgICAgICAgY29uc3QgYWNjb3VudEtleTogc3RyaW5nID1cbiAgICAgICAgICAgIEFjY291bnRFbnRpdHkuZ2VuZXJhdGVBY2NvdW50Q2FjaGVLZXkoYWNjb3VudCk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEFjY291bnQoYWNjb3VudEtleSwgdGhpcy5jb21tb25Mb2dnZXIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlIElkVG9rZW5FbnRpdHkgZnJvbSBjYWNoZVxuICAgICAqIEBwYXJhbSBhY2NvdW50IHtBY2NvdW50SW5mb31cbiAgICAgKiBAcGFyYW0gdG9rZW5LZXlzIHs/VG9rZW5LZXlzfVxuICAgICAqIEBwYXJhbSB0YXJnZXRSZWFsbSB7P3N0cmluZ31cbiAgICAgKiBAcGFyYW0gcGVyZm9ybWFuY2VDbGllbnQgez9JUGVyZm9ybWFuY2VDbGllbnR9XG4gICAgICogQHBhcmFtIGNvcnJlbGF0aW9uSWQgez9zdHJpbmd9XG4gICAgICovXG4gICAgZ2V0SWRUb2tlbihcbiAgICAgICAgYWNjb3VudDogQWNjb3VudEluZm8sXG4gICAgICAgIHRva2VuS2V5cz86IFRva2VuS2V5cyxcbiAgICAgICAgdGFyZ2V0UmVhbG0/OiBzdHJpbmcsXG4gICAgICAgIHBlcmZvcm1hbmNlQ2xpZW50PzogSVBlcmZvcm1hbmNlQ2xpZW50LFxuICAgICAgICBjb3JyZWxhdGlvbklkPzogc3RyaW5nXG4gICAgKTogSWRUb2tlbkVudGl0eSB8IG51bGwge1xuICAgICAgICB0aGlzLmNvbW1vbkxvZ2dlci50cmFjZShcIkNhY2hlTWFuYWdlciAtIGdldElkVG9rZW4gY2FsbGVkXCIpO1xuICAgICAgICBjb25zdCBpZFRva2VuRmlsdGVyOiBDcmVkZW50aWFsRmlsdGVyID0ge1xuICAgICAgICAgICAgaG9tZUFjY291bnRJZDogYWNjb3VudC5ob21lQWNjb3VudElkLFxuICAgICAgICAgICAgZW52aXJvbm1lbnQ6IGFjY291bnQuZW52aXJvbm1lbnQsXG4gICAgICAgICAgICBjcmVkZW50aWFsVHlwZTogQ3JlZGVudGlhbFR5cGUuSURfVE9LRU4sXG4gICAgICAgICAgICBjbGllbnRJZDogdGhpcy5jbGllbnRJZCxcbiAgICAgICAgICAgIHJlYWxtOiB0YXJnZXRSZWFsbSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBpZFRva2VuTWFwOiBNYXA8c3RyaW5nLCBJZFRva2VuRW50aXR5PiA9IHRoaXMuZ2V0SWRUb2tlbnNCeUZpbHRlcihcbiAgICAgICAgICAgIGlkVG9rZW5GaWx0ZXIsXG4gICAgICAgICAgICB0b2tlbktleXNcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBudW1JZFRva2VucyA9IGlkVG9rZW5NYXAuc2l6ZTtcblxuICAgICAgICBpZiAobnVtSWRUb2tlbnMgPCAxKSB7XG4gICAgICAgICAgICB0aGlzLmNvbW1vbkxvZ2dlci5pbmZvKFwiQ2FjaGVNYW5hZ2VyOmdldElkVG9rZW4gLSBObyB0b2tlbiBmb3VuZFwiKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9IGVsc2UgaWYgKG51bUlkVG9rZW5zID4gMSkge1xuICAgICAgICAgICAgbGV0IHRva2Vuc1RvQmVSZW1vdmVkOiBNYXA8c3RyaW5nLCBJZFRva2VuRW50aXR5PiA9IGlkVG9rZW5NYXA7XG4gICAgICAgICAgICAvLyBNdWx0aXBsZSB0ZW5hbnQgcHJvZmlsZXMgYW5kIG5vIHRlbmFudCBzcGVjaWZpZWQsIHBpY2sgaG9tZSBhY2NvdW50XG4gICAgICAgICAgICBpZiAoIXRhcmdldFJlYWxtKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaG9tZUlkVG9rZW5NYXA6IE1hcDxzdHJpbmcsIElkVG9rZW5FbnRpdHk+ID0gbmV3IE1hcDxcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICBJZFRva2VuRW50aXR5XG4gICAgICAgICAgICAgICAgPigpO1xuICAgICAgICAgICAgICAgIGlkVG9rZW5NYXAuZm9yRWFjaCgoaWRUb2tlbiwga2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpZFRva2VuLnJlYWxtID09PSBhY2NvdW50LnRlbmFudElkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBob21lSWRUb2tlbk1hcC5zZXQoa2V5LCBpZFRva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IG51bUhvbWVJZFRva2VucyA9IGhvbWVJZFRva2VuTWFwLnNpemU7XG4gICAgICAgICAgICAgICAgaWYgKG51bUhvbWVJZFRva2VucyA8IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21tb25Mb2dnZXIuaW5mbyhcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQ2FjaGVNYW5hZ2VyOmdldElkVG9rZW4gLSBNdWx0aXBsZSBJRCB0b2tlbnMgZm91bmQgZm9yIGFjY291bnQgYnV0IG5vbmUgbWF0Y2ggYWNjb3VudCBlbnRpdHkgdGVuYW50IGlkLCByZXR1cm5pbmcgZmlyc3QgcmVzdWx0XCJcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlkVG9rZW5NYXAudmFsdWVzKCkubmV4dCgpLnZhbHVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobnVtSG9tZUlkVG9rZW5zID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tbW9uTG9nZ2VyLmluZm8oXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkNhY2hlTWFuYWdlcjpnZXRJZFRva2VuIC0gTXVsdGlwbGUgSUQgdG9rZW5zIGZvdW5kIGZvciBhY2NvdW50LCBkZWZhdWx0aW5nIHRvIGhvbWUgdGVuYW50IHByb2ZpbGVcIlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaG9tZUlkVG9rZW5NYXAudmFsdWVzKCkubmV4dCgpLnZhbHVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE11bHRpcGxlIElEIHRva2VucyBmb3IgaG9tZSB0ZW5hbnQgcHJvZmlsZSwgcmVtb3ZlIGFsbCBhbmQgcmV0dXJuIG51bGxcbiAgICAgICAgICAgICAgICAgICAgdG9rZW5zVG9CZVJlbW92ZWQgPSBob21lSWRUb2tlbk1hcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBNdWx0aXBsZSB0b2tlbnMgZm9yIGEgc2luZ2xlIHRlbmFudCBwcm9maWxlLCByZW1vdmUgYWxsIGFuZCByZXR1cm4gbnVsbFxuICAgICAgICAgICAgdGhpcy5jb21tb25Mb2dnZXIuaW5mbyhcbiAgICAgICAgICAgICAgICBcIkNhY2hlTWFuYWdlcjpnZXRJZFRva2VuIC0gTXVsdGlwbGUgbWF0Y2hpbmcgSUQgdG9rZW5zIGZvdW5kLCBjbGVhcmluZyB0aGVtXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0b2tlbnNUb0JlUmVtb3ZlZC5mb3JFYWNoKChpZFRva2VuLCBrZXkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUlkVG9rZW4oa2V5KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHBlcmZvcm1hbmNlQ2xpZW50ICYmIGNvcnJlbGF0aW9uSWQpIHtcbiAgICAgICAgICAgICAgICBwZXJmb3JtYW5jZUNsaWVudC5hZGRGaWVsZHMoXG4gICAgICAgICAgICAgICAgICAgIHsgbXVsdGlNYXRjaGVkSUQ6IGlkVG9rZW5NYXAuc2l6ZSB9LFxuICAgICAgICAgICAgICAgICAgICBjb3JyZWxhdGlvbklkXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jb21tb25Mb2dnZXIuaW5mbyhcIkNhY2hlTWFuYWdlcjpnZXRJZFRva2VuIC0gUmV0dXJuaW5nIElEIHRva2VuXCIpO1xuICAgICAgICByZXR1cm4gaWRUb2tlbk1hcC52YWx1ZXMoKS5uZXh0KCkudmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBhbGwgaWRUb2tlbnMgbWF0Y2hpbmcgdGhlIGdpdmVuIGZpbHRlclxuICAgICAqIEBwYXJhbSBmaWx0ZXJcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIGdldElkVG9rZW5zQnlGaWx0ZXIoXG4gICAgICAgIGZpbHRlcjogQ3JlZGVudGlhbEZpbHRlcixcbiAgICAgICAgdG9rZW5LZXlzPzogVG9rZW5LZXlzXG4gICAgKTogTWFwPHN0cmluZywgSWRUb2tlbkVudGl0eT4ge1xuICAgICAgICBjb25zdCBpZFRva2VuS2V5cyA9XG4gICAgICAgICAgICAodG9rZW5LZXlzICYmIHRva2VuS2V5cy5pZFRva2VuKSB8fCB0aGlzLmdldFRva2VuS2V5cygpLmlkVG9rZW47XG5cbiAgICAgICAgY29uc3QgaWRUb2tlbnM6IE1hcDxzdHJpbmcsIElkVG9rZW5FbnRpdHk+ID0gbmV3IE1hcDxcbiAgICAgICAgICAgIHN0cmluZyxcbiAgICAgICAgICAgIElkVG9rZW5FbnRpdHlcbiAgICAgICAgPigpO1xuICAgICAgICBpZFRva2VuS2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhdGhpcy5pZFRva2VuS2V5TWF0Y2hlc0ZpbHRlcihrZXksIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpZW50SWQ6IHRoaXMuY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgICAgIC4uLmZpbHRlcixcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaWRUb2tlbiA9IHRoaXMuZ2V0SWRUb2tlbkNyZWRlbnRpYWwoa2V5KTtcbiAgICAgICAgICAgIGlmIChpZFRva2VuICYmIHRoaXMuY3JlZGVudGlhbE1hdGNoZXNGaWx0ZXIoaWRUb2tlbiwgZmlsdGVyKSkge1xuICAgICAgICAgICAgICAgIGlkVG9rZW5zLnNldChrZXksIGlkVG9rZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gaWRUb2tlbnM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVmFsaWRhdGUgdGhlIGNhY2hlIGtleSBhZ2FpbnN0IGZpbHRlciBiZWZvcmUgcmV0cmlldmluZyBhbmQgcGFyc2luZyBjYWNoZSB2YWx1ZVxuICAgICAqIEBwYXJhbSBrZXlcbiAgICAgKiBAcGFyYW0gZmlsdGVyXG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICBpZFRva2VuS2V5TWF0Y2hlc0ZpbHRlcihcbiAgICAgICAgaW5wdXRLZXk6IHN0cmluZyxcbiAgICAgICAgZmlsdGVyOiBDcmVkZW50aWFsRmlsdGVyXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGtleSA9IGlucHV0S2V5LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGZpbHRlci5jbGllbnRJZCAmJlxuICAgICAgICAgICAga2V5LmluZGV4T2YoZmlsdGVyLmNsaWVudElkLnRvTG93ZXJDYXNlKCkpID09PSAtMVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGZpbHRlci5ob21lQWNjb3VudElkICYmXG4gICAgICAgICAgICBrZXkuaW5kZXhPZihmaWx0ZXIuaG9tZUFjY291bnRJZC50b0xvd2VyQ2FzZSgpKSA9PT0gLTFcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGlkVG9rZW4gZnJvbSB0aGUgY2FjaGVcbiAgICAgKiBAcGFyYW0ga2V5XG4gICAgICovXG4gICAgcmVtb3ZlSWRUb2tlbihrZXk6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHJlZnJlc2ggdG9rZW4gZnJvbSB0aGUgY2FjaGVcbiAgICAgKiBAcGFyYW0ga2V5XG4gICAgICovXG4gICAgcmVtb3ZlUmVmcmVzaFRva2VuKGtleTogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVtb3ZlSXRlbShrZXkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlIEFjY2Vzc1Rva2VuRW50aXR5IGZyb20gY2FjaGVcbiAgICAgKiBAcGFyYW0gYWNjb3VudCB7QWNjb3VudEluZm99XG4gICAgICogQHBhcmFtIHJlcXVlc3Qge0Jhc2VBdXRoUmVxdWVzdH1cbiAgICAgKiBAcGFyYW0gdG9rZW5LZXlzIHs/VG9rZW5LZXlzfVxuICAgICAqIEBwYXJhbSBwZXJmb3JtYW5jZUNsaWVudCB7P0lQZXJmb3JtYW5jZUNsaWVudH1cbiAgICAgKiBAcGFyYW0gY29ycmVsYXRpb25JZCB7P3N0cmluZ31cbiAgICAgKi9cbiAgICBnZXRBY2Nlc3NUb2tlbihcbiAgICAgICAgYWNjb3VudDogQWNjb3VudEluZm8sXG4gICAgICAgIHJlcXVlc3Q6IEJhc2VBdXRoUmVxdWVzdCxcbiAgICAgICAgdG9rZW5LZXlzPzogVG9rZW5LZXlzLFxuICAgICAgICB0YXJnZXRSZWFsbT86IHN0cmluZyxcbiAgICAgICAgcGVyZm9ybWFuY2VDbGllbnQ/OiBJUGVyZm9ybWFuY2VDbGllbnQsXG4gICAgICAgIGNvcnJlbGF0aW9uSWQ/OiBzdHJpbmdcbiAgICApOiBBY2Nlc3NUb2tlbkVudGl0eSB8IG51bGwge1xuICAgICAgICB0aGlzLmNvbW1vbkxvZ2dlci50cmFjZShcIkNhY2hlTWFuYWdlciAtIGdldEFjY2Vzc1Rva2VuIGNhbGxlZFwiKTtcbiAgICAgICAgY29uc3Qgc2NvcGVzID0gU2NvcGVTZXQuY3JlYXRlU2VhcmNoU2NvcGVzKHJlcXVlc3Quc2NvcGVzKTtcbiAgICAgICAgY29uc3QgYXV0aFNjaGVtZSA9XG4gICAgICAgICAgICByZXF1ZXN0LmF1dGhlbnRpY2F0aW9uU2NoZW1lIHx8IEF1dGhlbnRpY2F0aW9uU2NoZW1lLkJFQVJFUjtcbiAgICAgICAgLypcbiAgICAgICAgICogRGlzdGluZ3Vpc2ggYmV0d2VlbiBCZWFyZXIgYW5kIFBvUC9TU0ggdG9rZW4gY2FjaGUgdHlwZXNcbiAgICAgICAgICogQ2FzdCB0byBsb3dlcmNhc2UgdG8gaGFuZGxlIFwiYmVhcmVyXCIgZnJvbSBBREZTXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCBjcmVkZW50aWFsVHlwZSA9XG4gICAgICAgICAgICBhdXRoU2NoZW1lICYmXG4gICAgICAgICAgICBhdXRoU2NoZW1lLnRvTG93ZXJDYXNlKCkgIT09XG4gICAgICAgICAgICAgICAgQXV0aGVudGljYXRpb25TY2hlbWUuQkVBUkVSLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgICA/IENyZWRlbnRpYWxUeXBlLkFDQ0VTU19UT0tFTl9XSVRIX0FVVEhfU0NIRU1FXG4gICAgICAgICAgICAgICAgOiBDcmVkZW50aWFsVHlwZS5BQ0NFU1NfVE9LRU47XG5cbiAgICAgICAgY29uc3QgYWNjZXNzVG9rZW5GaWx0ZXI6IENyZWRlbnRpYWxGaWx0ZXIgPSB7XG4gICAgICAgICAgICBob21lQWNjb3VudElkOiBhY2NvdW50LmhvbWVBY2NvdW50SWQsXG4gICAgICAgICAgICBlbnZpcm9ubWVudDogYWNjb3VudC5lbnZpcm9ubWVudCxcbiAgICAgICAgICAgIGNyZWRlbnRpYWxUeXBlOiBjcmVkZW50aWFsVHlwZSxcbiAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLmNsaWVudElkLFxuICAgICAgICAgICAgcmVhbG06IHRhcmdldFJlYWxtIHx8IGFjY291bnQudGVuYW50SWQsXG4gICAgICAgICAgICB0YXJnZXQ6IHNjb3BlcyxcbiAgICAgICAgICAgIHRva2VuVHlwZTogYXV0aFNjaGVtZSxcbiAgICAgICAgICAgIGtleUlkOiByZXF1ZXN0LnNzaEtpZCxcbiAgICAgICAgICAgIHJlcXVlc3RlZENsYWltc0hhc2g6IHJlcXVlc3QucmVxdWVzdGVkQ2xhaW1zSGFzaCxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbktleXMgPVxuICAgICAgICAgICAgKHRva2VuS2V5cyAmJiB0b2tlbktleXMuYWNjZXNzVG9rZW4pIHx8XG4gICAgICAgICAgICB0aGlzLmdldFRva2VuS2V5cygpLmFjY2Vzc1Rva2VuO1xuICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbnM6IEFjY2Vzc1Rva2VuRW50aXR5W10gPSBbXTtcblxuICAgICAgICBhY2Nlc3NUb2tlbktleXMuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICAvLyBWYWxpZGF0ZSBrZXlcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuS2V5TWF0Y2hlc0ZpbHRlcihrZXksIGFjY2Vzc1Rva2VuRmlsdGVyLCB0cnVlKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWNjZXNzVG9rZW4gPSB0aGlzLmdldEFjY2Vzc1Rva2VuQ3JlZGVudGlhbChrZXkpO1xuXG4gICAgICAgICAgICAgICAgLy8gVmFsaWRhdGUgdmFsdWVcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlZGVudGlhbE1hdGNoZXNGaWx0ZXIoYWNjZXNzVG9rZW4sIGFjY2Vzc1Rva2VuRmlsdGVyKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbnMucHVzaChhY2Nlc3NUb2tlbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBudW1BY2Nlc3NUb2tlbnMgPSBhY2Nlc3NUb2tlbnMubGVuZ3RoO1xuICAgICAgICBpZiAobnVtQWNjZXNzVG9rZW5zIDwgMSkge1xuICAgICAgICAgICAgdGhpcy5jb21tb25Mb2dnZXIuaW5mbyhcbiAgICAgICAgICAgICAgICBcIkNhY2hlTWFuYWdlcjpnZXRBY2Nlc3NUb2tlbiAtIE5vIHRva2VuIGZvdW5kXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSBlbHNlIGlmIChudW1BY2Nlc3NUb2tlbnMgPiAxKSB7XG4gICAgICAgICAgICB0aGlzLmNvbW1vbkxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgICAgIFwiQ2FjaGVNYW5hZ2VyOmdldEFjY2Vzc1Rva2VuIC0gTXVsdGlwbGUgYWNjZXNzIHRva2VucyBmb3VuZCwgY2xlYXJpbmcgdGhlbVwiXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgYWNjZXNzVG9rZW5zLmZvckVhY2goKGFjY2Vzc1Rva2VuKSA9PiB7XG4gICAgICAgICAgICAgICAgdm9pZCB0aGlzLnJlbW92ZUFjY2Vzc1Rva2VuKGdlbmVyYXRlQ3JlZGVudGlhbEtleShhY2Nlc3NUb2tlbikpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAocGVyZm9ybWFuY2VDbGllbnQgJiYgY29ycmVsYXRpb25JZCkge1xuICAgICAgICAgICAgICAgIHBlcmZvcm1hbmNlQ2xpZW50LmFkZEZpZWxkcyhcbiAgICAgICAgICAgICAgICAgICAgeyBtdWx0aU1hdGNoZWRBVDogYWNjZXNzVG9rZW5zLmxlbmd0aCB9LFxuICAgICAgICAgICAgICAgICAgICBjb3JyZWxhdGlvbklkXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jb21tb25Mb2dnZXIuaW5mbyhcbiAgICAgICAgICAgIFwiQ2FjaGVNYW5hZ2VyOmdldEFjY2Vzc1Rva2VuIC0gUmV0dXJuaW5nIGFjY2VzcyB0b2tlblwiXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBhY2Nlc3NUb2tlbnNbMF07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVmFsaWRhdGUgdGhlIGNhY2hlIGtleSBhZ2FpbnN0IGZpbHRlciBiZWZvcmUgcmV0cmlldmluZyBhbmQgcGFyc2luZyBjYWNoZSB2YWx1ZVxuICAgICAqIEBwYXJhbSBrZXlcbiAgICAgKiBAcGFyYW0gZmlsdGVyXG4gICAgICogQHBhcmFtIGtleU11c3RDb250YWluQWxsU2NvcGVzXG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICBhY2Nlc3NUb2tlbktleU1hdGNoZXNGaWx0ZXIoXG4gICAgICAgIGlucHV0S2V5OiBzdHJpbmcsXG4gICAgICAgIGZpbHRlcjogQ3JlZGVudGlhbEZpbHRlcixcbiAgICAgICAga2V5TXVzdENvbnRhaW5BbGxTY29wZXM6IGJvb2xlYW5cbiAgICApOiBib29sZWFuIHtcbiAgICAgICAgY29uc3Qga2V5ID0gaW5wdXRLZXkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgZmlsdGVyLmNsaWVudElkICYmXG4gICAgICAgICAgICBrZXkuaW5kZXhPZihmaWx0ZXIuY2xpZW50SWQudG9Mb3dlckNhc2UoKSkgPT09IC0xXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgZmlsdGVyLmhvbWVBY2NvdW50SWQgJiZcbiAgICAgICAgICAgIGtleS5pbmRleE9mKGZpbHRlci5ob21lQWNjb3VudElkLnRvTG93ZXJDYXNlKCkpID09PSAtMVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmaWx0ZXIucmVhbG0gJiYga2V5LmluZGV4T2YoZmlsdGVyLnJlYWxtLnRvTG93ZXJDYXNlKCkpID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgZmlsdGVyLnJlcXVlc3RlZENsYWltc0hhc2ggJiZcbiAgICAgICAgICAgIGtleS5pbmRleE9mKGZpbHRlci5yZXF1ZXN0ZWRDbGFpbXNIYXNoLnRvTG93ZXJDYXNlKCkpID09PSAtMVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmaWx0ZXIudGFyZ2V0KSB7XG4gICAgICAgICAgICBjb25zdCBzY29wZXMgPSBmaWx0ZXIudGFyZ2V0LmFzQXJyYXkoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2NvcGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBrZXlNdXN0Q29udGFpbkFsbFNjb3BlcyAmJlxuICAgICAgICAgICAgICAgICAgICAha2V5LmluY2x1ZGVzKHNjb3Blc1tpXS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIHBlcmZvcm1pbmcgYSBjYWNoZSBsb29rdXAgYSBtaXNzaW5nIHNjb3BlIHdvdWxkIGJlIGEgY2FjaGUgbWlzc1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgIWtleU11c3RDb250YWluQWxsU2NvcGVzICYmXG4gICAgICAgICAgICAgICAgICAgIGtleS5pbmNsdWRlcyhzY29wZXNbaV0udG9Mb3dlckNhc2UoKSlcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2hlbiBwZXJmb3JtaW5nIGEgY2FjaGUgd3JpdGUsIGFueSB0b2tlbiB3aXRoIGEgc3Vic2V0IG9mIHJlcXVlc3RlZCBzY29wZXMgc2hvdWxkIGJlIHJlcGxhY2VkXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgYWxsIGFjY2VzcyB0b2tlbnMgbWF0Y2hpbmcgdGhlIGZpbHRlclxuICAgICAqIEBwYXJhbSBmaWx0ZXJcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIGdldEFjY2Vzc1Rva2Vuc0J5RmlsdGVyKGZpbHRlcjogQ3JlZGVudGlhbEZpbHRlcik6IEFjY2Vzc1Rva2VuRW50aXR5W10ge1xuICAgICAgICBjb25zdCB0b2tlbktleXMgPSB0aGlzLmdldFRva2VuS2V5cygpO1xuXG4gICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuczogQWNjZXNzVG9rZW5FbnRpdHlbXSA9IFtdO1xuICAgICAgICB0b2tlbktleXMuYWNjZXNzVG9rZW4uZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYWNjZXNzVG9rZW5LZXlNYXRjaGVzRmlsdGVyKGtleSwgZmlsdGVyLCB0cnVlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgYWNjZXNzVG9rZW4gPSB0aGlzLmdldEFjY2Vzc1Rva2VuQ3JlZGVudGlhbChrZXkpO1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuICYmXG4gICAgICAgICAgICAgICAgdGhpcy5jcmVkZW50aWFsTWF0Y2hlc0ZpbHRlcihhY2Nlc3NUb2tlbiwgZmlsdGVyKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgYWNjZXNzVG9rZW5zLnB1c2goYWNjZXNzVG9rZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gYWNjZXNzVG9rZW5zO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhlbHBlciB0byByZXRyaWV2ZSB0aGUgYXBwcm9wcmlhdGUgcmVmcmVzaCB0b2tlbiBmcm9tIGNhY2hlXG4gICAgICogQHBhcmFtIGFjY291bnQge0FjY291bnRJbmZvfVxuICAgICAqIEBwYXJhbSBmYW1pbHlSVCB7Ym9vbGVhbn1cbiAgICAgKiBAcGFyYW0gdG9rZW5LZXlzIHs/VG9rZW5LZXlzfVxuICAgICAqIEBwYXJhbSBwZXJmb3JtYW5jZUNsaWVudCB7P0lQZXJmb3JtYW5jZUNsaWVudH1cbiAgICAgKiBAcGFyYW0gY29ycmVsYXRpb25JZCB7P3N0cmluZ31cbiAgICAgKi9cbiAgICBnZXRSZWZyZXNoVG9rZW4oXG4gICAgICAgIGFjY291bnQ6IEFjY291bnRJbmZvLFxuICAgICAgICBmYW1pbHlSVDogYm9vbGVhbixcbiAgICAgICAgdG9rZW5LZXlzPzogVG9rZW5LZXlzLFxuICAgICAgICBwZXJmb3JtYW5jZUNsaWVudD86IElQZXJmb3JtYW5jZUNsaWVudCxcbiAgICAgICAgY29ycmVsYXRpb25JZD86IHN0cmluZ1xuICAgICk6IFJlZnJlc2hUb2tlbkVudGl0eSB8IG51bGwge1xuICAgICAgICB0aGlzLmNvbW1vbkxvZ2dlci50cmFjZShcIkNhY2hlTWFuYWdlciAtIGdldFJlZnJlc2hUb2tlbiBjYWxsZWRcIik7XG4gICAgICAgIGNvbnN0IGlkID0gZmFtaWx5UlQgPyBUSEVfRkFNSUxZX0lEIDogdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCByZWZyZXNoVG9rZW5GaWx0ZXI6IENyZWRlbnRpYWxGaWx0ZXIgPSB7XG4gICAgICAgICAgICBob21lQWNjb3VudElkOiBhY2NvdW50LmhvbWVBY2NvdW50SWQsXG4gICAgICAgICAgICBlbnZpcm9ubWVudDogYWNjb3VudC5lbnZpcm9ubWVudCxcbiAgICAgICAgICAgIGNyZWRlbnRpYWxUeXBlOiBDcmVkZW50aWFsVHlwZS5SRUZSRVNIX1RPS0VOLFxuICAgICAgICAgICAgY2xpZW50SWQ6IHRoaXMuY2xpZW50SWQsXG4gICAgICAgICAgICBmYW1pbHlJZDogaWQsXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcmVmcmVzaFRva2VuS2V5cyA9XG4gICAgICAgICAgICAodG9rZW5LZXlzICYmIHRva2VuS2V5cy5yZWZyZXNoVG9rZW4pIHx8XG4gICAgICAgICAgICB0aGlzLmdldFRva2VuS2V5cygpLnJlZnJlc2hUb2tlbjtcbiAgICAgICAgY29uc3QgcmVmcmVzaFRva2VuczogUmVmcmVzaFRva2VuRW50aXR5W10gPSBbXTtcblxuICAgICAgICByZWZyZXNoVG9rZW5LZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgLy8gVmFsaWRhdGUga2V5XG4gICAgICAgICAgICBpZiAodGhpcy5yZWZyZXNoVG9rZW5LZXlNYXRjaGVzRmlsdGVyKGtleSwgcmVmcmVzaFRva2VuRmlsdGVyKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZnJlc2hUb2tlbiA9IHRoaXMuZ2V0UmVmcmVzaFRva2VuQ3JlZGVudGlhbChrZXkpO1xuICAgICAgICAgICAgICAgIC8vIFZhbGlkYXRlIHZhbHVlXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICByZWZyZXNoVG9rZW4gJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVkZW50aWFsTWF0Y2hlc0ZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2hUb2tlbkZpbHRlclxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlZnJlc2hUb2tlbnMucHVzaChyZWZyZXNoVG9rZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgbnVtUmVmcmVzaFRva2VucyA9IHJlZnJlc2hUb2tlbnMubGVuZ3RoO1xuICAgICAgICBpZiAobnVtUmVmcmVzaFRva2VucyA8IDEpIHtcbiAgICAgICAgICAgIHRoaXMuY29tbW9uTG9nZ2VyLmluZm8oXG4gICAgICAgICAgICAgICAgXCJDYWNoZU1hbmFnZXI6Z2V0UmVmcmVzaFRva2VuIC0gTm8gcmVmcmVzaCB0b2tlbiBmb3VuZC5cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFkZHJlc3MgdGhlIGVsc2UgY2FzZSBhZnRlciByZW1vdmUgZnVuY3Rpb25zIGFkZHJlc3MgZW52aXJvbm1lbnQgYWxpYXNlc1xuXG4gICAgICAgIGlmIChudW1SZWZyZXNoVG9rZW5zID4gMSAmJiBwZXJmb3JtYW5jZUNsaWVudCAmJiBjb3JyZWxhdGlvbklkKSB7XG4gICAgICAgICAgICBwZXJmb3JtYW5jZUNsaWVudC5hZGRGaWVsZHMoXG4gICAgICAgICAgICAgICAgeyBtdWx0aU1hdGNoZWRSVDogbnVtUmVmcmVzaFRva2VucyB9LFxuICAgICAgICAgICAgICAgIGNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNvbW1vbkxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgXCJDYWNoZU1hbmFnZXI6Z2V0UmVmcmVzaFRva2VuIC0gcmV0dXJuaW5nIHJlZnJlc2ggdG9rZW5cIlxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gcmVmcmVzaFRva2Vuc1swXSBhcyBSZWZyZXNoVG9rZW5FbnRpdHk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVmFsaWRhdGUgdGhlIGNhY2hlIGtleSBhZ2FpbnN0IGZpbHRlciBiZWZvcmUgcmV0cmlldmluZyBhbmQgcGFyc2luZyBjYWNoZSB2YWx1ZVxuICAgICAqIEBwYXJhbSBrZXlcbiAgICAgKiBAcGFyYW0gZmlsdGVyXG4gICAgICovXG4gICAgcmVmcmVzaFRva2VuS2V5TWF0Y2hlc0ZpbHRlcihcbiAgICAgICAgaW5wdXRLZXk6IHN0cmluZyxcbiAgICAgICAgZmlsdGVyOiBDcmVkZW50aWFsRmlsdGVyXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGtleSA9IGlucHV0S2V5LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGZpbHRlci5mYW1pbHlJZCAmJlxuICAgICAgICAgICAga2V5LmluZGV4T2YoZmlsdGVyLmZhbWlseUlkLnRvTG93ZXJDYXNlKCkpID09PSAtMVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIGZhbWlseUlkIGlzIHVzZWQsIGNsaWVudElkIGlzIG5vdCBpbiB0aGUga2V5XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFmaWx0ZXIuZmFtaWx5SWQgJiZcbiAgICAgICAgICAgIGZpbHRlci5jbGllbnRJZCAmJlxuICAgICAgICAgICAga2V5LmluZGV4T2YoZmlsdGVyLmNsaWVudElkLnRvTG93ZXJDYXNlKCkpID09PSAtMVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGZpbHRlci5ob21lQWNjb3VudElkICYmXG4gICAgICAgICAgICBrZXkuaW5kZXhPZihmaWx0ZXIuaG9tZUFjY291bnRJZC50b0xvd2VyQ2FzZSgpKSA9PT0gLTFcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSBBcHBNZXRhZGF0YUVudGl0eSBmcm9tIGNhY2hlXG4gICAgICovXG4gICAgcmVhZEFwcE1ldGFkYXRhRnJvbUNhY2hlKGVudmlyb25tZW50OiBzdHJpbmcpOiBBcHBNZXRhZGF0YUVudGl0eSB8IG51bGwge1xuICAgICAgICBjb25zdCBhcHBNZXRhZGF0YUZpbHRlcjogQXBwTWV0YWRhdGFGaWx0ZXIgPSB7XG4gICAgICAgICAgICBlbnZpcm9ubWVudCxcbiAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLmNsaWVudElkLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGFwcE1ldGFkYXRhOiBBcHBNZXRhZGF0YUNhY2hlID1cbiAgICAgICAgICAgIHRoaXMuZ2V0QXBwTWV0YWRhdGFGaWx0ZXJlZEJ5KGFwcE1ldGFkYXRhRmlsdGVyKTtcbiAgICAgICAgY29uc3QgYXBwTWV0YWRhdGFFbnRyaWVzOiBBcHBNZXRhZGF0YUVudGl0eVtdID0gT2JqZWN0LmtleXMoXG4gICAgICAgICAgICBhcHBNZXRhZGF0YVxuICAgICAgICApLm1hcCgoa2V5KSA9PiBhcHBNZXRhZGF0YVtrZXldKTtcblxuICAgICAgICBjb25zdCBudW1BcHBNZXRhZGF0YSA9IGFwcE1ldGFkYXRhRW50cmllcy5sZW5ndGg7XG4gICAgICAgIGlmIChudW1BcHBNZXRhZGF0YSA8IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9IGVsc2UgaWYgKG51bUFwcE1ldGFkYXRhID4gMSkge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKFxuICAgICAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLm11bHRpcGxlTWF0Y2hpbmdBcHBNZXRhZGF0YVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhcHBNZXRhZGF0YUVudHJpZXNbMF0gYXMgQXBwTWV0YWRhdGFFbnRpdHk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBmYW1pbHlfaWQgdmFsdWUgYXNzb2NpYXRlZCAgd2l0aCBGT0NJXG4gICAgICogQHBhcmFtIGVudmlyb25tZW50XG4gICAgICogQHBhcmFtIGNsaWVudElkXG4gICAgICovXG4gICAgaXNBcHBNZXRhZGF0YUZPQ0koZW52aXJvbm1lbnQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBhcHBNZXRhZGF0YSA9IHRoaXMucmVhZEFwcE1ldGFkYXRhRnJvbUNhY2hlKGVudmlyb25tZW50KTtcbiAgICAgICAgcmV0dXJuICEhKGFwcE1ldGFkYXRhICYmIGFwcE1ldGFkYXRhLmZhbWlseUlkID09PSBUSEVfRkFNSUxZX0lEKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBoZWxwZXIgdG8gbWF0Y2ggYWNjb3VudCBpZHNcbiAgICAgKiBAcGFyYW0gdmFsdWVcbiAgICAgKiBAcGFyYW0gaG9tZUFjY291bnRJZFxuICAgICAqL1xuICAgIHByaXZhdGUgbWF0Y2hIb21lQWNjb3VudElkKFxuICAgICAgICBlbnRpdHk6IEFjY291bnRFbnRpdHkgfCBDcmVkZW50aWFsRW50aXR5LFxuICAgICAgICBob21lQWNjb3VudElkOiBzdHJpbmdcbiAgICApOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICEhKFxuICAgICAgICAgICAgdHlwZW9mIGVudGl0eS5ob21lQWNjb3VudElkID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgICAgICBob21lQWNjb3VudElkID09PSBlbnRpdHkuaG9tZUFjY291bnRJZFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGhlbHBlciB0byBtYXRjaCBhY2NvdW50IGlkc1xuICAgICAqIEBwYXJhbSBlbnRpdHlcbiAgICAgKiBAcGFyYW0gbG9jYWxBY2NvdW50SWRcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIHByaXZhdGUgbWF0Y2hMb2NhbEFjY291bnRJZEZyb21Ub2tlbkNsYWltcyhcbiAgICAgICAgdG9rZW5DbGFpbXM6IFRva2VuQ2xhaW1zLFxuICAgICAgICBsb2NhbEFjY291bnRJZDogc3RyaW5nXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGlkVG9rZW5Mb2NhbEFjY291bnRJZCA9IHRva2VuQ2xhaW1zLm9pZCB8fCB0b2tlbkNsYWltcy5zdWI7XG4gICAgICAgIHJldHVybiBsb2NhbEFjY291bnRJZCA9PT0gaWRUb2tlbkxvY2FsQWNjb3VudElkO1xuICAgIH1cblxuICAgIHByaXZhdGUgbWF0Y2hMb2NhbEFjY291bnRJZEZyb21UZW5hbnRQcm9maWxlKFxuICAgICAgICB0ZW5hbnRQcm9maWxlOiBUZW5hbnRQcm9maWxlLFxuICAgICAgICBsb2NhbEFjY291bnRJZDogc3RyaW5nXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0ZW5hbnRQcm9maWxlLmxvY2FsQWNjb3VudElkID09PSBsb2NhbEFjY291bnRJZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBoZWxwZXIgdG8gbWF0Y2ggbmFtZXNcbiAgICAgKiBAcGFyYW0gZW50aXR5XG4gICAgICogQHBhcmFtIG5hbWVcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBkb3duY2FzZWQgbmFtZSBwcm9wZXJ0aWVzIGFyZSBwcmVzZW50IGFuZCBtYXRjaCBpbiB0aGUgZmlsdGVyIGFuZCB0aGUgZW50aXR5XG4gICAgICovXG4gICAgcHJpdmF0ZSBtYXRjaE5hbWUoY2xhaW1zOiBUb2tlbkNsYWltcywgbmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhIShuYW1lLnRvTG93ZXJDYXNlKCkgPT09IGNsYWltcy5uYW1lPy50b0xvd2VyQ2FzZSgpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBoZWxwZXIgdG8gbWF0Y2ggdXNlcm5hbWVzXG4gICAgICogQHBhcmFtIGVudGl0eVxuICAgICAqIEBwYXJhbSB1c2VybmFtZVxuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgcHJpdmF0ZSBtYXRjaFVzZXJuYW1lKFxuICAgICAgICBjYWNoZWRVc2VybmFtZT86IHN0cmluZyxcbiAgICAgICAgZmlsdGVyVXNlcm5hbWU/OiBzdHJpbmdcbiAgICApOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICEhKFxuICAgICAgICAgICAgY2FjaGVkVXNlcm5hbWUgJiZcbiAgICAgICAgICAgIHR5cGVvZiBjYWNoZWRVc2VybmFtZSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICAgICAgZmlsdGVyVXNlcm5hbWU/LnRvTG93ZXJDYXNlKCkgPT09IGNhY2hlZFVzZXJuYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBoZWxwZXIgdG8gbWF0Y2ggYXNzZXJ0aW9uXG4gICAgICogQHBhcmFtIHZhbHVlXG4gICAgICogQHBhcmFtIG9ib0Fzc2VydGlvblxuICAgICAqL1xuICAgIHByaXZhdGUgbWF0Y2hVc2VyQXNzZXJ0aW9uSGFzaChcbiAgICAgICAgZW50aXR5OiBDcmVkZW50aWFsRW50aXR5LFxuICAgICAgICB1c2VyQXNzZXJ0aW9uSGFzaDogc3RyaW5nXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhIShcbiAgICAgICAgICAgIGVudGl0eS51c2VyQXNzZXJ0aW9uSGFzaCAmJlxuICAgICAgICAgICAgdXNlckFzc2VydGlvbkhhc2ggPT09IGVudGl0eS51c2VyQXNzZXJ0aW9uSGFzaFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGhlbHBlciB0byBtYXRjaCBlbnZpcm9ubWVudFxuICAgICAqIEBwYXJhbSB2YWx1ZVxuICAgICAqIEBwYXJhbSBlbnZpcm9ubWVudFxuICAgICAqL1xuICAgIHByaXZhdGUgbWF0Y2hFbnZpcm9ubWVudChcbiAgICAgICAgZW50aXR5OiBBY2NvdW50RW50aXR5IHwgQ3JlZGVudGlhbEVudGl0eSB8IEFwcE1ldGFkYXRhRW50aXR5LFxuICAgICAgICBlbnZpcm9ubWVudDogc3RyaW5nXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIC8vIENoZWNrIHN0YXRpYyBhdXRob3JpdHkgb3B0aW9ucyBmaXJzdCBmb3IgY2FzZXMgd2hlcmUgYXV0aG9yaXR5IG1ldGFkYXRhIGhhcyBub3QgYmVlbiByZXNvbHZlZCBhbmQgY2FjaGVkIHlldFxuICAgICAgICBpZiAodGhpcy5zdGF0aWNBdXRob3JpdHlPcHRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0aWNBbGlhc2VzID0gZ2V0QWxpYXNlc0Zyb21TdGF0aWNTb3VyY2VzKFxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGljQXV0aG9yaXR5T3B0aW9ucyxcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1vbkxvZ2dlclxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBzdGF0aWNBbGlhc2VzLmluY2x1ZGVzKGVudmlyb25tZW50KSAmJlxuICAgICAgICAgICAgICAgIHN0YXRpY0FsaWFzZXMuaW5jbHVkZXMoZW50aXR5LmVudmlyb25tZW50KVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBRdWVyeSBtZXRhZGF0YSBjYWNoZSBpZiBubyBzdGF0aWMgYXV0aG9yaXR5IGNvbmZpZ3VyYXRpb24gaGFzIGFsaWFzZXMgdGhhdCBtYXRjaCBlbnZpcm9tZW50XG4gICAgICAgIGNvbnN0IGNsb3VkTWV0YWRhdGEgPSB0aGlzLmdldEF1dGhvcml0eU1ldGFkYXRhQnlBbGlhcyhlbnZpcm9ubWVudCk7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGNsb3VkTWV0YWRhdGEgJiZcbiAgICAgICAgICAgIGNsb3VkTWV0YWRhdGEuYWxpYXNlcy5pbmRleE9mKGVudGl0eS5lbnZpcm9ubWVudCkgPiAtMVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBoZWxwZXIgdG8gbWF0Y2ggY3JlZGVudGlhbCB0eXBlXG4gICAgICogQHBhcmFtIGVudGl0eVxuICAgICAqIEBwYXJhbSBjcmVkZW50aWFsVHlwZVxuICAgICAqL1xuICAgIHByaXZhdGUgbWF0Y2hDcmVkZW50aWFsVHlwZShcbiAgICAgICAgZW50aXR5OiBDcmVkZW50aWFsRW50aXR5LFxuICAgICAgICBjcmVkZW50aWFsVHlwZTogc3RyaW5nXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICBlbnRpdHkuY3JlZGVudGlhbFR5cGUgJiZcbiAgICAgICAgICAgIGNyZWRlbnRpYWxUeXBlLnRvTG93ZXJDYXNlKCkgPT09IGVudGl0eS5jcmVkZW50aWFsVHlwZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogaGVscGVyIHRvIG1hdGNoIGNsaWVudCBpZHNcbiAgICAgKiBAcGFyYW0gZW50aXR5XG4gICAgICogQHBhcmFtIGNsaWVudElkXG4gICAgICovXG4gICAgcHJpdmF0ZSBtYXRjaENsaWVudElkKFxuICAgICAgICBlbnRpdHk6IENyZWRlbnRpYWxFbnRpdHkgfCBBcHBNZXRhZGF0YUVudGl0eSxcbiAgICAgICAgY2xpZW50SWQ6IHN0cmluZ1xuICAgICk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISEoZW50aXR5LmNsaWVudElkICYmIGNsaWVudElkID09PSBlbnRpdHkuY2xpZW50SWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGhlbHBlciB0byBtYXRjaCBmYW1pbHkgaWRzXG4gICAgICogQHBhcmFtIGVudGl0eVxuICAgICAqIEBwYXJhbSBmYW1pbHlJZFxuICAgICAqL1xuICAgIHByaXZhdGUgbWF0Y2hGYW1pbHlJZChcbiAgICAgICAgZW50aXR5OiBDcmVkZW50aWFsRW50aXR5IHwgQXBwTWV0YWRhdGFFbnRpdHksXG4gICAgICAgIGZhbWlseUlkOiBzdHJpbmdcbiAgICApOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICEhKGVudGl0eS5mYW1pbHlJZCAmJiBmYW1pbHlJZCA9PT0gZW50aXR5LmZhbWlseUlkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBoZWxwZXIgdG8gbWF0Y2ggcmVhbG1cbiAgICAgKiBAcGFyYW0gZW50aXR5XG4gICAgICogQHBhcmFtIHJlYWxtXG4gICAgICovXG4gICAgcHJpdmF0ZSBtYXRjaFJlYWxtKFxuICAgICAgICBlbnRpdHk6IEFjY291bnRFbnRpdHkgfCBDcmVkZW50aWFsRW50aXR5LFxuICAgICAgICByZWFsbTogc3RyaW5nXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhIShlbnRpdHkucmVhbG0/LnRvTG93ZXJDYXNlKCkgPT09IHJlYWxtLnRvTG93ZXJDYXNlKCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGhlbHBlciB0byBtYXRjaCBuYXRpdmVBY2NvdW50SWRcbiAgICAgKiBAcGFyYW0gZW50aXR5XG4gICAgICogQHBhcmFtIG5hdGl2ZUFjY291bnRJZFxuICAgICAqIEByZXR1cm5zIGJvb2xlYW4gaW5kaWNhdGluZyB0aGUgbWF0Y2ggcmVzdWx0XG4gICAgICovXG4gICAgcHJpdmF0ZSBtYXRjaE5hdGl2ZUFjY291bnRJZChcbiAgICAgICAgZW50aXR5OiBBY2NvdW50RW50aXR5LFxuICAgICAgICBuYXRpdmVBY2NvdW50SWQ6IHN0cmluZ1xuICAgICk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISEoXG4gICAgICAgICAgICBlbnRpdHkubmF0aXZlQWNjb3VudElkICYmIG5hdGl2ZUFjY291bnRJZCA9PT0gZW50aXR5Lm5hdGl2ZUFjY291bnRJZFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGhlbHBlciB0byBtYXRjaCBsb2dpbkhpbnQgd2hpY2ggY2FuIGJlIGVpdGhlcjpcbiAgICAgKiAxLiBsb2dpbl9oaW50IElEIHRva2VuIGNsYWltXG4gICAgICogMi4gdXNlcm5hbWUgaW4gY2FjaGVkIGFjY291bnQgb2JqZWN0XG4gICAgICogMy4gdXBuIGluIElEIHRva2VuIGNsYWltc1xuICAgICAqIEBwYXJhbSBlbnRpdHlcbiAgICAgKiBAcGFyYW0gbG9naW5IaW50XG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICBwcml2YXRlIG1hdGNoTG9naW5IaW50RnJvbVRva2VuQ2xhaW1zKFxuICAgICAgICB0b2tlbkNsYWltczogVG9rZW5DbGFpbXMsXG4gICAgICAgIGxvZ2luSGludDogc3RyaW5nXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICh0b2tlbkNsYWltcy5sb2dpbl9oaW50ID09PSBsb2dpbkhpbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRva2VuQ2xhaW1zLnByZWZlcnJlZF91c2VybmFtZSA9PT0gbG9naW5IaW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0b2tlbkNsYWltcy51cG4gPT09IGxvZ2luSGludCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGVscGVyIHRvIG1hdGNoIHNpZFxuICAgICAqIEBwYXJhbSBlbnRpdHlcbiAgICAgKiBAcGFyYW0gc2lkXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgc2lkIGNsYWltIGlzIHByZXNlbnQgYW5kIG1hdGNoZXMgdGhlIGZpbHRlclxuICAgICAqL1xuICAgIHByaXZhdGUgbWF0Y2hTaWQoaWRUb2tlbkNsYWltczogVG9rZW5DbGFpbXMsIHNpZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBpZFRva2VuQ2xhaW1zLnNpZCA9PT0gc2lkO1xuICAgIH1cblxuICAgIHByaXZhdGUgbWF0Y2hBdXRob3JpdHlUeXBlKFxuICAgICAgICBlbnRpdHk6IEFjY291bnRFbnRpdHksXG4gICAgICAgIGF1dGhvcml0eVR5cGU6IHN0cmluZ1xuICAgICk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISEoXG4gICAgICAgICAgICBlbnRpdHkuYXV0aG9yaXR5VHlwZSAmJlxuICAgICAgICAgICAgYXV0aG9yaXR5VHlwZS50b0xvd2VyQ2FzZSgpID09PSBlbnRpdHkuYXV0aG9yaXR5VHlwZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSB0YXJnZXQgc2NvcGVzIGFyZSBhIHN1YnNldCBvZiB0aGUgY3VycmVudCBlbnRpdHkncyBzY29wZXMsIGZhbHNlIG90aGVyd2lzZS5cbiAgICAgKiBAcGFyYW0gZW50aXR5XG4gICAgICogQHBhcmFtIHRhcmdldFxuICAgICAqL1xuICAgIHByaXZhdGUgbWF0Y2hUYXJnZXQoZW50aXR5OiBDcmVkZW50aWFsRW50aXR5LCB0YXJnZXQ6IFNjb3BlU2V0KTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGlzTm90QWNjZXNzVG9rZW5DcmVkZW50aWFsID1cbiAgICAgICAgICAgIGVudGl0eS5jcmVkZW50aWFsVHlwZSAhPT0gQ3JlZGVudGlhbFR5cGUuQUNDRVNTX1RPS0VOICYmXG4gICAgICAgICAgICBlbnRpdHkuY3JlZGVudGlhbFR5cGUgIT09XG4gICAgICAgICAgICAgICAgQ3JlZGVudGlhbFR5cGUuQUNDRVNTX1RPS0VOX1dJVEhfQVVUSF9TQ0hFTUU7XG5cbiAgICAgICAgaWYgKGlzTm90QWNjZXNzVG9rZW5DcmVkZW50aWFsIHx8ICFlbnRpdHkudGFyZ2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBlbnRpdHlTY29wZVNldDogU2NvcGVTZXQgPSBTY29wZVNldC5mcm9tU3RyaW5nKGVudGl0eS50YXJnZXQpO1xuXG4gICAgICAgIHJldHVybiBlbnRpdHlTY29wZVNldC5jb250YWluc1Njb3BlU2V0KHRhcmdldCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBjcmVkZW50aWFsJ3MgdG9rZW5UeXBlIG9yIEF1dGhlbnRpY2F0aW9uIFNjaGVtZSBtYXRjaGVzIHRoZSBvbmUgaW4gdGhlIHJlcXVlc3QsIGZhbHNlIG90aGVyd2lzZVxuICAgICAqIEBwYXJhbSBlbnRpdHlcbiAgICAgKiBAcGFyYW0gdG9rZW5UeXBlXG4gICAgICovXG4gICAgcHJpdmF0ZSBtYXRjaFRva2VuVHlwZShcbiAgICAgICAgZW50aXR5OiBDcmVkZW50aWFsRW50aXR5LFxuICAgICAgICB0b2tlblR5cGU6IEF1dGhlbnRpY2F0aW9uU2NoZW1lXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhIShlbnRpdHkudG9rZW5UeXBlICYmIGVudGl0eS50b2tlblR5cGUgPT09IHRva2VuVHlwZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBjcmVkZW50aWFsJ3Mga2V5SWQgbWF0Y2hlcyB0aGUgb25lIGluIHRoZSByZXF1ZXN0LCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKiBAcGFyYW0gZW50aXR5XG4gICAgICogQHBhcmFtIGtleUlkXG4gICAgICovXG4gICAgcHJpdmF0ZSBtYXRjaEtleUlkKGVudGl0eTogQ3JlZGVudGlhbEVudGl0eSwga2V5SWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISEoZW50aXR5LmtleUlkICYmIGVudGl0eS5rZXlJZCA9PT0ga2V5SWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgaWYgYSBnaXZlbiBjYWNoZSBlbnRpdHkgaXMgb2YgdGhlIHR5cGUgYXBwbWV0YWRhdGFcbiAgICAgKiBAcGFyYW0ga2V5XG4gICAgICovXG4gICAgcHJpdmF0ZSBpc0FwcE1ldGFkYXRhKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBrZXkuaW5kZXhPZihBUFBfTUVUQURBVEEpICE9PSAtMTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZXR1cm5zIGlmIGEgZ2l2ZW4gY2FjaGUgZW50aXR5IGlzIG9mIHRoZSB0eXBlIGF1dGhvcml0eW1ldGFkYXRhXG4gICAgICogQHBhcmFtIGtleVxuICAgICAqL1xuICAgIHByb3RlY3RlZCBpc0F1dGhvcml0eU1ldGFkYXRhKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBrZXkuaW5kZXhPZihBVVRIT1JJVFlfTUVUQURBVEFfQ09OU1RBTlRTLkNBQ0hFX0tFWSkgIT09IC0xO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgY2FjaGUga2V5IHVzZWQgZm9yIGNsb3VkIGluc3RhbmNlIG1ldGFkYXRhXG4gICAgICovXG4gICAgZ2VuZXJhdGVBdXRob3JpdHlNZXRhZGF0YUNhY2hlS2V5KGF1dGhvcml0eTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGAke0FVVEhPUklUWV9NRVRBREFUQV9DT05TVEFOVFMuQ0FDSEVfS0VZfS0ke3RoaXMuY2xpZW50SWR9LSR7YXV0aG9yaXR5fWA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGVscGVyIHRvIGNvbnZlcnQgc2VyaWFsaXplZCBkYXRhIHRvIG9iamVjdFxuICAgICAqIEBwYXJhbSBvYmpcbiAgICAgKiBAcGFyYW0ganNvblxuICAgICAqL1xuICAgIHN0YXRpYyB0b09iamVjdDxUPihvYmo6IFQsIGpzb246IG9iamVjdCk6IFQge1xuICAgICAgICBmb3IgKGNvbnN0IHByb3BlcnR5TmFtZSBpbiBqc29uKSB7XG4gICAgICAgICAgICBvYmpbcHJvcGVydHlOYW1lXSA9IGpzb25bcHJvcGVydHlOYW1lXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cbn1cblxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGNsYXNzIERlZmF1bHRTdG9yYWdlQ2xhc3MgZXh0ZW5kcyBDYWNoZU1hbmFnZXIge1xuICAgIGFzeW5jIHNldEFjY291bnQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JDb2Rlcy5tZXRob2ROb3RJbXBsZW1lbnRlZCk7XG4gICAgfVxuICAgIGdldEFjY291bnQoKTogQWNjb3VudEVudGl0eSB7XG4gICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JDb2Rlcy5tZXRob2ROb3RJbXBsZW1lbnRlZCk7XG4gICAgfVxuICAgIGFzeW5jIHNldElkVG9rZW5DcmVkZW50aWFsKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubWV0aG9kTm90SW1wbGVtZW50ZWQpO1xuICAgIH1cbiAgICBnZXRJZFRva2VuQ3JlZGVudGlhbCgpOiBJZFRva2VuRW50aXR5IHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvckNvZGVzLm1ldGhvZE5vdEltcGxlbWVudGVkKTtcbiAgICB9XG4gICAgYXN5bmMgc2V0QWNjZXNzVG9rZW5DcmVkZW50aWFsKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubWV0aG9kTm90SW1wbGVtZW50ZWQpO1xuICAgIH1cbiAgICBnZXRBY2Nlc3NUb2tlbkNyZWRlbnRpYWwoKTogQWNjZXNzVG9rZW5FbnRpdHkge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubWV0aG9kTm90SW1wbGVtZW50ZWQpO1xuICAgIH1cbiAgICBhc3luYyBzZXRSZWZyZXNoVG9rZW5DcmVkZW50aWFsKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubWV0aG9kTm90SW1wbGVtZW50ZWQpO1xuICAgIH1cbiAgICBnZXRSZWZyZXNoVG9rZW5DcmVkZW50aWFsKCk6IFJlZnJlc2hUb2tlbkVudGl0eSB7XG4gICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JDb2Rlcy5tZXRob2ROb3RJbXBsZW1lbnRlZCk7XG4gICAgfVxuICAgIHNldEFwcE1ldGFkYXRhKCk6IHZvaWQge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubWV0aG9kTm90SW1wbGVtZW50ZWQpO1xuICAgIH1cbiAgICBnZXRBcHBNZXRhZGF0YSgpOiBBcHBNZXRhZGF0YUVudGl0eSB7XG4gICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JDb2Rlcy5tZXRob2ROb3RJbXBsZW1lbnRlZCk7XG4gICAgfVxuICAgIHNldFNlcnZlclRlbGVtZXRyeSgpOiB2b2lkIHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvckNvZGVzLm1ldGhvZE5vdEltcGxlbWVudGVkKTtcbiAgICB9XG4gICAgZ2V0U2VydmVyVGVsZW1ldHJ5KCk6IFNlcnZlclRlbGVtZXRyeUVudGl0eSB7XG4gICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JDb2Rlcy5tZXRob2ROb3RJbXBsZW1lbnRlZCk7XG4gICAgfVxuICAgIHNldEF1dGhvcml0eU1ldGFkYXRhKCk6IHZvaWQge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubWV0aG9kTm90SW1wbGVtZW50ZWQpO1xuICAgIH1cbiAgICBnZXRBdXRob3JpdHlNZXRhZGF0YSgpOiBBdXRob3JpdHlNZXRhZGF0YUVudGl0eSB8IG51bGwge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubWV0aG9kTm90SW1wbGVtZW50ZWQpO1xuICAgIH1cbiAgICBnZXRBdXRob3JpdHlNZXRhZGF0YUtleXMoKTogQXJyYXk8c3RyaW5nPiB7XG4gICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JDb2Rlcy5tZXRob2ROb3RJbXBsZW1lbnRlZCk7XG4gICAgfVxuICAgIHNldFRocm90dGxpbmdDYWNoZSgpOiB2b2lkIHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvckNvZGVzLm1ldGhvZE5vdEltcGxlbWVudGVkKTtcbiAgICB9XG4gICAgZ2V0VGhyb3R0bGluZ0NhY2hlKCk6IFRocm90dGxpbmdFbnRpdHkge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubWV0aG9kTm90SW1wbGVtZW50ZWQpO1xuICAgIH1cbiAgICByZW1vdmVJdGVtKCk6IGJvb2xlYW4ge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubWV0aG9kTm90SW1wbGVtZW50ZWQpO1xuICAgIH1cbiAgICBnZXRLZXlzKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvckNvZGVzLm1ldGhvZE5vdEltcGxlbWVudGVkKTtcbiAgICB9XG4gICAgZ2V0QWNjb3VudEtleXMoKTogc3RyaW5nW10ge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubWV0aG9kTm90SW1wbGVtZW50ZWQpO1xuICAgIH1cbiAgICBnZXRUb2tlbktleXMoKTogVG9rZW5LZXlzIHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvckNvZGVzLm1ldGhvZE5vdEltcGxlbWVudGVkKTtcbiAgICB9XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IElOZXR3b3JrTW9kdWxlIH0gZnJvbSBcIi4uL25ldHdvcmsvSU5ldHdvcmtNb2R1bGUuanNcIjtcbmltcG9ydCB7IERFRkFVTFRfQ1JZUFRPX0lNUExFTUVOVEFUSU9OLCBJQ3J5cHRvIH0gZnJvbSBcIi4uL2NyeXB0by9JQ3J5cHRvLmpzXCI7XG5pbXBvcnQgeyBJTG9nZ2VyQ2FsbGJhY2ssIExvZ2dlciwgTG9nTGV2ZWwgfSBmcm9tIFwiLi4vbG9nZ2VyL0xvZ2dlci5qc1wiO1xuaW1wb3J0IHtcbiAgICBDb25zdGFudHMsXG4gICAgREVGQVVMVF9UT0tFTl9SRU5FV0FMX09GRlNFVF9TRUMsXG59IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcbmltcG9ydCB7IHZlcnNpb24gfSBmcm9tIFwiLi4vcGFja2FnZU1ldGFkYXRhLmpzXCI7XG5pbXBvcnQgeyBBdXRob3JpdHkgfSBmcm9tIFwiLi4vYXV0aG9yaXR5L0F1dGhvcml0eS5qc1wiO1xuaW1wb3J0IHsgQXp1cmVDbG91ZEluc3RhbmNlIH0gZnJvbSBcIi4uL2F1dGhvcml0eS9BdXRob3JpdHlPcHRpb25zLmpzXCI7XG5pbXBvcnQgeyBDYWNoZU1hbmFnZXIsIERlZmF1bHRTdG9yYWdlQ2xhc3MgfSBmcm9tIFwiLi4vY2FjaGUvQ2FjaGVNYW5hZ2VyLmpzXCI7XG5pbXBvcnQgeyBTZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyIH0gZnJvbSBcIi4uL3RlbGVtZXRyeS9zZXJ2ZXIvU2VydmVyVGVsZW1ldHJ5TWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgSUNhY2hlUGx1Z2luIH0gZnJvbSBcIi4uL2NhY2hlL2ludGVyZmFjZS9JQ2FjaGVQbHVnaW4uanNcIjtcbmltcG9ydCB7IElTZXJpYWxpemFibGVUb2tlbkNhY2hlIH0gZnJvbSBcIi4uL2NhY2hlL2ludGVyZmFjZS9JU2VyaWFsaXphYmxlVG9rZW5DYWNoZS5qc1wiO1xuaW1wb3J0IHsgQ2xpZW50Q3JlZGVudGlhbHMgfSBmcm9tIFwiLi4vYWNjb3VudC9DbGllbnRDcmVkZW50aWFscy5qc1wiO1xuaW1wb3J0IHsgUHJvdG9jb2xNb2RlIH0gZnJvbSBcIi4uL2F1dGhvcml0eS9Qcm90b2NvbE1vZGUuanNcIjtcbmltcG9ydCB7XG4gICAgQ2xpZW50QXV0aEVycm9yQ29kZXMsXG4gICAgY3JlYXRlQ2xpZW50QXV0aEVycm9yLFxufSBmcm9tIFwiLi4vZXJyb3IvQ2xpZW50QXV0aEVycm9yLmpzXCI7XG5cbi8qKlxuICogVXNlIHRoZSBjb25maWd1cmF0aW9uIG9iamVjdCB0byBjb25maWd1cmUgTVNBTCBNb2R1bGVzIGFuZCBpbml0aWFsaXplIHRoZSBiYXNlIGludGVyZmFjZXMgZm9yIE1TQUwuXG4gKlxuICogVGhpcyBvYmplY3QgYWxsb3dzIHlvdSB0byBjb25maWd1cmUgaW1wb3J0YW50IGVsZW1lbnRzIG9mIE1TQUwgZnVuY3Rpb25hbGl0eTpcbiAqIC0gYXV0aE9wdGlvbnMgICAgICAgICAgICAgICAgLSBBdXRoZW50aWNhdGlvbiBmb3IgYXBwbGljYXRpb25cbiAqIC0gY3J5cHRvSW50ZXJmYWNlICAgICAgICAgICAgLSBJbXBsZW1lbnRhdGlvbiBvZiBjcnlwdG8gZnVuY3Rpb25zXG4gKiAtIGxpYnJhcnlJbmZvICAgICAgICAgICAgICAgIC0gTGlicmFyeSBtZXRhZGF0YVxuICogLSB0ZWxlbWV0cnkgICAgICAgICAgICAgICAgICAtIFRlbGVtZXRyeSBvcHRpb25zIGFuZCBkYXRhXG4gKiAtIGxvZ2dlck9wdGlvbnMgICAgICAgICAgICAgIC0gTG9nZ2luZyBmb3IgYXBwbGljYXRpb25cbiAqIC0gbmV0d29ya0ludGVyZmFjZSAgICAgICAgICAgLSBOZXR3b3JrIGltcGxlbWVudGF0aW9uXG4gKiAtIHN0b3JhZ2VJbnRlcmZhY2UgICAgICAgICAgIC0gU3RvcmFnZSBpbXBsZW1lbnRhdGlvblxuICogLSBzeXN0ZW1PcHRpb25zICAgICAgICAgICAgICAtIEFkZGl0aW9uYWwgbGlicmFyeSBvcHRpb25zXG4gKiAtIGNsaWVudENyZWRlbnRpYWxzICAgICAgICAgIC0gQ3JlZGVudGlhbHMgb3B0aW9ucyBmb3IgY29uZmlkZW50aWFsIGNsaWVudHNcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdHlwZSBDbGllbnRDb25maWd1cmF0aW9uID0ge1xuICAgIGF1dGhPcHRpb25zOiBBdXRoT3B0aW9ucztcbiAgICBzeXN0ZW1PcHRpb25zPzogU3lzdGVtT3B0aW9ucztcbiAgICBsb2dnZXJPcHRpb25zPzogTG9nZ2VyT3B0aW9ucztcbiAgICBjYWNoZU9wdGlvbnM/OiBDYWNoZU9wdGlvbnM7XG4gICAgc3RvcmFnZUludGVyZmFjZT86IENhY2hlTWFuYWdlcjtcbiAgICBuZXR3b3JrSW50ZXJmYWNlPzogSU5ldHdvcmtNb2R1bGU7XG4gICAgY3J5cHRvSW50ZXJmYWNlPzogSUNyeXB0bztcbiAgICBjbGllbnRDcmVkZW50aWFscz86IENsaWVudENyZWRlbnRpYWxzO1xuICAgIGxpYnJhcnlJbmZvPzogTGlicmFyeUluZm87XG4gICAgdGVsZW1ldHJ5PzogVGVsZW1ldHJ5T3B0aW9ucztcbiAgICBzZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyPzogU2VydmVyVGVsZW1ldHJ5TWFuYWdlciB8IG51bGw7XG4gICAgcGVyc2lzdGVuY2VQbHVnaW4/OiBJQ2FjaGVQbHVnaW4gfCBudWxsO1xuICAgIHNlcmlhbGl6YWJsZUNhY2hlPzogSVNlcmlhbGl6YWJsZVRva2VuQ2FjaGUgfCBudWxsO1xufTtcblxuZXhwb3J0IHR5cGUgQ29tbW9uQ2xpZW50Q29uZmlndXJhdGlvbiA9IHtcbiAgICBhdXRoT3B0aW9uczogUmVxdWlyZWQ8QXV0aE9wdGlvbnM+O1xuICAgIHN5c3RlbU9wdGlvbnM6IFJlcXVpcmVkPFN5c3RlbU9wdGlvbnM+O1xuICAgIGxvZ2dlck9wdGlvbnM6IFJlcXVpcmVkPExvZ2dlck9wdGlvbnM+O1xuICAgIGNhY2hlT3B0aW9uczogUmVxdWlyZWQ8Q2FjaGVPcHRpb25zPjtcbiAgICBzdG9yYWdlSW50ZXJmYWNlOiBDYWNoZU1hbmFnZXI7XG4gICAgbmV0d29ya0ludGVyZmFjZTogSU5ldHdvcmtNb2R1bGU7XG4gICAgY3J5cHRvSW50ZXJmYWNlOiBSZXF1aXJlZDxJQ3J5cHRvPjtcbiAgICBsaWJyYXJ5SW5mbzogTGlicmFyeUluZm87XG4gICAgdGVsZW1ldHJ5OiBSZXF1aXJlZDxUZWxlbWV0cnlPcHRpb25zPjtcbiAgICBzZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyOiBTZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyIHwgbnVsbDtcbiAgICBjbGllbnRDcmVkZW50aWFsczogQ2xpZW50Q3JlZGVudGlhbHM7XG4gICAgcGVyc2lzdGVuY2VQbHVnaW46IElDYWNoZVBsdWdpbiB8IG51bGw7XG4gICAgc2VyaWFsaXphYmxlQ2FjaGU6IElTZXJpYWxpemFibGVUb2tlbkNhY2hlIHwgbnVsbDtcbn07XG5cbi8qKlxuICogVXNlIHRoaXMgdG8gY29uZmlndXJlIHRoZSBhdXRoIG9wdGlvbnMgaW4gdGhlIENsaWVudENvbmZpZ3VyYXRpb24gb2JqZWN0XG4gKlxuICogLSBjbGllbnRJZCAgICAgICAgICAgICAgICAgICAgLSBDbGllbnQgSUQgb2YgeW91ciBhcHAgcmVnaXN0ZXJlZCB3aXRoIG91ciBBcHBsaWNhdGlvbiByZWdpc3RyYXRpb24gcG9ydGFsIDogaHR0cHM6Ly9wb3J0YWwuYXp1cmUuY29tLyNibGFkZS9NaWNyb3NvZnRfQUFEX0lBTS9BY3RpdmVEaXJlY3RvcnlNZW51QmxhZGUvUmVnaXN0ZXJlZEFwcHNQcmV2aWV3IGluIE1pY3Jvc29mdCBJZGVudGl0eSBQbGF0Zm9ybVxuICogLSBhdXRob3JpdHkgICAgICAgICAgICAgICAgICAgLSBZb3UgY2FuIGNvbmZpZ3VyZSBhIHNwZWNpZmljIGF1dGhvcml0eSwgZGVmYXVsdHMgdG8gXCIgXCIgb3IgXCJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vY29tbW9uXCJcbiAqIC0ga25vd25BdXRob3JpdGllcyAgICAgICAgICAgIC0gQW4gYXJyYXkgb2YgVVJJcyB0aGF0IGFyZSBrbm93biB0byBiZSB2YWxpZC4gVXNlZCBpbiBCMkMgc2NlbmFyaW9zLlxuICogLSBjbG91ZERpc2NvdmVyeU1ldGFkYXRhICAgICAgLSBBIHN0cmluZyBjb250YWluaW5nIHRoZSBjbG91ZCBkaXNjb3ZlcnkgcmVzcG9uc2UuIFVzZWQgaW4gQUFEIHNjZW5hcmlvcy5cbiAqIC0gY2xpZW50Q2FwYWJpbGl0aWVzICAgICAgICAgIC0gQXJyYXkgb2YgY2FwYWJpbGl0aWVzIHdoaWNoIHdpbGwgYmUgYWRkZWQgdG8gdGhlIGNsYWltcy5hY2Nlc3NfdG9rZW4ueG1zX2NjIHJlcXVlc3QgcHJvcGVydHkgb24gZXZlcnkgbmV0d29yayByZXF1ZXN0LlxuICogLSBwcm90b2NvbE1vZGUgICAgICAgICAgICAgICAgLSBFbnVtIHRoYXQgcmVwcmVzZW50cyB0aGUgcHJvdG9jb2wgdGhhdCBtc2FsIGZvbGxvd3MuIFVzZWQgZm9yIGNvbmZpZ3VyaW5nIHByb3BlciBlbmRwb2ludHMuXG4gKiAtIHNraXBBdXRob3JpdHlNZXRhZGF0YUNhY2hlICAtIEEgZmxhZyB0byBjaG9vc2Ugd2hldGhlciB0byB1c2Ugb3Igbm90IHVzZSB0aGUgbG9jYWwgbWV0YWRhdGEgY2FjaGUgZHVyaW5nIGF1dGhvcml0eSBpbml0aWFsaXphdGlvbi4gRGVmYXVsdHMgdG8gZmFsc2UuXG4gKiAtIGluc3RhbmNlQXdhcmUgICAgICAgICAgICAgICAtIEEgZmxhZyBvZiB3aGV0aGVyIHRoZSBTVFMgd2lsbCBzZW5kIGJhY2sgYWRkaXRpb25hbCBwYXJhbWV0ZXJzIHRvIHNwZWNpZnkgd2hlcmUgdGhlIHRva2VucyBzaG91bGQgYmUgcmV0cmlldmVkIGZyb20uXG4gKiAtIHJlZGlyZWN0VXJpICAgICAgICAgICAgICAgICAtIFRoZSByZWRpcmVjdCBVUkkgd2hlcmUgYXV0aGVudGljYXRpb24gcmVzcG9uc2VzIGNhbiBiZSByZWNlaXZlZCBieSB5b3VyIGFwcGxpY2F0aW9uLiBJdCBtdXN0IGV4YWN0bHkgbWF0Y2ggb25lIG9mIHRoZSByZWRpcmVjdCBVUklzIHJlZ2lzdGVyZWQgaW4gdGhlIEF6dXJlIHBvcnRhbC5cbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdHlwZSBBdXRoT3B0aW9ucyA9IHtcbiAgICBjbGllbnRJZDogc3RyaW5nO1xuICAgIGF1dGhvcml0eTogQXV0aG9yaXR5O1xuICAgIHJlZGlyZWN0VXJpOiBzdHJpbmc7XG4gICAgY2xpZW50Q2FwYWJpbGl0aWVzPzogQXJyYXk8c3RyaW5nPjtcbiAgICBhenVyZUNsb3VkT3B0aW9ucz86IEF6dXJlQ2xvdWRPcHRpb25zO1xuICAgIHNraXBBdXRob3JpdHlNZXRhZGF0YUNhY2hlPzogYm9vbGVhbjtcbiAgICBpbnN0YW5jZUF3YXJlPzogYm9vbGVhbjtcbn07XG5cbi8qKlxuICogVXNlIHRoaXMgdG8gY29uZmlndXJlIHRva2VuIHJlbmV3YWwgaW5mbyBpbiB0aGUgQ29uZmlndXJhdGlvbiBvYmplY3RcbiAqXG4gKiAtIHRva2VuUmVuZXdhbE9mZnNldFNlY29uZHMgICAgLSBTZXRzIHRoZSB3aW5kb3cgb2Ygb2Zmc2V0IG5lZWRlZCB0byByZW5ldyB0aGUgdG9rZW4gYmVmb3JlIGV4cGlyeVxuICovXG5leHBvcnQgdHlwZSBTeXN0ZW1PcHRpb25zID0ge1xuICAgIHRva2VuUmVuZXdhbE9mZnNldFNlY29uZHM/OiBudW1iZXI7XG4gICAgcHJldmVudENvcnNQcmVmbGlnaHQ/OiBib29sZWFuO1xufTtcblxuLyoqXG4gKiAgVXNlIHRoaXMgdG8gY29uZmlndXJlIHRoZSBsb2dnaW5nIHRoYXQgTVNBTCBkb2VzLCBieSBjb25maWd1cmluZyBsb2dnZXIgb3B0aW9ucyBpbiB0aGUgQ29uZmlndXJhdGlvbiBvYmplY3RcbiAqXG4gKiAtIGxvZ2dlckNhbGxiYWNrICAgICAgICAgICAgICAgIC0gQ2FsbGJhY2sgZm9yIGxvZ2dlclxuICogLSBwaWlMb2dnaW5nRW5hYmxlZCAgICAgICAgICAgICAtIFNldHMgd2hldGhlciBwaWkgbG9nZ2luZyBpcyBlbmFibGVkXG4gKiAtIGxvZ0xldmVsICAgICAgICAgICAgICAgICAgICAgIC0gU2V0cyB0aGUgbGV2ZWwgYXQgd2hpY2ggbG9nZ2luZyBoYXBwZW5zXG4gKiAtIGNvcnJlbGF0aW9uSWQgICAgICAgICAgICAgICAgIC0gU2V0cyB0aGUgY29ycmVsYXRpb25JZCBwcmludGVkIGJ5IHRoZSBsb2dnZXJcbiAqL1xuZXhwb3J0IHR5cGUgTG9nZ2VyT3B0aW9ucyA9IHtcbiAgICBsb2dnZXJDYWxsYmFjaz86IElMb2dnZXJDYWxsYmFjaztcbiAgICBwaWlMb2dnaW5nRW5hYmxlZD86IGJvb2xlYW47XG4gICAgbG9nTGV2ZWw/OiBMb2dMZXZlbDtcbiAgICBjb3JyZWxhdGlvbklkPzogc3RyaW5nO1xufTtcblxuLyoqXG4gKiAgVXNlIHRoaXMgdG8gY29uZmlndXJlIGNyZWRlbnRpYWwgY2FjaGUgcHJlZmVyZW5jZXMgaW4gdGhlIENsaWVudENvbmZpZ3VyYXRpb24gb2JqZWN0XG4gKlxuICogLSBjbGFpbXNCYXNlZENhY2hpbmdFbmFibGVkICAgLSBTZXRzIHdoZXRoZXIgdG9rZW5zIHNob3VsZCBiZSBjYWNoZWQgYmFzZWQgb24gdGhlIGNsYWltcyBoYXNoLiBEZWZhdWx0IGlzIGZhbHNlLlxuICovXG5leHBvcnQgdHlwZSBDYWNoZU9wdGlvbnMgPSB7XG4gICAgY2xhaW1zQmFzZWRDYWNoaW5nRW5hYmxlZD86IGJvb2xlYW47XG59O1xuXG4vKipcbiAqIExpYnJhcnktc3BlY2lmaWMgb3B0aW9uc1xuICovXG5leHBvcnQgdHlwZSBMaWJyYXJ5SW5mbyA9IHtcbiAgICBza3U6IHN0cmluZztcbiAgICB2ZXJzaW9uOiBzdHJpbmc7XG4gICAgY3B1OiBzdHJpbmc7XG4gICAgb3M6IHN0cmluZztcbn07XG5cbi8qKlxuICogQXp1cmVDbG91ZEluc3RhbmNlIHNwZWNpZmljIG9wdGlvbnNcbiAqXG4gKiAtIGF6dXJlQ2xvdWRJbnN0YW5jZSAgICAgICAgICAgICAtIHN0cmluZyBlbnVtIHByb3ZpZGluZyBzaG9ydCBub3RhdGlvbiBmb3Igc292ZXJpZ24gYW5kIHB1YmxpYyBjbG91ZCBhdXRob3JpdGllc1xuICogLSB0ZW5hbnQgICAgICAgICAgICAgICAgICAgICAgICAgLSBwcm92aXNpb24gdG8gcHJvdmlkZSB0aGUgdGVuYW50IGluZm9cbiAqL1xuZXhwb3J0IHR5cGUgQXp1cmVDbG91ZE9wdGlvbnMgPSB7XG4gICAgYXp1cmVDbG91ZEluc3RhbmNlOiBBenVyZUNsb3VkSW5zdGFuY2U7XG4gICAgdGVuYW50Pzogc3RyaW5nO1xufTtcblxuZXhwb3J0IHR5cGUgVGVsZW1ldHJ5T3B0aW9ucyA9IHtcbiAgICBhcHBsaWNhdGlvbjogQXBwbGljYXRpb25UZWxlbWV0cnk7XG59O1xuXG4vKipcbiAqIFRlbGVtZXRyeSBpbmZvcm1hdGlvbiBzZW50IG9uIHJlcXVlc3RcbiAqIC0gYXBwTmFtZTogVW5pcXVlIHN0cmluZyBuYW1lIG9mIGFuIGFwcGxpY2F0aW9uXG4gKiAtIGFwcFZlcnNpb246IFZlcnNpb24gb2YgdGhlIGFwcGxpY2F0aW9uIHVzaW5nIE1TQUxcbiAqL1xuZXhwb3J0IHR5cGUgQXBwbGljYXRpb25UZWxlbWV0cnkgPSB7XG4gICAgYXBwTmFtZTogc3RyaW5nO1xuICAgIGFwcFZlcnNpb246IHN0cmluZztcbn07XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NZU1RFTV9PUFRJT05TOiBSZXF1aXJlZDxTeXN0ZW1PcHRpb25zPiA9IHtcbiAgICB0b2tlblJlbmV3YWxPZmZzZXRTZWNvbmRzOiBERUZBVUxUX1RPS0VOX1JFTkVXQUxfT0ZGU0VUX1NFQyxcbiAgICBwcmV2ZW50Q29yc1ByZWZsaWdodDogZmFsc2UsXG59O1xuXG5jb25zdCBERUZBVUxUX0xPR0dFUl9JTVBMRU1FTlRBVElPTjogUmVxdWlyZWQ8TG9nZ2VyT3B0aW9ucz4gPSB7XG4gICAgbG9nZ2VyQ2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgLy8gYWxsb3cgdXNlcnMgdG8gbm90IHNldCBsb2dnZXJDYWxsYmFja1xuICAgIH0sXG4gICAgcGlpTG9nZ2luZ0VuYWJsZWQ6IGZhbHNlLFxuICAgIGxvZ0xldmVsOiBMb2dMZXZlbC5JbmZvLFxuICAgIGNvcnJlbGF0aW9uSWQ6IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG59O1xuXG5jb25zdCBERUZBVUxUX0NBQ0hFX09QVElPTlM6IFJlcXVpcmVkPENhY2hlT3B0aW9ucz4gPSB7XG4gICAgY2xhaW1zQmFzZWRDYWNoaW5nRW5hYmxlZDogZmFsc2UsXG59O1xuXG5jb25zdCBERUZBVUxUX05FVFdPUktfSU1QTEVNRU5UQVRJT046IElOZXR3b3JrTW9kdWxlID0ge1xuICAgIGFzeW5jIHNlbmRHZXRSZXF1ZXN0QXN5bmM8VD4oKTogUHJvbWlzZTxUPiB7XG4gICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JDb2Rlcy5tZXRob2ROb3RJbXBsZW1lbnRlZCk7XG4gICAgfSxcbiAgICBhc3luYyBzZW5kUG9zdFJlcXVlc3RBc3luYzxUPigpOiBQcm9taXNlPFQ+IHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvckNvZGVzLm1ldGhvZE5vdEltcGxlbWVudGVkKTtcbiAgICB9LFxufTtcblxuY29uc3QgREVGQVVMVF9MSUJSQVJZX0lORk86IExpYnJhcnlJbmZvID0ge1xuICAgIHNrdTogQ29uc3RhbnRzLlNLVSxcbiAgICB2ZXJzaW9uOiB2ZXJzaW9uLFxuICAgIGNwdTogQ29uc3RhbnRzLkVNUFRZX1NUUklORyxcbiAgICBvczogQ29uc3RhbnRzLkVNUFRZX1NUUklORyxcbn07XG5cbmNvbnN0IERFRkFVTFRfQ0xJRU5UX0NSRURFTlRJQUxTOiBDbGllbnRDcmVkZW50aWFscyA9IHtcbiAgICBjbGllbnRTZWNyZXQ6IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgY2xpZW50QXNzZXJ0aW9uOiB1bmRlZmluZWQsXG59O1xuXG5jb25zdCBERUZBVUxUX0FaVVJFX0NMT1VEX09QVElPTlM6IEF6dXJlQ2xvdWRPcHRpb25zID0ge1xuICAgIGF6dXJlQ2xvdWRJbnN0YW5jZTogQXp1cmVDbG91ZEluc3RhbmNlLk5vbmUsXG4gICAgdGVuYW50OiBgJHtDb25zdGFudHMuREVGQVVMVF9DT01NT05fVEVOQU5UfWAsXG59O1xuXG5jb25zdCBERUZBVUxUX1RFTEVNRVRSWV9PUFRJT05TOiBSZXF1aXJlZDxUZWxlbWV0cnlPcHRpb25zPiA9IHtcbiAgICBhcHBsaWNhdGlvbjoge1xuICAgICAgICBhcHBOYW1lOiBcIlwiLFxuICAgICAgICBhcHBWZXJzaW9uOiBcIlwiLFxuICAgIH0sXG59O1xuXG4vKipcbiAqIEZ1bmN0aW9uIHRoYXQgc2V0cyB0aGUgZGVmYXVsdCBvcHRpb25zIHdoZW4gbm90IGV4cGxpY2l0bHkgY29uZmlndXJlZCBmcm9tIGFwcCBkZXZlbG9wZXJcbiAqXG4gKiBAcGFyYW0gQ29uZmlndXJhdGlvblxuICpcbiAqIEByZXR1cm5zIENvbmZpZ3VyYXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkQ2xpZW50Q29uZmlndXJhdGlvbih7XG4gICAgYXV0aE9wdGlvbnM6IHVzZXJBdXRoT3B0aW9ucyxcbiAgICBzeXN0ZW1PcHRpb25zOiB1c2VyU3lzdGVtT3B0aW9ucyxcbiAgICBsb2dnZXJPcHRpb25zOiB1c2VyTG9nZ2VyT3B0aW9uLFxuICAgIGNhY2hlT3B0aW9uczogdXNlckNhY2hlT3B0aW9ucyxcbiAgICBzdG9yYWdlSW50ZXJmYWNlOiBzdG9yYWdlSW1wbGVtZW50YXRpb24sXG4gICAgbmV0d29ya0ludGVyZmFjZTogbmV0d29ya0ltcGxlbWVudGF0aW9uLFxuICAgIGNyeXB0b0ludGVyZmFjZTogY3J5cHRvSW1wbGVtZW50YXRpb24sXG4gICAgY2xpZW50Q3JlZGVudGlhbHM6IGNsaWVudENyZWRlbnRpYWxzLFxuICAgIGxpYnJhcnlJbmZvOiBsaWJyYXJ5SW5mbyxcbiAgICB0ZWxlbWV0cnk6IHRlbGVtZXRyeSxcbiAgICBzZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyOiBzZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyLFxuICAgIHBlcnNpc3RlbmNlUGx1Z2luOiBwZXJzaXN0ZW5jZVBsdWdpbixcbiAgICBzZXJpYWxpemFibGVDYWNoZTogc2VyaWFsaXphYmxlQ2FjaGUsXG59OiBDbGllbnRDb25maWd1cmF0aW9uKTogQ29tbW9uQ2xpZW50Q29uZmlndXJhdGlvbiB7XG4gICAgY29uc3QgbG9nZ2VyT3B0aW9ucyA9IHtcbiAgICAgICAgLi4uREVGQVVMVF9MT0dHRVJfSU1QTEVNRU5UQVRJT04sXG4gICAgICAgIC4uLnVzZXJMb2dnZXJPcHRpb24sXG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGF1dGhPcHRpb25zOiBidWlsZEF1dGhPcHRpb25zKHVzZXJBdXRoT3B0aW9ucyksXG4gICAgICAgIHN5c3RlbU9wdGlvbnM6IHsgLi4uREVGQVVMVF9TWVNURU1fT1BUSU9OUywgLi4udXNlclN5c3RlbU9wdGlvbnMgfSxcbiAgICAgICAgbG9nZ2VyT3B0aW9uczogbG9nZ2VyT3B0aW9ucyxcbiAgICAgICAgY2FjaGVPcHRpb25zOiB7IC4uLkRFRkFVTFRfQ0FDSEVfT1BUSU9OUywgLi4udXNlckNhY2hlT3B0aW9ucyB9LFxuICAgICAgICBzdG9yYWdlSW50ZXJmYWNlOlxuICAgICAgICAgICAgc3RvcmFnZUltcGxlbWVudGF0aW9uIHx8XG4gICAgICAgICAgICBuZXcgRGVmYXVsdFN0b3JhZ2VDbGFzcyhcbiAgICAgICAgICAgICAgICB1c2VyQXV0aE9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgREVGQVVMVF9DUllQVE9fSU1QTEVNRU5UQVRJT04sXG4gICAgICAgICAgICAgICAgbmV3IExvZ2dlcihsb2dnZXJPcHRpb25zKVxuICAgICAgICAgICAgKSxcbiAgICAgICAgbmV0d29ya0ludGVyZmFjZTpcbiAgICAgICAgICAgIG5ldHdvcmtJbXBsZW1lbnRhdGlvbiB8fCBERUZBVUxUX05FVFdPUktfSU1QTEVNRU5UQVRJT04sXG4gICAgICAgIGNyeXB0b0ludGVyZmFjZTogY3J5cHRvSW1wbGVtZW50YXRpb24gfHwgREVGQVVMVF9DUllQVE9fSU1QTEVNRU5UQVRJT04sXG4gICAgICAgIGNsaWVudENyZWRlbnRpYWxzOiBjbGllbnRDcmVkZW50aWFscyB8fCBERUZBVUxUX0NMSUVOVF9DUkVERU5USUFMUyxcbiAgICAgICAgbGlicmFyeUluZm86IHsgLi4uREVGQVVMVF9MSUJSQVJZX0lORk8sIC4uLmxpYnJhcnlJbmZvIH0sXG4gICAgICAgIHRlbGVtZXRyeTogeyAuLi5ERUZBVUxUX1RFTEVNRVRSWV9PUFRJT05TLCAuLi50ZWxlbWV0cnkgfSxcbiAgICAgICAgc2VydmVyVGVsZW1ldHJ5TWFuYWdlcjogc2VydmVyVGVsZW1ldHJ5TWFuYWdlciB8fCBudWxsLFxuICAgICAgICBwZXJzaXN0ZW5jZVBsdWdpbjogcGVyc2lzdGVuY2VQbHVnaW4gfHwgbnVsbCxcbiAgICAgICAgc2VyaWFsaXphYmxlQ2FjaGU6IHNlcmlhbGl6YWJsZUNhY2hlIHx8IG51bGwsXG4gICAgfTtcbn1cblxuLyoqXG4gKiBDb25zdHJ1Y3QgYXV0aG9wdGlvbnMgZnJvbSB0aGUgY2xpZW50IGFuZCBwbGF0Zm9ybSBwYXNzZWQgdmFsdWVzXG4gKiBAcGFyYW0gYXV0aE9wdGlvbnNcbiAqL1xuZnVuY3Rpb24gYnVpbGRBdXRoT3B0aW9ucyhhdXRoT3B0aW9uczogQXV0aE9wdGlvbnMpOiBSZXF1aXJlZDxBdXRoT3B0aW9ucz4ge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNsaWVudENhcGFiaWxpdGllczogW10sXG4gICAgICAgIGF6dXJlQ2xvdWRPcHRpb25zOiBERUZBVUxUX0FaVVJFX0NMT1VEX09QVElPTlMsXG4gICAgICAgIHNraXBBdXRob3JpdHlNZXRhZGF0YUNhY2hlOiBmYWxzZSxcbiAgICAgICAgaW5zdGFuY2VBd2FyZTogZmFsc2UsXG4gICAgICAgIC4uLmF1dGhPcHRpb25zLFxuICAgIH07XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGNvbmZpZyBoYXMgcHJvdG9jb2xNb2RlIHNldCB0byBQcm90b2NvbE1vZGUuT0lEQywgZmFsc2Ugb3RoZXJ3aXNlXG4gKiBAcGFyYW0gQ2xpZW50Q29uZmlndXJhdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNPaWRjUHJvdG9jb2xNb2RlKGNvbmZpZzogQ2xpZW50Q29uZmlndXJhdGlvbik6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICAgIGNvbmZpZy5hdXRoT3B0aW9ucy5hdXRob3JpdHkub3B0aW9ucy5wcm90b2NvbE1vZGUgPT09IFByb3RvY29sTW9kZS5PSURDXG4gICAgKTtcbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuZXhwb3J0IHR5cGUgQ2NzQ3JlZGVudGlhbCA9IHtcbiAgICBjcmVkZW50aWFsOiBzdHJpbmc7XG4gICAgdHlwZTogQ2NzQ3JlZGVudGlhbFR5cGU7XG59O1xuXG5leHBvcnQgY29uc3QgQ2NzQ3JlZGVudGlhbFR5cGUgPSB7XG4gICAgSE9NRV9BQ0NPVU5UX0lEOiBcImhvbWVfYWNjb3VudF9pZFwiLFxuICAgIFVQTjogXCJVUE5cIixcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBDY3NDcmVkZW50aWFsVHlwZSA9XG4gICAgKHR5cGVvZiBDY3NDcmVkZW50aWFsVHlwZSlba2V5b2YgdHlwZW9mIENjc0NyZWRlbnRpYWxUeXBlXTtcbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuZXhwb3J0IGNvbnN0IENMSUVOVF9JRCA9IFwiY2xpZW50X2lkXCI7XG5leHBvcnQgY29uc3QgUkVESVJFQ1RfVVJJID0gXCJyZWRpcmVjdF91cmlcIjtcbmV4cG9ydCBjb25zdCBSRVNQT05TRV9UWVBFID0gXCJyZXNwb25zZV90eXBlXCI7XG5leHBvcnQgY29uc3QgUkVTUE9OU0VfTU9ERSA9IFwicmVzcG9uc2VfbW9kZVwiO1xuZXhwb3J0IGNvbnN0IEdSQU5UX1RZUEUgPSBcImdyYW50X3R5cGVcIjtcbmV4cG9ydCBjb25zdCBDTEFJTVMgPSBcImNsYWltc1wiO1xuZXhwb3J0IGNvbnN0IFNDT1BFID0gXCJzY29wZVwiO1xuZXhwb3J0IGNvbnN0IEVSUk9SID0gXCJlcnJvclwiO1xuZXhwb3J0IGNvbnN0IEVSUk9SX0RFU0NSSVBUSU9OID0gXCJlcnJvcl9kZXNjcmlwdGlvblwiO1xuZXhwb3J0IGNvbnN0IEFDQ0VTU19UT0tFTiA9IFwiYWNjZXNzX3Rva2VuXCI7XG5leHBvcnQgY29uc3QgSURfVE9LRU4gPSBcImlkX3Rva2VuXCI7XG5leHBvcnQgY29uc3QgUkVGUkVTSF9UT0tFTiA9IFwicmVmcmVzaF90b2tlblwiO1xuZXhwb3J0IGNvbnN0IEVYUElSRVNfSU4gPSBcImV4cGlyZXNfaW5cIjtcbmV4cG9ydCBjb25zdCBSRUZSRVNIX1RPS0VOX0VYUElSRVNfSU4gPSBcInJlZnJlc2hfdG9rZW5fZXhwaXJlc19pblwiO1xuZXhwb3J0IGNvbnN0IFNUQVRFID0gXCJzdGF0ZVwiO1xuZXhwb3J0IGNvbnN0IE5PTkNFID0gXCJub25jZVwiO1xuZXhwb3J0IGNvbnN0IFBST01QVCA9IFwicHJvbXB0XCI7XG5leHBvcnQgY29uc3QgU0VTU0lPTl9TVEFURSA9IFwic2Vzc2lvbl9zdGF0ZVwiO1xuZXhwb3J0IGNvbnN0IENMSUVOVF9JTkZPID0gXCJjbGllbnRfaW5mb1wiO1xuZXhwb3J0IGNvbnN0IENPREUgPSBcImNvZGVcIjtcbmV4cG9ydCBjb25zdCBDT0RFX0NIQUxMRU5HRSA9IFwiY29kZV9jaGFsbGVuZ2VcIjtcbmV4cG9ydCBjb25zdCBDT0RFX0NIQUxMRU5HRV9NRVRIT0QgPSBcImNvZGVfY2hhbGxlbmdlX21ldGhvZFwiO1xuZXhwb3J0IGNvbnN0IENPREVfVkVSSUZJRVIgPSBcImNvZGVfdmVyaWZpZXJcIjtcbmV4cG9ydCBjb25zdCBDTElFTlRfUkVRVUVTVF9JRCA9IFwiY2xpZW50LXJlcXVlc3QtaWRcIjtcbmV4cG9ydCBjb25zdCBYX0NMSUVOVF9TS1UgPSBcIngtY2xpZW50LVNLVVwiO1xuZXhwb3J0IGNvbnN0IFhfQ0xJRU5UX1ZFUiA9IFwieC1jbGllbnQtVkVSXCI7XG5leHBvcnQgY29uc3QgWF9DTElFTlRfT1MgPSBcIngtY2xpZW50LU9TXCI7XG5leHBvcnQgY29uc3QgWF9DTElFTlRfQ1BVID0gXCJ4LWNsaWVudC1DUFVcIjtcbmV4cG9ydCBjb25zdCBYX0NMSUVOVF9DVVJSX1RFTEVNID0gXCJ4LWNsaWVudC1jdXJyZW50LXRlbGVtZXRyeVwiO1xuZXhwb3J0IGNvbnN0IFhfQ0xJRU5UX0xBU1RfVEVMRU0gPSBcIngtY2xpZW50LWxhc3QtdGVsZW1ldHJ5XCI7XG5leHBvcnQgY29uc3QgWF9NU19MSUJfQ0FQQUJJTElUWSA9IFwieC1tcy1saWItY2FwYWJpbGl0eVwiO1xuZXhwb3J0IGNvbnN0IFhfQVBQX05BTUUgPSBcIngtYXBwLW5hbWVcIjtcbmV4cG9ydCBjb25zdCBYX0FQUF9WRVIgPSBcIngtYXBwLXZlclwiO1xuZXhwb3J0IGNvbnN0IFBPU1RfTE9HT1VUX1VSSSA9IFwicG9zdF9sb2dvdXRfcmVkaXJlY3RfdXJpXCI7XG5leHBvcnQgY29uc3QgSURfVE9LRU5fSElOVCA9IFwiaWRfdG9rZW5faGludFwiO1xuZXhwb3J0IGNvbnN0IERFVklDRV9DT0RFID0gXCJkZXZpY2VfY29kZVwiO1xuZXhwb3J0IGNvbnN0IENMSUVOVF9TRUNSRVQgPSBcImNsaWVudF9zZWNyZXRcIjtcbmV4cG9ydCBjb25zdCBDTElFTlRfQVNTRVJUSU9OID0gXCJjbGllbnRfYXNzZXJ0aW9uXCI7XG5leHBvcnQgY29uc3QgQ0xJRU5UX0FTU0VSVElPTl9UWVBFID0gXCJjbGllbnRfYXNzZXJ0aW9uX3R5cGVcIjtcbmV4cG9ydCBjb25zdCBUT0tFTl9UWVBFID0gXCJ0b2tlbl90eXBlXCI7XG5leHBvcnQgY29uc3QgUkVRX0NORiA9IFwicmVxX2NuZlwiO1xuZXhwb3J0IGNvbnN0IE9CT19BU1NFUlRJT04gPSBcImFzc2VydGlvblwiO1xuZXhwb3J0IGNvbnN0IFJFUVVFU1RFRF9UT0tFTl9VU0UgPSBcInJlcXVlc3RlZF90b2tlbl91c2VcIjtcbmV4cG9ydCBjb25zdCBPTl9CRUhBTEZfT0YgPSBcIm9uX2JlaGFsZl9vZlwiO1xuZXhwb3J0IGNvbnN0IEZPQ0kgPSBcImZvY2lcIjtcbmV4cG9ydCBjb25zdCBDQ1NfSEVBREVSID0gXCJYLUFuY2hvck1haWxib3hcIjtcbmV4cG9ydCBjb25zdCBSRVRVUk5fU1BBX0NPREUgPSBcInJldHVybl9zcGFfY29kZVwiO1xuZXhwb3J0IGNvbnN0IE5BVElWRV9CUk9LRVIgPSBcIm5hdGl2ZWJyb2tlclwiO1xuZXhwb3J0IGNvbnN0IExPR09VVF9ISU5UID0gXCJsb2dvdXRfaGludFwiO1xuZXhwb3J0IGNvbnN0IFNJRCA9IFwic2lkXCI7XG5leHBvcnQgY29uc3QgTE9HSU5fSElOVCA9IFwibG9naW5faGludFwiO1xuZXhwb3J0IGNvbnN0IERPTUFJTl9ISU5UID0gXCJkb21haW5faGludFwiO1xuZXhwb3J0IGNvbnN0IFhfQ0xJRU5UX0VYVFJBX1NLVSA9IFwieC1jbGllbnQteHRyYS1za3VcIjtcbmV4cG9ydCBjb25zdCBCUk9LRVJfQ0xJRU5UX0lEID0gXCJicmtfY2xpZW50X2lkXCI7XG5leHBvcnQgY29uc3QgQlJPS0VSX1JFRElSRUNUX1VSSSA9IFwiYnJrX3JlZGlyZWN0X3VyaVwiO1xuZXhwb3J0IGNvbnN0IElOU1RBTkNFX0FXQVJFID0gXCJpbnN0YW5jZV9hd2FyZVwiO1xuZXhwb3J0IGNvbnN0IEVBUl9KV0sgPSBcImVhcl9qd2tcIjtcbmV4cG9ydCBjb25zdCBFQVJfSldFX0NSWVBUTyA9IFwiZWFyX2p3ZV9jcnlwdG9cIjtcbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgICBSZXNwb25zZU1vZGUsXG4gICAgQ0xJRU5UX0lORk8sXG4gICAgQXV0aGVudGljYXRpb25TY2hlbWUsXG4gICAgQ2xhaW1zUmVxdWVzdEtleXMsXG4gICAgUGFzc3dvcmRHcmFudENvbnN0YW50cyxcbiAgICBPSURDX0RFRkFVTFRfU0NPUEVTLFxuICAgIFRocm90dGxpbmdDb25zdGFudHMsXG4gICAgSGVhZGVyTmFtZXMsXG4gICAgT0F1dGhSZXNwb25zZVR5cGUsXG59IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcbmltcG9ydCAqIGFzIEFBRFNlcnZlclBhcmFtS2V5cyBmcm9tIFwiLi4vY29uc3RhbnRzL0FBRFNlcnZlclBhcmFtS2V5cy5qc1wiO1xuaW1wb3J0IHsgU2NvcGVTZXQgfSBmcm9tIFwiLi9TY29wZVNldC5qc1wiO1xuaW1wb3J0IHtcbiAgICBjcmVhdGVDbGllbnRDb25maWd1cmF0aW9uRXJyb3IsXG4gICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMsXG59IGZyb20gXCIuLi9lcnJvci9DbGllbnRDb25maWd1cmF0aW9uRXJyb3IuanNcIjtcbmltcG9ydCB7IFN0cmluZ0RpY3QgfSBmcm9tIFwiLi4vdXRpbHMvTXNhbFR5cGVzLmpzXCI7XG5pbXBvcnQge1xuICAgIEFwcGxpY2F0aW9uVGVsZW1ldHJ5LFxuICAgIExpYnJhcnlJbmZvLFxufSBmcm9tIFwiLi4vY29uZmlnL0NsaWVudENvbmZpZ3VyYXRpb24uanNcIjtcbmltcG9ydCB7IFNlcnZlclRlbGVtZXRyeU1hbmFnZXIgfSBmcm9tIFwiLi4vdGVsZW1ldHJ5L3NlcnZlci9TZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyLmpzXCI7XG5pbXBvcnQgeyBDbGllbnRJbmZvIH0gZnJvbSBcIi4uL2FjY291bnQvQ2xpZW50SW5mby5qc1wiO1xuaW1wb3J0IHsgSVBlcmZvcm1hbmNlQ2xpZW50IH0gZnJvbSBcIi4uL3RlbGVtZXRyeS9wZXJmb3JtYW5jZS9JUGVyZm9ybWFuY2VDbGllbnQuanNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGluc3RydW1lbnRCcm9rZXJQYXJhbXMoXG4gICAgcGFyYW1ldGVyczogTWFwPHN0cmluZywgc3RyaW5nPixcbiAgICBjb3JyZWxhdGlvbklkPzogc3RyaW5nLFxuICAgIHBlcmZvcm1hbmNlQ2xpZW50PzogSVBlcmZvcm1hbmNlQ2xpZW50XG4pOiB2b2lkIHtcbiAgICBpZiAoIWNvcnJlbGF0aW9uSWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGNsaWVudElkID0gcGFyYW1ldGVycy5nZXQoQUFEU2VydmVyUGFyYW1LZXlzLkNMSUVOVF9JRCk7XG4gICAgaWYgKGNsaWVudElkICYmIHBhcmFtZXRlcnMuaGFzKEFBRFNlcnZlclBhcmFtS2V5cy5CUk9LRVJfQ0xJRU5UX0lEKSkge1xuICAgICAgICBwZXJmb3JtYW5jZUNsaWVudD8uYWRkRmllbGRzKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGVtYmVkZGVkQ2xpZW50SWQ6IGNsaWVudElkLFxuICAgICAgICAgICAgICAgIGVtYmVkZGVkUmVkaXJlY3RVcmk6IHBhcmFtZXRlcnMuZ2V0KFxuICAgICAgICAgICAgICAgICAgICBBQURTZXJ2ZXJQYXJhbUtleXMuUkVESVJFQ1RfVVJJXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb3JyZWxhdGlvbklkXG4gICAgICAgICk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFkZCB0aGUgZ2l2ZW4gcmVzcG9uc2VfdHlwZVxuICogQHBhcmFtIHBhcmFtZXRlcnNcbiAqIEBwYXJhbSByZXNwb25zZVR5cGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFJlc3BvbnNlVHlwZShcbiAgICBwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+LFxuICAgIHJlc3BvbnNlVHlwZTogT0F1dGhSZXNwb25zZVR5cGVcbik6IHZvaWQge1xuICAgIHBhcmFtZXRlcnMuc2V0KEFBRFNlcnZlclBhcmFtS2V5cy5SRVNQT05TRV9UWVBFLCByZXNwb25zZVR5cGUpO1xufVxuXG4vKipcbiAqIGFkZCByZXNwb25zZV9tb2RlLiBkZWZhdWx0cyB0byBxdWVyeS5cbiAqIEBwYXJhbSByZXNwb25zZU1vZGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFJlc3BvbnNlTW9kZShcbiAgICBwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+LFxuICAgIHJlc3BvbnNlTW9kZT86IFJlc3BvbnNlTW9kZVxuKTogdm9pZCB7XG4gICAgcGFyYW1ldGVycy5zZXQoXG4gICAgICAgIEFBRFNlcnZlclBhcmFtS2V5cy5SRVNQT05TRV9NT0RFLFxuICAgICAgICByZXNwb25zZU1vZGUgPyByZXNwb25zZU1vZGUgOiBSZXNwb25zZU1vZGUuUVVFUllcbiAgICApO1xufVxuXG4vKipcbiAqIEFkZCBmbGFnIHRvIGluZGljYXRlIFNUUyBzaG91bGQgYXR0ZW1wdCB0byB1c2UgV0FNIGlmIGF2YWlsYWJsZVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkTmF0aXZlQnJva2VyKHBhcmFtZXRlcnM6IE1hcDxzdHJpbmcsIHN0cmluZz4pOiB2b2lkIHtcbiAgICBwYXJhbWV0ZXJzLnNldChBQURTZXJ2ZXJQYXJhbUtleXMuTkFUSVZFX0JST0tFUiwgXCIxXCIpO1xufVxuXG4vKipcbiAqIGFkZCBzY29wZXMuIHNldCBhZGRPaWRjU2NvcGVzIHRvIGZhbHNlIHRvIHByZXZlbnQgZGVmYXVsdCBzY29wZXMgaW4gbm9uLXVzZXIgc2NlbmFyaW9zXG4gKiBAcGFyYW0gc2NvcGVTZXRcbiAqIEBwYXJhbSBhZGRPaWRjU2NvcGVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRTY29wZXMoXG4gICAgcGFyYW1ldGVyczogTWFwPHN0cmluZywgc3RyaW5nPixcbiAgICBzY29wZXM6IHN0cmluZ1tdLFxuICAgIGFkZE9pZGNTY29wZXM6IGJvb2xlYW4gPSB0cnVlLFxuICAgIGRlZmF1bHRTY29wZXM6IEFycmF5PHN0cmluZz4gPSBPSURDX0RFRkFVTFRfU0NPUEVTXG4pOiB2b2lkIHtcbiAgICAvLyBBbHdheXMgYWRkIG9wZW5pZCB0byB0aGUgc2NvcGVzIHdoZW4gYWRkaW5nIE9JREMgc2NvcGVzXG4gICAgaWYgKFxuICAgICAgICBhZGRPaWRjU2NvcGVzICYmXG4gICAgICAgICFkZWZhdWx0U2NvcGVzLmluY2x1ZGVzKFwib3BlbmlkXCIpICYmXG4gICAgICAgICFzY29wZXMuaW5jbHVkZXMoXCJvcGVuaWRcIilcbiAgICApIHtcbiAgICAgICAgZGVmYXVsdFNjb3Blcy5wdXNoKFwib3BlbmlkXCIpO1xuICAgIH1cbiAgICBjb25zdCByZXF1ZXN0U2NvcGVzID0gYWRkT2lkY1Njb3Blc1xuICAgICAgICA/IFsuLi4oc2NvcGVzIHx8IFtdKSwgLi4uZGVmYXVsdFNjb3Blc11cbiAgICAgICAgOiBzY29wZXMgfHwgW107XG4gICAgY29uc3Qgc2NvcGVTZXQgPSBuZXcgU2NvcGVTZXQocmVxdWVzdFNjb3Blcyk7XG4gICAgcGFyYW1ldGVycy5zZXQoQUFEU2VydmVyUGFyYW1LZXlzLlNDT1BFLCBzY29wZVNldC5wcmludFNjb3BlcygpKTtcbn1cblxuLyoqXG4gKiBhZGQgY2xpZW50SWRcbiAqIEBwYXJhbSBjbGllbnRJZFxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ2xpZW50SWQoXG4gICAgcGFyYW1ldGVyczogTWFwPHN0cmluZywgc3RyaW5nPixcbiAgICBjbGllbnRJZDogc3RyaW5nXG4pOiB2b2lkIHtcbiAgICBwYXJhbWV0ZXJzLnNldChBQURTZXJ2ZXJQYXJhbUtleXMuQ0xJRU5UX0lELCBjbGllbnRJZCk7XG59XG5cbi8qKlxuICogYWRkIHJlZGlyZWN0X3VyaVxuICogQHBhcmFtIHJlZGlyZWN0VXJpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRSZWRpcmVjdFVyaShcbiAgICBwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+LFxuICAgIHJlZGlyZWN0VXJpOiBzdHJpbmdcbik6IHZvaWQge1xuICAgIHBhcmFtZXRlcnMuc2V0KEFBRFNlcnZlclBhcmFtS2V5cy5SRURJUkVDVF9VUkksIHJlZGlyZWN0VXJpKTtcbn1cblxuLyoqXG4gKiBhZGQgcG9zdCBsb2dvdXQgcmVkaXJlY3RVcmlcbiAqIEBwYXJhbSByZWRpcmVjdFVyaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkUG9zdExvZ291dFJlZGlyZWN0VXJpKFxuICAgIHBhcmFtZXRlcnM6IE1hcDxzdHJpbmcsIHN0cmluZz4sXG4gICAgcmVkaXJlY3RVcmk6IHN0cmluZ1xuKTogdm9pZCB7XG4gICAgcGFyYW1ldGVycy5zZXQoQUFEU2VydmVyUGFyYW1LZXlzLlBPU1RfTE9HT1VUX1VSSSwgcmVkaXJlY3RVcmkpO1xufVxuXG4vKipcbiAqIGFkZCBpZF90b2tlbl9oaW50IHRvIGxvZ291dCByZXF1ZXN0XG4gKiBAcGFyYW0gaWRUb2tlbkhpbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZElkVG9rZW5IaW50KFxuICAgIHBhcmFtZXRlcnM6IE1hcDxzdHJpbmcsIHN0cmluZz4sXG4gICAgaWRUb2tlbkhpbnQ6IHN0cmluZ1xuKTogdm9pZCB7XG4gICAgcGFyYW1ldGVycy5zZXQoQUFEU2VydmVyUGFyYW1LZXlzLklEX1RPS0VOX0hJTlQsIGlkVG9rZW5IaW50KTtcbn1cblxuLyoqXG4gKiBhZGQgZG9tYWluX2hpbnRcbiAqIEBwYXJhbSBkb21haW5IaW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGREb21haW5IaW50KFxuICAgIHBhcmFtZXRlcnM6IE1hcDxzdHJpbmcsIHN0cmluZz4sXG4gICAgZG9tYWluSGludDogc3RyaW5nXG4pOiB2b2lkIHtcbiAgICBwYXJhbWV0ZXJzLnNldChBQURTZXJ2ZXJQYXJhbUtleXMuRE9NQUlOX0hJTlQsIGRvbWFpbkhpbnQpO1xufVxuXG4vKipcbiAqIGFkZCBsb2dpbl9oaW50XG4gKiBAcGFyYW0gbG9naW5IaW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRMb2dpbkhpbnQoXG4gICAgcGFyYW1ldGVyczogTWFwPHN0cmluZywgc3RyaW5nPixcbiAgICBsb2dpbkhpbnQ6IHN0cmluZ1xuKTogdm9pZCB7XG4gICAgcGFyYW1ldGVycy5zZXQoQUFEU2VydmVyUGFyYW1LZXlzLkxPR0lOX0hJTlQsIGxvZ2luSGludCk7XG59XG5cbi8qKlxuICogQWRkcyB0aGUgQ0NTIChDYWNoZSBDcmVkZW50aWFsIFNlcnZpY2UpIHF1ZXJ5IHBhcmFtZXRlciBmb3IgbG9naW5faGludFxuICogQHBhcmFtIGxvZ2luSGludFxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ2NzVXBuKFxuICAgIHBhcmFtZXRlcnM6IE1hcDxzdHJpbmcsIHN0cmluZz4sXG4gICAgbG9naW5IaW50OiBzdHJpbmdcbik6IHZvaWQge1xuICAgIHBhcmFtZXRlcnMuc2V0KEhlYWRlck5hbWVzLkNDU19IRUFERVIsIGBVUE46JHtsb2dpbkhpbnR9YCk7XG59XG5cbi8qKlxuICogQWRkcyB0aGUgQ0NTIChDYWNoZSBDcmVkZW50aWFsIFNlcnZpY2UpIHF1ZXJ5IHBhcmFtZXRlciBmb3IgYWNjb3VudCBvYmplY3RcbiAqIEBwYXJhbSBsb2dpbkhpbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZENjc09pZChcbiAgICBwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+LFxuICAgIGNsaWVudEluZm86IENsaWVudEluZm9cbik6IHZvaWQge1xuICAgIHBhcmFtZXRlcnMuc2V0KFxuICAgICAgICBIZWFkZXJOYW1lcy5DQ1NfSEVBREVSLFxuICAgICAgICBgT2lkOiR7Y2xpZW50SW5mby51aWR9QCR7Y2xpZW50SW5mby51dGlkfWBcbiAgICApO1xufVxuXG4vKipcbiAqIGFkZCBzaWRcbiAqIEBwYXJhbSBzaWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFNpZChwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+LCBzaWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIHBhcmFtZXRlcnMuc2V0KEFBRFNlcnZlclBhcmFtS2V5cy5TSUQsIHNpZCk7XG59XG5cbi8qKlxuICogYWRkIGNsYWltc1xuICogQHBhcmFtIGNsYWltc1xuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ2xhaW1zKFxuICAgIHBhcmFtZXRlcnM6IE1hcDxzdHJpbmcsIHN0cmluZz4sXG4gICAgY2xhaW1zPzogc3RyaW5nLFxuICAgIGNsaWVudENhcGFiaWxpdGllcz86IEFycmF5PHN0cmluZz5cbik6IHZvaWQge1xuICAgIGNvbnN0IG1lcmdlZENsYWltcyA9IGFkZENsaWVudENhcGFiaWxpdGllc1RvQ2xhaW1zKFxuICAgICAgICBjbGFpbXMsXG4gICAgICAgIGNsaWVudENhcGFiaWxpdGllc1xuICAgICk7XG4gICAgdHJ5IHtcbiAgICAgICAgSlNPTi5wYXJzZShtZXJnZWRDbGFpbXMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yKFxuICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuaW52YWxpZENsYWltc1xuICAgICAgICApO1xuICAgIH1cbiAgICBwYXJhbWV0ZXJzLnNldChBQURTZXJ2ZXJQYXJhbUtleXMuQ0xBSU1TLCBtZXJnZWRDbGFpbXMpO1xufVxuXG4vKipcbiAqIGFkZCBjb3JyZWxhdGlvbklkXG4gKiBAcGFyYW0gY29ycmVsYXRpb25JZFxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ29ycmVsYXRpb25JZChcbiAgICBwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+LFxuICAgIGNvcnJlbGF0aW9uSWQ6IHN0cmluZ1xuKTogdm9pZCB7XG4gICAgcGFyYW1ldGVycy5zZXQoQUFEU2VydmVyUGFyYW1LZXlzLkNMSUVOVF9SRVFVRVNUX0lELCBjb3JyZWxhdGlvbklkKTtcbn1cblxuLyoqXG4gKiBhZGQgbGlicmFyeSBpbmZvIHF1ZXJ5IHBhcmFtc1xuICogQHBhcmFtIGxpYnJhcnlJbmZvXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRMaWJyYXJ5SW5mbyhcbiAgICBwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+LFxuICAgIGxpYnJhcnlJbmZvOiBMaWJyYXJ5SW5mb1xuKTogdm9pZCB7XG4gICAgLy8gVGVsZW1ldHJ5IEluZm9cbiAgICBwYXJhbWV0ZXJzLnNldChBQURTZXJ2ZXJQYXJhbUtleXMuWF9DTElFTlRfU0tVLCBsaWJyYXJ5SW5mby5za3UpO1xuICAgIHBhcmFtZXRlcnMuc2V0KEFBRFNlcnZlclBhcmFtS2V5cy5YX0NMSUVOVF9WRVIsIGxpYnJhcnlJbmZvLnZlcnNpb24pO1xuICAgIGlmIChsaWJyYXJ5SW5mby5vcykge1xuICAgICAgICBwYXJhbWV0ZXJzLnNldChBQURTZXJ2ZXJQYXJhbUtleXMuWF9DTElFTlRfT1MsIGxpYnJhcnlJbmZvLm9zKTtcbiAgICB9XG4gICAgaWYgKGxpYnJhcnlJbmZvLmNwdSkge1xuICAgICAgICBwYXJhbWV0ZXJzLnNldChBQURTZXJ2ZXJQYXJhbUtleXMuWF9DTElFTlRfQ1BVLCBsaWJyYXJ5SW5mby5jcHUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBZGQgY2xpZW50IHRlbGVtZXRyeSBwYXJhbWV0ZXJzXG4gKiBAcGFyYW0gYXBwVGVsZW1ldHJ5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRBcHBsaWNhdGlvblRlbGVtZXRyeShcbiAgICBwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+LFxuICAgIGFwcFRlbGVtZXRyeTogQXBwbGljYXRpb25UZWxlbWV0cnlcbik6IHZvaWQge1xuICAgIGlmIChhcHBUZWxlbWV0cnk/LmFwcE5hbWUpIHtcbiAgICAgICAgcGFyYW1ldGVycy5zZXQoQUFEU2VydmVyUGFyYW1LZXlzLlhfQVBQX05BTUUsIGFwcFRlbGVtZXRyeS5hcHBOYW1lKTtcbiAgICB9XG5cbiAgICBpZiAoYXBwVGVsZW1ldHJ5Py5hcHBWZXJzaW9uKSB7XG4gICAgICAgIHBhcmFtZXRlcnMuc2V0KEFBRFNlcnZlclBhcmFtS2V5cy5YX0FQUF9WRVIsIGFwcFRlbGVtZXRyeS5hcHBWZXJzaW9uKTtcbiAgICB9XG59XG5cbi8qKlxuICogYWRkIHByb21wdFxuICogQHBhcmFtIHByb21wdFxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkUHJvbXB0KFxuICAgIHBhcmFtZXRlcnM6IE1hcDxzdHJpbmcsIHN0cmluZz4sXG4gICAgcHJvbXB0OiBzdHJpbmdcbik6IHZvaWQge1xuICAgIHBhcmFtZXRlcnMuc2V0KEFBRFNlcnZlclBhcmFtS2V5cy5QUk9NUFQsIHByb21wdCk7XG59XG5cbi8qKlxuICogYWRkIHN0YXRlXG4gKiBAcGFyYW0gc3RhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFN0YXRlKHBhcmFtZXRlcnM6IE1hcDxzdHJpbmcsIHN0cmluZz4sIHN0YXRlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoc3RhdGUpIHtcbiAgICAgICAgcGFyYW1ldGVycy5zZXQoQUFEU2VydmVyUGFyYW1LZXlzLlNUQVRFLCBzdGF0ZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIGFkZCBub25jZVxuICogQHBhcmFtIG5vbmNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGROb25jZShwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+LCBub25jZTogc3RyaW5nKTogdm9pZCB7XG4gICAgcGFyYW1ldGVycy5zZXQoQUFEU2VydmVyUGFyYW1LZXlzLk5PTkNFLCBub25jZSk7XG59XG5cbi8qKlxuICogYWRkIGNvZGVfY2hhbGxlbmdlIGFuZCBjb2RlX2NoYWxsZW5nZV9tZXRob2RcbiAqIC0gdGhyb3cgaWYgZWl0aGVyIG9mIHRoZW0gYXJlIG5vdCBwYXNzZWRcbiAqIEBwYXJhbSBjb2RlQ2hhbGxlbmdlXG4gKiBAcGFyYW0gY29kZUNoYWxsZW5nZU1ldGhvZFxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ29kZUNoYWxsZW5nZVBhcmFtcyhcbiAgICBwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+LFxuICAgIGNvZGVDaGFsbGVuZ2U/OiBzdHJpbmcsXG4gICAgY29kZUNoYWxsZW5nZU1ldGhvZD86IHN0cmluZ1xuKTogdm9pZCB7XG4gICAgaWYgKGNvZGVDaGFsbGVuZ2UgJiYgY29kZUNoYWxsZW5nZU1ldGhvZCkge1xuICAgICAgICBwYXJhbWV0ZXJzLnNldChBQURTZXJ2ZXJQYXJhbUtleXMuQ09ERV9DSEFMTEVOR0UsIGNvZGVDaGFsbGVuZ2UpO1xuICAgICAgICBwYXJhbWV0ZXJzLnNldChcbiAgICAgICAgICAgIEFBRFNlcnZlclBhcmFtS2V5cy5DT0RFX0NIQUxMRU5HRV9NRVRIT0QsXG4gICAgICAgICAgICBjb2RlQ2hhbGxlbmdlTWV0aG9kXG4gICAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yKFxuICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMucGtjZVBhcmFtc01pc3NpbmdcbiAgICAgICAgKTtcbiAgICB9XG59XG5cbi8qKlxuICogYWRkIHRoZSBgYXV0aG9yaXphdGlvbl9jb2RlYCBwYXNzZWQgYnkgdGhlIHVzZXIgdG8gZXhjaGFuZ2UgZm9yIGEgdG9rZW5cbiAqIEBwYXJhbSBjb2RlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRBdXRob3JpemF0aW9uQ29kZShcbiAgICBwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+LFxuICAgIGNvZGU6IHN0cmluZ1xuKTogdm9pZCB7XG4gICAgcGFyYW1ldGVycy5zZXQoQUFEU2VydmVyUGFyYW1LZXlzLkNPREUsIGNvZGUpO1xufVxuXG4vKipcbiAqIGFkZCB0aGUgYGF1dGhvcml6YXRpb25fY29kZWAgcGFzc2VkIGJ5IHRoZSB1c2VyIHRvIGV4Y2hhbmdlIGZvciBhIHRva2VuXG4gKiBAcGFyYW0gY29kZVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkRGV2aWNlQ29kZShcbiAgICBwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+LFxuICAgIGNvZGU6IHN0cmluZ1xuKTogdm9pZCB7XG4gICAgcGFyYW1ldGVycy5zZXQoQUFEU2VydmVyUGFyYW1LZXlzLkRFVklDRV9DT0RFLCBjb2RlKTtcbn1cblxuLyoqXG4gKiBhZGQgdGhlIGByZWZyZXNoVG9rZW5gIHBhc3NlZCBieSB0aGUgdXNlclxuICogQHBhcmFtIHJlZnJlc2hUb2tlblxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkUmVmcmVzaFRva2VuKFxuICAgIHBhcmFtZXRlcnM6IE1hcDxzdHJpbmcsIHN0cmluZz4sXG4gICAgcmVmcmVzaFRva2VuOiBzdHJpbmdcbik6IHZvaWQge1xuICAgIHBhcmFtZXRlcnMuc2V0KEFBRFNlcnZlclBhcmFtS2V5cy5SRUZSRVNIX1RPS0VOLCByZWZyZXNoVG9rZW4pO1xufVxuXG4vKipcbiAqIGFkZCB0aGUgYGNvZGVfdmVyaWZpZXJgIHBhc3NlZCBieSB0aGUgdXNlciB0byBleGNoYW5nZSBmb3IgYSB0b2tlblxuICogQHBhcmFtIGNvZGVWZXJpZmllclxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ29kZVZlcmlmaWVyKFxuICAgIHBhcmFtZXRlcnM6IE1hcDxzdHJpbmcsIHN0cmluZz4sXG4gICAgY29kZVZlcmlmaWVyOiBzdHJpbmdcbik6IHZvaWQge1xuICAgIHBhcmFtZXRlcnMuc2V0KEFBRFNlcnZlclBhcmFtS2V5cy5DT0RFX1ZFUklGSUVSLCBjb2RlVmVyaWZpZXIpO1xufVxuXG4vKipcbiAqIGFkZCBjbGllbnRfc2VjcmV0XG4gKiBAcGFyYW0gY2xpZW50U2VjcmV0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRDbGllbnRTZWNyZXQoXG4gICAgcGFyYW1ldGVyczogTWFwPHN0cmluZywgc3RyaW5nPixcbiAgICBjbGllbnRTZWNyZXQ6IHN0cmluZ1xuKTogdm9pZCB7XG4gICAgcGFyYW1ldGVycy5zZXQoQUFEU2VydmVyUGFyYW1LZXlzLkNMSUVOVF9TRUNSRVQsIGNsaWVudFNlY3JldCk7XG59XG5cbi8qKlxuICogYWRkIGNsaWVudEFzc2VydGlvbiBmb3IgY29uZmlkZW50aWFsIGNsaWVudCBmbG93c1xuICogQHBhcmFtIGNsaWVudEFzc2VydGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ2xpZW50QXNzZXJ0aW9uKFxuICAgIHBhcmFtZXRlcnM6IE1hcDxzdHJpbmcsIHN0cmluZz4sXG4gICAgY2xpZW50QXNzZXJ0aW9uOiBzdHJpbmdcbik6IHZvaWQge1xuICAgIGlmIChjbGllbnRBc3NlcnRpb24pIHtcbiAgICAgICAgcGFyYW1ldGVycy5zZXQoQUFEU2VydmVyUGFyYW1LZXlzLkNMSUVOVF9BU1NFUlRJT04sIGNsaWVudEFzc2VydGlvbik7XG4gICAgfVxufVxuXG4vKipcbiAqIGFkZCBjbGllbnRBc3NlcnRpb25UeXBlIGZvciBjb25maWRlbnRpYWwgY2xpZW50IGZsb3dzXG4gKiBAcGFyYW0gY2xpZW50QXNzZXJ0aW9uVHlwZVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ2xpZW50QXNzZXJ0aW9uVHlwZShcbiAgICBwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+LFxuICAgIGNsaWVudEFzc2VydGlvblR5cGU6IHN0cmluZ1xuKTogdm9pZCB7XG4gICAgaWYgKGNsaWVudEFzc2VydGlvblR5cGUpIHtcbiAgICAgICAgcGFyYW1ldGVycy5zZXQoXG4gICAgICAgICAgICBBQURTZXJ2ZXJQYXJhbUtleXMuQ0xJRU5UX0FTU0VSVElPTl9UWVBFLFxuICAgICAgICAgICAgY2xpZW50QXNzZXJ0aW9uVHlwZVxuICAgICAgICApO1xuICAgIH1cbn1cblxuLyoqXG4gKiBhZGQgT0JPIGFzc2VydGlvbiBmb3IgY29uZmlkZW50aWFsIGNsaWVudCBmbG93c1xuICogQHBhcmFtIGNsaWVudEFzc2VydGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkT2JvQXNzZXJ0aW9uKFxuICAgIHBhcmFtZXRlcnM6IE1hcDxzdHJpbmcsIHN0cmluZz4sXG4gICAgb2JvQXNzZXJ0aW9uOiBzdHJpbmdcbik6IHZvaWQge1xuICAgIHBhcmFtZXRlcnMuc2V0KEFBRFNlcnZlclBhcmFtS2V5cy5PQk9fQVNTRVJUSU9OLCBvYm9Bc3NlcnRpb24pO1xufVxuXG4vKipcbiAqIGFkZCBncmFudCB0eXBlXG4gKiBAcGFyYW0gZ3JhbnRUeXBlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRSZXF1ZXN0VG9rZW5Vc2UoXG4gICAgcGFyYW1ldGVyczogTWFwPHN0cmluZywgc3RyaW5nPixcbiAgICB0b2tlblVzZTogc3RyaW5nXG4pOiB2b2lkIHtcbiAgICBwYXJhbWV0ZXJzLnNldChBQURTZXJ2ZXJQYXJhbUtleXMuUkVRVUVTVEVEX1RPS0VOX1VTRSwgdG9rZW5Vc2UpO1xufVxuXG4vKipcbiAqIGFkZCBncmFudCB0eXBlXG4gKiBAcGFyYW0gZ3JhbnRUeXBlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRHcmFudFR5cGUoXG4gICAgcGFyYW1ldGVyczogTWFwPHN0cmluZywgc3RyaW5nPixcbiAgICBncmFudFR5cGU6IHN0cmluZ1xuKTogdm9pZCB7XG4gICAgcGFyYW1ldGVycy5zZXQoQUFEU2VydmVyUGFyYW1LZXlzLkdSQU5UX1RZUEUsIGdyYW50VHlwZSk7XG59XG5cbi8qKlxuICogYWRkIGNsaWVudCBpbmZvXG4gKlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ2xpZW50SW5mbyhwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+KTogdm9pZCB7XG4gICAgcGFyYW1ldGVycy5zZXQoQ0xJRU5UX0lORk8sIFwiMVwiKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZEluc3RhbmNlQXdhcmUocGFyYW1ldGVyczogTWFwPHN0cmluZywgc3RyaW5nPik6IHZvaWQge1xuICAgIGlmICghcGFyYW1ldGVycy5oYXMoQUFEU2VydmVyUGFyYW1LZXlzLklOU1RBTkNFX0FXQVJFKSkge1xuICAgICAgICBwYXJhbWV0ZXJzLnNldChBQURTZXJ2ZXJQYXJhbUtleXMuSU5TVEFOQ0VfQVdBUkUsIFwidHJ1ZVwiKTtcbiAgICB9XG59XG5cbi8qKlxuICogYWRkIGV4dHJhUXVlcnlQYXJhbXNcbiAqIEBwYXJhbSBlUVBhcmFtc1xuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkRXh0cmFRdWVyeVBhcmFtZXRlcnMoXG4gICAgcGFyYW1ldGVyczogTWFwPHN0cmluZywgc3RyaW5nPixcbiAgICBlUVBhcmFtczogU3RyaW5nRGljdFxuKTogdm9pZCB7XG4gICAgT2JqZWN0LmVudHJpZXMoZVFQYXJhbXMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICBpZiAoIXBhcmFtZXRlcnMuaGFzKGtleSkgJiYgdmFsdWUpIHtcbiAgICAgICAgICAgIHBhcmFtZXRlcnMuc2V0KGtleSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRDbGllbnRDYXBhYmlsaXRpZXNUb0NsYWltcyhcbiAgICBjbGFpbXM/OiBzdHJpbmcsXG4gICAgY2xpZW50Q2FwYWJpbGl0aWVzPzogQXJyYXk8c3RyaW5nPlxuKTogc3RyaW5nIHtcbiAgICBsZXQgbWVyZ2VkQ2xhaW1zOiBvYmplY3Q7XG5cbiAgICAvLyBQYXJzZSBwcm92aWRlZCBjbGFpbXMgaW50byBKU09OIG9iamVjdCBvciBpbml0aWFsaXplIGVtcHR5IG9iamVjdFxuICAgIGlmICghY2xhaW1zKSB7XG4gICAgICAgIG1lcmdlZENsYWltcyA9IHt9O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBtZXJnZWRDbGFpbXMgPSBKU09OLnBhcnNlKGNsYWltcyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudENvbmZpZ3VyYXRpb25FcnJvcihcbiAgICAgICAgICAgICAgICBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5pbnZhbGlkQ2xhaW1zXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNsaWVudENhcGFiaWxpdGllcyAmJiBjbGllbnRDYXBhYmlsaXRpZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAoIW1lcmdlZENsYWltcy5oYXNPd25Qcm9wZXJ0eShDbGFpbXNSZXF1ZXN0S2V5cy5BQ0NFU1NfVE9LRU4pKSB7XG4gICAgICAgICAgICAvLyBBZGQgYWNjZXNzX3Rva2VuIGtleSB0byBjbGFpbXMgb2JqZWN0XG4gICAgICAgICAgICBtZXJnZWRDbGFpbXNbQ2xhaW1zUmVxdWVzdEtleXMuQUNDRVNTX1RPS0VOXSA9IHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWRkIHhtc19jYyBjbGFpbSB3aXRoIHByb3ZpZGVkIGNsaWVudENhcGFiaWxpdGllcyB0byBhY2Nlc3NfdG9rZW4ga2V5XG4gICAgICAgIG1lcmdlZENsYWltc1tDbGFpbXNSZXF1ZXN0S2V5cy5BQ0NFU1NfVE9LRU5dW0NsYWltc1JlcXVlc3RLZXlzLlhNU19DQ10gPVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhbHVlczogY2xpZW50Q2FwYWJpbGl0aWVzLFxuICAgICAgICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkobWVyZ2VkQ2xhaW1zKTtcbn1cblxuLyoqXG4gKiBhZGRzIGB1c2VybmFtZWAgZm9yIFBhc3N3b3JkIEdyYW50IGZsb3dcbiAqIEBwYXJhbSB1c2VybmFtZVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkVXNlcm5hbWUoXG4gICAgcGFyYW1ldGVyczogTWFwPHN0cmluZywgc3RyaW5nPixcbiAgICB1c2VybmFtZTogc3RyaW5nXG4pOiB2b2lkIHtcbiAgICBwYXJhbWV0ZXJzLnNldChQYXNzd29yZEdyYW50Q29uc3RhbnRzLnVzZXJuYW1lLCB1c2VybmFtZSk7XG59XG5cbi8qKlxuICogYWRkcyBgcGFzc3dvcmRgIGZvciBQYXNzd29yZCBHcmFudCBmbG93XG4gKiBAcGFyYW0gcGFzc3dvcmRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFBhc3N3b3JkKFxuICAgIHBhcmFtZXRlcnM6IE1hcDxzdHJpbmcsIHN0cmluZz4sXG4gICAgcGFzc3dvcmQ6IHN0cmluZ1xuKTogdm9pZCB7XG4gICAgcGFyYW1ldGVycy5zZXQoUGFzc3dvcmRHcmFudENvbnN0YW50cy5wYXNzd29yZCwgcGFzc3dvcmQpO1xufVxuXG4vKipcbiAqIGFkZCBwb3BfandrIHRvIHF1ZXJ5IHBhcmFtc1xuICogQHBhcmFtIGNuZlN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkUG9wVG9rZW4oXG4gICAgcGFyYW1ldGVyczogTWFwPHN0cmluZywgc3RyaW5nPixcbiAgICBjbmZTdHJpbmc6IHN0cmluZ1xuKTogdm9pZCB7XG4gICAgaWYgKGNuZlN0cmluZykge1xuICAgICAgICBwYXJhbWV0ZXJzLnNldChBQURTZXJ2ZXJQYXJhbUtleXMuVE9LRU5fVFlQRSwgQXV0aGVudGljYXRpb25TY2hlbWUuUE9QKTtcbiAgICAgICAgcGFyYW1ldGVycy5zZXQoQUFEU2VydmVyUGFyYW1LZXlzLlJFUV9DTkYsIGNuZlN0cmluZyk7XG4gICAgfVxufVxuXG4vKipcbiAqIGFkZCBTU0ggSldLIGFuZCBrZXkgSUQgdG8gcXVlcnkgcGFyYW1zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRTc2hKd2soXG4gICAgcGFyYW1ldGVyczogTWFwPHN0cmluZywgc3RyaW5nPixcbiAgICBzc2hKd2tTdHJpbmc6IHN0cmluZ1xuKTogdm9pZCB7XG4gICAgaWYgKHNzaEp3a1N0cmluZykge1xuICAgICAgICBwYXJhbWV0ZXJzLnNldChBQURTZXJ2ZXJQYXJhbUtleXMuVE9LRU5fVFlQRSwgQXV0aGVudGljYXRpb25TY2hlbWUuU1NIKTtcbiAgICAgICAgcGFyYW1ldGVycy5zZXQoQUFEU2VydmVyUGFyYW1LZXlzLlJFUV9DTkYsIHNzaEp3a1N0cmluZyk7XG4gICAgfVxufVxuXG4vKipcbiAqIGFkZCBzZXJ2ZXIgdGVsZW1ldHJ5IGZpZWxkc1xuICogQHBhcmFtIHNlcnZlclRlbGVtZXRyeU1hbmFnZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFNlcnZlclRlbGVtZXRyeShcbiAgICBwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+LFxuICAgIHNlcnZlclRlbGVtZXRyeU1hbmFnZXI6IFNlcnZlclRlbGVtZXRyeU1hbmFnZXJcbik6IHZvaWQge1xuICAgIHBhcmFtZXRlcnMuc2V0KFxuICAgICAgICBBQURTZXJ2ZXJQYXJhbUtleXMuWF9DTElFTlRfQ1VSUl9URUxFTSxcbiAgICAgICAgc2VydmVyVGVsZW1ldHJ5TWFuYWdlci5nZW5lcmF0ZUN1cnJlbnRSZXF1ZXN0SGVhZGVyVmFsdWUoKVxuICAgICk7XG4gICAgcGFyYW1ldGVycy5zZXQoXG4gICAgICAgIEFBRFNlcnZlclBhcmFtS2V5cy5YX0NMSUVOVF9MQVNUX1RFTEVNLFxuICAgICAgICBzZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyLmdlbmVyYXRlTGFzdFJlcXVlc3RIZWFkZXJWYWx1ZSgpXG4gICAgKTtcbn1cblxuLyoqXG4gKiBBZGRzIHBhcmFtZXRlciB0aGF0IGluZGljYXRlcyB0byB0aGUgc2VydmVyIHRoYXQgdGhyb3R0bGluZyBpcyBzdXBwb3J0ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFRocm90dGxpbmcocGFyYW1ldGVyczogTWFwPHN0cmluZywgc3RyaW5nPik6IHZvaWQge1xuICAgIHBhcmFtZXRlcnMuc2V0KFxuICAgICAgICBBQURTZXJ2ZXJQYXJhbUtleXMuWF9NU19MSUJfQ0FQQUJJTElUWSxcbiAgICAgICAgVGhyb3R0bGluZ0NvbnN0YW50cy5YX01TX0xJQl9DQVBBQklMSVRZX1ZBTFVFXG4gICAgKTtcbn1cblxuLyoqXG4gKiBBZGRzIGxvZ291dF9oaW50IHBhcmFtZXRlciBmb3IgXCJzaWxlbnRcIiBsb2dvdXQgd2hpY2ggcHJldmVudCBzZXJ2ZXIgYWNjb3VudCBwaWNrZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZExvZ291dEhpbnQoXG4gICAgcGFyYW1ldGVyczogTWFwPHN0cmluZywgc3RyaW5nPixcbiAgICBsb2dvdXRIaW50OiBzdHJpbmdcbik6IHZvaWQge1xuICAgIHBhcmFtZXRlcnMuc2V0KEFBRFNlcnZlclBhcmFtS2V5cy5MT0dPVVRfSElOVCwgbG9nb3V0SGludCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRCcm9rZXJQYXJhbWV0ZXJzKFxuICAgIHBhcmFtZXRlcnM6IE1hcDxzdHJpbmcsIHN0cmluZz4sXG4gICAgYnJva2VyQ2xpZW50SWQ6IHN0cmluZyxcbiAgICBicm9rZXJSZWRpcmVjdFVyaTogc3RyaW5nXG4pOiB2b2lkIHtcbiAgICBpZiAoIXBhcmFtZXRlcnMuaGFzKEFBRFNlcnZlclBhcmFtS2V5cy5CUk9LRVJfQ0xJRU5UX0lEKSkge1xuICAgICAgICBwYXJhbWV0ZXJzLnNldChBQURTZXJ2ZXJQYXJhbUtleXMuQlJPS0VSX0NMSUVOVF9JRCwgYnJva2VyQ2xpZW50SWQpO1xuICAgIH1cbiAgICBpZiAoIXBhcmFtZXRlcnMuaGFzKEFBRFNlcnZlclBhcmFtS2V5cy5CUk9LRVJfUkVESVJFQ1RfVVJJKSkge1xuICAgICAgICBwYXJhbWV0ZXJzLnNldChcbiAgICAgICAgICAgIEFBRFNlcnZlclBhcmFtS2V5cy5CUk9LRVJfUkVESVJFQ1RfVVJJLFxuICAgICAgICAgICAgYnJva2VyUmVkaXJlY3RVcmlcbiAgICAgICAgKTtcbiAgICB9XG59XG5cbi8qKlxuICogQWRkIEVBUiAoRW5jcnlwdGVkIEF1dGhvcml6ZSBSZXNwb25zZSkgcmVxdWVzdCBwYXJhbWV0ZXJzXG4gKiBAcGFyYW0gcGFyYW1ldGVyc1xuICogQHBhcmFtIGp3a1xuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkRUFSUGFyYW1ldGVycyhcbiAgICBwYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+LFxuICAgIGp3azogc3RyaW5nXG4pOiB2b2lkIHtcbiAgICBwYXJhbWV0ZXJzLnNldChBQURTZXJ2ZXJQYXJhbUtleXMuRUFSX0pXSywgZW5jb2RlVVJJQ29tcG9uZW50KGp3aykpO1xuXG4gICAgLy8gZWFyX2p3ZV9jcnlwdG8gd2lsbCBhbHdheXMgaGF2ZSB2YWx1ZToge1wiYWxnXCI6XCJkaXJcIixcImVuY1wiOlwiQTI1NkdDTVwifSBzbyB3ZSBjYW4gaGFyZGNvZGUgdGhpc1xuICAgIGNvbnN0IGp3ZUNyeXB0b0I2NEVuY29kZWQgPSBcImV5SmhiR2NpT2lKa2FYSWlMQ0psYm1NaU9pSkJNalUyUjBOTkluMFwiO1xuICAgIHBhcmFtZXRlcnMuc2V0KEFBRFNlcnZlclBhcmFtS2V5cy5FQVJfSldFX0NSWVBUTywgandlQ3J5cHRvQjY0RW5jb2RlZCk7XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogVGVuYW50IERpc2NvdmVyeSBSZXNwb25zZSB3aGljaCBjb250YWlucyB0aGUgcmVsZXZhbnQgT0F1dGggZW5kcG9pbnRzIGFuZCBkYXRhIG5lZWRlZCBmb3IgYXV0aGVudGljYXRpb24gYW5kIGF1dGhvcml6YXRpb24uXG4gKi9cbmV4cG9ydCB0eXBlIE9wZW5JZENvbmZpZ1Jlc3BvbnNlID0ge1xuICAgIGF1dGhvcml6YXRpb25fZW5kcG9pbnQ6IHN0cmluZztcbiAgICB0b2tlbl9lbmRwb2ludDogc3RyaW5nO1xuICAgIGVuZF9zZXNzaW9uX2VuZHBvaW50Pzogc3RyaW5nO1xuICAgIGlzc3Vlcjogc3RyaW5nO1xuICAgIGp3a3NfdXJpOiBzdHJpbmc7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gaXNPcGVuSWRDb25maWdSZXNwb25zZShyZXNwb25zZTogb2JqZWN0KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgcmVzcG9uc2UuaGFzT3duUHJvcGVydHkoXCJhdXRob3JpemF0aW9uX2VuZHBvaW50XCIpICYmXG4gICAgICAgIHJlc3BvbnNlLmhhc093blByb3BlcnR5KFwidG9rZW5fZW5kcG9pbnRcIikgJiZcbiAgICAgICAgcmVzcG9uc2UuaGFzT3duUHJvcGVydHkoXCJpc3N1ZXJcIikgJiZcbiAgICAgICAgcmVzcG9uc2UuaGFzT3duUHJvcGVydHkoXCJqd2tzX3VyaVwiKVxuICAgICk7XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENsb3VkRGlzY292ZXJ5TWV0YWRhdGEgfSBmcm9tIFwiLi9DbG91ZERpc2NvdmVyeU1ldGFkYXRhLmpzXCI7XG5cbi8qKlxuICogVGhlIE9wZW5JRCBDb25maWd1cmF0aW9uIEVuZHBvaW50IFJlc3BvbnNlIHR5cGUuIFVzZWQgYnkgdGhlIGF1dGhvcml0eSBjbGFzcyB0byBnZXQgcmVsZXZhbnQgT0F1dGggZW5kcG9pbnRzLlxuICovXG5leHBvcnQgdHlwZSBDbG91ZEluc3RhbmNlRGlzY292ZXJ5UmVzcG9uc2UgPSB7XG4gICAgdGVuYW50X2Rpc2NvdmVyeV9lbmRwb2ludDogc3RyaW5nO1xuICAgIG1ldGFkYXRhOiBBcnJheTxDbG91ZERpc2NvdmVyeU1ldGFkYXRhPjtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0Nsb3VkSW5zdGFuY2VEaXNjb3ZlcnlSZXNwb25zZShyZXNwb25zZTogb2JqZWN0KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgcmVzcG9uc2UuaGFzT3duUHJvcGVydHkoXCJ0ZW5hbnRfZGlzY292ZXJ5X2VuZHBvaW50XCIpICYmXG4gICAgICAgIHJlc3BvbnNlLmhhc093blByb3BlcnR5KFwibWV0YWRhdGFcIilcbiAgICApO1xufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIFRoZSBPcGVuSUQgQ29uZmlndXJhdGlvbiBFbmRwb2ludCBSZXNwb25zZSB0eXBlLiBVc2VkIGJ5IHRoZSBhdXRob3JpdHkgY2xhc3MgdG8gZ2V0IHJlbGV2YW50IE9BdXRoIGVuZHBvaW50cy5cbiAqL1xuZXhwb3J0IHR5cGUgQ2xvdWRJbnN0YW5jZURpc2NvdmVyeUVycm9yUmVzcG9uc2UgPSB7XG4gICAgZXJyb3I6IFN0cmluZztcbiAgICBlcnJvcl9kZXNjcmlwdGlvbjogU3RyaW5nO1xuICAgIGVycm9yX2NvZGVzPzogQXJyYXk8TnVtYmVyPjtcbiAgICB0aW1lc3RhbXA/OiBTdHJpbmc7XG4gICAgdHJhY2VfaWQ/OiBTdHJpbmc7XG4gICAgY29ycmVsYXRpb25faWQ/OiBTdHJpbmc7XG4gICAgZXJyb3JfdXJpPzogU3RyaW5nO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGlzQ2xvdWRJbnN0YW5jZURpc2NvdmVyeUVycm9yUmVzcG9uc2UoXG4gICAgcmVzcG9uc2U6IG9iamVjdFxuKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgcmVzcG9uc2UuaGFzT3duUHJvcGVydHkoXCJlcnJvclwiKSAmJlxuICAgICAgICByZXNwb25zZS5oYXNPd25Qcm9wZXJ0eShcImVycm9yX2Rlc2NyaXB0aW9uXCIpXG4gICAgKTtcbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBFbnVtZXJhdGlvbiBvZiBvcGVyYXRpb25zIHRoYXQgYXJlIGluc3RydW1lbnRlZCBieSBoYXZlIHRoZWlyIHBlcmZvcm1hbmNlIG1lYXN1cmVkIGJ5IHRoZSBQZXJmb3JtYW5jZUNsaWVudC5cbiAqXG4gKiBAZXhwb3J0XG4gKiBAZW51bSB7bnVtYmVyfVxuICovXG5leHBvcnQgY29uc3QgUGVyZm9ybWFuY2VFdmVudHMgPSB7XG4gICAgLyoqXG4gICAgICogYWNxdWlyZVRva2VuQnlDb2RlIEFQSSAobXNhbC1icm93c2VyIGFuZCBtc2FsLW5vZGUpLlxuICAgICAqIFVzZWQgdG8gYWNxdWlyZSB0b2tlbnMgYnkgdHJhZGluZyBhbiBhdXRob3JpemF0aW9uIGNvZGUgYWdhaW5zdCB0aGUgdG9rZW4gZW5kcG9pbnQuXG4gICAgICovXG4gICAgQWNxdWlyZVRva2VuQnlDb2RlOiBcImFjcXVpcmVUb2tlbkJ5Q29kZVwiLFxuXG4gICAgLyoqXG4gICAgICogYWNxdWlyZVRva2VuQnlSZWZyZXNoVG9rZW4gQVBJIChtc2FsLWJyb3dzZXIgYW5kIG1zYWwtbm9kZSkuXG4gICAgICogVXNlZCB0byByZW5ldyBhbiBhY2Nlc3MgdG9rZW4gdXNpbmcgYSByZWZyZXNoIHRva2VuIGFnYWluc3QgdGhlIHRva2VuIGVuZHBvaW50LlxuICAgICAqL1xuICAgIEFjcXVpcmVUb2tlbkJ5UmVmcmVzaFRva2VuOiBcImFjcXVpcmVUb2tlbkJ5UmVmcmVzaFRva2VuXCIsXG5cbiAgICAvKipcbiAgICAgKiBhY3F1aXJlVG9rZW5TaWxlbnQgQVBJIChtc2FsLWJyb3dzZXIgYW5kIG1zYWwtbm9kZSkuXG4gICAgICogVXNlZCB0byBzaWxlbnRseSBhY3F1aXJlIGEgbmV3IGFjY2VzcyB0b2tlbiAoZnJvbSB0aGUgY2FjaGUgb3IgdGhlIG5ldHdvcmspLlxuICAgICAqL1xuICAgIEFjcXVpcmVUb2tlblNpbGVudDogXCJhY3F1aXJlVG9rZW5TaWxlbnRcIixcblxuICAgIC8qKlxuICAgICAqIGFjcXVpcmVUb2tlblNpbGVudEFzeW5jIChtc2FsLWJyb3dzZXIpLlxuICAgICAqIEludGVybmFsIEFQSSBmb3IgYWNxdWlyZVRva2VuU2lsZW50LlxuICAgICAqL1xuICAgIEFjcXVpcmVUb2tlblNpbGVudEFzeW5jOiBcImFjcXVpcmVUb2tlblNpbGVudEFzeW5jXCIsXG5cbiAgICAvKipcbiAgICAgKiBhY3F1aXJlVG9rZW5Qb3B1cCAobXNhbC1icm93c2VyKS5cbiAgICAgKiBVc2VkIHRvIGFjcXVpcmUgYSBuZXcgYWNjZXNzIHRva2VuIGludGVyYWN0aXZlbHkgdGhyb3VnaCBwb3AgdXBzXG4gICAgICovXG4gICAgQWNxdWlyZVRva2VuUG9wdXA6IFwiYWNxdWlyZVRva2VuUG9wdXBcIixcblxuICAgIC8qKlxuICAgICAqIGFjcXVpcmVUb2tlblByZVJlZGlyZWN0IChtc2FsLWJyb3dzZXIpLlxuICAgICAqIEZpcnN0IHBhcnQgb2YgdGhlIHJlZGlyZWN0IGZsb3cuXG4gICAgICogVXNlZCB0byBhY3F1aXJlIGEgbmV3IGFjY2VzcyB0b2tlbiBpbnRlcmFjdGl2ZWx5IHRocm91Z2ggcmVkaXJlY3RzLlxuICAgICAqL1xuICAgIEFjcXVpcmVUb2tlblByZVJlZGlyZWN0OiBcImFjcXVpcmVUb2tlblByZVJlZGlyZWN0XCIsXG5cbiAgICAvKipcbiAgICAgKiBhY3F1aXJlVG9rZW5SZWRpcmVjdCAobXNhbC1icm93c2VyKS5cbiAgICAgKiBTZWNvbmQgcGFydCBvZiB0aGUgcmVkaXJlY3QgZmxvdy5cbiAgICAgKiBVc2VkIHRvIGFjcXVpcmUgYSBuZXcgYWNjZXNzIHRva2VuIGludGVyYWN0aXZlbHkgdGhyb3VnaCByZWRpcmVjdHMuXG4gICAgICovXG4gICAgQWNxdWlyZVRva2VuUmVkaXJlY3Q6IFwiYWNxdWlyZVRva2VuUmVkaXJlY3RcIixcblxuICAgIC8qKlxuICAgICAqIGdldFB1YmxpY0tleVRodW1icHJpbnQgQVBJIGluIENyeXB0b09wdHMgY2xhc3MgKG1zYWwtYnJvd3NlcikuXG4gICAgICogVXNlZCB0byBnZW5lcmF0ZSBhIHB1YmxpYy9wcml2YXRlIGtleXBhaXIgYW5kIGdlbmVyYXRlIGEgcHVibGljIGtleSB0aHVtYnByaW50IGZvciBwb3AgcmVxdWVzdHMuXG4gICAgICovXG4gICAgQ3J5cHRvT3B0c0dldFB1YmxpY0tleVRodW1icHJpbnQ6IFwiY3J5cHRvT3B0c0dldFB1YmxpY0tleVRodW1icHJpbnRcIixcblxuICAgIC8qKlxuICAgICAqIHNpZ25Kd3QgQVBJIGluIENyeXB0b09wdHMgY2xhc3MgKG1zYWwtYnJvd3NlcikuXG4gICAgICogVXNlZCB0byBzaWduZWQgYSBwb3AgdG9rZW4uXG4gICAgICovXG4gICAgQ3J5cHRvT3B0c1NpZ25Kd3Q6IFwiY3J5cHRvT3B0c1NpZ25Kd3RcIixcblxuICAgIC8qKlxuICAgICAqIGFjcXVpcmVUb2tlbiBBUEkgaW4gdGhlIFNpbGVudENhY2hlQ2xpZW50IGNsYXNzIChtc2FsLWJyb3dzZXIpLlxuICAgICAqIFVzZWQgdG8gcmVhZCBhY2Nlc3MgdG9rZW5zIGZyb20gdGhlIGNhY2hlLlxuICAgICAqL1xuICAgIFNpbGVudENhY2hlQ2xpZW50QWNxdWlyZVRva2VuOiBcInNpbGVudENhY2hlQ2xpZW50QWNxdWlyZVRva2VuXCIsXG5cbiAgICAvKipcbiAgICAgKiBhY3F1aXJlVG9rZW4gQVBJIGluIHRoZSBTaWxlbnRJZnJhbWVDbGllbnQgY2xhc3MgKG1zYWwtYnJvd3NlcikuXG4gICAgICogVXNlZCB0byBhY3F1aXJlIGEgbmV3IHNldCBvZiB0b2tlbnMgZnJvbSB0aGUgYXV0aG9yaXplIGVuZHBvaW50IGluIGEgaGlkZGVuIGlmcmFtZS5cbiAgICAgKi9cbiAgICBTaWxlbnRJZnJhbWVDbGllbnRBY3F1aXJlVG9rZW46IFwic2lsZW50SWZyYW1lQ2xpZW50QWNxdWlyZVRva2VuXCIsXG4gICAgQXdhaXRDb25jdXJyZW50SWZyYW1lOiBcImF3YWl0Q29uY3VycmVudElmcmFtZVwiLCAvLyBUaW1lIHNwZW50IHdhaXRpbmcgZm9yIGEgY29uY3VycmVudCBpZnJhbWUgdG8gY29tcGxldGVcblxuICAgIC8qKlxuICAgICAqIGFjcXVpcmVUb2tlbiBBUEkgaW4gU2lsZW50UmVyZXNoQ2xpZW50IChtc2FsLWJyb3dzZXIpLlxuICAgICAqIFVzZWQgdG8gYWNxdWlyZSBhIG5ldyBzZXQgb2YgdG9rZW5zIGZyb20gdGhlIHRva2VuIGVuZHBvaW50IHVzaW5nIGEgcmVmcmVzaCB0b2tlbi5cbiAgICAgKi9cbiAgICBTaWxlbnRSZWZyZXNoQ2xpZW50QWNxdWlyZVRva2VuOiBcInNpbGVudFJlZnJlc2hDbGllbnRBY3F1aXJlVG9rZW5cIixcblxuICAgIC8qKlxuICAgICAqIHNzb1NpbGVudCBBUEkgKG1zYWwtYnJvd3NlcikuXG4gICAgICogVXNlZCB0byBzaWxlbnRseSBhY3F1aXJlIGFuIGF1dGhvcml6YXRpb24gY29kZSBhbmQgc2V0IG9mIHRva2VucyB1c2luZyBhIGhpZGRlbiBpZnJhbWUuXG4gICAgICovXG4gICAgU3NvU2lsZW50OiBcInNzb1NpbGVudFwiLFxuXG4gICAgLyoqXG4gICAgICogZ2V0RGlzY292ZXJlZEF1dGhvcml0eSBBUEkgaW4gU3RhbmRhcmRJbnRlcmFjdGlvbkNsaWVudCBjbGFzcyAobXNhbC1icm93c2VyKS5cbiAgICAgKiBVc2VkIHRvIGxvYWQgYXV0aG9yaXR5IG1ldGFkYXRhIGZvciBhIHJlcXVlc3QuXG4gICAgICovXG4gICAgU3RhbmRhcmRJbnRlcmFjdGlvbkNsaWVudEdldERpc2NvdmVyZWRBdXRob3JpdHk6XG4gICAgICAgIFwic3RhbmRhcmRJbnRlcmFjdGlvbkNsaWVudEdldERpc2NvdmVyZWRBdXRob3JpdHlcIixcblxuICAgIC8qKlxuICAgICAqIGFjcXVpcmVUb2tlbiBBUElzIGluIG1zYWwtYnJvd3Nlci5cbiAgICAgKiBVc2VkIHRvIG1ha2UgYW4gL2F1dGhvcml6ZSBlbmRwb2ludCBjYWxsIHdpdGggbmF0aXZlIGJyb2tlcmluZyBlbmFibGVkLlxuICAgICAqL1xuICAgIEZldGNoQWNjb3VudElkV2l0aE5hdGl2ZUJyb2tlcjogXCJmZXRjaEFjY291bnRJZFdpdGhOYXRpdmVCcm9rZXJcIixcblxuICAgIC8qKlxuICAgICAqIGFjcXVpcmVUb2tlbiBBUEkgaW4gTmF0aXZlSW50ZXJhY3Rpb25DbGllbnQgY2xhc3MgKG1zYWwtYnJvd3NlcikuXG4gICAgICogVXNlZCB0byBhY3F1aXJlIGEgdG9rZW4gZnJvbSBOYXRpdmUgY29tcG9uZW50IHdoZW4gbmF0aXZlIGJyb2tlcmluZyBpcyBlbmFibGVkLlxuICAgICAqL1xuICAgIE5hdGl2ZUludGVyYWN0aW9uQ2xpZW50QWNxdWlyZVRva2VuOiBcIm5hdGl2ZUludGVyYWN0aW9uQ2xpZW50QWNxdWlyZVRva2VuXCIsXG4gICAgLyoqXG4gICAgICogVGltZSBzcGVudCBjcmVhdGluZyBkZWZhdWx0IGhlYWRlcnMgZm9yIHJlcXVlc3RzIHRvIHRva2VuIGVuZHBvaW50XG4gICAgICovXG4gICAgQmFzZUNsaWVudENyZWF0ZVRva2VuUmVxdWVzdEhlYWRlcnM6IFwiYmFzZUNsaWVudENyZWF0ZVRva2VuUmVxdWVzdEhlYWRlcnNcIixcbiAgICAvKipcbiAgICAgKiBUaW1lIHNwZW50IHNlbmRpbmcvd2FpdGluZyBmb3IgdGhlIHJlc3BvbnNlIG9mIGEgcmVxdWVzdCB0byB0aGUgdG9rZW4gZW5kcG9pbnRcbiAgICAgKi9cbiAgICBOZXR3b3JrQ2xpZW50U2VuZFBvc3RSZXF1ZXN0QXN5bmM6IFwibmV0d29ya0NsaWVudFNlbmRQb3N0UmVxdWVzdEFzeW5jXCIsXG4gICAgUmVmcmVzaFRva2VuQ2xpZW50RXhlY3V0ZVBvc3RUb1Rva2VuRW5kcG9pbnQ6XG4gICAgICAgIFwicmVmcmVzaFRva2VuQ2xpZW50RXhlY3V0ZVBvc3RUb1Rva2VuRW5kcG9pbnRcIixcbiAgICBBdXRob3JpemF0aW9uQ29kZUNsaWVudEV4ZWN1dGVQb3N0VG9Ub2tlbkVuZHBvaW50OlxuICAgICAgICBcImF1dGhvcml6YXRpb25Db2RlQ2xpZW50RXhlY3V0ZVBvc3RUb1Rva2VuRW5kcG9pbnRcIixcbiAgICAvKipcbiAgICAgKiBVc2VkIHRvIG1lYXN1cmUgdGhlIHRpbWUgdGFrZW4gZm9yIGNvbXBsZXRpbmcgZW1iZWRkZWQtYnJva2VyIGhhbmRzaGFrZSAoUFctQnJva2VyKS5cbiAgICAgKi9cbiAgICBCcm9rZXJIYW5kaHNoYWtlOiBcImJyb2tlckhhbmRzaGFrZVwiLFxuICAgIC8qKlxuICAgICAqIGFjcXVpcmVUb2tlbkJ5UmVmcmVzaFRva2VuIEFQSSBpbiBCcm9rZXJDbGllbnRBcHBsaWNhdGlvbiAoUFctQnJva2VyKSAuXG4gICAgICovXG4gICAgQWNxdWlyZVRva2VuQnlSZWZyZXNoVG9rZW5JbkJyb2tlcjogXCJhY3F1aXJlVG9rZW5CeVJlZnJlc2hUb2tlbkluQnJva2VyXCIsXG4gICAgLyoqXG4gICAgICogVGltZSB0YWtlbiBmb3IgdG9rZW4gYWNxdWlzaXRpb24gYnkgYnJva2VyXG4gICAgICovXG4gICAgQWNxdWlyZVRva2VuQnlCcm9rZXI6IFwiYWNxdWlyZVRva2VuQnlCcm9rZXJcIixcblxuICAgIC8qKlxuICAgICAqIFRpbWUgc3BlbnQgb24gdGhlIG5ldHdvcmsgZm9yIHJlZnJlc2ggdG9rZW4gYWNxdWlzaXRpb25cbiAgICAgKi9cbiAgICBSZWZyZXNoVG9rZW5DbGllbnRFeGVjdXRlVG9rZW5SZXF1ZXN0OlxuICAgICAgICBcInJlZnJlc2hUb2tlbkNsaWVudEV4ZWN1dGVUb2tlblJlcXVlc3RcIixcblxuICAgIC8qKlxuICAgICAqIFRpbWUgdGFrZW4gZm9yIGFjcXVpcmluZyByZWZyZXNoIHRva2VuICwgcmVjb3JkcyBSVCBzaXplXG4gICAgICovXG4gICAgUmVmcmVzaFRva2VuQ2xpZW50QWNxdWlyZVRva2VuOiBcInJlZnJlc2hUb2tlbkNsaWVudEFjcXVpcmVUb2tlblwiLFxuXG4gICAgLyoqXG4gICAgICogVGltZSB0YWtlbiBmb3IgYWNxdWlyaW5nIGNhY2hlZCByZWZyZXNoIHRva2VuXG4gICAgICovXG4gICAgUmVmcmVzaFRva2VuQ2xpZW50QWNxdWlyZVRva2VuV2l0aENhY2hlZFJlZnJlc2hUb2tlbjpcbiAgICAgICAgXCJyZWZyZXNoVG9rZW5DbGllbnRBY3F1aXJlVG9rZW5XaXRoQ2FjaGVkUmVmcmVzaFRva2VuXCIsXG5cbiAgICAvKipcbiAgICAgKiBhY3F1aXJlVG9rZW5CeVJlZnJlc2hUb2tlbiBBUEkgaW4gUmVmcmVzaFRva2VuQ2xpZW50IChtc2FsLWNvbW1vbikuXG4gICAgICovXG4gICAgUmVmcmVzaFRva2VuQ2xpZW50QWNxdWlyZVRva2VuQnlSZWZyZXNoVG9rZW46XG4gICAgICAgIFwicmVmcmVzaFRva2VuQ2xpZW50QWNxdWlyZVRva2VuQnlSZWZyZXNoVG9rZW5cIixcblxuICAgIC8qKlxuICAgICAqIEhlbHBlciBmdW5jdGlvbiB0byBjcmVhdGUgdG9rZW4gcmVxdWVzdCBib2R5IGluIFJlZnJlc2hUb2tlbkNsaWVudCAobXNhbC1jb21tb24pLlxuICAgICAqL1xuICAgIFJlZnJlc2hUb2tlbkNsaWVudENyZWF0ZVRva2VuUmVxdWVzdEJvZHk6XG4gICAgICAgIFwicmVmcmVzaFRva2VuQ2xpZW50Q3JlYXRlVG9rZW5SZXF1ZXN0Qm9keVwiLFxuXG4gICAgLyoqXG4gICAgICogYWNxdWlyZVRva2VuRnJvbUNhY2hlIChtc2FsLWJyb3dzZXIpLlxuICAgICAqIEludGVybmFsIEFQSSBmb3IgYWNxdWlyaW5nIHRva2VuIGZyb20gY2FjaGVcbiAgICAgKi9cbiAgICBBY3F1aXJlVG9rZW5Gcm9tQ2FjaGU6IFwiYWNxdWlyZVRva2VuRnJvbUNhY2hlXCIsXG4gICAgU2lsZW50Rmxvd0NsaWVudEFjcXVpcmVDYWNoZWRUb2tlbjogXCJzaWxlbnRGbG93Q2xpZW50QWNxdWlyZUNhY2hlZFRva2VuXCIsXG4gICAgU2lsZW50Rmxvd0NsaWVudEdlbmVyYXRlUmVzdWx0RnJvbUNhY2hlUmVjb3JkOlxuICAgICAgICBcInNpbGVudEZsb3dDbGllbnRHZW5lcmF0ZVJlc3VsdEZyb21DYWNoZVJlY29yZFwiLFxuXG4gICAgLyoqXG4gICAgICogYWNxdWlyZVRva2VuQnlTaWxlbnRJZnJhbWUgKG1zYWwtYnJvd3NlcikuXG4gICAgICogSW50ZXJuYWwgQVBJIGZvciBhY3F1aXJpbmcgdG9rZW4gYnkgc2lsZW50IElmcmFtZVxuICAgICAqL1xuICAgIEFjcXVpcmVUb2tlbkJ5U2lsZW50SWZyYW1lOiBcImFjcXVpcmVUb2tlbkJ5U2lsZW50SWZyYW1lXCIsXG5cbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbCBBUEkgZm9yIGluaXRpYWxpemluZyBiYXNlIHJlcXVlc3QgaW4gQmFzZUludGVyYWN0aW9uQ2xpZW50IChtc2FsLWJyb3dzZXIpXG4gICAgICovXG4gICAgSW5pdGlhbGl6ZUJhc2VSZXF1ZXN0OiBcImluaXRpYWxpemVCYXNlUmVxdWVzdFwiLFxuXG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgQVBJIGZvciBpbml0aWFsaXppbmcgc2lsZW50IHJlcXVlc3QgaW4gU2lsZW50Q2FjaGVDbGllbnQgKG1zYWwtYnJvd3NlcilcbiAgICAgKi9cbiAgICBJbml0aWFsaXplU2lsZW50UmVxdWVzdDogXCJpbml0aWFsaXplU2lsZW50UmVxdWVzdFwiLFxuXG4gICAgSW5pdGlhbGl6ZUNsaWVudEFwcGxpY2F0aW9uOiBcImluaXRpYWxpemVDbGllbnRBcHBsaWNhdGlvblwiLFxuXG4gICAgSW5pdGlhbGl6ZUNhY2hlOiBcImluaXRpYWxpemVDYWNoZVwiLFxuXG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIGluIFNpbGVudElmcmFtZUNsaWVudCBjbGFzcyAobXNhbC1icm93c2VyKS5cbiAgICAgKi9cbiAgICBTaWxlbnRJZnJhbWVDbGllbnRUb2tlbkhlbHBlcjogXCJzaWxlbnRJZnJhbWVDbGllbnRUb2tlbkhlbHBlclwiLFxuXG4gICAgLyoqXG4gICAgICogU2lsZW50SGFuZGxlclxuICAgICAqL1xuICAgIFNpbGVudEhhbmRsZXJJbml0aWF0ZUF1dGhSZXF1ZXN0OiBcInNpbGVudEhhbmRsZXJJbml0aWF0ZUF1dGhSZXF1ZXN0XCIsXG4gICAgU2lsZW50SGFuZGxlck1vbml0b3JJZnJhbWVGb3JIYXNoOiBcInNpbGVudEhhbmRsZXJNb25pdG9ySWZyYW1lRm9ySGFzaFwiLFxuICAgIFNpbGVudEhhbmRsZXJMb2FkRnJhbWU6IFwic2lsZW50SGFuZGxlckxvYWRGcmFtZVwiLFxuICAgIFNpbGVudEhhbmRsZXJMb2FkRnJhbWVTeW5jOiBcInNpbGVudEhhbmRsZXJMb2FkRnJhbWVTeW5jXCIsXG5cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb25zIGluIFN0YW5kYXJkSW50ZXJhY3Rpb25DbGllbnQgY2xhc3MgKG1zYWwtYnJvd3NlcilcbiAgICAgKi9cbiAgICBTdGFuZGFyZEludGVyYWN0aW9uQ2xpZW50Q3JlYXRlQXV0aENvZGVDbGllbnQ6XG4gICAgICAgIFwic3RhbmRhcmRJbnRlcmFjdGlvbkNsaWVudENyZWF0ZUF1dGhDb2RlQ2xpZW50XCIsXG4gICAgU3RhbmRhcmRJbnRlcmFjdGlvbkNsaWVudEdldENsaWVudENvbmZpZ3VyYXRpb246XG4gICAgICAgIFwic3RhbmRhcmRJbnRlcmFjdGlvbkNsaWVudEdldENsaWVudENvbmZpZ3VyYXRpb25cIixcbiAgICBTdGFuZGFyZEludGVyYWN0aW9uQ2xpZW50SW5pdGlhbGl6ZUF1dGhvcml6YXRpb25SZXF1ZXN0OlxuICAgICAgICBcInN0YW5kYXJkSW50ZXJhY3Rpb25DbGllbnRJbml0aWFsaXplQXV0aG9yaXphdGlvblJlcXVlc3RcIixcblxuICAgIC8qKlxuICAgICAqIGdldEF1dGhDb2RlVXJsIEFQSSAobXNhbC1icm93c2VyIGFuZCBtc2FsLW5vZGUpLlxuICAgICAqL1xuICAgIEdldEF1dGhDb2RlVXJsOiBcImdldEF1dGhDb2RlVXJsXCIsXG4gICAgR2V0U3RhbmRhcmRQYXJhbXM6IFwiZ2V0U3RhbmRhcmRQYXJhbXNcIixcblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9ucyBmcm9tIEludGVyYWN0aW9uSGFuZGxlciAobXNhbC1icm93c2VyKVxuICAgICAqL1xuICAgIEhhbmRsZUNvZGVSZXNwb25zZUZyb21TZXJ2ZXI6IFwiaGFuZGxlQ29kZVJlc3BvbnNlRnJvbVNlcnZlclwiLFxuICAgIEhhbmRsZUNvZGVSZXNwb25zZTogXCJoYW5kbGVDb2RlUmVzcG9uc2VcIixcbiAgICBIYW5kbGVSZXNwb25zZUVhcjogXCJoYW5kbGVSZXNwb25zZUVhclwiLFxuICAgIEhhbmRsZVJlc3BvbnNlUGxhdGZvcm1Ccm9rZXI6IFwiaGFuZGxlUmVzcG9uc2VQbGF0Zm9ybUJyb2tlclwiLFxuICAgIEhhbmRsZVJlc3BvbnNlQ29kZTogXCJoYW5kbGVSZXNwb25zZUNvZGVcIixcbiAgICBVcGRhdGVUb2tlbkVuZHBvaW50QXV0aG9yaXR5OiBcInVwZGF0ZVRva2VuRW5kcG9pbnRBdXRob3JpdHlcIixcblxuICAgIC8qKlxuICAgICAqIEFQSXMgaW4gQXV0aG9yaXphdGlvbiBDb2RlIENsaWVudCAobXNhbC1jb21tb24pXG4gICAgICovXG4gICAgQXV0aENsaWVudEFjcXVpcmVUb2tlbjogXCJhdXRoQ2xpZW50QWNxdWlyZVRva2VuXCIsXG4gICAgQXV0aENsaWVudEV4ZWN1dGVUb2tlblJlcXVlc3Q6IFwiYXV0aENsaWVudEV4ZWN1dGVUb2tlblJlcXVlc3RcIixcbiAgICBBdXRoQ2xpZW50Q3JlYXRlVG9rZW5SZXF1ZXN0Qm9keTogXCJhdXRoQ2xpZW50Q3JlYXRlVG9rZW5SZXF1ZXN0Qm9keVwiLFxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGUgZnVuY3Rpb25zIGluIFBvcFRva2VuR2VuZXJhdG9yIChtc2FsLWNvbW1vbilcbiAgICAgKi9cbiAgICBQb3BUb2tlbkdlbmVyYXRlQ25mOiBcInBvcFRva2VuR2VuZXJhdGVDbmZcIixcbiAgICBQb3BUb2tlbkdlbmVyYXRlS2lkOiBcInBvcFRva2VuR2VuZXJhdGVLaWRcIixcblxuICAgIC8qKlxuICAgICAqIGhhbmRsZVNlcnZlclRva2VuUmVzcG9uc2UgQVBJIGluIFJlc3BvbnNlSGFuZGxlciAobXNhbC1jb21tb24pXG4gICAgICovXG4gICAgSGFuZGxlU2VydmVyVG9rZW5SZXNwb25zZTogXCJoYW5kbGVTZXJ2ZXJUb2tlblJlc3BvbnNlXCIsXG4gICAgRGVzZXJpYWxpemVSZXNwb25zZTogXCJkZXNlcmlhbGl6ZVJlc3BvbnNlXCIsXG5cbiAgICAvKipcbiAgICAgKiBBdXRob3JpdHkgZnVuY3Rpb25zXG4gICAgICovXG4gICAgQXV0aG9yaXR5RmFjdG9yeUNyZWF0ZURpc2NvdmVyZWRJbnN0YW5jZTpcbiAgICAgICAgXCJhdXRob3JpdHlGYWN0b3J5Q3JlYXRlRGlzY292ZXJlZEluc3RhbmNlXCIsXG4gICAgQXV0aG9yaXR5UmVzb2x2ZUVuZHBvaW50c0FzeW5jOiBcImF1dGhvcml0eVJlc29sdmVFbmRwb2ludHNBc3luY1wiLFxuICAgIEF1dGhvcml0eVJlc29sdmVFbmRwb2ludHNGcm9tTG9jYWxTb3VyY2VzOlxuICAgICAgICBcImF1dGhvcml0eVJlc29sdmVFbmRwb2ludHNGcm9tTG9jYWxTb3VyY2VzXCIsXG4gICAgQXV0aG9yaXR5R2V0Q2xvdWREaXNjb3ZlcnlNZXRhZGF0YUZyb21OZXR3b3JrOlxuICAgICAgICBcImF1dGhvcml0eUdldENsb3VkRGlzY292ZXJ5TWV0YWRhdGFGcm9tTmV0d29ya1wiLFxuICAgIEF1dGhvcml0eVVwZGF0ZUNsb3VkRGlzY292ZXJ5TWV0YWRhdGE6XG4gICAgICAgIFwiYXV0aG9yaXR5VXBkYXRlQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YVwiLFxuICAgIEF1dGhvcml0eUdldEVuZHBvaW50TWV0YWRhdGFGcm9tTmV0d29yazpcbiAgICAgICAgXCJhdXRob3JpdHlHZXRFbmRwb2ludE1ldGFkYXRhRnJvbU5ldHdvcmtcIixcbiAgICBBdXRob3JpdHlVcGRhdGVFbmRwb2ludE1ldGFkYXRhOiBcImF1dGhvcml0eVVwZGF0ZUVuZHBvaW50TWV0YWRhdGFcIixcbiAgICBBdXRob3JpdHlVcGRhdGVNZXRhZGF0YVdpdGhSZWdpb25hbEluZm9ybWF0aW9uOlxuICAgICAgICBcImF1dGhvcml0eVVwZGF0ZU1ldGFkYXRhV2l0aFJlZ2lvbmFsSW5mb3JtYXRpb25cIixcblxuICAgIC8qKlxuICAgICAqIFJlZ2lvbiBEaXNjb3ZlcnkgZnVuY3Rpb25zXG4gICAgICovXG4gICAgUmVnaW9uRGlzY292ZXJ5RGV0ZWN0UmVnaW9uOiBcInJlZ2lvbkRpc2NvdmVyeURldGVjdFJlZ2lvblwiLFxuICAgIFJlZ2lvbkRpc2NvdmVyeUdldFJlZ2lvbkZyb21JTURTOiBcInJlZ2lvbkRpc2NvdmVyeUdldFJlZ2lvbkZyb21JTURTXCIsXG4gICAgUmVnaW9uRGlzY292ZXJ5R2V0Q3VycmVudFZlcnNpb246IFwicmVnaW9uRGlzY292ZXJ5R2V0Q3VycmVudFZlcnNpb25cIixcblxuICAgIEFjcXVpcmVUb2tlbkJ5Q29kZUFzeW5jOiBcImFjcXVpcmVUb2tlbkJ5Q29kZUFzeW5jXCIsXG5cbiAgICBHZXRFbmRwb2ludE1ldGFkYXRhRnJvbU5ldHdvcms6IFwiZ2V0RW5kcG9pbnRNZXRhZGF0YUZyb21OZXR3b3JrXCIsXG4gICAgR2V0Q2xvdWREaXNjb3ZlcnlNZXRhZGF0YUZyb21OZXR3b3JrTWVhc3VyZW1lbnQ6XG4gICAgICAgIFwiZ2V0Q2xvdWREaXNjb3ZlcnlNZXRhZGF0YUZyb21OZXR3b3JrTWVhc3VyZW1lbnRcIixcblxuICAgIEhhbmRsZVJlZGlyZWN0UHJvbWlzZU1lYXN1cmVtZW50OiBcImhhbmRsZVJlZGlyZWN0UHJvbWlzZVwiLFxuICAgIEhhbmRsZU5hdGl2ZVJlZGlyZWN0UHJvbWlzZU1lYXN1cmVtZW50OiBcImhhbmRsZU5hdGl2ZVJlZGlyZWN0UHJvbWlzZVwiLFxuXG4gICAgVXBkYXRlQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YU1lYXN1cmVtZW50OlxuICAgICAgICBcInVwZGF0ZUNsb3VkRGlzY292ZXJ5TWV0YWRhdGFNZWFzdXJlbWVudFwiLFxuXG4gICAgVXNlcm5hbWVQYXNzd29yZENsaWVudEFjcXVpcmVUb2tlbjogXCJ1c2VybmFtZVBhc3N3b3JkQ2xpZW50QWNxdWlyZVRva2VuXCIsXG5cbiAgICBOYXRpdmVNZXNzYWdlSGFuZGxlckhhbmRzaGFrZTogXCJuYXRpdmVNZXNzYWdlSGFuZGxlckhhbmRzaGFrZVwiLFxuXG4gICAgTmF0aXZlR2VuZXJhdGVBdXRoUmVzdWx0OiBcIm5hdGl2ZUdlbmVyYXRlQXV0aFJlc3VsdFwiLFxuXG4gICAgUmVtb3ZlSGlkZGVuSWZyYW1lOiBcInJlbW92ZUhpZGRlbklmcmFtZVwiLFxuXG4gICAgLyoqXG4gICAgICogQ2FjaGUgb3BlcmF0aW9uc1xuICAgICAqL1xuICAgIENsZWFyVG9rZW5zQW5kS2V5c1dpdGhDbGFpbXM6IFwiY2xlYXJUb2tlbnNBbmRLZXlzV2l0aENsYWltc1wiLFxuICAgIENhY2hlTWFuYWdlckdldFJlZnJlc2hUb2tlbjogXCJjYWNoZU1hbmFnZXJHZXRSZWZyZXNoVG9rZW5cIixcbiAgICBJbXBvcnRFeGlzdGluZ0NhY2hlOiBcImltcG9ydEV4aXN0aW5nQ2FjaGVcIixcbiAgICBTZXRVc2VyRGF0YTogXCJzZXRVc2VyRGF0YVwiLFxuICAgIExvY2FsU3RvcmFnZVVwZGF0ZWQ6IFwibG9jYWxTdG9yYWdlVXBkYXRlZFwiLFxuXG4gICAgLyoqXG4gICAgICogQ3J5cHRvIE9wZXJhdGlvbnNcbiAgICAgKi9cbiAgICBHZW5lcmF0ZVBrY2VDb2RlczogXCJnZW5lcmF0ZVBrY2VDb2Rlc1wiLFxuICAgIEdlbmVyYXRlQ29kZVZlcmlmaWVyOiBcImdlbmVyYXRlQ29kZVZlcmlmaWVyXCIsXG4gICAgR2VuZXJhdGVDb2RlQ2hhbGxlbmdlRnJvbVZlcmlmaWVyOiBcImdlbmVyYXRlQ29kZUNoYWxsZW5nZUZyb21WZXJpZmllclwiLFxuICAgIFNoYTI1NkRpZ2VzdDogXCJzaGEyNTZEaWdlc3RcIixcbiAgICBHZXRSYW5kb21WYWx1ZXM6IFwiZ2V0UmFuZG9tVmFsdWVzXCIsXG4gICAgR2VuZXJhdGVIS0RGOiBcImdlbmVyYXRlSEtERlwiLFxuICAgIEdlbmVyYXRlQmFzZUtleTogXCJnZW5lcmF0ZUJhc2VLZXlcIixcbiAgICBCYXNlNjREZWNvZGU6IFwiYmFzZTY0RGVjb2RlXCIsXG4gICAgVXJsRW5jb2RlQXJyOiBcInVybEVuY29kZUFyclwiLFxuICAgIEVuY3J5cHQ6IFwiZW5jcnlwdFwiLFxuICAgIERlY3J5cHQ6IFwiZGVjcnlwdFwiLFxuICAgIEdlbmVyYXRlRWFyS2V5OiBcImdlbmVyYXRlRWFyS2V5XCIsXG4gICAgRGVjcnlwdEVhclJlc3BvbnNlOiBcImRlY3J5cHRFYXJSZXNwb25zZVwiLFxufSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIFBlcmZvcm1hbmNlRXZlbnRzID1cbiAgICAodHlwZW9mIFBlcmZvcm1hbmNlRXZlbnRzKVtrZXlvZiB0eXBlb2YgUGVyZm9ybWFuY2VFdmVudHNdO1xuXG5leHBvcnQgY29uc3QgUGVyZm9ybWFuY2VFdmVudEFiYnJldmlhdGlvbnM6IFJlYWRvbmx5TWFwPHN0cmluZywgc3RyaW5nPiA9XG4gICAgbmV3IE1hcChbXG4gICAgICAgIFtQZXJmb3JtYW5jZUV2ZW50cy5BY3F1aXJlVG9rZW5CeUNvZGUsIFwiQVRCeUNvZGVcIl0sXG4gICAgICAgIFtQZXJmb3JtYW5jZUV2ZW50cy5BY3F1aXJlVG9rZW5CeVJlZnJlc2hUb2tlbiwgXCJBVEJ5UlRcIl0sXG4gICAgICAgIFtQZXJmb3JtYW5jZUV2ZW50cy5BY3F1aXJlVG9rZW5TaWxlbnQsIFwiQVRTXCJdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuQWNxdWlyZVRva2VuU2lsZW50QXN5bmMsIFwiQVRTQXN5bmNcIl0sXG4gICAgICAgIFtQZXJmb3JtYW5jZUV2ZW50cy5BY3F1aXJlVG9rZW5Qb3B1cCwgXCJBVFBvcHVwXCJdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuQWNxdWlyZVRva2VuUmVkaXJlY3QsIFwiQVRSZWRpcmVjdFwiXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuQ3J5cHRvT3B0c0dldFB1YmxpY0tleVRodW1icHJpbnQsXG4gICAgICAgICAgICBcIkNyeXB0b0dldFBLVGh1bWJcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLkNyeXB0b09wdHNTaWduSnd0LCBcIkNyeXB0b1NpZ25Kd3RcIl0sXG4gICAgICAgIFtQZXJmb3JtYW5jZUV2ZW50cy5TaWxlbnRDYWNoZUNsaWVudEFjcXVpcmVUb2tlbiwgXCJTbHRDYWNoZUNsaWVudEFUXCJdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuU2lsZW50SWZyYW1lQ2xpZW50QWNxdWlyZVRva2VuLCBcIlNsdElmcmFtZUNsaWVudEFUXCJdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuU2lsZW50UmVmcmVzaENsaWVudEFjcXVpcmVUb2tlbiwgXCJTbHRSQ2xpZW50QVRcIl0sXG4gICAgICAgIFtQZXJmb3JtYW5jZUV2ZW50cy5Tc29TaWxlbnQsIFwiU3NvU2x0XCJdLFxuICAgICAgICBbXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5TdGFuZGFyZEludGVyYWN0aW9uQ2xpZW50R2V0RGlzY292ZXJlZEF1dGhvcml0eSxcbiAgICAgICAgICAgIFwiU3RkSW50Q2xpZW50R2V0RGlzY0F1dGhcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuRmV0Y2hBY2NvdW50SWRXaXRoTmF0aXZlQnJva2VyLFxuICAgICAgICAgICAgXCJGZXRjaEFjY0lkV2l0aE50dkJyb2tlclwiLFxuICAgICAgICBdLFxuICAgICAgICBbXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5OYXRpdmVJbnRlcmFjdGlvbkNsaWVudEFjcXVpcmVUb2tlbixcbiAgICAgICAgICAgIFwiTnR2SW50Q2xpZW50QVRcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuQmFzZUNsaWVudENyZWF0ZVRva2VuUmVxdWVzdEhlYWRlcnMsXG4gICAgICAgICAgICBcIkJhc2VDbGllbnRDcmVhdGVUUmVxSGVhZFwiLFxuICAgICAgICBdLFxuICAgICAgICBbXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5OZXR3b3JrQ2xpZW50U2VuZFBvc3RSZXF1ZXN0QXN5bmMsXG4gICAgICAgICAgICBcIk5ldENsaWVudFNlbmRQb3N0XCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLlJlZnJlc2hUb2tlbkNsaWVudEV4ZWN1dGVQb3N0VG9Ub2tlbkVuZHBvaW50LFxuICAgICAgICAgICAgXCJSVENsaWVudEV4ZWNQb3N0XCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkF1dGhvcml6YXRpb25Db2RlQ2xpZW50RXhlY3V0ZVBvc3RUb1Rva2VuRW5kcG9pbnQsXG4gICAgICAgICAgICBcIkF1dGhDb2RlQ2xpZW50RXhlY1Bvc3RcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLkJyb2tlckhhbmRoc2hha2UsIFwiQnJva2VySGFuZHNoYWtlXCJdLFxuICAgICAgICBbXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5BY3F1aXJlVG9rZW5CeVJlZnJlc2hUb2tlbkluQnJva2VyLFxuICAgICAgICAgICAgXCJBVEJ5UlRJbkJyb2tlclwiLFxuICAgICAgICBdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuQWNxdWlyZVRva2VuQnlCcm9rZXIsIFwiQVRCeUJyb2tlclwiXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuUmVmcmVzaFRva2VuQ2xpZW50RXhlY3V0ZVRva2VuUmVxdWVzdCxcbiAgICAgICAgICAgIFwiUlRDbGllbnRFeGVjVFJlcVwiLFxuICAgICAgICBdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuUmVmcmVzaFRva2VuQ2xpZW50QWNxdWlyZVRva2VuLCBcIlJUQ2xpZW50QVRcIl0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLlJlZnJlc2hUb2tlbkNsaWVudEFjcXVpcmVUb2tlbldpdGhDYWNoZWRSZWZyZXNoVG9rZW4sXG4gICAgICAgICAgICBcIlJUQ2xpZW50QVRXaXRoQ2FjaGVkUlRcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuUmVmcmVzaFRva2VuQ2xpZW50QWNxdWlyZVRva2VuQnlSZWZyZXNoVG9rZW4sXG4gICAgICAgICAgICBcIlJUQ2xpZW50QVRCeVJUXCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLlJlZnJlc2hUb2tlbkNsaWVudENyZWF0ZVRva2VuUmVxdWVzdEJvZHksXG4gICAgICAgICAgICBcIlJUQ2xpZW50Q3JlYXRlVFJlcUJvZHlcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLkFjcXVpcmVUb2tlbkZyb21DYWNoZSwgXCJBVEZyb21DYWNoZVwiXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuU2lsZW50Rmxvd0NsaWVudEFjcXVpcmVDYWNoZWRUb2tlbixcbiAgICAgICAgICAgIFwiU2x0Rmxvd0NsaWVudEFUQ2FjaGVkXCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLlNpbGVudEZsb3dDbGllbnRHZW5lcmF0ZVJlc3VsdEZyb21DYWNoZVJlY29yZCxcbiAgICAgICAgICAgIFwiU2x0Rmxvd0NsaWVudEdlblJlc0Zyb21DYWNoZVwiLFxuICAgICAgICBdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuQWNxdWlyZVRva2VuQnlTaWxlbnRJZnJhbWUsIFwiQVRCeVNsdElmcmFtZVwiXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLkluaXRpYWxpemVCYXNlUmVxdWVzdCwgXCJJbml0QmFzZVJlcVwiXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLkluaXRpYWxpemVTaWxlbnRSZXF1ZXN0LCBcIkluaXRTbHRSZXFcIl0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkluaXRpYWxpemVDbGllbnRBcHBsaWNhdGlvbixcbiAgICAgICAgICAgIFwiSW5pdENsaWVudEFwcGxpY2F0aW9uXCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtQZXJmb3JtYW5jZUV2ZW50cy5Jbml0aWFsaXplQ2FjaGUsIFwiSW5pdENhY2hlXCJdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuSW1wb3J0RXhpc3RpbmdDYWNoZSwgXCJpbXBvcnRDYWNoZVwiXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLlNldFVzZXJEYXRhLCBcInNldFVzZXJEYXRhXCJdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuTG9jYWxTdG9yYWdlVXBkYXRlZCwgXCJsb2NhbFN0b3JhZ2VVcGRhdGVkXCJdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuU2lsZW50SWZyYW1lQ2xpZW50VG9rZW5IZWxwZXIsIFwiU0lDbGllbnRUSGVscGVyXCJdLFxuICAgICAgICBbXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5TaWxlbnRIYW5kbGVySW5pdGlhdGVBdXRoUmVxdWVzdCxcbiAgICAgICAgICAgIFwiU0hhbmRsZXJJbml0QXV0aFJlcVwiLFxuICAgICAgICBdLFxuICAgICAgICBbXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5TaWxlbnRIYW5kbGVyTW9uaXRvcklmcmFtZUZvckhhc2gsXG4gICAgICAgICAgICBcIlNsdEhhbmRsZXJNb25pdG9ySWZyYW1lRm9ySGFzaFwiLFxuICAgICAgICBdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuU2lsZW50SGFuZGxlckxvYWRGcmFtZSwgXCJTSGFuZGxlckxvYWRGcmFtZVwiXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLlNpbGVudEhhbmRsZXJMb2FkRnJhbWVTeW5jLCBcIlNIYW5kbGVyTG9hZEZyYW1lU3luY1wiXSxcblxuICAgICAgICBbXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5TdGFuZGFyZEludGVyYWN0aW9uQ2xpZW50Q3JlYXRlQXV0aENvZGVDbGllbnQsXG4gICAgICAgICAgICBcIlN0ZEludENsaWVudENyZWF0ZUF1dGhDb2RlQ2xpZW50XCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLlN0YW5kYXJkSW50ZXJhY3Rpb25DbGllbnRHZXRDbGllbnRDb25maWd1cmF0aW9uLFxuICAgICAgICAgICAgXCJTdGRJbnRDbGllbnRHZXRDbGllbnRDb25mXCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLlN0YW5kYXJkSW50ZXJhY3Rpb25DbGllbnRJbml0aWFsaXplQXV0aG9yaXphdGlvblJlcXVlc3QsXG4gICAgICAgICAgICBcIlN0ZEludENsaWVudEluaXRBdXRoUmVxXCIsXG4gICAgICAgIF0sXG5cbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLkdldEF1dGhDb2RlVXJsLCBcIkdldEF1dGhDb2RlVXJsXCJdLFxuXG4gICAgICAgIFtcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkhhbmRsZUNvZGVSZXNwb25zZUZyb21TZXJ2ZXIsXG4gICAgICAgICAgICBcIkhhbmRsZUNvZGVSZXNGcm9tU2VydmVyXCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtQZXJmb3JtYW5jZUV2ZW50cy5IYW5kbGVDb2RlUmVzcG9uc2UsIFwiSGFuZGxlQ29kZVJlc3BcIl0sXG4gICAgICAgIFtQZXJmb3JtYW5jZUV2ZW50cy5IYW5kbGVSZXNwb25zZUVhciwgXCJIYW5kbGVSZXNwRWFyXCJdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuSGFuZGxlUmVzcG9uc2VDb2RlLCBcIkhhbmRsZVJlc3BDb2RlXCJdLFxuICAgICAgICBbXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5IYW5kbGVSZXNwb25zZVBsYXRmb3JtQnJva2VyLFxuICAgICAgICAgICAgXCJIYW5kbGVSZXNwUGxhdEJyb2tlclwiLFxuICAgICAgICBdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuVXBkYXRlVG9rZW5FbmRwb2ludEF1dGhvcml0eSwgXCJVcGRURW5kcG9pbnRBdXRoXCJdLFxuXG4gICAgICAgIFtQZXJmb3JtYW5jZUV2ZW50cy5BdXRoQ2xpZW50QWNxdWlyZVRva2VuLCBcIkF1dGhDbGllbnRBVFwiXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLkF1dGhDbGllbnRFeGVjdXRlVG9rZW5SZXF1ZXN0LCBcIkF1dGhDbGllbnRFeGVjVFJlcVwiXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuQXV0aENsaWVudENyZWF0ZVRva2VuUmVxdWVzdEJvZHksXG4gICAgICAgICAgICBcIkF1dGhDbGllbnRDcmVhdGVUUmVxQm9keVwiLFxuICAgICAgICBdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuUG9wVG9rZW5HZW5lcmF0ZUNuZiwgXCJQb3BUR2VuQ25mXCJdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuUG9wVG9rZW5HZW5lcmF0ZUtpZCwgXCJQb3BUR2VuS2lkXCJdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuSGFuZGxlU2VydmVyVG9rZW5SZXNwb25zZSwgXCJIYW5kbGVTZXJ2ZXJUUmVzXCJdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuRGVzZXJpYWxpemVSZXNwb25zZSwgXCJEZXNlcmlhbGl6ZVJlc1wiXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuQXV0aG9yaXR5RmFjdG9yeUNyZWF0ZURpc2NvdmVyZWRJbnN0YW5jZSxcbiAgICAgICAgICAgIFwiQXV0aEZhY3RDcmVhdGVEaXNjSW5zdFwiLFxuICAgICAgICBdLFxuICAgICAgICBbXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5BdXRob3JpdHlSZXNvbHZlRW5kcG9pbnRzQXN5bmMsXG4gICAgICAgICAgICBcIkF1dGhSZXNvbHZlRW5kcG9pbnRzQXN5bmNcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuQXV0aG9yaXR5UmVzb2x2ZUVuZHBvaW50c0Zyb21Mb2NhbFNvdXJjZXMsXG4gICAgICAgICAgICBcIkF1dGhSZXNvbHZlRW5kcG9pbnRzRnJvbUxvY2FsXCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkF1dGhvcml0eUdldENsb3VkRGlzY292ZXJ5TWV0YWRhdGFGcm9tTmV0d29yayxcbiAgICAgICAgICAgIFwiQXV0aEdldENETWV0YUZyb21OZXRcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuQXV0aG9yaXR5VXBkYXRlQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YSxcbiAgICAgICAgICAgIFwiQXV0aFVwZENETWV0YVwiLFxuICAgICAgICBdLFxuICAgICAgICBbXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5BdXRob3JpdHlHZXRFbmRwb2ludE1ldGFkYXRhRnJvbU5ldHdvcmssXG4gICAgICAgICAgICBcIkF1dGhVcGRDRE1ldGFGcm9tTmV0XCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkF1dGhvcml0eVVwZGF0ZUVuZHBvaW50TWV0YWRhdGEsXG4gICAgICAgICAgICBcIkF1dGhVcGRFbmRwb2ludE1ldGFcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuQXV0aG9yaXR5VXBkYXRlTWV0YWRhdGFXaXRoUmVnaW9uYWxJbmZvcm1hdGlvbixcbiAgICAgICAgICAgIFwiQXV0aFVwZE1ldGFXaXRoUmVnSW5mb1wiLFxuICAgICAgICBdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuUmVnaW9uRGlzY292ZXJ5RGV0ZWN0UmVnaW9uLCBcIlJlZ0Rpc2NEZXRlY3RSZWdcIl0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLlJlZ2lvbkRpc2NvdmVyeUdldFJlZ2lvbkZyb21JTURTLFxuICAgICAgICAgICAgXCJSZWdEaXNjR2V0UmVnRnJvbUlNRFNcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuUmVnaW9uRGlzY292ZXJ5R2V0Q3VycmVudFZlcnNpb24sXG4gICAgICAgICAgICBcIlJlZ0Rpc2NHZXRDdXJyZW50VmVyXCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtQZXJmb3JtYW5jZUV2ZW50cy5BY3F1aXJlVG9rZW5CeUNvZGVBc3luYywgXCJBVEJ5Q29kZUFzeW5jXCJdLFxuICAgICAgICBbXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5HZXRFbmRwb2ludE1ldGFkYXRhRnJvbU5ldHdvcmssXG4gICAgICAgICAgICBcIkdldEVuZHBvaW50TWV0YUZyb21OZXRcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuR2V0Q2xvdWREaXNjb3ZlcnlNZXRhZGF0YUZyb21OZXR3b3JrTWVhc3VyZW1lbnQsXG4gICAgICAgICAgICBcIkdldENETWV0YUZyb21OZXRcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuSGFuZGxlUmVkaXJlY3RQcm9taXNlTWVhc3VyZW1lbnQsXG4gICAgICAgICAgICBcIkhhbmRsZVJlZGlyZWN0UHJvbWlzZVwiLFxuICAgICAgICBdLFxuICAgICAgICBbXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5IYW5kbGVOYXRpdmVSZWRpcmVjdFByb21pc2VNZWFzdXJlbWVudCxcbiAgICAgICAgICAgIFwiSGFuZGxlTnR2UmVkaXJlY3RQcm9taXNlXCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLlVwZGF0ZUNsb3VkRGlzY292ZXJ5TWV0YWRhdGFNZWFzdXJlbWVudCxcbiAgICAgICAgICAgIFwiVXBkYXRlQ0RNZXRhXCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLlVzZXJuYW1lUGFzc3dvcmRDbGllbnRBY3F1aXJlVG9rZW4sXG4gICAgICAgICAgICBcIlVzZXJQYXNzQ2xpZW50QVRcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuTmF0aXZlTWVzc2FnZUhhbmRsZXJIYW5kc2hha2UsXG4gICAgICAgICAgICBcIk50dk1zZ0hhbmRsZXJIYW5kc2hha2VcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLk5hdGl2ZUdlbmVyYXRlQXV0aFJlc3VsdCwgXCJOdHZHZW5BdXRoUmVzXCJdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuUmVtb3ZlSGlkZGVuSWZyYW1lLCBcIlJlbW92ZUhpZGRlbklmcmFtZVwiXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuQ2xlYXJUb2tlbnNBbmRLZXlzV2l0aENsYWltcyxcbiAgICAgICAgICAgIFwiQ2xlYXJUQW5kS2V5c1dpdGhDbGFpbXNcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLkNhY2hlTWFuYWdlckdldFJlZnJlc2hUb2tlbiwgXCJDYWNoZU1hbmFnZXJHZXRSVFwiXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLkdlbmVyYXRlUGtjZUNvZGVzLCBcIkdlblBrY2VDb2Rlc1wiXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLkdlbmVyYXRlQ29kZVZlcmlmaWVyLCBcIkdlbkNvZGVWZXJpZmllclwiXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuR2VuZXJhdGVDb2RlQ2hhbGxlbmdlRnJvbVZlcmlmaWVyLFxuICAgICAgICAgICAgXCJHZW5Db2RlQ2hhbGxlbmdlRnJvbVZlcmlmaWVyXCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtQZXJmb3JtYW5jZUV2ZW50cy5TaGEyNTZEaWdlc3QsIFwiU2hhMjU2RGlnZXN0XCJdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuR2V0UmFuZG9tVmFsdWVzLCBcIkdldFJhbmRvbVZhbHVlc1wiXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLkdlbmVyYXRlSEtERiwgXCJnZW5IS0RGXCJdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuR2VuZXJhdGVCYXNlS2V5LCBcImdlbkJhc2VLZXlcIl0sXG4gICAgICAgIFtQZXJmb3JtYW5jZUV2ZW50cy5CYXNlNjREZWNvZGUsIFwiYjY0RGVjb2RlXCJdLFxuICAgICAgICBbUGVyZm9ybWFuY2VFdmVudHMuVXJsRW5jb2RlQXJyLCBcInVybEVuY0FyclwiXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLkVuY3J5cHQsIFwiZW5jcnlwdFwiXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLkRlY3J5cHQsIFwiZGVjcnlwdFwiXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLkdlbmVyYXRlRWFyS2V5LCBcImdlbkVhcktleVwiXSxcbiAgICAgICAgW1BlcmZvcm1hbmNlRXZlbnRzLkRlY3J5cHRFYXJSZXNwb25zZSwgXCJkZWNyeXB0RWFyUmVzcFwiXSxcbiAgICBdKTtcblxuLyoqXG4gKiBTdGF0ZSBvZiB0aGUgcGVyZm9ybWFuY2UgZXZlbnQuXG4gKlxuICogQGV4cG9ydFxuICogQGVudW0ge251bWJlcn1cbiAqL1xuZXhwb3J0IGNvbnN0IFBlcmZvcm1hbmNlRXZlbnRTdGF0dXMgPSB7XG4gICAgTm90U3RhcnRlZDogMCxcbiAgICBJblByb2dyZXNzOiAxLFxuICAgIENvbXBsZXRlZDogMixcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBQZXJmb3JtYW5jZUV2ZW50U3RhdHVzID1cbiAgICAodHlwZW9mIFBlcmZvcm1hbmNlRXZlbnRTdGF0dXMpW2tleW9mIHR5cGVvZiBQZXJmb3JtYW5jZUV2ZW50U3RhdHVzXTtcblxuZXhwb3J0IHR5cGUgU3ViTWVhc3VyZW1lbnQgPSB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHN0YXJ0VGltZU1zOiBudW1iZXI7XG59O1xuXG4vKipcbiAqIFBlcmZvcm1hbmNlIG1lYXN1cmVtZW50IHRha2VuIGJ5IHRoZSBsaWJyYXJ5LCBpbmNsdWRpbmcgbWV0YWRhdGEgYWJvdXQgdGhlIHJlcXVlc3QgYW5kIGFwcGxpY2F0aW9uLlxuICpcbiAqIEBleHBvcnRcbiAqIEB0eXBlZGVmIHtQZXJmb3JtYW5jZUV2ZW50fVxuICovXG5leHBvcnQgdHlwZSBQZXJmb3JtYW5jZUV2ZW50ID0ge1xuICAgIC8qKlxuICAgICAqIFVuaXF1ZSBpZCBmb3IgdGhlIGV2ZW50XG4gICAgICpcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIGV2ZW50SWQ6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFN0YXRlIG9mIHRoZSBwZXJmb3JhbmNlIG1lYXN1cmUuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7UGVyZm9ybWFuY2VFdmVudFN0YXR1c31cbiAgICAgKi9cbiAgICBzdGF0dXM6IFBlcmZvcm1hbmNlRXZlbnRTdGF0dXM7XG5cbiAgICAvKipcbiAgICAgKiBMb2dpbiBhdXRob3JpdHkgdXNlZCBmb3IgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgYXV0aG9yaXR5OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBDbGllbnQgaWQgZm9yIHRoZSBhcHBsaWNhdGlvblxuICAgICAqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICBjbGllbnRJZDogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogQ29ycmVsYXRpb24gSUQgdXNlZCBmb3IgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgY29ycmVsYXRpb25JZDogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogRW5kLXRvLWVuZCBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gICAgICogQGRhdGUgMy8yMi8yMDIyIC0gMzo0MDowNSBQTVxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBkdXJhdGlvbk1zPzogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogVmlzaWJpbGl0eSBvZiB0aGUgcGFnZSB3aGVuIHRoZSBldmVudCBjb21wbGV0ZWQuXG4gICAgICogUmVhZCBmcm9tOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvUGFnZV9WaXNpYmlsaXR5X0FQSVxuICAgICAqXG4gICAgICogQHR5cGUgez8oc3RyaW5nIHwgbnVsbCl9XG4gICAgICovXG4gICAgZW5kUGFnZVZpc2liaWxpdHk/OiBzdHJpbmcgfCBudWxsO1xuXG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgcmVzdWx0IHdhcyByZXRyaWV2ZWQgZnJvbSB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7KGJvb2xlYW4gfCBudWxsKX1cbiAgICAgKi9cbiAgICBmcm9tQ2FjaGU/OiBib29sZWFuIHwgbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEV2ZW50IG5hbWUgKHVzdWFsbHkgaW4gdGhlIGZvcm0gb2YgY2xhc3NOYW1lRnVuY3Rpb25OYW1lKVxuICAgICAqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICBuYW1lOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBWaXNpYmlsaXR5IG9mIHRoZSBwYWdlIHdoZW4gdGhlIGV2ZW50IGNvbXBsZXRlZC5cbiAgICAgKiBSZWFkIGZyb206IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9QYWdlX1Zpc2liaWxpdHlfQVBJXG4gICAgICpcbiAgICAgKiBAdHlwZSB7PyhzdHJpbmcgfCBudWxsKX1cbiAgICAgKi9cbiAgICBzdGFydFBhZ2VWaXNpYmlsaXR5Pzogc3RyaW5nIHwgbnVsbDtcblxuICAgIC8qKlxuICAgICAqIFVuaXggbWlsbGlzZWNvbmQgdGltZXN0YW1wIHdoZW4gdGhlIGV2ZW50IHdhcyBpbml0aWF0ZWQuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHN0YXJ0VGltZU1zOiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIG9yIHRoZSBvcGVyYXRpb24gY29tcGxldGVkIHN1Y2Nlc3NmdWxseS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHsoYm9vbGVhbiB8IG51bGwpfVxuICAgICAqL1xuICAgIHN1Y2Nlc3M/OiBib29sZWFuIHwgbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEFkZCBzcGVjaWZpYyBlcnJvciBjb2RlIGluIGNhc2Ugb2YgZmFpbHVyZVxuICAgICAqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICBlcnJvckNvZGU/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBBZGQgc3BlY2lmaWMgc3ViIGVycm9yIGNvZGUgaW4gY2FzZSBvZiBmYWlsdXJlXG4gICAgICpcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIHN1YkVycm9yQ29kZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFNlcnZlciBlcnJvciBudW1iZXJcbiAgICAgKi9cbiAgICBzZXJ2ZXJFcnJvck5vPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogTmFtZSBvZiB0aGUgbGlicmFyeSB1c2VkIGZvciB0aGUgb3BlcmF0aW9uLlxuICAgICAqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICBsaWJyYXJ5TmFtZTogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVmVyc2lvbiBvZiB0aGUgbGlicmFyeSB1c2VkIGZvciB0aGUgb3BlcmF0aW9uLlxuICAgICAqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICBsaWJyYXJ5VmVyc2lvbjogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgcmVzcG9uc2UgaXMgZnJvbSBhIG5hdGl2ZSBjb21wb25lbnQgKGUuZy4sIFdBTSlcbiAgICAgKlxuICAgICAqIEB0eXBlIHs/Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBpc05hdGl2ZUJyb2tlcj86IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBSZXF1ZXN0IElEIHJldHVybmVkIGZyb20gdGhlIHJlc3BvbnNlXG4gICAgICpcbiAgICAgKiBAdHlwZSB7P3N0cmluZ31cbiAgICAgKi9cbiAgICByZXF1ZXN0SWQ/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBDYWNoZSBsb29rdXAgcG9saWN5XG4gICAgICpcbiAgICAgKiBAdHlwZSB7P251bWJlcn1cbiAgICAgKi9cbiAgICBjYWNoZUxvb2t1cFBvbGljeT86IG51bWJlciB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIENhY2hlIE91dGNvbWVcbiAgICAgKiBAdHlwZSB7P251bWJlcn1cbiAgICAgKi9cbiAgICBjYWNoZU91dGNvbWU/OiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBBbW91bnQgb2YgdGltZSBzcGVudCBpbiB0aGUgSlMgcXVldWUgaW4gbWlsbGlzZWNvbmRzLlxuICAgICAqXG4gICAgICogQHR5cGUgez9udW1iZXJ9XG4gICAgICovXG4gICAgcXVldWVkVGltZU1zPzogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogU3ViLW1lYXN1cmVtZW50cyBmb3IgaW50ZXJuYWwgdXNlLiBUbyBiZSBkZWxldGVkIGJlZm9yZSBmbHVzaGluZy5cbiAgICAgKi9cbiAgICBpbmNvbXBsZXRlU3ViTWVhc3VyZW1lbnRzPzogTWFwPHN0cmluZywgU3ViTWVhc3VyZW1lbnQ+O1xuXG4gICAgdmlzaWJpbGl0eUNoYW5nZUNvdW50PzogbnVtYmVyO1xuICAgIGluY29tcGxldGVTdWJzQ291bnQ/OiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBDb3JyZWxhdGlvbklkIG9mIHRoZSBpbiBwcm9ncmVzcyBpZnJhbWUgcmVxdWVzdCB0aGF0IHdhcyBhd2FpdGVkXG4gICAgICovXG4gICAgYXdhaXRJZnJhbWVDb3JyZWxhdGlvbklkPzogc3RyaW5nO1xuICAgIC8qKlxuICAgICAqIEFtb3VudCBvZiB0aW1lcyBxdWV1ZWQgaW4gdGhlIEpTIGV2ZW50IHF1ZXVlLlxuICAgICAqXG4gICAgICogQHR5cGUgez9udW1iZXJ9XG4gICAgICovXG4gICAgcXVldWVkQ291bnQ/OiBudW1iZXI7XG4gICAgLyoqXG4gICAgICogQW1vdW50IG9mIG1hbnVhbGx5IGNvbXBsZXRlZCBxdWV1ZSBldmVudHMuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7P251bWJlcn1cbiAgICAgKi9cbiAgICBxdWV1ZWRNYW51YWxseUNvbXBsZXRlZENvdW50PzogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogU2l6ZSBvZiB0aGUgaWQgdG9rZW5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgaWRUb2tlblNpemU/OiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFNpemUgb2YgdGhlIGFjY2VzcyB0b2tlblxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICAgIGFjY2Vzc1Rva2VuU2l6ZT86IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqXG4gICAgICogU2l6ZSBvZiB0aGUgcmVmcmVzaCB0b2tlblxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cblxuICAgIHJlZnJlc2hUb2tlblNpemU/OiBudW1iZXIgfCB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBBcHBsaWNhdGlvbiBuYW1lIGFzIHNwZWNpZmllZCBieSB0aGUgYXBwLlxuICAgICAqXG4gICAgICogQHR5cGUgez9zdHJpbmd9XG4gICAgICovXG4gICAgYXBwTmFtZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIEFwcGxpY2F0aW9uIHZlcnNpb24gYXMgc3BlY2lmaWVkIGJ5IHRoZSBhcHAuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7P3N0cmluZ31cbiAgICAgKi9cbiAgICBhcHBWZXJzaW9uPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGZvbGxvd2luZyBhcmUgZmllbGRzIHRoYXQgbWF5IGJlIGVtaXR0ZWQgaW4gbmF0aXZlIGJyb2tlciBzY2VuYXJpb3NcbiAgICAgKi9cbiAgICBleHRlbnNpb25JZD86IHN0cmluZztcbiAgICBleHRlbnNpb25WZXJzaW9uPzogc3RyaW5nO1xuICAgIG1hdHNCcm9rZXJWZXJzaW9uPzogc3RyaW5nO1xuICAgIG1hdHNBY2NvdW50Sm9pbk9uU3RhcnQ/OiBzdHJpbmc7XG4gICAgbWF0c0FjY291bnRKb2luT25FbmQ/OiBzdHJpbmc7XG4gICAgbWF0c0RldmljZUpvaW4/OiBzdHJpbmc7XG4gICAgbWF0c1Byb21wdEJlaGF2aW9yPzogc3RyaW5nO1xuICAgIG1hdHNBcGlFcnJvckNvZGU/OiBudW1iZXI7XG4gICAgbWF0c1VpVmlzaWJsZT86IGJvb2xlYW47XG4gICAgbWF0c1NpbGVudENvZGU/OiBudW1iZXI7XG4gICAgbWF0c1NpbGVudEJpU3ViQ29kZT86IG51bWJlcjtcbiAgICBtYXRzU2lsZW50TWVzc2FnZT86IHN0cmluZztcbiAgICBtYXRzU2lsZW50U3RhdHVzPzogbnVtYmVyO1xuICAgIG1hdHNIdHRwU3RhdHVzPzogbnVtYmVyO1xuICAgIG1hdHNIdHRwRXZlbnRDb3VudD86IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIEh0dHAgUE9TVCBtZXRhZGF0YVxuICAgICAqL1xuICAgIGh0dHBWZXJUb2tlbj86IHN0cmluZztcbiAgICBodHRwU3RhdHVzPzogbnVtYmVyO1xuICAgIGNvbnRlbnRUeXBlSGVhZGVyPzogc3RyaW5nO1xuICAgIGNvbnRlbnRMZW5ndGhIZWFkZXI/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBQbGF0Zm9ybSBicm9rZXIgZmllbGRzXG4gICAgICovXG4gICAgYWxsb3dQbGF0Zm9ybUJyb2tlcj86IGJvb2xlYW47XG4gICAgZXh0ZW5zaW9uSW5zdGFsbGVkPzogYm9vbGVhbjtcbiAgICBleHRlbnNpb25IYW5kc2hha2VUaW1lb3V0TXM/OiBudW1iZXI7XG4gICAgZXh0ZW5zaW9uSGFuZHNoYWtlVGltZWRPdXQ/OiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogTmVzdGVkIEFwcCBBdXRoIEZpZWxkc1xuICAgICAqL1xuICAgIG5lc3RlZEFwcEF1dGhSZXF1ZXN0PzogYm9vbGVhbjtcblxuICAgIC8qKlxuICAgICAqIE11bHRpcGxlIG1hdGNoZWQgYWNjZXNzL2lkL3JlZnJlc2ggdG9rZW5zIGluIHRoZSBjYWNoZVxuICAgICAqL1xuICAgIG11bHRpTWF0Y2hlZEFUPzogbnVtYmVyO1xuICAgIG11bHRpTWF0Y2hlZElEPzogbnVtYmVyO1xuICAgIG11bHRpTWF0Y2hlZFJUPzogbnVtYmVyO1xuXG4gICAgZXJyb3JOYW1lPzogc3RyaW5nO1xuICAgIGVycm9yU3RhY2s/OiBzdHJpbmdbXTtcblxuICAgIC8vIEV2ZW50IGNvbnRleHQgYXMgSlNPTiBzdHJpbmdcbiAgICBjb250ZXh0Pzogc3RyaW5nO1xuXG4gICAgLy8gTnVtYmVyIG9mIHRva2VucyBpbiB0aGUgY2FjaGUgdG8gYmUgcmVwb3J0ZWQgd2hlbiBjYWNoZSBxdW90YSBpcyBleGNlZWRlZFxuICAgIGNhY2hlUnRDb3VudD86IG51bWJlcjtcbiAgICBjYWNoZUlkQ291bnQ/OiBudW1iZXI7XG4gICAgY2FjaGVBdENvdW50PzogbnVtYmVyO1xuXG4gICAgLy8gU2NlbmFyaW8gaWQgdG8gdHJhY2sgY3VzdG9tIHVzZXIgcHJvbXB0c1xuICAgIHNjZW5hcmlvSWQ/OiBzdHJpbmc7XG5cbiAgICBhY2NvdW50VHlwZT86IFwiQUFEXCIgfCBcIk1TQVwiIHwgXCJCMkNcIjtcblxuICAgIC8qKlxuICAgICAqIFNlcnZlciBlcnJvciB0aGF0IHRyaWdnZXJzIGEgcmVxdWVzdCByZXRyeVxuICAgICAqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICByZXRyeUVycm9yPzogc3RyaW5nO1xuXG4gICAgZW1iZWRkZWRDbGllbnRJZD86IHN0cmluZztcbiAgICBlbWJlZGRlZFJlZGlyZWN0VXJpPzogc3RyaW5nO1xuXG4gICAgaXNBc3luY1BvcHVwPzogYm9vbGVhbjtcblxuICAgIHJ0RXhwaXJlc09uTXM/OiBudW1iZXI7XG5cbiAgICBzaWRGcm9tQ2xhaW1zPzogYm9vbGVhbjtcbiAgICBzaWRGcm9tUmVxdWVzdD86IGJvb2xlYW47XG4gICAgbG9naW5IaW50RnJvbVJlcXVlc3Q/OiBib29sZWFuO1xuICAgIGxvZ2luSGludEZyb21VcG4/OiBib29sZWFuO1xuICAgIGxvZ2luSGludEZyb21DbGFpbT86IGJvb2xlYW47XG4gICAgZG9tYWluSGludEZyb21SZXF1ZXN0PzogYm9vbGVhbjtcblxuICAgIHByb21wdD86IHN0cmluZztcblxuICAgIHVzZVByZUdlbmVyYXRlZFBrY2U/OiBib29sZWFuO1xufTtcblxuZXhwb3J0IHR5cGUgUGVyZm9ybWFuY2VFdmVudENvbnRleHQgPSB7XG4gICAgZHVyPzogbnVtYmVyO1xuICAgIGVycj86IHN0cmluZztcbiAgICBzdWJFcnI/OiBzdHJpbmc7XG4gICAgZmFpbD86IG51bWJlcjtcbn07XG5cbmV4cG9ydCB0eXBlIFBlcmZvcm1hbmNlRXZlbnRTdGFja2VkQ29udGV4dCA9IFBlcmZvcm1hbmNlRXZlbnRDb250ZXh0ICYge1xuICAgIG5hbWU/OiBzdHJpbmc7XG4gICAgY2hpbGRFcnI/OiBzdHJpbmc7XG59O1xuXG5leHBvcnQgY29uc3QgSW50RmllbGRzOiBSZWFkb25seVNldDxzdHJpbmc+ID0gbmV3IFNldChbXG4gICAgXCJhY2Nlc3NUb2tlblNpemVcIixcbiAgICBcImR1cmF0aW9uTXNcIixcbiAgICBcImlkVG9rZW5TaXplXCIsXG4gICAgXCJtYXRzU2lsZW50U3RhdHVzXCIsXG4gICAgXCJtYXRzSHR0cFN0YXR1c1wiLFxuICAgIFwicmVmcmVzaFRva2VuU2l6ZVwiLFxuICAgIFwicXVldWVkVGltZU1zXCIsXG4gICAgXCJzdGFydFRpbWVNc1wiLFxuICAgIFwic3RhdHVzXCIsXG4gICAgXCJtdWx0aU1hdGNoZWRBVFwiLFxuICAgIFwibXVsdGlNYXRjaGVkSURcIixcbiAgICBcIm11bHRpTWF0Y2hlZFJUXCIsXG4gICAgXCJ1bmVuY3J5cHRlZENhY2hlQ291bnRcIixcbiAgICBcImVuY3J5cHRlZENhY2hlRXhwaXJlZENvdW50XCIsXG5dKTtcbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4uL2xvZ2dlci9Mb2dnZXIuanNcIjtcbmltcG9ydCB7IElQZXJmb3JtYW5jZUNsaWVudCB9IGZyb20gXCIuLi90ZWxlbWV0cnkvcGVyZm9ybWFuY2UvSVBlcmZvcm1hbmNlQ2xpZW50LmpzXCI7XG5cbi8qKlxuICogV3JhcHMgYSBmdW5jdGlvbiB3aXRoIGEgcGVyZm9ybWFuY2UgbWVhc3VyZW1lbnQuXG4gKiBVc2FnZTogaW52b2tlKGZ1bmN0aW9uVG9DYWxsLCBwZXJmb3JtYW5jZUNsaWVudCwgXCJFdmVudE5hbWVcIiwgXCJjb3JyZWxhdGlvbklkXCIpKC4uLmFyZ3NUb1Bhc3NUb0Z1bmN0aW9uKVxuICogQHBhcmFtIGNhbGxiYWNrXG4gKiBAcGFyYW0gZXZlbnROYW1lXG4gKiBAcGFyYW0gbG9nZ2VyXG4gKiBAcGFyYW0gdGVsZW1ldHJ5Q2xpZW50XG4gKiBAcGFyYW0gY29ycmVsYXRpb25JZFxuICogQHJldHVybnNcbiAqIEBpbnRlcm5hbFxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZXhwb3J0IGNvbnN0IGludm9rZSA9IDxUIGV4dGVuZHMgQXJyYXk8YW55PiwgVT4oXG4gICAgY2FsbGJhY2s6ICguLi5hcmdzOiBUKSA9PiBVLFxuICAgIGV2ZW50TmFtZTogc3RyaW5nLFxuICAgIGxvZ2dlcjogTG9nZ2VyLFxuICAgIHRlbGVtZXRyeUNsaWVudD86IElQZXJmb3JtYW5jZUNsaWVudCxcbiAgICBjb3JyZWxhdGlvbklkPzogc3RyaW5nXG4pID0+IHtcbiAgICByZXR1cm4gKC4uLmFyZ3M6IFQpOiBVID0+IHtcbiAgICAgICAgbG9nZ2VyLnRyYWNlKGBFeGVjdXRpbmcgZnVuY3Rpb24gJHtldmVudE5hbWV9YCk7XG4gICAgICAgIGNvbnN0IGluUHJvZ3Jlc3NFdmVudCA9IHRlbGVtZXRyeUNsaWVudD8uc3RhcnRNZWFzdXJlbWVudChcbiAgICAgICAgICAgIGV2ZW50TmFtZSxcbiAgICAgICAgICAgIGNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGNvcnJlbGF0aW9uSWQpIHtcbiAgICAgICAgICAgIC8vIFRyYWNrIG51bWJlciBvZiB0aW1lcyB0aGlzIEFQSSBpcyBjYWxsZWQgaW4gYSBzaW5nbGUgcmVxdWVzdFxuICAgICAgICAgICAgY29uc3QgZXZlbnRDb3VudCA9IGV2ZW50TmFtZSArIFwiQ2FsbENvdW50XCI7XG4gICAgICAgICAgICB0ZWxlbWV0cnlDbGllbnQ/LmluY3JlbWVudEZpZWxkcyhcbiAgICAgICAgICAgICAgICB7IFtldmVudENvdW50XTogMSB9LFxuICAgICAgICAgICAgICAgIGNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGNhbGxiYWNrKC4uLmFyZ3MpO1xuICAgICAgICAgICAgaW5Qcm9ncmVzc0V2ZW50Py5lbmQoe1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxvZ2dlci50cmFjZShgUmV0dXJuaW5nIHJlc3VsdCBmcm9tICR7ZXZlbnROYW1lfWApO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgbG9nZ2VyLnRyYWNlKGBFcnJvciBvY2N1cnJlZCBpbiAke2V2ZW50TmFtZX1gKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLnRyYWNlKEpTT04uc3RyaW5naWZ5KGUpKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIudHJhY2UoXCJVbmFibGUgdG8gcHJpbnQgZXJyb3IgbWVzc2FnZS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpblByb2dyZXNzRXZlbnQ/LmVuZChcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICB9O1xufTtcblxuLyoqXG4gKiBXcmFwcyBhbiBhc3luYyBmdW5jdGlvbiB3aXRoIGEgcGVyZm9ybWFuY2UgbWVhc3VyZW1lbnQuXG4gKiBVc2FnZTogaW52b2tlQXN5bmMoZnVuY3Rpb25Ub0NhbGwsIHBlcmZvcm1hbmNlQ2xpZW50LCBcIkV2ZW50TmFtZVwiLCBcImNvcnJlbGF0aW9uSWRcIikoLi4uYXJnc1RvUGFzc1RvRnVuY3Rpb24pXG4gKiBAcGFyYW0gY2FsbGJhY2tcbiAqIEBwYXJhbSBldmVudE5hbWVcbiAqIEBwYXJhbSBsb2dnZXJcbiAqIEBwYXJhbSB0ZWxlbWV0cnlDbGllbnRcbiAqIEBwYXJhbSBjb3JyZWxhdGlvbklkXG4gKiBAcmV0dXJuc1xuICogQGludGVybmFsXG4gKlxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZXhwb3J0IGNvbnN0IGludm9rZUFzeW5jID0gPFQgZXh0ZW5kcyBBcnJheTxhbnk+LCBVPihcbiAgICBjYWxsYmFjazogKC4uLmFyZ3M6IFQpID0+IFByb21pc2U8VT4sXG4gICAgZXZlbnROYW1lOiBzdHJpbmcsXG4gICAgbG9nZ2VyOiBMb2dnZXIsXG4gICAgdGVsZW1ldHJ5Q2xpZW50PzogSVBlcmZvcm1hbmNlQ2xpZW50LFxuICAgIGNvcnJlbGF0aW9uSWQ/OiBzdHJpbmdcbikgPT4ge1xuICAgIHJldHVybiAoLi4uYXJnczogVCk6IFByb21pc2U8VT4gPT4ge1xuICAgICAgICBsb2dnZXIudHJhY2UoYEV4ZWN1dGluZyBmdW5jdGlvbiAke2V2ZW50TmFtZX1gKTtcbiAgICAgICAgY29uc3QgaW5Qcm9ncmVzc0V2ZW50ID0gdGVsZW1ldHJ5Q2xpZW50Py5zdGFydE1lYXN1cmVtZW50KFxuICAgICAgICAgICAgZXZlbnROYW1lLFxuICAgICAgICAgICAgY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuICAgICAgICBpZiAoY29ycmVsYXRpb25JZCkge1xuICAgICAgICAgICAgLy8gVHJhY2sgbnVtYmVyIG9mIHRpbWVzIHRoaXMgQVBJIGlzIGNhbGxlZCBpbiBhIHNpbmdsZSByZXF1ZXN0XG4gICAgICAgICAgICBjb25zdCBldmVudENvdW50ID0gZXZlbnROYW1lICsgXCJDYWxsQ291bnRcIjtcbiAgICAgICAgICAgIHRlbGVtZXRyeUNsaWVudD8uaW5jcmVtZW50RmllbGRzKFxuICAgICAgICAgICAgICAgIHsgW2V2ZW50Q291bnRdOiAxIH0sXG4gICAgICAgICAgICAgICAgY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB0ZWxlbWV0cnlDbGllbnQ/LnNldFByZVF1ZXVlVGltZShldmVudE5hbWUsIGNvcnJlbGF0aW9uSWQpO1xuICAgICAgICByZXR1cm4gY2FsbGJhY2soLi4uYXJncylcbiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgIGxvZ2dlci50cmFjZShgUmV0dXJuaW5nIHJlc3VsdCBmcm9tICR7ZXZlbnROYW1lfWApO1xuICAgICAgICAgICAgICAgIGluUHJvZ3Jlc3NFdmVudD8uZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLnRyYWNlKGBFcnJvciBvY2N1cnJlZCBpbiAke2V2ZW50TmFtZX1gKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIudHJhY2UoSlNPTi5zdHJpbmdpZnkoZSkpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLnRyYWNlKFwiVW5hYmxlIHRvIHByaW50IGVycm9yIG1lc3NhZ2UuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpblByb2dyZXNzRXZlbnQ/LmVuZChcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9KTtcbiAgICB9O1xufTtcbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgSU5ldHdvcmtNb2R1bGUgfSBmcm9tIFwiLi4vbmV0d29yay9JTmV0d29ya01vZHVsZS5qc1wiO1xuaW1wb3J0IHsgTmV0d29ya1Jlc3BvbnNlIH0gZnJvbSBcIi4uL25ldHdvcmsvTmV0d29ya1Jlc3BvbnNlLmpzXCI7XG5pbXBvcnQgeyBJTURTQmFkUmVzcG9uc2UgfSBmcm9tIFwiLi4vcmVzcG9uc2UvSU1EU0JhZFJlc3BvbnNlLmpzXCI7XG5pbXBvcnQge1xuICAgIENvbnN0YW50cyxcbiAgICBSZWdpb25EaXNjb3ZlcnlTb3VyY2VzLFxuICAgIFJlc3BvbnNlQ29kZXMsXG59IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcbmltcG9ydCB7IFJlZ2lvbkRpc2NvdmVyeU1ldGFkYXRhIH0gZnJvbSBcIi4vUmVnaW9uRGlzY292ZXJ5TWV0YWRhdGEuanNcIjtcbmltcG9ydCB7IEltZHNPcHRpb25zIH0gZnJvbSBcIi4vSW1kc09wdGlvbnMuanNcIjtcbmltcG9ydCB7IElQZXJmb3JtYW5jZUNsaWVudCB9IGZyb20gXCIuLi90ZWxlbWV0cnkvcGVyZm9ybWFuY2UvSVBlcmZvcm1hbmNlQ2xpZW50LmpzXCI7XG5pbXBvcnQgeyBQZXJmb3JtYW5jZUV2ZW50cyB9IGZyb20gXCIuLi90ZWxlbWV0cnkvcGVyZm9ybWFuY2UvUGVyZm9ybWFuY2VFdmVudC5qc1wiO1xuaW1wb3J0IHsgaW52b2tlQXN5bmMgfSBmcm9tIFwiLi4vdXRpbHMvRnVuY3Rpb25XcmFwcGVycy5qc1wiO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4uL2xvZ2dlci9Mb2dnZXIuanNcIjtcblxuZXhwb3J0IGNsYXNzIFJlZ2lvbkRpc2NvdmVyeSB7XG4gICAgLy8gTmV0d29yayBpbnRlcmZhY2UgdG8gbWFrZSByZXF1ZXN0cyB3aXRoLlxuICAgIHByb3RlY3RlZCBuZXR3b3JrSW50ZXJmYWNlOiBJTmV0d29ya01vZHVsZTtcbiAgICAvLyBMb2dnZXJcbiAgICBwcml2YXRlIGxvZ2dlcjogTG9nZ2VyO1xuICAgIC8vIFBlcmZvcm1hbmNlIGNsaWVudFxuICAgIHByb3RlY3RlZCBwZXJmb3JtYW5jZUNsaWVudDogSVBlcmZvcm1hbmNlQ2xpZW50IHwgdW5kZWZpbmVkO1xuICAgIC8vIENvcnJlbGF0aW9uSWRcbiAgICBwcm90ZWN0ZWQgY29ycmVsYXRpb25JZDogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgIC8vIE9wdGlvbnMgZm9yIHRoZSBJTURTIGVuZHBvaW50IHJlcXVlc3RcbiAgICBwcm90ZWN0ZWQgc3RhdGljIElNRFNfT1BUSU9OUzogSW1kc09wdGlvbnMgPSB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIE1ldGFkYXRhOiBcInRydWVcIixcbiAgICAgICAgfSxcbiAgICB9O1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIG5ldHdvcmtJbnRlcmZhY2U6IElOZXR3b3JrTW9kdWxlLFxuICAgICAgICBsb2dnZXI6IExvZ2dlcixcbiAgICAgICAgcGVyZm9ybWFuY2VDbGllbnQ/OiBJUGVyZm9ybWFuY2VDbGllbnQsXG4gICAgICAgIGNvcnJlbGF0aW9uSWQ/OiBzdHJpbmdcbiAgICApIHtcbiAgICAgICAgdGhpcy5uZXR3b3JrSW50ZXJmYWNlID0gbmV0d29ya0ludGVyZmFjZTtcbiAgICAgICAgdGhpcy5sb2dnZXIgPSBsb2dnZXI7XG4gICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQgPSBwZXJmb3JtYW5jZUNsaWVudDtcbiAgICAgICAgdGhpcy5jb3JyZWxhdGlvbklkID0gY29ycmVsYXRpb25JZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlY3QgdGhlIHJlZ2lvbiBmcm9tIHRoZSBhcHBsaWNhdGlvbidzIGVudmlyb25tZW50LlxuICAgICAqXG4gICAgICogQHJldHVybnMgUHJvbWlzZTxzdHJpbmcgfCBudWxsPlxuICAgICAqL1xuICAgIHB1YmxpYyBhc3luYyBkZXRlY3RSZWdpb24oXG4gICAgICAgIGVudmlyb25tZW50UmVnaW9uOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgICAgIHJlZ2lvbkRpc2NvdmVyeU1ldGFkYXRhOiBSZWdpb25EaXNjb3ZlcnlNZXRhZGF0YVxuICAgICk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50Py5hZGRRdWV1ZU1lYXN1cmVtZW50KFxuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuUmVnaW9uRGlzY292ZXJ5RGV0ZWN0UmVnaW9uLFxuICAgICAgICAgICAgdGhpcy5jb3JyZWxhdGlvbklkXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBhdXRvIGRldGVjdGVkIHJlZ2lvbiB3aXRoIHRoZSByZWdpb24gZnJvbSB0aGUgZW52cmlvbm1lbnRcbiAgICAgICAgbGV0IGF1dG9kZXRlY3RlZFJlZ2lvbk5hbWUgPSBlbnZpcm9ubWVudFJlZ2lvbjtcblxuICAgICAgICAvLyBDaGVjayBpZiBhIHJlZ2lvbiB3YXMgZGV0ZWN0ZWQgZnJvbSB0aGUgZW52aXJvbm1lbnQsIGlmIG5vdCwgYXR0ZW1wdCB0byBnZXQgdGhlIHJlZ2lvbiBmcm9tIElNRFNcbiAgICAgICAgaWYgKCFhdXRvZGV0ZWN0ZWRSZWdpb25OYW1lKSB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0gUmVnaW9uRGlzY292ZXJ5LklNRFNfT1BUSU9OUztcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbElNRFNWZXJzaW9uUmVzcG9uc2UgPSBhd2FpdCBpbnZva2VBc3luYyhcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRSZWdpb25Gcm9tSU1EUy5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5SZWdpb25EaXNjb3ZlcnlHZXRSZWdpb25Gcm9tSU1EUyxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgICAgICkoQ29uc3RhbnRzLklNRFNfVkVSU0lPTiwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBsb2NhbElNRFNWZXJzaW9uUmVzcG9uc2Uuc3RhdHVzID09PVxuICAgICAgICAgICAgICAgICAgICBSZXNwb25zZUNvZGVzLmh0dHBTdWNjZXNzXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGF1dG9kZXRlY3RlZFJlZ2lvbk5hbWUgPSBsb2NhbElNRFNWZXJzaW9uUmVzcG9uc2UuYm9keTtcbiAgICAgICAgICAgICAgICAgICAgcmVnaW9uRGlzY292ZXJ5TWV0YWRhdGEucmVnaW9uX3NvdXJjZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICBSZWdpb25EaXNjb3ZlcnlTb3VyY2VzLklNRFM7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIHJlc3BvbnNlIHVzaW5nIHRoZSBsb2NhbCBJTURTIHZlcnNpb24gZmFpbGVkLCB0cnkgdG8gZmV0Y2ggdGhlIGN1cnJlbnQgdmVyc2lvbiBvZiBJTURTIGFuZCByZXRyeS5cbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsSU1EU1ZlcnNpb25SZXNwb25zZS5zdGF0dXMgPT09XG4gICAgICAgICAgICAgICAgICAgIFJlc3BvbnNlQ29kZXMuaHR0cEJhZFJlcXVlc3RcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudElNRFNWZXJzaW9uID0gYXdhaXQgaW52b2tlQXN5bmMoXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEN1cnJlbnRWZXJzaW9uLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5SZWdpb25EaXNjb3ZlcnlHZXRDdXJyZW50VmVyc2lvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgICAgICAgICApKG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRJTURTVmVyc2lvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaW9uRGlzY292ZXJ5TWV0YWRhdGEucmVnaW9uX3NvdXJjZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVnaW9uRGlzY292ZXJ5U291cmNlcy5GQUlMRURfQVVUT19ERVRFQ1RJT047XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRJTURTVmVyc2lvblJlc3BvbnNlID0gYXdhaXQgaW52b2tlQXN5bmMoXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFJlZ2lvbkZyb21JTURTLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5SZWdpb25EaXNjb3ZlcnlHZXRSZWdpb25Gcm9tSU1EUyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgICAgICAgICApKGN1cnJlbnRJTURTVmVyc2lvbiwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJTURTVmVyc2lvblJlc3BvbnNlLnN0YXR1cyA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgIFJlc3BvbnNlQ29kZXMuaHR0cFN1Y2Nlc3NcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRvZGV0ZWN0ZWRSZWdpb25OYW1lID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SU1EU1ZlcnNpb25SZXNwb25zZS5ib2R5O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaW9uRGlzY292ZXJ5TWV0YWRhdGEucmVnaW9uX3NvdXJjZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVnaW9uRGlzY292ZXJ5U291cmNlcy5JTURTO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJlZ2lvbkRpc2NvdmVyeU1ldGFkYXRhLnJlZ2lvbl9zb3VyY2UgPVxuICAgICAgICAgICAgICAgICAgICBSZWdpb25EaXNjb3ZlcnlTb3VyY2VzLkZBSUxFRF9BVVRPX0RFVEVDVElPTjtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlZ2lvbkRpc2NvdmVyeU1ldGFkYXRhLnJlZ2lvbl9zb3VyY2UgPVxuICAgICAgICAgICAgICAgIFJlZ2lvbkRpc2NvdmVyeVNvdXJjZXMuRU5WSVJPTk1FTlRfVkFSSUFCTEU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiBubyByZWdpb24gd2FzIGF1dG8gZGV0ZWN0ZWQgZnJvbSB0aGUgZW52aXJvbm1lbnQgb3IgZnJvbSB0aGUgSU1EUyBlbmRwb2ludCwgbWFyayB0aGUgYXR0ZW1wdCBhcyBhIEZBSUxFRF9BVVRPX0RFVEVDVElPTlxuICAgICAgICBpZiAoIWF1dG9kZXRlY3RlZFJlZ2lvbk5hbWUpIHtcbiAgICAgICAgICAgIHJlZ2lvbkRpc2NvdmVyeU1ldGFkYXRhLnJlZ2lvbl9zb3VyY2UgPVxuICAgICAgICAgICAgICAgIFJlZ2lvbkRpc2NvdmVyeVNvdXJjZXMuRkFJTEVEX0FVVE9fREVURUNUSU9OO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGF1dG9kZXRlY3RlZFJlZ2lvbk5hbWUgfHwgbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYWtlIHRoZSBjYWxsIHRvIHRoZSBJTURTIGVuZHBvaW50XG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW1kc0VuZHBvaW50VXJsXG4gICAgICogQHJldHVybnMgUHJvbWlzZTxOZXR3b3JrUmVzcG9uc2U8c3RyaW5nPj5cbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGdldFJlZ2lvbkZyb21JTURTKFxuICAgICAgICB2ZXJzaW9uOiBzdHJpbmcsXG4gICAgICAgIG9wdGlvbnM6IEltZHNPcHRpb25zXG4gICAgKTogUHJvbWlzZTxOZXR3b3JrUmVzcG9uc2U8c3RyaW5nPj4ge1xuICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50Py5hZGRRdWV1ZU1lYXN1cmVtZW50KFxuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuUmVnaW9uRGlzY292ZXJ5R2V0UmVnaW9uRnJvbUlNRFMsXG4gICAgICAgICAgICB0aGlzLmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubmV0d29ya0ludGVyZmFjZS5zZW5kR2V0UmVxdWVzdEFzeW5jPHN0cmluZz4oXG4gICAgICAgICAgICBgJHtDb25zdGFudHMuSU1EU19FTkRQT0lOVH0/YXBpLXZlcnNpb249JHt2ZXJzaW9ufSZmb3JtYXQ9dGV4dGAsXG4gICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgQ29uc3RhbnRzLklNRFNfVElNRU9VVFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbW9zdCByZWNlbnQgdmVyc2lvbiBvZiB0aGUgSU1EUyBlbmRwb2ludCBhdmFpbGFibGVcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFByb21pc2U8c3RyaW5nIHwgbnVsbD5cbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGdldEN1cnJlbnRWZXJzaW9uKFxuICAgICAgICBvcHRpb25zOiBJbWRzT3B0aW9uc1xuICAgICk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50Py5hZGRRdWV1ZU1lYXN1cmVtZW50KFxuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuUmVnaW9uRGlzY292ZXJ5R2V0Q3VycmVudFZlcnNpb24sXG4gICAgICAgICAgICB0aGlzLmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID1cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm5ldHdvcmtJbnRlcmZhY2Uuc2VuZEdldFJlcXVlc3RBc3luYzxJTURTQmFkUmVzcG9uc2U+KFxuICAgICAgICAgICAgICAgICAgICBgJHtDb25zdGFudHMuSU1EU19FTkRQT0lOVH0/Zm9ybWF0PWpzb25gLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgLy8gV2hlbiBJTURTIGVuZHBvaW50IGlzIGNhbGxlZCB3aXRob3V0IHRoZSBhcGkgdmVyc2lvbiBxdWVyeSBwYXJhbSwgYmFkIHJlcXVlc3QgcmVzcG9uc2UgY29tZXMgYmFjayB3aXRoIGxhdGVzdCB2ZXJzaW9uLlxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnN0YXR1cyA9PT0gUmVzcG9uc2VDb2Rlcy5odHRwQmFkUmVxdWVzdCAmJlxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLmJvZHkgJiZcbiAgICAgICAgICAgICAgICByZXNwb25zZS5ib2R5W1wibmV3ZXN0LXZlcnNpb25zXCJdICYmXG4gICAgICAgICAgICAgICAgcmVzcG9uc2UuYm9keVtcIm5ld2VzdC12ZXJzaW9uc1wiXS5sZW5ndGggPiAwXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuYm9keVtcIm5ld2VzdC12ZXJzaW9uc1wiXVswXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBBdXRob3JpdHlUeXBlIH0gZnJvbSBcIi4vQXV0aG9yaXR5VHlwZS5qc1wiO1xuaW1wb3J0IHtcbiAgICBpc09wZW5JZENvbmZpZ1Jlc3BvbnNlLFxuICAgIE9wZW5JZENvbmZpZ1Jlc3BvbnNlLFxufSBmcm9tIFwiLi9PcGVuSWRDb25maWdSZXNwb25zZS5qc1wiO1xuaW1wb3J0IHsgVXJsU3RyaW5nIH0gZnJvbSBcIi4uL3VybC9VcmxTdHJpbmcuanNcIjtcbmltcG9ydCB7IElVcmkgfSBmcm9tIFwiLi4vdXJsL0lVcmkuanNcIjtcbmltcG9ydCB7XG4gICAgY3JlYXRlQ2xpZW50QXV0aEVycm9yLFxuICAgIENsaWVudEF1dGhFcnJvckNvZGVzLFxufSBmcm9tIFwiLi4vZXJyb3IvQ2xpZW50QXV0aEVycm9yLmpzXCI7XG5pbXBvcnQgeyBJTmV0d29ya01vZHVsZSB9IGZyb20gXCIuLi9uZXR3b3JrL0lOZXR3b3JrTW9kdWxlLmpzXCI7XG5pbXBvcnQge1xuICAgIEFBREF1dGhvcml0eUNvbnN0YW50cyxcbiAgICBBdXRob3JpdHlNZXRhZGF0YVNvdXJjZSxcbiAgICBDb25zdGFudHMsXG4gICAgUmVnaW9uRGlzY292ZXJ5T3V0Y29tZXMsXG59IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcbmltcG9ydCB7XG4gICAgRW5kcG9pbnRNZXRhZGF0YSxcbiAgICBnZXRDbG91ZERpc2NvdmVyeU1ldGFkYXRhRnJvbUhhcmRjb2RlZFZhbHVlcyxcbiAgICBnZXRDbG91ZERpc2NvdmVyeU1ldGFkYXRhRnJvbU5ldHdvcmtSZXNwb25zZSxcbiAgICBJbnN0YW5jZURpc2NvdmVyeU1ldGFkYXRhQWxpYXNlcyxcbn0gZnJvbSBcIi4vQXV0aG9yaXR5TWV0YWRhdGEuanNcIjtcbmltcG9ydCB7XG4gICAgY3JlYXRlQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yLFxuICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLFxufSBmcm9tIFwiLi4vZXJyb3IvQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yLmpzXCI7XG5pbXBvcnQgeyBQcm90b2NvbE1vZGUgfSBmcm9tIFwiLi9Qcm90b2NvbE1vZGUuanNcIjtcbmltcG9ydCB7IElDYWNoZU1hbmFnZXIgfSBmcm9tIFwiLi4vY2FjaGUvaW50ZXJmYWNlL0lDYWNoZU1hbmFnZXIuanNcIjtcbmltcG9ydCB7IEF1dGhvcml0eU1ldGFkYXRhRW50aXR5IH0gZnJvbSBcIi4uL2NhY2hlL2VudGl0aWVzL0F1dGhvcml0eU1ldGFkYXRhRW50aXR5LmpzXCI7XG5pbXBvcnQge1xuICAgIEF1dGhvcml0eU9wdGlvbnMsXG4gICAgQXp1cmVDbG91ZEluc3RhbmNlLFxuICAgIFN0YXRpY0F1dGhvcml0eU9wdGlvbnMsXG59IGZyb20gXCIuL0F1dGhvcml0eU9wdGlvbnMuanNcIjtcbmltcG9ydCB7XG4gICAgQ2xvdWRJbnN0YW5jZURpc2NvdmVyeVJlc3BvbnNlLFxuICAgIGlzQ2xvdWRJbnN0YW5jZURpc2NvdmVyeVJlc3BvbnNlLFxufSBmcm9tIFwiLi9DbG91ZEluc3RhbmNlRGlzY292ZXJ5UmVzcG9uc2UuanNcIjtcbmltcG9ydCB7XG4gICAgQ2xvdWRJbnN0YW5jZURpc2NvdmVyeUVycm9yUmVzcG9uc2UsXG4gICAgaXNDbG91ZEluc3RhbmNlRGlzY292ZXJ5RXJyb3JSZXNwb25zZSxcbn0gZnJvbSBcIi4vQ2xvdWRJbnN0YW5jZURpc2NvdmVyeUVycm9yUmVzcG9uc2UuanNcIjtcbmltcG9ydCB7IENsb3VkRGlzY292ZXJ5TWV0YWRhdGEgfSBmcm9tIFwiLi9DbG91ZERpc2NvdmVyeU1ldGFkYXRhLmpzXCI7XG5pbXBvcnQgeyBSZWdpb25EaXNjb3ZlcnkgfSBmcm9tIFwiLi9SZWdpb25EaXNjb3ZlcnkuanNcIjtcbmltcG9ydCB7IFJlZ2lvbkRpc2NvdmVyeU1ldGFkYXRhIH0gZnJvbSBcIi4vUmVnaW9uRGlzY292ZXJ5TWV0YWRhdGEuanNcIjtcbmltcG9ydCB7IEltZHNPcHRpb25zIH0gZnJvbSBcIi4vSW1kc09wdGlvbnMuanNcIjtcbmltcG9ydCB7IEF6dXJlQ2xvdWRPcHRpb25zIH0gZnJvbSBcIi4uL2NvbmZpZy9DbGllbnRDb25maWd1cmF0aW9uLmpzXCI7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiLi4vbG9nZ2VyL0xvZ2dlci5qc1wiO1xuaW1wb3J0IHsgQXV0aEVycm9yIH0gZnJvbSBcIi4uL2Vycm9yL0F1dGhFcnJvci5qc1wiO1xuaW1wb3J0IHsgSVBlcmZvcm1hbmNlQ2xpZW50IH0gZnJvbSBcIi4uL3RlbGVtZXRyeS9wZXJmb3JtYW5jZS9JUGVyZm9ybWFuY2VDbGllbnQuanNcIjtcbmltcG9ydCB7IFBlcmZvcm1hbmNlRXZlbnRzIH0gZnJvbSBcIi4uL3RlbGVtZXRyeS9wZXJmb3JtYW5jZS9QZXJmb3JtYW5jZUV2ZW50LmpzXCI7XG5pbXBvcnQgeyBpbnZva2VBc3luYyB9IGZyb20gXCIuLi91dGlscy9GdW5jdGlvbldyYXBwZXJzLmpzXCI7XG5pbXBvcnQgKiBhcyBDYWNoZUhlbHBlcnMgZnJvbSBcIi4uL2NhY2hlL3V0aWxzL0NhY2hlSGVscGVycy5qc1wiO1xuXG4vKipcbiAqIFRoZSBhdXRob3JpdHkgY2xhc3MgdmFsaWRhdGVzIHRoZSBhdXRob3JpdHkgVVJJcyB1c2VkIGJ5IHRoZSB1c2VyLCBhbmQgcmV0cmlldmVzIHRoZSBPcGVuSUQgQ29uZmlndXJhdGlvbiBEYXRhIGZyb20gdGhlXG4gKiBlbmRwb2ludC4gSXQgd2lsbCBzdG9yZSB0aGUgcGVydGluZW50IGNvbmZpZyBkYXRhIGluIHRoaXMgb2JqZWN0IGZvciB1c2UgZHVyaW5nIHRva2VuIGNhbGxzLlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBjbGFzcyBBdXRob3JpdHkge1xuICAgIC8vIENhbm9uaWNhbCBhdXRob3JpdHkgdXJsIHN0cmluZ1xuICAgIHByaXZhdGUgX2Nhbm9uaWNhbEF1dGhvcml0eTogVXJsU3RyaW5nO1xuICAgIC8vIENhbm9uaWNhbHkgYXV0aG9yaXR5IHVybCBjb21wb25lbnRzXG4gICAgcHJpdmF0ZSBfY2Fub25pY2FsQXV0aG9yaXR5VXJsQ29tcG9uZW50czogSVVyaSB8IG51bGw7XG4gICAgLy8gTmV0d29yayBpbnRlcmZhY2UgdG8gbWFrZSByZXF1ZXN0cyB3aXRoLlxuICAgIHByb3RlY3RlZCBuZXR3b3JrSW50ZXJmYWNlOiBJTmV0d29ya01vZHVsZTtcbiAgICAvLyBDYWNoZSBNYW5hZ2VyIHRvIGNhY2hlIG5ldHdvcmsgcmVzcG9uc2VzXG4gICAgcHJvdGVjdGVkIGNhY2hlTWFuYWdlcjogSUNhY2hlTWFuYWdlcjtcbiAgICAvLyBQcm90b2NvbCBtb2RlIHRvIGNvbnN0cnVjdCBlbmRwb2ludHNcbiAgICBwcml2YXRlIGF1dGhvcml0eU9wdGlvbnM6IEF1dGhvcml0eU9wdGlvbnM7XG4gICAgLy8gQXV0aG9yaXR5IG1ldGFkYXRhXG4gICAgcHJpdmF0ZSBtZXRhZGF0YTogQXV0aG9yaXR5TWV0YWRhdGFFbnRpdHk7XG4gICAgLy8gUmVnaW9uIGRpc2NvdmVyeSBzZXJ2aWNlXG4gICAgcHJpdmF0ZSByZWdpb25EaXNjb3Zlcnk6IFJlZ2lvbkRpc2NvdmVyeTtcbiAgICAvLyBSZWdpb24gZGlzY292ZXJ5IG1ldGFkYXRhXG4gICAgcHVibGljIHJlZ2lvbkRpc2NvdmVyeU1ldGFkYXRhOiBSZWdpb25EaXNjb3ZlcnlNZXRhZGF0YTtcbiAgICAvLyBMb2dnZXIgb2JqZWN0XG4gICAgcHJpdmF0ZSBsb2dnZXI6IExvZ2dlcjtcbiAgICAvLyBQZXJmb3JtYW5jZSBjbGllbnRcbiAgICBwcm90ZWN0ZWQgcGVyZm9ybWFuY2VDbGllbnQ6IElQZXJmb3JtYW5jZUNsaWVudCB8IHVuZGVmaW5lZDtcbiAgICAvLyBDb3JyZWxhdGlvbiBJZFxuICAgIHByb3RlY3RlZCBjb3JyZWxhdGlvbklkOiBzdHJpbmc7XG4gICAgLy8gSW5kaWNhdGVzIGlmIHRoZSBhdXRob3JpdHkgaXMgZmFrZSwgZm9yIHRoZSBwdXJwb3NlIG9mIGEgTWFuYWdlZCBJZGVudGl0eSBBcHBsaWNhdGlvblxuICAgIHByaXZhdGUgbWFuYWdlZElkZW50aXR5OiBib29sZWFuO1xuICAgIC8vIFJlc2VydmVkIHRlbmFudCBkb21haW4gbmFtZXMgdGhhdCB3aWxsIG5vdCBiZSByZXBsYWNlZCB3aXRoIHRlbmFudCBpZFxuICAgIHByaXZhdGUgc3RhdGljIHJlc2VydmVkVGVuYW50RG9tYWluczogU2V0PHN0cmluZz4gPSBuZXcgU2V0KFtcbiAgICAgICAgXCJ7dGVuYW50fVwiLFxuICAgICAgICBcInt0ZW5hbnRpZH1cIixcbiAgICAgICAgQUFEQXV0aG9yaXR5Q29uc3RhbnRzLkNPTU1PTixcbiAgICAgICAgQUFEQXV0aG9yaXR5Q29uc3RhbnRzLkNPTlNVTUVSUyxcbiAgICAgICAgQUFEQXV0aG9yaXR5Q29uc3RhbnRzLk9SR0FOSVpBVElPTlMsXG4gICAgXSk7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgYXV0aG9yaXR5OiBzdHJpbmcsXG4gICAgICAgIG5ldHdvcmtJbnRlcmZhY2U6IElOZXR3b3JrTW9kdWxlLFxuICAgICAgICBjYWNoZU1hbmFnZXI6IElDYWNoZU1hbmFnZXIsXG4gICAgICAgIGF1dGhvcml0eU9wdGlvbnM6IEF1dGhvcml0eU9wdGlvbnMsXG4gICAgICAgIGxvZ2dlcjogTG9nZ2VyLFxuICAgICAgICBjb3JyZWxhdGlvbklkOiBzdHJpbmcsXG4gICAgICAgIHBlcmZvcm1hbmNlQ2xpZW50PzogSVBlcmZvcm1hbmNlQ2xpZW50LFxuICAgICAgICBtYW5hZ2VkSWRlbnRpdHk/OiBib29sZWFuXG4gICAgKSB7XG4gICAgICAgIHRoaXMuY2Fub25pY2FsQXV0aG9yaXR5ID0gYXV0aG9yaXR5O1xuICAgICAgICB0aGlzLl9jYW5vbmljYWxBdXRob3JpdHkudmFsaWRhdGVBc1VyaSgpO1xuICAgICAgICB0aGlzLm5ldHdvcmtJbnRlcmZhY2UgPSBuZXR3b3JrSW50ZXJmYWNlO1xuICAgICAgICB0aGlzLmNhY2hlTWFuYWdlciA9IGNhY2hlTWFuYWdlcjtcbiAgICAgICAgdGhpcy5hdXRob3JpdHlPcHRpb25zID0gYXV0aG9yaXR5T3B0aW9ucztcbiAgICAgICAgdGhpcy5yZWdpb25EaXNjb3ZlcnlNZXRhZGF0YSA9IHtcbiAgICAgICAgICAgIHJlZ2lvbl91c2VkOiB1bmRlZmluZWQsXG4gICAgICAgICAgICByZWdpb25fc291cmNlOiB1bmRlZmluZWQsXG4gICAgICAgICAgICByZWdpb25fb3V0Y29tZTogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmxvZ2dlciA9IGxvZ2dlcjtcbiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudCA9IHBlcmZvcm1hbmNlQ2xpZW50O1xuICAgICAgICB0aGlzLmNvcnJlbGF0aW9uSWQgPSBjb3JyZWxhdGlvbklkO1xuICAgICAgICB0aGlzLm1hbmFnZWRJZGVudGl0eSA9IG1hbmFnZWRJZGVudGl0eSB8fCBmYWxzZTtcbiAgICAgICAgdGhpcy5yZWdpb25EaXNjb3ZlcnkgPSBuZXcgUmVnaW9uRGlzY292ZXJ5KFxuICAgICAgICAgICAgbmV0d29ya0ludGVyZmFjZSxcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLFxuICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudCxcbiAgICAgICAgICAgIHRoaXMuY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB7QGxpbmsgQXV0aG9yaXR5VHlwZX1cbiAgICAgKiBAcGFyYW0gYXV0aG9yaXR5VXJpIHtAbGluayBJVXJpfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZXRBdXRob3JpdHlUeXBlKGF1dGhvcml0eVVyaTogSVVyaSk6IEF1dGhvcml0eVR5cGUge1xuICAgICAgICAvLyBDSUFNIGF1dGggdXJsIHBhdHRlcm4gaXMgYmVpbmcgc3RhbmRhcmRpemVkIGFzOiA8dGVuYW50Pi5jaWFtbG9naW4uY29tXG4gICAgICAgIGlmIChhdXRob3JpdHlVcmkuSG9zdE5hbWVBbmRQb3J0LmVuZHNXaXRoKENvbnN0YW50cy5DSUFNX0FVVEhfVVJMKSkge1xuICAgICAgICAgICAgcmV0dXJuIEF1dGhvcml0eVR5cGUuQ2lhbTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBhdGhTZWdtZW50cyA9IGF1dGhvcml0eVVyaS5QYXRoU2VnbWVudHM7XG4gICAgICAgIGlmIChwYXRoU2VnbWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHBhdGhTZWdtZW50c1swXS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBDb25zdGFudHMuQURGUzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEF1dGhvcml0eVR5cGUuQWRmcztcbiAgICAgICAgICAgICAgICBjYXNlIENvbnN0YW50cy5EU1RTOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXV0aG9yaXR5VHlwZS5Ec3RzO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBBdXRob3JpdHlUeXBlLkRlZmF1bHQ7XG4gICAgfVxuXG4gICAgLy8gU2VlIGFib3ZlIGZvciBBdXRob3JpdHlUeXBlXG4gICAgcHVibGljIGdldCBhdXRob3JpdHlUeXBlKCk6IEF1dGhvcml0eVR5cGUge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRBdXRob3JpdHlUeXBlKHRoaXMuY2Fub25pY2FsQXV0aG9yaXR5VXJsQ29tcG9uZW50cyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHJvdG9jb2xNb2RlIGVudW0gcmVwcmVzZW50aW5nIHRoZSB3YXkgZW5kcG9pbnRzIGFyZSBjb25zdHJ1Y3RlZC5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHByb3RvY29sTW9kZSgpOiBQcm90b2NvbE1vZGUge1xuICAgICAgICByZXR1cm4gdGhpcy5hdXRob3JpdHlPcHRpb25zLnByb3RvY29sTW9kZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGF1dGhvcml0eU9wdGlvbnMgd2hpY2ggY2FuIGJlIHVzZWQgdG8gcmVpbnN0YW50aWF0ZSBhIG5ldyBhdXRob3JpdHkgaW5zdGFuY2VcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IG9wdGlvbnMoKTogQXV0aG9yaXR5T3B0aW9ucyB7XG4gICAgICAgIHJldHVybiB0aGlzLmF1dGhvcml0eU9wdGlvbnM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBVUkwgdGhhdCBpcyB0aGUgYXV0aG9yaXR5IHNldCBieSB0aGUgZGV2ZWxvcGVyXG4gICAgICovXG4gICAgcHVibGljIGdldCBjYW5vbmljYWxBdXRob3JpdHkoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Nhbm9uaWNhbEF1dGhvcml0eS51cmxTdHJpbmc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyBjYW5vbmljYWwgYXV0aG9yaXR5LlxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgY2Fub25pY2FsQXV0aG9yaXR5KHVybDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuX2Nhbm9uaWNhbEF1dGhvcml0eSA9IG5ldyBVcmxTdHJpbmcodXJsKTtcbiAgICAgICAgdGhpcy5fY2Fub25pY2FsQXV0aG9yaXR5LnZhbGlkYXRlQXNVcmkoKTtcbiAgICAgICAgdGhpcy5fY2Fub25pY2FsQXV0aG9yaXR5VXJsQ29tcG9uZW50cyA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGF1dGhvcml0eSBjb21wb25lbnRzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgY2Fub25pY2FsQXV0aG9yaXR5VXJsQ29tcG9uZW50cygpOiBJVXJpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9jYW5vbmljYWxBdXRob3JpdHlVcmxDb21wb25lbnRzKSB7XG4gICAgICAgICAgICB0aGlzLl9jYW5vbmljYWxBdXRob3JpdHlVcmxDb21wb25lbnRzID1cbiAgICAgICAgICAgICAgICB0aGlzLl9jYW5vbmljYWxBdXRob3JpdHkuZ2V0VXJsQ29tcG9uZW50cygpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2Nhbm9uaWNhbEF1dGhvcml0eVVybENvbXBvbmVudHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGhvc3RuYW1lIGFuZCBwb3J0IGkuZS4gbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgaG9zdG5hbWVBbmRQb3J0KCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbm9uaWNhbEF1dGhvcml0eVVybENvbXBvbmVudHMuSG9zdE5hbWVBbmRQb3J0LnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRlbmFudCBmb3IgYXV0aG9yaXR5LlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgdGVuYW50KCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbm9uaWNhbEF1dGhvcml0eVVybENvbXBvbmVudHMuUGF0aFNlZ21lbnRzWzBdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9BdXRoIC9hdXRob3JpemUgZW5kcG9pbnQgZm9yIHJlcXVlc3RzXG4gICAgICovXG4gICAgcHVibGljIGdldCBhdXRob3JpemF0aW9uRW5kcG9pbnQoKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzY292ZXJ5Q29tcGxldGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVwbGFjZVBhdGgodGhpcy5tZXRhZGF0YS5hdXRob3JpemF0aW9uX2VuZHBvaW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihcbiAgICAgICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy5lbmRwb2ludFJlc29sdXRpb25FcnJvclxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9BdXRoIC90b2tlbiBlbmRwb2ludCBmb3IgcmVxdWVzdHNcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHRva2VuRW5kcG9pbnQoKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzY292ZXJ5Q29tcGxldGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVwbGFjZVBhdGgodGhpcy5tZXRhZGF0YS50b2tlbl9lbmRwb2ludCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuZW5kcG9pbnRSZXNvbHV0aW9uRXJyb3JcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IGRldmljZUNvZGVFbmRwb2ludCgpOiBzdHJpbmcge1xuICAgICAgICBpZiAodGhpcy5kaXNjb3ZlcnlDb21wbGV0ZSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXBsYWNlUGF0aChcbiAgICAgICAgICAgICAgICB0aGlzLm1ldGFkYXRhLnRva2VuX2VuZHBvaW50LnJlcGxhY2UoXCIvdG9rZW5cIiwgXCIvZGV2aWNlY29kZVwiKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihcbiAgICAgICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy5lbmRwb2ludFJlc29sdXRpb25FcnJvclxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9BdXRoIGxvZ291dCBlbmRwb2ludCBmb3IgcmVxdWVzdHNcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IGVuZFNlc3Npb25FbmRwb2ludCgpOiBzdHJpbmcge1xuICAgICAgICBpZiAodGhpcy5kaXNjb3ZlcnlDb21wbGV0ZSgpKSB7XG4gICAgICAgICAgICAvLyBST1BDIHBvbGljaWVzIG1heSBub3QgaGF2ZSBlbmRfc2Vzc2lvbl9lbmRwb2ludCBzZXRcbiAgICAgICAgICAgIGlmICghdGhpcy5tZXRhZGF0YS5lbmRfc2Vzc2lvbl9lbmRwb2ludCkge1xuICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuZW5kU2Vzc2lvbkVuZHBvaW50Tm90U3VwcG9ydGVkXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcGxhY2VQYXRoKHRoaXMubWV0YWRhdGEuZW5kX3Nlc3Npb25fZW5kcG9pbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKFxuICAgICAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT0F1dGggaXNzdWVyIGZvciByZXF1ZXN0c1xuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgc2VsZlNpZ25lZEp3dEF1ZGllbmNlKCk6IHN0cmluZyB7XG4gICAgICAgIGlmICh0aGlzLmRpc2NvdmVyeUNvbXBsZXRlKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcGxhY2VQYXRoKHRoaXMubWV0YWRhdGEuaXNzdWVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihcbiAgICAgICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy5lbmRwb2ludFJlc29sdXRpb25FcnJvclxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEp3a3NfdXJpIGZvciB0b2tlbiBzaWduaW5nIGtleXNcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IGp3a3NVcmkoKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzY292ZXJ5Q29tcGxldGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVwbGFjZVBhdGgodGhpcy5tZXRhZGF0YS5qd2tzX3VyaSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuZW5kcG9pbnRSZXNvbHV0aW9uRXJyb3JcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgZmxhZyBpbmRpY2F0aW5nIHRoYXQgdGVuYW50IG5hbWUgY2FuIGJlIHJlcGxhY2VkIGluIGF1dGhvcml0eSB7QGxpbmsgSVVyaX1cbiAgICAgKiBAcGFyYW0gYXV0aG9yaXR5VXJpIHtAbGluayBJVXJpfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcHJpdmF0ZSBjYW5SZXBsYWNlVGVuYW50KGF1dGhvcml0eVVyaTogSVVyaSk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgYXV0aG9yaXR5VXJpLlBhdGhTZWdtZW50cy5sZW5ndGggPT09IDEgJiZcbiAgICAgICAgICAgICFBdXRob3JpdHkucmVzZXJ2ZWRUZW5hbnREb21haW5zLmhhcyhcbiAgICAgICAgICAgICAgICBhdXRob3JpdHlVcmkuUGF0aFNlZ21lbnRzWzBdXG4gICAgICAgICAgICApICYmXG4gICAgICAgICAgICB0aGlzLmdldEF1dGhvcml0eVR5cGUoYXV0aG9yaXR5VXJpKSA9PT0gQXV0aG9yaXR5VHlwZS5EZWZhdWx0ICYmXG4gICAgICAgICAgICB0aGlzLnByb3RvY29sTW9kZSAhPT0gUHJvdG9jb2xNb2RlLk9JRENcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXBsYWNlcyB0ZW5hbnQgaW4gdXJsIHBhdGggd2l0aCBjdXJyZW50IHRlbmFudC4gRGVmYXVsdHMgdG8gY29tbW9uLlxuICAgICAqIEBwYXJhbSB1cmxTdHJpbmdcbiAgICAgKi9cbiAgICBwcml2YXRlIHJlcGxhY2VUZW5hbnQodXJsU3RyaW5nOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdXJsU3RyaW5nLnJlcGxhY2UoL3t0ZW5hbnR9fHt0ZW5hbnRpZH0vZywgdGhpcy50ZW5hbnQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlcGxhY2VzIHBhdGggc3VjaCBhcyB0ZW5hbnQgb3IgcG9saWN5IHdpdGggdGhlIGN1cnJlbnQgdGVuYW50IG9yIHBvbGljeS5cbiAgICAgKiBAcGFyYW0gdXJsU3RyaW5nXG4gICAgICovXG4gICAgcHJpdmF0ZSByZXBsYWNlUGF0aCh1cmxTdHJpbmc6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGxldCBlbmRwb2ludCA9IHVybFN0cmluZztcbiAgICAgICAgY29uc3QgY2FjaGVkQXV0aG9yaXR5VXJsID0gbmV3IFVybFN0cmluZyhcbiAgICAgICAgICAgIHRoaXMubWV0YWRhdGEuY2Fub25pY2FsX2F1dGhvcml0eVxuICAgICAgICApO1xuICAgICAgICBjb25zdCBjYWNoZWRBdXRob3JpdHlVcmxDb21wb25lbnRzID1cbiAgICAgICAgICAgIGNhY2hlZEF1dGhvcml0eVVybC5nZXRVcmxDb21wb25lbnRzKCk7XG4gICAgICAgIGNvbnN0IGNhY2hlZEF1dGhvcml0eVBhcnRzID0gY2FjaGVkQXV0aG9yaXR5VXJsQ29tcG9uZW50cy5QYXRoU2VnbWVudHM7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRBdXRob3JpdHlQYXJ0cyA9XG4gICAgICAgICAgICB0aGlzLmNhbm9uaWNhbEF1dGhvcml0eVVybENvbXBvbmVudHMuUGF0aFNlZ21lbnRzO1xuXG4gICAgICAgIGN1cnJlbnRBdXRob3JpdHlQYXJ0cy5mb3JFYWNoKChjdXJyZW50UGFydCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGxldCBjYWNoZWRQYXJ0ID0gY2FjaGVkQXV0aG9yaXR5UGFydHNbaW5kZXhdO1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGluZGV4ID09PSAwICYmXG4gICAgICAgICAgICAgICAgdGhpcy5jYW5SZXBsYWNlVGVuYW50KGNhY2hlZEF1dGhvcml0eVVybENvbXBvbmVudHMpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZW5hbnRJZCA9IG5ldyBVcmxTdHJpbmcoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWV0YWRhdGEuYXV0aG9yaXphdGlvbl9lbmRwb2ludFxuICAgICAgICAgICAgICAgICkuZ2V0VXJsQ29tcG9uZW50cygpLlBhdGhTZWdtZW50c1swXTtcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDaGVjayBpZiBBQUQgY2Fub25pY2FsIGF1dGhvcml0eSBjb250YWlucyB0ZW5hbnQgZG9tYWluIG5hbWUsIGZvciBleGFtcGxlIFwidGVzdGRvbWFpbi5vbm1pY3Jvc29mdC5jb21cIixcbiAgICAgICAgICAgICAgICAgKiBieSBjb21wYXJpbmcgaXRzIGZpcnN0IHBhdGggc2VnbWVudCB0byB0aGUgY29ycmVzcG9uZGluZyBhdXRob3JpemF0aW9uIGVuZHBvaW50IHBhdGggc2VnbWVudCwgd2hpY2ggaXNcbiAgICAgICAgICAgICAgICAgKiBhbHdheXMgcmVzb2x2ZWQgd2l0aCB0ZW5hbnQgaWQgYnkgT0lEQy5cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBpZiAoY2FjaGVkUGFydCAhPT0gdGVuYW50SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIudmVyYm9zZShcbiAgICAgICAgICAgICAgICAgICAgICAgIGBSZXBsYWNpbmcgdGVuYW50IGRvbWFpbiBuYW1lICR7Y2FjaGVkUGFydH0gd2l0aCBpZCAke3RlbmFudElkfWBcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVkUGFydCA9IHRlbmFudElkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjdXJyZW50UGFydCAhPT0gY2FjaGVkUGFydCkge1xuICAgICAgICAgICAgICAgIGVuZHBvaW50ID0gZW5kcG9pbnQucmVwbGFjZShcbiAgICAgICAgICAgICAgICAgICAgYC8ke2NhY2hlZFBhcnR9L2AsXG4gICAgICAgICAgICAgICAgICAgIGAvJHtjdXJyZW50UGFydH0vYFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0aGlzLnJlcGxhY2VUZW5hbnQoZW5kcG9pbnQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBkZWZhdWx0IG9wZW4gaWQgY29uZmlndXJhdGlvbiBlbmRwb2ludCBmb3IgYW55IGNhbm9uaWNhbCBhdXRob3JpdHkuXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGdldCBkZWZhdWx0T3BlbklkQ29uZmlndXJhdGlvbkVuZHBvaW50KCk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGNhbm9uaWNhbEF1dGhvcml0eUhvc3QgPSB0aGlzLmhvc3RuYW1lQW5kUG9ydDtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5jYW5vbmljYWxBdXRob3JpdHkuZW5kc1dpdGgoXCJ2Mi4wL1wiKSB8fFxuICAgICAgICAgICAgdGhpcy5hdXRob3JpdHlUeXBlID09PSBBdXRob3JpdHlUeXBlLkFkZnMgfHxcbiAgICAgICAgICAgICh0aGlzLnByb3RvY29sTW9kZSA9PT0gUHJvdG9jb2xNb2RlLk9JREMgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5pc0FsaWFzT2ZLbm93bk1pY3Jvc29mdEF1dGhvcml0eShjYW5vbmljYWxBdXRob3JpdHlIb3N0KSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gYCR7dGhpcy5jYW5vbmljYWxBdXRob3JpdHl9LndlbGwta25vd24vb3BlbmlkLWNvbmZpZ3VyYXRpb25gO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNhbm9uaWNhbEF1dGhvcml0eX12Mi4wLy53ZWxsLWtub3duL29wZW5pZC1jb25maWd1cmF0aW9uYDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBCb29sZWFuIHRoYXQgcmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0ZW5hbnQgZGlzY292ZXJ5IGhhcyBiZWVuIGNvbXBsZXRlZC5cbiAgICAgKi9cbiAgICBkaXNjb3ZlcnlDb21wbGV0ZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5tZXRhZGF0YTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtIGVuZHBvaW50IGRpc2NvdmVyeSB0byBkaXNjb3ZlciBhbGlhc2VzLCBwcmVmZXJyZWRfY2FjaGUsIHByZWZlcnJlZF9uZXR3b3JrXG4gICAgICogYW5kIHRoZSAvYXV0aG9yaXplLCAvdG9rZW4gYW5kIGxvZ291dCBlbmRwb2ludHMuXG4gICAgICovXG4gICAgcHVibGljIGFzeW5jIHJlc29sdmVFbmRwb2ludHNBc3luYygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudD8uYWRkUXVldWVNZWFzdXJlbWVudChcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkF1dGhvcml0eVJlc29sdmVFbmRwb2ludHNBc3luYyxcbiAgICAgICAgICAgIHRoaXMuY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IG1ldGFkYXRhRW50aXR5ID0gdGhpcy5nZXRDdXJyZW50TWV0YWRhdGFFbnRpdHkoKTtcblxuICAgICAgICBjb25zdCBjbG91ZERpc2NvdmVyeVNvdXJjZSA9IGF3YWl0IGludm9rZUFzeW5jKFxuICAgICAgICAgICAgdGhpcy51cGRhdGVDbG91ZERpc2NvdmVyeU1ldGFkYXRhLmJpbmQodGhpcyksXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5BdXRob3JpdHlVcGRhdGVDbG91ZERpc2NvdmVyeU1ldGFkYXRhLFxuICAgICAgICAgICAgdGhpcy5sb2dnZXIsXG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50LFxuICAgICAgICAgICAgdGhpcy5jb3JyZWxhdGlvbklkXG4gICAgICAgICkobWV0YWRhdGFFbnRpdHkpO1xuICAgICAgICB0aGlzLmNhbm9uaWNhbEF1dGhvcml0eSA9IHRoaXMuY2Fub25pY2FsQXV0aG9yaXR5LnJlcGxhY2UoXG4gICAgICAgICAgICB0aGlzLmhvc3RuYW1lQW5kUG9ydCxcbiAgICAgICAgICAgIG1ldGFkYXRhRW50aXR5LnByZWZlcnJlZF9uZXR3b3JrXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGVuZHBvaW50U291cmNlID0gYXdhaXQgaW52b2tlQXN5bmMoXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUVuZHBvaW50TWV0YWRhdGEuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkF1dGhvcml0eVVwZGF0ZUVuZHBvaW50TWV0YWRhdGEsXG4gICAgICAgICAgICB0aGlzLmxvZ2dlcixcbiAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQsXG4gICAgICAgICAgICB0aGlzLmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKShtZXRhZGF0YUVudGl0eSk7XG4gICAgICAgIHRoaXMudXBkYXRlQ2FjaGVkTWV0YWRhdGEobWV0YWRhdGFFbnRpdHksIGNsb3VkRGlzY292ZXJ5U291cmNlLCB7XG4gICAgICAgICAgICBzb3VyY2U6IGVuZHBvaW50U291cmNlLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudD8uYWRkRmllbGRzKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsb3VkRGlzY292ZXJ5U291cmNlOiBjbG91ZERpc2NvdmVyeVNvdXJjZSxcbiAgICAgICAgICAgICAgICBhdXRob3JpdHlFbmRwb2ludFNvdXJjZTogZW5kcG9pbnRTb3VyY2UsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGhpcy5jb3JyZWxhdGlvbklkXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBtZXRhZGF0YSBlbnRpdHkgZnJvbSBjYWNoZSBpZiBpdCBleGlzdHMsIG90aGVyd2lzZXIgcmV0dXJucyBhIG5ldyBtZXRhZGF0YSBlbnRpdHkgYnVpbHRcbiAgICAgKiBmcm9tIHRoZSBjb25maWd1cmVkIGNhbm9uaWNhbCBhdXRob3JpdHlcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIHByaXZhdGUgZ2V0Q3VycmVudE1ldGFkYXRhRW50aXR5KCk6IEF1dGhvcml0eU1ldGFkYXRhRW50aXR5IHtcbiAgICAgICAgbGV0IG1ldGFkYXRhRW50aXR5OiBBdXRob3JpdHlNZXRhZGF0YUVudGl0eSB8IG51bGwgPVxuICAgICAgICAgICAgdGhpcy5jYWNoZU1hbmFnZXIuZ2V0QXV0aG9yaXR5TWV0YWRhdGFCeUFsaWFzKHRoaXMuaG9zdG5hbWVBbmRQb3J0KTtcblxuICAgICAgICBpZiAoIW1ldGFkYXRhRW50aXR5KSB7XG4gICAgICAgICAgICBtZXRhZGF0YUVudGl0eSA9IHtcbiAgICAgICAgICAgICAgICBhbGlhc2VzOiBbXSxcbiAgICAgICAgICAgICAgICBwcmVmZXJyZWRfY2FjaGU6IHRoaXMuaG9zdG5hbWVBbmRQb3J0LFxuICAgICAgICAgICAgICAgIHByZWZlcnJlZF9uZXR3b3JrOiB0aGlzLmhvc3RuYW1lQW5kUG9ydCxcbiAgICAgICAgICAgICAgICBjYW5vbmljYWxfYXV0aG9yaXR5OiB0aGlzLmNhbm9uaWNhbEF1dGhvcml0eSxcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uX2VuZHBvaW50OiBcIlwiLFxuICAgICAgICAgICAgICAgIHRva2VuX2VuZHBvaW50OiBcIlwiLFxuICAgICAgICAgICAgICAgIGVuZF9zZXNzaW9uX2VuZHBvaW50OiBcIlwiLFxuICAgICAgICAgICAgICAgIGlzc3VlcjogXCJcIixcbiAgICAgICAgICAgICAgICBhbGlhc2VzRnJvbU5ldHdvcms6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVuZHBvaW50c0Zyb21OZXR3b3JrOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBleHBpcmVzQXQ6IENhY2hlSGVscGVycy5nZW5lcmF0ZUF1dGhvcml0eU1ldGFkYXRhRXhwaXJlc0F0KCksXG4gICAgICAgICAgICAgICAgandrc191cmk6IFwiXCIsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXRhZGF0YUVudGl0eTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIGNhY2hlZCBtZXRhZGF0YSBiYXNlZCBvbiBtZXRhZGF0YSBzb3VyY2UgYW5kIHNldHMgdGhlIGluc3RhbmNlJ3MgbWV0YWRhdGFcbiAgICAgKiBwcm9wZXJ0eSB0byB0aGUgc2FtZSB2YWx1ZVxuICAgICAqIEBwYXJhbSBtZXRhZGF0YUVudGl0eVxuICAgICAqIEBwYXJhbSBjbG91ZERpc2NvdmVyeVNvdXJjZVxuICAgICAqIEBwYXJhbSBlbmRwb2ludE1ldGFkYXRhUmVzdWx0XG4gICAgICovXG4gICAgcHJpdmF0ZSB1cGRhdGVDYWNoZWRNZXRhZGF0YShcbiAgICAgICAgbWV0YWRhdGFFbnRpdHk6IEF1dGhvcml0eU1ldGFkYXRhRW50aXR5LFxuICAgICAgICBjbG91ZERpc2NvdmVyeVNvdXJjZTogQXV0aG9yaXR5TWV0YWRhdGFTb3VyY2UgfCBudWxsLFxuICAgICAgICBlbmRwb2ludE1ldGFkYXRhUmVzdWx0OiB7XG4gICAgICAgICAgICBzb3VyY2U6IEF1dGhvcml0eU1ldGFkYXRhU291cmNlO1xuICAgICAgICAgICAgbWV0YWRhdGE/OiBPcGVuSWRDb25maWdSZXNwb25zZTtcbiAgICAgICAgfSB8IG51bGxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgY2xvdWREaXNjb3ZlcnlTb3VyY2UgIT09IEF1dGhvcml0eU1ldGFkYXRhU291cmNlLkNBQ0hFICYmXG4gICAgICAgICAgICBlbmRwb2ludE1ldGFkYXRhUmVzdWx0Py5zb3VyY2UgIT09IEF1dGhvcml0eU1ldGFkYXRhU291cmNlLkNBQ0hFXG4gICAgICAgICkge1xuICAgICAgICAgICAgLy8gUmVzZXQgdGhlIGV4cGlyYXRpb24gdGltZSB1bmxlc3MgYm90aCB2YWx1ZXMgY2FtZSBmcm9tIGEgc3VjY2Vzc2Z1bCBjYWNoZSBsb29rdXBcbiAgICAgICAgICAgIG1ldGFkYXRhRW50aXR5LmV4cGlyZXNBdCA9XG4gICAgICAgICAgICAgICAgQ2FjaGVIZWxwZXJzLmdlbmVyYXRlQXV0aG9yaXR5TWV0YWRhdGFFeHBpcmVzQXQoKTtcbiAgICAgICAgICAgIG1ldGFkYXRhRW50aXR5LmNhbm9uaWNhbF9hdXRob3JpdHkgPSB0aGlzLmNhbm9uaWNhbEF1dGhvcml0eTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNhY2hlS2V5ID0gdGhpcy5jYWNoZU1hbmFnZXIuZ2VuZXJhdGVBdXRob3JpdHlNZXRhZGF0YUNhY2hlS2V5KFxuICAgICAgICAgICAgbWV0YWRhdGFFbnRpdHkucHJlZmVycmVkX2NhY2hlXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuY2FjaGVNYW5hZ2VyLnNldEF1dGhvcml0eU1ldGFkYXRhKGNhY2hlS2V5LCBtZXRhZGF0YUVudGl0eSk7XG4gICAgICAgIHRoaXMubWV0YWRhdGEgPSBtZXRhZGF0YUVudGl0eTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgQXV0aG9yaXR5TWV0YWRhdGFFbnRpdHkgd2l0aCBuZXcgZW5kcG9pbnRzIGFuZCByZXR1cm4gd2hlcmUgdGhlIGluZm9ybWF0aW9uIGNhbWUgZnJvbVxuICAgICAqIEBwYXJhbSBtZXRhZGF0YUVudGl0eVxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgdXBkYXRlRW5kcG9pbnRNZXRhZGF0YShcbiAgICAgICAgbWV0YWRhdGFFbnRpdHk6IEF1dGhvcml0eU1ldGFkYXRhRW50aXR5XG4gICAgKTogUHJvbWlzZTxBdXRob3JpdHlNZXRhZGF0YVNvdXJjZT4ge1xuICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50Py5hZGRRdWV1ZU1lYXN1cmVtZW50KFxuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuQXV0aG9yaXR5VXBkYXRlRW5kcG9pbnRNZXRhZGF0YSxcbiAgICAgICAgICAgIHRoaXMuY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGxvY2FsTWV0YWRhdGEgPVxuICAgICAgICAgICAgdGhpcy51cGRhdGVFbmRwb2ludE1ldGFkYXRhRnJvbUxvY2FsU291cmNlcyhtZXRhZGF0YUVudGl0eSk7XG5cbiAgICAgICAgLy8gRnVydGhlciB1cGRhdGUgbWF5IGJlIHJlcXVpcmVkIGZvciBoYXJkY29kZWQgbWV0YWRhdGEgaWYgcmVnaW9uYWwgbWV0YWRhdGEgaXMgcHJlZmVycmVkXG4gICAgICAgIGlmIChsb2NhbE1ldGFkYXRhKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgbG9jYWxNZXRhZGF0YS5zb3VyY2UgPT09XG4gICAgICAgICAgICAgICAgQXV0aG9yaXR5TWV0YWRhdGFTb3VyY2UuSEFSRENPREVEX1ZBTFVFU1xuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIHVzZXIgcHJlZmVycyB0byB1c2UgYW4gYXp1cmUgcmVnaW9uIHJlcGxhY2UgdGhlIGdsb2JhbCBlbmRwb2ludHMgd2l0aCByZWdpb25hbCBpbmZvcm1hdGlvbi5cbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXV0aG9yaXR5T3B0aW9ucy5henVyZVJlZ2lvbkNvbmZpZ3VyYXRpb24/LmF6dXJlUmVnaW9uXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsb2NhbE1ldGFkYXRhLm1ldGFkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoYXJkY29kZWRNZXRhZGF0YSA9IGF3YWl0IGludm9rZUFzeW5jKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTWV0YWRhdGFXaXRoUmVnaW9uYWxJbmZvcm1hdGlvbi5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5BdXRob3JpdHlVcGRhdGVNZXRhZGF0YVdpdGhSZWdpb25hbEluZm9ybWF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3JyZWxhdGlvbklkXG4gICAgICAgICAgICAgICAgICAgICAgICApKGxvY2FsTWV0YWRhdGEubWV0YWRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgQ2FjaGVIZWxwZXJzLnVwZGF0ZUF1dGhvcml0eUVuZHBvaW50TWV0YWRhdGEoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGFFbnRpdHksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFyZGNvZGVkTWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YUVudGl0eS5jYW5vbmljYWxfYXV0aG9yaXR5ID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbm9uaWNhbEF1dGhvcml0eTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBsb2NhbE1ldGFkYXRhLnNvdXJjZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEdldCBtZXRhZGF0YSBmcm9tIG5ldHdvcmsgaWYgbG9jYWwgc291cmNlcyBhcmVuJ3QgYXZhaWxhYmxlXG4gICAgICAgIGxldCBtZXRhZGF0YSA9IGF3YWl0IGludm9rZUFzeW5jKFxuICAgICAgICAgICAgdGhpcy5nZXRFbmRwb2ludE1ldGFkYXRhRnJvbU5ldHdvcmsuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkF1dGhvcml0eUdldEVuZHBvaW50TWV0YWRhdGFGcm9tTmV0d29yayxcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLFxuICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudCxcbiAgICAgICAgICAgIHRoaXMuY29ycmVsYXRpb25JZFxuICAgICAgICApKCk7XG4gICAgICAgIGlmIChtZXRhZGF0YSkge1xuICAgICAgICAgICAgLy8gSWYgdGhlIHVzZXIgcHJlZmVycyB0byB1c2UgYW4gYXp1cmUgcmVnaW9uIHJlcGxhY2UgdGhlIGdsb2JhbCBlbmRwb2ludHMgd2l0aCByZWdpb25hbCBpbmZvcm1hdGlvbi5cbiAgICAgICAgICAgIGlmICh0aGlzLmF1dGhvcml0eU9wdGlvbnMuYXp1cmVSZWdpb25Db25maWd1cmF0aW9uPy5henVyZVJlZ2lvbikge1xuICAgICAgICAgICAgICAgIG1ldGFkYXRhID0gYXdhaXQgaW52b2tlQXN5bmMoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTWV0YWRhdGFXaXRoUmVnaW9uYWxJbmZvcm1hdGlvbi5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5BdXRob3JpdHlVcGRhdGVNZXRhZGF0YVdpdGhSZWdpb25hbEluZm9ybWF0aW9uLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlcixcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudCxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3JyZWxhdGlvbklkXG4gICAgICAgICAgICAgICAgKShtZXRhZGF0YSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIENhY2hlSGVscGVycy51cGRhdGVBdXRob3JpdHlFbmRwb2ludE1ldGFkYXRhKFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhRW50aXR5LFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhLFxuICAgICAgICAgICAgICAgIHRydWVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm4gQXV0aG9yaXR5TWV0YWRhdGFTb3VyY2UuTkVUV09SSztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE1ldGFkYXRhIGNvdWxkIG5vdCBiZSBvYnRhaW5lZCBmcm9tIHRoZSBjb25maWcsIGNhY2hlLCBuZXR3b3JrIG9yIGhhcmRjb2RlZCB2YWx1ZXNcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihcbiAgICAgICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy5vcGVuSWRDb25maWdFcnJvcixcbiAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHRPcGVuSWRDb25maWd1cmF0aW9uRW5kcG9pbnRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIGVuZHBvaW50IG1ldGFkYXRhIGZyb20gbG9jYWwgc291cmNlcyBhbmQgcmV0dXJucyB3aGVyZSB0aGUgaW5mb3JtYXRpb24gd2FzIHJldHJpZXZlZCBmcm9tIGFuZCB0aGUgbWV0YWRhdGEgY29uZmlnXG4gICAgICogcmVzcG9uc2UgaWYgdGhlIHNvdXJjZSBpcyBoYXJkY29kZWQgbWV0YWRhdGFcbiAgICAgKiBAcGFyYW0gbWV0YWRhdGFFbnRpdHlcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIHByaXZhdGUgdXBkYXRlRW5kcG9pbnRNZXRhZGF0YUZyb21Mb2NhbFNvdXJjZXMoXG4gICAgICAgIG1ldGFkYXRhRW50aXR5OiBBdXRob3JpdHlNZXRhZGF0YUVudGl0eVxuICAgICk6IHtcbiAgICAgICAgc291cmNlOiBBdXRob3JpdHlNZXRhZGF0YVNvdXJjZTtcbiAgICAgICAgbWV0YWRhdGE/OiBPcGVuSWRDb25maWdSZXNwb25zZTtcbiAgICB9IHwgbnVsbCB7XG4gICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICBcIkF0dGVtcHRpbmcgdG8gZ2V0IGVuZHBvaW50IG1ldGFkYXRhIGZyb20gYXV0aG9yaXR5IGNvbmZpZ3VyYXRpb25cIlxuICAgICAgICApO1xuICAgICAgICBjb25zdCBjb25maWdNZXRhZGF0YSA9IHRoaXMuZ2V0RW5kcG9pbnRNZXRhZGF0YUZyb21Db25maWcoKTtcbiAgICAgICAgaWYgKGNvbmZpZ01ldGFkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFxuICAgICAgICAgICAgICAgIFwiRm91bmQgZW5kcG9pbnQgbWV0YWRhdGEgaW4gYXV0aG9yaXR5IGNvbmZpZ3VyYXRpb25cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIENhY2hlSGVscGVycy51cGRhdGVBdXRob3JpdHlFbmRwb2ludE1ldGFkYXRhKFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhRW50aXR5LFxuICAgICAgICAgICAgICAgIGNvbmZpZ01ldGFkYXRhLFxuICAgICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzb3VyY2U6IEF1dGhvcml0eU1ldGFkYXRhU291cmNlLkNPTkZJRyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFxuICAgICAgICAgICAgXCJEaWQgbm90IGZpbmQgZW5kcG9pbnQgbWV0YWRhdGEgaW4gdGhlIGNvbmZpZy4uLiBBdHRlbXB0aW5nIHRvIGdldCBlbmRwb2ludCBtZXRhZGF0YSBmcm9tIHRoZSBoYXJkY29kZWQgdmFsdWVzLlwiXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gc2tpcEF1dGhvcml0eU1ldGFkYXRhQ2FjaGUgaXMgdXNlZCB0byBieXBhc3MgaGFyZGNvZGVkIGF1dGhvcml0eSBtZXRhZGF0YSBhbmQgZm9yY2UgYSBuZXR3b3JrIG1ldGFkYXRhIGNhY2hlIGxvb2t1cCBhbmQgbmV0d29yayBtZXRhZGF0YSByZXF1ZXN0IGlmIG5vIGNhY2hlZCByZXNwb25zZSBpcyBhdmFpbGFibGUuXG4gICAgICAgIGlmICh0aGlzLmF1dGhvcml0eU9wdGlvbnMuc2tpcEF1dGhvcml0eU1ldGFkYXRhQ2FjaGUpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgXCJTa2lwcGluZyBoYXJkY29kZWQgbWV0YWRhdGEgY2FjaGUgc2luY2Ugc2tpcEF1dGhvcml0eU1ldGFkYXRhQ2FjaGUgaXMgc2V0IHRvIHRydWUuIEF0dGVtcHRpbmcgdG8gZ2V0IGVuZHBvaW50IG1ldGFkYXRhIGZyb20gdGhlIG5ldHdvcmsgbWV0YWRhdGEgY2FjaGUuXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBoYXJkY29kZWRNZXRhZGF0YSA9XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRFbmRwb2ludE1ldGFkYXRhRnJvbUhhcmRjb2RlZFZhbHVlcygpO1xuICAgICAgICAgICAgaWYgKGhhcmRjb2RlZE1ldGFkYXRhKSB7XG4gICAgICAgICAgICAgICAgQ2FjaGVIZWxwZXJzLnVwZGF0ZUF1dGhvcml0eUVuZHBvaW50TWV0YWRhdGEoXG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhRW50aXR5LFxuICAgICAgICAgICAgICAgICAgICBoYXJkY29kZWRNZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogQXV0aG9yaXR5TWV0YWRhdGFTb3VyY2UuSEFSRENPREVEX1ZBTFVFUyxcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6IGhhcmRjb2RlZE1ldGFkYXRhLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgICAgIFwiRGlkIG5vdCBmaW5kIGVuZHBvaW50IG1ldGFkYXRhIGluIGhhcmRjb2RlZCB2YWx1ZXMuLi4gQXR0ZW1wdGluZyB0byBnZXQgZW5kcG9pbnQgbWV0YWRhdGEgZnJvbSB0aGUgbmV0d29yayBtZXRhZGF0YSBjYWNoZS5cIlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBjYWNoZWQgbWV0YWRhdGEgZW50aXR5IGV4cGlyYXRpb24gc3RhdHVzXG4gICAgICAgIGNvbnN0IG1ldGFkYXRhRW50aXR5RXhwaXJlZCA9XG4gICAgICAgICAgICBDYWNoZUhlbHBlcnMuaXNBdXRob3JpdHlNZXRhZGF0YUV4cGlyZWQobWV0YWRhdGFFbnRpdHkpO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLmlzQXV0aG9yaXR5U2FtZVR5cGUobWV0YWRhdGFFbnRpdHkpICYmXG4gICAgICAgICAgICBtZXRhZGF0YUVudGl0eS5lbmRwb2ludHNGcm9tTmV0d29yayAmJlxuICAgICAgICAgICAgIW1ldGFkYXRhRW50aXR5RXhwaXJlZFxuICAgICAgICApIHtcbiAgICAgICAgICAgIC8vIE5vIG5lZWQgdG8gdXBkYXRlXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFwiRm91bmQgZW5kcG9pbnQgbWV0YWRhdGEgaW4gdGhlIGNhY2hlLlwiKTtcbiAgICAgICAgICAgIHJldHVybiB7IHNvdXJjZTogQXV0aG9yaXR5TWV0YWRhdGFTb3VyY2UuQ0FDSEUgfTtcbiAgICAgICAgfSBlbHNlIGlmIChtZXRhZGF0YUVudGl0eUV4cGlyZWQpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXCJUaGUgbWV0YWRhdGEgZW50aXR5IGlzIGV4cGlyZWQuXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29tcGFyZXMgdGhlIG51bWJlciBvZiB1cmwgY29tcG9uZW50cyBhZnRlciB0aGUgZG9tYWluIHRvIGRldGVybWluZSBpZiB0aGUgY2FjaGVkXG4gICAgICogYXV0aG9yaXR5IG1ldGFkYXRhIGNhbiBiZSB1c2VkIGZvciB0aGUgcmVxdWVzdGVkIGF1dGhvcml0eS4gUHJvdGVjdHMgYWdhaW5zdCBzYW1lIGRvbWFpbiBkaWZmZXJlbnRcbiAgICAgKiBhdXRob3JpdHkgc3VjaCBhcyBsb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tL3RlbmFudCBhbmQgbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbS90ZnAvdGVuYW50L3BvbGljeVxuICAgICAqIEBwYXJhbSBtZXRhZGF0YUVudGl0eVxuICAgICAqL1xuICAgIHByaXZhdGUgaXNBdXRob3JpdHlTYW1lVHlwZShcbiAgICAgICAgbWV0YWRhdGFFbnRpdHk6IEF1dGhvcml0eU1ldGFkYXRhRW50aXR5XG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGNhY2hlZEF1dGhvcml0eVVybCA9IG5ldyBVcmxTdHJpbmcoXG4gICAgICAgICAgICBtZXRhZGF0YUVudGl0eS5jYW5vbmljYWxfYXV0aG9yaXR5XG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGNhY2hlZFBhcnRzID0gY2FjaGVkQXV0aG9yaXR5VXJsLmdldFVybENvbXBvbmVudHMoKS5QYXRoU2VnbWVudHM7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIGNhY2hlZFBhcnRzLmxlbmd0aCA9PT1cbiAgICAgICAgICAgIHRoaXMuY2Fub25pY2FsQXV0aG9yaXR5VXJsQ29tcG9uZW50cy5QYXRoU2VnbWVudHMubGVuZ3RoXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyc2UgYXV0aG9yaXR5TWV0YWRhdGEgY29uZmlnIG9wdGlvblxuICAgICAqL1xuICAgIHByaXZhdGUgZ2V0RW5kcG9pbnRNZXRhZGF0YUZyb21Db25maWcoKTogT3BlbklkQ29uZmlnUmVzcG9uc2UgfCBudWxsIHtcbiAgICAgICAgaWYgKHRoaXMuYXV0aG9yaXR5T3B0aW9ucy5hdXRob3JpdHlNZXRhZGF0YSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdXRob3JpdHlPcHRpb25zLmF1dGhvcml0eU1ldGFkYXRhXG4gICAgICAgICAgICAgICAgKSBhcyBPcGVuSWRDb25maWdSZXNwb25zZTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRDb25maWd1cmF0aW9uRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmludmFsaWRBdXRob3JpdHlNZXRhZGF0YVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIE9BdXRoIGVuZHBvaW50cyBmcm9tIHRoZSBnaXZlbiBPcGVuSUQgY29uZmlndXJhdGlvbiBlbmRwb2ludC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBoYXNIYXJkY29kZWRNZXRhZGF0YSBib29sZWFuXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBnZXRFbmRwb2ludE1ldGFkYXRhRnJvbU5ldHdvcmsoKTogUHJvbWlzZTxPcGVuSWRDb25maWdSZXNwb25zZSB8IG51bGw+IHtcbiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudD8uYWRkUXVldWVNZWFzdXJlbWVudChcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkF1dGhvcml0eUdldEVuZHBvaW50TWV0YWRhdGFGcm9tTmV0d29yayxcbiAgICAgICAgICAgIHRoaXMuY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IG9wdGlvbnM6IEltZHNPcHRpb25zID0ge307XG5cbiAgICAgICAgLypcbiAgICAgICAgICogVE9ETzogQWRkIGEgdGltZW91dCBpZiB0aGUgYXV0aG9yaXR5IGV4aXN0cyBpbiBvdXIgbGlicmFyeSdzXG4gICAgICAgICAqIGhhcmRjb2RlZCBsaXN0IG9mIG1ldGFkYXRhXG4gICAgICAgICAqL1xuXG4gICAgICAgIGNvbnN0IG9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludCA9XG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRPcGVuSWRDb25maWd1cmF0aW9uRW5kcG9pbnQ7XG4gICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICBgQXV0aG9yaXR5LmdldEVuZHBvaW50TWV0YWRhdGFGcm9tTmV0d29yazogYXR0ZW1wdGluZyB0byByZXRyaWV2ZSBPQXV0aCBlbmRwb2ludHMgZnJvbSAke29wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludH1gXG4gICAgICAgICk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID1cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm5ldHdvcmtJbnRlcmZhY2Uuc2VuZEdldFJlcXVlc3RBc3luYzxPcGVuSWRDb25maWdSZXNwb25zZT4oXG4gICAgICAgICAgICAgICAgICAgIG9wZW5JZENvbmZpZ3VyYXRpb25FbmRwb2ludCxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uc1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBpc1ZhbGlkUmVzcG9uc2UgPSBpc09wZW5JZENvbmZpZ1Jlc3BvbnNlKHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgaWYgKGlzVmFsaWRSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5ib2R5O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFxuICAgICAgICAgICAgICAgICAgICBgQXV0aG9yaXR5LmdldEVuZHBvaW50TWV0YWRhdGFGcm9tTmV0d29yazogY291bGQgbm90IHBhcnNlIHJlc3BvbnNlIGFzIE9wZW5JRCBjb25maWd1cmF0aW9uYFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgYEF1dGhvcml0eS5nZXRFbmRwb2ludE1ldGFkYXRhRnJvbU5ldHdvcms6ICR7ZX1gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgT0F1dGggZW5kcG9pbnRzIGZvciBjb21tb24gYXV0aG9yaXRpZXMuXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZXRFbmRwb2ludE1ldGFkYXRhRnJvbUhhcmRjb2RlZFZhbHVlcygpOiBPcGVuSWRDb25maWdSZXNwb25zZSB8IG51bGwge1xuICAgICAgICBpZiAodGhpcy5ob3N0bmFtZUFuZFBvcnQgaW4gRW5kcG9pbnRNZXRhZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIEVuZHBvaW50TWV0YWRhdGFbdGhpcy5ob3N0bmFtZUFuZFBvcnRdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSByZXRyaWV2ZWQgbWV0YWRhdGEgd2l0aCByZWdpb25hbCBpbmZvcm1hdGlvbi5cbiAgICAgKiBVc2VyIHNlbGVjdGVkIEF6dXJlIHJlZ2lvbiB3aWxsIGJlIHVzZWQgaWYgY29uZmlndXJlZC5cbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIHVwZGF0ZU1ldGFkYXRhV2l0aFJlZ2lvbmFsSW5mb3JtYXRpb24oXG4gICAgICAgIG1ldGFkYXRhOiBPcGVuSWRDb25maWdSZXNwb25zZVxuICAgICk6IFByb21pc2U8T3BlbklkQ29uZmlnUmVzcG9uc2U+IHtcbiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudD8uYWRkUXVldWVNZWFzdXJlbWVudChcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkF1dGhvcml0eVVwZGF0ZU1ldGFkYXRhV2l0aFJlZ2lvbmFsSW5mb3JtYXRpb24sXG4gICAgICAgICAgICB0aGlzLmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCB1c2VyQ29uZmlndXJlZEF6dXJlUmVnaW9uID1cbiAgICAgICAgICAgIHRoaXMuYXV0aG9yaXR5T3B0aW9ucy5henVyZVJlZ2lvbkNvbmZpZ3VyYXRpb24/LmF6dXJlUmVnaW9uO1xuXG4gICAgICAgIGlmICh1c2VyQ29uZmlndXJlZEF6dXJlUmVnaW9uKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgdXNlckNvbmZpZ3VyZWRBenVyZVJlZ2lvbiAhPT1cbiAgICAgICAgICAgICAgICBDb25zdGFudHMuQVpVUkVfUkVHSU9OX0FVVE9fRElTQ09WRVJfRkxBR1xuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWdpb25EaXNjb3ZlcnlNZXRhZGF0YS5yZWdpb25fb3V0Y29tZSA9XG4gICAgICAgICAgICAgICAgICAgIFJlZ2lvbkRpc2NvdmVyeU91dGNvbWVzLkNPTkZJR1VSRURfTk9fQVVUT19ERVRFQ1RJT047XG4gICAgICAgICAgICAgICAgdGhpcy5yZWdpb25EaXNjb3ZlcnlNZXRhZGF0YS5yZWdpb25fdXNlZCA9XG4gICAgICAgICAgICAgICAgICAgIHVzZXJDb25maWd1cmVkQXp1cmVSZWdpb247XG4gICAgICAgICAgICAgICAgcmV0dXJuIEF1dGhvcml0eS5yZXBsYWNlV2l0aFJlZ2lvbmFsSW5mb3JtYXRpb24oXG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhLFxuICAgICAgICAgICAgICAgICAgICB1c2VyQ29uZmlndXJlZEF6dXJlUmVnaW9uXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgYXV0b2RldGVjdGVkUmVnaW9uTmFtZSA9IGF3YWl0IGludm9rZUFzeW5jKFxuICAgICAgICAgICAgICAgIHRoaXMucmVnaW9uRGlzY292ZXJ5LmRldGVjdFJlZ2lvbi5iaW5kKHRoaXMucmVnaW9uRGlzY292ZXJ5KSxcbiAgICAgICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5SZWdpb25EaXNjb3ZlcnlEZXRlY3RSZWdpb24sXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIsXG4gICAgICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudCxcbiAgICAgICAgICAgICAgICB0aGlzLmNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICkoXG4gICAgICAgICAgICAgICAgdGhpcy5hdXRob3JpdHlPcHRpb25zLmF6dXJlUmVnaW9uQ29uZmlndXJhdGlvblxuICAgICAgICAgICAgICAgICAgICA/LmVudmlyb25tZW50UmVnaW9uLFxuICAgICAgICAgICAgICAgIHRoaXMucmVnaW9uRGlzY292ZXJ5TWV0YWRhdGFcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmIChhdXRvZGV0ZWN0ZWRSZWdpb25OYW1lKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWdpb25EaXNjb3ZlcnlNZXRhZGF0YS5yZWdpb25fb3V0Y29tZSA9XG4gICAgICAgICAgICAgICAgICAgIFJlZ2lvbkRpc2NvdmVyeU91dGNvbWVzLkFVVE9fREVURUNUSU9OX1JFUVVFU1RFRF9TVUNDRVNTRlVMO1xuICAgICAgICAgICAgICAgIHRoaXMucmVnaW9uRGlzY292ZXJ5TWV0YWRhdGEucmVnaW9uX3VzZWQgPVxuICAgICAgICAgICAgICAgICAgICBhdXRvZGV0ZWN0ZWRSZWdpb25OYW1lO1xuICAgICAgICAgICAgICAgIHJldHVybiBBdXRob3JpdHkucmVwbGFjZVdpdGhSZWdpb25hbEluZm9ybWF0aW9uKFxuICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgYXV0b2RldGVjdGVkUmVnaW9uTmFtZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMucmVnaW9uRGlzY292ZXJ5TWV0YWRhdGEucmVnaW9uX291dGNvbWUgPVxuICAgICAgICAgICAgICAgIFJlZ2lvbkRpc2NvdmVyeU91dGNvbWVzLkFVVE9fREVURUNUSU9OX1JFUVVFU1RFRF9GQUlMRUQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbWV0YWRhdGE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgQXV0aG9yaXR5TWV0YWRhdGFFbnRpdHkgd2l0aCBuZXcgYWxpYXNlcywgcHJlZmVycmVkX25ldHdvcmsgYW5kIHByZWZlcnJlZF9jYWNoZVxuICAgICAqIGFuZCByZXR1cm5zIHdoZXJlIHRoZSBpbmZvcm1hdGlvbiB3YXMgcmV0cmlldmVkIGZyb21cbiAgICAgKiBAcGFyYW0gbWV0YWRhdGFFbnRpdHlcbiAgICAgKiBAcmV0dXJucyBBdXRob3JpdHlNZXRhZGF0YVNvdXJjZVxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgdXBkYXRlQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YShcbiAgICAgICAgbWV0YWRhdGFFbnRpdHk6IEF1dGhvcml0eU1ldGFkYXRhRW50aXR5XG4gICAgKTogUHJvbWlzZTxBdXRob3JpdHlNZXRhZGF0YVNvdXJjZT4ge1xuICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50Py5hZGRRdWV1ZU1lYXN1cmVtZW50KFxuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuQXV0aG9yaXR5VXBkYXRlQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YSxcbiAgICAgICAgICAgIHRoaXMuY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBsb2NhbE1ldGFkYXRhU291cmNlID1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YUZyb21Mb2NhbFNvdXJjZXMobWV0YWRhdGFFbnRpdHkpO1xuICAgICAgICBpZiAobG9jYWxNZXRhZGF0YVNvdXJjZSkge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsTWV0YWRhdGFTb3VyY2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGYWxsYmFjayB0byBuZXR3b3JrIGFzIG1ldGFkYXRhIHNvdXJjZVxuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGF3YWl0IGludm9rZUFzeW5jKFxuICAgICAgICAgICAgdGhpcy5nZXRDbG91ZERpc2NvdmVyeU1ldGFkYXRhRnJvbU5ldHdvcmsuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkF1dGhvcml0eUdldENsb3VkRGlzY292ZXJ5TWV0YWRhdGFGcm9tTmV0d29yayxcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLFxuICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudCxcbiAgICAgICAgICAgIHRoaXMuY29ycmVsYXRpb25JZFxuICAgICAgICApKCk7XG5cbiAgICAgICAgaWYgKG1ldGFkYXRhKSB7XG4gICAgICAgICAgICBDYWNoZUhlbHBlcnMudXBkYXRlQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YShcbiAgICAgICAgICAgICAgICBtZXRhZGF0YUVudGl0eSxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YSxcbiAgICAgICAgICAgICAgICB0cnVlXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmV0dXJuIEF1dGhvcml0eU1ldGFkYXRhU291cmNlLk5FVFdPUks7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBNZXRhZGF0YSBjb3VsZCBub3QgYmUgb2J0YWluZWQgZnJvbSB0aGUgY29uZmlnLCBjYWNoZSwgbmV0d29yayBvciBoYXJkY29kZWQgdmFsdWVzXG4gICAgICAgIHRocm93IGNyZWF0ZUNsaWVudENvbmZpZ3VyYXRpb25FcnJvcihcbiAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLnVudHJ1c3RlZEF1dGhvcml0eVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YUZyb21Mb2NhbFNvdXJjZXMoXG4gICAgICAgIG1ldGFkYXRhRW50aXR5OiBBdXRob3JpdHlNZXRhZGF0YUVudGl0eVxuICAgICk6IEF1dGhvcml0eU1ldGFkYXRhU291cmNlIHwgbnVsbCB7XG4gICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICBcIkF0dGVtcHRpbmcgdG8gZ2V0IGNsb3VkIGRpc2NvdmVyeSBtZXRhZGF0YSAgZnJvbSBhdXRob3JpdHkgY29uZmlndXJhdGlvblwiXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2VQaWkoXG4gICAgICAgICAgICBgS25vd24gQXV0aG9yaXRpZXM6ICR7XG4gICAgICAgICAgICAgICAgdGhpcy5hdXRob3JpdHlPcHRpb25zLmtub3duQXV0aG9yaXRpZXMgfHxcbiAgICAgICAgICAgICAgICBDb25zdGFudHMuTk9UX0FQUExJQ0FCTEVcbiAgICAgICAgICAgIH1gXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2VQaWkoXG4gICAgICAgICAgICBgQXV0aG9yaXR5IE1ldGFkYXRhOiAke1xuICAgICAgICAgICAgICAgIHRoaXMuYXV0aG9yaXR5T3B0aW9ucy5hdXRob3JpdHlNZXRhZGF0YSB8fFxuICAgICAgICAgICAgICAgIENvbnN0YW50cy5OT1RfQVBQTElDQUJMRVxuICAgICAgICAgICAgfWBcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5sb2dnZXIudmVyYm9zZVBpaShcbiAgICAgICAgICAgIGBDYW5vbmljYWwgQXV0aG9yaXR5OiAke1xuICAgICAgICAgICAgICAgIG1ldGFkYXRhRW50aXR5LmNhbm9uaWNhbF9hdXRob3JpdHkgfHwgQ29uc3RhbnRzLk5PVF9BUFBMSUNBQkxFXG4gICAgICAgICAgICB9YFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IHRoaXMuZ2V0Q2xvdWREaXNjb3ZlcnlNZXRhZGF0YUZyb21Db25maWcoKTtcbiAgICAgICAgaWYgKG1ldGFkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFxuICAgICAgICAgICAgICAgIFwiRm91bmQgY2xvdWQgZGlzY292ZXJ5IG1ldGFkYXRhIGluIGF1dGhvcml0eSBjb25maWd1cmF0aW9uXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBDYWNoZUhlbHBlcnMudXBkYXRlQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YShcbiAgICAgICAgICAgICAgICBtZXRhZGF0YUVudGl0eSxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YSxcbiAgICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybiBBdXRob3JpdHlNZXRhZGF0YVNvdXJjZS5DT05GSUc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiB0aGUgY2FjaGVkIG1ldGFkYXRhIGNhbWUgZnJvbSBjb25maWcgYnV0IHRoYXQgY29uZmlnIHdhcyBub3QgcGFzc2VkIHRvIHRoaXMgaW5zdGFuY2UsIHdlIG11c3QgZ28gdG8gaGFyZGNvZGVkIHZhbHVlc1xuICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFxuICAgICAgICAgICAgXCJEaWQgbm90IGZpbmQgY2xvdWQgZGlzY292ZXJ5IG1ldGFkYXRhIGluIHRoZSBjb25maWcuLi4gQXR0ZW1wdGluZyB0byBnZXQgY2xvdWQgZGlzY292ZXJ5IG1ldGFkYXRhIGZyb20gdGhlIGhhcmRjb2RlZCB2YWx1ZXMuXCJcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNraXBBdXRob3JpdHlNZXRhZGF0YUNhY2hlKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFxuICAgICAgICAgICAgICAgIFwiU2tpcHBpbmcgaGFyZGNvZGVkIGNsb3VkIGRpc2NvdmVyeSBtZXRhZGF0YSBjYWNoZSBzaW5jZSBza2lwQXV0aG9yaXR5TWV0YWRhdGFDYWNoZSBpcyBzZXQgdG8gdHJ1ZS4gQXR0ZW1wdGluZyB0byBnZXQgY2xvdWQgZGlzY292ZXJ5IG1ldGFkYXRhIGZyb20gdGhlIG5ldHdvcmsgbWV0YWRhdGEgY2FjaGUuXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBoYXJkY29kZWRNZXRhZGF0YSA9XG4gICAgICAgICAgICAgICAgZ2V0Q2xvdWREaXNjb3ZlcnlNZXRhZGF0YUZyb21IYXJkY29kZWRWYWx1ZXMoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaG9zdG5hbWVBbmRQb3J0XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChoYXJkY29kZWRNZXRhZGF0YSkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgICAgIFwiRm91bmQgY2xvdWQgZGlzY292ZXJ5IG1ldGFkYXRhIGZyb20gaGFyZGNvZGVkIHZhbHVlcy5cIlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgQ2FjaGVIZWxwZXJzLnVwZGF0ZUNsb3VkRGlzY292ZXJ5TWV0YWRhdGEoXG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhRW50aXR5LFxuICAgICAgICAgICAgICAgICAgICBoYXJkY29kZWRNZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHJldHVybiBBdXRob3JpdHlNZXRhZGF0YVNvdXJjZS5IQVJEQ09ERURfVkFMVUVTO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFxuICAgICAgICAgICAgICAgIFwiRGlkIG5vdCBmaW5kIGNsb3VkIGRpc2NvdmVyeSBtZXRhZGF0YSBpbiBoYXJkY29kZWQgdmFsdWVzLi4uIEF0dGVtcHRpbmcgdG8gZ2V0IGNsb3VkIGRpc2NvdmVyeSBtZXRhZGF0YSBmcm9tIHRoZSBuZXR3b3JrIG1ldGFkYXRhIGNhY2hlLlwiXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbWV0YWRhdGFFbnRpdHlFeHBpcmVkID1cbiAgICAgICAgICAgIENhY2hlSGVscGVycy5pc0F1dGhvcml0eU1ldGFkYXRhRXhwaXJlZChtZXRhZGF0YUVudGl0eSk7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMuaXNBdXRob3JpdHlTYW1lVHlwZShtZXRhZGF0YUVudGl0eSkgJiZcbiAgICAgICAgICAgIG1ldGFkYXRhRW50aXR5LmFsaWFzZXNGcm9tTmV0d29yayAmJlxuICAgICAgICAgICAgIW1ldGFkYXRhRW50aXR5RXhwaXJlZFxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXCJGb3VuZCBjbG91ZCBkaXNjb3ZlcnkgbWV0YWRhdGEgaW4gdGhlIGNhY2hlLlwiKTtcbiAgICAgICAgICAgIC8vIE5vIG5lZWQgdG8gdXBkYXRlXG4gICAgICAgICAgICByZXR1cm4gQXV0aG9yaXR5TWV0YWRhdGFTb3VyY2UuQ0FDSEU7XG4gICAgICAgIH0gZWxzZSBpZiAobWV0YWRhdGFFbnRpdHlFeHBpcmVkKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFwiVGhlIG1ldGFkYXRhIGVudGl0eSBpcyBleHBpcmVkLlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhcnNlIGNsb3VkRGlzY292ZXJ5TWV0YWRhdGEgY29uZmlnIG9yIGNoZWNrIGtub3duQXV0aG9yaXRpZXNcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldENsb3VkRGlzY292ZXJ5TWV0YWRhdGFGcm9tQ29uZmlnKCk6IENsb3VkRGlzY292ZXJ5TWV0YWRhdGEgfCBudWxsIHtcbiAgICAgICAgLy8gQ0lBTSBkb2VzIG5vdCBzdXBwb3J0IGNsb3VkIGRpc2NvdmVyeSBtZXRhZGF0YVxuICAgICAgICBpZiAodGhpcy5hdXRob3JpdHlUeXBlID09PSBBdXRob3JpdHlUeXBlLkNpYW0pIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgXCJDSUFNIGF1dGhvcml0aWVzIGRvIG5vdCBzdXBwb3J0IGNsb3VkIGRpc2NvdmVyeSBtZXRhZGF0YSwgZ2VuZXJhdGUgdGhlIGFsaWFzZXMgZnJvbSBhdXRob3JpdHkgaG9zdC5cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybiBBdXRob3JpdHkuY3JlYXRlQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YUZyb21Ib3N0KFxuICAgICAgICAgICAgICAgIHRoaXMuaG9zdG5hbWVBbmRQb3J0XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgbmV0d29yayByZXNwb25zZSB3YXMgcHJvdmlkZWQgaW4gY29uZmlnXG4gICAgICAgIGlmICh0aGlzLmF1dGhvcml0eU9wdGlvbnMuY2xvdWREaXNjb3ZlcnlNZXRhZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIudmVyYm9zZShcbiAgICAgICAgICAgICAgICBcIlRoZSBjbG91ZCBkaXNjb3ZlcnkgbWV0YWRhdGEgaGFzIGJlZW4gcHJvdmlkZWQgYXMgYSBuZXR3b3JrIHJlc3BvbnNlLCBpbiB0aGUgY29uZmlnLlwiXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFxuICAgICAgICAgICAgICAgICAgICBcIkF0dGVtcHRpbmcgdG8gcGFyc2UgdGhlIGNsb3VkIGRpc2NvdmVyeSBtZXRhZGF0YS5cIlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkUmVzcG9uc2UgPSBKU09OLnBhcnNlKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmF1dGhvcml0eU9wdGlvbnMuY2xvdWREaXNjb3ZlcnlNZXRhZGF0YVxuICAgICAgICAgICAgICAgICkgYXMgQ2xvdWRJbnN0YW5jZURpc2NvdmVyeVJlc3BvbnNlO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gZ2V0Q2xvdWREaXNjb3ZlcnlNZXRhZGF0YUZyb21OZXR3b3JrUmVzcG9uc2UoXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZFJlc3BvbnNlLm1ldGFkYXRhLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhvc3RuYW1lQW5kUG9ydFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIudmVyYm9zZShcIlBhcnNlZCB0aGUgY2xvdWQgZGlzY292ZXJ5IG1ldGFkYXRhLlwiKTtcbiAgICAgICAgICAgICAgICBpZiAobWV0YWRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIudmVyYm9zZShcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiVGhlcmUgaXMgcmV0dXJuYWJsZSBtZXRhZGF0YSBhdHRhY2hlZCB0byB0aGUgcGFyc2VkIGNsb3VkIGRpc2NvdmVyeSBtZXRhZGF0YS5cIlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWV0YWRhdGE7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIudmVyYm9zZShcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiVGhlcmUgaXMgbm8gbWV0YWRhdGEgYXR0YWNoZWQgdG8gdGhlIHBhcnNlZCBjbG91ZCBkaXNjb3ZlcnkgbWV0YWRhdGEuXCJcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIudmVyYm9zZShcbiAgICAgICAgICAgICAgICAgICAgXCJVbmFibGUgdG8gcGFyc2UgdGhlIGNsb3VkIGRpc2NvdmVyeSBtZXRhZGF0YS4gVGhyb3dpbmcgSW52YWxpZCBDbG91ZCBEaXNjb3ZlcnkgTWV0YWRhdGEgRXJyb3IuXCJcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudENvbmZpZ3VyYXRpb25FcnJvcihcbiAgICAgICAgICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuaW52YWxpZENsb3VkRGlzY292ZXJ5TWV0YWRhdGFcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgY2xvdWREaXNjb3ZlcnlNZXRhZGF0YSBpcyBlbXB0eSBvciBkb2VzIG5vdCBjb250YWluIHRoZSBob3N0LCBjaGVjayBrbm93bkF1dGhvcml0aWVzXG4gICAgICAgIGlmICh0aGlzLmlzSW5Lbm93bkF1dGhvcml0aWVzKCkpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgXCJUaGUgaG9zdCBpcyBpbmNsdWRlZCBpbiBrbm93bkF1dGhvcml0aWVzLiBDcmVhdGluZyBuZXcgY2xvdWQgZGlzY292ZXJ5IG1ldGFkYXRhIGZyb20gdGhlIGhvc3QuXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm4gQXV0aG9yaXR5LmNyZWF0ZUNsb3VkRGlzY292ZXJ5TWV0YWRhdGFGcm9tSG9zdChcbiAgICAgICAgICAgICAgICB0aGlzLmhvc3RuYW1lQW5kUG9ydFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGxlZCB0byBnZXQgbWV0YWRhdGEgZnJvbSBuZXR3b3JrIGlmIENsb3VkRGlzY292ZXJ5TWV0YWRhdGEgd2FzIG5vdCBwb3B1bGF0ZWQgYnkgY29uZmlnXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaGFzSGFyZGNvZGVkTWV0YWRhdGEgYm9vbGVhblxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgZ2V0Q2xvdWREaXNjb3ZlcnlNZXRhZGF0YUZyb21OZXR3b3JrKCk6IFByb21pc2U8Q2xvdWREaXNjb3ZlcnlNZXRhZGF0YSB8IG51bGw+IHtcbiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudD8uYWRkUXVldWVNZWFzdXJlbWVudChcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkF1dGhvcml0eUdldENsb3VkRGlzY292ZXJ5TWV0YWRhdGFGcm9tTmV0d29yayxcbiAgICAgICAgICAgIHRoaXMuY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBpbnN0YW5jZURpc2NvdmVyeUVuZHBvaW50ID0gYCR7Q29uc3RhbnRzLkFBRF9JTlNUQU5DRV9ESVNDT1ZFUllfRU5EUFR9JHt0aGlzLmNhbm9uaWNhbEF1dGhvcml0eX1vYXV0aDIvdjIuMC9hdXRob3JpemVgO1xuICAgICAgICBjb25zdCBvcHRpb25zOiBJbWRzT3B0aW9ucyA9IHt9O1xuXG4gICAgICAgIC8qXG4gICAgICAgICAqIFRPRE86IEFkZCBhIHRpbWVvdXQgaWYgdGhlIGF1dGhvcml0eSBleGlzdHMgaW4gb3VyIGxpYnJhcnknc1xuICAgICAgICAgKiBoYXJkY29kZWQgbGlzdCBvZiBtZXRhZGF0YVxuICAgICAgICAgKi9cblxuICAgICAgICBsZXQgbWF0Y2ggPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm5ldHdvcmtJbnRlcmZhY2Uuc2VuZEdldFJlcXVlc3RBc3luYzxcbiAgICAgICAgICAgICAgICB8IENsb3VkSW5zdGFuY2VEaXNjb3ZlcnlSZXNwb25zZVxuICAgICAgICAgICAgICAgIHwgQ2xvdWRJbnN0YW5jZURpc2NvdmVyeUVycm9yUmVzcG9uc2VcbiAgICAgICAgICAgID4oaW5zdGFuY2VEaXNjb3ZlcnlFbmRwb2ludCwgb3B0aW9ucyk7XG4gICAgICAgICAgICBsZXQgdHlwZWRSZXNwb25zZUJvZHk6XG4gICAgICAgICAgICAgICAgfCBDbG91ZEluc3RhbmNlRGlzY292ZXJ5UmVzcG9uc2VcbiAgICAgICAgICAgICAgICB8IENsb3VkSW5zdGFuY2VEaXNjb3ZlcnlFcnJvclJlc3BvbnNlO1xuICAgICAgICAgICAgbGV0IG1ldGFkYXRhOiBBcnJheTxDbG91ZERpc2NvdmVyeU1ldGFkYXRhPjtcbiAgICAgICAgICAgIGlmIChpc0Nsb3VkSW5zdGFuY2VEaXNjb3ZlcnlSZXNwb25zZShyZXNwb25zZS5ib2R5KSkge1xuICAgICAgICAgICAgICAgIHR5cGVkUmVzcG9uc2VCb2R5ID1cbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuYm9keSBhcyBDbG91ZEluc3RhbmNlRGlzY292ZXJ5UmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgbWV0YWRhdGEgPSB0eXBlZFJlc3BvbnNlQm9keS5tZXRhZGF0YTtcblxuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2VQaWkoXG4gICAgICAgICAgICAgICAgICAgIGB0ZW5hbnRfZGlzY292ZXJ5X2VuZHBvaW50IGlzOiAke3R5cGVkUmVzcG9uc2VCb2R5LnRlbmFudF9kaXNjb3ZlcnlfZW5kcG9pbnR9YFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzQ2xvdWRJbnN0YW5jZURpc2NvdmVyeUVycm9yUmVzcG9uc2UocmVzcG9uc2UuYm9keSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuaW5nKFxuICAgICAgICAgICAgICAgICAgICBgQSBDbG91ZEluc3RhbmNlRGlzY292ZXJ5RXJyb3JSZXNwb25zZSB3YXMgcmV0dXJuZWQuIFRoZSBjbG91ZCBpbnN0YW5jZSBkaXNjb3ZlcnkgbmV0d29yayByZXF1ZXN0J3Mgc3RhdHVzIGNvZGUgaXM6ICR7cmVzcG9uc2Uuc3RhdHVzfWBcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgdHlwZWRSZXNwb25zZUJvZHkgPVxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5ib2R5IGFzIENsb3VkSW5zdGFuY2VEaXNjb3ZlcnlFcnJvclJlc3BvbnNlO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlZFJlc3BvbnNlQm9keS5lcnJvciA9PT0gQ29uc3RhbnRzLklOVkFMSURfSU5TVEFOQ0UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlRoZSBDbG91ZEluc3RhbmNlRGlzY292ZXJ5RXJyb3JSZXNwb25zZSBlcnJvciBpcyBpbnZhbGlkX2luc3RhbmNlLlwiXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm5pbmcoXG4gICAgICAgICAgICAgICAgICAgIGBUaGUgQ2xvdWRJbnN0YW5jZURpc2NvdmVyeUVycm9yUmVzcG9uc2UgZXJyb3IgaXMgJHt0eXBlZFJlc3BvbnNlQm9keS5lcnJvcn1gXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuaW5nKFxuICAgICAgICAgICAgICAgICAgICBgVGhlIENsb3VkSW5zdGFuY2VEaXNjb3ZlcnlFcnJvclJlc3BvbnNlIGVycm9yIGRlc2NyaXB0aW9uIGlzICR7dHlwZWRSZXNwb25zZUJvZHkuZXJyb3JfZGVzY3JpcHRpb259YFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuaW5nKFxuICAgICAgICAgICAgICAgICAgICBcIlNldHRpbmcgdGhlIHZhbHVlIG9mIHRoZSBDbG91ZEluc3RhbmNlRGlzY292ZXJ5TWV0YWRhdGEgKHJldHVybmVkIGZyb20gdGhlIG5ldHdvcmspIHRvIFtdXCJcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIG1ldGFkYXRhID0gW107XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFxuICAgICAgICAgICAgICAgICAgICBcIkFBRCBkaWQgbm90IHJldHVybiBhIENsb3VkSW5zdGFuY2VEaXNjb3ZlcnlSZXNwb25zZSBvciBDbG91ZEluc3RhbmNlRGlzY292ZXJ5RXJyb3JSZXNwb25zZVwiXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5sb2dnZXIudmVyYm9zZShcbiAgICAgICAgICAgICAgICBcIkF0dGVtcHRpbmcgdG8gZmluZCBhIG1hdGNoIGJldHdlZW4gdGhlIGRldmVsb3BlcidzIGF1dGhvcml0eSBhbmQgdGhlIENsb3VkSW5zdGFuY2VEaXNjb3ZlcnlNZXRhZGF0YSByZXR1cm5lZCBmcm9tIHRoZSBuZXR3b3JrIHJlcXVlc3QuXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBtYXRjaCA9IGdldENsb3VkRGlzY292ZXJ5TWV0YWRhdGFGcm9tTmV0d29ya1Jlc3BvbnNlKFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhLFxuICAgICAgICAgICAgICAgIHRoaXMuaG9zdG5hbWVBbmRQb3J0XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgQXV0aEVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIGBUaGVyZSB3YXMgYSBuZXR3b3JrIGVycm9yIHdoaWxlIGF0dGVtcHRpbmcgdG8gZ2V0IHRoZSBjbG91ZCBkaXNjb3ZlcnkgaW5zdGFuY2UgbWV0YWRhdGEuXFxuRXJyb3I6ICR7ZXJyb3IuZXJyb3JDb2RlfVxcbkVycm9yIERlc2NyaXB0aW9uOiAke2Vycm9yLmVycm9yTWVzc2FnZX1gXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdHlwZWRFcnJvciA9IGVycm9yIGFzIEVycm9yO1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFxuICAgICAgICAgICAgICAgICAgICBgQSBub24tTVNBTEpTIGVycm9yIHdhcyB0aHJvd24gd2hpbGUgYXR0ZW1wdGluZyB0byBnZXQgdGhlIGNsb3VkIGluc3RhbmNlIGRpc2NvdmVyeSBtZXRhZGF0YS5cXG5FcnJvcjogJHt0eXBlZEVycm9yLm5hbWV9XFxuRXJyb3IgRGVzY3JpcHRpb246ICR7dHlwZWRFcnJvci5tZXNzYWdlfWBcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEN1c3RvbSBEb21haW4gc2NlbmFyaW8sIGhvc3QgaXMgdHJ1c3RlZCBiZWNhdXNlIEluc3RhbmNlIERpc2NvdmVyeSBjYWxsIHN1Y2NlZWRlZFxuICAgICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuaW5nKFxuICAgICAgICAgICAgICAgIFwiVGhlIGRldmVsb3BlcidzIGF1dGhvcml0eSB3YXMgbm90IGZvdW5kIHdpdGhpbiB0aGUgQ2xvdWRJbnN0YW5jZURpc2NvdmVyeU1ldGFkYXRhIHJldHVybmVkIGZyb20gdGhlIG5ldHdvcmsgcmVxdWVzdC5cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgXCJDcmVhdGluZyBjdXN0b20gQXV0aG9yaXR5IGZvciBjdXN0b20gZG9tYWluIHNjZW5hcmlvLlwiXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBtYXRjaCA9IEF1dGhvcml0eS5jcmVhdGVDbG91ZERpc2NvdmVyeU1ldGFkYXRhRnJvbUhvc3QoXG4gICAgICAgICAgICAgICAgdGhpcy5ob3N0bmFtZUFuZFBvcnRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhlbHBlciBmdW5jdGlvbiB0byBkZXRlcm1pbmUgaWYgdGhpcyBob3N0IGlzIGluY2x1ZGVkIGluIHRoZSBrbm93bkF1dGhvcml0aWVzIGNvbmZpZyBvcHRpb25cbiAgICAgKi9cbiAgICBwcml2YXRlIGlzSW5Lbm93bkF1dGhvcml0aWVzKCk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBtYXRjaGVzID0gdGhpcy5hdXRob3JpdHlPcHRpb25zLmtub3duQXV0aG9yaXRpZXMuZmlsdGVyKFxuICAgICAgICAgICAgKGF1dGhvcml0eSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIGF1dGhvcml0eSAmJlxuICAgICAgICAgICAgICAgICAgICBVcmxTdHJpbmcuZ2V0RG9tYWluRnJvbVVybChhdXRob3JpdHkpLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhvc3RuYW1lQW5kUG9ydFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBtYXRjaGVzLmxlbmd0aCA+IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogaGVscGVyIGZ1bmN0aW9uIHRvIHBvcHVsYXRlIHRoZSBhdXRob3JpdHkgYmFzZWQgb24gYXp1cmVDbG91ZE9wdGlvbnNcbiAgICAgKiBAcGFyYW0gYXV0aG9yaXR5U3RyaW5nXG4gICAgICogQHBhcmFtIGF6dXJlQ2xvdWRPcHRpb25zXG4gICAgICovXG4gICAgc3RhdGljIGdlbmVyYXRlQXV0aG9yaXR5KFxuICAgICAgICBhdXRob3JpdHlTdHJpbmc6IHN0cmluZyxcbiAgICAgICAgYXp1cmVDbG91ZE9wdGlvbnM/OiBBenVyZUNsb3VkT3B0aW9uc1xuICAgICk6IHN0cmluZyB7XG4gICAgICAgIGxldCBhdXRob3JpdHlBenVyZUNsb3VkSW5zdGFuY2U7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgYXp1cmVDbG91ZE9wdGlvbnMgJiZcbiAgICAgICAgICAgIGF6dXJlQ2xvdWRPcHRpb25zLmF6dXJlQ2xvdWRJbnN0YW5jZSAhPT0gQXp1cmVDbG91ZEluc3RhbmNlLk5vbmVcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zdCB0ZW5hbnQgPSBhenVyZUNsb3VkT3B0aW9ucy50ZW5hbnRcbiAgICAgICAgICAgICAgICA/IGF6dXJlQ2xvdWRPcHRpb25zLnRlbmFudFxuICAgICAgICAgICAgICAgIDogQ29uc3RhbnRzLkRFRkFVTFRfQ09NTU9OX1RFTkFOVDtcbiAgICAgICAgICAgIGF1dGhvcml0eUF6dXJlQ2xvdWRJbnN0YW5jZSA9IGAke2F6dXJlQ2xvdWRPcHRpb25zLmF6dXJlQ2xvdWRJbnN0YW5jZX0vJHt0ZW5hbnR9L2A7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYXV0aG9yaXR5QXp1cmVDbG91ZEluc3RhbmNlXG4gICAgICAgICAgICA/IGF1dGhvcml0eUF6dXJlQ2xvdWRJbnN0YW5jZVxuICAgICAgICAgICAgOiBhdXRob3JpdHlTdHJpbmc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBjbG91ZCBkaXNjb3ZlcnkgbWV0YWRhdGEgb2JqZWN0IGZyb20gYSBnaXZlbiBob3N0XG4gICAgICogQHBhcmFtIGhvc3RcbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YUZyb21Ib3N0KFxuICAgICAgICBob3N0OiBzdHJpbmdcbiAgICApOiBDbG91ZERpc2NvdmVyeU1ldGFkYXRhIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHByZWZlcnJlZF9uZXR3b3JrOiBob3N0LFxuICAgICAgICAgICAgcHJlZmVycmVkX2NhY2hlOiBob3N0LFxuICAgICAgICAgICAgYWxpYXNlczogW2hvc3RdLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGhlbHBlciBmdW5jdGlvbiB0byBnZW5lcmF0ZSBlbnZpcm9ubWVudCBmcm9tIGF1dGhvcml0eSBvYmplY3RcbiAgICAgKi9cbiAgICBnZXRQcmVmZXJyZWRDYWNoZSgpOiBzdHJpbmcge1xuICAgICAgICBpZiAodGhpcy5tYW5hZ2VkSWRlbnRpdHkpIHtcbiAgICAgICAgICAgIHJldHVybiBDb25zdGFudHMuREVGQVVMVF9BVVRIT1JJVFlfSE9TVDtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRpc2NvdmVyeUNvbXBsZXRlKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1ldGFkYXRhLnByZWZlcnJlZF9jYWNoZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihcbiAgICAgICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy5lbmRwb2ludFJlc29sdXRpb25FcnJvclxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIHByb3ZpZGVkIGhvc3QgaXMgYW4gYWxpYXMgb2YgdGhpcyBhdXRob3JpdHkgaW5zdGFuY2VcbiAgICAgKiBAcGFyYW0gaG9zdFxuICAgICAqL1xuICAgIGlzQWxpYXMoaG9zdDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLm1ldGFkYXRhLmFsaWFzZXMuaW5kZXhPZihob3N0KSA+IC0xO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIHByb3ZpZGVkIGhvc3QgaXMgYW4gYWxpYXMgb2YgYSBrbm93biBNaWNyb3NvZnQgYXV0aG9yaXR5IGZvciBwdXJwb3NlcyBvZiBlbmRwb2ludCBkaXNjb3ZlcnlcbiAgICAgKiBAcGFyYW0gaG9zdFxuICAgICAqL1xuICAgIGlzQWxpYXNPZktub3duTWljcm9zb2Z0QXV0aG9yaXR5KGhvc3Q6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gSW5zdGFuY2VEaXNjb3ZlcnlNZXRhZGF0YUFsaWFzZXMuaGFzKGhvc3QpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyB3aGV0aGVyIHRoZSBwcm92aWRlZCBob3N0IGlzIHRoYXQgb2YgYSBwdWJsaWMgY2xvdWQgYXV0aG9yaXR5XG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXV0aG9yaXR5IHN0cmluZ1xuICAgICAqIEByZXR1cm5zIGJvb2xcbiAgICAgKi9cbiAgICBzdGF0aWMgaXNQdWJsaWNDbG91ZEF1dGhvcml0eShob3N0OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIENvbnN0YW50cy5LTk9XTl9QVUJMSUNfQ0xPVURTLmluZGV4T2YoaG9zdCkgPj0gMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWJ1aWxkIHRoZSBhdXRob3JpdHkgc3RyaW5nIHdpdGggdGhlIHJlZ2lvblxuICAgICAqXG4gICAgICogQHBhcmFtIGhvc3Qgc3RyaW5nXG4gICAgICogQHBhcmFtIHJlZ2lvbiBzdHJpbmdcbiAgICAgKi9cbiAgICBzdGF0aWMgYnVpbGRSZWdpb25hbEF1dGhvcml0eVN0cmluZyhcbiAgICAgICAgaG9zdDogc3RyaW5nLFxuICAgICAgICByZWdpb246IHN0cmluZyxcbiAgICAgICAgcXVlcnlTdHJpbmc/OiBzdHJpbmdcbiAgICApOiBzdHJpbmcge1xuICAgICAgICAvLyBDcmVhdGUgYW5kIHZhbGlkYXRlIGEgVXJsIHN0cmluZyBvYmplY3Qgd2l0aCB0aGUgaW5pdGlhbCBhdXRob3JpdHkgc3RyaW5nXG4gICAgICAgIGNvbnN0IGF1dGhvcml0eVVybEluc3RhbmNlID0gbmV3IFVybFN0cmluZyhob3N0KTtcbiAgICAgICAgYXV0aG9yaXR5VXJsSW5zdGFuY2UudmFsaWRhdGVBc1VyaSgpO1xuXG4gICAgICAgIGNvbnN0IGF1dGhvcml0eVVybFBhcnRzID0gYXV0aG9yaXR5VXJsSW5zdGFuY2UuZ2V0VXJsQ29tcG9uZW50cygpO1xuXG4gICAgICAgIGxldCBob3N0TmFtZUFuZFBvcnQgPSBgJHtyZWdpb259LiR7YXV0aG9yaXR5VXJsUGFydHMuSG9zdE5hbWVBbmRQb3J0fWA7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNQdWJsaWNDbG91ZEF1dGhvcml0eShhdXRob3JpdHlVcmxQYXJ0cy5Ib3N0TmFtZUFuZFBvcnQpKSB7XG4gICAgICAgICAgICBob3N0TmFtZUFuZFBvcnQgPSBgJHtyZWdpb259LiR7Q29uc3RhbnRzLlJFR0lPTkFMX0FVVEhfUFVCTElDX0NMT1VEX1NVRkZJWH1gO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSW5jbHVkZSB0aGUgcXVlcnkgc3RyaW5nIHBvcnRpb24gb2YgdGhlIHVybFxuICAgICAgICBjb25zdCB1cmwgPSBVcmxTdHJpbmcuY29uc3RydWN0QXV0aG9yaXR5VXJpRnJvbU9iamVjdCh7XG4gICAgICAgICAgICAuLi5hdXRob3JpdHlVcmxJbnN0YW5jZS5nZXRVcmxDb21wb25lbnRzKCksXG4gICAgICAgICAgICBIb3N0TmFtZUFuZFBvcnQ6IGhvc3ROYW1lQW5kUG9ydCxcbiAgICAgICAgfSkudXJsU3RyaW5nO1xuXG4gICAgICAgIC8vIEFkZCB0aGUgcXVlcnkgc3RyaW5nIGlmIGEgcXVlcnkgc3RyaW5nIHdhcyBwcm92aWRlZFxuICAgICAgICBpZiAocXVlcnlTdHJpbmcpIHJldHVybiBgJHt1cmx9PyR7cXVlcnlTdHJpbmd9YDtcblxuICAgICAgICByZXR1cm4gdXJsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlcGxhY2UgdGhlIGVuZHBvaW50cyBpbiB0aGUgbWV0YWRhdGEgb2JqZWN0IHdpdGggdGhlaXIgcmVnaW9uYWwgZXF1aXZhbGVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWV0YWRhdGEgT3BlbklkQ29uZmlnUmVzcG9uc2VcbiAgICAgKiBAcGFyYW0gYXp1cmVSZWdpb24gc3RyaW5nXG4gICAgICovXG4gICAgc3RhdGljIHJlcGxhY2VXaXRoUmVnaW9uYWxJbmZvcm1hdGlvbihcbiAgICAgICAgbWV0YWRhdGE6IE9wZW5JZENvbmZpZ1Jlc3BvbnNlLFxuICAgICAgICBhenVyZVJlZ2lvbjogc3RyaW5nXG4gICAgKTogT3BlbklkQ29uZmlnUmVzcG9uc2Uge1xuICAgICAgICBjb25zdCByZWdpb25hbE1ldGFkYXRhID0geyAuLi5tZXRhZGF0YSB9O1xuICAgICAgICByZWdpb25hbE1ldGFkYXRhLmF1dGhvcml6YXRpb25fZW5kcG9pbnQgPVxuICAgICAgICAgICAgQXV0aG9yaXR5LmJ1aWxkUmVnaW9uYWxBdXRob3JpdHlTdHJpbmcoXG4gICAgICAgICAgICAgICAgcmVnaW9uYWxNZXRhZGF0YS5hdXRob3JpemF0aW9uX2VuZHBvaW50LFxuICAgICAgICAgICAgICAgIGF6dXJlUmVnaW9uXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIHJlZ2lvbmFsTWV0YWRhdGEudG9rZW5fZW5kcG9pbnQgPVxuICAgICAgICAgICAgQXV0aG9yaXR5LmJ1aWxkUmVnaW9uYWxBdXRob3JpdHlTdHJpbmcoXG4gICAgICAgICAgICAgICAgcmVnaW9uYWxNZXRhZGF0YS50b2tlbl9lbmRwb2ludCxcbiAgICAgICAgICAgICAgICBhenVyZVJlZ2lvblxuICAgICAgICAgICAgKTtcblxuICAgICAgICBpZiAocmVnaW9uYWxNZXRhZGF0YS5lbmRfc2Vzc2lvbl9lbmRwb2ludCkge1xuICAgICAgICAgICAgcmVnaW9uYWxNZXRhZGF0YS5lbmRfc2Vzc2lvbl9lbmRwb2ludCA9XG4gICAgICAgICAgICAgICAgQXV0aG9yaXR5LmJ1aWxkUmVnaW9uYWxBdXRob3JpdHlTdHJpbmcoXG4gICAgICAgICAgICAgICAgICAgIHJlZ2lvbmFsTWV0YWRhdGEuZW5kX3Nlc3Npb25fZW5kcG9pbnQsXG4gICAgICAgICAgICAgICAgICAgIGF6dXJlUmVnaW9uXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZWdpb25hbE1ldGFkYXRhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSBDSUFNX0FVVEhPUklZIGFzIHBlciB0aGUgYmVsb3cgcnVsZXM6XG4gICAgICogSWYgbm8gcGF0aCBzZWdtZW50cyBmb3VuZCBhbmQgaXQgaXMgYSBDSUFNIGF1dGhvcml0eSAoaG9zdG5hbWUgZW5kcyB3aXRoIC5jaWFtbG9naW4uY29tKSwgdGhlbiB0cmFuc2Zvcm0gaXRcbiAgICAgKlxuICAgICAqIE5PVEU6IFRoZSB0cmFuc2Zvcm1hdGlvbiBwYXRoIHNob3VsZCBnbyBhd2F5IG9uY2UgU1RTIHN1cHBvcnRzIENJQU0gd2l0aCB0aGUgZm9ybWF0OiBgdGVuYW50SWRvckRvbWFpbi5jaWFtbG9naW4uY29tYFxuICAgICAqIGBjaWFtbG9naW4uY29tYCBjYW4gYWxzbyBjaGFuZ2UgaW4gdGhlIGZ1dHVyZSBhbmQgd2Ugc2hvdWxkIGFjY29tbW9kYXRlIHRoZSBzYW1lXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXV0aG9yaXR5XG4gICAgICovXG4gICAgc3RhdGljIHRyYW5zZm9ybUNJQU1BdXRob3JpdHkoYXV0aG9yaXR5OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBsZXQgY2lhbUF1dGhvcml0eSA9IGF1dGhvcml0eTtcbiAgICAgICAgY29uc3QgYXV0aG9yaXR5VXJsID0gbmV3IFVybFN0cmluZyhhdXRob3JpdHkpO1xuICAgICAgICBjb25zdCBhdXRob3JpdHlVcmxDb21wb25lbnRzID0gYXV0aG9yaXR5VXJsLmdldFVybENvbXBvbmVudHMoKTtcblxuICAgICAgICAvLyBjaGVjayBpZiB0cmFuc2Zvcm1hdGlvbiBpcyBuZWVkZWRcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgYXV0aG9yaXR5VXJsQ29tcG9uZW50cy5QYXRoU2VnbWVudHMubGVuZ3RoID09PSAwICYmXG4gICAgICAgICAgICBhdXRob3JpdHlVcmxDb21wb25lbnRzLkhvc3ROYW1lQW5kUG9ydC5lbmRzV2l0aChcbiAgICAgICAgICAgICAgICBDb25zdGFudHMuQ0lBTV9BVVRIX1VSTFxuICAgICAgICAgICAgKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IHRlbmFudElkT3JEb21haW4gPVxuICAgICAgICAgICAgICAgIGF1dGhvcml0eVVybENvbXBvbmVudHMuSG9zdE5hbWVBbmRQb3J0LnNwbGl0KFwiLlwiKVswXTtcbiAgICAgICAgICAgIGNpYW1BdXRob3JpdHkgPSBgJHtjaWFtQXV0aG9yaXR5fSR7dGVuYW50SWRPckRvbWFpbn0ke0NvbnN0YW50cy5BQURfVEVOQU5UX0RPTUFJTl9TVUZGSVh9YDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjaWFtQXV0aG9yaXR5O1xuICAgIH1cbn1cblxuLyoqXG4gKiBFeHRyYWN0IHRlbmFudElkIGZyb20gYXV0aG9yaXR5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUZW5hbnRGcm9tQXV0aG9yaXR5U3RyaW5nKFxuICAgIGF1dGhvcml0eTogc3RyaW5nXG4pOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IGF1dGhvcml0eVVybCA9IG5ldyBVcmxTdHJpbmcoYXV0aG9yaXR5KTtcbiAgICBjb25zdCBhdXRob3JpdHlVcmxDb21wb25lbnRzID0gYXV0aG9yaXR5VXJsLmdldFVybENvbXBvbmVudHMoKTtcbiAgICAvKipcbiAgICAgKiBGb3IgY3JlZGVudGlhbCBtYXRjaGluZyBwdXJwb3NlcywgdGVuYW50SWQgaXMgdGhlIGxhc3QgcGF0aCBzZWdtZW50IG9mIHRoZSBhdXRob3JpdHkgVVJMOlxuICAgICAqICBBQUQgQXV0aG9yaXR5IC0gZG9tYWluL3RlbmFudElkIC0+IENyZWRlbnRpYWxzIGFyZSBjYWNoZWQgd2l0aCByZWFsbSA9IHRlbmFudElkXG4gICAgICogIEIyQyBBdXRob3JpdHkgLSBkb21haW4ve3RlbmFudElkfT8vLi4uL3BvbGljeSAtPiBDcmVkZW50aWFscyBhcmUgY2FjaGVkIHdpdGggcmVhbG0gPSBwb2xpY3lcbiAgICAgKiAgdGVuYW50SWQgaXMgZG93bmNhc2VkIGJlY2F1c2UgQjJDIHBvbGljaWVzIGNhbiBoYXZlIG1peGVkIGNhc2UgYnV0IHRmcCBjbGFpbSBpcyBkb3duY2FzZWRcbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB3ZSBtYXkgbm90IGhhdmUgYW55IHBhdGggc2VnbWVudHMgaW4gY2VydGFpbiBPSURDIHNjZW5hcmlvcy5cbiAgICAgKi9cbiAgICBjb25zdCB0ZW5hbnRJZCA9XG4gICAgICAgIGF1dGhvcml0eVVybENvbXBvbmVudHMuUGF0aFNlZ21lbnRzLnNsaWNlKC0xKVswXT8udG9Mb3dlckNhc2UoKTtcblxuICAgIHN3aXRjaCAodGVuYW50SWQpIHtcbiAgICAgICAgY2FzZSBBQURBdXRob3JpdHlDb25zdGFudHMuQ09NTU9OOlxuICAgICAgICBjYXNlIEFBREF1dGhvcml0eUNvbnN0YW50cy5PUkdBTklaQVRJT05TOlxuICAgICAgICBjYXNlIEFBREF1dGhvcml0eUNvbnN0YW50cy5DT05TVU1FUlM6XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHRlbmFudElkO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEF1dGhvcml0eVVyaShhdXRob3JpdHlVcmk6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGF1dGhvcml0eVVyaS5lbmRzV2l0aChDb25zdGFudHMuRk9SV0FSRF9TTEFTSClcbiAgICAgICAgPyBhdXRob3JpdHlVcmlcbiAgICAgICAgOiBgJHthdXRob3JpdHlVcml9JHtDb25zdGFudHMuRk9SV0FSRF9TTEFTSH1gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRTdGF0aWNBdXRob3JpdHlPcHRpb25zKFxuICAgIGF1dGhPcHRpb25zOiBQYXJ0aWFsPEF1dGhvcml0eU9wdGlvbnM+XG4pOiBTdGF0aWNBdXRob3JpdHlPcHRpb25zIHtcbiAgICBjb25zdCByYXdDbG91ZERpc2NvdmVyeU1ldGFkYXRhID0gYXV0aE9wdGlvbnMuY2xvdWREaXNjb3ZlcnlNZXRhZGF0YTtcbiAgICBsZXQgY2xvdWREaXNjb3ZlcnlNZXRhZGF0YTogQ2xvdWRJbnN0YW5jZURpc2NvdmVyeVJlc3BvbnNlIHwgdW5kZWZpbmVkID1cbiAgICAgICAgdW5kZWZpbmVkO1xuICAgIGlmIChyYXdDbG91ZERpc2NvdmVyeU1ldGFkYXRhKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjbG91ZERpc2NvdmVyeU1ldGFkYXRhID0gSlNPTi5wYXJzZShyYXdDbG91ZERpc2NvdmVyeU1ldGFkYXRhKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yKFxuICAgICAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmludmFsaWRDbG91ZERpc2NvdmVyeU1ldGFkYXRhXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGNhbm9uaWNhbEF1dGhvcml0eTogYXV0aE9wdGlvbnMuYXV0aG9yaXR5XG4gICAgICAgICAgICA/IGZvcm1hdEF1dGhvcml0eVVyaShhdXRoT3B0aW9ucy5hdXRob3JpdHkpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAga25vd25BdXRob3JpdGllczogYXV0aE9wdGlvbnMua25vd25BdXRob3JpdGllcyxcbiAgICAgICAgY2xvdWREaXNjb3ZlcnlNZXRhZGF0YTogY2xvdWREaXNjb3ZlcnlNZXRhZGF0YSxcbiAgICB9O1xufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBBdXRob3JpdHksIGZvcm1hdEF1dGhvcml0eVVyaSB9IGZyb20gXCIuL0F1dGhvcml0eS5qc1wiO1xuaW1wb3J0IHsgSU5ldHdvcmtNb2R1bGUgfSBmcm9tIFwiLi4vbmV0d29yay9JTmV0d29ya01vZHVsZS5qc1wiO1xuaW1wb3J0IHtcbiAgICBjcmVhdGVDbGllbnRBdXRoRXJyb3IsXG4gICAgQ2xpZW50QXV0aEVycm9yQ29kZXMsXG59IGZyb20gXCIuLi9lcnJvci9DbGllbnRBdXRoRXJyb3IuanNcIjtcbmltcG9ydCB7IElDYWNoZU1hbmFnZXIgfSBmcm9tIFwiLi4vY2FjaGUvaW50ZXJmYWNlL0lDYWNoZU1hbmFnZXIuanNcIjtcbmltcG9ydCB7IEF1dGhvcml0eU9wdGlvbnMgfSBmcm9tIFwiLi9BdXRob3JpdHlPcHRpb25zLmpzXCI7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiLi4vbG9nZ2VyL0xvZ2dlci5qc1wiO1xuaW1wb3J0IHsgSVBlcmZvcm1hbmNlQ2xpZW50IH0gZnJvbSBcIi4uL3RlbGVtZXRyeS9wZXJmb3JtYW5jZS9JUGVyZm9ybWFuY2VDbGllbnQuanNcIjtcbmltcG9ydCB7IFBlcmZvcm1hbmNlRXZlbnRzIH0gZnJvbSBcIi4uL3RlbGVtZXRyeS9wZXJmb3JtYW5jZS9QZXJmb3JtYW5jZUV2ZW50LmpzXCI7XG5pbXBvcnQgeyBpbnZva2VBc3luYyB9IGZyb20gXCIuLi91dGlscy9GdW5jdGlvbldyYXBwZXJzLmpzXCI7XG5cbi8qKlxuICogQ3JlYXRlIGFuIGF1dGhvcml0eSBvYmplY3Qgb2YgdGhlIGNvcnJlY3QgdHlwZSBiYXNlZCBvbiB0aGUgdXJsXG4gKiBQZXJmb3JtcyBiYXNpYyBhdXRob3JpdHkgdmFsaWRhdGlvbiAtIGNoZWNrcyB0byBzZWUgaWYgdGhlIGF1dGhvcml0eSBpcyBvZiBhIHZhbGlkIHR5cGUgKGkuZS4gYWFkLCBiMmMsIGFkZnMpXG4gKlxuICogQWxzbyBwZXJmb3JtcyBlbmRwb2ludCBkaXNjb3ZlcnkuXG4gKlxuICogQHBhcmFtIGF1dGhvcml0eVVyaVxuICogQHBhcmFtIG5ldHdvcmtDbGllbnRcbiAqIEBwYXJhbSBwcm90b2NvbE1vZGVcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRGlzY292ZXJlZEluc3RhbmNlKFxuICAgIGF1dGhvcml0eVVyaTogc3RyaW5nLFxuICAgIG5ldHdvcmtDbGllbnQ6IElOZXR3b3JrTW9kdWxlLFxuICAgIGNhY2hlTWFuYWdlcjogSUNhY2hlTWFuYWdlcixcbiAgICBhdXRob3JpdHlPcHRpb25zOiBBdXRob3JpdHlPcHRpb25zLFxuICAgIGxvZ2dlcjogTG9nZ2VyLFxuICAgIGNvcnJlbGF0aW9uSWQ6IHN0cmluZyxcbiAgICBwZXJmb3JtYW5jZUNsaWVudD86IElQZXJmb3JtYW5jZUNsaWVudFxuKTogUHJvbWlzZTxBdXRob3JpdHk+IHtcbiAgICBwZXJmb3JtYW5jZUNsaWVudD8uYWRkUXVldWVNZWFzdXJlbWVudChcbiAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuQXV0aG9yaXR5RmFjdG9yeUNyZWF0ZURpc2NvdmVyZWRJbnN0YW5jZSxcbiAgICAgICAgY29ycmVsYXRpb25JZFxuICAgICk7XG4gICAgY29uc3QgYXV0aG9yaXR5VXJpRmluYWwgPSBBdXRob3JpdHkudHJhbnNmb3JtQ0lBTUF1dGhvcml0eShcbiAgICAgICAgZm9ybWF0QXV0aG9yaXR5VXJpKGF1dGhvcml0eVVyaSlcbiAgICApO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBhdXRob3JpdHkgYW5kIHBlcmZvcm0gZGlzY292ZXJ5IGVuZHBvaW50IGNoZWNrLlxuICAgIGNvbnN0IGFjcXVpcmVUb2tlbkF1dGhvcml0eTogQXV0aG9yaXR5ID0gbmV3IEF1dGhvcml0eShcbiAgICAgICAgYXV0aG9yaXR5VXJpRmluYWwsXG4gICAgICAgIG5ldHdvcmtDbGllbnQsXG4gICAgICAgIGNhY2hlTWFuYWdlcixcbiAgICAgICAgYXV0aG9yaXR5T3B0aW9ucyxcbiAgICAgICAgbG9nZ2VyLFxuICAgICAgICBjb3JyZWxhdGlvbklkLFxuICAgICAgICBwZXJmb3JtYW5jZUNsaWVudFxuICAgICk7XG5cbiAgICB0cnkge1xuICAgICAgICBhd2FpdCBpbnZva2VBc3luYyhcbiAgICAgICAgICAgIGFjcXVpcmVUb2tlbkF1dGhvcml0eS5yZXNvbHZlRW5kcG9pbnRzQXN5bmMuYmluZChcbiAgICAgICAgICAgICAgICBhY3F1aXJlVG9rZW5BdXRob3JpdHlcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5BdXRob3JpdHlSZXNvbHZlRW5kcG9pbnRzQXN5bmMsXG4gICAgICAgICAgICBsb2dnZXIsXG4gICAgICAgICAgICBwZXJmb3JtYW5jZUNsaWVudCxcbiAgICAgICAgICAgIGNvcnJlbGF0aW9uSWRcbiAgICAgICAgKSgpO1xuICAgICAgICByZXR1cm4gYWNxdWlyZVRva2VuQXV0aG9yaXR5O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKFxuICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuZW5kcG9pbnRSZXNvbHV0aW9uRXJyb3JcbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEF1dGhFcnJvciB9IGZyb20gXCIuL0F1dGhFcnJvci5qc1wiO1xuXG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIHRoZXJlIGlzIGFuIGVycm9yIHdpdGggdGhlIHNlcnZlciBjb2RlLCBmb3IgZXhhbXBsZSwgdW5hdmFpbGFiaWxpdHkuXG4gKi9cbmV4cG9ydCBjbGFzcyBTZXJ2ZXJFcnJvciBleHRlbmRzIEF1dGhFcnJvciB7XG4gICAgLyoqXG4gICAgICogU2VydmVyIGVycm9yIG51bWJlcjtcbiAgICAgKi9cbiAgICByZWFkb25seSBlcnJvck5vPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogSHR0cCBzdGF0dXMgbnVtYmVyO1xuICAgICAqL1xuICAgIHJlYWRvbmx5IHN0YXR1cz86IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBlcnJvckNvZGU/OiBzdHJpbmcsXG4gICAgICAgIGVycm9yTWVzc2FnZT86IHN0cmluZyxcbiAgICAgICAgc3ViRXJyb3I/OiBzdHJpbmcsXG4gICAgICAgIGVycm9yTm8/OiBzdHJpbmcsXG4gICAgICAgIHN0YXR1cz86IG51bWJlclxuICAgICkge1xuICAgICAgICBzdXBlcihlcnJvckNvZGUsIGVycm9yTWVzc2FnZSwgc3ViRXJyb3IpO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIlNlcnZlckVycm9yXCI7XG4gICAgICAgIHRoaXMuZXJyb3JObyA9IGVycm9yTm87XG4gICAgICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzO1xuXG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBTZXJ2ZXJFcnJvci5wcm90b3R5cGUpO1xuICAgIH1cbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgU2hyT3B0aW9ucyB9IGZyb20gXCIuLi9jcnlwdG8vU2lnbmVkSHR0cFJlcXVlc3QuanNcIjtcbmltcG9ydCB7IEJhc2VBdXRoUmVxdWVzdCB9IGZyb20gXCIuLi9yZXF1ZXN0L0Jhc2VBdXRoUmVxdWVzdC5qc1wiO1xuaW1wb3J0IHsgQXV0aGVudGljYXRpb25TY2hlbWUgfSBmcm9tIFwiLi4vdXRpbHMvQ29uc3RhbnRzLmpzXCI7XG5cbi8qKlxuICogVHlwZSByZXByZXNlbnRpbmcgYSB1bmlxdWUgcmVxdWVzdCB0aHVtYnByaW50LlxuICovXG5leHBvcnQgdHlwZSBSZXF1ZXN0VGh1bWJwcmludCA9IHtcbiAgICBjbGllbnRJZDogc3RyaW5nO1xuICAgIGF1dGhvcml0eTogc3RyaW5nO1xuICAgIHNjb3BlczogQXJyYXk8c3RyaW5nPjtcbiAgICBob21lQWNjb3VudElkZW50aWZpZXI/OiBzdHJpbmc7XG4gICAgY2xhaW1zPzogc3RyaW5nO1xuICAgIGF1dGhlbnRpY2F0aW9uU2NoZW1lPzogQXV0aGVudGljYXRpb25TY2hlbWU7XG4gICAgcmVzb3VyY2VSZXF1ZXN0TWV0aG9kPzogc3RyaW5nO1xuICAgIHJlc291cmNlUmVxdWVzdFVyaT86IHN0cmluZztcbiAgICBzaHJDbGFpbXM/OiBzdHJpbmc7XG4gICAgc3NoS2lkPzogc3RyaW5nO1xuICAgIHNock9wdGlvbnM/OiBTaHJPcHRpb25zO1xuICAgIGVtYmVkZGVkQ2xpZW50SWQ/OiBzdHJpbmc7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVxdWVzdFRodW1icHJpbnQoXG4gICAgY2xpZW50SWQ6IHN0cmluZyxcbiAgICByZXF1ZXN0OiBCYXNlQXV0aFJlcXVlc3QsXG4gICAgaG9tZUFjY291bnRJZD86IHN0cmluZ1xuKTogUmVxdWVzdFRodW1icHJpbnQge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNsaWVudElkOiBjbGllbnRJZCxcbiAgICAgICAgYXV0aG9yaXR5OiByZXF1ZXN0LmF1dGhvcml0eSxcbiAgICAgICAgc2NvcGVzOiByZXF1ZXN0LnNjb3BlcyxcbiAgICAgICAgaG9tZUFjY291bnRJZGVudGlmaWVyOiBob21lQWNjb3VudElkLFxuICAgICAgICBjbGFpbXM6IHJlcXVlc3QuY2xhaW1zLFxuICAgICAgICBhdXRoZW50aWNhdGlvblNjaGVtZTogcmVxdWVzdC5hdXRoZW50aWNhdGlvblNjaGVtZSxcbiAgICAgICAgcmVzb3VyY2VSZXF1ZXN0TWV0aG9kOiByZXF1ZXN0LnJlc291cmNlUmVxdWVzdE1ldGhvZCxcbiAgICAgICAgcmVzb3VyY2VSZXF1ZXN0VXJpOiByZXF1ZXN0LnJlc291cmNlUmVxdWVzdFVyaSxcbiAgICAgICAgc2hyQ2xhaW1zOiByZXF1ZXN0LnNockNsYWltcyxcbiAgICAgICAgc3NoS2lkOiByZXF1ZXN0LnNzaEtpZCxcbiAgICAgICAgZW1iZWRkZWRDbGllbnRJZDpcbiAgICAgICAgICAgIHJlcXVlc3QuZW1iZWRkZWRDbGllbnRJZCB8fCByZXF1ZXN0LnRva2VuQm9keVBhcmFtZXRlcnM/LmNsaWVudElkLFxuICAgIH07XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IE5ldHdvcmtSZXNwb25zZSB9IGZyb20gXCIuL05ldHdvcmtSZXNwb25zZS5qc1wiO1xuaW1wb3J0IHsgU2VydmVyQXV0aG9yaXphdGlvblRva2VuUmVzcG9uc2UgfSBmcm9tIFwiLi4vcmVzcG9uc2UvU2VydmVyQXV0aG9yaXphdGlvblRva2VuUmVzcG9uc2UuanNcIjtcbmltcG9ydCB7XG4gICAgSGVhZGVyTmFtZXMsXG4gICAgVGhyb3R0bGluZ0NvbnN0YW50cyxcbiAgICBDb25zdGFudHMsXG59IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcbmltcG9ydCB7IENhY2hlTWFuYWdlciB9IGZyb20gXCIuLi9jYWNoZS9DYWNoZU1hbmFnZXIuanNcIjtcbmltcG9ydCB7IFNlcnZlckVycm9yIH0gZnJvbSBcIi4uL2Vycm9yL1NlcnZlckVycm9yLmpzXCI7XG5pbXBvcnQge1xuICAgIGdldFJlcXVlc3RUaHVtYnByaW50LFxuICAgIFJlcXVlc3RUaHVtYnByaW50LFxufSBmcm9tIFwiLi9SZXF1ZXN0VGh1bWJwcmludC5qc1wiO1xuaW1wb3J0IHsgVGhyb3R0bGluZ0VudGl0eSB9IGZyb20gXCIuLi9jYWNoZS9lbnRpdGllcy9UaHJvdHRsaW5nRW50aXR5LmpzXCI7XG5pbXBvcnQgeyBCYXNlQXV0aFJlcXVlc3QgfSBmcm9tIFwiLi4vcmVxdWVzdC9CYXNlQXV0aFJlcXVlc3QuanNcIjtcblxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGNsYXNzIFRocm90dGxpbmdVdGlscyB7XG4gICAgLyoqXG4gICAgICogUHJlcGFyZXMgYSBSZXF1ZXN0VGh1bWJwcmludCB0byBiZSBzdG9yZWQgYXMgYSBrZXkuXG4gICAgICogQHBhcmFtIHRodW1icHJpbnRcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2VuZXJhdGVUaHJvdHRsaW5nU3RvcmFnZUtleSh0aHVtYnByaW50OiBSZXF1ZXN0VGh1bWJwcmludCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBgJHtUaHJvdHRsaW5nQ29uc3RhbnRzLlRIUk9UVExJTkdfUFJFRklYfS4ke0pTT04uc3RyaW5naWZ5KFxuICAgICAgICAgICAgdGh1bWJwcmludFxuICAgICAgICApfWA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgbmVjZXNzYXJ5IHRocm90dGxpbmcgY2hlY2tzIGJlZm9yZSBhIG5ldHdvcmsgcmVxdWVzdC5cbiAgICAgKiBAcGFyYW0gY2FjaGVNYW5hZ2VyXG4gICAgICogQHBhcmFtIHRodW1icHJpbnRcbiAgICAgKi9cbiAgICBzdGF0aWMgcHJlUHJvY2VzcyhcbiAgICAgICAgY2FjaGVNYW5hZ2VyOiBDYWNoZU1hbmFnZXIsXG4gICAgICAgIHRodW1icHJpbnQ6IFJlcXVlc3RUaHVtYnByaW50XG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGtleSA9IFRocm90dGxpbmdVdGlscy5nZW5lcmF0ZVRocm90dGxpbmdTdG9yYWdlS2V5KHRodW1icHJpbnQpO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGNhY2hlTWFuYWdlci5nZXRUaHJvdHRsaW5nQ2FjaGUoa2V5KTtcblxuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZS50aHJvdHRsZVRpbWUgPCBEYXRlLm5vdygpKSB7XG4gICAgICAgICAgICAgICAgY2FjaGVNYW5hZ2VyLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgU2VydmVyRXJyb3IoXG4gICAgICAgICAgICAgICAgdmFsdWUuZXJyb3JDb2Rlcz8uam9pbihcIiBcIikgfHwgQ29uc3RhbnRzLkVNUFRZX1NUUklORyxcbiAgICAgICAgICAgICAgICB2YWx1ZS5lcnJvck1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgdmFsdWUuc3ViRXJyb3JcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBuZWNlc3NhcnkgdGhyb3R0bGluZyBjaGVja3MgYWZ0ZXIgYSBuZXR3b3JrIHJlcXVlc3QuXG4gICAgICogQHBhcmFtIGNhY2hlTWFuYWdlclxuICAgICAqIEBwYXJhbSB0aHVtYnByaW50XG4gICAgICogQHBhcmFtIHJlc3BvbnNlXG4gICAgICovXG4gICAgc3RhdGljIHBvc3RQcm9jZXNzKFxuICAgICAgICBjYWNoZU1hbmFnZXI6IENhY2hlTWFuYWdlcixcbiAgICAgICAgdGh1bWJwcmludDogUmVxdWVzdFRodW1icHJpbnQsXG4gICAgICAgIHJlc3BvbnNlOiBOZXR3b3JrUmVzcG9uc2U8U2VydmVyQXV0aG9yaXphdGlvblRva2VuUmVzcG9uc2U+XG4gICAgKTogdm9pZCB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIFRocm90dGxpbmdVdGlscy5jaGVja1Jlc3BvbnNlU3RhdHVzKHJlc3BvbnNlKSB8fFxuICAgICAgICAgICAgVGhyb3R0bGluZ1V0aWxzLmNoZWNrUmVzcG9uc2VGb3JSZXRyeUFmdGVyKHJlc3BvbnNlKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IHRodW1icHJpbnRWYWx1ZTogVGhyb3R0bGluZ0VudGl0eSA9IHtcbiAgICAgICAgICAgICAgICB0aHJvdHRsZVRpbWU6IFRocm90dGxpbmdVdGlscy5jYWxjdWxhdGVUaHJvdHRsZVRpbWUoXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHJlc3BvbnNlLmhlYWRlcnNbSGVhZGVyTmFtZXMuUkVUUllfQUZURVJdKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgZXJyb3I6IHJlc3BvbnNlLmJvZHkuZXJyb3IsXG4gICAgICAgICAgICAgICAgZXJyb3JDb2RlczogcmVzcG9uc2UuYm9keS5lcnJvcl9jb2RlcyxcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IHJlc3BvbnNlLmJvZHkuZXJyb3JfZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgc3ViRXJyb3I6IHJlc3BvbnNlLmJvZHkuc3ViZXJyb3IsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2FjaGVNYW5hZ2VyLnNldFRocm90dGxpbmdDYWNoZShcbiAgICAgICAgICAgICAgICBUaHJvdHRsaW5nVXRpbHMuZ2VuZXJhdGVUaHJvdHRsaW5nU3RvcmFnZUtleSh0aHVtYnByaW50KSxcbiAgICAgICAgICAgICAgICB0aHVtYnByaW50VmFsdWVcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgYSBOZXR3b3JrUmVzcG9uc2Ugb2JqZWN0J3Mgc3RhdHVzIGNvZGVzIGFnYWluc3QgNDI5IG9yIDV4eFxuICAgICAqIEBwYXJhbSByZXNwb25zZVxuICAgICAqL1xuICAgIHN0YXRpYyBjaGVja1Jlc3BvbnNlU3RhdHVzKFxuICAgICAgICByZXNwb25zZTogTmV0d29ya1Jlc3BvbnNlPFNlcnZlckF1dGhvcml6YXRpb25Ub2tlblJlc3BvbnNlPlxuICAgICk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgcmVzcG9uc2Uuc3RhdHVzID09PSA0MjkgfHxcbiAgICAgICAgICAgIChyZXNwb25zZS5zdGF0dXMgPj0gNTAwICYmIHJlc3BvbnNlLnN0YXR1cyA8IDYwMClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgYSBOZXR3b3JrUmVzcG9uc2Ugb2JqZWN0J3MgUmV0cnlBZnRlciBoZWFkZXJcbiAgICAgKiBAcGFyYW0gcmVzcG9uc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgY2hlY2tSZXNwb25zZUZvclJldHJ5QWZ0ZXIoXG4gICAgICAgIHJlc3BvbnNlOiBOZXR3b3JrUmVzcG9uc2U8U2VydmVyQXV0aG9yaXphdGlvblRva2VuUmVzcG9uc2U+XG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIGlmIChyZXNwb25zZS5oZWFkZXJzKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLmhlYWRlcnMuaGFzT3duUHJvcGVydHkoSGVhZGVyTmFtZXMuUkVUUllfQUZURVIpICYmXG4gICAgICAgICAgICAgICAgKHJlc3BvbnNlLnN0YXR1cyA8IDIwMCB8fCByZXNwb25zZS5zdGF0dXMgPj0gMzAwKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlcyB0aGUgVW5peC10aW1lIHZhbHVlIGZvciBhIHRocm90dGxlIHRvIGV4cGlyZSBnaXZlbiB0aHJvdHRsZVRpbWUgaW4gc2Vjb25kcy5cbiAgICAgKiBAcGFyYW0gdGhyb3R0bGVUaW1lXG4gICAgICovXG4gICAgc3RhdGljIGNhbGN1bGF0ZVRocm90dGxlVGltZSh0aHJvdHRsZVRpbWU6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IHRpbWUgPSB0aHJvdHRsZVRpbWUgPD0gMCA/IDAgOiB0aHJvdHRsZVRpbWU7XG5cbiAgICAgICAgY29uc3QgY3VycmVudFNlY29uZHMgPSBEYXRlLm5vdygpIC8gMTAwMDtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoXG4gICAgICAgICAgICBNYXRoLm1pbihcbiAgICAgICAgICAgICAgICBjdXJyZW50U2Vjb25kcyArXG4gICAgICAgICAgICAgICAgICAgICh0aW1lIHx8IFRocm90dGxpbmdDb25zdGFudHMuREVGQVVMVF9USFJPVFRMRV9USU1FX1NFQ09ORFMpLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRTZWNvbmRzICtcbiAgICAgICAgICAgICAgICAgICAgVGhyb3R0bGluZ0NvbnN0YW50cy5ERUZBVUxUX01BWF9USFJPVFRMRV9USU1FX1NFQ09ORFNcbiAgICAgICAgICAgICkgKiAxMDAwXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgc3RhdGljIHJlbW92ZVRocm90dGxlKFxuICAgICAgICBjYWNoZU1hbmFnZXI6IENhY2hlTWFuYWdlcixcbiAgICAgICAgY2xpZW50SWQ6IHN0cmluZyxcbiAgICAgICAgcmVxdWVzdDogQmFzZUF1dGhSZXF1ZXN0LFxuICAgICAgICBob21lQWNjb3VudElkZW50aWZpZXI/OiBzdHJpbmdcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgdGh1bWJwcmludCA9IGdldFJlcXVlc3RUaHVtYnByaW50KFxuICAgICAgICAgICAgY2xpZW50SWQsXG4gICAgICAgICAgICByZXF1ZXN0LFxuICAgICAgICAgICAgaG9tZUFjY291bnRJZGVudGlmaWVyXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGtleSA9IHRoaXMuZ2VuZXJhdGVUaHJvdHRsaW5nU3RvcmFnZUtleSh0aHVtYnByaW50KTtcbiAgICAgICAgY2FjaGVNYW5hZ2VyLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICB9XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEF1dGhFcnJvciB9IGZyb20gXCIuL0F1dGhFcnJvci5qc1wiO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgbmV0d29yayByZWxhdGVkIGVycm9yc1xuICovXG5leHBvcnQgY2xhc3MgTmV0d29ya0Vycm9yIGV4dGVuZHMgQXV0aEVycm9yIHtcbiAgICBlcnJvcjogQXV0aEVycm9yO1xuICAgIGh0dHBTdGF0dXM/OiBudW1iZXI7XG4gICAgcmVzcG9uc2VIZWFkZXJzPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBlcnJvcjogQXV0aEVycm9yLFxuICAgICAgICBodHRwU3RhdHVzPzogbnVtYmVyLFxuICAgICAgICByZXNwb25zZUhlYWRlcnM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+XG4gICAgKSB7XG4gICAgICAgIHN1cGVyKGVycm9yLmVycm9yQ29kZSwgZXJyb3IuZXJyb3JNZXNzYWdlLCBlcnJvci5zdWJFcnJvcik7XG5cbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIE5ldHdvcmtFcnJvci5wcm90b3R5cGUpO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIk5ldHdvcmtFcnJvclwiO1xuICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XG4gICAgICAgIHRoaXMuaHR0cFN0YXR1cyA9IGh0dHBTdGF0dXM7XG4gICAgICAgIHRoaXMucmVzcG9uc2VIZWFkZXJzID0gcmVzcG9uc2VIZWFkZXJzO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIE5ldHdvcmtFcnJvciBvYmplY3QgZm9yIGEgZmFpbGVkIG5ldHdvcmsgcmVxdWVzdFxuICogQHBhcmFtIGVycm9yIC0gRXJyb3IgdG8gYmUgdGhyb3duIGJhY2sgdG8gdGhlIGNhbGxlclxuICogQHBhcmFtIGh0dHBTdGF0dXMgLSBTdGF0dXMgY29kZSBvZiB0aGUgbmV0d29yayByZXF1ZXN0XG4gKiBAcGFyYW0gcmVzcG9uc2VIZWFkZXJzIC0gUmVzcG9uc2UgaGVhZGVycyBvZiB0aGUgbmV0d29yayByZXF1ZXN0LCB3aGVuIGF2YWlsYWJsZVxuICogQHJldHVybnMgTmV0d29ya0Vycm9yIG9iamVjdFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTmV0d29ya0Vycm9yKFxuICAgIGVycm9yOiBBdXRoRXJyb3IsXG4gICAgaHR0cFN0YXR1cz86IG51bWJlcixcbiAgICByZXNwb25zZUhlYWRlcnM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+XG4pOiBOZXR3b3JrRXJyb3Ige1xuICAgIHJldHVybiBuZXcgTmV0d29ya0Vycm9yKGVycm9yLCBodHRwU3RhdHVzLCByZXNwb25zZUhlYWRlcnMpO1xufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICAgIENsaWVudENvbmZpZ3VyYXRpb24sXG4gICAgYnVpbGRDbGllbnRDb25maWd1cmF0aW9uLFxuICAgIENvbW1vbkNsaWVudENvbmZpZ3VyYXRpb24sXG59IGZyb20gXCIuLi9jb25maWcvQ2xpZW50Q29uZmlndXJhdGlvbi5qc1wiO1xuaW1wb3J0IHtcbiAgICBJTmV0d29ya01vZHVsZSxcbiAgICBOZXR3b3JrUmVxdWVzdE9wdGlvbnMsXG59IGZyb20gXCIuLi9uZXR3b3JrL0lOZXR3b3JrTW9kdWxlLmpzXCI7XG5pbXBvcnQgeyBOZXR3b3JrUmVzcG9uc2UgfSBmcm9tIFwiLi4vbmV0d29yay9OZXR3b3JrUmVzcG9uc2UuanNcIjtcbmltcG9ydCB7IElDcnlwdG8gfSBmcm9tIFwiLi4vY3J5cHRvL0lDcnlwdG8uanNcIjtcbmltcG9ydCB7IEF1dGhvcml0eSB9IGZyb20gXCIuLi9hdXRob3JpdHkvQXV0aG9yaXR5LmpzXCI7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiLi4vbG9nZ2VyL0xvZ2dlci5qc1wiO1xuaW1wb3J0IHsgQ29uc3RhbnRzLCBIZWFkZXJOYW1lcyB9IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcbmltcG9ydCB7IFNlcnZlckF1dGhvcml6YXRpb25Ub2tlblJlc3BvbnNlIH0gZnJvbSBcIi4uL3Jlc3BvbnNlL1NlcnZlckF1dGhvcml6YXRpb25Ub2tlblJlc3BvbnNlLmpzXCI7XG5pbXBvcnQgeyBDYWNoZU1hbmFnZXIgfSBmcm9tIFwiLi4vY2FjaGUvQ2FjaGVNYW5hZ2VyLmpzXCI7XG5pbXBvcnQgeyBTZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyIH0gZnJvbSBcIi4uL3RlbGVtZXRyeS9zZXJ2ZXIvU2VydmVyVGVsZW1ldHJ5TWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgUmVxdWVzdFRodW1icHJpbnQgfSBmcm9tIFwiLi4vbmV0d29yay9SZXF1ZXN0VGh1bWJwcmludC5qc1wiO1xuaW1wb3J0IHsgdmVyc2lvbiwgbmFtZSB9IGZyb20gXCIuLi9wYWNrYWdlTWV0YWRhdGEuanNcIjtcbmltcG9ydCB7IENjc0NyZWRlbnRpYWwsIENjc0NyZWRlbnRpYWxUeXBlIH0gZnJvbSBcIi4uL2FjY291bnQvQ2NzQ3JlZGVudGlhbC5qc1wiO1xuaW1wb3J0IHsgYnVpbGRDbGllbnRJbmZvRnJvbUhvbWVBY2NvdW50SWQgfSBmcm9tIFwiLi4vYWNjb3VudC9DbGllbnRJbmZvLmpzXCI7XG5pbXBvcnQgeyBJUGVyZm9ybWFuY2VDbGllbnQgfSBmcm9tIFwiLi4vdGVsZW1ldHJ5L3BlcmZvcm1hbmNlL0lQZXJmb3JtYW5jZUNsaWVudC5qc1wiO1xuaW1wb3J0ICogYXMgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIgZnJvbSBcIi4uL3JlcXVlc3QvUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuanNcIjtcbmltcG9ydCAqIGFzIFVybFV0aWxzIGZyb20gXCIuLi91dGlscy9VcmxVdGlscy5qc1wiO1xuaW1wb3J0IHsgQmFzZUF1dGhSZXF1ZXN0IH0gZnJvbSBcIi4uL3JlcXVlc3QvQmFzZUF1dGhSZXF1ZXN0LmpzXCI7XG5pbXBvcnQgeyBjcmVhdGVEaXNjb3ZlcmVkSW5zdGFuY2UgfSBmcm9tIFwiLi4vYXV0aG9yaXR5L0F1dGhvcml0eUZhY3RvcnkuanNcIjtcbmltcG9ydCB7IFBlcmZvcm1hbmNlRXZlbnRzIH0gZnJvbSBcIi4uL3RlbGVtZXRyeS9wZXJmb3JtYW5jZS9QZXJmb3JtYW5jZUV2ZW50LmpzXCI7XG5pbXBvcnQgeyBUaHJvdHRsaW5nVXRpbHMgfSBmcm9tIFwiLi4vbmV0d29yay9UaHJvdHRsaW5nVXRpbHMuanNcIjtcbmltcG9ydCB7IEF1dGhFcnJvciB9IGZyb20gXCIuLi9lcnJvci9BdXRoRXJyb3IuanNcIjtcbmltcG9ydCB7XG4gICAgQ2xpZW50QXV0aEVycm9yQ29kZXMsXG4gICAgY3JlYXRlQ2xpZW50QXV0aEVycm9yLFxufSBmcm9tIFwiLi4vZXJyb3IvQ2xpZW50QXV0aEVycm9yLmpzXCI7XG5pbXBvcnQgeyBOZXR3b3JrRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3IvTmV0d29ya0Vycm9yLmpzXCI7XG5pbXBvcnQgeyBpbnZva2VBc3luYyB9IGZyb20gXCIuLi91dGlscy9GdW5jdGlvbldyYXBwZXJzLmpzXCI7XG5cbi8qKlxuICogQmFzZSBhcHBsaWNhdGlvbiBjbGFzcyB3aGljaCB3aWxsIGNvbnN0cnVjdCByZXF1ZXN0cyB0byBzZW5kIHRvIGFuZCBoYW5kbGUgcmVzcG9uc2VzIGZyb20gdGhlIE1pY3Jvc29mdCBTVFMgdXNpbmcgdGhlIGF1dGhvcml6YXRpb24gY29kZSBmbG93LlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYXNlQ2xpZW50IHtcbiAgICAvLyBMb2dnZXIgb2JqZWN0XG4gICAgcHVibGljIGxvZ2dlcjogTG9nZ2VyO1xuXG4gICAgLy8gQXBwbGljYXRpb24gY29uZmlnXG4gICAgcHJvdGVjdGVkIGNvbmZpZzogQ29tbW9uQ2xpZW50Q29uZmlndXJhdGlvbjtcblxuICAgIC8vIENyeXB0byBJbnRlcmZhY2VcbiAgICBwcm90ZWN0ZWQgY3J5cHRvVXRpbHM6IElDcnlwdG87XG5cbiAgICAvLyBTdG9yYWdlIEludGVyZmFjZVxuICAgIHByb3RlY3RlZCBjYWNoZU1hbmFnZXI6IENhY2hlTWFuYWdlcjtcblxuICAgIC8vIE5ldHdvcmsgSW50ZXJmYWNlXG4gICAgcHJvdGVjdGVkIG5ldHdvcmtDbGllbnQ6IElOZXR3b3JrTW9kdWxlO1xuXG4gICAgLy8gU2VydmVyIFRlbGVtZXRyeSBNYW5hZ2VyXG4gICAgcHJvdGVjdGVkIHNlcnZlclRlbGVtZXRyeU1hbmFnZXI6IFNlcnZlclRlbGVtZXRyeU1hbmFnZXIgfCBudWxsO1xuXG4gICAgLy8gRGVmYXVsdCBhdXRob3JpdHkgb2JqZWN0XG4gICAgcHVibGljIGF1dGhvcml0eTogQXV0aG9yaXR5O1xuXG4gICAgLy8gUGVyZm9ybWFuY2UgdGVsZW1ldHJ5IGNsaWVudFxuICAgIHByb3RlY3RlZCBwZXJmb3JtYW5jZUNsaWVudD86IElQZXJmb3JtYW5jZUNsaWVudDtcblxuICAgIHByb3RlY3RlZCBjb25zdHJ1Y3RvcihcbiAgICAgICAgY29uZmlndXJhdGlvbjogQ2xpZW50Q29uZmlndXJhdGlvbixcbiAgICAgICAgcGVyZm9ybWFuY2VDbGllbnQ/OiBJUGVyZm9ybWFuY2VDbGllbnRcbiAgICApIHtcbiAgICAgICAgLy8gU2V0IHRoZSBjb25maWd1cmF0aW9uXG4gICAgICAgIHRoaXMuY29uZmlnID0gYnVpbGRDbGllbnRDb25maWd1cmF0aW9uKGNvbmZpZ3VyYXRpb24pO1xuXG4gICAgICAgIC8vIEluaXRpYWxpemUgdGhlIGxvZ2dlclxuICAgICAgICB0aGlzLmxvZ2dlciA9IG5ldyBMb2dnZXIodGhpcy5jb25maWcubG9nZ2VyT3B0aW9ucywgbmFtZSwgdmVyc2lvbik7XG5cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBjcnlwdG9cbiAgICAgICAgdGhpcy5jcnlwdG9VdGlscyA9IHRoaXMuY29uZmlnLmNyeXB0b0ludGVyZmFjZTtcblxuICAgICAgICAvLyBJbml0aWFsaXplIHN0b3JhZ2UgaW50ZXJmYWNlXG4gICAgICAgIHRoaXMuY2FjaGVNYW5hZ2VyID0gdGhpcy5jb25maWcuc3RvcmFnZUludGVyZmFjZTtcblxuICAgICAgICAvLyBTZXQgdGhlIG5ldHdvcmsgaW50ZXJmYWNlXG4gICAgICAgIHRoaXMubmV0d29ya0NsaWVudCA9IHRoaXMuY29uZmlnLm5ldHdvcmtJbnRlcmZhY2U7XG5cbiAgICAgICAgLy8gU2V0IFRlbGVtZXRyeU1hbmFnZXJcbiAgICAgICAgdGhpcy5zZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyID0gdGhpcy5jb25maWcuc2VydmVyVGVsZW1ldHJ5TWFuYWdlcjtcblxuICAgICAgICAvLyBzZXQgQXV0aG9yaXR5XG4gICAgICAgIHRoaXMuYXV0aG9yaXR5ID0gdGhpcy5jb25maWcuYXV0aE9wdGlvbnMuYXV0aG9yaXR5O1xuXG4gICAgICAgIC8vIHNldCBwZXJmb3JtYW5jZSB0ZWxlbWV0cnkgY2xpZW50XG4gICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQgPSBwZXJmb3JtYW5jZUNsaWVudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGRlZmF1bHQgaGVhZGVycyBmb3IgcmVxdWVzdHMgdG8gdG9rZW4gZW5kcG9pbnRcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgY3JlYXRlVG9rZW5SZXF1ZXN0SGVhZGVycyhcbiAgICAgICAgY2NzQ3JlZD86IENjc0NyZWRlbnRpYWxcbiAgICApOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHtcbiAgICAgICAgY29uc3QgaGVhZGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuICAgICAgICBoZWFkZXJzW0hlYWRlck5hbWVzLkNPTlRFTlRfVFlQRV0gPSBDb25zdGFudHMuVVJMX0ZPUk1fQ09OVEVOVF9UWVBFO1xuICAgICAgICBpZiAoIXRoaXMuY29uZmlnLnN5c3RlbU9wdGlvbnMucHJldmVudENvcnNQcmVmbGlnaHQgJiYgY2NzQ3JlZCkge1xuICAgICAgICAgICAgc3dpdGNoIChjY3NDcmVkLnR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIENjc0NyZWRlbnRpYWxUeXBlLkhPTUVfQUNDT1VOVF9JRDpcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsaWVudEluZm8gPSBidWlsZENsaWVudEluZm9Gcm9tSG9tZUFjY291bnRJZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjY3NDcmVkLmNyZWRlbnRpYWxcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlYWRlck5hbWVzLkNDU19IRUFERVJcbiAgICAgICAgICAgICAgICAgICAgICAgIF0gPSBgT2lkOiR7Y2xpZW50SW5mby51aWR9QCR7Y2xpZW50SW5mby51dGlkfWA7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJDb3VsZCBub3QgcGFyc2UgaG9tZSBhY2NvdW50IElEIGZvciBDQ1MgSGVhZGVyOiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBDY3NDcmVkZW50aWFsVHlwZS5VUE46XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbXG4gICAgICAgICAgICAgICAgICAgICAgICBIZWFkZXJOYW1lcy5DQ1NfSEVBREVSXG4gICAgICAgICAgICAgICAgICAgIF0gPSBgVVBOOiAke2Njc0NyZWQuY3JlZGVudGlhbH1gO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGVhZGVycztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIdHRwIHBvc3QgdG8gdG9rZW4gZW5kcG9pbnRcbiAgICAgKiBAcGFyYW0gdG9rZW5FbmRwb2ludFxuICAgICAqIEBwYXJhbSBxdWVyeVN0cmluZ1xuICAgICAqIEBwYXJhbSBoZWFkZXJzXG4gICAgICogQHBhcmFtIHRodW1icHJpbnRcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgYXN5bmMgZXhlY3V0ZVBvc3RUb1Rva2VuRW5kcG9pbnQoXG4gICAgICAgIHRva2VuRW5kcG9pbnQ6IHN0cmluZyxcbiAgICAgICAgcXVlcnlTdHJpbmc6IHN0cmluZyxcbiAgICAgICAgaGVhZGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPixcbiAgICAgICAgdGh1bWJwcmludDogUmVxdWVzdFRodW1icHJpbnQsXG4gICAgICAgIGNvcnJlbGF0aW9uSWQ6IHN0cmluZyxcbiAgICAgICAgcXVldWVkRXZlbnQ/OiBzdHJpbmdcbiAgICApOiBQcm9taXNlPE5ldHdvcmtSZXNwb25zZTxTZXJ2ZXJBdXRob3JpemF0aW9uVG9rZW5SZXNwb25zZT4+IHtcbiAgICAgICAgaWYgKHF1ZXVlZEV2ZW50KSB7XG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50Py5hZGRRdWV1ZU1lYXN1cmVtZW50KFxuICAgICAgICAgICAgICAgIHF1ZXVlZEV2ZW50LFxuICAgICAgICAgICAgICAgIGNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZXNwb25zZSA9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNlbmRQb3N0UmVxdWVzdDxTZXJ2ZXJBdXRob3JpemF0aW9uVG9rZW5SZXNwb25zZT4oXG4gICAgICAgICAgICAgICAgdGh1bWJwcmludCxcbiAgICAgICAgICAgICAgICB0b2tlbkVuZHBvaW50LFxuICAgICAgICAgICAgICAgIHsgYm9keTogcXVlcnlTdHJpbmcsIGhlYWRlcnM6IGhlYWRlcnMgfSxcbiAgICAgICAgICAgICAgICBjb3JyZWxhdGlvbklkXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLnNlcnZlclRlbGVtZXRyeU1hbmFnZXIgJiZcbiAgICAgICAgICAgIHJlc3BvbnNlLnN0YXR1cyA8IDUwMCAmJlxuICAgICAgICAgICAgcmVzcG9uc2Uuc3RhdHVzICE9PSA0MjlcbiAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBUZWxlbWV0cnkgZGF0YSBzdWNjZXNzZnVsbHkgbG9nZ2VkIGJ5IHNlcnZlciwgY2xlYXIgVGVsZW1ldHJ5IGNhY2hlXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5zZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyLmNsZWFyVGVsZW1ldHJ5Q2FjaGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXcmFwcyBzZW5kUG9zdFJlcXVlc3RBc3luYyB3aXRoIG5lY2Vzc2FyeSBwcmVmbGlnaHQgYW5kIHBvc3RmbGlnaHQgbG9naWNcbiAgICAgKiBAcGFyYW0gdGh1bWJwcmludCAtIFJlcXVlc3QgdGh1bWJwcmludCBmb3IgdGhyb3R0bGluZ1xuICAgICAqIEBwYXJhbSB0b2tlbkVuZHBvaW50IC0gRW5kcG9pbnQgdG8gbWFrZSB0aGUgUE9TVCB0b1xuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQm9keSBhbmQgSGVhZGVycyB0byBpbmNsdWRlIG9uIHRoZSBQT1NUIHJlcXVlc3RcbiAgICAgKiBAcGFyYW0gY29ycmVsYXRpb25JZCAtIENvcnJlbGF0aW9uSWQgZm9yIHRlbGVtZXRyeVxuICAgICAqL1xuICAgIGFzeW5jIHNlbmRQb3N0UmVxdWVzdDxUIGV4dGVuZHMgU2VydmVyQXV0aG9yaXphdGlvblRva2VuUmVzcG9uc2U+KFxuICAgICAgICB0aHVtYnByaW50OiBSZXF1ZXN0VGh1bWJwcmludCxcbiAgICAgICAgdG9rZW5FbmRwb2ludDogc3RyaW5nLFxuICAgICAgICBvcHRpb25zOiBOZXR3b3JrUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgIGNvcnJlbGF0aW9uSWQ6IHN0cmluZ1xuICAgICk6IFByb21pc2U8TmV0d29ya1Jlc3BvbnNlPFQ+PiB7XG4gICAgICAgIFRocm90dGxpbmdVdGlscy5wcmVQcm9jZXNzKHRoaXMuY2FjaGVNYW5hZ2VyLCB0aHVtYnByaW50KTtcblxuICAgICAgICBsZXQgcmVzcG9uc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IGludm9rZUFzeW5jKFxuICAgICAgICAgICAgICAgIHRoaXMubmV0d29ya0NsaWVudC5zZW5kUG9zdFJlcXVlc3RBc3luYy5iaW5kKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5ldHdvcmtDbGllbnRcbiAgICAgICAgICAgICAgICApPFQ+LFxuICAgICAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLk5ldHdvcmtDbGllbnRTZW5kUG9zdFJlcXVlc3RBc3luYyxcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlcixcbiAgICAgICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50LFxuICAgICAgICAgICAgICAgIGNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICkodG9rZW5FbmRwb2ludCwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZUhlYWRlcnMgPSByZXNwb25zZS5oZWFkZXJzIHx8IHt9O1xuICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudD8uYWRkRmllbGRzKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFRva2VuU2l6ZTogcmVzcG9uc2UuYm9keS5yZWZyZXNoX3Rva2VuPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgaHR0cFZlclRva2VuOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VIZWFkZXJzW0hlYWRlck5hbWVzLlhfTVNfSFRUUF9WRVJTSU9OXSB8fCBcIlwiLFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0SWQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUhlYWRlcnNbSGVhZGVyTmFtZXMuWF9NU19SRVFVRVNUX0lEXSB8fCBcIlwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBOZXR3b3JrRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZUhlYWRlcnMgPSBlLnJlc3BvbnNlSGVhZGVycztcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2VIZWFkZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQ/LmFkZEZpZWxkcyhcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodHRwVmVyVG9rZW46XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSGVhZGVyc1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlYWRlck5hbWVzLlhfTVNfSFRUUF9WRVJTSU9OXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0gfHwgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0SWQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSGVhZGVyc1tIZWFkZXJOYW1lcy5YX01TX1JFUVVFU1RfSURdIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGVIZWFkZXI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSGVhZGVyc1tIZWFkZXJOYW1lcy5DT05URU5UX1RZUEVdIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50TGVuZ3RoSGVhZGVyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUhlYWRlcnNbSGVhZGVyTmFtZXMuQ09OVEVOVF9MRU5HVEhdIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodHRwU3RhdHVzOiBlLmh0dHBTdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBlLmVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBBdXRoRXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMubmV0d29ya0Vycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIFRocm90dGxpbmdVdGlscy5wb3N0UHJvY2Vzcyh0aGlzLmNhY2hlTWFuYWdlciwgdGh1bWJwcmludCwgcmVzcG9uc2UpO1xuXG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBhdXRob3JpdHkgb2JqZWN0IG9mIHRoZSBjbGllbnQuIEVuZHBvaW50IGRpc2NvdmVyeSBtdXN0IGJlIGNvbXBsZXRlZC5cbiAgICAgKiBAcGFyYW0gdXBkYXRlZEF1dGhvcml0eVxuICAgICAqL1xuICAgIGFzeW5jIHVwZGF0ZUF1dGhvcml0eShcbiAgICAgICAgY2xvdWRJbnN0YW5jZUhvc3RuYW1lOiBzdHJpbmcsXG4gICAgICAgIGNvcnJlbGF0aW9uSWQ6IHN0cmluZ1xuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50Py5hZGRRdWV1ZU1lYXN1cmVtZW50KFxuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuVXBkYXRlVG9rZW5FbmRwb2ludEF1dGhvcml0eSxcbiAgICAgICAgICAgIGNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgY2xvdWRJbnN0YW5jZUF1dGhvcml0eVVyaSA9IGBodHRwczovLyR7Y2xvdWRJbnN0YW5jZUhvc3RuYW1lfS8ke3RoaXMuYXV0aG9yaXR5LnRlbmFudH0vYDtcbiAgICAgICAgY29uc3QgY2xvdWRJbnN0YW5jZUF1dGhvcml0eSA9IGF3YWl0IGNyZWF0ZURpc2NvdmVyZWRJbnN0YW5jZShcbiAgICAgICAgICAgIGNsb3VkSW5zdGFuY2VBdXRob3JpdHlVcmksXG4gICAgICAgICAgICB0aGlzLm5ldHdvcmtDbGllbnQsXG4gICAgICAgICAgICB0aGlzLmNhY2hlTWFuYWdlcixcbiAgICAgICAgICAgIHRoaXMuYXV0aG9yaXR5Lm9wdGlvbnMsXG4gICAgICAgICAgICB0aGlzLmxvZ2dlcixcbiAgICAgICAgICAgIGNvcnJlbGF0aW9uSWQsXG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50XG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuYXV0aG9yaXR5ID0gY2xvdWRJbnN0YW5jZUF1dGhvcml0eTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIHF1ZXJ5IHN0cmluZyBmb3IgdGhlIC90b2tlbiByZXF1ZXN0XG4gICAgICogQHBhcmFtIHJlcXVlc3RcbiAgICAgKi9cbiAgICBjcmVhdGVUb2tlblF1ZXJ5UGFyYW1ldGVycyhyZXF1ZXN0OiBCYXNlQXV0aFJlcXVlc3QpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBwYXJhbWV0ZXJzID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZz4oKTtcblxuICAgICAgICBpZiAocmVxdWVzdC5lbWJlZGRlZENsaWVudElkKSB7XG4gICAgICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRCcm9rZXJQYXJhbWV0ZXJzKFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aE9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aE9wdGlvbnMucmVkaXJlY3RVcmlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVxdWVzdC50b2tlblF1ZXJ5UGFyYW1ldGVycykge1xuICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkRXh0cmFRdWVyeVBhcmFtZXRlcnMoXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnRva2VuUXVlcnlQYXJhbWV0ZXJzXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ29ycmVsYXRpb25JZChcbiAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcblxuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5pbnN0cnVtZW50QnJva2VyUGFyYW1zKFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZCxcbiAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnRcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIFVybFV0aWxzLm1hcFRvUXVlcnlTdHJpbmcocGFyYW1ldGVycyk7XG4gICAgfVxufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG4vLyBDb2RlcyBkZWZpbmVkIGJ5IE1TQUxcbmV4cG9ydCBjb25zdCBub1Rva2Vuc0ZvdW5kID0gXCJub190b2tlbnNfZm91bmRcIjtcbmV4cG9ydCBjb25zdCBuYXRpdmVBY2NvdW50VW5hdmFpbGFibGUgPSBcIm5hdGl2ZV9hY2NvdW50X3VuYXZhaWxhYmxlXCI7XG5leHBvcnQgY29uc3QgcmVmcmVzaFRva2VuRXhwaXJlZCA9IFwicmVmcmVzaF90b2tlbl9leHBpcmVkXCI7XG5cbi8vIENvZGVzIHBvdGVudGlhbGx5IHJldHVybmVkIGJ5IHNlcnZlclxuZXhwb3J0IGNvbnN0IGludGVyYWN0aW9uUmVxdWlyZWQgPSBcImludGVyYWN0aW9uX3JlcXVpcmVkXCI7XG5leHBvcnQgY29uc3QgY29uc2VudFJlcXVpcmVkID0gXCJjb25zZW50X3JlcXVpcmVkXCI7XG5leHBvcnQgY29uc3QgbG9naW5SZXF1aXJlZCA9IFwibG9naW5fcmVxdWlyZWRcIjtcbmV4cG9ydCBjb25zdCBiYWRUb2tlbiA9IFwiYmFkX3Rva2VuXCI7XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENvbnN0YW50cyB9IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcbmltcG9ydCB7IEF1dGhFcnJvciB9IGZyb20gXCIuL0F1dGhFcnJvci5qc1wiO1xuaW1wb3J0ICogYXMgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvckNvZGVzIGZyb20gXCIuL0ludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3JDb2Rlcy5qc1wiO1xuZXhwb3J0IHsgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvckNvZGVzIH07XG5cbi8qKlxuICogSW50ZXJhY3Rpb25SZXF1aXJlZFNlcnZlckVycm9yTWVzc2FnZSBjb250YWlucyBzdHJpbmcgY29uc3RhbnRzIHVzZWQgYnkgZXJyb3IgY29kZXMgYW5kIG1lc3NhZ2VzIHJldHVybmVkIGJ5IHRoZSBzZXJ2ZXIgaW5kaWNhdGluZyBpbnRlcmFjdGlvbiBpcyByZXF1aXJlZFxuICovXG5leHBvcnQgY29uc3QgSW50ZXJhY3Rpb25SZXF1aXJlZFNlcnZlckVycm9yTWVzc2FnZSA9IFtcbiAgICBJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yQ29kZXMuaW50ZXJhY3Rpb25SZXF1aXJlZCxcbiAgICBJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yQ29kZXMuY29uc2VudFJlcXVpcmVkLFxuICAgIEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3JDb2Rlcy5sb2dpblJlcXVpcmVkLFxuICAgIEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3JDb2Rlcy5iYWRUb2tlbixcbl07XG5cbmV4cG9ydCBjb25zdCBJbnRlcmFjdGlvblJlcXVpcmVkQXV0aFN1YkVycm9yTWVzc2FnZSA9IFtcbiAgICBcIm1lc3NhZ2Vfb25seVwiLFxuICAgIFwiYWRkaXRpb25hbF9hY3Rpb25cIixcbiAgICBcImJhc2ljX2FjdGlvblwiLFxuICAgIFwidXNlcl9wYXNzd29yZF9leHBpcmVkXCIsXG4gICAgXCJjb25zZW50X3JlcXVpcmVkXCIsXG4gICAgXCJiYWRfdG9rZW5cIixcbl07XG5cbmNvbnN0IEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3JNZXNzYWdlcyA9IHtcbiAgICBbSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvckNvZGVzLm5vVG9rZW5zRm91bmRdOlxuICAgICAgICBcIk5vIHJlZnJlc2ggdG9rZW4gZm91bmQgaW4gdGhlIGNhY2hlLiBQbGVhc2Ugc2lnbi1pbi5cIixcbiAgICBbSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvckNvZGVzLm5hdGl2ZUFjY291bnRVbmF2YWlsYWJsZV06XG4gICAgICAgIFwiVGhlIHJlcXVlc3RlZCBhY2NvdW50IGlzIG5vdCBhdmFpbGFibGUgaW4gdGhlIG5hdGl2ZSBicm9rZXIuIEl0IG1heSBoYXZlIGJlZW4gZGVsZXRlZCBvciBsb2dnZWQgb3V0LiBQbGVhc2Ugc2lnbi1pbiBhZ2FpbiB1c2luZyBhbiBpbnRlcmFjdGl2ZSBBUEkuXCIsXG4gICAgW0ludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3JDb2Rlcy5yZWZyZXNoVG9rZW5FeHBpcmVkXTpcbiAgICAgICAgXCJSZWZyZXNoIHRva2VuIGhhcyBleHBpcmVkLlwiLFxuICAgIFtJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yQ29kZXMuYmFkVG9rZW5dOlxuICAgICAgICBcIklkZW50aXR5IHByb3ZpZGVyIHJldHVybmVkIGJhZF90b2tlbiBkdWUgdG8gYW4gZXhwaXJlZCBvciBpbnZhbGlkIHJlZnJlc2ggdG9rZW4uIFBsZWFzZSBpbnZva2UgYW4gaW50ZXJhY3RpdmUgQVBJIHRvIHJlc29sdmUuXCIsXG59O1xuXG4vKipcbiAqIEludGVyYWN0aW9uIHJlcXVpcmVkIGVycm9ycyBkZWZpbmVkIGJ5IHRoZSBTREtcbiAqIEBkZXByZWNhdGVkIFVzZSBJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yQ29kZXMgaW5zdGVhZFxuICovXG5leHBvcnQgY29uc3QgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvck1lc3NhZ2UgPSB7XG4gICAgbm9Ub2tlbnNGb3VuZEVycm9yOiB7XG4gICAgICAgIGNvZGU6IEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3JDb2Rlcy5ub1Rva2Vuc0ZvdW5kLFxuICAgICAgICBkZXNjOiBJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yTWVzc2FnZXNbXG4gICAgICAgICAgICBJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yQ29kZXMubm9Ub2tlbnNGb3VuZFxuICAgICAgICBdLFxuICAgIH0sXG4gICAgbmF0aXZlX2FjY291bnRfdW5hdmFpbGFibGU6IHtcbiAgICAgICAgY29kZTogSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvckNvZGVzLm5hdGl2ZUFjY291bnRVbmF2YWlsYWJsZSxcbiAgICAgICAgZGVzYzogSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvckNvZGVzLm5hdGl2ZUFjY291bnRVbmF2YWlsYWJsZVxuICAgICAgICBdLFxuICAgIH0sXG4gICAgYmFkX3Rva2VuOiB7XG4gICAgICAgIGNvZGU6IEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3JDb2Rlcy5iYWRUb2tlbixcbiAgICAgICAgZGVzYzogSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvck1lc3NhZ2VzW1xuICAgICAgICAgICAgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvckNvZGVzLmJhZFRva2VuXG4gICAgICAgIF0sXG4gICAgfSxcbn07XG5cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gdXNlciBpbnRlcmFjdGlvbiBpcyByZXF1aXJlZC5cbiAqL1xuZXhwb3J0IGNsYXNzIEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3IgZXh0ZW5kcyBBdXRoRXJyb3Ige1xuICAgIC8qKlxuICAgICAqIFRoZSB0aW1lIHRoZSBlcnJvciBvY2N1cmVkIGF0XG4gICAgICovXG4gICAgdGltZXN0YW1wOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUcmFjZUlkIGFzc29jaWF0ZWQgd2l0aCB0aGUgZXJyb3JcbiAgICAgKi9cbiAgICB0cmFjZUlkOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vQXp1cmVBRC9taWNyb3NvZnQtYXV0aGVudGljYXRpb24tbGlicmFyeS1mb3ItanMvYmxvYi9kZXYvbGliL21zYWwtY29tbW9uL2RvY3MvY2xhaW1zLWNoYWxsZW5nZS5tZFxuICAgICAqXG4gICAgICogQSBzdHJpbmcgd2l0aCBleHRyYSBjbGFpbXMgbmVlZGVkIGZvciB0aGUgdG9rZW4gcmVxdWVzdCB0byBzdWNjZWVkXG4gICAgICogd2ViIHNpdGU6IHJlZGlyZWN0IHRoZSB1c2VyIHRvIHRoZSBhdXRob3JpemF0aW9uIHBhZ2UgYW5kIHNldCB0aGUgZXh0cmEgY2xhaW1zXG4gICAgICogd2ViIGFwaTogaW5jbHVkZSB0aGUgY2xhaW1zIGluIHRoZSBXV1ctQXV0aGVudGljYXRlIGhlYWRlciB0aGF0IGFyZSBzZW50IGJhY2sgdG8gdGhlIGNsaWVudCBzbyB0aGF0IGl0IGtub3dzIHRvIHJlcXVlc3QgYSB0b2tlbiB3aXRoIHRoZSBleHRyYSBjbGFpbXNcbiAgICAgKiBkZXNrdG9wIGFwcGxpY2F0aW9uIG9yIGJyb3dzZXIgY29udGV4dDogaW5jbHVkZSB0aGUgY2xhaW1zIHdoZW4gYWNxdWlyaW5nIHRoZSB0b2tlbiBpbnRlcmFjdGl2ZWx5XG4gICAgICogYXBwIHRvIGFwcCBjb250ZXh0IChjbGllbnRfY3JlZGVudGlhbHMpOiBpbmNsdWRlIHRoZSBjbGFpbXMgaW4gdGhlIEFjcXVpcmVUb2tlbkJ5Q2xpZW50Q3JlZGVudGlhbCByZXF1ZXN0XG4gICAgICovXG4gICAgY2xhaW1zOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBTZXJ2ZXIgZXJyb3IgbnVtYmVyO1xuICAgICAqL1xuICAgIHJlYWRvbmx5IGVycm9yTm8/OiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgZXJyb3JDb2RlPzogc3RyaW5nLFxuICAgICAgICBlcnJvck1lc3NhZ2U/OiBzdHJpbmcsXG4gICAgICAgIHN1YkVycm9yPzogc3RyaW5nLFxuICAgICAgICB0aW1lc3RhbXA/OiBzdHJpbmcsXG4gICAgICAgIHRyYWNlSWQ/OiBzdHJpbmcsXG4gICAgICAgIGNvcnJlbGF0aW9uSWQ/OiBzdHJpbmcsXG4gICAgICAgIGNsYWltcz86IHN0cmluZyxcbiAgICAgICAgZXJyb3JObz86IHN0cmluZ1xuICAgICkge1xuICAgICAgICBzdXBlcihlcnJvckNvZGUsIGVycm9yTWVzc2FnZSwgc3ViRXJyb3IpO1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvci5wcm90b3R5cGUpO1xuXG4gICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wIHx8IENvbnN0YW50cy5FTVBUWV9TVFJJTkc7XG4gICAgICAgIHRoaXMudHJhY2VJZCA9IHRyYWNlSWQgfHwgQ29uc3RhbnRzLkVNUFRZX1NUUklORztcbiAgICAgICAgdGhpcy5jb3JyZWxhdGlvbklkID0gY29ycmVsYXRpb25JZCB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HO1xuICAgICAgICB0aGlzLmNsYWltcyA9IGNsYWltcyB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIkludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3JcIjtcbiAgICAgICAgdGhpcy5lcnJvck5vID0gZXJyb3JObztcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHVzZWQgdG8gZGV0ZXJtaW5lIGlmIGFuIGVycm9yIHRocm93biBieSB0aGUgc2VydmVyIHJlcXVpcmVzIGludGVyYWN0aW9uIHRvIHJlc29sdmVcbiAqIEBwYXJhbSBlcnJvckNvZGVcbiAqIEBwYXJhbSBlcnJvclN0cmluZ1xuICogQHBhcmFtIHN1YkVycm9yXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0ludGVyYWN0aW9uUmVxdWlyZWRFcnJvcihcbiAgICBlcnJvckNvZGU/OiBzdHJpbmcsXG4gICAgZXJyb3JTdHJpbmc/OiBzdHJpbmcsXG4gICAgc3ViRXJyb3I/OiBzdHJpbmdcbik6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGlzSW50ZXJhY3Rpb25SZXF1aXJlZEVycm9yQ29kZSA9XG4gICAgICAgICEhZXJyb3JDb2RlICYmXG4gICAgICAgIEludGVyYWN0aW9uUmVxdWlyZWRTZXJ2ZXJFcnJvck1lc3NhZ2UuaW5kZXhPZihlcnJvckNvZGUpID4gLTE7XG4gICAgY29uc3QgaXNJbnRlcmFjdGlvblJlcXVpcmVkU3ViRXJyb3IgPVxuICAgICAgICAhIXN1YkVycm9yICYmXG4gICAgICAgIEludGVyYWN0aW9uUmVxdWlyZWRBdXRoU3ViRXJyb3JNZXNzYWdlLmluZGV4T2Yoc3ViRXJyb3IpID4gLTE7XG4gICAgY29uc3QgaXNJbnRlcmFjdGlvblJlcXVpcmVkRXJyb3JEZXNjID1cbiAgICAgICAgISFlcnJvclN0cmluZyAmJlxuICAgICAgICBJbnRlcmFjdGlvblJlcXVpcmVkU2VydmVyRXJyb3JNZXNzYWdlLnNvbWUoKGlyRXJyb3JDb2RlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZXJyb3JTdHJpbmcuaW5kZXhPZihpckVycm9yQ29kZSkgPiAtMTtcbiAgICAgICAgfSk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgICBpc0ludGVyYWN0aW9uUmVxdWlyZWRFcnJvckNvZGUgfHxcbiAgICAgICAgaXNJbnRlcmFjdGlvblJlcXVpcmVkRXJyb3JEZXNjIHx8XG4gICAgICAgIGlzSW50ZXJhY3Rpb25SZXF1aXJlZFN1YkVycm9yXG4gICAgKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3IoXG4gICAgZXJyb3JDb2RlOiBzdHJpbmdcbik6IEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3Ige1xuICAgIHJldHVybiBuZXcgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvcihcbiAgICAgICAgZXJyb3JDb2RlLFxuICAgICAgICBJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yTWVzc2FnZXNbZXJyb3JDb2RlXVxuICAgICk7XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENvbnN0YW50cyB9IGZyb20gXCIuL0NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgSUNyeXB0byB9IGZyb20gXCIuLi9jcnlwdG8vSUNyeXB0by5qc1wiO1xuaW1wb3J0IHtcbiAgICBDbGllbnRBdXRoRXJyb3JDb2RlcyxcbiAgICBjcmVhdGVDbGllbnRBdXRoRXJyb3IsXG59IGZyb20gXCIuLi9lcnJvci9DbGllbnRBdXRoRXJyb3IuanNcIjtcblxuLyoqXG4gKiBUeXBlIHdoaWNoIGRlZmluZXMgdGhlIG9iamVjdCB0aGF0IGlzIHN0cmluZ2lmaWVkLCBlbmNvZGVkIGFuZCBzZW50IGluIHRoZSBzdGF0ZSB2YWx1ZS5cbiAqIENvbnRhaW5zIHRoZSBmb2xsb3dpbmc6XG4gKiAtIGlkIC0gdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoaXMgcmVxdWVzdFxuICogLSB0cyAtIHRpbWVzdGFtcCBmb3IgdGhlIHRpbWUgdGhlIHJlcXVlc3Qgd2FzIG1hZGUuIFVzZWQgdG8gZW5zdXJlIHRoYXQgdG9rZW4gZXhwaXJhdGlvbiBpcyBub3QgY2FsY3VsYXRlZCBpbmNvcnJlY3RseS5cbiAqIC0gcGxhdGZvcm1TdGF0ZSAtIHN0cmluZyB2YWx1ZSBzZW50IGZyb20gdGhlIHBsYXRmb3JtLlxuICovXG5leHBvcnQgdHlwZSBMaWJyYXJ5U3RhdGVPYmplY3QgPSB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBtZXRhPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbn07XG5cbi8qKlxuICogVHlwZSB3aGljaCBkZWZpbmVzIHRoZSBzdHJpbmdpZmllZCBhbmQgZW5jb2RlZCBvYmplY3Qgc2VudCB0byB0aGUgc2VydmljZSBpbiB0aGUgYXV0aG9yaXplIHJlcXVlc3QuXG4gKi9cbmV4cG9ydCB0eXBlIFJlcXVlc3RTdGF0ZU9iamVjdCA9IHtcbiAgICB1c2VyUmVxdWVzdFN0YXRlOiBzdHJpbmc7XG4gICAgbGlicmFyeVN0YXRlOiBMaWJyYXJ5U3RhdGVPYmplY3Q7XG59O1xuXG4vKipcbiAqIENsYXNzIHdoaWNoIHByb3ZpZGVzIGhlbHBlcnMgZm9yIE9BdXRoIDIuMCBwcm90b2NvbCBzcGVjaWZpYyB2YWx1ZXNcbiAqL1xuZXhwb3J0IGNsYXNzIFByb3RvY29sVXRpbHMge1xuICAgIC8qKlxuICAgICAqIEFwcGVuZHMgdXNlciBzdGF0ZSB3aXRoIHJhbmRvbSBndWlkLCBvciByZXR1cm5zIHJhbmRvbSBndWlkLlxuICAgICAqIEBwYXJhbSB1c2VyU3RhdGVcbiAgICAgKiBAcGFyYW0gcmFuZG9tR3VpZFxuICAgICAqL1xuICAgIHN0YXRpYyBzZXRSZXF1ZXN0U3RhdGUoXG4gICAgICAgIGNyeXB0b09iajogSUNyeXB0byxcbiAgICAgICAgdXNlclN0YXRlPzogc3RyaW5nLFxuICAgICAgICBtZXRhPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPlxuICAgICk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGxpYnJhcnlTdGF0ZSA9IFByb3RvY29sVXRpbHMuZ2VuZXJhdGVMaWJyYXJ5U3RhdGUoXG4gICAgICAgICAgICBjcnlwdG9PYmosXG4gICAgICAgICAgICBtZXRhXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiB1c2VyU3RhdGVcbiAgICAgICAgICAgID8gYCR7bGlicmFyeVN0YXRlfSR7Q29uc3RhbnRzLlJFU09VUkNFX0RFTElNfSR7dXNlclN0YXRlfWBcbiAgICAgICAgICAgIDogbGlicmFyeVN0YXRlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyB0aGUgc3RhdGUgdmFsdWUgdXNlZCBieSB0aGUgY29tbW9uIGxpYnJhcnkuXG4gICAgICogQHBhcmFtIHJhbmRvbUd1aWRcbiAgICAgKiBAcGFyYW0gY3J5cHRvT2JqXG4gICAgICovXG4gICAgc3RhdGljIGdlbmVyYXRlTGlicmFyeVN0YXRlKFxuICAgICAgICBjcnlwdG9PYmo6IElDcnlwdG8sXG4gICAgICAgIG1ldGE/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+XG4gICAgKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKCFjcnlwdG9PYmopIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JDb2Rlcy5ub0NyeXB0b09iamVjdCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGUgYSBzdGF0ZSBvYmplY3QgY29udGFpbmluZyBhIHVuaXF1ZSBpZCBhbmQgdGhlIHRpbWVzdGFtcCBvZiB0aGUgcmVxdWVzdCBjcmVhdGlvblxuICAgICAgICBjb25zdCBzdGF0ZU9iajogTGlicmFyeVN0YXRlT2JqZWN0ID0ge1xuICAgICAgICAgICAgaWQ6IGNyeXB0b09iai5jcmVhdGVOZXdHdWlkKCksXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKG1ldGEpIHtcbiAgICAgICAgICAgIHN0YXRlT2JqLm1ldGEgPSBtZXRhO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhdGVTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShzdGF0ZU9iaik7XG5cbiAgICAgICAgcmV0dXJuIGNyeXB0b09iai5iYXNlNjRFbmNvZGUoc3RhdGVTdHJpbmcpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhcnNlcyB0aGUgc3RhdGUgaW50byB0aGUgUmVxdWVzdFN0YXRlT2JqZWN0LCB3aGljaCBjb250YWlucyB0aGUgTGlicmFyeVN0YXRlIGluZm8gYW5kIHRoZSBzdGF0ZSBwYXNzZWQgYnkgdGhlIHVzZXIuXG4gICAgICogQHBhcmFtIHN0YXRlXG4gICAgICogQHBhcmFtIGNyeXB0b09ialxuICAgICAqL1xuICAgIHN0YXRpYyBwYXJzZVJlcXVlc3RTdGF0ZShcbiAgICAgICAgY3J5cHRvT2JqOiBJQ3J5cHRvLFxuICAgICAgICBzdGF0ZTogc3RyaW5nXG4gICAgKTogUmVxdWVzdFN0YXRlT2JqZWN0IHtcbiAgICAgICAgaWYgKCFjcnlwdG9PYmopIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JDb2Rlcy5ub0NyeXB0b09iamVjdCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXN0YXRlKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZFN0YXRlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBTcGxpdCB0aGUgc3RhdGUgYmV0d2VlbiBsaWJyYXJ5IHN0YXRlIGFuZCB1c2VyIHBhc3NlZCBzdGF0ZSBhbmQgZGVjb2RlIHRoZW0gc2VwYXJhdGVseVxuICAgICAgICAgICAgY29uc3Qgc3BsaXRTdGF0ZSA9IHN0YXRlLnNwbGl0KENvbnN0YW50cy5SRVNPVVJDRV9ERUxJTSk7XG4gICAgICAgICAgICBjb25zdCBsaWJyYXJ5U3RhdGUgPSBzcGxpdFN0YXRlWzBdO1xuICAgICAgICAgICAgY29uc3QgdXNlclN0YXRlID1cbiAgICAgICAgICAgICAgICBzcGxpdFN0YXRlLmxlbmd0aCA+IDFcbiAgICAgICAgICAgICAgICAgICAgPyBzcGxpdFN0YXRlLnNsaWNlKDEpLmpvaW4oQ29uc3RhbnRzLlJFU09VUkNFX0RFTElNKVxuICAgICAgICAgICAgICAgICAgICA6IENvbnN0YW50cy5FTVBUWV9TVFJJTkc7XG4gICAgICAgICAgICBjb25zdCBsaWJyYXJ5U3RhdGVTdHJpbmcgPSBjcnlwdG9PYmouYmFzZTY0RGVjb2RlKGxpYnJhcnlTdGF0ZSk7XG4gICAgICAgICAgICBjb25zdCBsaWJyYXJ5U3RhdGVPYmogPSBKU09OLnBhcnNlKFxuICAgICAgICAgICAgICAgIGxpYnJhcnlTdGF0ZVN0cmluZ1xuICAgICAgICAgICAgKSBhcyBMaWJyYXJ5U3RhdGVPYmplY3Q7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVzZXJSZXF1ZXN0U3RhdGU6IHVzZXJTdGF0ZSB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HLFxuICAgICAgICAgICAgICAgIGxpYnJhcnlTdGF0ZTogbGlicmFyeVN0YXRlT2JqLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvckNvZGVzLmludmFsaWRTdGF0ZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IElDcnlwdG8sIFNpZ25lZEh0dHBSZXF1ZXN0UGFyYW1ldGVycyB9IGZyb20gXCIuL0lDcnlwdG8uanNcIjtcbmltcG9ydCAqIGFzIFRpbWVVdGlscyBmcm9tIFwiLi4vdXRpbHMvVGltZVV0aWxzLmpzXCI7XG5pbXBvcnQgeyBVcmxTdHJpbmcgfSBmcm9tIFwiLi4vdXJsL1VybFN0cmluZy5qc1wiO1xuaW1wb3J0IHsgSVBlcmZvcm1hbmNlQ2xpZW50IH0gZnJvbSBcIi4uL3RlbGVtZXRyeS9wZXJmb3JtYW5jZS9JUGVyZm9ybWFuY2VDbGllbnQuanNcIjtcbmltcG9ydCB7IFBlcmZvcm1hbmNlRXZlbnRzIH0gZnJvbSBcIi4uL3RlbGVtZXRyeS9wZXJmb3JtYW5jZS9QZXJmb3JtYW5jZUV2ZW50LmpzXCI7XG5pbXBvcnQgeyBpbnZva2VBc3luYyB9IGZyb20gXCIuLi91dGlscy9GdW5jdGlvbldyYXBwZXJzLmpzXCI7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiLi4vbG9nZ2VyL0xvZ2dlci5qc1wiO1xuXG4vKipcbiAqIFNlZSBlU1RTIGRvY3MgZm9yIG1vcmUgaW5mby5cbiAqIC0gQSBraWQgZWxlbWVudCwgd2l0aCB0aGUgdmFsdWUgY29udGFpbmluZyBhbiBSRkMgNzYzOC1jb21wbGlhbnQgSldLIHRodW1icHJpbnQgdGhhdCBpcyBiYXNlNjQgZW5jb2RlZC5cbiAqIC0gIHhtc19rc2wgZWxlbWVudCwgcmVwcmVzZW50aW5nIHRoZSBzdG9yYWdlIGxvY2F0aW9uIG9mIHRoZSBrZXkncyBzZWNyZXQgY29tcG9uZW50IG9uIHRoZSBjbGllbnQgZGV2aWNlLiBPbmUgb2YgdHdvIHZhbHVlczpcbiAqICAgICAgLSBzdzogc29mdHdhcmUgc3RvcmFnZVxuICogICAgICAtIHVodzogaGFyZHdhcmUgc3RvcmFnZVxuICovXG50eXBlIFJlcUNuZiA9IHtcbiAgICBraWQ6IHN0cmluZztcbiAgICB4bXNfa3NsOiBLZXlMb2NhdGlvbjtcbn07XG5cbmV4cG9ydCB0eXBlIFJlcUNuZkRhdGEgPSB7XG4gICAga2lkOiBzdHJpbmc7XG4gICAgcmVxQ25mU3RyaW5nOiBzdHJpbmc7XG59O1xuXG5jb25zdCBLZXlMb2NhdGlvbiA9IHtcbiAgICBTVzogXCJzd1wiLFxuICAgIFVIVzogXCJ1aHdcIixcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBLZXlMb2NhdGlvbiA9ICh0eXBlb2YgS2V5TG9jYXRpb24pW2tleW9mIHR5cGVvZiBLZXlMb2NhdGlvbl07XG5cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBjbGFzcyBQb3BUb2tlbkdlbmVyYXRvciB7XG4gICAgcHJpdmF0ZSBjcnlwdG9VdGlsczogSUNyeXB0bztcbiAgICBwcml2YXRlIHBlcmZvcm1hbmNlQ2xpZW50PzogSVBlcmZvcm1hbmNlQ2xpZW50O1xuXG4gICAgY29uc3RydWN0b3IoY3J5cHRvVXRpbHM6IElDcnlwdG8sIHBlcmZvcm1hbmNlQ2xpZW50PzogSVBlcmZvcm1hbmNlQ2xpZW50KSB7XG4gICAgICAgIHRoaXMuY3J5cHRvVXRpbHMgPSBjcnlwdG9VdGlscztcbiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudCA9IHBlcmZvcm1hbmNlQ2xpZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyB0aGUgcmVxX2NuZiB2YWxpZGF0ZWQgYXQgdGhlIFJQIGluIHRoZSBQT1AgcHJvdG9jb2wgZm9yIFNIUiBwYXJhbWV0ZXJzXG4gICAgICogYW5kIHJldHVybnMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGtleWlkLCB0aGUgZnVsbCByZXFfY25mIHN0cmluZyBhbmQgdGhlIHJlcV9jbmYgc3RyaW5nIGhhc2hcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFxuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgYXN5bmMgZ2VuZXJhdGVDbmYoXG4gICAgICAgIHJlcXVlc3Q6IFNpZ25lZEh0dHBSZXF1ZXN0UGFyYW1ldGVycyxcbiAgICAgICAgbG9nZ2VyOiBMb2dnZXJcbiAgICApOiBQcm9taXNlPFJlcUNuZkRhdGE+IHtcbiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudD8uYWRkUXVldWVNZWFzdXJlbWVudChcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLlBvcFRva2VuR2VuZXJhdGVDbmYsXG4gICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCByZXFDbmYgPSBhd2FpdCBpbnZva2VBc3luYyhcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVLaWQuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLlBvcFRva2VuR2VuZXJhdGVDbmYsXG4gICAgICAgICAgICBsb2dnZXIsXG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50LFxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICkocmVxdWVzdCk7XG4gICAgICAgIGNvbnN0IHJlcUNuZlN0cmluZzogc3RyaW5nID0gdGhpcy5jcnlwdG9VdGlscy5iYXNlNjRVcmxFbmNvZGUoXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShyZXFDbmYpXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtpZDogcmVxQ25mLmtpZCxcbiAgICAgICAgICAgIHJlcUNuZlN0cmluZyxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMga2V5X2lkIGZvciBhIFNIUiB0b2tlbiByZXF1ZXN0XG4gICAgICogQHBhcmFtIHJlcXVlc3RcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIGFzeW5jIGdlbmVyYXRlS2lkKHJlcXVlc3Q6IFNpZ25lZEh0dHBSZXF1ZXN0UGFyYW1ldGVycyk6IFByb21pc2U8UmVxQ25mPiB7XG4gICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQ/LmFkZFF1ZXVlTWVhc3VyZW1lbnQoXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5Qb3BUb2tlbkdlbmVyYXRlS2lkLFxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3Qga2lkVGh1bWJwcmludCA9IGF3YWl0IHRoaXMuY3J5cHRvVXRpbHMuZ2V0UHVibGljS2V5VGh1bWJwcmludChcbiAgICAgICAgICAgIHJlcXVlc3RcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2lkOiBraWRUaHVtYnByaW50LFxuICAgICAgICAgICAgeG1zX2tzbDogS2V5TG9jYXRpb24uU1csXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2lnbnMgdGhlIFBPUCBhY2Nlc3NfdG9rZW4gd2l0aCB0aGUgbG9jYWwgZ2VuZXJhdGVkIGtleS1wYWlyXG4gICAgICogQHBhcmFtIGFjY2Vzc1Rva2VuXG4gICAgICogQHBhcmFtIHJlcXVlc3RcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIGFzeW5jIHNpZ25Qb3BUb2tlbihcbiAgICAgICAgYWNjZXNzVG9rZW46IHN0cmluZyxcbiAgICAgICAga2V5SWQ6IHN0cmluZyxcbiAgICAgICAgcmVxdWVzdDogU2lnbmVkSHR0cFJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2lnblBheWxvYWQoYWNjZXNzVG9rZW4sIGtleUlkLCByZXF1ZXN0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVdGlsaXR5IGZ1bmN0aW9uIHRvIGdlbmVyYXRlIHRoZSBzaWduZWQgSldUIGZvciBhbiBhY2Nlc3NfdG9rZW5cbiAgICAgKiBAcGFyYW0gcGF5bG9hZFxuICAgICAqIEBwYXJhbSBraWRcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFxuICAgICAqIEBwYXJhbSBjbGFpbXNcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIGFzeW5jIHNpZ25QYXlsb2FkKFxuICAgICAgICBwYXlsb2FkOiBzdHJpbmcsXG4gICAgICAgIGtleUlkOiBzdHJpbmcsXG4gICAgICAgIHJlcXVlc3Q6IFNpZ25lZEh0dHBSZXF1ZXN0UGFyYW1ldGVycyxcbiAgICAgICAgY2xhaW1zPzogb2JqZWN0XG4gICAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgLy8gRGVjb25zdHJ1Y3QgcmVxdWVzdCB0byBleHRyYWN0IFNIUiBwYXJhbWV0ZXJzXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIHJlc291cmNlUmVxdWVzdE1ldGhvZCxcbiAgICAgICAgICAgIHJlc291cmNlUmVxdWVzdFVyaSxcbiAgICAgICAgICAgIHNockNsYWltcyxcbiAgICAgICAgICAgIHNock5vbmNlLFxuICAgICAgICAgICAgc2hyT3B0aW9ucyxcbiAgICAgICAgfSA9IHJlcXVlc3Q7XG5cbiAgICAgICAgY29uc3QgcmVzb3VyY2VVcmxTdHJpbmcgPSByZXNvdXJjZVJlcXVlc3RVcmlcbiAgICAgICAgICAgID8gbmV3IFVybFN0cmluZyhyZXNvdXJjZVJlcXVlc3RVcmkpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgcmVzb3VyY2VVcmxDb21wb25lbnRzID0gcmVzb3VyY2VVcmxTdHJpbmc/LmdldFVybENvbXBvbmVudHMoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3J5cHRvVXRpbHMuc2lnbkp3dChcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhdDogcGF5bG9hZCxcbiAgICAgICAgICAgICAgICB0czogVGltZVV0aWxzLm5vd1NlY29uZHMoKSxcbiAgICAgICAgICAgICAgICBtOiByZXNvdXJjZVJlcXVlc3RNZXRob2Q/LnRvVXBwZXJDYXNlKCksXG4gICAgICAgICAgICAgICAgdTogcmVzb3VyY2VVcmxDb21wb25lbnRzPy5Ib3N0TmFtZUFuZFBvcnQsXG4gICAgICAgICAgICAgICAgbm9uY2U6IHNock5vbmNlIHx8IHRoaXMuY3J5cHRvVXRpbHMuY3JlYXRlTmV3R3VpZCgpLFxuICAgICAgICAgICAgICAgIHA6IHJlc291cmNlVXJsQ29tcG9uZW50cz8uQWJzb2x1dGVQYXRoLFxuICAgICAgICAgICAgICAgIHE6IHJlc291cmNlVXJsQ29tcG9uZW50cz8uUXVlcnlTdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgPyBbW10sIHJlc291cmNlVXJsQ29tcG9uZW50cy5RdWVyeVN0cmluZ11cbiAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgY2xpZW50X2NsYWltczogc2hyQ2xhaW1zIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAuLi5jbGFpbXMsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAga2V5SWQsXG4gICAgICAgICAgICBzaHJPcHRpb25zLFxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICk7XG4gICAgfVxufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBJU2VyaWFsaXphYmxlVG9rZW5DYWNoZSB9IGZyb20gXCIuLi9pbnRlcmZhY2UvSVNlcmlhbGl6YWJsZVRva2VuQ2FjaGUuanNcIjtcblxuLyoqXG4gKiBUaGlzIGNsYXNzIGluc3RhbmNlIGhlbHBzIHRyYWNrIHRoZSBtZW1vcnkgY2hhbmdlcyBmYWNpbGl0YXRpbmdcbiAqIGRlY2lzaW9ucyB0byByZWFkIGZyb20gYW5kIHdyaXRlIHRvIHRoZSBwZXJzaXN0ZW50IGNhY2hlXG4gKi8gZXhwb3J0IGNsYXNzIFRva2VuQ2FjaGVDb250ZXh0IHtcbiAgICAvKipcbiAgICAgKiBib29sZWFuIGluZGljYXRpbmcgY2FjaGUgY2hhbmdlXG4gICAgICovXG4gICAgaGFzQ2hhbmdlZDogYm9vbGVhbjtcbiAgICAvKipcbiAgICAgKiBzZXJpYWxpemFibGUgdG9rZW4gY2FjaGUgaW50ZXJmYWNlXG4gICAgICovXG4gICAgY2FjaGU6IElTZXJpYWxpemFibGVUb2tlbkNhY2hlO1xuXG4gICAgY29uc3RydWN0b3IodG9rZW5DYWNoZTogSVNlcmlhbGl6YWJsZVRva2VuQ2FjaGUsIGhhc0NoYW5nZWQ6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5jYWNoZSA9IHRva2VuQ2FjaGU7XG4gICAgICAgIHRoaXMuaGFzQ2hhbmdlZCA9IGhhc0NoYW5nZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogYm9vbGVhbiB3aGljaCBpbmRpY2F0ZXMgdGhlIGNoYW5nZXMgaW4gY2FjaGVcbiAgICAgKi9cbiAgICBnZXQgY2FjaGVIYXNDaGFuZ2VkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXNDaGFuZ2VkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGZ1bmN0aW9uIHRvIHJldHJpZXZlIHRoZSB0b2tlbiBjYWNoZVxuICAgICAqL1xuICAgIGdldCB0b2tlbkNhY2hlKCk6IElTZXJpYWxpemFibGVUb2tlbkNhY2hlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGU7XG4gICAgfVxufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBTZXJ2ZXJBdXRob3JpemF0aW9uVG9rZW5SZXNwb25zZSB9IGZyb20gXCIuL1NlcnZlckF1dGhvcml6YXRpb25Ub2tlblJlc3BvbnNlLmpzXCI7XG5pbXBvcnQgeyBJQ3J5cHRvIH0gZnJvbSBcIi4uL2NyeXB0by9JQ3J5cHRvLmpzXCI7XG5pbXBvcnQge1xuICAgIENsaWVudEF1dGhFcnJvckNvZGVzLFxuICAgIGNyZWF0ZUNsaWVudEF1dGhFcnJvcixcbn0gZnJvbSBcIi4uL2Vycm9yL0NsaWVudEF1dGhFcnJvci5qc1wiO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4uL2xvZ2dlci9Mb2dnZXIuanNcIjtcbmltcG9ydCB7IFNlcnZlckVycm9yIH0gZnJvbSBcIi4uL2Vycm9yL1NlcnZlckVycm9yLmpzXCI7XG5pbXBvcnQgeyBTY29wZVNldCB9IGZyb20gXCIuLi9yZXF1ZXN0L1Njb3BlU2V0LmpzXCI7XG5pbXBvcnQgeyBBdXRoZW50aWNhdGlvblJlc3VsdCB9IGZyb20gXCIuL0F1dGhlbnRpY2F0aW9uUmVzdWx0LmpzXCI7XG5pbXBvcnQgeyBBY2NvdW50RW50aXR5IH0gZnJvbSBcIi4uL2NhY2hlL2VudGl0aWVzL0FjY291bnRFbnRpdHkuanNcIjtcbmltcG9ydCB7IEF1dGhvcml0eSB9IGZyb20gXCIuLi9hdXRob3JpdHkvQXV0aG9yaXR5LmpzXCI7XG5pbXBvcnQgeyBJZFRva2VuRW50aXR5IH0gZnJvbSBcIi4uL2NhY2hlL2VudGl0aWVzL0lkVG9rZW5FbnRpdHkuanNcIjtcbmltcG9ydCB7IEFjY2Vzc1Rva2VuRW50aXR5IH0gZnJvbSBcIi4uL2NhY2hlL2VudGl0aWVzL0FjY2Vzc1Rva2VuRW50aXR5LmpzXCI7XG5pbXBvcnQgeyBSZWZyZXNoVG9rZW5FbnRpdHkgfSBmcm9tIFwiLi4vY2FjaGUvZW50aXRpZXMvUmVmcmVzaFRva2VuRW50aXR5LmpzXCI7XG5pbXBvcnQge1xuICAgIEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3IsXG4gICAgaXNJbnRlcmFjdGlvblJlcXVpcmVkRXJyb3IsXG59IGZyb20gXCIuLi9lcnJvci9JbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yLmpzXCI7XG5pbXBvcnQgeyBDYWNoZVJlY29yZCB9IGZyb20gXCIuLi9jYWNoZS9lbnRpdGllcy9DYWNoZVJlY29yZC5qc1wiO1xuaW1wb3J0IHsgQ2FjaGVNYW5hZ2VyIH0gZnJvbSBcIi4uL2NhY2hlL0NhY2hlTWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgUHJvdG9jb2xVdGlscywgUmVxdWVzdFN0YXRlT2JqZWN0IH0gZnJvbSBcIi4uL3V0aWxzL1Byb3RvY29sVXRpbHMuanNcIjtcbmltcG9ydCB7XG4gICAgQXV0aGVudGljYXRpb25TY2hlbWUsXG4gICAgQ29uc3RhbnRzLFxuICAgIFRIRV9GQU1JTFlfSUQsXG4gICAgSHR0cFN0YXR1cyxcbn0gZnJvbSBcIi4uL3V0aWxzL0NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgUG9wVG9rZW5HZW5lcmF0b3IgfSBmcm9tIFwiLi4vY3J5cHRvL1BvcFRva2VuR2VuZXJhdG9yLmpzXCI7XG5pbXBvcnQgeyBBcHBNZXRhZGF0YUVudGl0eSB9IGZyb20gXCIuLi9jYWNoZS9lbnRpdGllcy9BcHBNZXRhZGF0YUVudGl0eS5qc1wiO1xuaW1wb3J0IHsgSUNhY2hlUGx1Z2luIH0gZnJvbSBcIi4uL2NhY2hlL2ludGVyZmFjZS9JQ2FjaGVQbHVnaW4uanNcIjtcbmltcG9ydCB7IFRva2VuQ2FjaGVDb250ZXh0IH0gZnJvbSBcIi4uL2NhY2hlL3BlcnNpc3RlbmNlL1Rva2VuQ2FjaGVDb250ZXh0LmpzXCI7XG5pbXBvcnQgeyBJU2VyaWFsaXphYmxlVG9rZW5DYWNoZSB9IGZyb20gXCIuLi9jYWNoZS9pbnRlcmZhY2UvSVNlcmlhbGl6YWJsZVRva2VuQ2FjaGUuanNcIjtcbmltcG9ydCB7IEF1dGhvcml6YXRpb25Db2RlUGF5bG9hZCB9IGZyb20gXCIuL0F1dGhvcml6YXRpb25Db2RlUGF5bG9hZC5qc1wiO1xuaW1wb3J0IHsgQmFzZUF1dGhSZXF1ZXN0IH0gZnJvbSBcIi4uL3JlcXVlc3QvQmFzZUF1dGhSZXF1ZXN0LmpzXCI7XG5pbXBvcnQgeyBJUGVyZm9ybWFuY2VDbGllbnQgfSBmcm9tIFwiLi4vdGVsZW1ldHJ5L3BlcmZvcm1hbmNlL0lQZXJmb3JtYW5jZUNsaWVudC5qc1wiO1xuaW1wb3J0IHsgUGVyZm9ybWFuY2VFdmVudHMgfSBmcm9tIFwiLi4vdGVsZW1ldHJ5L3BlcmZvcm1hbmNlL1BlcmZvcm1hbmNlRXZlbnQuanNcIjtcbmltcG9ydCB7IGNoZWNrTWF4QWdlLCBleHRyYWN0VG9rZW5DbGFpbXMgfSBmcm9tIFwiLi4vYWNjb3VudC9BdXRoVG9rZW4uanNcIjtcbmltcG9ydCB7XG4gICAgVG9rZW5DbGFpbXMsXG4gICAgZ2V0VGVuYW50SWRGcm9tSWRUb2tlbkNsYWltcyxcbn0gZnJvbSBcIi4uL2FjY291bnQvVG9rZW5DbGFpbXMuanNcIjtcbmltcG9ydCB7XG4gICAgQWNjb3VudEluZm8sXG4gICAgYnVpbGRUZW5hbnRQcm9maWxlLFxuICAgIHVwZGF0ZUFjY291bnRUZW5hbnRQcm9maWxlRGF0YSxcbn0gZnJvbSBcIi4uL2FjY291bnQvQWNjb3VudEluZm8uanNcIjtcbmltcG9ydCAqIGFzIENhY2hlSGVscGVycyBmcm9tIFwiLi4vY2FjaGUvdXRpbHMvQ2FjaGVIZWxwZXJzLmpzXCI7XG5pbXBvcnQgKiBhcyBUaW1lVXRpbHMgZnJvbSBcIi4uL3V0aWxzL1RpbWVVdGlscy5qc1wiO1xuXG4vKipcbiAqIENsYXNzIHRoYXQgaGFuZGxlcyByZXNwb25zZSBwYXJzaW5nLlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBjbGFzcyBSZXNwb25zZUhhbmRsZXIge1xuICAgIHByaXZhdGUgY2xpZW50SWQ6IHN0cmluZztcbiAgICBwcml2YXRlIGNhY2hlU3RvcmFnZTogQ2FjaGVNYW5hZ2VyO1xuICAgIHByaXZhdGUgY3J5cHRvT2JqOiBJQ3J5cHRvO1xuICAgIHByaXZhdGUgbG9nZ2VyOiBMb2dnZXI7XG4gICAgcHJpdmF0ZSBob21lQWNjb3VudElkZW50aWZpZXI6IHN0cmluZztcbiAgICBwcml2YXRlIHNlcmlhbGl6YWJsZUNhY2hlOiBJU2VyaWFsaXphYmxlVG9rZW5DYWNoZSB8IG51bGw7XG4gICAgcHJpdmF0ZSBwZXJzaXN0ZW5jZVBsdWdpbjogSUNhY2hlUGx1Z2luIHwgbnVsbDtcbiAgICBwcml2YXRlIHBlcmZvcm1hbmNlQ2xpZW50PzogSVBlcmZvcm1hbmNlQ2xpZW50O1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGNsaWVudElkOiBzdHJpbmcsXG4gICAgICAgIGNhY2hlU3RvcmFnZTogQ2FjaGVNYW5hZ2VyLFxuICAgICAgICBjcnlwdG9PYmo6IElDcnlwdG8sXG4gICAgICAgIGxvZ2dlcjogTG9nZ2VyLFxuICAgICAgICBzZXJpYWxpemFibGVDYWNoZTogSVNlcmlhbGl6YWJsZVRva2VuQ2FjaGUgfCBudWxsLFxuICAgICAgICBwZXJzaXN0ZW5jZVBsdWdpbjogSUNhY2hlUGx1Z2luIHwgbnVsbCxcbiAgICAgICAgcGVyZm9ybWFuY2VDbGllbnQ/OiBJUGVyZm9ybWFuY2VDbGllbnRcbiAgICApIHtcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IGNsaWVudElkO1xuICAgICAgICB0aGlzLmNhY2hlU3RvcmFnZSA9IGNhY2hlU3RvcmFnZTtcbiAgICAgICAgdGhpcy5jcnlwdG9PYmogPSBjcnlwdG9PYmo7XG4gICAgICAgIHRoaXMubG9nZ2VyID0gbG9nZ2VyO1xuICAgICAgICB0aGlzLnNlcmlhbGl6YWJsZUNhY2hlID0gc2VyaWFsaXphYmxlQ2FjaGU7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2VQbHVnaW4gPSBwZXJzaXN0ZW5jZVBsdWdpbjtcbiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudCA9IHBlcmZvcm1hbmNlQ2xpZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHdoaWNoIHZhbGlkYXRlcyBzZXJ2ZXIgYXV0aG9yaXphdGlvbiB0b2tlbiByZXNwb25zZS5cbiAgICAgKiBAcGFyYW0gc2VydmVyUmVzcG9uc2VcbiAgICAgKiBAcGFyYW0gcmVmcmVzaEFjY2Vzc1Rva2VuXG4gICAgICovXG4gICAgdmFsaWRhdGVUb2tlblJlc3BvbnNlKFxuICAgICAgICBzZXJ2ZXJSZXNwb25zZTogU2VydmVyQXV0aG9yaXphdGlvblRva2VuUmVzcG9uc2UsXG4gICAgICAgIHJlZnJlc2hBY2Nlc3NUb2tlbj86IGJvb2xlYW5cbiAgICApOiB2b2lkIHtcbiAgICAgICAgLy8gQ2hlY2sgZm9yIGVycm9yXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHNlcnZlclJlc3BvbnNlLmVycm9yIHx8XG4gICAgICAgICAgICBzZXJ2ZXJSZXNwb25zZS5lcnJvcl9kZXNjcmlwdGlvbiB8fFxuICAgICAgICAgICAgc2VydmVyUmVzcG9uc2Uuc3ViZXJyb3JcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJTdHJpbmcgPSBgRXJyb3Iocyk6ICR7XG4gICAgICAgICAgICAgICAgc2VydmVyUmVzcG9uc2UuZXJyb3JfY29kZXMgfHwgQ29uc3RhbnRzLk5PVF9BVkFJTEFCTEVcbiAgICAgICAgICAgIH0gLSBUaW1lc3RhbXA6ICR7XG4gICAgICAgICAgICAgICAgc2VydmVyUmVzcG9uc2UudGltZXN0YW1wIHx8IENvbnN0YW50cy5OT1RfQVZBSUxBQkxFXG4gICAgICAgICAgICB9IC0gRGVzY3JpcHRpb246ICR7XG4gICAgICAgICAgICAgICAgc2VydmVyUmVzcG9uc2UuZXJyb3JfZGVzY3JpcHRpb24gfHwgQ29uc3RhbnRzLk5PVF9BVkFJTEFCTEVcbiAgICAgICAgICAgIH0gLSBDb3JyZWxhdGlvbiBJRDogJHtcbiAgICAgICAgICAgICAgICBzZXJ2ZXJSZXNwb25zZS5jb3JyZWxhdGlvbl9pZCB8fCBDb25zdGFudHMuTk9UX0FWQUlMQUJMRVxuICAgICAgICAgICAgfSAtIFRyYWNlIElEOiAke1xuICAgICAgICAgICAgICAgIHNlcnZlclJlc3BvbnNlLnRyYWNlX2lkIHx8IENvbnN0YW50cy5OT1RfQVZBSUxBQkxFXG4gICAgICAgICAgICB9YDtcbiAgICAgICAgICAgIGNvbnN0IHNlcnZlckVycm9yTm8gPSBzZXJ2ZXJSZXNwb25zZS5lcnJvcl9jb2Rlcz8ubGVuZ3RoXG4gICAgICAgICAgICAgICAgPyBzZXJ2ZXJSZXNwb25zZS5lcnJvcl9jb2Rlc1swXVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgY29uc3Qgc2VydmVyRXJyb3IgPSBuZXcgU2VydmVyRXJyb3IoXG4gICAgICAgICAgICAgICAgc2VydmVyUmVzcG9uc2UuZXJyb3IsXG4gICAgICAgICAgICAgICAgZXJyU3RyaW5nLFxuICAgICAgICAgICAgICAgIHNlcnZlclJlc3BvbnNlLnN1YmVycm9yLFxuICAgICAgICAgICAgICAgIHNlcnZlckVycm9yTm8sXG4gICAgICAgICAgICAgICAgc2VydmVyUmVzcG9uc2Uuc3RhdHVzXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyBjaGVjayBpZiA1MDAgZXJyb3JcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICByZWZyZXNoQWNjZXNzVG9rZW4gJiZcbiAgICAgICAgICAgICAgICBzZXJ2ZXJSZXNwb25zZS5zdGF0dXMgJiZcbiAgICAgICAgICAgICAgICBzZXJ2ZXJSZXNwb25zZS5zdGF0dXMgPj0gSHR0cFN0YXR1cy5TRVJWRVJfRVJST1JfUkFOR0VfU1RBUlQgJiZcbiAgICAgICAgICAgICAgICBzZXJ2ZXJSZXNwb25zZS5zdGF0dXMgPD0gSHR0cFN0YXR1cy5TRVJWRVJfRVJST1JfUkFOR0VfRU5EXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuaW5nKFxuICAgICAgICAgICAgICAgICAgICBgZXhlY3V0ZVRva2VuUmVxdWVzdDp2YWxpZGF0ZVRva2VuUmVzcG9uc2UgLSBBQUQgaXMgY3VycmVudGx5IHVuYXZhaWxhYmxlIGFuZCB0aGUgYWNjZXNzIHRva2VuIGlzIHVuYWJsZSB0byBiZSByZWZyZXNoZWQuXFxuJHtzZXJ2ZXJFcnJvcn1gXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIC8vIGRvbid0IHRocm93IGFuIGV4Y2VwdGlvbiwgYnV0IGFsZXJ0IHRoZSB1c2VyIHZpYSBhIGxvZyB0aGF0IHRoZSB0b2tlbiB3YXMgdW5hYmxlIHRvIGJlIHJlZnJlc2hlZFxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiA0MDAgZXJyb3JcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgcmVmcmVzaEFjY2Vzc1Rva2VuICYmXG4gICAgICAgICAgICAgICAgc2VydmVyUmVzcG9uc2Uuc3RhdHVzICYmXG4gICAgICAgICAgICAgICAgc2VydmVyUmVzcG9uc2Uuc3RhdHVzID49IEh0dHBTdGF0dXMuQ0xJRU5UX0VSUk9SX1JBTkdFX1NUQVJUICYmXG4gICAgICAgICAgICAgICAgc2VydmVyUmVzcG9uc2Uuc3RhdHVzIDw9IEh0dHBTdGF0dXMuQ0xJRU5UX0VSUk9SX1JBTkdFX0VORFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybmluZyhcbiAgICAgICAgICAgICAgICAgICAgYGV4ZWN1dGVUb2tlblJlcXVlc3Q6dmFsaWRhdGVUb2tlblJlc3BvbnNlIC0gQUFEIGlzIGN1cnJlbnRseSBhdmFpbGFibGUgYnV0IGlzIHVuYWJsZSB0byByZWZyZXNoIHRoZSBhY2Nlc3MgdG9rZW4uXFxuJHtzZXJ2ZXJFcnJvcn1gXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIC8vIGRvbid0IHRocm93IGFuIGV4Y2VwdGlvbiwgYnV0IGFsZXJ0IHRoZSB1c2VyIHZpYSBhIGxvZyB0aGF0IHRoZSB0b2tlbiB3YXMgdW5hYmxlIHRvIGJlIHJlZnJlc2hlZFxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGlzSW50ZXJhY3Rpb25SZXF1aXJlZEVycm9yKFxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJSZXNwb25zZS5lcnJvcixcbiAgICAgICAgICAgICAgICAgICAgc2VydmVyUmVzcG9uc2UuZXJyb3JfZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgICAgIHNlcnZlclJlc3BvbnNlLnN1YmVycm9yXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIHNlcnZlclJlc3BvbnNlLmVycm9yLFxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJSZXNwb25zZS5lcnJvcl9kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICAgICAgc2VydmVyUmVzcG9uc2Uuc3ViZXJyb3IsXG4gICAgICAgICAgICAgICAgICAgIHNlcnZlclJlc3BvbnNlLnRpbWVzdGFtcCB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HLFxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJSZXNwb25zZS50cmFjZV9pZCB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HLFxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJSZXNwb25zZS5jb3JyZWxhdGlvbl9pZCB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HLFxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJSZXNwb25zZS5jbGFpbXMgfHwgQ29uc3RhbnRzLkVNUFRZX1NUUklORyxcbiAgICAgICAgICAgICAgICAgICAgc2VydmVyRXJyb3JOb1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRocm93IHNlcnZlckVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGNvbnN0cnVjdGVkIHRva2VuIHJlc3BvbnNlIGJhc2VkIG9uIGdpdmVuIHN0cmluZy4gQWxzbyBtYW5hZ2VzIHRoZSBjYWNoZSB1cGRhdGVzIGFuZCBjbGVhbnVwcy5cbiAgICAgKiBAcGFyYW0gc2VydmVyVG9rZW5SZXNwb25zZVxuICAgICAqIEBwYXJhbSBhdXRob3JpdHlcbiAgICAgKi9cbiAgICBhc3luYyBoYW5kbGVTZXJ2ZXJUb2tlblJlc3BvbnNlKFxuICAgICAgICBzZXJ2ZXJUb2tlblJlc3BvbnNlOiBTZXJ2ZXJBdXRob3JpemF0aW9uVG9rZW5SZXNwb25zZSxcbiAgICAgICAgYXV0aG9yaXR5OiBBdXRob3JpdHksXG4gICAgICAgIHJlcVRpbWVzdGFtcDogbnVtYmVyLFxuICAgICAgICByZXF1ZXN0OiBCYXNlQXV0aFJlcXVlc3QsXG4gICAgICAgIGF1dGhDb2RlUGF5bG9hZD86IEF1dGhvcml6YXRpb25Db2RlUGF5bG9hZCxcbiAgICAgICAgdXNlckFzc2VydGlvbkhhc2g/OiBzdHJpbmcsXG4gICAgICAgIGhhbmRsaW5nUmVmcmVzaFRva2VuUmVzcG9uc2U/OiBib29sZWFuLFxuICAgICAgICBmb3JjZUNhY2hlUmVmcmVzaFRva2VuUmVzcG9uc2U/OiBib29sZWFuLFxuICAgICAgICBzZXJ2ZXJSZXF1ZXN0SWQ/OiBzdHJpbmdcbiAgICApOiBQcm9taXNlPEF1dGhlbnRpY2F0aW9uUmVzdWx0PiB7XG4gICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQ/LmFkZFF1ZXVlTWVhc3VyZW1lbnQoXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5IYW5kbGVTZXJ2ZXJUb2tlblJlc3BvbnNlLFxuICAgICAgICAgICAgc2VydmVyVG9rZW5SZXNwb25zZS5jb3JyZWxhdGlvbl9pZFxuICAgICAgICApO1xuXG4gICAgICAgIC8vIGNyZWF0ZSBhbiBpZFRva2VuIG9iamVjdCAobm90IGVudGl0eSlcbiAgICAgICAgbGV0IGlkVG9rZW5DbGFpbXM6IFRva2VuQ2xhaW1zIHwgdW5kZWZpbmVkO1xuICAgICAgICBpZiAoc2VydmVyVG9rZW5SZXNwb25zZS5pZF90b2tlbikge1xuICAgICAgICAgICAgaWRUb2tlbkNsYWltcyA9IGV4dHJhY3RUb2tlbkNsYWltcyhcbiAgICAgICAgICAgICAgICBzZXJ2ZXJUb2tlblJlc3BvbnNlLmlkX3Rva2VuIHx8IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgICAgICAgICAgICAgdGhpcy5jcnlwdG9PYmouYmFzZTY0RGVjb2RlXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyB0b2tlbiBub25jZSBjaGVjayAoVE9ETzogQWRkIGEgd2FybmluZyBpZiBubyBub25jZSBpcyBnaXZlbj8pXG4gICAgICAgICAgICBpZiAoYXV0aENvZGVQYXlsb2FkICYmIGF1dGhDb2RlUGF5bG9hZC5ub25jZSkge1xuICAgICAgICAgICAgICAgIGlmIChpZFRva2VuQ2xhaW1zLm5vbmNlICE9PSBhdXRoQ29kZVBheWxvYWQubm9uY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMubm9uY2VNaXNtYXRjaFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gdG9rZW4gbWF4X2FnZSBjaGVja1xuICAgICAgICAgICAgaWYgKHJlcXVlc3QubWF4QWdlIHx8IHJlcXVlc3QubWF4QWdlID09PSAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXV0aFRpbWUgPSBpZFRva2VuQ2xhaW1zLmF1dGhfdGltZTtcbiAgICAgICAgICAgICAgICBpZiAoIWF1dGhUaW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLmF1dGhUaW1lTm90Rm91bmRcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjaGVja01heEFnZShhdXRoVGltZSwgcmVxdWVzdC5tYXhBZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gZ2VuZXJhdGUgaG9tZUFjY291bnRJZFxuICAgICAgICB0aGlzLmhvbWVBY2NvdW50SWRlbnRpZmllciA9IEFjY291bnRFbnRpdHkuZ2VuZXJhdGVIb21lQWNjb3VudElkKFxuICAgICAgICAgICAgc2VydmVyVG9rZW5SZXNwb25zZS5jbGllbnRfaW5mbyB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HLFxuICAgICAgICAgICAgYXV0aG9yaXR5LmF1dGhvcml0eVR5cGUsXG4gICAgICAgICAgICB0aGlzLmxvZ2dlcixcbiAgICAgICAgICAgIHRoaXMuY3J5cHRvT2JqLFxuICAgICAgICAgICAgaWRUb2tlbkNsYWltc1xuICAgICAgICApO1xuXG4gICAgICAgIC8vIHNhdmUgdGhlIHJlc3BvbnNlIHRva2Vuc1xuICAgICAgICBsZXQgcmVxdWVzdFN0YXRlT2JqOiBSZXF1ZXN0U3RhdGVPYmplY3QgfCB1bmRlZmluZWQ7XG4gICAgICAgIGlmICghIWF1dGhDb2RlUGF5bG9hZCAmJiAhIWF1dGhDb2RlUGF5bG9hZC5zdGF0ZSkge1xuICAgICAgICAgICAgcmVxdWVzdFN0YXRlT2JqID0gUHJvdG9jb2xVdGlscy5wYXJzZVJlcXVlc3RTdGF0ZShcbiAgICAgICAgICAgICAgICB0aGlzLmNyeXB0b09iaixcbiAgICAgICAgICAgICAgICBhdXRoQ29kZVBheWxvYWQuc3RhdGVcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGQga2V5SWQgZnJvbSByZXF1ZXN0IHRvIHNlcnZlclRva2VuUmVzcG9uc2UgaWYgZGVmaW5lZFxuICAgICAgICBzZXJ2ZXJUb2tlblJlc3BvbnNlLmtleV9pZCA9XG4gICAgICAgICAgICBzZXJ2ZXJUb2tlblJlc3BvbnNlLmtleV9pZCB8fCByZXF1ZXN0LnNzaEtpZCB8fCB1bmRlZmluZWQ7XG5cbiAgICAgICAgY29uc3QgY2FjaGVSZWNvcmQgPSB0aGlzLmdlbmVyYXRlQ2FjaGVSZWNvcmQoXG4gICAgICAgICAgICBzZXJ2ZXJUb2tlblJlc3BvbnNlLFxuICAgICAgICAgICAgYXV0aG9yaXR5LFxuICAgICAgICAgICAgcmVxVGltZXN0YW1wLFxuICAgICAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgICAgIGlkVG9rZW5DbGFpbXMsXG4gICAgICAgICAgICB1c2VyQXNzZXJ0aW9uSGFzaCxcbiAgICAgICAgICAgIGF1dGhDb2RlUGF5bG9hZFxuICAgICAgICApO1xuICAgICAgICBsZXQgY2FjaGVDb250ZXh0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGVyc2lzdGVuY2VQbHVnaW4gJiYgdGhpcy5zZXJpYWxpemFibGVDYWNoZSkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgICAgIFwiUGVyc2lzdGVuY2UgZW5hYmxlZCwgY2FsbGluZyBiZWZvcmVDYWNoZUFjY2Vzc1wiXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBjYWNoZUNvbnRleHQgPSBuZXcgVG9rZW5DYWNoZUNvbnRleHQoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VyaWFsaXphYmxlQ2FjaGUsXG4gICAgICAgICAgICAgICAgICAgIHRydWVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGVyc2lzdGVuY2VQbHVnaW4uYmVmb3JlQ2FjaGVBY2Nlc3MoY2FjaGVDb250ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgKiBXaGVuIHNhdmluZyBhIHJlZnJlc2hlZCB0b2tlbnMgdG8gdGhlIGNhY2hlLCBpdCBpcyBleHBlY3RlZCB0aGF0IHRoZSBhY2NvdW50IHRoYXQgd2FzIHVzZWQgaXMgcHJlc2VudCBpbiB0aGUgY2FjaGUuXG4gICAgICAgICAgICAgKiBJZiBub3QgcHJlc2VudCwgd2Ugc2hvdWxkIHJldHVybiBudWxsLCBhcyBpdCdzIHRoZSBjYXNlIHRoYXQgYW5vdGhlciBhcHBsaWNhdGlvbiBjYWxsZWQgcmVtb3ZlQWNjb3VudCBpbiBiZXR3ZWVuXG4gICAgICAgICAgICAgKiB0aGUgY2FsbHMgdG8gZ2V0QWxsQWNjb3VudHMgYW5kIGFjcXVpcmVUb2tlblNpbGVudC4gV2Ugc2hvdWxkIG5vdCBvdmVyd3JpdGUgdGhhdCByZW1vdmFsLCB1bmxlc3MgZXhwbGljaXRseSBmbGFnZ2VkIGJ5XG4gICAgICAgICAgICAgKiB0aGUgZGV2ZWxvcGVyLCBhcyBpbiB0aGUgY2FzZSBvZiByZWZyZXNoIHRva2VuIGZsb3cgdXNlZCBpbiBBREFMIE5vZGUgdG8gTVNBTCBOb2RlIG1pZ3JhdGlvbi5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGhhbmRsaW5nUmVmcmVzaFRva2VuUmVzcG9uc2UgJiZcbiAgICAgICAgICAgICAgICAhZm9yY2VDYWNoZVJlZnJlc2hUb2tlblJlc3BvbnNlICYmXG4gICAgICAgICAgICAgICAgY2FjaGVSZWNvcmQuYWNjb3VudFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gY2FjaGVSZWNvcmQuYWNjb3VudC5nZW5lcmF0ZUFjY291bnRLZXkoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBhY2NvdW50ID0gdGhpcy5jYWNoZVN0b3JhZ2UuZ2V0QWNjb3VudChrZXkpO1xuICAgICAgICAgICAgICAgIGlmICghYWNjb3VudCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuaW5nKFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJBY2NvdW50IHVzZWQgdG8gcmVmcmVzaCB0b2tlbnMgbm90IGluIHBlcnNpc3RlbmNlLCByZWZyZXNoZWQgdG9rZW5zIHdpbGwgbm90IGJlIHN0b3JlZCBpbiB0aGUgY2FjaGVcIlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgUmVzcG9uc2VIYW5kbGVyLmdlbmVyYXRlQXV0aGVudGljYXRpb25SZXN1bHQoXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNyeXB0b09iaixcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhvcml0eSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlUmVjb3JkLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgaWRUb2tlbkNsYWltcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RTdGF0ZU9iaixcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlclJlcXVlc3RJZFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2FjaGVTdG9yYWdlLnNhdmVDYWNoZVJlY29yZChcbiAgICAgICAgICAgICAgICBjYWNoZVJlY29yZCxcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWQsXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5zdG9yZUluQ2FjaGVcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZVBsdWdpbiAmJlxuICAgICAgICAgICAgICAgIHRoaXMuc2VyaWFsaXphYmxlQ2FjaGUgJiZcbiAgICAgICAgICAgICAgICBjYWNoZUNvbnRleHRcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgICAgIFwiUGVyc2lzdGVuY2UgZW5hYmxlZCwgY2FsbGluZyBhZnRlckNhY2hlQWNjZXNzXCJcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGVyc2lzdGVuY2VQbHVnaW4uYWZ0ZXJDYWNoZUFjY2VzcyhjYWNoZUNvbnRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFJlc3BvbnNlSGFuZGxlci5nZW5lcmF0ZUF1dGhlbnRpY2F0aW9uUmVzdWx0KFxuICAgICAgICAgICAgdGhpcy5jcnlwdG9PYmosXG4gICAgICAgICAgICBhdXRob3JpdHksXG4gICAgICAgICAgICBjYWNoZVJlY29yZCxcbiAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgICAgIGlkVG9rZW5DbGFpbXMsXG4gICAgICAgICAgICByZXF1ZXN0U3RhdGVPYmosXG4gICAgICAgICAgICBzZXJ2ZXJUb2tlblJlc3BvbnNlLFxuICAgICAgICAgICAgc2VydmVyUmVxdWVzdElkXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIENhY2hlUmVjb3JkXG4gICAgICogQHBhcmFtIHNlcnZlclRva2VuUmVzcG9uc2VcbiAgICAgKiBAcGFyYW0gaWRUb2tlbk9ialxuICAgICAqIEBwYXJhbSBhdXRob3JpdHlcbiAgICAgKi9cbiAgICBwcml2YXRlIGdlbmVyYXRlQ2FjaGVSZWNvcmQoXG4gICAgICAgIHNlcnZlclRva2VuUmVzcG9uc2U6IFNlcnZlckF1dGhvcml6YXRpb25Ub2tlblJlc3BvbnNlLFxuICAgICAgICBhdXRob3JpdHk6IEF1dGhvcml0eSxcbiAgICAgICAgcmVxVGltZXN0YW1wOiBudW1iZXIsXG4gICAgICAgIHJlcXVlc3Q6IEJhc2VBdXRoUmVxdWVzdCxcbiAgICAgICAgaWRUb2tlbkNsYWltcz86IFRva2VuQ2xhaW1zLFxuICAgICAgICB1c2VyQXNzZXJ0aW9uSGFzaD86IHN0cmluZyxcbiAgICAgICAgYXV0aENvZGVQYXlsb2FkPzogQXV0aG9yaXphdGlvbkNvZGVQYXlsb2FkXG4gICAgKTogQ2FjaGVSZWNvcmQge1xuICAgICAgICBjb25zdCBlbnYgPSBhdXRob3JpdHkuZ2V0UHJlZmVycmVkQ2FjaGUoKTtcbiAgICAgICAgaWYgKCFlbnYpIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihcbiAgICAgICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy5pbnZhbGlkQ2FjaGVFbnZpcm9ubWVudFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNsYWltc1RlbmFudElkID0gZ2V0VGVuYW50SWRGcm9tSWRUb2tlbkNsYWltcyhpZFRva2VuQ2xhaW1zKTtcblxuICAgICAgICAvLyBJZFRva2VuOiBub24gQUFEIHNjZW5hcmlvcyBjYW4gaGF2ZSBlbXB0eSByZWFsbVxuICAgICAgICBsZXQgY2FjaGVkSWRUb2tlbjogSWRUb2tlbkVudGl0eSB8IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IGNhY2hlZEFjY291bnQ6IEFjY291bnRFbnRpdHkgfCB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChzZXJ2ZXJUb2tlblJlc3BvbnNlLmlkX3Rva2VuICYmICEhaWRUb2tlbkNsYWltcykge1xuICAgICAgICAgICAgY2FjaGVkSWRUb2tlbiA9IENhY2hlSGVscGVycy5jcmVhdGVJZFRva2VuRW50aXR5KFxuICAgICAgICAgICAgICAgIHRoaXMuaG9tZUFjY291bnRJZGVudGlmaWVyLFxuICAgICAgICAgICAgICAgIGVudixcbiAgICAgICAgICAgICAgICBzZXJ2ZXJUb2tlblJlc3BvbnNlLmlkX3Rva2VuLFxuICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgY2xhaW1zVGVuYW50SWQgfHwgXCJcIlxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY2FjaGVkQWNjb3VudCA9IGJ1aWxkQWNjb3VudFRvQ2FjaGUoXG4gICAgICAgICAgICAgICAgdGhpcy5jYWNoZVN0b3JhZ2UsXG4gICAgICAgICAgICAgICAgYXV0aG9yaXR5LFxuICAgICAgICAgICAgICAgIHRoaXMuaG9tZUFjY291bnRJZGVudGlmaWVyLFxuICAgICAgICAgICAgICAgIHRoaXMuY3J5cHRvT2JqLmJhc2U2NERlY29kZSxcbiAgICAgICAgICAgICAgICBpZFRva2VuQ2xhaW1zLFxuICAgICAgICAgICAgICAgIHNlcnZlclRva2VuUmVzcG9uc2UuY2xpZW50X2luZm8sXG4gICAgICAgICAgICAgICAgZW52LFxuICAgICAgICAgICAgICAgIGNsYWltc1RlbmFudElkLFxuICAgICAgICAgICAgICAgIGF1dGhDb2RlUGF5bG9hZCxcbiAgICAgICAgICAgICAgICB1bmRlZmluZWQsIC8vIG5hdGl2ZUFjY291bnRJZFxuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWNjZXNzVG9rZW5cbiAgICAgICAgbGV0IGNhY2hlZEFjY2Vzc1Rva2VuOiBBY2Nlc3NUb2tlbkVudGl0eSB8IG51bGwgPSBudWxsO1xuICAgICAgICBpZiAoc2VydmVyVG9rZW5SZXNwb25zZS5hY2Nlc3NfdG9rZW4pIHtcbiAgICAgICAgICAgIC8vIElmIHNjb3BlcyBub3QgcmV0dXJuZWQgaW4gc2VydmVyIHJlc3BvbnNlLCB1c2UgcmVxdWVzdCBzY29wZXNcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlU2NvcGVzID0gc2VydmVyVG9rZW5SZXNwb25zZS5zY29wZVxuICAgICAgICAgICAgICAgID8gU2NvcGVTZXQuZnJvbVN0cmluZyhzZXJ2ZXJUb2tlblJlc3BvbnNlLnNjb3BlKVxuICAgICAgICAgICAgICAgIDogbmV3IFNjb3BlU2V0KHJlcXVlc3Quc2NvcGVzIHx8IFtdKTtcblxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAqIFVzZSB0aW1lc3RhbXAgY2FsY3VsYXRlZCBiZWZvcmUgcmVxdWVzdFxuICAgICAgICAgICAgICogU2VydmVyIG1heSByZXR1cm4gdGltZXN0YW1wcyBhcyBzdHJpbmdzLCBwYXJzZSB0byBudW1iZXJzIGlmIHNvLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBjb25zdCBleHBpcmVzSW46IG51bWJlciA9XG4gICAgICAgICAgICAgICAgKHR5cGVvZiBzZXJ2ZXJUb2tlblJlc3BvbnNlLmV4cGlyZXNfaW4gPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgPyBwYXJzZUludChzZXJ2ZXJUb2tlblJlc3BvbnNlLmV4cGlyZXNfaW4sIDEwKVxuICAgICAgICAgICAgICAgICAgICA6IHNlcnZlclRva2VuUmVzcG9uc2UuZXhwaXJlc19pbikgfHwgMDtcbiAgICAgICAgICAgIGNvbnN0IGV4dEV4cGlyZXNJbjogbnVtYmVyID1cbiAgICAgICAgICAgICAgICAodHlwZW9mIHNlcnZlclRva2VuUmVzcG9uc2UuZXh0X2V4cGlyZXNfaW4gPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgPyBwYXJzZUludChzZXJ2ZXJUb2tlblJlc3BvbnNlLmV4dF9leHBpcmVzX2luLCAxMClcbiAgICAgICAgICAgICAgICAgICAgOiBzZXJ2ZXJUb2tlblJlc3BvbnNlLmV4dF9leHBpcmVzX2luKSB8fCAwO1xuICAgICAgICAgICAgY29uc3QgcmVmcmVzaEluOiBudW1iZXIgfCB1bmRlZmluZWQgPVxuICAgICAgICAgICAgICAgICh0eXBlb2Ygc2VydmVyVG9rZW5SZXNwb25zZS5yZWZyZXNoX2luID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICAgICAgICAgID8gcGFyc2VJbnQoc2VydmVyVG9rZW5SZXNwb25zZS5yZWZyZXNoX2luLCAxMClcbiAgICAgICAgICAgICAgICAgICAgOiBzZXJ2ZXJUb2tlblJlc3BvbnNlLnJlZnJlc2hfaW4pIHx8IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGNvbnN0IHRva2VuRXhwaXJhdGlvblNlY29uZHMgPSByZXFUaW1lc3RhbXAgKyBleHBpcmVzSW47XG4gICAgICAgICAgICBjb25zdCBleHRlbmRlZFRva2VuRXhwaXJhdGlvblNlY29uZHMgPVxuICAgICAgICAgICAgICAgIHRva2VuRXhwaXJhdGlvblNlY29uZHMgKyBleHRFeHBpcmVzSW47XG4gICAgICAgICAgICBjb25zdCByZWZyZXNoT25TZWNvbmRzID1cbiAgICAgICAgICAgICAgICByZWZyZXNoSW4gJiYgcmVmcmVzaEluID4gMFxuICAgICAgICAgICAgICAgICAgICA/IHJlcVRpbWVzdGFtcCArIHJlZnJlc2hJblxuICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgLy8gbm9uIEFBRCBzY2VuYXJpb3MgY2FuIGhhdmUgZW1wdHkgcmVhbG1cbiAgICAgICAgICAgIGNhY2hlZEFjY2Vzc1Rva2VuID0gQ2FjaGVIZWxwZXJzLmNyZWF0ZUFjY2Vzc1Rva2VuRW50aXR5KFxuICAgICAgICAgICAgICAgIHRoaXMuaG9tZUFjY291bnRJZGVudGlmaWVyLFxuICAgICAgICAgICAgICAgIGVudixcbiAgICAgICAgICAgICAgICBzZXJ2ZXJUb2tlblJlc3BvbnNlLmFjY2Vzc190b2tlbixcbiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudElkLFxuICAgICAgICAgICAgICAgIGNsYWltc1RlbmFudElkIHx8IGF1dGhvcml0eS50ZW5hbnQgfHwgXCJcIixcbiAgICAgICAgICAgICAgICByZXNwb25zZVNjb3Blcy5wcmludFNjb3BlcygpLFxuICAgICAgICAgICAgICAgIHRva2VuRXhwaXJhdGlvblNlY29uZHMsXG4gICAgICAgICAgICAgICAgZXh0ZW5kZWRUb2tlbkV4cGlyYXRpb25TZWNvbmRzLFxuICAgICAgICAgICAgICAgIHRoaXMuY3J5cHRvT2JqLmJhc2U2NERlY29kZSxcbiAgICAgICAgICAgICAgICByZWZyZXNoT25TZWNvbmRzLFxuICAgICAgICAgICAgICAgIHNlcnZlclRva2VuUmVzcG9uc2UudG9rZW5fdHlwZSxcbiAgICAgICAgICAgICAgICB1c2VyQXNzZXJ0aW9uSGFzaCxcbiAgICAgICAgICAgICAgICBzZXJ2ZXJUb2tlblJlc3BvbnNlLmtleV9pZCxcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmNsYWltcyxcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnJlcXVlc3RlZENsYWltc0hhc2hcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZWZyZXNoVG9rZW5cbiAgICAgICAgbGV0IGNhY2hlZFJlZnJlc2hUb2tlbjogUmVmcmVzaFRva2VuRW50aXR5IHwgbnVsbCA9IG51bGw7XG4gICAgICAgIGlmIChzZXJ2ZXJUb2tlblJlc3BvbnNlLnJlZnJlc2hfdG9rZW4pIHtcbiAgICAgICAgICAgIGxldCBydEV4cGlyZXNPbjogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKHNlcnZlclRva2VuUmVzcG9uc2UucmVmcmVzaF90b2tlbl9leHBpcmVzX2luKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcnRFeHBpcmVzSW46IG51bWJlciA9XG4gICAgICAgICAgICAgICAgICAgIHR5cGVvZiBzZXJ2ZXJUb2tlblJlc3BvbnNlLnJlZnJlc2hfdG9rZW5fZXhwaXJlc19pbiA9PT1cbiAgICAgICAgICAgICAgICAgICAgXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPyBwYXJzZUludChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlclRva2VuUmVzcG9uc2UucmVmcmVzaF90b2tlbl9leHBpcmVzX2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMTBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBzZXJ2ZXJUb2tlblJlc3BvbnNlLnJlZnJlc2hfdG9rZW5fZXhwaXJlc19pbjtcbiAgICAgICAgICAgICAgICBydEV4cGlyZXNPbiA9IHJlcVRpbWVzdGFtcCArIHJ0RXhwaXJlc0luO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FjaGVkUmVmcmVzaFRva2VuID0gQ2FjaGVIZWxwZXJzLmNyZWF0ZVJlZnJlc2hUb2tlbkVudGl0eShcbiAgICAgICAgICAgICAgICB0aGlzLmhvbWVBY2NvdW50SWRlbnRpZmllcixcbiAgICAgICAgICAgICAgICBlbnYsXG4gICAgICAgICAgICAgICAgc2VydmVyVG9rZW5SZXNwb25zZS5yZWZyZXNoX3Rva2VuLFxuICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgc2VydmVyVG9rZW5SZXNwb25zZS5mb2NpLFxuICAgICAgICAgICAgICAgIHVzZXJBc3NlcnRpb25IYXNoLFxuICAgICAgICAgICAgICAgIHJ0RXhwaXJlc09uXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYXBwTWV0YWRhdGFcbiAgICAgICAgbGV0IGNhY2hlZEFwcE1ldGFkYXRhOiBBcHBNZXRhZGF0YUVudGl0eSB8IG51bGwgPSBudWxsO1xuICAgICAgICBpZiAoc2VydmVyVG9rZW5SZXNwb25zZS5mb2NpKSB7XG4gICAgICAgICAgICBjYWNoZWRBcHBNZXRhZGF0YSA9IHtcbiAgICAgICAgICAgICAgICBjbGllbnRJZDogdGhpcy5jbGllbnRJZCxcbiAgICAgICAgICAgICAgICBlbnZpcm9ubWVudDogZW52LFxuICAgICAgICAgICAgICAgIGZhbWlseUlkOiBzZXJ2ZXJUb2tlblJlc3BvbnNlLmZvY2ksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFjY291bnQ6IGNhY2hlZEFjY291bnQsXG4gICAgICAgICAgICBpZFRva2VuOiBjYWNoZWRJZFRva2VuLFxuICAgICAgICAgICAgYWNjZXNzVG9rZW46IGNhY2hlZEFjY2Vzc1Rva2VuLFxuICAgICAgICAgICAgcmVmcmVzaFRva2VuOiBjYWNoZWRSZWZyZXNoVG9rZW4sXG4gICAgICAgICAgICBhcHBNZXRhZGF0YTogY2FjaGVkQXBwTWV0YWRhdGEsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBAQXV0aGVudGljYXRpb25SZXN1bHQgZnJvbSBAQ2FjaGVSZWNvcmQgLCBASWRUb2tlbiAsIGFuZCBhIGJvb2xlYW4gdGhhdCBzdGF0ZXMgd2hldGhlciBvciBub3QgdGhlIHJlc3VsdCBpcyBmcm9tIGNhY2hlLlxuICAgICAqXG4gICAgICogT3B0aW9uYWxseSB0YWtlcyBhIHN0YXRlIHN0cmluZyB0aGF0IGlzIHNldCBhcy1pcyBpbiB0aGUgcmVzcG9uc2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2FjaGVSZWNvcmRcbiAgICAgKiBAcGFyYW0gaWRUb2tlbk9ialxuICAgICAqIEBwYXJhbSBmcm9tVG9rZW5DYWNoZVxuICAgICAqIEBwYXJhbSBzdGF0ZVN0cmluZ1xuICAgICAqL1xuICAgIHN0YXRpYyBhc3luYyBnZW5lcmF0ZUF1dGhlbnRpY2F0aW9uUmVzdWx0KFxuICAgICAgICBjcnlwdG9PYmo6IElDcnlwdG8sXG4gICAgICAgIGF1dGhvcml0eTogQXV0aG9yaXR5LFxuICAgICAgICBjYWNoZVJlY29yZDogQ2FjaGVSZWNvcmQsXG4gICAgICAgIGZyb21Ub2tlbkNhY2hlOiBib29sZWFuLFxuICAgICAgICByZXF1ZXN0OiBCYXNlQXV0aFJlcXVlc3QsXG4gICAgICAgIGlkVG9rZW5DbGFpbXM/OiBUb2tlbkNsYWltcyxcbiAgICAgICAgcmVxdWVzdFN0YXRlPzogUmVxdWVzdFN0YXRlT2JqZWN0LFxuICAgICAgICBzZXJ2ZXJUb2tlblJlc3BvbnNlPzogU2VydmVyQXV0aG9yaXphdGlvblRva2VuUmVzcG9uc2UsXG4gICAgICAgIHJlcXVlc3RJZD86IHN0cmluZ1xuICAgICk6IFByb21pc2U8QXV0aGVudGljYXRpb25SZXN1bHQ+IHtcbiAgICAgICAgbGV0IGFjY2Vzc1Rva2VuOiBzdHJpbmcgPSBDb25zdGFudHMuRU1QVFlfU1RSSU5HO1xuICAgICAgICBsZXQgcmVzcG9uc2VTY29wZXM6IEFycmF5PHN0cmluZz4gPSBbXTtcbiAgICAgICAgbGV0IGV4cGlyZXNPbjogRGF0ZSB8IG51bGwgPSBudWxsO1xuICAgICAgICBsZXQgZXh0RXhwaXJlc09uOiBEYXRlIHwgdW5kZWZpbmVkO1xuICAgICAgICBsZXQgcmVmcmVzaE9uOiBEYXRlIHwgdW5kZWZpbmVkO1xuICAgICAgICBsZXQgZmFtaWx5SWQ6IHN0cmluZyA9IENvbnN0YW50cy5FTVBUWV9TVFJJTkc7XG5cbiAgICAgICAgaWYgKGNhY2hlUmVjb3JkLmFjY2Vzc1Rva2VuKSB7XG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgICogaWYgdGhlIHJlcXVlc3Qgb2JqZWN0IGhhcyBgcG9wS2lkYCBwcm9wZXJ0eSwgYHNpZ25Qb3BUb2tlbmAgd2lsbCBiZSBzZXQgdG8gZmFsc2UgYW5kXG4gICAgICAgICAgICAgKiB0aGUgdG9rZW4gd2lsbCBiZSByZXR1cm5lZCB1bnNpZ25lZFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgY2FjaGVSZWNvcmQuYWNjZXNzVG9rZW4udG9rZW5UeXBlID09PVxuICAgICAgICAgICAgICAgICAgICBBdXRoZW50aWNhdGlvblNjaGVtZS5QT1AgJiZcbiAgICAgICAgICAgICAgICAhcmVxdWVzdC5wb3BLaWRcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBvcFRva2VuR2VuZXJhdG9yOiBQb3BUb2tlbkdlbmVyYXRvciA9XG4gICAgICAgICAgICAgICAgICAgIG5ldyBQb3BUb2tlbkdlbmVyYXRvcihjcnlwdG9PYmopO1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgc2VjcmV0LCBrZXlJZCB9ID0gY2FjaGVSZWNvcmQuYWNjZXNzVG9rZW47XG5cbiAgICAgICAgICAgICAgICBpZiAoIWtleUlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLmtleUlkTWlzc2luZ1xuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuID0gYXdhaXQgcG9wVG9rZW5HZW5lcmF0b3Iuc2lnblBvcFRva2VuKFxuICAgICAgICAgICAgICAgICAgICBzZWNyZXQsXG4gICAgICAgICAgICAgICAgICAgIGtleUlkLFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYWNjZXNzVG9rZW4gPSBjYWNoZVJlY29yZC5hY2Nlc3NUb2tlbi5zZWNyZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXNwb25zZVNjb3BlcyA9IFNjb3BlU2V0LmZyb21TdHJpbmcoXG4gICAgICAgICAgICAgICAgY2FjaGVSZWNvcmQuYWNjZXNzVG9rZW4udGFyZ2V0XG4gICAgICAgICAgICApLmFzQXJyYXkoKTtcbiAgICAgICAgICAgIC8vIEFjY2VzcyB0b2tlbiBleHBpcmVzT24gY2FjaGVkIGluIHNlY29uZHMsIGNvbnZlcnRpbmcgdG8gRGF0ZSBmb3IgQXV0aGVudGljYXRpb25SZXN1bHRcbiAgICAgICAgICAgIGV4cGlyZXNPbiA9IFRpbWVVdGlscy50b0RhdGVGcm9tU2Vjb25kcyhcbiAgICAgICAgICAgICAgICBjYWNoZVJlY29yZC5hY2Nlc3NUb2tlbi5leHBpcmVzT25cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBleHRFeHBpcmVzT24gPSBUaW1lVXRpbHMudG9EYXRlRnJvbVNlY29uZHMoXG4gICAgICAgICAgICAgICAgY2FjaGVSZWNvcmQuYWNjZXNzVG9rZW4uZXh0ZW5kZWRFeHBpcmVzT25cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoY2FjaGVSZWNvcmQuYWNjZXNzVG9rZW4ucmVmcmVzaE9uKSB7XG4gICAgICAgICAgICAgICAgcmVmcmVzaE9uID0gVGltZVV0aWxzLnRvRGF0ZUZyb21TZWNvbmRzKFxuICAgICAgICAgICAgICAgICAgICBjYWNoZVJlY29yZC5hY2Nlc3NUb2tlbi5yZWZyZXNoT25cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNhY2hlUmVjb3JkLmFwcE1ldGFkYXRhKSB7XG4gICAgICAgICAgICBmYW1pbHlJZCA9XG4gICAgICAgICAgICAgICAgY2FjaGVSZWNvcmQuYXBwTWV0YWRhdGEuZmFtaWx5SWQgPT09IFRIRV9GQU1JTFlfSURcbiAgICAgICAgICAgICAgICAgICAgPyBUSEVfRkFNSUxZX0lEXG4gICAgICAgICAgICAgICAgICAgIDogXCJcIjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1aWQgPSBpZFRva2VuQ2xhaW1zPy5vaWQgfHwgaWRUb2tlbkNsYWltcz8uc3ViIHx8IFwiXCI7XG4gICAgICAgIGNvbnN0IHRpZCA9IGlkVG9rZW5DbGFpbXM/LnRpZCB8fCBcIlwiO1xuXG4gICAgICAgIC8vIGZvciBoeWJyaWQgKyBuYXRpdmUgYnJpZGdlIGVuYWJsZW1lbnQsIHNlbmQgYmFjayB0aGUgbmF0aXZlIGFjY291bnQgSWRcbiAgICAgICAgaWYgKHNlcnZlclRva2VuUmVzcG9uc2U/LnNwYV9hY2NvdW50aWQgJiYgISFjYWNoZVJlY29yZC5hY2NvdW50KSB7XG4gICAgICAgICAgICBjYWNoZVJlY29yZC5hY2NvdW50Lm5hdGl2ZUFjY291bnRJZCA9XG4gICAgICAgICAgICAgICAgc2VydmVyVG9rZW5SZXNwb25zZT8uc3BhX2FjY291bnRpZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGFjY291bnRJbmZvOiBBY2NvdW50SW5mbyB8IG51bGwgPSBjYWNoZVJlY29yZC5hY2NvdW50XG4gICAgICAgICAgICA/IHVwZGF0ZUFjY291bnRUZW5hbnRQcm9maWxlRGF0YShcbiAgICAgICAgICAgICAgICAgIGNhY2hlUmVjb3JkLmFjY291bnQuZ2V0QWNjb3VudEluZm8oKSxcbiAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCwgLy8gdGVuYW50UHJvZmlsZSBvcHRpb25hbFxuICAgICAgICAgICAgICAgICAgaWRUb2tlbkNsYWltcyxcbiAgICAgICAgICAgICAgICAgIGNhY2hlUmVjb3JkLmlkVG9rZW4/LnNlY3JldFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICA6IG51bGw7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGF1dGhvcml0eTogYXV0aG9yaXR5LmNhbm9uaWNhbEF1dGhvcml0eSxcbiAgICAgICAgICAgIHVuaXF1ZUlkOiB1aWQsXG4gICAgICAgICAgICB0ZW5hbnRJZDogdGlkLFxuICAgICAgICAgICAgc2NvcGVzOiByZXNwb25zZVNjb3BlcyxcbiAgICAgICAgICAgIGFjY291bnQ6IGFjY291bnRJbmZvLFxuICAgICAgICAgICAgaWRUb2tlbjogY2FjaGVSZWNvcmQ/LmlkVG9rZW4/LnNlY3JldCB8fCBcIlwiLFxuICAgICAgICAgICAgaWRUb2tlbkNsYWltczogaWRUb2tlbkNsYWltcyB8fCB7fSxcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiBhY2Nlc3NUb2tlbixcbiAgICAgICAgICAgIGZyb21DYWNoZTogZnJvbVRva2VuQ2FjaGUsXG4gICAgICAgICAgICBleHBpcmVzT246IGV4cGlyZXNPbixcbiAgICAgICAgICAgIGV4dEV4cGlyZXNPbjogZXh0RXhwaXJlc09uLFxuICAgICAgICAgICAgcmVmcmVzaE9uOiByZWZyZXNoT24sXG4gICAgICAgICAgICBjb3JyZWxhdGlvbklkOiByZXF1ZXN0LmNvcnJlbGF0aW9uSWQsXG4gICAgICAgICAgICByZXF1ZXN0SWQ6IHJlcXVlc3RJZCB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HLFxuICAgICAgICAgICAgZmFtaWx5SWQ6IGZhbWlseUlkLFxuICAgICAgICAgICAgdG9rZW5UeXBlOlxuICAgICAgICAgICAgICAgIGNhY2hlUmVjb3JkLmFjY2Vzc1Rva2VuPy50b2tlblR5cGUgfHwgQ29uc3RhbnRzLkVNUFRZX1NUUklORyxcbiAgICAgICAgICAgIHN0YXRlOiByZXF1ZXN0U3RhdGVcbiAgICAgICAgICAgICAgICA/IHJlcXVlc3RTdGF0ZS51c2VyUmVxdWVzdFN0YXRlXG4gICAgICAgICAgICAgICAgOiBDb25zdGFudHMuRU1QVFlfU1RSSU5HLFxuICAgICAgICAgICAgY2xvdWRHcmFwaEhvc3ROYW1lOlxuICAgICAgICAgICAgICAgIGNhY2hlUmVjb3JkLmFjY291bnQ/LmNsb3VkR3JhcGhIb3N0TmFtZSB8fFxuICAgICAgICAgICAgICAgIENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgICAgICAgICBtc0dyYXBoSG9zdDpcbiAgICAgICAgICAgICAgICBjYWNoZVJlY29yZC5hY2NvdW50Py5tc0dyYXBoSG9zdCB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HLFxuICAgICAgICAgICAgY29kZTogc2VydmVyVG9rZW5SZXNwb25zZT8uc3BhX2NvZGUsXG4gICAgICAgICAgICBmcm9tTmF0aXZlQnJva2VyOiBmYWxzZSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBidWlsZEFjY291bnRUb0NhY2hlKFxuICAgIGNhY2hlU3RvcmFnZTogQ2FjaGVNYW5hZ2VyLFxuICAgIGF1dGhvcml0eTogQXV0aG9yaXR5LFxuICAgIGhvbWVBY2NvdW50SWQ6IHN0cmluZyxcbiAgICBiYXNlNjREZWNvZGU6IChpbnB1dDogc3RyaW5nKSA9PiBzdHJpbmcsXG4gICAgaWRUb2tlbkNsYWltcz86IFRva2VuQ2xhaW1zLFxuICAgIGNsaWVudEluZm8/OiBzdHJpbmcsXG4gICAgZW52aXJvbm1lbnQ/OiBzdHJpbmcsXG4gICAgY2xhaW1zVGVuYW50SWQ/OiBzdHJpbmcgfCBudWxsLFxuICAgIGF1dGhDb2RlUGF5bG9hZD86IEF1dGhvcml6YXRpb25Db2RlUGF5bG9hZCxcbiAgICBuYXRpdmVBY2NvdW50SWQ/OiBzdHJpbmcsXG4gICAgbG9nZ2VyPzogTG9nZ2VyXG4pOiBBY2NvdW50RW50aXR5IHtcbiAgICBsb2dnZXI/LnZlcmJvc2UoXCJzZXRDYWNoZWRBY2NvdW50IGNhbGxlZFwiKTtcblxuICAgIC8vIENoZWNrIGlmIGJhc2UgYWNjb3VudCBpcyBhbHJlYWR5IGNhY2hlZFxuICAgIGNvbnN0IGFjY291bnRLZXlzID0gY2FjaGVTdG9yYWdlLmdldEFjY291bnRLZXlzKCk7XG4gICAgY29uc3QgYmFzZUFjY291bnRLZXkgPSBhY2NvdW50S2V5cy5maW5kKChhY2NvdW50S2V5OiBzdHJpbmcpID0+IHtcbiAgICAgICAgcmV0dXJuIGFjY291bnRLZXkuc3RhcnRzV2l0aChob21lQWNjb3VudElkKTtcbiAgICB9KTtcblxuICAgIGxldCBjYWNoZWRBY2NvdW50OiBBY2NvdW50RW50aXR5IHwgbnVsbCA9IG51bGw7XG4gICAgaWYgKGJhc2VBY2NvdW50S2V5KSB7XG4gICAgICAgIGNhY2hlZEFjY291bnQgPSBjYWNoZVN0b3JhZ2UuZ2V0QWNjb3VudChiYXNlQWNjb3VudEtleSk7XG4gICAgfVxuXG4gICAgY29uc3QgYmFzZUFjY291bnQgPVxuICAgICAgICBjYWNoZWRBY2NvdW50IHx8XG4gICAgICAgIEFjY291bnRFbnRpdHkuY3JlYXRlQWNjb3VudChcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBob21lQWNjb3VudElkLFxuICAgICAgICAgICAgICAgIGlkVG9rZW5DbGFpbXMsXG4gICAgICAgICAgICAgICAgY2xpZW50SW5mbyxcbiAgICAgICAgICAgICAgICBlbnZpcm9ubWVudCxcbiAgICAgICAgICAgICAgICBjbG91ZEdyYXBoSG9zdE5hbWU6IGF1dGhDb2RlUGF5bG9hZD8uY2xvdWRfZ3JhcGhfaG9zdF9uYW1lLFxuICAgICAgICAgICAgICAgIG1zR3JhcGhIb3N0OiBhdXRoQ29kZVBheWxvYWQ/Lm1zZ3JhcGhfaG9zdCxcbiAgICAgICAgICAgICAgICBuYXRpdmVBY2NvdW50SWQ6IG5hdGl2ZUFjY291bnRJZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhdXRob3JpdHksXG4gICAgICAgICAgICBiYXNlNjREZWNvZGVcbiAgICAgICAgKTtcblxuICAgIGNvbnN0IHRlbmFudFByb2ZpbGVzID0gYmFzZUFjY291bnQudGVuYW50UHJvZmlsZXMgfHwgW107XG4gICAgY29uc3QgdGVuYW50SWQgPSBjbGFpbXNUZW5hbnRJZCB8fCBiYXNlQWNjb3VudC5yZWFsbTtcbiAgICBpZiAoXG4gICAgICAgIHRlbmFudElkICYmXG4gICAgICAgICF0ZW5hbnRQcm9maWxlcy5maW5kKCh0ZW5hbnRQcm9maWxlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGVuYW50UHJvZmlsZS50ZW5hbnRJZCA9PT0gdGVuYW50SWQ7XG4gICAgICAgIH0pXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IG5ld1RlbmFudFByb2ZpbGUgPSBidWlsZFRlbmFudFByb2ZpbGUoXG4gICAgICAgICAgICBob21lQWNjb3VudElkLFxuICAgICAgICAgICAgYmFzZUFjY291bnQubG9jYWxBY2NvdW50SWQsXG4gICAgICAgICAgICB0ZW5hbnRJZCxcbiAgICAgICAgICAgIGlkVG9rZW5DbGFpbXNcbiAgICAgICAgKTtcbiAgICAgICAgdGVuYW50UHJvZmlsZXMucHVzaChuZXdUZW5hbnRQcm9maWxlKTtcbiAgICB9XG4gICAgYmFzZUFjY291bnQudGVuYW50UHJvZmlsZXMgPSB0ZW5hbnRQcm9maWxlcztcblxuICAgIHJldHVybiBiYXNlQWNjb3VudDtcbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgICBjcmVhdGVDbGllbnRDb25maWd1cmF0aW9uRXJyb3IsXG4gICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMsXG59IGZyb20gXCIuLi9lcnJvci9DbGllbnRDb25maWd1cmF0aW9uRXJyb3IuanNcIjtcbmltcG9ydCB7IFByb21wdFZhbHVlLCBDb2RlQ2hhbGxlbmdlTWV0aG9kVmFsdWVzIH0gZnJvbSBcIi4uL3V0aWxzL0NvbnN0YW50cy5qc1wiO1xuXG4vKipcbiAqIFZhbGlkYXRlcyBzZXJ2ZXIgY29uc3VtYWJsZSBwYXJhbXMgZnJvbSB0aGUgXCJyZXF1ZXN0XCIgb2JqZWN0c1xuICovXG5leHBvcnQgY2xhc3MgUmVxdWVzdFZhbGlkYXRvciB7XG4gICAgLyoqXG4gICAgICogVXRpbGl0eSB0byBjaGVjayBpZiB0aGUgYHJlZGlyZWN0VXJpYCBpbiB0aGUgcmVxdWVzdCBpcyBhIG5vbi1udWxsIHZhbHVlXG4gICAgICogQHBhcmFtIHJlZGlyZWN0VXJpXG4gICAgICovXG4gICAgc3RhdGljIHZhbGlkYXRlUmVkaXJlY3RVcmkocmVkaXJlY3RVcmk6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZiAoIXJlZGlyZWN0VXJpKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRDb25maWd1cmF0aW9uRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMucmVkaXJlY3RVcmlFbXB0eVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFV0aWxpdHkgdG8gdmFsaWRhdGUgcHJvbXB0IHNlbnQgYnkgdGhlIHVzZXIgaW4gdGhlIHJlcXVlc3RcbiAgICAgKiBAcGFyYW0gcHJvbXB0XG4gICAgICovXG4gICAgc3RhdGljIHZhbGlkYXRlUHJvbXB0KHByb21wdDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHByb21wdFZhbHVlcyA9IFtdO1xuXG4gICAgICAgIGZvciAoY29uc3QgdmFsdWUgaW4gUHJvbXB0VmFsdWUpIHtcbiAgICAgICAgICAgIHByb21wdFZhbHVlcy5wdXNoKFByb21wdFZhbHVlW3ZhbHVlXSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocHJvbXB0VmFsdWVzLmluZGV4T2YocHJvbXB0KSA8IDApIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudENvbmZpZ3VyYXRpb25FcnJvcihcbiAgICAgICAgICAgICAgICBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5pbnZhbGlkUHJvbXB0VmFsdWVcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgdmFsaWRhdGVDbGFpbXMoY2xhaW1zOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIEpTT04ucGFyc2UoY2xhaW1zKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yKFxuICAgICAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmludmFsaWRDbGFpbXNcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVdGlsaXR5IHRvIHZhbGlkYXRlIGNvZGVfY2hhbGxlbmdlIGFuZCBjb2RlX2NoYWxsZW5nZV9tZXRob2RcbiAgICAgKiBAcGFyYW0gY29kZUNoYWxsZW5nZVxuICAgICAqIEBwYXJhbSBjb2RlQ2hhbGxlbmdlTWV0aG9kXG4gICAgICovXG4gICAgc3RhdGljIHZhbGlkYXRlQ29kZUNoYWxsZW5nZVBhcmFtcyhcbiAgICAgICAgY29kZUNoYWxsZW5nZTogc3RyaW5nLFxuICAgICAgICBjb2RlQ2hhbGxlbmdlTWV0aG9kOiBzdHJpbmdcbiAgICApOiB2b2lkIHtcbiAgICAgICAgaWYgKCFjb2RlQ2hhbGxlbmdlIHx8ICFjb2RlQ2hhbGxlbmdlTWV0aG9kKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRDb25maWd1cmF0aW9uRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMucGtjZVBhcmFtc01pc3NpbmdcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlQ29kZUNoYWxsZW5nZU1ldGhvZChjb2RlQ2hhbGxlbmdlTWV0aG9kKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFV0aWxpdHkgdG8gdmFsaWRhdGUgY29kZV9jaGFsbGVuZ2VfbWV0aG9kXG4gICAgICogQHBhcmFtIGNvZGVDaGFsbGVuZ2VNZXRob2RcbiAgICAgKi9cbiAgICBzdGF0aWMgdmFsaWRhdGVDb2RlQ2hhbGxlbmdlTWV0aG9kKGNvZGVDaGFsbGVuZ2VNZXRob2Q6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgQ29kZUNoYWxsZW5nZU1ldGhvZFZhbHVlcy5QTEFJTixcbiAgICAgICAgICAgICAgICBDb2RlQ2hhbGxlbmdlTWV0aG9kVmFsdWVzLlMyNTYsXG4gICAgICAgICAgICBdLmluZGV4T2YoY29kZUNoYWxsZW5nZU1ldGhvZCkgPCAwXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yKFxuICAgICAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmludmFsaWRDb2RlQ2hhbGxlbmdlTWV0aG9kXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICAgIENsaWVudEFzc2VydGlvbkNhbGxiYWNrLFxuICAgIENsaWVudEFzc2VydGlvbkNvbmZpZyxcbn0gZnJvbSBcIi4uL2FjY291bnQvQ2xpZW50Q3JlZGVudGlhbHMuanNcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENsaWVudEFzc2VydGlvbihcbiAgICBjbGllbnRBc3NlcnRpb246IHN0cmluZyB8IENsaWVudEFzc2VydGlvbkNhbGxiYWNrLFxuICAgIGNsaWVudElkOiBzdHJpbmcsXG4gICAgdG9rZW5FbmRwb2ludD86IHN0cmluZ1xuKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBpZiAodHlwZW9mIGNsaWVudEFzc2VydGlvbiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gY2xpZW50QXNzZXJ0aW9uO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZzogQ2xpZW50QXNzZXJ0aW9uQ29uZmlnID0ge1xuICAgICAgICAgICAgY2xpZW50SWQ6IGNsaWVudElkLFxuICAgICAgICAgICAgdG9rZW5FbmRwb2ludDogdG9rZW5FbmRwb2ludCxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGNsaWVudEFzc2VydGlvbihjb25maWcpO1xuICAgIH1cbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQmFzZUNsaWVudCB9IGZyb20gXCIuL0Jhc2VDbGllbnQuanNcIjtcbmltcG9ydCB7IENvbW1vbkF1dGhvcml6YXRpb25Db2RlUmVxdWVzdCB9IGZyb20gXCIuLi9yZXF1ZXN0L0NvbW1vbkF1dGhvcml6YXRpb25Db2RlUmVxdWVzdC5qc1wiO1xuaW1wb3J0IHsgQXV0aG9yaXR5IH0gZnJvbSBcIi4uL2F1dGhvcml0eS9BdXRob3JpdHkuanNcIjtcbmltcG9ydCAqIGFzIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyIGZyb20gXCIuLi9yZXF1ZXN0L1JlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmpzXCI7XG5pbXBvcnQgKiBhcyBVcmxVdGlscyBmcm9tIFwiLi4vdXRpbHMvVXJsVXRpbHMuanNcIjtcbmltcG9ydCB7XG4gICAgR3JhbnRUeXBlLFxuICAgIEF1dGhlbnRpY2F0aW9uU2NoZW1lLFxuICAgIFNlcGFyYXRvcnMsXG4gICAgSGVhZGVyTmFtZXMsXG59IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcbmltcG9ydCAqIGFzIEFBRFNlcnZlclBhcmFtS2V5cyBmcm9tIFwiLi4vY29uc3RhbnRzL0FBRFNlcnZlclBhcmFtS2V5cy5qc1wiO1xuaW1wb3J0IHtcbiAgICBDbGllbnRDb25maWd1cmF0aW9uLFxuICAgIGlzT2lkY1Byb3RvY29sTW9kZSxcbn0gZnJvbSBcIi4uL2NvbmZpZy9DbGllbnRDb25maWd1cmF0aW9uLmpzXCI7XG5pbXBvcnQgeyBTZXJ2ZXJBdXRob3JpemF0aW9uVG9rZW5SZXNwb25zZSB9IGZyb20gXCIuLi9yZXNwb25zZS9TZXJ2ZXJBdXRob3JpemF0aW9uVG9rZW5SZXNwb25zZS5qc1wiO1xuaW1wb3J0IHsgTmV0d29ya1Jlc3BvbnNlIH0gZnJvbSBcIi4uL25ldHdvcmsvTmV0d29ya1Jlc3BvbnNlLmpzXCI7XG5pbXBvcnQgeyBSZXNwb25zZUhhbmRsZXIgfSBmcm9tIFwiLi4vcmVzcG9uc2UvUmVzcG9uc2VIYW5kbGVyLmpzXCI7XG5pbXBvcnQgeyBBdXRoZW50aWNhdGlvblJlc3VsdCB9IGZyb20gXCIuLi9yZXNwb25zZS9BdXRoZW50aWNhdGlvblJlc3VsdC5qc1wiO1xuaW1wb3J0IHsgU3RyaW5nVXRpbHMgfSBmcm9tIFwiLi4vdXRpbHMvU3RyaW5nVXRpbHMuanNcIjtcbmltcG9ydCB7XG4gICAgQ2xpZW50QXV0aEVycm9yQ29kZXMsXG4gICAgY3JlYXRlQ2xpZW50QXV0aEVycm9yLFxufSBmcm9tIFwiLi4vZXJyb3IvQ2xpZW50QXV0aEVycm9yLmpzXCI7XG5pbXBvcnQgeyBVcmxTdHJpbmcgfSBmcm9tIFwiLi4vdXJsL1VybFN0cmluZy5qc1wiO1xuaW1wb3J0IHsgQ29tbW9uRW5kU2Vzc2lvblJlcXVlc3QgfSBmcm9tIFwiLi4vcmVxdWVzdC9Db21tb25FbmRTZXNzaW9uUmVxdWVzdC5qc1wiO1xuaW1wb3J0IHsgUG9wVG9rZW5HZW5lcmF0b3IgfSBmcm9tIFwiLi4vY3J5cHRvL1BvcFRva2VuR2VuZXJhdG9yLmpzXCI7XG5pbXBvcnQgeyBBdXRob3JpemF0aW9uQ29kZVBheWxvYWQgfSBmcm9tIFwiLi4vcmVzcG9uc2UvQXV0aG9yaXphdGlvbkNvZGVQYXlsb2FkLmpzXCI7XG5pbXBvcnQgKiBhcyBUaW1lVXRpbHMgZnJvbSBcIi4uL3V0aWxzL1RpbWVVdGlscy5qc1wiO1xuaW1wb3J0IHtcbiAgICBidWlsZENsaWVudEluZm9Gcm9tSG9tZUFjY291bnRJZCxcbiAgICBidWlsZENsaWVudEluZm8sXG59IGZyb20gXCIuLi9hY2NvdW50L0NsaWVudEluZm8uanNcIjtcbmltcG9ydCB7IENjc0NyZWRlbnRpYWxUeXBlLCBDY3NDcmVkZW50aWFsIH0gZnJvbSBcIi4uL2FjY291bnQvQ2NzQ3JlZGVudGlhbC5qc1wiO1xuaW1wb3J0IHtcbiAgICBjcmVhdGVDbGllbnRDb25maWd1cmF0aW9uRXJyb3IsXG4gICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMsXG59IGZyb20gXCIuLi9lcnJvci9DbGllbnRDb25maWd1cmF0aW9uRXJyb3IuanNcIjtcbmltcG9ydCB7IFJlcXVlc3RWYWxpZGF0b3IgfSBmcm9tIFwiLi4vcmVxdWVzdC9SZXF1ZXN0VmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgeyBJUGVyZm9ybWFuY2VDbGllbnQgfSBmcm9tIFwiLi4vdGVsZW1ldHJ5L3BlcmZvcm1hbmNlL0lQZXJmb3JtYW5jZUNsaWVudC5qc1wiO1xuaW1wb3J0IHsgUGVyZm9ybWFuY2VFdmVudHMgfSBmcm9tIFwiLi4vdGVsZW1ldHJ5L3BlcmZvcm1hbmNlL1BlcmZvcm1hbmNlRXZlbnQuanNcIjtcbmltcG9ydCB7IGludm9rZUFzeW5jIH0gZnJvbSBcIi4uL3V0aWxzL0Z1bmN0aW9uV3JhcHBlcnMuanNcIjtcbmltcG9ydCB7IENsaWVudEFzc2VydGlvbiB9IGZyb20gXCIuLi9hY2NvdW50L0NsaWVudENyZWRlbnRpYWxzLmpzXCI7XG5pbXBvcnQgeyBnZXRDbGllbnRBc3NlcnRpb24gfSBmcm9tIFwiLi4vdXRpbHMvQ2xpZW50QXNzZXJ0aW9uVXRpbHMuanNcIjtcbmltcG9ydCB7IGdldFJlcXVlc3RUaHVtYnByaW50IH0gZnJvbSBcIi4uL25ldHdvcmsvUmVxdWVzdFRodW1icHJpbnQuanNcIjtcblxuLyoqXG4gKiBPYXV0aDIuMCBBdXRob3JpemF0aW9uIENvZGUgY2xpZW50XG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGNsYXNzIEF1dGhvcml6YXRpb25Db2RlQ2xpZW50IGV4dGVuZHMgQmFzZUNsaWVudCB7XG4gICAgLy8gRmxhZyB0byBpbmRpY2F0ZSBpZiBjbGllbnQgaXMgZm9yIGh5YnJpZCBzcGEgYXV0aCBjb2RlIHJlZGVtcHRpb25cbiAgICBwcm90ZWN0ZWQgaW5jbHVkZVJlZGlyZWN0VXJpOiBib29sZWFuID0gdHJ1ZTtcbiAgICBwcml2YXRlIG9pZGNEZWZhdWx0U2NvcGVzO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGNvbmZpZ3VyYXRpb246IENsaWVudENvbmZpZ3VyYXRpb24sXG4gICAgICAgIHBlcmZvcm1hbmNlQ2xpZW50PzogSVBlcmZvcm1hbmNlQ2xpZW50XG4gICAgKSB7XG4gICAgICAgIHN1cGVyKGNvbmZpZ3VyYXRpb24sIHBlcmZvcm1hbmNlQ2xpZW50KTtcbiAgICAgICAgdGhpcy5vaWRjRGVmYXVsdFNjb3BlcyA9XG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5hdXRob3JpdHkub3B0aW9ucy5PSURDT3B0aW9ucz8uZGVmYXVsdFNjb3BlcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBUEkgdG8gYWNxdWlyZSBhIHRva2VuIGluIGV4Y2hhbmdlIG9mICdhdXRob3JpemF0aW9uX2NvZGVgIGFjcXVpcmVkIGJ5IHRoZSB1c2VyIGluIHRoZSBmaXJzdCBsZWcgb2YgdGhlXG4gICAgICogYXV0aG9yaXphdGlvbl9jb2RlX2dyYW50XG4gICAgICogQHBhcmFtIHJlcXVlc3RcbiAgICAgKi9cbiAgICBhc3luYyBhY3F1aXJlVG9rZW4oXG4gICAgICAgIHJlcXVlc3Q6IENvbW1vbkF1dGhvcml6YXRpb25Db2RlUmVxdWVzdCxcbiAgICAgICAgYXV0aENvZGVQYXlsb2FkPzogQXV0aG9yaXphdGlvbkNvZGVQYXlsb2FkXG4gICAgKTogUHJvbWlzZTxBdXRoZW50aWNhdGlvblJlc3VsdD4ge1xuICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50Py5hZGRRdWV1ZU1lYXN1cmVtZW50KFxuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuQXV0aENsaWVudEFjcXVpcmVUb2tlbixcbiAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuXG4gICAgICAgIGlmICghcmVxdWVzdC5jb2RlKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMucmVxdWVzdENhbm5vdEJlTWFkZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlcVRpbWVzdGFtcCA9IFRpbWVVdGlscy5ub3dTZWNvbmRzKCk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgaW52b2tlQXN5bmMoXG4gICAgICAgICAgICB0aGlzLmV4ZWN1dGVUb2tlblJlcXVlc3QuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkF1dGhDbGllbnRFeGVjdXRlVG9rZW5SZXF1ZXN0LFxuICAgICAgICAgICAgdGhpcy5sb2dnZXIsXG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50LFxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICkodGhpcy5hdXRob3JpdHksIHJlcXVlc3QpO1xuXG4gICAgICAgIC8vIFJldHJpZXZlIHJlcXVlc3RJZCBmcm9tIHJlc3BvbnNlIGhlYWRlcnNcbiAgICAgICAgY29uc3QgcmVxdWVzdElkID0gcmVzcG9uc2UuaGVhZGVycz8uW0hlYWRlck5hbWVzLlhfTVNfUkVRVUVTVF9JRF07XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2VIYW5kbGVyID0gbmV3IFJlc3BvbnNlSGFuZGxlcihcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmF1dGhPcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgICAgdGhpcy5jYWNoZU1hbmFnZXIsXG4gICAgICAgICAgICB0aGlzLmNyeXB0b1V0aWxzLFxuICAgICAgICAgICAgdGhpcy5sb2dnZXIsXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5zZXJpYWxpemFibGVDYWNoZSxcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLnBlcnNpc3RlbmNlUGx1Z2luLFxuICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudFxuICAgICAgICApO1xuXG4gICAgICAgIC8vIFZhbGlkYXRlIHJlc3BvbnNlLiBUaGlzIGZ1bmN0aW9uIHRocm93cyBhIHNlcnZlciBlcnJvciBpZiBhbiBlcnJvciBpcyByZXR1cm5lZCBieSB0aGUgc2VydmVyLlxuICAgICAgICByZXNwb25zZUhhbmRsZXIudmFsaWRhdGVUb2tlblJlc3BvbnNlKHJlc3BvbnNlLmJvZHkpO1xuXG4gICAgICAgIHJldHVybiBpbnZva2VBc3luYyhcbiAgICAgICAgICAgIHJlc3BvbnNlSGFuZGxlci5oYW5kbGVTZXJ2ZXJUb2tlblJlc3BvbnNlLmJpbmQocmVzcG9uc2VIYW5kbGVyKSxcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkhhbmRsZVNlcnZlclRva2VuUmVzcG9uc2UsXG4gICAgICAgICAgICB0aGlzLmxvZ2dlcixcbiAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQsXG4gICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKShcbiAgICAgICAgICAgIHJlc3BvbnNlLmJvZHksXG4gICAgICAgICAgICB0aGlzLmF1dGhvcml0eSxcbiAgICAgICAgICAgIHJlcVRpbWVzdGFtcCxcbiAgICAgICAgICAgIHJlcXVlc3QsXG4gICAgICAgICAgICBhdXRoQ29kZVBheWxvYWQsXG4gICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICByZXF1ZXN0SWRcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2VkIHRvIGxvZyBvdXQgdGhlIGN1cnJlbnQgdXNlciwgYW5kIHJlZGlyZWN0IHRoZSB1c2VyIHRvIHRoZSBwb3N0TG9nb3V0UmVkaXJlY3RVcmkuXG4gICAgICogRGVmYXVsdCBiZWhhdmlvdXIgaXMgdG8gcmVkaXJlY3QgdGhlIHVzZXIgdG8gYHdpbmRvdy5sb2NhdGlvbi5ocmVmYC5cbiAgICAgKiBAcGFyYW0gYXV0aG9yaXR5VXJpXG4gICAgICovXG4gICAgZ2V0TG9nb3V0VXJpKGxvZ291dFJlcXVlc3Q6IENvbW1vbkVuZFNlc3Npb25SZXF1ZXN0KTogc3RyaW5nIHtcbiAgICAgICAgLy8gVGhyb3cgZXJyb3IgaWYgbG9nb3V0UmVxdWVzdCBpcyBudWxsL3VuZGVmaW5lZFxuICAgICAgICBpZiAoIWxvZ291dFJlcXVlc3QpIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudENvbmZpZ3VyYXRpb25FcnJvcihcbiAgICAgICAgICAgICAgICBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5sb2dvdXRSZXF1ZXN0RW1wdHlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcXVlcnlTdHJpbmcgPSB0aGlzLmNyZWF0ZUxvZ291dFVybFF1ZXJ5U3RyaW5nKGxvZ291dFJlcXVlc3QpO1xuXG4gICAgICAgIC8vIENvbnN0cnVjdCBsb2dvdXQgVVJJXG4gICAgICAgIHJldHVybiBVcmxTdHJpbmcuYXBwZW5kUXVlcnlTdHJpbmcoXG4gICAgICAgICAgICB0aGlzLmF1dGhvcml0eS5lbmRTZXNzaW9uRW5kcG9pbnQsXG4gICAgICAgICAgICBxdWVyeVN0cmluZ1xuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4ZWN1dGVzIFBPU1QgcmVxdWVzdCB0byB0b2tlbiBlbmRwb2ludFxuICAgICAqIEBwYXJhbSBhdXRob3JpdHlcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgZXhlY3V0ZVRva2VuUmVxdWVzdChcbiAgICAgICAgYXV0aG9yaXR5OiBBdXRob3JpdHksXG4gICAgICAgIHJlcXVlc3Q6IENvbW1vbkF1dGhvcml6YXRpb25Db2RlUmVxdWVzdFxuICAgICk6IFByb21pc2U8TmV0d29ya1Jlc3BvbnNlPFNlcnZlckF1dGhvcml6YXRpb25Ub2tlblJlc3BvbnNlPj4ge1xuICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50Py5hZGRRdWV1ZU1lYXN1cmVtZW50KFxuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuQXV0aENsaWVudEV4ZWN1dGVUb2tlblJlcXVlc3QsXG4gICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnNTdHJpbmcgPSB0aGlzLmNyZWF0ZVRva2VuUXVlcnlQYXJhbWV0ZXJzKHJlcXVlc3QpO1xuICAgICAgICBjb25zdCBlbmRwb2ludCA9IFVybFN0cmluZy5hcHBlbmRRdWVyeVN0cmluZyhcbiAgICAgICAgICAgIGF1dGhvcml0eS50b2tlbkVuZHBvaW50LFxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzU3RyaW5nXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgcmVxdWVzdEJvZHkgPSBhd2FpdCBpbnZva2VBc3luYyhcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlVG9rZW5SZXF1ZXN0Qm9keS5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuQXV0aENsaWVudENyZWF0ZVRva2VuUmVxdWVzdEJvZHksXG4gICAgICAgICAgICB0aGlzLmxvZ2dlcixcbiAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQsXG4gICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKShyZXF1ZXN0KTtcblxuICAgICAgICBsZXQgY2NzQ3JlZGVudGlhbDogQ2NzQ3JlZGVudGlhbCB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHJlcXVlc3QuY2xpZW50SW5mbykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjbGllbnRJbmZvID0gYnVpbGRDbGllbnRJbmZvKFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LmNsaWVudEluZm8sXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3J5cHRvVXRpbHMuYmFzZTY0RGVjb2RlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBjY3NDcmVkZW50aWFsID0ge1xuICAgICAgICAgICAgICAgICAgICBjcmVkZW50aWFsOiBgJHtjbGllbnRJbmZvLnVpZH0ke1NlcGFyYXRvcnMuQ0xJRU5UX0lORk9fU0VQQVJBVE9SfSR7Y2xpZW50SW5mby51dGlkfWAsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IENjc0NyZWRlbnRpYWxUeXBlLkhPTUVfQUNDT1VOVF9JRCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgICAgIFwiQ291bGQgbm90IHBhcnNlIGNsaWVudCBpbmZvIGZvciBDQ1MgSGVhZGVyOiBcIiArIGVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB0aGlzLmNyZWF0ZVRva2VuUmVxdWVzdEhlYWRlcnMoXG4gICAgICAgICAgICBjY3NDcmVkZW50aWFsIHx8IHJlcXVlc3QuY2NzQ3JlZGVudGlhbFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHRodW1icHJpbnQgPSBnZXRSZXF1ZXN0VGh1bWJwcmludChcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmF1dGhPcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgICAgcmVxdWVzdFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiBpbnZva2VBc3luYyhcbiAgICAgICAgICAgIHRoaXMuZXhlY3V0ZVBvc3RUb1Rva2VuRW5kcG9pbnQuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkF1dGhvcml6YXRpb25Db2RlQ2xpZW50RXhlY3V0ZVBvc3RUb1Rva2VuRW5kcG9pbnQsXG4gICAgICAgICAgICB0aGlzLmxvZ2dlcixcbiAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQsXG4gICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKShcbiAgICAgICAgICAgIGVuZHBvaW50LFxuICAgICAgICAgICAgcmVxdWVzdEJvZHksXG4gICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgdGh1bWJwcmludCxcbiAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZCxcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkF1dGhvcml6YXRpb25Db2RlQ2xpZW50RXhlY3V0ZVBvc3RUb1Rva2VuRW5kcG9pbnRcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgYSBtYXAgZm9yIGFsbCB0aGUgcGFyYW1zIHRvIGJlIHNlbnQgdG8gdGhlIHNlcnZpY2VcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgY3JlYXRlVG9rZW5SZXF1ZXN0Qm9keShcbiAgICAgICAgcmVxdWVzdDogQ29tbW9uQXV0aG9yaXphdGlvbkNvZGVSZXF1ZXN0XG4gICAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudD8uYWRkUXVldWVNZWFzdXJlbWVudChcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLkF1dGhDbGllbnRDcmVhdGVUb2tlblJlcXVlc3RCb2R5LFxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgcGFyYW1ldGVycyA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmc+KCk7XG5cbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2xpZW50SWQoXG4gICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgcmVxdWVzdC5lbWJlZGRlZENsaWVudElkIHx8XG4gICAgICAgICAgICAgICAgcmVxdWVzdC50b2tlbkJvZHlQYXJhbWV0ZXJzPy5bQUFEU2VydmVyUGFyYW1LZXlzLkNMSUVOVF9JRF0gfHxcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRJZFxuICAgICAgICApO1xuXG4gICAgICAgIC8qXG4gICAgICAgICAqIEZvciBoeWJyaWQgc3BhIGZsb3csIHRoZXJlIHdpbGwgYmUgYSBjb2RlIGJ1dCBubyB2ZXJpZmllclxuICAgICAgICAgKiBJbiB0aGlzIHNjZW5hcmlvLCBkb24ndCBpbmNsdWRlIHJlZGlyZWN0IHVyaSBhcyBhdXRoIGNvZGUgd2lsbCBub3QgYmUgYm91bmQgdG8gcmVkaXJlY3QgVVJJXG4gICAgICAgICAqL1xuICAgICAgICBpZiAoIXRoaXMuaW5jbHVkZVJlZGlyZWN0VXJpKSB7XG4gICAgICAgICAgICAvLyBKdXN0IHZhbGlkYXRlXG4gICAgICAgICAgICBSZXF1ZXN0VmFsaWRhdG9yLnZhbGlkYXRlUmVkaXJlY3RVcmkocmVxdWVzdC5yZWRpcmVjdFVyaSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBWYWxpZGF0ZSBhbmQgaW5jbHVkZSByZWRpcmVjdCB1cmlcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFJlZGlyZWN0VXJpKFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5yZWRpcmVjdFVyaVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFkZCBzY29wZSBhcnJheSwgcGFyYW1ldGVyIGJ1aWxkZXIgd2lsbCBhZGQgZGVmYXVsdCBzY29wZXMgYW5kIGRlZHVwZVxuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRTY29wZXMoXG4gICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgcmVxdWVzdC5zY29wZXMsXG4gICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgdGhpcy5vaWRjRGVmYXVsdFNjb3Blc1xuICAgICAgICApO1xuXG4gICAgICAgIC8vIGFkZCBjb2RlOiB1c2VyIHNldCwgbm90IHZhbGlkYXRlZFxuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRBdXRob3JpemF0aW9uQ29kZShwYXJhbWV0ZXJzLCByZXF1ZXN0LmNvZGUpO1xuXG4gICAgICAgIC8vIEFkZCBsaWJyYXJ5IG1ldGFkYXRhXG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZExpYnJhcnlJbmZvKFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmxpYnJhcnlJbmZvXG4gICAgICAgICk7XG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZEFwcGxpY2F0aW9uVGVsZW1ldHJ5KFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLnRlbGVtZXRyeS5hcHBsaWNhdGlvblxuICAgICAgICApO1xuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRUaHJvdHRsaW5nKHBhcmFtZXRlcnMpO1xuXG4gICAgICAgIGlmICh0aGlzLnNlcnZlclRlbGVtZXRyeU1hbmFnZXIgJiYgIWlzT2lkY1Byb3RvY29sTW9kZSh0aGlzLmNvbmZpZykpIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFNlcnZlclRlbGVtZXRyeShcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHRoaXMuc2VydmVyVGVsZW1ldHJ5TWFuYWdlclxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGFkZCBjb2RlX3ZlcmlmaWVyIGlmIHBhc3NlZFxuICAgICAgICBpZiAocmVxdWVzdC5jb2RlVmVyaWZpZXIpIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENvZGVWZXJpZmllcihcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlcXVlc3QuY29kZVZlcmlmaWVyXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmNsaWVudENyZWRlbnRpYWxzLmNsaWVudFNlY3JldCkge1xuICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2xpZW50U2VjcmV0KFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcuY2xpZW50Q3JlZGVudGlhbHMuY2xpZW50U2VjcmV0XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmNsaWVudENyZWRlbnRpYWxzLmNsaWVudEFzc2VydGlvbikge1xuICAgICAgICAgICAgY29uc3QgY2xpZW50QXNzZXJ0aW9uOiBDbGllbnRBc3NlcnRpb24gPVxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmNsaWVudENyZWRlbnRpYWxzLmNsaWVudEFzc2VydGlvbjtcblxuICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2xpZW50QXNzZXJ0aW9uKFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYXdhaXQgZ2V0Q2xpZW50QXNzZXJ0aW9uKFxuICAgICAgICAgICAgICAgICAgICBjbGllbnRBc3NlcnRpb24uYXNzZXJ0aW9uLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5yZXNvdXJjZVJlcXVlc3RVcmlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2xpZW50QXNzZXJ0aW9uVHlwZShcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGNsaWVudEFzc2VydGlvbi5hc3NlcnRpb25UeXBlXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkR3JhbnRUeXBlKFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIEdyYW50VHlwZS5BVVRIT1JJWkFUSU9OX0NPREVfR1JBTlRcbiAgICAgICAgKTtcbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2xpZW50SW5mbyhwYXJhbWV0ZXJzKTtcblxuICAgICAgICBpZiAocmVxdWVzdC5hdXRoZW50aWNhdGlvblNjaGVtZSA9PT0gQXV0aGVudGljYXRpb25TY2hlbWUuUE9QKSB7XG4gICAgICAgICAgICBjb25zdCBwb3BUb2tlbkdlbmVyYXRvciA9IG5ldyBQb3BUb2tlbkdlbmVyYXRvcihcbiAgICAgICAgICAgICAgICB0aGlzLmNyeXB0b1V0aWxzLFxuICAgICAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnRcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGxldCByZXFDbmZEYXRhO1xuICAgICAgICAgICAgaWYgKCFyZXF1ZXN0LnBvcEtpZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGdlbmVyYXRlZFJlcUNuZkRhdGEgPSBhd2FpdCBpbnZva2VBc3luYyhcbiAgICAgICAgICAgICAgICAgICAgcG9wVG9rZW5HZW5lcmF0b3IuZ2VuZXJhdGVDbmYuYmluZChwb3BUb2tlbkdlbmVyYXRvciksXG4gICAgICAgICAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLlBvcFRva2VuR2VuZXJhdGVDbmYsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50LFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICAgICApKHJlcXVlc3QsIHRoaXMubG9nZ2VyKTtcbiAgICAgICAgICAgICAgICByZXFDbmZEYXRhID0gZ2VuZXJhdGVkUmVxQ25mRGF0YS5yZXFDbmZTdHJpbmc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlcUNuZkRhdGEgPSB0aGlzLmNyeXB0b1V0aWxzLmVuY29kZUtpZChyZXF1ZXN0LnBvcEtpZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFNQQSBQb1AgcmVxdWlyZXMgZnVsbCBCYXNlNjRVcmwgZW5jb2RlZCByZXFfY25mIHN0cmluZyAodW5oYXNoZWQpXG4gICAgICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRQb3BUb2tlbihwYXJhbWV0ZXJzLCByZXFDbmZEYXRhKTtcbiAgICAgICAgfSBlbHNlIGlmIChyZXF1ZXN0LmF1dGhlbnRpY2F0aW9uU2NoZW1lID09PSBBdXRoZW50aWNhdGlvblNjaGVtZS5TU0gpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0LnNzaEp3aykge1xuICAgICAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFNzaEp3ayhwYXJhbWV0ZXJzLCByZXF1ZXN0LnNzaEp3ayk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudENvbmZpZ3VyYXRpb25FcnJvcihcbiAgICAgICAgICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMubWlzc2luZ1NzaEp3a1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhU3RyaW5nVXRpbHMuaXNFbXB0eU9iaihyZXF1ZXN0LmNsYWltcykgfHxcbiAgICAgICAgICAgICh0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRDYXBhYmlsaXRpZXMgJiZcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRDYXBhYmlsaXRpZXMubGVuZ3RoID4gMClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDbGFpbXMoXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmNsYWltcyxcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRDYXBhYmlsaXRpZXNcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY2NzQ3JlZDogQ2NzQ3JlZGVudGlhbCB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHJlcXVlc3QuY2xpZW50SW5mbykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjbGllbnRJbmZvID0gYnVpbGRDbGllbnRJbmZvKFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LmNsaWVudEluZm8sXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3J5cHRvVXRpbHMuYmFzZTY0RGVjb2RlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBjY3NDcmVkID0ge1xuICAgICAgICAgICAgICAgICAgICBjcmVkZW50aWFsOiBgJHtjbGllbnRJbmZvLnVpZH0ke1NlcGFyYXRvcnMuQ0xJRU5UX0lORk9fU0VQQVJBVE9SfSR7Y2xpZW50SW5mby51dGlkfWAsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IENjc0NyZWRlbnRpYWxUeXBlLkhPTUVfQUNDT1VOVF9JRCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgICAgIFwiQ291bGQgbm90IHBhcnNlIGNsaWVudCBpbmZvIGZvciBDQ1MgSGVhZGVyOiBcIiArIGVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2NzQ3JlZCA9IHJlcXVlc3QuY2NzQ3JlZGVudGlhbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFkZHMgdGhlc2UgYXMgcGFyYW1ldGVycyBpbiB0aGUgcmVxdWVzdCBpbnN0ZWFkIG9mIGhlYWRlcnMgdG8gcHJldmVudCBDT1JTIHByZWZsaWdodCByZXF1ZXN0XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5zeXN0ZW1PcHRpb25zLnByZXZlbnRDb3JzUHJlZmxpZ2h0ICYmIGNjc0NyZWQpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoY2NzQ3JlZC50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBDY3NDcmVkZW50aWFsVHlwZS5IT01FX0FDQ09VTlRfSUQ6XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjbGllbnRJbmZvID0gYnVpbGRDbGllbnRJbmZvRnJvbUhvbWVBY2NvdW50SWQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2NzQ3JlZC5jcmVkZW50aWFsXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2NzT2lkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50SW5mb1xuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIudmVyYm9zZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkNvdWxkIG5vdCBwYXJzZSBob21lIGFjY291bnQgSUQgZm9yIENDUyBIZWFkZXI6IFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIENjc0NyZWRlbnRpYWxUeXBlLlVQTjpcbiAgICAgICAgICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2NzVXBuKFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNjc0NyZWQuY3JlZGVudGlhbFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXF1ZXN0LmVtYmVkZGVkQ2xpZW50SWQpIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZEJyb2tlclBhcmFtZXRlcnMoXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5yZWRpcmVjdFVyaVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXF1ZXN0LnRva2VuQm9keVBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZEV4dHJhUXVlcnlQYXJhbWV0ZXJzKFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVxdWVzdC50b2tlbkJvZHlQYXJhbWV0ZXJzXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWRkIGh5YnJpZCBzcGEgcGFyYW1ldGVycyBpZiBub3QgYWxyZWFkeSBwcm92aWRlZFxuICAgICAgICBpZiAoXG4gICAgICAgICAgICByZXF1ZXN0LmVuYWJsZVNwYUF1dGhvcml6YXRpb25Db2RlICYmXG4gICAgICAgICAgICAoIXJlcXVlc3QudG9rZW5Cb2R5UGFyYW1ldGVycyB8fFxuICAgICAgICAgICAgICAgICFyZXF1ZXN0LnRva2VuQm9keVBhcmFtZXRlcnNbXG4gICAgICAgICAgICAgICAgICAgIEFBRFNlcnZlclBhcmFtS2V5cy5SRVRVUk5fU1BBX0NPREVcbiAgICAgICAgICAgICAgICBdKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZEV4dHJhUXVlcnlQYXJhbWV0ZXJzKHBhcmFtZXRlcnMsIHtcbiAgICAgICAgICAgICAgICBbQUFEU2VydmVyUGFyYW1LZXlzLlJFVFVSTl9TUEFfQ09ERV06IFwiMVwiLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5pbnN0cnVtZW50QnJva2VyUGFyYW1zKFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZCxcbiAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnRcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIFVybFV0aWxzLm1hcFRvUXVlcnlTdHJpbmcocGFyYW1ldGVycyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBBUEkgdmFsaWRhdGVzIHRoZSBgRW5kU2Vzc2lvblJlcXVlc3RgIGFuZCBjcmVhdGVzIGEgVVJMXG4gICAgICogQHBhcmFtIHJlcXVlc3RcbiAgICAgKi9cbiAgICBwcml2YXRlIGNyZWF0ZUxvZ291dFVybFF1ZXJ5U3RyaW5nKFxuICAgICAgICByZXF1ZXN0OiBDb21tb25FbmRTZXNzaW9uUmVxdWVzdFxuICAgICk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSBuZXcgTWFwPHN0cmluZywgc3RyaW5nPigpO1xuXG4gICAgICAgIGlmIChyZXF1ZXN0LnBvc3RMb2dvdXRSZWRpcmVjdFVyaSkge1xuICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkUG9zdExvZ291dFJlZGlyZWN0VXJpKFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5wb3N0TG9nb3V0UmVkaXJlY3RVcmlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVxdWVzdC5jb3JyZWxhdGlvbklkKSB7XG4gICAgICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDb3JyZWxhdGlvbklkKFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlcXVlc3QuaWRUb2tlbkhpbnQpIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZElkVG9rZW5IaW50KFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5pZFRva2VuSGludFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXF1ZXN0LnN0YXRlKSB7XG4gICAgICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRTdGF0ZShwYXJhbWV0ZXJzLCByZXF1ZXN0LnN0YXRlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXF1ZXN0LmxvZ291dEhpbnQpIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZExvZ291dEhpbnQoXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmxvZ291dEhpbnRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVxdWVzdC5leHRyYVF1ZXJ5UGFyYW1ldGVycykge1xuICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkRXh0cmFRdWVyeVBhcmFtZXRlcnMoXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmV4dHJhUXVlcnlQYXJhbWV0ZXJzXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmF1dGhPcHRpb25zLmluc3RhbmNlQXdhcmUpIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZEluc3RhbmNlQXdhcmUocGFyYW1ldGVycyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gVXJsVXRpbHMubWFwVG9RdWVyeVN0cmluZyhwYXJhbWV0ZXJzKTtcbiAgICB9XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gICAgQ2xpZW50Q29uZmlndXJhdGlvbixcbiAgICBpc09pZGNQcm90b2NvbE1vZGUsXG59IGZyb20gXCIuLi9jb25maWcvQ2xpZW50Q29uZmlndXJhdGlvbi5qc1wiO1xuaW1wb3J0IHsgQmFzZUNsaWVudCB9IGZyb20gXCIuL0Jhc2VDbGllbnQuanNcIjtcbmltcG9ydCB7IENvbW1vblJlZnJlc2hUb2tlblJlcXVlc3QgfSBmcm9tIFwiLi4vcmVxdWVzdC9Db21tb25SZWZyZXNoVG9rZW5SZXF1ZXN0LmpzXCI7XG5pbXBvcnQgeyBBdXRob3JpdHkgfSBmcm9tIFwiLi4vYXV0aG9yaXR5L0F1dGhvcml0eS5qc1wiO1xuaW1wb3J0IHsgU2VydmVyQXV0aG9yaXphdGlvblRva2VuUmVzcG9uc2UgfSBmcm9tIFwiLi4vcmVzcG9uc2UvU2VydmVyQXV0aG9yaXphdGlvblRva2VuUmVzcG9uc2UuanNcIjtcbmltcG9ydCAqIGFzIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyIGZyb20gXCIuLi9yZXF1ZXN0L1JlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmpzXCI7XG5pbXBvcnQgKiBhcyBVcmxVdGlscyBmcm9tIFwiLi4vdXRpbHMvVXJsVXRpbHMuanNcIjtcbmltcG9ydCB7XG4gICAgR3JhbnRUeXBlLFxuICAgIEF1dGhlbnRpY2F0aW9uU2NoZW1lLFxuICAgIEVycm9ycyxcbiAgICBIZWFkZXJOYW1lcyxcbn0gZnJvbSBcIi4uL3V0aWxzL0NvbnN0YW50cy5qc1wiO1xuaW1wb3J0ICogYXMgQUFEU2VydmVyUGFyYW1LZXlzIGZyb20gXCIuLi9jb25zdGFudHMvQUFEU2VydmVyUGFyYW1LZXlzLmpzXCI7XG5pbXBvcnQgeyBSZXNwb25zZUhhbmRsZXIgfSBmcm9tIFwiLi4vcmVzcG9uc2UvUmVzcG9uc2VIYW5kbGVyLmpzXCI7XG5pbXBvcnQgeyBBdXRoZW50aWNhdGlvblJlc3VsdCB9IGZyb20gXCIuLi9yZXNwb25zZS9BdXRoZW50aWNhdGlvblJlc3VsdC5qc1wiO1xuaW1wb3J0IHsgUG9wVG9rZW5HZW5lcmF0b3IgfSBmcm9tIFwiLi4vY3J5cHRvL1BvcFRva2VuR2VuZXJhdG9yLmpzXCI7XG5pbXBvcnQgeyBTdHJpbmdVdGlscyB9IGZyb20gXCIuLi91dGlscy9TdHJpbmdVdGlscy5qc1wiO1xuaW1wb3J0IHsgTmV0d29ya1Jlc3BvbnNlIH0gZnJvbSBcIi4uL25ldHdvcmsvTmV0d29ya1Jlc3BvbnNlLmpzXCI7XG5pbXBvcnQgeyBDb21tb25TaWxlbnRGbG93UmVxdWVzdCB9IGZyb20gXCIuLi9yZXF1ZXN0L0NvbW1vblNpbGVudEZsb3dSZXF1ZXN0LmpzXCI7XG5pbXBvcnQge1xuICAgIGNyZWF0ZUNsaWVudENvbmZpZ3VyYXRpb25FcnJvcixcbiAgICBDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcyxcbn0gZnJvbSBcIi4uL2Vycm9yL0NsaWVudENvbmZpZ3VyYXRpb25FcnJvci5qc1wiO1xuaW1wb3J0IHtcbiAgICBjcmVhdGVDbGllbnRBdXRoRXJyb3IsXG4gICAgQ2xpZW50QXV0aEVycm9yQ29kZXMsXG59IGZyb20gXCIuLi9lcnJvci9DbGllbnRBdXRoRXJyb3IuanNcIjtcbmltcG9ydCB7IFNlcnZlckVycm9yIH0gZnJvbSBcIi4uL2Vycm9yL1NlcnZlckVycm9yLmpzXCI7XG5pbXBvcnQgKiBhcyBUaW1lVXRpbHMgZnJvbSBcIi4uL3V0aWxzL1RpbWVVdGlscy5qc1wiO1xuaW1wb3J0IHsgVXJsU3RyaW5nIH0gZnJvbSBcIi4uL3VybC9VcmxTdHJpbmcuanNcIjtcbmltcG9ydCB7IENjc0NyZWRlbnRpYWxUeXBlIH0gZnJvbSBcIi4uL2FjY291bnQvQ2NzQ3JlZGVudGlhbC5qc1wiO1xuaW1wb3J0IHsgYnVpbGRDbGllbnRJbmZvRnJvbUhvbWVBY2NvdW50SWQgfSBmcm9tIFwiLi4vYWNjb3VudC9DbGllbnRJbmZvLmpzXCI7XG5pbXBvcnQge1xuICAgIEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3IsXG4gICAgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvckNvZGVzLFxuICAgIGNyZWF0ZUludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3IsXG59IGZyb20gXCIuLi9lcnJvci9JbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yLmpzXCI7XG5pbXBvcnQgeyBQZXJmb3JtYW5jZUV2ZW50cyB9IGZyb20gXCIuLi90ZWxlbWV0cnkvcGVyZm9ybWFuY2UvUGVyZm9ybWFuY2VFdmVudC5qc1wiO1xuaW1wb3J0IHsgSVBlcmZvcm1hbmNlQ2xpZW50IH0gZnJvbSBcIi4uL3RlbGVtZXRyeS9wZXJmb3JtYW5jZS9JUGVyZm9ybWFuY2VDbGllbnQuanNcIjtcbmltcG9ydCB7IGludm9rZSwgaW52b2tlQXN5bmMgfSBmcm9tIFwiLi4vdXRpbHMvRnVuY3Rpb25XcmFwcGVycy5qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVDcmVkZW50aWFsS2V5IH0gZnJvbSBcIi4uL2NhY2hlL3V0aWxzL0NhY2hlSGVscGVycy5qc1wiO1xuaW1wb3J0IHsgQ2xpZW50QXNzZXJ0aW9uIH0gZnJvbSBcIi4uL2FjY291bnQvQ2xpZW50Q3JlZGVudGlhbHMuanNcIjtcbmltcG9ydCB7IGdldENsaWVudEFzc2VydGlvbiB9IGZyb20gXCIuLi91dGlscy9DbGllbnRBc3NlcnRpb25VdGlscy5qc1wiO1xuaW1wb3J0IHsgZ2V0UmVxdWVzdFRodW1icHJpbnQgfSBmcm9tIFwiLi4vbmV0d29yay9SZXF1ZXN0VGh1bWJwcmludC5qc1wiO1xuXG5jb25zdCBERUZBVUxUX1JFRlJFU0hfVE9LRU5fRVhQSVJBVElPTl9PRkZTRVRfU0VDT05EUyA9IDMwMDsgLy8gNSBNaW51dGVzXG5cbi8qKlxuICogT0F1dGgyLjAgcmVmcmVzaCB0b2tlbiBjbGllbnRcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgY2xhc3MgUmVmcmVzaFRva2VuQ2xpZW50IGV4dGVuZHMgQmFzZUNsaWVudCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGNvbmZpZ3VyYXRpb246IENsaWVudENvbmZpZ3VyYXRpb24sXG4gICAgICAgIHBlcmZvcm1hbmNlQ2xpZW50PzogSVBlcmZvcm1hbmNlQ2xpZW50XG4gICAgKSB7XG4gICAgICAgIHN1cGVyKGNvbmZpZ3VyYXRpb24sIHBlcmZvcm1hbmNlQ2xpZW50KTtcbiAgICB9XG4gICAgcHVibGljIGFzeW5jIGFjcXVpcmVUb2tlbihcbiAgICAgICAgcmVxdWVzdDogQ29tbW9uUmVmcmVzaFRva2VuUmVxdWVzdFxuICAgICk6IFByb21pc2U8QXV0aGVudGljYXRpb25SZXN1bHQ+IHtcbiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudD8uYWRkUXVldWVNZWFzdXJlbWVudChcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLlJlZnJlc2hUb2tlbkNsaWVudEFjcXVpcmVUb2tlbixcbiAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHJlcVRpbWVzdGFtcCA9IFRpbWVVdGlscy5ub3dTZWNvbmRzKCk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgaW52b2tlQXN5bmMoXG4gICAgICAgICAgICB0aGlzLmV4ZWN1dGVUb2tlblJlcXVlc3QuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLlJlZnJlc2hUb2tlbkNsaWVudEV4ZWN1dGVUb2tlblJlcXVlc3QsXG4gICAgICAgICAgICB0aGlzLmxvZ2dlcixcbiAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQsXG4gICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKShyZXF1ZXN0LCB0aGlzLmF1dGhvcml0eSk7XG5cbiAgICAgICAgLy8gUmV0cmlldmUgcmVxdWVzdElkIGZyb20gcmVzcG9uc2UgaGVhZGVyc1xuICAgICAgICBjb25zdCByZXF1ZXN0SWQgPSByZXNwb25zZS5oZWFkZXJzPy5bSGVhZGVyTmFtZXMuWF9NU19SRVFVRVNUX0lEXTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2VIYW5kbGVyID0gbmV3IFJlc3BvbnNlSGFuZGxlcihcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmF1dGhPcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgICAgdGhpcy5jYWNoZU1hbmFnZXIsXG4gICAgICAgICAgICB0aGlzLmNyeXB0b1V0aWxzLFxuICAgICAgICAgICAgdGhpcy5sb2dnZXIsXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5zZXJpYWxpemFibGVDYWNoZSxcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLnBlcnNpc3RlbmNlUGx1Z2luXG4gICAgICAgICk7XG4gICAgICAgIHJlc3BvbnNlSGFuZGxlci52YWxpZGF0ZVRva2VuUmVzcG9uc2UocmVzcG9uc2UuYm9keSk7XG5cbiAgICAgICAgcmV0dXJuIGludm9rZUFzeW5jKFxuICAgICAgICAgICAgcmVzcG9uc2VIYW5kbGVyLmhhbmRsZVNlcnZlclRva2VuUmVzcG9uc2UuYmluZChyZXNwb25zZUhhbmRsZXIpLFxuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuSGFuZGxlU2VydmVyVG9rZW5SZXNwb25zZSxcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLFxuICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudCxcbiAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICApKFxuICAgICAgICAgICAgcmVzcG9uc2UuYm9keSxcbiAgICAgICAgICAgIHRoaXMuYXV0aG9yaXR5LFxuICAgICAgICAgICAgcmVxVGltZXN0YW1wLFxuICAgICAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICByZXF1ZXN0LmZvcmNlQ2FjaGUsXG4gICAgICAgICAgICByZXF1ZXN0SWRcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGNhY2hlZCByZWZyZXNoIHRva2VuIGFuZCBhdHRhY2hlcyB0byByZXF1ZXN0LCB0aGVuIGNhbGxzIGFjcXVpcmVUb2tlbiBBUElcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFxuICAgICAqL1xuICAgIHB1YmxpYyBhc3luYyBhY3F1aXJlVG9rZW5CeVJlZnJlc2hUb2tlbihcbiAgICAgICAgcmVxdWVzdDogQ29tbW9uU2lsZW50Rmxvd1JlcXVlc3RcbiAgICApOiBQcm9taXNlPEF1dGhlbnRpY2F0aW9uUmVzdWx0PiB7XG4gICAgICAgIC8vIENhbm5vdCByZW5ldyB0b2tlbiBpZiBubyByZXF1ZXN0IG9iamVjdCBpcyBnaXZlbi5cbiAgICAgICAgaWYgKCFyZXF1ZXN0KSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRDb25maWd1cmF0aW9uRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMudG9rZW5SZXF1ZXN0RW1wdHlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50Py5hZGRRdWV1ZU1lYXN1cmVtZW50KFxuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuUmVmcmVzaFRva2VuQ2xpZW50QWNxdWlyZVRva2VuQnlSZWZyZXNoVG9rZW4sXG4gICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBXZSBjdXJyZW50bHkgZG8gbm90IHN1cHBvcnQgc2lsZW50IGZsb3cgZm9yIGFjY291bnQgPT09IG51bGwgdXNlIGNhc2VzOyBUaGlzIHdpbGwgYmUgcmV2aXNpdGVkIGZvciBjb25maWRlbnRpYWwgZmxvdyB1c2VjYXNlc1xuICAgICAgICBpZiAoIXJlcXVlc3QuYWNjb3VudCkge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKFxuICAgICAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLm5vQWNjb3VudEluU2lsZW50UmVxdWVzdFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHRyeSBjaGVja2luZyBpZiBGT0NJIGlzIGVuYWJsZWQgZm9yIHRoZSBnaXZlbiBhcHBsaWNhdGlvblxuICAgICAgICBjb25zdCBpc0ZPQ0kgPSB0aGlzLmNhY2hlTWFuYWdlci5pc0FwcE1ldGFkYXRhRk9DSShcbiAgICAgICAgICAgIHJlcXVlc3QuYWNjb3VudC5lbnZpcm9ubWVudFxuICAgICAgICApO1xuXG4gICAgICAgIC8vIGlmIHRoZSBhcHAgaXMgcGFydCBvZiB0aGUgZmFtaWx5LCByZXRyaXZlIGEgRmFtaWx5IHJlZnJlc2ggdG9rZW4gaWYgcHJlc2VudCBhbmQgbWFrZSBhIHJlZnJlc2hUb2tlblJlcXVlc3RcbiAgICAgICAgaWYgKGlzRk9DSSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgaW52b2tlQXN5bmMoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWNxdWlyZVRva2VuV2l0aENhY2hlZFJlZnJlc2hUb2tlbi5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5SZWZyZXNoVG9rZW5DbGllbnRBY3F1aXJlVG9rZW5XaXRoQ2FjaGVkUmVmcmVzaFRva2VuLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlcixcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudCxcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICAgICAgICAgKShyZXF1ZXN0LCB0cnVlKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBub0ZhbWlseVJUSW5DYWNoZSA9XG4gICAgICAgICAgICAgICAgICAgIGUgaW5zdGFuY2VvZiBJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yICYmXG4gICAgICAgICAgICAgICAgICAgIGUuZXJyb3JDb2RlID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvckNvZGVzLm5vVG9rZW5zRm91bmQ7XG4gICAgICAgICAgICAgICAgY29uc3QgY2xpZW50TWlzbWF0Y2hFcnJvcldpdGhGYW1pbHlSVCA9XG4gICAgICAgICAgICAgICAgICAgIGUgaW5zdGFuY2VvZiBTZXJ2ZXJFcnJvciAmJlxuICAgICAgICAgICAgICAgICAgICBlLmVycm9yQ29kZSA9PT0gRXJyb3JzLklOVkFMSURfR1JBTlRfRVJST1IgJiZcbiAgICAgICAgICAgICAgICAgICAgZS5zdWJFcnJvciA9PT0gRXJyb3JzLkNMSUVOVF9NSVNNQVRDSF9FUlJPUjtcblxuICAgICAgICAgICAgICAgIC8vIGlmIGZhbWlseSBSZWZyZXNoIFRva2VuIChGUlQpIGNhY2hlIGFjcXVpc2l0aW9uIGZhaWxzIG9yIGlmIGNsaWVudF9taXNtYXRjaCBlcnJvciBpcyBzZWVuIHdpdGggRlJULCByZWF0dGVtcHQgd2l0aCBhcHBsaWNhdGlvbiBSZWZyZXNoIFRva2VuIChBUlQpXG4gICAgICAgICAgICAgICAgaWYgKG5vRmFtaWx5UlRJbkNhY2hlIHx8IGNsaWVudE1pc21hdGNoRXJyb3JXaXRoRmFtaWx5UlQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGludm9rZUFzeW5jKFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3F1aXJlVG9rZW5XaXRoQ2FjaGVkUmVmcmVzaFRva2VuLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5SZWZyZXNoVG9rZW5DbGllbnRBY3F1aXJlVG9rZW5XaXRoQ2FjaGVkUmVmcmVzaFRva2VuLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICAgICAgICAgICAgICkocmVxdWVzdCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAvLyB0aHJvdyBpbiBhbGwgb3RoZXIgY2FzZXNcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBmYWxsIGJhY2sgdG8gYXBwbGljYXRpb24gcmVmcmVzaCB0b2tlbiBhY3F1aXNpdGlvblxuICAgICAgICByZXR1cm4gaW52b2tlQXN5bmMoXG4gICAgICAgICAgICB0aGlzLmFjcXVpcmVUb2tlbldpdGhDYWNoZWRSZWZyZXNoVG9rZW4uYmluZCh0aGlzKSxcbiAgICAgICAgICAgIFBlcmZvcm1hbmNlRXZlbnRzLlJlZnJlc2hUb2tlbkNsaWVudEFjcXVpcmVUb2tlbldpdGhDYWNoZWRSZWZyZXNoVG9rZW4sXG4gICAgICAgICAgICB0aGlzLmxvZ2dlcixcbiAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQsXG4gICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKShyZXF1ZXN0LCBmYWxzZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogbWFrZXMgYSBuZXR3b3JrIGNhbGwgdG8gYWNxdWlyZSB0b2tlbnMgYnkgZXhjaGFuZ2luZyBSZWZyZXNoVG9rZW4gYXZhaWxhYmxlIGluIHVzZXJDYWNoZTsgdGhyb3dzIGlmIHJlZnJlc2ggdG9rZW4gaXMgbm90IGNhY2hlZFxuICAgICAqIEBwYXJhbSByZXF1ZXN0XG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBhY3F1aXJlVG9rZW5XaXRoQ2FjaGVkUmVmcmVzaFRva2VuKFxuICAgICAgICByZXF1ZXN0OiBDb21tb25TaWxlbnRGbG93UmVxdWVzdCxcbiAgICAgICAgZm9jaTogYm9vbGVhblxuICAgICkge1xuICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50Py5hZGRRdWV1ZU1lYXN1cmVtZW50KFxuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuUmVmcmVzaFRva2VuQ2xpZW50QWNxdWlyZVRva2VuV2l0aENhY2hlZFJlZnJlc2hUb2tlbixcbiAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuXG4gICAgICAgIC8vIGZldGNoZXMgZmFtaWx5IFJUIG9yIGFwcGxpY2F0aW9uIFJUIGJhc2VkIG9uIEZPQ0kgdmFsdWVcbiAgICAgICAgY29uc3QgcmVmcmVzaFRva2VuID0gaW52b2tlKFxuICAgICAgICAgICAgdGhpcy5jYWNoZU1hbmFnZXIuZ2V0UmVmcmVzaFRva2VuLmJpbmQodGhpcy5jYWNoZU1hbmFnZXIpLFxuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuQ2FjaGVNYW5hZ2VyR2V0UmVmcmVzaFRva2VuLFxuICAgICAgICAgICAgdGhpcy5sb2dnZXIsXG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50LFxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICkoXG4gICAgICAgICAgICByZXF1ZXN0LmFjY291bnQsXG4gICAgICAgICAgICBmb2NpLFxuICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudCxcbiAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuXG4gICAgICAgIGlmICghcmVmcmVzaFRva2VuKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yKFxuICAgICAgICAgICAgICAgIEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3JDb2Rlcy5ub1Rva2Vuc0ZvdW5kXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgcmVmcmVzaFRva2VuLmV4cGlyZXNPbiAmJlxuICAgICAgICAgICAgVGltZVV0aWxzLmlzVG9rZW5FeHBpcmVkKFxuICAgICAgICAgICAgICAgIHJlZnJlc2hUb2tlbi5leHBpcmVzT24sXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5yZWZyZXNoVG9rZW5FeHBpcmF0aW9uT2Zmc2V0U2Vjb25kcyB8fFxuICAgICAgICAgICAgICAgICAgICBERUZBVUxUX1JFRlJFU0hfVE9LRU5fRVhQSVJBVElPTl9PRkZTRVRfU0VDT05EU1xuICAgICAgICAgICAgKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQ/LmFkZEZpZWxkcyhcbiAgICAgICAgICAgICAgICB7IHJ0RXhwaXJlc09uTXM6IE51bWJlcihyZWZyZXNoVG9rZW4uZXhwaXJlc09uKSB9LFxuICAgICAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvckNvZGVzLnJlZnJlc2hUb2tlbkV4cGlyZWRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYXR0YWNoIGNhY2hlZCBSVCBzaXplIHRvIHRoZSBjdXJyZW50IG1lYXN1cmVtZW50XG5cbiAgICAgICAgY29uc3QgcmVmcmVzaFRva2VuUmVxdWVzdDogQ29tbW9uUmVmcmVzaFRva2VuUmVxdWVzdCA9IHtcbiAgICAgICAgICAgIC4uLnJlcXVlc3QsXG4gICAgICAgICAgICByZWZyZXNoVG9rZW46IHJlZnJlc2hUb2tlbi5zZWNyZXQsXG4gICAgICAgICAgICBhdXRoZW50aWNhdGlvblNjaGVtZTpcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmF1dGhlbnRpY2F0aW9uU2NoZW1lIHx8IEF1dGhlbnRpY2F0aW9uU2NoZW1lLkJFQVJFUixcbiAgICAgICAgICAgIGNjc0NyZWRlbnRpYWw6IHtcbiAgICAgICAgICAgICAgICBjcmVkZW50aWFsOiByZXF1ZXN0LmFjY291bnQuaG9tZUFjY291bnRJZCxcbiAgICAgICAgICAgICAgICB0eXBlOiBDY3NDcmVkZW50aWFsVHlwZS5IT01FX0FDQ09VTlRfSUQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgaW52b2tlQXN5bmMoXG4gICAgICAgICAgICAgICAgdGhpcy5hY3F1aXJlVG9rZW4uYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5SZWZyZXNoVG9rZW5DbGllbnRBY3F1aXJlVG9rZW4sXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIsXG4gICAgICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudCxcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICkocmVmcmVzaFRva2VuUmVxdWVzdCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQ/LmFkZEZpZWxkcyhcbiAgICAgICAgICAgICAgICAgICAgeyBydEV4cGlyZXNPbk1zOiBOdW1iZXIocmVmcmVzaFRva2VuLmV4cGlyZXNPbikgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGlmIChlLnN1YkVycm9yID09PSBJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yQ29kZXMuYmFkVG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGJhZCByZWZyZXNoIHRva2VuIGZyb20gY2FjaGVcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIudmVyYm9zZShcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYWNxdWlyZVRva2VuV2l0aFJlZnJlc2hUb2tlbjogYmFkIHJlZnJlc2ggdG9rZW4sIHJlbW92aW5nIGZyb20gY2FjaGVcIlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBiYWRSZWZyZXNoVG9rZW5LZXkgPVxuICAgICAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGVDcmVkZW50aWFsS2V5KHJlZnJlc2hUb2tlbik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FjaGVNYW5hZ2VyLnJlbW92ZVJlZnJlc2hUb2tlbihiYWRSZWZyZXNoVG9rZW5LZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgdGhlIG5ldHdvcmsgbWVzc2FnZSBhbmQgbWFrZXMgYSBOVyBjYWxsIHRvIHRoZSB1bmRlcmx5aW5nIHNlY3VyZSB0b2tlbiBzZXJ2aWNlXG4gICAgICogQHBhcmFtIHJlcXVlc3RcbiAgICAgKiBAcGFyYW0gYXV0aG9yaXR5XG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBleGVjdXRlVG9rZW5SZXF1ZXN0KFxuICAgICAgICByZXF1ZXN0OiBDb21tb25SZWZyZXNoVG9rZW5SZXF1ZXN0LFxuICAgICAgICBhdXRob3JpdHk6IEF1dGhvcml0eVxuICAgICk6IFByb21pc2U8TmV0d29ya1Jlc3BvbnNlPFNlcnZlckF1dGhvcml6YXRpb25Ub2tlblJlc3BvbnNlPj4ge1xuICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50Py5hZGRRdWV1ZU1lYXN1cmVtZW50KFxuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuUmVmcmVzaFRva2VuQ2xpZW50RXhlY3V0ZVRva2VuUmVxdWVzdCxcbiAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVyc1N0cmluZyA9IHRoaXMuY3JlYXRlVG9rZW5RdWVyeVBhcmFtZXRlcnMocmVxdWVzdCk7XG4gICAgICAgIGNvbnN0IGVuZHBvaW50ID0gVXJsU3RyaW5nLmFwcGVuZFF1ZXJ5U3RyaW5nKFxuICAgICAgICAgICAgYXV0aG9yaXR5LnRva2VuRW5kcG9pbnQsXG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNTdHJpbmdcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCByZXF1ZXN0Qm9keSA9IGF3YWl0IGludm9rZUFzeW5jKFxuICAgICAgICAgICAgdGhpcy5jcmVhdGVUb2tlblJlcXVlc3RCb2R5LmJpbmQodGhpcyksXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5SZWZyZXNoVG9rZW5DbGllbnRDcmVhdGVUb2tlblJlcXVlc3RCb2R5LFxuICAgICAgICAgICAgdGhpcy5sb2dnZXIsXG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50LFxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICkocmVxdWVzdCk7XG4gICAgICAgIGNvbnN0IGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB0aGlzLmNyZWF0ZVRva2VuUmVxdWVzdEhlYWRlcnMoXG4gICAgICAgICAgICByZXF1ZXN0LmNjc0NyZWRlbnRpYWxcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCB0aHVtYnByaW50ID0gZ2V0UmVxdWVzdFRodW1icHJpbnQoXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICAgIHJlcXVlc3RcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gaW52b2tlQXN5bmMoXG4gICAgICAgICAgICB0aGlzLmV4ZWN1dGVQb3N0VG9Ub2tlbkVuZHBvaW50LmJpbmQodGhpcyksXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5SZWZyZXNoVG9rZW5DbGllbnRFeGVjdXRlUG9zdFRvVG9rZW5FbmRwb2ludCxcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLFxuICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudCxcbiAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICApKFxuICAgICAgICAgICAgZW5kcG9pbnQsXG4gICAgICAgICAgICByZXF1ZXN0Qm9keSxcbiAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICB0aHVtYnByaW50LFxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkLFxuICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuUmVmcmVzaFRva2VuQ2xpZW50RXhlY3V0ZVBvc3RUb1Rva2VuRW5kcG9pbnRcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb24gdG8gY3JlYXRlIHRoZSB0b2tlbiByZXF1ZXN0IGJvZHlcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgY3JlYXRlVG9rZW5SZXF1ZXN0Qm9keShcbiAgICAgICAgcmVxdWVzdDogQ29tbW9uUmVmcmVzaFRva2VuUmVxdWVzdFxuICAgICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQ/LmFkZFF1ZXVlTWVhc3VyZW1lbnQoXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5SZWZyZXNoVG9rZW5DbGllbnRDcmVhdGVUb2tlblJlcXVlc3RCb2R5LFxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgcGFyYW1ldGVycyA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmc+KCk7XG5cbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2xpZW50SWQoXG4gICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgcmVxdWVzdC5lbWJlZGRlZENsaWVudElkIHx8XG4gICAgICAgICAgICAgICAgcmVxdWVzdC50b2tlbkJvZHlQYXJhbWV0ZXJzPy5bQUFEU2VydmVyUGFyYW1LZXlzLkNMSUVOVF9JRF0gfHxcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRJZFxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChyZXF1ZXN0LnJlZGlyZWN0VXJpKSB7XG4gICAgICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRSZWRpcmVjdFVyaShcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlcXVlc3QucmVkaXJlY3RVcmlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRTY29wZXMoXG4gICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgcmVxdWVzdC5zY29wZXMsXG4gICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aE9wdGlvbnMuYXV0aG9yaXR5Lm9wdGlvbnMuT0lEQ09wdGlvbnM/LmRlZmF1bHRTY29wZXNcbiAgICAgICAgKTtcblxuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRHcmFudFR5cGUoXG4gICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgR3JhbnRUeXBlLlJFRlJFU0hfVE9LRU5fR1JBTlRcbiAgICAgICAgKTtcblxuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDbGllbnRJbmZvKHBhcmFtZXRlcnMpO1xuXG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZExpYnJhcnlJbmZvKFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmxpYnJhcnlJbmZvXG4gICAgICAgICk7XG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZEFwcGxpY2F0aW9uVGVsZW1ldHJ5KFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLnRlbGVtZXRyeS5hcHBsaWNhdGlvblxuICAgICAgICApO1xuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRUaHJvdHRsaW5nKHBhcmFtZXRlcnMpO1xuXG4gICAgICAgIGlmICh0aGlzLnNlcnZlclRlbGVtZXRyeU1hbmFnZXIgJiYgIWlzT2lkY1Byb3RvY29sTW9kZSh0aGlzLmNvbmZpZykpIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFNlcnZlclRlbGVtZXRyeShcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHRoaXMuc2VydmVyVGVsZW1ldHJ5TWFuYWdlclxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFJlZnJlc2hUb2tlbihcbiAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICByZXF1ZXN0LnJlZnJlc2hUb2tlblxuICAgICAgICApO1xuXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5jbGllbnRDcmVkZW50aWFscy5jbGllbnRTZWNyZXQpIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudFNlY3JldChcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmNsaWVudENyZWRlbnRpYWxzLmNsaWVudFNlY3JldFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5jbGllbnRDcmVkZW50aWFscy5jbGllbnRBc3NlcnRpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IGNsaWVudEFzc2VydGlvbjogQ2xpZW50QXNzZXJ0aW9uID1cbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5jbGllbnRDcmVkZW50aWFscy5jbGllbnRBc3NlcnRpb247XG5cbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudEFzc2VydGlvbihcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGF3YWl0IGdldENsaWVudEFzc2VydGlvbihcbiAgICAgICAgICAgICAgICAgICAgY2xpZW50QXNzZXJ0aW9uLmFzc2VydGlvbixcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aE9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3QucmVzb3VyY2VSZXF1ZXN0VXJpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudEFzc2VydGlvblR5cGUoXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBjbGllbnRBc3NlcnRpb24uYXNzZXJ0aW9uVHlwZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXF1ZXN0LmF1dGhlbnRpY2F0aW9uU2NoZW1lID09PSBBdXRoZW50aWNhdGlvblNjaGVtZS5QT1ApIHtcbiAgICAgICAgICAgIGNvbnN0IHBvcFRva2VuR2VuZXJhdG9yID0gbmV3IFBvcFRva2VuR2VuZXJhdG9yKFxuICAgICAgICAgICAgICAgIHRoaXMuY3J5cHRvVXRpbHMsXG4gICAgICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgbGV0IHJlcUNuZkRhdGE7XG4gICAgICAgICAgICBpZiAoIXJlcXVlc3QucG9wS2lkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZ2VuZXJhdGVkUmVxQ25mRGF0YSA9IGF3YWl0IGludm9rZUFzeW5jKFxuICAgICAgICAgICAgICAgICAgICBwb3BUb2tlbkdlbmVyYXRvci5nZW5lcmF0ZUNuZi5iaW5kKHBvcFRva2VuR2VuZXJhdG9yKSxcbiAgICAgICAgICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuUG9wVG9rZW5HZW5lcmF0ZUNuZixcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQsXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgICAgICkocmVxdWVzdCwgdGhpcy5sb2dnZXIpO1xuXG4gICAgICAgICAgICAgICAgcmVxQ25mRGF0YSA9IGdlbmVyYXRlZFJlcUNuZkRhdGEucmVxQ25mU3RyaW5nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXFDbmZEYXRhID0gdGhpcy5jcnlwdG9VdGlscy5lbmNvZGVLaWQocmVxdWVzdC5wb3BLaWQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTUEEgUG9QIHJlcXVpcmVzIGZ1bGwgQmFzZTY0VXJsIGVuY29kZWQgcmVxX2NuZiBzdHJpbmcgKHVuaGFzaGVkKVxuICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkUG9wVG9rZW4ocGFyYW1ldGVycywgcmVxQ25mRGF0YSk7XG4gICAgICAgIH0gZWxzZSBpZiAocmVxdWVzdC5hdXRoZW50aWNhdGlvblNjaGVtZSA9PT0gQXV0aGVudGljYXRpb25TY2hlbWUuU1NIKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdC5zc2hKd2spIHtcbiAgICAgICAgICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRTc2hKd2socGFyYW1ldGVycywgcmVxdWVzdC5zc2hKd2spO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRDb25maWd1cmF0aW9uRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIENsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLm1pc3NpbmdTc2hKd2tcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIVN0cmluZ1V0aWxzLmlzRW1wdHlPYmoocmVxdWVzdC5jbGFpbXMpIHx8XG4gICAgICAgICAgICAodGhpcy5jb25maWcuYXV0aE9wdGlvbnMuY2xpZW50Q2FwYWJpbGl0aWVzICYmXG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aE9wdGlvbnMuY2xpZW50Q2FwYWJpbGl0aWVzLmxlbmd0aCA+IDApXG4gICAgICAgICkge1xuICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2xhaW1zKFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5jbGFpbXMsXG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aE9wdGlvbnMuY2xpZW50Q2FwYWJpbGl0aWVzXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5jb25maWcuc3lzdGVtT3B0aW9ucy5wcmV2ZW50Q29yc1ByZWZsaWdodCAmJlxuICAgICAgICAgICAgcmVxdWVzdC5jY3NDcmVkZW50aWFsXG4gICAgICAgICkge1xuICAgICAgICAgICAgc3dpdGNoIChyZXF1ZXN0LmNjc0NyZWRlbnRpYWwudHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgQ2NzQ3JlZGVudGlhbFR5cGUuSE9NRV9BQ0NPVU5UX0lEOlxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2xpZW50SW5mbyA9IGJ1aWxkQ2xpZW50SW5mb0Zyb21Ib21lQWNjb3VudElkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3QuY2NzQ3JlZGVudGlhbC5jcmVkZW50aWFsXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2NzT2lkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50SW5mb1xuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIudmVyYm9zZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkNvdWxkIG5vdCBwYXJzZSBob21lIGFjY291bnQgSUQgZm9yIENDUyBIZWFkZXI6IFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIENjc0NyZWRlbnRpYWxUeXBlLlVQTjpcbiAgICAgICAgICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2NzVXBuKFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3QuY2NzQ3JlZGVudGlhbC5jcmVkZW50aWFsXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlcXVlc3QuZW1iZWRkZWRDbGllbnRJZCkge1xuICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQnJva2VyUGFyYW1ldGVycyhcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmF1dGhPcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmF1dGhPcHRpb25zLnJlZGlyZWN0VXJpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlcXVlc3QudG9rZW5Cb2R5UGFyYW1ldGVycykge1xuICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkRXh0cmFRdWVyeVBhcmFtZXRlcnMoXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnRva2VuQm9keVBhcmFtZXRlcnNcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5pbnN0cnVtZW50QnJva2VyUGFyYW1zKFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZCxcbiAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnRcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIFVybFV0aWxzLm1hcFRvUXVlcnlTdHJpbmcocGFyYW1ldGVycyk7XG4gICAgfVxufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBCYXNlQ2xpZW50IH0gZnJvbSBcIi4vQmFzZUNsaWVudC5qc1wiO1xuaW1wb3J0IHsgQ2xpZW50Q29uZmlndXJhdGlvbiB9IGZyb20gXCIuLi9jb25maWcvQ2xpZW50Q29uZmlndXJhdGlvbi5qc1wiO1xuaW1wb3J0IHsgQ29tbW9uU2lsZW50Rmxvd1JlcXVlc3QgfSBmcm9tIFwiLi4vcmVxdWVzdC9Db21tb25TaWxlbnRGbG93UmVxdWVzdC5qc1wiO1xuaW1wb3J0IHsgQXV0aGVudGljYXRpb25SZXN1bHQgfSBmcm9tIFwiLi4vcmVzcG9uc2UvQXV0aGVudGljYXRpb25SZXN1bHQuanNcIjtcbmltcG9ydCAqIGFzIFRpbWVVdGlscyBmcm9tIFwiLi4vdXRpbHMvVGltZVV0aWxzLmpzXCI7XG5pbXBvcnQge1xuICAgIENsaWVudEF1dGhFcnJvckNvZGVzLFxuICAgIGNyZWF0ZUNsaWVudEF1dGhFcnJvcixcbn0gZnJvbSBcIi4uL2Vycm9yL0NsaWVudEF1dGhFcnJvci5qc1wiO1xuaW1wb3J0IHsgUmVzcG9uc2VIYW5kbGVyIH0gZnJvbSBcIi4uL3Jlc3BvbnNlL1Jlc3BvbnNlSGFuZGxlci5qc1wiO1xuaW1wb3J0IHsgQ2FjaGVSZWNvcmQgfSBmcm9tIFwiLi4vY2FjaGUvZW50aXRpZXMvQ2FjaGVSZWNvcmQuanNcIjtcbmltcG9ydCB7IENhY2hlT3V0Y29tZSB9IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcbmltcG9ydCB7IElQZXJmb3JtYW5jZUNsaWVudCB9IGZyb20gXCIuLi90ZWxlbWV0cnkvcGVyZm9ybWFuY2UvSVBlcmZvcm1hbmNlQ2xpZW50LmpzXCI7XG5pbXBvcnQgeyBTdHJpbmdVdGlscyB9IGZyb20gXCIuLi91dGlscy9TdHJpbmdVdGlscy5qc1wiO1xuaW1wb3J0IHsgY2hlY2tNYXhBZ2UsIGV4dHJhY3RUb2tlbkNsYWltcyB9IGZyb20gXCIuLi9hY2NvdW50L0F1dGhUb2tlbi5qc1wiO1xuaW1wb3J0IHsgVG9rZW5DbGFpbXMgfSBmcm9tIFwiLi4vYWNjb3VudC9Ub2tlbkNsYWltcy5qc1wiO1xuaW1wb3J0IHsgUGVyZm9ybWFuY2VFdmVudHMgfSBmcm9tIFwiLi4vdGVsZW1ldHJ5L3BlcmZvcm1hbmNlL1BlcmZvcm1hbmNlRXZlbnQuanNcIjtcbmltcG9ydCB7IGludm9rZUFzeW5jIH0gZnJvbSBcIi4uL3V0aWxzL0Z1bmN0aW9uV3JhcHBlcnMuanNcIjtcbmltcG9ydCB7IGdldFRlbmFudEZyb21BdXRob3JpdHlTdHJpbmcgfSBmcm9tIFwiLi4vYXV0aG9yaXR5L0F1dGhvcml0eS5qc1wiO1xuXG4vKiogQGludGVybmFsICovXG5leHBvcnQgY2xhc3MgU2lsZW50Rmxvd0NsaWVudCBleHRlbmRzIEJhc2VDbGllbnQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBjb25maWd1cmF0aW9uOiBDbGllbnRDb25maWd1cmF0aW9uLFxuICAgICAgICBwZXJmb3JtYW5jZUNsaWVudD86IElQZXJmb3JtYW5jZUNsaWVudFxuICAgICkge1xuICAgICAgICBzdXBlcihjb25maWd1cmF0aW9uLCBwZXJmb3JtYW5jZUNsaWVudCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRva2VuIGZyb20gY2FjaGUgb3IgdGhyb3dzIGFuIGVycm9yIGlmIGl0IG11c3QgYmUgcmVmcmVzaGVkLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0XG4gICAgICovXG4gICAgYXN5bmMgYWNxdWlyZUNhY2hlZFRva2VuKFxuICAgICAgICByZXF1ZXN0OiBDb21tb25TaWxlbnRGbG93UmVxdWVzdFxuICAgICk6IFByb21pc2U8W0F1dGhlbnRpY2F0aW9uUmVzdWx0LCBDYWNoZU91dGNvbWVdPiB7XG4gICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQ/LmFkZFF1ZXVlTWVhc3VyZW1lbnQoXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5TaWxlbnRGbG93Q2xpZW50QWNxdWlyZUNhY2hlZFRva2VuLFxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICk7XG4gICAgICAgIGxldCBsYXN0Q2FjaGVPdXRjb21lOiBDYWNoZU91dGNvbWUgPSBDYWNoZU91dGNvbWUuTk9UX0FQUExJQ0FCTEU7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgcmVxdWVzdC5mb3JjZVJlZnJlc2ggfHxcbiAgICAgICAgICAgICghdGhpcy5jb25maWcuY2FjaGVPcHRpb25zLmNsYWltc0Jhc2VkQ2FjaGluZ0VuYWJsZWQgJiZcbiAgICAgICAgICAgICAgICAhU3RyaW5nVXRpbHMuaXNFbXB0eU9iaihyZXF1ZXN0LmNsYWltcykpXG4gICAgICAgICkge1xuICAgICAgICAgICAgLy8gTXVzdCByZWZyZXNoIGR1ZSB0byBwcmVzZW50IGZvcmNlX3JlZnJlc2ggZmxhZy5cbiAgICAgICAgICAgIHRoaXMuc2V0Q2FjaGVPdXRjb21lKFxuICAgICAgICAgICAgICAgIENhY2hlT3V0Y29tZS5GT1JDRV9SRUZSRVNIX09SX0NMQUlNUyxcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMudG9rZW5SZWZyZXNoUmVxdWlyZWRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXZSBjdXJyZW50bHkgZG8gbm90IHN1cHBvcnQgc2lsZW50IGZsb3cgZm9yIGFjY291bnQgPT09IG51bGwgdXNlIGNhc2VzOyBUaGlzIHdpbGwgYmUgcmV2aXNpdGVkIGZvciBjb25maWRlbnRpYWwgZmxvdyB1c2VjYXNlc1xuICAgICAgICBpZiAoIXJlcXVlc3QuYWNjb3VudCkge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKFxuICAgICAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLm5vQWNjb3VudEluU2lsZW50UmVxdWVzdFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlcXVlc3RUZW5hbnRJZCA9XG4gICAgICAgICAgICByZXF1ZXN0LmFjY291bnQudGVuYW50SWQgfHxcbiAgICAgICAgICAgIGdldFRlbmFudEZyb21BdXRob3JpdHlTdHJpbmcocmVxdWVzdC5hdXRob3JpdHkpO1xuICAgICAgICBjb25zdCB0b2tlbktleXMgPSB0aGlzLmNhY2hlTWFuYWdlci5nZXRUb2tlbktleXMoKTtcbiAgICAgICAgY29uc3QgY2FjaGVkQWNjZXNzVG9rZW4gPSB0aGlzLmNhY2hlTWFuYWdlci5nZXRBY2Nlc3NUb2tlbihcbiAgICAgICAgICAgIHJlcXVlc3QuYWNjb3VudCxcbiAgICAgICAgICAgIHJlcXVlc3QsXG4gICAgICAgICAgICB0b2tlbktleXMsXG4gICAgICAgICAgICByZXF1ZXN0VGVuYW50SWQsXG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50LFxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKCFjYWNoZWRBY2Nlc3NUb2tlbikge1xuICAgICAgICAgICAgLy8gbXVzdCByZWZyZXNoIGR1ZSB0byBub24tZXhpc3RlbnQgYWNjZXNzX3Rva2VuXG4gICAgICAgICAgICB0aGlzLnNldENhY2hlT3V0Y29tZShcbiAgICAgICAgICAgICAgICBDYWNoZU91dGNvbWUuTk9fQ0FDSEVEX0FDQ0VTU19UT0tFTixcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMudG9rZW5SZWZyZXNoUmVxdWlyZWRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICBUaW1lVXRpbHMud2FzQ2xvY2tUdXJuZWRCYWNrKGNhY2hlZEFjY2Vzc1Rva2VuLmNhY2hlZEF0KSB8fFxuICAgICAgICAgICAgVGltZVV0aWxzLmlzVG9rZW5FeHBpcmVkKFxuICAgICAgICAgICAgICAgIGNhY2hlZEFjY2Vzc1Rva2VuLmV4cGlyZXNPbixcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5zeXN0ZW1PcHRpb25zLnRva2VuUmVuZXdhbE9mZnNldFNlY29uZHNcbiAgICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBtdXN0IHJlZnJlc2ggZHVlIHRvIHRoZSBleHBpcmVzX2luIHZhbHVlXG4gICAgICAgICAgICB0aGlzLnNldENhY2hlT3V0Y29tZShcbiAgICAgICAgICAgICAgICBDYWNoZU91dGNvbWUuQ0FDSEVEX0FDQ0VTU19UT0tFTl9FWFBJUkVELFxuICAgICAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihcbiAgICAgICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy50b2tlblJlZnJlc2hSZXF1aXJlZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIGNhY2hlZEFjY2Vzc1Rva2VuLnJlZnJlc2hPbiAmJlxuICAgICAgICAgICAgVGltZVV0aWxzLmlzVG9rZW5FeHBpcmVkKGNhY2hlZEFjY2Vzc1Rva2VuLnJlZnJlc2hPbiwgMClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBtdXN0IHJlZnJlc2ggKGluIHRoZSBiYWNrZ3JvdW5kKSBkdWUgdG8gdGhlIHJlZnJlc2hfaW4gdmFsdWVcbiAgICAgICAgICAgIGxhc3RDYWNoZU91dGNvbWUgPSBDYWNoZU91dGNvbWUuUFJPQUNUSVZFTFlfUkVGUkVTSEVEO1xuXG4gICAgICAgICAgICAvLyBkb24ndCB0aHJvdyBDbGllbnRBdXRoRXJyb3IuY3JlYXRlUmVmcmVzaFJlcXVpcmVkRXJyb3IoKSwgcmV0dXJuIGNhY2hlZCB0b2tlbiBpbnN0ZWFkXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBlbnZpcm9ubWVudCA9XG4gICAgICAgICAgICByZXF1ZXN0LmF1dGhvcml0eSB8fCB0aGlzLmF1dGhvcml0eS5nZXRQcmVmZXJyZWRDYWNoZSgpO1xuICAgICAgICBjb25zdCBjYWNoZVJlY29yZDogQ2FjaGVSZWNvcmQgPSB7XG4gICAgICAgICAgICBhY2NvdW50OiB0aGlzLmNhY2hlTWFuYWdlci5yZWFkQWNjb3VudEZyb21DYWNoZShyZXF1ZXN0LmFjY291bnQpLFxuICAgICAgICAgICAgYWNjZXNzVG9rZW46IGNhY2hlZEFjY2Vzc1Rva2VuLFxuICAgICAgICAgICAgaWRUb2tlbjogdGhpcy5jYWNoZU1hbmFnZXIuZ2V0SWRUb2tlbihcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmFjY291bnQsXG4gICAgICAgICAgICAgICAgdG9rZW5LZXlzLFxuICAgICAgICAgICAgICAgIHJlcXVlc3RUZW5hbnRJZCxcbiAgICAgICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlQ2xpZW50LFxuICAgICAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIHJlZnJlc2hUb2tlbjogbnVsbCxcbiAgICAgICAgICAgIGFwcE1ldGFkYXRhOlxuICAgICAgICAgICAgICAgIHRoaXMuY2FjaGVNYW5hZ2VyLnJlYWRBcHBNZXRhZGF0YUZyb21DYWNoZShlbnZpcm9ubWVudCksXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5zZXRDYWNoZU91dGNvbWUobGFzdENhY2hlT3V0Y29tZSwgcmVxdWVzdC5jb3JyZWxhdGlvbklkKTtcblxuICAgICAgICBpZiAodGhpcy5jb25maWcuc2VydmVyVGVsZW1ldHJ5TWFuYWdlcikge1xuICAgICAgICAgICAgdGhpcy5jb25maWcuc2VydmVyVGVsZW1ldHJ5TWFuYWdlci5pbmNyZW1lbnRDYWNoZUhpdHMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBhd2FpdCBpbnZva2VBc3luYyhcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlUmVzdWx0RnJvbUNhY2hlUmVjb3JkLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgUGVyZm9ybWFuY2VFdmVudHMuU2lsZW50Rmxvd0NsaWVudEdlbmVyYXRlUmVzdWx0RnJvbUNhY2hlUmVjb3JkLFxuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLFxuICAgICAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQsXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICAgICApKGNhY2hlUmVjb3JkLCByZXF1ZXN0KSxcbiAgICAgICAgICAgIGxhc3RDYWNoZU91dGNvbWUsXG4gICAgICAgIF07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXRDYWNoZU91dGNvbWUoXG4gICAgICAgIGNhY2hlT3V0Y29tZTogQ2FjaGVPdXRjb21lLFxuICAgICAgICBjb3JyZWxhdGlvbklkOiBzdHJpbmdcbiAgICApOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyPy5zZXRDYWNoZU91dGNvbWUoY2FjaGVPdXRjb21lKTtcbiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUNsaWVudD8uYWRkRmllbGRzKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNhY2hlT3V0Y29tZTogY2FjaGVPdXRjb21lLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGNhY2hlT3V0Y29tZSAhPT0gQ2FjaGVPdXRjb21lLk5PVF9BUFBMSUNBQkxFKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgICAgIGBUb2tlbiByZWZyZXNoIGlzIHJlcXVpcmVkIGR1ZSB0byBjYWNoZSBvdXRjb21lOiAke2NhY2hlT3V0Y29tZX1gXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIHRvIGJ1aWxkIHJlc3BvbnNlIG9iamVjdCBmcm9tIHRoZSBDYWNoZVJlY29yZFxuICAgICAqIEBwYXJhbSBjYWNoZVJlY29yZFxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVSZXN1bHRGcm9tQ2FjaGVSZWNvcmQoXG4gICAgICAgIGNhY2hlUmVjb3JkOiBDYWNoZVJlY29yZCxcbiAgICAgICAgcmVxdWVzdDogQ29tbW9uU2lsZW50Rmxvd1JlcXVlc3RcbiAgICApOiBQcm9taXNlPEF1dGhlbnRpY2F0aW9uUmVzdWx0PiB7XG4gICAgICAgIHRoaXMucGVyZm9ybWFuY2VDbGllbnQ/LmFkZFF1ZXVlTWVhc3VyZW1lbnQoXG4gICAgICAgICAgICBQZXJmb3JtYW5jZUV2ZW50cy5TaWxlbnRGbG93Q2xpZW50R2VuZXJhdGVSZXN1bHRGcm9tQ2FjaGVSZWNvcmQsXG4gICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcbiAgICAgICAgbGV0IGlkVG9rZW5DbGFpbXM6IFRva2VuQ2xhaW1zIHwgdW5kZWZpbmVkO1xuICAgICAgICBpZiAoY2FjaGVSZWNvcmQuaWRUb2tlbikge1xuICAgICAgICAgICAgaWRUb2tlbkNsYWltcyA9IGV4dHJhY3RUb2tlbkNsYWltcyhcbiAgICAgICAgICAgICAgICBjYWNoZVJlY29yZC5pZFRva2VuLnNlY3JldCxcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5jcnlwdG9JbnRlcmZhY2UuYmFzZTY0RGVjb2RlXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdG9rZW4gbWF4X2FnZSBjaGVja1xuICAgICAgICBpZiAocmVxdWVzdC5tYXhBZ2UgfHwgcmVxdWVzdC5tYXhBZ2UgPT09IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGF1dGhUaW1lID0gaWRUb2tlbkNsYWltcz8uYXV0aF90aW1lO1xuICAgICAgICAgICAgaWYgKCFhdXRoVGltZSkge1xuICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuYXV0aFRpbWVOb3RGb3VuZFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNoZWNrTWF4QWdlKGF1dGhUaW1lLCByZXF1ZXN0Lm1heEFnZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUmVzcG9uc2VIYW5kbGVyLmdlbmVyYXRlQXV0aGVudGljYXRpb25SZXN1bHQoXG4gICAgICAgICAgICB0aGlzLmNyeXB0b1V0aWxzLFxuICAgICAgICAgICAgdGhpcy5hdXRob3JpdHksXG4gICAgICAgICAgICBjYWNoZVJlY29yZCxcbiAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICByZXF1ZXN0LFxuICAgICAgICAgICAgaWRUb2tlbkNsYWltc1xuICAgICAgICApO1xuICAgIH1cbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQ29tbW9uQXV0aG9yaXphdGlvblVybFJlcXVlc3QgfSBmcm9tIFwiLi4vcmVxdWVzdC9Db21tb25BdXRob3JpemF0aW9uVXJsUmVxdWVzdC5qc1wiO1xuaW1wb3J0ICogYXMgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIgZnJvbSBcIi4uL3JlcXVlc3QvUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuanNcIjtcbmltcG9ydCB7IElQZXJmb3JtYW5jZUNsaWVudCB9IGZyb20gXCIuLi90ZWxlbWV0cnkvcGVyZm9ybWFuY2UvSVBlcmZvcm1hbmNlQ2xpZW50LmpzXCI7XG5pbXBvcnQgKiBhcyBBQURTZXJ2ZXJQYXJhbUtleXMgZnJvbSBcIi4uL2NvbnN0YW50cy9BQURTZXJ2ZXJQYXJhbUtleXMuanNcIjtcbmltcG9ydCB7IEF1dGhPcHRpb25zIH0gZnJvbSBcIi4uL2NvbmZpZy9DbGllbnRDb25maWd1cmF0aW9uLmpzXCI7XG5pbXBvcnQgeyBQcm9tcHRWYWx1ZSB9IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcbmltcG9ydCB7IEFjY291bnRJbmZvIH0gZnJvbSBcIi4uL2FjY291bnQvQWNjb3VudEluZm8uanNcIjtcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gXCIuLi9sb2dnZXIvTG9nZ2VyLmpzXCI7XG5pbXBvcnQgeyBidWlsZENsaWVudEluZm9Gcm9tSG9tZUFjY291bnRJZCB9IGZyb20gXCIuLi9hY2NvdW50L0NsaWVudEluZm8uanNcIjtcbmltcG9ydCB7IEF1dGhvcml0eSB9IGZyb20gXCIuLi9hdXRob3JpdHkvQXV0aG9yaXR5LmpzXCI7XG5pbXBvcnQgeyBtYXBUb1F1ZXJ5U3RyaW5nIH0gZnJvbSBcIi4uL3V0aWxzL1VybFV0aWxzLmpzXCI7XG5pbXBvcnQgeyBVcmxTdHJpbmcgfSBmcm9tIFwiLi4vdXJsL1VybFN0cmluZy5qc1wiO1xuaW1wb3J0IHsgQXV0aG9yaXphdGlvbkNvZGVQYXlsb2FkIH0gZnJvbSBcIi4uL3Jlc3BvbnNlL0F1dGhvcml6YXRpb25Db2RlUGF5bG9hZC5qc1wiO1xuaW1wb3J0IHsgQXV0aG9yaXplUmVzcG9uc2UgfSBmcm9tIFwiLi4vcmVzcG9uc2UvQXV0aG9yaXplUmVzcG9uc2UuanNcIjtcbmltcG9ydCB7XG4gICAgQ2xpZW50QXV0aEVycm9yQ29kZXMsXG4gICAgY3JlYXRlQ2xpZW50QXV0aEVycm9yLFxufSBmcm9tIFwiLi4vZXJyb3IvQ2xpZW50QXV0aEVycm9yLmpzXCI7XG5pbXBvcnQge1xuICAgIEludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3IsXG4gICAgaXNJbnRlcmFjdGlvblJlcXVpcmVkRXJyb3IsXG59IGZyb20gXCIuLi9lcnJvci9JbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yLmpzXCI7XG5pbXBvcnQgeyBTZXJ2ZXJFcnJvciB9IGZyb20gXCIuLi9lcnJvci9TZXJ2ZXJFcnJvci5qc1wiO1xuXG4vKipcbiAqIFJldHVybnMgbWFwIG9mIHBhcmFtZXRlcnMgdGhhdCBhcmUgYXBwbGljYWJsZSB0byBhbGwgY2FsbHMgdG8gL2F1dGhvcml6ZSB3aGV0aGVyIHVzaW5nIFBLQ0Ugb3IgRUFSXG4gKiBAcGFyYW0gY29uZmlnXG4gKiBAcGFyYW0gcmVxdWVzdFxuICogQHBhcmFtIGxvZ2dlclxuICogQHBhcmFtIHBlcmZvcm1hbmNlQ2xpZW50XG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3RhbmRhcmRBdXRob3JpemVSZXF1ZXN0UGFyYW1ldGVycyhcbiAgICBhdXRoT3B0aW9uczogQXV0aE9wdGlvbnMsXG4gICAgcmVxdWVzdDogQ29tbW9uQXV0aG9yaXphdGlvblVybFJlcXVlc3QsXG4gICAgbG9nZ2VyOiBMb2dnZXIsXG4gICAgcGVyZm9ybWFuY2VDbGllbnQ/OiBJUGVyZm9ybWFuY2VDbGllbnRcbik6IE1hcDxzdHJpbmcsIHN0cmluZz4ge1xuICAgIC8vIGdlbmVyYXRlIHRoZSBjb3JyZWxhdGlvbklkIGlmIG5vdCBzZXQgYnkgdGhlIHVzZXIgYW5kIGFkZFxuICAgIGNvbnN0IGNvcnJlbGF0aW9uSWQgPSByZXF1ZXN0LmNvcnJlbGF0aW9uSWQ7XG5cbiAgICBjb25zdCBwYXJhbWV0ZXJzID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZz4oKTtcblxuICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudElkKFxuICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICByZXF1ZXN0LmVtYmVkZGVkQ2xpZW50SWQgfHxcbiAgICAgICAgICAgIHJlcXVlc3QuZXh0cmFRdWVyeVBhcmFtZXRlcnM/LltBQURTZXJ2ZXJQYXJhbUtleXMuQ0xJRU5UX0lEXSB8fFxuICAgICAgICAgICAgYXV0aE9wdGlvbnMuY2xpZW50SWRcbiAgICApO1xuXG4gICAgY29uc3QgcmVxdWVzdFNjb3BlcyA9IFtcbiAgICAgICAgLi4uKHJlcXVlc3Quc2NvcGVzIHx8IFtdKSxcbiAgICAgICAgLi4uKHJlcXVlc3QuZXh0cmFTY29wZXNUb0NvbnNlbnQgfHwgW10pLFxuICAgIF07XG4gICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkU2NvcGVzKFxuICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICByZXF1ZXN0U2NvcGVzLFxuICAgICAgICB0cnVlLFxuICAgICAgICBhdXRoT3B0aW9ucy5hdXRob3JpdHkub3B0aW9ucy5PSURDT3B0aW9ucz8uZGVmYXVsdFNjb3Blc1xuICAgICk7XG5cbiAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRSZWRpcmVjdFVyaShwYXJhbWV0ZXJzLCByZXF1ZXN0LnJlZGlyZWN0VXJpKTtcblxuICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENvcnJlbGF0aW9uSWQocGFyYW1ldGVycywgY29ycmVsYXRpb25JZCk7XG5cbiAgICAvLyBhZGQgcmVzcG9uc2VfbW9kZS4gSWYgbm90IHBhc3NlZCBpbiBpdCBkZWZhdWx0cyB0byBxdWVyeS5cbiAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRSZXNwb25zZU1vZGUocGFyYW1ldGVycywgcmVxdWVzdC5yZXNwb25zZU1vZGUpO1xuXG4gICAgLy8gYWRkIGNsaWVudF9pbmZvPTFcbiAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDbGllbnRJbmZvKHBhcmFtZXRlcnMpO1xuXG4gICAgaWYgKHJlcXVlc3QucHJvbXB0KSB7XG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFByb21wdChwYXJhbWV0ZXJzLCByZXF1ZXN0LnByb21wdCk7XG4gICAgICAgIHBlcmZvcm1hbmNlQ2xpZW50Py5hZGRGaWVsZHMoeyBwcm9tcHQ6IHJlcXVlc3QucHJvbXB0IH0sIGNvcnJlbGF0aW9uSWQpO1xuICAgIH1cblxuICAgIGlmIChyZXF1ZXN0LmRvbWFpbkhpbnQpIHtcbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkRG9tYWluSGludChwYXJhbWV0ZXJzLCByZXF1ZXN0LmRvbWFpbkhpbnQpO1xuICAgICAgICBwZXJmb3JtYW5jZUNsaWVudD8uYWRkRmllbGRzKFxuICAgICAgICAgICAgeyBkb21haW5IaW50RnJvbVJlcXVlc3Q6IHRydWUgfSxcbiAgICAgICAgICAgIGNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgc2lkIG9yIGxvZ2luSGludCB3aXRoIHByZWZlcmVuY2UgZm9yIGxvZ2luX2hpbnQgY2xhaW0gKGluIHJlcXVlc3QpIC0+IHNpZCAtPiBsb2dpbkhpbnQgKHVwbi9lbWFpbCkgLT4gdXNlcm5hbWUgb2YgQWNjb3VudEluZm8gb2JqZWN0XG4gICAgaWYgKHJlcXVlc3QucHJvbXB0ICE9PSBQcm9tcHRWYWx1ZS5TRUxFQ1RfQUNDT1VOVCkge1xuICAgICAgICAvLyBBQUQgd2lsbCB0aHJvdyBpZiBwcm9tcHQ9c2VsZWN0X2FjY291bnQgaXMgcGFzc2VkIHdpdGggYW4gYWNjb3VudCBoaW50XG4gICAgICAgIGlmIChyZXF1ZXN0LnNpZCAmJiByZXF1ZXN0LnByb21wdCA9PT0gUHJvbXB0VmFsdWUuTk9ORSkge1xuICAgICAgICAgICAgLy8gU2Vzc2lvbklEIGlzIG9ubHkgdXNlZCBpbiBzaWxlbnQgY2FsbHNcbiAgICAgICAgICAgIGxvZ2dlci52ZXJib3NlKFxuICAgICAgICAgICAgICAgIFwiY3JlYXRlQXV0aENvZGVVcmxRdWVyeVN0cmluZzogUHJvbXB0IGlzIG5vbmUsIGFkZGluZyBzaWQgZnJvbSByZXF1ZXN0XCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRTaWQocGFyYW1ldGVycywgcmVxdWVzdC5zaWQpO1xuICAgICAgICAgICAgcGVyZm9ybWFuY2VDbGllbnQ/LmFkZEZpZWxkcyhcbiAgICAgICAgICAgICAgICB7IHNpZEZyb21SZXF1ZXN0OiB0cnVlIH0sXG4gICAgICAgICAgICAgICAgY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmIChyZXF1ZXN0LmFjY291bnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGFjY291bnRTaWQgPSBleHRyYWN0QWNjb3VudFNpZChyZXF1ZXN0LmFjY291bnQpO1xuICAgICAgICAgICAgbGV0IGFjY291bnRMb2dpbkhpbnRDbGFpbSA9IGV4dHJhY3RMb2dpbkhpbnQocmVxdWVzdC5hY2NvdW50KTtcblxuICAgICAgICAgICAgaWYgKGFjY291bnRMb2dpbkhpbnRDbGFpbSAmJiByZXF1ZXN0LmRvbWFpbkhpbnQpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIud2FybmluZyhcbiAgICAgICAgICAgICAgICAgICAgYEF1dGhvcml6YXRpb25Db2RlQ2xpZW50LmNyZWF0ZUF1dGhDb2RlVXJsUXVlcnlTdHJpbmc6IFwiZG9tYWluSGludFwiIHBhcmFtIGlzIHNldCwgc2tpcHBpbmcgb3BhcXVlIFwibG9naW5faGludFwiIGNsYWltLiBQbGVhc2UgY29uc2lkZXIgbm90IHBhc3NpbmcgZG9tYWluSGludGBcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGFjY291bnRMb2dpbkhpbnRDbGFpbSA9IG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIElmIGxvZ2luX2hpbnQgY2xhaW0gaXMgcHJlc2VudCwgdXNlIGl0IG92ZXIgc2lkL3VzZXJuYW1lXG4gICAgICAgICAgICBpZiAoYWNjb3VudExvZ2luSGludENsYWltKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgICAgIFwiY3JlYXRlQXV0aENvZGVVcmxRdWVyeVN0cmluZzogbG9naW5faGludCBjbGFpbSBwcmVzZW50IG9uIGFjY291bnRcIlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkTG9naW5IaW50KFxuICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50TG9naW5IaW50Q2xhaW1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHBlcmZvcm1hbmNlQ2xpZW50Py5hZGRGaWVsZHMoXG4gICAgICAgICAgICAgICAgICAgIHsgbG9naW5IaW50RnJvbUNsYWltOiB0cnVlIH0sXG4gICAgICAgICAgICAgICAgICAgIGNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsaWVudEluZm8gPSBidWlsZENsaWVudEluZm9Gcm9tSG9tZUFjY291bnRJZChcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3QuYWNjb3VudC5ob21lQWNjb3VudElkXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENjc09pZChwYXJhbWV0ZXJzLCBjbGllbnRJbmZvKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci52ZXJib3NlKFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjcmVhdGVBdXRoQ29kZVVybFF1ZXJ5U3RyaW5nOiBDb3VsZCBub3QgcGFyc2UgaG9tZSBhY2NvdW50IElEIGZvciBDQ1MgSGVhZGVyXCJcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFjY291bnRTaWQgJiYgcmVxdWVzdC5wcm9tcHQgPT09IFByb21wdFZhbHVlLk5PTkUpIHtcbiAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAqIElmIGFjY291bnQgYW5kIGxvZ2luSGludCBhcmUgcHJvdmlkZWQsIHdlIHdpbGwgY2hlY2sgYWNjb3VudCBmaXJzdCBmb3Igc2lkIGJlZm9yZSBhZGRpbmcgbG9naW5IaW50XG4gICAgICAgICAgICAgICAgICogU2Vzc2lvbklkIGlzIG9ubHkgdXNlZCBpbiBzaWxlbnQgY2FsbHNcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBsb2dnZXIudmVyYm9zZShcbiAgICAgICAgICAgICAgICAgICAgXCJjcmVhdGVBdXRoQ29kZVVybFF1ZXJ5U3RyaW5nOiBQcm9tcHQgaXMgbm9uZSwgYWRkaW5nIHNpZCBmcm9tIGFjY291bnRcIlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkU2lkKHBhcmFtZXRlcnMsIGFjY291bnRTaWQpO1xuICAgICAgICAgICAgICAgIHBlcmZvcm1hbmNlQ2xpZW50Py5hZGRGaWVsZHMoXG4gICAgICAgICAgICAgICAgICAgIHsgc2lkRnJvbUNsYWltOiB0cnVlIH0sXG4gICAgICAgICAgICAgICAgICAgIGNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsaWVudEluZm8gPSBidWlsZENsaWVudEluZm9Gcm9tSG9tZUFjY291bnRJZChcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3QuYWNjb3VudC5ob21lQWNjb3VudElkXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENjc09pZChwYXJhbWV0ZXJzLCBjbGllbnRJbmZvKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci52ZXJib3NlKFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjcmVhdGVBdXRoQ29kZVVybFF1ZXJ5U3RyaW5nOiBDb3VsZCBub3QgcGFyc2UgaG9tZSBhY2NvdW50IElEIGZvciBDQ1MgSGVhZGVyXCJcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlcXVlc3QubG9naW5IaW50KSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgICAgIFwiY3JlYXRlQXV0aENvZGVVcmxRdWVyeVN0cmluZzogQWRkaW5nIGxvZ2luX2hpbnQgZnJvbSByZXF1ZXN0XCJcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZExvZ2luSGludChcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5sb2dpbkhpbnRcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENjc1VwbihcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5sb2dpbkhpbnRcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHBlcmZvcm1hbmNlQ2xpZW50Py5hZGRGaWVsZHMoXG4gICAgICAgICAgICAgICAgICAgIHsgbG9naW5IaW50RnJvbVJlcXVlc3Q6IHRydWUgfSxcbiAgICAgICAgICAgICAgICAgICAgY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlcXVlc3QuYWNjb3VudC51c2VybmFtZSkge1xuICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrIHRvIGFjY291bnQgdXNlcm5hbWUgaWYgcHJvdmlkZWRcbiAgICAgICAgICAgICAgICBsb2dnZXIudmVyYm9zZShcbiAgICAgICAgICAgICAgICAgICAgXCJjcmVhdGVBdXRoQ29kZVVybFF1ZXJ5U3RyaW5nOiBBZGRpbmcgbG9naW5faGludCBmcm9tIGFjY291bnRcIlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkTG9naW5IaW50KFxuICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LmFjY291bnQudXNlcm5hbWVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHBlcmZvcm1hbmNlQ2xpZW50Py5hZGRGaWVsZHMoXG4gICAgICAgICAgICAgICAgICAgIHsgbG9naW5IaW50RnJvbVVwbjogdHJ1ZSB9LFxuICAgICAgICAgICAgICAgICAgICBjb3JyZWxhdGlvbklkXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjbGllbnRJbmZvID0gYnVpbGRDbGllbnRJbmZvRnJvbUhvbWVBY2NvdW50SWQoXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LmFjY291bnQuaG9tZUFjY291bnRJZFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDY3NPaWQocGFyYW1ldGVycywgY2xpZW50SW5mbyk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIudmVyYm9zZShcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY3JlYXRlQXV0aENvZGVVcmxRdWVyeVN0cmluZzogQ291bGQgbm90IHBhcnNlIGhvbWUgYWNjb3VudCBJRCBmb3IgQ0NTIEhlYWRlclwiXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHJlcXVlc3QubG9naW5IaW50KSB7XG4gICAgICAgICAgICBsb2dnZXIudmVyYm9zZShcbiAgICAgICAgICAgICAgICBcImNyZWF0ZUF1dGhDb2RlVXJsUXVlcnlTdHJpbmc6IE5vIGFjY291bnQsIGFkZGluZyBsb2dpbl9oaW50IGZyb20gcmVxdWVzdFwiXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkTG9naW5IaW50KHBhcmFtZXRlcnMsIHJlcXVlc3QubG9naW5IaW50KTtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENjc1VwbihwYXJhbWV0ZXJzLCByZXF1ZXN0LmxvZ2luSGludCk7XG4gICAgICAgICAgICBwZXJmb3JtYW5jZUNsaWVudD8uYWRkRmllbGRzKFxuICAgICAgICAgICAgICAgIHsgbG9naW5IaW50RnJvbVJlcXVlc3Q6IHRydWUgfSxcbiAgICAgICAgICAgICAgICBjb3JyZWxhdGlvbklkXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICBcImNyZWF0ZUF1dGhDb2RlVXJsUXVlcnlTdHJpbmc6IFByb21wdCBpcyBzZWxlY3RfYWNjb3VudCwgaWdub3JpbmcgYWNjb3VudCBoaW50c1wiXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3Qubm9uY2UpIHtcbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkTm9uY2UocGFyYW1ldGVycywgcmVxdWVzdC5ub25jZSk7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3Quc3RhdGUpIHtcbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkU3RhdGUocGFyYW1ldGVycywgcmVxdWVzdC5zdGF0ZSk7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgICByZXF1ZXN0LmNsYWltcyB8fFxuICAgICAgICAoYXV0aE9wdGlvbnMuY2xpZW50Q2FwYWJpbGl0aWVzICYmXG4gICAgICAgICAgICBhdXRoT3B0aW9ucy5jbGllbnRDYXBhYmlsaXRpZXMubGVuZ3RoID4gMClcbiAgICApIHtcbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2xhaW1zKFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHJlcXVlc3QuY2xhaW1zLFxuICAgICAgICAgICAgYXV0aE9wdGlvbnMuY2xpZW50Q2FwYWJpbGl0aWVzXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3QuZW1iZWRkZWRDbGllbnRJZCkge1xuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRCcm9rZXJQYXJhbWV0ZXJzKFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIGF1dGhPcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgICAgYXV0aE9wdGlvbnMucmVkaXJlY3RVcmlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBJZiBleHRyYVF1ZXJ5UGFyYW1ldGVycyBpbmNsdWRlcyBpbnN0YW5jZV9hd2FyZSBpdHMgdmFsdWUgd2lsbCBiZSBhZGRlZCB3aGVuIGV4dHJhUXVlcnlQYXJhbWV0ZXJzIGFyZSBhZGRlZFxuICAgIGlmIChcbiAgICAgICAgYXV0aE9wdGlvbnMuaW5zdGFuY2VBd2FyZSAmJlxuICAgICAgICAoIXJlcXVlc3QuZXh0cmFRdWVyeVBhcmFtZXRlcnMgfHxcbiAgICAgICAgICAgICFPYmplY3Qua2V5cyhyZXF1ZXN0LmV4dHJhUXVlcnlQYXJhbWV0ZXJzKS5pbmNsdWRlcyhcbiAgICAgICAgICAgICAgICBBQURTZXJ2ZXJQYXJhbUtleXMuSU5TVEFOQ0VfQVdBUkVcbiAgICAgICAgICAgICkpXG4gICAgKSB7XG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZEluc3RhbmNlQXdhcmUocGFyYW1ldGVycyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhcmFtZXRlcnM7XG59XG5cbi8qKlxuICogUmV0dXJucyBhdXRob3JpemUgZW5kcG9pbnQgd2l0aCBnaXZlbiByZXF1ZXN0IHBhcmFtZXRlcnMgaW4gdGhlIHF1ZXJ5IHN0cmluZ1xuICogQHBhcmFtIGF1dGhvcml0eVxuICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXV0aG9yaXplVXJsKFxuICAgIGF1dGhvcml0eTogQXV0aG9yaXR5LFxuICAgIHJlcXVlc3RQYXJhbWV0ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+XG4pOiBzdHJpbmcge1xuICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gbWFwVG9RdWVyeVN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycyk7XG5cbiAgICByZXR1cm4gVXJsU3RyaW5nLmFwcGVuZFF1ZXJ5U3RyaW5nKFxuICAgICAgICBhdXRob3JpdHkuYXV0aG9yaXphdGlvbkVuZHBvaW50LFxuICAgICAgICBxdWVyeVN0cmluZ1xuICAgICk7XG59XG5cbi8qKlxuICogSGFuZGxlcyB0aGUgaGFzaCBmcmFnbWVudCByZXNwb25zZSBmcm9tIHB1YmxpYyBjbGllbnQgY29kZSByZXF1ZXN0LiBSZXR1cm5zIGEgY29kZSByZXNwb25zZSB1c2VkIGJ5XG4gKiB0aGUgY2xpZW50IHRvIGV4Y2hhbmdlIGZvciBhIHRva2VuIGluIGFjcXVpcmVUb2tlbi5cbiAqIEBwYXJhbSBzZXJ2ZXJQYXJhbXNcbiAqIEBwYXJhbSBjYWNoZWRTdGF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXV0aG9yaXphdGlvbkNvZGVQYXlsb2FkKFxuICAgIHNlcnZlclBhcmFtczogQXV0aG9yaXplUmVzcG9uc2UsXG4gICAgY2FjaGVkU3RhdGU6IHN0cmluZ1xuKTogQXV0aG9yaXphdGlvbkNvZGVQYXlsb2FkIHtcbiAgICAvLyBHZXQgY29kZSByZXNwb25zZVxuICAgIHZhbGlkYXRlQXV0aG9yaXphdGlvblJlc3BvbnNlKHNlcnZlclBhcmFtcywgY2FjaGVkU3RhdGUpO1xuXG4gICAgLy8gdGhyb3cgd2hlbiB0aGVyZSBpcyBubyBhdXRoIGNvZGUgaW4gdGhlIHJlc3BvbnNlXG4gICAgaWYgKCFzZXJ2ZXJQYXJhbXMuY29kZSkge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy5hdXRob3JpemF0aW9uQ29kZU1pc3NpbmdGcm9tU2VydmVyUmVzcG9uc2VcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2VydmVyUGFyYW1zIGFzIEF1dGhvcml6YXRpb25Db2RlUGF5bG9hZDtcbn1cblxuLyoqXG4gKiBGdW5jdGlvbiB3aGljaCB2YWxpZGF0ZXMgc2VydmVyIGF1dGhvcml6YXRpb24gY29kZSByZXNwb25zZS5cbiAqIEBwYXJhbSBzZXJ2ZXJSZXNwb25zZUhhc2hcbiAqIEBwYXJhbSByZXF1ZXN0U3RhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlQXV0aG9yaXphdGlvblJlc3BvbnNlKFxuICAgIHNlcnZlclJlc3BvbnNlOiBBdXRob3JpemVSZXNwb25zZSxcbiAgICByZXF1ZXN0U3RhdGU6IHN0cmluZ1xuKTogdm9pZCB7XG4gICAgaWYgKCFzZXJ2ZXJSZXNwb25zZS5zdGF0ZSB8fCAhcmVxdWVzdFN0YXRlKSB7XG4gICAgICAgIHRocm93IHNlcnZlclJlc3BvbnNlLnN0YXRlXG4gICAgICAgICAgICA/IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihcbiAgICAgICAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLnN0YXRlTm90Rm91bmQsXG4gICAgICAgICAgICAgICAgICBcIkNhY2hlZCBTdGF0ZVwiXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIDogY3JlYXRlQ2xpZW50QXV0aEVycm9yKFxuICAgICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuc3RhdGVOb3RGb3VuZCxcbiAgICAgICAgICAgICAgICAgIFwiU2VydmVyIFN0YXRlXCJcbiAgICAgICAgICAgICAgKTtcbiAgICB9XG5cbiAgICBsZXQgZGVjb2RlZFNlcnZlclJlc3BvbnNlU3RhdGU6IHN0cmluZztcbiAgICBsZXQgZGVjb2RlZFJlcXVlc3RTdGF0ZTogc3RyaW5nO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgZGVjb2RlZFNlcnZlclJlc3BvbnNlU3RhdGUgPSBkZWNvZGVVUklDb21wb25lbnQoc2VydmVyUmVzcG9uc2Uuc3RhdGUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKFxuICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZFN0YXRlLFxuICAgICAgICAgICAgc2VydmVyUmVzcG9uc2Uuc3RhdGVcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgICBkZWNvZGVkUmVxdWVzdFN0YXRlID0gZGVjb2RlVVJJQ29tcG9uZW50KHJlcXVlc3RTdGF0ZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy5pbnZhbGlkU3RhdGUsXG4gICAgICAgICAgICBzZXJ2ZXJSZXNwb25zZS5zdGF0ZVxuICAgICAgICApO1xuICAgIH1cblxuICAgIGlmIChkZWNvZGVkU2VydmVyUmVzcG9uc2VTdGF0ZSAhPT0gZGVjb2RlZFJlcXVlc3RTdGF0ZSkge1xuICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoQ2xpZW50QXV0aEVycm9yQ29kZXMuc3RhdGVNaXNtYXRjaCk7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIGVycm9yXG4gICAgaWYgKFxuICAgICAgICBzZXJ2ZXJSZXNwb25zZS5lcnJvciB8fFxuICAgICAgICBzZXJ2ZXJSZXNwb25zZS5lcnJvcl9kZXNjcmlwdGlvbiB8fFxuICAgICAgICBzZXJ2ZXJSZXNwb25zZS5zdWJlcnJvclxuICAgICkge1xuICAgICAgICBjb25zdCBzZXJ2ZXJFcnJvck5vID0gcGFyc2VTZXJ2ZXJFcnJvck5vKHNlcnZlclJlc3BvbnNlKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgaXNJbnRlcmFjdGlvblJlcXVpcmVkRXJyb3IoXG4gICAgICAgICAgICAgICAgc2VydmVyUmVzcG9uc2UuZXJyb3IsXG4gICAgICAgICAgICAgICAgc2VydmVyUmVzcG9uc2UuZXJyb3JfZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgc2VydmVyUmVzcG9uc2Uuc3ViZXJyb3JcbiAgICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvcihcbiAgICAgICAgICAgICAgICBzZXJ2ZXJSZXNwb25zZS5lcnJvciB8fCBcIlwiLFxuICAgICAgICAgICAgICAgIHNlcnZlclJlc3BvbnNlLmVycm9yX2Rlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgIHNlcnZlclJlc3BvbnNlLnN1YmVycm9yLFxuICAgICAgICAgICAgICAgIHNlcnZlclJlc3BvbnNlLnRpbWVzdGFtcCB8fCBcIlwiLFxuICAgICAgICAgICAgICAgIHNlcnZlclJlc3BvbnNlLnRyYWNlX2lkIHx8IFwiXCIsXG4gICAgICAgICAgICAgICAgc2VydmVyUmVzcG9uc2UuY29ycmVsYXRpb25faWQgfHwgXCJcIixcbiAgICAgICAgICAgICAgICBzZXJ2ZXJSZXNwb25zZS5jbGFpbXMgfHwgXCJcIixcbiAgICAgICAgICAgICAgICBzZXJ2ZXJFcnJvck5vXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhyb3cgbmV3IFNlcnZlckVycm9yKFxuICAgICAgICAgICAgc2VydmVyUmVzcG9uc2UuZXJyb3IgfHwgXCJcIixcbiAgICAgICAgICAgIHNlcnZlclJlc3BvbnNlLmVycm9yX2Rlc2NyaXB0aW9uLFxuICAgICAgICAgICAgc2VydmVyUmVzcG9uc2Uuc3ViZXJyb3IsXG4gICAgICAgICAgICBzZXJ2ZXJFcnJvck5vXG4gICAgICAgICk7XG4gICAgfVxufVxuXG4vKipcbiAqIEdldCBzZXJ2ZXIgZXJyb3IgTm8gZnJvbSB0aGUgZXJyb3JfdXJpXG4gKiBAcGFyYW0gc2VydmVyUmVzcG9uc2VcbiAqIEByZXR1cm5zXG4gKi9cbmZ1bmN0aW9uIHBhcnNlU2VydmVyRXJyb3JObyhcbiAgICBzZXJ2ZXJSZXNwb25zZTogQXV0aG9yaXplUmVzcG9uc2Vcbik6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgZXJyb3JDb2RlUHJlZml4ID0gXCJjb2RlPVwiO1xuICAgIGNvbnN0IGVycm9yQ29kZVByZWZpeEluZGV4ID1cbiAgICAgICAgc2VydmVyUmVzcG9uc2UuZXJyb3JfdXJpPy5sYXN0SW5kZXhPZihlcnJvckNvZGVQcmVmaXgpO1xuICAgIHJldHVybiBlcnJvckNvZGVQcmVmaXhJbmRleCAmJiBlcnJvckNvZGVQcmVmaXhJbmRleCA+PSAwXG4gICAgICAgID8gc2VydmVyUmVzcG9uc2UuZXJyb3JfdXJpPy5zdWJzdHJpbmcoXG4gICAgICAgICAgICAgIGVycm9yQ29kZVByZWZpeEluZGV4ICsgZXJyb3JDb2RlUHJlZml4Lmxlbmd0aFxuICAgICAgICAgIClcbiAgICAgICAgOiB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBzaWQgZnJvbSBhY2NvdW50LiBSZXR1cm5zIG51bGwgaWYgaWRUb2tlbkNsYWltcyBhcmUgbm90IHByZXNlbnQgb3Igc2lkIGlzIG5vdCBwcmVzZW50LlxuICogQHBhcmFtIGFjY291bnRcbiAqL1xuZnVuY3Rpb24gZXh0cmFjdEFjY291bnRTaWQoYWNjb3VudDogQWNjb3VudEluZm8pOiBzdHJpbmcgfCBudWxsIHtcbiAgICByZXR1cm4gYWNjb3VudC5pZFRva2VuQ2xhaW1zPy5zaWQgfHwgbnVsbDtcbn1cblxuZnVuY3Rpb24gZXh0cmFjdExvZ2luSGludChhY2NvdW50OiBBY2NvdW50SW5mbyk6IHN0cmluZyB8IG51bGwge1xuICAgIHJldHVybiBhY2NvdW50LmlkVG9rZW5DbGFpbXM/LmxvZ2luX2hpbnQgfHwgbnVsbDtcbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgICBTRVJWRVJfVEVMRU1fQ09OU1RBTlRTLFxuICAgIFNlcGFyYXRvcnMsXG4gICAgQ2FjaGVPdXRjb21lLFxuICAgIENvbnN0YW50cyxcbiAgICBSZWdpb25EaXNjb3ZlcnlTb3VyY2VzLFxuICAgIFJlZ2lvbkRpc2NvdmVyeU91dGNvbWVzLFxufSBmcm9tIFwiLi4vLi4vdXRpbHMvQ29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBDYWNoZU1hbmFnZXIgfSBmcm9tIFwiLi4vLi4vY2FjaGUvQ2FjaGVNYW5hZ2VyLmpzXCI7XG5pbXBvcnQgeyBBdXRoRXJyb3IgfSBmcm9tIFwiLi4vLi4vZXJyb3IvQXV0aEVycm9yLmpzXCI7XG5pbXBvcnQgeyBTZXJ2ZXJUZWxlbWV0cnlSZXF1ZXN0IH0gZnJvbSBcIi4vU2VydmVyVGVsZW1ldHJ5UmVxdWVzdC5qc1wiO1xuaW1wb3J0IHsgU2VydmVyVGVsZW1ldHJ5RW50aXR5IH0gZnJvbSBcIi4uLy4uL2NhY2hlL2VudGl0aWVzL1NlcnZlclRlbGVtZXRyeUVudGl0eS5qc1wiO1xuaW1wb3J0IHsgUmVnaW9uRGlzY292ZXJ5TWV0YWRhdGEgfSBmcm9tIFwiLi4vLi4vYXV0aG9yaXR5L1JlZ2lvbkRpc2NvdmVyeU1ldGFkYXRhLmpzXCI7XG5cbmNvbnN0IHNrdUdyb3VwU2VwYXJhdG9yID0gXCIsXCI7XG5jb25zdCBza3VWYWx1ZVNlcGFyYXRvciA9IFwifFwiO1xuXG50eXBlIFNrdVBhcmFtcyA9IHtcbiAgICBsaWJyYXJ5TmFtZT86IHN0cmluZztcbiAgICBsaWJyYXJ5VmVyc2lvbj86IHN0cmluZztcbiAgICBleHRlbnNpb25OYW1lPzogc3RyaW5nO1xuICAgIGV4dGVuc2lvblZlcnNpb24/OiBzdHJpbmc7XG4gICAgc2t1cz86IHN0cmluZztcbn07XG5cbmZ1bmN0aW9uIG1ha2VFeHRyYVNrdVN0cmluZyhwYXJhbXM6IFNrdVBhcmFtcyk6IHN0cmluZyB7XG4gICAgY29uc3Qge1xuICAgICAgICBza3VzLFxuICAgICAgICBsaWJyYXJ5TmFtZSxcbiAgICAgICAgbGlicmFyeVZlcnNpb24sXG4gICAgICAgIGV4dGVuc2lvbk5hbWUsXG4gICAgICAgIGV4dGVuc2lvblZlcnNpb24sXG4gICAgfSA9IHBhcmFtcztcbiAgICBjb25zdCBza3VNYXA6IE1hcDxudW1iZXIsIChzdHJpbmcgfCB1bmRlZmluZWQpW10+ID0gbmV3IE1hcChbXG4gICAgICAgIFswLCBbbGlicmFyeU5hbWUsIGxpYnJhcnlWZXJzaW9uXV0sXG4gICAgICAgIFsyLCBbZXh0ZW5zaW9uTmFtZSwgZXh0ZW5zaW9uVmVyc2lvbl1dLFxuICAgIF0pO1xuICAgIGxldCBza3VBcnI6IHN0cmluZ1tdID0gW107XG5cbiAgICBpZiAoc2t1cz8ubGVuZ3RoKSB7XG4gICAgICAgIHNrdUFyciA9IHNrdXMuc3BsaXQoc2t1R3JvdXBTZXBhcmF0b3IpO1xuXG4gICAgICAgIC8vIElnbm9yZSBpbnZhbGlkIGlucHV0IHNrdSBwYXJhbVxuICAgICAgICBpZiAoc2t1QXJyLmxlbmd0aCA8IDQpIHtcbiAgICAgICAgICAgIHJldHVybiBza3VzO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc2t1QXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogNCB9LCAoKSA9PiBza3VWYWx1ZVNlcGFyYXRvcik7XG4gICAgfVxuXG4gICAgc2t1TWFwLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcbiAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMiAmJiB2YWx1ZVswXT8ubGVuZ3RoICYmIHZhbHVlWzFdPy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHNldFNrdSh7XG4gICAgICAgICAgICAgICAgc2t1QXJyLFxuICAgICAgICAgICAgICAgIGluZGV4OiBrZXksXG4gICAgICAgICAgICAgICAgc2t1TmFtZTogdmFsdWVbMF0sXG4gICAgICAgICAgICAgICAgc2t1VmVyc2lvbjogdmFsdWVbMV0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHNrdUFyci5qb2luKHNrdUdyb3VwU2VwYXJhdG9yKTtcbn1cblxuZnVuY3Rpb24gc2V0U2t1KHBhcmFtczoge1xuICAgIHNrdUFycjogc3RyaW5nW107XG4gICAgaW5kZXg6IG51bWJlcjtcbiAgICBza3VOYW1lOiBzdHJpbmc7XG4gICAgc2t1VmVyc2lvbjogc3RyaW5nO1xufSk6IHZvaWQge1xuICAgIGNvbnN0IHsgc2t1QXJyLCBpbmRleCwgc2t1TmFtZSwgc2t1VmVyc2lvbiB9ID0gcGFyYW1zO1xuICAgIGlmIChpbmRleCA+PSBza3VBcnIubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2t1QXJyW2luZGV4XSA9IFtza3VOYW1lLCBza3VWZXJzaW9uXS5qb2luKHNrdVZhbHVlU2VwYXJhdG9yKTtcbn1cblxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGNsYXNzIFNlcnZlclRlbGVtZXRyeU1hbmFnZXIge1xuICAgIHByaXZhdGUgY2FjaGVNYW5hZ2VyOiBDYWNoZU1hbmFnZXI7XG4gICAgcHJpdmF0ZSBhcGlJZDogbnVtYmVyO1xuICAgIHByaXZhdGUgY29ycmVsYXRpb25JZDogc3RyaW5nO1xuICAgIHByaXZhdGUgdGVsZW1ldHJ5Q2FjaGVLZXk6IHN0cmluZztcbiAgICBwcml2YXRlIHdyYXBwZXJTS1U6IFN0cmluZztcbiAgICBwcml2YXRlIHdyYXBwZXJWZXI6IFN0cmluZztcbiAgICBwcml2YXRlIHJlZ2lvblVzZWQ6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBwcml2YXRlIHJlZ2lvblNvdXJjZTogUmVnaW9uRGlzY292ZXJ5U291cmNlcyB8IHVuZGVmaW5lZDtcbiAgICBwcml2YXRlIHJlZ2lvbk91dGNvbWU6IFJlZ2lvbkRpc2NvdmVyeU91dGNvbWVzIHwgdW5kZWZpbmVkO1xuICAgIHByaXZhdGUgY2FjaGVPdXRjb21lOiBDYWNoZU91dGNvbWUgPSBDYWNoZU91dGNvbWUuTk9UX0FQUExJQ0FCTEU7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgdGVsZW1ldHJ5UmVxdWVzdDogU2VydmVyVGVsZW1ldHJ5UmVxdWVzdCxcbiAgICAgICAgY2FjaGVNYW5hZ2VyOiBDYWNoZU1hbmFnZXJcbiAgICApIHtcbiAgICAgICAgdGhpcy5jYWNoZU1hbmFnZXIgPSBjYWNoZU1hbmFnZXI7XG4gICAgICAgIHRoaXMuYXBpSWQgPSB0ZWxlbWV0cnlSZXF1ZXN0LmFwaUlkO1xuICAgICAgICB0aGlzLmNvcnJlbGF0aW9uSWQgPSB0ZWxlbWV0cnlSZXF1ZXN0LmNvcnJlbGF0aW9uSWQ7XG4gICAgICAgIHRoaXMud3JhcHBlclNLVSA9IHRlbGVtZXRyeVJlcXVlc3Qud3JhcHBlclNLVSB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HO1xuICAgICAgICB0aGlzLndyYXBwZXJWZXIgPSB0ZWxlbWV0cnlSZXF1ZXN0LndyYXBwZXJWZXIgfHwgQ29uc3RhbnRzLkVNUFRZX1NUUklORztcblxuICAgICAgICB0aGlzLnRlbGVtZXRyeUNhY2hlS2V5ID1cbiAgICAgICAgICAgIFNFUlZFUl9URUxFTV9DT05TVEFOVFMuQ0FDSEVfS0VZICtcbiAgICAgICAgICAgIFNlcGFyYXRvcnMuQ0FDSEVfS0VZX1NFUEFSQVRPUiArXG4gICAgICAgICAgICB0ZWxlbWV0cnlSZXF1ZXN0LmNsaWVudElkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFQSSB0byBhZGQgTVNFUiBUZWxlbWV0cnkgdG8gcmVxdWVzdFxuICAgICAqL1xuICAgIGdlbmVyYXRlQ3VycmVudFJlcXVlc3RIZWFkZXJWYWx1ZSgpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCByZXF1ZXN0ID0gYCR7dGhpcy5hcGlJZH0ke1NFUlZFUl9URUxFTV9DT05TVEFOVFMuVkFMVUVfU0VQQVJBVE9SfSR7dGhpcy5jYWNoZU91dGNvbWV9YDtcbiAgICAgICAgY29uc3QgcGxhdGZvcm1GaWVsZHNBcnIgPSBbdGhpcy53cmFwcGVyU0tVLCB0aGlzLndyYXBwZXJWZXJdO1xuICAgICAgICBjb25zdCBuYXRpdmVCcm9rZXJFcnJvckNvZGUgPSB0aGlzLmdldE5hdGl2ZUJyb2tlckVycm9yQ29kZSgpO1xuICAgICAgICBpZiAobmF0aXZlQnJva2VyRXJyb3JDb2RlPy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHBsYXRmb3JtRmllbGRzQXJyLnB1c2goYGJyb2tlcl9lcnJvcj0ke25hdGl2ZUJyb2tlckVycm9yQ29kZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwbGF0Zm9ybUZpZWxkcyA9IHBsYXRmb3JtRmllbGRzQXJyLmpvaW4oXG4gICAgICAgICAgICBTRVJWRVJfVEVMRU1fQ09OU1RBTlRTLlZBTFVFX1NFUEFSQVRPUlxuICAgICAgICApO1xuICAgICAgICBjb25zdCByZWdpb25EaXNjb3ZlcnlGaWVsZHMgPSB0aGlzLmdldFJlZ2lvbkRpc2NvdmVyeUZpZWxkcygpO1xuICAgICAgICBjb25zdCByZXF1ZXN0V2l0aFJlZ2lvbkRpc2NvdmVyeUZpZWxkcyA9IFtcbiAgICAgICAgICAgIHJlcXVlc3QsXG4gICAgICAgICAgICByZWdpb25EaXNjb3ZlcnlGaWVsZHMsXG4gICAgICAgIF0uam9pbihTRVJWRVJfVEVMRU1fQ09OU1RBTlRTLlZBTFVFX1NFUEFSQVRPUik7XG5cbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFNFUlZFUl9URUxFTV9DT05TVEFOVFMuU0NIRU1BX1ZFUlNJT04sXG4gICAgICAgICAgICByZXF1ZXN0V2l0aFJlZ2lvbkRpc2NvdmVyeUZpZWxkcyxcbiAgICAgICAgICAgIHBsYXRmb3JtRmllbGRzLFxuICAgICAgICBdLmpvaW4oU0VSVkVSX1RFTEVNX0NPTlNUQU5UUy5DQVRFR09SWV9TRVBBUkFUT1IpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFQSSB0byBhZGQgTVNFUiBUZWxlbWV0cnkgZm9yIHRoZSBsYXN0IGZhaWxlZCByZXF1ZXN0XG4gICAgICovXG4gICAgZ2VuZXJhdGVMYXN0UmVxdWVzdEhlYWRlclZhbHVlKCk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGxhc3RSZXF1ZXN0cyA9IHRoaXMuZ2V0TGFzdFJlcXVlc3RzKCk7XG5cbiAgICAgICAgY29uc3QgbWF4RXJyb3JzID0gU2VydmVyVGVsZW1ldHJ5TWFuYWdlci5tYXhFcnJvcnNUb1NlbmQobGFzdFJlcXVlc3RzKTtcbiAgICAgICAgY29uc3QgZmFpbGVkUmVxdWVzdHMgPSBsYXN0UmVxdWVzdHMuZmFpbGVkUmVxdWVzdHNcbiAgICAgICAgICAgIC5zbGljZSgwLCAyICogbWF4RXJyb3JzKVxuICAgICAgICAgICAgLmpvaW4oU0VSVkVSX1RFTEVNX0NPTlNUQU5UUy5WQUxVRV9TRVBBUkFUT1IpO1xuICAgICAgICBjb25zdCBlcnJvcnMgPSBsYXN0UmVxdWVzdHMuZXJyb3JzXG4gICAgICAgICAgICAuc2xpY2UoMCwgbWF4RXJyb3JzKVxuICAgICAgICAgICAgLmpvaW4oU0VSVkVSX1RFTEVNX0NPTlNUQU5UUy5WQUxVRV9TRVBBUkFUT1IpO1xuICAgICAgICBjb25zdCBlcnJvckNvdW50ID0gbGFzdFJlcXVlc3RzLmVycm9ycy5sZW5ndGg7XG5cbiAgICAgICAgLy8gSW5kaWNhdGUgd2hldGhlciB0aGlzIGhlYWRlciBjb250YWlucyBhbGwgZGF0YSBvciBwYXJ0aWFsIGRhdGFcbiAgICAgICAgY29uc3Qgb3ZlcmZsb3cgPVxuICAgICAgICAgICAgbWF4RXJyb3JzIDwgZXJyb3JDb3VudFxuICAgICAgICAgICAgICAgID8gU0VSVkVSX1RFTEVNX0NPTlNUQU5UUy5PVkVSRkxPV19UUlVFXG4gICAgICAgICAgICAgICAgOiBTRVJWRVJfVEVMRU1fQ09OU1RBTlRTLk9WRVJGTE9XX0ZBTFNFO1xuICAgICAgICBjb25zdCBwbGF0Zm9ybUZpZWxkcyA9IFtlcnJvckNvdW50LCBvdmVyZmxvd10uam9pbihcbiAgICAgICAgICAgIFNFUlZFUl9URUxFTV9DT05TVEFOVFMuVkFMVUVfU0VQQVJBVE9SXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFNFUlZFUl9URUxFTV9DT05TVEFOVFMuU0NIRU1BX1ZFUlNJT04sXG4gICAgICAgICAgICBsYXN0UmVxdWVzdHMuY2FjaGVIaXRzLFxuICAgICAgICAgICAgZmFpbGVkUmVxdWVzdHMsXG4gICAgICAgICAgICBlcnJvcnMsXG4gICAgICAgICAgICBwbGF0Zm9ybUZpZWxkcyxcbiAgICAgICAgXS5qb2luKFNFUlZFUl9URUxFTV9DT05TVEFOVFMuQ0FURUdPUllfU0VQQVJBVE9SKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBUEkgdG8gY2FjaGUgdG9rZW4gZmFpbHVyZXMgZm9yIE1TRVIgZGF0YSBjYXB0dXJlXG4gICAgICogQHBhcmFtIGVycm9yXG4gICAgICovXG4gICAgY2FjaGVGYWlsZWRSZXF1ZXN0KGVycm9yOiB1bmtub3duKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGxhc3RSZXF1ZXN0cyA9IHRoaXMuZ2V0TGFzdFJlcXVlc3RzKCk7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGxhc3RSZXF1ZXN0cy5lcnJvcnMubGVuZ3RoID49XG4gICAgICAgICAgICBTRVJWRVJfVEVMRU1fQ09OU1RBTlRTLk1BWF9DQUNIRURfRVJST1JTXG4gICAgICAgICkge1xuICAgICAgICAgICAgLy8gUmVtb3ZlIGEgY2FjaGVkIGVycm9yIHRvIG1ha2Ugcm9vbSwgZmlyc3QgaW4gZmlyc3Qgb3V0XG4gICAgICAgICAgICBsYXN0UmVxdWVzdHMuZmFpbGVkUmVxdWVzdHMuc2hpZnQoKTsgLy8gYXBpSWRcbiAgICAgICAgICAgIGxhc3RSZXF1ZXN0cy5mYWlsZWRSZXF1ZXN0cy5zaGlmdCgpOyAvLyBjb3JyZWxhdGlvbklkXG4gICAgICAgICAgICBsYXN0UmVxdWVzdHMuZXJyb3JzLnNoaWZ0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBsYXN0UmVxdWVzdHMuZmFpbGVkUmVxdWVzdHMucHVzaCh0aGlzLmFwaUlkLCB0aGlzLmNvcnJlbGF0aW9uSWQpO1xuXG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmICEhZXJyb3IgJiYgZXJyb3IudG9TdHJpbmcoKSkge1xuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgQXV0aEVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLnN1YkVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhc3RSZXF1ZXN0cy5lcnJvcnMucHVzaChlcnJvci5zdWJFcnJvcik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlcnJvci5lcnJvckNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFzdFJlcXVlc3RzLmVycm9ycy5wdXNoKGVycm9yLmVycm9yQ29kZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGFzdFJlcXVlc3RzLmVycm9ycy5wdXNoKGVycm9yLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGFzdFJlcXVlc3RzLmVycm9ycy5wdXNoKGVycm9yLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGFzdFJlcXVlc3RzLmVycm9ycy5wdXNoKFNFUlZFUl9URUxFTV9DT05TVEFOVFMuVU5LTk9XTl9FUlJPUik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNhY2hlTWFuYWdlci5zZXRTZXJ2ZXJUZWxlbWV0cnkoXG4gICAgICAgICAgICB0aGlzLnRlbGVtZXRyeUNhY2hlS2V5LFxuICAgICAgICAgICAgbGFzdFJlcXVlc3RzXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBzZXJ2ZXIgdGVsZW1ldHJ5IGNhY2hlIGVudHJ5IGJ5IGluY3JlbWVudGluZyBjYWNoZSBoaXQgY291bnRlclxuICAgICAqL1xuICAgIGluY3JlbWVudENhY2hlSGl0cygpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBsYXN0UmVxdWVzdHMgPSB0aGlzLmdldExhc3RSZXF1ZXN0cygpO1xuICAgICAgICBsYXN0UmVxdWVzdHMuY2FjaGVIaXRzICs9IDE7XG5cbiAgICAgICAgdGhpcy5jYWNoZU1hbmFnZXIuc2V0U2VydmVyVGVsZW1ldHJ5KFxuICAgICAgICAgICAgdGhpcy50ZWxlbWV0cnlDYWNoZUtleSxcbiAgICAgICAgICAgIGxhc3RSZXF1ZXN0c1xuICAgICAgICApO1xuICAgICAgICByZXR1cm4gbGFzdFJlcXVlc3RzLmNhY2hlSGl0cztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHNlcnZlciB0ZWxlbWV0cnkgZW50aXR5IGZyb20gY2FjaGUgb3IgaW5pdGlhbGl6ZSBhIG5ldyBvbmVcbiAgICAgKi9cbiAgICBnZXRMYXN0UmVxdWVzdHMoKTogU2VydmVyVGVsZW1ldHJ5RW50aXR5IHtcbiAgICAgICAgY29uc3QgaW5pdGlhbFZhbHVlOiBTZXJ2ZXJUZWxlbWV0cnlFbnRpdHkgPSB7XG4gICAgICAgICAgICBmYWlsZWRSZXF1ZXN0czogW10sXG4gICAgICAgICAgICBlcnJvcnM6IFtdLFxuICAgICAgICAgICAgY2FjaGVIaXRzOiAwLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBsYXN0UmVxdWVzdHMgPSB0aGlzLmNhY2hlTWFuYWdlci5nZXRTZXJ2ZXJUZWxlbWV0cnkoXG4gICAgICAgICAgICB0aGlzLnRlbGVtZXRyeUNhY2hlS2V5XG4gICAgICAgICkgYXMgU2VydmVyVGVsZW1ldHJ5RW50aXR5O1xuXG4gICAgICAgIHJldHVybiBsYXN0UmVxdWVzdHMgfHwgaW5pdGlhbFZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBzZXJ2ZXIgdGVsZW1ldHJ5IGNhY2hlIGVudHJ5XG4gICAgICovXG4gICAgY2xlYXJUZWxlbWV0cnlDYWNoZSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgbGFzdFJlcXVlc3RzID0gdGhpcy5nZXRMYXN0UmVxdWVzdHMoKTtcbiAgICAgICAgY29uc3QgbnVtRXJyb3JzRmx1c2hlZCA9XG4gICAgICAgICAgICBTZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyLm1heEVycm9yc1RvU2VuZChsYXN0UmVxdWVzdHMpO1xuICAgICAgICBjb25zdCBlcnJvckNvdW50ID0gbGFzdFJlcXVlc3RzLmVycm9ycy5sZW5ndGg7XG4gICAgICAgIGlmIChudW1FcnJvcnNGbHVzaGVkID09PSBlcnJvckNvdW50KSB7XG4gICAgICAgICAgICAvLyBBbGwgZXJyb3JzIHdlcmUgc2VudCBvbiBsYXN0IHJlcXVlc3QsIGNsZWFyIFRlbGVtZXRyeSBjYWNoZVxuICAgICAgICAgICAgdGhpcy5jYWNoZU1hbmFnZXIucmVtb3ZlSXRlbSh0aGlzLnRlbGVtZXRyeUNhY2hlS2V5KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFBhcnRpYWwgZGF0YSB3YXMgZmx1c2hlZCB0byBzZXJ2ZXIsIGNvbnN0cnVjdCBhIG5ldyB0ZWxlbWV0cnkgY2FjaGUgaXRlbSB3aXRoIGVycm9ycyB0aGF0IHdlcmUgbm90IGZsdXNoZWRcbiAgICAgICAgICAgIGNvbnN0IHNlcnZlclRlbGVtRW50aXR5OiBTZXJ2ZXJUZWxlbWV0cnlFbnRpdHkgPSB7XG4gICAgICAgICAgICAgICAgZmFpbGVkUmVxdWVzdHM6IGxhc3RSZXF1ZXN0cy5mYWlsZWRSZXF1ZXN0cy5zbGljZShcbiAgICAgICAgICAgICAgICAgICAgbnVtRXJyb3JzRmx1c2hlZCAqIDJcbiAgICAgICAgICAgICAgICApLCAvLyBmYWlsZWRSZXF1ZXN0cyBjb250YWlucyAyIGl0ZW1zIGZvciBlYWNoIGVycm9yXG4gICAgICAgICAgICAgICAgZXJyb3JzOiBsYXN0UmVxdWVzdHMuZXJyb3JzLnNsaWNlKG51bUVycm9yc0ZsdXNoZWQpLFxuICAgICAgICAgICAgICAgIGNhY2hlSGl0czogMCxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMuY2FjaGVNYW5hZ2VyLnNldFNlcnZlclRlbGVtZXRyeShcbiAgICAgICAgICAgICAgICB0aGlzLnRlbGVtZXRyeUNhY2hlS2V5LFxuICAgICAgICAgICAgICAgIHNlcnZlclRlbGVtRW50aXR5XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbWF4aW11bSBudW1iZXIgb2YgZXJyb3JzIHRoYXQgY2FuIGJlIGZsdXNoZWQgdG8gdGhlIHNlcnZlciBpbiB0aGUgbmV4dCBuZXR3b3JrIHJlcXVlc3RcbiAgICAgKiBAcGFyYW0gc2VydmVyVGVsZW1ldHJ5RW50aXR5XG4gICAgICovXG4gICAgc3RhdGljIG1heEVycm9yc1RvU2VuZChcbiAgICAgICAgc2VydmVyVGVsZW1ldHJ5RW50aXR5OiBTZXJ2ZXJUZWxlbWV0cnlFbnRpdHlcbiAgICApOiBudW1iZXIge1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgbGV0IG1heEVycm9ycyA9IDA7XG4gICAgICAgIGxldCBkYXRhU2l6ZSA9IDA7XG4gICAgICAgIGNvbnN0IGVycm9yQ291bnQgPSBzZXJ2ZXJUZWxlbWV0cnlFbnRpdHkuZXJyb3JzLmxlbmd0aDtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGVycm9yQ291bnQ7IGkrKykge1xuICAgICAgICAgICAgLy8gZmFpbGVkUmVxdWVzdHMgcGFyYW1ldGVyIGNvbnRhaW5zIHBhaXJzIG9mIGFwaUlkIGFuZCBjb3JyZWxhdGlvbklkLCBtdWx0aXBseSBpbmRleCBieSAyIHRvIHByZXNlcnZlIHBhaXJzXG4gICAgICAgICAgICBjb25zdCBhcGlJZCA9XG4gICAgICAgICAgICAgICAgc2VydmVyVGVsZW1ldHJ5RW50aXR5LmZhaWxlZFJlcXVlc3RzWzIgKiBpXSB8fFxuICAgICAgICAgICAgICAgIENvbnN0YW50cy5FTVBUWV9TVFJJTkc7XG4gICAgICAgICAgICBjb25zdCBjb3JyZWxhdGlvbklkID1cbiAgICAgICAgICAgICAgICBzZXJ2ZXJUZWxlbWV0cnlFbnRpdHkuZmFpbGVkUmVxdWVzdHNbMiAqIGkgKyAxXSB8fFxuICAgICAgICAgICAgICAgIENvbnN0YW50cy5FTVBUWV9TVFJJTkc7XG4gICAgICAgICAgICBjb25zdCBlcnJvckNvZGUgPVxuICAgICAgICAgICAgICAgIHNlcnZlclRlbGVtZXRyeUVudGl0eS5lcnJvcnNbaV0gfHwgQ29uc3RhbnRzLkVNUFRZX1NUUklORztcblxuICAgICAgICAgICAgLy8gQ291bnQgbnVtYmVyIG9mIGNoYXJhY3RlcnMgdGhhdCB3b3VsZCBiZSBhZGRlZCB0byBoZWFkZXIsIGVhY2ggY2hhcmFjdGVyIGlzIDEgYnl0ZS4gQWRkIDMgYXQgdGhlIGVuZCB0byBhY2NvdW50IGZvciBzZXBhcmF0b3JzXG4gICAgICAgICAgICBkYXRhU2l6ZSArPVxuICAgICAgICAgICAgICAgIGFwaUlkLnRvU3RyaW5nKCkubGVuZ3RoICtcbiAgICAgICAgICAgICAgICBjb3JyZWxhdGlvbklkLnRvU3RyaW5nKCkubGVuZ3RoICtcbiAgICAgICAgICAgICAgICBlcnJvckNvZGUubGVuZ3RoICtcbiAgICAgICAgICAgICAgICAzO1xuXG4gICAgICAgICAgICBpZiAoZGF0YVNpemUgPCBTRVJWRVJfVEVMRU1fQ09OU1RBTlRTLk1BWF9MQVNUX0hFQURFUl9CWVRFUykge1xuICAgICAgICAgICAgICAgIC8vIEFkZGluZyB0aGlzIGVudHJ5IHRvIHRoZSBoZWFkZXIgd291bGQgc3RpbGwga2VlcCBoZWFkZXIgc2l6ZSBiZWxvdyB0aGUgbGltaXRcbiAgICAgICAgICAgICAgICBtYXhFcnJvcnMgKz0gMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbWF4RXJyb3JzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcmVnaW9uIGRpc2NvdmVyeSBmaWVsZHNcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHN0cmluZ1xuICAgICAqL1xuICAgIGdldFJlZ2lvbkRpc2NvdmVyeUZpZWxkcygpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCByZWdpb25EaXNjb3ZlcnlGaWVsZHM6IHN0cmluZ1tdID0gW107XG5cbiAgICAgICAgcmVnaW9uRGlzY292ZXJ5RmllbGRzLnB1c2godGhpcy5yZWdpb25Vc2VkIHx8IENvbnN0YW50cy5FTVBUWV9TVFJJTkcpO1xuICAgICAgICByZWdpb25EaXNjb3ZlcnlGaWVsZHMucHVzaCh0aGlzLnJlZ2lvblNvdXJjZSB8fCBDb25zdGFudHMuRU1QVFlfU1RSSU5HKTtcbiAgICAgICAgcmVnaW9uRGlzY292ZXJ5RmllbGRzLnB1c2goXG4gICAgICAgICAgICB0aGlzLnJlZ2lvbk91dGNvbWUgfHwgQ29uc3RhbnRzLkVNUFRZX1NUUklOR1xuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiByZWdpb25EaXNjb3ZlcnlGaWVsZHMuam9pbihcIixcIik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSByZWdpb24gZGlzY292ZXJ5IG1ldGFkYXRhXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcmVnaW9uRGlzY292ZXJ5TWV0YWRhdGFcbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgdXBkYXRlUmVnaW9uRGlzY292ZXJ5TWV0YWRhdGEoXG4gICAgICAgIHJlZ2lvbkRpc2NvdmVyeU1ldGFkYXRhOiBSZWdpb25EaXNjb3ZlcnlNZXRhZGF0YVxuICAgICk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlZ2lvblVzZWQgPSByZWdpb25EaXNjb3ZlcnlNZXRhZGF0YS5yZWdpb25fdXNlZDtcbiAgICAgICAgdGhpcy5yZWdpb25Tb3VyY2UgPSByZWdpb25EaXNjb3ZlcnlNZXRhZGF0YS5yZWdpb25fc291cmNlO1xuICAgICAgICB0aGlzLnJlZ2lvbk91dGNvbWUgPSByZWdpb25EaXNjb3ZlcnlNZXRhZGF0YS5yZWdpb25fb3V0Y29tZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgY2FjaGUgb3V0Y29tZVxuICAgICAqL1xuICAgIHNldENhY2hlT3V0Y29tZShjYWNoZU91dGNvbWU6IENhY2hlT3V0Y29tZSk6IHZvaWQge1xuICAgICAgICB0aGlzLmNhY2hlT3V0Y29tZSA9IGNhY2hlT3V0Y29tZTtcbiAgICB9XG5cbiAgICBzZXROYXRpdmVCcm9rZXJFcnJvckNvZGUoZXJyb3JDb2RlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgbGFzdFJlcXVlc3RzID0gdGhpcy5nZXRMYXN0UmVxdWVzdHMoKTtcbiAgICAgICAgbGFzdFJlcXVlc3RzLm5hdGl2ZUJyb2tlckVycm9yQ29kZSA9IGVycm9yQ29kZTtcbiAgICAgICAgdGhpcy5jYWNoZU1hbmFnZXIuc2V0U2VydmVyVGVsZW1ldHJ5KFxuICAgICAgICAgICAgdGhpcy50ZWxlbWV0cnlDYWNoZUtleSxcbiAgICAgICAgICAgIGxhc3RSZXF1ZXN0c1xuICAgICAgICApO1xuICAgIH1cblxuICAgIGdldE5hdGl2ZUJyb2tlckVycm9yQ29kZSgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRMYXN0UmVxdWVzdHMoKS5uYXRpdmVCcm9rZXJFcnJvckNvZGU7XG4gICAgfVxuXG4gICAgY2xlYXJOYXRpdmVCcm9rZXJFcnJvckNvZGUoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGxhc3RSZXF1ZXN0cyA9IHRoaXMuZ2V0TGFzdFJlcXVlc3RzKCk7XG4gICAgICAgIGRlbGV0ZSBsYXN0UmVxdWVzdHMubmF0aXZlQnJva2VyRXJyb3JDb2RlO1xuICAgICAgICB0aGlzLmNhY2hlTWFuYWdlci5zZXRTZXJ2ZXJUZWxlbWV0cnkoXG4gICAgICAgICAgICB0aGlzLnRlbGVtZXRyeUNhY2hlS2V5LFxuICAgICAgICAgICAgbGFzdFJlcXVlc3RzXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgc3RhdGljIG1ha2VFeHRyYVNrdVN0cmluZyhwYXJhbXM6IFNrdVBhcmFtcyk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBtYWtlRXh0cmFTa3VTdHJpbmcocGFyYW1zKTtcbiAgICB9XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gICAgQWNjb3VudENhY2hlLFxuICAgIElkVG9rZW5DYWNoZSxcbiAgICBBY2Nlc3NUb2tlbkNhY2hlLFxuICAgIFJlZnJlc2hUb2tlbkNhY2hlLFxuICAgIEFwcE1ldGFkYXRhQ2FjaGUsXG4gICAgQWNjb3VudEVudGl0eSxcbiAgICBJZFRva2VuRW50aXR5LFxuICAgIEFjY2Vzc1Rva2VuRW50aXR5LFxuICAgIFJlZnJlc2hUb2tlbkVudGl0eSxcbiAgICBDYWNoZU1hbmFnZXIsXG4gICAgQ3JlZGVudGlhbFR5cGUsXG4gICAgQXV0aGVudGljYXRpb25TY2hlbWUsXG59IGZyb20gXCJAYXp1cmUvbXNhbC1jb21tb24vbm9kZVwiO1xuaW1wb3J0IHtcbiAgICBKc29uQ2FjaGUsXG4gICAgSW5NZW1vcnlDYWNoZSxcbiAgICBTZXJpYWxpemVkQWNjb3VudEVudGl0eSxcbiAgICBTZXJpYWxpemVkSWRUb2tlbkVudGl0eSxcbiAgICBTZXJpYWxpemVkQWNjZXNzVG9rZW5FbnRpdHksXG4gICAgU2VyaWFsaXplZFJlZnJlc2hUb2tlbkVudGl0eSxcbiAgICBTZXJpYWxpemVkQXBwTWV0YWRhdGFFbnRpdHksXG59IGZyb20gXCIuL1NlcmlhbGl6ZXJUeXBlcy5qc1wiO1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgZGVzZXJpYWxpemVzIGNhY2hlIGVudGl0aWVzIHJlYWQgZnJvbSB0aGUgZmlsZSBpbnRvIGluLW1lbW9yeSBvYmplY3QgdHlwZXMgZGVmaW5lZCBpbnRlcm5hbGx5XG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGNsYXNzIERlc2VyaWFsaXplciB7XG4gICAgLyoqXG4gICAgICogUGFyc2UgdGhlIEpTT04gYmxvYiBpbiBtZW1vcnkgYW5kIGRlc2VyaWFsaXplIHRoZSBjb250ZW50XG4gICAgICogQHBhcmFtIGNhY2hlZEpzb24gLSBKU09OIGJsb2IgY2FjaGVcbiAgICAgKi9cbiAgICBzdGF0aWMgZGVzZXJpYWxpemVKU09OQmxvYihqc29uRmlsZTogc3RyaW5nKTogSnNvbkNhY2hlIHtcbiAgICAgICAgY29uc3QgZGVzZXJpYWxpemVkQ2FjaGUgPSAhanNvbkZpbGUgPyB7fSA6IEpTT04ucGFyc2UoanNvbkZpbGUpO1xuICAgICAgICByZXR1cm4gZGVzZXJpYWxpemVkQ2FjaGU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVzZXJpYWxpemVzIGFjY291bnRzIHRvIEFjY291bnRFbnRpdHkgb2JqZWN0c1xuICAgICAqIEBwYXJhbSBhY2NvdW50cyAtIGFjY291bnRzIG9mIHR5cGUgU2VyaWFsaXplZEFjY291bnRFbnRpdHlcbiAgICAgKi9cbiAgICBzdGF0aWMgZGVzZXJpYWxpemVBY2NvdW50cyhcbiAgICAgICAgYWNjb3VudHM6IFJlY29yZDxzdHJpbmcsIFNlcmlhbGl6ZWRBY2NvdW50RW50aXR5PlxuICAgICk6IEFjY291bnRDYWNoZSB7XG4gICAgICAgIGNvbnN0IGFjY291bnRPYmplY3RzOiBBY2NvdW50Q2FjaGUgPSB7fTtcbiAgICAgICAgaWYgKGFjY291bnRzKSB7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhhY2NvdW50cykubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJpYWxpemVkQWNjID0gYWNjb3VudHNba2V5XTtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXBwZWRBY2MgPSB7XG4gICAgICAgICAgICAgICAgICAgIGhvbWVBY2NvdW50SWQ6IHNlcmlhbGl6ZWRBY2MuaG9tZV9hY2NvdW50X2lkLFxuICAgICAgICAgICAgICAgICAgICBlbnZpcm9ubWVudDogc2VyaWFsaXplZEFjYy5lbnZpcm9ubWVudCxcbiAgICAgICAgICAgICAgICAgICAgcmVhbG06IHNlcmlhbGl6ZWRBY2MucmVhbG0sXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsQWNjb3VudElkOiBzZXJpYWxpemVkQWNjLmxvY2FsX2FjY291bnRfaWQsXG4gICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBzZXJpYWxpemVkQWNjLnVzZXJuYW1lLFxuICAgICAgICAgICAgICAgICAgICBhdXRob3JpdHlUeXBlOiBzZXJpYWxpemVkQWNjLmF1dGhvcml0eV90eXBlLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBzZXJpYWxpemVkQWNjLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGNsaWVudEluZm86IHNlcmlhbGl6ZWRBY2MuY2xpZW50X2luZm8sXG4gICAgICAgICAgICAgICAgICAgIGxhc3RNb2RpZmljYXRpb25UaW1lOiBzZXJpYWxpemVkQWNjLmxhc3RfbW9kaWZpY2F0aW9uX3RpbWUsXG4gICAgICAgICAgICAgICAgICAgIGxhc3RNb2RpZmljYXRpb25BcHA6IHNlcmlhbGl6ZWRBY2MubGFzdF9tb2RpZmljYXRpb25fYXBwLFxuICAgICAgICAgICAgICAgICAgICB0ZW5hbnRQcm9maWxlczogc2VyaWFsaXplZEFjYy50ZW5hbnRQcm9maWxlcz8ubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgKHNlcmlhbGl6ZWRUZW5hbnRQcm9maWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2Uoc2VyaWFsaXplZFRlbmFudFByb2ZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgYWNjb3VudDogQWNjb3VudEVudGl0eSA9IG5ldyBBY2NvdW50RW50aXR5KCk7XG4gICAgICAgICAgICAgICAgQ2FjaGVNYW5hZ2VyLnRvT2JqZWN0KGFjY291bnQsIG1hcHBlZEFjYyk7XG4gICAgICAgICAgICAgICAgYWNjb3VudE9iamVjdHNba2V5XSA9IGFjY291bnQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhY2NvdW50T2JqZWN0cztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXNlcmlhbGl6ZXMgaWQgdG9rZW5zIHRvIElkVG9rZW5FbnRpdHkgb2JqZWN0c1xuICAgICAqIEBwYXJhbSBpZFRva2VucyAtIGNyZWRlbnRpYWxzIG9mIHR5cGUgU2VyaWFsaXplZElkVG9rZW5FbnRpdHlcbiAgICAgKi9cbiAgICBzdGF0aWMgZGVzZXJpYWxpemVJZFRva2VucyhcbiAgICAgICAgaWRUb2tlbnM6IFJlY29yZDxzdHJpbmcsIFNlcmlhbGl6ZWRJZFRva2VuRW50aXR5PlxuICAgICk6IElkVG9rZW5DYWNoZSB7XG4gICAgICAgIGNvbnN0IGlkT2JqZWN0czogSWRUb2tlbkNhY2hlID0ge307XG4gICAgICAgIGlmIChpZFRva2Vucykge1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoaWRUb2tlbnMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VyaWFsaXplZElkVCA9IGlkVG9rZW5zW2tleV07XG4gICAgICAgICAgICAgICAgY29uc3QgaWRUb2tlbjogSWRUb2tlbkVudGl0eSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaG9tZUFjY291bnRJZDogc2VyaWFsaXplZElkVC5ob21lX2FjY291bnRfaWQsXG4gICAgICAgICAgICAgICAgICAgIGVudmlyb25tZW50OiBzZXJpYWxpemVkSWRULmVudmlyb25tZW50LFxuICAgICAgICAgICAgICAgICAgICBjcmVkZW50aWFsVHlwZTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcmlhbGl6ZWRJZFQuY3JlZGVudGlhbF90eXBlIGFzIENyZWRlbnRpYWxUeXBlLFxuICAgICAgICAgICAgICAgICAgICBjbGllbnRJZDogc2VyaWFsaXplZElkVC5jbGllbnRfaWQsXG4gICAgICAgICAgICAgICAgICAgIHNlY3JldDogc2VyaWFsaXplZElkVC5zZWNyZXQsXG4gICAgICAgICAgICAgICAgICAgIHJlYWxtOiBzZXJpYWxpemVkSWRULnJlYWxtLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWRPYmplY3RzW2tleV0gPSBpZFRva2VuO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlkT2JqZWN0cztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXNlcmlhbGl6ZXMgYWNjZXNzIHRva2VucyB0byBBY2Nlc3NUb2tlbkVudGl0eSBvYmplY3RzXG4gICAgICogQHBhcmFtIGFjY2Vzc1Rva2VucyAtIGFjY2VzcyB0b2tlbnMgb2YgdHlwZSBTZXJpYWxpemVkQWNjZXNzVG9rZW5FbnRpdHlcbiAgICAgKi9cbiAgICBzdGF0aWMgZGVzZXJpYWxpemVBY2Nlc3NUb2tlbnMoXG4gICAgICAgIGFjY2Vzc1Rva2VuczogUmVjb3JkPHN0cmluZywgU2VyaWFsaXplZEFjY2Vzc1Rva2VuRW50aXR5PlxuICAgICk6IEFjY2Vzc1Rva2VuQ2FjaGUge1xuICAgICAgICBjb25zdCBhdE9iamVjdHM6IEFjY2Vzc1Rva2VuQ2FjaGUgPSB7fTtcbiAgICAgICAgaWYgKGFjY2Vzc1Rva2Vucykge1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoYWNjZXNzVG9rZW5zKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlcmlhbGl6ZWRBVCA9IGFjY2Vzc1Rva2Vuc1trZXldO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuOiBBY2Nlc3NUb2tlbkVudGl0eSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaG9tZUFjY291bnRJZDogc2VyaWFsaXplZEFULmhvbWVfYWNjb3VudF9pZCxcbiAgICAgICAgICAgICAgICAgICAgZW52aXJvbm1lbnQ6IHNlcmlhbGl6ZWRBVC5lbnZpcm9ubWVudCxcbiAgICAgICAgICAgICAgICAgICAgY3JlZGVudGlhbFR5cGU6XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXJpYWxpemVkQVQuY3JlZGVudGlhbF90eXBlIGFzIENyZWRlbnRpYWxUeXBlLFxuICAgICAgICAgICAgICAgICAgICBjbGllbnRJZDogc2VyaWFsaXplZEFULmNsaWVudF9pZCxcbiAgICAgICAgICAgICAgICAgICAgc2VjcmV0OiBzZXJpYWxpemVkQVQuc2VjcmV0LFxuICAgICAgICAgICAgICAgICAgICByZWFsbTogc2VyaWFsaXplZEFULnJlYWxtLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IHNlcmlhbGl6ZWRBVC50YXJnZXQsXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlZEF0OiBzZXJpYWxpemVkQVQuY2FjaGVkX2F0LFxuICAgICAgICAgICAgICAgICAgICBleHBpcmVzT246IHNlcmlhbGl6ZWRBVC5leHBpcmVzX29uLFxuICAgICAgICAgICAgICAgICAgICBleHRlbmRlZEV4cGlyZXNPbjogc2VyaWFsaXplZEFULmV4dGVuZGVkX2V4cGlyZXNfb24sXG4gICAgICAgICAgICAgICAgICAgIHJlZnJlc2hPbjogc2VyaWFsaXplZEFULnJlZnJlc2hfb24sXG4gICAgICAgICAgICAgICAgICAgIGtleUlkOiBzZXJpYWxpemVkQVQua2V5X2lkLFxuICAgICAgICAgICAgICAgICAgICB0b2tlblR5cGU6IHNlcmlhbGl6ZWRBVC50b2tlbl90eXBlIGFzIEF1dGhlbnRpY2F0aW9uU2NoZW1lLFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ZWRDbGFpbXM6IHNlcmlhbGl6ZWRBVC5yZXF1ZXN0ZWRDbGFpbXMsXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RlZENsYWltc0hhc2g6IHNlcmlhbGl6ZWRBVC5yZXF1ZXN0ZWRDbGFpbXNIYXNoLFxuICAgICAgICAgICAgICAgICAgICB1c2VyQXNzZXJ0aW9uSGFzaDogc2VyaWFsaXplZEFULnVzZXJBc3NlcnRpb25IYXNoLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgYXRPYmplY3RzW2tleV0gPSBhY2Nlc3NUb2tlbjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGF0T2JqZWN0cztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXNlcmlhbGl6ZXMgcmVmcmVzaCB0b2tlbnMgdG8gUmVmcmVzaFRva2VuRW50aXR5IG9iamVjdHNcbiAgICAgKiBAcGFyYW0gcmVmcmVzaFRva2VucyAtIHJlZnJlc2ggdG9rZW5zIG9mIHR5cGUgU2VyaWFsaXplZFJlZnJlc2hUb2tlbkVudGl0eVxuICAgICAqL1xuICAgIHN0YXRpYyBkZXNlcmlhbGl6ZVJlZnJlc2hUb2tlbnMoXG4gICAgICAgIHJlZnJlc2hUb2tlbnM6IFJlY29yZDxzdHJpbmcsIFNlcmlhbGl6ZWRSZWZyZXNoVG9rZW5FbnRpdHk+XG4gICAgKTogUmVmcmVzaFRva2VuQ2FjaGUge1xuICAgICAgICBjb25zdCBydE9iamVjdHM6IFJlZnJlc2hUb2tlbkNhY2hlID0ge307XG4gICAgICAgIGlmIChyZWZyZXNoVG9rZW5zKSB7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhyZWZyZXNoVG9rZW5zKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlcmlhbGl6ZWRSVCA9IHJlZnJlc2hUb2tlbnNba2V5XTtcbiAgICAgICAgICAgICAgICBjb25zdCByZWZyZXNoVG9rZW46IFJlZnJlc2hUb2tlbkVudGl0eSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaG9tZUFjY291bnRJZDogc2VyaWFsaXplZFJULmhvbWVfYWNjb3VudF9pZCxcbiAgICAgICAgICAgICAgICAgICAgZW52aXJvbm1lbnQ6IHNlcmlhbGl6ZWRSVC5lbnZpcm9ubWVudCxcbiAgICAgICAgICAgICAgICAgICAgY3JlZGVudGlhbFR5cGU6XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXJpYWxpemVkUlQuY3JlZGVudGlhbF90eXBlIGFzIENyZWRlbnRpYWxUeXBlLFxuICAgICAgICAgICAgICAgICAgICBjbGllbnRJZDogc2VyaWFsaXplZFJULmNsaWVudF9pZCxcbiAgICAgICAgICAgICAgICAgICAgc2VjcmV0OiBzZXJpYWxpemVkUlQuc2VjcmV0LFxuICAgICAgICAgICAgICAgICAgICBmYW1pbHlJZDogc2VyaWFsaXplZFJULmZhbWlseV9pZCxcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBzZXJpYWxpemVkUlQudGFyZ2V0LFxuICAgICAgICAgICAgICAgICAgICByZWFsbTogc2VyaWFsaXplZFJULnJlYWxtLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcnRPYmplY3RzW2tleV0gPSByZWZyZXNoVG9rZW47XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBydE9iamVjdHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVzZXJpYWxpemVzIGFwcE1ldGFkYXRhIHRvIEFwcE1ldGFEYXRhIG9iamVjdHNcbiAgICAgKiBAcGFyYW0gYXBwTWV0YWRhdGEgLSBhcHAgbWV0YWRhdGEgb2YgdHlwZSBTZXJpYWxpemVkQXBwTWV0YWRhdGFFbnRpdHlcbiAgICAgKi9cbiAgICBzdGF0aWMgZGVzZXJpYWxpemVBcHBNZXRhZGF0YShcbiAgICAgICAgYXBwTWV0YWRhdGE6IFJlY29yZDxzdHJpbmcsIFNlcmlhbGl6ZWRBcHBNZXRhZGF0YUVudGl0eT5cbiAgICApOiBBcHBNZXRhZGF0YUNhY2hlIHtcbiAgICAgICAgY29uc3QgYXBwTWV0YWRhdGFPYmplY3RzOiBBcHBNZXRhZGF0YUNhY2hlID0ge307XG4gICAgICAgIGlmIChhcHBNZXRhZGF0YSkge1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoYXBwTWV0YWRhdGEpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VyaWFsaXplZEFtZHQgPSBhcHBNZXRhZGF0YVtrZXldO1xuICAgICAgICAgICAgICAgIGFwcE1ldGFkYXRhT2JqZWN0c1trZXldID0ge1xuICAgICAgICAgICAgICAgICAgICBjbGllbnRJZDogc2VyaWFsaXplZEFtZHQuY2xpZW50X2lkLFxuICAgICAgICAgICAgICAgICAgICBlbnZpcm9ubWVudDogc2VyaWFsaXplZEFtZHQuZW52aXJvbm1lbnQsXG4gICAgICAgICAgICAgICAgICAgIGZhbWlseUlkOiBzZXJpYWxpemVkQW1kdC5mYW1pbHlfaWQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGFwcE1ldGFkYXRhT2JqZWN0cztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXNlcmlhbGl6ZSBhbiBpbk1lbW9yeSBDYWNoZVxuICAgICAqIEBwYXJhbSBqc29uQ2FjaGUgLSBKU09OIGJsb2IgY2FjaGVcbiAgICAgKi9cbiAgICBzdGF0aWMgZGVzZXJpYWxpemVBbGxDYWNoZShqc29uQ2FjaGU6IEpzb25DYWNoZSk6IEluTWVtb3J5Q2FjaGUge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYWNjb3VudHM6IGpzb25DYWNoZS5BY2NvdW50XG4gICAgICAgICAgICAgICAgPyB0aGlzLmRlc2VyaWFsaXplQWNjb3VudHMoanNvbkNhY2hlLkFjY291bnQpXG4gICAgICAgICAgICAgICAgOiB7fSxcbiAgICAgICAgICAgIGlkVG9rZW5zOiBqc29uQ2FjaGUuSWRUb2tlblxuICAgICAgICAgICAgICAgID8gdGhpcy5kZXNlcmlhbGl6ZUlkVG9rZW5zKGpzb25DYWNoZS5JZFRva2VuKVxuICAgICAgICAgICAgICAgIDoge30sXG4gICAgICAgICAgICBhY2Nlc3NUb2tlbnM6IGpzb25DYWNoZS5BY2Nlc3NUb2tlblxuICAgICAgICAgICAgICAgID8gdGhpcy5kZXNlcmlhbGl6ZUFjY2Vzc1Rva2Vucyhqc29uQ2FjaGUuQWNjZXNzVG9rZW4pXG4gICAgICAgICAgICAgICAgOiB7fSxcbiAgICAgICAgICAgIHJlZnJlc2hUb2tlbnM6IGpzb25DYWNoZS5SZWZyZXNoVG9rZW5cbiAgICAgICAgICAgICAgICA/IHRoaXMuZGVzZXJpYWxpemVSZWZyZXNoVG9rZW5zKGpzb25DYWNoZS5SZWZyZXNoVG9rZW4pXG4gICAgICAgICAgICAgICAgOiB7fSxcbiAgICAgICAgICAgIGFwcE1ldGFkYXRhOiBqc29uQ2FjaGUuQXBwTWV0YWRhdGFcbiAgICAgICAgICAgICAgICA/IHRoaXMuZGVzZXJpYWxpemVBcHBNZXRhZGF0YShqc29uQ2FjaGUuQXBwTWV0YWRhdGEpXG4gICAgICAgICAgICAgICAgOiB7fSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEh0dHBTdGF0dXMgfSBmcm9tIFwiQGF6dXJlL21zYWwtY29tbW9uL25vZGVcIjtcbmltcG9ydCB7IExpbmVhclJldHJ5UG9saWN5IH0gZnJvbSBcIi4uL3JldHJ5L0xpbmVhclJldHJ5UG9saWN5LmpzXCI7XG5cbi8vIE1TSSBDb25zdGFudHMuIERvY3MgZm9yIE1TSSBhcmUgYXZhaWxhYmxlIGhlcmUgaHR0cHM6Ly9kb2NzLm1pY3Jvc29mdC5jb20vYXp1cmUvYXBwLXNlcnZpY2Uvb3ZlcnZpZXctbWFuYWdlZC1pZGVudGl0eVxuZXhwb3J0IGNvbnN0IEFVVEhPUklaQVRJT05fSEVBREVSX05BTUU6IHN0cmluZyA9IFwiQXV0aG9yaXphdGlvblwiO1xuZXhwb3J0IGNvbnN0IE1FVEFEQVRBX0hFQURFUl9OQU1FOiBzdHJpbmcgPSBcIk1ldGFkYXRhXCI7XG5leHBvcnQgY29uc3QgQVBQX1NFUlZJQ0VfU0VDUkVUX0hFQURFUl9OQU1FOiBzdHJpbmcgPSBcIlgtSURFTlRJVFktSEVBREVSXCI7XG5leHBvcnQgY29uc3QgTUxfQU5EX1NGX1NFQ1JFVF9IRUFERVJfTkFNRTogc3RyaW5nID0gXCJzZWNyZXRcIjtcbmV4cG9ydCBjb25zdCBBUElfVkVSU0lPTl9RVUVSWV9QQVJBTUVURVJfTkFNRTogc3RyaW5nID0gXCJhcGktdmVyc2lvblwiO1xuZXhwb3J0IGNvbnN0IFJFU09VUkNFX0JPRFlfT1JfUVVFUllfUEFSQU1FVEVSX05BTUU6IHN0cmluZyA9IFwicmVzb3VyY2VcIjtcbmV4cG9ydCBjb25zdCBERUZBVUxUX01BTkFHRURfSURFTlRJVFlfSUQgPSBcInN5c3RlbV9hc3NpZ25lZF9tYW5hZ2VkX2lkZW50aXR5XCI7XG5leHBvcnQgY29uc3QgTUFOQUdFRF9JREVOVElUWV9ERUZBVUxUX1RFTkFOVCA9IFwibWFuYWdlZF9pZGVudGl0eVwiO1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfQVVUSE9SSVRZX0ZPUl9NQU5BR0VEX0lERU5USVRZID0gYGh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbS8ke01BTkFHRURfSURFTlRJVFlfREVGQVVMVF9URU5BTlR9L2A7XG5cbi8qKlxuICogTWFuYWdlZCBJZGVudGl0eSBFbnZpcm9ubWVudCBWYXJpYWJsZSBOYW1lc1xuICovXG5leHBvcnQgY29uc3QgTWFuYWdlZElkZW50aXR5RW52aXJvbm1lbnRWYXJpYWJsZU5hbWVzID0ge1xuICAgIEFaVVJFX1BPRF9JREVOVElUWV9BVVRIT1JJVFlfSE9TVDogXCJBWlVSRV9QT0RfSURFTlRJVFlfQVVUSE9SSVRZX0hPU1RcIixcbiAgICBJREVOVElUWV9FTkRQT0lOVDogXCJJREVOVElUWV9FTkRQT0lOVFwiLFxuICAgIElERU5USVRZX0hFQURFUjogXCJJREVOVElUWV9IRUFERVJcIixcbiAgICBJREVOVElUWV9TRVJWRVJfVEhVTUJQUklOVDogXCJJREVOVElUWV9TRVJWRVJfVEhVTUJQUklOVFwiLFxuICAgIElNRFNfRU5EUE9JTlQ6IFwiSU1EU19FTkRQT0lOVFwiLFxuICAgIE1TSV9FTkRQT0lOVDogXCJNU0lfRU5EUE9JTlRcIixcbiAgICBNU0lfU0VDUkVUOiBcIk1TSV9TRUNSRVRcIixcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBNYW5hZ2VkSWRlbnRpdHlFbnZpcm9ubWVudFZhcmlhYmxlTmFtZXMgPVxuICAgICh0eXBlb2YgTWFuYWdlZElkZW50aXR5RW52aXJvbm1lbnRWYXJpYWJsZU5hbWVzKVtrZXlvZiB0eXBlb2YgTWFuYWdlZElkZW50aXR5RW52aXJvbm1lbnRWYXJpYWJsZU5hbWVzXTtcblxuLyoqXG4gKiBNYW5hZ2VkIElkZW50aXR5IFNvdXJjZSBOYW1lc1xuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgTWFuYWdlZElkZW50aXR5U291cmNlTmFtZXMgPSB7XG4gICAgQVBQX1NFUlZJQ0U6IFwiQXBwU2VydmljZVwiLFxuICAgIEFaVVJFX0FSQzogXCJBenVyZUFyY1wiLFxuICAgIENMT1VEX1NIRUxMOiBcIkNsb3VkU2hlbGxcIixcbiAgICBERUZBVUxUX1RPX0lNRFM6IFwiRGVmYXVsdFRvSW1kc1wiLFxuICAgIElNRFM6IFwiSW1kc1wiLFxuICAgIE1BQ0hJTkVfTEVBUk5JTkc6IFwiTWFjaGluZUxlYXJuaW5nXCIsXG4gICAgU0VSVklDRV9GQUJSSUM6IFwiU2VydmljZUZhYnJpY1wiLFxufSBhcyBjb25zdDtcbi8qKlxuICogVGhlIE1hbmFnZWRJZGVudGl0eVNvdXJjZU5hbWVzIHR5cGVcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHR5cGUgTWFuYWdlZElkZW50aXR5U291cmNlTmFtZXMgPVxuICAgICh0eXBlb2YgTWFuYWdlZElkZW50aXR5U291cmNlTmFtZXMpW2tleW9mIHR5cGVvZiBNYW5hZ2VkSWRlbnRpdHlTb3VyY2VOYW1lc107XG5cbi8qKlxuICogTWFuYWdlZCBJZGVudGl0eSBJZHNcbiAqL1xuZXhwb3J0IGNvbnN0IE1hbmFnZWRJZGVudGl0eUlkVHlwZSA9IHtcbiAgICBTWVNURU1fQVNTSUdORUQ6IFwic3lzdGVtLWFzc2lnbmVkXCIsXG4gICAgVVNFUl9BU1NJR05FRF9DTElFTlRfSUQ6IFwidXNlci1hc3NpZ25lZC1jbGllbnQtaWRcIixcbiAgICBVU0VSX0FTU0lHTkVEX1JFU09VUkNFX0lEOiBcInVzZXItYXNzaWduZWQtcmVzb3VyY2UtaWRcIixcbiAgICBVU0VSX0FTU0lHTkVEX09CSkVDVF9JRDogXCJ1c2VyLWFzc2lnbmVkLW9iamVjdC1pZFwiLFxufSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIE1hbmFnZWRJZGVudGl0eUlkVHlwZSA9XG4gICAgKHR5cGVvZiBNYW5hZ2VkSWRlbnRpdHlJZFR5cGUpW2tleW9mIHR5cGVvZiBNYW5hZ2VkSWRlbnRpdHlJZFR5cGVdO1xuXG4vKipcbiAqIGh0dHAgbWV0aG9kc1xuICovXG5leHBvcnQgY29uc3QgSHR0cE1ldGhvZCA9IHtcbiAgICBHRVQ6IFwiZ2V0XCIsXG4gICAgUE9TVDogXCJwb3N0XCIsXG59IGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgSHR0cE1ldGhvZCA9ICh0eXBlb2YgSHR0cE1ldGhvZClba2V5b2YgdHlwZW9mIEh0dHBNZXRob2RdO1xuXG5leHBvcnQgY29uc3QgUHJveHlTdGF0dXMgPSB7XG4gICAgU1VDQ0VTUzogSHR0cFN0YXR1cy5TVUNDRVNTLFxuICAgIFNVQ0NFU1NfUkFOR0VfU1RBUlQ6IEh0dHBTdGF0dXMuU1VDQ0VTU19SQU5HRV9TVEFSVCxcbiAgICBTVUNDRVNTX1JBTkdFX0VORDogSHR0cFN0YXR1cy5TVUNDRVNTX1JBTkdFX0VORCxcbiAgICBTRVJWRVJfRVJST1I6IEh0dHBTdGF0dXMuU0VSVkVSX0VSUk9SLFxufSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIFByb3h5U3RhdHVzID0gKHR5cGVvZiBQcm94eVN0YXR1cylba2V5b2YgdHlwZW9mIFByb3h5U3RhdHVzXTtcblxuLyoqXG4gKiBDb25zdGFudHMgdXNlZCBmb3IgcmVnaW9uIGRpc2NvdmVyeVxuICovXG5leHBvcnQgY29uc3QgUkVHSU9OX0VOVklST05NRU5UX1ZBUklBQkxFID0gXCJSRUdJT05fTkFNRVwiO1xuZXhwb3J0IGNvbnN0IE1TQUxfRk9SQ0VfUkVHSU9OID0gXCJNU0FMX0ZPUkNFX1JFR0lPTlwiO1xuXG4vKipcbiAqIENvbnN0YW50IHVzZWQgZm9yIFBLQ0VcbiAqL1xuZXhwb3J0IGNvbnN0IFJBTkRPTV9PQ1RFVF9TSVpFID0gMzI7XG5cbi8qKlxuICogQ29uc3RhbnRzIHVzZWQgaW4gUEtDRVxuICovXG5leHBvcnQgY29uc3QgSGFzaCA9IHtcbiAgICBTSEEyNTY6IFwic2hhMjU2XCIsXG59O1xuXG4vKipcbiAqIENvbnN0YW50cyBmb3IgZW5jb2Rpbmcgc2NoZW1lc1xuICovXG5leHBvcnQgY29uc3QgQ2hhclNldCA9IHtcbiAgICBDVl9DSEFSU0VUOlxuICAgICAgICBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5LS5fflwiLFxufTtcblxuLyoqXG4gKiBDYWNoZSBDb25zdGFudHNcbiAqL1xuZXhwb3J0IGNvbnN0IENBQ0hFID0ge1xuICAgIEZJTEVfQ0FDSEU6IFwiZmlsZUNhY2hlXCIsXG4gICAgRVhURU5TSU9OX0xJQjogXCJleHRlbnN0aW9uX2xpYnJhcnlcIixcbn07XG5cbi8qKlxuICogQ29uc3RhbnRzXG4gKi9cbmV4cG9ydCBjb25zdCBDb25zdGFudHMgPSB7XG4gICAgTVNBTF9TS1U6IFwibXNhbC5qcy5ub2RlXCIsXG4gICAgSldUX0JFQVJFUl9BU1NFUlRJT05fVFlQRTpcbiAgICAgICAgXCJ1cm46aWV0ZjpwYXJhbXM6b2F1dGg6Y2xpZW50LWFzc2VydGlvbi10eXBlOmp3dC1iZWFyZXJcIixcbiAgICBBVVRIT1JJWkFUSU9OX1BFTkRJTkc6IFwiYXV0aG9yaXphdGlvbl9wZW5kaW5nXCIsXG4gICAgSFRUUF9QUk9UT0NPTDogXCJodHRwOi8vXCIsXG4gICAgTE9DQUxIT1NUOiBcImxvY2FsaG9zdFwiLFxufTtcblxuLyoqXG4gKiBBUEkgQ29kZXMgZm9yIFRlbGVtZXRyeSBwdXJwb3Nlcy5cbiAqIEJlZm9yZSBhZGRpbmcgYSBuZXcgY29kZSB5b3UgbXVzdCBjbGFpbSBpdCBpbiB0aGUgTVNBTCBUZWxlbWV0cnkgdHJhY2tlciBhcyB0aGVzZSBudW1iZXIgc3BhY2VzIGFyZSBzaGFyZWQgYWNyb3NzIGFsbCBNU0FMc1xuICogMC05OSBTaWxlbnQgRmxvd1xuICogNjAwLTY5OSBEZXZpY2UgQ29kZSBGbG93XG4gKiA4MDAtODk5IEF1dGggQ29kZSBGbG93XG4gKi9cbmV4cG9ydCBjb25zdCBBcGlJZCA9IHtcbiAgICBhY3F1aXJlVG9rZW5TaWxlbnQ6IDYyLFxuICAgIGFjcXVpcmVUb2tlbkJ5VXNlcm5hbWVQYXNzd29yZDogMzcxLFxuICAgIGFjcXVpcmVUb2tlbkJ5RGV2aWNlQ29kZTogNjcxLFxuICAgIGFjcXVpcmVUb2tlbkJ5Q2xpZW50Q3JlZGVudGlhbDogNzcxLFxuICAgIGFjcXVpcmVUb2tlbkJ5Q29kZTogODcxLFxuICAgIGFjcXVpcmVUb2tlbkJ5UmVmcmVzaFRva2VuOiA4NzIsXG59O1xuZXhwb3J0IHR5cGUgQXBpSWQgPSAodHlwZW9mIEFwaUlkKVtrZXlvZiB0eXBlb2YgQXBpSWRdO1xuXG4vKipcbiAqIEpXVCAgY29uc3RhbnRzXG4gKi9cbmV4cG9ydCBjb25zdCBKd3RDb25zdGFudHMgPSB7XG4gICAgQUxHT1JJVEhNOiBcImFsZ1wiLFxuICAgIFJTQV8yNTY6IFwiUlMyNTZcIixcbiAgICBQU1NfMjU2OiBcIlBTMjU2XCIsXG4gICAgWDVUXzI1NjogXCJ4NXQjUzI1NlwiLFxuICAgIFg1VDogXCJ4NXRcIixcbiAgICBYNUM6IFwieDVjXCIsXG4gICAgQVVESUVOQ0U6IFwiYXVkXCIsXG4gICAgRVhQSVJBVElPTl9USU1FOiBcImV4cFwiLFxuICAgIElTU1VFUjogXCJpc3NcIixcbiAgICBTVUJKRUNUOiBcInN1YlwiLFxuICAgIE5PVF9CRUZPUkU6IFwibmJmXCIsXG4gICAgSldUX0lEOiBcImp0aVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IExPT1BCQUNLX1NFUlZFUl9DT05TVEFOVFMgPSB7XG4gICAgSU5URVJWQUxfTVM6IDEwMCxcbiAgICBUSU1FT1VUX01TOiA1MDAwLFxufTtcblxuZXhwb3J0IGNvbnN0IEFaVVJFX0FSQ19TRUNSRVRfRklMRV9NQVhfU0laRV9CWVRFUyA9IDQwOTY7IC8vIDQgS0JcblxuZXhwb3J0IGNvbnN0IE1BTkFHRURfSURFTlRJVFlfTUFYX1JFVFJJRVMgPSAzO1xuZXhwb3J0IGNvbnN0IE1BTkFHRURfSURFTlRJVFlfUkVUUllfREVMQVkgPSAxMDAwO1xuZXhwb3J0IGNvbnN0IE1BTkFHRURfSURFTlRJVFlfSFRUUF9TVEFUVVNfQ09ERVNfVE9fUkVUUllfT04gPSBbXG4gICAgSHR0cFN0YXR1cy5OT1RfRk9VTkQsXG4gICAgSHR0cFN0YXR1cy5SRVFVRVNUX1RJTUVPVVQsXG4gICAgSHR0cFN0YXR1cy5UT09fTUFOWV9SRVFVRVNUUyxcbiAgICBIdHRwU3RhdHVzLlNFUlZFUl9FUlJPUixcbiAgICBIdHRwU3RhdHVzLlNFUlZJQ0VfVU5BVkFJTEFCTEUsXG4gICAgSHR0cFN0YXR1cy5HQVRFV0FZX1RJTUVPVVQsXG5dO1xuXG4vKipcbiAqIFJldHJ5IFBvbGljeSBUeXBlc1xuICovXG5leHBvcnQgdHlwZSBSZXRyeVBvbGljaWVzID0gTGluZWFyUmV0cnlQb2xpY3k7XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IE5ldHdvcmtSZXNwb25zZSB9IGZyb20gXCJAYXp1cmUvbXNhbC1jb21tb24vbm9kZVwiO1xuXG5leHBvcnQgdHlwZSBVcmxUb0h0dHBSZXF1ZXN0T3B0aW9ucyA9IHtcbiAgICBwcm90b2NvbDogc3RyaW5nO1xuICAgIGhvc3RuYW1lOiBzdHJpbmc7XG4gICAgaGFzaDogc3RyaW5nO1xuICAgIHNlYXJjaDogc3RyaW5nO1xuICAgIHBhdGhuYW1lOiBzdHJpbmc7XG4gICAgcGF0aDogc3RyaW5nO1xuICAgIGhyZWY6IHN0cmluZztcbiAgICBwb3J0PzogbnVtYmVyO1xuICAgIGF1dGg/OiBzdHJpbmc7XG59O1xuXG5leHBvcnQgY2xhc3MgTmV0d29ya1V0aWxzIHtcbiAgICBzdGF0aWMgZ2V0TmV0d29ya1Jlc3BvbnNlPFQ+KFxuICAgICAgICBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+LFxuICAgICAgICBib2R5OiBULFxuICAgICAgICBzdGF0dXNDb2RlOiBudW1iZXJcbiAgICApOiBOZXR3b3JrUmVzcG9uc2U8VD4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgIGJvZHk6IGJvZHksXG4gICAgICAgICAgICBzdGF0dXM6IHN0YXR1c0NvZGUsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBVdGlsaXR5IGZ1bmN0aW9uIHRoYXQgY29udmVydHMgYSBVUkwgb2JqZWN0IGludG8gYW4gb3JkaW5hcnkgb3B0aW9ucyBvYmplY3QgYXMgZXhwZWN0ZWQgYnkgdGhlXG4gICAgICogaHR0cC5yZXF1ZXN0IGFuZCBodHRwcy5yZXF1ZXN0IEFQSXMuXG4gICAgICogaHR0cHM6Ly9naXRodWIuY29tL25vZGVqcy9ub2RlL2Jsb2IvbWFpbi9saWIvaW50ZXJuYWwvdXJsLmpzI0wxMDkwXG4gICAgICovXG4gICAgc3RhdGljIHVybFRvSHR0cE9wdGlvbnModXJsOiBVUkwpOiBVcmxUb0h0dHBSZXF1ZXN0T3B0aW9ucyB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnM6IFVybFRvSHR0cFJlcXVlc3RPcHRpb25zID0ge1xuICAgICAgICAgICAgcHJvdG9jb2w6IHVybC5wcm90b2NvbCxcbiAgICAgICAgICAgIGhvc3RuYW1lOlxuICAgICAgICAgICAgICAgIHVybC5ob3N0bmFtZSAmJiB1cmwuaG9zdG5hbWUuc3RhcnRzV2l0aChcIltcIilcbiAgICAgICAgICAgICAgICAgICAgPyB1cmwuaG9zdG5hbWUuc2xpY2UoMSwgLTEpXG4gICAgICAgICAgICAgICAgICAgIDogdXJsLmhvc3RuYW1lLFxuICAgICAgICAgICAgaGFzaDogdXJsLmhhc2gsXG4gICAgICAgICAgICBzZWFyY2g6IHVybC5zZWFyY2gsXG4gICAgICAgICAgICBwYXRobmFtZTogdXJsLnBhdGhuYW1lLFxuICAgICAgICAgICAgcGF0aDogYCR7dXJsLnBhdGhuYW1lIHx8IFwiXCJ9JHt1cmwuc2VhcmNoIHx8IFwiXCJ9YCxcbiAgICAgICAgICAgIGhyZWY6IHVybC5ocmVmLFxuICAgICAgICB9O1xuICAgICAgICBpZiAodXJsLnBvcnQgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIG9wdGlvbnMucG9ydCA9IE51bWJlcih1cmwucG9ydCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVybC51c2VybmFtZSB8fCB1cmwucGFzc3dvcmQpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuYXV0aCA9IGAke2RlY29kZVVSSUNvbXBvbmVudChcbiAgICAgICAgICAgICAgICB1cmwudXNlcm5hbWVcbiAgICAgICAgICAgICl9OiR7ZGVjb2RlVVJJQ29tcG9uZW50KHVybC5wYXNzd29yZCl9YDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3B0aW9ucztcbiAgICB9XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gICAgSU5ldHdvcmtNb2R1bGUsXG4gICAgTmV0d29ya1JlcXVlc3RPcHRpb25zLFxuICAgIE5ldHdvcmtSZXNwb25zZSxcbiAgICBIdHRwU3RhdHVzLFxufSBmcm9tIFwiQGF6dXJlL21zYWwtY29tbW9uL25vZGVcIjtcbmltcG9ydCB7IEh0dHBNZXRob2QsIENvbnN0YW50cywgUHJveHlTdGF0dXMgfSBmcm9tIFwiLi4vdXRpbHMvQ29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBOZXR3b3JrVXRpbHMgfSBmcm9tIFwiLi4vdXRpbHMvTmV0d29ya1V0aWxzLmpzXCI7XG5pbXBvcnQgaHR0cCBmcm9tIFwiaHR0cFwiO1xuaW1wb3J0IGh0dHBzIGZyb20gXCJodHRwc1wiO1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyB0aGUgQVBJIGZvciBuZXR3b3JrIHJlcXVlc3RzLlxuICovXG5leHBvcnQgY2xhc3MgSHR0cENsaWVudCBpbXBsZW1lbnRzIElOZXR3b3JrTW9kdWxlIHtcbiAgICBwcml2YXRlIHByb3h5VXJsOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBjdXN0b21BZ2VudE9wdGlvbnM6IGh0dHAuQWdlbnRPcHRpb25zIHwgaHR0cHMuQWdlbnRPcHRpb25zO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByb3h5VXJsPzogc3RyaW5nLFxuICAgICAgICBjdXN0b21BZ2VudE9wdGlvbnM/OiBodHRwLkFnZW50T3B0aW9ucyB8IGh0dHBzLkFnZW50T3B0aW9uc1xuICAgICkge1xuICAgICAgICB0aGlzLnByb3h5VXJsID0gcHJveHlVcmwgfHwgXCJcIjtcbiAgICAgICAgdGhpcy5jdXN0b21BZ2VudE9wdGlvbnMgPSBjdXN0b21BZ2VudE9wdGlvbnMgfHwge307XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSHR0cCBHZXQgcmVxdWVzdFxuICAgICAqIEBwYXJhbSB1cmxcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqL1xuICAgIGFzeW5jIHNlbmRHZXRSZXF1ZXN0QXN5bmM8VD4oXG4gICAgICAgIHVybDogc3RyaW5nLFxuICAgICAgICBvcHRpb25zPzogTmV0d29ya1JlcXVlc3RPcHRpb25zLFxuICAgICAgICB0aW1lb3V0PzogbnVtYmVyXG4gICAgKTogUHJvbWlzZTxOZXR3b3JrUmVzcG9uc2U8VD4+IHtcbiAgICAgICAgaWYgKHRoaXMucHJveHlVcmwpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXR3b3JrUmVxdWVzdFZpYVByb3h5KFxuICAgICAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgICAgICB0aGlzLnByb3h5VXJsLFxuICAgICAgICAgICAgICAgIEh0dHBNZXRob2QuR0VULFxuICAgICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21BZ2VudE9wdGlvbnMgYXMgaHR0cC5BZ2VudE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgdGltZW91dFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBuZXR3b3JrUmVxdWVzdFZpYUh0dHBzKFxuICAgICAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgICAgICBIdHRwTWV0aG9kLkdFVCxcbiAgICAgICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9tQWdlbnRPcHRpb25zIGFzIGh0dHBzLkFnZW50T3B0aW9ucyxcbiAgICAgICAgICAgICAgICB0aW1lb3V0XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSHR0cCBQb3N0IHJlcXVlc3RcbiAgICAgKiBAcGFyYW0gdXJsXG4gICAgICogQHBhcmFtIG9wdGlvbnNcbiAgICAgKi9cbiAgICBhc3luYyBzZW5kUG9zdFJlcXVlc3RBc3luYzxUPihcbiAgICAgICAgdXJsOiBzdHJpbmcsXG4gICAgICAgIG9wdGlvbnM/OiBOZXR3b3JrUmVxdWVzdE9wdGlvbnNcbiAgICApOiBQcm9taXNlPE5ldHdvcmtSZXNwb25zZTxUPj4ge1xuICAgICAgICBpZiAodGhpcy5wcm94eVVybCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldHdvcmtSZXF1ZXN0VmlhUHJveHkoXG4gICAgICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgICAgIHRoaXMucHJveHlVcmwsXG4gICAgICAgICAgICAgICAgSHR0cE1ldGhvZC5QT1NULFxuICAgICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21BZ2VudE9wdGlvbnMgYXMgaHR0cC5BZ2VudE9wdGlvbnNcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmV0d29ya1JlcXVlc3RWaWFIdHRwcyhcbiAgICAgICAgICAgICAgICB1cmwsXG4gICAgICAgICAgICAgICAgSHR0cE1ldGhvZC5QT1NULFxuICAgICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21BZ2VudE9wdGlvbnMgYXMgaHR0cHMuQWdlbnRPcHRpb25zXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jb25zdCBuZXR3b3JrUmVxdWVzdFZpYVByb3h5ID0gPFQ+KFxuICAgIGRlc3RpbmF0aW9uVXJsU3RyaW5nOiBzdHJpbmcsXG4gICAgcHJveHlVcmxTdHJpbmc6IHN0cmluZyxcbiAgICBodHRwTWV0aG9kOiBzdHJpbmcsXG4gICAgb3B0aW9ucz86IE5ldHdvcmtSZXF1ZXN0T3B0aW9ucyxcbiAgICBhZ2VudE9wdGlvbnM/OiBodHRwLkFnZW50T3B0aW9ucyxcbiAgICB0aW1lb3V0PzogbnVtYmVyXG4pOiBQcm9taXNlPE5ldHdvcmtSZXNwb25zZTxUPj4gPT4ge1xuICAgIGNvbnN0IGRlc3RpbmF0aW9uVXJsID0gbmV3IFVSTChkZXN0aW5hdGlvblVybFN0cmluZyk7XG4gICAgY29uc3QgcHJveHlVcmwgPSBuZXcgVVJMKHByb3h5VXJsU3RyaW5nKTtcblxuICAgIC8vIFwibWV0aG9kOiBjb25uZWN0XCIgbXVzdCBiZSB1c2VkIHRvIGVzdGFibGlzaCBhIGNvbm5lY3Rpb24gdG8gdGhlIHByb3h5XG4gICAgY29uc3QgaGVhZGVycyA9IG9wdGlvbnM/LmhlYWRlcnMgfHwgKHt9IGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz4pO1xuICAgIGNvbnN0IHR1bm5lbFJlcXVlc3RPcHRpb25zOiBodHRwcy5SZXF1ZXN0T3B0aW9ucyA9IHtcbiAgICAgICAgaG9zdDogcHJveHlVcmwuaG9zdG5hbWUsXG4gICAgICAgIHBvcnQ6IHByb3h5VXJsLnBvcnQsXG4gICAgICAgIG1ldGhvZDogXCJDT05ORUNUXCIsXG4gICAgICAgIHBhdGg6IGRlc3RpbmF0aW9uVXJsLmhvc3RuYW1lLFxuICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgIH07XG5cbiAgICBpZiAoYWdlbnRPcHRpb25zICYmIE9iamVjdC5rZXlzKGFnZW50T3B0aW9ucykubGVuZ3RoKSB7XG4gICAgICAgIHR1bm5lbFJlcXVlc3RPcHRpb25zLmFnZW50ID0gbmV3IGh0dHAuQWdlbnQoYWdlbnRPcHRpb25zKTtcbiAgICB9XG5cbiAgICAvLyBjb21wb3NlIGEgcmVxdWVzdCBzdHJpbmcgZm9yIHRoZSBzb2NrZXRcbiAgICBsZXQgcG9zdFJlcXVlc3RTdHJpbmdDb250ZW50OiBzdHJpbmcgPSBcIlwiO1xuICAgIGlmIChodHRwTWV0aG9kID09PSBIdHRwTWV0aG9kLlBPU1QpIHtcbiAgICAgICAgY29uc3QgYm9keSA9IG9wdGlvbnM/LmJvZHkgfHwgXCJcIjtcbiAgICAgICAgcG9zdFJlcXVlc3RTdHJpbmdDb250ZW50ID1cbiAgICAgICAgICAgIFwiQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcXHJcXG5cIiArXG4gICAgICAgICAgICBgQ29udGVudC1MZW5ndGg6ICR7Ym9keS5sZW5ndGh9XFxyXFxuYCArXG4gICAgICAgICAgICBgXFxyXFxuJHtib2R5fWA7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gb3B0aW9uYWwgdGltZW91dCBpcyBvbmx5IGZvciBnZXQgcmVxdWVzdHMgKHJlZ2lvbkRpc2NvdmVyeSwgZm9yIGV4YW1wbGUpXG4gICAgICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICAgICAgICB0dW5uZWxSZXF1ZXN0T3B0aW9ucy50aW1lb3V0ID0gdGltZW91dDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBvdXRnb2luZ1JlcXVlc3RTdHJpbmcgPVxuICAgICAgICBgJHtodHRwTWV0aG9kLnRvVXBwZXJDYXNlKCl9ICR7ZGVzdGluYXRpb25VcmwuaHJlZn0gSFRUUC8xLjFcXHJcXG5gICtcbiAgICAgICAgYEhvc3Q6ICR7ZGVzdGluYXRpb25VcmwuaG9zdH1cXHJcXG5gICtcbiAgICAgICAgXCJDb25uZWN0aW9uOiBjbG9zZVxcclxcblwiICtcbiAgICAgICAgcG9zdFJlcXVlc3RTdHJpbmdDb250ZW50ICtcbiAgICAgICAgXCJcXHJcXG5cIjtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxOZXR3b3JrUmVzcG9uc2U8VD4+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IGh0dHAucmVxdWVzdCh0dW5uZWxSZXF1ZXN0T3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICAgICAgIHJlcXVlc3Qub24oXCJ0aW1lb3V0XCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwiUmVxdWVzdCB0aW1lIG91dFwiKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlcXVlc3QuZW5kKCk7XG5cbiAgICAgICAgLy8gZXN0YWJsaXNoIGNvbm5lY3Rpb24gdG8gdGhlIHByb3h5XG4gICAgICAgIHJlcXVlc3Qub24oXCJjb25uZWN0XCIsIChyZXNwb25zZSwgc29ja2V0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcm94eVN0YXR1c0NvZGUgPVxuICAgICAgICAgICAgICAgIHJlc3BvbnNlPy5zdGF0dXNDb2RlIHx8IFByb3h5U3RhdHVzLlNFUlZFUl9FUlJPUjtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBwcm94eVN0YXR1c0NvZGUgPCBQcm94eVN0YXR1cy5TVUNDRVNTX1JBTkdFX1NUQVJUIHx8XG4gICAgICAgICAgICAgICAgcHJveHlTdGF0dXNDb2RlID4gUHJveHlTdGF0dXMuU1VDQ0VTU19SQU5HRV9FTkRcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJlcXVlc3QuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIHNvY2tldC5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgcmVqZWN0KFxuICAgICAgICAgICAgICAgICAgICBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICAgICBgRXJyb3IgY29ubmVjdGluZyB0byBwcm94eS4gSHR0cCBzdGF0dXMgY29kZTogJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5zdGF0dXNDb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICB9LiBIdHRwIHN0YXR1cyBtZXNzYWdlOiAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlPy5zdGF0dXNNZXNzYWdlIHx8IFwiVW5rbm93blwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9YFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gbWFrZSBhIHJlcXVlc3Qgb3ZlciBhbiBIVFRQIHR1bm5lbFxuICAgICAgICAgICAgc29ja2V0LndyaXRlKG91dGdvaW5nUmVxdWVzdFN0cmluZyk7XG5cbiAgICAgICAgICAgIGNvbnN0IGRhdGE6IEJ1ZmZlcltdID0gW107XG4gICAgICAgICAgICBzb2NrZXQub24oXCJkYXRhXCIsIChjaHVuaykgPT4ge1xuICAgICAgICAgICAgICAgIGRhdGEucHVzaChjaHVuayk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgc29ja2V0Lm9uKFwiZW5kXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBjb21iaW5lIGFsbCByZWNlaXZlZCBidWZmZXIgc3RyZWFtcyBpbnRvIG9uZSBidWZmZXIsIGFuZCB0aGVuIGludG8gYSBzdHJpbmdcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhU3RyaW5nID0gQnVmZmVyLmNvbmNhdChbLi4uZGF0YV0pLnRvU3RyaW5nKCk7XG5cbiAgICAgICAgICAgICAgICAvLyBzZXBhcmF0ZSBlYWNoIGxpbmUgaW50byBpdCdzIG93biBlbnRyeSBpbiBhbiBhcnJ5XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YVN0cmluZ0FycmF5ID0gZGF0YVN0cmluZy5zcGxpdChcIlxcclxcblwiKTtcbiAgICAgICAgICAgICAgICAvLyB0aGUgZmlyc3QgZW50cnkgd2lsbCBjb250YWluIHRoZSBzdGF0dXNDb2RlIGFuZCBzdGF0dXNNZXNzYWdlXG4gICAgICAgICAgICAgICAgY29uc3QgaHR0cFN0YXR1c0NvZGUgPSBwYXJzZUludChcbiAgICAgICAgICAgICAgICAgICAgZGF0YVN0cmluZ0FycmF5WzBdLnNwbGl0KFwiIFwiKVsxXVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIFwiSFRUUC8xLjFcIiBhbmQgdGhlIHN0YXR1cyBjb2RlIHRvIGdldCB0aGUgc3RhdHVzIG1lc3NhZ2VcbiAgICAgICAgICAgICAgICBjb25zdCBzdGF0dXNNZXNzYWdlID0gZGF0YVN0cmluZ0FycmF5WzBdXG4gICAgICAgICAgICAgICAgICAgIC5zcGxpdChcIiBcIilcbiAgICAgICAgICAgICAgICAgICAgLnNsaWNlKDIpXG4gICAgICAgICAgICAgICAgICAgIC5qb2luKFwiIFwiKTtcbiAgICAgICAgICAgICAgICAvLyB0aGUgbGFzdCBlbnRyeSB3aWxsIGNvbnRhaW4gdGhlIGJvZHlcbiAgICAgICAgICAgICAgICBjb25zdCBib2R5ID0gZGF0YVN0cmluZ0FycmF5W2RhdGFTdHJpbmdBcnJheS5sZW5ndGggLSAxXTtcblxuICAgICAgICAgICAgICAgIC8vIGV2ZXJ5dGhpbmcgaW4gYmV0d2VlbiB0aGUgZmlyc3QgYW5kIGxhc3QgZW50cmllcyBhcmUgdGhlIGhlYWRlcnNcbiAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJzQXJyYXkgPSBkYXRhU3RyaW5nQXJyYXkuc2xpY2UoXG4gICAgICAgICAgICAgICAgICAgIDEsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTdHJpbmdBcnJheS5sZW5ndGggLSAyXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIC8vIGJ1aWxkIGFuIG9iamVjdCBvdXQgb2YgYWxsIHRoZSBoZWFkZXJzXG4gICAgICAgICAgICAgICAgY29uc3QgZW50cmllcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgICAgICBoZWFkZXJzQXJyYXkuZm9yRWFjaCgoaGVhZGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiB0aGUgaGVhZGVyIG1pZ2h0IGxvb2sgbGlrZSBcIkNvbnRlbnQtTGVuZ3RoOiAxNTMxXCIsIGJ1dCB0aGF0IGlzIGp1c3QgYSBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICogaXQgbmVlZHMgdG8gYmUgY29udmVydGVkIHRvIGEga2V5L3ZhbHVlIHBhaXJcbiAgICAgICAgICAgICAgICAgICAgICogc3BsaXQgdGhlIHN0cmluZyBhdCB0aGUgZmlyc3QgaW5zdGFuY2Ugb2YgXCI6XCJcbiAgICAgICAgICAgICAgICAgICAgICogdGhlcmUgbWF5IGJlIG1vcmUgdGhhbiBvbmUgXCI6XCIgaWYgdGhlIHZhbHVlIG9mIHRoZSBoZWFkZXIgaXMgc3VwcG9zZWQgdG8gYmUgYSBKU09OIG9iamVjdFxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyS2V5VmFsdWUgPSBoZWFkZXIuc3BsaXQobmV3IFJlZ0V4cCgvOlxccyguKikvcykpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJLZXkgPSBoZWFkZXJLZXlWYWx1ZVswXTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGhlYWRlclZhbHVlID0gaGVhZGVyS2V5VmFsdWVbMV07XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhlIHZhbHVlIG9mIHRoZSBoZWFkZXIgaXMgc3VwcG9zZWQgdG8gYmUgYSBKU09OIG9iamVjdFxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2JqZWN0ID0gSlNPTi5wYXJzZShoZWFkZXJWYWx1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGl0IGlzLCB0aGVuIGNvbnZlcnQgaXQgZnJvbSBhIHN0cmluZyB0byBhIEpTT04gb2JqZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqZWN0ICYmIHR5cGVvZiBvYmplY3QgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJWYWx1ZSA9IG9iamVjdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlLCBsZWF2ZSBpdCBhcyBhIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZW50cmllcy5zZXQoaGVhZGVyS2V5LCBoZWFkZXJWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IE9iamVjdC5mcm9tRW50cmllcyhlbnRyaWVzKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZEhlYWRlcnMgPSBoZWFkZXJzIGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gICAgICAgICAgICAgICAgY29uc3QgbmV0d29ya1Jlc3BvbnNlID0gTmV0d29ya1V0aWxzLmdldE5ldHdvcmtSZXNwb25zZShcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkSGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VCb2R5KFxuICAgICAgICAgICAgICAgICAgICAgICAgaHR0cFN0YXR1c0NvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNNZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkSGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHlcbiAgICAgICAgICAgICAgICAgICAgKSBhcyBULFxuICAgICAgICAgICAgICAgICAgICBodHRwU3RhdHVzQ29kZVxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIChodHRwU3RhdHVzQ29kZSA8IEh0dHBTdGF0dXMuU1VDQ0VTU19SQU5HRV9TVEFSVCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgaHR0cFN0YXR1c0NvZGUgPiBIdHRwU3RhdHVzLlNVQ0NFU1NfUkFOR0VfRU5EKSAmJlxuICAgICAgICAgICAgICAgICAgICAvLyBkbyBub3QgZGVzdHJveSB0aGUgcmVxdWVzdCBmb3IgdGhlIGRldmljZSBjb2RlIGZsb3dcbiAgICAgICAgICAgICAgICAgICAgbmV0d29ya1Jlc3BvbnNlLmJvZHlbXCJlcnJvclwiXSAhPT1cbiAgICAgICAgICAgICAgICAgICAgICAgIENvbnN0YW50cy5BVVRIT1JJWkFUSU9OX1BFTkRJTkdcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc29sdmUobmV0d29ya1Jlc3BvbnNlKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBzb2NrZXQub24oXCJlcnJvclwiLCAoY2h1bmspID0+IHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICBzb2NrZXQuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoY2h1bmsudG9TdHJpbmcoKSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJlcXVlc3Qub24oXCJlcnJvclwiLCAoY2h1bmspID0+IHtcbiAgICAgICAgICAgIHJlcXVlc3QuZGVzdHJveSgpO1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihjaHVuay50b1N0cmluZygpKSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuY29uc3QgbmV0d29ya1JlcXVlc3RWaWFIdHRwcyA9IDxUPihcbiAgICB1cmxTdHJpbmc6IHN0cmluZyxcbiAgICBodHRwTWV0aG9kOiBzdHJpbmcsXG4gICAgb3B0aW9ucz86IE5ldHdvcmtSZXF1ZXN0T3B0aW9ucyxcbiAgICBhZ2VudE9wdGlvbnM/OiBodHRwcy5BZ2VudE9wdGlvbnMsXG4gICAgdGltZW91dD86IG51bWJlclxuKTogUHJvbWlzZTxOZXR3b3JrUmVzcG9uc2U8VD4+ID0+IHtcbiAgICBjb25zdCBpc1Bvc3RSZXF1ZXN0ID0gaHR0cE1ldGhvZCA9PT0gSHR0cE1ldGhvZC5QT1NUO1xuICAgIGNvbnN0IGJvZHk6IHN0cmluZyA9IG9wdGlvbnM/LmJvZHkgfHwgXCJcIjtcblxuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwodXJsU3RyaW5nKTtcbiAgICBjb25zdCBoZWFkZXJzID0gb3B0aW9ucz8uaGVhZGVycyB8fCAoe30gYXMgUmVjb3JkPHN0cmluZywgc3RyaW5nPik7XG4gICAgY29uc3QgY3VzdG9tT3B0aW9uczogaHR0cHMuUmVxdWVzdE9wdGlvbnMgPSB7XG4gICAgICAgIG1ldGhvZDogaHR0cE1ldGhvZCxcbiAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgLi4uTmV0d29ya1V0aWxzLnVybFRvSHR0cE9wdGlvbnModXJsKSxcbiAgICB9O1xuXG4gICAgaWYgKGFnZW50T3B0aW9ucyAmJiBPYmplY3Qua2V5cyhhZ2VudE9wdGlvbnMpLmxlbmd0aCkge1xuICAgICAgICBjdXN0b21PcHRpb25zLmFnZW50ID0gbmV3IGh0dHBzLkFnZW50KGFnZW50T3B0aW9ucyk7XG4gICAgfVxuXG4gICAgaWYgKGlzUG9zdFJlcXVlc3QpIHtcbiAgICAgICAgLy8gbmVlZGVkIGZvciBwb3N0IHJlcXVlc3QgdG8gd29ya1xuICAgICAgICBjdXN0b21PcHRpb25zLmhlYWRlcnMgPSB7XG4gICAgICAgICAgICAuLi5jdXN0b21PcHRpb25zLmhlYWRlcnMsXG4gICAgICAgICAgICBcIkNvbnRlbnQtTGVuZ3RoXCI6IGJvZHkubGVuZ3RoLFxuICAgICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIG9wdGlvbmFsIHRpbWVvdXQgaXMgb25seSBmb3IgZ2V0IHJlcXVlc3RzIChyZWdpb25EaXNjb3ZlcnksIGZvciBleGFtcGxlKVxuICAgICAgICBpZiAodGltZW91dCkge1xuICAgICAgICAgICAgY3VzdG9tT3B0aW9ucy50aW1lb3V0ID0gdGltZW91dDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxOZXR3b3JrUmVzcG9uc2U8VD4+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgbGV0IHJlcXVlc3Q6IGh0dHAuQ2xpZW50UmVxdWVzdDtcbiAgICAgICAgLy8gbWFuYWdlZCBpZGVudGl0eSBzb3VyY2VzIHVzZSBodHRwIGluc3RlYWQgb2YgaHR0cHNcbiAgICAgICAgaWYgKGN1c3RvbU9wdGlvbnMucHJvdG9jb2wgPT09IFwiaHR0cDpcIikge1xuICAgICAgICAgICAgcmVxdWVzdCA9IGh0dHAucmVxdWVzdChjdXN0b21PcHRpb25zKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcXVlc3QgPSBodHRwcy5yZXF1ZXN0KGN1c3RvbU9wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzUG9zdFJlcXVlc3QpIHtcbiAgICAgICAgICAgIHJlcXVlc3Qud3JpdGUoYm9keSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGltZW91dCkge1xuICAgICAgICAgICAgcmVxdWVzdC5vbihcInRpbWVvdXRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlcXVlc3QuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJSZXF1ZXN0IHRpbWUgb3V0XCIpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVxdWVzdC5lbmQoKTtcblxuICAgICAgICByZXF1ZXN0Lm9uKFwicmVzcG9uc2VcIiwgKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gcmVzcG9uc2UuaGVhZGVycztcbiAgICAgICAgICAgIGNvbnN0IHN0YXR1c0NvZGUgPSByZXNwb25zZS5zdGF0dXNDb2RlIGFzIG51bWJlcjtcbiAgICAgICAgICAgIGNvbnN0IHN0YXR1c01lc3NhZ2UgPSByZXNwb25zZS5zdGF0dXNNZXNzYWdlO1xuXG4gICAgICAgICAgICBjb25zdCBkYXRhOiBCdWZmZXJbXSA9IFtdO1xuICAgICAgICAgICAgcmVzcG9uc2Uub24oXCJkYXRhXCIsIChjaHVuaykgPT4ge1xuICAgICAgICAgICAgICAgIGRhdGEucHVzaChjaHVuayk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmVzcG9uc2Uub24oXCJlbmRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGNvbWJpbmUgYWxsIHJlY2VpdmVkIGJ1ZmZlciBzdHJlYW1zIGludG8gb25lIGJ1ZmZlciwgYW5kIHRoZW4gaW50byBhIHN0cmluZ1xuICAgICAgICAgICAgICAgIGNvbnN0IGJvZHkgPSBCdWZmZXIuY29uY2F0KFsuLi5kYXRhXSkudG9TdHJpbmcoKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZEhlYWRlcnMgPSBoZWFkZXJzIGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gICAgICAgICAgICAgICAgY29uc3QgbmV0d29ya1Jlc3BvbnNlID0gTmV0d29ya1V0aWxzLmdldE5ldHdvcmtSZXNwb25zZShcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkSGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VCb2R5KFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzQ29kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c01lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWRIZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgYm9keVxuICAgICAgICAgICAgICAgICAgICApIGFzIFQsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1c0NvZGVcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAoc3RhdHVzQ29kZSA8IEh0dHBTdGF0dXMuU1VDQ0VTU19SQU5HRV9TVEFSVCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzQ29kZSA+IEh0dHBTdGF0dXMuU1VDQ0VTU19SQU5HRV9FTkQpICYmXG4gICAgICAgICAgICAgICAgICAgIC8vIGRvIG5vdCBkZXN0cm95IHRoZSByZXF1ZXN0IGZvciB0aGUgZGV2aWNlIGNvZGUgZmxvd1xuICAgICAgICAgICAgICAgICAgICBuZXR3b3JrUmVzcG9uc2UuYm9keVtcImVycm9yXCJdICE9PVxuICAgICAgICAgICAgICAgICAgICAgICAgQ29uc3RhbnRzLkFVVEhPUklaQVRJT05fUEVORElOR1xuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShuZXR3b3JrUmVzcG9uc2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJlcXVlc3Qub24oXCJlcnJvclwiLCAoY2h1bmspID0+IHtcbiAgICAgICAgICAgIHJlcXVlc3QuZGVzdHJveSgpO1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihjaHVuay50b1N0cmluZygpKSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuLyoqXG4gKiBDaGVjayBpZiBleHRyYSBwYXJzaW5nIGlzIG5lZWRlZCBvbiB0aGUgcmVwc29uc2UgZnJvbSB0aGUgc2VydmVyXG4gKiBAcGFyYW0gc3RhdHVzQ29kZSB7bnVtYmVyfSB0aGUgc3RhdHVzIGNvZGUgb2YgdGhlIHJlc3BvbnNlIGZyb20gdGhlIHNlcnZlclxuICogQHBhcmFtIHN0YXR1c01lc3NhZ2Uge3N0cmluZyB8IHVuZGVmaW5lZH0gdGhlIHN0YXR1cyBtZXNzYWdlIG9mIHRoZSByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXJcbiAqIEBwYXJhbSBoZWFkZXJzIHtSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+fSB0aGUgaGVhZGVycyBvZiB0aGUgcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVyXG4gKiBAcGFyYW0gYm9keSB7c3RyaW5nfSB0aGUgYm9keSBmcm9tIHRoZSByZXNwb25zZSBvZiB0aGUgc2VydmVyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBKU09OIHBhcnNlZCBib2R5IG9yIGVycm9yIG9iamVjdFxuICovXG5jb25zdCBwYXJzZUJvZHkgPSAoXG4gICAgc3RhdHVzQ29kZTogbnVtYmVyLFxuICAgIHN0YXR1c01lc3NhZ2U6IHN0cmluZyB8IHVuZGVmaW5lZCxcbiAgICBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+LFxuICAgIGJvZHk6IHN0cmluZ1xuKSA9PiB7XG4gICAgLypcbiAgICAgKiBJbmZvcm1hdGlvbmFsIHJlc3BvbnNlcyAoMTAwIFx1MjAxMyAxOTkpXG4gICAgICogU3VjY2Vzc2Z1bCByZXNwb25zZXMgKDIwMCBcdTIwMTMgMjk5KVxuICAgICAqIFJlZGlyZWN0aW9uIG1lc3NhZ2VzICgzMDAgXHUyMDEzIDM5OSlcbiAgICAgKiBDbGllbnQgZXJyb3IgcmVzcG9uc2VzICg0MDAgXHUyMDEzIDQ5OSlcbiAgICAgKiBTZXJ2ZXIgZXJyb3IgcmVzcG9uc2VzICg1MDAgXHUyMDEzIDU5OSlcbiAgICAgKi9cblxuICAgIGxldCBwYXJzZWRCb2R5O1xuICAgIHRyeSB7XG4gICAgICAgIHBhcnNlZEJvZHkgPSBKU09OLnBhcnNlKGJvZHkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxldCBlcnJvclR5cGU7XG4gICAgICAgIGxldCBlcnJvckRlc2NyaXB0aW9uSGVscGVyO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICBzdGF0dXNDb2RlID49IEh0dHBTdGF0dXMuQ0xJRU5UX0VSUk9SX1JBTkdFX1NUQVJUICYmXG4gICAgICAgICAgICBzdGF0dXNDb2RlIDw9IEh0dHBTdGF0dXMuQ0xJRU5UX0VSUk9SX1JBTkdFX0VORFxuICAgICAgICApIHtcbiAgICAgICAgICAgIGVycm9yVHlwZSA9IFwiY2xpZW50X2Vycm9yXCI7XG4gICAgICAgICAgICBlcnJvckRlc2NyaXB0aW9uSGVscGVyID0gXCJBIGNsaWVudFwiO1xuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgc3RhdHVzQ29kZSA+PSBIdHRwU3RhdHVzLlNFUlZFUl9FUlJPUl9SQU5HRV9TVEFSVCAmJlxuICAgICAgICAgICAgc3RhdHVzQ29kZSA8PSBIdHRwU3RhdHVzLlNFUlZFUl9FUlJPUl9SQU5HRV9FTkRcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBlcnJvclR5cGUgPSBcInNlcnZlcl9lcnJvclwiO1xuICAgICAgICAgICAgZXJyb3JEZXNjcmlwdGlvbkhlbHBlciA9IFwiQSBzZXJ2ZXJcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVycm9yVHlwZSA9IFwidW5rbm93bl9lcnJvclwiO1xuICAgICAgICAgICAgZXJyb3JEZXNjcmlwdGlvbkhlbHBlciA9IFwiQW4gdW5rbm93blwiO1xuICAgICAgICB9XG5cbiAgICAgICAgcGFyc2VkQm9keSA9IHtcbiAgICAgICAgICAgIGVycm9yOiBlcnJvclR5cGUsXG4gICAgICAgICAgICBlcnJvcl9kZXNjcmlwdGlvbjogYCR7ZXJyb3JEZXNjcmlwdGlvbkhlbHBlcn0gZXJyb3Igb2NjdXJlZC5cXG5IdHRwIHN0YXR1cyBjb2RlOiAke3N0YXR1c0NvZGV9XFxuSHR0cCBzdGF0dXMgbWVzc2FnZTogJHtcbiAgICAgICAgICAgICAgICBzdGF0dXNNZXNzYWdlIHx8IFwiVW5rbm93blwiXG4gICAgICAgICAgICB9XFxuSGVhZGVyczogJHtKU09OLnN0cmluZ2lmeShoZWFkZXJzKX1gLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBwYXJzZWRCb2R5O1xufTtcbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgTWFuYWdlZElkZW50aXR5RW52aXJvbm1lbnRWYXJpYWJsZU5hbWVzIH0gZnJvbSBcIi4uL3V0aWxzL0NvbnN0YW50cy5qc1wiO1xuXG5leHBvcnQgY29uc3QgaW52YWxpZEZpbGVFeHRlbnNpb24gPSBcImludmFsaWRfZmlsZV9leHRlbnNpb25cIjtcbmV4cG9ydCBjb25zdCBpbnZhbGlkRmlsZVBhdGggPSBcImludmFsaWRfZmlsZV9wYXRoXCI7XG5leHBvcnQgY29uc3QgaW52YWxpZE1hbmFnZWRJZGVudGl0eUlkVHlwZSA9IFwiaW52YWxpZF9tYW5hZ2VkX2lkZW50aXR5X2lkX3R5cGVcIjtcbmV4cG9ydCBjb25zdCBpbnZhbGlkU2VjcmV0ID0gXCJpbnZhbGlkX3NlY3JldFwiO1xuZXhwb3J0IGNvbnN0IG1pc3NpbmdJZCA9IFwibWlzc2luZ19jbGllbnRfaWRcIjtcbmV4cG9ydCBjb25zdCBuZXR3b3JrVW5hdmFpbGFibGUgPSBcIm5ldHdvcmtfdW5hdmFpbGFibGVcIjtcbmV4cG9ydCBjb25zdCBwbGF0Zm9ybU5vdFN1cHBvcnRlZCA9IFwicGxhdGZvcm1fbm90X3N1cHBvcnRlZFwiO1xuZXhwb3J0IGNvbnN0IHVuYWJsZVRvQ3JlYXRlQXp1cmVBcmMgPSBcInVuYWJsZV90b19jcmVhdGVfYXp1cmVfYXJjXCI7XG5leHBvcnQgY29uc3QgdW5hYmxlVG9DcmVhdGVDbG91ZFNoZWxsID0gXCJ1bmFibGVfdG9fY3JlYXRlX2Nsb3VkX3NoZWxsXCI7XG5leHBvcnQgY29uc3QgdW5hYmxlVG9DcmVhdGVTb3VyY2UgPSBcInVuYWJsZV90b19jcmVhdGVfc291cmNlXCI7XG5leHBvcnQgY29uc3QgdW5hYmxlVG9SZWFkU2VjcmV0RmlsZSA9IFwidW5hYmxlX3RvX3JlYWRfc2VjcmV0X2ZpbGVcIjtcbmV4cG9ydCBjb25zdCB1cmxQYXJzZUVycm9yID0gXCJ1cmxfcGFyc2VfZXJyb3JcIjtcbmV4cG9ydCBjb25zdCB1c2VyQXNzaWduZWROb3RBdmFpbGFibGVBdFJ1bnRpbWUgPVxuICAgIFwidXNlcl9hc3NpZ25lZF9ub3RfYXZhaWxhYmxlX2F0X3J1bnRpbWVcIjtcbmV4cG9ydCBjb25zdCB3d3dBdXRoZW50aWNhdGVIZWFkZXJNaXNzaW5nID0gXCJ3d3dfYXV0aGVudGljYXRlX2hlYWRlcl9taXNzaW5nXCI7XG5leHBvcnQgY29uc3Qgd3d3QXV0aGVudGljYXRlSGVhZGVyVW5zdXBwb3J0ZWRGb3JtYXQgPVxuICAgIFwid3d3X2F1dGhlbnRpY2F0ZV9oZWFkZXJfdW5zdXBwb3J0ZWRfZm9ybWF0XCI7XG5cbmV4cG9ydCBjb25zdCBNc2lFbnZpcm9ubWVudFZhcmlhYmxlVXJsTWFsZm9ybWVkRXJyb3JDb2RlcyA9IHtcbiAgICBbTWFuYWdlZElkZW50aXR5RW52aXJvbm1lbnRWYXJpYWJsZU5hbWVzLkFaVVJFX1BPRF9JREVOVElUWV9BVVRIT1JJVFlfSE9TVF06XG4gICAgICAgIFwiYXp1cmVfcG9kX2lkZW50aXR5X2F1dGhvcml0eV9ob3N0X3VybF9tYWxmb3JtZWRcIixcbiAgICBbTWFuYWdlZElkZW50aXR5RW52aXJvbm1lbnRWYXJpYWJsZU5hbWVzLklERU5USVRZX0VORFBPSU5UXTpcbiAgICAgICAgXCJpZGVudGl0eV9lbmRwb2ludF91cmxfbWFsZm9ybWVkXCIsXG4gICAgW01hbmFnZWRJZGVudGl0eUVudmlyb25tZW50VmFyaWFibGVOYW1lcy5JTURTX0VORFBPSU5UXTpcbiAgICAgICAgXCJpbWRzX2VuZHBvaW50X3VybF9tYWxmb3JtZWRcIixcbiAgICBbTWFuYWdlZElkZW50aXR5RW52aXJvbm1lbnRWYXJpYWJsZU5hbWVzLk1TSV9FTkRQT0lOVF06XG4gICAgICAgIFwibXNpX2VuZHBvaW50X3VybF9tYWxmb3JtZWRcIixcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBNc2lFbnZpcm9ubWVudFZhcmlhYmxlRXJyb3JDb2RlcyA9XG4gICAgKHR5cGVvZiBNc2lFbnZpcm9ubWVudFZhcmlhYmxlVXJsTWFsZm9ybWVkRXJyb3JDb2Rlcylba2V5b2YgdHlwZW9mIE1zaUVudmlyb25tZW50VmFyaWFibGVVcmxNYWxmb3JtZWRFcnJvckNvZGVzXTtcbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQXV0aEVycm9yIH0gZnJvbSBcIkBhenVyZS9tc2FsLWNvbW1vbi9ub2RlXCI7XG5pbXBvcnQgKiBhcyBNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzIGZyb20gXCIuL01hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMuanNcIjtcbmltcG9ydCB7IE1hbmFnZWRJZGVudGl0eUVudmlyb25tZW50VmFyaWFibGVOYW1lcyB9IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcbmV4cG9ydCB7IE1hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMgfTtcblxuLyoqXG4gKiBNYW5hZ2VkSWRlbnRpdHlFcnJvck1lc3NhZ2UgY2xhc3MgY29udGFpbmluZyBzdHJpbmcgY29uc3RhbnRzIHVzZWQgYnkgZXJyb3IgY29kZXMgYW5kIG1lc3NhZ2VzLlxuICovXG5leHBvcnQgY29uc3QgTWFuYWdlZElkZW50aXR5RXJyb3JNZXNzYWdlcyA9IHtcbiAgICBbTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy5pbnZhbGlkRmlsZUV4dGVuc2lvbl06XG4gICAgICAgIFwiVGhlIGZpbGUgcGF0aCBpbiB0aGUgV1dXLUF1dGhlbnRpY2F0ZSBoZWFkZXIgZG9lcyBub3QgY29udGFpbiBhIC5rZXkgZmlsZS5cIixcbiAgICBbTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy5pbnZhbGlkRmlsZVBhdGhdOlxuICAgICAgICBcIlRoZSBmaWxlIHBhdGggaW4gdGhlIFdXVy1BdXRoZW50aWNhdGUgaGVhZGVyIGlzIG5vdCBpbiBhIHZhbGlkIFdpbmRvd3Mgb3IgTGludXggRm9ybWF0LlwiLFxuICAgIFtNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzLmludmFsaWRNYW5hZ2VkSWRlbnRpdHlJZFR5cGVdOlxuICAgICAgICBcIk1vcmUgdGhhbiBvbmUgTWFuYWdlZElkZW50aXR5SWRUeXBlIHdhcyBwcm92aWRlZC5cIixcbiAgICBbTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy5pbnZhbGlkU2VjcmV0XTpcbiAgICAgICAgXCJUaGUgc2VjcmV0IGluIHRoZSBmaWxlIG9uIHRoZSBmaWxlIHBhdGggaW4gdGhlIFdXVy1BdXRoZW50aWNhdGUgaGVhZGVyIGlzIGdyZWF0ZXIgdGhhbiA0MDk2IGJ5dGVzLlwiLFxuICAgIFtNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzLnBsYXRmb3JtTm90U3VwcG9ydGVkXTpcbiAgICAgICAgXCJUaGUgcGxhdGZvcm0gaXMgbm90IHN1cHBvcnRlZCBieSBBenVyZSBBcmMuIEF6dXJlIEFyYyBvbmx5IHN1cHBvcnRzIFdpbmRvd3MgYW5kIExpbnV4LlwiLFxuICAgIFtNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzLm1pc3NpbmdJZF06XG4gICAgICAgIFwiQSBNYW5hZ2VkSWRlbnRpdHlJZCBpZCB3YXMgbm90IHByb3ZpZGVkLlwiLFxuICAgIFtNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzLk1zaUVudmlyb25tZW50VmFyaWFibGVVcmxNYWxmb3JtZWRFcnJvckNvZGVzXG4gICAgICAgIC5BWlVSRV9QT0RfSURFTlRJVFlfQVVUSE9SSVRZX0hPU1RdOiBgVGhlIE1hbmFnZWQgSWRlbnRpdHkncyAnJHtNYW5hZ2VkSWRlbnRpdHlFbnZpcm9ubWVudFZhcmlhYmxlTmFtZXMuQVpVUkVfUE9EX0lERU5USVRZX0FVVEhPUklUWV9IT1NUfScgZW52aXJvbm1lbnQgdmFyaWFibGUgaXMgbWFsZm9ybWVkLmAsXG4gICAgW01hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMuTXNpRW52aXJvbm1lbnRWYXJpYWJsZVVybE1hbGZvcm1lZEVycm9yQ29kZXNcbiAgICAgICAgLklERU5USVRZX0VORFBPSU5UXTogYFRoZSBNYW5hZ2VkIElkZW50aXR5J3MgJyR7TWFuYWdlZElkZW50aXR5RW52aXJvbm1lbnRWYXJpYWJsZU5hbWVzLklERU5USVRZX0VORFBPSU5UfScgZW52aXJvbm1lbnQgdmFyaWFibGUgaXMgbWFsZm9ybWVkLmAsXG4gICAgW01hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMuTXNpRW52aXJvbm1lbnRWYXJpYWJsZVVybE1hbGZvcm1lZEVycm9yQ29kZXNcbiAgICAgICAgLklNRFNfRU5EUE9JTlRdOiBgVGhlIE1hbmFnZWQgSWRlbnRpdHkncyAnJHtNYW5hZ2VkSWRlbnRpdHlFbnZpcm9ubWVudFZhcmlhYmxlTmFtZXMuSU1EU19FTkRQT0lOVH0nIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIG1hbGZvcm1lZC5gLFxuICAgIFtNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzLk1zaUVudmlyb25tZW50VmFyaWFibGVVcmxNYWxmb3JtZWRFcnJvckNvZGVzXG4gICAgICAgIC5NU0lfRU5EUE9JTlRdOiBgVGhlIE1hbmFnZWQgSWRlbnRpdHkncyAnJHtNYW5hZ2VkSWRlbnRpdHlFbnZpcm9ubWVudFZhcmlhYmxlTmFtZXMuTVNJX0VORFBPSU5UfScgZW52aXJvbm1lbnQgdmFyaWFibGUgaXMgbWFsZm9ybWVkLmAsXG4gICAgW01hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMubmV0d29ya1VuYXZhaWxhYmxlXTpcbiAgICAgICAgXCJBdXRoZW50aWNhdGlvbiB1bmF2YWlsYWJsZS4gVGhlIHJlcXVlc3QgdG8gdGhlIG1hbmFnZWQgaWRlbnRpdHkgZW5kcG9pbnQgdGltZWQgb3V0LlwiLFxuICAgIFtNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzLnVuYWJsZVRvQ3JlYXRlQXp1cmVBcmNdOlxuICAgICAgICBcIkF6dXJlIEFyYyBNYW5hZ2VkIElkZW50aXRpZXMgY2FuIG9ubHkgYmUgc3lzdGVtIGFzc2lnbmVkLlwiLFxuICAgIFtNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzLnVuYWJsZVRvQ3JlYXRlQ2xvdWRTaGVsbF06XG4gICAgICAgIFwiQ2xvdWQgU2hlbGwgTWFuYWdlZCBJZGVudGl0aWVzIGNhbiBvbmx5IGJlIHN5c3RlbSBhc3NpZ25lZC5cIixcbiAgICBbTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy51bmFibGVUb0NyZWF0ZVNvdXJjZV06XG4gICAgICAgIFwiVW5hYmxlIHRvIGNyZWF0ZSBhIE1hbmFnZWQgSWRlbnRpdHkgc291cmNlIGJhc2VkIG9uIGVudmlyb25tZW50IHZhcmlhYmxlcy5cIixcbiAgICBbTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy51bmFibGVUb1JlYWRTZWNyZXRGaWxlXTpcbiAgICAgICAgXCJVbmFibGUgdG8gcmVhZCB0aGUgc2VjcmV0IGZpbGUuXCIsXG4gICAgW01hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMudXNlckFzc2lnbmVkTm90QXZhaWxhYmxlQXRSdW50aW1lXTpcbiAgICAgICAgXCJTZXJ2aWNlIEZhYnJpYyB1c2VyIGFzc2lnbmVkIG1hbmFnZWQgaWRlbnRpdHkgQ2xpZW50SWQgb3IgUmVzb3VyY2VJZCBpcyBub3QgY29uZmlndXJhYmxlIGF0IHJ1bnRpbWUuXCIsXG4gICAgW01hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMud3d3QXV0aGVudGljYXRlSGVhZGVyTWlzc2luZ106XG4gICAgICAgIFwiQSA0MDEgcmVzcG9uc2Ugd2FzIHJlY2VpdmVkIGZvcm0gdGhlIEF6dXJlIEFyYyBNYW5hZ2VkIElkZW50aXR5LCBidXQgdGhlIHd3dy1hdXRoZW50aWNhdGUgaGVhZGVyIGlzIG1pc3NpbmcuXCIsXG4gICAgW01hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMud3d3QXV0aGVudGljYXRlSGVhZGVyVW5zdXBwb3J0ZWRGb3JtYXRdOlxuICAgICAgICBcIkEgNDAxIHJlc3BvbnNlIHdhcyByZWNlaXZlZCBmb3JtIHRoZSBBenVyZSBBcmMgTWFuYWdlZCBJZGVudGl0eSwgYnV0IHRoZSB3d3ctYXV0aGVudGljYXRlIGhlYWRlciBpcyBpbiBhbiB1bnN1cHBvcnRlZCBmb3JtYXQuXCIsXG59O1xuXG5leHBvcnQgY2xhc3MgTWFuYWdlZElkZW50aXR5RXJyb3IgZXh0ZW5kcyBBdXRoRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKGVycm9yQ29kZTogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKGVycm9yQ29kZSwgTWFuYWdlZElkZW50aXR5RXJyb3JNZXNzYWdlc1tlcnJvckNvZGVdKTtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJNYW5hZ2VkSWRlbnRpdHlFcnJvclwiO1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgTWFuYWdlZElkZW50aXR5RXJyb3IucHJvdG90eXBlKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVNYW5hZ2VkSWRlbnRpdHlFcnJvcihcbiAgICBlcnJvckNvZGU6IHN0cmluZ1xuKTogTWFuYWdlZElkZW50aXR5RXJyb3Ige1xuICAgIHJldHVybiBuZXcgTWFuYWdlZElkZW50aXR5RXJyb3IoZXJyb3JDb2RlKTtcbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQXV0aEVycm9yIH0gZnJvbSBcIkBhenVyZS9tc2FsLWNvbW1vbi9ub2RlXCI7XG5cbi8qKlxuICogTm9kZUF1dGhFcnJvck1lc3NhZ2UgY2xhc3MgY29udGFpbmluZyBzdHJpbmcgY29uc3RhbnRzIHVzZWQgYnkgZXJyb3IgY29kZXMgYW5kIG1lc3NhZ2VzLlxuICovXG5leHBvcnQgY29uc3QgTm9kZUF1dGhFcnJvck1lc3NhZ2UgPSB7XG4gICAgaW52YWxpZExvb3BiYWNrQWRkcmVzc1R5cGU6IHtcbiAgICAgICAgY29kZTogXCJpbnZhbGlkX2xvb3BiYWNrX3NlcnZlcl9hZGRyZXNzX3R5cGVcIixcbiAgICAgICAgZGVzYzogXCJMb29wYmFjayBzZXJ2ZXIgYWRkcmVzcyBpcyBub3QgdHlwZSBzdHJpbmcuIFRoaXMgaXMgdW5leHBlY3RlZC5cIixcbiAgICB9LFxuICAgIHVuYWJsZVRvTG9hZFJlZGlyZWN0VXJpOiB7XG4gICAgICAgIGNvZGU6IFwidW5hYmxlX3RvX2xvYWRfcmVkaXJlY3RVcmxcIixcbiAgICAgICAgZGVzYzogXCJMb29wYmFjayBzZXJ2ZXIgY2FsbGJhY2sgd2FzIGludm9rZWQgd2l0aG91dCBhIHVybC4gVGhpcyBpcyB1bmV4cGVjdGVkLlwiLFxuICAgIH0sXG4gICAgbm9BdXRoQ29kZUluUmVzcG9uc2U6IHtcbiAgICAgICAgY29kZTogXCJub19hdXRoX2NvZGVfaW5fcmVzcG9uc2VcIixcbiAgICAgICAgZGVzYzogXCJObyBhdXRoIGNvZGUgZm91bmQgaW4gdGhlIHNlcnZlciByZXNwb25zZS4gUGxlYXNlIGNoZWNrIHlvdXIgbmV0d29yayB0cmFjZSB0byBkZXRlcm1pbmUgd2hhdCBoYXBwZW5lZC5cIixcbiAgICB9LFxuICAgIG5vTG9vcGJhY2tTZXJ2ZXJFeGlzdHM6IHtcbiAgICAgICAgY29kZTogXCJub19sb29wYmFja19zZXJ2ZXJfZXhpc3RzXCIsXG4gICAgICAgIGRlc2M6IFwiTm8gbG9vcGJhY2sgc2VydmVyIGV4aXN0cyB5ZXQuXCIsXG4gICAgfSxcbiAgICBsb29wYmFja1NlcnZlckFscmVhZHlFeGlzdHM6IHtcbiAgICAgICAgY29kZTogXCJsb29wYmFja19zZXJ2ZXJfYWxyZWFkeV9leGlzdHNcIixcbiAgICAgICAgZGVzYzogXCJMb29wYmFjayBzZXJ2ZXIgYWxyZWFkeSBleGlzdHMuIENhbm5vdCBjcmVhdGUgYW5vdGhlci5cIixcbiAgICB9LFxuICAgIGxvb3BiYWNrU2VydmVyVGltZW91dDoge1xuICAgICAgICBjb2RlOiBcImxvb3BiYWNrX3NlcnZlcl90aW1lb3V0XCIsXG4gICAgICAgIGRlc2M6IFwiVGltZWQgb3V0IHdhaXRpbmcgZm9yIGF1dGggY29kZSBsaXN0ZW5lciB0byBiZSByZWdpc3RlcmVkLlwiLFxuICAgIH0sXG4gICAgc3RhdGVOb3RGb3VuZEVycm9yOiB7XG4gICAgICAgIGNvZGU6IFwic3RhdGVfbm90X2ZvdW5kXCIsXG4gICAgICAgIGRlc2M6IFwiU3RhdGUgbm90IGZvdW5kLiBQbGVhc2UgdmVyaWZ5IHRoYXQgdGhlIHJlcXVlc3Qgb3JpZ2luYXRlZCBmcm9tIG1zYWwuXCIsXG4gICAgfSxcbiAgICB0aHVtYnByaW50TWlzc2luZzoge1xuICAgICAgICBjb2RlOiBcInRodW1icHJpbnRfbWlzc2luZ19mcm9tX2NsaWVudF9jZXJ0aWZpY2F0ZVwiLFxuICAgICAgICBkZXNjOiBcIkNsaWVudCBjZXJ0aWZpY2F0ZSBkb2VzIG5vdCBjb250YWluIGEgU0hBLTEgb3IgU0hBLTI1NiB0aHVtYnByaW50LlwiLFxuICAgIH0sXG59O1xuXG5leHBvcnQgY2xhc3MgTm9kZUF1dGhFcnJvciBleHRlbmRzIEF1dGhFcnJvciB7XG4gICAgY29uc3RydWN0b3IoZXJyb3JDb2RlOiBzdHJpbmcsIGVycm9yTWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihlcnJvckNvZGUsIGVycm9yTWVzc2FnZSk7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiTm9kZUF1dGhFcnJvclwiO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gZXJyb3IgdGhyb3duIGlmIGxvb3BiYWNrIHNlcnZlciBhZGRyZXNzIGlzIG9mIHR5cGUgc3RyaW5nLlxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVJbnZhbGlkTG9vcGJhY2tBZGRyZXNzVHlwZUVycm9yKCk6IE5vZGVBdXRoRXJyb3Ige1xuICAgICAgICByZXR1cm4gbmV3IE5vZGVBdXRoRXJyb3IoXG4gICAgICAgICAgICBOb2RlQXV0aEVycm9yTWVzc2FnZS5pbnZhbGlkTG9vcGJhY2tBZGRyZXNzVHlwZS5jb2RlLFxuICAgICAgICAgICAgYCR7Tm9kZUF1dGhFcnJvck1lc3NhZ2UuaW52YWxpZExvb3BiYWNrQWRkcmVzc1R5cGUuZGVzY31gXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBlcnJvciB0aHJvd24gaWYgdGhlIGxvb3BiYWNrIHNlcnZlciBpcyB1bmFibGUgdG8gZ2V0IGEgdXJsLlxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVVbmFibGVUb0xvYWRSZWRpcmVjdFVybEVycm9yKCk6IE5vZGVBdXRoRXJyb3Ige1xuICAgICAgICByZXR1cm4gbmV3IE5vZGVBdXRoRXJyb3IoXG4gICAgICAgICAgICBOb2RlQXV0aEVycm9yTWVzc2FnZS51bmFibGVUb0xvYWRSZWRpcmVjdFVyaS5jb2RlLFxuICAgICAgICAgICAgYCR7Tm9kZUF1dGhFcnJvck1lc3NhZ2UudW5hYmxlVG9Mb2FkUmVkaXJlY3RVcmkuZGVzY31gXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBlcnJvciB0aHJvd24gaWYgdGhlIHNlcnZlciByZXNwb25zZSBkb2VzIG5vdCBjb250YWluIGFuIGF1dGggY29kZS5cbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlTm9BdXRoQ29kZUluUmVzcG9uc2VFcnJvcigpOiBOb2RlQXV0aEVycm9yIHtcbiAgICAgICAgcmV0dXJuIG5ldyBOb2RlQXV0aEVycm9yKFxuICAgICAgICAgICAgTm9kZUF1dGhFcnJvck1lc3NhZ2Uubm9BdXRoQ29kZUluUmVzcG9uc2UuY29kZSxcbiAgICAgICAgICAgIGAke05vZGVBdXRoRXJyb3JNZXNzYWdlLm5vQXV0aENvZGVJblJlc3BvbnNlLmRlc2N9YFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gZXJyb3IgdGhyb3duIGlmIHRoZSBsb29wYmFjayBzZXJ2ZXIgaGFzIG5vdCBiZWVuIHNwdW4gdXAgeWV0LlxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVOb0xvb3BiYWNrU2VydmVyRXhpc3RzRXJyb3IoKTogTm9kZUF1dGhFcnJvciB7XG4gICAgICAgIHJldHVybiBuZXcgTm9kZUF1dGhFcnJvcihcbiAgICAgICAgICAgIE5vZGVBdXRoRXJyb3JNZXNzYWdlLm5vTG9vcGJhY2tTZXJ2ZXJFeGlzdHMuY29kZSxcbiAgICAgICAgICAgIGAke05vZGVBdXRoRXJyb3JNZXNzYWdlLm5vTG9vcGJhY2tTZXJ2ZXJFeGlzdHMuZGVzY31gXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBlcnJvciB0aHJvd24gaWYgYSBsb29wYmFjayBzZXJ2ZXIgYWxyZWFkeSBleGlzdHMgd2hlbiBhdHRlbXB0aW5nIHRvIGNyZWF0ZSBhbm90aGVyIG9uZS5cbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlTG9vcGJhY2tTZXJ2ZXJBbHJlYWR5RXhpc3RzRXJyb3IoKTogTm9kZUF1dGhFcnJvciB7XG4gICAgICAgIHJldHVybiBuZXcgTm9kZUF1dGhFcnJvcihcbiAgICAgICAgICAgIE5vZGVBdXRoRXJyb3JNZXNzYWdlLmxvb3BiYWNrU2VydmVyQWxyZWFkeUV4aXN0cy5jb2RlLFxuICAgICAgICAgICAgYCR7Tm9kZUF1dGhFcnJvck1lc3NhZ2UubG9vcGJhY2tTZXJ2ZXJBbHJlYWR5RXhpc3RzLmRlc2N9YFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gZXJyb3IgdGhyb3duIGlmIHRoZSBsb29wYmFjayBzZXJ2ZXIgdGltZXMgb3V0IHJlZ2lzdGVyaW5nIHRoZSBhdXRoIGNvZGUgbGlzdGVuZXIuXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZUxvb3BiYWNrU2VydmVyVGltZW91dEVycm9yKCk6IE5vZGVBdXRoRXJyb3Ige1xuICAgICAgICByZXR1cm4gbmV3IE5vZGVBdXRoRXJyb3IoXG4gICAgICAgICAgICBOb2RlQXV0aEVycm9yTWVzc2FnZS5sb29wYmFja1NlcnZlclRpbWVvdXQuY29kZSxcbiAgICAgICAgICAgIGAke05vZGVBdXRoRXJyb3JNZXNzYWdlLmxvb3BiYWNrU2VydmVyVGltZW91dC5kZXNjfWBcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGVycm9yIHRocm93biB3aGVuIHRoZSBzdGF0ZSBpcyBub3QgcHJlc2VudC5cbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlU3RhdGVOb3RGb3VuZEVycm9yKCk6IE5vZGVBdXRoRXJyb3Ige1xuICAgICAgICByZXR1cm4gbmV3IE5vZGVBdXRoRXJyb3IoXG4gICAgICAgICAgICBOb2RlQXV0aEVycm9yTWVzc2FnZS5zdGF0ZU5vdEZvdW5kRXJyb3IuY29kZSxcbiAgICAgICAgICAgIE5vZGVBdXRoRXJyb3JNZXNzYWdlLnN0YXRlTm90Rm91bmRFcnJvci5kZXNjXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBlcnJvciB0aHJvd24gd2hlbiBjbGllbnQgY2VydGlmaWNhdGUgd2FzIHByb3ZpZGVkLCBidXQgbmVpdGhlciB0aGUgU0hBLTEgb3IgU0hBLTI1NiB0aHVtYnByaW50cyB3ZXJlIHByb3ZpZGVkXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZVRodW1icHJpbnRNaXNzaW5nRXJyb3IoKTogTm9kZUF1dGhFcnJvciB7XG4gICAgICAgIHJldHVybiBuZXcgTm9kZUF1dGhFcnJvcihcbiAgICAgICAgICAgIE5vZGVBdXRoRXJyb3JNZXNzYWdlLnRodW1icHJpbnRNaXNzaW5nLmNvZGUsXG4gICAgICAgICAgICBOb2RlQXV0aEVycm9yTWVzc2FnZS50aHVtYnByaW50TWlzc2luZy5kZXNjXG4gICAgICAgICk7XG4gICAgfVxufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICAgIExvZ2dlck9wdGlvbnMsXG4gICAgSU5ldHdvcmtNb2R1bGUsXG4gICAgTG9nTGV2ZWwsXG4gICAgUHJvdG9jb2xNb2RlLFxuICAgIElDYWNoZVBsdWdpbixcbiAgICBDb25zdGFudHMsXG4gICAgQXp1cmVDbG91ZEluc3RhbmNlLFxuICAgIEF6dXJlQ2xvdWRPcHRpb25zLFxuICAgIEFwcGxpY2F0aW9uVGVsZW1ldHJ5LFxuICAgIElOYXRpdmVCcm9rZXJQbHVnaW4sXG4gICAgQ2xpZW50QXNzZXJ0aW9uQ2FsbGJhY2ssXG59IGZyb20gXCJAYXp1cmUvbXNhbC1jb21tb24vbm9kZVwiO1xuaW1wb3J0IHsgSHR0cENsaWVudCB9IGZyb20gXCIuLi9uZXR3b3JrL0h0dHBDbGllbnQuanNcIjtcbmltcG9ydCBodHRwIGZyb20gXCJodHRwXCI7XG5pbXBvcnQgaHR0cHMgZnJvbSBcImh0dHBzXCI7XG5pbXBvcnQgeyBNYW5hZ2VkSWRlbnRpdHlJZCB9IGZyb20gXCIuL01hbmFnZWRJZGVudGl0eUlkLmpzXCI7XG5pbXBvcnQgeyBOb2RlQXV0aEVycm9yIH0gZnJvbSBcIi4uL2Vycm9yL05vZGVBdXRoRXJyb3IuanNcIjtcblxuLyoqXG4gKiAtIGNsaWVudElkICAgICAgICAgICAgICAgLSBDbGllbnQgaWQgb2YgdGhlIGFwcGxpY2F0aW9uLlxuICogLSBhdXRob3JpdHkgICAgICAgICAgICAgIC0gVXJsIG9mIHRoZSBhdXRob3JpdHkuIElmIG5vIHZhbHVlIGlzIHNldCwgZGVmYXVsdHMgdG8gaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tL2NvbW1vbi5cbiAqIC0ga25vd25BdXRob3JpdGllcyAgICAgICAtIE5lZWRlZCBmb3IgQXp1cmUgQjJDIGFuZCBBREZTLiBBbGwgYXV0aG9yaXRpZXMgdGhhdCB3aWxsIGJlIHVzZWQgaW4gdGhlIGNsaWVudCBhcHBsaWNhdGlvbi4gT25seSB0aGUgaG9zdCBvZiB0aGUgYXV0aG9yaXR5IHNob3VsZCBiZSBwYXNzZWQgaW4uXG4gKiAtIGNsaWVudFNlY3JldCAgICAgICAgICAgLSBTZWNyZXQgc3RyaW5nIHRoYXQgdGhlIGFwcGxpY2F0aW9uIHVzZXMgd2hlbiByZXF1ZXN0aW5nIGEgdG9rZW4uIE9ubHkgdXNlZCBpbiBjb25maWRlbnRpYWwgY2xpZW50IGFwcGxpY2F0aW9ucy4gQ2FuIGJlIGNyZWF0ZWQgaW4gdGhlIEF6dXJlIGFwcCByZWdpc3RyYXRpb24gcG9ydGFsLlxuICogLSBjbGllbnRBc3NlcnRpb24gICAgICAgIC0gQSBDbGllbnRBc3NlcnRpb24gb2JqZWN0IGNvbnRhaW5pbmcgYW4gYXNzZXJ0aW9uIHN0cmluZyBvciBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBhc3NlcnRpb24gc3RyaW5nIHRoYXQgdGhlIGFwcGxpY2F0aW9uIHVzZXMgd2hlbiByZXF1ZXN0aW5nIGEgdG9rZW4sIGFzIHdlbGwgYXMgdGhlIGFzc2VydGlvbidzIHR5cGUgKHVybjppZXRmOnBhcmFtczpvYXV0aDpjbGllbnQtYXNzZXJ0aW9uLXR5cGU6and0LWJlYXJlcikuIE9ubHkgdXNlZCBpbiBjb25maWRlbnRpYWwgY2xpZW50IGFwcGxpY2F0aW9ucy5cbiAqIC0gY2xpZW50Q2VydGlmaWNhdGUgICAgICAtIENlcnRpZmljYXRlIHRoYXQgdGhlIGFwcGxpY2F0aW9uIHVzZXMgd2hlbiByZXF1ZXN0aW5nIGEgdG9rZW4uIE9ubHkgdXNlZCBpbiBjb25maWRlbnRpYWwgY2xpZW50IGFwcGxpY2F0aW9ucy4gUmVxdWlyZXMgaGV4IGVuY29kZWQgWC41MDkgU0hBLTEgb3IgU0hBLTI1NiB0aHVtYnByaW50IG9mIHRoZSBjZXJ0aWZpY2F0ZSwgYW5kIHRoZSBQRU0gZW5jb2RlZCBwcml2YXRlIGtleSAoc3RyaW5nIHNob3VsZCBjb250YWluIC0tLS0tQkVHSU4gUFJJVkFURSBLRVktLS0tLSAuLi4gLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLSApXG4gKiAtIHByb3RvY29sTW9kZSAgICAgICAgICAgLSBFbnVtIHRoYXQgcmVwcmVzZW50cyB0aGUgcHJvdG9jb2wgdGhhdCBtc2FsIGZvbGxvd3MuIFVzZWQgZm9yIGNvbmZpZ3VyaW5nIHByb3BlciBlbmRwb2ludHMuXG4gKiAtIHNraXBBdXRob3JpdHlNZXRhZGF0YUNhY2hlIC0gQSBmbGFnIHRvIGNob29zZSB3aGV0aGVyIHRvIHVzZSBvciBub3QgdXNlIHRoZSBsb2NhbCBtZXRhZGF0YSBjYWNoZSBkdXJpbmcgYXV0aG9yaXR5IGluaXRpYWxpemF0aW9uLiBEZWZhdWx0cyB0byBmYWxzZS5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHR5cGUgTm9kZUF1dGhPcHRpb25zID0ge1xuICAgIGNsaWVudElkOiBzdHJpbmc7XG4gICAgYXV0aG9yaXR5Pzogc3RyaW5nO1xuICAgIGNsaWVudFNlY3JldD86IHN0cmluZztcbiAgICBjbGllbnRBc3NlcnRpb24/OiBzdHJpbmcgfCBDbGllbnRBc3NlcnRpb25DYWxsYmFjaztcbiAgICBjbGllbnRDZXJ0aWZpY2F0ZT86IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXByZWNhdGVkIFVzZSB0aHVtYnByaW50U2hhMiBwcm9wZXJ0eSBpbnN0ZWFkLiBUaHVtYnByaW50IG5lZWRzIHRvIGJlIGNvbXB1dGVkIHdpdGggU0hBLTI1NiBhbGdvcml0aG0uXG4gICAgICAgICAqIFNIQS0xIGlzIG9ubHkgbmVlZGVkIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSB3aXRoIG9sZGVyIHZlcnNpb25zIG9mIEFERlMuXG4gICAgICAgICAqL1xuICAgICAgICB0aHVtYnByaW50Pzogc3RyaW5nO1xuICAgICAgICB0aHVtYnByaW50U2hhMjU2Pzogc3RyaW5nO1xuICAgICAgICBwcml2YXRlS2V5OiBzdHJpbmc7XG4gICAgICAgIHg1Yz86IHN0cmluZztcbiAgICB9O1xuICAgIGtub3duQXV0aG9yaXRpZXM/OiBBcnJheTxzdHJpbmc+O1xuICAgIGNsb3VkRGlzY292ZXJ5TWV0YWRhdGE/OiBzdHJpbmc7XG4gICAgYXV0aG9yaXR5TWV0YWRhdGE/OiBzdHJpbmc7XG4gICAgY2xpZW50Q2FwYWJpbGl0aWVzPzogQXJyYXk8c3RyaW5nPjtcbiAgICBwcm90b2NvbE1vZGU/OiBQcm90b2NvbE1vZGU7XG4gICAgYXp1cmVDbG91ZE9wdGlvbnM/OiBBenVyZUNsb3VkT3B0aW9ucztcbiAgICBza2lwQXV0aG9yaXR5TWV0YWRhdGFDYWNoZT86IGJvb2xlYW47XG59O1xuXG4vKipcbiAqIFVzZSB0aGlzIHRvIGNvbmZpZ3VyZSB0aGUgYmVsb3cgY2FjaGUgY29uZmlndXJhdGlvbiBvcHRpb25zOlxuICpcbiAqIC0gY2FjaGVQbHVnaW4gICAtIFBsdWdpbiBmb3IgcmVhZGluZyBhbmQgd3JpdGluZyB0b2tlbiBjYWNoZSB0byBkaXNrLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgdHlwZSBDYWNoZU9wdGlvbnMgPSB7XG4gICAgY2FjaGVQbHVnaW4/OiBJQ2FjaGVQbHVnaW47XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgY2xhaW1zLWJhc2VkLWNhY2hpbmcgZnVuY3Rpb25hbGl0eSB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgdmVyc2lvbiBvZiBNU0FMSlNcbiAgICAgKi9cbiAgICBjbGFpbXNCYXNlZENhY2hpbmdFbmFibGVkPzogYm9vbGVhbjtcbn07XG5cbi8qKlxuICogVXNlIHRoaXMgdG8gY29uZmlndXJlIHRoZSBiZWxvdyBicm9rZXIgb3B0aW9uczpcbiAqIC0gbmF0aXZlQnJva2VyUGx1Z2luIC0gTmF0aXZlIGJyb2tlciBpbXBsZW1lbnRhdGlvbiAoc2hvdWxkIGJlIGltcG9ydGVkIGZyb20gbXNhbC1ub2RlLWV4dGVuc2lvbnMpXG4gKlxuICogTm90ZTogVGhlc2Ugb3B0aW9ucyBhcmUgb25seSBhdmFpbGFibGUgZm9yIFB1YmxpY0NsaWVudEFwcGxpY2F0aW9ucyB1c2luZyB0aGUgQXV0aG9yaXphdGlvbiBDb2RlIEZsb3dcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHR5cGUgQnJva2VyT3B0aW9ucyA9IHtcbiAgICBuYXRpdmVCcm9rZXJQbHVnaW4/OiBJTmF0aXZlQnJva2VyUGx1Z2luO1xufTtcblxuLyoqXG4gKiBUeXBlIGZvciBjb25maWd1cmluZyBsb2dnZXIgYW5kIGh0dHAgY2xpZW50IG9wdGlvbnNcbiAqXG4gKiAtIGxvZ2dlciAgICAgICAgICAgICAgICAgICAgICAgLSBVc2VkIHRvIGluaXRpYWxpemUgdGhlIExvZ2dlciBvYmplY3Q7IFRPRE86IEV4cGFuZCBvbiBsb2dnZXIgZGV0YWlscyBvciBsaW5rIHRvIHRoZSBkb2N1bWVudGF0aW9uIG9uIGxvZ2dlclxuICogLSBuZXR3b3JrQ2xpZW50ICAgICAgICAgICAgICAgIC0gSHR0cCBjbGllbnQgdXNlZCBmb3IgYWxsIGh0dHAgZ2V0IGFuZCBwb3N0IGNhbGxzLiBEZWZhdWx0cyB0byB1c2luZyBNU0FMJ3MgZGVmYXVsdCBodHRwIGNsaWVudC5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHR5cGUgTm9kZVN5c3RlbU9wdGlvbnMgPSB7XG4gICAgbG9nZ2VyT3B0aW9ucz86IExvZ2dlck9wdGlvbnM7XG4gICAgbmV0d29ya0NsaWVudD86IElOZXR3b3JrTW9kdWxlO1xuICAgIHByb3h5VXJsPzogc3RyaW5nO1xuICAgIGN1c3RvbUFnZW50T3B0aW9ucz86IGh0dHAuQWdlbnRPcHRpb25zIHwgaHR0cHMuQWdlbnRPcHRpb25zO1xuICAgIGRpc2FibGVJbnRlcm5hbFJldHJpZXM/OiBib29sZWFuO1xufTtcblxuLyoqIEBwdWJsaWMgKi9cbmV4cG9ydCB0eXBlIE5vZGVUZWxlbWV0cnlPcHRpb25zID0ge1xuICAgIGFwcGxpY2F0aW9uPzogQXBwbGljYXRpb25UZWxlbWV0cnk7XG59O1xuXG4vKipcbiAqIFVzZSB0aGUgY29uZmlndXJhdGlvbiBvYmplY3QgdG8gY29uZmlndXJlIE1TQUwgYW5kIGluaXRpYWxpemUgdGhlIGNsaWVudCBhcHBsaWNhdGlvbiBvYmplY3RcbiAqXG4gKiAtIGF1dGg6IHRoaXMgaXMgd2hlcmUgeW91IGNvbmZpZ3VyZSBhdXRoIGVsZW1lbnRzIGxpa2UgY2xpZW50SUQsIGF1dGhvcml0eSB1c2VkIGZvciBhdXRoZW50aWNhdGluZyBhZ2FpbnN0IHRoZSBNaWNyb3NvZnQgSWRlbnRpdHkgUGxhdGZvcm1cbiAqIC0gYnJva2VyOiB0aGlzIGlzIHdoZXJlIHlvdSBjb25maWd1cmUgYnJva2VyIG9wdGlvbnNcbiAqIC0gY2FjaGU6IHRoaXMgaXMgd2hlcmUgeW91IGNvbmZpZ3VyZSBjYWNoZSBsb2NhdGlvblxuICogLSBzeXN0ZW06IHRoaXMgaXMgd2hlcmUgeW91IGNhbiBjb25maWd1cmUgdGhlIG5ldHdvcmsgY2xpZW50LCBsb2dnZXJcbiAqIC0gdGVsZW1ldHJ5OiB0aGlzIGlzIHdoZXJlIHlvdSBjYW4gY29uZmlndXJlIHRlbGVtZXRyeSBvcHRpb25zXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCB0eXBlIENvbmZpZ3VyYXRpb24gPSB7XG4gICAgYXV0aDogTm9kZUF1dGhPcHRpb25zO1xuICAgIGJyb2tlcj86IEJyb2tlck9wdGlvbnM7XG4gICAgY2FjaGU/OiBDYWNoZU9wdGlvbnM7XG4gICAgc3lzdGVtPzogTm9kZVN5c3RlbU9wdGlvbnM7XG4gICAgdGVsZW1ldHJ5PzogTm9kZVRlbGVtZXRyeU9wdGlvbnM7XG59O1xuXG4vKiogQHB1YmxpYyAqL1xuZXhwb3J0IHR5cGUgTWFuYWdlZElkZW50aXR5SWRQYXJhbXMgPSB7XG4gICAgdXNlckFzc2lnbmVkQ2xpZW50SWQ/OiBzdHJpbmc7XG4gICAgdXNlckFzc2lnbmVkUmVzb3VyY2VJZD86IHN0cmluZztcbiAgICB1c2VyQXNzaWduZWRPYmplY3RJZD86IHN0cmluZztcbn07XG5cbi8qKiBAcHVibGljICovXG5leHBvcnQgdHlwZSBNYW5hZ2VkSWRlbnRpdHlDb25maWd1cmF0aW9uID0ge1xuICAgIG1hbmFnZWRJZGVudGl0eUlkUGFyYW1zPzogTWFuYWdlZElkZW50aXR5SWRQYXJhbXM7XG4gICAgc3lzdGVtPzogTm9kZVN5c3RlbU9wdGlvbnM7XG59O1xuXG5jb25zdCBERUZBVUxUX0FVVEhfT1BUSU9OUzogUmVxdWlyZWQ8Tm9kZUF1dGhPcHRpb25zPiA9IHtcbiAgICBjbGllbnRJZDogQ29uc3RhbnRzLkVNUFRZX1NUUklORyxcbiAgICBhdXRob3JpdHk6IENvbnN0YW50cy5ERUZBVUxUX0FVVEhPUklUWSxcbiAgICBjbGllbnRTZWNyZXQ6IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgY2xpZW50QXNzZXJ0aW9uOiBDb25zdGFudHMuRU1QVFlfU1RSSU5HLFxuICAgIGNsaWVudENlcnRpZmljYXRlOiB7XG4gICAgICAgIHRodW1icHJpbnQ6IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgICAgIHRodW1icHJpbnRTaGEyNTY6IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgICAgIHByaXZhdGVLZXk6IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgICAgIHg1YzogQ29uc3RhbnRzLkVNUFRZX1NUUklORyxcbiAgICB9LFxuICAgIGtub3duQXV0aG9yaXRpZXM6IFtdLFxuICAgIGNsb3VkRGlzY292ZXJ5TWV0YWRhdGE6IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgYXV0aG9yaXR5TWV0YWRhdGE6IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgY2xpZW50Q2FwYWJpbGl0aWVzOiBbXSxcbiAgICBwcm90b2NvbE1vZGU6IFByb3RvY29sTW9kZS5BQUQsXG4gICAgYXp1cmVDbG91ZE9wdGlvbnM6IHtcbiAgICAgICAgYXp1cmVDbG91ZEluc3RhbmNlOiBBenVyZUNsb3VkSW5zdGFuY2UuTm9uZSxcbiAgICAgICAgdGVuYW50OiBDb25zdGFudHMuRU1QVFlfU1RSSU5HLFxuICAgIH0sXG4gICAgc2tpcEF1dGhvcml0eU1ldGFkYXRhQ2FjaGU6IGZhbHNlLFxufTtcblxuY29uc3QgREVGQVVMVF9DQUNIRV9PUFRJT05TOiBDYWNoZU9wdGlvbnMgPSB7XG4gICAgY2xhaW1zQmFzZWRDYWNoaW5nRW5hYmxlZDogZmFsc2UsXG59O1xuXG5jb25zdCBERUZBVUxUX0xPR0dFUl9PUFRJT05TOiBMb2dnZXJPcHRpb25zID0ge1xuICAgIGxvZ2dlckNhbGxiYWNrOiAoKTogdm9pZCA9PiB7XG4gICAgICAgIC8vIGFsbG93IHVzZXJzIHRvIG5vdCBzZXQgbG9nZ2VyIGNhbGwgYmFja1xuICAgIH0sXG4gICAgcGlpTG9nZ2luZ0VuYWJsZWQ6IGZhbHNlLFxuICAgIGxvZ0xldmVsOiBMb2dMZXZlbC5JbmZvLFxufTtcblxuY29uc3QgREVGQVVMVF9TWVNURU1fT1BUSU9OUzogUmVxdWlyZWQ8Tm9kZVN5c3RlbU9wdGlvbnM+ID0ge1xuICAgIGxvZ2dlck9wdGlvbnM6IERFRkFVTFRfTE9HR0VSX09QVElPTlMsXG4gICAgbmV0d29ya0NsaWVudDogbmV3IEh0dHBDbGllbnQoKSxcbiAgICBwcm94eVVybDogQ29uc3RhbnRzLkVNUFRZX1NUUklORyxcbiAgICBjdXN0b21BZ2VudE9wdGlvbnM6IHt9IGFzIGh0dHAuQWdlbnRPcHRpb25zIHwgaHR0cHMuQWdlbnRPcHRpb25zLFxuICAgIGRpc2FibGVJbnRlcm5hbFJldHJpZXM6IGZhbHNlLFxufTtcblxuY29uc3QgREVGQVVMVF9URUxFTUVUUllfT1BUSU9OUzogUmVxdWlyZWQ8Tm9kZVRlbGVtZXRyeU9wdGlvbnM+ID0ge1xuICAgIGFwcGxpY2F0aW9uOiB7XG4gICAgICAgIGFwcE5hbWU6IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgICAgIGFwcFZlcnNpb246IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgfSxcbn07XG5cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB0eXBlIE5vZGVDb25maWd1cmF0aW9uID0ge1xuICAgIGF1dGg6IFJlcXVpcmVkPE5vZGVBdXRoT3B0aW9ucz47XG4gICAgYnJva2VyOiBCcm9rZXJPcHRpb25zO1xuICAgIGNhY2hlOiBDYWNoZU9wdGlvbnM7XG4gICAgc3lzdGVtOiBSZXF1aXJlZDxOb2RlU3lzdGVtT3B0aW9ucz47XG4gICAgdGVsZW1ldHJ5OiBSZXF1aXJlZDxOb2RlVGVsZW1ldHJ5T3B0aW9ucz47XG59O1xuXG4vKipcbiAqIFNldHMgdGhlIGRlZmF1bHQgb3B0aW9ucyB3aGVuIG5vdCBleHBsaWNpdGx5IGNvbmZpZ3VyZWQgZnJvbSBhcHAgZGV2ZWxvcGVyXG4gKlxuICogQHBhcmFtIGF1dGggLSBBdXRoZW50aWNhdGlvbiBvcHRpb25zXG4gKiBAcGFyYW0gY2FjaGUgLSBDYWNoZSBvcHRpb25zXG4gKiBAcGFyYW0gc3lzdGVtIC0gU3lzdGVtIG9wdGlvbnNcbiAqIEBwYXJhbSB0ZWxlbWV0cnkgLSBUZWxlbWV0cnkgb3B0aW9uc1xuICpcbiAqIEByZXR1cm5zIENvbmZpZ3VyYXRpb25cbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRBcHBDb25maWd1cmF0aW9uKHtcbiAgICBhdXRoLFxuICAgIGJyb2tlcixcbiAgICBjYWNoZSxcbiAgICBzeXN0ZW0sXG4gICAgdGVsZW1ldHJ5LFxufTogQ29uZmlndXJhdGlvbik6IE5vZGVDb25maWd1cmF0aW9uIHtcbiAgICBjb25zdCBzeXN0ZW1PcHRpb25zOiBSZXF1aXJlZDxOb2RlU3lzdGVtT3B0aW9ucz4gPSB7XG4gICAgICAgIC4uLkRFRkFVTFRfU1lTVEVNX09QVElPTlMsXG4gICAgICAgIG5ldHdvcmtDbGllbnQ6IG5ldyBIdHRwQ2xpZW50KFxuICAgICAgICAgICAgc3lzdGVtPy5wcm94eVVybCxcbiAgICAgICAgICAgIHN5c3RlbT8uY3VzdG9tQWdlbnRPcHRpb25zIGFzIGh0dHAuQWdlbnRPcHRpb25zIHwgaHR0cHMuQWdlbnRPcHRpb25zXG4gICAgICAgICksXG4gICAgICAgIGxvZ2dlck9wdGlvbnM6IHN5c3RlbT8ubG9nZ2VyT3B0aW9ucyB8fCBERUZBVUxUX0xPR0dFUl9PUFRJT05TLFxuICAgICAgICBkaXNhYmxlSW50ZXJuYWxSZXRyaWVzOiBzeXN0ZW0/LmRpc2FibGVJbnRlcm5hbFJldHJpZXMgfHwgZmFsc2UsXG4gICAgfTtcblxuICAgIC8vIGlmIGNsaWVudCBjZXJ0aWZpY2F0ZSB3YXMgcHJvdmlkZWQsIGVuc3VyZSB0aGF0IGF0IGxlYXN0IG9uZSBvZiB0aGUgU0hBLTEgb3IgU0hBLTI1NiB0aHVtYnByaW50cyB3ZXJlIHByb3ZpZGVkXG4gICAgaWYgKFxuICAgICAgICAhIWF1dGguY2xpZW50Q2VydGlmaWNhdGUgJiZcbiAgICAgICAgISEhYXV0aC5jbGllbnRDZXJ0aWZpY2F0ZS50aHVtYnByaW50ICYmXG4gICAgICAgICEhIWF1dGguY2xpZW50Q2VydGlmaWNhdGUudGh1bWJwcmludFNoYTI1NlxuICAgICkge1xuICAgICAgICB0aHJvdyBOb2RlQXV0aEVycm9yLmNyZWF0ZVN0YXRlTm90Rm91bmRFcnJvcigpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGF1dGg6IHsgLi4uREVGQVVMVF9BVVRIX09QVElPTlMsIC4uLmF1dGggfSxcbiAgICAgICAgYnJva2VyOiB7IC4uLmJyb2tlciB9LFxuICAgICAgICBjYWNoZTogeyAuLi5ERUZBVUxUX0NBQ0hFX09QVElPTlMsIC4uLmNhY2hlIH0sXG4gICAgICAgIHN5c3RlbTogeyAuLi5zeXN0ZW1PcHRpb25zLCAuLi5zeXN0ZW0gfSxcbiAgICAgICAgdGVsZW1ldHJ5OiB7IC4uLkRFRkFVTFRfVEVMRU1FVFJZX09QVElPTlMsIC4uLnRlbGVtZXRyeSB9LFxuICAgIH07XG59XG5cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB0eXBlIE1hbmFnZWRJZGVudGl0eU5vZGVDb25maWd1cmF0aW9uID0ge1xuICAgIG1hbmFnZWRJZGVudGl0eUlkOiBNYW5hZ2VkSWRlbnRpdHlJZDtcbiAgICBzeXN0ZW06IFJlcXVpcmVkPFxuICAgICAgICBQaWNrPE5vZGVTeXN0ZW1PcHRpb25zLCBcImxvZ2dlck9wdGlvbnNcIiB8IFwibmV0d29ya0NsaWVudFwiPlxuICAgID47XG4gICAgZGlzYWJsZUludGVybmFsUmV0cmllczogYm9vbGVhbjtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBidWlsZE1hbmFnZWRJZGVudGl0eUNvbmZpZ3VyYXRpb24oe1xuICAgIG1hbmFnZWRJZGVudGl0eUlkUGFyYW1zLFxuICAgIHN5c3RlbSxcbn06IE1hbmFnZWRJZGVudGl0eUNvbmZpZ3VyYXRpb24pOiBNYW5hZ2VkSWRlbnRpdHlOb2RlQ29uZmlndXJhdGlvbiB7XG4gICAgY29uc3QgbWFuYWdlZElkZW50aXR5SWQ6IE1hbmFnZWRJZGVudGl0eUlkID0gbmV3IE1hbmFnZWRJZGVudGl0eUlkKFxuICAgICAgICBtYW5hZ2VkSWRlbnRpdHlJZFBhcmFtc1xuICAgICk7XG5cbiAgICBjb25zdCBsb2dnZXJPcHRpb25zOiBMb2dnZXJPcHRpb25zID1cbiAgICAgICAgc3lzdGVtPy5sb2dnZXJPcHRpb25zIHx8IERFRkFVTFRfTE9HR0VSX09QVElPTlM7XG5cbiAgICBsZXQgbmV0d29ya0NsaWVudDogSU5ldHdvcmtNb2R1bGU7XG4gICAgLy8gdXNlIGRldmVsb3BlciBwcm92aWRlZCBuZXR3b3JrIGNsaWVudCBpZiBwYXNzZWQgaW5cbiAgICBpZiAoc3lzdGVtPy5uZXR3b3JrQ2xpZW50KSB7XG4gICAgICAgIG5ldHdvcmtDbGllbnQgPSBzeXN0ZW0ubmV0d29ya0NsaWVudDtcbiAgICAgICAgLy8gb3RoZXJ3aXNlLCBjcmVhdGUgYSBuZXcgb25lXG4gICAgfSBlbHNlIHtcbiAgICAgICAgbmV0d29ya0NsaWVudCA9IG5ldyBIdHRwQ2xpZW50KFxuICAgICAgICAgICAgc3lzdGVtPy5wcm94eVVybCxcbiAgICAgICAgICAgIHN5c3RlbT8uY3VzdG9tQWdlbnRPcHRpb25zIGFzIGh0dHAuQWdlbnRPcHRpb25zIHwgaHR0cHMuQWdlbnRPcHRpb25zXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWFuYWdlZElkZW50aXR5SWQ6IG1hbmFnZWRJZGVudGl0eUlkLFxuICAgICAgICBzeXN0ZW06IHtcbiAgICAgICAgICAgIGxvZ2dlck9wdGlvbnMsXG4gICAgICAgICAgICBuZXR3b3JrQ2xpZW50LFxuICAgICAgICB9LFxuICAgICAgICBkaXNhYmxlSW50ZXJuYWxSZXRyaWVzOiBzeXN0ZW0/LmRpc2FibGVJbnRlcm5hbFJldHJpZXMgfHwgZmFsc2UsXG4gICAgfTtcbn1cbiIsICIvLyBVbmlxdWUgSUQgY3JlYXRpb24gcmVxdWlyZXMgYSBoaWdoIHF1YWxpdHkgcmFuZG9tICMgZ2VuZXJhdG9yLiBJbiB0aGUgYnJvd3NlciB3ZSB0aGVyZWZvcmVcbi8vIHJlcXVpcmUgdGhlIGNyeXB0byBBUEkgYW5kIGRvIG5vdCBzdXBwb3J0IGJ1aWx0LWluIGZhbGxiYWNrIHRvIGxvd2VyIHF1YWxpdHkgcmFuZG9tIG51bWJlclxuLy8gZ2VuZXJhdG9ycyAobGlrZSBNYXRoLnJhbmRvbSgpKS5cbnZhciBnZXRSYW5kb21WYWx1ZXM7XG52YXIgcm5kczggPSBuZXcgVWludDhBcnJheSgxNik7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBybmcoKSB7XG4gIC8vIGxhenkgbG9hZCBzbyB0aGF0IGVudmlyb25tZW50cyB0aGF0IG5lZWQgdG8gcG9seWZpbGwgaGF2ZSBhIGNoYW5jZSB0byBkbyBzb1xuICBpZiAoIWdldFJhbmRvbVZhbHVlcykge1xuICAgIC8vIGdldFJhbmRvbVZhbHVlcyBuZWVkcyB0byBiZSBpbnZva2VkIGluIGEgY29udGV4dCB3aGVyZSBcInRoaXNcIiBpcyBhIENyeXB0byBpbXBsZW1lbnRhdGlvbi4gQWxzbyxcbiAgICAvLyBmaW5kIHRoZSBjb21wbGV0ZSBpbXBsZW1lbnRhdGlvbiBvZiBjcnlwdG8gKG1zQ3J5cHRvKSBvbiBJRTExLlxuICAgIGdldFJhbmRvbVZhbHVlcyA9IHR5cGVvZiBjcnlwdG8gIT09ICd1bmRlZmluZWQnICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKGNyeXB0bykgfHwgdHlwZW9mIG1zQ3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzID09PSAnZnVuY3Rpb24nICYmIG1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKG1zQ3J5cHRvKTtcblxuICAgIGlmICghZ2V0UmFuZG9tVmFsdWVzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NyeXB0by5nZXRSYW5kb21WYWx1ZXMoKSBub3Qgc3VwcG9ydGVkLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkI2dldHJhbmRvbXZhbHVlcy1ub3Qtc3VwcG9ydGVkJyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGdldFJhbmRvbVZhbHVlcyhybmRzOCk7XG59IiwgImV4cG9ydCBkZWZhdWx0IC9eKD86WzAtOWEtZl17OH0tWzAtOWEtZl17NH0tWzEtNV1bMC05YS1mXXszfS1bODlhYl1bMC05YS1mXXszfS1bMC05YS1mXXsxMn18MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwKSQvaTsiLCAiaW1wb3J0IFJFR0VYIGZyb20gJy4vcmVnZXguanMnO1xuXG5mdW5jdGlvbiB2YWxpZGF0ZSh1dWlkKSB7XG4gIHJldHVybiB0eXBlb2YgdXVpZCA9PT0gJ3N0cmluZycgJiYgUkVHRVgudGVzdCh1dWlkKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdmFsaWRhdGU7IiwgImltcG9ydCB2YWxpZGF0ZSBmcm9tICcuL3ZhbGlkYXRlLmpzJztcbi8qKlxuICogQ29udmVydCBhcnJheSBvZiAxNiBieXRlIHZhbHVlcyB0byBVVUlEIHN0cmluZyBmb3JtYXQgb2YgdGhlIGZvcm06XG4gKiBYWFhYWFhYWC1YWFhYLVhYWFgtWFhYWC1YWFhYWFhYWFhYWFhcbiAqL1xuXG52YXIgYnl0ZVRvSGV4ID0gW107XG5cbmZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyArK2kpIHtcbiAgYnl0ZVRvSGV4LnB1c2goKGkgKyAweDEwMCkudG9TdHJpbmcoMTYpLnN1YnN0cigxKSk7XG59XG5cbmZ1bmN0aW9uIHN0cmluZ2lmeShhcnIpIHtcbiAgdmFyIG9mZnNldCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMDtcbiAgLy8gTm90ZTogQmUgY2FyZWZ1bCBlZGl0aW5nIHRoaXMgY29kZSEgIEl0J3MgYmVlbiB0dW5lZCBmb3IgcGVyZm9ybWFuY2VcbiAgLy8gYW5kIHdvcmtzIGluIHdheXMgeW91IG1heSBub3QgZXhwZWN0LiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkL3B1bGwvNDM0XG4gIHZhciB1dWlkID0gKGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDJdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgM11dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA0XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDVdXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA3XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDhdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgOV1dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMV1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxM11dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxNF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxNV1dKS50b0xvd2VyQ2FzZSgpOyAvLyBDb25zaXN0ZW5jeSBjaGVjayBmb3IgdmFsaWQgVVVJRC4gIElmIHRoaXMgdGhyb3dzLCBpdCdzIGxpa2VseSBkdWUgdG8gb25lXG4gIC8vIG9mIHRoZSBmb2xsb3dpbmc6XG4gIC8vIC0gT25lIG9yIG1vcmUgaW5wdXQgYXJyYXkgdmFsdWVzIGRvbid0IG1hcCB0byBhIGhleCBvY3RldCAobGVhZGluZyB0b1xuICAvLyBcInVuZGVmaW5lZFwiIGluIHRoZSB1dWlkKVxuICAvLyAtIEludmFsaWQgaW5wdXQgdmFsdWVzIGZvciB0aGUgUkZDIGB2ZXJzaW9uYCBvciBgdmFyaWFudGAgZmllbGRzXG5cbiAgaWYgKCF2YWxpZGF0ZSh1dWlkKSkge1xuICAgIHRocm93IFR5cGVFcnJvcignU3RyaW5naWZpZWQgVVVJRCBpcyBpbnZhbGlkJyk7XG4gIH1cblxuICByZXR1cm4gdXVpZDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgc3RyaW5naWZ5OyIsICJpbXBvcnQgcm5nIGZyb20gJy4vcm5nLmpzJztcbmltcG9ydCBzdHJpbmdpZnkgZnJvbSAnLi9zdHJpbmdpZnkuanMnO1xuXG5mdW5jdGlvbiB2NChvcHRpb25zLCBidWYsIG9mZnNldCkge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIHJuZHMgPSBvcHRpb25zLnJhbmRvbSB8fCAob3B0aW9ucy5ybmcgfHwgcm5nKSgpOyAvLyBQZXIgNC40LCBzZXQgYml0cyBmb3IgdmVyc2lvbiBhbmQgYGNsb2NrX3NlcV9oaV9hbmRfcmVzZXJ2ZWRgXG5cbiAgcm5kc1s2XSA9IHJuZHNbNl0gJiAweDBmIHwgMHg0MDtcbiAgcm5kc1s4XSA9IHJuZHNbOF0gJiAweDNmIHwgMHg4MDsgLy8gQ29weSBieXRlcyB0byBidWZmZXIsIGlmIHByb3ZpZGVkXG5cbiAgaWYgKGJ1Zikge1xuICAgIG9mZnNldCA9IG9mZnNldCB8fCAwO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxNjsgKytpKSB7XG4gICAgICBidWZbb2Zmc2V0ICsgaV0gPSBybmRzW2ldO1xuICAgIH1cblxuICAgIHJldHVybiBidWY7XG4gIH1cblxuICByZXR1cm4gc3RyaW5naWZ5KHJuZHMpO1xufVxuXG5leHBvcnQgZGVmYXVsdCB2NDsiLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IElHdWlkR2VuZXJhdG9yIH0gZnJvbSBcIkBhenVyZS9tc2FsLWNvbW1vbi9ub2RlXCI7XG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tIFwidXVpZFwiO1xuXG5leHBvcnQgY2xhc3MgR3VpZEdlbmVyYXRvciBpbXBsZW1lbnRzIElHdWlkR2VuZXJhdG9yIHtcbiAgICAvKipcbiAgICAgKlxuICAgICAqIFJGQzQxMjI6IFRoZSB2ZXJzaW9uIDQgVVVJRCBpcyBtZWFudCBmb3IgZ2VuZXJhdGluZyBVVUlEcyBmcm9tIHRydWx5LXJhbmRvbSBvciBwc2V1ZG8tcmFuZG9tIG51bWJlcnMuXG4gICAgICogdXVpZHY0IGdlbmVyYXRlcyBndWlkcyBmcm9tIGNyeXBydG9ncmFwaGljYWxseS1zdHJpbmcgcmFuZG9tXG4gICAgICovXG4gICAgZ2VuZXJhdGVHdWlkKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB1dWlkdjQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiB2ZXJpZmllcyBpZiBhIHN0cmluZyBpcyAgR1VJRFxuICAgICAqIEBwYXJhbSBndWlkXG4gICAgICovXG4gICAgaXNHdWlkKGd1aWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCByZWdleEd1aWQgPVxuICAgICAgICAgICAgL15bMC05YS1mXXs4fS1bMC05YS1mXXs0fS1bMS01XVswLTlhLWZdezN9LVs4OWFiXVswLTlhLWZdezN9LVswLTlhLWZdezEyfSQvaTtcbiAgICAgICAgcmV0dXJuIHJlZ2V4R3VpZC50ZXN0KGd1aWQpO1xuICAgIH1cbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQ29uc3RhbnRzIH0gZnJvbSBcIkBhenVyZS9tc2FsLWNvbW1vbi9ub2RlXCI7XG5cbmV4cG9ydCBjbGFzcyBFbmNvZGluZ1V0aWxzIHtcbiAgICAvKipcbiAgICAgKiAndXRmOCc6IE11bHRpYnl0ZSBlbmNvZGVkIFVuaWNvZGUgY2hhcmFjdGVycy4gTWFueSB3ZWIgcGFnZXMgYW5kIG90aGVyIGRvY3VtZW50IGZvcm1hdHMgdXNlIFVURi04LlxuICAgICAqICdiYXNlNjQnOiBCYXNlNjQgZW5jb2RpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3RyIHRleHRcbiAgICAgKi9cbiAgICBzdGF0aWMgYmFzZTY0RW5jb2RlKHN0cjogc3RyaW5nLCBlbmNvZGluZz86IEJ1ZmZlckVuY29kaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIEJ1ZmZlci5mcm9tKHN0ciwgZW5jb2RpbmcpLnRvU3RyaW5nKFwiYmFzZTY0XCIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGVuY29kZSBhIFVSTFxuICAgICAqIEBwYXJhbSBzdHJcbiAgICAgKi9cbiAgICBzdGF0aWMgYmFzZTY0RW5jb2RlVXJsKHN0cjogc3RyaW5nLCBlbmNvZGluZz86IEJ1ZmZlckVuY29kaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIEVuY29kaW5nVXRpbHMuYmFzZTY0RW5jb2RlKHN0ciwgZW5jb2RpbmcpXG4gICAgICAgICAgICAucmVwbGFjZSgvPS9nLCBDb25zdGFudHMuRU1QVFlfU1RSSU5HKVxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcKy9nLCBcIi1cIilcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXC8vZywgXCJfXCIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqICd1dGY4JzogTXVsdGlieXRlIGVuY29kZWQgVW5pY29kZSBjaGFyYWN0ZXJzLiBNYW55IHdlYiBwYWdlcyBhbmQgb3RoZXIgZG9jdW1lbnQgZm9ybWF0cyB1c2UgVVRGLTguXG4gICAgICogJ2Jhc2U2NCc6IEJhc2U2NCBlbmNvZGluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiYXNlNjRTdHIgQmFzZTY0IGVuY29kZWQgdGV4dFxuICAgICAqL1xuICAgIHN0YXRpYyBiYXNlNjREZWNvZGUoYmFzZTY0U3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gQnVmZmVyLmZyb20oYmFzZTY0U3RyLCBcImJhc2U2NFwiKS50b1N0cmluZyhcInV0ZjhcIik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIGJhc2U2NFN0ciBCYXNlNjQgZW5jb2RlZCBVcmxcbiAgICAgKi9cbiAgICBzdGF0aWMgYmFzZTY0RGVjb2RlVXJsKGJhc2U2NFN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHN0ciA9IGJhc2U2NFN0ci5yZXBsYWNlKC8tL2csIFwiK1wiKS5yZXBsYWNlKC9fL2csIFwiL1wiKTtcbiAgICAgICAgd2hpbGUgKHN0ci5sZW5ndGggJSA0KSB7XG4gICAgICAgICAgICBzdHIgKz0gXCI9XCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEVuY29kaW5nVXRpbHMuYmFzZTY0RGVjb2RlKHN0cik7XG4gICAgfVxufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBIYXNoIH0gZnJvbSBcIi4uL3V0aWxzL0NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IGNyeXB0byBmcm9tIFwiY3J5cHRvXCI7XG5cbmV4cG9ydCBjbGFzcyBIYXNoVXRpbHMge1xuICAgIC8qKlxuICAgICAqIGdlbmVyYXRlICdTSEEyNTYnIGhhc2hcbiAgICAgKiBAcGFyYW0gYnVmZmVyXG4gICAgICovXG4gICAgc2hhMjU2KGJ1ZmZlcjogc3RyaW5nKTogQnVmZmVyIHtcbiAgICAgICAgcmV0dXJuIGNyeXB0by5jcmVhdGVIYXNoKEhhc2guU0hBMjU2KS51cGRhdGUoYnVmZmVyKS5kaWdlc3QoKTtcbiAgICB9XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENvbnN0YW50cywgUGtjZUNvZGVzIH0gZnJvbSBcIkBhenVyZS9tc2FsLWNvbW1vbi9ub2RlXCI7XG5pbXBvcnQgeyBDaGFyU2V0LCBSQU5ET01fT0NURVRfU0laRSB9IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcbmltcG9ydCB7IEVuY29kaW5nVXRpbHMgfSBmcm9tIFwiLi4vdXRpbHMvRW5jb2RpbmdVdGlscy5qc1wiO1xuaW1wb3J0IHsgSGFzaFV0aWxzIH0gZnJvbSBcIi4vSGFzaFV0aWxzLmpzXCI7XG5pbXBvcnQgY3J5cHRvIGZyb20gXCJjcnlwdG9cIjtcblxuLyoqXG4gKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNzYzNiNwYWdlLThcbiAqL1xuZXhwb3J0IGNsYXNzIFBrY2VHZW5lcmF0b3Ige1xuICAgIHByaXZhdGUgaGFzaFV0aWxzOiBIYXNoVXRpbHM7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5oYXNoVXRpbHMgPSBuZXcgSGFzaFV0aWxzKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGdlbmVyYXRlcyB0aGUgY29kZVZlcmZpZXIgYW5kIHRoZSBjaGFsbGVuZ2UgZnJvbSB0aGUgY29kZVZlcmZpZXJcbiAgICAgKiByZWZlcmVuY2U6IGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM3NjM2I3NlY3Rpb24tNC4xIGFuZCBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNzYzNiNzZWN0aW9uLTQuMlxuICAgICAqL1xuICAgIGFzeW5jIGdlbmVyYXRlUGtjZUNvZGVzKCk6IFByb21pc2U8UGtjZUNvZGVzPiB7XG4gICAgICAgIGNvbnN0IHZlcmlmaWVyID0gdGhpcy5nZW5lcmF0ZUNvZGVWZXJpZmllcigpO1xuICAgICAgICBjb25zdCBjaGFsbGVuZ2UgPSB0aGlzLmdlbmVyYXRlQ29kZUNoYWxsZW5nZUZyb21WZXJpZmllcih2ZXJpZmllcik7XG4gICAgICAgIHJldHVybiB7IHZlcmlmaWVyLCBjaGFsbGVuZ2UgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnZW5lcmF0ZXMgdGhlIGNvZGVWZXJmaWVyOyByZWZlcmVuY2U6IGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM3NjM2I3NlY3Rpb24tNC4xXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZUNvZGVWZXJpZmllcigpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBjaGFyQXJyID0gW107XG4gICAgICAgIGNvbnN0IG1heE51bWJlciA9IDI1NiAtICgyNTYgJSBDaGFyU2V0LkNWX0NIQVJTRVQubGVuZ3RoKTtcbiAgICAgICAgd2hpbGUgKGNoYXJBcnIubGVuZ3RoIDw9IFJBTkRPTV9PQ1RFVF9TSVpFKSB7XG4gICAgICAgICAgICBjb25zdCBieXRlID0gY3J5cHRvLnJhbmRvbUJ5dGVzKDEpWzBdO1xuICAgICAgICAgICAgaWYgKGJ5dGUgPj0gbWF4TnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgKiBJZ25vcmUgdGhpcyBudW1iZXIgdG8gbWFpbnRhaW4gcmFuZG9tbmVzcy5cbiAgICAgICAgICAgICAgICAgKiBJbmNsdWRpbmcgaXQgd291bGQgcmVzdWx0IGluIGFuIHVuZXF1YWwgZGlzdHJpYnV0aW9uIG9mIGNoYXJhY3RlcnMgYWZ0ZXIgZG9pbmcgdGhlIG1vZHVsb1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBieXRlICUgQ2hhclNldC5DVl9DSEFSU0VULmxlbmd0aDtcbiAgICAgICAgICAgIGNoYXJBcnIucHVzaChDaGFyU2V0LkNWX0NIQVJTRVRbaW5kZXhdKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2ZXJpZmllcjogc3RyaW5nID0gY2hhckFyci5qb2luKENvbnN0YW50cy5FTVBUWV9TVFJJTkcpO1xuICAgICAgICByZXR1cm4gRW5jb2RpbmdVdGlscy5iYXNlNjRFbmNvZGVVcmwodmVyaWZpZXIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGdlbmVyYXRlIHRoZSBjaGFsbGVuZ2UgZnJvbSB0aGUgY29kZVZlcmZpZXI7IHJlZmVyZW5jZTogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzc2MzYjc2VjdGlvbi00LjJcbiAgICAgKiBAcGFyYW0gY29kZVZlcmlmaWVyXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZUNvZGVDaGFsbGVuZ2VGcm9tVmVyaWZpZXIoY29kZVZlcmlmaWVyOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gRW5jb2RpbmdVdGlscy5iYXNlNjRFbmNvZGVVcmwoXG4gICAgICAgICAgICB0aGlzLmhhc2hVdGlscy5zaGEyNTYoY29kZVZlcmlmaWVyKS50b1N0cmluZyhcImJhc2U2NFwiKSxcbiAgICAgICAgICAgIFwiYmFzZTY0XCJcbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IElDcnlwdG8sIFBrY2VDb2RlcyB9IGZyb20gXCJAYXp1cmUvbXNhbC1jb21tb24vbm9kZVwiO1xuaW1wb3J0IHsgR3VpZEdlbmVyYXRvciB9IGZyb20gXCIuL0d1aWRHZW5lcmF0b3IuanNcIjtcbmltcG9ydCB7IEVuY29kaW5nVXRpbHMgfSBmcm9tIFwiLi4vdXRpbHMvRW5jb2RpbmdVdGlscy5qc1wiO1xuaW1wb3J0IHsgUGtjZUdlbmVyYXRvciB9IGZyb20gXCIuL1BrY2VHZW5lcmF0b3IuanNcIjtcbmltcG9ydCB7IEhhc2hVdGlscyB9IGZyb20gXCIuL0hhc2hVdGlscy5qc1wiO1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBNU0FMIG5vZGUncyBjcnlwdG8gaW50ZXJmYWNlLCB3aGljaCBhbGxvd3MgaXQgdG8gcGVyZm9ybSBiYXNlNjQgZW5jb2RpbmcgYW5kIGRlY29kaW5nLCBnZW5lcmF0aW5nIGNyeXB0b2dyYXBoaWNhbGx5IHJhbmRvbSBHVUlEcyBhbmRcbiAqIGltcGxlbWVudGluZyBQcm9vZiBLZXkgZm9yIENvZGUgRXhjaGFuZ2Ugc3BlY3MgZm9yIHRoZSBPQXV0aCBBdXRob3JpemF0aW9uIENvZGUgRmxvdyB1c2luZyBQS0NFIChyZmMgaGVyZTogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzc2MzYpLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgQ3J5cHRvUHJvdmlkZXIgaW1wbGVtZW50cyBJQ3J5cHRvIHtcbiAgICBwcml2YXRlIHBrY2VHZW5lcmF0b3I6IFBrY2VHZW5lcmF0b3I7XG4gICAgcHJpdmF0ZSBndWlkR2VuZXJhdG9yOiBHdWlkR2VuZXJhdG9yO1xuICAgIHByaXZhdGUgaGFzaFV0aWxzOiBIYXNoVXRpbHM7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gQnJvd3NlciBjcnlwdG8gbmVlZHMgdG8gYmUgdmFsaWRhdGVkIGZpcnN0IGJlZm9yZSBhbnkgb3RoZXIgY2xhc3NlcyBjYW4gYmUgc2V0LlxuICAgICAgICB0aGlzLnBrY2VHZW5lcmF0b3IgPSBuZXcgUGtjZUdlbmVyYXRvcigpO1xuICAgICAgICB0aGlzLmd1aWRHZW5lcmF0b3IgPSBuZXcgR3VpZEdlbmVyYXRvcigpO1xuICAgICAgICB0aGlzLmhhc2hVdGlscyA9IG5ldyBIYXNoVXRpbHMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBiYXNlNjQgVVJMIHNhZmUgZW5jb2RlZCBzdHJpbmdcbiAgICAgKi9cbiAgICBiYXNlNjRVcmxFbmNvZGUoKTogc3RyaW5nIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0cmluZ2lmaWVzIGFuZCBiYXNlNjRVcmwgZW5jb2RlcyBpbnB1dCBwdWJsaWMga2V5XG4gICAgICogQHBhcmFtIGlucHV0S2lkIC0gcHVibGljIGtleSBpZFxuICAgICAqIEByZXR1cm5zIEJhc2U2NFVybCBlbmNvZGVkIHB1YmxpYyBrZXlcbiAgICAgKi9cbiAgICBlbmNvZGVLaWQoKTogc3RyaW5nIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyByYW5kb20gR1VJRCAtIHVzZWQgdG8gcG9wdWxhdGUgc3RhdGUgYW5kIG5vbmNlLlxuICAgICAqIEByZXR1cm5zIHN0cmluZyAoR1VJRClcbiAgICAgKi9cbiAgICBjcmVhdGVOZXdHdWlkKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLmd1aWRHZW5lcmF0b3IuZ2VuZXJhdGVHdWlkKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW5jb2RlcyBpbnB1dCBzdHJpbmcgdG8gYmFzZTY0LlxuICAgICAqIEBwYXJhbSBpbnB1dCAtIHN0cmluZyB0byBiZSBlbmNvZGVkXG4gICAgICovXG4gICAgYmFzZTY0RW5jb2RlKGlucHV0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gRW5jb2RpbmdVdGlscy5iYXNlNjRFbmNvZGUoaW5wdXQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlY29kZXMgaW5wdXQgc3RyaW5nIGZyb20gYmFzZTY0LlxuICAgICAqIEBwYXJhbSBpbnB1dCAtIHN0cmluZyB0byBiZSBkZWNvZGVkXG4gICAgICovXG4gICAgYmFzZTY0RGVjb2RlKGlucHV0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gRW5jb2RpbmdVdGlscy5iYXNlNjREZWNvZGUoaW5wdXQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBQS0NFIGNvZGVzIHVzZWQgaW4gQXV0aG9yaXphdGlvbiBDb2RlIEZsb3cuXG4gICAgICovXG4gICAgZ2VuZXJhdGVQa2NlQ29kZXMoKTogUHJvbWlzZTxQa2NlQ29kZXM+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGtjZUdlbmVyYXRvci5nZW5lcmF0ZVBrY2VDb2RlcygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBhIGtleXBhaXIsIHN0b3JlcyBpdCBhbmQgcmV0dXJucyBhIHRodW1icHJpbnQgLSBub3QgeWV0IGltcGxlbWVudGVkIGZvciBub2RlXG4gICAgICovXG4gICAgZ2V0UHVibGljS2V5VGh1bWJwcmludCgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGNyeXB0b2dyYXBoaWMga2V5cGFpciBmcm9tIGtleSBzdG9yZSBtYXRjaGluZyB0aGUga2V5SWQgcGFzc2VkIGluXG4gICAgICogQHBhcmFtIGtpZCAtIHB1YmxpYyBrZXkgaWRcbiAgICAgKi9cbiAgICByZW1vdmVUb2tlbkJpbmRpbmdLZXkoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYWxsIGNyeXB0b2dyYXBoaWMga2V5cyBmcm9tIEtleXN0b3JlXG4gICAgICovXG4gICAgY2xlYXJLZXlzdG9yZSgpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2lnbnMgdGhlIGdpdmVuIG9iamVjdCBhcyBhIGp3dCBwYXlsb2FkIHdpdGggcHJpdmF0ZSBrZXkgcmV0cmlldmVkIGJ5IGdpdmVuIGtpZCAtIGN1cnJlbnRseSBub3QgaW1wbGVtZW50ZWQgZm9yIG5vZGVcbiAgICAgKi9cbiAgICBzaWduSnd0KCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIFNIQS0yNTYgaGFzaCBvZiBhbiBpbnB1dCBzdHJpbmdcbiAgICAgKi9cbiAgICBhc3luYyBoYXNoU3RyaW5nKHBsYWluVGV4dDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgcmV0dXJuIEVuY29kaW5nVXRpbHMuYmFzZTY0RW5jb2RlVXJsKFxuICAgICAgICAgICAgdGhpcy5oYXNoVXRpbHMuc2hhMjU2KHBsYWluVGV4dCkudG9TdHJpbmcoXCJiYXNlNjRcIiksXG4gICAgICAgICAgICBcImJhc2U2NFwiXG4gICAgICAgICk7XG4gICAgfVxufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICAgIFRva2VuS2V5cyxcbiAgICBBY2NvdW50RW50aXR5LFxuICAgIElkVG9rZW5FbnRpdHksXG4gICAgQWNjZXNzVG9rZW5FbnRpdHksXG4gICAgUmVmcmVzaFRva2VuRW50aXR5LFxuICAgIEFwcE1ldGFkYXRhRW50aXR5LFxuICAgIFNlcnZlclRlbGVtZXRyeUVudGl0eSxcbiAgICBUaHJvdHRsaW5nRW50aXR5LFxuICAgIENhY2hlTWFuYWdlcixcbiAgICBMb2dnZXIsXG4gICAgVmFsaWRDYWNoZVR5cGUsXG4gICAgSUNyeXB0byxcbiAgICBBdXRob3JpdHlNZXRhZGF0YUVudGl0eSxcbiAgICBWYWxpZENyZWRlbnRpYWxUeXBlLFxuICAgIFN0YXRpY0F1dGhvcml0eU9wdGlvbnMsXG4gICAgQ2FjaGVIZWxwZXJzLFxufSBmcm9tIFwiQGF6dXJlL21zYWwtY29tbW9uL25vZGVcIjtcblxuaW1wb3J0IHsgRGVzZXJpYWxpemVyIH0gZnJvbSBcIi4vc2VyaWFsaXplci9EZXNlcmlhbGl6ZXIuanNcIjtcbmltcG9ydCB7IFNlcmlhbGl6ZXIgfSBmcm9tIFwiLi9zZXJpYWxpemVyL1NlcmlhbGl6ZXIuanNcIjtcbmltcG9ydCB7XG4gICAgSW5NZW1vcnlDYWNoZSxcbiAgICBKc29uQ2FjaGUsXG4gICAgQ2FjaGVLVlN0b3JlLFxufSBmcm9tIFwiLi9zZXJpYWxpemVyL1NlcmlhbGl6ZXJUeXBlcy5qc1wiO1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBTdG9yYWdlIGZvciBub2RlLCByZWFkaW5nIGNhY2hlIGZyb20gdXNlciBzcGVjaWZpZWQgc3RvcmFnZSBsb2NhdGlvbiBvciBhbiAgZXh0ZW5zaW9uIGxpYnJhcnlcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIE5vZGVTdG9yYWdlIGV4dGVuZHMgQ2FjaGVNYW5hZ2VyIHtcbiAgICAvLyBDYWNoZSBjb25maWd1cmF0aW9uLCBlaXRoZXIgc2V0IGJ5IHVzZXIgb3IgZGVmYXVsdCB2YWx1ZXMuXG4gICAgcHJpdmF0ZSBsb2dnZXI6IExvZ2dlcjtcbiAgICBwcml2YXRlIGNhY2hlOiBDYWNoZUtWU3RvcmUgPSB7fTtcbiAgICBwcml2YXRlIGNoYW5nZUVtaXR0ZXJzOiBBcnJheTxGdW5jdGlvbj4gPSBbXTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBsb2dnZXI6IExvZ2dlcixcbiAgICAgICAgY2xpZW50SWQ6IHN0cmluZyxcbiAgICAgICAgY3J5cHRvSW1wbDogSUNyeXB0byxcbiAgICAgICAgc3RhdGljQXV0aG9yaXR5T3B0aW9ucz86IFN0YXRpY0F1dGhvcml0eU9wdGlvbnNcbiAgICApIHtcbiAgICAgICAgc3VwZXIoY2xpZW50SWQsIGNyeXB0b0ltcGwsIGxvZ2dlciwgc3RhdGljQXV0aG9yaXR5T3B0aW9ucyk7XG4gICAgICAgIHRoaXMubG9nZ2VyID0gbG9nZ2VyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFF1ZXVlIHVwIGNhbGxiYWNrc1xuICAgICAqIEBwYXJhbSBmdW5jIC0gYSBjYWxsYmFjayBmdW5jdGlvbiBmb3IgY2FjaGUgY2hhbmdlIGluZGljYXRpb25cbiAgICAgKi9cbiAgICByZWdpc3RlckNoYW5nZUVtaXR0ZXIoZnVuYzogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgICAgICB0aGlzLmNoYW5nZUVtaXR0ZXJzLnB1c2goZnVuYyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW52b2tlIHRoZSBjYWxsYmFjayB3aGVuIGNhY2hlIGNoYW5nZXNcbiAgICAgKi9cbiAgICBlbWl0Q2hhbmdlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmNoYW5nZUVtaXR0ZXJzLmZvckVhY2goKGZ1bmMpID0+IGZ1bmMuY2FsbChudWxsKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgY2FjaGVLVlN0b3JlIHRvIEluTWVtb3J5Q2FjaGVcbiAgICAgKiBAcGFyYW0gY2FjaGUgLSBrZXkgdmFsdWUgc3RvcmVcbiAgICAgKi9cbiAgICBjYWNoZVRvSW5NZW1vcnlDYWNoZShjYWNoZTogQ2FjaGVLVlN0b3JlKTogSW5NZW1vcnlDYWNoZSB7XG4gICAgICAgIGNvbnN0IGluTWVtb3J5Q2FjaGU6IEluTWVtb3J5Q2FjaGUgPSB7XG4gICAgICAgICAgICBhY2NvdW50czoge30sXG4gICAgICAgICAgICBpZFRva2Vuczoge30sXG4gICAgICAgICAgICBhY2Nlc3NUb2tlbnM6IHt9LFxuICAgICAgICAgICAgcmVmcmVzaFRva2Vuczoge30sXG4gICAgICAgICAgICBhcHBNZXRhZGF0YToge30sXG4gICAgICAgIH07XG5cbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gY2FjaGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gY2FjaGVba2V5XTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFjY291bnRFbnRpdHkpIHtcbiAgICAgICAgICAgICAgICBpbk1lbW9yeUNhY2hlLmFjY291bnRzW2tleV0gPSB2YWx1ZSBhcyBBY2NvdW50RW50aXR5O1xuICAgICAgICAgICAgfSBlbHNlIGlmIChDYWNoZUhlbHBlcnMuaXNJZFRva2VuRW50aXR5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGluTWVtb3J5Q2FjaGUuaWRUb2tlbnNba2V5XSA9IHZhbHVlIGFzIElkVG9rZW5FbnRpdHk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKENhY2hlSGVscGVycy5pc0FjY2Vzc1Rva2VuRW50aXR5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGluTWVtb3J5Q2FjaGUuYWNjZXNzVG9rZW5zW2tleV0gPSB2YWx1ZSBhcyBBY2Nlc3NUb2tlbkVudGl0eTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoQ2FjaGVIZWxwZXJzLmlzUmVmcmVzaFRva2VuRW50aXR5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGluTWVtb3J5Q2FjaGUucmVmcmVzaFRva2Vuc1trZXldID0gdmFsdWUgYXMgUmVmcmVzaFRva2VuRW50aXR5O1xuICAgICAgICAgICAgfSBlbHNlIGlmIChDYWNoZUhlbHBlcnMuaXNBcHBNZXRhZGF0YUVudGl0eShrZXksIHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGluTWVtb3J5Q2FjaGUuYXBwTWV0YWRhdGFba2V5XSA9IHZhbHVlIGFzIEFwcE1ldGFkYXRhRW50aXR5O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBpbk1lbW9yeUNhY2hlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGNvbnZlcnRzIGluTWVtb3J5Q2FjaGUgdG8gQ2FjaGVLVlN0b3JlXG4gICAgICogQHBhcmFtIGluTWVtb3J5Q2FjaGUgLSBrdnN0b3JlIG1hcCBmb3IgaW5tZW1vcnlcbiAgICAgKi9cbiAgICBpbk1lbW9yeUNhY2hlVG9DYWNoZShpbk1lbW9yeUNhY2hlOiBJbk1lbW9yeUNhY2hlKTogQ2FjaGVLVlN0b3JlIHtcbiAgICAgICAgLy8gY29udmVydCBpbiBtZW1vcnkgY2FjaGUgdG8gYSBmbGF0IEtleS1WYWx1ZSBtYXBcbiAgICAgICAgbGV0IGNhY2hlID0gdGhpcy5nZXRDYWNoZSgpO1xuXG4gICAgICAgIGNhY2hlID0ge1xuICAgICAgICAgICAgLi4uY2FjaGUsXG4gICAgICAgICAgICAuLi5pbk1lbW9yeUNhY2hlLmFjY291bnRzLFxuICAgICAgICAgICAgLi4uaW5NZW1vcnlDYWNoZS5pZFRva2VucyxcbiAgICAgICAgICAgIC4uLmluTWVtb3J5Q2FjaGUuYWNjZXNzVG9rZW5zLFxuICAgICAgICAgICAgLi4uaW5NZW1vcnlDYWNoZS5yZWZyZXNoVG9rZW5zLFxuICAgICAgICAgICAgLi4uaW5NZW1vcnlDYWNoZS5hcHBNZXRhZGF0YSxcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBjb252ZXJ0IGluIG1lbW9yeSBjYWNoZSB0byBhIGZsYXQgS2V5LVZhbHVlIG1hcFxuICAgICAgICByZXR1cm4gY2FjaGU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZ2V0cyB0aGUgY3VycmVudCBpbiBtZW1vcnkgY2FjaGUgZm9yIHRoZSBjbGllbnRcbiAgICAgKi9cbiAgICBnZXRJbk1lbW9yeUNhY2hlKCk6IEluTWVtb3J5Q2FjaGUge1xuICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShcIkdldHRpbmcgaW4tbWVtb3J5IGNhY2hlXCIpO1xuXG4gICAgICAgIC8vIGNvbnZlcnQgdGhlIGNhY2hlIGtleSB2YWx1ZSBzdG9yZSB0byBpbk1lbW9yeUNhY2hlXG4gICAgICAgIGNvbnN0IGluTWVtb3J5Q2FjaGUgPSB0aGlzLmNhY2hlVG9Jbk1lbW9yeUNhY2hlKHRoaXMuZ2V0Q2FjaGUoKSk7XG4gICAgICAgIHJldHVybiBpbk1lbW9yeUNhY2hlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHNldHMgdGhlIGN1cnJlbnQgaW4gbWVtb3J5IGNhY2hlIGZvciB0aGUgY2xpZW50XG4gICAgICogQHBhcmFtIGluTWVtb3J5Q2FjaGUgLSBrZXkgdmFsdWUgbWFwIGluIG1lbW9yeVxuICAgICAqL1xuICAgIHNldEluTWVtb3J5Q2FjaGUoaW5NZW1vcnlDYWNoZTogSW5NZW1vcnlDYWNoZSk6IHZvaWQge1xuICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShcIlNldHRpbmcgaW4tbWVtb3J5IGNhY2hlXCIpO1xuXG4gICAgICAgIC8vIGNvbnZlcnQgYW5kIGFwcGVuZCB0aGUgaW5NZW1vcnlDYWNoZSB0byBjYWNoZUtWU3RvcmVcbiAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLmluTWVtb3J5Q2FjaGVUb0NhY2hlKGluTWVtb3J5Q2FjaGUpO1xuICAgICAgICB0aGlzLnNldENhY2hlKGNhY2hlKTtcblxuICAgICAgICB0aGlzLmVtaXRDaGFuZ2UoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnZXQgdGhlIGN1cnJlbnQgY2FjaGUga2V5LXZhbHVlIHN0b3JlXG4gICAgICovXG4gICAgZ2V0Q2FjaGUoKTogQ2FjaGVLVlN0b3JlIHtcbiAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoXCJHZXR0aW5nIGNhY2hlIGtleS12YWx1ZSBzdG9yZVwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogc2V0cyB0aGUgY3VycmVudCBjYWNoZSAoa2V5IHZhbHVlIHN0b3JlKVxuICAgICAqIEBwYXJhbSBjYWNoZU1hcCAtIGtleSB2YWx1ZSBtYXBcbiAgICAgKi9cbiAgICBzZXRDYWNoZShjYWNoZTogQ2FjaGVLVlN0b3JlKTogdm9pZCB7XG4gICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKFwiU2V0dGluZyBjYWNoZSBrZXkgdmFsdWUgc3RvcmVcIik7XG4gICAgICAgIHRoaXMuY2FjaGUgPSBjYWNoZTtcblxuICAgICAgICAvLyBtYXJrIGNoYW5nZSBpbiBjYWNoZVxuICAgICAgICB0aGlzLmVtaXRDaGFuZ2UoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGNhY2hlIGl0ZW0gd2l0aCBnaXZlbiBrZXkuXG4gICAgICogQHBhcmFtIGtleSAtIGxvb2t1cCBrZXkgZm9yIHRoZSBjYWNoZSBlbnRyeVxuICAgICAqL1xuICAgIGdldEl0ZW0oa2V5OiBzdHJpbmcpOiBWYWxpZENhY2hlVHlwZSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlUGlpKGBJdGVtIGtleTogJHtrZXl9YCk7XG5cbiAgICAgICAgLy8gcmVhZCBjYWNoZVxuICAgICAgICBjb25zdCBjYWNoZSA9IHRoaXMuZ2V0Q2FjaGUoKTtcbiAgICAgICAgcmV0dXJuIGNhY2hlW2tleV07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBjYWNoZSBpdGVtIHdpdGggZ2l2ZW4ga2V5LXZhbHVlXG4gICAgICogQHBhcmFtIGtleSAtIGxvb2t1cCBrZXkgZm9yIHRoZSBjYWNoZSBlbnRyeVxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIHZhbHVlIG9mIHRoZSBjYWNoZSBlbnRyeVxuICAgICAqL1xuICAgIHNldEl0ZW0oa2V5OiBzdHJpbmcsIHZhbHVlOiBWYWxpZENhY2hlVHlwZSk6IHZvaWQge1xuICAgICAgICB0aGlzLmxvZ2dlci50cmFjZVBpaShgSXRlbSBrZXk6ICR7a2V5fWApO1xuXG4gICAgICAgIC8vIHJlYWQgY2FjaGVcbiAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLmdldENhY2hlKCk7XG4gICAgICAgIGNhY2hlW2tleV0gPSB2YWx1ZTtcblxuICAgICAgICAvLyB3cml0ZSB0byBjYWNoZVxuICAgICAgICB0aGlzLnNldENhY2hlKGNhY2hlKTtcbiAgICB9XG5cbiAgICBnZXRBY2NvdW50S2V5cygpOiBzdHJpbmdbXSB7XG4gICAgICAgIGNvbnN0IGluTWVtb3J5Q2FjaGUgPSB0aGlzLmdldEluTWVtb3J5Q2FjaGUoKTtcbiAgICAgICAgY29uc3QgYWNjb3VudEtleXMgPSBPYmplY3Qua2V5cyhpbk1lbW9yeUNhY2hlLmFjY291bnRzKTtcblxuICAgICAgICByZXR1cm4gYWNjb3VudEtleXM7XG4gICAgfVxuXG4gICAgZ2V0VG9rZW5LZXlzKCk6IFRva2VuS2V5cyB7XG4gICAgICAgIGNvbnN0IGluTWVtb3J5Q2FjaGUgPSB0aGlzLmdldEluTWVtb3J5Q2FjaGUoKTtcbiAgICAgICAgY29uc3QgdG9rZW5LZXlzID0ge1xuICAgICAgICAgICAgaWRUb2tlbjogT2JqZWN0LmtleXMoaW5NZW1vcnlDYWNoZS5pZFRva2VucyksXG4gICAgICAgICAgICBhY2Nlc3NUb2tlbjogT2JqZWN0LmtleXMoaW5NZW1vcnlDYWNoZS5hY2Nlc3NUb2tlbnMpLFxuICAgICAgICAgICAgcmVmcmVzaFRva2VuOiBPYmplY3Qua2V5cyhpbk1lbW9yeUNhY2hlLnJlZnJlc2hUb2tlbnMpLFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB0b2tlbktleXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVhZHMgYWNjb3VudCBmcm9tIGNhY2hlLCBidWlsZHMgaXQgaW50byBhbiBhY2NvdW50IGVudGl0eSBhbmQgcmV0dXJucyBpdC5cbiAgICAgKiBAcGFyYW0gYWNjb3VudEtleSAtIGxvb2t1cCBrZXkgdG8gZmV0Y2ggY2FjaGUgdHlwZSBBY2NvdW50RW50aXR5XG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICBnZXRBY2NvdW50KGFjY291bnRLZXk6IHN0cmluZyk6IEFjY291bnRFbnRpdHkgfCBudWxsIHtcbiAgICAgICAgY29uc3QgY2FjaGVkQWNjb3VudCA9IHRoaXMuZ2V0SXRlbShhY2NvdW50S2V5KTtcbiAgICAgICAgcmV0dXJuIGNhY2hlZEFjY291bnRcbiAgICAgICAgICAgID8gT2JqZWN0LmFzc2lnbihuZXcgQWNjb3VudEVudGl0eSgpLCB0aGlzLmdldEl0ZW0oYWNjb3VudEtleSkpXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogc2V0IGFjY291bnQgZW50aXR5XG4gICAgICogQHBhcmFtIGFjY291bnQgLSBjYWNoZSB2YWx1ZSB0byBiZSBzZXQgb2YgdHlwZSBBY2NvdW50RW50aXR5XG4gICAgICovXG4gICAgYXN5bmMgc2V0QWNjb3VudChhY2NvdW50OiBBY2NvdW50RW50aXR5KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGFjY291bnRLZXkgPSBhY2NvdW50LmdlbmVyYXRlQWNjb3VudEtleSgpO1xuICAgICAgICB0aGlzLnNldEl0ZW0oYWNjb3VudEtleSwgYWNjb3VudCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZmV0Y2ggdGhlIGlkVG9rZW4gY3JlZGVudGlhbFxuICAgICAqIEBwYXJhbSBpZFRva2VuS2V5IC0gbG9va3VwIGtleSB0byBmZXRjaCBjYWNoZSB0eXBlIElkVG9rZW5FbnRpdHlcbiAgICAgKi9cbiAgICBnZXRJZFRva2VuQ3JlZGVudGlhbChpZFRva2VuS2V5OiBzdHJpbmcpOiBJZFRva2VuRW50aXR5IHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IGlkVG9rZW4gPSB0aGlzLmdldEl0ZW0oaWRUb2tlbktleSkgYXMgSWRUb2tlbkVudGl0eTtcbiAgICAgICAgaWYgKENhY2hlSGVscGVycy5pc0lkVG9rZW5FbnRpdHkoaWRUb2tlbikpIHtcbiAgICAgICAgICAgIHJldHVybiBpZFRva2VuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHNldCBpZFRva2VuIGNyZWRlbnRpYWxcbiAgICAgKiBAcGFyYW0gaWRUb2tlbiAtIGNhY2hlIHZhbHVlIHRvIGJlIHNldCBvZiB0eXBlIElkVG9rZW5FbnRpdHlcbiAgICAgKi9cbiAgICBhc3luYyBzZXRJZFRva2VuQ3JlZGVudGlhbChpZFRva2VuOiBJZFRva2VuRW50aXR5KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGlkVG9rZW5LZXkgPSBDYWNoZUhlbHBlcnMuZ2VuZXJhdGVDcmVkZW50aWFsS2V5KGlkVG9rZW4pO1xuICAgICAgICB0aGlzLnNldEl0ZW0oaWRUb2tlbktleSwgaWRUb2tlbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZmV0Y2ggdGhlIGFjY2Vzc1Rva2VuIGNyZWRlbnRpYWxcbiAgICAgKiBAcGFyYW0gYWNjZXNzVG9rZW5LZXkgLSBsb29rdXAga2V5IHRvIGZldGNoIGNhY2hlIHR5cGUgQWNjZXNzVG9rZW5FbnRpdHlcbiAgICAgKi9cbiAgICBnZXRBY2Nlc3NUb2tlbkNyZWRlbnRpYWwoYWNjZXNzVG9rZW5LZXk6IHN0cmluZyk6IEFjY2Vzc1Rva2VuRW50aXR5IHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gdGhpcy5nZXRJdGVtKGFjY2Vzc1Rva2VuS2V5KSBhcyBBY2Nlc3NUb2tlbkVudGl0eTtcbiAgICAgICAgaWYgKENhY2hlSGVscGVycy5pc0FjY2Vzc1Rva2VuRW50aXR5KGFjY2Vzc1Rva2VuKSkge1xuICAgICAgICAgICAgcmV0dXJuIGFjY2Vzc1Rva2VuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHNldCBhY2Nlc3NUb2tlbiBjcmVkZW50aWFsXG4gICAgICogQHBhcmFtIGFjY2Vzc1Rva2VuIC0gIGNhY2hlIHZhbHVlIHRvIGJlIHNldCBvZiB0eXBlIEFjY2Vzc1Rva2VuRW50aXR5XG4gICAgICovXG4gICAgYXN5bmMgc2V0QWNjZXNzVG9rZW5DcmVkZW50aWFsKFxuICAgICAgICBhY2Nlc3NUb2tlbjogQWNjZXNzVG9rZW5FbnRpdHlcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgYWNjZXNzVG9rZW5LZXkgPSBDYWNoZUhlbHBlcnMuZ2VuZXJhdGVDcmVkZW50aWFsS2V5KGFjY2Vzc1Rva2VuKTtcbiAgICAgICAgdGhpcy5zZXRJdGVtKGFjY2Vzc1Rva2VuS2V5LCBhY2Nlc3NUb2tlbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZmV0Y2ggdGhlIHJlZnJlc2hUb2tlbiBjcmVkZW50aWFsXG4gICAgICogQHBhcmFtIHJlZnJlc2hUb2tlbktleSAtIGxvb2t1cCBrZXkgdG8gZmV0Y2ggY2FjaGUgdHlwZSBSZWZyZXNoVG9rZW5FbnRpdHlcbiAgICAgKi9cbiAgICBnZXRSZWZyZXNoVG9rZW5DcmVkZW50aWFsKFxuICAgICAgICByZWZyZXNoVG9rZW5LZXk6IHN0cmluZ1xuICAgICk6IFJlZnJlc2hUb2tlbkVudGl0eSB8IG51bGwge1xuICAgICAgICBjb25zdCByZWZyZXNoVG9rZW4gPSB0aGlzLmdldEl0ZW0oXG4gICAgICAgICAgICByZWZyZXNoVG9rZW5LZXlcbiAgICAgICAgKSBhcyBSZWZyZXNoVG9rZW5FbnRpdHk7XG4gICAgICAgIGlmIChDYWNoZUhlbHBlcnMuaXNSZWZyZXNoVG9rZW5FbnRpdHkocmVmcmVzaFRva2VuKSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlZnJlc2hUb2tlbiBhcyBSZWZyZXNoVG9rZW5FbnRpdHk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogc2V0IHJlZnJlc2hUb2tlbiBjcmVkZW50aWFsXG4gICAgICogQHBhcmFtIHJlZnJlc2hUb2tlbiAtIGNhY2hlIHZhbHVlIHRvIGJlIHNldCBvZiB0eXBlIFJlZnJlc2hUb2tlbkVudGl0eVxuICAgICAqL1xuICAgIGFzeW5jIHNldFJlZnJlc2hUb2tlbkNyZWRlbnRpYWwoXG4gICAgICAgIHJlZnJlc2hUb2tlbjogUmVmcmVzaFRva2VuRW50aXR5XG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHJlZnJlc2hUb2tlbktleSA9XG4gICAgICAgICAgICBDYWNoZUhlbHBlcnMuZ2VuZXJhdGVDcmVkZW50aWFsS2V5KHJlZnJlc2hUb2tlbik7XG4gICAgICAgIHRoaXMuc2V0SXRlbShyZWZyZXNoVG9rZW5LZXksIHJlZnJlc2hUb2tlbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZmV0Y2ggYXBwTWV0YWRhdGEgZW50aXR5IGZyb20gdGhlIHBsYXRmb3JtIGNhY2hlXG4gICAgICogQHBhcmFtIGFwcE1ldGFkYXRhS2V5IC0gbG9va3VwIGtleSB0byBmZXRjaCBjYWNoZSB0eXBlIEFwcE1ldGFkYXRhRW50aXR5XG4gICAgICovXG4gICAgZ2V0QXBwTWV0YWRhdGEoYXBwTWV0YWRhdGFLZXk6IHN0cmluZyk6IEFwcE1ldGFkYXRhRW50aXR5IHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IGFwcE1ldGFkYXRhOiBBcHBNZXRhZGF0YUVudGl0eSA9IHRoaXMuZ2V0SXRlbShcbiAgICAgICAgICAgIGFwcE1ldGFkYXRhS2V5XG4gICAgICAgICkgYXMgQXBwTWV0YWRhdGFFbnRpdHk7XG4gICAgICAgIGlmIChDYWNoZUhlbHBlcnMuaXNBcHBNZXRhZGF0YUVudGl0eShhcHBNZXRhZGF0YUtleSwgYXBwTWV0YWRhdGEpKSB7XG4gICAgICAgICAgICByZXR1cm4gYXBwTWV0YWRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogc2V0IGFwcE1ldGFkYXRhIGVudGl0eSB0byB0aGUgcGxhdGZvcm0gY2FjaGVcbiAgICAgKiBAcGFyYW0gYXBwTWV0YWRhdGEgLSBjYWNoZSB2YWx1ZSB0byBiZSBzZXQgb2YgdHlwZSBBcHBNZXRhZGF0YUVudGl0eVxuICAgICAqL1xuICAgIHNldEFwcE1ldGFkYXRhKGFwcE1ldGFkYXRhOiBBcHBNZXRhZGF0YUVudGl0eSk6IHZvaWQge1xuICAgICAgICBjb25zdCBhcHBNZXRhZGF0YUtleSA9IENhY2hlSGVscGVycy5nZW5lcmF0ZUFwcE1ldGFkYXRhS2V5KGFwcE1ldGFkYXRhKTtcbiAgICAgICAgdGhpcy5zZXRJdGVtKGFwcE1ldGFkYXRhS2V5LCBhcHBNZXRhZGF0YSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZmV0Y2ggc2VydmVyIHRlbGVtZXRyeSBlbnRpdHkgZnJvbSB0aGUgcGxhdGZvcm0gY2FjaGVcbiAgICAgKiBAcGFyYW0gc2VydmVyVGVsZW1ldHJ5a2V5IC0gbG9va3VwIGtleSB0byBmZXRjaCBjYWNoZSB0eXBlIFNlcnZlclRlbGVtZXRyeUVudGl0eVxuICAgICAqL1xuICAgIGdldFNlcnZlclRlbGVtZXRyeShcbiAgICAgICAgc2VydmVyVGVsZW1ldHJ5a2V5OiBzdHJpbmdcbiAgICApOiBTZXJ2ZXJUZWxlbWV0cnlFbnRpdHkgfCBudWxsIHtcbiAgICAgICAgY29uc3Qgc2VydmVyVGVsZW1ldHJ5RW50aXR5OiBTZXJ2ZXJUZWxlbWV0cnlFbnRpdHkgPSB0aGlzLmdldEl0ZW0oXG4gICAgICAgICAgICBzZXJ2ZXJUZWxlbWV0cnlrZXlcbiAgICAgICAgKSBhcyBTZXJ2ZXJUZWxlbWV0cnlFbnRpdHk7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHNlcnZlclRlbGVtZXRyeUVudGl0eSAmJlxuICAgICAgICAgICAgQ2FjaGVIZWxwZXJzLmlzU2VydmVyVGVsZW1ldHJ5RW50aXR5KFxuICAgICAgICAgICAgICAgIHNlcnZlclRlbGVtZXRyeWtleSxcbiAgICAgICAgICAgICAgICBzZXJ2ZXJUZWxlbWV0cnlFbnRpdHlcbiAgICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VydmVyVGVsZW1ldHJ5RW50aXR5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHNldCBzZXJ2ZXIgdGVsZW1ldHJ5IGVudGl0eSB0byB0aGUgcGxhdGZvcm0gY2FjaGVcbiAgICAgKiBAcGFyYW0gc2VydmVyVGVsZW1ldHJ5S2V5IC0gbG9va3VwIGtleSB0byBmZXRjaCBjYWNoZSB0eXBlIFNlcnZlclRlbGVtZXRyeUVudGl0eVxuICAgICAqIEBwYXJhbSBzZXJ2ZXJUZWxlbWV0cnkgLSBjYWNoZSB2YWx1ZSB0byBiZSBzZXQgb2YgdHlwZSBTZXJ2ZXJUZWxlbWV0cnlFbnRpdHlcbiAgICAgKi9cbiAgICBzZXRTZXJ2ZXJUZWxlbWV0cnkoXG4gICAgICAgIHNlcnZlclRlbGVtZXRyeUtleTogc3RyaW5nLFxuICAgICAgICBzZXJ2ZXJUZWxlbWV0cnk6IFNlcnZlclRlbGVtZXRyeUVudGl0eVxuICAgICk6IHZvaWQge1xuICAgICAgICB0aGlzLnNldEl0ZW0oc2VydmVyVGVsZW1ldHJ5S2V5LCBzZXJ2ZXJUZWxlbWV0cnkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGZldGNoIGF1dGhvcml0eSBtZXRhZGF0YSBlbnRpdHkgZnJvbSB0aGUgcGxhdGZvcm0gY2FjaGVcbiAgICAgKiBAcGFyYW0ga2V5IC0gbG9va3VwIGtleSB0byBmZXRjaCBjYWNoZSB0eXBlIEF1dGhvcml0eU1ldGFkYXRhRW50aXR5XG4gICAgICovXG4gICAgZ2V0QXV0aG9yaXR5TWV0YWRhdGEoa2V5OiBzdHJpbmcpOiBBdXRob3JpdHlNZXRhZGF0YUVudGl0eSB8IG51bGwge1xuICAgICAgICBjb25zdCBhdXRob3JpdHlNZXRhZGF0YUVudGl0eTogQXV0aG9yaXR5TWV0YWRhdGFFbnRpdHkgPSB0aGlzLmdldEl0ZW0oXG4gICAgICAgICAgICBrZXlcbiAgICAgICAgKSBhcyBBdXRob3JpdHlNZXRhZGF0YUVudGl0eTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgYXV0aG9yaXR5TWV0YWRhdGFFbnRpdHkgJiZcbiAgICAgICAgICAgIENhY2hlSGVscGVycy5pc0F1dGhvcml0eU1ldGFkYXRhRW50aXR5KGtleSwgYXV0aG9yaXR5TWV0YWRhdGFFbnRpdHkpXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGF1dGhvcml0eU1ldGFkYXRhRW50aXR5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBhbGwgYXV0aG9yaXR5IG1ldGFkYXRhIGtleXNcbiAgICAgKi9cbiAgICBnZXRBdXRob3JpdHlNZXRhZGF0YUtleXMoKTogQXJyYXk8c3RyaW5nPiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEtleXMoKS5maWx0ZXIoKGtleSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNBdXRob3JpdHlNZXRhZGF0YShrZXkpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzZXQgYXV0aG9yaXR5IG1ldGFkYXRhIGVudGl0eSB0byB0aGUgcGxhdGZvcm0gY2FjaGVcbiAgICAgKiBAcGFyYW0ga2V5IC0gbG9va3VwIGtleSB0byBmZXRjaCBjYWNoZSB0eXBlIEF1dGhvcml0eU1ldGFkYXRhRW50aXR5XG4gICAgICogQHBhcmFtIG1ldGFkYXRhIC0gY2FjaGUgdmFsdWUgdG8gYmUgc2V0IG9mIHR5cGUgQXV0aG9yaXR5TWV0YWRhdGFFbnRpdHlcbiAgICAgKi9cbiAgICBzZXRBdXRob3JpdHlNZXRhZGF0YShrZXk6IHN0cmluZywgbWV0YWRhdGE6IEF1dGhvcml0eU1ldGFkYXRhRW50aXR5KTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2V0SXRlbShrZXksIG1ldGFkYXRhKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBmZXRjaCB0aHJvdHRsaW5nIGVudGl0eSBmcm9tIHRoZSBwbGF0Zm9ybSBjYWNoZVxuICAgICAqIEBwYXJhbSB0aHJvdHRsaW5nQ2FjaGVLZXkgLSBsb29rdXAga2V5IHRvIGZldGNoIGNhY2hlIHR5cGUgVGhyb3R0bGluZ0VudGl0eVxuICAgICAqL1xuICAgIGdldFRocm90dGxpbmdDYWNoZSh0aHJvdHRsaW5nQ2FjaGVLZXk6IHN0cmluZyk6IFRocm90dGxpbmdFbnRpdHkgfCBudWxsIHtcbiAgICAgICAgY29uc3QgdGhyb3R0bGluZ0NhY2hlOiBUaHJvdHRsaW5nRW50aXR5ID0gdGhpcy5nZXRJdGVtKFxuICAgICAgICAgICAgdGhyb3R0bGluZ0NhY2hlS2V5XG4gICAgICAgICkgYXMgVGhyb3R0bGluZ0VudGl0eTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhyb3R0bGluZ0NhY2hlICYmXG4gICAgICAgICAgICBDYWNoZUhlbHBlcnMuaXNUaHJvdHRsaW5nRW50aXR5KHRocm90dGxpbmdDYWNoZUtleSwgdGhyb3R0bGluZ0NhY2hlKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiB0aHJvdHRsaW5nQ2FjaGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogc2V0IHRocm90dGxpbmcgZW50aXR5IHRvIHRoZSBwbGF0Zm9ybSBjYWNoZVxuICAgICAqIEBwYXJhbSB0aHJvdHRsaW5nQ2FjaGVLZXkgLSBsb29rdXAga2V5IHRvIGZldGNoIGNhY2hlIHR5cGUgVGhyb3R0bGluZ0VudGl0eVxuICAgICAqIEBwYXJhbSB0aHJvdHRsaW5nQ2FjaGUgLSBjYWNoZSB2YWx1ZSB0byBiZSBzZXQgb2YgdHlwZSBUaHJvdHRsaW5nRW50aXR5XG4gICAgICovXG4gICAgc2V0VGhyb3R0bGluZ0NhY2hlKFxuICAgICAgICB0aHJvdHRsaW5nQ2FjaGVLZXk6IHN0cmluZyxcbiAgICAgICAgdGhyb3R0bGluZ0NhY2hlOiBUaHJvdHRsaW5nRW50aXR5XG4gICAgKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2V0SXRlbSh0aHJvdHRsaW5nQ2FjaGVLZXksIHRocm90dGxpbmdDYWNoZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgY2FjaGUgaXRlbSBmcm9tIG1lbW9yeSB3aXRoIHRoZSBnaXZlbiBrZXkuXG4gICAgICogQHBhcmFtIGtleSAtIGxvb2t1cCBrZXkgdG8gcmVtb3ZlIGEgY2FjaGUgZW50aXR5XG4gICAgICogQHBhcmFtIGluTWVtb3J5IC0ga2V5IHZhbHVlIG1hcCBvZiB0aGUgY2FjaGVcbiAgICAgKi9cbiAgICByZW1vdmVJdGVtKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlUGlpKGBJdGVtIGtleTogJHtrZXl9YCk7XG5cbiAgICAgICAgLy8gcmVhZCBpbk1lbW9yeUNhY2hlXG4gICAgICAgIGxldCByZXN1bHQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLmdldENhY2hlKCk7XG5cbiAgICAgICAgaWYgKCEhY2FjaGVba2V5XSkge1xuICAgICAgICAgICAgZGVsZXRlIGNhY2hlW2tleV07XG4gICAgICAgICAgICByZXN1bHQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gd3JpdGUgdG8gdGhlIGNhY2hlIGFmdGVyIHJlbW92YWxcbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy5zZXRDYWNoZShjYWNoZSk7XG4gICAgICAgICAgICB0aGlzLmVtaXRDaGFuZ2UoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhY2NvdW50IGVudGl0eSBmcm9tIHRoZSBwbGF0Zm9ybSBjYWNoZSBpZiBpdCdzIG91dGRhdGVkXG4gICAgICogQHBhcmFtIGFjY291bnRLZXkgLSBsb29rdXAga2V5IHRvIGZldGNoIGNhY2hlIHR5cGUgQWNjb3VudEVudGl0eVxuICAgICAqL1xuICAgIHJlbW92ZU91dGRhdGVkQWNjb3VudChhY2NvdW50S2V5OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZW1vdmVJdGVtKGFjY291bnRLZXkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyB3aGV0aGVyIGtleSBpcyBpbiBjYWNoZS5cbiAgICAgKiBAcGFyYW0ga2V5IC0gbG9vayB1cCBrZXkgZm9yIGEgY2FjaGUgZW50aXR5XG4gICAgICovXG4gICAgY29udGFpbnNLZXkoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0S2V5cygpLmluY2x1ZGVzKGtleSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBhbGwga2V5cyBpbiB3aW5kb3cuXG4gICAgICovXG4gICAgZ2V0S2V5cygpOiBzdHJpbmdbXSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKFwiUmV0cmlldmluZyBhbGwgY2FjaGUga2V5c1wiKTtcblxuICAgICAgICAvLyByZWFkIGNhY2hlXG4gICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5nZXRDYWNoZSgpO1xuICAgICAgICByZXR1cm4gWy4uLk9iamVjdC5rZXlzKGNhY2hlKV07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xlYXJzIGFsbCBjYWNoZSBlbnRyaWVzIGNyZWF0ZWQgYnkgTVNBTCAoZXhjZXB0IHRva2VucykuXG4gICAgICovXG4gICAgY2xlYXIoKTogdm9pZCB7XG4gICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKFwiQ2xlYXJpbmcgY2FjaGUgZW50cmllcyBjcmVhdGVkIGJ5IE1TQUxcIik7XG5cbiAgICAgICAgLy8gcmVhZCBpbk1lbW9yeUNhY2hlXG4gICAgICAgIGNvbnN0IGNhY2hlS2V5cyA9IHRoaXMuZ2V0S2V5cygpO1xuXG4gICAgICAgIC8vIGRlbGV0ZSBlYWNoIGVsZW1lbnRcbiAgICAgICAgY2FjaGVLZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVJdGVtKGtleSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVtaXRDaGFuZ2UoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIGluIG1lbW9yeSBjYWNoZSBmcm9tIGFuIGV4aXNpdGluZyBjYWNoZSB2YXVsdFxuICAgICAqIEBwYXJhbSBjYWNoZSAtIGJsb2IgZm9ybWF0dGVkIGNhY2hlIChKU09OKVxuICAgICAqL1xuICAgIHN0YXRpYyBnZW5lcmF0ZUluTWVtb3J5Q2FjaGUoY2FjaGU6IHN0cmluZyk6IEluTWVtb3J5Q2FjaGUge1xuICAgICAgICByZXR1cm4gRGVzZXJpYWxpemVyLmRlc2VyaWFsaXplQWxsQ2FjaGUoXG4gICAgICAgICAgICBEZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVKU09OQmxvYihjYWNoZSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZXRyaWV2ZXMgdGhlIGZpbmFsIEpTT05cbiAgICAgKiBAcGFyYW0gaW5NZW1vcnlDYWNoZSAtIGl0ZW1pc2VkIGNhY2hlIHJlYWQgZnJvbSB0aGUgSlNPTlxuICAgICAqL1xuICAgIHN0YXRpYyBnZW5lcmF0ZUpzb25DYWNoZShpbk1lbW9yeUNhY2hlOiBJbk1lbW9yeUNhY2hlKTogSnNvbkNhY2hlIHtcbiAgICAgICAgcmV0dXJuIFNlcmlhbGl6ZXIuc2VyaWFsaXplQWxsQ2FjaGUoaW5NZW1vcnlDYWNoZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBhIGNyZWRlbnRpYWwncyBjYWNoZSBrZXkgaWYgdGhlIGN1cnJlbnQgY2FjaGUga2V5IGlzIG91dGRhdGVkXG4gICAgICovXG4gICAgdXBkYXRlQ3JlZGVudGlhbENhY2hlS2V5KFxuICAgICAgICBjdXJyZW50Q2FjaGVLZXk6IHN0cmluZyxcbiAgICAgICAgY3JlZGVudGlhbDogVmFsaWRDcmVkZW50aWFsVHlwZVxuICAgICk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRDYWNoZUtleSA9IENhY2hlSGVscGVycy5nZW5lcmF0ZUNyZWRlbnRpYWxLZXkoY3JlZGVudGlhbCk7XG5cbiAgICAgICAgaWYgKGN1cnJlbnRDYWNoZUtleSAhPT0gdXBkYXRlZENhY2hlS2V5KSB7XG4gICAgICAgICAgICBjb25zdCBjYWNoZUl0ZW0gPSB0aGlzLmdldEl0ZW0oY3VycmVudENhY2hlS2V5KTtcbiAgICAgICAgICAgIGlmIChjYWNoZUl0ZW0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUl0ZW0oY3VycmVudENhY2hlS2V5KTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEl0ZW0odXBkYXRlZENhY2hlS2V5LCBjYWNoZUl0ZW0pO1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgICAgIGBVcGRhdGVkIGFuIG91dGRhdGVkICR7Y3JlZGVudGlhbC5jcmVkZW50aWFsVHlwZX0gY2FjaGUga2V5YFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZWRDYWNoZUtleTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIGBBdHRlbXB0ZWQgdG8gdXBkYXRlIGFuIG91dGRhdGVkICR7Y3JlZGVudGlhbC5jcmVkZW50aWFsVHlwZX0gY2FjaGUga2V5IGJ1dCBubyBpdGVtIG1hdGNoaW5nIHRoZSBvdXRkYXRlZCBrZXkgd2FzIGZvdW5kIGluIHN0b3JhZ2VgXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjdXJyZW50Q2FjaGVLZXk7XG4gICAgfVxufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBOb2RlU3RvcmFnZSB9IGZyb20gXCIuL05vZGVTdG9yYWdlLmpzXCI7XG5pbXBvcnQge1xuICAgIEFjY291bnRFbnRpdHksXG4gICAgQWNjb3VudEluZm8sXG4gICAgTG9nZ2VyLFxuICAgIElTZXJpYWxpemFibGVUb2tlbkNhY2hlLFxuICAgIElDYWNoZVBsdWdpbixcbiAgICBUb2tlbkNhY2hlQ29udGV4dCxcbn0gZnJvbSBcIkBhenVyZS9tc2FsLWNvbW1vbi9ub2RlXCI7XG5pbXBvcnQge1xuICAgIEluTWVtb3J5Q2FjaGUsXG4gICAgSnNvbkNhY2hlLFxuICAgIFNlcmlhbGl6ZWRBY2NvdW50RW50aXR5LFxuICAgIFNlcmlhbGl6ZWRBY2Nlc3NUb2tlbkVudGl0eSxcbiAgICBTZXJpYWxpemVkUmVmcmVzaFRva2VuRW50aXR5LFxuICAgIFNlcmlhbGl6ZWRJZFRva2VuRW50aXR5LFxuICAgIFNlcmlhbGl6ZWRBcHBNZXRhZGF0YUVudGl0eSxcbiAgICBDYWNoZUtWU3RvcmUsXG59IGZyb20gXCIuL3NlcmlhbGl6ZXIvU2VyaWFsaXplclR5cGVzLmpzXCI7XG5pbXBvcnQgeyBEZXNlcmlhbGl6ZXIgfSBmcm9tIFwiLi9zZXJpYWxpemVyL0Rlc2VyaWFsaXplci5qc1wiO1xuaW1wb3J0IHsgU2VyaWFsaXplciB9IGZyb20gXCIuL3NlcmlhbGl6ZXIvU2VyaWFsaXplci5qc1wiO1xuaW1wb3J0IHsgSVRva2VuQ2FjaGUgfSBmcm9tIFwiLi9JVG9rZW5DYWNoZS5qc1wiO1xuXG5jb25zdCBkZWZhdWx0U2VyaWFsaXplZENhY2hlOiBKc29uQ2FjaGUgPSB7XG4gICAgQWNjb3VudDoge30sXG4gICAgSWRUb2tlbjoge30sXG4gICAgQWNjZXNzVG9rZW46IHt9LFxuICAgIFJlZnJlc2hUb2tlbjoge30sXG4gICAgQXBwTWV0YWRhdGE6IHt9LFxufTtcblxuLyoqXG4gKiBJbi1tZW1vcnkgdG9rZW4gY2FjaGUgbWFuYWdlclxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgVG9rZW5DYWNoZSBpbXBsZW1lbnRzIElTZXJpYWxpemFibGVUb2tlbkNhY2hlLCBJVG9rZW5DYWNoZSB7XG4gICAgcHJpdmF0ZSBzdG9yYWdlOiBOb2RlU3RvcmFnZTtcbiAgICBwcml2YXRlIGNhY2hlSGFzQ2hhbmdlZDogYm9vbGVhbjtcbiAgICBwcml2YXRlIGNhY2hlU25hcHNob3Q6IHN0cmluZztcbiAgICBwdWJsaWMgcmVhZG9ubHkgcGVyc2lzdGVuY2U6IElDYWNoZVBsdWdpbjtcbiAgICBwcml2YXRlIGxvZ2dlcjogTG9nZ2VyO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHN0b3JhZ2U6IE5vZGVTdG9yYWdlLFxuICAgICAgICBsb2dnZXI6IExvZ2dlcixcbiAgICAgICAgY2FjaGVQbHVnaW4/OiBJQ2FjaGVQbHVnaW5cbiAgICApIHtcbiAgICAgICAgdGhpcy5jYWNoZUhhc0NoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zdG9yYWdlID0gc3RvcmFnZTtcbiAgICAgICAgdGhpcy5zdG9yYWdlLnJlZ2lzdGVyQ2hhbmdlRW1pdHRlcih0aGlzLmhhbmRsZUNoYW5nZUV2ZW50LmJpbmQodGhpcykpO1xuICAgICAgICBpZiAoY2FjaGVQbHVnaW4pIHtcbiAgICAgICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSBjYWNoZVBsdWdpbjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvZ2dlciA9IGxvZ2dlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdG8gdHJ1ZSBpZiBjYWNoZSBzdGF0ZSBoYXMgY2hhbmdlZCBzaW5jZSBsYXN0IHRpbWUgc2VyaWFsaXplIG9yIHdyaXRlVG9QZXJzaXN0ZW5jZSB3YXMgY2FsbGVkXG4gICAgICovXG4gICAgaGFzQ2hhbmdlZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVIYXNDaGFuZ2VkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNlcmlhbGl6ZXMgaW4gbWVtb3J5IGNhY2hlIHRvIEpTT05cbiAgICAgKi9cbiAgICBzZXJpYWxpemUoKTogc3RyaW5nIHtcbiAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoXCJTZXJpYWxpemluZyBpbi1tZW1vcnkgY2FjaGVcIik7XG4gICAgICAgIGxldCBmaW5hbFN0YXRlID0gU2VyaWFsaXplci5zZXJpYWxpemVBbGxDYWNoZShcbiAgICAgICAgICAgIHRoaXMuc3RvcmFnZS5nZXRJbk1lbW9yeUNhY2hlKCkgYXMgSW5NZW1vcnlDYWNoZVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIGlmIGNhY2hlU25hcHNob3Qgbm90IG51bGwgb3IgZW1wdHksIG1lcmdlXG4gICAgICAgIGlmICh0aGlzLmNhY2hlU25hcHNob3QpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKFwiUmVhZGluZyBjYWNoZSBzbmFwc2hvdCBmcm9tIGRpc2tcIik7XG4gICAgICAgICAgICBmaW5hbFN0YXRlID0gdGhpcy5tZXJnZVN0YXRlKFxuICAgICAgICAgICAgICAgIEpTT04ucGFyc2UodGhpcy5jYWNoZVNuYXBzaG90KSxcbiAgICAgICAgICAgICAgICBmaW5hbFN0YXRlXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoXCJObyBjYWNoZSBzbmFwc2hvdCB0byBtZXJnZVwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhY2hlSGFzQ2hhbmdlZCA9IGZhbHNlO1xuXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShmaW5hbFN0YXRlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXNlcmlhbGl6ZXMgSlNPTiB0byBpbi1tZW1vcnkgY2FjaGUuIEpTT04gc2hvdWxkIGJlIGluIE1TQUwgY2FjaGUgc2NoZW1hIGZvcm1hdFxuICAgICAqIEBwYXJhbSBjYWNoZSAtIGJsb2IgZm9ybWF0dGVkIGNhY2hlXG4gICAgICovXG4gICAgZGVzZXJpYWxpemUoY2FjaGU6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShcIkRlc2VyaWFsaXppbmcgSlNPTiB0byBpbi1tZW1vcnkgY2FjaGVcIik7XG4gICAgICAgIHRoaXMuY2FjaGVTbmFwc2hvdCA9IGNhY2hlO1xuXG4gICAgICAgIGlmICh0aGlzLmNhY2hlU25hcHNob3QpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKFwiUmVhZGluZyBjYWNoZSBzbmFwc2hvdCBmcm9tIGRpc2tcIik7XG4gICAgICAgICAgICBjb25zdCBkZXNlcmlhbGl6ZWRDYWNoZSA9IERlc2VyaWFsaXplci5kZXNlcmlhbGl6ZUFsbENhY2hlKFxuICAgICAgICAgICAgICAgIHRoaXMub3ZlcmxheURlZmF1bHRzKEpTT04ucGFyc2UodGhpcy5jYWNoZVNuYXBzaG90KSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0SW5NZW1vcnlDYWNoZShkZXNlcmlhbGl6ZWRDYWNoZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShcIk5vIGNhY2hlIHNuYXBzaG90IHRvIGRlc2VyaWFsaXplXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmV0Y2hlcyB0aGUgY2FjaGUga2V5LXZhbHVlIG1hcFxuICAgICAqL1xuICAgIGdldEtWU3RvcmUoKTogQ2FjaGVLVlN0b3JlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RvcmFnZS5nZXRDYWNoZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgY2FjaGUgc25hcHNob3QgaW4gQ2FjaGVLVlN0b3JlIGZvcm1hdFxuICAgICAqL1xuICAgIGdldENhY2hlU25hcHNob3QoKTogQ2FjaGVLVlN0b3JlIHtcbiAgICAgICAgY29uc3QgZGVzZXJpYWxpemVkUGVyc2lzdGVudFN0b3JhZ2UgPSBOb2RlU3RvcmFnZS5nZW5lcmF0ZUluTWVtb3J5Q2FjaGUoXG4gICAgICAgICAgICB0aGlzLmNhY2hlU25hcHNob3RcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RvcmFnZS5pbk1lbW9yeUNhY2hlVG9DYWNoZShkZXNlcmlhbGl6ZWRQZXJzaXN0ZW50U3RvcmFnZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQVBJIHRoYXQgcmV0cmlldmVzIGFsbCBhY2NvdW50cyBjdXJyZW50bHkgaW4gY2FjaGUgdG8gdGhlIHVzZXJcbiAgICAgKi9cbiAgICBhc3luYyBnZXRBbGxBY2NvdW50cygpOiBQcm9taXNlPEFjY291bnRJbmZvW10+IHtcbiAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoXCJnZXRBbGxBY2NvdW50cyBjYWxsZWRcIik7XG4gICAgICAgIGxldCBjYWNoZUNvbnRleHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wZXJzaXN0ZW5jZSkge1xuICAgICAgICAgICAgICAgIGNhY2hlQ29udGV4dCA9IG5ldyBUb2tlbkNhY2hlQ29udGV4dCh0aGlzLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5iZWZvcmVDYWNoZUFjY2VzcyhjYWNoZUNvbnRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RvcmFnZS5nZXRBbGxBY2NvdW50cygpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGVyc2lzdGVuY2UgJiYgY2FjaGVDb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5hZnRlckNhY2hlQWNjZXNzKGNhY2hlQ29udGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBzaWduZWQgaW4gYWNjb3VudCBtYXRjaGluZyBob21lQWNjb3VudElkLlxuICAgICAqICh0aGUgYWNjb3VudCBvYmplY3QgaXMgY3JlYXRlZCBhdCB0aGUgdGltZSBvZiBzdWNjZXNzZnVsIGxvZ2luKVxuICAgICAqIG9yIG51bGwgd2hlbiBubyBtYXRjaGluZyBhY2NvdW50IGlzIGZvdW5kXG4gICAgICogQHBhcmFtIGhvbWVBY2NvdW50SWQgLSB1bmlxdWUgaWRlbnRpZmllciBmb3IgYW4gYWNjb3VudCAodWlkLnV0aWQpXG4gICAgICovXG4gICAgYXN5bmMgZ2V0QWNjb3VudEJ5SG9tZUlkKFxuICAgICAgICBob21lQWNjb3VudElkOiBzdHJpbmdcbiAgICApOiBQcm9taXNlPEFjY291bnRJbmZvIHwgbnVsbD4ge1xuICAgICAgICBjb25zdCBhbGxBY2NvdW50cyA9IGF3YWl0IHRoaXMuZ2V0QWxsQWNjb3VudHMoKTtcbiAgICAgICAgaWYgKGhvbWVBY2NvdW50SWQgJiYgYWxsQWNjb3VudHMgJiYgYWxsQWNjb3VudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIGFsbEFjY291bnRzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGFjY291bnRPYmopID0+IGFjY291bnRPYmouaG9tZUFjY291bnRJZCA9PT0gaG9tZUFjY291bnRJZFxuICAgICAgICAgICAgICAgIClbMF0gfHwgbnVsbFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgc2lnbmVkIGluIGFjY291bnQgbWF0Y2hpbmcgbG9jYWxBY2NvdW50SWQuXG4gICAgICogKHRoZSBhY2NvdW50IG9iamVjdCBpcyBjcmVhdGVkIGF0IHRoZSB0aW1lIG9mIHN1Y2Nlc3NmdWwgbG9naW4pXG4gICAgICogb3IgbnVsbCB3aGVuIG5vIG1hdGNoaW5nIGFjY291bnQgaXMgZm91bmRcbiAgICAgKiBAcGFyYW0gbG9jYWxBY2NvdW50SWQgLSB1bmlxdWUgaWRlbnRpZmllciBvZiBhbiBhY2NvdW50IChzdWIvb2JqIHdoZW4gaG9tZUFjY291bnRJZCBjYW5ub3QgYmUgcG9wdWxhdGVkKVxuICAgICAqL1xuICAgIGFzeW5jIGdldEFjY291bnRCeUxvY2FsSWQoXG4gICAgICAgIGxvY2FsQWNjb3VudElkOiBzdHJpbmdcbiAgICApOiBQcm9taXNlPEFjY291bnRJbmZvIHwgbnVsbD4ge1xuICAgICAgICBjb25zdCBhbGxBY2NvdW50cyA9IGF3YWl0IHRoaXMuZ2V0QWxsQWNjb3VudHMoKTtcbiAgICAgICAgaWYgKGxvY2FsQWNjb3VudElkICYmIGFsbEFjY291bnRzICYmIGFsbEFjY291bnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICBhbGxBY2NvdW50cy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgIChhY2NvdW50T2JqKSA9PiBhY2NvdW50T2JqLmxvY2FsQWNjb3VudElkID09PSBsb2NhbEFjY291bnRJZFxuICAgICAgICAgICAgICAgIClbMF0gfHwgbnVsbFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQVBJIHRvIHJlbW92ZSBhIHNwZWNpZmljIGFjY291bnQgYW5kIHRoZSByZWxldmFudCBkYXRhIGZyb20gY2FjaGVcbiAgICAgKiBAcGFyYW0gYWNjb3VudCAtIEFjY291bnRJbmZvIHBhc3NlZCBieSB0aGUgdXNlclxuICAgICAqL1xuICAgIGFzeW5jIHJlbW92ZUFjY291bnQoYWNjb3VudDogQWNjb3VudEluZm8pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoXCJyZW1vdmVBY2NvdW50IGNhbGxlZFwiKTtcbiAgICAgICAgbGV0IGNhY2hlQ29udGV4dDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBlcnNpc3RlbmNlKSB7XG4gICAgICAgICAgICAgICAgY2FjaGVDb250ZXh0ID0gbmV3IFRva2VuQ2FjaGVDb250ZXh0KHRoaXMsIHRydWUpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGVyc2lzdGVuY2UuYmVmb3JlQ2FjaGVBY2Nlc3MoY2FjaGVDb250ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc3RvcmFnZS5yZW1vdmVBY2NvdW50KFxuICAgICAgICAgICAgICAgIEFjY291bnRFbnRpdHkuZ2VuZXJhdGVBY2NvdW50Q2FjaGVLZXkoYWNjb3VudClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wZXJzaXN0ZW5jZSAmJiBjYWNoZUNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLmFmdGVyQ2FjaGVBY2Nlc3MoY2FjaGVDb250ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE92ZXJ3cml0ZXMgaW4tbWVtb3J5IGNhY2hlIHdpdGggcGVyc2lzdGVudCBjYWNoZVxuICAgICAqL1xuICAgIGFzeW5jIG92ZXJ3cml0ZUNhY2hlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoIXRoaXMucGVyc2lzdGVuY2UpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXG4gICAgICAgICAgICAgICAgXCJObyBwZXJzaXN0ZW5jZSBsYXllciBzcGVjaWZpZWQsIGNhY2hlIGNhbm5vdCBiZSBvdmVyd3JpdHRlblwiXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXCJPdmVyd3JpdGluZyBpbi1tZW1vcnkgY2FjaGUgd2l0aCBwZXJzaXN0ZW50IGNhY2hlXCIpO1xuICAgICAgICB0aGlzLnN0b3JhZ2UuY2xlYXIoKTtcbiAgICAgICAgY29uc3QgY2FjaGVDb250ZXh0ID0gbmV3IFRva2VuQ2FjaGVDb250ZXh0KHRoaXMsIGZhbHNlKTtcbiAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5iZWZvcmVDYWNoZUFjY2VzcyhjYWNoZUNvbnRleHQpO1xuICAgICAgICBjb25zdCBjYWNoZVNuYXBzaG90ID0gdGhpcy5nZXRDYWNoZVNuYXBzaG90KCk7XG4gICAgICAgIHRoaXMuc3RvcmFnZS5zZXRDYWNoZShjYWNoZVNuYXBzaG90KTtcbiAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5hZnRlckNhY2hlQWNjZXNzKGNhY2hlQ29udGV4dCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdoZW4gdGhlIGNhY2hlIGhhcyBjaGFuZ2VkIHN0YXRlLlxuICAgICAqL1xuICAgIHByaXZhdGUgaGFuZGxlQ2hhbmdlRXZlbnQoKSB7XG4gICAgICAgIHRoaXMuY2FjaGVIYXNDaGFuZ2VkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNZXJnZSBpbiBtZW1vcnkgY2FjaGUgd2l0aCB0aGUgY2FjaGUgc25hcHNob3QuXG4gICAgICogQHBhcmFtIG9sZFN0YXRlIC0gY2FjaGUgYmVmb3JlIGNoYW5nZXNcbiAgICAgKiBAcGFyYW0gY3VycmVudFN0YXRlIC0gY3VycmVudCBjYWNoZSBzdGF0ZSBpbiB0aGUgbGlicmFyeVxuICAgICAqL1xuICAgIHByaXZhdGUgbWVyZ2VTdGF0ZShcbiAgICAgICAgb2xkU3RhdGU6IEpzb25DYWNoZSxcbiAgICAgICAgY3VycmVudFN0YXRlOiBKc29uQ2FjaGVcbiAgICApOiBKc29uQ2FjaGUge1xuICAgICAgICB0aGlzLmxvZ2dlci50cmFjZShcIk1lcmdpbmcgaW4tbWVtb3J5IGNhY2hlIHdpdGggY2FjaGUgc25hcHNob3RcIik7XG4gICAgICAgIGNvbnN0IHN0YXRlQWZ0ZXJSZW1vdmFsID0gdGhpcy5tZXJnZVJlbW92YWxzKG9sZFN0YXRlLCBjdXJyZW50U3RhdGUpO1xuICAgICAgICByZXR1cm4gdGhpcy5tZXJnZVVwZGF0ZXMoc3RhdGVBZnRlclJlbW92YWwsIGN1cnJlbnRTdGF0ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVlcCB1cGRhdGUgb2Ygb2xkU3RhdGUgYmFzZWQgb24gbmV3U3RhdGUgdmFsdWVzXG4gICAgICogQHBhcmFtIG9sZFN0YXRlIC0gY2FjaGUgYmVmb3JlIGNoYW5nZXNcbiAgICAgKiBAcGFyYW0gbmV3U3RhdGUgLSB1cGRhdGVkIGNhY2hlXG4gICAgICovXG4gICAgcHJpdmF0ZSBtZXJnZVVwZGF0ZXMob2xkU3RhdGU6IG9iamVjdCwgbmV3U3RhdGU6IG9iamVjdCk6IEpzb25DYWNoZSB7XG4gICAgICAgIE9iamVjdC5rZXlzKG5ld1N0YXRlKS5mb3JFYWNoKChuZXdLZXk6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBuZXdTdGF0ZVtuZXdLZXldO1xuXG4gICAgICAgICAgICAvLyBpZiBvbGRTdGF0ZSBkb2VzIG5vdCBjb250YWluIHZhbHVlIGJ1dCBuZXdWYWx1ZSBkb2VzLCBhZGQgaXRcbiAgICAgICAgICAgIGlmICghb2xkU3RhdGUuaGFzT3duUHJvcGVydHkobmV3S2V5KSkge1xuICAgICAgICAgICAgICAgIGlmIChuZXdWYWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBvbGRTdGF0ZVtuZXdLZXldID0gbmV3VmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBib3RoIG9sZFN0YXRlIGFuZCBuZXdTdGF0ZSBjb250YWluIHRoZSBrZXksIGRvIGRlZXAgdXBkYXRlXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VmFsdWVOb3ROdWxsID0gbmV3VmFsdWUgIT09IG51bGw7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VmFsdWVJc09iamVjdCA9IHR5cGVvZiBuZXdWYWx1ZSA9PT0gXCJvYmplY3RcIjtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdWYWx1ZUlzTm90QXJyYXkgPSAhQXJyYXkuaXNBcnJheShuZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkU3RhdGVOb3RVbmRlZmluZWRPck51bGwgPVxuICAgICAgICAgICAgICAgICAgICB0eXBlb2Ygb2xkU3RhdGVbbmV3S2V5XSAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgICAgICAgICAgICAgICBvbGRTdGF0ZVtuZXdLZXldICE9PSBudWxsO1xuXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZU5vdE51bGwgJiZcbiAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWVJc09iamVjdCAmJlxuICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZUlzTm90QXJyYXkgJiZcbiAgICAgICAgICAgICAgICAgICAgb2xkU3RhdGVOb3RVbmRlZmluZWRPck51bGxcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXJnZVVwZGF0ZXMob2xkU3RhdGVbbmV3S2V5XSwgbmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG9sZFN0YXRlW25ld0tleV0gPSBuZXdWYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBvbGRTdGF0ZSBhcyBKc29uQ2FjaGU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBlbnRpdGllcyBpbiBvbGRTdGF0ZSB0aGF0IHRoZSB3ZXJlIHJlbW92ZWQgZnJvbSBuZXdTdGF0ZS4gSWYgdGhlcmUgYXJlIGFueSB1bmtub3duIHZhbHVlcyBpbiByb290IG9mXG4gICAgICogb2xkU3RhdGUgdGhhdCBhcmUgbm90IHJlY29nbml6ZWQsIHRoZXkgYXJlIGxlZnQgdW50b3VjaGVkLlxuICAgICAqIEBwYXJhbSBvbGRTdGF0ZSAtIGNhY2hlIGJlZm9yZSBjaGFuZ2VzXG4gICAgICogQHBhcmFtIG5ld1N0YXRlIC0gdXBkYXRlZCBjYWNoZVxuICAgICAqL1xuICAgIHByaXZhdGUgbWVyZ2VSZW1vdmFscyhvbGRTdGF0ZTogSnNvbkNhY2hlLCBuZXdTdGF0ZTogSnNvbkNhY2hlKTogSnNvbkNhY2hlIHtcbiAgICAgICAgdGhpcy5sb2dnZXIudHJhY2UoXCJSZW1vdmUgdXBkYXRlZCBlbnRyaWVzIGluIGNhY2hlXCIpO1xuICAgICAgICBjb25zdCBhY2NvdW50cyA9IG9sZFN0YXRlLkFjY291bnRcbiAgICAgICAgICAgID8gdGhpcy5tZXJnZVJlbW92YWxzRGljdDxTZXJpYWxpemVkQWNjb3VudEVudGl0eT4oXG4gICAgICAgICAgICAgICAgICBvbGRTdGF0ZS5BY2NvdW50LFxuICAgICAgICAgICAgICAgICAgbmV3U3RhdGUuQWNjb3VudFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICA6IG9sZFN0YXRlLkFjY291bnQ7XG4gICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VucyA9IG9sZFN0YXRlLkFjY2Vzc1Rva2VuXG4gICAgICAgICAgICA/IHRoaXMubWVyZ2VSZW1vdmFsc0RpY3Q8U2VyaWFsaXplZEFjY2Vzc1Rva2VuRW50aXR5PihcbiAgICAgICAgICAgICAgICAgIG9sZFN0YXRlLkFjY2Vzc1Rva2VuLFxuICAgICAgICAgICAgICAgICAgbmV3U3RhdGUuQWNjZXNzVG9rZW5cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgOiBvbGRTdGF0ZS5BY2Nlc3NUb2tlbjtcbiAgICAgICAgY29uc3QgcmVmcmVzaFRva2VucyA9IG9sZFN0YXRlLlJlZnJlc2hUb2tlblxuICAgICAgICAgICAgPyB0aGlzLm1lcmdlUmVtb3ZhbHNEaWN0PFNlcmlhbGl6ZWRSZWZyZXNoVG9rZW5FbnRpdHk+KFxuICAgICAgICAgICAgICAgICAgb2xkU3RhdGUuUmVmcmVzaFRva2VuLFxuICAgICAgICAgICAgICAgICAgbmV3U3RhdGUuUmVmcmVzaFRva2VuXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIDogb2xkU3RhdGUuUmVmcmVzaFRva2VuO1xuICAgICAgICBjb25zdCBpZFRva2VucyA9IG9sZFN0YXRlLklkVG9rZW5cbiAgICAgICAgICAgID8gdGhpcy5tZXJnZVJlbW92YWxzRGljdDxTZXJpYWxpemVkSWRUb2tlbkVudGl0eT4oXG4gICAgICAgICAgICAgICAgICBvbGRTdGF0ZS5JZFRva2VuLFxuICAgICAgICAgICAgICAgICAgbmV3U3RhdGUuSWRUb2tlblxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICA6IG9sZFN0YXRlLklkVG9rZW47XG4gICAgICAgIGNvbnN0IGFwcE1ldGFkYXRhID0gb2xkU3RhdGUuQXBwTWV0YWRhdGFcbiAgICAgICAgICAgID8gdGhpcy5tZXJnZVJlbW92YWxzRGljdDxTZXJpYWxpemVkQXBwTWV0YWRhdGFFbnRpdHk+KFxuICAgICAgICAgICAgICAgICAgb2xkU3RhdGUuQXBwTWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgICBuZXdTdGF0ZS5BcHBNZXRhZGF0YVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICA6IG9sZFN0YXRlLkFwcE1ldGFkYXRhO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5vbGRTdGF0ZSxcbiAgICAgICAgICAgIEFjY291bnQ6IGFjY291bnRzLFxuICAgICAgICAgICAgQWNjZXNzVG9rZW46IGFjY2Vzc1Rva2VucyxcbiAgICAgICAgICAgIFJlZnJlc2hUb2tlbjogcmVmcmVzaFRva2VucyxcbiAgICAgICAgICAgIElkVG9rZW46IGlkVG9rZW5zLFxuICAgICAgICAgICAgQXBwTWV0YWRhdGE6IGFwcE1ldGFkYXRhLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhlbHBlciB0byBtZXJnZSBuZXcgY2FjaGUgd2l0aCB0aGUgb2xkIG9uZVxuICAgICAqIEBwYXJhbSBvbGRTdGF0ZSAtIGNhY2hlIGJlZm9yZSBjaGFuZ2VzXG4gICAgICogQHBhcmFtIG5ld1N0YXRlIC0gdXBkYXRlZCBjYWNoZVxuICAgICAqL1xuICAgIHByaXZhdGUgbWVyZ2VSZW1vdmFsc0RpY3Q8VD4oXG4gICAgICAgIG9sZFN0YXRlOiBSZWNvcmQ8c3RyaW5nLCBUPixcbiAgICAgICAgbmV3U3RhdGU/OiBSZWNvcmQ8c3RyaW5nLCBUPlxuICAgICk6IFJlY29yZDxzdHJpbmcsIFQ+IHtcbiAgICAgICAgY29uc3QgZmluYWxTdGF0ZSA9IHsgLi4ub2xkU3RhdGUgfTtcbiAgICAgICAgT2JqZWN0LmtleXMob2xkU3RhdGUpLmZvckVhY2goKG9sZEtleSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFuZXdTdGF0ZSB8fCAhbmV3U3RhdGUuaGFzT3duUHJvcGVydHkob2xkS2V5KSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBmaW5hbFN0YXRlW29sZEtleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmluYWxTdGF0ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgdG8gb3ZlcmxheSBhcyBhIHBhcnQgb2YgY2FjaGUgbWVyZ2VcbiAgICAgKiBAcGFyYW0gcGFzc2VkSW5DYWNoZSAtIGNhY2hlIHJlYWQgZnJvbSB0aGUgYmxvYlxuICAgICAqL1xuICAgIHByaXZhdGUgb3ZlcmxheURlZmF1bHRzKHBhc3NlZEluQ2FjaGU6IEpzb25DYWNoZSk6IEpzb25DYWNoZSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLnRyYWNlKFwiT3ZlcmxheWluZyBpbnB1dCBjYWNoZSB3aXRoIHRoZSBkZWZhdWx0IGNhY2hlXCIpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgQWNjb3VudDoge1xuICAgICAgICAgICAgICAgIC4uLmRlZmF1bHRTZXJpYWxpemVkQ2FjaGUuQWNjb3VudCxcbiAgICAgICAgICAgICAgICAuLi5wYXNzZWRJbkNhY2hlLkFjY291bnQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgSWRUb2tlbjoge1xuICAgICAgICAgICAgICAgIC4uLmRlZmF1bHRTZXJpYWxpemVkQ2FjaGUuSWRUb2tlbixcbiAgICAgICAgICAgICAgICAuLi5wYXNzZWRJbkNhY2hlLklkVG9rZW4sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgQWNjZXNzVG9rZW46IHtcbiAgICAgICAgICAgICAgICAuLi5kZWZhdWx0U2VyaWFsaXplZENhY2hlLkFjY2Vzc1Rva2VuLFxuICAgICAgICAgICAgICAgIC4uLnBhc3NlZEluQ2FjaGUuQWNjZXNzVG9rZW4sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgUmVmcmVzaFRva2VuOiB7XG4gICAgICAgICAgICAgICAgLi4uZGVmYXVsdFNlcmlhbGl6ZWRDYWNoZS5SZWZyZXNoVG9rZW4sXG4gICAgICAgICAgICAgICAgLi4ucGFzc2VkSW5DYWNoZS5SZWZyZXNoVG9rZW4sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgQXBwTWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAuLi5kZWZhdWx0U2VyaWFsaXplZENhY2hlLkFwcE1ldGFkYXRhLFxuICAgICAgICAgICAgICAgIC4uLnBhc3NlZEluQ2FjaGUuQXBwTWV0YWRhdGEsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XG5pbXBvcnQge1xuICAgIFRpbWVVdGlscyxcbiAgICBDb25zdGFudHMsXG4gICAgY3JlYXRlQ2xpZW50QXV0aEVycm9yLFxuICAgIENsaWVudEF1dGhFcnJvckNvZGVzLFxufSBmcm9tIFwiQGF6dXJlL21zYWwtY29tbW9uL25vZGVcIjtcbmltcG9ydCB7IENyeXB0b1Byb3ZpZGVyIH0gZnJvbSBcIi4uL2NyeXB0by9DcnlwdG9Qcm92aWRlci5qc1wiO1xuaW1wb3J0IHsgRW5jb2RpbmdVdGlscyB9IGZyb20gXCIuLi91dGlscy9FbmNvZGluZ1V0aWxzLmpzXCI7XG5pbXBvcnQgeyBKd3RDb25zdGFudHMgfSBmcm9tIFwiLi4vdXRpbHMvQ29uc3RhbnRzLmpzXCI7XG5cbi8qKlxuICogQ2xpZW50IGFzc2VydGlvbiBvZiB0eXBlIGp3dC1iZWFyZXIgdXNlZCBpbiBjb25maWRlbnRpYWwgY2xpZW50IGZsb3dzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBDbGllbnRBc3NlcnRpb24ge1xuICAgIHByaXZhdGUgand0OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBwcml2YXRlS2V5OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSB0aHVtYnByaW50OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSB1c2VTaGEyNTY6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBleHBpcmF0aW9uVGltZTogbnVtYmVyO1xuICAgIHByaXZhdGUgaXNzdWVyOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBqd3RBdWRpZW5jZTogc3RyaW5nO1xuICAgIHByaXZhdGUgcHVibGljQ2VydGlmaWNhdGU6IEFycmF5PHN0cmluZz47XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIHRoZSBDbGllbnRBc3NlcnRpb24gY2xhc3MgZnJvbSB0aGUgY2xpZW50QXNzZXJ0aW9uIHBhc3NlZCBieSB0aGUgdXNlclxuICAgICAqIEBwYXJhbSBhc3NlcnRpb24gLSByZWZlciBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNzUyMVxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgZnJvbUFzc2VydGlvbihhc3NlcnRpb246IHN0cmluZyk6IENsaWVudEFzc2VydGlvbiB7XG4gICAgICAgIGNvbnN0IGNsaWVudEFzc2VydGlvbiA9IG5ldyBDbGllbnRBc3NlcnRpb24oKTtcbiAgICAgICAgY2xpZW50QXNzZXJ0aW9uLmp3dCA9IGFzc2VydGlvbjtcbiAgICAgICAgcmV0dXJuIGNsaWVudEFzc2VydGlvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgZnJvbUNlcnRpZmljYXRlV2l0aFNoYTI1NlRodW1icHJpbnQgaW5zdGVhZCwgd2l0aCBhIFNIQS0yNTYgdGh1bXByaW50XG4gICAgICogSW5pdGlhbGl6ZSB0aGUgQ2xpZW50QXNzZXJ0aW9uIGNsYXNzIGZyb20gdGhlIGNlcnRpZmljYXRlIHBhc3NlZCBieSB0aGUgdXNlclxuICAgICAqIEBwYXJhbSB0aHVtYnByaW50IC0gaWRlbnRpZmllciBvZiBhIGNlcnRpZmljYXRlXG4gICAgICogQHBhcmFtIHByaXZhdGVLZXkgLSBzZWNyZXQga2V5XG4gICAgICogQHBhcmFtIHB1YmxpY0NlcnRpZmljYXRlIC0gZWxlY3Ryb25pYyBkb2N1bWVudCBwcm92aWRlZCB0byBwcm92ZSB0aGUgb3duZXJzaGlwIG9mIHRoZSBwdWJsaWMga2V5XG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBmcm9tQ2VydGlmaWNhdGUoXG4gICAgICAgIHRodW1icHJpbnQ6IHN0cmluZyxcbiAgICAgICAgcHJpdmF0ZUtleTogc3RyaW5nLFxuICAgICAgICBwdWJsaWNDZXJ0aWZpY2F0ZT86IHN0cmluZ1xuICAgICk6IENsaWVudEFzc2VydGlvbiB7XG4gICAgICAgIGNvbnN0IGNsaWVudEFzc2VydGlvbiA9IG5ldyBDbGllbnRBc3NlcnRpb24oKTtcbiAgICAgICAgY2xpZW50QXNzZXJ0aW9uLnByaXZhdGVLZXkgPSBwcml2YXRlS2V5O1xuICAgICAgICBjbGllbnRBc3NlcnRpb24udGh1bWJwcmludCA9IHRodW1icHJpbnQ7XG4gICAgICAgIGNsaWVudEFzc2VydGlvbi51c2VTaGEyNTYgPSBmYWxzZTtcbiAgICAgICAgaWYgKHB1YmxpY0NlcnRpZmljYXRlKSB7XG4gICAgICAgICAgICBjbGllbnRBc3NlcnRpb24ucHVibGljQ2VydGlmaWNhdGUgPVxuICAgICAgICAgICAgICAgIHRoaXMucGFyc2VDZXJ0aWZpY2F0ZShwdWJsaWNDZXJ0aWZpY2F0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNsaWVudEFzc2VydGlvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIHRoZSBDbGllbnRBc3NlcnRpb24gY2xhc3MgZnJvbSB0aGUgY2VydGlmaWNhdGUgcGFzc2VkIGJ5IHRoZSB1c2VyXG4gICAgICogQHBhcmFtIHRodW1icHJpbnQgLSBpZGVudGlmaWVyIG9mIGEgY2VydGlmaWNhdGVcbiAgICAgKiBAcGFyYW0gcHJpdmF0ZUtleSAtIHNlY3JldCBrZXlcbiAgICAgKiBAcGFyYW0gcHVibGljQ2VydGlmaWNhdGUgLSBlbGVjdHJvbmljIGRvY3VtZW50IHByb3ZpZGVkIHRvIHByb3ZlIHRoZSBvd25lcnNoaXAgb2YgdGhlIHB1YmxpYyBrZXlcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGZyb21DZXJ0aWZpY2F0ZVdpdGhTaGEyNTZUaHVtYnByaW50KFxuICAgICAgICB0aHVtYnByaW50OiBzdHJpbmcsXG4gICAgICAgIHByaXZhdGVLZXk6IHN0cmluZyxcbiAgICAgICAgcHVibGljQ2VydGlmaWNhdGU/OiBzdHJpbmdcbiAgICApOiBDbGllbnRBc3NlcnRpb24ge1xuICAgICAgICBjb25zdCBjbGllbnRBc3NlcnRpb24gPSBuZXcgQ2xpZW50QXNzZXJ0aW9uKCk7XG4gICAgICAgIGNsaWVudEFzc2VydGlvbi5wcml2YXRlS2V5ID0gcHJpdmF0ZUtleTtcbiAgICAgICAgY2xpZW50QXNzZXJ0aW9uLnRodW1icHJpbnQgPSB0aHVtYnByaW50O1xuICAgICAgICBjbGllbnRBc3NlcnRpb24udXNlU2hhMjU2ID0gdHJ1ZTtcbiAgICAgICAgaWYgKHB1YmxpY0NlcnRpZmljYXRlKSB7XG4gICAgICAgICAgICBjbGllbnRBc3NlcnRpb24ucHVibGljQ2VydGlmaWNhdGUgPVxuICAgICAgICAgICAgICAgIHRoaXMucGFyc2VDZXJ0aWZpY2F0ZShwdWJsaWNDZXJ0aWZpY2F0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNsaWVudEFzc2VydGlvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgSldUIGZvciBjZXJ0aWZpY2F0ZSBiYXNlZCBjbGllbnRBc3NlcnRpb24sIGlmIHBhc3NlZCBieSB0aGUgdXNlciwgdXNlcyBpdCBhcyBpc1xuICAgICAqIEBwYXJhbSBjcnlwdG9Qcm92aWRlciAtIGxpYnJhcnkncyBjcnlwdG8gaGVscGVyXG4gICAgICogQHBhcmFtIGlzc3VlciAtIGlzcyBjbGFpbVxuICAgICAqIEBwYXJhbSBqd3RBdWRpZW5jZSAtIGF1ZCBjbGFpbVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRKd3QoXG4gICAgICAgIGNyeXB0b1Byb3ZpZGVyOiBDcnlwdG9Qcm92aWRlcixcbiAgICAgICAgaXNzdWVyOiBzdHJpbmcsXG4gICAgICAgIGp3dEF1ZGllbmNlOiBzdHJpbmdcbiAgICApOiBzdHJpbmcge1xuICAgICAgICAvLyBpZiBhc3NlcnRpb24gd2FzIGNyZWF0ZWQgZnJvbSBjZXJ0aWZpY2F0ZSwgY2hlY2sgaWYgand0IGlzIGV4cGlyZWQgYW5kIGNyZWF0ZSBuZXcgb25lLlxuICAgICAgICBpZiAodGhpcy5wcml2YXRlS2V5ICYmIHRoaXMudGh1bWJwcmludCkge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIHRoaXMuand0ICYmXG4gICAgICAgICAgICAgICAgIXRoaXMuaXNFeHBpcmVkKCkgJiZcbiAgICAgICAgICAgICAgICBpc3N1ZXIgPT09IHRoaXMuaXNzdWVyICYmXG4gICAgICAgICAgICAgICAgand0QXVkaWVuY2UgPT09IHRoaXMuand0QXVkaWVuY2VcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmp3dDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlSnd0KGNyeXB0b1Byb3ZpZGVyLCBpc3N1ZXIsIGp3dEF1ZGllbmNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qXG4gICAgICAgICAqIGlmIGFzc2VydGlvbiB3YXMgY3JlYXRlZCBieSBjYWxsZXIsIHRoZW4gd2UganVzdCBhcHBlbmQgaXQuIEl0IGlzIHVwIHRvIHRoZSBjYWxsZXIgdG9cbiAgICAgICAgICogZW5zdXJlIHRoYXQgaXQgY29udGFpbnMgbmVjZXNzYXJ5IGNsYWltcyBhbmQgdGhhdCBpdCBpcyBub3QgZXhwaXJlZC5cbiAgICAgICAgICovXG4gICAgICAgIGlmICh0aGlzLmp3dCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuand0O1xuICAgICAgICB9XG5cbiAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvckNvZGVzLmludmFsaWRBc3NlcnRpb24pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEpXVCBmb3JtYXQgYW5kIHJlcXVpcmVkIGNsYWltcyBzcGVjaWZpZWQ6IGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM3NTIzI3NlY3Rpb24tM1xuICAgICAqL1xuICAgIHByaXZhdGUgY3JlYXRlSnd0KFxuICAgICAgICBjcnlwdG9Qcm92aWRlcjogQ3J5cHRvUHJvdmlkZXIsXG4gICAgICAgIGlzc3Vlcjogc3RyaW5nLFxuICAgICAgICBqd3RBdWRpZW5jZTogc3RyaW5nXG4gICAgKTogc3RyaW5nIHtcbiAgICAgICAgdGhpcy5pc3N1ZXIgPSBpc3N1ZXI7XG4gICAgICAgIHRoaXMuand0QXVkaWVuY2UgPSBqd3RBdWRpZW5jZTtcbiAgICAgICAgY29uc3QgaXNzdWVkQXQgPSBUaW1lVXRpbHMubm93U2Vjb25kcygpO1xuICAgICAgICB0aGlzLmV4cGlyYXRpb25UaW1lID0gaXNzdWVkQXQgKyA2MDA7XG5cbiAgICAgICAgY29uc3QgYWxnb3JpdGhtID0gdGhpcy51c2VTaGEyNTZcbiAgICAgICAgICAgID8gSnd0Q29uc3RhbnRzLlBTU18yNTZcbiAgICAgICAgICAgIDogSnd0Q29uc3RhbnRzLlJTQV8yNTY7XG4gICAgICAgIGNvbnN0IGhlYWRlcjogand0Lkp3dEhlYWRlciA9IHtcbiAgICAgICAgICAgIGFsZzogYWxnb3JpdGhtLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHRodW1icHJpbnRIZWFkZXIgPSB0aGlzLnVzZVNoYTI1NlxuICAgICAgICAgICAgPyBKd3RDb25zdGFudHMuWDVUXzI1NlxuICAgICAgICAgICAgOiBKd3RDb25zdGFudHMuWDVUO1xuICAgICAgICBPYmplY3QuYXNzaWduKGhlYWRlciwge1xuICAgICAgICAgICAgW3RodW1icHJpbnRIZWFkZXJdOiBFbmNvZGluZ1V0aWxzLmJhc2U2NEVuY29kZVVybChcbiAgICAgICAgICAgICAgICB0aGlzLnRodW1icHJpbnQsXG4gICAgICAgICAgICAgICAgXCJoZXhcIlxuICAgICAgICAgICAgKSxcbiAgICAgICAgfSBhcyBQYXJ0aWFsPGp3dC5Kd3RIZWFkZXI+KTtcblxuICAgICAgICBpZiAodGhpcy5wdWJsaWNDZXJ0aWZpY2F0ZSkge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihoZWFkZXIsIHtcbiAgICAgICAgICAgICAgICBbSnd0Q29uc3RhbnRzLlg1Q106IHRoaXMucHVibGljQ2VydGlmaWNhdGUsXG4gICAgICAgICAgICB9IGFzIFBhcnRpYWw8and0Lkp3dEhlYWRlcj4pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgICAgICAgIFtKd3RDb25zdGFudHMuQVVESUVOQ0VdOiB0aGlzLmp3dEF1ZGllbmNlLFxuICAgICAgICAgICAgW0p3dENvbnN0YW50cy5FWFBJUkFUSU9OX1RJTUVdOiB0aGlzLmV4cGlyYXRpb25UaW1lLFxuICAgICAgICAgICAgW0p3dENvbnN0YW50cy5JU1NVRVJdOiB0aGlzLmlzc3VlcixcbiAgICAgICAgICAgIFtKd3RDb25zdGFudHMuU1VCSkVDVF06IHRoaXMuaXNzdWVyLFxuICAgICAgICAgICAgW0p3dENvbnN0YW50cy5OT1RfQkVGT1JFXTogaXNzdWVkQXQsXG4gICAgICAgICAgICBbSnd0Q29uc3RhbnRzLkpXVF9JRF06IGNyeXB0b1Byb3ZpZGVyLmNyZWF0ZU5ld0d1aWQoKSxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmp3dCA9IGp3dC5zaWduKHBheWxvYWQsIHRoaXMucHJpdmF0ZUtleSwgeyBoZWFkZXIgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLmp3dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVdGlsaXR5IEFQSSB0byBjaGVjayBleHBpcmF0aW9uXG4gICAgICovXG4gICAgcHJpdmF0ZSBpc0V4cGlyZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmV4cGlyYXRpb25UaW1lIDwgVGltZVV0aWxzLm5vd1NlY29uZHMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeHRyYWN0cyB0aGUgcmF3IGNlcnRzIGZyb20gYSBnaXZlbiBjZXJ0aWZpY2F0ZSBzdHJpbmcgYW5kIHJldHVybnMgdGhlbSBpbiBhbiBhcnJheS5cbiAgICAgKiBAcGFyYW0gcHVibGljQ2VydGlmaWNhdGUgLSBlbGVjdHJvbmljIGRvY3VtZW50IHByb3ZpZGVkIHRvIHByb3ZlIHRoZSBvd25lcnNoaXAgb2YgdGhlIHB1YmxpYyBrZXlcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIHBhcnNlQ2VydGlmaWNhdGUocHVibGljQ2VydGlmaWNhdGU6IHN0cmluZyk6IEFycmF5PHN0cmluZz4ge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBpcyByZWdleCB0byBpZGVudGlmeSB0aGUgY2VydHMgaW4gYSBnaXZlbiBjZXJ0aWZpY2F0ZSBzdHJpbmcuXG4gICAgICAgICAqIFdlIHdhbnQgdG8gbG9vayBmb3IgdGhlIGNvbnRlbnRzIGJldHdlZW4gdGhlIEJFR0lOIGFuZCBFTkQgY2VydGlmaWNhdGUgc3RyaW5ncywgd2l0aG91dCB0aGUgYXNzb2NpYXRlZCBuZXdsaW5lcy5cbiAgICAgICAgICogVGhlIGluZm9ybWF0aW9uIGluIHBhcmVucyBcIiguKz8pXCIgaXMgdGhlIGNhcHR1cmUgZ3JvdXAgdG8gcmVwcmVzZW50IHRoZSBjZXJ0IHdlIHdhbnQgaXNvbGF0ZWQuXG4gICAgICAgICAqIFwiLlwiIG1lYW5zIGFueSBzdHJpbmcgY2hhcmFjdGVyLCBcIitcIiBtZWFucyBtYXRjaCAxIG9yIG1vcmUgdGltZXMsIGFuZCBcIj9cIiBtZWFucyB0aGUgc2hvcnRlc3QgbWF0Y2guXG4gICAgICAgICAqIFRoZSBcImdcIiBhdCB0aGUgZW5kIG9mIHRoZSByZWdleCBtZWFucyBzZWFyY2ggdGhlIHN0cmluZyBnbG9iYWxseSwgYW5kIHRoZSBcInNcIiBlbmFibGVzIHRoZSBcIi5cIiB0byBtYXRjaCBuZXdsaW5lcy5cbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IHJlZ2V4VG9GaW5kQ2VydHMgPVxuICAgICAgICAgICAgLy0tLS0tQkVHSU4gQ0VSVElGSUNBVEUtLS0tLVxccipcXG4oLis/KVxccipcXG4tLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tL2dzO1xuICAgICAgICBjb25zdCBjZXJ0czogc3RyaW5nW10gPSBbXTtcblxuICAgICAgICBsZXQgbWF0Y2hlcztcbiAgICAgICAgd2hpbGUgKChtYXRjaGVzID0gcmVnZXhUb0ZpbmRDZXJ0cy5leGVjKHB1YmxpY0NlcnRpZmljYXRlKSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgIC8vIG1hdGNoZXNbMV0gcmVwcmVzZW50cyB0aGUgZmlyc3QgcGFyZW5zIGNhcHR1cmUgZ3JvdXAgaW4gdGhlIHJlZ2V4LlxuICAgICAgICAgICAgY2VydHMucHVzaChtYXRjaGVzWzFdLnJlcGxhY2UoL1xccipcXG4vZywgQ29uc3RhbnRzLkVNUFRZX1NUUklORykpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNlcnRzO1xuICAgIH1cbn1cbiIsICIvKiBlc2xpbnQtZGlzYWJsZSBoZWFkZXIvaGVhZGVyICovXG5leHBvcnQgY29uc3QgbmFtZSA9IFwiQGF6dXJlL21zYWwtbm9kZVwiO1xuZXhwb3J0IGNvbnN0IHZlcnNpb24gPSBcIjMuNC4xXCI7XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gICAgQXV0aGVudGljYXRpb25SZXN1bHQsXG4gICAgQXV0aG9yaXR5LFxuICAgIEJhc2VDbGllbnQsXG4gICAgQ2NzQ3JlZGVudGlhbFR5cGUsXG4gICAgQ2xpZW50QXNzZXJ0aW9uLFxuICAgIENsaWVudENvbmZpZ3VyYXRpb24sXG4gICAgQ29tbW9uVXNlcm5hbWVQYXNzd29yZFJlcXVlc3QsXG4gICAgR3JhbnRUeXBlLFxuICAgIE5ldHdvcmtSZXNwb25zZSxcbiAgICBPQXV0aFJlc3BvbnNlVHlwZSxcbiAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlcixcbiAgICBSZXF1ZXN0VGh1bWJwcmludCxcbiAgICBSZXNwb25zZUhhbmRsZXIsXG4gICAgU2VydmVyQXV0aG9yaXphdGlvblRva2VuUmVzcG9uc2UsXG4gICAgU3RyaW5nVXRpbHMsXG4gICAgVGltZVV0aWxzLFxuICAgIFVybFN0cmluZyxcbiAgICBVcmxVdGlscyxcbiAgICBnZXRDbGllbnRBc3NlcnRpb24sXG59IGZyb20gXCJAYXp1cmUvbXNhbC1jb21tb24vbm9kZVwiO1xuXG4vKipcbiAqIE9hdXRoMi4wIFBhc3N3b3JkIGdyYW50IGNsaWVudFxuICogTm90ZTogV2UgYXJlIG9ubHkgc3VwcG9ydGluZyBwdWJsaWMgY2xpZW50cyBmb3IgcGFzc3dvcmQgZ3JhbnQgYW5kIGZvciBwdXJlbHkgdGVzdGluZyBwdXJwb3Nlc1xuICogQHB1YmxpY1xuICogQGRlcHJlY2F0ZWQgLSBVc2UgYSBtb3JlIHNlY3VyZSBmbG93IGluc3RlYWRcbiAqL1xuZXhwb3J0IGNsYXNzIFVzZXJuYW1lUGFzc3dvcmRDbGllbnQgZXh0ZW5kcyBCYXNlQ2xpZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWd1cmF0aW9uOiBDbGllbnRDb25maWd1cmF0aW9uKSB7XG4gICAgICAgIHN1cGVyKGNvbmZpZ3VyYXRpb24pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFQSSB0byBhY3F1aXJlIGEgdG9rZW4gYnkgcGFzc2luZyB0aGUgdXNlcm5hbWUgYW5kIHBhc3N3b3JkIHRvIHRoZSBzZXJ2aWNlIGluIGV4Y2hhZ2Ugb2YgY3JlZGVudGlhbHNcbiAgICAgKiBwYXNzd29yZF9ncmFudFxuICAgICAqIEBwYXJhbSByZXF1ZXN0IC0gQ29tbW9uVXNlcm5hbWVQYXNzd29yZFJlcXVlc3RcbiAgICAgKi9cbiAgICBhc3luYyBhY3F1aXJlVG9rZW4oXG4gICAgICAgIHJlcXVlc3Q6IENvbW1vblVzZXJuYW1lUGFzc3dvcmRSZXF1ZXN0XG4gICAgKTogUHJvbWlzZTxBdXRoZW50aWNhdGlvblJlc3VsdCB8IG51bGw+IHtcbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcImluIGFjcXVpcmVUb2tlbiBjYWxsIGluIHVzZXJuYW1lLXBhc3N3b3JkIGNsaWVudFwiKTtcblxuICAgICAgICBjb25zdCByZXFUaW1lc3RhbXAgPSBUaW1lVXRpbHMubm93U2Vjb25kcygpO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZXhlY3V0ZVRva2VuUmVxdWVzdChcbiAgICAgICAgICAgIHRoaXMuYXV0aG9yaXR5LFxuICAgICAgICAgICAgcmVxdWVzdFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlSGFuZGxlciA9IG5ldyBSZXNwb25zZUhhbmRsZXIoXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICAgIHRoaXMuY2FjaGVNYW5hZ2VyLFxuICAgICAgICAgICAgdGhpcy5jcnlwdG9VdGlscyxcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLFxuICAgICAgICAgICAgdGhpcy5jb25maWcuc2VyaWFsaXphYmxlQ2FjaGUsXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5wZXJzaXN0ZW5jZVBsdWdpblxuICAgICAgICApO1xuXG4gICAgICAgIC8vIFZhbGlkYXRlIHJlc3BvbnNlLiBUaGlzIGZ1bmN0aW9uIHRocm93cyBhIHNlcnZlciBlcnJvciBpZiBhbiBlcnJvciBpcyByZXR1cm5lZCBieSB0aGUgc2VydmVyLlxuICAgICAgICByZXNwb25zZUhhbmRsZXIudmFsaWRhdGVUb2tlblJlc3BvbnNlKHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICBjb25zdCB0b2tlblJlc3BvbnNlID0gcmVzcG9uc2VIYW5kbGVyLmhhbmRsZVNlcnZlclRva2VuUmVzcG9uc2UoXG4gICAgICAgICAgICByZXNwb25zZS5ib2R5LFxuICAgICAgICAgICAgdGhpcy5hdXRob3JpdHksXG4gICAgICAgICAgICByZXFUaW1lc3RhbXAsXG4gICAgICAgICAgICByZXF1ZXN0XG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHRva2VuUmVzcG9uc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXhlY3V0ZXMgUE9TVCByZXF1ZXN0IHRvIHRva2VuIGVuZHBvaW50XG4gICAgICogQHBhcmFtIGF1dGhvcml0eSAtIGF1dGhvcml0eSBvYmplY3RcbiAgICAgKiBAcGFyYW0gcmVxdWVzdCAtIENvbW1vblVzZXJuYW1lUGFzc3dvcmRSZXF1ZXN0IHByb3ZpZGVkIGJ5IHRoZSBkZXZlbG9wZXJcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGV4ZWN1dGVUb2tlblJlcXVlc3QoXG4gICAgICAgIGF1dGhvcml0eTogQXV0aG9yaXR5LFxuICAgICAgICByZXF1ZXN0OiBDb21tb25Vc2VybmFtZVBhc3N3b3JkUmVxdWVzdFxuICAgICk6IFByb21pc2U8TmV0d29ya1Jlc3BvbnNlPFNlcnZlckF1dGhvcml6YXRpb25Ub2tlblJlc3BvbnNlPj4ge1xuICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnNTdHJpbmcgPSB0aGlzLmNyZWF0ZVRva2VuUXVlcnlQYXJhbWV0ZXJzKHJlcXVlc3QpO1xuICAgICAgICBjb25zdCBlbmRwb2ludCA9IFVybFN0cmluZy5hcHBlbmRRdWVyeVN0cmluZyhcbiAgICAgICAgICAgIGF1dGhvcml0eS50b2tlbkVuZHBvaW50LFxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzU3RyaW5nXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0gYXdhaXQgdGhpcy5jcmVhdGVUb2tlblJlcXVlc3RCb2R5KHJlcXVlc3QpO1xuICAgICAgICBjb25zdCBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0gdGhpcy5jcmVhdGVUb2tlblJlcXVlc3RIZWFkZXJzKHtcbiAgICAgICAgICAgIGNyZWRlbnRpYWw6IHJlcXVlc3QudXNlcm5hbWUsXG4gICAgICAgICAgICB0eXBlOiBDY3NDcmVkZW50aWFsVHlwZS5VUE4sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB0aHVtYnByaW50OiBSZXF1ZXN0VGh1bWJwcmludCA9IHtcbiAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICAgIGF1dGhvcml0eTogYXV0aG9yaXR5LmNhbm9uaWNhbEF1dGhvcml0eSxcbiAgICAgICAgICAgIHNjb3BlczogcmVxdWVzdC5zY29wZXMsXG4gICAgICAgICAgICBjbGFpbXM6IHJlcXVlc3QuY2xhaW1zLFxuICAgICAgICAgICAgYXV0aGVudGljYXRpb25TY2hlbWU6IHJlcXVlc3QuYXV0aGVudGljYXRpb25TY2hlbWUsXG4gICAgICAgICAgICByZXNvdXJjZVJlcXVlc3RNZXRob2Q6IHJlcXVlc3QucmVzb3VyY2VSZXF1ZXN0TWV0aG9kLFxuICAgICAgICAgICAgcmVzb3VyY2VSZXF1ZXN0VXJpOiByZXF1ZXN0LnJlc291cmNlUmVxdWVzdFVyaSxcbiAgICAgICAgICAgIHNockNsYWltczogcmVxdWVzdC5zaHJDbGFpbXMsXG4gICAgICAgICAgICBzc2hLaWQ6IHJlcXVlc3Quc3NoS2lkLFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB0aGlzLmV4ZWN1dGVQb3N0VG9Ub2tlbkVuZHBvaW50KFxuICAgICAgICAgICAgZW5kcG9pbnQsXG4gICAgICAgICAgICByZXF1ZXN0Qm9keSxcbiAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICB0aHVtYnByaW50LFxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIGEgbWFwIGZvciBhbGwgdGhlIHBhcmFtcyB0byBiZSBzZW50IHRvIHRoZSBzZXJ2aWNlXG4gICAgICogQHBhcmFtIHJlcXVlc3QgLSBDb21tb25Vc2VybmFtZVBhc3N3b3JkUmVxdWVzdCBwcm92aWRlZCBieSB0aGUgZGV2ZWxvcGVyXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBjcmVhdGVUb2tlblJlcXVlc3RCb2R5KFxuICAgICAgICByZXF1ZXN0OiBDb21tb25Vc2VybmFtZVBhc3N3b3JkUmVxdWVzdFxuICAgICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSBuZXcgTWFwPHN0cmluZywgc3RyaW5nPigpO1xuXG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudElkKFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmF1dGhPcHRpb25zLmNsaWVudElkXG4gICAgICAgICk7XG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFVzZXJuYW1lKHBhcmFtZXRlcnMsIHJlcXVlc3QudXNlcm5hbWUpO1xuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRQYXNzd29yZChwYXJhbWV0ZXJzLCByZXF1ZXN0LnBhc3N3b3JkKTtcblxuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRTY29wZXMocGFyYW1ldGVycywgcmVxdWVzdC5zY29wZXMpO1xuXG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFJlc3BvbnNlVHlwZShcbiAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICBPQXV0aFJlc3BvbnNlVHlwZS5JRFRPS0VOX1RPS0VOXG4gICAgICAgICk7XG5cbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkR3JhbnRUeXBlKFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIEdyYW50VHlwZS5SRVNPVVJDRV9PV05FUl9QQVNTV09SRF9HUkFOVFxuICAgICAgICApO1xuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDbGllbnRJbmZvKHBhcmFtZXRlcnMpO1xuXG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZExpYnJhcnlJbmZvKFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmxpYnJhcnlJbmZvXG4gICAgICAgICk7XG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZEFwcGxpY2F0aW9uVGVsZW1ldHJ5KFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLnRlbGVtZXRyeS5hcHBsaWNhdGlvblxuICAgICAgICApO1xuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRUaHJvdHRsaW5nKHBhcmFtZXRlcnMpO1xuXG4gICAgICAgIGlmICh0aGlzLnNlcnZlclRlbGVtZXRyeU1hbmFnZXIpIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFNlcnZlclRlbGVtZXRyeShcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHRoaXMuc2VydmVyVGVsZW1ldHJ5TWFuYWdlclxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNvcnJlbGF0aW9uSWQgPVxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkIHx8XG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5jcnlwdG9JbnRlcmZhY2UuY3JlYXRlTmV3R3VpZCgpO1xuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDb3JyZWxhdGlvbklkKHBhcmFtZXRlcnMsIGNvcnJlbGF0aW9uSWQpO1xuXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5jbGllbnRDcmVkZW50aWFscy5jbGllbnRTZWNyZXQpIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudFNlY3JldChcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmNsaWVudENyZWRlbnRpYWxzLmNsaWVudFNlY3JldFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNsaWVudEFzc2VydGlvbjogQ2xpZW50QXNzZXJ0aW9uIHwgdW5kZWZpbmVkID1cbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmNsaWVudENyZWRlbnRpYWxzLmNsaWVudEFzc2VydGlvbjtcblxuICAgICAgICBpZiAoY2xpZW50QXNzZXJ0aW9uKSB7XG4gICAgICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDbGllbnRBc3NlcnRpb24oXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBhd2FpdCBnZXRDbGllbnRBc3NlcnRpb24oXG4gICAgICAgICAgICAgICAgICAgIGNsaWVudEFzc2VydGlvbi5hc3NlcnRpb24sXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmF1dGhPcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LnJlc291cmNlUmVxdWVzdFVyaVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDbGllbnRBc3NlcnRpb25UeXBlKFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgY2xpZW50QXNzZXJ0aW9uLmFzc2VydGlvblR5cGVcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhU3RyaW5nVXRpbHMuaXNFbXB0eU9iaihyZXF1ZXN0LmNsYWltcykgfHxcbiAgICAgICAgICAgICh0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRDYXBhYmlsaXRpZXMgJiZcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRDYXBhYmlsaXRpZXMubGVuZ3RoID4gMClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDbGFpbXMoXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmNsYWltcyxcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRDYXBhYmlsaXRpZXNcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5zeXN0ZW1PcHRpb25zLnByZXZlbnRDb3JzUHJlZmxpZ2h0ICYmXG4gICAgICAgICAgICByZXF1ZXN0LnVzZXJuYW1lXG4gICAgICAgICkge1xuICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2NzVXBuKHBhcmFtZXRlcnMsIHJlcXVlc3QudXNlcm5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFVybFV0aWxzLm1hcFRvUXVlcnlTdHJpbmcocGFyYW1ldGVycyk7XG4gICAgfVxufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICAgIEF1dGhvcml0eSxcbiAgICBBdXRob3JpemVQcm90b2NvbCxcbiAgICBDb21tb25BdXRob3JpemF0aW9uVXJsUmVxdWVzdCxcbiAgICBMb2dnZXIsXG4gICAgT0F1dGhSZXNwb25zZVR5cGUsXG4gICAgUHJvdG9jb2xNb2RlLFxuICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLFxufSBmcm9tIFwiQGF6dXJlL21zYWwtY29tbW9uL25vZGVcIjtcbmltcG9ydCB7IE5vZGVDb25maWd1cmF0aW9uIH0gZnJvbSBcIi4uL2NvbmZpZy9Db25maWd1cmF0aW9uLmpzXCI7XG5pbXBvcnQgeyBDb25zdGFudHMgYXMgTm9kZUNvbnN0YW50cyB9IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcbmltcG9ydCB7IHZlcnNpb24gfSBmcm9tIFwiLi4vcGFja2FnZU1ldGFkYXRhLmpzXCI7XG5cbi8qKlxuICogQ29uc3RydWN0cyB0aGUgZnVsbCAvYXV0aG9yaXplIFVSTCB3aXRoIHJlcXVlc3QgcGFyYW1ldGVyc1xuICogQHBhcmFtIGNvbmZpZ1xuICogQHBhcmFtIGF1dGhvcml0eVxuICogQHBhcmFtIHJlcXVlc3RcbiAqIEBwYXJhbSBsb2dnZXJcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBdXRoQ29kZVJlcXVlc3RVcmwoXG4gICAgY29uZmlnOiBOb2RlQ29uZmlndXJhdGlvbixcbiAgICBhdXRob3JpdHk6IEF1dGhvcml0eSxcbiAgICByZXF1ZXN0OiBDb21tb25BdXRob3JpemF0aW9uVXJsUmVxdWVzdCxcbiAgICBsb2dnZXI6IExvZ2dlclxuKTogc3RyaW5nIHtcbiAgICBjb25zdCBwYXJhbWV0ZXJzID0gQXV0aG9yaXplUHJvdG9jb2wuZ2V0U3RhbmRhcmRBdXRob3JpemVSZXF1ZXN0UGFyYW1ldGVycyhcbiAgICAgICAge1xuICAgICAgICAgICAgLi4uY29uZmlnLmF1dGgsXG4gICAgICAgICAgICBhdXRob3JpdHk6IGF1dGhvcml0eSxcbiAgICAgICAgICAgIHJlZGlyZWN0VXJpOiByZXF1ZXN0LnJlZGlyZWN0VXJpIHx8IFwiXCIsXG4gICAgICAgIH0sXG4gICAgICAgIHJlcXVlc3QsXG4gICAgICAgIGxvZ2dlclxuICAgICk7XG4gICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkTGlicmFyeUluZm8ocGFyYW1ldGVycywge1xuICAgICAgICBza3U6IE5vZGVDb25zdGFudHMuTVNBTF9TS1UsXG4gICAgICAgIHZlcnNpb246IHZlcnNpb24sXG4gICAgICAgIGNwdTogcHJvY2Vzcy5hcmNoIHx8IFwiXCIsXG4gICAgICAgIG9zOiBwcm9jZXNzLnBsYXRmb3JtIHx8IFwiXCIsXG4gICAgfSk7XG4gICAgaWYgKGNvbmZpZy5hdXRoLnByb3RvY29sTW9kZSAhPT0gUHJvdG9jb2xNb2RlLk9JREMpIHtcbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQXBwbGljYXRpb25UZWxlbWV0cnkoXG4gICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgY29uZmlnLnRlbGVtZXRyeS5hcHBsaWNhdGlvblxuICAgICAgICApO1xuICAgIH1cbiAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRSZXNwb25zZVR5cGUocGFyYW1ldGVycywgT0F1dGhSZXNwb25zZVR5cGUuQ09ERSk7XG4gICAgaWYgKHJlcXVlc3QuY29kZUNoYWxsZW5nZSAmJiByZXF1ZXN0LmNvZGVDaGFsbGVuZ2VNZXRob2QpIHtcbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ29kZUNoYWxsZW5nZVBhcmFtcyhcbiAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICByZXF1ZXN0LmNvZGVDaGFsbGVuZ2UsXG4gICAgICAgICAgICByZXF1ZXN0LmNvZGVDaGFsbGVuZ2VNZXRob2RcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRFeHRyYVF1ZXJ5UGFyYW1ldGVycyhcbiAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgcmVxdWVzdC5leHRyYVF1ZXJ5UGFyYW1ldGVycyB8fCB7fVxuICAgICk7XG5cbiAgICByZXR1cm4gQXV0aG9yaXplUHJvdG9jb2wuZ2V0QXV0aG9yaXplVXJsKGF1dGhvcml0eSwgcGFyYW1ldGVycyk7XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gICAgQXV0aG9yaXphdGlvbkNvZGVDbGllbnQsXG4gICAgQ2xpZW50Q29uZmlndXJhdGlvbixcbiAgICBSZWZyZXNoVG9rZW5DbGllbnQsXG4gICAgQXV0aGVudGljYXRpb25SZXN1bHQsXG4gICAgQXV0aG9yaXR5LFxuICAgIEF1dGhvcml0eUZhY3RvcnksXG4gICAgQmFzZUF1dGhSZXF1ZXN0LFxuICAgIFNpbGVudEZsb3dDbGllbnQsXG4gICAgTG9nZ2VyLFxuICAgIFNlcnZlclRlbGVtZXRyeU1hbmFnZXIsXG4gICAgU2VydmVyVGVsZW1ldHJ5UmVxdWVzdCxcbiAgICBDb21tb25TaWxlbnRGbG93UmVxdWVzdCxcbiAgICBDb21tb25SZWZyZXNoVG9rZW5SZXF1ZXN0LFxuICAgIENvbW1vbkF1dGhvcml6YXRpb25Db2RlUmVxdWVzdCxcbiAgICBDb21tb25BdXRob3JpemF0aW9uVXJsUmVxdWVzdCxcbiAgICBDb21tb25Vc2VybmFtZVBhc3N3b3JkUmVxdWVzdCxcbiAgICBBdXRoZW50aWNhdGlvblNjaGVtZSxcbiAgICBSZXNwb25zZU1vZGUsXG4gICAgQXV0aG9yaXR5T3B0aW9ucyxcbiAgICBPSURDX0RFRkFVTFRfU0NPUEVTLFxuICAgIEF6dXJlUmVnaW9uQ29uZmlndXJhdGlvbixcbiAgICBBdXRoRXJyb3IsXG4gICAgQXp1cmVDbG91ZE9wdGlvbnMsXG4gICAgQXV0aG9yaXphdGlvbkNvZGVQYXlsb2FkLFxuICAgIENvbnN0YW50cyxcbiAgICBTdHJpbmdVdGlscyxcbiAgICBjcmVhdGVDbGllbnRBdXRoRXJyb3IsXG4gICAgQ2xpZW50QXV0aEVycm9yQ29kZXMsXG4gICAgYnVpbGRTdGF0aWNBdXRob3JpdHlPcHRpb25zLFxuICAgIENsaWVudEFzc2VydGlvbiBhcyBDbGllbnRBc3NlcnRpb25UeXBlLFxuICAgIGdldENsaWVudEFzc2VydGlvbixcbiAgICBDbGllbnRBc3NlcnRpb25DYWxsYmFjayxcbiAgICBDYWNoZU91dGNvbWUsXG4gICAgQ2xpZW50QXV0aEVycm9yLFxufSBmcm9tIFwiQGF6dXJlL21zYWwtY29tbW9uL25vZGVcIjtcbmltcG9ydCB7XG4gICAgQ29uZmlndXJhdGlvbixcbiAgICBidWlsZEFwcENvbmZpZ3VyYXRpb24sXG4gICAgTm9kZUNvbmZpZ3VyYXRpb24sXG59IGZyb20gXCIuLi9jb25maWcvQ29uZmlndXJhdGlvbi5qc1wiO1xuaW1wb3J0IHsgQ3J5cHRvUHJvdmlkZXIgfSBmcm9tIFwiLi4vY3J5cHRvL0NyeXB0b1Byb3ZpZGVyLmpzXCI7XG5pbXBvcnQgeyBOb2RlU3RvcmFnZSB9IGZyb20gXCIuLi9jYWNoZS9Ob2RlU3RvcmFnZS5qc1wiO1xuaW1wb3J0IHsgQ29uc3RhbnRzIGFzIE5vZGVDb25zdGFudHMsIEFwaUlkIH0gZnJvbSBcIi4uL3V0aWxzL0NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgVG9rZW5DYWNoZSB9IGZyb20gXCIuLi9jYWNoZS9Ub2tlbkNhY2hlLmpzXCI7XG5pbXBvcnQgeyBDbGllbnRBc3NlcnRpb24gfSBmcm9tIFwiLi9DbGllbnRBc3NlcnRpb24uanNcIjtcbmltcG9ydCB7IEF1dGhvcml6YXRpb25VcmxSZXF1ZXN0IH0gZnJvbSBcIi4uL3JlcXVlc3QvQXV0aG9yaXphdGlvblVybFJlcXVlc3QuanNcIjtcbmltcG9ydCB7IEF1dGhvcml6YXRpb25Db2RlUmVxdWVzdCB9IGZyb20gXCIuLi9yZXF1ZXN0L0F1dGhvcml6YXRpb25Db2RlUmVxdWVzdC5qc1wiO1xuaW1wb3J0IHsgUmVmcmVzaFRva2VuUmVxdWVzdCB9IGZyb20gXCIuLi9yZXF1ZXN0L1JlZnJlc2hUb2tlblJlcXVlc3QuanNcIjtcbmltcG9ydCB7IFNpbGVudEZsb3dSZXF1ZXN0IH0gZnJvbSBcIi4uL3JlcXVlc3QvU2lsZW50Rmxvd1JlcXVlc3QuanNcIjtcbmltcG9ydCB7IHZlcnNpb24sIG5hbWUgfSBmcm9tIFwiLi4vcGFja2FnZU1ldGFkYXRhLmpzXCI7XG5pbXBvcnQgeyBVc2VybmFtZVBhc3N3b3JkUmVxdWVzdCB9IGZyb20gXCIuLi9yZXF1ZXN0L1VzZXJuYW1lUGFzc3dvcmRSZXF1ZXN0LmpzXCI7XG5pbXBvcnQgeyBOb2RlQXV0aEVycm9yIH0gZnJvbSBcIi4uL2Vycm9yL05vZGVBdXRoRXJyb3IuanNcIjtcbmltcG9ydCB7IFVzZXJuYW1lUGFzc3dvcmRDbGllbnQgfSBmcm9tIFwiLi9Vc2VybmFtZVBhc3N3b3JkQ2xpZW50LmpzXCI7XG5pbXBvcnQgeyBnZXRBdXRoQ29kZVJlcXVlc3RVcmwgfSBmcm9tIFwiLi4vcHJvdG9jb2wvQXV0aG9yaXplLmpzXCI7XG5cbi8qKlxuICogQmFzZSBhYnN0cmFjdCBjbGFzcyBmb3IgYWxsIENsaWVudEFwcGxpY2F0aW9ucyAtIHB1YmxpYyBhbmQgY29uZmlkZW50aWFsXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDbGllbnRBcHBsaWNhdGlvbiB7XG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IGNyeXB0b1Byb3ZpZGVyOiBDcnlwdG9Qcm92aWRlcjtcbiAgICBwcml2YXRlIHRva2VuQ2FjaGU6IFRva2VuQ2FjaGU7XG5cbiAgICAvKipcbiAgICAgKiBQbGF0Zm9ybSBzdG9yYWdlIG9iamVjdFxuICAgICAqL1xuICAgIHByb3RlY3RlZCBzdG9yYWdlOiBOb2RlU3RvcmFnZTtcbiAgICAvKipcbiAgICAgKiBMb2dnZXIgb2JqZWN0IHRvIGxvZyB0aGUgYXBwbGljYXRpb24gZmxvd1xuICAgICAqL1xuICAgIHByb3RlY3RlZCBsb2dnZXI6IExvZ2dlcjtcbiAgICAvKipcbiAgICAgKiBQbGF0Zm9ybSBjb25maWd1cmF0aW9uIGluaXRpYWxpemVkIGJ5IHRoZSBhcHBsaWNhdGlvblxuICAgICAqL1xuICAgIHByb3RlY3RlZCBjb25maWc6IE5vZGVDb25maWd1cmF0aW9uO1xuICAgIC8qKlxuICAgICAqIENsaWVudCBhc3NlcnRpb24gcGFzc2VkIGJ5IHRoZSB1c2VyIGZvciBjb25maWRlbnRpYWwgY2xpZW50IGZsb3dzXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGNsaWVudEFzc2VydGlvbjogQ2xpZW50QXNzZXJ0aW9uO1xuICAgIHByb3RlY3RlZCBkZXZlbG9wZXJQcm92aWRlZENsaWVudEFzc2VydGlvbjpcbiAgICAgICAgfCBzdHJpbmdcbiAgICAgICAgfCBDbGllbnRBc3NlcnRpb25DYWxsYmFjaztcbiAgICAvKipcbiAgICAgKiBDbGllbnQgc2VjcmV0IHBhc3NlZCBieSB0aGUgdXNlciBmb3IgY29uZmlkZW50aWFsIGNsaWVudCBmbG93c1xuICAgICAqL1xuICAgIHByb3RlY3RlZCBjbGllbnRTZWNyZXQ6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yIGZvciB0aGUgQ2xpZW50QXBwbGljYXRpb25cbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgY29uc3RydWN0b3IoY29uZmlndXJhdGlvbjogQ29uZmlndXJhdGlvbikge1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGJ1aWxkQXBwQ29uZmlndXJhdGlvbihjb25maWd1cmF0aW9uKTtcbiAgICAgICAgdGhpcy5jcnlwdG9Qcm92aWRlciA9IG5ldyBDcnlwdG9Qcm92aWRlcigpO1xuICAgICAgICB0aGlzLmxvZ2dlciA9IG5ldyBMb2dnZXIoXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5zeXN0ZW0ubG9nZ2VyT3B0aW9ucyxcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICB2ZXJzaW9uXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuc3RvcmFnZSA9IG5ldyBOb2RlU3RvcmFnZShcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLFxuICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aC5jbGllbnRJZCxcbiAgICAgICAgICAgIHRoaXMuY3J5cHRvUHJvdmlkZXIsXG4gICAgICAgICAgICBidWlsZFN0YXRpY0F1dGhvcml0eU9wdGlvbnModGhpcy5jb25maWcuYXV0aClcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy50b2tlbkNhY2hlID0gbmV3IFRva2VuQ2FjaGUoXG4gICAgICAgICAgICB0aGlzLnN0b3JhZ2UsXG4gICAgICAgICAgICB0aGlzLmxvZ2dlcixcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmNhY2hlLmNhY2hlUGx1Z2luXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyB0aGUgVVJMIG9mIHRoZSBhdXRob3JpemF0aW9uIHJlcXVlc3QsIGxldHRpbmcgdGhlIHVzZXIgaW5wdXQgY3JlZGVudGlhbHMgYW5kIGNvbnNlbnQgdG8gdGhlXG4gICAgICogYXBwbGljYXRpb24uIFRoZSBVUkwgdGFyZ2V0cyB0aGUgL2F1dGhvcml6ZSBlbmRwb2ludCBvZiB0aGUgYXV0aG9yaXR5IGNvbmZpZ3VyZWQgaW4gdGhlXG4gICAgICogYXBwbGljYXRpb24gb2JqZWN0LlxuICAgICAqXG4gICAgICogT25jZSB0aGUgdXNlciBpbnB1dHMgdGhlaXIgY3JlZGVudGlhbHMgYW5kIGNvbnNlbnRzLCB0aGUgYXV0aG9yaXR5IHdpbGwgc2VuZCBhIHJlc3BvbnNlIHRvIHRoZSByZWRpcmVjdCBVUklcbiAgICAgKiBzZW50IGluIHRoZSByZXF1ZXN0IGFuZCBzaG91bGQgY29udGFpbiBhbiBhdXRob3JpemF0aW9uIGNvZGUsIHdoaWNoIGNhbiB0aGVuIGJlIHVzZWQgdG8gYWNxdWlyZSB0b2tlbnMgdmlhXG4gICAgICogYGFjcXVpcmVUb2tlbkJ5Q29kZShBdXRob3JpemF0aW9uQ29kZVJlcXVlc3QpYC5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRBdXRoQ29kZVVybChyZXF1ZXN0OiBBdXRob3JpemF0aW9uVXJsUmVxdWVzdCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXCJnZXRBdXRoQ29kZVVybCBjYWxsZWRcIiwgcmVxdWVzdC5jb3JyZWxhdGlvbklkKTtcbiAgICAgICAgY29uc3QgdmFsaWRSZXF1ZXN0OiBDb21tb25BdXRob3JpemF0aW9uVXJsUmVxdWVzdCA9IHtcbiAgICAgICAgICAgIC4uLnJlcXVlc3QsXG4gICAgICAgICAgICAuLi4oYXdhaXQgdGhpcy5pbml0aWFsaXplQmFzZVJlcXVlc3QocmVxdWVzdCkpLFxuICAgICAgICAgICAgcmVzcG9uc2VNb2RlOiByZXF1ZXN0LnJlc3BvbnNlTW9kZSB8fCBSZXNwb25zZU1vZGUuUVVFUlksXG4gICAgICAgICAgICBhdXRoZW50aWNhdGlvblNjaGVtZTogQXV0aGVudGljYXRpb25TY2hlbWUuQkVBUkVSLFxuICAgICAgICAgICAgc3RhdGU6IHJlcXVlc3Quc3RhdGUgfHwgXCJcIixcbiAgICAgICAgICAgIG5vbmNlOiByZXF1ZXN0Lm5vbmNlIHx8IFwiXCIsXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgZGlzY292ZXJlZEF1dGhvcml0eSA9IGF3YWl0IHRoaXMuY3JlYXRlQXV0aG9yaXR5KFxuICAgICAgICAgICAgdmFsaWRSZXF1ZXN0LmF1dGhvcml0eSxcbiAgICAgICAgICAgIHZhbGlkUmVxdWVzdC5jb3JyZWxhdGlvbklkLFxuICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgcmVxdWVzdC5henVyZUNsb3VkT3B0aW9uc1xuICAgICAgICApO1xuICAgICAgICByZXR1cm4gZ2V0QXV0aENvZGVSZXF1ZXN0VXJsKFxuICAgICAgICAgICAgdGhpcy5jb25maWcsXG4gICAgICAgICAgICBkaXNjb3ZlcmVkQXV0aG9yaXR5LFxuICAgICAgICAgICAgdmFsaWRSZXF1ZXN0LFxuICAgICAgICAgICAgdGhpcy5sb2dnZXJcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBY3F1aXJlcyBhIHRva2VuIGJ5IGV4Y2hhbmdpbmcgdGhlIEF1dGhvcml6YXRpb24gQ29kZSByZWNlaXZlZCBmcm9tIHRoZSBmaXJzdCBzdGVwIG9mIE9BdXRoMi4wXG4gICAgICogQXV0aG9yaXphdGlvbiBDb2RlIGZsb3cuXG4gICAgICpcbiAgICAgKiBgZ2V0QXV0aENvZGVVcmwoQXV0aG9yaXphdGlvbkNvZGVVcmxSZXF1ZXN0KWAgY2FuIGJlIHVzZWQgdG8gY3JlYXRlIHRoZSBVUkwgZm9yIHRoZSBmaXJzdCBzdGVwIG9mIE9BdXRoMi4wXG4gICAgICogQXV0aG9yaXphdGlvbiBDb2RlIGZsb3cuIEVuc3VyZSB0aGF0IHZhbHVlcyBmb3IgcmVkaXJlY3RVcmkgYW5kIHNjb3BlcyBpbiBBdXRob3JpemF0aW9uQ29kZVVybFJlcXVlc3QgYW5kXG4gICAgICogQXV0aG9yaXphdGlvbkNvZGVSZXF1ZXN0IGFyZSB0aGUgc2FtZS5cbiAgICAgKi9cbiAgICBhc3luYyBhY3F1aXJlVG9rZW5CeUNvZGUoXG4gICAgICAgIHJlcXVlc3Q6IEF1dGhvcml6YXRpb25Db2RlUmVxdWVzdCxcbiAgICAgICAgYXV0aENvZGVQYXlMb2FkPzogQXV0aG9yaXphdGlvbkNvZGVQYXlsb2FkXG4gICAgKTogUHJvbWlzZTxBdXRoZW50aWNhdGlvblJlc3VsdD4ge1xuICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiYWNxdWlyZVRva2VuQnlDb2RlIGNhbGxlZFwiKTtcbiAgICAgICAgaWYgKHJlcXVlc3Quc3RhdGUgJiYgYXV0aENvZGVQYXlMb2FkKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiYWNxdWlyZVRva2VuQnlDb2RlIC0gdmFsaWRhdGluZyBzdGF0ZVwiKTtcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVTdGF0ZShyZXF1ZXN0LnN0YXRlLCBhdXRoQ29kZVBheUxvYWQuc3RhdGUgfHwgXCJcIik7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGF1dGhDb2RlUGF5TG9hZCA9IHsgLi4uYXV0aENvZGVQYXlMb2FkLCBzdGF0ZTogXCJcIiB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbGlkUmVxdWVzdDogQ29tbW9uQXV0aG9yaXphdGlvbkNvZGVSZXF1ZXN0ID0ge1xuICAgICAgICAgICAgLi4ucmVxdWVzdCxcbiAgICAgICAgICAgIC4uLihhd2FpdCB0aGlzLmluaXRpYWxpemVCYXNlUmVxdWVzdChyZXF1ZXN0KSksXG4gICAgICAgICAgICBhdXRoZW50aWNhdGlvblNjaGVtZTogQXV0aGVudGljYXRpb25TY2hlbWUuQkVBUkVSLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHNlcnZlclRlbGVtZXRyeU1hbmFnZXIgPSB0aGlzLmluaXRpYWxpemVTZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyKFxuICAgICAgICAgICAgQXBpSWQuYWNxdWlyZVRva2VuQnlDb2RlLFxuICAgICAgICAgICAgdmFsaWRSZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGRpc2NvdmVyZWRBdXRob3JpdHkgPSBhd2FpdCB0aGlzLmNyZWF0ZUF1dGhvcml0eShcbiAgICAgICAgICAgICAgICB2YWxpZFJlcXVlc3QuYXV0aG9yaXR5LFxuICAgICAgICAgICAgICAgIHZhbGlkUmVxdWVzdC5jb3JyZWxhdGlvbklkLFxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmF6dXJlQ2xvdWRPcHRpb25zXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3QgYXV0aENsaWVudENvbmZpZyA9IGF3YWl0IHRoaXMuYnVpbGRPYXV0aENsaWVudENvbmZpZ3VyYXRpb24oXG4gICAgICAgICAgICAgICAgZGlzY292ZXJlZEF1dGhvcml0eSxcbiAgICAgICAgICAgICAgICB2YWxpZFJlcXVlc3QuY29ycmVsYXRpb25JZCxcbiAgICAgICAgICAgICAgICB2YWxpZFJlcXVlc3QucmVkaXJlY3RVcmksXG4gICAgICAgICAgICAgICAgc2VydmVyVGVsZW1ldHJ5TWFuYWdlclxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IGF1dGhvcml6YXRpb25Db2RlQ2xpZW50ID0gbmV3IEF1dGhvcml6YXRpb25Db2RlQ2xpZW50KFxuICAgICAgICAgICAgICAgIGF1dGhDbGllbnRDb25maWdcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFxuICAgICAgICAgICAgICAgIFwiQXV0aCBjb2RlIGNsaWVudCBjcmVhdGVkXCIsXG4gICAgICAgICAgICAgICAgdmFsaWRSZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgYXV0aG9yaXphdGlvbkNvZGVDbGllbnQuYWNxdWlyZVRva2VuKFxuICAgICAgICAgICAgICAgIHZhbGlkUmVxdWVzdCxcbiAgICAgICAgICAgICAgICBhdXRoQ29kZVBheUxvYWRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgQXV0aEVycm9yKSB7XG4gICAgICAgICAgICAgICAgZS5zZXRDb3JyZWxhdGlvbklkKHZhbGlkUmVxdWVzdC5jb3JyZWxhdGlvbklkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlcnZlclRlbGVtZXRyeU1hbmFnZXIuY2FjaGVGYWlsZWRSZXF1ZXN0KGUpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFjcXVpcmVzIGEgdG9rZW4gYnkgZXhjaGFuZ2luZyB0aGUgcmVmcmVzaCB0b2tlbiBwcm92aWRlZCBmb3IgYSBuZXcgc2V0IG9mIHRva2Vucy5cbiAgICAgKlxuICAgICAqIFRoaXMgQVBJIGlzIHByb3ZpZGVkIG9ubHkgZm9yIHNjZW5hcmlvcyB3aGVyZSB5b3Ugd291bGQgbGlrZSB0byBtaWdyYXRlIGZyb20gQURBTCB0byBNU0FMLiBPdGhlcndpc2UsIGl0IGlzXG4gICAgICogcmVjb21tZW5kZWQgdGhhdCB5b3UgdXNlIGBhY3F1aXJlVG9rZW5TaWxlbnQoKWAgZm9yIHNpbGVudCBzY2VuYXJpb3MuIFdoZW4gdXNpbmcgYGFjcXVpcmVUb2tlblNpbGVudCgpYCwgTVNBTCB3aWxsXG4gICAgICogaGFuZGxlIHRoZSBjYWNoaW5nIGFuZCByZWZyZXNoaW5nIG9mIHRva2VucyBhdXRvbWF0aWNhbGx5LlxuICAgICAqL1xuICAgIGFzeW5jIGFjcXVpcmVUb2tlbkJ5UmVmcmVzaFRva2VuKFxuICAgICAgICByZXF1ZXN0OiBSZWZyZXNoVG9rZW5SZXF1ZXN0XG4gICAgKTogUHJvbWlzZTxBdXRoZW50aWNhdGlvblJlc3VsdCB8IG51bGw+IHtcbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcbiAgICAgICAgICAgIFwiYWNxdWlyZVRva2VuQnlSZWZyZXNoVG9rZW4gY2FsbGVkXCIsXG4gICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgdmFsaWRSZXF1ZXN0OiBDb21tb25SZWZyZXNoVG9rZW5SZXF1ZXN0ID0ge1xuICAgICAgICAgICAgLi4ucmVxdWVzdCxcbiAgICAgICAgICAgIC4uLihhd2FpdCB0aGlzLmluaXRpYWxpemVCYXNlUmVxdWVzdChyZXF1ZXN0KSksXG4gICAgICAgICAgICBhdXRoZW50aWNhdGlvblNjaGVtZTogQXV0aGVudGljYXRpb25TY2hlbWUuQkVBUkVSLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHNlcnZlclRlbGVtZXRyeU1hbmFnZXIgPSB0aGlzLmluaXRpYWxpemVTZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyKFxuICAgICAgICAgICAgQXBpSWQuYWNxdWlyZVRva2VuQnlSZWZyZXNoVG9rZW4sXG4gICAgICAgICAgICB2YWxpZFJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZGlzY292ZXJlZEF1dGhvcml0eSA9IGF3YWl0IHRoaXMuY3JlYXRlQXV0aG9yaXR5KFxuICAgICAgICAgICAgICAgIHZhbGlkUmVxdWVzdC5hdXRob3JpdHksXG4gICAgICAgICAgICAgICAgdmFsaWRSZXF1ZXN0LmNvcnJlbGF0aW9uSWQsXG4gICAgICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIHJlcXVlc3QuYXp1cmVDbG91ZE9wdGlvbnNcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCByZWZyZXNoVG9rZW5DbGllbnRDb25maWcgPVxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYnVpbGRPYXV0aENsaWVudENvbmZpZ3VyYXRpb24oXG4gICAgICAgICAgICAgICAgICAgIGRpc2NvdmVyZWRBdXRob3JpdHksXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkUmVxdWVzdC5jb3JyZWxhdGlvbklkLFxuICAgICAgICAgICAgICAgICAgICB2YWxpZFJlcXVlc3QucmVkaXJlY3RVcmkgfHwgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgc2VydmVyVGVsZW1ldHJ5TWFuYWdlclxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCByZWZyZXNoVG9rZW5DbGllbnQgPSBuZXcgUmVmcmVzaFRva2VuQ2xpZW50KFxuICAgICAgICAgICAgICAgIHJlZnJlc2hUb2tlbkNsaWVudENvbmZpZ1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgXCJSZWZyZXNoIHRva2VuIGNsaWVudCBjcmVhdGVkXCIsXG4gICAgICAgICAgICAgICAgdmFsaWRSZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgcmVmcmVzaFRva2VuQ2xpZW50LmFjcXVpcmVUb2tlbih2YWxpZFJlcXVlc3QpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEF1dGhFcnJvcikge1xuICAgICAgICAgICAgICAgIGUuc2V0Q29ycmVsYXRpb25JZCh2YWxpZFJlcXVlc3QuY29ycmVsYXRpb25JZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyLmNhY2hlRmFpbGVkUmVxdWVzdChlKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBY3F1aXJlcyBhIHRva2VuIHNpbGVudGx5IHdoZW4gYSB1c2VyIHNwZWNpZmllcyB0aGUgYWNjb3VudCB0aGUgdG9rZW4gaXMgcmVxdWVzdGVkIGZvci5cbiAgICAgKlxuICAgICAqIFRoaXMgQVBJIGV4cGVjdHMgdGhlIHVzZXIgdG8gcHJvdmlkZSBhbiBhY2NvdW50IG9iamVjdCBhbmQgbG9va3MgaW50byB0aGUgY2FjaGUgdG8gcmV0cmlldmUgdGhlIHRva2VuIGlmIHByZXNlbnQuXG4gICAgICogVGhlcmUgaXMgYWxzbyBhbiBvcHRpb25hbCBcImZvcmNlUmVmcmVzaFwiIGJvb2xlYW4gdGhlIHVzZXIgY2FuIHNlbmQgdG8gYnlwYXNzIHRoZSBjYWNoZSBmb3IgYWNjZXNzX3Rva2VuIGFuZCBpZF90b2tlbi5cbiAgICAgKiBJbiBjYXNlIHRoZSByZWZyZXNoX3Rva2VuIGlzIGV4cGlyZWQgb3Igbm90IGZvdW5kLCBhbiBlcnJvciBpcyB0aHJvd25cbiAgICAgKiBhbmQgdGhlIGd1aWRhbmNlIGlzIGZvciB0aGUgdXNlciB0byBjYWxsIGFueSBpbnRlcmFjdGl2ZSB0b2tlbiBhY3F1aXNpdGlvbiBBUEkgKGVnOiBgYWNxdWlyZVRva2VuQnlDb2RlKClgKS5cbiAgICAgKi9cbiAgICBhc3luYyBhY3F1aXJlVG9rZW5TaWxlbnQoXG4gICAgICAgIHJlcXVlc3Q6IFNpbGVudEZsb3dSZXF1ZXN0XG4gICAgKTogUHJvbWlzZTxBdXRoZW50aWNhdGlvblJlc3VsdD4ge1xuICAgICAgICBjb25zdCB2YWxpZFJlcXVlc3Q6IENvbW1vblNpbGVudEZsb3dSZXF1ZXN0ID0ge1xuICAgICAgICAgICAgLi4ucmVxdWVzdCxcbiAgICAgICAgICAgIC4uLihhd2FpdCB0aGlzLmluaXRpYWxpemVCYXNlUmVxdWVzdChyZXF1ZXN0KSksXG4gICAgICAgICAgICBmb3JjZVJlZnJlc2g6IHJlcXVlc3QuZm9yY2VSZWZyZXNoIHx8IGZhbHNlLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHNlcnZlclRlbGVtZXRyeU1hbmFnZXIgPSB0aGlzLmluaXRpYWxpemVTZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyKFxuICAgICAgICAgICAgQXBpSWQuYWNxdWlyZVRva2VuU2lsZW50LFxuICAgICAgICAgICAgdmFsaWRSZXF1ZXN0LmNvcnJlbGF0aW9uSWQsXG4gICAgICAgICAgICB2YWxpZFJlcXVlc3QuZm9yY2VSZWZyZXNoXG4gICAgICAgICk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGRpc2NvdmVyZWRBdXRob3JpdHkgPSBhd2FpdCB0aGlzLmNyZWF0ZUF1dGhvcml0eShcbiAgICAgICAgICAgICAgICB2YWxpZFJlcXVlc3QuYXV0aG9yaXR5LFxuICAgICAgICAgICAgICAgIHZhbGlkUmVxdWVzdC5jb3JyZWxhdGlvbklkLFxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmF6dXJlQ2xvdWRPcHRpb25zXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3QgY2xpZW50Q29uZmlndXJhdGlvbiA9XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5idWlsZE9hdXRoQ2xpZW50Q29uZmlndXJhdGlvbihcbiAgICAgICAgICAgICAgICAgICAgZGlzY292ZXJlZEF1dGhvcml0eSxcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRSZXF1ZXN0LmNvcnJlbGF0aW9uSWQsXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkUmVxdWVzdC5yZWRpcmVjdFVyaSB8fCBcIlwiLFxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IHNpbGVudEZsb3dDbGllbnQgPSBuZXcgU2lsZW50Rmxvd0NsaWVudChjbGllbnRDb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgXCJTaWxlbnQgZmxvdyBjbGllbnQgY3JlYXRlZFwiLFxuICAgICAgICAgICAgICAgIHZhbGlkUmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBhbHdheXMgb3ZlcndyaXRlIHRoZSBpbi1tZW1vcnkgY2FjaGUgd2l0aCB0aGUgcGVyc2lzdGVuY2UgY2FjaGUgKGlmIGl0IGV4aXN0cykgYmVmb3JlIGEgY2FjaGUgbG9va3VwXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy50b2tlbkNhY2hlLm92ZXJ3cml0ZUNhY2hlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuYWNxdWlyZUNhY2hlZFRva2VuU2lsZW50KFxuICAgICAgICAgICAgICAgICAgICB2YWxpZFJlcXVlc3QsXG4gICAgICAgICAgICAgICAgICAgIHNpbGVudEZsb3dDbGllbnQsXG4gICAgICAgICAgICAgICAgICAgIGNsaWVudENvbmZpZ3VyYXRpb25cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIGVycm9yIGluc3RhbmNlb2YgQ2xpZW50QXV0aEVycm9yICYmXG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmVycm9yQ29kZSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLnRva2VuUmVmcmVzaFJlcXVpcmVkXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZnJlc2hUb2tlbkNsaWVudCA9IG5ldyBSZWZyZXNoVG9rZW5DbGllbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRDb25maWd1cmF0aW9uXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWZyZXNoVG9rZW5DbGllbnQuYWNxdWlyZVRva2VuQnlSZWZyZXNoVG9rZW4oXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBBdXRoRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBlcnJvci5zZXRDb3JyZWxhdGlvbklkKHZhbGlkUmVxdWVzdC5jb3JyZWxhdGlvbklkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlcnZlclRlbGVtZXRyeU1hbmFnZXIuY2FjaGVGYWlsZWRSZXF1ZXN0KGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBhY3F1aXJlQ2FjaGVkVG9rZW5TaWxlbnQoXG4gICAgICAgIHZhbGlkUmVxdWVzdDogQ29tbW9uU2lsZW50Rmxvd1JlcXVlc3QsXG4gICAgICAgIHNpbGVudEZsb3dDbGllbnQ6IFNpbGVudEZsb3dDbGllbnQsXG4gICAgICAgIGNsaWVudENvbmZpZ3VyYXRpb246IENsaWVudENvbmZpZ3VyYXRpb25cbiAgICApOiBQcm9taXNlPEF1dGhlbnRpY2F0aW9uUmVzdWx0PiB7XG4gICAgICAgIGNvbnN0IFthdXRoUmVzcG9uc2UsIGNhY2hlT3V0Y29tZV0gPVxuICAgICAgICAgICAgYXdhaXQgc2lsZW50Rmxvd0NsaWVudC5hY3F1aXJlQ2FjaGVkVG9rZW4oe1xuICAgICAgICAgICAgICAgIC4uLnZhbGlkUmVxdWVzdCxcbiAgICAgICAgICAgICAgICBzY29wZXM6IHZhbGlkUmVxdWVzdC5zY29wZXM/Lmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICA/IHZhbGlkUmVxdWVzdC5zY29wZXNcbiAgICAgICAgICAgICAgICAgICAgOiBbLi4uT0lEQ19ERUZBVUxUX1NDT1BFU10sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBpZiAoY2FjaGVPdXRjb21lID09PSBDYWNoZU91dGNvbWUuUFJPQUNUSVZFTFlfUkVGUkVTSEVEKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgICAgIFwiQ2xpZW50QXBwbGljYXRpb246YWNxdWlyZUNhY2hlZFRva2VuU2lsZW50IC0gQ2FjaGVkIGFjY2VzcyB0b2tlbidzIHJlZnJlc2hPbiBwcm9wZXJ0eSBoYXMgYmVlbiBleGNlZWRlZCcuIEl0J3Mgbm90IGV4cGlyZWQsIGJ1dCBtdXN0IGJlIHJlZnJlc2hlZC5cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIC8vIHJlZnJlc2ggdGhlIGFjY2VzcyB0b2tlbiBpbiB0aGUgYmFja2dyb3VuZFxuICAgICAgICAgICAgY29uc3QgcmVmcmVzaFRva2VuQ2xpZW50ID0gbmV3IFJlZnJlc2hUb2tlbkNsaWVudChcbiAgICAgICAgICAgICAgICBjbGllbnRDb25maWd1cmF0aW9uXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHJlZnJlc2hUb2tlbkNsaWVudC5hY3F1aXJlVG9rZW5CeVJlZnJlc2hUb2tlbihcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRSZXF1ZXN0XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgICAgIC8vIGRvIG5vdGhpbmcsIHRoaXMgaXMgcnVubmluZyBpbiB0aGUgYmFja2dyb3VuZCBhbmQgbm8gYWN0aW9uIGlzIHRvIGJlIHRha2VuIHVwb24gc3VjY2VzcyBvciBmYWlsdXJlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZXR1cm4gdGhlIGNhY2hlZCB0b2tlblxuICAgICAgICByZXR1cm4gYXV0aFJlc3BvbnNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFjcXVpcmVzIHRva2VucyB3aXRoIHBhc3N3b3JkIGdyYW50IGJ5IGV4Y2hhbmdpbmcgY2xpZW50IGFwcGxpY2F0aW9ucyB1c2VybmFtZSBhbmQgcGFzc3dvcmQgZm9yIGNyZWRlbnRpYWxzXG4gICAgICpcbiAgICAgKiBUaGUgbGF0ZXN0IE9BdXRoIDIuMCBTZWN1cml0eSBCZXN0IEN1cnJlbnQgUHJhY3RpY2UgZGlzYWxsb3dzIHRoZSBwYXNzd29yZCBncmFudCBlbnRpcmVseS5cbiAgICAgKiBNb3JlIGRldGFpbHMgb24gdGhpcyByZWNvbW1lbmRhdGlvbiBhdCBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvZHJhZnQtaWV0Zi1vYXV0aC1zZWN1cml0eS10b3BpY3MtMTMjc2VjdGlvbi0zLjRcbiAgICAgKiBNaWNyb3NvZnQncyBkb2N1bWVudGF0aW9uIGFuZCByZWNvbW1lbmRhdGlvbnMgYXJlIGF0OlxuICAgICAqIGh0dHBzOi8vZG9jcy5taWNyb3NvZnQuY29tL2VuLXVzL2F6dXJlL2FjdGl2ZS1kaXJlY3RvcnkvZGV2ZWxvcC9tc2FsLWF1dGhlbnRpY2F0aW9uLWZsb3dzI3VzZXJuYW1lcGFzc3dvcmRcbiAgICAgKlxuICAgICAqIEBwYXJhbSByZXF1ZXN0IC0gVXNlbmFtZVBhc3N3b3JkUmVxdWVzdFxuICAgICAqIEBkZXByZWNhdGVkIC0gVXNlIGEgbW9yZSBzZWN1cmUgZmxvdyBpbnN0ZWFkXG4gICAgICovXG4gICAgYXN5bmMgYWNxdWlyZVRva2VuQnlVc2VybmFtZVBhc3N3b3JkKFxuICAgICAgICByZXF1ZXN0OiBVc2VybmFtZVBhc3N3b3JkUmVxdWVzdFxuICAgICk6IFByb21pc2U8QXV0aGVudGljYXRpb25SZXN1bHQgfCBudWxsPiB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXG4gICAgICAgICAgICBcImFjcXVpcmVUb2tlbkJ5VXNlcm5hbWVQYXNzd29yZCBjYWxsZWRcIixcbiAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuICAgICAgICBjb25zdCB2YWxpZFJlcXVlc3Q6IENvbW1vblVzZXJuYW1lUGFzc3dvcmRSZXF1ZXN0ID0ge1xuICAgICAgICAgICAgLi4ucmVxdWVzdCxcbiAgICAgICAgICAgIC4uLihhd2FpdCB0aGlzLmluaXRpYWxpemVCYXNlUmVxdWVzdChyZXF1ZXN0KSksXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHNlcnZlclRlbGVtZXRyeU1hbmFnZXIgPSB0aGlzLmluaXRpYWxpemVTZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyKFxuICAgICAgICAgICAgQXBpSWQuYWNxdWlyZVRva2VuQnlVc2VybmFtZVBhc3N3b3JkLFxuICAgICAgICAgICAgdmFsaWRSZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGRpc2NvdmVyZWRBdXRob3JpdHkgPSBhd2FpdCB0aGlzLmNyZWF0ZUF1dGhvcml0eShcbiAgICAgICAgICAgICAgICB2YWxpZFJlcXVlc3QuYXV0aG9yaXR5LFxuICAgICAgICAgICAgICAgIHZhbGlkUmVxdWVzdC5jb3JyZWxhdGlvbklkLFxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmF6dXJlQ2xvdWRPcHRpb25zXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3QgdXNlcm5hbWVQYXNzd29yZENsaWVudENvbmZpZyA9XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5idWlsZE9hdXRoQ2xpZW50Q29uZmlndXJhdGlvbihcbiAgICAgICAgICAgICAgICAgICAgZGlzY292ZXJlZEF1dGhvcml0eSxcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRSZXF1ZXN0LmNvcnJlbGF0aW9uSWQsXG4gICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgIHNlcnZlclRlbGVtZXRyeU1hbmFnZXJcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3QgdXNlcm5hbWVQYXNzd29yZENsaWVudCA9IG5ldyBVc2VybmFtZVBhc3N3b3JkQ2xpZW50KFxuICAgICAgICAgICAgICAgIHVzZXJuYW1lUGFzc3dvcmRDbGllbnRDb25maWdcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFxuICAgICAgICAgICAgICAgIFwiVXNlcm5hbWUgcGFzc3dvcmQgY2xpZW50IGNyZWF0ZWRcIixcbiAgICAgICAgICAgICAgICB2YWxpZFJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB1c2VybmFtZVBhc3N3b3JkQ2xpZW50LmFjcXVpcmVUb2tlbih2YWxpZFJlcXVlc3QpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEF1dGhFcnJvcikge1xuICAgICAgICAgICAgICAgIGUuc2V0Q29ycmVsYXRpb25JZCh2YWxpZFJlcXVlc3QuY29ycmVsYXRpb25JZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyLmNhY2hlRmFpbGVkUmVxdWVzdChlKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSB0b2tlbiBjYWNoZSBmb3IgdGhlIGFwcGxpY2F0aW9uLlxuICAgICAqL1xuICAgIGdldFRva2VuQ2FjaGUoKTogVG9rZW5DYWNoZSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXCJnZXRUb2tlbkNhY2hlIGNhbGxlZFwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9rZW5DYWNoZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBWYWxpZGF0ZXMgT0lEQyBzdGF0ZSBieSBjb21wYXJpbmcgdGhlIHVzZXIgY2FjaGVkIHN0YXRlIHdpdGggdGhlIHN0YXRlIHJlY2VpdmVkIGZyb20gdGhlIHNlcnZlci5cbiAgICAgKlxuICAgICAqIFRoaXMgQVBJIGlzIHByb3ZpZGVkIGZvciBzY2VuYXJpb3Mgd2hlcmUgeW91IHdvdWxkIHVzZSBPQXV0aDIuMCBzdGF0ZSBwYXJhbWV0ZXIgdG8gbWl0aWdhdGUgYWdhaW5zdFxuICAgICAqIENTUkYgYXR0YWNrcy5cbiAgICAgKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBzdGF0ZSwgdmlzaXQgaHR0cHM6Ly9kYXRhdHJhY2tlci5pZXRmLm9yZy9kb2MvaHRtbC9yZmM2ODE5I3NlY3Rpb24tMy42LlxuICAgICAqIEBwYXJhbSBzdGF0ZSAtIFVuaXF1ZSBHVUlEIGdlbmVyYXRlZCBieSB0aGUgdXNlciB0aGF0IGlzIGNhY2hlZCBieSB0aGUgdXNlciBhbmQgc2VudCB0byB0aGUgc2VydmVyIGR1cmluZyB0aGUgZmlyc3QgbGVnIG9mIHRoZSBmbG93XG4gICAgICogQHBhcmFtIGNhY2hlZFN0YXRlIC0gVGhpcyBzdHJpbmcgaXMgc2VudCBiYWNrIGJ5IHRoZSBzZXJ2ZXIgd2l0aCB0aGUgYXV0aG9yaXphdGlvbiBjb2RlXG4gICAgICovXG4gICAgcHJvdGVjdGVkIHZhbGlkYXRlU3RhdGUoc3RhdGU6IHN0cmluZywgY2FjaGVkU3RhdGU6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZiAoIXN0YXRlKSB7XG4gICAgICAgICAgICB0aHJvdyBOb2RlQXV0aEVycm9yLmNyZWF0ZVN0YXRlTm90Rm91bmRFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN0YXRlICE9PSBjYWNoZWRTdGF0ZSkge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKENsaWVudEF1dGhFcnJvckNvZGVzLnN0YXRlTWlzbWF0Y2gpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbG9nZ2VyIGluc3RhbmNlXG4gICAgICovXG4gICAgZ2V0TG9nZ2VyKCk6IExvZ2dlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvZ2dlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXBsYWNlcyB0aGUgZGVmYXVsdCBsb2dnZXIgc2V0IGluIGNvbmZpZ3VyYXRpb25zIHdpdGggbmV3IExvZ2dlciB3aXRoIG5ldyBjb25maWd1cmF0aW9uc1xuICAgICAqIEBwYXJhbSBsb2dnZXIgLSBMb2dnZXIgaW5zdGFuY2VcbiAgICAgKi9cbiAgICBzZXRMb2dnZXIobG9nZ2VyOiBMb2dnZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5sb2dnZXIgPSBsb2dnZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQnVpbGRzIHRoZSBjb21tb24gY29uZmlndXJhdGlvbiB0byBiZSBwYXNzZWQgdG8gdGhlIGNvbW1vbiBjb21wb25lbnQgYmFzZWQgb24gdGhlIHBsYXRmb3JtIGNvbmZpZ3VyYXJpb25cbiAgICAgKiBAcGFyYW0gYXV0aG9yaXR5IC0gdXNlciBwYXNzZWQgYXV0aG9yaXR5IGluIGNvbmZpZ3VyYXRpb25cbiAgICAgKiBAcGFyYW0gc2VydmVyVGVsZW1ldHJ5TWFuYWdlciAtIGluaXRpYWxpemVzIHNlcnZlcnRlbGVtZXRyeSBpZiBwYXNzZWRcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgYXN5bmMgYnVpbGRPYXV0aENsaWVudENvbmZpZ3VyYXRpb24oXG4gICAgICAgIGRpc2NvdmVyZWRBdXRob3JpdHk6IEF1dGhvcml0eSxcbiAgICAgICAgcmVxdWVzdENvcnJlbGF0aW9uSWQ6IHN0cmluZyxcbiAgICAgICAgcmVkaXJlY3RVcmk6IHN0cmluZyxcbiAgICAgICAgc2VydmVyVGVsZW1ldHJ5TWFuYWdlcj86IFNlcnZlclRlbGVtZXRyeU1hbmFnZXJcbiAgICApOiBQcm9taXNlPENsaWVudENvbmZpZ3VyYXRpb24+IHtcbiAgICAgICAgdGhpcy5sb2dnZXIudmVyYm9zZShcbiAgICAgICAgICAgIFwiYnVpbGRPYXV0aENsaWVudENvbmZpZ3VyYXRpb24gY2FsbGVkXCIsXG4gICAgICAgICAgICByZXF1ZXN0Q29ycmVsYXRpb25JZFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXG4gICAgICAgICAgICBgQnVpbGRpbmcgb2F1dGggY2xpZW50IGNvbmZpZ3VyYXRpb24gd2l0aCB0aGUgZm9sbG93aW5nIGF1dGhvcml0eTogJHtkaXNjb3ZlcmVkQXV0aG9yaXR5LnRva2VuRW5kcG9pbnR9LmAsXG4gICAgICAgICAgICByZXF1ZXN0Q29ycmVsYXRpb25JZFxuICAgICAgICApO1xuXG4gICAgICAgIHNlcnZlclRlbGVtZXRyeU1hbmFnZXI/LnVwZGF0ZVJlZ2lvbkRpc2NvdmVyeU1ldGFkYXRhKFxuICAgICAgICAgICAgZGlzY292ZXJlZEF1dGhvcml0eS5yZWdpb25EaXNjb3ZlcnlNZXRhZGF0YVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNsaWVudENvbmZpZ3VyYXRpb246IENsaWVudENvbmZpZ3VyYXRpb24gPSB7XG4gICAgICAgICAgICBhdXRoT3B0aW9uczoge1xuICAgICAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLmNvbmZpZy5hdXRoLmNsaWVudElkLFxuICAgICAgICAgICAgICAgIGF1dGhvcml0eTogZGlzY292ZXJlZEF1dGhvcml0eSxcbiAgICAgICAgICAgICAgICBjbGllbnRDYXBhYmlsaXRpZXM6IHRoaXMuY29uZmlnLmF1dGguY2xpZW50Q2FwYWJpbGl0aWVzLFxuICAgICAgICAgICAgICAgIHJlZGlyZWN0VXJpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxvZ2dlck9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICBsb2dMZXZlbDogdGhpcy5jb25maWcuc3lzdGVtLmxvZ2dlck9wdGlvbnMubG9nTGV2ZWwsXG4gICAgICAgICAgICAgICAgbG9nZ2VyQ2FsbGJhY2s6IHRoaXMuY29uZmlnLnN5c3RlbS5sb2dnZXJPcHRpb25zLmxvZ2dlckNhbGxiYWNrLFxuICAgICAgICAgICAgICAgIHBpaUxvZ2dpbmdFbmFibGVkOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5zeXN0ZW0ubG9nZ2VyT3B0aW9ucy5waWlMb2dnaW5nRW5hYmxlZCxcbiAgICAgICAgICAgICAgICBjb3JyZWxhdGlvbklkOiByZXF1ZXN0Q29ycmVsYXRpb25JZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYWNoZU9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICBjbGFpbXNCYXNlZENhY2hpbmdFbmFibGVkOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5jYWNoZS5jbGFpbXNCYXNlZENhY2hpbmdFbmFibGVkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNyeXB0b0ludGVyZmFjZTogdGhpcy5jcnlwdG9Qcm92aWRlcixcbiAgICAgICAgICAgIG5ldHdvcmtJbnRlcmZhY2U6IHRoaXMuY29uZmlnLnN5c3RlbS5uZXR3b3JrQ2xpZW50LFxuICAgICAgICAgICAgc3RvcmFnZUludGVyZmFjZTogdGhpcy5zdG9yYWdlLFxuICAgICAgICAgICAgc2VydmVyVGVsZW1ldHJ5TWFuYWdlcjogc2VydmVyVGVsZW1ldHJ5TWFuYWdlcixcbiAgICAgICAgICAgIGNsaWVudENyZWRlbnRpYWxzOiB7XG4gICAgICAgICAgICAgICAgY2xpZW50U2VjcmV0OiB0aGlzLmNsaWVudFNlY3JldCxcbiAgICAgICAgICAgICAgICBjbGllbnRBc3NlcnRpb246IGF3YWl0IHRoaXMuZ2V0Q2xpZW50QXNzZXJ0aW9uKFxuICAgICAgICAgICAgICAgICAgICBkaXNjb3ZlcmVkQXV0aG9yaXR5XG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsaWJyYXJ5SW5mbzoge1xuICAgICAgICAgICAgICAgIHNrdTogTm9kZUNvbnN0YW50cy5NU0FMX1NLVSxcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiB2ZXJzaW9uLFxuICAgICAgICAgICAgICAgIGNwdTogcHJvY2Vzcy5hcmNoIHx8IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgICAgICAgICAgICAgb3M6IHByb2Nlc3MucGxhdGZvcm0gfHwgQ29uc3RhbnRzLkVNUFRZX1NUUklORyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0ZWxlbWV0cnk6IHRoaXMuY29uZmlnLnRlbGVtZXRyeSxcbiAgICAgICAgICAgIHBlcnNpc3RlbmNlUGx1Z2luOiB0aGlzLmNvbmZpZy5jYWNoZS5jYWNoZVBsdWdpbixcbiAgICAgICAgICAgIHNlcmlhbGl6YWJsZUNhY2hlOiB0aGlzLnRva2VuQ2FjaGUsXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGNsaWVudENvbmZpZ3VyYXRpb247XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBnZXRDbGllbnRBc3NlcnRpb24oXG4gICAgICAgIGF1dGhvcml0eTogQXV0aG9yaXR5XG4gICAgKTogUHJvbWlzZTxDbGllbnRBc3NlcnRpb25UeXBlPiB7XG4gICAgICAgIGlmICh0aGlzLmRldmVsb3BlclByb3ZpZGVkQ2xpZW50QXNzZXJ0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmNsaWVudEFzc2VydGlvbiA9IENsaWVudEFzc2VydGlvbi5mcm9tQXNzZXJ0aW9uKFxuICAgICAgICAgICAgICAgIGF3YWl0IGdldENsaWVudEFzc2VydGlvbihcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXZlbG9wZXJQcm92aWRlZENsaWVudEFzc2VydGlvbixcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aC5jbGllbnRJZCxcbiAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXR5LnRva2VuRW5kcG9pbnRcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIHRoaXMuY2xpZW50QXNzZXJ0aW9uICYmIHtcbiAgICAgICAgICAgICAgICBhc3NlcnRpb246IHRoaXMuY2xpZW50QXNzZXJ0aW9uLmdldEp3dChcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jcnlwdG9Qcm92aWRlcixcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aC5jbGllbnRJZCxcbiAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXR5LnRva2VuRW5kcG9pbnRcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIGFzc2VydGlvblR5cGU6IE5vZGVDb25zdGFudHMuSldUX0JFQVJFUl9BU1NFUlRJT05fVFlQRSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgYSByZXF1ZXN0IHdpdGggdGhlIGRlZmF1bHQgc2NvcGVzICYgZ2VuZXJhdGVzIGEgY29ycmVsYXRpb25JZC5cbiAgICAgKiBAcGFyYW0gYXV0aFJlcXVlc3QgLSBCYXNlQXV0aFJlcXVlc3QgZm9yIGluaXRpYWxpemF0aW9uXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGFzeW5jIGluaXRpYWxpemVCYXNlUmVxdWVzdChcbiAgICAgICAgYXV0aFJlcXVlc3Q6IFBhcnRpYWw8QmFzZUF1dGhSZXF1ZXN0PlxuICAgICk6IFByb21pc2U8QmFzZUF1dGhSZXF1ZXN0PiB7XG4gICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICBcImluaXRpYWxpemVSZXF1ZXN0U2NvcGVzIGNhbGxlZFwiLFxuICAgICAgICAgICAgYXV0aFJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuICAgICAgICAvLyBEZWZhdWx0IGF1dGhlbnRpY2F0aW9uU2NoZW1lIHRvIEJlYXJlciwgbG9nIHRoYXQgUE9QIGlzbid0IHN1cHBvcnRlZCB5ZXRcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgYXV0aFJlcXVlc3QuYXV0aGVudGljYXRpb25TY2hlbWUgJiZcbiAgICAgICAgICAgIGF1dGhSZXF1ZXN0LmF1dGhlbnRpY2F0aW9uU2NoZW1lID09PSBBdXRoZW50aWNhdGlvblNjaGVtZS5QT1BcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFxuICAgICAgICAgICAgICAgIFwiQXV0aGVudGljYXRpb24gU2NoZW1lICdwb3AnIGlzIG5vdCBzdXBwb3J0ZWQgeWV0LCBzZXR0aW5nIEF1dGhlbnRpY2F0aW9uIFNjaGVtZSB0byAnQmVhcmVyJyBmb3IgcmVxdWVzdFwiLFxuICAgICAgICAgICAgICAgIGF1dGhSZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBhdXRoUmVxdWVzdC5hdXRoZW50aWNhdGlvblNjaGVtZSA9IEF1dGhlbnRpY2F0aW9uU2NoZW1lLkJFQVJFUjtcblxuICAgICAgICAvLyBTZXQgcmVxdWVzdGVkIGNsYWltcyBoYXNoIGlmIGNsYWltcy1iYXNlZCBjYWNoaW5nIGlzIGVuYWJsZWQgYW5kIGNsYWltcyB3ZXJlIHJlcXVlc3RlZFxuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5jYWNoZS5jbGFpbXNCYXNlZENhY2hpbmdFbmFibGVkICYmXG4gICAgICAgICAgICBhdXRoUmVxdWVzdC5jbGFpbXMgJiZcbiAgICAgICAgICAgIC8vIENoZWNrcyBmb3IgZW1wdHkgc3RyaW5naWZpZWQgb2JqZWN0IFwie31cIiB3aGljaCBkb2Vzbid0IHF1YWxpZnkgYXMgcmVxdWVzdGVkIGNsYWltc1xuICAgICAgICAgICAgIVN0cmluZ1V0aWxzLmlzRW1wdHlPYmooYXV0aFJlcXVlc3QuY2xhaW1zKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGF1dGhSZXF1ZXN0LnJlcXVlc3RlZENsYWltc0hhc2ggPVxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY3J5cHRvUHJvdmlkZXIuaGFzaFN0cmluZyhhdXRoUmVxdWVzdC5jbGFpbXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmF1dGhSZXF1ZXN0LFxuICAgICAgICAgICAgc2NvcGVzOiBbXG4gICAgICAgICAgICAgICAgLi4uKChhdXRoUmVxdWVzdCAmJiBhdXRoUmVxdWVzdC5zY29wZXMpIHx8IFtdKSxcbiAgICAgICAgICAgICAgICAuLi5PSURDX0RFRkFVTFRfU0NPUEVTLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGNvcnJlbGF0aW9uSWQ6XG4gICAgICAgICAgICAgICAgKGF1dGhSZXF1ZXN0ICYmIGF1dGhSZXF1ZXN0LmNvcnJlbGF0aW9uSWQpIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5jcnlwdG9Qcm92aWRlci5jcmVhdGVOZXdHdWlkKCksXG4gICAgICAgICAgICBhdXRob3JpdHk6IGF1dGhSZXF1ZXN0LmF1dGhvcml0eSB8fCB0aGlzLmNvbmZpZy5hdXRoLmF1dGhvcml0eSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyB0aGUgc2VydmVyIHRlbGVtZXRyeSBwYXlsb2FkXG4gICAgICogQHBhcmFtIGFwaUlkIC0gSWQgZm9yIGEgc3BlY2lmaWMgcmVxdWVzdFxuICAgICAqIEBwYXJhbSBjb3JyZWxhdGlvbklkIC0gR1VJRFxuICAgICAqIEBwYXJhbSBmb3JjZVJlZnJlc2ggLSBib29sZWFuIHRvIGluZGljYXRlIG5ldHdvcmsgY2FsbFxuICAgICAqL1xuICAgIHByb3RlY3RlZCBpbml0aWFsaXplU2VydmVyVGVsZW1ldHJ5TWFuYWdlcihcbiAgICAgICAgYXBpSWQ6IG51bWJlcixcbiAgICAgICAgY29ycmVsYXRpb25JZDogc3RyaW5nLFxuICAgICAgICBmb3JjZVJlZnJlc2g/OiBib29sZWFuXG4gICAgKTogU2VydmVyVGVsZW1ldHJ5TWFuYWdlciB7XG4gICAgICAgIGNvbnN0IHRlbGVtZXRyeVBheWxvYWQ6IFNlcnZlclRlbGVtZXRyeVJlcXVlc3QgPSB7XG4gICAgICAgICAgICBjbGllbnRJZDogdGhpcy5jb25maWcuYXV0aC5jbGllbnRJZCxcbiAgICAgICAgICAgIGNvcnJlbGF0aW9uSWQ6IGNvcnJlbGF0aW9uSWQsXG4gICAgICAgICAgICBhcGlJZDogYXBpSWQsXG4gICAgICAgICAgICBmb3JjZVJlZnJlc2g6IGZvcmNlUmVmcmVzaCB8fCBmYWxzZSxcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gbmV3IFNlcnZlclRlbGVtZXRyeU1hbmFnZXIodGVsZW1ldHJ5UGF5bG9hZCwgdGhpcy5zdG9yYWdlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYXV0aG9yaXR5IGluc3RhbmNlLiBJZiBhdXRob3JpdHkgbm90IHBhc3NlZCBpbiByZXF1ZXN0LCBkZWZhdWx0IHRvIGF1dGhvcml0eSBzZXQgb24gdGhlIGFwcGxpY2F0aW9uXG4gICAgICogb2JqZWN0LiBJZiBubyBhdXRob3JpdHkgc2V0IGluIGFwcGxpY2F0aW9uIG9iamVjdCwgdGhlbiBkZWZhdWx0IHRvIGNvbW1vbiBhdXRob3JpdHkuXG4gICAgICogQHBhcmFtIGF1dGhvcml0eVN0cmluZyAtIGF1dGhvcml0eSBmcm9tIHVzZXIgY29uZmlndXJhdGlvblxuICAgICAqL1xuICAgIHByb3RlY3RlZCBhc3luYyBjcmVhdGVBdXRob3JpdHkoXG4gICAgICAgIGF1dGhvcml0eVN0cmluZzogc3RyaW5nLFxuICAgICAgICByZXF1ZXN0Q29ycmVsYXRpb25JZDogc3RyaW5nLFxuICAgICAgICBhenVyZVJlZ2lvbkNvbmZpZ3VyYXRpb24/OiBBenVyZVJlZ2lvbkNvbmZpZ3VyYXRpb24sXG4gICAgICAgIGF6dXJlQ2xvdWRPcHRpb25zPzogQXp1cmVDbG91ZE9wdGlvbnNcbiAgICApOiBQcm9taXNlPEF1dGhvcml0eT4ge1xuICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFwiY3JlYXRlQXV0aG9yaXR5IGNhbGxlZFwiLCByZXF1ZXN0Q29ycmVsYXRpb25JZCk7XG5cbiAgICAgICAgLy8gYnVpbGQgYXV0aG9yaXR5IHN0cmluZyBiYXNlZCBvbiBhdXRoIHBhcmFtcyAtIGF6dXJlQ2xvdWRJbnN0YW5jZSBpcyBwcmlvcml0aXplZCBpZiBwcm92aWRlZFxuICAgICAgICBjb25zdCBhdXRob3JpdHlVcmwgPSBBdXRob3JpdHkuZ2VuZXJhdGVBdXRob3JpdHkoXG4gICAgICAgICAgICBhdXRob3JpdHlTdHJpbmcsXG4gICAgICAgICAgICBhenVyZUNsb3VkT3B0aW9ucyB8fCB0aGlzLmNvbmZpZy5hdXRoLmF6dXJlQ2xvdWRPcHRpb25zXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgYXV0aG9yaXR5T3B0aW9uczogQXV0aG9yaXR5T3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHByb3RvY29sTW9kZTogdGhpcy5jb25maWcuYXV0aC5wcm90b2NvbE1vZGUsXG4gICAgICAgICAgICBrbm93bkF1dGhvcml0aWVzOiB0aGlzLmNvbmZpZy5hdXRoLmtub3duQXV0aG9yaXRpZXMsXG4gICAgICAgICAgICBjbG91ZERpc2NvdmVyeU1ldGFkYXRhOiB0aGlzLmNvbmZpZy5hdXRoLmNsb3VkRGlzY292ZXJ5TWV0YWRhdGEsXG4gICAgICAgICAgICBhdXRob3JpdHlNZXRhZGF0YTogdGhpcy5jb25maWcuYXV0aC5hdXRob3JpdHlNZXRhZGF0YSxcbiAgICAgICAgICAgIGF6dXJlUmVnaW9uQ29uZmlndXJhdGlvbixcbiAgICAgICAgICAgIHNraXBBdXRob3JpdHlNZXRhZGF0YUNhY2hlOlxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmF1dGguc2tpcEF1dGhvcml0eU1ldGFkYXRhQ2FjaGUsXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIEF1dGhvcml0eUZhY3RvcnkuY3JlYXRlRGlzY292ZXJlZEluc3RhbmNlKFxuICAgICAgICAgICAgYXV0aG9yaXR5VXJsLFxuICAgICAgICAgICAgdGhpcy5jb25maWcuc3lzdGVtLm5ldHdvcmtDbGllbnQsXG4gICAgICAgICAgICB0aGlzLnN0b3JhZ2UsXG4gICAgICAgICAgICBhdXRob3JpdHlPcHRpb25zLFxuICAgICAgICAgICAgdGhpcy5sb2dnZXIsXG4gICAgICAgICAgICByZXF1ZXN0Q29ycmVsYXRpb25JZFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsZWFyIHRoZSBjYWNoZVxuICAgICAqL1xuICAgIGNsZWFyQ2FjaGUoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc3RvcmFnZS5jbGVhcigpO1xuICAgIH1cbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgICBBY2Nlc3NUb2tlbkVudGl0eSxcbiAgICBBdXRoZW50aWNhdGlvblJlc3VsdCxcbiAgICBBdXRoZW50aWNhdGlvblNjaGVtZSxcbiAgICBBdXRob3JpdHksXG4gICAgQmFzZUNsaWVudCxcbiAgICBDYWNoZU1hbmFnZXIsXG4gICAgQ2FjaGVPdXRjb21lLFxuICAgIENsaWVudEF1dGhFcnJvckNvZGVzLFxuICAgIENsaWVudENvbmZpZ3VyYXRpb24sXG4gICAgQ29tbW9uQ2xpZW50Q3JlZGVudGlhbFJlcXVlc3QsXG4gICAgQ29uc3RhbnRzLFxuICAgIENyZWRlbnRpYWxGaWx0ZXIsXG4gICAgQ3JlZGVudGlhbFR5cGUsXG4gICAgREVGQVVMVF9UT0tFTl9SRU5FV0FMX09GRlNFVF9TRUMsXG4gICAgR3JhbnRUeXBlLFxuICAgIElBcHBUb2tlblByb3ZpZGVyLFxuICAgIElDcnlwdG8sXG4gICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIsXG4gICAgUmVxdWVzdFRodW1icHJpbnQsXG4gICAgUmVzcG9uc2VIYW5kbGVyLFxuICAgIFNjb3BlU2V0LFxuICAgIFNlcnZlckF1dGhvcml6YXRpb25Ub2tlblJlc3BvbnNlLFxuICAgIFNlcnZlclRlbGVtZXRyeU1hbmFnZXIsXG4gICAgU3RyaW5nVXRpbHMsXG4gICAgVGltZVV0aWxzLFxuICAgIFRva2VuQ2FjaGVDb250ZXh0LFxuICAgIFVybFN0cmluZyxcbiAgICBjcmVhdGVDbGllbnRBdXRoRXJyb3IsXG4gICAgQ2xpZW50QXNzZXJ0aW9uLFxuICAgIGdldENsaWVudEFzc2VydGlvbixcbiAgICBVcmxVdGlscyxcbn0gZnJvbSBcIkBhenVyZS9tc2FsLWNvbW1vbi9ub2RlXCI7XG5pbXBvcnQge1xuICAgIE1hbmFnZWRJZGVudGl0eUNvbmZpZ3VyYXRpb24sXG4gICAgTWFuYWdlZElkZW50aXR5Tm9kZUNvbmZpZ3VyYXRpb24sXG59IGZyb20gXCIuLi9jb25maWcvQ29uZmlndXJhdGlvbi5qc1wiO1xuXG4vKipcbiAqIE9BdXRoMi4wIGNsaWVudCBjcmVkZW50aWFsIGdyYW50XG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBDbGllbnRDcmVkZW50aWFsQ2xpZW50IGV4dGVuZHMgQmFzZUNsaWVudCB7XG4gICAgcHJpdmF0ZSByZWFkb25seSBhcHBUb2tlblByb3ZpZGVyPzogSUFwcFRva2VuUHJvdmlkZXI7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgY29uZmlndXJhdGlvbjogQ2xpZW50Q29uZmlndXJhdGlvbixcbiAgICAgICAgYXBwVG9rZW5Qcm92aWRlcj86IElBcHBUb2tlblByb3ZpZGVyXG4gICAgKSB7XG4gICAgICAgIHN1cGVyKGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICB0aGlzLmFwcFRva2VuUHJvdmlkZXIgPSBhcHBUb2tlblByb3ZpZGVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFB1YmxpYyBBUEkgdG8gYWNxdWlyZSBhIHRva2VuIHdpdGggQ2xpZW50Q3JlZGVudGlhbCBGbG93IGZvciBDb25maWRlbnRpYWwgY2xpZW50c1xuICAgICAqIEBwYXJhbSByZXF1ZXN0IC0gQ29tbW9uQ2xpZW50Q3JlZGVudGlhbFJlcXVlc3QgcHJvdmlkZWQgYnkgdGhlIGRldmVsb3BlclxuICAgICAqL1xuICAgIHB1YmxpYyBhc3luYyBhY3F1aXJlVG9rZW4oXG4gICAgICAgIHJlcXVlc3Q6IENvbW1vbkNsaWVudENyZWRlbnRpYWxSZXF1ZXN0XG4gICAgKTogUHJvbWlzZTxBdXRoZW50aWNhdGlvblJlc3VsdCB8IG51bGw+IHtcbiAgICAgICAgaWYgKHJlcXVlc3Quc2tpcENhY2hlIHx8IHJlcXVlc3QuY2xhaW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5leGVjdXRlVG9rZW5SZXF1ZXN0KHJlcXVlc3QsIHRoaXMuYXV0aG9yaXR5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IFtjYWNoZWRBdXRoZW50aWNhdGlvblJlc3VsdCwgbGFzdENhY2hlT3V0Y29tZV0gPVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5nZXRDYWNoZWRBdXRoZW50aWNhdGlvblJlc3VsdChcbiAgICAgICAgICAgICAgICByZXF1ZXN0LFxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLFxuICAgICAgICAgICAgICAgIHRoaXMuY3J5cHRvVXRpbHMsXG4gICAgICAgICAgICAgICAgdGhpcy5hdXRob3JpdHksXG4gICAgICAgICAgICAgICAgdGhpcy5jYWNoZU1hbmFnZXIsXG4gICAgICAgICAgICAgICAgdGhpcy5zZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIGlmIChjYWNoZWRBdXRoZW50aWNhdGlvblJlc3VsdCkge1xuICAgICAgICAgICAgLy8gaWYgdGhlIHRva2VuIGlzIG5vdCBleHBpcmVkIGJ1dCBtdXN0IGJlIHJlZnJlc2hlZDsgZ2V0IGEgbmV3IG9uZSBpbiB0aGUgYmFja2dyb3VuZFxuICAgICAgICAgICAgaWYgKGxhc3RDYWNoZU91dGNvbWUgPT09IENhY2hlT3V0Y29tZS5QUk9BQ1RJVkVMWV9SRUZSRVNIRUQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgICAgICAgICBcIkNsaWVudENyZWRlbnRpYWxDbGllbnQ6Z2V0Q2FjaGVkQXV0aGVudGljYXRpb25SZXN1bHQgLSBDYWNoZWQgYWNjZXNzIHRva2VuJ3MgcmVmcmVzaE9uIHByb3BlcnR5IGhhcyBiZWVuIGV4Y2VlZGVkJy4gSXQncyBub3QgZXhwaXJlZCwgYnV0IG11c3QgYmUgcmVmcmVzaGVkLlwiXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIC8vIHJlZnJlc2ggdGhlIGFjY2VzcyB0b2tlbiBpbiB0aGUgYmFja2dyb3VuZFxuICAgICAgICAgICAgICAgIGNvbnN0IHJlZnJlc2hBY2Nlc3NUb2tlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5leGVjdXRlVG9rZW5SZXF1ZXN0KFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmF1dGhvcml0eSxcbiAgICAgICAgICAgICAgICAgICAgcmVmcmVzaEFjY2Vzc1Rva2VuXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gcmV0dXJuIHRoZSBjYWNoZWQgdG9rZW5cbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRBdXRoZW50aWNhdGlvblJlc3VsdDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4ZWN1dGVUb2tlblJlcXVlc3QocmVxdWVzdCwgdGhpcy5hdXRob3JpdHkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogbG9va3MgdXAgY2FjaGUgaWYgdGhlIHRva2VucyBhcmUgY2FjaGVkIGFscmVhZHlcbiAgICAgKi9cbiAgICBwdWJsaWMgYXN5bmMgZ2V0Q2FjaGVkQXV0aGVudGljYXRpb25SZXN1bHQoXG4gICAgICAgIHJlcXVlc3Q6IENvbW1vbkNsaWVudENyZWRlbnRpYWxSZXF1ZXN0LFxuICAgICAgICBjb25maWc6IENsaWVudENvbmZpZ3VyYXRpb24gfCBNYW5hZ2VkSWRlbnRpdHlDb25maWd1cmF0aW9uLFxuICAgICAgICBjcnlwdG9VdGlsczogSUNyeXB0byxcbiAgICAgICAgYXV0aG9yaXR5OiBBdXRob3JpdHksXG4gICAgICAgIGNhY2hlTWFuYWdlcjogQ2FjaGVNYW5hZ2VyLFxuICAgICAgICBzZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyPzogU2VydmVyVGVsZW1ldHJ5TWFuYWdlciB8IG51bGxcbiAgICApOiBQcm9taXNlPFtBdXRoZW50aWNhdGlvblJlc3VsdCB8IG51bGwsIENhY2hlT3V0Y29tZV0+IHtcbiAgICAgICAgY29uc3QgY2xpZW50Q29uZmlndXJhdGlvbiA9IGNvbmZpZyBhcyBDbGllbnRDb25maWd1cmF0aW9uO1xuICAgICAgICBjb25zdCBtYW5hZ2VkSWRlbnRpdHlDb25maWd1cmF0aW9uID1cbiAgICAgICAgICAgIGNvbmZpZyBhcyBNYW5hZ2VkSWRlbnRpdHlOb2RlQ29uZmlndXJhdGlvbjtcblxuICAgICAgICBsZXQgbGFzdENhY2hlT3V0Y29tZTogQ2FjaGVPdXRjb21lID0gQ2FjaGVPdXRjb21lLk5PVF9BUFBMSUNBQkxFO1xuXG4gICAgICAgIC8vIHJlYWQgdGhlIHVzZXItc3VwcGxpZWQgY2FjaGUgaW50byBtZW1vcnksIGlmIGFwcGxpY2FibGVcbiAgICAgICAgbGV0IGNhY2hlQ29udGV4dDtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgY2xpZW50Q29uZmlndXJhdGlvbi5zZXJpYWxpemFibGVDYWNoZSAmJlxuICAgICAgICAgICAgY2xpZW50Q29uZmlndXJhdGlvbi5wZXJzaXN0ZW5jZVBsdWdpblxuICAgICAgICApIHtcbiAgICAgICAgICAgIGNhY2hlQ29udGV4dCA9IG5ldyBUb2tlbkNhY2hlQ29udGV4dChcbiAgICAgICAgICAgICAgICBjbGllbnRDb25maWd1cmF0aW9uLnNlcmlhbGl6YWJsZUNhY2hlLFxuICAgICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgYXdhaXQgY2xpZW50Q29uZmlndXJhdGlvbi5wZXJzaXN0ZW5jZVBsdWdpbi5iZWZvcmVDYWNoZUFjY2VzcyhcbiAgICAgICAgICAgICAgICBjYWNoZUNvbnRleHRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjYWNoZWRBY2Nlc3NUb2tlbiA9IHRoaXMucmVhZEFjY2Vzc1Rva2VuRnJvbUNhY2hlKFxuICAgICAgICAgICAgYXV0aG9yaXR5LFxuICAgICAgICAgICAgbWFuYWdlZElkZW50aXR5Q29uZmlndXJhdGlvbi5tYW5hZ2VkSWRlbnRpdHlJZD8uaWQgfHxcbiAgICAgICAgICAgICAgICBjbGllbnRDb25maWd1cmF0aW9uLmF1dGhPcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgICAgbmV3IFNjb3BlU2V0KHJlcXVlc3Quc2NvcGVzIHx8IFtdKSxcbiAgICAgICAgICAgIGNhY2hlTWFuYWdlclxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGNsaWVudENvbmZpZ3VyYXRpb24uc2VyaWFsaXphYmxlQ2FjaGUgJiZcbiAgICAgICAgICAgIGNsaWVudENvbmZpZ3VyYXRpb24ucGVyc2lzdGVuY2VQbHVnaW4gJiZcbiAgICAgICAgICAgIGNhY2hlQ29udGV4dFxuICAgICAgICApIHtcbiAgICAgICAgICAgIGF3YWl0IGNsaWVudENvbmZpZ3VyYXRpb24ucGVyc2lzdGVuY2VQbHVnaW4uYWZ0ZXJDYWNoZUFjY2VzcyhcbiAgICAgICAgICAgICAgICBjYWNoZUNvbnRleHRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtdXN0IHJlZnJlc2ggZHVlIHRvIG5vbi1leGlzdGVudCBhY2Nlc3NfdG9rZW5cbiAgICAgICAgaWYgKCFjYWNoZWRBY2Nlc3NUb2tlbikge1xuICAgICAgICAgICAgc2VydmVyVGVsZW1ldHJ5TWFuYWdlcj8uc2V0Q2FjaGVPdXRjb21lKFxuICAgICAgICAgICAgICAgIENhY2hlT3V0Y29tZS5OT19DQUNIRURfQUNDRVNTX1RPS0VOXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmV0dXJuIFtudWxsLCBDYWNoZU91dGNvbWUuTk9fQ0FDSEVEX0FDQ0VTU19UT0tFTl07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtdXN0IHJlZnJlc2ggZHVlIHRvIHRoZSBleHBpcmVzX2luIHZhbHVlXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIFRpbWVVdGlscy5pc1Rva2VuRXhwaXJlZChcbiAgICAgICAgICAgICAgICBjYWNoZWRBY2Nlc3NUb2tlbi5leHBpcmVzT24sXG4gICAgICAgICAgICAgICAgY2xpZW50Q29uZmlndXJhdGlvbi5zeXN0ZW1PcHRpb25zPy50b2tlblJlbmV3YWxPZmZzZXRTZWNvbmRzIHx8XG4gICAgICAgICAgICAgICAgICAgIERFRkFVTFRfVE9LRU5fUkVORVdBTF9PRkZTRVRfU0VDXG4gICAgICAgICAgICApXG4gICAgICAgICkge1xuICAgICAgICAgICAgc2VydmVyVGVsZW1ldHJ5TWFuYWdlcj8uc2V0Q2FjaGVPdXRjb21lKFxuICAgICAgICAgICAgICAgIENhY2hlT3V0Y29tZS5DQUNIRURfQUNDRVNTX1RPS0VOX0VYUElSRURcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm4gW251bGwsIENhY2hlT3V0Y29tZS5DQUNIRURfQUNDRVNTX1RPS0VOX0VYUElSRURdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbXVzdCByZWZyZXNoIChpbiB0aGUgYmFja2dyb3VuZCkgZHVlIHRvIHRoZSByZWZyZXNoX2luIHZhbHVlXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGNhY2hlZEFjY2Vzc1Rva2VuLnJlZnJlc2hPbiAmJlxuICAgICAgICAgICAgVGltZVV0aWxzLmlzVG9rZW5FeHBpcmVkKGNhY2hlZEFjY2Vzc1Rva2VuLnJlZnJlc2hPbi50b1N0cmluZygpLCAwKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGxhc3RDYWNoZU91dGNvbWUgPSBDYWNoZU91dGNvbWUuUFJPQUNUSVZFTFlfUkVGUkVTSEVEO1xuICAgICAgICAgICAgc2VydmVyVGVsZW1ldHJ5TWFuYWdlcj8uc2V0Q2FjaGVPdXRjb21lKFxuICAgICAgICAgICAgICAgIENhY2hlT3V0Y29tZS5QUk9BQ1RJVkVMWV9SRUZSRVNIRURcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgYXdhaXQgUmVzcG9uc2VIYW5kbGVyLmdlbmVyYXRlQXV0aGVudGljYXRpb25SZXN1bHQoXG4gICAgICAgICAgICAgICAgY3J5cHRvVXRpbHMsXG4gICAgICAgICAgICAgICAgYXV0aG9yaXR5LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgaWRUb2tlbjogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IGNhY2hlZEFjY2Vzc1Rva2VuLFxuICAgICAgICAgICAgICAgICAgICByZWZyZXNoVG9rZW46IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGFwcE1ldGFkYXRhOiBudWxsLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICByZXF1ZXN0XG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgbGFzdENhY2hlT3V0Y29tZSxcbiAgICAgICAgXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWFkcyBhY2Nlc3MgdG9rZW4gZnJvbSB0aGUgY2FjaGVcbiAgICAgKi9cbiAgICBwcml2YXRlIHJlYWRBY2Nlc3NUb2tlbkZyb21DYWNoZShcbiAgICAgICAgYXV0aG9yaXR5OiBBdXRob3JpdHksXG4gICAgICAgIGlkOiBzdHJpbmcsXG4gICAgICAgIHNjb3BlU2V0OiBTY29wZVNldCxcbiAgICAgICAgY2FjaGVNYW5hZ2VyOiBDYWNoZU1hbmFnZXJcbiAgICApOiBBY2Nlc3NUb2tlbkVudGl0eSB8IG51bGwge1xuICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbkZpbHRlcjogQ3JlZGVudGlhbEZpbHRlciA9IHtcbiAgICAgICAgICAgIGhvbWVBY2NvdW50SWQ6IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgICAgICAgICBlbnZpcm9ubWVudDpcbiAgICAgICAgICAgICAgICBhdXRob3JpdHkuY2Fub25pY2FsQXV0aG9yaXR5VXJsQ29tcG9uZW50cy5Ib3N0TmFtZUFuZFBvcnQsXG4gICAgICAgICAgICBjcmVkZW50aWFsVHlwZTogQ3JlZGVudGlhbFR5cGUuQUNDRVNTX1RPS0VOLFxuICAgICAgICAgICAgY2xpZW50SWQ6IGlkLFxuICAgICAgICAgICAgcmVhbG06IGF1dGhvcml0eS50ZW5hbnQsXG4gICAgICAgICAgICB0YXJnZXQ6IFNjb3BlU2V0LmNyZWF0ZVNlYXJjaFNjb3BlcyhzY29wZVNldC5hc0FycmF5KCkpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VucyA9XG4gICAgICAgICAgICBjYWNoZU1hbmFnZXIuZ2V0QWNjZXNzVG9rZW5zQnlGaWx0ZXIoYWNjZXNzVG9rZW5GaWx0ZXIpO1xuICAgICAgICBpZiAoYWNjZXNzVG9rZW5zLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9IGVsc2UgaWYgKGFjY2Vzc1Rva2Vucy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMubXVsdGlwbGVNYXRjaGluZ1Rva2Vuc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWNjZXNzVG9rZW5zWzBdIGFzIEFjY2Vzc1Rva2VuRW50aXR5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1ha2VzIGEgbmV0d29yayBjYWxsIHRvIHJlcXVlc3QgdGhlIHRva2VuIGZyb20gdGhlIHNlcnZpY2VcbiAgICAgKiBAcGFyYW0gcmVxdWVzdCAtIENvbW1vbkNsaWVudENyZWRlbnRpYWxSZXF1ZXN0IHByb3ZpZGVkIGJ5IHRoZSBkZXZlbG9wZXJcbiAgICAgKiBAcGFyYW0gYXV0aG9yaXR5IC0gYXV0aG9yaXR5IG9iamVjdFxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgZXhlY3V0ZVRva2VuUmVxdWVzdChcbiAgICAgICAgcmVxdWVzdDogQ29tbW9uQ2xpZW50Q3JlZGVudGlhbFJlcXVlc3QsXG4gICAgICAgIGF1dGhvcml0eTogQXV0aG9yaXR5LFxuICAgICAgICByZWZyZXNoQWNjZXNzVG9rZW4/OiBib29sZWFuXG4gICAgKTogUHJvbWlzZTxBdXRoZW50aWNhdGlvblJlc3VsdCB8IG51bGw+IHtcbiAgICAgICAgbGV0IHNlcnZlclRva2VuUmVzcG9uc2U6IFNlcnZlckF1dGhvcml6YXRpb25Ub2tlblJlc3BvbnNlO1xuICAgICAgICBsZXQgcmVxVGltZXN0YW1wOiBudW1iZXI7XG5cbiAgICAgICAgaWYgKHRoaXMuYXBwVG9rZW5Qcm92aWRlcikge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcIlVzaW5nIGFwcFRva2VuUHJvdmlkZXIgZXh0ZW5zaWJpbGl0eS5cIik7XG5cbiAgICAgICAgICAgIGNvbnN0IGFwcFRva2VuUHJvcHZpZGVyUGFyYW1ldGVycyA9IHtcbiAgICAgICAgICAgICAgICBjb3JyZWxhdGlvbklkOiByZXF1ZXN0LmNvcnJlbGF0aW9uSWQsXG4gICAgICAgICAgICAgICAgdGVuYW50SWQ6IHRoaXMuY29uZmlnLmF1dGhPcHRpb25zLmF1dGhvcml0eS50ZW5hbnQsXG4gICAgICAgICAgICAgICAgc2NvcGVzOiByZXF1ZXN0LnNjb3BlcyxcbiAgICAgICAgICAgICAgICBjbGFpbXM6IHJlcXVlc3QuY2xhaW1zLFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmVxVGltZXN0YW1wID0gVGltZVV0aWxzLm5vd1NlY29uZHMoKTtcbiAgICAgICAgICAgIGNvbnN0IGFwcFRva2VuUHJvdmlkZXJSZXN1bHQgPSBhd2FpdCB0aGlzLmFwcFRva2VuUHJvdmlkZXIoXG4gICAgICAgICAgICAgICAgYXBwVG9rZW5Qcm9wdmlkZXJQYXJhbWV0ZXJzXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBzZXJ2ZXJUb2tlblJlc3BvbnNlID0ge1xuICAgICAgICAgICAgICAgIGFjY2Vzc190b2tlbjogYXBwVG9rZW5Qcm92aWRlclJlc3VsdC5hY2Nlc3NUb2tlbixcbiAgICAgICAgICAgICAgICBleHBpcmVzX2luOiBhcHBUb2tlblByb3ZpZGVyUmVzdWx0LmV4cGlyZXNJblNlY29uZHMsXG4gICAgICAgICAgICAgICAgcmVmcmVzaF9pbjogYXBwVG9rZW5Qcm92aWRlclJlc3VsdC5yZWZyZXNoSW5TZWNvbmRzLFxuICAgICAgICAgICAgICAgIHRva2VuX3R5cGU6IEF1dGhlbnRpY2F0aW9uU2NoZW1lLkJFQVJFUixcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnNTdHJpbmcgPVxuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlVG9rZW5RdWVyeVBhcmFtZXRlcnMocmVxdWVzdCk7XG4gICAgICAgICAgICBjb25zdCBlbmRwb2ludCA9IFVybFN0cmluZy5hcHBlbmRRdWVyeVN0cmluZyhcbiAgICAgICAgICAgICAgICBhdXRob3JpdHkudG9rZW5FbmRwb2ludCxcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNTdHJpbmdcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0gYXdhaXQgdGhpcy5jcmVhdGVUb2tlblJlcXVlc3RCb2R5KHJlcXVlc3QpO1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVUb2tlblJlcXVlc3RIZWFkZXJzKCk7XG4gICAgICAgICAgICBjb25zdCB0aHVtYnByaW50OiBSZXF1ZXN0VGh1bWJwcmludCA9IHtcbiAgICAgICAgICAgICAgICBjbGllbnRJZDogdGhpcy5jb25maWcuYXV0aE9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgYXV0aG9yaXR5OiByZXF1ZXN0LmF1dGhvcml0eSxcbiAgICAgICAgICAgICAgICBzY29wZXM6IHJlcXVlc3Quc2NvcGVzLFxuICAgICAgICAgICAgICAgIGNsYWltczogcmVxdWVzdC5jbGFpbXMsXG4gICAgICAgICAgICAgICAgYXV0aGVudGljYXRpb25TY2hlbWU6IHJlcXVlc3QuYXV0aGVudGljYXRpb25TY2hlbWUsXG4gICAgICAgICAgICAgICAgcmVzb3VyY2VSZXF1ZXN0TWV0aG9kOiByZXF1ZXN0LnJlc291cmNlUmVxdWVzdE1ldGhvZCxcbiAgICAgICAgICAgICAgICByZXNvdXJjZVJlcXVlc3RVcmk6IHJlcXVlc3QucmVzb3VyY2VSZXF1ZXN0VXJpLFxuICAgICAgICAgICAgICAgIHNockNsYWltczogcmVxdWVzdC5zaHJDbGFpbXMsXG4gICAgICAgICAgICAgICAgc3NoS2lkOiByZXF1ZXN0LnNzaEtpZCxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXG4gICAgICAgICAgICAgICAgXCJTZW5kaW5nIHRva2VuIHJlcXVlc3QgdG8gZW5kcG9pbnQ6IFwiICsgYXV0aG9yaXR5LnRva2VuRW5kcG9pbnRcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHJlcVRpbWVzdGFtcCA9IFRpbWVVdGlscy5ub3dTZWNvbmRzKCk7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZXhlY3V0ZVBvc3RUb1Rva2VuRW5kcG9pbnQoXG4gICAgICAgICAgICAgICAgZW5kcG9pbnQsXG4gICAgICAgICAgICAgICAgcmVxdWVzdEJvZHksXG4gICAgICAgICAgICAgICAgaGVhZGVycyxcbiAgICAgICAgICAgICAgICB0aHVtYnByaW50LFxuICAgICAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgc2VydmVyVG9rZW5SZXNwb25zZSA9IHJlc3BvbnNlLmJvZHk7XG4gICAgICAgICAgICBzZXJ2ZXJUb2tlblJlc3BvbnNlLnN0YXR1cyA9IHJlc3BvbnNlLnN0YXR1cztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlSGFuZGxlciA9IG5ldyBSZXNwb25zZUhhbmRsZXIoXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICAgIHRoaXMuY2FjaGVNYW5hZ2VyLFxuICAgICAgICAgICAgdGhpcy5jcnlwdG9VdGlscyxcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLFxuICAgICAgICAgICAgdGhpcy5jb25maWcuc2VyaWFsaXphYmxlQ2FjaGUsXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5wZXJzaXN0ZW5jZVBsdWdpblxuICAgICAgICApO1xuXG4gICAgICAgIHJlc3BvbnNlSGFuZGxlci52YWxpZGF0ZVRva2VuUmVzcG9uc2UoXG4gICAgICAgICAgICBzZXJ2ZXJUb2tlblJlc3BvbnNlLFxuICAgICAgICAgICAgcmVmcmVzaEFjY2Vzc1Rva2VuXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgdG9rZW5SZXNwb25zZSA9IGF3YWl0IHJlc3BvbnNlSGFuZGxlci5oYW5kbGVTZXJ2ZXJUb2tlblJlc3BvbnNlKFxuICAgICAgICAgICAgc2VydmVyVG9rZW5SZXNwb25zZSxcbiAgICAgICAgICAgIHRoaXMuYXV0aG9yaXR5LFxuICAgICAgICAgICAgcmVxVGltZXN0YW1wLFxuICAgICAgICAgICAgcmVxdWVzdFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiB0b2tlblJlc3BvbnNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGdlbmVyYXRlIHRoZSByZXF1ZXN0IHRvIHRoZSBzZXJ2ZXIgaW4gdGhlIGFjY2VwdGFibGUgZm9ybWF0XG4gICAgICogQHBhcmFtIHJlcXVlc3QgLSBDb21tb25DbGllbnRDcmVkZW50aWFsUmVxdWVzdCBwcm92aWRlZCBieSB0aGUgZGV2ZWxvcGVyXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBjcmVhdGVUb2tlblJlcXVlc3RCb2R5KFxuICAgICAgICByZXF1ZXN0OiBDb21tb25DbGllbnRDcmVkZW50aWFsUmVxdWVzdFxuICAgICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSBuZXcgTWFwPHN0cmluZywgc3RyaW5nPigpO1xuXG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudElkKFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmF1dGhPcHRpb25zLmNsaWVudElkXG4gICAgICAgICk7XG5cbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkU2NvcGVzKHBhcmFtZXRlcnMsIHJlcXVlc3Quc2NvcGVzLCBmYWxzZSk7XG5cbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkR3JhbnRUeXBlKFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIEdyYW50VHlwZS5DTElFTlRfQ1JFREVOVElBTFNfR1JBTlRcbiAgICAgICAgKTtcblxuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRMaWJyYXJ5SW5mbyhcbiAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5saWJyYXJ5SW5mb1xuICAgICAgICApO1xuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRBcHBsaWNhdGlvblRlbGVtZXRyeShcbiAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy50ZWxlbWV0cnkuYXBwbGljYXRpb25cbiAgICAgICAgKTtcblxuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRUaHJvdHRsaW5nKHBhcmFtZXRlcnMpO1xuXG4gICAgICAgIGlmICh0aGlzLnNlcnZlclRlbGVtZXRyeU1hbmFnZXIpIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFNlcnZlclRlbGVtZXRyeShcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHRoaXMuc2VydmVyVGVsZW1ldHJ5TWFuYWdlclxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNvcnJlbGF0aW9uSWQgPVxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkIHx8XG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5jcnlwdG9JbnRlcmZhY2UuY3JlYXRlTmV3R3VpZCgpO1xuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDb3JyZWxhdGlvbklkKHBhcmFtZXRlcnMsIGNvcnJlbGF0aW9uSWQpO1xuXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5jbGllbnRDcmVkZW50aWFscy5jbGllbnRTZWNyZXQpIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudFNlY3JldChcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmNsaWVudENyZWRlbnRpYWxzLmNsaWVudFNlY3JldFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVzZSBjbGllbnRBc3NlcnRpb24gZnJvbSByZXF1ZXN0LCBmYWxsYmFjayB0byBjbGllbnQgYXNzZXJ0aW9uIGluIGJhc2UgY29uZmlndXJhdGlvblxuICAgICAgICBjb25zdCBjbGllbnRBc3NlcnRpb246IENsaWVudEFzc2VydGlvbiB8IHVuZGVmaW5lZCA9XG4gICAgICAgICAgICByZXF1ZXN0LmNsaWVudEFzc2VydGlvbiB8fFxuICAgICAgICAgICAgdGhpcy5jb25maWcuY2xpZW50Q3JlZGVudGlhbHMuY2xpZW50QXNzZXJ0aW9uO1xuXG4gICAgICAgIGlmIChjbGllbnRBc3NlcnRpb24pIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudEFzc2VydGlvbihcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGF3YWl0IGdldENsaWVudEFzc2VydGlvbihcbiAgICAgICAgICAgICAgICAgICAgY2xpZW50QXNzZXJ0aW9uLmFzc2VydGlvbixcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aE9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3QucmVzb3VyY2VSZXF1ZXN0VXJpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudEFzc2VydGlvblR5cGUoXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBjbGllbnRBc3NlcnRpb24uYXNzZXJ0aW9uVHlwZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFTdHJpbmdVdGlscy5pc0VtcHR5T2JqKHJlcXVlc3QuY2xhaW1zKSB8fFxuICAgICAgICAgICAgKHRoaXMuY29uZmlnLmF1dGhPcHRpb25zLmNsaWVudENhcGFiaWxpdGllcyAmJlxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmF1dGhPcHRpb25zLmNsaWVudENhcGFiaWxpdGllcy5sZW5ndGggPiAwKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsYWltcyhcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlcXVlc3QuY2xhaW1zLFxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmF1dGhPcHRpb25zLmNsaWVudENhcGFiaWxpdGllc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBVcmxVdGlscy5tYXBUb1F1ZXJ5U3RyaW5nKHBhcmFtZXRlcnMpO1xuICAgIH1cbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgICBBQURTZXJ2ZXJQYXJhbUtleXMsXG4gICAgQWNjZXNzVG9rZW5FbnRpdHksXG4gICAgQWNjb3VudEVudGl0eSxcbiAgICBBY2NvdW50SW5mbyxcbiAgICBBdXRoZW50aWNhdGlvblJlc3VsdCxcbiAgICBBdXRoZW50aWNhdGlvblNjaGVtZSxcbiAgICBBdXRob3JpdHksXG4gICAgQXV0aFRva2VuLFxuICAgIEJhc2VDbGllbnQsXG4gICAgQ2FjaGVPdXRjb21lLFxuICAgIENsaWVudEF1dGhFcnJvckNvZGVzLFxuICAgIENsaWVudENvbmZpZ3VyYXRpb24sXG4gICAgQ29tbW9uT25CZWhhbGZPZlJlcXVlc3QsXG4gICAgQ29uc3RhbnRzLFxuICAgIGNyZWF0ZUNsaWVudEF1dGhFcnJvcixcbiAgICBDcmVkZW50aWFsRmlsdGVyLFxuICAgIENyZWRlbnRpYWxUeXBlLFxuICAgIEdyYW50VHlwZSxcbiAgICBJZFRva2VuRW50aXR5LFxuICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLFxuICAgIFJlcXVlc3RUaHVtYnByaW50LFxuICAgIFJlc3BvbnNlSGFuZGxlcixcbiAgICBTY29wZVNldCxcbiAgICBUaW1lVXRpbHMsXG4gICAgVG9rZW5DbGFpbXMsXG4gICAgVXJsU3RyaW5nLFxuICAgIENsaWVudEFzc2VydGlvbixcbiAgICBnZXRDbGllbnRBc3NlcnRpb24sXG4gICAgVXJsVXRpbHMsXG59IGZyb20gXCJAYXp1cmUvbXNhbC1jb21tb24vbm9kZVwiO1xuaW1wb3J0IHsgRW5jb2RpbmdVdGlscyB9IGZyb20gXCIuLi91dGlscy9FbmNvZGluZ1V0aWxzLmpzXCI7XG5cbi8qKlxuICogT24tQmVoYWxmLU9mIGNsaWVudFxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgT25CZWhhbGZPZkNsaWVudCBleHRlbmRzIEJhc2VDbGllbnQge1xuICAgIHByaXZhdGUgc2NvcGVTZXQ6IFNjb3BlU2V0O1xuICAgIHByaXZhdGUgdXNlckFzc2VydGlvbkhhc2g6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZ3VyYXRpb246IENsaWVudENvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgc3VwZXIoY29uZmlndXJhdGlvbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHVibGljIEFQSSB0byBhY3F1aXJlIHRva2VucyB3aXRoIG9uIGJlaGFsZiBvZiBmbG93XG4gICAgICogQHBhcmFtIHJlcXVlc3QgLSBkZXZlbG9wZXIgcHJvdmlkZWQgQ29tbW9uT25CZWhhbGZPZlJlcXVlc3RcbiAgICAgKi9cbiAgICBwdWJsaWMgYXN5bmMgYWNxdWlyZVRva2VuKFxuICAgICAgICByZXF1ZXN0OiBDb21tb25PbkJlaGFsZk9mUmVxdWVzdFxuICAgICk6IFByb21pc2U8QXV0aGVudGljYXRpb25SZXN1bHQgfCBudWxsPiB7XG4gICAgICAgIHRoaXMuc2NvcGVTZXQgPSBuZXcgU2NvcGVTZXQocmVxdWVzdC5zY29wZXMgfHwgW10pO1xuXG4gICAgICAgIC8vIGdlbmVyYXRlIHRoZSB1c2VyX2Fzc2VydGlvbl9oYXNoIGZvciBPQk9Bc3NlcnRpb25cbiAgICAgICAgdGhpcy51c2VyQXNzZXJ0aW9uSGFzaCA9IGF3YWl0IHRoaXMuY3J5cHRvVXRpbHMuaGFzaFN0cmluZyhcbiAgICAgICAgICAgIHJlcXVlc3Qub2JvQXNzZXJ0aW9uXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKHJlcXVlc3Quc2tpcENhY2hlIHx8IHJlcXVlc3QuY2xhaW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5leGVjdXRlVG9rZW5SZXF1ZXN0KFxuICAgICAgICAgICAgICAgIHJlcXVlc3QsXG4gICAgICAgICAgICAgICAgdGhpcy5hdXRob3JpdHksXG4gICAgICAgICAgICAgICAgdGhpcy51c2VyQXNzZXJ0aW9uSGFzaFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRDYWNoZWRBdXRoZW50aWNhdGlvblJlc3VsdChyZXF1ZXN0KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gQW55IGZhaWx1cmUgZmFsbHMgYmFjayB0byBpbnRlcmFjdGl2ZSByZXF1ZXN0LCBvbmNlIHdlIGltcGxlbWVudCBkaXN0cmlidXRlZCBjYWNoZSwgd2UgcGxhbiB0byBoYW5kbGUgYGNyZWF0ZVJlZnJlc2hSZXF1aXJlZEVycm9yYCB0byByZWZyZXNoIHVzaW5nIHRoZSBSVFxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZXhlY3V0ZVRva2VuUmVxdWVzdChcbiAgICAgICAgICAgICAgICByZXF1ZXN0LFxuICAgICAgICAgICAgICAgIHRoaXMuYXV0aG9yaXR5LFxuICAgICAgICAgICAgICAgIHRoaXMudXNlckFzc2VydGlvbkhhc2hcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBsb29rIHVwIGNhY2hlIGZvciB0b2tlbnNcbiAgICAgKiBGaW5kIGlkdG9rZW4gaW4gdGhlIGNhY2hlXG4gICAgICogRmluZCBhY2Nlc3NUb2tlbiBiYXNlZCBvbiB1c2VyIGFzc2VydGlvbiBhbmQgYWNjb3VudCBpbmZvIGluIHRoZSBjYWNoZVxuICAgICAqIFBsZWFzZSBub3RlIHdlIGFyZSBub3QgeWV0IHN1cHBvcnRlZCBPQk8gdG9rZW5zIHJlZnJlc2hlZCB3aXRoIGxvbmcgbGl2ZWQgUlQuIFVzZXIgd2lsbCBoYXZlIHRvIHNlbmQgYSBuZXcgYXNzZXJ0aW9uIGlmIHRoZSBjdXJyZW50IGFjY2VzcyB0b2tlbiBleHBpcmVzXG4gICAgICogVGhpcyBpcyB0byBwcmV2ZW50IHNlY3VyaXR5IGlzc3VlcyB3aGVuIHRoZSBhc3NlcnRpb24gY2hhbmdlcyBvdmVyIHRpbWUsIGhvd2V2ZXIsIGxvbmdsaXZlZCBSVCBoZWxwcyByZXRhaW5pbmcgdGhlIHNlc3Npb25cbiAgICAgKiBAcGFyYW0gcmVxdWVzdCAtIGRldmVsb3BlciBwcm92aWRlZCBDb21tb25PbkJlaGFsZk9mUmVxdWVzdFxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgZ2V0Q2FjaGVkQXV0aGVudGljYXRpb25SZXN1bHQoXG4gICAgICAgIHJlcXVlc3Q6IENvbW1vbk9uQmVoYWxmT2ZSZXF1ZXN0XG4gICAgKTogUHJvbWlzZTxBdXRoZW50aWNhdGlvblJlc3VsdCB8IG51bGw+IHtcbiAgICAgICAgLy8gbG9vayBpbiB0aGUgY2FjaGUgZm9yIHRoZSBhY2Nlc3NfdG9rZW4gd2hpY2ggbWF0Y2hlcyB0aGUgaW5jb21pbmdfYXNzZXJ0aW9uXG4gICAgICAgIGNvbnN0IGNhY2hlZEFjY2Vzc1Rva2VuID0gdGhpcy5yZWFkQWNjZXNzVG9rZW5Gcm9tQ2FjaGVGb3JPQk8oXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICAgIHJlcXVlc3RcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKCFjYWNoZWRBY2Nlc3NUb2tlbikge1xuICAgICAgICAgICAgLy8gTXVzdCByZWZyZXNoIGR1ZSB0byBub24tZXhpc3RlbnQgYWNjZXNzX3Rva2VuLlxuICAgICAgICAgICAgdGhpcy5zZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyPy5zZXRDYWNoZU91dGNvbWUoXG4gICAgICAgICAgICAgICAgQ2FjaGVPdXRjb21lLk5PX0NBQ0hFRF9BQ0NFU1NfVE9LRU5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgICAgIFwiU2lsZW50Rmxvd0NsaWVudDphY3F1aXJlQ2FjaGVkVG9rZW4gLSBObyBhY2Nlc3MgdG9rZW4gZm91bmQgaW4gY2FjaGUgZm9yIHRoZSBnaXZlbiBwcm9wZXJ0aWVzLlwiXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlQ2xpZW50QXV0aEVycm9yKFxuICAgICAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLnRva2VuUmVmcmVzaFJlcXVpcmVkXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgVGltZVV0aWxzLmlzVG9rZW5FeHBpcmVkKFxuICAgICAgICAgICAgICAgIGNhY2hlZEFjY2Vzc1Rva2VuLmV4cGlyZXNPbixcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5zeXN0ZW1PcHRpb25zLnRva2VuUmVuZXdhbE9mZnNldFNlY29uZHNcbiAgICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBBY2Nlc3MgdG9rZW4gZXhwaXJlZCwgd2lsbCBuZWVkIHRvIHJlbmV3ZWRcbiAgICAgICAgICAgIHRoaXMuc2VydmVyVGVsZW1ldHJ5TWFuYWdlcj8uc2V0Q2FjaGVPdXRjb21lKFxuICAgICAgICAgICAgICAgIENhY2hlT3V0Y29tZS5DQUNIRURfQUNDRVNTX1RPS0VOX0VYUElSRURcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgICAgIGBPbmJlaGFsZm9mRmxvdzpnZXRDYWNoZWRBdXRoZW50aWNhdGlvblJlc3VsdCAtIENhY2hlZCBhY2Nlc3MgdG9rZW4gaXMgZXhwaXJlZCBvciB3aWxsIGV4cGlyZSB3aXRoaW4gJHt0aGlzLmNvbmZpZy5zeXN0ZW1PcHRpb25zLnRva2VuUmVuZXdhbE9mZnNldFNlY29uZHN9IHNlY29uZHMuYFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihcbiAgICAgICAgICAgICAgICBDbGllbnRBdXRoRXJyb3JDb2Rlcy50b2tlblJlZnJlc2hSZXF1aXJlZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGZldGNoIHRoZSBpZFRva2VuIGZyb20gY2FjaGVcbiAgICAgICAgY29uc3QgY2FjaGVkSWRUb2tlbiA9IHRoaXMucmVhZElkVG9rZW5Gcm9tQ2FjaGVGb3JPQk8oXG4gICAgICAgICAgICBjYWNoZWRBY2Nlc3NUb2tlbi5ob21lQWNjb3VudElkXG4gICAgICAgICk7XG4gICAgICAgIGxldCBpZFRva2VuQ2xhaW1zOiBUb2tlbkNsYWltcyB8IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IGNhY2hlZEFjY291bnQ6IEFjY291bnRFbnRpdHkgfCBudWxsID0gbnVsbDtcbiAgICAgICAgaWYgKGNhY2hlZElkVG9rZW4pIHtcbiAgICAgICAgICAgIGlkVG9rZW5DbGFpbXMgPSBBdXRoVG9rZW4uZXh0cmFjdFRva2VuQ2xhaW1zKFxuICAgICAgICAgICAgICAgIGNhY2hlZElkVG9rZW4uc2VjcmV0LFxuICAgICAgICAgICAgICAgIEVuY29kaW5nVXRpbHMuYmFzZTY0RGVjb2RlXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxBY2NvdW50SWQgPSBpZFRva2VuQ2xhaW1zLm9pZCB8fCBpZFRva2VuQ2xhaW1zLnN1YjtcbiAgICAgICAgICAgIGNvbnN0IGFjY291bnRJbmZvOiBBY2NvdW50SW5mbyA9IHtcbiAgICAgICAgICAgICAgICBob21lQWNjb3VudElkOiBjYWNoZWRJZFRva2VuLmhvbWVBY2NvdW50SWQsXG4gICAgICAgICAgICAgICAgZW52aXJvbm1lbnQ6IGNhY2hlZElkVG9rZW4uZW52aXJvbm1lbnQsXG4gICAgICAgICAgICAgICAgdGVuYW50SWQ6IGNhY2hlZElkVG9rZW4ucmVhbG0sXG4gICAgICAgICAgICAgICAgdXNlcm5hbWU6IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgICAgICAgICAgICAgbG9jYWxBY2NvdW50SWQ6IGxvY2FsQWNjb3VudElkIHx8IENvbnN0YW50cy5FTVBUWV9TVFJJTkcsXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjYWNoZWRBY2NvdW50ID0gdGhpcy5jYWNoZU1hbmFnZXIucmVhZEFjY291bnRGcm9tQ2FjaGUoYWNjb3VudEluZm8pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaW5jcmVtZW50IHRlbGVtZXRyeSBjYWNoZSBoaXQgY291bnRlclxuICAgICAgICBpZiAodGhpcy5jb25maWcuc2VydmVyVGVsZW1ldHJ5TWFuYWdlcikge1xuICAgICAgICAgICAgdGhpcy5jb25maWcuc2VydmVyVGVsZW1ldHJ5TWFuYWdlci5pbmNyZW1lbnRDYWNoZUhpdHMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBSZXNwb25zZUhhbmRsZXIuZ2VuZXJhdGVBdXRoZW50aWNhdGlvblJlc3VsdChcbiAgICAgICAgICAgIHRoaXMuY3J5cHRvVXRpbHMsXG4gICAgICAgICAgICB0aGlzLmF1dGhvcml0eSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhY2NvdW50OiBjYWNoZWRBY2NvdW50LFxuICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiBjYWNoZWRBY2Nlc3NUb2tlbixcbiAgICAgICAgICAgICAgICBpZFRva2VuOiBjYWNoZWRJZFRva2VuLFxuICAgICAgICAgICAgICAgIHJlZnJlc2hUb2tlbjogbnVsbCxcbiAgICAgICAgICAgICAgICBhcHBNZXRhZGF0YTogbnVsbCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgICAgIGlkVG9rZW5DbGFpbXNcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZWFkIGlkdG9rZW4gZnJvbSBjYWNoZSwgdGhpcyBpcyBhIHNwZWNpZmljIGltcGxlbWVudGF0aW9uIGZvciBPQk8gYXMgdGhlIHJlcXVpcmVtZW50cyBkaWZmZXIgZnJvbSBhIGdlbmVyaWMgbG9va3VwIGluIHRoZSBjYWNoZU1hbmFnZXJcbiAgICAgKiBDZXJ0YWluIHVzZSBjYXNlcyBvZiBPQk8gZmxvdyBkbyBub3QgZXhwZWN0IGFuIGlkVG9rZW4gaW4gdGhlIGNhY2hlL29yIGZyb20gdGhlIHNlcnZpY2VcbiAgICAgKiBAcGFyYW0gYXRIb21lQWNjb3VudElkIC0gYWNjb3VudCBpZFxuICAgICAqL1xuICAgIHByaXZhdGUgcmVhZElkVG9rZW5Gcm9tQ2FjaGVGb3JPQk8oXG4gICAgICAgIGF0SG9tZUFjY291bnRJZDogc3RyaW5nXG4gICAgKTogSWRUb2tlbkVudGl0eSB8IG51bGwge1xuICAgICAgICBjb25zdCBpZFRva2VuRmlsdGVyOiBDcmVkZW50aWFsRmlsdGVyID0ge1xuICAgICAgICAgICAgaG9tZUFjY291bnRJZDogYXRIb21lQWNjb3VudElkLFxuICAgICAgICAgICAgZW52aXJvbm1lbnQ6XG4gICAgICAgICAgICAgICAgdGhpcy5hdXRob3JpdHkuY2Fub25pY2FsQXV0aG9yaXR5VXJsQ29tcG9uZW50cy5Ib3N0TmFtZUFuZFBvcnQsXG4gICAgICAgICAgICBjcmVkZW50aWFsVHlwZTogQ3JlZGVudGlhbFR5cGUuSURfVE9LRU4sXG4gICAgICAgICAgICBjbGllbnRJZDogdGhpcy5jb25maWcuYXV0aE9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgICByZWFsbTogdGhpcy5hdXRob3JpdHkudGVuYW50LFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGlkVG9rZW5NYXA6IE1hcDxzdHJpbmcsIElkVG9rZW5FbnRpdHk+ID1cbiAgICAgICAgICAgIHRoaXMuY2FjaGVNYW5hZ2VyLmdldElkVG9rZW5zQnlGaWx0ZXIoaWRUb2tlbkZpbHRlcik7XG5cbiAgICAgICAgLy8gV2hlbiBhY3F1aXJpbmcgYSB0b2tlbiBvbiBiZWhhbGYgb2YgYW4gYXBwbGljYXRpb24sIHRoZXJlIG1pZ2h0IG5vdCBiZSBhbiBpZCB0b2tlbiBpbiB0aGUgY2FjaGVcbiAgICAgICAgaWYgKE9iamVjdC52YWx1ZXMoaWRUb2tlbk1hcCkubGVuZ3RoIDwgMSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9iamVjdC52YWx1ZXMoaWRUb2tlbk1hcClbMF0gYXMgSWRUb2tlbkVudGl0eTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGZXRjaGVzIHRoZSBjYWNoZWQgYWNjZXNzIHRva2VuIGJhc2VkIG9uIGluY29taW5nIGFzc2VydGlvblxuICAgICAqIEBwYXJhbSBjbGllbnRJZCAtIGNsaWVudCBpZFxuICAgICAqIEBwYXJhbSByZXF1ZXN0IC0gZGV2ZWxvcGVyIHByb3ZpZGVkIENvbW1vbk9uQmVoYWxmT2ZSZXF1ZXN0XG4gICAgICovXG4gICAgcHJpdmF0ZSByZWFkQWNjZXNzVG9rZW5Gcm9tQ2FjaGVGb3JPQk8oXG4gICAgICAgIGNsaWVudElkOiBzdHJpbmcsXG4gICAgICAgIHJlcXVlc3Q6IENvbW1vbk9uQmVoYWxmT2ZSZXF1ZXN0XG4gICAgKSB7XG4gICAgICAgIGNvbnN0IGF1dGhTY2hlbWUgPVxuICAgICAgICAgICAgcmVxdWVzdC5hdXRoZW50aWNhdGlvblNjaGVtZSB8fCBBdXRoZW50aWNhdGlvblNjaGVtZS5CRUFSRVI7XG4gICAgICAgIC8qXG4gICAgICAgICAqIERpc3Rpbmd1aXNoIGJldHdlZW4gQmVhcmVyIGFuZCBQb1AvU1NIIHRva2VuIGNhY2hlIHR5cGVzXG4gICAgICAgICAqIENhc3QgdG8gbG93ZXJjYXNlIHRvIGhhbmRsZSBcImJlYXJlclwiIGZyb20gQURGU1xuICAgICAgICAgKi9cbiAgICAgICAgY29uc3QgY3JlZGVudGlhbFR5cGUgPVxuICAgICAgICAgICAgYXV0aFNjaGVtZSAmJlxuICAgICAgICAgICAgYXV0aFNjaGVtZS50b0xvd2VyQ2FzZSgpICE9PVxuICAgICAgICAgICAgICAgIEF1dGhlbnRpY2F0aW9uU2NoZW1lLkJFQVJFUi50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgICAgPyBDcmVkZW50aWFsVHlwZS5BQ0NFU1NfVE9LRU5fV0lUSF9BVVRIX1NDSEVNRVxuICAgICAgICAgICAgICAgIDogQ3JlZGVudGlhbFR5cGUuQUNDRVNTX1RPS0VOO1xuXG4gICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuRmlsdGVyOiBDcmVkZW50aWFsRmlsdGVyID0ge1xuICAgICAgICAgICAgY3JlZGVudGlhbFR5cGU6IGNyZWRlbnRpYWxUeXBlLFxuICAgICAgICAgICAgY2xpZW50SWQsXG4gICAgICAgICAgICB0YXJnZXQ6IFNjb3BlU2V0LmNyZWF0ZVNlYXJjaFNjb3Blcyh0aGlzLnNjb3BlU2V0LmFzQXJyYXkoKSksXG4gICAgICAgICAgICB0b2tlblR5cGU6IGF1dGhTY2hlbWUsXG4gICAgICAgICAgICBrZXlJZDogcmVxdWVzdC5zc2hLaWQsXG4gICAgICAgICAgICByZXF1ZXN0ZWRDbGFpbXNIYXNoOiByZXF1ZXN0LnJlcXVlc3RlZENsYWltc0hhc2gsXG4gICAgICAgICAgICB1c2VyQXNzZXJ0aW9uSGFzaDogdGhpcy51c2VyQXNzZXJ0aW9uSGFzaCxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbnMgPVxuICAgICAgICAgICAgdGhpcy5jYWNoZU1hbmFnZXIuZ2V0QWNjZXNzVG9rZW5zQnlGaWx0ZXIoYWNjZXNzVG9rZW5GaWx0ZXIpO1xuXG4gICAgICAgIGNvbnN0IG51bUFjY2Vzc1Rva2VucyA9IGFjY2Vzc1Rva2Vucy5sZW5ndGg7XG4gICAgICAgIGlmIChudW1BY2Nlc3NUb2tlbnMgPCAxKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSBlbHNlIGlmIChudW1BY2Nlc3NUb2tlbnMgPiAxKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMubXVsdGlwbGVNYXRjaGluZ1Rva2Vuc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhY2Nlc3NUb2tlbnNbMF0gYXMgQWNjZXNzVG9rZW5FbnRpdHk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFrZSBhIG5ldHdvcmsgY2FsbCB0byB0aGUgc2VydmVyIHJlcXVlc3RpbmcgY3JlZGVudGlhbHNcbiAgICAgKiBAcGFyYW0gcmVxdWVzdCAtIGRldmVsb3BlciBwcm92aWRlZCBDb21tb25PbkJlaGFsZk9mUmVxdWVzdFxuICAgICAqIEBwYXJhbSBhdXRob3JpdHkgLSBhdXRob3JpdHkgb2JqZWN0XG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBleGVjdXRlVG9rZW5SZXF1ZXN0KFxuICAgICAgICByZXF1ZXN0OiBDb21tb25PbkJlaGFsZk9mUmVxdWVzdCxcbiAgICAgICAgYXV0aG9yaXR5OiBBdXRob3JpdHksXG4gICAgICAgIHVzZXJBc3NlcnRpb25IYXNoOiBzdHJpbmdcbiAgICApOiBQcm9taXNlPEF1dGhlbnRpY2F0aW9uUmVzdWx0IHwgbnVsbD4ge1xuICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnNTdHJpbmcgPSB0aGlzLmNyZWF0ZVRva2VuUXVlcnlQYXJhbWV0ZXJzKHJlcXVlc3QpO1xuICAgICAgICBjb25zdCBlbmRwb2ludCA9IFVybFN0cmluZy5hcHBlbmRRdWVyeVN0cmluZyhcbiAgICAgICAgICAgIGF1dGhvcml0eS50b2tlbkVuZHBvaW50LFxuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzU3RyaW5nXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0gYXdhaXQgdGhpcy5jcmVhdGVUb2tlblJlcXVlc3RCb2R5KHJlcXVlc3QpO1xuICAgICAgICBjb25zdCBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID1cbiAgICAgICAgICAgIHRoaXMuY3JlYXRlVG9rZW5SZXF1ZXN0SGVhZGVycygpO1xuICAgICAgICBjb25zdCB0aHVtYnByaW50OiBSZXF1ZXN0VGh1bWJwcmludCA9IHtcbiAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICAgIGF1dGhvcml0eTogcmVxdWVzdC5hdXRob3JpdHksXG4gICAgICAgICAgICBzY29wZXM6IHJlcXVlc3Quc2NvcGVzLFxuICAgICAgICAgICAgY2xhaW1zOiByZXF1ZXN0LmNsYWltcyxcbiAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uU2NoZW1lOiByZXF1ZXN0LmF1dGhlbnRpY2F0aW9uU2NoZW1lLFxuICAgICAgICAgICAgcmVzb3VyY2VSZXF1ZXN0TWV0aG9kOiByZXF1ZXN0LnJlc291cmNlUmVxdWVzdE1ldGhvZCxcbiAgICAgICAgICAgIHJlc291cmNlUmVxdWVzdFVyaTogcmVxdWVzdC5yZXNvdXJjZVJlcXVlc3RVcmksXG4gICAgICAgICAgICBzaHJDbGFpbXM6IHJlcXVlc3Quc2hyQ2xhaW1zLFxuICAgICAgICAgICAgc3NoS2lkOiByZXF1ZXN0LnNzaEtpZCxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCByZXFUaW1lc3RhbXAgPSBUaW1lVXRpbHMubm93U2Vjb25kcygpO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZXhlY3V0ZVBvc3RUb1Rva2VuRW5kcG9pbnQoXG4gICAgICAgICAgICBlbmRwb2ludCxcbiAgICAgICAgICAgIHJlcXVlc3RCb2R5LFxuICAgICAgICAgICAgaGVhZGVycyxcbiAgICAgICAgICAgIHRodW1icHJpbnQsXG4gICAgICAgICAgICByZXF1ZXN0LmNvcnJlbGF0aW9uSWRcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCByZXNwb25zZUhhbmRsZXIgPSBuZXcgUmVzcG9uc2VIYW5kbGVyKFxuICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aE9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgICB0aGlzLmNhY2hlTWFuYWdlcixcbiAgICAgICAgICAgIHRoaXMuY3J5cHRvVXRpbHMsXG4gICAgICAgICAgICB0aGlzLmxvZ2dlcixcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLnNlcmlhbGl6YWJsZUNhY2hlLFxuICAgICAgICAgICAgdGhpcy5jb25maWcucGVyc2lzdGVuY2VQbHVnaW5cbiAgICAgICAgKTtcblxuICAgICAgICByZXNwb25zZUhhbmRsZXIudmFsaWRhdGVUb2tlblJlc3BvbnNlKHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICBjb25zdCB0b2tlblJlc3BvbnNlID0gYXdhaXQgcmVzcG9uc2VIYW5kbGVyLmhhbmRsZVNlcnZlclRva2VuUmVzcG9uc2UoXG4gICAgICAgICAgICByZXNwb25zZS5ib2R5LFxuICAgICAgICAgICAgdGhpcy5hdXRob3JpdHksXG4gICAgICAgICAgICByZXFUaW1lc3RhbXAsXG4gICAgICAgICAgICByZXF1ZXN0LFxuICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgdXNlckFzc2VydGlvbkhhc2hcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gdG9rZW5SZXNwb25zZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnZW5lcmF0ZSBhIHNlcnZlciByZXF1ZXN0IGluIGFjY2VwYWJsZSBmb3JtYXRcbiAgICAgKiBAcGFyYW0gcmVxdWVzdCAtIGRldmVsb3BlciBwcm92aWRlZCBDb21tb25PbkJlaGFsZk9mUmVxdWVzdFxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgY3JlYXRlVG9rZW5SZXF1ZXN0Qm9keShcbiAgICAgICAgcmVxdWVzdDogQ29tbW9uT25CZWhhbGZPZlJlcXVlc3RcbiAgICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCBwYXJhbWV0ZXJzID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZz4oKTtcblxuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDbGllbnRJZChcbiAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoT3B0aW9ucy5jbGllbnRJZFxuICAgICAgICApO1xuXG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFNjb3BlcyhwYXJhbWV0ZXJzLCByZXF1ZXN0LnNjb3Blcyk7XG5cbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkR3JhbnRUeXBlKHBhcmFtZXRlcnMsIEdyYW50VHlwZS5KV1RfQkVBUkVSKTtcblxuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDbGllbnRJbmZvKHBhcmFtZXRlcnMpO1xuXG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZExpYnJhcnlJbmZvKFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmxpYnJhcnlJbmZvXG4gICAgICAgICk7XG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZEFwcGxpY2F0aW9uVGVsZW1ldHJ5KFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLnRlbGVtZXRyeS5hcHBsaWNhdGlvblxuICAgICAgICApO1xuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRUaHJvdHRsaW5nKHBhcmFtZXRlcnMpO1xuXG4gICAgICAgIGlmICh0aGlzLnNlcnZlclRlbGVtZXRyeU1hbmFnZXIpIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFNlcnZlclRlbGVtZXRyeShcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHRoaXMuc2VydmVyVGVsZW1ldHJ5TWFuYWdlclxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNvcnJlbGF0aW9uSWQgPVxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkIHx8XG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5jcnlwdG9JbnRlcmZhY2UuY3JlYXRlTmV3R3VpZCgpO1xuICAgICAgICBSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDb3JyZWxhdGlvbklkKHBhcmFtZXRlcnMsIGNvcnJlbGF0aW9uSWQpO1xuXG4gICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFJlcXVlc3RUb2tlblVzZShcbiAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICBBQURTZXJ2ZXJQYXJhbUtleXMuT05fQkVIQUxGX09GXG4gICAgICAgICk7XG5cbiAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkT2JvQXNzZXJ0aW9uKFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHJlcXVlc3Qub2JvQXNzZXJ0aW9uXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmNsaWVudENyZWRlbnRpYWxzLmNsaWVudFNlY3JldCkge1xuICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2xpZW50U2VjcmV0KFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcuY2xpZW50Q3JlZGVudGlhbHMuY2xpZW50U2VjcmV0XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2xpZW50QXNzZXJ0aW9uOiBDbGllbnRBc3NlcnRpb24gfCB1bmRlZmluZWQgPVxuICAgICAgICAgICAgdGhpcy5jb25maWcuY2xpZW50Q3JlZGVudGlhbHMuY2xpZW50QXNzZXJ0aW9uO1xuXG4gICAgICAgIGlmIChjbGllbnRBc3NlcnRpb24pIHtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudEFzc2VydGlvbihcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGF3YWl0IGdldENsaWVudEFzc2VydGlvbihcbiAgICAgICAgICAgICAgICAgICAgY2xpZW50QXNzZXJ0aW9uLmFzc2VydGlvbixcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aE9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3QucmVzb3VyY2VSZXF1ZXN0VXJpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIFJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudEFzc2VydGlvblR5cGUoXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBjbGllbnRBc3NlcnRpb24uYXNzZXJ0aW9uVHlwZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHJlcXVlc3QuY2xhaW1zIHx8XG4gICAgICAgICAgICAodGhpcy5jb25maWcuYXV0aE9wdGlvbnMuY2xpZW50Q2FwYWJpbGl0aWVzICYmXG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aE9wdGlvbnMuY2xpZW50Q2FwYWJpbGl0aWVzLmxlbmd0aCA+IDApXG4gICAgICAgICkge1xuICAgICAgICAgICAgUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2xhaW1zKFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5jbGFpbXMsXG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aE9wdGlvbnMuY2xpZW50Q2FwYWJpbGl0aWVzXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFVybFV0aWxzLm1hcFRvUXVlcnlTdHJpbmcocGFyYW1ldGVycyk7XG4gICAgfVxufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG4vLyBBQURBdXRob3JpdHlDb25zdGFudHNcblxuaW1wb3J0IHsgQ2xpZW50QXBwbGljYXRpb24gfSBmcm9tIFwiLi9DbGllbnRBcHBsaWNhdGlvbi5qc1wiO1xuaW1wb3J0IHsgQ29uZmlndXJhdGlvbiB9IGZyb20gXCIuLi9jb25maWcvQ29uZmlndXJhdGlvbi5qc1wiO1xuaW1wb3J0IHsgQ2xpZW50QXNzZXJ0aW9uIH0gZnJvbSBcIi4vQ2xpZW50QXNzZXJ0aW9uLmpzXCI7XG5pbXBvcnQge1xuICAgIENvbnN0YW50cyBhcyBOb2RlQ29uc3RhbnRzLFxuICAgIEFwaUlkLFxuICAgIFJFR0lPTl9FTlZJUk9OTUVOVF9WQVJJQUJMRSxcbiAgICBNU0FMX0ZPUkNFX1JFR0lPTixcbn0gZnJvbSBcIi4uL3V0aWxzL0NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHtcbiAgICBDb21tb25DbGllbnRDcmVkZW50aWFsUmVxdWVzdCxcbiAgICBDb21tb25PbkJlaGFsZk9mUmVxdWVzdCxcbiAgICBBdXRoZW50aWNhdGlvblJlc3VsdCxcbiAgICBBenVyZVJlZ2lvbkNvbmZpZ3VyYXRpb24sXG4gICAgQXV0aEVycm9yLFxuICAgIElBcHBUb2tlblByb3ZpZGVyLFxuICAgIE9JRENfREVGQVVMVF9TQ09QRVMsXG4gICAgVXJsU3RyaW5nLFxuICAgIEFBREF1dGhvcml0eUNvbnN0YW50cyxcbiAgICBjcmVhdGVDbGllbnRBdXRoRXJyb3IsXG4gICAgQ2xpZW50QXV0aEVycm9yQ29kZXMsXG4gICAgQ2xpZW50QXNzZXJ0aW9uIGFzIENsaWVudEFzc2VydGlvblR5cGUsXG4gICAgZ2V0Q2xpZW50QXNzZXJ0aW9uLFxuICAgIEF6dXJlUmVnaW9uLFxufSBmcm9tIFwiQGF6dXJlL21zYWwtY29tbW9uL25vZGVcIjtcbmltcG9ydCB7IElDb25maWRlbnRpYWxDbGllbnRBcHBsaWNhdGlvbiB9IGZyb20gXCIuL0lDb25maWRlbnRpYWxDbGllbnRBcHBsaWNhdGlvbi5qc1wiO1xuaW1wb3J0IHsgT25CZWhhbGZPZlJlcXVlc3QgfSBmcm9tIFwiLi4vcmVxdWVzdC9PbkJlaGFsZk9mUmVxdWVzdC5qc1wiO1xuaW1wb3J0IHsgQ2xpZW50Q3JlZGVudGlhbFJlcXVlc3QgfSBmcm9tIFwiLi4vcmVxdWVzdC9DbGllbnRDcmVkZW50aWFsUmVxdWVzdC5qc1wiO1xuaW1wb3J0IHsgQ2xpZW50Q3JlZGVudGlhbENsaWVudCB9IGZyb20gXCIuL0NsaWVudENyZWRlbnRpYWxDbGllbnQuanNcIjtcbmltcG9ydCB7IE9uQmVoYWxmT2ZDbGllbnQgfSBmcm9tIFwiLi9PbkJlaGFsZk9mQ2xpZW50LmpzXCI7XG5cbi8qKlxuICogIFRoaXMgY2xhc3MgaXMgdG8gYmUgdXNlZCB0byBhY3F1aXJlIHRva2VucyBmb3IgY29uZmlkZW50aWFsIGNsaWVudCBhcHBsaWNhdGlvbnMgKHdlYkFwcCwgd2ViQVBJKS4gQ29uZmlkZW50aWFsIGNsaWVudCBhcHBsaWNhdGlvbnNcbiAqICB3aWxsIGNvbmZpZ3VyZSBhcHBsaWNhdGlvbiBzZWNyZXRzLCBjbGllbnQgY2VydGlmaWNhdGVzL2Fzc2VydGlvbnMgYXMgYXBwbGljYWJsZVxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgQ29uZmlkZW50aWFsQ2xpZW50QXBwbGljYXRpb25cbiAgICBleHRlbmRzIENsaWVudEFwcGxpY2F0aW9uXG4gICAgaW1wbGVtZW50cyBJQ29uZmlkZW50aWFsQ2xpZW50QXBwbGljYXRpb25cbntcbiAgICBwcml2YXRlIGFwcFRva2VuUHJvdmlkZXI/OiBJQXBwVG9rZW5Qcm92aWRlcjtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yIGZvciB0aGUgQ29uZmlkZW50aWFsQ2xpZW50QXBwbGljYXRpb25cbiAgICAgKlxuICAgICAqIFJlcXVpcmVkIGF0dHJpYnV0ZXMgaW4gdGhlIENvbmZpZ3VyYXRpb24gb2JqZWN0IGFyZTpcbiAgICAgKiAtIGNsaWVudElEOiB0aGUgYXBwbGljYXRpb24gSUQgb2YgeW91ciBhcHBsaWNhdGlvbi4gWW91IGNhbiBvYnRhaW4gb25lIGJ5IHJlZ2lzdGVyaW5nIHlvdXIgYXBwbGljYXRpb24gd2l0aCBvdXIgYXBwbGljYXRpb24gcmVnaXN0cmF0aW9uIHBvcnRhbFxuICAgICAqIC0gYXV0aG9yaXR5OiB0aGUgYXV0aG9yaXR5IFVSTCBmb3IgeW91ciBhcHBsaWNhdGlvbi5cbiAgICAgKiAtIGNsaWVudCBjcmVkZW50aWFsOiBNdXN0IHNldCBlaXRoZXIgY2xpZW50IHNlY3JldCwgY2VydGlmaWNhdGUsIG9yIGFzc2VydGlvbiBmb3IgY29uZmlkZW50aWFsIGNsaWVudHMuIFlvdSBjYW4gb2J0YWluIGEgY2xpZW50IHNlY3JldCBmcm9tIHRoZSBhcHBsaWNhdGlvbiByZWdpc3RyYXRpb24gcG9ydGFsLlxuICAgICAqXG4gICAgICogSW4gQXp1cmUgQUQsIGF1dGhvcml0eSBpcyBhIFVSTCBpbmRpY2F0aW5nIG9mIHRoZSBmb3JtIGh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbS9cXHtFbnRlcl90aGVfVGVuYW50X0luZm9fSGVyZVxcfS5cbiAgICAgKiBJZiB5b3VyIGFwcGxpY2F0aW9uIHN1cHBvcnRzIEFjY291bnRzIGluIG9uZSBvcmdhbml6YXRpb25hbCBkaXJlY3RvcnksIHJlcGxhY2UgXCJFbnRlcl90aGVfVGVuYW50X0luZm9fSGVyZVwiIHZhbHVlIHdpdGggdGhlIFRlbmFudCBJZCBvciBUZW5hbnQgbmFtZSAoZm9yIGV4YW1wbGUsIGNvbnRvc28ubWljcm9zb2Z0LmNvbSkuXG4gICAgICogSWYgeW91ciBhcHBsaWNhdGlvbiBzdXBwb3J0cyBBY2NvdW50cyBpbiBhbnkgb3JnYW5pemF0aW9uYWwgZGlyZWN0b3J5LCByZXBsYWNlIFwiRW50ZXJfdGhlX1RlbmFudF9JbmZvX0hlcmVcIiB2YWx1ZSB3aXRoIG9yZ2FuaXphdGlvbnMuXG4gICAgICogSWYgeW91ciBhcHBsaWNhdGlvbiBzdXBwb3J0cyBBY2NvdW50cyBpbiBhbnkgb3JnYW5pemF0aW9uYWwgZGlyZWN0b3J5IGFuZCBwZXJzb25hbCBNaWNyb3NvZnQgYWNjb3VudHMsIHJlcGxhY2UgXCJFbnRlcl90aGVfVGVuYW50X0luZm9fSGVyZVwiIHZhbHVlIHdpdGggY29tbW9uLlxuICAgICAqIFRvIHJlc3RyaWN0IHN1cHBvcnQgdG8gUGVyc29uYWwgTWljcm9zb2Z0IGFjY291bnRzIG9ubHksIHJlcGxhY2UgXCJFbnRlcl90aGVfVGVuYW50X0luZm9fSGVyZVwiIHZhbHVlIHdpdGggY29uc3VtZXJzLlxuICAgICAqXG4gICAgICogSW4gQXp1cmUgQjJDLCBhdXRob3JpdHkgaXMgb2YgdGhlIGZvcm0gaHR0cHM6Ly9cXHtpbnN0YW5jZVxcfS90ZnAvXFx7dGVuYW50XFx9L1xce3BvbGljeU5hbWVcXH0vXG4gICAgICogRnVsbCBCMkMgZnVuY3Rpb25hbGl0eSB3aWxsIGJlIGF2YWlsYWJsZSBpbiB0aGlzIGxpYnJhcnkgaW4gZnV0dXJlIHZlcnNpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIENvbmZpZ3VyYXRpb24gLSBjb25maWd1cmF0aW9uIG9iamVjdCBmb3IgdGhlIE1TQUwgQ29uZmlkZW50aWFsQ2xpZW50QXBwbGljYXRpb24gaW5zdGFuY2VcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihjb25maWd1cmF0aW9uOiBDb25maWd1cmF0aW9uKSB7XG4gICAgICAgIHN1cGVyKGNvbmZpZ3VyYXRpb24pO1xuXG4gICAgICAgIGNvbnN0IGNsaWVudFNlY3JldE5vdEVtcHR5ID0gISF0aGlzLmNvbmZpZy5hdXRoLmNsaWVudFNlY3JldDtcbiAgICAgICAgY29uc3QgY2xpZW50QXNzZXJ0aW9uTm90RW1wdHkgPSAhIXRoaXMuY29uZmlnLmF1dGguY2xpZW50QXNzZXJ0aW9uO1xuICAgICAgICBjb25zdCBjZXJ0aWZpY2F0ZU5vdEVtcHR5ID1cbiAgICAgICAgICAgICghIXRoaXMuY29uZmlnLmF1dGguY2xpZW50Q2VydGlmaWNhdGU/LnRodW1icHJpbnQgfHxcbiAgICAgICAgICAgICAgICAhIXRoaXMuY29uZmlnLmF1dGguY2xpZW50Q2VydGlmaWNhdGU/LnRodW1icHJpbnRTaGEyNTYpICYmXG4gICAgICAgICAgICAhIXRoaXMuY29uZmlnLmF1dGguY2xpZW50Q2VydGlmaWNhdGU/LnByaXZhdGVLZXk7XG5cbiAgICAgICAgLypcbiAgICAgICAgICogSWYgYXBwIGRldmVsb3BlciBjb25maWd1cmVzIHRoaXMgY2FsbGJhY2ssIHRoZXkgZG9uJ3QgbmVlZCBhIGNyZWRlbnRpYWxcbiAgICAgICAgICogaS5lLiBBenVyZVNESyBjYW4gZ2V0IHRva2VuIGZyb20gTWFuYWdlZCBJZGVudGl0eSB3aXRob3V0IGEgY2VydCAvIHNlY3JldFxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKHRoaXMuYXBwVG9rZW5Qcm92aWRlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgdGhhdCBhdCBtb3N0IG9uZSBjcmVkZW50aWFsIGlzIHNldCBvbiB0aGUgYXBwbGljYXRpb25cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgKGNsaWVudFNlY3JldE5vdEVtcHR5ICYmIGNsaWVudEFzc2VydGlvbk5vdEVtcHR5KSB8fFxuICAgICAgICAgICAgKGNsaWVudEFzc2VydGlvbk5vdEVtcHR5ICYmIGNlcnRpZmljYXRlTm90RW1wdHkpIHx8XG4gICAgICAgICAgICAoY2xpZW50U2VjcmV0Tm90RW1wdHkgJiYgY2VydGlmaWNhdGVOb3RFbXB0eSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZENsaWVudENyZWRlbnRpYWxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5jb25maWcuYXV0aC5jbGllbnRTZWNyZXQpIHtcbiAgICAgICAgICAgIHRoaXMuY2xpZW50U2VjcmV0ID0gdGhpcy5jb25maWcuYXV0aC5jbGllbnRTZWNyZXQ7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5jb25maWcuYXV0aC5jbGllbnRBc3NlcnRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuZGV2ZWxvcGVyUHJvdmlkZWRDbGllbnRBc3NlcnRpb24gPVxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmF1dGguY2xpZW50QXNzZXJ0aW9uO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFjZXJ0aWZpY2F0ZU5vdEVtcHR5KSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZENsaWVudENyZWRlbnRpYWxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNsaWVudEFzc2VydGlvbiA9ICEhdGhpcy5jb25maWcuYXV0aC5jbGllbnRDZXJ0aWZpY2F0ZVxuICAgICAgICAgICAgICAgIC50aHVtYnByaW50U2hhMjU2XG4gICAgICAgICAgICAgICAgPyBDbGllbnRBc3NlcnRpb24uZnJvbUNlcnRpZmljYXRlV2l0aFNoYTI1NlRodW1icHJpbnQoXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aC5jbGllbnRDZXJ0aWZpY2F0ZS50aHVtYnByaW50U2hhMjU2LFxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmF1dGguY2xpZW50Q2VydGlmaWNhdGUucHJpdmF0ZUtleSxcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5hdXRoLmNsaWVudENlcnRpZmljYXRlLng1Y1xuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIDogQ2xpZW50QXNzZXJ0aW9uLmZyb21DZXJ0aWZpY2F0ZShcbiAgICAgICAgICAgICAgICAgICAgICAvLyBndWFyYW50ZWVkIHRvIGJlIGEgc3RyaW5nLCBkdWUgdG8gcHJpb3IgZXJyb3IgY2hlY2tpbmcgaW4gdGhpcyBmdW5jdGlvblxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmF1dGguY2xpZW50Q2VydGlmaWNhdGUudGh1bWJwcmludCBhcyBzdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aC5jbGllbnRDZXJ0aWZpY2F0ZS5wcml2YXRlS2V5LFxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmF1dGguY2xpZW50Q2VydGlmaWNhdGUueDVjXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXBwVG9rZW5Qcm92aWRlciA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGV4dGVuc2liaWxpdHkgcG9pbnQgb25seSB3b3JrcyBmb3IgdGhlIGNsaWVudF9jcmVkZW50aWFsIGZsb3csIGkuZS4gYWNxdWlyZVRva2VuQnlDbGllbnRDcmVkZW50aWFsIGFuZFxuICAgICAqIGlzIG1lYW50IGZvciBBenVyZSBTREsgdG8gZW5oYW5jZSBNYW5hZ2VkIElkZW50aXR5IHN1cHBvcnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gSUFwcFRva2VuUHJvdmlkZXIgIC0gRXh0ZW5zaWJpbGl0eSBpbnRlcmZhY2UsIHdoaWNoIGFsbG93cyB0aGUgYXBwIGRldmVsb3BlciB0byByZXR1cm4gYSB0b2tlbiBmcm9tIGEgY3VzdG9tIHNvdXJjZS5cbiAgICAgKi9cbiAgICBTZXRBcHBUb2tlblByb3ZpZGVyKHByb3ZpZGVyOiBJQXBwVG9rZW5Qcm92aWRlcik6IHZvaWQge1xuICAgICAgICB0aGlzLmFwcFRva2VuUHJvdmlkZXIgPSBwcm92aWRlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBY3F1aXJlcyB0b2tlbnMgZnJvbSB0aGUgYXV0aG9yaXR5IGZvciB0aGUgYXBwbGljYXRpb24gKG5vdCBmb3IgYW4gZW5kIHVzZXIpLlxuICAgICAqL1xuICAgIHB1YmxpYyBhc3luYyBhY3F1aXJlVG9rZW5CeUNsaWVudENyZWRlbnRpYWwoXG4gICAgICAgIHJlcXVlc3Q6IENsaWVudENyZWRlbnRpYWxSZXF1ZXN0XG4gICAgKTogUHJvbWlzZTxBdXRoZW50aWNhdGlvblJlc3VsdCB8IG51bGw+IHtcbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcbiAgICAgICAgICAgIFwiYWNxdWlyZVRva2VuQnlDbGllbnRDcmVkZW50aWFsIGNhbGxlZFwiLFxuICAgICAgICAgICAgcmVxdWVzdC5jb3JyZWxhdGlvbklkXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgYSBjbGllbnQgYXNzZXJ0aW9uIHByZXNlbnQgaW4gdGhlIHJlcXVlc3QsIGl0IG92ZXJyaWRlcyB0aGUgb25lIHByZXNlbnQgaW4gdGhlIGNsaWVudCBjb25maWd1cmF0aW9uXG4gICAgICAgIGxldCBjbGllbnRBc3NlcnRpb246IENsaWVudEFzc2VydGlvblR5cGUgfCB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChyZXF1ZXN0LmNsaWVudEFzc2VydGlvbikge1xuICAgICAgICAgICAgY2xpZW50QXNzZXJ0aW9uID0ge1xuICAgICAgICAgICAgICAgIGFzc2VydGlvbjogYXdhaXQgZ2V0Q2xpZW50QXNzZXJ0aW9uKFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LmNsaWVudEFzc2VydGlvbixcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYXV0aC5jbGllbnRJZFxuICAgICAgICAgICAgICAgICAgICAvLyB0b2tlbkVuZHBvaW50IHdpbGwgYmUgdW5kZWZpbmVkLiByZXNvdXJjZVJlcXVlc3RVcmkgaXMgb21pdHRlZCBpbiBDbGllbnRDcmVkZW50aWFsUmVxdWVzdFxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgYXNzZXJ0aW9uVHlwZTogTm9kZUNvbnN0YW50cy5KV1RfQkVBUkVSX0FTU0VSVElPTl9UWVBFLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGJhc2VSZXF1ZXN0ID0gYXdhaXQgdGhpcy5pbml0aWFsaXplQmFzZVJlcXVlc3QocmVxdWVzdCk7XG5cbiAgICAgICAgLy8gdmFsaWQgYmFzZSByZXF1ZXN0IHNob3VsZCBub3QgY29udGFpbiBvaWRjIHNjb3BlcyBpbiB0aGlzIGdyYW50IHR5cGVcbiAgICAgICAgY29uc3QgdmFsaWRCYXNlUmVxdWVzdCA9IHtcbiAgICAgICAgICAgIC4uLmJhc2VSZXF1ZXN0LFxuICAgICAgICAgICAgc2NvcGVzOiBiYXNlUmVxdWVzdC5zY29wZXMuZmlsdGVyKFxuICAgICAgICAgICAgICAgIChzY29wZTogc3RyaW5nKSA9PiAhT0lEQ19ERUZBVUxUX1NDT1BFUy5pbmNsdWRlcyhzY29wZSlcbiAgICAgICAgICAgICksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgdmFsaWRSZXF1ZXN0OiBDb21tb25DbGllbnRDcmVkZW50aWFsUmVxdWVzdCA9IHtcbiAgICAgICAgICAgIC4uLnJlcXVlc3QsXG4gICAgICAgICAgICAuLi52YWxpZEJhc2VSZXF1ZXN0LFxuICAgICAgICAgICAgY2xpZW50QXNzZXJ0aW9uLFxuICAgICAgICB9O1xuXG4gICAgICAgIC8qXG4gICAgICAgICAqIHZhbGlkIHJlcXVlc3Qgc2hvdWxkIG5vdCBoYXZlIFwiY29tbW9uXCIgb3IgXCJvcmdhbml6YXRpb25zXCIgaW4gbGlldSBvZiB0aGUgdGVuYW50X2lkIGluIHRoZSBhdXRob3JpdHkgaW4gdGhlIGF1dGggY29uZmlndXJhdGlvblxuICAgICAgICAgKiBleGFtcGxlIGF1dGhvcml0eTogXCJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vVGVuYW50SWRcIixcbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IGF1dGhvcml0eSA9IG5ldyBVcmxTdHJpbmcodmFsaWRSZXF1ZXN0LmF1dGhvcml0eSk7XG4gICAgICAgIGNvbnN0IHRlbmFudElkID0gYXV0aG9yaXR5LmdldFVybENvbXBvbmVudHMoKS5QYXRoU2VnbWVudHNbMF07XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIE9iamVjdC52YWx1ZXMoQUFEQXV0aG9yaXR5Q29uc3RhbnRzKS5pbmNsdWRlcyhcbiAgICAgICAgICAgICAgICB0ZW5hbnRJZCBhcyBBQURBdXRob3JpdHlDb25zdGFudHNcbiAgICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVDbGllbnRBdXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgQ2xpZW50QXV0aEVycm9yQ29kZXMubWlzc2luZ1RlbmFudElkRXJyb3JcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvKlxuICAgICAgICAgKiBpZiB0aGlzIGVudiB2YXJpYWJsZSBpcyBzZXQsIGFuZCB0aGUgZGV2ZWxvcGVyIHByb3ZpZGVkIHJlZ2lvbiBpc24ndCBkZWZpbmVkIGFuZCBpc24ndCBcIkRpc2FibGVNc2FsRm9yY2VSZWdpb25cIixcbiAgICAgICAgICogTVNBTCBzaGFsbCBvcHQtaW4gdG8gRVNUUy1SIHdpdGggdGhlIHZhbHVlIG9mIHRoaXMgdmFyaWFibGVcbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IEVOVl9NU0FMX0ZPUkNFX1JFR0lPTjogQXp1cmVSZWdpb24gfCB1bmRlZmluZWQgPVxuICAgICAgICAgICAgcHJvY2Vzcy5lbnZbTVNBTF9GT1JDRV9SRUdJT05dO1xuXG4gICAgICAgIGxldCByZWdpb246IEF6dXJlUmVnaW9uIHwgdW5kZWZpbmVkO1xuICAgICAgICBpZiAodmFsaWRSZXF1ZXN0LmF6dXJlUmVnaW9uICE9PSBcIkRpc2FibGVNc2FsRm9yY2VSZWdpb25cIikge1xuICAgICAgICAgICAgaWYgKCF2YWxpZFJlcXVlc3QuYXp1cmVSZWdpb24gJiYgRU5WX01TQUxfRk9SQ0VfUkVHSU9OKSB7XG4gICAgICAgICAgICAgICAgcmVnaW9uID0gRU5WX01TQUxfRk9SQ0VfUkVHSU9OO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWdpb24gPSB2YWxpZFJlcXVlc3QuYXp1cmVSZWdpb247XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBhenVyZVJlZ2lvbkNvbmZpZ3VyYXRpb246IEF6dXJlUmVnaW9uQ29uZmlndXJhdGlvbiA9IHtcbiAgICAgICAgICAgIGF6dXJlUmVnaW9uOiByZWdpb24sXG4gICAgICAgICAgICBlbnZpcm9ubWVudFJlZ2lvbjogcHJvY2Vzcy5lbnZbUkVHSU9OX0VOVklST05NRU5UX1ZBUklBQkxFXSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBzZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyID0gdGhpcy5pbml0aWFsaXplU2VydmVyVGVsZW1ldHJ5TWFuYWdlcihcbiAgICAgICAgICAgIEFwaUlkLmFjcXVpcmVUb2tlbkJ5Q2xpZW50Q3JlZGVudGlhbCxcbiAgICAgICAgICAgIHZhbGlkUmVxdWVzdC5jb3JyZWxhdGlvbklkLFxuICAgICAgICAgICAgdmFsaWRSZXF1ZXN0LnNraXBDYWNoZVxuICAgICAgICApO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZGlzY292ZXJlZEF1dGhvcml0eSA9IGF3YWl0IHRoaXMuY3JlYXRlQXV0aG9yaXR5KFxuICAgICAgICAgICAgICAgIHZhbGlkUmVxdWVzdC5hdXRob3JpdHksXG4gICAgICAgICAgICAgICAgdmFsaWRSZXF1ZXN0LmNvcnJlbGF0aW9uSWQsXG4gICAgICAgICAgICAgICAgYXp1cmVSZWdpb25Db25maWd1cmF0aW9uLFxuICAgICAgICAgICAgICAgIHJlcXVlc3QuYXp1cmVDbG91ZE9wdGlvbnNcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBjbGllbnRDcmVkZW50aWFsQ29uZmlnID1cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmJ1aWxkT2F1dGhDbGllbnRDb25maWd1cmF0aW9uKFxuICAgICAgICAgICAgICAgICAgICBkaXNjb3ZlcmVkQXV0aG9yaXR5LFxuICAgICAgICAgICAgICAgICAgICB2YWxpZFJlcXVlc3QuY29ycmVsYXRpb25JZCxcbiAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgc2VydmVyVGVsZW1ldHJ5TWFuYWdlclxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBjbGllbnRDcmVkZW50aWFsQ2xpZW50ID0gbmV3IENsaWVudENyZWRlbnRpYWxDbGllbnQoXG4gICAgICAgICAgICAgICAgY2xpZW50Q3JlZGVudGlhbENvbmZpZyxcbiAgICAgICAgICAgICAgICB0aGlzLmFwcFRva2VuUHJvdmlkZXJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci52ZXJib3NlKFxuICAgICAgICAgICAgICAgIFwiQ2xpZW50IGNyZWRlbnRpYWwgY2xpZW50IGNyZWF0ZWRcIixcbiAgICAgICAgICAgICAgICB2YWxpZFJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBjbGllbnRDcmVkZW50aWFsQ2xpZW50LmFjcXVpcmVUb2tlbih2YWxpZFJlcXVlc3QpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEF1dGhFcnJvcikge1xuICAgICAgICAgICAgICAgIGUuc2V0Q29ycmVsYXRpb25JZCh2YWxpZFJlcXVlc3QuY29ycmVsYXRpb25JZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXJ2ZXJUZWxlbWV0cnlNYW5hZ2VyLmNhY2hlRmFpbGVkUmVxdWVzdChlKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBY3F1aXJlcyB0b2tlbnMgZnJvbSB0aGUgYXV0aG9yaXR5IGZvciB0aGUgYXBwbGljYXRpb24uXG4gICAgICpcbiAgICAgKiBVc2VkIGluIHNjZW5hcmlvcyB3aGVyZSB0aGUgY3VycmVudCBhcHAgaXMgYSBtaWRkbGUtdGllciBzZXJ2aWNlIHdoaWNoIHdhcyBjYWxsZWQgd2l0aCBhIHRva2VuXG4gICAgICogcmVwcmVzZW50aW5nIGFuIGVuZCB1c2VyLiBUaGUgY3VycmVudCBhcHAgY2FuIHVzZSB0aGUgdG9rZW4gKG9ib0Fzc2VydGlvbikgdG8gcmVxdWVzdCBhbm90aGVyXG4gICAgICogdG9rZW4gdG8gYWNjZXNzIGRvd25zdHJlYW0gd2ViIEFQSSwgb24gYmVoYWxmIG9mIHRoYXQgdXNlci5cbiAgICAgKlxuICAgICAqIFRoZSBjdXJyZW50IG1pZGRsZS10aWVyIGFwcCBoYXMgbm8gdXNlciBpbnRlcmFjdGlvbiB0byBvYnRhaW4gY29uc2VudC5cbiAgICAgKiBTZWUgaG93IHRvIGdhaW4gY29uc2VudCB1cGZyb250IGZvciB5b3VyIG1pZGRsZS10aWVyIGFwcCBmcm9tIHRoaXMgYXJ0aWNsZS5cbiAgICAgKiBodHRwczovL2RvY3MubWljcm9zb2Z0LmNvbS9lbi11cy9henVyZS9hY3RpdmUtZGlyZWN0b3J5L2RldmVsb3AvdjItb2F1dGgyLW9uLWJlaGFsZi1vZi1mbG93I2dhaW5pbmctY29uc2VudC1mb3ItdGhlLW1pZGRsZS10aWVyLWFwcGxpY2F0aW9uXG4gICAgICovXG4gICAgcHVibGljIGFzeW5jIGFjcXVpcmVUb2tlbk9uQmVoYWxmT2YoXG4gICAgICAgIHJlcXVlc3Q6IE9uQmVoYWxmT2ZSZXF1ZXN0XG4gICAgKTogUHJvbWlzZTxBdXRoZW50aWNhdGlvblJlc3VsdCB8IG51bGw+IHtcbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcbiAgICAgICAgICAgIFwiYWNxdWlyZVRva2VuT25CZWhhbGZPZiBjYWxsZWRcIixcbiAgICAgICAgICAgIHJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuICAgICAgICBjb25zdCB2YWxpZFJlcXVlc3Q6IENvbW1vbk9uQmVoYWxmT2ZSZXF1ZXN0ID0ge1xuICAgICAgICAgICAgLi4ucmVxdWVzdCxcbiAgICAgICAgICAgIC4uLihhd2FpdCB0aGlzLmluaXRpYWxpemVCYXNlUmVxdWVzdChyZXF1ZXN0KSksXG4gICAgICAgIH07XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBkaXNjb3ZlcmVkQXV0aG9yaXR5ID0gYXdhaXQgdGhpcy5jcmVhdGVBdXRob3JpdHkoXG4gICAgICAgICAgICAgICAgdmFsaWRSZXF1ZXN0LmF1dGhvcml0eSxcbiAgICAgICAgICAgICAgICB2YWxpZFJlcXVlc3QuY29ycmVsYXRpb25JZCxcbiAgICAgICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5henVyZUNsb3VkT3B0aW9uc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IG9uQmVoYWxmT2ZDb25maWcgPSBhd2FpdCB0aGlzLmJ1aWxkT2F1dGhDbGllbnRDb25maWd1cmF0aW9uKFxuICAgICAgICAgICAgICAgIGRpc2NvdmVyZWRBdXRob3JpdHksXG4gICAgICAgICAgICAgICAgdmFsaWRSZXF1ZXN0LmNvcnJlbGF0aW9uSWQsXG4gICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICB1bmRlZmluZWRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBvYm9DbGllbnQgPSBuZXcgT25CZWhhbGZPZkNsaWVudChvbkJlaGFsZk9mQ29uZmlnKTtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLnZlcmJvc2UoXG4gICAgICAgICAgICAgICAgXCJPbiBiZWhhbGYgb2YgY2xpZW50IGNyZWF0ZWRcIixcbiAgICAgICAgICAgICAgICB2YWxpZFJlcXVlc3QuY29ycmVsYXRpb25JZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBvYm9DbGllbnQuYWNxdWlyZVRva2VuKHZhbGlkUmVxdWVzdCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgQXV0aEVycm9yKSB7XG4gICAgICAgICAgICAgICAgZS5zZXRDb3JyZWxhdGlvbklkKHZhbGlkUmVxdWVzdC5jb3JyZWxhdGlvbklkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQGludGVybmFsXG4gKiBDaGVja3MgaWYgYSBnaXZlbiBkYXRlIHN0cmluZyBpcyBpbiBJU08gODYwMSBmb3JtYXQuXG4gKlxuICogQHBhcmFtIGRhdGVTdHJpbmcgLSBUaGUgZGF0ZSBzdHJpbmcgdG8gYmUgY2hlY2tlZC5cbiAqIEByZXR1cm5zIGJvb2xlYW4gLSBSZXR1cm5zIHRydWUgaWYgdGhlIGRhdGUgc3RyaW5nIGlzIGluIElTTyA4NjAxIGZvcm1hdCwgb3RoZXJ3aXNlIGZhbHNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNJc284NjAxKGRhdGVTdHJpbmc6IG51bWJlciB8IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGlmICh0eXBlb2YgZGF0ZVN0cmluZyAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHJpbmcpO1xuICAgIHJldHVybiAhaXNOYU4oZGF0ZS5nZXRUaW1lKCkpICYmIGRhdGUudG9JU09TdHJpbmcoKSA9PT0gZGF0ZVN0cmluZztcbn1cbiIsICIvKlxuICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgICBIZWFkZXJOYW1lcyxcbiAgICBJTmV0d29ya01vZHVsZSxcbiAgICBOZXR3b3JrUmVxdWVzdE9wdGlvbnMsXG4gICAgTmV0d29ya1Jlc3BvbnNlLFxufSBmcm9tIFwiQGF6dXJlL21zYWwtY29tbW9uL25vZGVcIjtcbmltcG9ydCB7IElIdHRwUmV0cnlQb2xpY3kgfSBmcm9tIFwiLi4vcmV0cnkvSUh0dHBSZXRyeVBvbGljeS5qc1wiO1xuaW1wb3J0IHsgSHR0cE1ldGhvZCB9IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcblxuZXhwb3J0IGNsYXNzIEh0dHBDbGllbnRXaXRoUmV0cmllcyBpbXBsZW1lbnRzIElOZXR3b3JrTW9kdWxlIHtcbiAgICBwcml2YXRlIGh0dHBDbGllbnROb1JldHJpZXM6IElOZXR3b3JrTW9kdWxlO1xuICAgIHByaXZhdGUgcmV0cnlQb2xpY3k6IElIdHRwUmV0cnlQb2xpY3k7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgaHR0cENsaWVudE5vUmV0cmllczogSU5ldHdvcmtNb2R1bGUsXG4gICAgICAgIHJldHJ5UG9saWN5OiBJSHR0cFJldHJ5UG9saWN5XG4gICAgKSB7XG4gICAgICAgIHRoaXMuaHR0cENsaWVudE5vUmV0cmllcyA9IGh0dHBDbGllbnROb1JldHJpZXM7XG4gICAgICAgIHRoaXMucmV0cnlQb2xpY3kgPSByZXRyeVBvbGljeTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHNlbmROZXR3b3JrUmVxdWVzdEFzeW5jSGVscGVyPFQ+KFxuICAgICAgICBodHRwTWV0aG9kOiBIdHRwTWV0aG9kLFxuICAgICAgICB1cmw6IHN0cmluZyxcbiAgICAgICAgb3B0aW9ucz86IE5ldHdvcmtSZXF1ZXN0T3B0aW9uc1xuICAgICk6IFByb21pc2U8TmV0d29ya1Jlc3BvbnNlPFQ+PiB7XG4gICAgICAgIGlmIChodHRwTWV0aG9kID09PSBIdHRwTWV0aG9kLkdFVCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudE5vUmV0cmllcy5zZW5kR2V0UmVxdWVzdEFzeW5jKHVybCwgb3B0aW9ucyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50Tm9SZXRyaWVzLnNlbmRQb3N0UmVxdWVzdEFzeW5jKHVybCwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHNlbmROZXR3b3JrUmVxdWVzdEFzeW5jPFQ+KFxuICAgICAgICBodHRwTWV0aG9kOiBIdHRwTWV0aG9kLFxuICAgICAgICB1cmw6IHN0cmluZyxcbiAgICAgICAgb3B0aW9ucz86IE5ldHdvcmtSZXF1ZXN0T3B0aW9uc1xuICAgICk6IFByb21pc2U8TmV0d29ya1Jlc3BvbnNlPFQ+PiB7XG4gICAgICAgIC8vIHRoZSB1bmRlcmx5aW5nIG5ldHdvcmsgbW9kdWxlIChjdXN0b20gb3IgSHR0cENsaWVudCkgd2lsbCBtYWtlIHRoZSBjYWxsXG4gICAgICAgIGxldCByZXNwb25zZTogTmV0d29ya1Jlc3BvbnNlPFQ+ID1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZE5ldHdvcmtSZXF1ZXN0QXN5bmNIZWxwZXIoaHR0cE1ldGhvZCwgdXJsLCBvcHRpb25zKTtcblxuICAgICAgICBsZXQgY3VycmVudFJldHJ5OiBudW1iZXIgPSAwO1xuICAgICAgICB3aGlsZSAoXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJldHJ5UG9saWN5LnBhdXNlRm9yUmV0cnkoXG4gICAgICAgICAgICAgICAgcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRSZXRyeSxcbiAgICAgICAgICAgICAgICByZXNwb25zZS5oZWFkZXJzW0hlYWRlck5hbWVzLlJFVFJZX0FGVEVSXVxuICAgICAgICAgICAgKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kTmV0d29ya1JlcXVlc3RBc3luY0hlbHBlcihcbiAgICAgICAgICAgICAgICBodHRwTWV0aG9kLFxuICAgICAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgICAgICBvcHRpb25zXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY3VycmVudFJldHJ5Kys7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIHNlbmRHZXRSZXF1ZXN0QXN5bmM8VD4oXG4gICAgICAgIHVybDogc3RyaW5nLFxuICAgICAgICBvcHRpb25zPzogTmV0d29ya1JlcXVlc3RPcHRpb25zXG4gICAgKTogUHJvbWlzZTxOZXR3b3JrUmVzcG9uc2U8VD4+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZE5ldHdvcmtSZXF1ZXN0QXN5bmMoSHR0cE1ldGhvZC5HRVQsIHVybCwgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIHNlbmRQb3N0UmVxdWVzdEFzeW5jPFQ+KFxuICAgICAgICB1cmw6IHN0cmluZyxcbiAgICAgICAgb3B0aW9ucz86IE5ldHdvcmtSZXF1ZXN0T3B0aW9uc1xuICAgICk6IFByb21pc2U8TmV0d29ya1Jlc3BvbnNlPFQ+PiB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbmROZXR3b3JrUmVxdWVzdEFzeW5jKEh0dHBNZXRob2QuUE9TVCwgdXJsLCBvcHRpb25zKTtcbiAgICB9XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gICAgQXV0aEVycm9yLFxuICAgIEF1dGhvcml0eSxcbiAgICBDbGllbnRBdXRoRXJyb3JDb2RlcyxcbiAgICBDb25zdGFudHMsXG4gICAgSGVhZGVyTmFtZXMsXG4gICAgSU5ldHdvcmtNb2R1bGUsXG4gICAgTG9nZ2VyLFxuICAgIE5ldHdvcmtSZXF1ZXN0T3B0aW9ucyxcbiAgICBOZXR3b3JrUmVzcG9uc2UsXG4gICAgUmVzcG9uc2VIYW5kbGVyLFxuICAgIFNlcnZlckF1dGhvcml6YXRpb25Ub2tlblJlc3BvbnNlLFxuICAgIFRpbWVVdGlscyxcbiAgICBjcmVhdGVDbGllbnRBdXRoRXJyb3IsXG4gICAgQXV0aGVudGljYXRpb25SZXN1bHQsXG4gICAgVXJsU3RyaW5nLFxufSBmcm9tIFwiQGF6dXJlL21zYWwtY29tbW9uL25vZGVcIjtcbmltcG9ydCB7IE1hbmFnZWRJZGVudGl0eUlkIH0gZnJvbSBcIi4uLy4uL2NvbmZpZy9NYW5hZ2VkSWRlbnRpdHlJZC5qc1wiO1xuaW1wb3J0IHsgTWFuYWdlZElkZW50aXR5UmVxdWVzdFBhcmFtZXRlcnMgfSBmcm9tIFwiLi4vLi4vY29uZmlnL01hbmFnZWRJZGVudGl0eVJlcXVlc3RQYXJhbWV0ZXJzLmpzXCI7XG5pbXBvcnQgeyBDcnlwdG9Qcm92aWRlciB9IGZyb20gXCIuLi8uLi9jcnlwdG8vQ3J5cHRvUHJvdmlkZXIuanNcIjtcbmltcG9ydCB7IE1hbmFnZWRJZGVudGl0eVJlcXVlc3QgfSBmcm9tIFwiLi4vLi4vcmVxdWVzdC9NYW5hZ2VkSWRlbnRpdHlSZXF1ZXN0LmpzXCI7XG5pbXBvcnQgeyBIdHRwTWV0aG9kLCBNYW5hZ2VkSWRlbnRpdHlJZFR5cGUgfSBmcm9tIFwiLi4vLi4vdXRpbHMvQ29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBNYW5hZ2VkSWRlbnRpdHlUb2tlblJlc3BvbnNlIH0gZnJvbSBcIi4uLy4uL3Jlc3BvbnNlL01hbmFnZWRJZGVudGl0eVRva2VuUmVzcG9uc2UuanNcIjtcbmltcG9ydCB7IE5vZGVTdG9yYWdlIH0gZnJvbSBcIi4uLy4uL2NhY2hlL05vZGVTdG9yYWdlLmpzXCI7XG5pbXBvcnQge1xuICAgIE1hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMsXG4gICAgY3JlYXRlTWFuYWdlZElkZW50aXR5RXJyb3IsXG59IGZyb20gXCIuLi8uLi9lcnJvci9NYW5hZ2VkSWRlbnRpdHlFcnJvci5qc1wiO1xuaW1wb3J0IHsgaXNJc284NjAxIH0gZnJvbSBcIi4uLy4uL3V0aWxzL1RpbWVVdGlscy5qc1wiO1xuaW1wb3J0IHsgSHR0cENsaWVudFdpdGhSZXRyaWVzIH0gZnJvbSBcIi4uLy4uL25ldHdvcmsvSHR0cENsaWVudFdpdGhSZXRyaWVzLmpzXCI7XG5cbi8qKlxuICogTWFuYWdlZCBJZGVudGl0eSBVc2VyIEFzc2lnbmVkIElkIFF1ZXJ5IFBhcmFtZXRlciBOYW1lc1xuICovXG5leHBvcnQgY29uc3QgTWFuYWdlZElkZW50aXR5VXNlckFzc2lnbmVkSWRRdWVyeVBhcmFtZXRlck5hbWVzID0ge1xuICAgIE1BTkFHRURfSURFTlRJVFlfQ0xJRU5UX0lEOiBcImNsaWVudF9pZFwiLFxuICAgIE1BTkFHRURfSURFTlRJVFlfT0JKRUNUX0lEOiBcIm9iamVjdF9pZFwiLFxuICAgIE1BTkFHRURfSURFTlRJVFlfUkVTT1VSQ0VfSURfSU1EUzogXCJtc2lfcmVzX2lkXCIsXG4gICAgTUFOQUdFRF9JREVOVElUWV9SRVNPVVJDRV9JRF9OT05fSU1EUzogXCJtaV9yZXNfaWRcIixcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBNYW5hZ2VkSWRlbnRpdHlVc2VyQXNzaWduZWRJZFF1ZXJ5UGFyYW1ldGVyTmFtZXMgPVxuICAgICh0eXBlb2YgTWFuYWdlZElkZW50aXR5VXNlckFzc2lnbmVkSWRRdWVyeVBhcmFtZXRlck5hbWVzKVtrZXlvZiB0eXBlb2YgTWFuYWdlZElkZW50aXR5VXNlckFzc2lnbmVkSWRRdWVyeVBhcmFtZXRlck5hbWVzXTtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEJhc2VNYW5hZ2VkSWRlbnRpdHlTb3VyY2Uge1xuICAgIHByb3RlY3RlZCBsb2dnZXI6IExvZ2dlcjtcbiAgICBwcml2YXRlIG5vZGVTdG9yYWdlOiBOb2RlU3RvcmFnZTtcbiAgICBwcml2YXRlIG5ldHdvcmtDbGllbnQ6IElOZXR3b3JrTW9kdWxlO1xuICAgIHByaXZhdGUgY3J5cHRvUHJvdmlkZXI6IENyeXB0b1Byb3ZpZGVyO1xuICAgIHByaXZhdGUgZGlzYWJsZUludGVybmFsUmV0cmllczogYm9vbGVhbjtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBsb2dnZXI6IExvZ2dlcixcbiAgICAgICAgbm9kZVN0b3JhZ2U6IE5vZGVTdG9yYWdlLFxuICAgICAgICBuZXR3b3JrQ2xpZW50OiBJTmV0d29ya01vZHVsZSxcbiAgICAgICAgY3J5cHRvUHJvdmlkZXI6IENyeXB0b1Byb3ZpZGVyLFxuICAgICAgICBkaXNhYmxlSW50ZXJuYWxSZXRyaWVzOiBib29sZWFuXG4gICAgKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyID0gbG9nZ2VyO1xuICAgICAgICB0aGlzLm5vZGVTdG9yYWdlID0gbm9kZVN0b3JhZ2U7XG4gICAgICAgIHRoaXMubmV0d29ya0NsaWVudCA9IG5ldHdvcmtDbGllbnQ7XG4gICAgICAgIHRoaXMuY3J5cHRvUHJvdmlkZXIgPSBjcnlwdG9Qcm92aWRlcjtcbiAgICAgICAgdGhpcy5kaXNhYmxlSW50ZXJuYWxSZXRyaWVzID0gZGlzYWJsZUludGVybmFsUmV0cmllcztcbiAgICB9XG5cbiAgICBhYnN0cmFjdCBjcmVhdGVSZXF1ZXN0KFxuICAgICAgICByZXF1ZXN0OiBzdHJpbmcsXG4gICAgICAgIG1hbmFnZWRJZGVudGl0eUlkOiBNYW5hZ2VkSWRlbnRpdHlJZFxuICAgICk6IE1hbmFnZWRJZGVudGl0eVJlcXVlc3RQYXJhbWV0ZXJzO1xuXG4gICAgcHVibGljIGFzeW5jIGdldFNlcnZlclRva2VuUmVzcG9uc2VBc3luYyhcbiAgICAgICAgcmVzcG9uc2U6IE5ldHdvcmtSZXNwb25zZTxNYW5hZ2VkSWRlbnRpdHlUb2tlblJlc3BvbnNlPixcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuICAgICAgICBfbmV0d29ya0NsaWVudDogSU5ldHdvcmtNb2R1bGUsXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgICAgICAgX25ldHdvcmtSZXF1ZXN0OiBNYW5hZ2VkSWRlbnRpdHlSZXF1ZXN0UGFyYW1ldGVycyxcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuICAgICAgICBfbmV0d29ya1JlcXVlc3RPcHRpb25zOiBOZXR3b3JrUmVxdWVzdE9wdGlvbnNcbiAgICApOiBQcm9taXNlPFNlcnZlckF1dGhvcml6YXRpb25Ub2tlblJlc3BvbnNlPiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZlclRva2VuUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRTZXJ2ZXJUb2tlblJlc3BvbnNlKFxuICAgICAgICByZXNwb25zZTogTmV0d29ya1Jlc3BvbnNlPE1hbmFnZWRJZGVudGl0eVRva2VuUmVzcG9uc2U+XG4gICAgKTogU2VydmVyQXV0aG9yaXphdGlvblRva2VuUmVzcG9uc2Uge1xuICAgICAgICBsZXQgcmVmcmVzaEluLCBleHBpcmVzSW46IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHJlc3BvbnNlLmJvZHkuZXhwaXJlc19vbikge1xuICAgICAgICAgICAgLy8gaWYgdGhlIGV4cGlyZXNfb24gZmllbGQgaW4gdGhlIHJlc3BvbnNlIGJvZHkgaXMgYSBzdHJpbmcgYW5kIGluIElTTyA4NjAxIGZvcm1hdCwgY29udmVydCBpdCB0byBhIFVuaXggdGltZXN0YW1wIChzZWNvbmRzIHNpbmNlIGVwb2NoKVxuICAgICAgICAgICAgaWYgKGlzSXNvODYwMShyZXNwb25zZS5ib2R5LmV4cGlyZXNfb24pKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UuYm9keS5leHBpcmVzX29uID1cbiAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUocmVzcG9uc2UuYm9keS5leHBpcmVzX29uKS5nZXRUaW1lKCkgLyAxMDAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBleHBpcmVzSW4gPSByZXNwb25zZS5ib2R5LmV4cGlyZXNfb24gLSBUaW1lVXRpbHMubm93U2Vjb25kcygpO1xuXG4gICAgICAgICAgICAvLyBjb21wdXRlIHJlZnJlc2hfaW4gYXMgMS8yIG9mIGV4cGlyZXNfaW4sIGJ1dCBvbmx5IGlmIGV4cGlyZXNfaW4gPiAyaFxuICAgICAgICAgICAgaWYgKGV4cGlyZXNJbiA+IDIgKiAzNjAwKSB7XG4gICAgICAgICAgICAgICAgcmVmcmVzaEluID0gZXhwaXJlc0luIC8gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNlcnZlclRva2VuUmVzcG9uc2U6IFNlcnZlckF1dGhvcml6YXRpb25Ub2tlblJlc3BvbnNlID0ge1xuICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG5cbiAgICAgICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgICAgICAgIGFjY2Vzc190b2tlbjogcmVzcG9uc2UuYm9keS5hY2Nlc3NfdG9rZW4sXG4gICAgICAgICAgICBleHBpcmVzX2luOiBleHBpcmVzSW4sXG4gICAgICAgICAgICBzY29wZTogcmVzcG9uc2UuYm9keS5yZXNvdXJjZSxcbiAgICAgICAgICAgIHRva2VuX3R5cGU6IHJlc3BvbnNlLmJvZHkudG9rZW5fdHlwZSxcbiAgICAgICAgICAgIHJlZnJlc2hfaW46IHJlZnJlc2hJbixcblxuICAgICAgICAgICAgLy8gZXJyb3JcbiAgICAgICAgICAgIGNvcnJlbGF0aW9uX2lkOlxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLmJvZHkuY29ycmVsYXRpb25faWQgfHwgcmVzcG9uc2UuYm9keS5jb3JyZWxhdGlvbklkLFxuICAgICAgICAgICAgZXJyb3I6XG4gICAgICAgICAgICAgICAgdHlwZW9mIHJlc3BvbnNlLmJvZHkuZXJyb3IgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgPyByZXNwb25zZS5ib2R5LmVycm9yXG4gICAgICAgICAgICAgICAgICAgIDogcmVzcG9uc2UuYm9keS5lcnJvcj8uY29kZSxcbiAgICAgICAgICAgIGVycm9yX2Rlc2NyaXB0aW9uOlxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLmJvZHkubWVzc2FnZSB8fFxuICAgICAgICAgICAgICAgICh0eXBlb2YgcmVzcG9uc2UuYm9keS5lcnJvciA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgICAgICA/IHJlc3BvbnNlLmJvZHkuZXJyb3JfZGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgICAgOiByZXNwb25zZS5ib2R5LmVycm9yPy5tZXNzYWdlKSxcbiAgICAgICAgICAgIGVycm9yX2NvZGVzOiByZXNwb25zZS5ib2R5LmVycm9yX2NvZGVzLFxuICAgICAgICAgICAgdGltZXN0YW1wOiByZXNwb25zZS5ib2R5LnRpbWVzdGFtcCxcbiAgICAgICAgICAgIHRyYWNlX2lkOiByZXNwb25zZS5ib2R5LnRyYWNlX2lkLFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBzZXJ2ZXJUb2tlblJlc3BvbnNlO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBhY3F1aXJlVG9rZW5XaXRoTWFuYWdlZElkZW50aXR5KFxuICAgICAgICBtYW5hZ2VkSWRlbnRpdHlSZXF1ZXN0OiBNYW5hZ2VkSWRlbnRpdHlSZXF1ZXN0LFxuICAgICAgICBtYW5hZ2VkSWRlbnRpdHlJZDogTWFuYWdlZElkZW50aXR5SWQsXG4gICAgICAgIGZha2VBdXRob3JpdHk6IEF1dGhvcml0eSxcbiAgICAgICAgcmVmcmVzaEFjY2Vzc1Rva2VuPzogYm9vbGVhblxuICAgICk6IFByb21pc2U8QXV0aGVudGljYXRpb25SZXN1bHQ+IHtcbiAgICAgICAgY29uc3QgbmV0d29ya1JlcXVlc3Q6IE1hbmFnZWRJZGVudGl0eVJlcXVlc3RQYXJhbWV0ZXJzID1cbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUmVxdWVzdChcbiAgICAgICAgICAgICAgICBtYW5hZ2VkSWRlbnRpdHlSZXF1ZXN0LnJlc291cmNlLFxuICAgICAgICAgICAgICAgIG1hbmFnZWRJZGVudGl0eUlkXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSBuZXR3b3JrUmVxdWVzdC5oZWFkZXJzO1xuICAgICAgICBoZWFkZXJzW0hlYWRlck5hbWVzLkNPTlRFTlRfVFlQRV0gPSBDb25zdGFudHMuVVJMX0ZPUk1fQ09OVEVOVF9UWVBFO1xuXG4gICAgICAgIGNvbnN0IG5ldHdvcmtSZXF1ZXN0T3B0aW9uczogTmV0d29ya1JlcXVlc3RPcHRpb25zID0geyBoZWFkZXJzIH07XG5cbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKG5ldHdvcmtSZXF1ZXN0LmJvZHlQYXJhbWV0ZXJzKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIG5ldHdvcmtSZXF1ZXN0T3B0aW9ucy5ib2R5ID1cbiAgICAgICAgICAgICAgICBuZXR3b3JrUmVxdWVzdC5jb21wdXRlUGFyYW1ldGVyc0JvZHlTdHJpbmcoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbml0aWFsaXplcyB0aGUgbmV0d29yayBjbGllbnQgaGVscGVyIGJhc2VkIG9uIHRoZSByZXRyeSBwb2xpY3kgY29uZmlndXJhdGlvbi5cbiAgICAgICAgICogSWYgaW50ZXJuYWwgcmV0cmllcyBhcmUgZGlzYWJsZWQsIGl0IHVzZXMgdGhlIHByb3ZpZGVkIG5ldHdvcmsgY2xpZW50IGRpcmVjdGx5LlxuICAgICAgICAgKiBPdGhlcndpc2UsIGl0IHdyYXBzIHRoZSBuZXR3b3JrIGNsaWVudCB3aXRoIGFuIEhUVFAgY2xpZW50IHRoYXQgc3VwcG9ydHMgcmV0cmllcy5cbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IG5ldHdvcmtDbGllbnRIZWxwZXI6IElOZXR3b3JrTW9kdWxlID0gdGhpcy5kaXNhYmxlSW50ZXJuYWxSZXRyaWVzXG4gICAgICAgICAgICA/IHRoaXMubmV0d29ya0NsaWVudFxuICAgICAgICAgICAgOiBuZXcgSHR0cENsaWVudFdpdGhSZXRyaWVzKFxuICAgICAgICAgICAgICAgICAgdGhpcy5uZXR3b3JrQ2xpZW50LFxuICAgICAgICAgICAgICAgICAgbmV0d29ya1JlcXVlc3QucmV0cnlQb2xpY3lcbiAgICAgICAgICAgICAgKTtcblxuICAgICAgICBjb25zdCByZXFUaW1lc3RhbXAgPSBUaW1lVXRpbHMubm93U2Vjb25kcygpO1xuICAgICAgICBsZXQgcmVzcG9uc2U6IE5ldHdvcmtSZXNwb25zZTxNYW5hZ2VkSWRlbnRpdHlUb2tlblJlc3BvbnNlPjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFNvdXJjZXMgdGhhdCBzZW5kIFBPU1QgcmVxdWVzdHM6IENsb3VkIFNoZWxsXG4gICAgICAgICAgICBpZiAobmV0d29ya1JlcXVlc3QuaHR0cE1ldGhvZCA9PT0gSHR0cE1ldGhvZC5QT1NUKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UgPVxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBuZXR3b3JrQ2xpZW50SGVscGVyLnNlbmRQb3N0UmVxdWVzdEFzeW5jPE1hbmFnZWRJZGVudGl0eVRva2VuUmVzcG9uc2U+KFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV0d29ya1JlcXVlc3QuY29tcHV0ZVVyaSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV0d29ya1JlcXVlc3RPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgLy8gU291cmNlcyB0aGF0IHNlbmQgR0VUIHJlcXVlc3RzOiBBcHAgU2VydmljZSwgQXp1cmUgQXJjLCBJTURTLCBTZXJ2aWNlIEZhYnJpY1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZSA9XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IG5ldHdvcmtDbGllbnRIZWxwZXIuc2VuZEdldFJlcXVlc3RBc3luYzxNYW5hZ2VkSWRlbnRpdHlUb2tlblJlc3BvbnNlPihcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldHdvcmtSZXF1ZXN0LmNvbXB1dGVVcmkoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldHdvcmtSZXF1ZXN0T3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgQXV0aEVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihDbGllbnRBdXRoRXJyb3JDb2Rlcy5uZXR3b3JrRXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2VIYW5kbGVyID0gbmV3IFJlc3BvbnNlSGFuZGxlcihcbiAgICAgICAgICAgIG1hbmFnZWRJZGVudGl0eUlkLmlkLFxuICAgICAgICAgICAgdGhpcy5ub2RlU3RvcmFnZSxcbiAgICAgICAgICAgIHRoaXMuY3J5cHRvUHJvdmlkZXIsXG4gICAgICAgICAgICB0aGlzLmxvZ2dlcixcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBudWxsXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3Qgc2VydmVyVG9rZW5SZXNwb25zZTogU2VydmVyQXV0aG9yaXphdGlvblRva2VuUmVzcG9uc2UgPVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5nZXRTZXJ2ZXJUb2tlblJlc3BvbnNlQXN5bmMoXG4gICAgICAgICAgICAgICAgcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgbmV0d29ya0NsaWVudEhlbHBlcixcbiAgICAgICAgICAgICAgICBuZXR3b3JrUmVxdWVzdCxcbiAgICAgICAgICAgICAgICBuZXR3b3JrUmVxdWVzdE9wdGlvbnNcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgcmVzcG9uc2VIYW5kbGVyLnZhbGlkYXRlVG9rZW5SZXNwb25zZShcbiAgICAgICAgICAgIHNlcnZlclRva2VuUmVzcG9uc2UsXG4gICAgICAgICAgICByZWZyZXNoQWNjZXNzVG9rZW5cbiAgICAgICAgKTtcblxuICAgICAgICAvLyBjYWNoZXMgdGhlIHRva2VuXG4gICAgICAgIHJldHVybiByZXNwb25zZUhhbmRsZXIuaGFuZGxlU2VydmVyVG9rZW5SZXNwb25zZShcbiAgICAgICAgICAgIHNlcnZlclRva2VuUmVzcG9uc2UsXG4gICAgICAgICAgICBmYWtlQXV0aG9yaXR5LFxuICAgICAgICAgICAgcmVxVGltZXN0YW1wLFxuICAgICAgICAgICAgbWFuYWdlZElkZW50aXR5UmVxdWVzdFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRNYW5hZ2VkSWRlbnRpdHlVc2VyQXNzaWduZWRJZFF1ZXJ5UGFyYW1ldGVyS2V5KFxuICAgICAgICBtYW5hZ2VkSWRlbnRpdHlJZFR5cGU6IE1hbmFnZWRJZGVudGl0eUlkVHlwZSxcbiAgICAgICAgaW1kcz86IGJvb2xlYW5cbiAgICApOiBzdHJpbmcge1xuICAgICAgICBzd2l0Y2ggKG1hbmFnZWRJZGVudGl0eUlkVHlwZSkge1xuICAgICAgICAgICAgY2FzZSBNYW5hZ2VkSWRlbnRpdHlJZFR5cGUuVVNFUl9BU1NJR05FRF9DTElFTlRfSUQ6XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcbiAgICAgICAgICAgICAgICAgICAgXCJbTWFuYWdlZCBJZGVudGl0eV0gQWRkaW5nIHVzZXIgYXNzaWduZWQgY2xpZW50IGlkIHRvIHRoZSByZXF1ZXN0LlwiXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gTWFuYWdlZElkZW50aXR5VXNlckFzc2lnbmVkSWRRdWVyeVBhcmFtZXRlck5hbWVzLk1BTkFHRURfSURFTlRJVFlfQ0xJRU5UX0lEO1xuXG4gICAgICAgICAgICBjYXNlIE1hbmFnZWRJZGVudGl0eUlkVHlwZS5VU0VSX0FTU0lHTkVEX1JFU09VUkNFX0lEOlxuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXG4gICAgICAgICAgICAgICAgICAgIFwiW01hbmFnZWQgSWRlbnRpdHldIEFkZGluZyB1c2VyIGFzc2lnbmVkIHJlc291cmNlIGlkIHRvIHRoZSByZXF1ZXN0LlwiXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW1kc1xuICAgICAgICAgICAgICAgICAgICA/IE1hbmFnZWRJZGVudGl0eVVzZXJBc3NpZ25lZElkUXVlcnlQYXJhbWV0ZXJOYW1lcy5NQU5BR0VEX0lERU5USVRZX1JFU09VUkNFX0lEX0lNRFNcbiAgICAgICAgICAgICAgICAgICAgOiBNYW5hZ2VkSWRlbnRpdHlVc2VyQXNzaWduZWRJZFF1ZXJ5UGFyYW1ldGVyTmFtZXMuTUFOQUdFRF9JREVOVElUWV9SRVNPVVJDRV9JRF9OT05fSU1EUztcblxuICAgICAgICAgICAgY2FzZSBNYW5hZ2VkSWRlbnRpdHlJZFR5cGUuVVNFUl9BU1NJR05FRF9PQkpFQ1RfSUQ6XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcbiAgICAgICAgICAgICAgICAgICAgXCJbTWFuYWdlZCBJZGVudGl0eV0gQWRkaW5nIHVzZXIgYXNzaWduZWQgb2JqZWN0IGlkIHRvIHRoZSByZXF1ZXN0LlwiXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gTWFuYWdlZElkZW50aXR5VXNlckFzc2lnbmVkSWRRdWVyeVBhcmFtZXRlck5hbWVzLk1BTkFHRURfSURFTlRJVFlfT0JKRUNUX0lEO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBjcmVhdGVNYW5hZ2VkSWRlbnRpdHlFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy5pbnZhbGlkTWFuYWdlZElkZW50aXR5SWRUeXBlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0VmFsaWRhdGVkRW52VmFyaWFibGVVcmxTdHJpbmcgPSAoXG4gICAgICAgIGVudlZhcmlhYmxlU3RyaW5nTmFtZTogc3RyaW5nLFxuICAgICAgICBlbnZWYXJpYWJsZTogc3RyaW5nLFxuICAgICAgICBzb3VyY2VOYW1lOiBzdHJpbmcsXG4gICAgICAgIGxvZ2dlcjogTG9nZ2VyXG4gICAgKTogc3RyaW5nID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVXJsU3RyaW5nKGVudlZhcmlhYmxlKS51cmxTdHJpbmc7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIuaW5mbyhcbiAgICAgICAgICAgICAgICBgW01hbmFnZWQgSWRlbnRpdHldICR7c291cmNlTmFtZX0gbWFuYWdlZCBpZGVudGl0eSBpcyB1bmF2YWlsYWJsZSBiZWNhdXNlIHRoZSAnJHtlbnZWYXJpYWJsZVN0cmluZ05hbWV9JyBlbnZpcm9ubWVudCB2YXJpYWJsZSBpcyBtYWxmb3JtZWQuYFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgdGhyb3cgY3JlYXRlTWFuYWdlZElkZW50aXR5RXJyb3IoXG4gICAgICAgICAgICAgICAgTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlc1xuICAgICAgICAgICAgICAgICAgICAuTXNpRW52aXJvbm1lbnRWYXJpYWJsZVVybE1hbGZvcm1lZEVycm9yQ29kZXNbXG4gICAgICAgICAgICAgICAgICAgIGVudlZhcmlhYmxlU3RyaW5nTmFtZVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICAgIEF1dGhFcnJvcixcbiAgICBDbGllbnRBdXRoRXJyb3JDb2RlcyxcbiAgICBjcmVhdGVDbGllbnRBdXRoRXJyb3IsXG4gICAgSHR0cFN0YXR1cyxcbiAgICBJTmV0d29ya01vZHVsZSxcbiAgICBOZXR3b3JrUmVzcG9uc2UsXG4gICAgTmV0d29ya1JlcXVlc3RPcHRpb25zLFxuICAgIExvZ2dlcixcbiAgICBTZXJ2ZXJBdXRob3JpemF0aW9uVG9rZW5SZXNwb25zZSxcbn0gZnJvbSBcIkBhenVyZS9tc2FsLWNvbW1vbi9ub2RlXCI7XG5pbXBvcnQgeyBNYW5hZ2VkSWRlbnRpdHlSZXF1ZXN0UGFyYW1ldGVycyB9IGZyb20gXCIuLi8uLi9jb25maWcvTWFuYWdlZElkZW50aXR5UmVxdWVzdFBhcmFtZXRlcnMuanNcIjtcbmltcG9ydCB7IEJhc2VNYW5hZ2VkSWRlbnRpdHlTb3VyY2UgfSBmcm9tIFwiLi9CYXNlTWFuYWdlZElkZW50aXR5U291cmNlLmpzXCI7XG5pbXBvcnQgeyBDcnlwdG9Qcm92aWRlciB9IGZyb20gXCIuLi8uLi9jcnlwdG8vQ3J5cHRvUHJvdmlkZXIuanNcIjtcbmltcG9ydCB7XG4gICAgTWFuYWdlZElkZW50aXR5RXJyb3JDb2RlcyxcbiAgICBjcmVhdGVNYW5hZ2VkSWRlbnRpdHlFcnJvcixcbn0gZnJvbSBcIi4uLy4uL2Vycm9yL01hbmFnZWRJZGVudGl0eUVycm9yLmpzXCI7XG5pbXBvcnQge1xuICAgIEFQSV9WRVJTSU9OX1FVRVJZX1BBUkFNRVRFUl9OQU1FLFxuICAgIEFVVEhPUklaQVRJT05fSEVBREVSX05BTUUsXG4gICAgQVpVUkVfQVJDX1NFQ1JFVF9GSUxFX01BWF9TSVpFX0JZVEVTLFxuICAgIEh0dHBNZXRob2QsXG4gICAgTUVUQURBVEFfSEVBREVSX05BTUUsXG4gICAgTWFuYWdlZElkZW50aXR5RW52aXJvbm1lbnRWYXJpYWJsZU5hbWVzLFxuICAgIE1hbmFnZWRJZGVudGl0eUlkVHlwZSxcbiAgICBNYW5hZ2VkSWRlbnRpdHlTb3VyY2VOYW1lcyxcbiAgICBSRVNPVVJDRV9CT0RZX09SX1FVRVJZX1BBUkFNRVRFUl9OQU1FLFxufSBmcm9tIFwiLi4vLi4vdXRpbHMvQ29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBOb2RlU3RvcmFnZSB9IGZyb20gXCIuLi8uLi9jYWNoZS9Ob2RlU3RvcmFnZS5qc1wiO1xuaW1wb3J0IHtcbiAgICBhY2Nlc3NTeW5jLFxuICAgIGNvbnN0YW50cyBhcyBmc0NvbnN0YW50cyxcbiAgICByZWFkRmlsZVN5bmMsXG4gICAgc3RhdFN5bmMsXG59IGZyb20gXCJmc1wiO1xuaW1wb3J0IHsgTWFuYWdlZElkZW50aXR5VG9rZW5SZXNwb25zZSB9IGZyb20gXCIuLi8uLi9yZXNwb25zZS9NYW5hZ2VkSWRlbnRpdHlUb2tlblJlc3BvbnNlLmpzXCI7XG5pbXBvcnQgeyBNYW5hZ2VkSWRlbnRpdHlJZCB9IGZyb20gXCIuLi8uLi9jb25maWcvTWFuYWdlZElkZW50aXR5SWQuanNcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5cbmV4cG9ydCBjb25zdCBBUkNfQVBJX1ZFUlNJT046IHN0cmluZyA9IFwiMjAxOS0xMS0wMVwiO1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfQVpVUkVfQVJDX0lERU5USVRZX0VORFBPSU5UOiBzdHJpbmcgPVxuICAgIFwiaHR0cDovLzEyNy4wLjAuMTo0MDM0Mi9tZXRhZGF0YS9pZGVudGl0eS9vYXV0aDIvdG9rZW5cIjtcbmNvbnN0IEhJTURTX0VYRUNVVEFCTEVfSEVMUEVSX1NUUklORyA9IFwiTi9BOiBoaW1kcyBleGVjdXRhYmxlIGV4aXN0c1wiO1xuXG50eXBlIEZpbGVQYXRoTWFwID0ge1xuICAgIHdpbjMyOiBzdHJpbmc7XG4gICAgbGludXg6IHN0cmluZztcbn07XG5cbmV4cG9ydCBjb25zdCBTVVBQT1JURURfQVpVUkVfQVJDX1BMQVRGT1JNUzogRmlsZVBhdGhNYXAgPSB7XG4gICAgd2luMzI6IGAke3Byb2Nlc3MuZW52W1wiUHJvZ3JhbURhdGFcIl19XFxcXEF6dXJlQ29ubmVjdGVkTWFjaGluZUFnZW50XFxcXFRva2Vuc1xcXFxgLFxuICAgIGxpbnV4OiBcIi92YXIvb3B0L2F6Y21hZ2VudC90b2tlbnMvXCIsXG59O1xuXG5leHBvcnQgY29uc3QgQVpVUkVfQVJDX0ZJTEVfREVURUNUSU9OOiBGaWxlUGF0aE1hcCA9IHtcbiAgICB3aW4zMjogYCR7cHJvY2Vzcy5lbnZbXCJQcm9ncmFtRmlsZXNcIl19XFxcXEF6dXJlQ29ubmVjdGVkTWFjaGluZUFnZW50XFxcXGhpbWRzLmV4ZWAsXG4gICAgbGludXg6IFwiL29wdC9hemNtYWdlbnQvYmluL2hpbWRzXCIsXG59O1xuXG4vKipcbiAqIE9yaWdpbmFsIHNvdXJjZSBvZiBjb2RlOiBodHRwczovL2dpdGh1Yi5jb20vQXp1cmUvYXp1cmUtc2RrLWZvci1uZXQvYmxvYi9tYWluL3Nkay9pZGVudGl0eS9BenVyZS5JZGVudGl0eS9zcmMvQXp1cmVBcmNNYW5hZ2VkSWRlbnRpdHlTb3VyY2UuY3NcbiAqL1xuZXhwb3J0IGNsYXNzIEF6dXJlQXJjIGV4dGVuZHMgQmFzZU1hbmFnZWRJZGVudGl0eVNvdXJjZSB7XG4gICAgcHJpdmF0ZSBpZGVudGl0eUVuZHBvaW50OiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgbG9nZ2VyOiBMb2dnZXIsXG4gICAgICAgIG5vZGVTdG9yYWdlOiBOb2RlU3RvcmFnZSxcbiAgICAgICAgbmV0d29ya0NsaWVudDogSU5ldHdvcmtNb2R1bGUsXG4gICAgICAgIGNyeXB0b1Byb3ZpZGVyOiBDcnlwdG9Qcm92aWRlcixcbiAgICAgICAgZGlzYWJsZUludGVybmFsUmV0cmllczogYm9vbGVhbixcbiAgICAgICAgaWRlbnRpdHlFbmRwb2ludDogc3RyaW5nXG4gICAgKSB7XG4gICAgICAgIHN1cGVyKFxuICAgICAgICAgICAgbG9nZ2VyLFxuICAgICAgICAgICAgbm9kZVN0b3JhZ2UsXG4gICAgICAgICAgICBuZXR3b3JrQ2xpZW50LFxuICAgICAgICAgICAgY3J5cHRvUHJvdmlkZXIsXG4gICAgICAgICAgICBkaXNhYmxlSW50ZXJuYWxSZXRyaWVzXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5pZGVudGl0eUVuZHBvaW50ID0gaWRlbnRpdHlFbmRwb2ludDtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldEVudmlyb25tZW50VmFyaWFibGVzKCk6IEFycmF5PHN0cmluZyB8IHVuZGVmaW5lZD4ge1xuICAgICAgICBsZXQgaWRlbnRpdHlFbmRwb2ludDogc3RyaW5nIHwgdW5kZWZpbmVkID1cbiAgICAgICAgICAgIHByb2Nlc3MuZW52W1xuICAgICAgICAgICAgICAgIE1hbmFnZWRJZGVudGl0eUVudmlyb25tZW50VmFyaWFibGVOYW1lcy5JREVOVElUWV9FTkRQT0lOVFxuICAgICAgICAgICAgXTtcbiAgICAgICAgbGV0IGltZHNFbmRwb2ludDogc3RyaW5nIHwgdW5kZWZpbmVkID1cbiAgICAgICAgICAgIHByb2Nlc3MuZW52W01hbmFnZWRJZGVudGl0eUVudmlyb25tZW50VmFyaWFibGVOYW1lcy5JTURTX0VORFBPSU5UXTtcblxuICAgICAgICAvLyBpZiBlaXRoZXIgb2YgdGhlIGlkZW50aXR5IG9yIGltZHMgZW5kcG9pbnRzIGFyZSB1bmRlZmluZWQsIGNoZWNrIGlmIHRoZSBoaW1kcyBleGVjdXRhYmxlIGV4aXN0c1xuICAgICAgICBpZiAoIWlkZW50aXR5RW5kcG9pbnQgfHwgIWltZHNFbmRwb2ludCkge1xuICAgICAgICAgICAgLy8gZ2V0IHRoZSBleHBlY3RlZCBXaW5kb3dzIG9yIExpbnV4IGZpbGUgcGF0aCBvZiB0aGUgaGltZHMgZXhlY3V0YWJsZVxuICAgICAgICAgICAgY29uc3QgZmlsZURldGVjdGlvblBhdGg6IHN0cmluZyA9XG4gICAgICAgICAgICAgICAgQVpVUkVfQVJDX0ZJTEVfREVURUNUSU9OW3Byb2Nlc3MucGxhdGZvcm0gYXMga2V5b2YgRmlsZVBhdGhNYXBdO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAqIGNoZWNrIGlmIHRoZSBoaW1kcyBleGVjdXRhYmxlIGV4aXN0cyBhbmQgaXRzIHBlcm1pc3Npb25zIGFsbG93IGl0IHRvIGJlIHJlYWRcbiAgICAgICAgICAgICAgICAgKiByZXR1cm5zIHVuZGVmaW5lZCBpZiB0cnVlLCB0aHJvd3MgYW4gZXJyb3Igb3RoZXJ3aXNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgYWNjZXNzU3luYyhcbiAgICAgICAgICAgICAgICAgICAgZmlsZURldGVjdGlvblBhdGgsXG4gICAgICAgICAgICAgICAgICAgIGZzQ29uc3RhbnRzLkZfT0sgfCBmc0NvbnN0YW50cy5SX09LXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGlkZW50aXR5RW5kcG9pbnQgPSBERUZBVUxUX0FaVVJFX0FSQ19JREVOVElUWV9FTkRQT0lOVDtcbiAgICAgICAgICAgICAgICBpbWRzRW5kcG9pbnQgPSBISU1EU19FWEVDVVRBQkxFX0hFTFBFUl9TVFJJTkc7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAqIGRvIG5vdGhpbmdcbiAgICAgICAgICAgICAgICAgKiBhY2Nlc3NTeW5jIHJldHVybnMgdW5kZWZpbmVkIG9uIHN1Y2Nlc3MsIGFuZCB0aHJvd3MgYW4gZXJyb3Igb24gZmFpbHVyZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFtpZGVudGl0eUVuZHBvaW50LCBpbWRzRW5kcG9pbnRdO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdHJ5Q3JlYXRlKFxuICAgICAgICBsb2dnZXI6IExvZ2dlcixcbiAgICAgICAgbm9kZVN0b3JhZ2U6IE5vZGVTdG9yYWdlLFxuICAgICAgICBuZXR3b3JrQ2xpZW50OiBJTmV0d29ya01vZHVsZSxcbiAgICAgICAgY3J5cHRvUHJvdmlkZXI6IENyeXB0b1Byb3ZpZGVyLFxuICAgICAgICBkaXNhYmxlSW50ZXJuYWxSZXRyaWVzOiBib29sZWFuLFxuICAgICAgICBtYW5hZ2VkSWRlbnRpdHlJZDogTWFuYWdlZElkZW50aXR5SWRcbiAgICApOiBBenVyZUFyYyB8IG51bGwge1xuICAgICAgICBjb25zdCBbaWRlbnRpdHlFbmRwb2ludCwgaW1kc0VuZHBvaW50XSA9XG4gICAgICAgICAgICBBenVyZUFyYy5nZXRFbnZpcm9ubWVudFZhcmlhYmxlcygpO1xuXG4gICAgICAgIC8vIGlmIGVpdGhlciBvZiB0aGUgaWRlbnRpdHkgb3IgaW1kcyBlbmRwb2ludHMgYXJlIHVuZGVmaW5lZCAoZXZlbiBhZnRlciBoaW1kcyBmaWxlIGRldGVjdGlvbilcbiAgICAgICAgaWYgKCFpZGVudGl0eUVuZHBvaW50IHx8ICFpbWRzRW5kcG9pbnQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgICAgIGBbTWFuYWdlZCBJZGVudGl0eV0gJHtNYW5hZ2VkSWRlbnRpdHlTb3VyY2VOYW1lcy5BWlVSRV9BUkN9IG1hbmFnZWQgaWRlbnRpdHkgaXMgdW5hdmFpbGFibGUgdGhyb3VnaCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYmVjYXVzZSBvbmUgb3IgYm90aCBvZiAnJHtNYW5hZ2VkSWRlbnRpdHlFbnZpcm9ubWVudFZhcmlhYmxlTmFtZXMuSURFTlRJVFlfRU5EUE9JTlR9JyBhbmQgJyR7TWFuYWdlZElkZW50aXR5RW52aXJvbm1lbnRWYXJpYWJsZU5hbWVzLklNRFNfRU5EUE9JTlR9JyBhcmUgbm90IGRlZmluZWQuICR7TWFuYWdlZElkZW50aXR5U291cmNlTmFtZXMuQVpVUkVfQVJDfSBtYW5hZ2VkIGlkZW50aXR5IGlzIGFsc28gdW5hdmFpbGFibGUgdGhyb3VnaCBmaWxlIGRldGVjdGlvbi5gXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNoZWNrIGlmIHRoZSBpbWRzIGVuZHBvaW50IGlzIHNldCB0byB0aGUgZGVmYXVsdCBmb3IgZmlsZSBkZXRlY3Rpb25cbiAgICAgICAgaWYgKGltZHNFbmRwb2ludCA9PT0gSElNRFNfRVhFQ1VUQUJMRV9IRUxQRVJfU1RSSU5HKSB7XG4gICAgICAgICAgICBsb2dnZXIuaW5mbyhcbiAgICAgICAgICAgICAgICBgW01hbmFnZWQgSWRlbnRpdHldICR7TWFuYWdlZElkZW50aXR5U291cmNlTmFtZXMuQVpVUkVfQVJDfSBtYW5hZ2VkIGlkZW50aXR5IGlzIGF2YWlsYWJsZSB0aHJvdWdoIGZpbGUgZGV0ZWN0aW9uLiBEZWZhdWx0aW5nIHRvIGtub3duICR7TWFuYWdlZElkZW50aXR5U291cmNlTmFtZXMuQVpVUkVfQVJDfSBlbmRwb2ludDogJHtERUZBVUxUX0FaVVJFX0FSQ19JREVOVElUWV9FTkRQT0lOVH0uIENyZWF0aW5nICR7TWFuYWdlZElkZW50aXR5U291cmNlTmFtZXMuQVpVUkVfQVJDfSBtYW5hZ2VkIGlkZW50aXR5LmBcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBvdGhlcndpc2UsIGJvdGggdGhlIGlkZW50aXR5IGFuZCBpbWRzIGVuZHBvaW50cyBhcmUgZGVmaW5lZCB3aXRob3V0IGZpbGUgZGV0ZWN0aW9uOyB2YWxpZGF0ZSB0aGVtXG5cbiAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRlZElkZW50aXR5RW5kcG9pbnQ6IHN0cmluZyA9XG4gICAgICAgICAgICAgICAgQXp1cmVBcmMuZ2V0VmFsaWRhdGVkRW52VmFyaWFibGVVcmxTdHJpbmcoXG4gICAgICAgICAgICAgICAgICAgIE1hbmFnZWRJZGVudGl0eUVudmlyb25tZW50VmFyaWFibGVOYW1lcy5JREVOVElUWV9FTkRQT0lOVCxcbiAgICAgICAgICAgICAgICAgICAgaWRlbnRpdHlFbmRwb2ludCxcbiAgICAgICAgICAgICAgICAgICAgTWFuYWdlZElkZW50aXR5U291cmNlTmFtZXMuQVpVUkVfQVJDLFxuICAgICAgICAgICAgICAgICAgICBsb2dnZXJcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgLy8gcmVtb3ZlIHRyYWlsaW5nIHNsYXNoXG4gICAgICAgICAgICB2YWxpZGF0ZWRJZGVudGl0eUVuZHBvaW50LmVuZHNXaXRoKFwiL1wiKVxuICAgICAgICAgICAgICAgID8gdmFsaWRhdGVkSWRlbnRpdHlFbmRwb2ludC5zbGljZSgwLCAtMSlcbiAgICAgICAgICAgICAgICA6IHZhbGlkYXRlZElkZW50aXR5RW5kcG9pbnQ7XG5cbiAgICAgICAgICAgIEF6dXJlQXJjLmdldFZhbGlkYXRlZEVudlZhcmlhYmxlVXJsU3RyaW5nKFxuICAgICAgICAgICAgICAgIE1hbmFnZWRJZGVudGl0eUVudmlyb25tZW50VmFyaWFibGVOYW1lcy5JTURTX0VORFBPSU5ULFxuICAgICAgICAgICAgICAgIGltZHNFbmRwb2ludCxcbiAgICAgICAgICAgICAgICBNYW5hZ2VkSWRlbnRpdHlTb3VyY2VOYW1lcy5BWlVSRV9BUkMsXG4gICAgICAgICAgICAgICAgbG9nZ2VyXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBsb2dnZXIuaW5mbyhcbiAgICAgICAgICAgICAgICBgW01hbmFnZWQgSWRlbnRpdHldIEVudmlyb25tZW50IHZhcmlhYmxlcyB2YWxpZGF0aW9uIHBhc3NlZCBmb3IgJHtNYW5hZ2VkSWRlbnRpdHlTb3VyY2VOYW1lcy5BWlVSRV9BUkN9IG1hbmFnZWQgaWRlbnRpdHkuIEVuZHBvaW50IFVSSTogJHt2YWxpZGF0ZWRJZGVudGl0eUVuZHBvaW50fS4gQ3JlYXRpbmcgJHtNYW5hZ2VkSWRlbnRpdHlTb3VyY2VOYW1lcy5BWlVSRV9BUkN9IG1hbmFnZWQgaWRlbnRpdHkuYFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIG1hbmFnZWRJZGVudGl0eUlkLmlkVHlwZSAhPT0gTWFuYWdlZElkZW50aXR5SWRUeXBlLlNZU1RFTV9BU1NJR05FRFxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZU1hbmFnZWRJZGVudGl0eUVycm9yKFxuICAgICAgICAgICAgICAgIE1hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMudW5hYmxlVG9DcmVhdGVBenVyZUFyY1xuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgQXp1cmVBcmMoXG4gICAgICAgICAgICBsb2dnZXIsXG4gICAgICAgICAgICBub2RlU3RvcmFnZSxcbiAgICAgICAgICAgIG5ldHdvcmtDbGllbnQsXG4gICAgICAgICAgICBjcnlwdG9Qcm92aWRlcixcbiAgICAgICAgICAgIGRpc2FibGVJbnRlcm5hbFJldHJpZXMsXG4gICAgICAgICAgICBpZGVudGl0eUVuZHBvaW50XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIGNyZWF0ZVJlcXVlc3QocmVzb3VyY2U6IHN0cmluZyk6IE1hbmFnZWRJZGVudGl0eVJlcXVlc3RQYXJhbWV0ZXJzIHtcbiAgICAgICAgY29uc3QgcmVxdWVzdDogTWFuYWdlZElkZW50aXR5UmVxdWVzdFBhcmFtZXRlcnMgPVxuICAgICAgICAgICAgbmV3IE1hbmFnZWRJZGVudGl0eVJlcXVlc3RQYXJhbWV0ZXJzKFxuICAgICAgICAgICAgICAgIEh0dHBNZXRob2QuR0VULFxuICAgICAgICAgICAgICAgIHRoaXMuaWRlbnRpdHlFbmRwb2ludC5yZXBsYWNlKFwibG9jYWxob3N0XCIsIFwiMTI3LjAuMC4xXCIpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIHJlcXVlc3QuaGVhZGVyc1tNRVRBREFUQV9IRUFERVJfTkFNRV0gPSBcInRydWVcIjtcblxuICAgICAgICByZXF1ZXN0LnF1ZXJ5UGFyYW1ldGVyc1tBUElfVkVSU0lPTl9RVUVSWV9QQVJBTUVURVJfTkFNRV0gPVxuICAgICAgICAgICAgQVJDX0FQSV9WRVJTSU9OO1xuICAgICAgICByZXF1ZXN0LnF1ZXJ5UGFyYW1ldGVyc1tSRVNPVVJDRV9CT0RZX09SX1FVRVJZX1BBUkFNRVRFUl9OQU1FXSA9XG4gICAgICAgICAgICByZXNvdXJjZTtcblxuICAgICAgICAvLyBib2R5UGFyYW1ldGVycyBjYWxjdWxhdGVkIGluIEJhc2VNYW5hZ2VkSWRlbnRpdHkuYWNxdWlyZVRva2VuV2l0aE1hbmFnZWRJZGVudGl0eVxuXG4gICAgICAgIHJldHVybiByZXF1ZXN0O1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBnZXRTZXJ2ZXJUb2tlblJlc3BvbnNlQXN5bmMoXG4gICAgICAgIG9yaWdpbmFsUmVzcG9uc2U6IE5ldHdvcmtSZXNwb25zZTxNYW5hZ2VkSWRlbnRpdHlUb2tlblJlc3BvbnNlPixcbiAgICAgICAgbmV0d29ya0NsaWVudDogSU5ldHdvcmtNb2R1bGUsXG4gICAgICAgIG5ldHdvcmtSZXF1ZXN0OiBNYW5hZ2VkSWRlbnRpdHlSZXF1ZXN0UGFyYW1ldGVycyxcbiAgICAgICAgbmV0d29ya1JlcXVlc3RPcHRpb25zOiBOZXR3b3JrUmVxdWVzdE9wdGlvbnNcbiAgICApOiBQcm9taXNlPFNlcnZlckF1dGhvcml6YXRpb25Ub2tlblJlc3BvbnNlPiB7XG4gICAgICAgIGxldCByZXRyeVJlc3BvbnNlOlxuICAgICAgICAgICAgfCBOZXR3b3JrUmVzcG9uc2U8TWFuYWdlZElkZW50aXR5VG9rZW5SZXNwb25zZT5cbiAgICAgICAgICAgIHwgdW5kZWZpbmVkO1xuXG4gICAgICAgIGlmIChvcmlnaW5hbFJlc3BvbnNlLnN0YXR1cyA9PT0gSHR0cFN0YXR1cy5VTkFVVEhPUklaRUQpIHtcbiAgICAgICAgICAgIGNvbnN0IHd3d0F1dGhIZWFkZXI6IHN0cmluZyA9XG4gICAgICAgICAgICAgICAgb3JpZ2luYWxSZXNwb25zZS5oZWFkZXJzW1wid3d3LWF1dGhlbnRpY2F0ZVwiXTtcbiAgICAgICAgICAgIGlmICghd3d3QXV0aEhlYWRlcikge1xuICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZU1hbmFnZWRJZGVudGl0eUVycm9yKFxuICAgICAgICAgICAgICAgICAgICBNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzLnd3d0F1dGhlbnRpY2F0ZUhlYWRlck1pc3NpbmdcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF3d3dBdXRoSGVhZGVyLmluY2x1ZGVzKFwiQmFzaWMgcmVhbG09XCIpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgY3JlYXRlTWFuYWdlZElkZW50aXR5RXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIE1hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMud3d3QXV0aGVudGljYXRlSGVhZGVyVW5zdXBwb3J0ZWRGb3JtYXRcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBzZWNyZXRGaWxlUGF0aCA9IHd3d0F1dGhIZWFkZXIuc3BsaXQoXCJCYXNpYyByZWFsbT1cIilbMV07XG5cbiAgICAgICAgICAgIC8vIHRocm93IGFuIGVycm9yIGlmIHRoZSBtYW5hZ2VkIGlkZW50aXR5IGFwcGxpY2F0aW9uIGlzIG5vdCBiZWluZyBydW4gb24gV2luZG93cyBvciBMaW51eFxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICFTVVBQT1JURURfQVpVUkVfQVJDX1BMQVRGT1JNUy5oYXNPd25Qcm9wZXJ0eShwcm9jZXNzLnBsYXRmb3JtKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgY3JlYXRlTWFuYWdlZElkZW50aXR5RXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIE1hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMucGxhdGZvcm1Ob3RTdXBwb3J0ZWRcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBnZXQgdGhlIGV4cGVjdGVkIFdpbmRvd3Mgb3IgTGludXggZmlsZSBwYXRoXG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZFNlY3JldEZpbGVQYXRoOiBzdHJpbmcgPVxuICAgICAgICAgICAgICAgIFNVUFBPUlRFRF9BWlVSRV9BUkNfUExBVEZPUk1TW1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLnBsYXRmb3JtIGFzIGtleW9mIEZpbGVQYXRoTWFwXG4gICAgICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgLy8gdGhyb3cgYW4gZXJyb3IgaWYgdGhlIGZpbGUgaW4gdGhlIGZpbGUgcGF0aCBpcyBub3QgYSAua2V5IGZpbGVcbiAgICAgICAgICAgIGNvbnN0IGZpbGVOYW1lOiBzdHJpbmcgPSBwYXRoLmJhc2VuYW1lKHNlY3JldEZpbGVQYXRoKTtcbiAgICAgICAgICAgIGlmICghZmlsZU5hbWUuZW5kc1dpdGgoXCIua2V5XCIpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgY3JlYXRlTWFuYWdlZElkZW50aXR5RXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIE1hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMuaW52YWxpZEZpbGVFeHRlbnNpb25cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgICogdGhyb3cgYW4gZXJyb3IgaWYgdGhlIGZpbGUgcGF0aCBmcm9tIHRoZSB3d3ctYXV0aGVudGljYXRlIGhlYWRlciBkb2VzIG5vdCBtYXRjaCB0aGVcbiAgICAgICAgICAgICAqIGV4cGVjdGVkIGZpbGUgcGF0aCBmb3IgdGhlIHBsYXRmb3JtIChXaW5kb3dzIG9yIExpbnV4KSB0aGUgbWFuYWdlZCBpZGVudGl0eSBhcHBsaWNhdGlvblxuICAgICAgICAgICAgICogaXMgcnVubmluZyBvblxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpZiAoZXhwZWN0ZWRTZWNyZXRGaWxlUGF0aCArIGZpbGVOYW1lICE9PSBzZWNyZXRGaWxlUGF0aCkge1xuICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZU1hbmFnZWRJZGVudGl0eUVycm9yKFxuICAgICAgICAgICAgICAgICAgICBNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzLmludmFsaWRGaWxlUGF0aFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBzZWNyZXRGaWxlU2l6ZTtcbiAgICAgICAgICAgIC8vIGF0dGVtcHQgdG8gZ2V0IHRoZSBzZWNyZXQgZmlsZSdzIHNpemUsIGluIGJ5dGVzXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHNlY3JldEZpbGVTaXplID0gYXdhaXQgc3RhdFN5bmMoc2VjcmV0RmlsZVBhdGgpLnNpemU7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgY3JlYXRlTWFuYWdlZElkZW50aXR5RXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIE1hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMudW5hYmxlVG9SZWFkU2VjcmV0RmlsZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB0aHJvdyBhbiBlcnJvciBpZiB0aGUgc2VjcmV0IGZpbGUncyBzaXplIGlzIGdyZWF0ZXIgdGhhbiA0MDk2IGJ5dGVzXG4gICAgICAgICAgICBpZiAoc2VjcmV0RmlsZVNpemUgPiBBWlVSRV9BUkNfU0VDUkVUX0ZJTEVfTUFYX1NJWkVfQllURVMpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBjcmVhdGVNYW5hZ2VkSWRlbnRpdHlFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy5pbnZhbGlkU2VjcmV0XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gYXR0ZW1wdCB0byByZWFkIHRoZSBjb250ZW50cyBvZiB0aGUgc2VjcmV0IGZpbGVcbiAgICAgICAgICAgIGxldCBzZWNyZXQ7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHNlY3JldCA9IHJlYWRGaWxlU3luYyhzZWNyZXRGaWxlUGF0aCwgXCJ1dGYtOFwiKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBjcmVhdGVNYW5hZ2VkSWRlbnRpdHlFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy51bmFibGVUb1JlYWRTZWNyZXRGaWxlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGF1dGhIZWFkZXJWYWx1ZSA9IGBCYXNpYyAke3NlY3JldH1gO1xuXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgICAgIGBbTWFuYWdlZCBJZGVudGl0eV0gQWRkaW5nIGF1dGhvcml6YXRpb24gaGVhZGVyIHRvIHRoZSByZXF1ZXN0LmBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBuZXR3b3JrUmVxdWVzdC5oZWFkZXJzW0FVVEhPUklaQVRJT05fSEVBREVSX05BTUVdID0gYXV0aEhlYWRlclZhbHVlO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHJ5UmVzcG9uc2UgPVxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBuZXR3b3JrQ2xpZW50LnNlbmRHZXRSZXF1ZXN0QXN5bmM8TWFuYWdlZElkZW50aXR5VG9rZW5SZXNwb25zZT4oXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXR3b3JrUmVxdWVzdC5jb21wdXRlVXJpKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXR3b3JrUmVxdWVzdE9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgQXV0aEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZUNsaWVudEF1dGhFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgICAgIENsaWVudEF1dGhFcnJvckNvZGVzLm5ldHdvcmtFcnJvclxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZlclRva2VuUmVzcG9uc2UocmV0cnlSZXNwb25zZSB8fCBvcmlnaW5hbFJlc3BvbnNlKTtcbiAgICB9XG59XG4iLCAiLypcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IElOZXR3b3JrTW9kdWxlLCBMb2dnZXIgfSBmcm9tIFwiQGF6dXJlL21zYWwtY29tbW9uL25vZGVcIjtcbmltcG9ydCB7IE1hbmFnZWRJZGVudGl0eUlkIH0gZnJvbSBcIi4uLy4uL2NvbmZpZy9NYW5hZ2VkSWRlbnRpdHlJZC5qc1wiO1xuaW1wb3J0IHsgTWFuYWdlZElkZW50aXR5UmVxdWVzdFBhcmFtZXRlcnMgfSBmcm9tIFwiLi4vLi4vY29uZmlnL01hbmFnZWRJZGVudGl0eVJlcXVlc3RQYXJhbWV0ZXJzLmpzXCI7XG5pbXBvcnQgeyBCYXNlTWFuYWdlZElkZW50aXR5U291cmNlIH0gZnJvbSBcIi4vQmFzZU1hbmFnZWRJZGVudGl0eVNvdXJjZS5qc1wiO1xuaW1wb3J0IHsgQ3J5cHRvUHJvdmlkZXIgfSBmcm9tIFwiLi4vLi4vY3J5cHRvL0NyeXB0b1Byb3ZpZGVyLmpzXCI7XG5pbXBvcnQge1xuICAgIEFQSV9WRVJTSU9OX1FVRVJZX1BBUkFNRVRFUl9OQU1FLFxuICAgIEh0dHBNZXRob2QsXG4gICAgTUVUQURBVEFfSEVBREVSX05BTUUsXG4gICAgTWFuYWdlZElkZW50aXR5RW52aXJvbm1lbnRWYXJpYWJsZU5hbWVzLFxuICAgIE1hbmFnZWRJZGVudGl0eUlkVHlwZSxcbiAgICBNYW5hZ2VkSWRlbnRpdHlTb3VyY2VOYW1lcyxcbiAgICBSRVNPVVJDRV9CT0RZX09SX1FVRVJZX1BBUkFNRVRFUl9OQU1FLFxufSBmcm9tIFwiLi4vLi4vdXRpbHMvQ29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBOb2RlU3RvcmFnZSB9IGZyb20gXCIuLi8uLi9jYWNoZS9Ob2RlU3RvcmFnZS5qc1wiO1xuXG4vLyBJTURTIGNvbnN0YW50cy4gRG9jcyBmb3IgSU1EUyBhcmUgYXZhaWxhYmxlIGhlcmUgaHR0cHM6Ly9kb2NzLm1pY3Jvc29mdC5jb20vYXp1cmUvYWN0aXZlLWRpcmVjdG9yeS9tYW5hZ2VkLWlkZW50aXRpZXMtYXp1cmUtcmVzb3VyY2VzL2hvdy10by11c2Utdm0tdG9rZW4jZ2V0LWEtdG9rZW4tdXNpbmctaHR0cFxuY29uc3QgSU1EU19UT0tFTl9QQVRIOiBzdHJpbmcgPSBcIi9tZXRhZGF0YS9pZGVudGl0eS9vYXV0aDIvdG9rZW5cIjtcbmNvbnN0IERFRkFVTFRfSU1EU19FTkRQT0lOVDogc3RyaW5nID0gYGh0dHA6Ly8xNjkuMjU0LjE2OS4yNTQke0lNRFNfVE9LRU5fUEFUSH1gO1xuXG5jb25zdCBJTURTX0FQSV9WRVJTSU9OOiBzdHJpbmcgPSBcIjIwMTgtMDItMDFcIjtcblxuLy8gT3JpZ2luYWwgc291cmNlIG9mIGNvZGU6IGh0dHBzOi8vZ2l0aHViLmNvbS9BenVyZS9henVyZS1zZGstZm9yLW5ldC9ibG9iL21haW4vc2RrL2lkZW50aXR5L0F6dXJlLklkZW50aXR5L3NyYy9JbWRzTWFuYWdlZElkZW50aXR5U291cmNlLmNzXG5leHBvcnQgY2xhc3MgSW1kcyBleHRlbmRzIEJhc2VNYW5hZ2VkSWRlbnRpdHlTb3VyY2Uge1xuICAgIHByaXZhdGUgaWRlbnRpdHlFbmRwb2ludDogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGxvZ2dlcjogTG9nZ2VyLFxuICAgICAgICBub2RlU3RvcmFnZTogTm9kZVN0b3JhZ2UsXG4gICAgICAgIG5ldHdvcmtDbGllbnQ6IElOZXR3b3JrTW9kdWxlLFxuICAgICAgICBjcnlwdG9Qcm92aWRlcjogQ3J5cHRvUHJvdmlkZXIsXG4gICAgICAgIGRpc2FibGVJbnRlcm5hbFJldHJpZXM6IGJvb2xlYW4sXG4gICAgICAgIGlkZW50aXR5RW5kcG9pbnQ6IHN0cmluZ1xuICAgICkge1xuICAgICAgICBzdXBlcihcbiAgICAgICAgICAgIGxvZ2dlcixcbiAgICAgICAgICAgIG5vZGVTdG9yYWdlLFxuICAgICAgICAgICAgbmV0d29ya0NsaWVudCxcbiAgICAgICAgICAgIGNyeXB0b1Byb3ZpZGVyLFxuICAgICAgICAgICAgZGlzYWJsZUludGVybmFsUmV0cmllc1xuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMuaWRlbnRpdHlFbmRwb2ludCA9IGlkZW50aXR5RW5kcG9pbnQ7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB0cnlDcmVhdGUoXG4gICAgICAgIGxvZ2dlcjogTG9nZ2VyLFxuICAgICAgICBub2RlU3RvcmFnZTogTm9kZVN0b3JhZ2UsXG4gICAgICAgIG5ldHdvcmtDbGllbnQ6IElOZXR3b3JrTW9kdWxlLFxuICAgICAgICBjcnlwdG9Qcm92aWRlcjogQ3J5cHRvUHJvdmlkZXIsXG4gICAgICAgIGRpc2FibGVJbnRlcm5hbFJldHJpZXM6IGJvb2xlYW5cbiAgICApOiBJbWRzIHtcbiAgICAgICAgbGV0IHZhbGlkYXRlZElkZW50aXR5RW5kcG9pbnQ6IHN0cmluZztcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBwcm9jZXNzLmVudltcbiAgICAgICAgICAgICAgICBNYW5hZ2VkSWRlbnRpdHlFbnZpcm9ubWVudFZhcmlhYmxlTmFtZXNcbiAgICAgICAgICAgICAgICAgICAgLkFaVVJFX1BPRF9JREVOVElUWV9BVVRIT1JJVFlfSE9TVFxuICAgICAgICAgICAgXVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgICAgIGBbTWFuYWdlZCBJZGVudGl0eV0gRW52aXJvbm1lbnQgdmFyaWFibGUgJHtcbiAgICAgICAgICAgICAgICAgICAgTWFuYWdlZElkZW50aXR5RW52aXJvbm1lbnRWYXJpYWJsZU5hbWVzLkFaVVJFX1BPRF9JREVOVElUWV9BVVRIT1JJVFlfSE9TVFxuICAgICAgICAgICAgICAgIH0gZm9yICR7TWFuYWdlZElkZW50aXR5U291cmNlTmFtZXMuSU1EU30gcmV0dXJuZWQgZW5kcG9pbnQ6ICR7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuZW52W1xuICAgICAgICAgICAgICAgICAgICAgICAgTWFuYWdlZElkZW50aXR5RW52aXJvbm1lbnRWYXJpYWJsZU5hbWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLkFaVVJFX1BPRF9JREVOVElUWV9BVVRIT1JJVFlfSE9TVFxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfWBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB2YWxpZGF0ZWRJZGVudGl0eUVuZHBvaW50ID0gSW1kcy5nZXRWYWxpZGF0ZWRFbnZWYXJpYWJsZVVybFN0cmluZyhcbiAgICAgICAgICAgICAgICBNYW5hZ2VkSWRlbnRpdHlFbnZpcm9ubWVudFZhcmlhYmxlTmFtZXMuQVpVUkVfUE9EX0lERU5USVRZX0FVVEhPUklUWV9IT1NULFxuICAgICAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudltcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hbmFnZWRJZGVudGl0eUVudmlyb25tZW50VmFyaWFibGVOYW1lc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5BWlVSRV9QT0RfSURFTlRJVFlfQVVUSE9SSVRZX0hPU1RcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH0ke0lNRFNfVE9LRU5fUEFUSH1gLFxuICAgICAgICAgICAgICAgIE1hbmFnZWRJZGVudGl0eVNvdXJjZU5hbWVzLklNRFMsXG4gICAgICAgICAgICAgICAgbG9nZ2VyXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLmluZm8oXG4gICAgICAgICAgICAgICAgYFtNYW5hZ2VkIElkZW50aXR5XSBVbmFibGUgdG8gZmluZCAke01hbmFnZWRJZGVudGl0eUVudmlyb25tZW50VmFyaWFibGVOYW1lcy5BWlVSRV9QT0RfSURFTlRJVFlfQVVUSE9SSVRZX0hPU1R9IGVudmlyb25tZW50IHZhcmlhYmxlIGZvciAke01hbmFnZWRJZGVudGl0eVNvdXJjZU5hbWVzLklNRFN9LCB1c2luZyB0aGUgZGVmYXVsdCBlbmRwb2ludC5gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdmFsaWRhdGVkSWRlbnRpdHlFbmRwb2ludCA9IERFRkFVTFRfSU1EU19FTkRQT0lOVDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgSW1kcyhcbiAgICAgICAgICAgIGxvZ2dlcixcbiAgICAgICAgICAgIG5vZGVTdG9yYWdlLFxuICAgICAgICAgICAgbmV0d29ya0NsaWVudCxcbiAgICAgICAgICAgIGNyeXB0b1Byb3ZpZGVyLFxuICAgICAgICAgICAgZGlzYWJsZUludGVybmFsUmV0cmllcyxcbiAgICAgICAgICAgIHZhbGlkYXRlZElkZW50aXR5RW5kcG9pbnRcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY3JlYXRlUmVxdWVzdChcbiAgICAgICAgcmVzb3VyY2U6IHN0cmluZyxcbiAgICAgICAgbWFuYWdlZElkZW50aXR5SWQ6IE1hbmFnZWRJZGVudGl0eUlkXG4gICAgKTogTWFuYWdlZElkZW50aXR5UmVxdWVzdFBhcmFtZXRlcnMge1xuICAgICAgICBjb25zdCByZXF1ZXN0OiBNYW5hZ2VkSWRlbnRpdHlSZXF1ZXN0UGFyYW1ldGVycyA9XG4gICAgICAgICAgICBuZXcgTWFuYWdlZElkZW50aXR5UmVxdWVzdFBhcmFtZXRlcnMoXG4gICAgICAgICAgICAgICAgSHR0cE1ldGhvZC5HRVQsXG4gICAgICAgICAgICAgICAgdGhpcy5pZGVudGl0eUVuZHBvaW50XG4gICAgICAgICAgICApO1xuXG4gICAgICAgIHJlcXVlc3QuaGVhZGVyc1tNRVRBREFUQV9IRUFERVJfTkFNRV0gPSBcInRydWVcIjtcblxuICAgICAgICByZXF1ZXN0LnF1ZXJ5UGFyYW1ldGVyc1tBUElfVkVSU0lPTl9RVUVSWV9QQVJBTUVURVJfTkFNRV0gPVxuICAgICAgICAgICAgSU1EU19BUElfVkVSU0lPTjtcbiAgICAgICAgcmVxdWVzdC5xdWVyeVBhcmFtZXRlcnNbUkVTT1VSQ0VfQk9EWV9PUl9RVUVSWV9QQVJBTUVURVJfTkFNRV0gPVxuICAgICAgICAgICAgcmVzb3VyY2U7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgbWFuYWdlZElkZW50aXR5SWQuaWRUeXBlICE9PSBNYW5hZ2VkSWRlbnRpdHlJZFR5cGUuU1lTVEVNX0FTU0lHTkVEXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmVxdWVzdC5xdWVyeVBhcmFtZXRlcnNbXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRNYW5hZ2VkSWRlbnRpdHlVc2VyQXNzaWduZWRJZFF1ZXJ5UGFyYW1ldGVyS2V5KFxuICAgICAgICAgICAgICAgICAgICBtYW5hZ2VkSWRlbnRpdHlJZC5pZFR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHRydWUgLy8gaW5kaWNhdGVzIHNvdXJjZSBpcyBJTURTXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgXSA9IG1hbmFnZWRJZGVudGl0eUlkLmlkO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYm9keVBhcmFtZXRlcnMgY2FsY3VsYXRlZCBpbiBCYXNlTWFuYWdlZElkZW50aXR5LmFjcXVpcmVUb2tlbldpdGhNYW5hZ2VkSWRlbnRpdHlcblxuICAgICAgICByZXR1cm4gcmVxdWVzdDtcbiAgICB9XG59XG4iLCAiLy8gc3JjL2F1dGgudHNcbmltcG9ydCB7IENvbmZpZGVudGlhbENsaWVudEFwcGxpY2F0aW9uLCBDb25maWd1cmF0aW9uIH0gZnJvbSBcIkBhenVyZS9tc2FsLW5vZGVcIjtcbmltcG9ydCB7IEJyb3dzZXJXaW5kb3cgfSBmcm9tIFwiQGVsZWN0cm9uL3JlbW90ZVwiO1xuaW1wb3J0ICogYXMgZnMgZnJvbSBcImZzXCI7XG5cbmNvbnN0IEFVVEhPUklUWSA9IFwiaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tL2NvbnN1bWVyc1wiO1xuY29uc3QgUkVESVJFQ1RfVVJJID0gXCJodHRwOi8vbG9jYWxob3N0OjUwMDBcIjsgLy8gTXVzdCBtYXRjaCB5b3VyIEF6dXJlIHJlZ2lzdHJhdGlvblxuY29uc3QgU0NPUEVTID0gW1wiVGFza3MuUmVhZFdyaXRlXCIsIFwib2ZmbGluZV9hY2Nlc3NcIl07XG5cbi8qKlxuICogQXV0aE1hbmFnZXIgaGFuZGxlcyBhdXRoZW50aWNhdGlvbiwgdG9rZW4gY2FjaGluZywgYW5kIHRva2VuIHJlZnJlc2hpbmcgdXNpbmcgTVNBTC5cbiAqL1xuZXhwb3J0IGNsYXNzIEF1dGhNYW5hZ2VyIHtcblx0Y2NhOiBDb25maWRlbnRpYWxDbGllbnRBcHBsaWNhdGlvbjtcblx0dG9rZW5GaWxlUGF0aDogc3RyaW5nO1xuXHRjbGllbnRJZDogc3RyaW5nO1xuXHRjbGllbnRTZWNyZXQ6IHN0cmluZztcblx0cmVkaXJlY3RVcmw6IHN0cmluZztcblxuXHQvKipcblx0ICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBBdXRoTWFuYWdlci5cblx0ICogQHBhcmFtIGNsaWVudElkIC0gVGhlIGNsaWVudCBJRCBvZiB5b3VyIEF6dXJlIEFEIGFwcGxpY2F0aW9uLlxuXHQgKiBAcGFyYW0gY2xpZW50U2VjcmV0IC0gVGhlIGNsaWVudCBzZWNyZXQgb2YgeW91ciBBenVyZSBBRCBhcHBsaWNhdGlvbi5cblx0ICogQHBhcmFtIHJlZGlyZWN0VXJsIC0gVGhlIHJlZGlyZWN0IFVSTCByZWdpc3RlcmVkIGluIHlvdXIgQXp1cmUgQUQgYXBwLlxuXHQgKiBAcGFyYW0gdG9rZW5GaWxlUGF0aCAtIFBhdGggdG8gdGhlIGZpbGUgd2hlcmUgdGhlIHRva2VuIGNhY2hlIHdpbGwgYmUgc3RvcmVkLlxuXHQgKi9cblx0Y29uc3RydWN0b3IoXG5cdFx0Y2xpZW50SWQ6IHN0cmluZyxcblx0XHRjbGllbnRTZWNyZXQ6IHN0cmluZyxcblx0XHRyZWRpcmVjdFVybDogc3RyaW5nLFxuXHRcdHRva2VuRmlsZVBhdGg6IHN0cmluZyxcblx0KSB7XG5cdFx0dGhpcy5jbGllbnRJZCA9IGNsaWVudElkO1xuXHRcdHRoaXMuY2xpZW50U2VjcmV0ID0gY2xpZW50U2VjcmV0O1xuXHRcdHRoaXMucmVkaXJlY3RVcmwgPSByZWRpcmVjdFVybDtcblx0XHR0aGlzLnRva2VuRmlsZVBhdGggPSB0b2tlbkZpbGVQYXRoO1xuXHRcdHRoaXMuaW5pdENsaWVudCgpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEluaXRpYWxpemVzIHRoZSBNU0FMIGNsaWVudCB3aXRoIHRoZSBnaXZlbiBjb25maWd1cmF0aW9uLlxuXHQgKi9cblx0aW5pdENsaWVudCgpOiB2b2lkIHtcblx0XHRjb25zdCBjb25maWc6IENvbmZpZ3VyYXRpb24gPSB7XG5cdFx0XHRhdXRoOiB7XG5cdFx0XHRcdGNsaWVudElkOiB0aGlzLmNsaWVudElkLFxuXHRcdFx0XHRhdXRob3JpdHk6IEFVVEhPUklUWSxcblx0XHRcdFx0Y2xpZW50U2VjcmV0OiB0aGlzLmNsaWVudFNlY3JldCxcblx0XHRcdH0sXG5cdFx0fTtcblx0XHR0aGlzLmNjYSA9IG5ldyBDb25maWRlbnRpYWxDbGllbnRBcHBsaWNhdGlvbihjb25maWcpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFNhdmVzIHRoZSBjdXJyZW50IHRva2VuIGNhY2hlIHRvIGRpc2suXG5cdCAqL1xuXHRzYXZlVG9rZW5DYWNoZSgpOiB2b2lkIHtcblx0XHRjb25zdCB0b2tlbkNhY2hlU2VyaWFsaXplZCA9IHRoaXMuY2NhLmdldFRva2VuQ2FjaGUoKS5zZXJpYWxpemUoKTtcblx0XHRmcy53cml0ZUZpbGVTeW5jKHRoaXMudG9rZW5GaWxlUGF0aCwgdG9rZW5DYWNoZVNlcmlhbGl6ZWQpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFBlcmZvcm1zIGFuIGludGVyYWN0aXZlIGxvZ2luIHRvIGFjcXVpcmUgYW4gYWNjZXNzIHRva2VuLlxuXHQgKiBPcGVucyBhIEJyb3dzZXJXaW5kb3cgdG8gbGV0IHRoZSB1c2VyIHNpZ24gaW4uXG5cdCAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggYW4gb2JqZWN0IGNvbnRhaW5pbmcgYSB2YWxpZCBhY2Nlc3MgdG9rZW4uXG5cdCAqL1xuXHRhc3luYyBnZXRBY2Nlc3NUb2tlbigpOiBQcm9taXNlPHsgYWNjZXNzVG9rZW46IHN0cmluZyB9PiB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdGNvbnN0IGF1dGhVcmwgPVxuXHRcdFx0XHRgJHtBVVRIT1JJVFl9L29hdXRoMi92Mi4wL2F1dGhvcml6ZT9jbGllbnRfaWQ9JHt0aGlzLmNsaWVudElkfWAgK1xuXHRcdFx0XHRgJnJlc3BvbnNlX3R5cGU9Y29kZWAgK1xuXHRcdFx0XHRgJnJlZGlyZWN0X3VyaT0ke2VuY29kZVVSSUNvbXBvbmVudChSRURJUkVDVF9VUkkpfWAgK1xuXHRcdFx0XHRgJnJlc3BvbnNlX21vZGU9cXVlcnlgICtcblx0XHRcdFx0YCZzY29wZT0ke2VuY29kZVVSSUNvbXBvbmVudChTQ09QRVMuam9pbihcIiBcIikpfWAgK1xuXHRcdFx0XHRgJnByb21wdD1jb25zZW50YDtcblxuXHRcdFx0Y29uc3QgYXV0aFdpbmRvdyA9IG5ldyBCcm93c2VyV2luZG93KHtcblx0XHRcdFx0d2lkdGg6IDYwMCxcblx0XHRcdFx0aGVpZ2h0OiA3MDAsXG5cdFx0XHRcdHdlYlByZWZlcmVuY2VzOiB7XG5cdFx0XHRcdFx0bm9kZUludGVncmF0aW9uOiBmYWxzZSxcblx0XHRcdFx0XHRjb250ZXh0SXNvbGF0aW9uOiB0cnVlLFxuXHRcdFx0XHR9LFxuXHRcdFx0fSk7XG5cblx0XHRcdGF1dGhXaW5kb3cubG9hZFVSTChhdXRoVXJsKTtcblxuXHRcdFx0YXV0aFdpbmRvdy53ZWJDb250ZW50cy5vbihcIndpbGwtcmVkaXJlY3RcIiwgYXN5bmMgKGV2ZW50LCB1cmwpID0+IHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRjb25zdCByZWRpcmVjdFVSTCA9IG5ldyBVUkwodXJsKTtcblx0XHRcdFx0XHRjb25zdCBlcnJvciA9IHJlZGlyZWN0VVJMLnNlYXJjaFBhcmFtcy5nZXQoXCJlcnJvclwiKTtcblx0XHRcdFx0XHRpZiAoZXJyb3IpIHRocm93IG5ldyBFcnJvcihcIk9BdXRoIGVycm9yOiBcIiArIGVycm9yKTtcblxuXHRcdFx0XHRcdGNvbnN0IGF1dGhDb2RlID0gcmVkaXJlY3RVUkwuc2VhcmNoUGFyYW1zLmdldChcImNvZGVcIik7XG5cdFx0XHRcdFx0aWYgKCFhdXRoQ29kZSkgcmV0dXJuOyAvLyBJZiBubyBhdXRoIGNvZGUsIGV4aXQgZWFybHkuXG5cblx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdGF1dGhXaW5kb3cuY2xvc2UoKTtcblxuXHRcdFx0XHRcdGNvbnN0IHRva2VuUmVxdWVzdCA9IHtcblx0XHRcdFx0XHRcdGNvZGU6IGF1dGhDb2RlLFxuXHRcdFx0XHRcdFx0c2NvcGVzOiBTQ09QRVMsXG5cdFx0XHRcdFx0XHRyZWRpcmVjdFVyaTogUkVESVJFQ1RfVVJJLFxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0Y29uc3QgdG9rZW5SZXNwb25zZSA9XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmNjYS5hY3F1aXJlVG9rZW5CeUNvZGUodG9rZW5SZXF1ZXN0KTtcblx0XHRcdFx0XHRpZiAoIXRva2VuUmVzcG9uc2UpXG5cdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJObyB0b2tlbiByZXNwb25zZSByZWNlaXZlZC5cIik7XG5cdFx0XHRcdFx0dGhpcy5zYXZlVG9rZW5DYWNoZSgpO1xuXHRcdFx0XHRcdHJlc29sdmUoeyBhY2Nlc3NUb2tlbjogdG9rZW5SZXNwb25zZS5hY2Nlc3NUb2tlbiB9KTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0aWYgKCFhdXRoV2luZG93LmlzRGVzdHJveWVkKCkpIGF1dGhXaW5kb3cuY2xvc2UoKTtcblx0XHRcdFx0XHRyZWplY3QoZXJyKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogUmVmcmVzaGVzIHRoZSBhY2Nlc3MgdG9rZW4gdXNpbmcgdGhlIHJlZnJlc2ggdG9rZW4gc3RvcmVkIGluIHRoZSB0b2tlbiBjYWNoZS5cblx0ICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCBhbiBvYmplY3QgY29udGFpbmluZyBhIG5ldyBhY2Nlc3MgdG9rZW4uXG5cdCAqL1xuXHRhc3luYyByZWZyZXNoQWNjZXNzVG9rZW5XaXRoQ0NBKCk6IFByb21pc2U8eyBhY2Nlc3NUb2tlbjogc3RyaW5nIH0+IHtcblx0XHRpZiAoIWZzLmV4aXN0c1N5bmModGhpcy50b2tlbkZpbGVQYXRoKSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiTm8gdG9rZW4gY2FjaGUgZm91bmQuIFBsZWFzZSBsb2dpbiBmaXJzdC5cIik7XG5cdFx0fVxuXG5cdFx0Y29uc3QgY2FjaGVEYXRhID0gZnMucmVhZEZpbGVTeW5jKHRoaXMudG9rZW5GaWxlUGF0aCwgXCJ1dGY4XCIpO1xuXHRcdHRoaXMuY2NhLmdldFRva2VuQ2FjaGUoKS5kZXNlcmlhbGl6ZShjYWNoZURhdGEpO1xuXG5cdFx0Y29uc3QgdG9rZW5DYWNoZVNlcmlhbGl6ZWQgPSB0aGlzLmNjYS5nZXRUb2tlbkNhY2hlKCkuc2VyaWFsaXplKCk7XG5cdFx0Y29uc3QgcGFyc2VkQ2FjaGUgPSBKU09OLnBhcnNlKHRva2VuQ2FjaGVTZXJpYWxpemVkKTtcblx0XHRpZiAoIXBhcnNlZENhY2hlLlJlZnJlc2hUb2tlbikge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiTm8gcmVmcmVzaCB0b2tlbiBmb3VuZCBpbiB0aGUgY2FjaGUuXCIpO1xuXHRcdH1cblx0XHRjb25zdCByZWZyZXNoVG9rZW5PYmplY3QgPSBwYXJzZWRDYWNoZS5SZWZyZXNoVG9rZW47XG5cdFx0Y29uc3QgcmVmcmVzaFRva2VuS2V5ID0gT2JqZWN0LmtleXMocmVmcmVzaFRva2VuT2JqZWN0KVswXTtcblx0XHRjb25zdCByZWZyZXNoVG9rZW4gPSByZWZyZXNoVG9rZW5PYmplY3RbcmVmcmVzaFRva2VuS2V5XS5zZWNyZXQ7XG5cblx0XHRjb25zdCB0b2tlblJlcXVlc3QgPSB7XG5cdFx0XHRyZWZyZXNoVG9rZW46IHJlZnJlc2hUb2tlbixcblx0XHRcdHNjb3BlczogU0NPUEVTLFxuXHRcdFx0cmVkaXJlY3RVcmk6IFJFRElSRUNUX1VSSSxcblx0XHR9O1xuXG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHRva2VuUmVzcG9uc2UgPVxuXHRcdFx0XHRhd2FpdCB0aGlzLmNjYS5hY3F1aXJlVG9rZW5CeVJlZnJlc2hUb2tlbih0b2tlblJlcXVlc3QpO1xuXHRcdFx0aWYgKCF0b2tlblJlc3BvbnNlKVxuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJObyB0b2tlbiByZXNwb25zZSByZWNlaXZlZCBmcm9tIHJlZnJlc2guXCIpO1xuXHRcdFx0dGhpcy5zYXZlVG9rZW5DYWNoZSgpO1xuXHRcdFx0cmV0dXJuIHsgYWNjZXNzVG9rZW46IHRva2VuUmVzcG9uc2UuYWNjZXNzVG9rZW4gfTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0dGhyb3cgZXJyb3I7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgYSB2YWxpZCBhY2Nlc3MgdG9rZW4gYnkgY2hlY2tpbmcgdGhlIHRva2VuIGNhY2hlLlxuXHQgKiBJZiBhIHRva2VuIGlzIGF2YWlsYWJsZSwgaXQgcmVmcmVzaGVzIGl0OyBvdGhlcndpc2UsIGl0IHBlcmZvcm1zIGFuIGludGVyYWN0aXZlIGxvZ2luLlxuXHQgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIGFuIG9iamVjdCBjb250YWluaW5nIGEgdmFsaWQgYWNjZXNzIHRva2VuLlxuXHQgKi9cblx0YXN5bmMgZ2V0VG9rZW4oKTogUHJvbWlzZTx7IGFjY2Vzc1Rva2VuOiBzdHJpbmcgfT4ge1xuXHRcdGlmIChmcy5leGlzdHNTeW5jKHRoaXMudG9rZW5GaWxlUGF0aCkpIHtcblx0XHRcdHJldHVybiB0aGlzLnJlZnJlc2hBY2Nlc3NUb2tlbldpdGhDQ0EoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIHRoaXMuZ2V0QWNjZXNzVG9rZW4oKTtcblx0XHR9XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBNb2RhbCwgQXBwIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbi8qKlxuICogQSBzaW1wbGUgbW9kYWwgdGhhdCBwcm9tcHRzIHRoZSB1c2VyIHRvIGVudGVyIGEgdGFzayB0aXRsZS5cbiAqIFRoZSBtb2RhbCBpcyBjZW50ZXJlZCwgYW5kIHRoZSB0YXNrIGlzIHN1Ym1pdHRlZCB3aGVuIHRoZSB1c2VyIHByZXNzZXMgRW50ZXIuXG4gKi9cbmV4cG9ydCBjbGFzcyBUYXNrVGl0bGVNb2RhbCBleHRlbmRzIE1vZGFsIHtcblx0cmVzdWx0OiBzdHJpbmc7XG5cdG9uU3VibWl0OiAocmVzdWx0OiBzdHJpbmcpID0+IHZvaWQ7XG5cblx0LyoqXG5cdCAqIENvbnN0cnVjdHMgdGhlIG1vZGFsLlxuXHQgKiBAcGFyYW0gYXBwIC0gVGhlIE9ic2lkaWFuIGFwcCBpbnN0YW5jZS5cblx0ICogQHBhcmFtIG9uU3VibWl0IC0gQSBjYWxsYmFjayB0aGF0IHJlY2VpdmVzIHRoZSBlbnRlcmVkIHRhc2sgdGl0bGUuXG5cdCAqL1xuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgb25TdWJtaXQ6IChyZXN1bHQ6IHN0cmluZykgPT4gdm9pZCkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xuXHR9XG5cblx0LyoqXG5cdCAqIENhbGxlZCB3aGVuIHRoZSBtb2RhbCBpcyBvcGVuZWQuIFJlbmRlcnMgdGhlIGlucHV0IFVJIGFuZCBjZW50ZXJzIGl0LlxuXHQgKi9cblx0b25PcGVuKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG5cdFx0Ly8gQXBwbHkgY2VudGVyaW5nIHN0eWxlcyB0byB0aGUgbW9kYWwgY29udGVudC5cblx0XHRjb250ZW50RWwuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuXHRcdGNvbnRlbnRFbC5zdHlsZS5mbGV4RGlyZWN0aW9uID0gXCJjb2x1bW5cIjtcblx0XHRjb250ZW50RWwuc3R5bGUuYWxpZ25JdGVtcyA9IFwiY2VudGVyXCI7XG5cdFx0Y29udGVudEVsLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJjZW50ZXJcIjtcblx0XHRjb250ZW50RWwuc3R5bGUuZ2FwID0gXCIxMHB4XCI7XG5cdFx0Y29udGVudEVsLnN0eWxlLm1pbkhlaWdodCA9IFwiMTAwcHhcIjtcblxuXHRcdC8vIENyZWF0ZSBhbmQgYXBwZW5kIHRoZSBoZWFkZXIuXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwiaDJcIiwgeyB0ZXh0OiBcIkVudGVyIFRhc2sgVGl0bGVcIiB9KTtcblxuXHRcdC8vIENyZWF0ZSBhbmQgYXBwZW5kIHRoZSBpbnB1dCBlbGVtZW50LlxuXHRcdGNvbnN0IGlucHV0RWwgPSBjb250ZW50RWwuY3JlYXRlRWwoXCJpbnB1dFwiLCB7XG5cdFx0XHR0eXBlOiBcInRleHRcIixcblx0XHRcdHBsYWNlaG9sZGVyOiBcIlRhc2sgVGl0bGVcIixcblx0XHR9KTtcblx0XHQvLyBPcHRpb25hbGx5IHNldCBhIHdpZHRoIGZvciB0aGUgaW5wdXQuXG5cdFx0aW5wdXRFbC5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xuXHRcdGlucHV0RWwuZm9jdXMoKTtcblxuXHRcdC8vIFdoZW4gdGhlIHVzZXIgcHJlc3NlcyBFbnRlciwgc3VibWl0IHRoZSBpbnB1dC5cblx0XHRpbnB1dEVsLm9ua2V5ZG93biA9IChlKSA9PiB7XG5cdFx0XHRpZiAoZS5rZXkgPT09IFwiRW50ZXJcIikge1xuXHRcdFx0XHR0aGlzLnJlc3VsdCA9IGlucHV0RWwudmFsdWU7XG5cdFx0XHRcdHRoaXMuY2xvc2UoKTtcblx0XHRcdFx0dGhpcy5vblN1Ym1pdCh0aGlzLnJlc3VsdCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDYWxsZWQgd2hlbiB0aGUgbW9kYWwgaXMgY2xvc2VkLiBDbGVhcnMgdGhlIGNvbnRlbnQuXG5cdCAqL1xuXHRvbkNsb3NlKCkge1xuXHRcdHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBBcHAsIEZ1enp5U3VnZ2VzdE1vZGFsIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmV4cG9ydCBjbGFzcyBHZW5lcmljU2VsZWN0TW9kYWw8VD4gZXh0ZW5kcyBGdXp6eVN1Z2dlc3RNb2RhbDxUPiB7XG5cdGl0ZW1zOiBUW107XG5cdGdldFRleHQ6IChpdGVtOiBUKSA9PiBzdHJpbmc7XG5cdG9uU2VsZWN0OiAoaXRlbTogVCkgPT4gUHJvbWlzZTx2b2lkPjtcblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRhcHA6IEFwcCxcblx0XHRpdGVtczogVFtdLFxuXHRcdGdldFRleHQ6IChpdGVtOiBUKSA9PiBzdHJpbmcsXG5cdFx0b25TZWxlY3Q6IChpdGVtOiBUKSA9PiBQcm9taXNlPHZvaWQ+LFxuXHQpIHtcblx0XHRzdXBlcihhcHApO1xuXHRcdHRoaXMuaXRlbXMgPSBpdGVtcztcblx0XHR0aGlzLmdldFRleHQgPSBnZXRUZXh0O1xuXHRcdHRoaXMub25TZWxlY3QgPSBvblNlbGVjdDtcblx0fVxuXG5cdGdldEl0ZW1zKCk6IFRbXSB7XG5cdFx0cmV0dXJuIHRoaXMuaXRlbXM7XG5cdH1cblxuXHRnZXRJdGVtVGV4dChpdGVtOiBUKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5nZXRUZXh0KGl0ZW0pO1xuXHR9XG5cblx0YXN5bmMgb25DaG9vc2VJdGVtKGl0ZW06IFQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0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TSxLQUFLLGlCQUFpQjtBQUMxQyxRQUFJLEtBQUssYUFBYTtBQUNyQixZQUFNLEtBQUssWUFBWSxPQUFPLEtBQUs7QUFBQSxJQUNwQyxPQUFPO0FBQ04sY0FBUSxLQUFLLDZCQUE2QjtBQUFBLElBQzNDO0FBQUEsRUFDRDtBQUNEOyIsCiAgIm5hbWVzIjogWyJtb2R1bGUiLCAibW9kdWxlIiwgImZzIiwgInBhdGgiLCAiY3J5cHRvIiwgInZlcnNpb24iLCAiY29uZmlnIiwgIm1vZHVsZSIsICJCdWZmZXIiLCAibW9kdWxlIiwgIkJ1ZmZlciIsICJtb2R1bGUiLCAiQnVmZmVyIiwgIm1vZHVsZSIsICJtb2R1bGUiLCAiQnVmZmVyIiwgIm1vZHVsZSIsICJCdWZmZXIiLCAiY3J5cHRvIiwgIm1vZHVsZSIsICJCdWZmZXIiLCAibW9kdWxlIiwgIkJ1ZmZlciIsICJtb2R1bGUiLCAiQnVmZmVyIiwgIm1vZHVsZSIsICJqd3QiLCAibW9kdWxlIiwgIm1vZHVsZSIsICJtb2R1bGUiLCAibW9kdWxlIiwgIm5hbWUiLCAibW9kdWxlIiwgIm1vZHVsZSIsICJtb2R1bGUiLCAibW9kdWxlIiwgIm5hbWUiLCAibW9kdWxlIiwgIm1vZHVsZSIsICJtb2R1bGUiLCAidmVyc2lvbiIsICJtb2R1bGUiLCAidmVyc2lvbiIsICJtb2R1bGUiLCAidmVyc2lvbiIsICJtb2R1bGUiLCAidmVyc2lvbiIsICJtb2R1bGUiLCAidmVyc2lvbiIsICJtb2R1bGUiLCAidmVyc2lvbjIiLCAibW9kdWxlIiwgIm1vZHVsZSIsICJtb2R1bGUiLCAibW9kdWxlIiwgInZlcnNpb24iLCAibW9kdWxlIiwgIm1vZHVsZSIsICJtb2R1bGUiLCAibW9kdWxlIiwgIm1vZHVsZSIsICJtb2R1bGUiLCAibW9kdWxlIiwgIm1vZHVsZSIsICJtb2R1bGUiLCAibW9kdWxlIiwgIm1vZHVsZSIsICJtb2R1bGUiLCAibW9kdWxlIiwgIm1vZHVsZSIsICJ2ZXJzaW9uIiwgIm1vZHVsZSIsICJtb2R1bGUiLCAidmVyc2lvbiIsICJtb2R1bGUiLCAidmVyc2lvbiIsICJtb2R1bGUiLCAidmVyc2lvbiIsICJtb2R1bGUiLCAibW9kdWxlIiwgIm1vZHVsZSIsICJtb2R1bGUiLCAicmVxdWlyZV92YWxpZCIsICJtb2R1bGUiLCAibW9kdWxlIiwgInZlcnNpb24iLCAibW9kdWxlIiwgInZlcnNpb24iLCAibW9kdWxlIiwgInZlcnNpb24iLCAibW9kdWxlIiwgIm1vZHVsZSIsICJ2ZXJzaW9uIiwgIm1vZHVsZSIsICJyZXF1aXJlX3NlbXZlciIsICJtb2R1bGUiLCAiY29uc3RhbnRzIiwgIm1vZHVsZSIsICJtb2R1bGUiLCAibW9kdWxlIiwgIm1vZHVsZSIsICJtb2R1bGUiLCAiaGVhZGVyIiwgInNlY3JldE9yUHVibGljS2V5IiwgIl8iLCAibW9kdWxlIiwgInJlcXVpcmVfbG9kYXNoIiwgIm1vZHVsZSIsICJyZXF1aXJlX2xvZGFzaCIsICJtb2R1bGUiLCAicmVxdWlyZV9sb2Rhc2giLCAibW9kdWxlIiwgInJlcXVpcmVfbG9kYXNoIiwgIm1vZHVsZSIsICJyZXF1aXJlX2xvZGFzaCIsICJtb2R1bGUiLCAicmVxdWlyZV9sb2Rhc2giLCAibW9kdWxlIiwgIm1vZHVsZSIsICJ2YWxpZGF0ZSIsICJfIiwgIm1vZHVsZSIsICJuYW1lIiwgIlByb21pc2UiLCAibmFtZSIsICJtb2R1bGUiLCAiZXhwb3J0cyIsICJyZXF1aXJlX3JlbmRlcmVyIiwgIm1vZHVsZSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiZnMiLCAicGF0aCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIkF1dGhFcnJvckNvZGVzLnVuZXhwZWN0ZWRFcnJvciIsICJBdXRoRXJyb3JDb2Rlcy5wb3N0UmVxdWVzdEZhaWxlZCIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5jbGllbnRJbmZvRGVjb2RpbmdFcnJvciIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5jbGllbnRJbmZvRW1wdHlFcnJvciIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy50b2tlblBhcnNpbmdFcnJvciIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5udWxsT3JFbXB0eVRva2VuIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLmVuZHBvaW50UmVzb2x1dGlvbkVycm9yIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLm5ldHdvcmtFcnJvciIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5vcGVuSWRDb25maWdFcnJvciIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5oYXNoTm90RGVzZXJpYWxpemVkIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLmludmFsaWRTdGF0ZSIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5zdGF0ZU1pc21hdGNoIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLnN0YXRlTm90Rm91bmQiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMubm9uY2VNaXNtYXRjaCIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5hdXRoVGltZU5vdEZvdW5kIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLm1heEFnZVRyYW5zcGlyZWQiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMubXVsdGlwbGVNYXRjaGluZ1Rva2VucyIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5tdWx0aXBsZU1hdGNoaW5nQWNjb3VudHMiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMubXVsdGlwbGVNYXRjaGluZ0FwcE1ldGFkYXRhIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLnJlcXVlc3RDYW5ub3RCZU1hZGUiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMuY2Fubm90UmVtb3ZlRW1wdHlTY29wZSIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5jYW5ub3RBcHBlbmRTY29wZVNldCIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5lbXB0eUlucHV0U2NvcGVTZXQiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMuZGV2aWNlQ29kZVBvbGxpbmdDYW5jZWxsZWQiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMuZGV2aWNlQ29kZUV4cGlyZWQiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMuZGV2aWNlQ29kZVVua25vd25FcnJvciIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5ub0FjY291bnRJblNpbGVudFJlcXVlc3QiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZENhY2hlUmVjb3JkIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLmludmFsaWRDYWNoZUVudmlyb25tZW50IiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLm5vQWNjb3VudEZvdW5kIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLm5vQ3J5cHRvT2JqZWN0IiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLnVuZXhwZWN0ZWRDcmVkZW50aWFsVHlwZSIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5pbnZhbGlkQXNzZXJ0aW9uIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLmludmFsaWRDbGllbnRDcmVkZW50aWFsIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLnRva2VuUmVmcmVzaFJlcXVpcmVkIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLnVzZXJUaW1lb3V0UmVhY2hlZCIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy50b2tlbkNsYWltc0NuZlJlcXVpcmVkRm9yU2lnbmVkSnd0IiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLmF1dGhvcml6YXRpb25Db2RlTWlzc2luZ0Zyb21TZXJ2ZXJSZXNwb25zZSIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5iaW5kaW5nS2V5Tm90UmVtb3ZlZCIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5lbmRTZXNzaW9uRW5kcG9pbnROb3RTdXBwb3J0ZWQiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMua2V5SWRNaXNzaW5nIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLm5vTmV0d29ya0Nvbm5lY3Rpdml0eSIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy51c2VyQ2FuY2VsZWQiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMubWlzc2luZ1RlbmFudElkRXJyb3IiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMubWV0aG9kTm90SW1wbGVtZW50ZWQiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMubmVzdGVkQXBwQXV0aEJyaWRnZURpc2FibGVkIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLm1ldGhvZE5vdEltcGxlbWVudGVkIiwgIkxvZ0xldmVsIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLnRva2VuUGFyc2luZ0Vycm9yIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLm51bGxPckVtcHR5VG9rZW4iLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMubWF4QWdlVHJhbnNwaXJlZCIsICJUaW1lVXRpbHMubm93U2Vjb25kcyIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy50b2tlbkNsYWltc0NuZlJlcXVpcmVkRm9yU2lnbmVkSnd0IiwgIkNsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLnJlZGlyZWN0VXJpRW1wdHkiLCAiQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuY2xhaW1zUmVxdWVzdFBhcnNpbmdFcnJvciIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5hdXRob3JpdHlVcmlJbnNlY3VyZSIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy51cmxQYXJzZUVycm9yIiwgIkNsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLnVybEVtcHR5RXJyb3IiLCAiQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuZW1wdHlJbnB1dFNjb3Blc0Vycm9yIiwgIkNsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmludmFsaWRQcm9tcHRWYWx1ZSIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5pbnZhbGlkQ2xhaW1zIiwgIkNsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLnRva2VuUmVxdWVzdEVtcHR5IiwgIkNsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmxvZ291dFJlcXVlc3RFbXB0eSIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5pbnZhbGlkQ29kZUNoYWxsZW5nZU1ldGhvZCIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5wa2NlUGFyYW1zTWlzc2luZyIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5pbnZhbGlkQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YSIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5pbnZhbGlkQXV0aG9yaXR5TWV0YWRhdGEiLCAiQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMudW50cnVzdGVkQXV0aG9yaXR5IiwgIkNsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLm1pc3NpbmdTc2hKd2siLCAiQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMubWlzc2luZ1NzaEtpZCIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5taXNzaW5nTm9uY2VBdXRoZW50aWNhdGlvbkhlYWRlciIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5pbnZhbGlkQXV0aGVudGljYXRpb25IZWFkZXIiLCAiQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuY2Fubm90U2V0T0lEQ09wdGlvbnMiLCAiQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuY2Fubm90QWxsb3dQbGF0Zm9ybUJyb2tlciIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5hdXRob3JpdHlNaXNtYXRjaCIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5lbXB0eUlucHV0U2NvcGVzRXJyb3IiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMuY2Fubm90QXBwZW5kU2NvcGVTZXQiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMuY2Fubm90UmVtb3ZlRW1wdHlTY29wZSIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5lbXB0eUlucHV0U2NvcGVTZXQiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMuY2xpZW50SW5mb0VtcHR5RXJyb3IiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMuY2xpZW50SW5mb0RlY29kaW5nRXJyb3IiLCAibmFtZSIsICJ0ZW5hbnRJZCIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5pbnZhbGlkQ2FjaGVFbnZpcm9ubWVudCIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5oYXNoTm90RGVzZXJpYWxpemVkIiwgIkNsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLnVybEVtcHR5RXJyb3IiLCAiQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMudXJsUGFyc2VFcnJvciIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5hdXRob3JpdHlVcmlJbnNlY3VyZSIsICJVcmxVdGlscy5nZXREZXNlcmlhbGl6ZWRSZXNwb25zZSIsICJDYWNoZUVycm9yQ29kZXMuY2FjaGVRdW90YUV4Y2VlZGVkRXJyb3JDb2RlIiwgIkNhY2hlRXJyb3JDb2Rlcy5jYWNoZVVua25vd25FcnJvckNvZGUiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMuaW52YWxpZENhY2hlUmVjb3JkIiwgIkNhY2hlRXJyb3JDb2Rlcy5jYWNoZVF1b3RhRXhjZWVkZWRFcnJvckNvZGUiLCAiQ2FjaGVFcnJvckNvZGVzLmNhY2hlVW5rbm93bkVycm9yQ29kZSIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5iaW5kaW5nS2V5Tm90UmVtb3ZlZCIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5tdWx0aXBsZU1hdGNoaW5nQXBwTWV0YWRhdGEiLCAibmFtZSIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5tZXRob2ROb3RJbXBsZW1lbnRlZCIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5tZXRob2ROb3RJbXBsZW1lbnRlZCIsICJjb25maWciLCAiQ0xJRU5UX0lORk8iLCAiQUFEU2VydmVyUGFyYW1LZXlzLkNMSUVOVF9JRCIsICJBQURTZXJ2ZXJQYXJhbUtleXMuQlJPS0VSX0NMSUVOVF9JRCIsICJBQURTZXJ2ZXJQYXJhbUtleXMuUkVESVJFQ1RfVVJJIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5SRVNQT05TRV9UWVBFIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5SRVNQT05TRV9NT0RFIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5OQVRJVkVfQlJPS0VSIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5TQ09QRSIsICJBQURTZXJ2ZXJQYXJhbUtleXMuUE9TVF9MT0dPVVRfVVJJIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5JRF9UT0tFTl9ISU5UIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5ET01BSU5fSElOVCIsICJBQURTZXJ2ZXJQYXJhbUtleXMuTE9HSU5fSElOVCIsICJBQURTZXJ2ZXJQYXJhbUtleXMuU0lEIiwgIkNsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmludmFsaWRDbGFpbXMiLCAiQUFEU2VydmVyUGFyYW1LZXlzLkNMQUlNUyIsICJBQURTZXJ2ZXJQYXJhbUtleXMuQ0xJRU5UX1JFUVVFU1RfSUQiLCAiQUFEU2VydmVyUGFyYW1LZXlzLlhfQ0xJRU5UX1NLVSIsICJBQURTZXJ2ZXJQYXJhbUtleXMuWF9DTElFTlRfVkVSIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5YX0NMSUVOVF9PUyIsICJBQURTZXJ2ZXJQYXJhbUtleXMuWF9DTElFTlRfQ1BVIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5YX0FQUF9OQU1FIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5YX0FQUF9WRVIiLCAiQUFEU2VydmVyUGFyYW1LZXlzLlBST01QVCIsICJBQURTZXJ2ZXJQYXJhbUtleXMuU1RBVEUiLCAiQUFEU2VydmVyUGFyYW1LZXlzLk5PTkNFIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5DT0RFX0NIQUxMRU5HRSIsICJBQURTZXJ2ZXJQYXJhbUtleXMuQ09ERV9DSEFMTEVOR0VfTUVUSE9EIiwgIkNsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLnBrY2VQYXJhbXNNaXNzaW5nIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5DT0RFIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5ERVZJQ0VfQ09ERSIsICJBQURTZXJ2ZXJQYXJhbUtleXMuUkVGUkVTSF9UT0tFTiIsICJBQURTZXJ2ZXJQYXJhbUtleXMuQ09ERV9WRVJJRklFUiIsICJBQURTZXJ2ZXJQYXJhbUtleXMuQ0xJRU5UX1NFQ1JFVCIsICJBQURTZXJ2ZXJQYXJhbUtleXMuQ0xJRU5UX0FTU0VSVElPTiIsICJBQURTZXJ2ZXJQYXJhbUtleXMuQ0xJRU5UX0FTU0VSVElPTl9UWVBFIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5PQk9fQVNTRVJUSU9OIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5SRVFVRVNURURfVE9LRU5fVVNFIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5HUkFOVF9UWVBFIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5JTlNUQU5DRV9BV0FSRSIsICJBQURTZXJ2ZXJQYXJhbUtleXMuVE9LRU5fVFlQRSIsICJBQURTZXJ2ZXJQYXJhbUtleXMuUkVRX0NORiIsICJBQURTZXJ2ZXJQYXJhbUtleXMuWF9DTElFTlRfQ1VSUl9URUxFTSIsICJBQURTZXJ2ZXJQYXJhbUtleXMuWF9DTElFTlRfTEFTVF9URUxFTSIsICJBQURTZXJ2ZXJQYXJhbUtleXMuWF9NU19MSUJfQ0FQQUJJTElUWSIsICJBQURTZXJ2ZXJQYXJhbUtleXMuTE9HT1VUX0hJTlQiLCAiQUFEU2VydmVyUGFyYW1LZXlzLkJST0tFUl9SRURJUkVDVF9VUkkiLCAiQUFEU2VydmVyUGFyYW1LZXlzLkVBUl9KV0siLCAiQUFEU2VydmVyUGFyYW1LZXlzLkVBUl9KV0VfQ1JZUFRPIiwgImUiLCAidmVyc2lvbiIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5lbmRwb2ludFJlc29sdXRpb25FcnJvciIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5lbmRTZXNzaW9uRW5kcG9pbnROb3RTdXBwb3J0ZWQiLCAiQ2FjaGVIZWxwZXJzLmdlbmVyYXRlQXV0aG9yaXR5TWV0YWRhdGFFeHBpcmVzQXQiLCAiQ2FjaGVIZWxwZXJzLnVwZGF0ZUF1dGhvcml0eUVuZHBvaW50TWV0YWRhdGEiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMub3BlbklkQ29uZmlnRXJyb3IiLCAiQ2FjaGVIZWxwZXJzLmlzQXV0aG9yaXR5TWV0YWRhdGFFeHBpcmVkIiwgIkNsaWVudENvbmZpZ3VyYXRpb25FcnJvckNvZGVzLmludmFsaWRBdXRob3JpdHlNZXRhZGF0YSIsICJDYWNoZUhlbHBlcnMudXBkYXRlQ2xvdWREaXNjb3ZlcnlNZXRhZGF0YSIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy51bnRydXN0ZWRBdXRob3JpdHkiLCAiQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuaW52YWxpZENsb3VkRGlzY292ZXJ5TWV0YWRhdGEiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMuZW5kcG9pbnRSZXNvbHV0aW9uRXJyb3IiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMubmV0d29ya0Vycm9yIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZEJyb2tlclBhcmFtZXRlcnMiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkRXh0cmFRdWVyeVBhcmFtZXRlcnMiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ29ycmVsYXRpb25JZCIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5pbnN0cnVtZW50QnJva2VyUGFyYW1zIiwgIlVybFV0aWxzLm1hcFRvUXVlcnlTdHJpbmciLCAiSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvckNvZGVzLmludGVyYWN0aW9uUmVxdWlyZWQiLCAiSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvckNvZGVzLmNvbnNlbnRSZXF1aXJlZCIsICJJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yQ29kZXMubG9naW5SZXF1aXJlZCIsICJJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yQ29kZXMuYmFkVG9rZW4iLCAiSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvckNvZGVzLm5vVG9rZW5zRm91bmQiLCAiSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvckNvZGVzLm5hdGl2ZUFjY291bnRVbmF2YWlsYWJsZSIsICJJbnRlcmFjdGlvblJlcXVpcmVkQXV0aEVycm9yQ29kZXMucmVmcmVzaFRva2VuRXhwaXJlZCIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5ub0NyeXB0b09iamVjdCIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5pbnZhbGlkU3RhdGUiLCAiVGltZVV0aWxzLm5vd1NlY29uZHMiLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMubm9uY2VNaXNtYXRjaCIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5hdXRoVGltZU5vdEZvdW5kIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLmludmFsaWRDYWNoZUVudmlyb25tZW50IiwgIkNhY2hlSGVscGVycy5jcmVhdGVJZFRva2VuRW50aXR5IiwgIkNhY2hlSGVscGVycy5jcmVhdGVBY2Nlc3NUb2tlbkVudGl0eSIsICJDYWNoZUhlbHBlcnMuY3JlYXRlUmVmcmVzaFRva2VuRW50aXR5IiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLmtleUlkTWlzc2luZyIsICJUaW1lVXRpbHMudG9EYXRlRnJvbVNlY29uZHMiLCAiQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMucmVkaXJlY3RVcmlFbXB0eSIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5pbnZhbGlkUHJvbXB0VmFsdWUiLCAiQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMuaW52YWxpZENsYWltcyIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5wa2NlUGFyYW1zTWlzc2luZyIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5pbnZhbGlkQ29kZUNoYWxsZW5nZU1ldGhvZCIsICJjb25maWciLCAiQ2xpZW50QXV0aEVycm9yQ29kZXMucmVxdWVzdENhbm5vdEJlTWFkZSIsICJUaW1lVXRpbHMubm93U2Vjb25kcyIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5sb2dvdXRSZXF1ZXN0RW1wdHkiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2xpZW50SWQiLCAiQUFEU2VydmVyUGFyYW1LZXlzLkNMSUVOVF9JRCIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRSZWRpcmVjdFVyaSIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRTY29wZXMiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQXV0aG9yaXphdGlvbkNvZGUiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkTGlicmFyeUluZm8iLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQXBwbGljYXRpb25UZWxlbWV0cnkiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkVGhyb3R0bGluZyIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRTZXJ2ZXJUZWxlbWV0cnkiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ29kZVZlcmlmaWVyIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudFNlY3JldCIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDbGllbnRBc3NlcnRpb24iLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2xpZW50QXNzZXJ0aW9uVHlwZSIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRHcmFudFR5cGUiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2xpZW50SW5mbyIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRQb3BUb2tlbiIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRTc2hKd2siLCAiQ2xpZW50Q29uZmlndXJhdGlvbkVycm9yQ29kZXMubWlzc2luZ1NzaEp3ayIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDbGFpbXMiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2NzT2lkIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENjc1VwbiIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRCcm9rZXJQYXJhbWV0ZXJzIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZEV4dHJhUXVlcnlQYXJhbWV0ZXJzIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5SRVRVUk5fU1BBX0NPREUiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuaW5zdHJ1bWVudEJyb2tlclBhcmFtcyIsICJVcmxVdGlscy5tYXBUb1F1ZXJ5U3RyaW5nIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFBvc3RMb2dvdXRSZWRpcmVjdFVyaSIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDb3JyZWxhdGlvbklkIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZElkVG9rZW5IaW50IiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFN0YXRlIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZExvZ291dEhpbnQiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkSW5zdGFuY2VBd2FyZSIsICJUaW1lVXRpbHMubm93U2Vjb25kcyIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy50b2tlblJlcXVlc3RFbXB0eSIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5ub0FjY291bnRJblNpbGVudFJlcXVlc3QiLCAiSW50ZXJhY3Rpb25SZXF1aXJlZEF1dGhFcnJvckNvZGVzLm5vVG9rZW5zRm91bmQiLCAiVGltZVV0aWxzLmlzVG9rZW5FeHBpcmVkIiwgIkludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3JDb2Rlcy5yZWZyZXNoVG9rZW5FeHBpcmVkIiwgIkludGVyYWN0aW9uUmVxdWlyZWRBdXRoRXJyb3JDb2Rlcy5iYWRUb2tlbiIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDbGllbnRJZCIsICJBQURTZXJ2ZXJQYXJhbUtleXMuQ0xJRU5UX0lEIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFJlZGlyZWN0VXJpIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFNjb3BlcyIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRHcmFudFR5cGUiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2xpZW50SW5mbyIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRMaWJyYXJ5SW5mbyIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRBcHBsaWNhdGlvblRlbGVtZXRyeSIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRUaHJvdHRsaW5nIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFNlcnZlclRlbGVtZXRyeSIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRSZWZyZXNoVG9rZW4iLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2xpZW50U2VjcmV0IiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudEFzc2VydGlvbiIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDbGllbnRBc3NlcnRpb25UeXBlIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFBvcFRva2VuIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFNzaEp3ayIsICJDbGllbnRDb25maWd1cmF0aW9uRXJyb3JDb2Rlcy5taXNzaW5nU3NoSndrIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsYWltcyIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDY3NPaWQiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2NzVXBuIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZEJyb2tlclBhcmFtZXRlcnMiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkRXh0cmFRdWVyeVBhcmFtZXRlcnMiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuaW5zdHJ1bWVudEJyb2tlclBhcmFtcyIsICJVcmxVdGlscy5tYXBUb1F1ZXJ5U3RyaW5nIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLnRva2VuUmVmcmVzaFJlcXVpcmVkIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLm5vQWNjb3VudEluU2lsZW50UmVxdWVzdCIsICJUaW1lVXRpbHMud2FzQ2xvY2tUdXJuZWRCYWNrIiwgIlRpbWVVdGlscy5pc1Rva2VuRXhwaXJlZCIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5hdXRoVGltZU5vdEZvdW5kIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudElkIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5DTElFTlRfSUQiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkU2NvcGVzIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFJlZGlyZWN0VXJpIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENvcnJlbGF0aW9uSWQiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkUmVzcG9uc2VNb2RlIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsaWVudEluZm8iLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkUHJvbXB0IiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZERvbWFpbkhpbnQiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkU2lkIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZExvZ2luSGludCIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRDY3NPaWQiLCAiUmVxdWVzdFBhcmFtZXRlckJ1aWxkZXIuYWRkQ2NzVXBuIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZE5vbmNlIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZFN0YXRlIiwgIlJlcXVlc3RQYXJhbWV0ZXJCdWlsZGVyLmFkZENsYWltcyIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRCcm9rZXJQYXJhbWV0ZXJzIiwgIkFBRFNlcnZlclBhcmFtS2V5cy5JTlNUQU5DRV9BV0FSRSIsICJSZXF1ZXN0UGFyYW1ldGVyQnVpbGRlci5hZGRJbnN0YW5jZUF3YXJlIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLmF1dGhvcml6YXRpb25Db2RlTWlzc2luZ0Zyb21TZXJ2ZXJSZXNwb25zZSIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5zdGF0ZU5vdEZvdW5kIiwgIkNsaWVudEF1dGhFcnJvckNvZGVzLmludmFsaWRTdGF0ZSIsICJDbGllbnRBdXRoRXJyb3JDb2Rlcy5zdGF0ZU1pc21hdGNoIiwgIkNvbnN0YW50cyIsICJodHRwIiwgImhlYWRlcnMiLCAiQ29uc3RhbnRzIiwgImh0dHBzIiwgImJvZHkiLCAiTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy5pbnZhbGlkRmlsZUV4dGVuc2lvbiIsICJNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzLmludmFsaWRGaWxlUGF0aCIsICJNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzLmludmFsaWRNYW5hZ2VkSWRlbnRpdHlJZFR5cGUiLCAiTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy5pbnZhbGlkU2VjcmV0IiwgIk1hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMucGxhdGZvcm1Ob3RTdXBwb3J0ZWQiLCAiTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy5taXNzaW5nSWQiLCAiTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy5Nc2lFbnZpcm9ubWVudFZhcmlhYmxlVXJsTWFsZm9ybWVkRXJyb3JDb2RlcyIsICJNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzLm5ldHdvcmtVbmF2YWlsYWJsZSIsICJNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzLnVuYWJsZVRvQ3JlYXRlQXp1cmVBcmMiLCAiTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy51bmFibGVUb0NyZWF0ZUNsb3VkU2hlbGwiLCAiTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy51bmFibGVUb0NyZWF0ZVNvdXJjZSIsICJNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzLnVuYWJsZVRvUmVhZFNlY3JldEZpbGUiLCAiTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy51c2VyQXNzaWduZWROb3RBdmFpbGFibGVBdFJ1bnRpbWUiLCAiTWFuYWdlZElkZW50aXR5RXJyb3JDb2Rlcy53d3dBdXRoZW50aWNhdGVIZWFkZXJNaXNzaW5nIiwgIk1hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMud3d3QXV0aGVudGljYXRlSGVhZGVyVW5zdXBwb3J0ZWRGb3JtYXQiLCAiREVGQVVMVF9DQUNIRV9PUFRJT05TIiwgIkRFRkFVTFRfU1lTVEVNX09QVElPTlMiLCAiREVGQVVMVF9URUxFTUVUUllfT1BUSU9OUyIsICJ1dWlkdjQiLCAiY3J5cHRvIiwgImNyeXB0byIsICJqd3QiLCAibmFtZSIsICJ2ZXJzaW9uIiwgImNvbmZpZyIsICJOb2RlQ29uc3RhbnRzIiwgInZlcnNpb24iLCAibmFtZSIsICJ2ZXJzaW9uIiwgIk5vZGVDb25zdGFudHMiLCAiQ29uc3RhbnRzIiwgImNvbmZpZyIsICJOb2RlQ29uc3RhbnRzIiwgIk1hbmFnZWRJZGVudGl0eUVycm9yQ29kZXMuaW52YWxpZE1hbmFnZWRJZGVudGl0eUlkVHlwZSIsICJNYW5hZ2VkSWRlbnRpdHlFcnJvckNvZGVzXHJcbiAgICAgICAgICAgIC5Nc2lFbnZpcm9ubWVudFZhcmlhYmxlVXJsTWFsZm9ybWVkRXJyb3JDb2RlcyIsICJSRURJUkVDVF9VUkkiLCAiY29uZmlnIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iXQp9Cg==
